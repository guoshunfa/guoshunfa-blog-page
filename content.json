{"meta":{"title":"guoshunfa","subtitle":"å¿«ä¹ç”Ÿæ´»","description":"guoshunfa","author":"guoshunfa","url":"https://guoshunfa.com","root":"/"},"pages":[{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2024-01-28T11:41:38.863Z","updated":"2024-01-28T11:41:38.863Z","comments":false,"path":"/404.html","permalink":"https://guoshunfa.com/404.html","excerpt":"","text":""},{"title":"ä¹¦å•","date":"2024-01-28T11:41:39.311Z","updated":"2024-01-28T11:41:39.311Z","comments":false,"path":"books/index.html","permalink":"https://guoshunfa.com/books/index.html","excerpt":"","text":""},{"title":"å…³äº","date":"2024-07-09T06:03:21.366Z","updated":"2024-07-09T06:03:21.366Z","comments":false,"path":"about/index.html","permalink":"https://guoshunfa.com/about/index.html","excerpt":"","text":"12345678910111213141516171819202122232425262728293031&#123; &quot;å§“å&quot;: &quot;éƒ­é¡ºå‘&quot;, &quot;æ€§åˆ«&quot;: &quot;ç”·&quot;, &quot;å…¬å¸&quot;: &quot;ç†Šè¶£è½¯ä»¶å¼€å‘å·¥ä½œå®¤&quot;, &quot;å½“å‰ä½ç½®&quot;: &quot;æ·±åœ³&quot;, &quot;è€å®¶&quot;: &quot;å“ˆå°”æ»¨&quot;, &quot;github&quot;: &quot;https://github.com/guoshunfa&quot;, &quot;ä¸ªäººç½‘ç«™åœ°å€&quot;: &quot;https://www.guoshunfa.com&quot;, &quot;é‚®ç®±&quot;: &quot;16603684608@guoshunfa.com&quot;, &quot;æ‰‹æœºå·&quot;: &quot;16603684608&quot;, &quot;æè¿°&quot;: &quot;æ‰¿æ¥ï¼šå°ç¨‹åºå¼€å‘ã€APPå¼€å‘ã€ç½‘ç«™å¼€å‘ã€çˆ¬è™«å¼€å‘&quot;, &quot;æ‰¿æ¥&quot;: [ [&quot;å¾®ä¿¡å°ç¨‹åº&quot;, &quot;æŠ–éŸ³å°ç¨‹åº&quot;, &quot;æ”¯ä»˜å®å°ç¨‹åº&quot;], [&quot;å®‰å“APP&quot;, &quot;è‹¹æœAPP&quot;], [&quot;ä¼ä¸šå®˜ç½‘&quot;, &quot;ç®¡ç†å¹³å°&quot;, &quot;ç‹¬ç«‹ç«™&quot;, &quot;ç”µå•†ç½‘ç«™&quot;], [&quot;æ•°æ®çˆ¬è™«&quot;, &quot;æ•°æ®åˆ†æ&quot;, &quot;æ•°æ®å¤„ç†&quot;] ], &quot;æŠ€æœ¯æ ˆ&quot;: &#123; &quot;æœåŠ¡ç«¯&quot;: [&quot;Java&quot;, &quot;PHP&quot;, &quot;C++&quot;, &quot;NodeJS&quot;, &quot;Python&quot;], &quot;APP&quot;: [&quot;åŸç”Ÿå¼€å‘&quot;, &quot;UniApp&quot;], &quot;å°ç¨‹åº&quot;: [&quot;åŸç”Ÿå¼€å‘&quot;, &quot;Uniapp&quot;], &quot;æœåŠ¡å™¨&quot;: [&quot;Windows&quot;, &quot;Linux&quot;, &quot;é“¶æ²³éº’éºŸ&quot;], &quot;æ•°æ®åº“&quot;: [&quot;Mysql&quot;, &quot;Oracle&quot;, &quot;MongoDB&quot;, &quot;Redis&quot;, &quot;SQL Server&quot;, &quot;è¾¾æ¢¦&quot;], &quot;çˆ¬è™«&quot;: [&quot;Python&quot;, &quot;æ˜“è¯­è¨€&quot;] &#125;, &quot;é¢å¤–æœåŠ¡å†…å®¹&quot;: &#123; &quot;1&quot;: &quot;åˆåŒä¿éšœï¼Œæºç äº¤ä»˜&quot;, &quot;2&quot;: &quot;é¡¹ç›®æ–¹æ¡ˆå…è´¹è®¾è®¡&quot; &#125;&#125;"},{"title":"åˆ†ç±»","date":"2024-01-28T11:41:39.311Z","updated":"2024-01-28T11:41:39.311Z","comments":false,"path":"categories/index.html","permalink":"https://guoshunfa.com/categories/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2024-01-28T11:41:39.312Z","updated":"2024-01-28T11:41:39.312Z","comments":false,"path":"tags/index.html","permalink":"https://guoshunfa.com/tags/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2024-01-28T11:41:39.312Z","updated":"2024-01-28T11:41:39.312Z","comments":true,"path":"links/index.html","permalink":"https://guoshunfa.com/links/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2024-01-28T11:41:39.312Z","updated":"2024-01-28T11:41:39.312Z","comments":false,"path":"repository/index.html","permalink":"https://guoshunfa.com/repository/index.html","excerpt":"","text":""},{"title":"å·¥å…·ç®±","date":"2024-01-28T11:41:39.312Z","updated":"2024-01-28T11:41:39.312Z","comments":true,"path":"tools/index.html","permalink":"https://guoshunfa.com/tools/index.html","excerpt":"","text":"ğŸ”§ var toolGroups = { \"å¸¸ç”¨\": [ {'name': 'vercel','link': 'https://vercel.com/','desc': 'é™æ€ç½‘ç«™éƒ¨ç½²'}, {'name': 'Spring Initializr','link': 'https://start.spring.io/','desc': ''}, {'name': 'æµç¨‹å›¾è®¾è®¡', 'link': 'https://app.diagrams.net/', 'desc': ''} , {'name': 'JSONæ ¼å¼åŒ–','link': 'https://www.bejson.com/jsonviewernew/','desc': ''}, {'name': 'æ—¶é—´æˆ³è½¬æ¢','link': 'http://tool.chinaz.com/tools/unixtime.aspx','desc': ''}, {'name': 'codepen','link': 'https://codepen.io/','desc': ''}, {'name': 'BootCDN','link': 'https://www.bootcdn.cn','desc': ''}, {'name': 'å•ä½è½¬æ¢','link': 'https://www.convertworld.com/zh-hans/','desc': ''}, {'name': 'æ–‡ä»¶è½¬æ¢å™¨','link': 'https://convertio.co/zh/','desc': ''}, {'name': 'ä»£ç /æ–‡æœ¬ å¯¹æ¯”å·¥å…·','link': 'https://www.diffchecker.com/','desc': ''}, {'name': 'PDF è½¬ Markdown','link': 'https://pdf2md.morethan.io/','desc': ''}, {'name': 'åŠ å¯†/è§£å¯†','link': 'http://tool.chinaz.com/tools/textencrypt.aspx','desc': ''}, {'name': 'vectorizer','link': 'https://www.vectorizer.io/','desc': 'çœŸæ­£çš„ png è½¬ svg ç¥å™¨'}, {'name': 'tinypngå›¾ç‰‡å‹ç¼©','link': 'https://tinypng.com','desc': 'å‹ç¼©pngå¾ˆæœ‰ç”¨'}, {'name': 'å›¾ç‰‡å‹ç¼©','link': 'https://docsmall.com/','desc': ''}, {'name': 'Squoosh','link': 'https://squoosh.app/','desc': 'è°·æ­Œå‡ºå“åœ¨çº¿å…è´¹å›¾ç‰‡å‹ç¼©å·¥å…·'}, {'name': 'jsDelivr', 'link': 'http://www.jsdelivr.com/', 'desc': ''} , {'name': 'unpkg', 'link': 'https://unpkg.com/', 'desc': ''} , {'name': 'æ­£åˆ™å¯è§†åŒ–', 'link': 'https://regex101.com/', 'desc': ''} , {'name': 'åç¼–è¯‘ Jar', 'link': 'http://www.decompiler.com', 'desc': ''} , {'name': 'åç¼–è¯‘ Class', 'link': 'http://javare.cn/De', 'desc': ''} , {'name': 'ä»£ç å›¾ç‰‡ç”Ÿæˆå™¨', 'link': 'https://carbon.now.sh/', 'desc': ''} , {'name': 'å›¾ç‰‡è½¬æ–‡å­—', 'link': 'https://web.baimiaoapp.com/', 'desc': ''} , {'name': 'JSON è½¬æ¢ Excel', 'link': 'http://j2e.kpoda.com', 'desc': ''} , ], \"å¼€å‘\" :[ {'name': 'Can I use','link': 'https://caniuse.com/','desc': 'æŸ¥çœ‹å±æ€§å’Œæ–¹æ³•çš„å…¼å®¹æ€§'}, {'name': '30 seconds of code','link': 'https://30secondsofcode.org/','desc': 'æ”¶é›†äº†è®¸å¤šæœ‰ç”¨çš„ä»£ç å°ç‰‡æ®µ'}, {'name': 'codepen','link': 'https://codepen.io','desc': 'åœ¨çº¿ä»£ç ç¼–è¾‘ä¸æ¼”ç¤º'}, {'name': 'codesandbox','link': 'https://codesandbox.io','desc': 'å†…åµŒVSCodeçš„åœ¨çº¿IDE'}, {'name': 'æ‰‹å†Œç½‘','link': 'https://www.shouce.ren/','desc': ''}, ], \"API\": [ {'name': 'Java', 'link': 'https://docs.oracle.com/en/java/javase/index.html', 'desc': ''} , {'name': 'Spring', 'link': 'https://spring.io/projects', 'desc': ''} , {'name': 'MDN', 'link': 'https://developer.mozilla.org/zh-CN/docs/Web', 'desc': ''} , {'name': 'runoob', 'link': 'https://www.runoob.com', 'desc': ''} , {'name': 'React', 'link': 'https://zh-hans.reactjs.org/docs/getting-started.html', 'desc': ''} , {'name': 'React Router', 'link': 'https://reactrouter.com/docs/en/v6', 'desc': ''} , {'name': 'MongoDB', 'link': 'https://docs.mongodb.com', 'desc': ''} , {'name': 'Vue 3.x', 'link': 'https://cn.vuejs.org/', 'desc': ''} , {'name': 'element plus', 'link': 'https://element-plus.gitee.io/zh-CN/', 'desc': ''} , {'name': 'Vuepress v1.x', 'link': 'https://vuepress.vuejs.org/zh/', 'desc': ''} , {'name': 'Vuepress v2.x', 'link': 'https://v2.vuepress.vuejs.org/zh/', 'desc': ''} , {'name': 'Vdoing', 'link': 'https://doc.xugaoyi.com/pages/793dcb/', 'desc': ''} , {'name': 'jdk1.8', 'link': 'https://www.matools.com/api/java8', 'desc': ''} , {'name': 'hutool', 'link': 'https://hutool.cn/', 'desc': ''} , {'name': 'Linux å‘½ä»¤å¤§å…¨', 'link': 'https://www.linuxcool.com/', 'desc': ''} , {'name': 'Linuxå‘½ä»¤æ‰‹å†Œ', 'link': 'https://ipcmen.com/', 'desc': ''} , {'name': 'docker hub', 'link': 'https://hub.docker.com/', 'desc': ''} , {'name': 'docker docs', 'link': 'https://docs.docker.com/', 'desc': ''} , {'name': 'å›½å†…mavenæœç´¢', 'link': 'http://mvn.coderead.cn/', 'desc': ''} , {'name': 'æºç é˜…è¯»ç½‘', 'link': 'https://www.coderead.cn/', 'desc': ''} , {'name': 'JaråŒ…æœç´¢', 'link': 'http://www.java2s.com/Code/Jar/CatalogJar.htm', 'desc': ''} , {'name': 'csså­¦ä¹ ', 'link': 'https://zh.learnlayout.com/', 'desc': ''} , ], \"è¿ç»´ç®¡ç†å¹³å°\": [ {'name': 'dnspodåŸŸåæ§åˆ¶å°', 'link': 'https://console.dnspod.cn', 'desc': ''} , {'name': 'è…¾è®¯äº‘æ§åˆ¶å°', 'link': 'https://console.cloud.tencent.com/', 'desc': ''} , {'name': 'é˜¿é‡Œäº‘æ§åˆ¶å°', 'link': 'https://homenew.console.aliyun.com/', 'desc': ''} , {'name': 'å¾®ä¿¡å…¬ä¼—å·æ§åˆ¶å°', 'link': 'https://mp.weixin.qq.com/', 'desc': ''} , {'name': 'ç™¾åº¦ç«™é•¿å¹³å°', 'link': 'https://ziyuan.baidu.com/', 'desc': ''} , ], \"æŠ€æœ¯å¤§ä½¬åšå®¢\": [ {'name': 'Java å…¨æ ˆçŸ¥è¯†ä½“ç³»', 'link': 'https://www.pdai.tech/', 'desc': ''} , {'name': 'Java æˆç¥ä¹‹è·¯', 'link': 'http://hollischuang.gitee.io/tobetopjavaer/#/menu', 'desc': ''} , {'name': 'Bash è„šæœ¬æ•™ç¨‹', 'link': 'https://wangdoc.com/bash/', 'desc': ''} , {'name': 'ES6æ•™ç¨‹', 'link': 'http://es6.ruanyifeng.com/', 'desc': ''} , {'name': 'è…¾è®¯äº‘å¼€å‘è€…æ‰‹å†Œ', 'link': 'https://cloud.tencent.com/developer/devdocs', 'desc': ''} , {'name': 'èœé¸Ÿæ•™ç¨‹', 'link': 'https://www.runoob.com/', 'desc': ''} , {'name': 'ç°ä»£JavaScriptæ•™ç¨‹', 'link': 'https://zh.javascript.info', 'desc': ''} , ], \"è®¾è®¡-è¾…åŠ©å¼€å‘åˆ©å™¨\": [ {'name': 'äº§å“å¤§ç‰›', 'link': 'http://www.pmdaniu.com/', 'desc': ''} , {'name': 'ç£¨åˆ€', 'link': 'https://modao.cc/pricing', 'desc': ''} , {'name': 'åˆ›é€ å¸ˆå¯¼èˆª', 'link': 'http://chuangzaoshi.com/', 'desc': ''} , {'name': 'è®¾è®¡å¸ˆç½‘å€å¯¼èˆª', 'link': 'http://hao.uisdc.com/', 'desc': ''} , {'name': 'uimovement', 'link': 'https://uimovement.com/', 'desc': ''} , {'name': 'awwwards', 'link': 'https://www.awwwards.com/', 'desc': ''} , {'name': 'dribbble', 'link': 'https://dribbble.com/', 'desc': ''} , {'name': 'BÄ“hance', 'link': 'https://www.behance.net/', 'desc': ''} , {'name': 'Logojoy', 'link': 'https://logojoy.com/', 'desc': ''} , {'name': 'brandmark', 'link': 'http://brandmark.io/', 'desc': ''} , {'name': 'instant', 'link': 'https://instantlogodesign.com/', 'desc': ''} , {'name': 'logo-maker', 'link': 'https://www.designevo.com/logo-maker/', 'desc': ''} , {'name': 'coolors', 'link': 'https://coolors.co/', 'desc': ''} , {'name': 'colorhunt', 'link': 'http://colorhunt.co/', 'desc': ''} , {'name': 'uigradients', 'link': 'https://uigradients.com/#SummerDog', 'desc': ''} , {'name': 'designcap', 'link': 'https://www.designcap.com/', 'desc': ''} , {'name': 'Flat UI è‰²è¡¨', 'link': 'https://flatuicolors.com/', 'desc': ''} , {'name': '0to255', 'link': 'https://www.0to255.com/', 'desc': ''} , {'name': 'nord ', 'link': 'https://github.com/arcticicestudio/nord', 'desc': ''} , {'name': 'colorkitty', 'link': 'https://colorkitty.com/', 'desc': ''} , {'name': 'design.youzan', 'link': 'http://design.youzan.com/', 'desc': ''} , {'name': 'ç¨¿å®šè®¾è®¡', 'link': 'https://www.gaoding.com/', 'desc': ''} , {'name': 'æ¥ç”»è§†é¢‘', 'link': 'https://www.laihua.com/', 'desc': ''} , {'name': 'Arkie æµ·æŠ¥åˆ¶ä½œå·¥å…·', 'link': 'https://www.arkie.cn/', 'desc': ''} , {'name': 'æ¯”æ ¼ PPT', 'link': 'http://www.tretars.com/', 'desc': ''} , {'name': 'ä¼˜å“ PPT', 'link': 'http://www.ypppt.com/', 'desc': ''} , {'name': 'processonåœ¨çº¿ä½œå›¾', 'link': 'https://www.processon.com/', 'desc': ''} , {'name': 'ç™¾åº¦è„‘å›¾', 'link': 'https://naotu.baidu.com', 'desc': ''} , {'name': 'uigradients', 'link': 'https://uigradients.com/', 'desc': ''} , {'name': 'freepik', 'link': 'https://www.freepik.com/', 'desc': ''} , {'name': 'è§…å…ƒç´ ', 'link': 'http://www.51yuansu.com/', 'desc': ''} , {'name': 'æå®šè®¾è®¡', 'link': 'https://www.gaoding.com/', 'desc': ''} , {'name': 'ç«™é…·', 'link': 'https://www.zcool.com.cn/', 'desc': ''} , {'name': 'èŠ±ç“£', 'link': 'https://huaban.com/', 'desc': ''} , {'name': 'è™å…‹', 'link': 'https://huke88.com/', 'desc': ''} , {'name': 'beTheme', 'link': 'https://themes.muffingroup.com/be/splash/', 'desc': ''} , {'name': 'ç´ æå›¾ç‰‡å’Œè§†é¢‘', 'link': 'https://www.pexels.com/zh-cn/', 'desc': ''} , {'name': 'å›¾ç‰‡é›†', 'link': 'https://zyj_yida.gitee.io/pic/', 'desc': ''} , {'name': 'PNGå›¾ç‰‡ç´ æèµ„æº', 'link': 'https://www.pngsucai.com/', 'desc': ''} , {'name': 'é«˜æ¸…å…è´¹å›¾ç‰‡', 'link': 'https://www.pexels.com/', 'desc': ''} , {'name': 'é«˜æ¸…å…è´¹å›¾ç‰‡ 2', 'link': 'https://unsplash.com/', 'desc': ''} , {'name': 'Unsplash', 'link': 'https://unsplash.com/', 'desc': ''} , {'name': 'iconfont', 'link': 'https://www.iconfont.cn/', 'desc': ''} , {'name': 'Ikonate', 'link': 'https://github.com/mikolajdobrucki/ikonate', 'desc': ''} , {'name': 'remixicon', 'link': 'https://remixicon.com/', 'desc': ''} , {'name': 'feather', 'link': 'https://github.com/feathericons/feather', 'desc': ''} , {'name': 'undraw', 'link': 'https://undraw.co/illustrations', 'desc': ''} , {'name': 'icomoon', 'link': 'https://icomoon.io/', 'desc': ''} , {'name': 'cssicon', 'link': 'http://cssicon.space/#/', 'desc': ''} , {'name': 'CSS triangle generator', 'link': 'http://apps.eky.hk/css-triangle-generator/', 'desc': ''} , {'name': 'clippy', 'link': 'http://bennettfeely.com/clippy/', 'desc': ''} , {'name': 'Lorem Picsum', 'link': 'https://picsum.photos/', 'desc': ''} , {'name': 'emojiè¡¨æƒ…', 'link': 'https://emojipedia.org/', 'desc': ''} , {'name': 'emojiè¡¨æƒ…å¤‡å¿˜å½•', 'link': 'https://www.webfx.com/tools/emoji-cheat-sheet', 'desc': ''} , {'name': 'gitmoji', 'link': 'https://github.com/carloscuesta/gitmoji', 'desc': ''} , {'name': 'å¾®äº¤äº’', 'link': 'http://aliscued.lofter.com/', 'desc': ''} , {'name': 'Little Big Details', 'link': 'http://littlebigdetails.com/', 'desc': ''} , {'name': 'cruip', 'link': 'https://cruip.com/', 'desc': ''} , {'name': 'Comixify', 'link': 'https://comixify.ii.pw.edu.pl/', 'desc': ''} , {'name': 'taiko-web', 'link': 'https://github.com/bui/taiko-web', 'desc': ''} , {'name': 'CSS Tricks','link': 'http://css-tricks.neatbang.com/','desc': 'CSSæŠ€å·§æ”¶é›†ä¸æ¼”ç¤º'}, {'name': 'CSSç”Ÿæˆå™¨', 'link': 'https://neumorphism.io/', 'desc': ''} , {'name': 'CSSæ¸å˜ç”Ÿæˆå™¨', 'link': 'https://www.colorzilla.com/gradient-editor/', 'desc': ''} , {'name': 'CSS3-Box Shadow(é˜´å½±)', 'link': 'https://www.html.cn/tool/css3Preview/Box-Shadow.html', 'desc': ''} , {'name': 'è´å¡å°”æ›²çº¿ç”Ÿæˆå™¨', 'link': 'https://cubic-bezier.com', 'desc': ''} , {'name': 'èŠ±çº¹èƒŒæ™¯ç”Ÿæˆå™¨', 'link': 'http://www.heropatterns.com/', 'desc': ''} , {'name': 'èŠ±çº¹èƒŒæ™¯css', 'link': 'https://github.com/bansal-io/pattern.css', 'desc': ''} , ], \"å¨±ä¹\": [ {'name': 'æ…•è¯¾ç½‘', 'link': 'https://www.imooc.com/', 'desc': ''} , {'name': 'å¦™å‘³è¯¾å ‚', 'link': 'https://www.miaov.com/', 'desc': ''} , {'name': 'ä¸­å›½å¤§å­¦MOOC', 'link': 'https://www.icourse163.org/', 'desc': ''} , {'name': 'bilibili', 'link': 'https://www.bilibili.com/', 'desc': ''} , {'name': 'egghead', 'link': 'http://egghead.io', 'desc': ''} , {'name': 'CCTVã€å«è§†é«˜æ¸…ç›´æ’­', 'link': 'http://ivi.bupt.edu.cn/', 'desc': ''} , {'name': 'SoBooks', 'link': 'https://sobooks.cc/', 'desc': ''} , {'name': 'é¸ æ‘©æœä¹¦', 'link': 'https://www.jiumodiary.com/', 'desc': ''} , {'name': 'å…¨å†å²', 'link': 'https://www.allhistory.com/', 'desc': ''} , {'name': 'å¥‡è¶£ç½‘ç«™æ”¶è—å®¶', 'link': 'https://fuun.fun/', 'desc': ''} , {'name': 'å¸®ä½ ç™¾åº¦ä¸€ä¸‹', 'link': 'http://www.baidu-x.com/', 'desc': ''} , {'name': 'å›½é™…ç‰ˆ', 'link': 'http://lmgtfy.com/', 'desc': ''} , {'name': 'wallhaven', 'link': 'https://alpha.wallhaven.cc/', 'desc': ''} , {'name': 'URL åœ°å€æ’­æ”¾ Emojis åŠ¨ç”»', 'link': 'http://matthewrayfield.com/articles/animating-urls-with-javascript-and-emojis/#ğŸŒ–', 'desc': ''} , {'name': \"Can't Unsee\", 'link': 'https://cantunsee.space/', 'desc': ''} , {'name': 'ggtalk', 'link': 'https://talk.swift.gg/', 'desc': ''} , {'name': 'awesome-comment', 'link': 'https://github.com/Blankj/awesome-comment', 'desc': ''} , {'name': 'text-img', 'link': 'https://www.text-image.com/index.html', 'desc': ''} , {'name': 'weird-fonts', 'link': 'https://github.com/beizhedenglong/weird-fonts', 'desc': ''} , {'name': 'snake', 'link': 'https://github.com/epidemian/snake', 'desc': ''} , {'name': 'zero-width-lib', 'link': 'https://github.com/yuanfux/zero-width-lib', 'desc': ''} , {'name': 'abbreviations', 'link': 'https://www.abbreviations.com/', 'desc': ''} , {'name': 'magi', 'link': 'https://magi.com/', 'desc': ''} , {'name': 'è¯ºåŸºäºšçŸ­ä¿¡å›¾ç‰‡ç”Ÿæˆå™¨', 'link': 'https://zzkia.noddl.me:8020/', 'desc': ''} , {'name': 'ENFI ä¸‹è½½å™¨', 'link': 'https://www.macbl.com/app/internet/enfi', 'desc': ''} , {'name': 'macapp', 'link': 'https://www.macapp.so/', 'desc': ''} , {'name': 'appstorrent', 'link': 'https://appstorrent.ru/32-pixelmator-pro.html', 'desc': ''} , {'name': 'å¤§åŠ›ç›˜', 'link': 'https://dalipan.com/', 'desc': ''} , {'name': 'ç²¾æ ¡ å®Œæ•´ æè‡´ Windowsç³»ç»Ÿä¸‹è½½ä»“å‚¨ç«™', 'link': 'https://www.hellowindows.cn/', 'desc': ''} , {'name': 'VideoFk','link': 'https://www.videofk.com/','desc': 'VideoFk è§†é¢‘åœ¨çº¿è§£æä¸‹è½½'}, ], \"æ¥é¡¹ç›®å¹³å°\": [ {'name': 'äº‘é˜Ÿå‹', 'link': 'https://www.duiyou360.com/', 'desc': ''} , {'name': 'upwork', 'link': 'https://www.fiverr.com/pages/freelancers-not-work?utm_source=google&utm_medium=cpc&utm_campaign=g_ge-row_ln-en_dv-desktop_cat-competitors_mt-exact_sf-upwork_qq-high-mid&utm_term=s_upwork_exact&utm_content=AdID%5e630319879658%5eKeyword%5eupwork%5ePlacement%5e%5eDevice%5ec&caid=17317009410&agid=137013247197&ad_id=630319879658&kw=upwork&lpcat=&show_join=true&cq_src=google_ads&cq_cmp=17317009410&cq_term=upwork&cq_plac=&cq_net=g&cq_plt=gp&gclid=Cj0KCQiA45qdBhD-ARIsAOHbVdGtPgJ8YHqIM_eGKydxWY8XKRcxe-hAH6o6m8nNuXpuIdrcf7vjShkaAmWTEALw_wcB&gclsrc=aw.ds', 'desc': ''} , {'name': 'toptal', 'link': 'https://www.toptal.com/', 'desc': ''} , {'name': 'åœ†é¢†', 'link': 'https://www.yuanling.com/home', 'desc': ''} , {'name': 'ç¨‹åºå‘˜å®¢æ ˆ', 'link': 'https://www.proginn.com', 'desc': ''} , {'name': 'å¼€æºä¼—åŒ…', 'link': 'https://zb.oschina.net', 'desc': ''} , {'name': 'ç å¸‚', 'link': 'https://www.codemart.com', 'desc': ''} , {'name': 'çŒ¿æ€¥é€', 'link': 'https://www.yuanjisong.com', 'desc': ''} , {'name': 'å¼€å‘é‚¦', 'link': 'https://www.kaifabang.com', 'desc': ''} , ] }; for(var toolGroupName in toolGroups){ document.write(''+toolGroupName+''); for(var tool of toolGroups[toolGroupName]){ var desc = tool['desc'] === '' ? '' : 'ï¼ˆ'+tool['desc']+'ï¼‰' document.write(''+tool['name']+desc+''); } document.write(''); } .tool { width: 25%; min-height: 30px; }"}],"posts":[{"title":"ä¸å·å­¦å†å’ŒèƒŒæ™¯çš„èµ›é“ï¼Œä¹Ÿèƒ½æœˆå…¥è¿‡ä¸‡ï¼Ÿ","slug":"åˆ›ä¸šç¬”è®°/ä¸å·å­¦å†å’ŒèƒŒæ™¯çš„èµ›é“ï¼Œä¹Ÿèƒ½æœˆå…¥è¿‡ä¸‡ï¼Ÿ","date":"2024-07-11T05:45:20.000Z","updated":"2024-07-11T07:55:19.549Z","comments":true,"path":"2024/07/ä¸å·å­¦å†å’ŒèƒŒæ™¯çš„èµ›é“ï¼Œä¹Ÿèƒ½æœˆå…¥è¿‡ä¸‡ï¼Ÿ/","link":"","permalink":"https://guoshunfa.com/2024/07/%E4%B8%8D%E5%8D%B7%E5%AD%A6%E5%8E%86%E5%92%8C%E8%83%8C%E6%99%AF%E7%9A%84%E8%B5%9B%E9%81%93%EF%BC%8C%E4%B9%9F%E8%83%BD%E6%9C%88%E5%85%A5%E8%BF%87%E4%B8%87%EF%BC%9F/","excerpt":"","text":"èƒ½åŠ›è‡³ä¸Šï¼Ÿå¥½åƒå¹¶ä¸æ˜¯ã€‚ç°åœ¨å°±ä¸šç¯å¢ƒé¦–å…ˆçœ‹ä½ çš„å­¦å†ï¼Œå…¶æ¬¡æ˜¯èƒŒæ™¯è°ƒæŸ¥ã€‚èƒ½æ’‘è¿‡å»çš„è¿˜ä¼šæœ‰é¢è¯•è¯æœ¯è€ƒæ ¸ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å¤§å¤šæ•°äººå¯èƒ½å°±è¢«ç­›é€‰ä¸‹æ¥äº†ã€‚ä½ è¯´è‡ªå·±æœ‰èƒ½åŠ›ï¼Œéƒ½æ²¡äººé¸Ÿä½ ã€‚ æœ‰èƒ½åŠ›çœŸçš„æ²¡é¥­åƒï¼Ÿå¹¶ä¸æ˜¯ï¼Œæœ‰ä¸ªèµ›é“å¹¶ä¸éœ€è¦å­¦å†å’ŒèƒŒæ™¯ï¼Œé‚£å°±æ˜¯æ¥å•ã€‚è¿™è¾¹å¾ˆå¤šä¼™ä¼´é æ¥å•æœˆå…¥è¿‡ä¸‡ï¼Œç”šè‡³å‡ åä¸ªï¼Œè¿˜æœ‰æ­£åœ¨å½“å­¦ç”Ÿçš„ç¨‹åºå‘˜ï¼Œåªè¦æœ‰èƒ½åŠ›å®Œå…¨ä¸çœ‹è¿™äº›æ ‡ç­¾ã€‚ å…¬å¸æ‰“å·¥æ›´å¤šçš„æ˜¯å½“èºä¸é’‰ï¼Œåªéœ€è¦ç®¡è‡ªå·±é‚£ä¸€äº©ä¸‰åˆ†åœ°ã€‚æ¥å•æ›´è€ƒéªŒçš„æ˜¯ç»¼åˆå®åŠ›ï¼Œä¸€äººé¡¶ä¸€ä¸ªå›¢é˜Ÿã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè½¯ä»¶å¤–åŒ…å…¬å¸å¿…è¦çš„ç¯èŠ‚ï¼šé”€å”®æ‹‰é¡¹ç›®ã€é¡¹ç›®ç»ç†ç®¡æ§é¡¹ç›®ã€äº§å“ç»ç†è´Ÿè´£è®¾è®¡ã€ç¾å·¥è´Ÿè´£ç•Œé¢è®¾è®¡ã€å‰ç«¯&amp;åç«¯&amp;æµ‹è¯•å·¥ç¨‹å¸ˆè´Ÿè´£å¼€å‘å’Œæµ‹è¯•å·¥ä½œï¼Œè®©ä½ è‡ªå·±åšå…¨éƒ¨ï¼Œå…¶å®ä¹Ÿä¸å¤ªç°å®ï¼Œæ¯•ç«Ÿä¸€ä¸ªäººçš„ç²¾åŠ›æ˜¯æœ‰é™çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦è€ƒè™‘èµ„æºï¼Œä½ æ‰‹é‡Œæ˜¯å¦æœ‰è¿™æ ·çš„èµ„æºã€‚å‡è®¾æˆ‘å¯ä»¥å®Œæˆé¡¹ç›®ç®¡ç†ã€å¼€å‘æµ‹è¯•ï¼Œæˆ‘å¯ä»¥æ‰¾æ‹‰é¡¹ç›®çš„ä¼™ä¼´æ¥å•ï¼Œæ‰¾æ‡‚ç•Œé¢è®¾è®¡çš„ä¼™ä¼´åˆä½œæ¥å•ã€‚è¿™æ ·ä¸€ä¸ªé¡¹ç›®ä½ å°±å¯ä»¥æ¥äº†ï¼Œä¸€ä¸ªé¡¹ç›®3wï¼ŒæŒ‰åŠ³åˆ†é…ï¼Œå…±èµ¢ã€‚ æ¥å•æ¯”æŠ€æœ¯æ›´é‡è¦çš„æ˜¯å£ç¢‘ã€‚æˆ‘ä»¬æ˜¯è¦åˆä½œæ‹¿ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œå¦‚æœä¸­é€”ä¸€ä¸ªäººæ‰é“¾å­ï¼Œé¡¹ç›®å¯å°±æ²¡äº†ï¼Œä½ æ„Ÿè§‰æ— æ‰€è°“ï¼Œæ²¡äº†å°±çœ‹ä¸‹ä¸€ä¸ªå•å­ã€‚é‚£æˆ‘ä¸‹æ¬¡è¿˜ä¼šè·Ÿä½ åˆä½œå˜›ã€‚æ‰€ä»¥å£ç¢‘ä¸€å®šè¦ä¿æŠ¤å¥½ã€‚åˆä½œçš„ç›®çš„æ˜¯å…±èµ¢ã€‚æ„Ÿè§‰è‡ªå·±åšä¸äº†ï¼Œé‚£å°±æ‰“ä¸ªæ‹›å‘¼é€€å‡ºï¼Œè®©ç»„å›¢çš„äººå†å¡«å……å…¶ä»–äººã€‚è¿™æ ·æ‰æœ‰äººè·Ÿä½ ç©ã€‚ å½“ç„¶ï¼Œä½ å¦‚æœå¯ä»¥æ¥å—æœˆå…¥è¿‡ä¸‡ï¼Œå°±è¦æ¥å—ä¸€ä¸ªæœˆåªèƒ½æŒ£å‡ åƒã€‚æ¥å•æœ¬èº«å°±æ˜¯ä¸ç¨³å®šçš„ï¼Œæ¥å•äººè‡ªç§°ä¸ºè‡ªç”±èŒä¸šè€…ï¼Œè‡ªç”±æœ¬èº«å°±ç­‰äºé£é™©ã€‚èƒ½æ‰¿æ‹…é£é™©ï¼Œå°±å¯ä»¥äº«å—è‡ªç”±ã€‚ æ–‡ç« å¹¶ä¸æ˜¯å¸Œæœ›å„ä½éƒ½å»æ¥å•ï¼Œè€Œæ˜¯æä¾›äº†ä¸€ä¸ªå¯ä»¥é€‰æ‹©çš„æ–¹å‘ï¼Œæé†’å¤§å®¶æŒ£é’±çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ²¡å¿…è¦åªçœ‹ä¸€ç§ã€‚ åé¢ä¼šé™†ç»­æ›´æ–°ï¼š å¦‚ä½•æ‰¾é è°±çš„åˆä½œä¼™ä¼´ã€‚ æ¥å•æ¯ä¸ªç¯èŠ‚åº”è¯¥å¦‚ä½•åšã€‚ å¦‚ä½•æ¥åˆ°ä¼˜è´¨å•å­ã€‚ å…‰æ´¾å•ä¸€ä¸ªæœˆèƒ½æŒ£å¤šå°‘ã€‚ ä¸äº†è§£äº’è”ç½‘è¡Œä¸šï¼Œå¦‚ä½•åœ¨é‡Œé¢åˆ†ä¸€æ¯ç¾¹ã€‚","categories":[{"name":"åˆ›ä¸š","slug":"åˆ›ä¸š","permalink":"https://guoshunfa.com/categories/%E5%88%9B%E4%B8%9A/"}],"tags":[{"name":"çŸ¥è¯†","slug":"çŸ¥è¯†","permalink":"https://guoshunfa.com/tags/%E7%9F%A5%E8%AF%86/"}]},{"title":"å›é¡¾å·¥ä½œè¿™å‡ å¹´","slug":"åˆ›ä¸šç¬”è®°/å›é¡¾å·¥ä½œè¿™å‡ å¹´","date":"2024-07-09T06:19:23.000Z","updated":"2024-07-09T10:08:46.773Z","comments":true,"path":"2024/07/å›é¡¾å·¥ä½œè¿™å‡ å¹´/","link":"","permalink":"https://guoshunfa.com/2024/07/%E5%9B%9E%E9%A1%BE%E5%B7%A5%E4%BD%9C%E8%BF%99%E5%87%A0%E5%B9%B4/","excerpt":"","text":"æ–­æ›´ä¸€å¹´ï¼Œä»Šå¤©å¼€å§‹æ¢å¤åšå®¢çš„æ›´æ–°ã€‚ â€‹ å…ˆåšä¸ªè‡ªæˆ‘ä»‹ç»ï¼Œæˆ‘å«éƒ­é¡ºå‘ï¼Œå“ˆå°”æ»¨äººï¼Œåæ ‡æ·±åœ³ï¼Œ25å²ï¼ŒåŸJavaå…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆï¼Œç°åœ¨æ˜¯è‡ªç”±èŒä¸šè€…+åˆ›ä¸šã€‚ â€‹ å›é¡¾å·¥ä½œè¿™å‡ å¹´â€¦â€¦ â€‹ 19å¹´æ¯•ä¸šä¹‹åå…¥èŒäº†ä¸€å®¶åŒ—äº¬çš„äº’è”ç½‘ä¼ä¸šï¼Œæ­£å¼è¿›å…¥äº†è½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆè¿™ä¸ªè§’è‰²ã€‚è·Ÿå¤§å¤šæ•°åˆšå…¥è¡Œçš„åŒå­¦ä¸€æ ·ï¼Œæ¯å¤©æŒ å¤´ï¼Œä¸æ¸…æ¥šæŠ€æœ¯å¦‚ä½•åšï¼Œä¸æ¸…æ¥šé¡¹ç›®ä¸­çš„ä¸šåŠ¡å¦‚ä½•è¿è½¬ï¼Œæˆ‘è¿˜åå†…å‘ï¼Œä¸å¤ªå–œæ¬¢å’ŒåŒäº‹æ²Ÿé€šï¼Œå¯¼è‡´æ•ˆç‡å¾ˆå·®ã€‚æœ€åè‡ªå·±ä»˜å‡ºäº†å¾ˆå¤šåŠªåŠ›æ‰å­¦ä¼šè¿™äº›ã€‚éå¸¸æ„Ÿè°¢å½“æ—¶æŠ€æœ¯ç»ç†çš„è€å¿ƒæŒ‡å¯¼ï¼Œå’ŒåŒäº‹å¯¹æˆ‘çš„å¸®åŠ©ï¼Œè¿™æ®µç»å†æ˜¯æˆ‘æœ€éš¾å¿˜çš„ï¼Œä¹Ÿæ˜¯æˆ‘æå‡æœ€å¤šçš„ã€‚ â€‹ ç–«æƒ…æ¥äº†ï¼Œå¹´å‡å›å®¶ï¼Œæˆ‘è¢«å›°åˆ°äº†å“ˆå°”æ»¨ï¼Œä¸è®©å›åŒ—äº¬ã€‚å‘†äº†ä¸€ä¸ªå¤šæœˆï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æœ€åé™ªçˆ¶äº²çš„ä¸€æ®µæ—¶å…‰ï¼Œæˆ‘æ°¸è¿œå¿˜ä¸äº†æˆ‘çˆ¸ç«è½¦ç«™é€æˆ‘çš„æ ·å­ã€‚è¿‡äº†å¾ˆçŸ­æ—¶é—´ï¼Œçˆ¶äº²æŸ¥å‡ºæ¥äº†è‚ç¡¬åŒ–ï¼Œä¸€ä¸ªæœˆå°±èµ°äº†ã€‚å½“æ—¶ç›´æ¥è¾èŒå›å®¶å‘†äº†ä¸€æ®µæ—¶é—´ï¼Œæƒ³é™ªé™ªå®¶é‡Œäººï¼Œä¹Ÿè°ƒæ•´è°ƒæ•´è‡ªå·±ã€‚åé¢å›åŒ—äº¬å‰åå…¥èŒäº†å‡ å®¶å…¬å¸ï¼Œä½†æ˜¯å½“æ—¶çŠ¶æ€å¾ˆä¸å¥½ï¼Œåœ¨åŒ—äº¬çš„å‡ºç§Ÿæˆ¿é¢“åºŸäº†åŠå¹´ã€‚ä¸€ç›´åœ¨æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œäººç”Ÿçš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿæƒ³åˆ°ä¸€ä¸ªäººå‹¤å‹¤æ³æ³ä¸€è¾ˆå­ï¼Œå°±æ´»åˆ°50å‡ºå¤´ã€‚ â€‹ åé¢ç©äº†ä¸€æ¬¾æ¸¸æˆï¼Œåœ¨æ¸¸æˆé‡Œé‡åˆ°äº†å¾ˆå¤šä¼™ä¼´ï¼ŒæŠŠè‡ªå·±æŠ•å…¥è¿›å»åï¼Œçªç„¶æƒ³å¼€äº†ï¼Œæˆ‘çš„äººç”Ÿå°±æ˜¯è¦ä½“éªŒï¼Œè¦é€‚å½“æ‘†è„±å›ºæœ‰æ€ç»´ï¼Œåšè‡ªå·±ã€‚ â€‹ å¤§å˜ä¼°çœŸçš„èƒ½è®©ä¸€ä¸ªäººå½»åº•æ”¹å˜ï¼Œä»é‚£ä»¥åä¸€æ”¹å¾€æ—¥çš„æ€§æ ¼ï¼Œä¸å†åœ¨ä¹åˆ«äººçš„çœ¼å…‰ï¼Œä¹Ÿä¸å†é‚£ä¹ˆå†…å‘ã€‚ â€‹ åé¢è”ç³»äº†ç¬¬ä¸€å®¶å…¬å¸çš„äººäº‹ï¼Œåˆå›åˆ°äº†é‚£å®¶å…¬å¸ï¼Œå›å»ä¹‹åäººéƒ½æ²¡å˜ï¼Œè¿˜æ˜¯é‚£äº›ä¸ªäººï¼Œè¯´å®è¯æ„Ÿè§‰æŒºå¥½çš„ã€‚ â€‹ å¹²äº†ä¸€å¹´å·¦å³ï¼Œæ„Ÿè§‰å…¬å¸çªç„¶å¼€å§‹æŠ“å‘˜å·¥çš„è€ƒå‹¤ã€æ—¥æŠ¥ï¼Œå¾ˆä¸å¯¹åŠ²ï¼Œå¹²æ´»ä¹Ÿå¾ˆç´¯ï¼Œæˆ‘å¯¹å…¬å¸å†…éƒ¨çš„äº‹å„¿ä¸æƒ³äº†è§£ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šå‘ç”Ÿäº†ä»€ä¹ˆã€‚ â€‹ æˆ‘çªç„¶æœ‰äº†ä¸ªè®¡åˆ’ï¼Œå›å“ˆå°”æ»¨å‘å±•ã€‚ â€‹ è¯´åšå°±åšï¼Œå“ˆå°”æ»¨çš„ä¸€å®¶å¤–åŒ…å…¬å¸è”ç³»åˆ°äº†æˆ‘ï¼Œä»·æ ¼è°ˆçš„ä¸é”™ï¼Œæˆ‘å°±æ”¶æ‹¾æ”¶æ‹¾å›å»äº†ã€‚ â€‹ ä½“ä¼šäº†ä¸€ä¸‹å“ˆå°”æ»¨å·¥ä½œç‹¬ç‰¹çš„å¤„ç†æ–¹å¼ï¼ŒæŒºå¥½ç©çš„ï¼Œå·¥ä½œä¹Ÿå¾ˆè½»æ¾ã€‚é¡¹ç›®ä¸€æœŸåšå®Œï¼Œç´§æ¥ç€è¿›å…¥äº†äºŒæœŸï¼Œå¯æƒœçš„æ˜¯å¤–åŒ…å…¬å¸æ¢äº†ï¼Œå°±æ˜¯æˆ‘çš„ä¸Šçº§æ¢äº†ã€‚åˆä½œçš„æ²¡é‚£ä¹ˆæ„‰å¿«ï¼Œæ§åˆ¶æ¬²å¤ªå¼ºäº†ï¼Œå“ˆï¼Œé¡¹ç›®ä¸­èŠ‚ç‚¹äº¤ä»˜å®Œï¼Œæˆ‘å°±æ’¤äº†å‡ºæ¥ã€‚ â€‹ ç¦»èŒä¹‹åï¼Œè®¡åˆ’æ‰¾ä¸‹ä¸€ä¸ªè½è„šçš„åŸå¸‚ï¼Œå®šåˆ¶äº†ä¸€ä¸ª1-2ä¸ªæœˆçš„æ—…æ¸¸è®¡åˆ’ï¼Œåˆ°å¤„é€›é€›ã€‚ æµå—ï¼šäººæ˜¯çœŸå¤šï¼Œçº¢ç»¿ç¯ä¹Ÿå¤šï¼Œå»ä¸€ä¸ªæ™¯ç‚¹ï¼Œæ‰“è½¦è·Ÿæ­¥è¡Œä¸€ä¸ªæ—¶é•¿ã€‚ğŸ˜‘ é’å²›ï¼šéƒ½è¯´é’å²›ä¸€åŠæ˜¯ä¸œåŒ—äººï¼Œå»äº†æ˜¯æŒºå¤šï¼Œæ„Ÿè§‰åˆ°å®¶äº†ã€‚æˆ‘è¿˜æ˜¯å–œæ¬¢é’å²›çš„æµ·è¾¹ã€‚ æ­å·ï¼šå—¯ï¼Œèœæ˜¯ä¸å’‹å¥½åƒã€‚ è‹å·ï¼šé£æ™¯æŒºå¥½çš„ã€‚ ä¸œè¥ï¼šæµ·è¾¹ä¸é”™ï¼Œå°±æ˜¯æ²¡åœ°é“ã€‚ æ·±åœ³ï¼šå•¥éƒ½æŒºå¥½ï¼Œå°±æ˜¯èŸ‘è‚å¤§ã€‚ å…¶ä»–åœ°æ–¹æ²¡å•¥å½±å“äº†ã€‚ â€‹ ç»“æŸæ—…æ¸¸ä¹‹åï¼Œé€‰äº†æ·±åœ³è¿™ä¸ªåŸå¸‚ï¼Œæ¥äº†ä¹‹åå‘ç°ï¼Œmdæ‰¾ä¸åˆ°å·¥ä½œï¼ˆçœŸä¸æ„¿æ„èƒŒé‚£äº›å…«è‚¡æ–‡ï¼‰ã€‚ â€‹ åé¢æœºç¼˜å·§åˆä¸‹å‘ç°äº†æ¥å•çš„æ–¹å¼ï¼Œæ„Ÿè§‰å¾ˆé€‚åˆæˆ‘ï¼Œè‡ªç”±ã€‚å°±ç›´æ¥all inè¿›å»äº†ï¼Œ4æœˆ1å·å¼€å§‹åˆ°ç°åœ¨ï¼Œæ³¨å†Œäº†ä¸€ä¸ªå·¥ä½œå®¤ï¼Œå…¨èº«å¿ƒçš„æŠ•å…¥è¿›å»ï¼Œä¸æ–­å­¦ä¹ ã€å¤ç›˜ï¼Œæ€»ä½“æ¥è¯´æ„Ÿè§‰è¿˜è¡Œã€‚ä½†æ˜¯æ„Ÿè§‰è¿˜æ˜¯åŠ›ä½¿é”™äº†ï¼Œè¿˜æ˜¯å¾—æƒ³åŠæ³•ã€‚ â€‹ æœ€åæ€»ç»“ä¸€ä¸‹ï¼Œå·¥ä½œè¿™å‡ å¹´é‡åˆ°è¿‡å¤§å¤§å°å°çš„å›°éš¾ï¼Œä½†æ˜¯å›å¤´çœ‹å…¶å®ä¹Ÿå°±é‚£æ ·ï¼Œæœ‰ä»€ä¹ˆæ¯”æ­»äº¡æ›´éš¾çš„å‘¢ã€‚å“ˆï¼Œå¹²å°±å®Œäº†ã€‚ åé¢ä¼šé™†ç»­æ›´æ–°åšå®¢å†…å®¹ï¼Œæ‰“ç®—åˆ†äº«è‡ªå·±è¿™æ®µæ—¶é—´çš„åˆ›ä¸šç»å†å’Œä»¥å¾€å°å°ç»éªŒï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å…³æ³¨ä¸€æ³¢ã€‚","categories":[{"name":"å¤ç›˜","slug":"å¤ç›˜","permalink":"https://guoshunfa.com/categories/%E5%A4%8D%E7%9B%98/"}],"tags":[{"name":"æ€»ç»“","slug":"æ€»ç»“","permalink":"https://guoshunfa.com/tags/%E6%80%BB%E7%BB%93/"}]},{"title":"SpringBoot3é›†æˆQuartzæç®€ç‰ˆ","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringBoot/SpringBoot3é›†æˆQuartzæç®€ç‰ˆ","date":"2023-07-18T01:14:01.000Z","updated":"2024-01-28T11:41:39.305Z","comments":true,"path":"2023/07/SpringBoot3é›†æˆQuartzæç®€ç‰ˆ/","link":"","permalink":"https://guoshunfa.com/2023/07/SpringBoot3%E9%9B%86%E6%88%90Quartz%E6%9E%81%E7%AE%80%E7%89%88/","excerpt":"","text":"æ–‡ç« é¡¹ç›®ï¼šGithub Project å‰ææ–‡ç« æ‰€ç”¨ç‰ˆæœ¬ï¼š SpringBoot 3.1.1 Quartz 2.3.2 JDK 17 é›†æˆQuartzå¼•å…¥quartz mavenåº“1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;&lt;/dependency&gt; SpringBootç”¨çš„æ˜¯3.1.1ï¼Œä½¿ç”¨spring-boot-starter-quartzåº“ï¼Œquartzç‰ˆæœ¬é»˜è®¤ä¸º2.3.2ã€‚ æ·»åŠ Quartzé…ç½®æ–‡ä»¶å°†quartz.propertiesæ–‡ä»¶æ·»åŠ åˆ°resourceç›®å½•ä¸‹ã€‚ ï¼ˆquartz.propertiesæ–‡ä»¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†è¦ä½¿ç”¨é™¤æœ€åŸºæœ¬çš„é…ç½®ä¹‹å¤–çš„ä»»ä½•é…ç½®ï¼Œå®ƒå¿…é¡»ä½äºç±»è·¯å¾„ä¸Šã€‚ï¼‰ é…ç½®è¿™æ˜¯æœ€é‡è¦çš„ä¸€ç‚¹ï¼Quartzæ˜¯ä¸€ä¸ªå¯é…ç½®çš„åº”ç”¨ç¨‹åºã€‚é…ç½® Quartz çš„æœ€ä½³æ–¹æ³•æ˜¯ç¼–è¾‘ quartz.properties æ–‡ä»¶ï¼Œå¹¶å°†å…¶æ”¾åœ¨åº”ç”¨ç¨‹åºçš„ç±»è·¯å¾„ä¸­ã€‚ å»ºè®®åˆ›å»ºè‡ªå·±çš„ quartz.properties æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å¤åˆ¶å…¶ä»–æ¡ˆä¾‹çš„é…ç½®ï¼Œè¿™æ ·æ›´æ•´æ´ã€‚ å¯ç”¨å±æ€§çš„å®Œæ•´æ–‡æ¡£å¯åœ¨ Quartz é…ç½®å‚è€ƒä¸­æ‰¾åˆ°ã€‚ ä¸ºäº†å¿«é€Ÿå¯åŠ¨å’Œè¿è¡Œï¼ŒåŸºæœ¬çš„ quartz.properties å¦‚ä¸‹æ‰€ç¤ºï¼š 123org.quartz.scheduler.instanceName = MySchedulerorg.quartz.threadPool.threadCount = 3org.quartz.jobStore.class = org.quartz.simpl.RAMJobStore æ­¤é…ç½®åˆ›å»ºçš„è°ƒåº¦ç¨‹åºå…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š org.quartz.scheduler.instanceName - æ­¤è°ƒåº¦ç¨‹åºçš„åç§°å°†æ˜¯â€œMySchedulerâ€ã€‚ org.quartz.threadPool.threadCount - çº¿ç¨‹æ± ä¸­æœ‰ 3 ä¸ªçº¿ç¨‹ï¼Œè¿™æ„å‘³ç€æœ€å¤šå¯ä»¥åŒæ—¶è¿è¡Œ 3 ä¸ªä½œä¸šã€‚ org.quartz.jobStore.class - Quartz çš„æ‰€æœ‰æ•°æ®ï¼Œä¾‹å¦‚ä½œä¸šå’Œè§¦å‘å™¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œéƒ½ä¿å­˜åœ¨å†…å­˜ä¸­ï¼ˆè€Œä¸æ˜¯ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼‰ã€‚ å³ä½¿æ‚¨æœ‰ä¸€ä¸ªæ•°æ®åº“å¹¶å¸Œæœ›å°†å…¶ä¸Quartzä¸€èµ·ä½¿ç”¨ï¼Œæˆ‘ä¹Ÿå»ºè®®æ‚¨åœ¨é€šè¿‡æ•°æ®åº“æ‰“å¼€ä¸€ä¸ªå…¨æ–°çš„ç»´åº¦ä¹‹å‰ï¼Œå…ˆè®©Quartzä¸RamJobStoreåˆä½œã€‚ å¯åŠ¨ç¤ºä¾‹åº”ç”¨ç¨‹åºæ·»åŠ æµ‹è¯•ç±»QuartzTest 12345678910111213141516171819202122232425import org.quartz.Scheduler;import org.quartz.SchedulerException;import org.quartz.impl.StdSchedulerFactory;import static org.quartz.JobBuilder.*;import static org.quartz.TriggerBuilder.*;import static org.quartz.SimpleScheduleBuilder.*;public class QuartzTest &#123; public static void main(String[] args) &#123; try &#123; // Grab the Scheduler instance from the Factory Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler(); // and start it off scheduler.start(); scheduler.shutdown(); &#125; catch (SchedulerException se) &#123; se.printStackTrace(); &#125; &#125;&#125; è¯·æ³¨æ„ä»£ç ç¤ºä¾‹ä¸­çš„é™æ€å¯¼å…¥;è¿™äº›å°†åœ¨ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ä¸­å‘æŒ¥ä½œç”¨ã€‚ å¦‚æœæ‚¨å°šæœªè®¾ç½®æ—¥å¿—è®°å½•ï¼Œåˆ™æ‰€æœ‰æ—¥å¿—éƒ½å°†å‘é€åˆ°æ§åˆ¶å°ï¼Œæ‚¨çš„è¾“å‡ºå°†å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516171809:24:01.268 [main] INFO org.quartz.impl.StdSchedulerFactory -- Using default implementation for ThreadExecutor09:24:01.311 [main] INFO org.quartz.core.SchedulerSignalerImpl -- Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl09:24:01.311 [main] INFO org.quartz.core.QuartzScheduler -- Quartz Scheduler v.2.3.2 created.09:24:01.312 [main] INFO org.quartz.simpl.RAMJobStore -- RAMJobStore initialized.09:24:01.313 [main] INFO org.quartz.core.QuartzScheduler -- Scheduler meta-data: Quartz Scheduler (v2.3.2) &#x27;MyScheduler&#x27; with instanceId &#x27;NON_CLUSTERED&#x27; Scheduler class: &#x27;org.quartz.core.QuartzScheduler&#x27; - running locally. NOT STARTED. Currently in standby mode. Number of jobs executed: 0 Using thread pool &#x27;org.quartz.simpl.SimpleThreadPool&#x27; - with 3 threads. Using job-store &#x27;org.quartz.simpl.RAMJobStore&#x27; - which does not support persistence. and is not clustered.09:24:01.313 [main] INFO org.quartz.impl.StdSchedulerFactory -- Quartz scheduler &#x27;MyScheduler&#x27; initialized from default resource file in Quartz package: &#x27;quartz.properties&#x27;09:24:01.313 [main] INFO org.quartz.impl.StdSchedulerFactory -- Quartz scheduler version: 2.3.209:24:01.314 [main] INFO org.quartz.core.QuartzScheduler -- Scheduler MyScheduler_$_NON_CLUSTERED started.09:24:01.315 [main] INFO org.quartz.core.QuartzScheduler -- Scheduler MyScheduler_$_NON_CLUSTERED shutting down.09:24:01.315 [main] INFO org.quartz.core.QuartzScheduler -- Scheduler MyScheduler_$_NON_CLUSTERED paused.09:24:01.315 [main] INFO org.quartz.core.QuartzScheduler -- Scheduler MyScheduler_$_NON_CLUSTERED shutdown complete. ä¸ºäº†æ›´æœ‰æ•ˆçš„å±•ç¤ºå®šæ—¶å™¨çš„å‘ˆç°æ•ˆæœï¼Œè¿™é‡Œå†åŠ ä¸€ä¸‹ã€‚ è°ƒæ•´QuartzTest 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748import org.quartz.JobDetail;import org.quartz.Scheduler;import org.quartz.SchedulerException;import org.quartz.Trigger;import org.quartz.impl.StdSchedulerFactory;import static org.quartz.JobBuilder.*;import static org.quartz.TriggerBuilder.*;import static org.quartz.SimpleScheduleBuilder.*;public class QuartzTest &#123; public static void main(String[] args) &#123; try &#123; // ä»å·¥å‚è·å–è°ƒåº¦ç¨‹åºå®ä¾‹ Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler(); // å¹¶å¯åŠ¨å®ƒ scheduler.start(); // å®šä¹‰ä½œä¸šå¹¶å°†å…¶ä¸æˆ‘ä»¬çš„ HelloJob ç±»ç»‘å®š JobDetail job = newJob(HelloJob.class) .withIdentity(&quot;job1&quot;, &quot;group1&quot;) .build(); // è§¦å‘ä½œä¸šç«‹å³è¿è¡Œï¼Œç„¶åæ¯ 3 ç§’é‡å¤ä¸€æ¬¡ Trigger trigger = newTrigger() .withIdentity(&quot;trigger1&quot;, &quot;group1&quot;) .startNow() .withSchedule(simpleSchedule() .withIntervalInSeconds(3) .repeatForever()) .build(); // å‘Šè¯‰quartzä½¿ç”¨æˆ‘ä»¬çš„è§¦å‘å™¨å®‰æ’ä½œä¸š scheduler.scheduleJob(job, trigger); Thread.sleep(60000); scheduler.shutdown(); &#125; catch (SchedulerException se) &#123; se.printStackTrace(); &#125; catch (InterruptedException e) &#123; throw new RuntimeException(e); &#125; &#125;&#125; ä½¿ç”¨ StdSchedulerFactory.getDefaultSchedulerï¼ˆï¼‰ è·å–è°ƒåº¦ç¨‹åºåï¼Œåº”ç”¨ç¨‹åºåœ¨è°ƒç”¨ scheduler.shutdownï¼ˆï¼‰ ä¹‹å‰ä¸ä¼šç»ˆæ­¢ï¼Œå› ä¸ºä¼šæœ‰æ´»åŠ¨çº¿ç¨‹ã€‚ æ·»åŠ å®šæ—¶ä»»åŠ¡ç±»HelloJob 12345678910111213141516import org.quartz.Job;import org.quartz.JobExecutionContext;import org.quartz.JobExecutionException;public class HelloJob implements Job &#123; @Override public void execute(JobExecutionContext jobExecutionContext) throws JobExecutionException &#123; try &#123; System.out.println(&quot;æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚&quot;); Thread.sleep(600); System.out.println(&quot;æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚&quot;); &#125; catch (InterruptedException e) &#123; throw new RuntimeException(e); &#125; &#125;&#125; æ§åˆ¶å°è¾“å‡ºç»“æœ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626309:36:46.942 [main] INFO org.quartz.impl.StdSchedulerFactory -- Using default implementation for ThreadExecutor09:36:46.973 [main] INFO org.quartz.core.SchedulerSignalerImpl -- Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl09:36:46.973 [main] INFO org.quartz.core.QuartzScheduler -- Quartz Scheduler v.2.3.2 created.09:36:46.974 [main] INFO org.quartz.simpl.RAMJobStore -- RAMJobStore initialized.09:36:46.976 [main] INFO org.quartz.core.QuartzScheduler -- Scheduler meta-data: Quartz Scheduler (v2.3.2) &#x27;MyScheduler&#x27; with instanceId &#x27;NON_CLUSTERED&#x27; Scheduler class: &#x27;org.quartz.core.QuartzScheduler&#x27; - running locally. NOT STARTED. Currently in standby mode. Number of jobs executed: 0 Using thread pool &#x27;org.quartz.simpl.SimpleThreadPool&#x27; - with 3 threads. Using job-store &#x27;org.quartz.simpl.RAMJobStore&#x27; - which does not support persistence. and is not clustered.09:36:46.976 [main] INFO org.quartz.impl.StdSchedulerFactory -- Quartz scheduler &#x27;MyScheduler&#x27; initialized from default resource file in Quartz package: &#x27;quartz.properties&#x27;09:36:46.976 [main] INFO org.quartz.impl.StdSchedulerFactory -- Quartz scheduler version: 2.3.209:36:46.977 [main] INFO org.quartz.core.QuartzScheduler -- Scheduler MyScheduler_$_NON_CLUSTERED started.æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚æˆ‘æ˜¯HelloJobï¼Œæˆ‘å¼€å§‹æ‰§è¡Œã€‚09:37:47.047 [main] INFO org.quartz.core.QuartzScheduler -- Scheduler MyScheduler_$_NON_CLUSTERED shutting down.09:37:47.047 [main] INFO org.quartz.core.QuartzScheduler -- Scheduler MyScheduler_$_NON_CLUSTERED paused.09:37:47.048 [main] INFO org.quartz.core.QuartzScheduler -- Scheduler MyScheduler_$_NON_CLUSTERED shutdown complete.æˆ‘æ˜¯HelloJobï¼Œæˆ‘æ‰§è¡Œç»“æŸã€‚ä¸ç›®æ ‡ VM æ–­å¼€è¿æ¥, åœ°å€ä¸º: &#x27;&#x27;127.0.0.1:60612&#x27;ï¼Œä¼ è¾“: &#x27;å¥—æ¥å­—&#x27;&#x27;è¿›ç¨‹å·²ç»“æŸ,é€€å‡ºä»£ç 0 å‚è€ƒæ–‡ç«  Configuration Reference (quartz-scheduler.org)","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/categories/SpringBoot/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"Quartz","slug":"Quartz","permalink":"https://guoshunfa.com/tags/Quartz/"}]},{"title":"SpringBoot3é›†æˆQuartzè¯¦ç»†ç‰ˆ","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringBoot/SpringBoot3é›†æˆQuartzè¯¦ç»†ç‰ˆ","date":"2023-07-18T01:14:01.000Z","updated":"2024-01-28T11:41:39.306Z","comments":true,"path":"2023/07/SpringBoot3é›†æˆQuartzè¯¦ç»†ç‰ˆ/","link":"","permalink":"https://guoshunfa.com/2023/07/SpringBoot3%E9%9B%86%E6%88%90Quartz%E8%AF%A6%E7%BB%86%E7%89%88/","excerpt":"","text":"æ–‡ç« é¡¹ç›®ï¼šGithub Project ç®€ä»‹æœ¬æ–‡ç« ä¼šæè¿°å¦‚ä½•ç”¨SpringBootæ›´å¥½çš„é›†æˆQuartzå®šæ—¶å™¨ï¼Œä»Quartzé…ç½®ã€å¦‚ä½•æŒä¹…åŒ–ã€å¦‚ä½•è®¾è®¡ç­‰æ–¹é¢è¿›è¡Œæè¿°ã€‚æœ¬æ–‡ç« ä¸ æ–‡ç« æ‰€ç”¨ç‰ˆæœ¬ï¼š SpringBoot 3.1.1 Quartz 2.3.2 JDK 17 Mysql 8.0.33 MongoDB 6.0.8 Quartzé…ç½®æè¿°Quartz çš„é…ç½®é€šå¸¸é€šè¿‡ä½¿ç”¨å±æ€§æ–‡ä»¶æ¥å®Œæˆï¼Œå¹¶ç»“åˆä½¿ç”¨ StdSchedulerFactory ï¼ˆä½¿ç”¨é…ç½®æ–‡ä»¶å¹¶å®ä¾‹åŒ–è°ƒåº¦ç¨‹åºï¼‰ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒStdSchedulerFactory ä»â€œå½“å‰å·¥ä½œç›®å½•â€åŠ è½½ä¸€ä¸ªåä¸ºâ€œquartz.propertiesâ€çš„å±æ€§æ–‡ä»¶ã€‚ å¦‚æœå¤±è´¥ï¼Œåˆ™åŠ è½½ä½äº org&#x2F;quartz åŒ…ä¸­çš„â€œquartz.propertiesâ€æ–‡ä»¶ï¼ˆä½œä¸ºèµ„æºï¼‰ã€‚å¦‚æœä½  å¸Œæœ›ä½¿ç”¨è¿™äº›é»˜è®¤å€¼ä»¥å¤–çš„æ–‡ä»¶ï¼Œæ‚¨å¿…é¡»å®šä¹‰ç³»ç»Ÿå±æ€§â€œorg.quartz.propertiesâ€ä»¥æŒ‡å‘ æ‰€éœ€çš„æ–‡ä»¶ã€‚ æˆ–è€…ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨ä¹‹å‰è°ƒç”¨ initializeï¼ˆxxï¼‰ æ–¹æ³•ä¹‹ä¸€æ¥æ˜¾å¼åˆå§‹åŒ–å·¥å‚ åœ¨ StdSchedulerFactory ä¸Šè°ƒç”¨ getSchedulerï¼ˆï¼‰ã€‚ æŒ‡å®šçš„ JobStoreã€ThreadPool å’Œå…¶ä»– SPI ç±»çš„å®ä¾‹å°†æŒ‰åç§°åˆ›å»ºï¼Œç„¶åæŒ‰åç§°åˆ›å»º é…ç½®æ–‡ä»¶ä¸­ä¸ºå®ƒä»¬æŒ‡å®šçš„å…¶ä»–å±æ€§å°†é€šè¿‡è°ƒç”¨ç­‰æ•ˆçš„â€œsetâ€åœ¨å®ä¾‹ä¸Šè®¾ç½®ã€‚ æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå±æ€§æ–‡ä»¶åŒ…å«å±æ€§â€œorg.quartz.jobStore.myProp &#x3D; 10â€ï¼Œåˆ™åœ¨ JobStore ç±»å·²è¢«å®ä¾‹åŒ–ï¼Œå°†åœ¨å…¶ä¸Šè°ƒç”¨æ–¹æ³• â€˜setMyPropï¼ˆï¼‰â€™ã€‚ç±»å‹è½¬æ¢ä¸ºåŸºå…ƒ Java ç±»å‹ï¼ˆæ•´æ•°ã€é•¿æ•´å‹ã€æµ®ç‚¹å‹ã€åŒç²¾åº¦å‹ã€å¸ƒå°”å€¼å’Œå­—ç¬¦ä¸²ï¼‰åœ¨è°ƒç”¨å±æ€§çš„ setter ä¹‹å‰æ‰§è¡Œ æ–¹æ³•ã€‚ ä¸€ä¸ªå±æ€§å¯ä»¥é€šè¿‡æŒ‰ç…§çº¦å®šæŒ‡å®šå€¼æ¥å¼•ç”¨å¦ä¸€ä¸ªå±æ€§çš„å€¼ â€œ$@other.property.nameâ€ï¼Œä¾‹å¦‚ï¼Œå¼•ç”¨è°ƒåº¦ç¨‹åºçš„å®ä¾‹åç§°ä½œä¸ºæŸäº›å…¶ä»–å±æ€§çš„å€¼ï¼Œ æ‚¨å°†ä½¿ç”¨â€œ$@org.quartz.scheduler.instanceNameâ€ã€‚ ä¸»é…ç½® ä¸»è°ƒåº¦ç¨‹åºè®¾ç½®çš„é…ç½®ã€‚ è¿™äº›å±æ€§é…ç½®è°ƒåº¦ç¨‹åºçš„æ ‡è¯†ä»¥åŠå„ç§å…¶ä»–â€œé¡¶çº§â€è®¾ç½®ã€‚ å±æ€§åç§° è¦æ±‚ ç±»å‹ é»˜è®¤å€¼ org.quartz.scheduler.instanceName no string â€˜QuartzSchedulerâ€™ org.quartz.scheduler.instanceId no string â€˜NON_CLUSTEREDâ€™ org.quartz.scheduler.instanceIdGenerator.class no string (class name) org.quartz.simpl .SimpleInstanceIdGenerator org.quartz.scheduler.threadName no string instanceName + â€˜_QuartzSchedulerThreadâ€™ org.quartz.scheduler .makeSchedulerThreadDaemon no boolean false org.quartz.scheduler .threadsInheritContextClassLoaderOfInitializer no boolean false org.quartz.scheduler.idleWaitTime no long 30000 org.quartz.scheduler.dbFailureRetryInterval no long 15000 org.quartz.scheduler.classLoadHelper.class no string (class name) org.quartz.simpl .CascadingClassLoadHelper org.quartz.scheduler.jobFactory.class no string (class name) org.quartz.simpl.PropertySettingJobFactory org.quartz.context.key.SOME_KEY no string none org.quartz.scheduler.userTransactionURL no string (url) â€˜java:comp&#x2F;UserTransactionâ€™ org.quartz.scheduler .wrapJobExecutionInUserTransaction no boolean false org.quartz.scheduler.skipUpdateCheck no boolean false org.quartz.scheduler .batchTriggerAcquisitionMaxCount no int 1 org.quartz.scheduler .batchTriggerAcquisitionFireAheadTimeWindow no long 0 org.quartz.scheduler.instanceName å¯ä»¥æ˜¯ä»»ä½•å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”è¯¥å€¼å¯¹è°ƒåº¦ç¨‹åºæœ¬èº«æ²¡æœ‰æ„ä¹‰ - è€Œæ˜¯ç”¨ä½œå®¢æˆ·ç«¯çš„æœºåˆ¶ ç”¨äºåœ¨åŒä¸€ç¨‹åºä¸­ä½¿ç”¨å¤šä¸ªå®ä¾‹æ—¶åŒºåˆ†è°ƒåº¦ç¨‹åºçš„ä»£ç ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ç¾¤é›† åŠŸèƒ½ï¼Œæ‚¨å¿…é¡»å¯¹é›†ç¾¤ä¸­â€œé€»è¾‘ä¸Šâ€ç›¸åŒçš„è°ƒåº¦ç¨‹åºçš„æ¯ä¸ªå®ä¾‹ä½¿ç”¨ç›¸åŒçš„åç§°ã€‚ org.quartz.scheduler.instanceId å¯ä»¥æ˜¯ä»»ä½•å­—ç¬¦ä¸²ï¼Œä½†å¯¹äºæ‰€æœ‰è°ƒåº¦ç¨‹åºå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå°±å¥½åƒå®ƒä»¬æ˜¯ ç°‡ã€‚å¦‚æœæ‚¨å¸Œæœ›ä¸ºæ‚¨ç”Ÿæˆ Idï¼Œåˆ™å¯ä»¥ä½¿ç”¨å€¼â€œAUTOâ€ä½œä¸ºå®ä¾‹ IDã€‚æˆ–å€¼ â€œSYS_PROPâ€ï¼Œå¦‚æœæ‚¨å¸Œæœ›å€¼æ¥è‡ªç³»ç»Ÿå±æ€§â€œorg.quartz.scheduler.instanceIdâ€ã€‚ org.quartz.scheduler.instanceIdGenerator.class ä»…å½“ org.quartz.scheduler.instanceId è®¾ç½®ä¸ºâ€œAUTOâ€æ—¶æ‰ä½¿ç”¨ã€‚é»˜è®¤ä¸º â€œorg.quartz.simpl.SimpleInstanceIdGeneratorâ€ï¼Œå®ƒæ ¹æ®ä¸»æœºåå’Œæ—¶é—´æˆ³ç”Ÿæˆå®ä¾‹ IDã€‚ å…¶ä»– IntanceIdGenerator å®ç°åŒ…æ‹¬ SystemPropertyInstanceIdGeneratorï¼ˆè·å–å®ä¾‹ ID æ¥è‡ªç³»ç»Ÿå±æ€§â€œorg.quartz.scheduler.instanceIdâ€ï¼Œä»¥åŠä½¿ç”¨ æœ¬åœ°ä¸»æœºåï¼ˆInetAddress.getLocalHost().getHostName()ï¼‰ã€‚æ‚¨è¿˜å¯ä»¥å®ç° InstanceIdGeneratoræ¥å£ã€‚ org.quartz.scheduler.threadName å¯ä»¥æ˜¯ä½œä¸º java çº¿ç¨‹çš„æœ‰æ•ˆåç§°çš„ä»»ä½•å­—ç¬¦ä¸²ã€‚å¦‚æœæœªæŒ‡å®šæ­¤å±æ€§ï¼Œçº¿ç¨‹å°†æ”¶åˆ° è°ƒåº¦ç¨‹åºçš„åç§°ï¼ˆâ€œorg.quartz.scheduler.instanceNameâ€ï¼‰åŠ ä¸Šé™„åŠ çš„å­—ç¬¦ä¸²â€œ_QuartzSchedulerThreadâ€ã€‚ org.quartz.scheduler.makeSchedulerThreadDaemon ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆâ€œtrueâ€æˆ–â€œfalseâ€ï¼‰ï¼Œå®ƒæŒ‡å®šè°ƒåº¦ç¨‹åºçš„ä¸»çº¿ç¨‹åº”è¯¥æ˜¯å®ˆæŠ¤ç¨‹åºçº¿ç¨‹è¿˜æ˜¯ ä¸ã€‚å¦è¯·å‚é˜… org.quartz.scheduler.makeSchedulerThreadDaemon å±æ€§ï¼Œç”¨äºè°ƒæ•´ SimpleThreadPool ï¼ˆå¦‚æœè¿™æ˜¯çº¿ç¨‹æ± å®ç°ï¼‰ æ‚¨æ­£åœ¨ä½¿ç”¨ï¼ˆå¾ˆå¯èƒ½æ˜¯è¿™ç§æƒ…å†µï¼‰ã€‚ org.quartz.scheduler.threadsInheritContextClassLoaderOfInitializer ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆâ€œtrueâ€æˆ–â€œfalseâ€ï¼‰ï¼Œå®ƒæŒ‡å®š Quartz ç”Ÿæˆçš„çº¿ç¨‹æ˜¯å¦å°†ç»§æ‰¿ä¸Šä¸‹æ–‡ åˆå§‹åŒ–çº¿ç¨‹ï¼ˆåˆå§‹åŒ– Quartz å®ä¾‹çš„çº¿ç¨‹ï¼‰çš„ç±»åŠ è½½å™¨ã€‚è¿™å°†å½±å“çŸ³è‹±ä¸» è°ƒåº¦çº¿ç¨‹ã€JDBCJobStore çš„ misfire å¤„ç†çº¿ç¨‹ï¼ˆå¦‚æœä½¿ç”¨ JDBCJobStoreï¼‰ã€é›†ç¾¤æ¢å¤çº¿ç¨‹ï¼ˆå¦‚æœä½¿ç”¨ ä½¿ç”¨é›†ç¾¤ï¼‰ï¼Œä»¥åŠ SimpleThreadPool ä¸­çš„çº¿ç¨‹ï¼ˆå¦‚æœä½¿ç”¨ SimpleThreadPoolï¼‰ã€‚å°†æ­¤å€¼è®¾ç½®ä¸ºâ€œtrueâ€å¯èƒ½ä¼š å¸®åŠ©ç±»è£…å…¥ã€JNDI æŸ¥æ‰¾ä»¥åŠä¸åœ¨åº”ç”¨ç¨‹åºæœåŠ¡å™¨ä¸­ä½¿ç”¨ Quartz ç›¸å…³çš„å…¶ä»–é—®é¢˜ã€‚ org.quartz.scheduler.idleWaitTime æ˜¯è®¡åˆ’ç¨‹åºåœ¨é‡æ–°æŸ¥è¯¢å¯ç”¨è§¦å‘å™¨ä¹‹å‰ç­‰å¾…çš„æ—¶é—´é‡ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ï¼Œå½“ å¦åˆ™è°ƒåº¦ç¨‹åºå¤„äºç©ºé—²çŠ¶æ€ã€‚é€šå¸¸ï¼Œæ‚¨ä¸å¿…â€œè°ƒæ•´â€æ­¤å‚æ•°ï¼Œé™¤éæ‚¨ä½¿ç”¨çš„æ˜¯ XA äº‹åŠ¡ï¼Œ å¹¶ä¸”å­˜åœ¨å»¶è¿Ÿè§¦å‘åº”ç«‹å³è§¦å‘çš„è§¦å‘å™¨çš„é—®é¢˜ã€‚å°äº 5000 æ¯«ç§’çš„å€¼ä¸æ˜¯ å»ºè®®ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´è¿‡å¤šçš„æ•°æ®åº“æŸ¥è¯¢ã€‚å°äº 1000 çš„å€¼æ˜¯ä¸åˆæ³•çš„ã€‚ org.quartz.scheduler.dbFailureRetryInterval è®¡åˆ’ç¨‹åºåœ¨æ£€æµ‹åˆ°ä¸¢å¤± ä½œä¸šå­˜å‚¨ä¸­çš„è¿æ¥ï¼ˆä¾‹å¦‚ï¼Œä¸æ•°æ®åº“çš„è¿æ¥ï¼‰ã€‚è¿™ä¸ªå‚æ•°åœ¨ä½¿ç”¨æ—¶æ˜¾ç„¶ä¸æ˜¯å¾ˆæœ‰æ„ä¹‰ RamJobStore. org.quartz.scheduler.classLoadHelper.class é»˜è®¤ä½¿ç”¨æœ€å¥å£®çš„æ–¹æ³•ï¼Œå³ä½¿ç”¨ â€œorg.quartz.simpl.CascadingClassLoadHelperâ€ ç±» - å…¶ä¸­ turn ä½¿ç”¨æ¯éš”ä¸€ä¸ª ClassLoadHelper ç±»ï¼Œç›´åˆ°ä¸€ä¸ªç±»å·¥ä½œã€‚æ‚¨å¯èƒ½ä¸åº”è¯¥å‘ç°éœ€è¦æŒ‡å®šä»»ä½•å…¶ä»– ç±»ï¼Œå°½ç®¡åº”ç”¨ç¨‹åºæœåŠ¡å™¨ä¸­ä¼¼ä¹å‘ç”Ÿäº†å¥‡æ€ªçš„äº‹æƒ…ã€‚æ‰€æœ‰ç”µæµå¯èƒ½ ClassLoadHelper å®ç°å¯ä»¥åœ¨ org.quartz.simpl åŒ…ä¸­æ‰¾åˆ°ã€‚ org.quartz.scheduler.jobFactory.class è¦ä½¿ç”¨çš„ä½œä¸šå·¥å‚çš„ç±»åã€‚JobFatcory è´Ÿè´£ç”Ÿæˆ JobClass çš„å®ä¾‹ã€‚ é»˜è®¤å€¼æ˜¯â€œorg.quartz.simpl.PropertySettingJobFactoryâ€ï¼Œå®ƒåªæ˜¯åœ¨ç±»ä¸Šè°ƒç”¨ newInstance()æ¥ç”Ÿæˆ æ¯æ¬¡å³å°†æ‰§è¡Œæ—¶éƒ½æœ‰ä¸€ä¸ªæ–°å®ä¾‹ã€‚PropertySettingJobFactory ä¹Ÿåå°„æ€§åœ° ä½¿ç”¨ SchedulerContext å’Œ Job and Trigger JobDataMap çš„å†…å®¹è®¾ç½®ä½œä¸šçš„ Bean å±æ€§ã€‚ org.quartz.context.key.SOME_KEY è¡¨ç¤ºå°†ä½œä¸ºå­—ç¬¦ä¸²æ”¾å…¥â€œè°ƒåº¦ç¨‹åºä¸Šä¸‹æ–‡â€çš„åç§°-å€¼å¯¹ã€‚ï¼ˆè¯·å‚é˜… Scheduler.getContextï¼ˆï¼‰ï¼‰ã€‚ ä¾‹å¦‚ï¼Œè®¾ç½®â€œorg.quartz.context.key.MyKey &#x3D; MyValueâ€å°†æ‰§è¡Œç­‰æ•ˆäº scheduler.getContext().put(â€œMyKeyâ€ï¼Œ â€œMyValueâ€). é™¤éä½¿ç”¨çš„æ˜¯ JTA äº‹åŠ¡ï¼Œå¦åˆ™é…ç½®æ–‡ä»¶ä¸­åº”çœç•¥ä¸äº‹åŠ¡ç›¸å…³çš„å±æ€§ã€‚ org.quartz.scheduler.userTransactionURL åº”è®¾ç½®ä¸º JNDI URLï¼ŒQuartz å¯ä»¥åœ¨è¯¥ URL ä¸Šæ‰¾åˆ°åº”ç”¨ç¨‹åºæœåŠ¡å™¨çš„ UserTransaction ç®¡ç†å™¨ã€‚é»˜è®¤ å€¼ï¼ˆå¦‚æœæœªæŒ‡å®šï¼‰ä¸º â€œjava:comp&#x2F;UserTransactionâ€ - å®ƒé€‚ç”¨äºå‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºæœåŠ¡å™¨ã€‚ç½‘ç»œåœˆ ç”¨æˆ·å¯èƒ½éœ€è¦å°†æ­¤å±æ€§è®¾ç½®ä¸ºâ€œJTA&#x2F;UserTransactionâ€ã€‚ä»…å½“ Quartz é…ç½®ä¸ºä½¿ç”¨ JobStoreCMT å’Œ org.quartz.scheduler.wrapJobExecutionInUserTransaction è®¾ç½®ä¸º trueã€‚ org.quartz.scheduler.wrapJobExecutionInUserTransaction å¦‚æœå¸Œæœ› Quartz åœ¨å¯¹ä½œä¸šè°ƒç”¨ execute ä¹‹å‰å¯åŠ¨ç”¨æˆ·äº‹åŠ¡ï¼Œåˆ™åº”è®¾ç½®ä¸º â€œtrueâ€ã€‚Txå°† åœ¨ä½œä¸šçš„æ‰§è¡Œæ–¹æ³•å®Œæˆåæäº¤ï¼Œå¹¶åœ¨æ›´æ–°ä½œä¸šæ•°æ®æ˜ å°„ï¼ˆå¦‚æœå®ƒæ˜¯æœ‰çŠ¶æ€ä½œä¸šï¼‰ä¹‹åæäº¤ã€‚è¿™ é»˜è®¤å€¼ä¸ºâ€œå‡â€ã€‚æ‚¨å¯èƒ½è¿˜å¯¹ä½¿ç”¨ @ExecuteInJTATransaction æ³¨é‡Šæ„Ÿå…´è¶£ åœ¨æ‚¨çš„ä½œä¸šç±»ä¸Šï¼Œè¿™ä½¿æ‚¨å¯ä»¥æ§åˆ¶å•ä¸ªä½œä¸šæ˜¯å¦åº”å¯åŠ¨ JTA äº‹åŠ¡ - è€Œæ­¤å±æ€§ä¼šå¯¼è‡´å®ƒå¯¹æ‰€æœ‰ä½œä¸šå‘ç”Ÿã€‚ org.quartz.scheduler.skipUpdateCheck æ˜¯å¦è·³è¿‡è¿è¡Œå¿«é€Ÿ Web è¯·æ±‚ä»¥ç¡®å®šæ˜¯å¦æœ‰å¯ç”¨äº Quartz çš„æ›´æ–°ç‰ˆæœ¬ ä¸‹è½½ã€‚å¦‚æœæ£€æŸ¥è¿è¡Œï¼Œå¹¶æ‰¾åˆ°æ›´æ–°ï¼Œå®ƒå°†åœ¨ Quartz çš„æ—¥å¿—ä¸­æŠ¥å‘Šä¸ºå¯ç”¨ã€‚ä½  è¿˜å¯ä»¥ä½¿ç”¨ç³»ç»Ÿå±æ€§â€œorg.terracotta.quartz.skipUpdateCheck&#x3D;trueâ€ç¦ç”¨æ›´æ–°æ£€æŸ¥ï¼ˆå…¶ä¸­ æ‚¨å¯ä»¥åœ¨ç³»ç»Ÿç¯å¢ƒä¸­è®¾ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨ java å‘½ä»¤è¡Œä¸Šè®¾ç½®ä¸º -Dï¼‰ã€‚å»ºè®®æ‚¨ç¦ç”¨ ç”Ÿäº§éƒ¨ç½²çš„æ›´æ–°æ£€æŸ¥ã€‚ org.quartz.scheduler.batchTriggerAcquisition MaxCount å…è®¸è°ƒåº¦ç¨‹åºèŠ‚ç‚¹ä¸€æ¬¡è·å–ï¼ˆç”¨äºè§¦å‘ï¼‰çš„æœ€å¤§è§¦å‘å™¨æ•°ã€‚é»˜è®¤å€¼ ä¸º 1ã€‚æ•°å­—è¶Šå¤§ï¼Œè§¦å‘æ•ˆç‡è¶Šé«˜ï¼ˆåœ¨éœ€è¦ ä¸€æ¬¡å…¨éƒ¨è§¦å‘ï¼‰ - ä½†ä»£ä»·æ˜¯ç¾¤é›†èŠ‚ç‚¹ä¹‹é—´å¯èƒ½å­˜åœ¨ä¸å¹³è¡¡çš„è´Ÿè½½ã€‚å¦‚æœæ­¤å€¼ å±æ€§è®¾ç½®ä¸º &gt; 1ï¼Œå¹¶ä½¿ç”¨ JDBC JobStoreï¼Œç„¶åå±æ€§â€œorg.quartz.jobStore.acquireTriggersWithinLockâ€ å¿…é¡»è®¾ç½®ä¸ºâ€œtrueâ€ä»¥é¿å…æ•°æ®æŸåã€‚ org.quartz.scheduler.batchTriggerAcquisition FireAheadTimeWindow å…è®¸åœ¨é¢„å®šè§¦å‘æ—¶é—´ä¹‹å‰è·å–å’Œè§¦å‘è§¦å‘å™¨çš„æ—¶é—´é‡ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚é»˜è®¤å€¼ä¸º 0ã€‚æ•°å­—è¶Šå¤§ï¼Œæ‰¹é‡è·å–è§¦å‘è§¦å‘å™¨çš„å¯èƒ½æ€§å°±è¶Šå¤§ å¹¶ä¸€æ¬¡è§¦å‘å¤šä¸ªè§¦å‘å™¨ - ä»£ä»·æ˜¯è§¦å‘å™¨æ—¶é—´è¡¨æœªå¾—åˆ°ç²¾ç¡®éµå®ˆï¼ˆè§¦å‘å™¨å¯èƒ½ä¼š æ—©ç‚¹å¼€è¿™ä¸ªé‡ï¼‰ã€‚åœ¨è°ƒåº¦ç¨‹åºå…·æœ‰éå¸¸å¤§çš„æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½å¾ˆæœ‰ç”¨ï¼ˆä¸ºäº†æ€§èƒ½èµ·è§ï¼‰ éœ€è¦åŒæ—¶æˆ–æ¥è¿‘åŒæ—¶è§¦å‘çš„è§¦å‘å™¨æ•°ã€‚ çº¿ç¨‹æ± çš„é…ç½® è°ƒæ•´ä½œä¸šæ‰§è¡Œçš„èµ„æº Property Name Required Type Default Value org.quartz.threadPool.class yes string (class name) null org.quartz.threadPool.threadCount yes int -1 org.quartz.threadPool.threadPriority no int Thread.NORM_PRIORITY (5) org.quartz.threadPool.class æ˜¯è¦ä½¿ç”¨çš„çº¿ç¨‹æ± å®ç°çš„åç§°ã€‚Quartzé™„å¸¦çš„çº¿ç¨‹æ± æ˜¯â€œorg.quartz.simpl.SimpleThreadPoolâ€ï¼Œåº”è¯¥æ»¡è¶³å‡ ä¹æ¯ä¸ªç”¨æˆ·çš„éœ€æ±‚ã€‚å®ƒçš„è¡Œä¸ºéå¸¸ç®€å•ï¼Œå¹¶ä¸”ç»è¿‡äº†å¾ˆå¥½çš„æµ‹è¯•ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œè¿™äº›çº¿ç¨‹æ± â€œå­˜æ´»â€äº†è°ƒåº¦ç¨‹åºçš„ç”Ÿå­˜æœŸã€‚ org.quartz.threadPool.threadCount å¯ä»¥æ˜¯ä»»ä½•æ­£æ•´æ•°ï¼Œå°½ç®¡æ‚¨åº”è¯¥æ„è¯†åˆ°åªæœ‰ 1 åˆ° 100 ä¹‹é—´çš„æ•°å­—éå¸¸å®ç”¨ã€‚è¿™æ˜¯å¯ç”¨äºå¹¶å‘æ‰§è¡Œä½œä¸šçš„çº¿ç¨‹æ•°ã€‚å¦‚æœæ‚¨åªæœ‰å‡ ä¸ªä½œä¸šæ¯å¤©è§¦å‘å‡ æ¬¡ï¼Œé‚£ä¹ˆ 1 ä¸ªçº¿ç¨‹å°±è¶³å¤Ÿäº†ï¼å¦‚æœæ‚¨æœ‰æ•°ä»¥ä¸‡è®¡çš„ä½œä¸šï¼Œæ¯åˆ†é’Ÿéƒ½ä¼šè§¦å‘è®¸å¤šä½œä¸šï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å¸Œæœ›çº¿ç¨‹è®¡æ•°æ›´åƒ 50 æˆ– 100ï¼ˆè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºæ‚¨çš„ä½œä¸šæ‰§è¡Œçš„å·¥ä½œçš„æ€§è´¨ä»¥åŠæ‚¨çš„ç³»ç»Ÿèµ„æºï¼ org.quartz.threadPool.threadPriority å¯ä»¥æ˜¯ä»‹äº Thread.MIN_PRIORITY (which is 1)å’Œ Thread.MAX_PRIORITY (which is 10)ä¹‹é—´çš„ä»»ä½• intã€‚é»˜è®¤å€¼ä¸º Thread.NORM_PRIORITY (5)ã€‚ ç‰¹å®šäºç®€å•çº¿ç¨‹æ± çš„å±æ€§ Property Name Required Type Default Value org.quartz.threadPool.makeThreadsDaemons no boolean false org.quartz.threadPool.threadsInheritGroupOfInitializingThread no boolean true org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread no boolean false org.quartz.threadPool.threadNamePrefix no string [Scheduler Name]_Worker org.quartz.threadPool.makeThreadsDaemons å¯ä»¥è®¾ç½®ä¸ºâ€œtrueâ€ï¼Œä»¥å°†æ± ä¸­çš„çº¿ç¨‹åˆ›å»ºä¸ºå®ˆæŠ¤ç¨‹åºçº¿ç¨‹ã€‚é»˜è®¤å€¼ä¸ºâ€œå‡â€ã€‚å¦è¯·å‚é˜… org.quartz.scheduler.makeSchedulerThreadDaemon å±æ€§ã€‚ org.quartz.threadPool.threadsInheritGroupOfInitializingThread å¯ä»¥ä¸ºâ€œçœŸâ€æˆ–â€œå‡â€ï¼Œé»˜è®¤ä¸º trueã€‚ org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread å¯ä»¥æ˜¯â€œçœŸâ€æˆ–â€œå‡â€ï¼Œé»˜è®¤ä¸ºå‡ã€‚ org.quartz.threadPool.threadNamePrefix å·¥ä½œçº¿ç¨‹æ± ä¸­çº¿ç¨‹åç§°çš„å‰ç¼€ - å°†å»¶è¿Ÿä¸€ä¸ªæ•°å­—ã€‚ è‡ªå®šä¹‰çº¿ç¨‹æ± å¦‚æœä½¿ç”¨è‡ªå·±çš„çº¿ç¨‹æ± å®ç°ï¼Œåˆ™åªéœ€å°†å±æ€§å‘½åä¸ºï¼š è®¾ç½®è‡ªå®šä¹‰çº¿ç¨‹æ± çš„å±æ€§ 12org.quartz.threadPool.class = com.mycompany.goo.FooThreadPoolorg.quartz.threadPool.somePropOfFooThreadPool = someValue ä¾¦å¬å™¨çš„é…ç½®å…¨å±€ä¾¦å¬å™¨å¯ä»¥ç”± StdSchedulerFactory å®ä¾‹åŒ–å’Œé…ç½®ï¼Œæˆ–è€…æ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥è‡ªå·±å®Œæˆ ï¼Œç„¶åå°†ä¾¦å¬å™¨æ³¨å†Œåˆ°è®¡åˆ’ç¨‹åºã€‚â€œå…¨å±€â€å¬ä¼—æ”¶å¬æ¯ä¸ªäº‹ä»¶ ä½œä¸š&#x2F;è§¦å‘å™¨ï¼Œè€Œä¸ä»…ä»…æ˜¯ç›´æ¥å¼•ç”¨å®ƒä»¬çš„ä½œä¸š&#x2F;è§¦å‘å™¨ã€‚ é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®ä¾¦å¬å™¨åŒ…æ‹¬ç»™å‡ºä¸€ä¸ªåç§°ï¼Œç„¶åæŒ‡å®š ç±»åï¼Œä»¥åŠè¦åœ¨å®ä¾‹ä¸Šè®¾ç½®çš„ä»»ä½•å…¶ä»–å±æ€§ã€‚è¯¥ç±»å¿…é¡»å…·æœ‰æ— å‚æ•°æ„é€ å‡½æ•°ï¼Œå¹¶ä¸” å±æ€§ä»¥åå°„æ–¹å¼è®¾ç½®ã€‚ä»…æ”¯æŒåŸºå…ƒæ•°æ®ç±»å‹å€¼ï¼ˆåŒ…æ‹¬å­—ç¬¦ä¸²ï¼‰ã€‚ å› æ­¤ï¼Œå®šä¹‰â€œå…¨å±€â€è§¦å‘å™¨ä¾¦å¬å™¨çš„å¸¸è§„æ¨¡å¼æ˜¯ï¼š é…ç½®å…¨å±€è§¦å‘å™¨ä¾¦å¬å™¨ 123org.quartz.triggerListener.NAME.class = com.foo.MyListenerClassorg.quartz.triggerListener.NAME.propName = propValueorg.quartz.triggerListener.NAME.prop2Name = prop2Value å®šä¹‰â€œå…¨å±€â€JobListener çš„ä¸€èˆ¬æ¨¡å¼æ˜¯ï¼š é…ç½®å…¨å±€ä½œä¸šä¾¦å¬å™¨ 123org.quartz.jobListener.NAME.class = com.foo.MyListenerClassorg.quartz.jobListener.NAME.propName = propValueorg.quartz.jobListener.NAME.prop2Name = prop2Value é…ç½®è°ƒåº¦ç¨‹åºæ’ä»¶ å‘è°ƒåº¦ç¨‹åºæ·»åŠ åŠŸèƒ½ å°±åƒé€šè¿‡é…ç½®æ–‡ä»¶é…ç½®æ’ä»¶çš„ä¾¦å¬å™¨ä¸€æ ·ï¼ŒåŒ…æ‹¬ç»™å‡ºä¸€ä¸ªåç§°ï¼Œç„¶åæŒ‡å®šç±»åï¼Œä»¥åŠè¦åœ¨å®ä¾‹ä¸Šè®¾ç½®çš„ä»»ä½•å…¶ä»–å±æ€§ã€‚è¯¥ç±»å¿…é¡»å…·æœ‰ no-arg æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å±æ€§ä»¥åå°„æ–¹å¼è®¾ç½®ã€‚ä»…æ”¯æŒåŸºå…ƒæ•°æ®ç±»å‹å€¼ï¼ˆåŒ…æ‹¬å­—ç¬¦ä¸²ï¼‰ã€‚ å› æ­¤ï¼Œå®šä¹‰æ’ä»¶çš„ä¸€èˆ¬æ¨¡å¼æ˜¯ï¼š é…ç½®æ’ä»¶ 123org.quartz.plugin.NAME.class = com.foo.MyPluginClassorg.quartz.plugin.NAME.propName = propValueorg.quartz.plugin.NAME.prop2Name = prop2Value Quartzé™„å¸¦äº†å‡ ä¸ªæ’ä»¶ï¼Œå¯ä»¥åœ¨org.quartz.pluginsåŒ…ï¼ˆå’Œå­åŒ…ï¼‰ä¸­æ‰¾åˆ°ã€‚é…ç½®å…¶ä¸­ä¸€äº›çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š æ—¥å¿—è®°å½•è§¦å‘å™¨å†å²è®°å½•æ’ä»¶çš„ç¤ºä¾‹é…ç½®æ—¥å¿—è®°å½•è§¦å‘å™¨å†å²æ’ä»¶æ•è·è§¦å‘äº‹ä»¶ï¼ˆå®ƒä¹Ÿæ˜¯ä¸€ä¸ªè§¦å‘å™¨ä¾¦å¬å™¨ï¼‰å¹¶ä½¿ç”¨é›…åŠ è¾¾å…±äº«èµ„æºæ—¥å¿—è®°å½•ã€‚è¯·å‚é˜…è¯¥ç±»çš„ JavaDoc ä»¥è·å–æ‰€æœ‰å¯èƒ½å‚æ•°çš„åˆ—è¡¨ã€‚ æ—¥å¿—è®°å½•è§¦å‘å™¨å†å²è®°å½•æ’ä»¶çš„ç¤ºä¾‹é…ç½® 123456org.quartz.plugin.triggHistory.class = \\ org.quartz.plugins.history.LoggingTriggerHistoryPluginorg.quartz.plugin.triggHistory.triggerFiredMessage = \\ Trigger \\&#123;1\\&#125;.\\&#123;0\\&#125; fired job \\&#123;6\\&#125;.\\&#123;5\\&#125; at: \\&#123;4, date, HH:mm:ss MM/dd/yyyy&#125;org.quartz.plugin.triggHistory.triggerCompleteMessage = \\ Trigger \\&#123;1\\&#125;.\\&#123;0\\&#125; completed firing job \\&#123;6\\&#125;.\\&#123;5\\&#125; at \\&#123;4, date, HH:mm:ss MM/dd/yyyy\\&#125;. XML è°ƒåº¦æ•°æ®å¤„ç†å™¨æ’ä»¶çš„ç¤ºä¾‹é…ç½®ä½œä¸šåˆå§‹åŒ–æ’ä»¶ä» XML æ–‡ä»¶ä¸­è¯»å–ä¸€ç»„ä½œä¸šå’Œè§¦å‘å™¨ï¼Œå¹¶åœ¨åˆå§‹åŒ–æœŸé—´å°†å®ƒä»¬æ·»åŠ åˆ°è°ƒåº¦ç¨‹åºä¸­ã€‚å®ƒè¿˜å¯ä»¥åˆ é™¤ç°æœ‰æ•°æ®ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…è¯¥ç±»çš„ JavaDocã€‚ ä½œä¸šåˆå§‹åŒ–æ’ä»¶çš„ç¤ºä¾‹é…ç½® 12345org.quartz.plugin.jobInitializer.class = \\ org.quartz.plugins.xml.XMLSchedulingDataProcessorPluginorg.quartz.plugin.jobInitializer.fileNames = \\ data/my_job_data.xmlorg.quartz.plugin.jobInitializer.failOnFileNotFound = true è¯¥æ–‡ä»¶çš„ XML æ¶æ„å®šä¹‰å¯åœ¨æ­¤å¤„æ‰¾åˆ°ï¼š http://www.quartz-scheduler.org/xml/job_scheduling_data_1_8.xsd å…³æœºé’©å­æ’ä»¶é…ç½®ç¤ºä¾‹å…³é—­é’©å­æ’ä»¶æ•è· JVM ç»ˆæ­¢çš„äº‹ä»¶ï¼Œå¹¶åœ¨è°ƒåº¦ç¨‹åºä¸Šè°ƒç”¨å…³é—­ã€‚ å…³æœºé’©å­æ’ä»¶çš„é…ç½®ç¤ºä¾‹ 123org.quartz.plugin.shutdownhook.class = \\ org.quartz.plugins.management.ShutdownHookPluginorg.quartz.plugin.shutdownhook.cleanShutdown = true RMI æœåŠ¡å™¨å’Œå®¢æˆ·æœºçš„é…ç½® ä½¿ç”¨è¿œç¨‹çš„ Quartz å®ä¾‹ æ²¡æœ‰ä¸€ä¸ªä¸»è¦å±æ€§æ˜¯å¿…éœ€çš„ï¼Œå¹¶ä¸”æ‰€æœ‰å±æ€§éƒ½æœ‰â€œåˆç†â€çš„é»˜è®¤å€¼ã€‚é€šè¿‡RMIä½¿ç”¨çŸ³è‹±æ—¶ï¼Œæ‚¨ éœ€è¦å¯åŠ¨ä¸€ä¸ª Quartz å®ä¾‹ï¼Œå¹¶å°†å…¶é…ç½®ä¸ºé€šè¿‡ RMI â€œå¯¼å‡ºâ€å…¶æœåŠ¡ã€‚ç„¶åï¼Œåˆ›å»ºå®¢æˆ·ç«¯åˆ° æœåŠ¡å™¨é€šè¿‡é…ç½® Quartz è°ƒåº¦ç¨‹åºå°†å…¶å·¥ä½œâ€œä»£ç†â€åˆ°æœåŠ¡å™¨ã€‚ æŸäº›ç”¨æˆ·åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é‡åˆ°ç±»å¯ç”¨æ€§ï¼ˆå³ä½œä¸šç±»ï¼‰é—®é¢˜ã€‚è¦å·¥ä½œ é€šè¿‡è¿™äº›é—®é¢˜ï¼Œæ‚¨éœ€è¦äº†è§£RMIçš„â€œä»£ç åº“â€å’ŒRMIå®‰å…¨ç®¡ç†å™¨ã€‚æ‚¨å¯èƒ½ä¼šå‘ç°è¿™äº› æœ‰ç”¨çš„èµ„æºï¼š RMIå’Œä»£ç åº“çš„å‡ºè‰²æè¿°ï¼šhttp://www.kedwards.com/jini/codebase.htmlã€‚é‡ç‚¹ä¹‹ä¸€ å°±æ˜¯è¦æ„è¯†åˆ°â€œä»£ç åº“â€è¢«å®¢æˆ·ç«¯ä½¿ç”¨ï¼ æœ‰å…³å®‰å…¨ç®¡ç†å™¨çš„å¿«é€Ÿä¿¡æ¯ï¼šhttp://gethelp.devx.com/techtips/java_pro/10MinuteSolutions/10min0500.asp æœ€åï¼Œä»Java APIæ–‡æ¡£ä¸­ï¼Œé˜…è¯»RMISecurityManagerçš„æ–‡æ¡£ã€‚ Property Name Required Default Value org.quartz.scheduler.rmi.export no false org.quartz.scheduler.rmi.registryHost no â€˜localhostâ€™ org.quartz.scheduler.rmi.registryPort no 1099 org.quartz.scheduler.rmi.createRegistry no â€˜neverâ€™ org.quartz.scheduler.rmi.serverPort no random org.quartz.scheduler.rmi.proxy no false org.quartz.scheduler.rmi.export å¦‚æœæ‚¨å¸Œæœ› Quartz è°ƒåº¦ç¨‹åºé€šè¿‡ RMI å°†è‡ªèº«å¯¼å‡ºä¸ºæœåŠ¡å™¨ï¼Œè¯·å°†â€œrmi.exportâ€æ ‡å¿—è®¾ç½®ä¸º trueã€‚ org.quartz.scheduler.rmi.registryHost å¯ä»¥æ‰¾åˆ° RMI æ³¨å†Œè¡¨çš„ä¸»æœºï¼ˆé€šå¸¸ä¸ºâ€œæœ¬åœ°ä¸»æœºâ€ï¼‰ã€‚ org.quartz.scheduler.rmi.registryPort RMI æ³¨å†Œè¡¨æ­£åœ¨ä¾¦å¬çš„ç«¯å£ï¼ˆé€šå¸¸ä¸º 1099ï¼‰ã€‚ org.quartz.scheduler.rmi.createRegistry è®¾ç½®â€œrmi.createRegistryâ€æ ‡å¿—ï¼Œæ ¹æ®æ‚¨å¸Œæœ›Quartzå¦‚ä½•å¯¼è‡´åˆ›å»ºRMIæ³¨å†Œè¡¨ã€‚ä½¿ç”¨â€œå‡â€ æˆ–â€œä»ä¸â€ï¼Œå¦‚æœæ‚¨ä¸å¸Œæœ› Quartz åˆ›å»ºæ³¨å†Œè¡¨ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å·²ç»è¿è¡Œäº†å¤–éƒ¨æ³¨å†Œè¡¨ï¼‰ã€‚ç”¨ â€œtrueâ€æˆ–â€œas_neededâ€ï¼Œå¦‚æœæ‚¨å¸Œæœ› Quartz é¦–å…ˆå°è¯•ä½¿ç”¨ç°æœ‰æ³¨å†Œè¡¨ï¼Œç„¶åå›é€€åˆ°åˆ›å»º ä¸€ã€‚å¦‚æœæ‚¨å¸Œæœ› Quartz å°è¯•åˆ›å»ºæ³¨å†Œè¡¨ï¼Œç„¶åå›é€€åˆ°ä½¿ç”¨ç°æœ‰æ³¨å†Œè¡¨ï¼Œè¯·ä½¿ç”¨â€œalwaysâ€ã€‚å¦‚æœ æ³¨å†Œè¡¨å·²åˆ›å»ºï¼Œå®ƒå°†ç»‘å®šåˆ°ç»™å®šçš„â€œorg.quartz.scheduler.rmi.registryPortâ€å±æ€§ä¸­çš„ç«¯å£å·ï¼Œå¹¶ä¸” â€˜org.quartz.rmi.registryHostâ€™ åº”è¯¥æ˜¯ â€œlocalhostâ€ã€‚ org.quartz.scheduler.rmi.serverPort Quartz è®¡åˆ’ç¨‹åºæœåŠ¡å°†ç»‘å®šå’Œä¾¦å¬è¿æ¥çš„ç«¯å£ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒRMI æœåŠ¡ å°†â€œéšæœºâ€é€‰æ‹©ä¸€ä¸ªç«¯å£ï¼Œå› ä¸ºè°ƒåº¦ç¨‹åºç»‘å®šåˆ° RMI æ³¨å†Œè¡¨ã€‚ org.quartz.scheduler.rmi.proxy å¦‚æœè¦è¿æ¥åˆ°ï¼ˆä½¿ç”¨ï¼‰è¿œç¨‹æœåŠ¡çš„è°ƒåº¦ç¨‹åºï¼Œè¯·å°†â€œorg.quartz.scheduler.rmi.proxyâ€æ ‡å¿—è®¾ç½®ä¸º trueã€‚ ç„¶åï¼Œè¿˜å¿…é¡»ä¸º RMI æ³¨å†Œè¡¨è¿›ç¨‹æŒ‡å®šä¸»æœºå’Œç«¯å£ - é€šå¸¸æ˜¯â€œlocalhostâ€ç«¯å£ 1099ã€‚ ä¸ºâ€œorg.quartz.scheduler.rmi.exportâ€å’Œâ€œorg.quartz.scheduler.rmi.exportâ€æŒ‡å®šâ€œtrueâ€å€¼æ˜¯æ²¡æœ‰æ„ä¹‰çš„ â€œorg.quartz.scheduler.rmi.proxyâ€åœ¨åŒä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ - å¦‚æœè¿™æ ·åšï¼Œâ€œå¯¼å‡ºâ€é€‰é¡¹å°†è¢«å¿½ç•¥ã€‚å€¼ä¸º â€œexportâ€å’Œâ€œproxyâ€å±æ€§çš„â€œfalseâ€å½“ç„¶æ˜¯æœ‰æ•ˆçš„ï¼Œå¦‚æœæ‚¨æ²¡æœ‰é€šè¿‡RMIä½¿ç”¨Quartzã€‚ RAMJobStore çš„é…ç½® å°†ä½œä¸šå’Œè§¦å‘å™¨å­˜å‚¨åœ¨å†…å­˜ä¸­ RAMJobStore ç”¨äºå°†è°ƒåº¦ä¿¡æ¯ï¼ˆä½œä¸šã€è§¦å‘å™¨å’Œæ—¥å†ï¼‰å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚RAMJobStore å¿«é€Ÿä¸”è½»é‡çº§ï¼Œä½†å½“è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œæ‰€æœ‰è°ƒåº¦ä¿¡æ¯éƒ½ä¼šä¸¢å¤±ã€‚ RAMJobStore æ˜¯é€šè¿‡è®¾ç½®â€œorg.quartz.jobStore.classâ€å±æ€§æ¥é€‰æ‹©çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å°†è°ƒåº¦ç¨‹åºçš„ä½œä¸šå­˜å‚¨è®¾ç½®ä¸º RAMJobStore 1org.quartz.jobStore.class = org.quartz.simpl.RAMJobStore RAMJobStore å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å±æ€§è¿›è¡Œè°ƒæ•´ï¼š Property Name Required Type Default Value org.quartz.jobStore.misfireThreshold no int 60000 org.quartz.jobStore.misfireThreshold è°ƒåº¦ç¨‹åºåœ¨è¢«è§†ä¸ºâ€œé”™è¯¯è§¦å‘â€ä¹‹å‰â€œå®¹å¿â€è§¦å‘å™¨é€šè¿‡å…¶ä¸‹ä¸€æ¬¡è§¦å‘æ—¶é—´çš„æ¯«ç§’æ•°ã€‚é»˜è®¤å€¼ï¼ˆå¦‚æœæœªåœ¨é…ç½®ä¸­è¾“å…¥æ­¤å±æ€§ï¼‰ä¸º 60000ï¼ˆ60 ç§’ï¼‰ã€‚ JDBC-JobStoreTX çš„é…ç½® é€šè¿‡JDBCå°†ä½œä¸šå’Œè§¦å‘å™¨å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ JDBCJobStore ç”¨äºåœ¨å…³ç³»æ•°æ®åº“ä¸­å­˜å‚¨è°ƒåº¦ä¿¡æ¯ï¼ˆä½œä¸šã€è§¦å‘å™¨å’Œæ—¥å†ï¼‰ã€‚å®é™…ä¸Šï¼Œæ‚¨å¯ä»¥æ ¹æ®æ‰€éœ€çš„äº‹åŠ¡è¡Œä¸ºé€‰æ‹©ä¸¤ä¸ªå•ç‹¬çš„ JDBCJobStore ç±»ã€‚ JobStoreTX é€šè¿‡åœ¨æ¯æ¬¡æ“ä½œï¼ˆä¾‹å¦‚æ·»åŠ ä½œä¸šï¼‰ååœ¨æ•°æ®åº“è¿æ¥ä¸Šè°ƒç”¨ commitï¼ˆï¼‰ï¼ˆæˆ– rollbackï¼ˆï¼‰ï¼‰æ¥ç®¡ç†æ‰€æœ‰äº‹åŠ¡æœ¬èº«ã€‚JDBCJobStore é€‚ç”¨äºåœ¨ç‹¬ç«‹åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ Quartzï¼Œæˆ–è€…å¦‚æœåº”ç”¨ç¨‹åºæœªä½¿ç”¨ JTA äº‹åŠ¡ï¼Œåˆ™é€‚ç”¨äº Servlet å®¹å™¨ã€‚ JobStoreTXæ˜¯é€šè¿‡è®¾ç½®â€œorg.quartz.jobStore.classâ€å±æ€§æ¥é€‰æ‹©çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å°†è°ƒåº¦ç¨‹åºçš„ä½œä¸šå­˜å‚¨è®¾ç½®ä¸º JobStoreTX 1org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å±æ€§è°ƒæ•´ JobStoreTXï¼š Property Name Required Type Default Value org.quartz.jobStore.driverDelegateClass yes string null org.quartz.jobStore.dataSource yes string null org.quartz.jobStore.tablePrefix no string â€œQRTZ_â€ org.quartz.jobStore.useProperties no boolean false org.quartz.jobStore.misfireThreshold no int 60000 org.quartz.jobStore.isClustered no boolean false org.quartz.jobStore.clusterCheckinInterval no long 15000 org.quartz.jobStore.maxMisfiresToHandleAtATime no int 20 org.quartz.jobStore.dontSetAutoCommitFalse no boolean false org.quartz.jobStore.selectWithLockSQL no string â€œSELECT * FROM {0}LOCKS WHERE SCHED_NAME &#x3D; {1} AND LOCK_NAME &#x3D; ? FOR UPDATEâ€ org.quartz.jobStore.txIsolationLevelSerializable no boolean false org.quartz.jobStore.acquireTriggersWithinLock no boolean false (or true - see doc below) org.quartz.jobStore.lockHandler.class no string null org.quartz.jobStore.driverDelegateInitString no string null org.quartz.jobStore.driverDelegateClass é©±åŠ¨ç¨‹åºä»£è¡¨äº†è§£ä¸åŒæ•°æ®åº“ç³»ç»Ÿçš„ç‰¹å®šâ€œæ–¹è¨€â€ã€‚å¯èƒ½çš„é€‰æ‹©åŒ…æ‹¬ï¼š org.quartz.impl.jdbcjobstore.StdJDBCDelegate ï¼ˆç”¨äºå®Œå…¨ç¬¦åˆJDBCçš„é©±åŠ¨ç¨‹åºï¼‰ org.quartz.impl.jdbcjobstore.MSSQLDelegate ï¼ˆfor Microsoft SQL Serverï¼Œ and Sybaseï¼‰ org.quartz.impl.jdbcjobstore.PostgreSQLDelegate org.quartz.impl.jdbcjobstore.WebLogicDelegate ï¼ˆfor WebLogic driversï¼‰ org.quartz.impl.jdbcjobstore.oracle.OracleDelegate org.quartz.impl.jdbcjobstore.oracle.WebLogicOracleDelegate ï¼ˆç”¨äº Weblogic ä¸­ä½¿ç”¨çš„ Oracle é©±åŠ¨ç¨‹åºï¼‰ org.quartz.impl.jdbcjobstore.oracle.weblogic.WebLogicOracleDelegate ï¼ˆç”¨äº Weblogic ä¸­ä½¿ç”¨çš„ Oracle é©±åŠ¨ç¨‹åºï¼‰ org.quartz.impl.jdbcjobstore.CloudscapeDelegate org.quartz.impl.jdbcjobstore.DB2v6Delegate org.quartz.impl.jdbcjobstore.DB2v7Delegate org.quartz.impl.jdbcjobstore.DB2v8Delegate org.quartz.impl.jdbcjobstore.HSQLDBDelegate org.quartz.impl.jdbcjobstore.PointbaseDelegate org.quartz.impl.jdbcjobstore.SybaseDelegate è¯·æ³¨æ„ï¼Œå·²çŸ¥è®¸å¤šæ•°æ®åº“ä¸ StdJDBCDelegate é…åˆä½¿ç”¨ï¼Œè€Œå…¶ä»–æ•°æ®åº“å·²çŸ¥ä¸å…¶ä»–æ•°æ®åº“çš„å§”æ‰˜é…åˆä½¿ç”¨ï¼Œä¾‹å¦‚ Derby ä¸ Cloudscape å§”æ‰˜é…åˆè‰¯å¥½ï¼ˆè¿™å¹¶ä¸å¥‡æ€ªï¼‰ã€‚ org.quartz.jobStore.dataSource æ­¤å±æ€§çš„å€¼å¿…é¡»æ˜¯é…ç½®å±æ€§æ–‡ä»¶ä¸­å®šä¹‰çš„æ•°æ®æºä¹‹ä¸€çš„åç§°ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æ•°æ®æºçš„é…ç½®æ–‡æ¡£ã€‚ org.quartz.jobStore.tablePrefix JDBCJobStore çš„â€œè¡¨å‰ç¼€â€å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç­‰äºåœ¨æ•°æ®åº“ä¸­åˆ›å»ºçš„ Quartz è¡¨çš„å‰ç¼€ã€‚å¦‚æœ Quartz è¡¨ä½¿ç”¨ä¸åŒçš„è¡¨å‰ç¼€ï¼Œåˆ™å¯ä»¥åœ¨åŒä¸€æ•°æ®åº“ä¸­æ‹¥æœ‰å¤šç»„ Quartz è¡¨ã€‚ org.quartz.jobStore.useProperties â€œuse propertiesâ€æ ‡å¿—æŒ‡ç¤º JDBCJobStore JobDataMaps ä¸­çš„æ‰€æœ‰å€¼éƒ½å°†æ˜¯å­—ç¬¦ä¸²ï¼Œå› æ­¤å¯ä»¥å­˜å‚¨ä¸ºåç§°-å€¼å¯¹ï¼Œè€Œä¸æ˜¯åœ¨ BLOB åˆ—ä¸­ä»¥åºåˆ—åŒ–å½¢å¼å­˜å‚¨æ›´å¤æ‚çš„å¯¹è±¡ã€‚è¿™å¯èƒ½å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæ‚¨å¯ä»¥é¿å…å°†éå­—ç¬¦ä¸²ç±»åºåˆ—åŒ–ä¸º BLOB æ—¶å¯èƒ½å‡ºç°çš„ç±»ç‰ˆæœ¬æ§åˆ¶é—®é¢˜ã€‚ org.quartz.jobStore.misfireThreshold è°ƒåº¦ç¨‹åºåœ¨è¢«è§†ä¸ºâ€œé”™è¯¯è§¦å‘â€ä¹‹å‰â€œå®¹å¿â€è§¦å‘å™¨é€šè¿‡å…¶ä¸‹ä¸€æ¬¡è§¦å‘æ—¶é—´çš„æ¯«ç§’æ•°ã€‚é»˜è®¤å€¼ï¼ˆå¦‚æœæœªåœ¨é…ç½®ä¸­è¾“å…¥æ­¤å±æ€§ï¼‰ä¸º 60000ï¼ˆ60 ç§’ï¼‰ã€‚ org.quartz.jobStore.isClustered è®¾ç½®ä¸ºâ€œtrueâ€ä»¥æ‰“å¼€èšç±»åŠŸèƒ½ã€‚å¦‚æœæœ‰å¤šä¸ª Quartz å®ä¾‹ä½¿ç”¨åŒä¸€ç»„æ•°æ®åº“è¡¨ï¼Œåˆ™å¿…é¡»å°†æ­¤å±æ€§è®¾ç½®ä¸ºâ€œtrueâ€â€¦å¦åˆ™ä½ å°†ç»å†æµ©åŠ«ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ç¾¤é›†çš„é…ç½®æ–‡æ¡£ã€‚ org.quartz.jobStore.clusterCheckinInterval è®¾ç½®æ­¤å®ä¾‹ä¸ç¾¤é›†çš„å…¶ä»–å®ä¾‹â€œç­¾å…¥â€*çš„é¢‘ç‡ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚å½±å“æ£€æµ‹å¤±è´¥å®ä¾‹çš„é€Ÿåº¦ã€‚ org.quartz.jobStore.maxMisfiresToHandleAtATime ä½œä¸šå­˜å‚¨å°†åœ¨ç»™å®šä¼ é€’ä¸­å¤„ç†çš„æœ€å¤§è§¦å‘è§¦å‘å™¨æ•°ã€‚ä¸€æ¬¡å¤„ç†å¤šä¸ªï¼ˆè¶…è¿‡å‡ åä¸ªï¼‰å¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“è¡¨è¢«é”å®šè¶³å¤Ÿé•¿çš„æ—¶é—´ï¼Œä»¥è‡³äºè§¦å‘å…¶ä»–ï¼ˆå°šæœªé”™è¯¯è§¦å‘ï¼‰è§¦å‘å™¨çš„æ€§èƒ½å¯èƒ½ä¼šå—åˆ°é˜»ç¢ã€‚ org.quartz.jobStore.dontSetAutoCommitFalse å°†æ­¤å‚æ•°è®¾ç½®ä¸ºâ€œtrueâ€å‘Šè¯‰ Quartz ä¸è¦åœ¨ä»æ•°æ®æºè·å–çš„è¿æ¥ä¸Šè°ƒç”¨ setAutoCommitï¼ˆfalseï¼‰ã€‚è¿™åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„é©±åŠ¨ç¨‹åºåœ¨å·²ç»å…³é—­æ—¶è¢«è°ƒç”¨æ—¶ä¼šæŠ±æ€¨ã€‚æ­¤å±æ€§é»˜è®¤ä¸º falseï¼Œå› ä¸ºå¤§å¤šæ•°é©±åŠ¨ç¨‹åºè¦æ±‚è°ƒç”¨ setAutoCommitï¼ˆfalseï¼‰ã€‚ org.quartz.jobStore.selectWithLockSQL å¿…é¡»æ˜¯åœ¨â€œLOCKSâ€è¡¨ä¸­é€‰æ‹©ä¸€è¡Œå¹¶åœ¨è¯¥è¡Œä¸Šæ”¾ç½®é”çš„ SQL å­—ç¬¦ä¸²ã€‚å¦‚æœæœªè®¾ç½®ï¼Œåˆ™é»˜è®¤å€¼ä¸ºâ€œä»{0}é”å®šä¸­é€‰æ‹© *ï¼Œå…¶ä¸­ SCHED_NAME &#x3D; {1} å’Œ LOCK_NAME &#x3D; ï¼Ÿç”¨äºæ›´æ–°â€œï¼Œé€‚ç”¨äºå¤§å¤šæ•°æ•°æ®åº“ã€‚â€œ{0}â€åœ¨è¿è¡Œæ—¶æ›¿æ¢ä¸ºä¸Šé¢é…ç½®çš„TABLE_PREFIXã€‚â€œ{1}â€å°†æ›¿æ¢ä¸ºè°ƒåº¦ç¨‹åºçš„åç§°ã€‚ org.quartz.jobStore.txIsolationLevelSerializable å€¼â€œtrueâ€å‘Šè¯‰Quartzï¼ˆä½¿ç”¨JobStoreTXæˆ–CMTæ—¶ï¼‰åœ¨JDBCè¿æ¥ä¸Šè°ƒç”¨setTransactionIsolationï¼ˆConnection.TRANSACTION_SERIALIZABLEï¼‰ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢æŸäº›æ•°æ®åº“åœ¨é«˜è´Ÿè½½ä¸‹å‡ºç°é”å®šè¶…æ—¶ï¼Œä»¥åŠâ€œæŒä¹…â€äº‹åŠ¡ã€‚ org.quartz.jobStore.acquireTriggersWithinLock æ˜¯å¦åº”åœ¨æ˜¾å¼æ•°æ®åº“é”ä¸­è·å–ä¸‹ä¸€ä¸ªè¦è§¦å‘çš„è§¦å‘å™¨ã€‚è¿™æ›¾ç»æ˜¯å¿…è¦çš„ï¼ˆåœ¨ä»¥å‰çš„Quartzç‰ˆæœ¬ä¸­ï¼‰ä»¥é¿å…ç‰¹å®šæ•°æ®åº“çš„æ­»é”ï¼Œä½†ä¸å†è¢«è®¤ä¸ºæ˜¯å¿…è¦çš„ï¼Œå› æ­¤é»˜è®¤å€¼ä¸ºâ€œfalseâ€ã€‚ å¦‚æœå°†â€œorg.quartz.scheduler.batchTriggerAcquisition MaxCountâ€è®¾ç½®ä¸º &gt; 1ï¼Œå¹¶ä¸”ä½¿ç”¨äº† JDBC JobStoreï¼Œåˆ™å¿…é¡»å°†æ­¤å±æ€§è®¾ç½®ä¸ºâ€œtrueâ€ä»¥é¿å…æ•°æ®æŸåï¼ˆä» Quartz 2.1.1 å¼€å§‹ï¼Œå¦‚æœ batchTriggerAcquisitionMaxCount è®¾ç½®ä¸º 1ï¼Œåˆ™â€œtrueâ€ç°åœ¨æ˜¯é»˜è®¤å€¼&gt;ï¼‰ã€‚ org.quartz.jobStore.lockHandler.class ç”¨äºç”Ÿæˆ org.quartz.impl.jdbcjobstore.Semaphore å®ä¾‹çš„ç±»åï¼Œç”¨äºå¯¹ä½œä¸šå­˜å‚¨æ•°æ®è¿›è¡Œé”å®šæ§åˆ¶ã€‚è¿™æ˜¯ä¸€é¡¹é«˜çº§é…ç½®åŠŸèƒ½ï¼Œå¤§å¤šæ•°ç”¨æˆ·ä¸åº”ä½¿ç”¨å®ƒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒQuartz å°†é€‰æ‹©æœ€åˆé€‚çš„ï¼ˆé¢„æ†ç»‘ï¼‰ä¿¡å·é‡å®ç°æ¥ä½¿ç”¨ã€‚â€œorg.quartz.impl.jdbcjobstore.UpdateLockRowSemaphoreâ€ QUARTZ-497å¯èƒ½å¯¹MS SQL Serverç”¨æˆ·æ„Ÿå…´è¶£ã€‚å‚è§çŸ³è‹±-441ã€‚ org.quartz.jobStore.driverDelegateInitString å¯åœ¨åˆå§‹åŒ–æœŸé—´ä¼ é€’ç»™ DriverDelegate çš„å±æ€§ï¼ˆåŠå…¶å€¼ï¼‰çš„ç®¡é“åˆ†éš”åˆ—è¡¨ã€‚ å­—ç¬¦ä¸²çš„æ ¼å¼å¦‚ä¸‹ï¼š 1&quot;settingName=settingValue|otherSettingName=otherSettingValue|...&quot; StdJDBCDelegate åŠå…¶æ‰€æœ‰åä»£ï¼ˆæ‰€æœ‰éš Quartz ä¸€èµ·æä¾›çš„å§”æ‰˜ï¼‰æ”¯æŒåä¸ºâ€œtriggerPersistenceDelegateClassesâ€çš„å±æ€§ï¼Œè¯¥å±æ€§å¯ä»¥è®¾ç½®ä¸ºä»¥é€—å·åˆ†éš”çš„ç±»åˆ—è¡¨ï¼Œè¿™äº›ç±»å®ç°ç”¨äºå­˜å‚¨è‡ªå®šä¹‰è§¦å‘å™¨ç±»å‹çš„ TriggerPersistenceDelegate æ¥å£ã€‚æœ‰å…³ä¸ºè‡ªå®šä¹‰è§¦å‘å™¨ç¼–å†™æŒä¹…æ€§å§”æ‰˜çš„ç¤ºä¾‹ï¼Œè¯·å‚é˜… Java ç±» SimplePropertiesTriggerPersistenceDelegateSupport å’Œ SimplePropertiesTriggerPersistenceDelegateSupportã€‚ JDBC-JobStoreCMT çš„é…ç½® JDBC with JTA å®¹å™¨ç®¡ç† äº¤æ˜“ JDBCJobStore ç”¨äºåœ¨å…³ç³»æ•°æ®åº“ä¸­å­˜å‚¨è°ƒåº¦ä¿¡æ¯ï¼ˆä½œä¸šã€è§¦å‘å™¨å’Œæ—¥å†ï¼‰ã€‚å®é™…ä¸Šï¼Œæ‚¨å¯ä»¥æ ¹æ®æ‰€éœ€çš„äº‹åŠ¡è¡Œä¸ºé€‰æ‹©ä¸¤ä¸ªå•ç‹¬çš„ JDBCJobStore ç±»ã€‚ JobStoreCMTä¾èµ–äºç”±ä½¿ç”¨Quartzçš„åº”ç”¨ç¨‹åºç®¡ç†çš„äº‹åŠ¡ã€‚åœ¨å°è¯•è°ƒåº¦ï¼ˆæˆ–å–æ¶ˆè°ƒåº¦ï¼‰ä½œä¸š&#x2F;è§¦å‘å™¨ä¹‹å‰ï¼ŒJTA äº‹åŠ¡å¿…é¡»æ­£åœ¨è¿›è¡Œä¸­ã€‚è¿™å…è®¸è°ƒåº¦çš„â€œå·¥ä½œâ€æˆä¸ºåº”ç”¨ç¨‹åºâ€œæ›´å¤§â€äº‹åŠ¡çš„ä¸€éƒ¨åˆ†ã€‚JobStoreCMT å®é™…ä¸Šéœ€è¦ä½¿ç”¨ä¸¤ä¸ªæ•°æ®æº - ä¸€ä¸ªæ•°æ®æºçš„è¿æ¥äº‹åŠ¡ç”±åº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼ˆé€šè¿‡ JTAï¼‰ç®¡ç†ï¼Œå¦ä¸€ä¸ªæ•°æ®æºçš„è¿æ¥ä¸å‚ä¸å…¨å±€ ï¼ˆJTAï¼‰ äº‹åŠ¡ã€‚JobStoreCMT é€‚ç”¨äºåº”ç”¨ç¨‹åºä½¿ç”¨ JTA äº‹åŠ¡ï¼ˆä¾‹å¦‚é€šè¿‡ EJB Session Beansï¼‰æ¥æ‰§è¡Œå…¶å·¥ä½œçš„æƒ…å†µã€‚ é€šè¿‡è®¾ç½®â€œorg.quartz.jobStore.classâ€å±æ€§æ¥é€‰æ‹©JobStoreï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å°†è°ƒåº¦ç¨‹åºçš„ä½œä¸šå­˜å‚¨è®¾ç½®ä¸º JobStoreCMT 1org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreCMT å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å±æ€§è°ƒæ•´ JobStoreCMTï¼š Property Name Required Type Default Value org.quartz.jobStore.driverDelegateClass yes string null org.quartz.jobStore.dataSource yes string null org.quartz.jobStore.nonManagedTXDataSource yes string null org.quartz.jobStore.tablePrefix no string â€œQRTZ_â€ org.quartz.jobStore.useProperties no boolean false org.quartz.jobStore.misfireThreshold no int 60000 org.quartz.jobStore.isClustered no boolean false org.quartz.jobStore.clusterCheckinInterval no long 15000 org.quartz.jobStore.maxMisfiresToHandleAtATime no int 20 org.quartz.jobStore.dontSetAutoCommitFalse no boolean false org.quartz.jobStore.dontSetNonManagedTXConnectionAutoCommitFalse no boolean false org.quartz.jobStore.selectWithLockSQL no string â€œSELECT * FROM {0}LOCKS WHERE SCHED_NAME &#x3D; {1} AND LOCK_NAME &#x3D; ? FOR UPDATEâ€ org.quartz.jobStore.txIsolationLevelSerializable no boolean false org.quartz.jobStore.txIsolationLevelReadCommitted no boolean false org.quartz.jobStore.acquireTriggersWithinLock no boolean false (or true - see doc below) org.quartz.jobStore.lockHandler.class no string null org.quartz.jobStore.driverDelegateInitString no string null org.quartz.jobStore.driverDelegateClass é©±åŠ¨ç¨‹åºä»£è¡¨äº†è§£ä¸åŒæ•°æ®åº“ç³»ç»Ÿçš„ç‰¹å®šâ€œæ–¹è¨€â€ã€‚å¯èƒ½çš„é€‰æ‹©åŒ…æ‹¬ï¼š org.quartz.impl.jdbcjobstore.StdJDBCDelegate ï¼ˆç”¨äºå®Œå…¨ç¬¦åˆJDBCçš„é©±åŠ¨ç¨‹åºï¼‰ org.quartz.impl.jdbcjobstore.MSSQLDelegate ï¼ˆfor Microsoft SQL Serverï¼Œ and Sybaseï¼‰ org.quartz.impl.jdbcjobstore.PostgreSQLDelegate org.quartz.impl.jdbcjobstore.WebLogicDelegate ï¼ˆfor WebLogic driversï¼‰ org.quartz.impl.jdbcjobstore.oracle.OracleDelegate org.quartz.impl.jdbcjobstore.oracle.WebLogicOracleDelegate ï¼ˆç”¨äº Weblogic ä¸­ä½¿ç”¨çš„ Oracle é©±åŠ¨ç¨‹åºï¼‰ org.quartz.impl.jdbcjobstore.oracle.weblogic.WebLogicOracleDelegate ï¼ˆç”¨äº Weblogic ä¸­ä½¿ç”¨çš„ Oracle é©±åŠ¨ç¨‹åºï¼‰ org.quartz.impl.jdbcjobstore.CloudscapeDelegate org.quartz.impl.jdbcjobstore.DB2v6Delegate org.quartz.impl.jdbcjobstore.DB2v7Delegate org.quartz.impl.jdbcjobstore.DB2v8Delegate org.quartz.impl.jdbcjobstore.HSQLDBDelegate org.quartz.impl.jdbcjobstore.PointbaseDelegate org.quartz.impl.jdbcjobstore.SybaseDelegate è¯·æ³¨æ„ï¼Œå·²çŸ¥è®¸å¤šæ•°æ®åº“ä¸ StdJDBCDelegate é…åˆä½¿ç”¨ï¼Œè€Œå…¶ä»–æ•°æ®åº“å·²çŸ¥ä¸å…¶ä»–æ•°æ®åº“çš„å§”æ‰˜é…åˆä½¿ç”¨ï¼Œä¾‹å¦‚ Derby ä¸ Cloudscape å§”æ‰˜é…åˆè‰¯å¥½ï¼ˆè¿™å¹¶ä¸å¥‡æ€ªï¼‰ã€‚ org.quartz.jobStore.dataSource æ­¤å±æ€§çš„å€¼å¿…é¡»æ˜¯é…ç½®å±æ€§æ–‡ä»¶ä¸­å®šä¹‰çš„æ•°æ®æºä¹‹ä¸€çš„åç§°ã€‚å¯¹äº JobStoreCMTï¼Œæ­¤æ•°æ®æºéœ€è¦åŒ…å«èƒ½å¤Ÿå‚ä¸ JTAï¼ˆä¾‹å¦‚å®¹å™¨ç®¡ç†çš„ï¼‰äº‹åŠ¡çš„è¿æ¥ã€‚è¿™é€šå¸¸æ„å‘³ç€æ•°æ®æºå°†åœ¨åº”ç”¨ç¨‹åºæœåŠ¡å™¨å†…éƒ¨ç”±åº”ç”¨ç¨‹åºæœåŠ¡å™¨é…ç½®å’Œç»´æŠ¤ï¼ŒQuartz å°†é€šè¿‡ JNDI è·å–å®ƒçš„å¥æŸ„ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æ•°æ®æºçš„é…ç½®æ–‡æ¡£ã€‚ org.quartz.jobStore.nonManagedTXDataSource JobStoreCMT éœ€è¦ä¸€ä¸ªï¼ˆç¬¬äºŒä¸ªï¼‰æ•°æ®æºï¼Œå…¶ä¸­åŒ…å«ä¸å±äºå®¹å™¨ç®¡ç†äº‹åŠ¡çš„è¿æ¥ã€‚æ­¤å±æ€§çš„å€¼å¿…é¡»æ˜¯é…ç½®å±æ€§æ–‡ä»¶ä¸­å®šä¹‰çš„æ•°æ®æºä¹‹ä¸€çš„åç§°ã€‚æ­¤æ•°æ®æºå¿…é¡»åŒ…å«é CMT è¿æ¥ï¼Œæˆ–è€…æ¢å¥è¯è¯´ï¼ŒQuartz ç›´æ¥è°ƒç”¨ commitï¼ˆï¼‰ å’Œ rollbackï¼ˆï¼‰ çš„è¿æ¥æ˜¯åˆæ³•çš„ã€‚ org.quartz.jobStore.tablePrefix JDBCJobStore çš„â€œè¡¨å‰ç¼€â€å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç­‰äºåœ¨æ•°æ®åº“ä¸­åˆ›å»ºçš„ Quartz è¡¨çš„å‰ç¼€ã€‚å¦‚æœ Quartz è¡¨ä½¿ç”¨ä¸åŒçš„è¡¨å‰ç¼€ï¼Œåˆ™å¯ä»¥åœ¨åŒä¸€æ•°æ®åº“ä¸­æ‹¥æœ‰å¤šç»„ Quartz è¡¨ã€‚ org.quartz.jobStore.useProperties â€œuse propertiesâ€æ ‡å¿—æŒ‡ç¤º JDBCJobStore JobDataMaps ä¸­çš„æ‰€æœ‰å€¼éƒ½å°†æ˜¯å­—ç¬¦ä¸²ï¼Œå› æ­¤å¯ä»¥å­˜å‚¨ä¸ºåç§°-å€¼å¯¹ï¼Œè€Œä¸æ˜¯åœ¨ BLOB åˆ—ä¸­ä»¥åºåˆ—åŒ–å½¢å¼å­˜å‚¨æ›´å¤æ‚çš„å¯¹è±¡ã€‚è¿™å¯èƒ½å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæ‚¨å¯ä»¥é¿å…å°†éå­—ç¬¦ä¸²ç±»åºåˆ—åŒ–ä¸º BLOB æ—¶å¯èƒ½å‡ºç°çš„ç±»ç‰ˆæœ¬æ§åˆ¶é—®é¢˜ã€‚ org.quartz.jobStore.misfireThreshold è°ƒåº¦ç¨‹åºåœ¨è¢«è§†ä¸ºâ€œé”™è¯¯è§¦å‘â€ä¹‹å‰â€œå®¹å¿â€è§¦å‘å™¨é€šè¿‡å…¶ä¸‹ä¸€æ¬¡è§¦å‘æ—¶é—´çš„æ¯«ç§’æ•°ã€‚é»˜è®¤å€¼ï¼ˆå¦‚æœæœªåœ¨é…ç½®ä¸­è¾“å…¥æ­¤å±æ€§ï¼‰ä¸º 60000ï¼ˆ60 ç§’ï¼‰ã€‚ org.quartz.jobStore.isClustered è®¾ç½®ä¸ºâ€œtrueâ€ä»¥æ‰“å¼€èšç±»åŠŸèƒ½ã€‚å¦‚æœæœ‰å¤šä¸ª Quartz å®ä¾‹ä½¿ç”¨åŒä¸€ç»„æ•°æ®åº“è¡¨ï¼Œåˆ™å¿…é¡»å°†æ­¤å±æ€§è®¾ç½®ä¸ºâ€œtrueâ€â€¦å¦åˆ™ä½ å°†ç»å†æµ©åŠ«ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ç¾¤é›†çš„é…ç½®æ–‡æ¡£ã€‚ org.quartz.jobStore.clusterCheckinInterval è®¾ç½®æ­¤å®ä¾‹ä¸ç¾¤é›†çš„å…¶ä»–å®ä¾‹â€œç­¾å…¥â€*çš„é¢‘ç‡ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚å½±å“æ£€æµ‹å¤±è´¥å®ä¾‹çš„é€Ÿåº¦ã€‚ org.quartz.jobStore.maxMisfiresToHandleAtATime ä½œä¸šå­˜å‚¨å°†åœ¨ç»™å®šä¼ é€’ä¸­å¤„ç†çš„æœ€å¤§è§¦å‘è§¦å‘å™¨æ•°ã€‚ä¸€æ¬¡å¤„ç†å¤šä¸ªï¼ˆè¶…è¿‡å‡ åä¸ªï¼‰å¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“è¡¨è¢«é”å®šè¶³å¤Ÿé•¿çš„æ—¶é—´ï¼Œä»¥è‡³äºè§¦å‘å…¶ä»–ï¼ˆå°šæœªé”™è¯¯è§¦å‘ï¼‰è§¦å‘å™¨çš„æ€§èƒ½å¯èƒ½ä¼šå—åˆ°é˜»ç¢ã€‚ org.quartz.jobStore.dontSetAutoCommitFalse å°†æ­¤å‚æ•°è®¾ç½®ä¸ºâ€œtrueâ€å‘Šè¯‰ Quartz ä¸è¦åœ¨ä»æ•°æ®æºè·å–çš„è¿æ¥ä¸Šè°ƒç”¨ setAutoCommitï¼ˆfalseï¼‰ã€‚è¿™åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„é©±åŠ¨ç¨‹åºåœ¨å·²ç»å…³é—­æ—¶è¢«è°ƒç”¨æ—¶ä¼šæŠ±æ€¨ã€‚æ­¤å±æ€§é»˜è®¤ä¸º falseï¼Œå› ä¸ºå¤§å¤šæ•°é©±åŠ¨ç¨‹åºè¦æ±‚è°ƒç”¨ setAutoCommitï¼ˆfalseï¼‰ã€‚ org.quartz.jobStore.dontSetNonManagedTXConnectionAutoCommitFalse ä¸å±æ€§ org.quartz.jobStore.dontSetAutoCommitFalse ç›¸åŒï¼Œåªæ˜¯å®ƒé€‚ç”¨äºé ManagedTXDataSourceã€‚ org.quartz.jobStore.selectWithLockSQL å¿…é¡»æ˜¯åœ¨â€œLOCKSâ€è¡¨ä¸­é€‰æ‹©ä¸€è¡Œå¹¶åœ¨è¯¥è¡Œä¸Šæ”¾ç½®é”çš„ SQL å­—ç¬¦ä¸²ã€‚å¦‚æœæœªè®¾ç½®ï¼Œåˆ™é»˜è®¤å€¼ä¸ºâ€œä»{0}é”å®šä¸­é€‰æ‹© *ï¼Œå…¶ä¸­ SCHED_NAME &#x3D; {1} å’Œ LOCK_NAME &#x3D; ï¼Ÿç”¨äºæ›´æ–°â€œï¼Œé€‚ç”¨äºå¤§å¤šæ•°æ•°æ®åº“ã€‚â€œ{0}â€åœ¨è¿è¡Œæ—¶æ›¿æ¢ä¸ºä¸Šé¢é…ç½®çš„TABLE_PREFIXã€‚â€œ{1}â€å°†æ›¿æ¢ä¸ºè°ƒåº¦ç¨‹åºçš„åç§°ã€‚ org.quartz.jobStore.txIsolationLevelSerializable å€¼â€œtrueâ€å‘Šè¯‰Quartzåœ¨JDBCè¿æ¥ä¸Šè°ƒç”¨setTransactionIsolationï¼ˆConnection.TRANSACTION_SERIALIZABLEï¼‰ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢æŸäº›æ•°æ®åº“åœ¨é«˜è´Ÿè½½ä¸‹å‡ºç°é”å®šè¶…æ—¶ï¼Œä»¥åŠâ€œæŒä¹…â€äº‹åŠ¡ã€‚ org.quartz.jobStore.txIsolationLevelReadCommit å½“è®¾ç½®ä¸º â€œtrueâ€ æ—¶ï¼Œæ­¤å±æ€§å‘Šè¯‰ Quartz åœ¨éæ‰˜ç®¡ JDBC è¿æ¥ä¸Šè°ƒç”¨ setTransactionIsolationï¼ˆConnection.TRANSACTION_READ_COMMITTEDï¼‰ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢æŸäº›æ•°æ®åº“ï¼ˆå¦‚ DB2ï¼‰åœ¨é«˜è´Ÿè½½ä¸‹å‡ºç°é”å®šè¶…æ—¶ï¼Œä»¥åŠâ€œæŒä¹…â€äº‹åŠ¡ã€‚ org.quartz.jobStore.acquireTriggersWithinLock æ˜¯å¦åº”åœ¨æ˜¾å¼æ•°æ®åº“é”ä¸­è·å–ä¸‹ä¸€ä¸ªè¦è§¦å‘çš„è§¦å‘å™¨ã€‚è¿™æ›¾ç»æ˜¯å¿…è¦çš„ï¼ˆåœ¨ä»¥å‰çš„Quartzç‰ˆæœ¬ä¸­ï¼‰ä»¥é¿å…ç‰¹å®šæ•°æ®åº“çš„æ­»é”ï¼Œä½†ä¸å†è¢«è®¤ä¸ºæ˜¯å¿…è¦çš„ï¼Œå› æ­¤é»˜è®¤å€¼ä¸ºâ€œfalseâ€ã€‚ å¦‚æœå°†â€œorg.quartz.scheduler.batchTriggerAcquisition MaxCountâ€è®¾ç½®ä¸º &gt; 1ï¼Œå¹¶ä¸”ä½¿ç”¨äº† JDBC JobStoreï¼Œåˆ™å¿…é¡»å°†æ­¤å±æ€§è®¾ç½®ä¸ºâ€œtrueâ€ä»¥é¿å…æ•°æ®æŸåï¼ˆä» Quartz 2.1.1 å¼€å§‹ï¼Œå¦‚æœ batchTriggerAcquisitionMaxCount è®¾ç½®ä¸º 1ï¼Œåˆ™â€œtrueâ€ç°åœ¨æ˜¯é»˜è®¤å€¼&gt;ï¼‰ã€‚ org.quartz.jobStore.lockHandler.class ç”¨äºç”Ÿæˆ org.quartz.impl.jdbcjobstore.Semaphore å®ä¾‹çš„ç±»åï¼Œç”¨äºå¯¹ä½œä¸šå­˜å‚¨æ•°æ®è¿›è¡Œé”å®šæ§åˆ¶ã€‚è¿™æ˜¯ä¸€é¡¹é«˜çº§é…ç½®åŠŸèƒ½ï¼Œå¤§å¤šæ•°ç”¨æˆ·ä¸åº”ä½¿ç”¨å®ƒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒQuartz å°†é€‰æ‹©æœ€åˆé€‚çš„ï¼ˆé¢„æ†ç»‘ï¼‰ä¿¡å·é‡å®ç°æ¥ä½¿ç”¨ã€‚â€œorg.quartz.impl.jdbcjobstore.UpdateLockRowSemaphoreâ€ QUARTZ-497å¯èƒ½å¯¹MS SQL Serverç”¨æˆ·æ„Ÿå…´è¶£ã€‚ä¸Quartzæ†ç»‘åœ¨ä¸€èµ·çš„â€œJTANonClusteredSemaphoreâ€åœ¨ä½¿ç”¨JobStoreCMTæ—¶å¯èƒ½ä¼šæé«˜æ€§èƒ½ï¼Œå°½ç®¡å®ƒæ˜¯ä¸€ä¸ªå®éªŒæ€§å®ç°ã€‚å‚è§çŸ³è‹±-441å’ŒçŸ³è‹±-442 org.quartz.jobStore.driverDelegateInitString å¯åœ¨åˆå§‹åŒ–æœŸé—´ä¼ é€’ç»™ DriverDelegate çš„å±æ€§ï¼ˆåŠå…¶å€¼ï¼‰çš„ç®¡é“åˆ†éš”åˆ—è¡¨ã€‚ å­—ç¬¦ä¸²çš„æ ¼å¼å¦‚ä¸‹ï¼š 1&quot;settingName=settingValue|otherSettingName=otherSettingValue|...&quot; StdJDBCDelegate åŠå…¶æ‰€æœ‰åä»£ï¼ˆæ‰€æœ‰éš Quartz ä¸€èµ·æä¾›çš„å§”æ‰˜ï¼‰æ”¯æŒåä¸ºâ€œtriggerPersistenceDelegateClassesâ€çš„å±æ€§ï¼Œè¯¥å±æ€§å¯ä»¥è®¾ç½®ä¸ºä»¥é€—å·åˆ†éš”çš„ç±»åˆ—è¡¨ï¼Œè¿™äº›ç±»å®ç°ç”¨äºå­˜å‚¨è‡ªå®šä¹‰è§¦å‘å™¨ç±»å‹çš„ TriggerPersistenceDelegate æ¥å£ã€‚æœ‰å…³ä¸ºè‡ªå®šä¹‰è§¦å‘å™¨ç¼–å†™æŒä¹…æ€§å§”æ‰˜çš„ç¤ºä¾‹ï¼Œè¯·å‚é˜… Java ç±» SimplePropertiesTriggerPersistenceDelegateSupport å’Œ SimplePropertiesTriggerPersistenceDelegateSupportã€‚ æ•°æ®æºçš„é…ç½® ä¾› JDBC-JobStore ä½¿ç”¨ å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ JDBC-Jobstoreï¼Œåˆ™éœ€è¦ä¸€ä¸ªæ•°æ®æºï¼ˆå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ JobStoreCMTï¼Œåˆ™éœ€è¦ä¸¤ä¸ªæ•°æ®æºï¼‰ã€‚ å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼é…ç½®æ•°æ®æºï¼š åœ¨ quartz.properties æ–‡ä»¶ä¸­æŒ‡å®šçš„æ‰€æœ‰æ± å±æ€§ï¼Œä»¥ä¾¿ Quartz å¯ä»¥åˆ›å»ºæ•°æ®æºæœ¬èº«ã€‚ å¯ä»¥æŒ‡å®šåº”ç”¨ç¨‹åºæœåŠ¡å™¨ç®¡ç†çš„æ•°æ®æºçš„ JNDI ä½ç½®ï¼Œä»¥ä¾¿ Quartz å¯ä»¥ä½¿ç”¨å®ƒã€‚ è‡ªå®šä¹‰å®šä¹‰çš„org.quartz.utils.ConnectionProviderå®ç°ã€‚ å»ºè®®å°†æ•°æ®æºæœ€å¤§è¿æ¥å¤§å°é…ç½®ä¸ºè‡³å°‘ä¸ºçº¿ç¨‹æ± ä¸­çš„å·¥ä½œçº¿ç¨‹æ•°åŠ  3ã€‚ å¦‚æœåº”ç”¨ç¨‹åºè¿˜é¢‘ç¹è°ƒç”¨è®¡åˆ’ç¨‹åº APIï¼Œåˆ™å¯èƒ½éœ€è¦å…¶ä»–è¿æ¥ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ JobStoreCMTï¼Œ â€œéæ‰˜ç®¡â€æ•°æ®æºçš„æœ€å¤§è¿æ¥å¤§å°åº”è‡³å°‘ä¸º 4ã€‚ å¿…é¡»ä¸ºæ‚¨å®šä¹‰çš„æ¯ä¸ªæ•°æ®æºï¼ˆé€šå¸¸ä¸ºä¸€ä¸ªæˆ–ä¸¤ä¸ªï¼‰æŒ‡å®šä¸€ä¸ªåç§°ï¼Œå¹¶ä¸”ä¸ºæ¯ä¸ªæ•°æ®æºå®šä¹‰çš„å±æ€§å¿…é¡»åŒ…å«è¯¥åç§°ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚æ•°æ®æºçš„â€œNAMEâ€å¯ä»¥æ˜¯æ‚¨æƒ³è¦çš„ä»»ä½•å†…å®¹ï¼Œé™¤äº†åœ¨åˆ†é…ç»™ JDBCJobStore æ—¶èƒ½å¤Ÿè¯†åˆ«å®ƒä¹‹å¤–ï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ Quartz åˆ›å»ºçš„æ•°æ®æºä½¿ç”¨ä»¥ä¸‹å±æ€§è¿›è¡Œå®šä¹‰ï¼š Property Name Required Type Default Value org.quartz.dataSource.NAME.driver yes String null org.quartz.dataSource.NAME.URL yes String null org.quartz.dataSource.NAME.user no String â€œâ€ org.quartz.dataSource.NAME.password no String â€œâ€ org.quartz.dataSource.NAME.maxConnections no int 10 org.quartz.dataSource.NAME.validationQuery no String null org.quartz.dataSource.NAME.idleConnectionValidationSeconds no int 50 org.quartz.dataSource.NAME.validateOnCheckout no boolean false org.quartz.dataSource.NAME.discardIdleConnectionsSeconds no int 0 (disabled) org.quartz.dataSource.NAME.driver å¿…é¡»æ˜¯æ•°æ®åº“çš„ JDBC é©±åŠ¨ç¨‹åºçš„ Java ç±»åã€‚ org.quartz.dataSource.NAME.URL ç”¨äºè¿æ¥åˆ°æ•°æ®åº“çš„è¿æ¥ URLï¼ˆä¸»æœºã€ç«¯å£ç­‰ï¼‰ã€‚ org.quartz.dataSource.NAME.user è¿æ¥åˆ°æ•°æ®åº“æ—¶è¦ä½¿ç”¨çš„ç”¨æˆ·åã€‚ org.quartz.dataSource.NAME.password è¿æ¥åˆ°æ•°æ®åº“æ—¶è¦ä½¿ç”¨çš„å¯†ç ã€‚ org.quartz.dataSource.NAME.maxConnections æ•°æ®æºå¯ä»¥åœ¨å…¶è¿æ¥æ± ä¸­åˆ›å»ºçš„æœ€å¤§è¿æ¥æ•°ã€‚ org.quartz.dataSource.NAME.validationQuery æ˜¯å¯é€‰çš„ SQL æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ•°æ®æºå¯ç”¨äºæ£€æµ‹å’Œæ›¿æ¢å¤±è´¥&#x2F;æŸåçš„è¿æ¥ã€‚ä¾‹å¦‚ï¼Œoracle ç”¨æˆ·å¯èƒ½ä¼šé€‰æ‹©â€œä»user_tablesä¸­é€‰æ‹©table_nameâ€â€”â€”è¿™æ˜¯ä¸€ä¸ªæ°¸è¿œä¸åº”è¯¥çš„æŸ¥è¯¢ã€‚ å¤±è´¥ - é™¤éè¿æ¥ç¡®å®é”™è¯¯ã€‚ org.quartz.dataSource.NAME.idleConnectionValidationSeconds ç©ºé—²è¿æ¥æµ‹è¯•ä¹‹é—´çš„ç§’æ•° - ä»…åœ¨è®¾ç½®äº†éªŒè¯æŸ¥è¯¢å±æ€§æ—¶å¯ç”¨ã€‚é»˜è®¤å€¼ä¸º 50 ç§’ã€‚ org.quartz.dataSource.NAME.validateOnCheckout æ˜¯å¦åº”åœ¨æ¯æ¬¡æ£€ç´¢è¿æ¥æ—¶æ‰§è¡Œç”¨äºéªŒè¯è¿æ¥çš„æ•°æ®åº“ sql æŸ¥è¯¢ ä»¥ç¡®ä¿å®ƒä»ç„¶æœ‰æ•ˆã€‚å¦‚æœä¸º falseï¼Œåˆ™éªŒè¯å°†åœ¨ç­¾å…¥æ—¶è¿›è¡Œã€‚é»˜è®¤å€¼ä¸ºå‡ã€‚ org.quartz.dataSource.NAME.discardIdleConnectionsSeconds åœ¨è¿æ¥ç©ºé—²äº†è¿™ä¹ˆå¤šç§’åä¸¢å¼ƒè¿æ¥ã€‚0 ç¦ç”¨è¯¥åŠŸèƒ½ã€‚é»˜è®¤å€¼ä¸º 0ã€‚ çŸ³è‹±å®šä¹‰çš„æ•°æ®æºç¤ºä¾‹ 12345org.quartz.dataSource.myDS.driver = oracle.jdbc.driver.OracleDriverorg.quartz.dataSource.myDS.URL = jdbc:oracle:thin:@10.0.1.23:1521:demodborg.quartz.dataSource.myDS.user = myUserorg.quartz.dataSource.myDS.password = myPasswordorg.quartz.dataSource.myDS.maxConnections = 30 å¯¹åº”ç”¨ç¨‹åºæœåŠ¡å™¨æ•°æ®æºçš„å¼•ç”¨ä½¿ç”¨ä»¥ä¸‹å±æ€§å®šä¹‰ï¼š Property Name Required Type Default Value org.quartz.dataSource.NAME.jndiURL yes String null org.quartz.dataSource.NAME.java.naming.factory.initial no String null org.quartz.dataSource.NAME.java.naming.provider.url no String null org.quartz.dataSource.NAME.java.naming.security.principal no String null org.quartz.dataSource.NAME.java.naming.security.credentials no String null org.quartz.dataSource.NAME.jndiURL ç”±åº”ç”¨ç¨‹åºæœåŠ¡å™¨ç®¡ç†çš„æ•°æ®æºçš„ JNDI URLã€‚ org.quartz.dataSource.NAME.java.nameing.factory.initial æ‚¨å¸Œæœ›ä½¿ç”¨çš„ JNDI InitialContextFactory çš„ï¼ˆå¯é€‰ï¼‰ç±»åã€‚ org.quartz.dataSource.NAME.java.naming.provider.url ç”¨äºè¿æ¥åˆ° JNDI ä¸Šä¸‹æ–‡çš„ï¼ˆå¯é€‰ï¼‰URLã€‚ org.quartz.dataSource.NAME.java.nameing.security.principal ç”¨äºè¿æ¥åˆ° JNDI ä¸Šä¸‹æ–‡çš„ï¼ˆå¯é€‰ï¼‰ç”¨æˆ·ä¸»ä½“ã€‚ org.quartz.dataSource.NAME.java.nameing.security.credentials ç”¨äºè¿æ¥åˆ° JNDI ä¸Šä¸‹æ–‡çš„ï¼ˆå¯é€‰ï¼‰ç”¨æˆ·å‡­è¯ã€‚ ä»åº”ç”¨ç¨‹åºæœåŠ¡å™¨å¼•ç”¨çš„æ•°æ®æºç¤ºä¾‹ 12345org.quartz.dataSource.myOtherDS.jndiURL=jdbc/myDataSourceorg.quartz.dataSource.myOtherDS.java.naming.factory.initial=com.evermind.server.rmi.RMIInitialContextFactoryorg.quartz.dataSource.myOtherDS.java.naming.provider.url=ormi://localhostorg.quartz.dataSource.myOtherDS.java.naming.security.principal=adminorg.quartz.dataSource.myOtherDS.java.naming.security.credentials=123 è‡ªå®šä¹‰è¿æ¥æä¾›ç¨‹åºå®ç° Property Name Required Type Default Value org.quartz.dataSource.NAME.connectionProvider.class yes String (class name) null org.quartz.dataSource.NAME.connectionProvider.class è¦ä½¿ç”¨çš„è¿æ¥æä¾›ç¨‹åºçš„ç±»åã€‚å®ä¾‹åŒ–ç±»åï¼ŒQuartz å¯ä»¥è‡ªåŠ¨è®¾ç½®å®ä¾‹ä¸Šçš„é…ç½®å±æ€§ï¼ŒBean æ ·å¼ã€‚ ä½¿ç”¨è‡ªå®šä¹‰è¿æ¥æä¾›ç¨‹åºå®ç°çš„ç¤ºä¾‹ 123org.quartz.dataSource.myCustomDS.connectionProvider.class = com.foo.FooConnectionProviderorg.quartz.dataSource.myCustomDS.someStringProperty = someValueorg.quartz.dataSource.myCustomDS.someIntProperty = 5 æ•°æ®åº“ç¾¤é›†çš„é…ç½® å®ç°æ•…éšœè½¬ç§»å’Œ ä½¿ç”¨ JDBC-JobStore è¿›è¡Œè´Ÿè½½å¹³è¡¡ Quartz çš„é›†ç¾¤åŠŸèƒ½é€šè¿‡æ•…éšœè½¬ç§»å’Œè´Ÿè½½å¹³è¡¡åŠŸèƒ½ä¸ºæ‚¨çš„è°ƒåº¦ç¨‹åºå¸¦æ¥é«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚ é›†ç¾¤ç›®å‰ä»…é€‚ç”¨äº JDBC-Jobstoreï¼ˆJobStoreTX æˆ– JobStoreCMTï¼‰ï¼Œå¹¶ä¸”åŸºæœ¬ä¸Šæ˜¯é€šè¿‡è®©é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹å…±äº«ç›¸åŒçš„æ•°æ®åº“æ¥å·¥ä½œçš„ã€‚ è´Ÿè½½å¹³è¡¡ä¼šè‡ªåŠ¨å‘ç”Ÿï¼Œç¾¤é›†çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå°½å¿«è§¦å‘ä½œä¸šã€‚å½“è§¦å‘å™¨çš„è§¦å‘æ—¶é—´å‘ç”Ÿæ—¶ï¼Œç¬¬ä¸€ä¸ªè·å–å®ƒçš„èŠ‚ç‚¹ï¼ˆé€šè¿‡åœ¨å…¶ä¸Šæ”¾ç½®é”å®šï¼‰æ˜¯å°†è§¦å‘å®ƒçš„èŠ‚ç‚¹ã€‚ æ¯æ¬¡è§¦å‘æ—¶ï¼Œåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹å°†è§¦å‘ä½œä¸šã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œå¦‚æœä½œä¸šæœ‰ä¸€ä¸ªé‡å¤è§¦å‘å™¨ å‘Šè¯‰å®ƒæ¯ 10 ç§’è§¦å‘ä¸€æ¬¡ï¼Œç„¶ååœ¨ 12ï¼š00ï¼š00 æ­£å¥½æœ‰ä¸€ä¸ªèŠ‚ç‚¹å°†è¿è¡Œä½œä¸šï¼Œè€Œåœ¨ 12ï¼š00ï¼š10 æ°å¥½è¿è¡Œä¸€ä¸ªèŠ‚ç‚¹ èŠ‚ç‚¹å°†è¿è¡Œä½œä¸šç­‰ã€‚å®ƒä¸ä¸€å®šæ¯æ¬¡éƒ½æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ - å®ƒæˆ–å¤šæˆ–å°‘æ˜¯éšæœºçš„ èŠ‚ç‚¹è¿è¡Œå®ƒã€‚å¯¹äºç¹å¿™çš„è®¡åˆ’ç¨‹åºï¼ˆå¤§é‡è§¦å‘å™¨ï¼‰ï¼Œè´Ÿè½½å¹³è¡¡æœºåˆ¶å‡ ä¹æ˜¯éšæœºçš„ï¼Œä½†æœ‰åˆ©äº éç¹å¿™ï¼ˆä¾‹å¦‚å‡ ä¸ªè§¦å‘å™¨ï¼‰è°ƒåº¦ç¨‹åºçš„åŒä¸€èŠ‚ç‚¹ã€‚ å½“å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹åœ¨æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªä½œä¸šæ—¶å‘ç”Ÿæ•…éšœæ—¶ï¼Œå°±ä¼šå‘ç”Ÿæ•…éšœè½¬ç§»ã€‚å½“èŠ‚ç‚¹å‘ç”Ÿæ•…éšœæ—¶ï¼Œ å…¶ä»–èŠ‚ç‚¹æ£€æµ‹æƒ…å†µå¹¶è¯†åˆ«æ•°æ®åº“ä¸­æ•…éšœèŠ‚ç‚¹ä¸­æ­£åœ¨è¿›è¡Œçš„ä½œä¸šã€‚ä»»ä½•æ ‡è®°ä¸ºæ¢å¤çš„ä½œä¸šï¼ˆåœ¨ JobDetail ä¸Šå¸¦æœ‰â€œè¯·æ±‚æ¢å¤â€å±æ€§ï¼‰å°†ç”± å…¶ä½™èŠ‚ç‚¹ã€‚æœªæ ‡è®°ä¸ºæ¢å¤çš„ä½œä¸šå°†åªæ˜¯åœ¨ä¸‹æ¬¡è§¦å‘ç›¸å…³è§¦å‘å™¨æ—¶é‡Šæ”¾ä»¥æ‰§è¡Œã€‚ ç¾¤é›†åŠŸèƒ½æœ€é€‚åˆæ¨ªå‘æ‰©å±•é•¿æ—¶é—´è¿è¡Œå’Œ&#x2F;æˆ– CPU å¯†é›†å‹ä½œä¸šï¼ˆåˆ†é…å·¥ä½œè´Ÿè½½ åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼‰ã€‚å¦‚æœéœ€è¦æ¨ªå‘æ‰©å±•ä»¥æ”¯æŒæ•°åƒä¸ªçŸ­æœŸè¿è¡Œï¼ˆä¾‹å¦‚ 1 ç§’ï¼‰ä½œä¸šï¼Œè¯·è€ƒè™‘ ä½¿ç”¨å¤šä¸ªä¸åŒçš„è®¡åˆ’ç¨‹åºï¼ˆåŒ…æ‹¬ç”¨äº HA çš„å¤šä¸ªç¾¤é›†è®¡åˆ’ç¨‹åºï¼‰å¯¹ä½œä¸šé›†è¿›è¡Œåˆ†åŒºã€‚ è°ƒåº¦ç¨‹åºä½¿ç”¨é›†ç¾¤èŒƒå›´çš„é”å®šï¼Œè¿™ç§æ¨¡å¼ä¼šåœ¨æ‚¨æ·»åŠ æ›´å¤šèŠ‚ç‚¹æ—¶é™ä½æ€§èƒ½ï¼ˆå½“è¿›å…¥æ—¶ï¼‰ è¶…è¿‡å¤§çº¦ä¸‰ä¸ªèŠ‚ç‚¹ - å–å†³äºæ•°æ®åº“çš„åŠŸèƒ½ç­‰ï¼‰ã€‚ é€šè¿‡å°†â€œorg.quartz.jobStore.isClusteredâ€å±æ€§è®¾ç½®ä¸ºâ€œtrueâ€æ¥å¯ç”¨ç¾¤é›†ã€‚é›†ç¾¤ä¸­çš„æ¯ä¸ªå®ä¾‹éƒ½åº”ä½¿ç”¨ quartz.properties æ–‡ä»¶çš„ç›¸åŒå‰¯æœ¬ã€‚ä¾‹å¤–æƒ…å†µæ˜¯ä½¿ç”¨ç›¸åŒçš„å±æ€§æ–‡ä»¶ï¼Œä½†å…è®¸ä»¥ä¸‹ä¾‹å¤–æƒ…å†µï¼šä¸åŒçš„çº¿ç¨‹æ± å¤§å°å’Œâ€œorg.quartz.scheduler.instanceIdâ€å±æ€§çš„ä¸åŒå€¼ã€‚ç¾¤é›†ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¿…é¡»å…·æœ‰å”¯ä¸€çš„ instanceIdï¼Œé€šè¿‡å°†â€œAUTOâ€ä½œä¸ºæ­¤å±æ€§çš„å€¼ï¼Œå¯ä»¥è½»æ¾å®Œæˆæ­¤æ“ä½œï¼ˆæ— éœ€ä¸åŒçš„å±æ€§æ–‡ä»¶ï¼‰ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æœ‰å…³ JDBC-JobStore çš„é…ç½®å±æ€§çš„ä¿¡æ¯ã€‚ åˆ‡å‹¿åœ¨å•ç‹¬çš„è®¡ç®—æœºä¸Šè¿è¡Œç¾¤é›†ï¼Œé™¤éå®ƒä»¬çš„æ—¶é’Ÿä½¿ç”¨æŸç§å½¢å¼çš„æ—¶é—´åŒæ­¥æœåŠ¡ï¼ˆå®ˆæŠ¤ç¨‹åºï¼‰è¿›è¡ŒåŒæ­¥ï¼Œè¯¥æœåŠ¡éå¸¸æœ‰è§„å¾‹åœ°è¿è¡Œï¼ˆæ—¶é’Ÿå¿…é¡»åœ¨ä¸€ç§’å†…ï¼‰ã€‚å¦‚æœæ‚¨ä¸ç†Ÿæ‚‰å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œï¼Œè¯·å‚é˜… http://www.boulder.nist.gov/timefreq/service/its.htmã€‚ åˆ‡å‹¿é’ˆå¯¹ä»»ä½•å…¶ä»–å®ä¾‹æ­£åœ¨è¿è¡Œçš„åŒä¸€ç»„æ•°æ®åº“è¡¨å¯åŠ¨ ï¼ˆscheduler.startï¼ˆï¼‰ï¼‰ éé›†ç¾¤å®ä¾‹ã€‚æ‚¨å¯èƒ½ä¼šé‡åˆ°ä¸¥é‡çš„æ•°æ®æŸåï¼Œå¹¶ä¸”è‚¯å®šä¼šé‡åˆ°ä¸ç¨³å®šçš„è¡Œä¸ºã€‚ ç¾¤é›†è°ƒåº¦ç¨‹åºçš„ç¤ºä¾‹å±æ€§ 12345678910111213141516171819202122232425262728293031323334353637383940#============================================================================# Configure Main Scheduler Properties #============================================================================org.quartz.scheduler.instanceName = MyClusteredSchedulerorg.quartz.scheduler.instanceId = AUTO#============================================================================# Configure ThreadPool #============================================================================org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPoolorg.quartz.threadPool.threadCount = 25org.quartz.threadPool.threadPriority = 5#============================================================================# Configure JobStore #============================================================================org.quartz.jobStore.misfireThreshold = 60000org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTXorg.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.oracle.OracleDelegateorg.quartz.jobStore.useProperties = falseorg.quartz.jobStore.dataSource = myDSorg.quartz.jobStore.tablePrefix = QRTZ_org.quartz.jobStore.isClustered = trueorg.quartz.jobStore.clusterCheckinInterval = 20000#============================================================================# Configure Datasources #============================================================================org.quartz.dataSource.myDS.driver = oracle.jdbc.driver.OracleDriverorg.quartz.dataSource.myDS.URL = jdbc:oracle:thin:@polarbear:1521:devorg.quartz.dataSource.myDS.user = quartzorg.quartz.dataSource.myDS.password = quartzorg.quartz.dataSource.myDS.maxConnections = 5org.quartz.dataSource.myDS.validationQuery=select 0 from dual TerracottaJobStore çš„é…ç½® æ²¡æœ‰æ•°æ®åº“çš„é›†ç¾¤ï¼ TerracottaJobStore ç”¨äºåœ¨ Terracotta æœåŠ¡å™¨ä¸­å­˜å‚¨è°ƒåº¦ä¿¡æ¯ï¼ˆä½œä¸šã€è§¦å‘å™¨å’Œæ—¥å†ï¼‰ã€‚TerracottaJobStoreæ¯”ä½¿ç”¨æ•°æ®åº“å­˜å‚¨è°ƒåº¦æ•°æ®ï¼ˆé€šè¿‡JDBC-JobStoreï¼‰çš„æ€§èƒ½è¦é«˜å¾—å¤šï¼Œ è€Œä¸”è¿˜æä¾›ç¾¤é›†åŠŸèƒ½ï¼Œä¾‹å¦‚è´Ÿè½½å¹³è¡¡å’Œæ•…éšœè½¬ç§»ã€‚ æ‚¨å¯èƒ½éœ€è¦è€ƒè™‘å¦‚ä½•è®¾ç½® Terracotta æœåŠ¡å™¨çš„å½±å“ï¼Œå°¤å…¶æ˜¯é…ç½® ç”¨äºæ‰“å¼€è¯¸å¦‚åœ¨ç£ç›˜ä¸Šå­˜å‚¨æ•°æ®ã€åˆ©ç”¨ fsync å’Œè¿è¡Œ Terracotta æ•°ç»„ç­‰åŠŸèƒ½çš„é€‰é¡¹ HA æœåŠ¡å™¨ã€‚ ç¾¤é›†åŠŸèƒ½æœ€é€‚åˆæ¨ªå‘æ‰©å±•é•¿æ—¶é—´è¿è¡Œå’Œ&#x2F;æˆ– CPU å¯†é›†å‹ä½œä¸šï¼ˆåˆ†é…å·¥ä½œè´Ÿè½½ åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼‰ã€‚å¦‚æœéœ€è¦æ¨ªå‘æ‰©å±•ä»¥æ”¯æŒæ•°åƒä¸ªçŸ­æœŸè¿è¡Œï¼ˆä¾‹å¦‚ 1 ç§’ï¼‰ä½œä¸šï¼Œè¯·è€ƒè™‘ ä½¿ç”¨å¤šä¸ªä¸åŒçš„è®¡åˆ’ç¨‹åºå¯¹ä½œä¸šé›†è¿›è¡Œåˆ†åŒºã€‚ä½¿ç”¨å¤šä¸ªè°ƒåº¦ç¨‹åºå½“å‰å¼ºåˆ¶ä½¿ç”¨ ç¾¤é›†èŒƒå›´çš„é”å®šï¼Œè¿™ç§æ¨¡å¼ä¼šåœ¨æ·»åŠ æ›´å¤šå®¢æˆ·ç«¯æ—¶é™ä½æ€§èƒ½ã€‚ æœ‰å…³æ­¤ JobStore å’Œå…µé©¬ä¿‘çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—® http://www.terracotta.org/quartz â€º TerracottaJobStore æ˜¯é€šè¿‡è®¾ç½®â€œorg.quartz.jobStore.classâ€å±æ€§æ¥é€‰æ‹©çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å°†è°ƒåº¦ç¨‹åºçš„ä½œä¸šå­˜å‚¨è®¾ç½®ä¸ºå…µé©¬ä¿‘ä½œä¸šå•†åº— 1org.quartz.jobStore.class = org.terracotta.quartz.TerracottaJobStore å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å±æ€§è°ƒæ•´ TerracottaJobStoreï¼š Property Name Required Type Default Value org.quartz.jobStore.tcConfigUrl yes string org.quartz.jobStore.misfireThreshold no int 60000 org.quartz.jobStore.tcConfigUrl æ ‡è¯†è¦è¿æ¥åˆ°çš„ Terracotta æœåŠ¡å™¨ä½ç½®çš„ä¸»æœºå’Œç«¯å£ï¼Œä¾‹å¦‚â€œlocalhostï¼š9510â€ã€‚ org.quartz.jobStore.misfireThreshold è°ƒåº¦ç¨‹åºåœ¨è¢«è§†ä¸ºâ€œé”™è¯¯è§¦å‘â€ä¹‹å‰â€œå®¹å¿â€è§¦å‘å™¨é€šè¿‡å…¶ä¸‹ä¸€æ¬¡è§¦å‘æ—¶é—´çš„æ¯«ç§’æ•°ã€‚é»˜è®¤å€¼ï¼ˆå¦‚æœæœªåœ¨é…ç½®ä¸­è¾“å…¥æ­¤å±æ€§ï¼‰ä¸º 60000ï¼ˆ60 ç§’ï¼‰ã€‚ å‚è€ƒæ–‡ç«  Configuration Reference (quartz-scheduler.org)","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/categories/SpringBoot/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"Quartz","slug":"Quartz","permalink":"https://guoshunfa.com/tags/Quartz/"}]},{"title":"SpringBoot3é›†æˆSwagger","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringBoot/SpringBoot3é›†æˆSwagger","date":"2023-07-11T06:52:01.000Z","updated":"2024-01-28T11:41:39.306Z","comments":true,"path":"2023/07/SpringBoot3é›†æˆSwagger/","link":"","permalink":"https://guoshunfa.com/2023/07/SpringBoot3%E9%9B%86%E6%88%90Swagger/","excerpt":"","text":"æ–‡ç« é¡¹ç›®ï¼šGithub Project å‰æ jdk17 SpringBoot3.1.1 SpringDoc2.1.0 ä¸ºä»€ä¹ˆä¸ç»§ç»­ä½¿ç”¨springfoxï¼Ÿspringfox å·²ç»åœæ­¢æ›´æ–°å¾ˆä¹…äº†ï¼ŒSpringBootæ–°ç‰ˆæœ¬éƒ½ä¸æ”¯æŒã€‚ä¸ºäº†èƒ½å¤Ÿç»§ç»­ä½¿ç”¨Swaggerï¼Œåªèƒ½è°ƒæ•´ç»§æ‰¿åº“ã€‚ ä»€ä¹ˆæ˜¯SpringDocï¼Ÿspringdoc-openapiJava åº“æœ‰åŠ©äºä½¿ç”¨ Spring å¼•å¯¼é¡¹ç›®è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£ã€‚ é€šè¿‡åœ¨è¿è¡Œæ—¶æ£€æŸ¥åº”ç”¨ç¨‹åºæ¥æ ¹æ® Spring é…ç½®ã€ç±»ç»“æ„å’Œå„ç§æ³¨é‡Šæ¨æ–­ API è¯­ä¹‰ã€‚springdoc-openapi è‡ªåŠ¨ç”Ÿæˆ JSON&#x2F;YAML å’Œ HTML æ ¼å¼ API ä¸­çš„æ–‡æ¡£ã€‚ æœ¬æ–‡æ¡£å¯ä»¥é€šè¿‡ä½¿ç”¨ swagger-api æ³¨é‡Šçš„è¯„è®ºæ¥å®Œæˆã€‚ æ­¤åº“æ”¯æŒï¼š OpenAPI 3 Spring-boot v3 ï¼ˆJava 17 &amp; Jakarta EE 9ï¼‰ JSR-303ï¼Œä¸“é—¨ç”¨äº@NotNullã€@Minã€@Maxå’Œ@Sizeã€‚ æ‹›æ‘‡çš„ç”¨æˆ·ç•Œé¢ OAuth 2 GraalVM åŸç”Ÿé•œåƒ ä»¥ä¸‹è§†é¢‘ä»‹ç»äº†åº“ï¼š è¿™æ˜¯ä¸€ä¸ªåŸºäºç¤¾åŒºçš„é¡¹ç›®ï¼Œä¸æ˜¯ç”±Springæ¡†æ¶è´¡çŒ®è€…ï¼ˆPivotalï¼‰ç»´æŠ¤çš„ã€‚ é›†æˆSwaggerå¼•å…¥maven12345&lt;dependency&gt; &lt;groupId&gt;org.springdoc&lt;/groupId&gt; &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt; &lt;version&gt;2.1.0&lt;/version&gt;&lt;/dependency&gt; SpringBootå¼•å…¥Swaggerçš„mavenåº“ä¹‹å‰ï¼Œéœ€è¦å…ˆå¼•å…¥springboot-webçš„mavenï¼Œå¦åˆ™æ²¡æœ‰æ•ˆæœã€‚ 12345&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; æ·»åŠ APIæ¥å£12345678910111213141516171819import io.swagger.v3.oas.annotations.Operation;import io.swagger.v3.oas.annotations.Parameter;import io.swagger.v3.oas.annotations.tags.Tag;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RestController@Tag(name = &quot;æµ‹è¯•controller&quot;, description = &quot;æµ‹è¯•&quot;)@RequestMapping(&quot;/guoshunfa&quot;)public class TestController &#123; @Operation(summary = &quot;æµ‹è¯•æ¥å£&quot;, description = &quot;æµ‹è¯•æ¥å£&quot;) @GetMapping(&quot;/swagger/test/&quot;) public String test(@Parameter(name = &quot;param1&quot;, description = &quot;é˜¿æ‹‰å•¦å•¦&quot;) String param1) &#123; return &quot;æˆåŠŸ&quot;; &#125;&#125; å¯åŠ¨é¡¹ç›®æŸ¥çœ‹æ•ˆæœæµè§ˆå™¨å‰å¾€ï¼šhttp://ip:port/swagger-ui/index.html å¦‚ä½•ä»Swaggerä½ç‰ˆæœ¬è¿ç§» åˆ é™¤ springfox å’Œ swagger 2 ä¾èµ–é¡¹ã€‚æ”¹ä¸ºæ·»åŠ ä¾èµ–é¡¹ã€‚springdoc-openapi-starter-webmvc-ui 12345&lt;dependency&gt; &lt;groupId&gt;org.springdoc&lt;/groupId&gt; &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt; &lt;version&gt;2.1.0&lt;/version&gt;&lt;/dependency&gt; å°† swagger 2 æ³¨é‡Šæ›¿æ¢ä¸º swagger 3 æ³¨é‡Šï¼ˆå®ƒå·²åŒ…å«åœ¨ä¾èµ–é¡¹ä¸­ï¼‰ã€‚ æ‹›æ‘‡ 3 æ³¨é‡Šçš„åŒ…æ˜¯ .springdoc-openapi-starter-webmvc-ui io.swagger.v3.oas.annotations @Apiâ†’@Tag @ApiIgnoreâ†’æˆ–@Parameter(hidden = true) @Operation(hidden = true) @Hidden @ApiImplicitParamâ†’@Parameter @ApiImplicitParamsâ†’@Parameters @ApiModelâ†’@Schema @ApiModelProperty(hidden = true)â†’@Schema(accessMode = READ_ONLY) @ApiModelPropertyâ†’@Schema @ApiOperation(value = &quot;foo&quot;, notes = &quot;bar&quot;)â†’@Operation(summary = &quot;foo&quot;, description = &quot;bar&quot;) @ApiParamâ†’@Parameter @ApiResponse(code = 404, message = &quot;foo&quot;)â†’@ApiResponse(responseCode = &quot;404&quot;, description = &quot;foo&quot;) æ­¤æ­¥éª¤æ˜¯å¯é€‰çš„ï¼šä»…å½“æ‚¨æœ‰å¤šä¸ª bean æ—¶ï¼Œæ‰å°†å®ƒä»¬æ›¿æ¢ä¸º beanã€‚Docket``GroupedOpenApi ä»¥å‰ï¼š 12345678910111213141516171819202122@Beanpublic Docket publicApi() &#123; return new Docket(DocumentationType.SWAGGER_2) .select() .apis(RequestHandlerSelectors.basePackage(&quot;org.github.springshop.web.public&quot;)) .paths(PathSelectors.regex(&quot;/public.*&quot;)) .build() .groupName(&quot;springshop-public&quot;) .apiInfo(apiInfo());&#125;@Beanpublic Docket adminApi() &#123; return new Docket(DocumentationType.SWAGGER_2) .select() .apis(RequestHandlerSelectors.basePackage(&quot;org.github.springshop.web.admin&quot;)) .paths(PathSelectors.regex(&quot;/admin.*&quot;)) .apis(RequestHandlerSelectors.withMethodAnnotation(Admin.class)) .build() .groupName(&quot;springshop-admin&quot;) .apiInfo(apiInfo());&#125; ç°åœ¨ï¼š 123456789101112131415@Beanpublic GroupedOpenApi publicApi() &#123; return GroupedOpenApi.builder() .group(&quot;springshop-public&quot;) .pathsToMatch(&quot;/public/**&quot;) .build();&#125;@Beanpublic GroupedOpenApi adminApi() &#123; return GroupedOpenApi.builder() .group(&quot;springshop-admin&quot;) .pathsToMatch(&quot;/admin/**&quot;) .addOpenApiMethodFilter(method -&gt; method.isAnnotationPresent(Admin.class)) .build();&#125; å¦‚æœä½ åªæœ‰ä¸€ä¸ª - åˆ é™¤å®ƒï¼Œè€Œæ˜¯å°†å±æ€§æ·»åŠ åˆ°ä½ çš„ ï¼šDocket application.properties 12springdoc.packagesToScan=package1, package2springdoc.pathsToMatch=/v1, /api/balance/** æ·»åŠ ç±»å‹çš„ beanã€‚è¯·å‚é˜…ç¤ºä¾‹ï¼šOpenAPI 1234567891011@Beanpublic OpenAPI springShopOpenAPI() &#123; return new OpenAPI() .info(new Info().title(&quot;SpringShop API&quot;) .description(&quot;Spring shop sample application&quot;) .version(&quot;v0.0.1&quot;) .license(new License().name(&quot;Apache 2.0&quot;).url(&quot;http://springdoc.org&quot;))) .externalDocs(new ExternalDocumentation() .description(&quot;SpringShop Wiki Documentation&quot;) .url(&quot;https://springshop.wiki.github.org/docs&quot;));&#125; Springdoc-openapi é…ç½®springdoc-openapiä¾èµ–äºä½¿ç”¨æ ‡å‡†æ–‡ä»¶ä½ç½®çš„æ ‡å‡† Spring é…ç½®å±æ€§ï¼ˆYML æˆ–å±æ€§ï¼‰ã€‚ Springdoc-OpenAPI æ ¸å¿ƒå±æ€§ å‚æ•°åç§° é»˜è®¤å€¼ æè¿° springdoc.api-docs.path /v3/api-docs Stringï¼Œç”¨äº Json æ ¼å¼çš„ OpenAPI æ–‡æ¡£çš„è‡ªå®šä¹‰è·¯å¾„ã€‚ springdoc.api-docs.enabled true Boolean.ç¦ç”¨ springdoc-openapi ç«¯ç‚¹ï¼ˆé»˜è®¤ä¸º &#x2F;v3&#x2F;api-docsï¼‰ã€‚ springdoc.packages-to-scan * List of Strings.è¦æ‰«æçš„åŒ…åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.paths-to-match /* List of Strings.è¦åŒ¹é…çš„è·¯å¾„åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.produces-to-match-to /* List of Strings.ç”Ÿæˆè¦åŒ¹é…çš„åª’ä½“ç±»å‹åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.headers-to-match /* List of Strings.è¦åŒ¹é…çš„æ ‡å¤´åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.consumptions-to-matchs. /* List of Strings.è¦åŒ¹é…çš„æ¶ˆè€—åª’ä½“ç±»å‹åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.paths-to-exclude List of Strings.è¦æ’é™¤çš„è·¯å¾„åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.packages-to-exclude List of Strings.è¦æ’é™¤çš„åŒ…åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.default-consumptions-media-type application/json String.é»˜è®¤ä½¿ç”¨åª’ä½“ç±»å‹ã€‚ springdoc.default-produces-media-type **/** String.é»˜è®¤ç”Ÿæˆåª’ä½“ç±»å‹ã€‚ springdoc.cache.disabled false Boolean.ç¦ç”¨è®¡ç®—çš„ OpenAPI çš„ springdoc-openapi ç¼“å­˜ã€‚ springdoc.show-actuator false Boolean.æ˜¾ç¤ºæ‰§è¡Œå™¨ç«¯ç‚¹ã€‚ springdoc.auto-tag-classes true Boolean.ç¦ç”¨ springdoc-openapi è‡ªåŠ¨æ ‡è®°ã€‚ springdoc.model-and-view-allow false Boolean.å…è®¸å¸¦æœ‰ ModelAndView çš„ RestControllers è¿”å›å‡ºç°åœ¨ OpenAPI æè¿°ä¸­ã€‚ springdoc.override-with-generic-response true Boolean.å¦‚æœä¸º trueï¼Œåˆ™è‡ªåŠ¨å°†@ControllerAdviceå“åº”æ·»åŠ åˆ°æ‰€æœ‰ç”Ÿæˆçš„å“åº”ä¸­ã€‚ springdoc.api-docs.groups.enabled true Boolean.ç¦ç”¨ springdoc-openapi ç»„ã€‚ springdoc.group-configs[0].group String.ç»„åç§° springdoc.group-configs[0].display-name String.ç»„çš„æ˜¾ç¤ºåç§°ã€‚ springdoc.group-configs[0].packages-to-scan * List of Strings.è¦æ‰«æç»„çš„åŒ…åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.group-configs[0].paths-to-match /* List of Strings.è¦ä¸ºç»„åŒ¹é…çš„è·¯å¾„åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.group-configs[0].paths-to-exclude &#96;&#96; List of Strings.è¦ä¸ºç»„æ’é™¤çš„è·¯å¾„åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.group-configs[0].packages-to-exclude List of Strings.è¦ä¸ºç»„æ’é™¤çš„åŒ…åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.group-configs[0].produces-to-match /* List of Strings.ç”Ÿæˆè¦åŒ¹é…çš„åª’ä½“ç±»å‹åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.group-configs[0].consumes-to-match /* List of Strings.è¦åŒ¹é…çš„æ¶ˆè€—åª’ä½“ç±»å‹åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.group-configs[0].headers-to-match /* List of Strings.è¦åŒ¹é…çš„æ ‡å¤´åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ springdoc.webjars.prefix /webjars Stringï¼Œè¦æ›´æ”¹ webjars å‰ç¼€ï¼Œè¯¥å‰ç¼€å¯è§ swagger-ui çš„ URL ä¸º spring-webfluxã€‚ springdoc.api-docs.resolve-schema-properties false Boolean.åœ¨@Schemaï¼ˆåç§°ã€æ ‡é¢˜å’Œè¯´æ˜ï¼‰ä¸Šå¯ç”¨å±æ€§è§£æç¨‹åºã€‚ springdoc.remove-broken-reference-definition true Boolean.ç¦ç”¨åˆ é™¤æŸåçš„å¼•ç”¨å®šä¹‰ã€‚ springdoc.writer-with-default-pretty-printer false Boolean.å¯ç”¨OpenApiè§„èŒƒçš„æ¼‚äº®æ‰“å°ã€‚ springdoc.model-converters.deprecating-converter.enabled true Boolean.ç¦ç”¨å¼ƒç”¨æ¨¡å‹è½¬æ¢å™¨ã€‚ springdoc.model-converters.polymorphic-converter.enabled true Boolean.ç¦ç”¨å¤šæ€æ¨¡å‹è½¬æ¢å™¨ã€‚ springdoc.model-converters.pageable-converter.enabled true Boolean.ç¦ç”¨å¯åˆ†é¡µæ¨¡å‹è½¬æ¢å™¨ã€‚ springdoc.model-converters.sort-converter.enabled true Boolean.ç¦ç”¨æ’åºè½¬æ¢å™¨ã€‚ springdoc.use-fqn false Boolean.å¯ç”¨å®Œå…¨é™å®šåç§°ã€‚ springdoc.show-login-endpoint false Boolean.ä½¿ Spring å®‰å…¨ç™»å½•ç«¯ç‚¹å¯è§ã€‚ springdoc.pre-load-enabled false Boolean.é¢„åŠ è½½è®¾ç½®ï¼Œç”¨äºåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶åŠ è½½ OpenAPIã€‚ springdoc.writer-with-order-by-keys false Boolean.å¯ç”¨ç¡®å®šæ€§&#x2F;å­—æ¯é¡ºåºæ’åºã€‚ springdoc.use-management-port false Boolean.åœ¨æ‰§è¡Œå™¨ç®¡ç†ç«¯å£ä¸Šå…¬å¼€æ‹›æ‘‡ UIã€‚ springdoc.disable-i18n false Boolean.ä½¿ç”¨ i18n ç¦ç”¨è‡ªåŠ¨ç¿»è¯‘ã€‚ springdoc.show-spring-cloud-functions true Boolean.æ˜¾ç¤ºå¼¹ç°§äº‘å‡½æ•° Web ç»ˆç»“ç‚¹ã€‚ springdoc.enable-groovy true Boolean.å¯ç”¨ Groovy æ”¯æŒã€‚ springdoc.enable-spring-security true Boolean.å¯ç”¨å¼¹ç°§å®‰å…¨æ”¯æŒã€‚ springdoc.enable-kotlin true Boolean.å¯ç”¨ Kotlin æ”¯æŒã€‚ Springdoc.enable-hateoas true Boolean.å¯ç”¨å¼¹ç°§æ”¯æŒã€‚ springdoc.enable-data-rest true Boolean.å¯ç”¨å¼¹ç°§æ•°æ®ä¼‘æ¯æ”¯æŒã€‚ springdoc.api-docs.version openapi_3_0 String.é€‰æ‹©æˆ–ï¼ˆä½¿ç”¨å€¼ ï¼‰ã€‚OpenAPI 3.0``OpenAPI 3.1``OPENAPI_3_1 springdoc.default-flat-param-object false Boolean.é»˜è®¤å¹³å±•å‚æ•°ã€‚ springdoc.default-support-form-data false Boolean.åœ¨æŒ‡å®š api ä»¥æ¥å—è¡¨å•æ•°æ®æ—¶é»˜è®¤è®¾ç½®è¡¨å•æ•°æ®çš„å‚æ•°ã€‚ springdoc.nullable-request-parameter-enabled true Boolean.é»˜è®¤å¯ç”¨å¯¹ Kotlin ä¸­å¯ä¸ºç©ºçš„è¯·æ±‚å‚æ•°çš„æ”¯æŒã€‚ springdoc.show-oauth2-endpoint false Boolean.ä½¿ Spring å®‰å…¨æ€§ oauth2 ç«¯ç‚¹å¯è§ã€‚ Swagegr UI å±æ€§ ä¸Šæä¾›äº†å¯¹ swagger-ui å±æ€§çš„æ”¯æŒã€‚è¯·å‚é˜…å®˜æ–¹æ–‡æ¡£ã€‚springdoc-openapi æ‚¨å¯ä»¥åœ¨æ–‡æ¡£ä¸­ä½¿ç”¨ä¸ Spring å¼•å¯¼å±æ€§ç›¸åŒçš„ swagger-ui å±æ€§ã€‚ æ‰€æœ‰è¿™äº›å±æ€§éƒ½åº”ä½¿ç”¨ä»¥ä¸‹å‰ç¼€å£°æ˜ï¼šspringdoc.swagger-ui å‚æ•°åç§° é»˜è®¤å€¼ æè¿° springdoc.swagger-ui.path /swagger-ui.html Stringï¼Œç”¨äº swagger-ui HTML æ–‡æ¡£çš„è‡ªå®šä¹‰è·¯å¾„ã€‚ springdoc.swagger-ui.enabled true Boolean.ç¦ç”¨ swagger-ui ç«¯ç‚¹ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¸º &#x2F;swagger-ui.htmlï¼‰ã€‚ springdoc.swagger-ui.configUrl /v3/api-docs/swagger-config String.è¦ä»ä¸­è·å–å¤–éƒ¨é…ç½®æ–‡æ¡£çš„ URLã€‚ springdoc.swagger-ui.layout BaseLayout String.é€šè¿‡æ’ä»¶ç³»ç»Ÿæä¾›çš„ç»„ä»¶çš„åç§°ï¼Œç”¨ä½œ Swagger UI çš„é¡¶çº§å¸ƒå±€ã€‚ springdoc.swagger-ui.validatorUrl validator.swagger.io/validator é»˜è®¤æƒ…å†µä¸‹ï¼ŒSwagger UI ä¼šå°è¯•æ ¹æ® swagger.io çš„åœ¨çº¿éªŒè¯å™¨éªŒè¯è§„èŒƒã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤å‚æ•°è®¾ç½®ä¸åŒçš„éªŒè¯ç¨‹åº URLï¼Œä¾‹å¦‚ï¼Œå¯¹äºæœ¬åœ°éƒ¨ç½²çš„éªŒè¯ç¨‹åºéªŒè¯ç¨‹åºå¾½ç« ã€‚å°†å…¶è®¾ç½®ä¸º ï¼Œæˆ–è€…å°†ç¦ç”¨éªŒè¯ã€‚none``127.0.0.1``localhost springdoc.swagger-ui.tryItOutEnabled false Boolean.æ§åˆ¶é»˜è®¤æƒ…å†µä¸‹æ˜¯å¦åº”å¯ç”¨â€œè¯•ç”¨â€éƒ¨åˆ†ã€‚ springdoc.swagger-ui.filter false Boolean OR String.å¦‚æœè®¾ç½®ï¼Œåˆ™å¯ç”¨ç­›é€‰ã€‚é¡¶éƒ¨æ å°†æ˜¾ç¤ºä¸€ä¸ªç¼–è¾‘æ¡†ï¼Œå¯ç”¨äºç­›é€‰æ˜¾ç¤ºçš„æ ‡è®°æ“ä½œã€‚å¯ä»¥æ˜¯ç”¨äºå¯ç”¨æˆ–ç¦ç”¨çš„å¸ƒå°”å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨è¯¥å­—ç¬¦ä¸²ä½œä¸ºç­›é€‰å™¨è¡¨è¾¾å¼å¯ç”¨ç­›é€‰ã€‚ç­›é€‰åŒºåˆ†å¤§å°å†™ï¼Œä¸æ ‡è®°å†…ä»»æ„ä½ç½®çš„ç­›é€‰å™¨è¡¨è¾¾å¼åŒ¹é…ã€‚ springdoc.swagger-ui.operationsSorter Function=(a â‡’ a).å¯¹æ¯ä¸ª API çš„æ“ä½œåˆ—è¡¨åº”ç”¨æ’åºã€‚å®ƒå¯ä»¥æ˜¯â€œalphaâ€ï¼ˆæŒ‰è·¯å¾„å­—æ¯æ•°å­—æ’åºï¼‰ï¼Œâ€œmethodâ€ï¼ˆæŒ‰HTTPæ–¹æ³•æ’åºï¼‰æˆ–å‡½æ•°ï¼ˆå‚è§Array.prototype.sortï¼ˆï¼‰ä»¥äº†è§£æ’åºå‡½æ•°çš„å·¥ä½œåŸç†ï¼‰ã€‚é»˜è®¤å€¼ä¸ºæœåŠ¡å™¨è¿”å›çš„é¡ºåºä¸å˜ã€‚ springdoc.swagger-ui.tagsSorter Function=(a â‡’ a).å¯¹æ¯ä¸ª API çš„æ ‡è®°åˆ—è¡¨åº”ç”¨æ’åºã€‚å®ƒå¯ä»¥æ˜¯â€œalphaâ€ï¼ˆæŒ‰è·¯å¾„å­—æ¯æ•°å­—æ’åºï¼‰æˆ–å‡½æ•°ï¼Œè¯·å‚é˜… Array.prototype.sortï¼ˆï¼‰ ä»¥å­¦ä¹ å¦‚ä½•ç¼–å†™æ’åºå‡½æ•°ï¼‰ã€‚æ¯æ¬¡ä¼ é€’æ—¶ï¼Œå°†ä¸¤ä¸ªæ ‡è®°åç§°å­—ç¬¦ä¸²ä¼ é€’ç»™åˆ†æ‹£æœºã€‚é»˜è®¤å€¼æ˜¯ç”± Swagger UI ç¡®å®šçš„é¡ºåºã€‚ springdoc.swagger-ui.oauth2RedirectUrl /swagger-ui/oauth2-redirect.html String.OAuth é‡å®šå‘ç½‘å€ã€‚ springdoc.swagger-ui.displayOperationId false Boolean.æ§åˆ¶æ“ä½œ ID åœ¨æ“ä½œåˆ—è¡¨ä¸­çš„æ˜¾ç¤ºã€‚ç¼ºçœå€¼ä¸º ã€‚false springdoc.swagger-ui.displayRequestDuration false Boolean.æ§åˆ¶â€œè¯•ç”¨â€è¯·æ±‚çš„è¯·æ±‚æŒç»­æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰çš„æ˜¾ç¤ºã€‚ springdoc.swagger-ui.deepLink false Boolean.å¦‚æœè®¾ç½®ä¸º ï¼Œåˆ™å¯ç”¨æ ‡ç­¾å’Œæ“ä½œçš„æ·±å±‚é“¾æ¥ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… [æ·±å±‚é“¾æ¥æ–‡æ¡£]ï¼ˆ&#x2F;docs&#x2F;usage&#x2F;deep-linking.mdï¼‰ã€‚true springdoc.swagger-ui.defaultModelsExpandDepth 1 Number.æ¨¡å‹çš„é»˜è®¤æ‰©å±•æ·±åº¦ï¼ˆè®¾ç½®ä¸º -1 å°†å®Œå…¨éšè—æ¨¡å‹ï¼‰ã€‚ springdoc.swagger-ui.defaultModelExpandDepth 1 Number.æ¨¡å‹ç¤ºä¾‹éƒ¨åˆ†ä¸Šæ¨¡å‹çš„é»˜è®¤æ‰©å±•æ·±åº¦ã€‚ springdoc.swagger-ui.defaultModelRendering String=[&quot;example&quot;*, &quot;model&quot;].æ§åˆ¶é¦–æ¬¡å‘ˆç° API æ—¶æ¨¡å‹çš„æ˜¾ç¤ºæ–¹å¼ã€‚ï¼ˆç”¨æˆ·å§‹ç»ˆå¯ä»¥é€šè¿‡å•å‡»â€œæ¨¡å‹â€å’Œâ€œç¤ºä¾‹å€¼â€é“¾æ¥æ¥åˆ‡æ¢ç»™å®šæ¨¡å‹çš„æ¸²æŸ“ã€‚ springdoc.swagger-ui.docExpansion String=[&quot;list&quot;*, &quot;full&quot;, &quot;none&quot;].æ§åˆ¶æ“ä½œå’Œæ ‡è®°çš„é»˜è®¤å±•å¼€è®¾ç½®ã€‚å®ƒå¯ä»¥æ˜¯â€œåˆ—è¡¨â€ï¼ˆä»…å±•å¼€æ ‡ç­¾ï¼‰ã€â€œå®Œæ•´â€ï¼ˆå±•å¼€æ ‡ç­¾å’Œæ“ä½œï¼‰æˆ–â€œæ— â€ï¼ˆä¸å±•å¼€ä»»ä½•å†…å®¹ï¼‰ã€‚ springdoc.swagger-ui.maxDisplayTags Number.å¦‚æœè®¾ç½®ï¼Œå°†æ˜¾ç¤ºçš„æ ‡è®°æ“ä½œæ•°é™åˆ¶ä¸ºæœ€å¤šæ­¤æ•°é‡ã€‚é»˜è®¤å€¼ä¸ºæ˜¾ç¤ºæ‰€æœ‰æ“ä½œã€‚ springdoc.swagger-ui.showExtensions false Boolean.æ§åˆ¶ä¾›åº”å•†æ‰©å±• ï¼ˆï¼‰ å­—æ®µå’Œæ“ä½œã€å‚æ•°å’Œæ¶æ„çš„å€¼çš„æ˜¾ç¤ºã€‚x- springdoc.swagger-ui.url String.è¦é…ç½®ï¼Œè‡ªå®šä¹‰ OpenAPI æ–‡ä»¶çš„è·¯å¾„ã€‚å¦‚æœä½¿ç”¨ï¼Œå°†è¢«å¿½ç•¥ã€‚urls springdoc.swagger-ui.showCommonExtensions false Boolean.æ§åˆ¶å‚æ•°çš„æ‰©å±• ï¼ˆã€ã€ã€ã€ï¼‰ å­—æ®µå’Œå€¼çš„æ˜¾ç¤ºã€‚pattern``maxLength``minLength``maximum``minimum springdoc.swagger-ui.supportedSubmitMethods Array=[&quot;get&quot;, &quot;put&quot;, &quot;post&quot;, &quot;delete&quot;, &quot;options&quot;, &quot;head&quot;, &quot;patch&quot;, &quot;trace&quot;].å¯ç”¨äº†â€œè¯•ç”¨â€åŠŸèƒ½çš„ HTTP æ–¹æ³•åˆ—è¡¨ã€‚ç©ºæ•°ç»„ç¦ç”¨æ‰€æœ‰æ“ä½œçš„â€œè¯•ç”¨â€ã€‚è¿™ä¸ä¼šä»æ˜¾ç¤ºä¸­è¿‡æ»¤æ“ä½œã€‚ springdoc.swagger-ui.queryConfigEnabled false Boolean.è‡ª ä»¥æ¥ç¦ç”¨ã€‚æ­¤å‚æ•°å¯ç”¨ï¼ˆæ—§ç‰ˆï¼‰é€šè¿‡ URL æœç´¢å‚æ•°è¦†ç›–é…ç½®å‚æ•°ã€‚åœ¨å¯ç”¨æ­¤åŠŸèƒ½ä¹‹å‰ï¼Œè¯·å‚é˜…å®‰å…¨å…¬å‘Šã€‚v1.6.0 springdoc.swagger-ui.oauth. additionalQueryStringParams String.æ·»åŠ åˆ°æˆæƒ URL å’Œä»¤ç‰Œ URL çš„å…¶ä»–æŸ¥è¯¢å‚æ•°ã€‚ springdoc.swagger-ui.disable-swagger-default-url false Boolean.ç¦ç”¨ swagger-ui é»˜è®¤å® ç‰©å•†åº—ç½‘å€ã€‚ï¼ˆä» v1.4.1 å¼€å§‹å¯ç”¨ï¼‰ã€‚ springdoc.swagger-ui.urls[0].url URL.Topbar æ’ä»¶ä½¿ç”¨çš„ swagger ç»„çš„ urlã€‚URL åœ¨æ­¤æ•°ç»„ä¸­çš„æ‰€æœ‰é¡¹ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºå®ƒä»¬ç”¨ä½œæ ‡è¯†ç¬¦ã€‚ springdoc.swagger-ui.urls[0].name String.Topbar æ’ä»¶ä½¿ç”¨çš„ swagger ç»„çš„åç§°ã€‚åç§°åœ¨æ­¤æ•°ç»„ä¸­çš„æ‰€æœ‰é¡¹ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºå®ƒä»¬ç”¨ä½œæ ‡è¯†ç¬¦ã€‚ springdoc.swagger-ui.urlsPrimaryName String.åŠ è½½ Swagger UI æ—¶å°†æ˜¾ç¤ºçš„æ‹›æ‘‡ç»„çš„åç§°ã€‚ springdoc.swagger-ui.oauth.clientId String.é»˜è®¤å®¢æˆ·ç«¯ IDã€‚å¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€‚ springdoc.swagger-ui.oauth.clientSecret String.é»˜è®¤å®¢æˆ·ç«¯æœºå¯†ã€‚åˆ‡å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ­¤å‚æ•°ã€‚å®ƒå…¬å¼€äº†é‡è¦çš„å®‰å…¨ä¿¡æ¯ã€‚æ­¤åŠŸèƒ½ä»…é€‚ç”¨äºå¼€å‘&#x2F;æµ‹è¯•ç¯å¢ƒã€‚ springdoc.swagger-ui.oauth.realm String.é¢†åŸŸæŸ¥è¯¢å‚æ•°ï¼ˆé€‚ç”¨äº OAuth 1ï¼‰å·²æ·»åŠ åˆ°æˆæƒ URL å’Œä»¤ç‰Œ URLã€‚ springdoc.swagger-ui.oauth.appName String.OAuth åº”ç”¨ç¨‹åºåç§°ï¼Œæ˜¾ç¤ºåœ¨æˆæƒå¼¹å‡ºçª—å£ä¸­ã€‚ springdoc.swagger-ui.oauth.scopeSeparator String.ç”¨äºä¼ é€’èŒƒå›´çš„ OAuth èŒƒå›´åˆ†éš”ç¬¦ï¼Œåœ¨è°ƒç”¨ä¹‹å‰è¿›è¡Œç¼–ç ï¼Œé»˜è®¤å€¼ä¸ºç©ºæ ¼ï¼ˆç¼–ç å€¼ %20ï¼‰ã€‚ springdoc.swagger-ui.csrf.enabled false Boolean.å¯ç”¨ CSRF æ”¯æŒ springdoc.swagger-ui.csrf.use-local-storage false Boolean.ä»æœ¬åœ°å­˜å‚¨è·å– CSRF ä»¤ç‰Œã€‚ springdoc.swagger-ui.csrf.use-session-storage false Boolean.ä»ä¼šè¯å­˜å‚¨ä¸­è·å– CSRF ä»¤ç‰Œã€‚ springdoc.swagger-ui.csrf.cookie-name XSRF-TOKEN String.å¯é€‰çš„ CSRFï¼Œç”¨äºè®¾ç½® CSRF cookie åç§°ã€‚ springdoc.swagger-ui.csrf.header-name X-XSRF-TOKEN String.å¯é€‰çš„ CSRFï¼Œç”¨äºè®¾ç½® CSRF æ ‡å¤´åç§°ã€‚ springdoc.swagger-ui.syntaxHighlight.activated true Boolean.æ˜¯å¦åº”æ¿€æ´»è¯­æ³•çªå‡ºæ˜¾ç¤ºã€‚ springdoc.swagger-ui.syntaxHighlight.theme agate String..çªå‡ºæ˜¾ç¤º.jsè¦ä½¿ç”¨çš„è¯­æ³•ç€è‰²ä¸»é¢˜ã€‚ï¼ˆåªæœ‰è¿™ 6 ç§æ ·å¼å¯ç”¨ã€‚String=[&quot;agate&quot;*, &quot;arta&quot;, &quot;monokai&quot;, &quot;nord&quot;, &quot;obsidian&quot;, &quot;tomorrow-night&quot;] springdoc.swagger-ui.oauth. useBasicAuthentication WithAccessCodeGrant false Boolean.ä»…é’ˆå¯¹è®¿é—®ä»£ç æµæ¿€æ´»ã€‚åœ¨å¯¹ tokenURL çš„authorization_codeè¯·æ±‚æœŸé—´ï¼Œä½¿ç”¨ HTTP åŸºæœ¬èº«ä»½éªŒè¯æ–¹æ¡ˆï¼ˆå…·æœ‰åŸºæœ¬ base64encodeï¼ˆclient_id + client_secretï¼‰çš„æˆæƒæ ‡å¤´ï¼‰ä¼ é€’å®¢æˆ·ç«¯å¯†ç ã€‚ springdoc.swagger-ui.oauth. usePkceWithAuthorization CodeGrant false Boolean.ä»…é€‚ç”¨äºæˆæƒä»£ç æµã€‚ä»£ç äº¤æ¢çš„è¯æ˜å¯†é’¥ä¸º OAuth å…¬å…±å®¢æˆ·ç«¯å¸¦æ¥äº†å¢å¼ºçš„å®‰å…¨æ€§ã€‚ springdoc.swagger-ui.persistAuthorization false Boolean.å¦‚æœè®¾ç½®ä¸º trueï¼Œå®ƒå°†ä¿ç•™æˆæƒæ•°æ®ï¼Œå¹¶ä¸”åœ¨æµè§ˆå™¨å…³é—­&#x2F;åˆ·æ–°æ—¶ä¸ä¼šä¸¢å¤± springdoc.swagger-ui.use-root-path false Boolean.å¦‚æœè®¾ç½®ä¸º trueï¼Œåˆ™å¯ä»¥ç›´æ¥ä»åº”ç”¨ç¨‹åºæ ¹è·¯å¾„è®¿é—® swagger-uã€‚ å‚è€ƒæ–‡ç«  Springdoc-OpenAPI v2.1.0 Swaggerå®˜ç½‘ Swaggerå®˜æ–¹Githubä¸»é¡µ Swagegr Core Github Swagger å®˜æ–¹WIKI SpringDocå®˜ç½‘ SpringDoc Github springdoc-openapi Github äº†è§£æ›´å¤š SpringBoot2é›†æˆSwagger SpringBoot3é›†æˆSwagger","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/categories/SpringBoot/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"Swagger","slug":"Swagger","permalink":"https://guoshunfa.com/tags/Swagger/"}]},{"title":"SpringBoot2é›†æˆSwagger","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringBoot/SpringBoot2é›†æˆSwagger","date":"2023-07-11T04:01:01.000Z","updated":"2024-01-28T11:41:39.303Z","comments":true,"path":"2023/07/SpringBoot2é›†æˆSwagger/","link":"","permalink":"https://guoshunfa.com/2023/07/SpringBoot2%E9%9B%86%E6%88%90Swagger/","excerpt":"","text":"æ–‡ç« ä»“åº“ï¼šGithub Project å‰ææœ¬æ–‡ç« æ‰€ç”¨ç‰ˆæœ¬ï¼š SpringBoot 2.2.6.RELEASE springfox 3.0.0 jdk 8 ä¸åŒçš„ç‰ˆæœ¬ä¼šå¯¼è‡´ç‰ˆæœ¬å†²çªï¼Œåˆ‡æ¢ç‰ˆæœ¬æ—¶å»ºè®®å…ˆå»å®˜æ–¹æŸ¥çœ‹æ˜¯å¦äº’ç›¸å…¼å®¹ã€‚ å¼€å§‹é›†æˆ Swaggerå¯¼å…¥swagger maven åº“123456789101112&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-boot-starter --&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt; &lt;version&gt;3.0.0&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt; &lt;version&gt;3.0.0&lt;/version&gt;&lt;/dependency&gt; SpringBootå¼•å…¥Swaggerçš„mavenåº“ä¹‹å‰ï¼Œéœ€è¦å…ˆå¼•å…¥springboot-webçš„mavenï¼Œå¦åˆ™æ²¡æœ‰æ•ˆæœã€‚ 12345&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; æ·»åŠ swaggeré…ç½®ç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051import io.swagger.annotations.ApiOperation;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import springfox.documentation.builders.ApiInfoBuilder;import springfox.documentation.builders.PathSelectors;import springfox.documentation.builders.RequestHandlerSelectors;import springfox.documentation.oas.annotations.EnableOpenApi;import springfox.documentation.service.ApiInfo;import springfox.documentation.spi.DocumentationType;import springfox.documentation.spring.web.plugins.Docket;import springfox.documentation.swagger2.annotations.EnableSwagger2;// @Configuration æ ‡è¯†å½“å‰ç±»æ˜¯é…ç½®ç±»ï¼Œä¸@Beanæ­é…ä½¿ç”¨ä¼šç›´æ¥æ³¨å†Œä¸ºbeanã€‚@Configuration// @EnableOpenApi æ ‡è¯†å¼€å¯ç”Ÿæˆæ¥å£æ–‡æ¡£åŠŸèƒ½ï¼ˆåªæœ‰å¼€å¯äº†OpenApi,æ‰å¯ä»¥å®ç°ç”Ÿæˆæ¥å£æ–‡æ¡£çš„åŠŸèƒ½ï¼‰@EnableOpenApi@EnableSwagger2public class SwaggerConfig &#123; @Bean(&quot;swagger-1&quot;) public Docket createRestApi() &#123; return new Docket(DocumentationType.OAS_30) .groupName(&quot;swagger-1&quot;) .apiInfo(apiInfo()) .select() .apis( RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class)) .paths(PathSelectors.any()) .build(); &#125; @Bean(&quot;swagger-2&quot;) public Docket createRest2Api() &#123; return new Docket(DocumentationType.OAS_30) .groupName(&quot;swagger-2&quot;) .apiInfo(apiInfo()) .select() .apis( RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class)) .paths(PathSelectors.any()) .build(); &#125; private ApiInfo apiInfo() &#123; return new ApiInfoBuilder() // æ·»åŠ æ ‡é¢˜ .title(&quot;éƒ­é¡ºå‘ SpringBoot+Swaggeræ¥å£æ–‡æ¡£å¹³å°&quot; + System.currentTimeMillis()) // æ·»åŠ æè¿° .description(&quot;https://www.guoshunfa.com&quot;) // æ·»åŠ ç‰ˆæœ¬ .version(&quot;1.0&quot;) .build(); &#125;&#125; ç¼–å†™APIæ¥å£1234567891011121314151617import io.swagger.annotations.Api;import io.swagger.annotations.ApiOperation;import io.swagger.annotations.ApiParam;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RestController@Api(&quot;æµ‹è¯•controller&quot;)@RequestMapping(&quot;/guoshunfa&quot;)public class TestController &#123; @ApiOperation(&quot;æµ‹è¯•æ¥å£&quot;) @GetMapping(&quot;/swagger/test/&quot;) public void test(@ApiParam(&quot;é˜¿æ‹‰å•¦å•¦&quot;) String param1) &#123;&#125; &#125; æŸ¥çœ‹swagger-uiæ•ˆæœå¯åŠ¨é¡¹ç›®ï¼Œå°† æµè§ˆå™¨è®¿é—® http://ip:port/swagger-ui/index.html å…¶ä»–é¡µé¢å±•ç¤ºæ•ˆæœ - swagger-bootstrap-ui æ•ˆæœä½¿ç”¨å…¶ä»–uiéœ€è¦å¼•å…¥maven 12345&lt;dependency&gt; &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt; &lt;artifactId&gt;swagger-bootstrap-ui&lt;/artifactId&gt; &lt;version&gt;1.9.6&lt;/version&gt;&lt;/dependency&gt; æ•ˆæœ æµè§ˆå™¨è®¿é—® http://ip:port/doc.html Swagger API æ³¨è§£ æè¿° @Api å°†ç±»æ ‡è®°ä¸º Swagger èµ„æºã€‚ @ApiImplicitParam è¡¨ç¤º API æ“ä½œä¸­çš„å•ä¸ªå‚æ•°ã€‚ @ApiImplicitParams å…è®¸å¤šä¸ª ApiImplicitParam å¯¹è±¡åˆ—è¡¨çš„åŒ…è£…å™¨ã€‚ @ApiModel æä¾›æœ‰å…³ Swagger æ¨¡å‹çš„å…¶ä»–ä¿¡æ¯ã€‚ @ApiModelProperty æ·»åŠ å’Œæ“ä½œæ¨¡å‹å±æ€§çš„æ•°æ®ã€‚ @ApiOperation æè¿°é’ˆå¯¹ç‰¹å®šè·¯å¾„çš„æ“ä½œæˆ–é€šå¸¸æ˜¯ HTTP æ–¹æ³•ã€‚ @ApiParam ä¸ºæ“ä½œå‚æ•°æ·»åŠ é¢å¤–çš„å…ƒæ•°æ®ã€‚ @ApiResponse æè¿°æ“ä½œçš„å¯èƒ½å“åº”ã€‚ @ApiResponses å…è®¸å¤šä¸ª ApiResponse å¯¹è±¡åˆ—è¡¨çš„åŒ…è£…å™¨ã€‚ @Authorization å£°æ˜è¦åœ¨èµ„æºæˆ–æ“ä½œä¸Šä½¿ç”¨çš„æˆæƒæ–¹æ¡ˆã€‚ @AuthorizationScope æè¿° OAuth2 æˆæƒèŒƒå›´ã€‚ @ResponseHeader è¡¨ç¤ºå¯ä»¥ä½œä¸ºå“åº”çš„ä¸€éƒ¨åˆ†æä¾›çš„æ ‡å¤´ã€‚ æœ€æ–°ç‰ˆæœ¬è¿˜æ·»åŠ äº†è®¸å¤šæ³¨é‡Šï¼Œç”¨äºåœ¨ Swagger å®šä¹‰çº§åˆ«æ·»åŠ æ‰©å±•å’Œå…ƒæ•°æ®ï¼š æ³¨è§£ æè¿° @SwaggerDefinition è¦æ·»åŠ åˆ°ç”Ÿæˆçš„ Swagger å®šä¹‰ä¸­çš„å®šä¹‰çº§å±æ€§ @Info Swagger å®šä¹‰çš„ä¸€èˆ¬å…ƒæ•°æ® @Contact ç”¨äºæè¿° Swagger å®šä¹‰çš„è”ç³»äººçš„å±æ€§ @License ç”¨äºæè¿° Swagger å®šä¹‰çš„è®¸å¯è¯çš„å±æ€§ @Extension æ·»åŠ åŒ…å«å±æ€§çš„æ‰©å±• @ExtensionProperty å°†è‡ªå®šä¹‰å±æ€§æ·»åŠ åˆ°æ‰©å±• èµ„æº API å£°æ˜@Apiåœ¨ Swagger 2.0 ä¸­ï¼Œèµ„æºè¢«æ ‡ç­¾æ›¿æ¢ï¼Œè¿™ä¼šå½±å“@Apiæ³¨é‡Šã€‚å®ƒä¸å†ç”¨äºå£°æ˜èµ„æºï¼Œè€Œç°åœ¨ç”¨äºä¸ºåœ¨å®ƒä¸‹å®šä¹‰çš„æ‰€æœ‰æ“ä½œåº”ç”¨å®šä¹‰ã€‚ JAX-RS çš„ç”¨æ³•æ˜¯ï¼š 12345678@Path(&quot;/pet&quot;)@Api(value = &quot;pet&quot;, authorizations = &#123; @Authorization(value=&quot;sampleoauth&quot;, scopes = &#123;&#125;) &#125;)@Produces(&#123;&quot;application/json&quot;, &quot;application/xml&quot;&#125;)public class PetResource &#123; ...&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¯´è¿™ä¸ªç±»ä¸‹çš„æ“ä½œçš„æ ‡ç­¾æ˜¯petï¼ˆæ‰€ä»¥å®ƒä»¬éƒ½ä¼šè¢«ç»„åˆåœ¨ä¸€èµ·ï¼‰ã€‚Swagger å°†è·å–@Producesæ³¨é‡Šï¼Œä½†å¦‚æœæ‚¨æ„¿æ„ï¼Œæ‚¨å¯ä»¥è¦†ç›–æ­¤å€¼ã€‚ @Apiä¹Ÿå¯ç”¨äºåœ¨èµ„æºçº§åˆ«å£°æ˜æˆæƒã€‚è¿™äº›å®šä¹‰é€‚ç”¨äºè¯¥èµ„æºä¸‹çš„æ‰€æœ‰æ“ä½œï¼Œä½†å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨æ“ä½œçº§åˆ«è¦†ç›–ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªå…ˆå‰å£°æ˜çš„ OAuth2 æˆæƒæ–¹æ¡ˆï¼Œæ²¡æœ‰ä»»ä½•èŒƒå›´ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æ£€æŸ¥@Authorizationæ³¨é‡Šã€‚ é™¤äº†ä½¿ç”¨value()ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨tags()å…è®¸æ‚¨ä¸ºæ“ä½œè®¾ç½®å¤šä¸ªæ ‡ç­¾çš„å±æ€§ã€‚ä¾‹å¦‚ï¼š 1@Api(tags = &#123;&quot;external_info&quot;,&quot;user_info&quot;&#125;) è¯·æ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œvalue()å³ä½¿å®ƒå­˜åœ¨ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚ å¸ƒå°”hiddenå±æ€§å¯ç”¨äºå®Œå…¨éšè— @Apiï¼Œå³ä½¿å®ƒå·²å£°æ˜ã€‚è¿™åœ¨ä½¿ç”¨å­èµ„æºåˆ é™¤ä¸éœ€è¦çš„å·¥ä»¶æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚ åœ¨ swagger-core 1.5.X ä¸­ï¼Œdescription()ä¸å†ä½¿ç”¨basePath()ã€ å’Œã€‚position() æœ‰å…³æ­¤æ³¨é‡Šã€ç”¨æ³•å’Œè¾¹ç¼˜æƒ…å†µçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹javadocsã€‚ è¿è¥å£°æ˜@ApiOperation@ApiOperationç”¨äºå£°æ˜å•ä¸ªæ“ä½œã€‚æ“ä½œè¢«è®¤ä¸ºæ˜¯è·¯å¾„å’Œ HTTP æ–¹æ³•çš„å”¯ä¸€ç»„åˆã€‚ JAX-RS çš„ç”¨æ³•æ˜¯ï¼š 1234567@GET@Path(&quot;/findByStatus&quot;)@ApiOperation(value = &quot;Finds Pets by status&quot;, notes = &quot;Multiple status values can be provided with comma seperated strings&quot;, response = Pet.class, responseContainer = &quot;List&quot;)public Response findPetsByStatus(...) &#123; ... &#125; æ³¨é‡Šçš„valueæ˜¯å¯¹ API çš„ç®€çŸ­æè¿°ã€‚ç”±äºå®ƒæ˜¾ç¤ºåœ¨ Swagger-UI çš„æ“ä½œåˆ—è¡¨ä¸­ï¼Œå¹¶ä¸”ä½ç½®å¤§å°æœ‰é™ï¼Œå› æ­¤åº”ä¿æŒç®€çŸ­ï¼ˆæœ€å¥½å°äº 120 ä¸ªå­—ç¬¦ï¼‰ã€‚è¿™noteså…è®¸æ‚¨æä¾›æœ‰å…³æ“ä½œçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚responseæ˜¯æ–¹æ³•çš„è¿”å›ç±»å‹ã€‚è¯·æ³¨æ„ï¼Œå®é™…çš„æ–¹æ³•å£°æ˜è¿”å›çš„Responseæ˜¯ä¸€ä¸ªé€šç”¨ JAX-RS ç±»ï¼Œè€Œä¸æ˜¯å‘é€ç»™ç”¨æˆ·çš„å®é™…å“åº”ã€‚å¦‚æœè¿”å›çš„å¯¹è±¡æ˜¯å®é™…ç»“æœï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸ç”¨åœ¨æ³¨è§£ä¸­å£°æ˜ã€‚ç”±äºæˆ‘ä»¬æƒ³è¦è¿”å›ä¸€ä¸ªå® ç‰©åˆ—è¡¨ï¼Œæˆ‘ä»¬ä½¿ç”¨responseContainer. è¯·è®°ä½ï¼ŒJava å…·æœ‰ç±»å‹æ“¦é™¤ï¼Œå› æ­¤åœ¨è¿”å›ç±»å‹ä¸­ä½¿ç”¨æ³›å‹å¯èƒ½æ— æ³•æ­£ç¡®è§£æï¼Œå¹¶ä¸”responseåº”è¯¥ç›´æ¥ä½¿ç”¨ã€‚JAX-RS æ³¨é‡Šå°†@GETç”¨ä½œæ“ä½œçš„ (HTTP)methodå­—æ®µï¼Œå®ƒ@Pathä¼šå‘Šè¯‰æˆ‘ä»¬æ“ä½œçš„è·¯å¾„ï¼ˆæ“ä½œåˆ†ç»„åœ¨åŒä¸€è·¯å¾„ä¸‹ï¼Œæ¯ä¸ªä½¿ç”¨çš„ HTTP æ–¹æ³•ä¸€ä¸ªï¼‰ã€‚ è¾“å‡ºå°†æ˜¯ï¼š 1234567891011121314151617181920 &quot;/pet/findByStatus&quot;: &#123;&quot;get&quot;: &#123; &quot;tags&quot;: [ &quot;pet&quot; ], &quot;summary&quot;: &quot;Finds Pets by status&quot;, &quot;description&quot;: &quot;Multiple status values can be provided with comma seperated strings&quot;, &quot;responses&quot;: &#123; &quot;200&quot;: &#123; &quot;description&quot;: &quot;successful operation&quot;, &quot;schema&quot;: &#123; &quot;type&quot;: &quot;array&quot;, &quot;items&quot;: &#123; &quot;$ref&quot;: &quot;#/definitions/Pet&quot; &#125; &#125; &#125;, . . . æœ‰å…³æ­¤æ³¨é‡Šã€ç”¨æ³•å’Œè¾¹ç¼˜æƒ…å†µçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹javadocsã€‚ @ApiResponses , @ApiResponseä½¿ç”¨ HTTP çŠ¶æ€ä»£ç è¿”å›é”™è¯¯ï¼ˆæˆ–å…¶ä»–æˆåŠŸæ¶ˆæ¯ï¼‰æ˜¯ä¸€ç§å¸¸è§çš„åšæ³•ã€‚è™½ç„¶åœ¨@ApiOperationä¸­å®šä¹‰äº†æ“ä½œçš„ä¸€èˆ¬è¿”å›ç±»å‹ï¼Œä½†åº”ä½¿ç”¨è¿™äº›æ³¨é‡Šæ¥æè¿°å…¶ä½™çš„è¿”å›ä»£ç ã€‚ æè¿°äº†ä¸€ä¸ªå…·ä½“çš„@ApiResponseå¯èƒ½å“åº”ã€‚ä¸èƒ½ç›´æ¥åœ¨æ–¹æ³•æˆ–ç±»&#x2F;æ¥å£ä¸Šä½¿ç”¨ï¼Œéœ€è¦åŒ…å«åœ¨æ•°ç»„å€¼ä¸­@ApiResponsesï¼ˆæ— è®ºæ˜¯ä¸€ä¸ªå“åº”è¿˜æ˜¯å¤šä¸ªå“åº”ï¼‰ã€‚ å¦‚æœå“åº”ä¼´éšç€èº«ä½“ï¼Œä¹Ÿå¯ä»¥æè¿°èº«ä½“æ¨¡å‹ï¼ˆæ¯ä¸ªå“åº”ä¸€ä¸ªæ¨¡å‹ï¼‰ã€‚ 12345@ApiResponses(value = &#123; @ApiResponse(code = 400, message = &quot;Invalid ID supplied&quot;, responseHeaders = @ResponseHeader(name = &quot;X-Rack-Cache&quot;, description = &quot;Explains whether or not a cache was used&quot;, response = Boolean.class)), @ApiResponse(code = 404, message = &quot;Pet not found&quot;) &#125;)public Response getPetById(...) &#123;...&#125; åœ¨ swagger-core 1.5.X ä¸­ï¼Œæ‚¨è¿˜å¯ä»¥æ·»åŠ å“åº”æ ‡å¤´çš„æè¿°ï¼Œå¦‚ä¸Šä¾‹æ‰€ç¤ºã€‚ æœ‰å…³æ­¤æ³¨é‡Šã€ç”¨æ³•å’Œè¾¹ç¼˜æƒ…å†µçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ javadocsï¼ˆ@ApiResponsesã€@ApiResponseï¼‰ã€‚ @Authorization , @AuthorizationScopeè¿™äº›æ³¨é‡Šä»…ç”¨ä½œ@Apiå’Œ@ApiOperationçš„è¾“å…¥ï¼Œè€Œä¸æ˜¯ç›´æ¥ç”¨äºèµ„æºå’Œæ“ä½œã€‚ä¸€æ—¦æ‚¨å£°æ˜å¹¶é…ç½®äº†æ‚¨åœ¨ API ä¸­æ”¯æŒçš„æˆæƒæ–¹æ¡ˆï¼Œæ‚¨å°±å¯ä»¥ä½¿ç”¨è¿™äº›æ³¨é‡Šæ¥è®°å½•èµ„æºæˆ–ç‰¹å®šæ“ä½œéœ€è¦å“ªç§æˆæƒæ–¹æ¡ˆã€‚è¿™@AuthorizationScopeæ˜¯ç‰¹å®šäº OAuth2 æˆæƒæ–¹æ¡ˆçš„æƒ…å†µï¼Œæ‚¨å¯èƒ½å¸Œæœ›æŒ‡å®šç‰¹å®šçš„æ”¯æŒèŒƒå›´ã€‚ @Authorization å’Œ @AuthorizationScope è½¬æ¢ä¸ºSecurity Requirement Objectã€‚ å®ç°ï¼ˆJAX-RSã€Servlet æˆ–å…¶ä»–ï¼‰ä¹‹é—´çš„è¡Œä¸ºæ˜¯ç›¸åŒçš„ï¼š 123456789@ApiOperation(value = &quot;Add a new pet to the store&quot;, authorizations = &#123; @Authorization( value=&quot;petoauth&quot;, scopes = &#123; @AuthorizationScope(scope = &quot;add:pet&quot;) &#125; ) &#125;)public Response addPet(...) &#123;...&#125; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å£°æ˜è¯¥addPetæ“ä½œä½¿ç”¨petoauthæˆæƒæ–¹æ¡ˆï¼ˆæˆ‘ä»¬å‡è®¾å®ƒæ˜¯ OAuth2 æˆæƒæ–¹æ¡ˆï¼‰ã€‚ç„¶åä½¿ç”¨æˆ‘ä»¬é€šè¿‡è¯´å®ƒéœ€è¦èŒƒå›´@AuthorizationScopeæ¥å¾®è°ƒå®šä¹‰ã€‚add:petå¦‚ä¸Šæ‰€è¿°ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°@AuthorizationScopeç”¨ä½œ çš„è¾“å…¥@Authorizationï¼Œè€Œåè€…åˆç”¨ä½œ çš„è¾“å…¥@ApiOperationã€‚è¯·è®°ä½ï¼Œè¿™äº›æ³¨é‡Šåªèƒ½ç”¨ä½œ å’Œ çš„@Apiè¾“å…¥@ApiOperationã€‚ç›´æ¥åœ¨ç±»æˆ–æ–¹æ³•ä¸Šä½¿ç”¨å®ƒä»¬ä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ½å°†è¢«å¿½ç•¥ã€‚ è¾“å‡ºå°†æ˜¯ï¼š 1234567&quot;security&quot;: [ &#123; &quot;petoauth&quot;: [ &quot;add:pet&quot; ] &#125;] æœ‰å…³æ­¤æ³¨è§£ã€ç”¨æ³•å’Œè¾¹ç¼˜æƒ…å†µçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ javadocsï¼ˆ@Authorizationã€@AuthorizationScopeï¼‰ã€‚ @ApiParam@ApiParamä»…ä¸ JAX-RS å‚æ•°æ³¨é‡Šï¼ˆ@PathParamã€@QueryParamã€@HeaderParamå’Œ@FormParamJAX-RS 2 ä¸­çš„ï¼‰ä¸€èµ·ä½¿ç”¨@BeanParamã€‚è™½ç„¶ swagger-core é»˜è®¤æ‰«æè¿™äº›æ³¨é‡Šï¼Œä½†@ApiParamå¯ç”¨äºåœ¨å‚æ•°ä¸­æ·»åŠ æ›´å¤šè¯¦ç»†ä¿¡æ¯æˆ–æ›´æ”¹ä»ä»£ç ä¸­è¯»å–çš„å€¼ã€‚ åœ¨ Swagger è§„èŒƒä¸­ï¼Œè¿™è½¬æ¢ä¸ºParameter Objectã€‚ Swagger å°†é€‰å–value()è¿™äº›æ³¨è§£å¹¶å°†å®ƒä»¬ç”¨ä½œå‚æ•°åç§°ï¼Œå¹¶ä¸”åŸºäºæ³¨è§£å®ƒè¿˜å°†è®¾ç½®å‚æ•°ç±»å‹ã€‚ å¦‚æœå­˜åœ¨ï¼ŒSwagger è¿˜å°†ä½¿ç”¨ çš„å€¼@DefaultValueä½œä¸ºé»˜è®¤å€¼å±æ€§ã€‚ 123456 @Path(&quot;/&#123;username&#125;&quot;) @ApiOperation(value = &quot;Updated user&quot;, notes = &quot;This can only be done by the logged in user.&quot;)public Response updateUser( @ApiParam(value = &quot;name that need to be updated&quot;, required = true) @PathParam(&quot;username&quot;) String username, @ApiParam(value = &quot;Updated user object&quot;, required = true) User user) &#123;...&#125; è¿™é‡Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªï¼Œusernameå®ƒæ˜¯è·¯å¾„çš„ä¸€éƒ¨åˆ†ã€‚ç¬¬äºŒä¸ªæ˜¯ä¸»ä½“ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯ä¸€ä¸ªç”¨æˆ·å¯¹è±¡ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªå‚æ•°çš„requiredå±æ€§éƒ½è®¾ç½®ä¸ºtrueã€‚å¯¹äº@PathParamï¼Œè¿™æ˜¯å¤šä½™çš„ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹å®ƒæ˜¯å¼ºåˆ¶æ€§çš„å¹¶ä¸”ä¸èƒ½è¢«è¦†ç›–ã€‚ è¾“å‡ºå°†æ˜¯ï¼š 123456789101112131415161718 &quot;parameters&quot;: [ &#123; &quot;name&quot;: &quot;username&quot;, &quot;in&quot;: &quot;path&quot;, &quot;description&quot;: &quot;name that need to be deleted&quot;, &quot;required&quot;: true, &quot;type&quot;: &quot;string&quot; &#125;, &#123; &quot;in&quot;: &quot;body&quot;, &quot;name&quot;: &quot;body&quot;, &quot;description&quot;: &quot;Updated user object&quot;, &quot;required&quot;: true, &quot;schema&quot;: &#123; &quot;$ref&quot;: &quot;#/definitions/User&quot; &#125; &#125;] æœ‰å…³æ­¤æ³¨é‡Šã€ç”¨æ³•å’Œè¾¹ç¼˜æƒ…å†µçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹javadocsã€‚ @ApiImplicitParam , @ApiImplicitParamsæ‚¨å¯èƒ½å¸Œæœ›æ‰‹åŠ¨æè¿°æ“ä½œå‚æ•°ã€‚è¿™å¯èƒ½æœ‰å¤šç§åŸå› ï¼Œä¾‹å¦‚ï¼š ä½¿ç”¨ä¸ä½¿ç”¨ JAX-RS æ³¨é‡Šçš„ Servletã€‚ æƒ³è¦éšè—å®šä¹‰çš„å‚æ•°å¹¶ç”¨å®Œå…¨ä¸åŒçš„å®šä¹‰è¦†ç›–å®ƒã€‚ æè¿°åœ¨åˆ°è¾¾ JAX-RS å®ç°ä¹‹å‰ç”±è¿‡æ»¤å™¨æˆ–å…¶ä»–èµ„æºä½¿ç”¨çš„å‚æ•°ã€‚ ç”±äºå¯ä»¥åŒ…å«å¤šä¸ªå‚æ•°ï¼Œå› æ­¤@ApiImplicitParamså…è®¸å¤šä¸ª@ApiImplicitParamå®šä¹‰ã€‚ åœ¨ Swagger è§„èŒƒä¸­ï¼Œè¿™äº›è½¬æ¢ä¸ºParameter Objectã€‚ éšå¼å®šä¹‰å‚æ•°æ—¶ï¼Œè®¾ç½®nameå’ŒdataTypeSwaggerparamTypeçš„å®šä¹‰æ­£ç¡®å¾ˆé‡è¦ã€‚ 123456@ApiImplicitParams(&#123; @ApiImplicitParam(name = &quot;name&quot;, value = &quot;User&#x27;s name&quot;, required = true, dataType = &quot;string&quot;, paramType = &quot;query&quot;), @ApiImplicitParam(name = &quot;email&quot;, value = &quot;User&#x27;s email&quot;, required = false, dataType = &quot;string&quot;, paramType = &quot;query&quot;), @ApiImplicitParam(name = &quot;id&quot;, value = &quot;User ID&quot;, required = true, dataType = &quot;long&quot;, paramType = &quot;query&quot;) &#125;)public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;...&#125; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¸¦æœ‰å¤šä¸ªå‚æ•°çš„ Servlet å®šä¹‰ã€‚dataTypeå¯ä»¥æ˜¯åŸå§‹åç§°æˆ–ç±»åç§°ã€‚å¯ä»¥æ˜¯ Swagger æ”¯æŒçš„paramTypeä»»ä½•å‚æ•°ç±»å‹ï¼ˆæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… javadocs æˆ–è§„èŒƒï¼‰ã€‚ 123456789101112131415161718192021222324 &quot;parameters&quot;: [ &#123; &quot;name&quot;: &quot;name&quot;, &quot;description&quot;: &quot;User&#x27;s name&quot;, &quot;required&quot;: true, &quot;type&quot;: &quot;string&quot;, &quot;in&quot;: &quot;query&quot; &#125;, &#123; &quot;name&quot;: &quot;email&quot;, &quot;description&quot;: &quot;User&#x27;s email&quot;, &quot;required&quot;: false, &quot;type&quot;: &quot;string&quot;, &quot;in&quot;: &quot;query&quot; &#125;, &#123; &quot;name&quot;: &quot;id&quot;, &quot;description&quot;: &quot;User ID&quot;, &quot;required&quot;: true, &quot;type&quot;: &quot;integer&quot;, &quot;format&quot;: &quot;int64&quot;, &quot;in&quot;: &quot;query&quot; &#125;] æœ‰å…³æ­¤æ³¨é‡Šã€ç”¨æ³•å’Œè¾¹ç¼˜æƒ…å†µçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ javadocsï¼ˆ@ApiImplicitParamã€@ApiImplicitParamsï¼‰ã€‚ @ResponseHeaderå¦‚æœè¦æè¿°å“åº”æ ‡å¤´ï¼Œåªéœ€å°†å…¶æ·»åŠ åˆ°@ApiOperationæˆ–@ApiResponseï¼ŒåŒæ—¶æä¾›æ ‡å¤´çš„åç§°ã€æè¿°å’Œç±»å‹ã€‚ ä¾‹å¦‚ï¼Œåœ¨ç»™å®šçš„å“åº”ä¸­ï¼Œå®ƒå°†å¦‚ä¸‹æ‰€ç¤ºï¼š 12345@ApiResponses(value = &#123; @ApiResponse(code = 400, message = &quot;Invalid ID supplied&quot;, responseHeaders = @ResponseHeader(name = &quot;X-Rack-Cache&quot;, description = &quot;Explains whether or not a cache was used&quot;, response = Boolean.class)), @ApiResponse(code = 404, message = &quot;Pet not found&quot;) &#125;)public Response getPetById(...) &#123;...&#125; æœ‰å…³æ­¤æ³¨é‡Šã€ç”¨æ³•å’Œè¾¹ç¼˜æƒ…å†µçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹javadocsã€‚ æ¨¡å‹å£°æ˜@ApiModelSwagger-core åŸºäºåœ¨æ•´ä¸ª API å†…çœä¸­å¯¹æ¨¡å‹å®šä¹‰çš„å¼•ç”¨æ¥æ„å»ºæ¨¡å‹å®šä¹‰ã€‚å…è®¸æ‚¨æ“ä½œæ¨¡å‹çš„@ApiModelå…ƒæ•°æ®ï¼Œä»ç®€å•çš„æè¿°æˆ–åç§°æ›´æ”¹åˆ°å¤šæ€æ€§çš„å®šä¹‰ã€‚ è¿™è½¬åŒ–ä¸º Swagger è§„èŒƒä¸­çš„æ¨¡å¼å¯¹è±¡ã€‚ åœ¨å…¶åŸºæœ¬åŠŸèƒ½ä¸­ï¼Œæ‚¨@ApiModelå¯ä»¥æ›´æ”¹æ¨¡å‹çš„åç§°å¹¶ä¸ºå…¶æ·»åŠ æè¿°ï¼š 12@ApiModel(value=&quot;DifferentModel&quot;, description=&quot;Sample model for the documentation&quot;)class OriginalModel &#123;...&#125; åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ¨¡å‹çš„åç§°ä» OriginalModel æ›´æ”¹ä¸º DifferentModelã€‚ è¾“å‡ºå°†æ˜¯ï¼š 12345&quot;DifferentModel&quot;: &#123; &quot;description&quot;: &quot;Sample model for the documentation&quot;, . . &#125; æ‚¨è¿˜å¯ä»¥@ApiModelé€šè¿‡æŒ‡å®šå­ç±»å‹æ¥å®ç°æ¨¡å‹ç»„åˆï¼Œä¾‹å¦‚ï¼š 1234@ApiModel(value = &quot;Pet&quot;, subTypes = &#123;Cat.class&#125;)public class Pet &#123;&#125; swagger-samples ä¸­æä¾›äº†æ­¤åœºæ™¯çš„ç¤ºä¾‹ï¼š https://github.com/swagger-api/swagger-samples/blob/master/java/java-jaxrs/src/main/java/io/swagger/sample/model/Pet.java https://github.com/swagger-api/swagger-samples/blob/master/java/java-jaxrs/src/main/java/io/swagger/sample/model/Vehicle.java æœ‰å…³æ­¤æ³¨é‡Šã€ç”¨æ³•å’Œè¾¹ç¼˜æƒ…å†µçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹javadocsã€‚ @ApiModelPropertyè™½ç„¶ swagger-core å°†è‡ªçœå­—æ®µå’Œ setter&#x2F;getterï¼Œä½†å®ƒè¿˜å°†è¯»å–å’Œå¤„ç† JAXB æ³¨é‡Šã€‚å…è®¸æ§åˆ¶ Swagger ç‰¹å®šçš„@ApiModelPropertyå®šä¹‰ï¼Œä¾‹å¦‚å…è®¸çš„å€¼å’Œé™„åŠ æ³¨é‡Šã€‚å¦‚æœæ‚¨æƒ³åœ¨æŸäº›æƒ…å†µä¸‹éšè—è¯¥å±æ€§ï¼Œå®ƒè¿˜æä¾›äº†é¢å¤–çš„è¿‡æ»¤å±æ€§ã€‚ 1234@ApiModelProperty(value = &quot;pet status in the store&quot;, allowableValues = &quot;available,pending,sold&quot;)public String getStatus() &#123; return status;&#125; è¿™æ˜¯å‘æ¨¡å‹å±æ€§æ·»åŠ ç®€çŸ­æè¿°çš„ç®€å•ç¤ºä¾‹ã€‚è¿˜å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œè™½ç„¶statusæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æˆ‘ä»¬å°†å®ƒè®°å½•ä¸ºåªæœ‰ä¸‰ä¸ªå¯èƒ½çš„å€¼ã€‚ å®ƒçš„è¾“å‡ºå°†æ˜¯ï¼š 123456789101112&quot;properties&quot;: &#123; ..., &quot;status&quot;: &#123; &quot;type&quot;: &quot;string&quot;, &quot;description&quot;: &quot;pet status in the store&quot;, &quot;enum&quot;: [ &quot;available&quot;, &quot;pending&quot;, &quot;sold&quot; ] &#125; &#125; æœ‰å…³æ­¤æ³¨é‡Šã€ç”¨æ³•å’Œè¾¹ç¼˜æƒ…å†µçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹javadocsã€‚ å®šä¹‰@SwaggerDefinitionSwaggerDefinition æ³¨é‡Šæä¾›äº†ä¸Swaggerå¯¹è±¡çš„è®¸å¤šï¼ˆä½†ä¸æ˜¯å…¨éƒ¨ï¼‰é¡¶çº§å±æ€§ç›¸å¯¹åº”çš„å±æ€§ï¼Œå…è®¸æ‚¨ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„å®šä¹‰è®¾ç½®è¿™äº›å±æ€§ã€‚æ³¨é‡Šå¯ä»¥åœ¨ Swagger è‡ªåŠ¨é…ç½®è¿‡ç¨‹ä¸­æ‰«æçš„ä»»ä½•ç±»ä¸Šï¼Œå³å®ƒä¸å¿…åœ¨ JAX-RS API ç±»ä¸Šï¼Œè€Œå¯ä»¥åªæ˜¯åœ¨æ ‡è®°&#x2F;é…ç½®æ¥å£ä¸Šï¼Œä¾‹å¦‚ï¼š 1234567891011121314151617181920212223242526@SwaggerDefinition( info = @Info( description = &quot;Gets the weather&quot;, version = &quot;V12.0.12&quot;, title = &quot;The Weather API&quot;, termsOfService = &quot;http://theweatherapi.io/terms.html&quot;, contact = @Contact( name = &quot;Rain Moore&quot;, email = &quot;rain.moore@theweatherapi.io&quot;, url = &quot;http://theweatherapi.io&quot; ), license = @License( name = &quot;Apache 2.0&quot;, url = &quot;http://www.apache.org/licenses/LICENSE-2.0&quot; ) ), consumes = &#123;&quot;application/json&quot;, &quot;application/xml&quot;&#125;, produces = &#123;&quot;application/json&quot;, &quot;application/xml&quot;&#125;, schemes = &#123;SwaggerDefinition.Scheme.HTTP, SwaggerDefinition.Scheme.HTTPS&#125;, tags = &#123; @Tag(name = &quot;Private&quot;, description = &quot;Tag used to denote operations as private&quot;) &#125;, externalDocs = @ExternalDocs(value = &quot;Meteorology&quot;, url = &quot;http://theweatherapi.io/meteorology.html&quot;))public interface TheWeatherApiConfig &#123;&#125; ä¸Šé¢æ˜¾ç¤ºçš„å±æ€§ä¼šå¯¼è‡´ç›¸åº”çš„å…ƒæ•°æ®è¢«æ·»åŠ åˆ°ç”Ÿæˆçš„ swagger.json &#x2F; swagger.yaml æ–‡ä»¶ä¸­ å¦‚æœæ‚¨æœ‰å¤šä¸ª @SwaggerDefinition æ³¨é‡Šï¼Œå®ƒä»¬å°†æŒ‰ç…§å®ƒä»¬è¢«å‘ç°çš„é¡ºåºè¿›è¡Œèšåˆ - ä»»ä½•é‡å¤çš„æ³¨é‡Šå±æ€§éƒ½å°†è¦†ç›–ä»¥å‰çš„å±æ€§ã€‚ @Info@Info æ³¨é‡Šä¸º Swagger å®šä¹‰æ·»åŠ é€šç”¨å…ƒæ•°æ®å±æ€§ - å¯¹åº”äºè§„èŒƒä¸­çš„Infoå¯¹è±¡ã€‚å¦‚ä¸Šä¾‹æ‰€ç¤ºï¼š 123456789@SwaggerDefinition( info = @Info( description = &quot;Gets the weather&quot;, version = &quot;V12.0.12&quot;, title = &quot;The Weather API&quot;, termsOfService = &quot;http://theweatherapi.io/terms.html&quot;, ... ),... æœ‰å…³å—æ”¯æŒå±æ€§çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…javadoc ã€‚ @Contact@Contact æ³¨é‡Šå°†è”ç³»äººå±æ€§æ·»åŠ åˆ° Swagger å®šä¹‰çš„ @Info éƒ¨åˆ† - å¯¹åº”äºè§„èŒƒä¸­çš„è”ç³»äººå¯¹è±¡ã€‚å¦‚ä¸Šä¾‹æ‰€ç¤ºï¼š 1234567891011@SwaggerDefinition( info = @Info( ... contact = @Contact( name = &quot;Rain Moore&quot;, email = &quot;rain.moore@theweatherapi.io&quot;, url = &quot;http://theweatherapi.io&quot; ), ... ),... æœ‰å…³å—æ”¯æŒå±æ€§çš„åˆ—è¡¨ï¼Œè¯·å‚é˜…javadoc ã€‚ @License@License æ³¨é‡Šå°†è®¸å¯è¯å±æ€§æ·»åŠ åˆ° Swagger å®šä¹‰çš„ @Info éƒ¨åˆ† - å¯¹åº”äºè§„èŒƒä¸­çš„è®¸å¯è¯å¯¹è±¡ã€‚å¦‚ä¸Šä¾‹æ‰€ç¤ºï¼š 123456789@SwaggerDefinition( info = @Info( ... license = @License( name = &quot;Apache 2.0&quot;, url = &quot;http://www.apache.org/licenses/LICENSE-2.0&quot; ) ),... æœ‰å…³å—æ”¯æŒå±æ€§çš„åˆ—è¡¨ï¼Œè¯·å‚é˜…javadoc ã€‚ @Extensionæ‰©å±•æ³¨é‡Šå…è®¸å°†æ‰©å±•å±æ€§æ·»åŠ åˆ° Swagger å®šä¹‰ä¸­ã€‚å®ƒç›®å‰åœ¨ @ApiOperationã€@Info å’Œ @Tag æ³¨é‡Šä¸­å—æ”¯æŒã€‚æœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ³•ï¼š 12345678... extensions = &#123; @Extension(properties = &#123; @ExtensionProperty(name = &quot;test1&quot;, value = &quot;value1&quot;), @ExtensionProperty(name = &quot;test2&quot;, value = &quot;value2&quot;) &#125;) &#125;... è¿™å°†å¯¼è‡´ä»¥ä¸‹jsonï¼š 1234... &quot;x-test1&quot; : &quot;value1&quot;, &quot;x-test2&quot; : &quot;value2&quot;... å¦‚æœåœ¨æ³¨é‡Šä¸­æ²¡æœ‰æ˜ç¡®åœ°è¿™æ ·åšï¼Œå±æ€§åç§°å°†è‡ªåŠ¨ä»¥â€œx-â€ä¸ºå‰ç¼€ã€‚ æˆ–è€…ï¼Œæ‚¨å¯ä»¥å°†æ‰©å±•åå‘½åä¸ºï¼š 12345678... extensions = &#123; @Extension( name = &quot;my-extension&quot;, properties = &#123; @ExtensionProperty(name = &quot;test1&quot;, value = &quot;value1&quot;), @ExtensionProperty(name = &quot;test2&quot;, value = &quot;value2&quot;) &#125;) &#125;... è¿™å°†å¯¼è‡´ä»¥ä¸‹jsonï¼š 123456... &quot;x-my-extension&quot; : &#123; &quot;test1&quot; : &quot;value1&quot;, &quot;test2&quot; : &quot;value2&quot; &#125;... å®ƒå°†åŒ…å«çš„æ‰©å±•å±æ€§åŒ…è£…åœ¨ JSON å¯¹è±¡ä¸­ã€‚ @ExtensionPropertyæ‰©å±•ä¸­çš„å•ä¸ªå±æ€§ - æœ‰å…³ç¤ºä¾‹ï¼Œè¯·å‚è§å‰é¢çš„@Extensionéƒ¨åˆ†ã€‚ è‡ªå®šä¹‰ Swagger å®šä¹‰å¦‚æœæ‚¨å‡ºäºä»»ä½•åŸå› æƒ³è¦è‡ªå®šä¹‰ç”Ÿæˆçš„ Swagger å®šä¹‰è¶…å‡ºæ³¨é‡Šçš„èŒƒå›´ï¼Œæ‚¨å¯ä»¥ä¸º Swagger å¼•æ“æä¾›æä¾›ç›¸åº”å›è°ƒçš„ ReaderListenerï¼š 12345678910111213141516171819202122public interface ReaderListener &#123; /** * Called before the Swagger definition gets populated from scanned classes. Use this method to * pre-process the Swagger definition before it gets populated. * * @param reader the reader used to read annotations and build the Swagger definition * @param swagger the initial swagger definition */ void beforeScan(Reader reader, Swagger swagger); /** * Called after a Swagger definition has been populated from scanned classes. Use this method to * post-process Swagger definitions. * * @param reader the reader used to read annotations and build the Swagger definition * @param swagger the configured Swagger definition */ void afterScan(Reader reader, Swagger swagger);&#125; åœ¨ä½¿ç”¨æ­¤æ³¨è§£è¿›è¡Œèµ„æºæ‰«ææœŸé—´æ‰¾åˆ°çš„ä»»ä½•ç±»éƒ½å°†è¢«å®ä¾‹åŒ–å¹¶ç›¸åº”åœ°è°ƒç”¨ã€‚ä¾‹å¦‚ä¸‹é¢çš„ç±»ï¼š 1234567public class BasePathModifier implements ReaderListener &#123; void beforeScan(Reader reader, Swagger swagger)&#123;&#125; void afterScan(Reader reader, Swagger swagger)&#123; swagger.setBasePath( System.getProperty( &quot;swagger.basepath&quot;, swagger.getBasePath() )); &#125;&#125; å°†å…è®¸æ‚¨ä»ç³»ç»Ÿå±æ€§è¦†ç›–ç”Ÿæˆçš„ basePathã€‚ å‚è€ƒæ–‡æ¡£ Swaggerå®˜ç½‘ Swaggerå®˜æ–¹Githubä¸»é¡µ Swagegr Core Github Swagger å®˜æ–¹WIKI","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/categories/SpringBoot/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"Swagger","slug":"Swagger","permalink":"https://guoshunfa.com/tags/Swagger/"}]},{"title":"åŒæ­¥è‡³è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº","slug":"åŒæ­¥è‡³è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº","date":"2023-07-03T08:28:15.000Z","updated":"2024-01-28T11:41:39.236Z","comments":true,"path":"2023/07/åŒæ­¥è‡³è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº/","link":"","permalink":"https://guoshunfa.com/2023/07/%E5%90%8C%E6%AD%A5%E8%87%B3%E8%85%BE%E8%AE%AF%E4%BA%91%E5%BC%80%E5%8F%91%E8%80%85%E7%A4%BE%E5%8C%BA/","excerpt":"","text":"æˆ‘çš„åšå®¢å³å°†åŒæ­¥è‡³è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒºï¼Œé‚€è¯·å¤§å®¶ä¸€åŒå…¥é©»ï¼šhttps://cloud.tencent.com/developer/support-plan?invite_code=eiey4wuskvsz","categories":[],"tags":[]},{"title":"Linux CentOSå®‰è£…å®å¡”","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Linux-CentOSå®‰è£…å®å¡”","date":"2023-06-16T13:48:34.000Z","updated":"2024-01-28T11:41:39.265Z","comments":true,"path":"2023/06/Linux-CentOSå®‰è£…å®å¡”/","link":"","permalink":"https://guoshunfa.com/2023/06/Linux-CentOS%E5%AE%89%E8%A3%85%E5%AE%9D%E5%A1%94/","excerpt":"","text":"å®å¡”æ˜¯ä¸€ä¸ªå®‰å…¨é«˜æ•ˆçš„æœåŠ¡å™¨è¿ç»´é¢æ¿ï¼Œå¯ä»¥ç›´æ¥ä»å®å¡”å¹³å°ä¸Šéƒ¨ç½²webé¡¹ç›®ã€ç›‘æ§æœåŠ¡å™¨èµ„æºä½¿ç”¨æƒ…å†µã€å¿«æ·æ“ä½œæ–‡ä»¶ã€ä¸€é”®å®‰è£…è½¯ä»¶åŠéƒ¨ç½²æºç ã€‚è¯¦ç»†å†…å®¹å¯ä»¥ç§»æ­¥å‰å¾€å®å¡”å®˜ç½‘ã€‚ CentOSå®‰è£…å®å¡” å‰å¾€å®å¡”å®˜ç½‘ã€‚ ç‚¹å‡»â€œç«‹å³å…è´¹å®‰è£…â€æŒ‰é’®ï¼Œé¡µé¢ä¼šè·³è½¬åˆ°å®å¡”å®‰è£…ç•Œé¢ã€‚ åˆ°è¾¾å®å¡”å®‰è£…ç•Œé¢åï¼Œå¾€ä¸‹æ»‘ï¼Œæ‰¾åˆ°æ ‡é¢˜â€œLinuxé¢æ¿*.*.*å®‰è£…è„šæœ¬â€ã€‚ æ‰¾åˆ°Centoså®‰è£…è„šæœ¬ã€‚ è¿™é‡Œå¤‡ä»½ä¸€ä¸‹å¤‡ä»½ä¸€ä¸‹è„šæœ¬å†…å®¹ï¼Œå¦‚æœéœ€è¦è¯·å‰å¾€å®˜ç½‘åˆ¶å®šä½ç½®è¿›è¡ŒæŸ¥çœ‹ã€‚ Centoså®‰è£…è„šæœ¬ï¼šyum install -y wget &amp;&amp; wget -O install.sh https://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh ed8484bec ä¸‡èƒ½å®‰è£…è„šæœ¬ï¼šif [ -f /usr/bin/curl ];then curl -sSO https://download.bt.cn/install/install_panel.sh;else wget -O install_panel.sh https://download.bt.cn/install/install_panel.sh;fi;bash install_panel.sh ed8484bec ä¸‹è½½å®Œæˆä¹‹åï¼Œå‘½ä»¤è¡Œä¼šç»™æç¤ºã€‚å‰å¾€æç¤ºä¸­çš„urlåœ°å€ï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œå³å¯åˆ°è¾¾æœåŠ¡å™¨å†…çš„å®å¡”å¹³å°ã€‚","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"å®å¡”","slug":"å®å¡”","permalink":"https://guoshunfa.com/tags/%E5%AE%9D%E5%A1%94/"},{"name":"Linux","slug":"Linux","permalink":"https://guoshunfa.com/tags/Linux/"}]},{"title":"éŸ©å‰§æ¨è","slug":"å¨±ä¹/éŸ©å‰§æ¨è","date":"2023-06-16T13:29:49.000Z","updated":"2024-01-28T11:41:39.236Z","comments":true,"path":"2023/06/éŸ©å‰§æ¨è/","link":"","permalink":"https://guoshunfa.com/2023/06/%E9%9F%A9%E5%89%A7%E6%8E%A8%E8%8D%90/","excerpt":"","text":"æˆ‘çš„è§£æ”¾æ—¥å¿—ç±»å‹ï¼šå‰§æƒ… &#x2F; åœ°åŒºï¼šéŸ©å›½ &#x2F; å¹´ä»½ï¼š2022 ä¸»æ¼”ï¼šææ°‘åŸº,é‡‘æ™ºåª›,å­™é”¡ä¹… å¯¼æ¼”ï¼šé‡‘é”¡å… ç®€ä»‹ï¼šæ­¤å‰§è®²è¿°äº†å…³äºæƒ³è¦é€ƒç¦»æ— è¯­äººç”Ÿçš„æ˜Œé”¡ï¼ŒåŸºæ­£ï¼Œç¾æ­£ä¸‰å§å¼Ÿä»¥åŠä¸€ä¸ªç¥ç§˜å¤–åœ°äººä¹‹é—´çš„æ¸©æƒ…æ•…äº‹ã€‚æ˜¯ä¸€éƒ¨è®²è¿°äº†äººç”Ÿåˆ°è¾¾äº†ç•Œé™ï¼Œå³ä½¿æ²¡æœ‰å¯¹ç­–ä¸‹çŒ›è¯ä¹Ÿæƒ³è¦è„±ç¦»â€œç°åœ¨â€çš„ä»–ä»¬çš„è§£æ”¾æœŸæ¸©æš–å…±é¸£æ•…äº‹ã€‚ææ°‘åŸºå‰§ä¸­é¥°æ¼”äºŒå„¿å­å»‰æ˜Œç†™ä¸€è§’ï¼Œæ²¡æœ‰æ¢¦æƒ³ï¼Œæ— æ¬²æ— æ±‚ï¼Œç»å¸¸è¢«å®¶äººæ— è§†ã€‚é‡‘æ™ºåª›å‰§ä¸­é¥°æ¼”åœ¨æ— è‰²å½©äººç”Ÿä¸­ï¼Œæ¸´æœ›å¾—åˆ°è§£æ”¾çš„å°å¥³å„¿å»‰ç¾è´ä¸€è§’ï¼Œå¤©ç”Ÿå†…å‘ï¼Œå°å¿ƒè°¨æ…ã€‚å­™é”¡ä¹…é¥°æ¼”ç¥ç§˜å¤–æ¥äººå…·æ°ä¸€è§’ã€‚365å¤©éƒ½å–é†‰ï¼Œä¸çŸ¥é“ä»–åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆæ ·çš„äººã€‚æè‰¾å„¿é¥°æ¼”å¤§å¥³å„¿å»‰åŸºæ­£ä¸€è§’ï¼Œå¯¹çˆ±æƒ…çœŸæŒšï¼Œåƒç«ä¸€æ ·çš„æ€§æ ¼ã€‚ è¯„åˆ†ï¼š9.1 ï¼ˆæˆªæ­¢2022å¹´5æœˆ24æ—¥ï¼‰ ä¸ªäººè¯„ä»·ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ æå¤§ç¨‹åº¦çš„ååº”äº†ç¤¾ä¼šçš„çœŸå®ç°çŠ¶ï¼Œä¸»è§’ä¸‰ä¸ªäººåœ¨æ€§æ ¼ã€é­é‡ã€æœºé‡å®Œå…¨ä¸åŒçš„æƒ…å†µä¸‹ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†äººç”Ÿçš„ä»·å€¼ã€‚å¾ˆå¤šè¯»è€…åœ¨è§‚çœ‹æ—¶éƒ½ä¼šäº§ç”Ÿå…±é¸£ï¼Œè¿™ä¹Ÿæ˜¯è¿™ä¸ªç”µè§†å‰§æˆåŠŸçš„éƒ¨åˆ†ã€‚ æˆ‘ä»¬çš„è“è°ƒç±»å‹ï¼šå‰§æƒ… &#x2F; åœ°åŒºï¼šéŸ©å›½ &#x2F; å¹´ä»½ï¼š2022 ä¸»æ¼”ï¼šæç§‰å®ª,ç”³æ•å„¿,è½¦èƒœå…ƒ,é‡‘å®‡å½¬,éŸ©æ™ºæ•,æå§ƒå ,ä¸¥æ­£åŒ–,é‡‘æƒ å­,é«˜æ–—å¿ƒ,æœ´æ™ºç„•,å´”è‹±ä¿Š å¯¼æ¼”ï¼šé‡‘å¥æ³° ç®€ä»‹ï¼šè¯¥å‰§æ˜¯å¢ç†™äº¬ç¼–å‰§å’Œé‡‘åœ­æ³°å¯¼æ¼”ç»§ã€Šé‚£å¹´å†¬å¤©é£åœ¨å¹ã€‹ã€ŠLIVEã€‹åå†æ¬¡åˆä½œçš„ä½œå“ï¼Œå…±20é›†ï¼Œå°†æç»˜ä¸åŒäººçš„äººç”Ÿï¼Œæœ¬å‰§å·²äº7æœˆåº•å¼€æ‹ã€‚è®²è¿°çš„æ˜¯å¹´è½»æ—¶å­¦ç”Ÿæ—¶ä»£é’æ¶©çš„æœ‹å‹ä»¬ä¸Šäº†å¹´çºªå†è§é¢å‘ç”Ÿçš„æ•…äº‹ï¼Œæ˜¯ä¸€éƒ¨é¢‡å…·æŠ’æƒ…è‰²å½©çš„ä½œå“ã€‚ è¯„åˆ†ï¼š8.0 ï¼ˆæˆªæ­¢2022å¹´5æœˆ24æ—¥ï¼‰ ä¸ªäººè¯„ä»·ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸ å†æ¬¡æˆ‘çš„äººç”Ÿç±»å‹ï¼šå‰§æƒ…,çŠ¯ç½ª,å¥‡å¹» &#x2F; åœ°åŒºï¼šéŸ©å›½ &#x2F; å¹´ä»½ï¼š2022 ä¸»æ¼”ï¼šæå‡†åŸº,æç’Ÿè£,é‡‘æ™ºæ©,éƒ‘å°šå‹‹,é‡‘æ°¸å‹‹,æé¡ºè½½,å´”å…‰ä¸€,çº¢æ¯—ç½—,é‡‘ç‚¯é»˜,æœ´å“²æ°‘,é‡‘å§¬è´,è½¦ç è‹±,ç„å®‡æˆ,æŸ³ä¸œæ ¹,é‡‘å¸Œç, å¯¼æ¼”ï¼šéŸ©å“²æ´™ ç®€ä»‹ï¼šè¯¥ç‰‡æ”¹ç¼–è‡ªåŒåå°è¯´ï¼Œè®²è¿°äººç”Ÿç¬¬äºŒæ¬¡çš„çƒ­è¡€æ£€å¯Ÿå®˜ç»å¯¹çš„å¯¹æ¶çš„æƒ©ç½šè®°ã€‚ä¸€ä¸ªé›¨å¤œï¼Œæ£€å¯Ÿå®˜é‡‘å¥šå®‡åœ¨ä¸ç½ªçŠ¯æœ€åçš„å¯¹å†³ä¸­è½è´¥ã€‚è·Œå…¥æ±Ÿæ°´æœ¬è¯¥æ­»å»çš„ä»–å´è¢«ä¸Šå¤©ç»™äºˆäº†é‡ç”Ÿä¸€æ¬¡çš„å¥‘æœºã€‚å†æ¬¡é†’æ¥çš„ä»–å‘ç°è‡ªå·±å›åˆ°äº†é«˜ä¸­æ—¶ä»£ï¼Œä¸€åœºä¸ºäº†æ­£ä¹‰ä¹‹åçš„å¤ä»‡ï¼Œå±•å¼€äº†ï¼Œè¿™ä¸€æ¬¡ä»–èƒ½å°†ä½é«˜æƒé‡çš„ç½ªçŠ¯ç»³ä¹‹ä»¥æ³•å—ï¼Ÿ è¯„åˆ†ï¼š8.3ï¼ˆæˆªæ­¢2022å¹´5æœˆ24æ—¥ï¼‰ ä¸ªäººè¯„ä»·ï¼šğŸŒŸğŸŒŸğŸŒŸ æ€äººè€…çš„è´­ç‰©ç›®å½•ç±»å‹ï¼šå‰§æƒ… &#x2F; åœ°åŒºï¼šéŸ©å›½ &#x2F; å¹´ä»½ï¼š2022 ä¸»æ¼”ï¼šæå…‰æ´™,é‡‘é›ªç‚« å¯¼æ¼”ï¼šæå½¦ç¦§ ç®€ä»‹ï¼šã€Šæ€äººè€…çš„è´­ç‰©ç›®å½•ã€‹æ˜¯ä¸€éƒ¨è®²è¿°æˆ‘ä»¬è¿™ä¸ªè™½ç„¶çŸ¥é“è¡¨é¢ä½†å®Œå…¨ä¸çŸ¥é“å…¨è²Œçš„æ—¶ä»£ï¼Œçœ‹ä¼¼ç†Ÿæ‚‰çš„é‚»é‡Œå´å‘ç”Ÿç€å„¿ç«¥è™å¾…ï¼Œå†å¼€å‘ç­‰å„ç§çŠ¯ç½ªå’Œå±æœºçŠ¶å†µçš„ç¤¾åŒºç°å®å‹æƒŠæ‚šå‰§ã€‚æå…‰æ´™åœ¨å‰§ä¸­é¥°æ¼”è¶…å¸‚çš„å–è´§å‘˜å¤§æˆã€‚ã€Šæ€äººè€…çš„è´­ç‰©ç›®å½•ã€‹æ”¹ç¼–è‡ªå§œæ™ºè‹±ï¼ˆéŸ³è¯‘ï¼‰ä½œå®¶çš„åŒåå°è¯´ï¼Œå‰§æœ¬ç”±éŸ©å¿—å®Œï¼ˆéŸ³è¯‘ï¼‰ä½œå®¶æ‰§ç¬”ï¼Œå¯¼æ¼”ç”±æ›¾ä¸æå…‰æ´™åˆä½œè¿‡ç”µå½±ã€Šä¾¦æ¢2ã€‹çš„å¯¼æ¼”æå½¦ç¦§æ‹…ä»»ï¼Œæ’­å‡ºå¹³å°æ­£åœ¨è®¨è®ºä¸­ã€‚ è¯„åˆ†ï¼š7.0ï¼ˆæˆªæ­¢2022å¹´5æœˆ24æ—¥ï¼‰ ä¸ªäººè¯„ä»·ï¼šğŸŒŸğŸŒŸğŸŒŸ å‘ä½ å¥”å»çš„é€Ÿåº¦493kmç±»å‹ï¼šçˆ±æƒ…,è¿åŠ¨ &#x2F; åœ°åŒºï¼šéŸ©å›½ &#x2F; å¹´ä»½ï¼š2022 ä¸»æ¼”ï¼šæœ´æŸ±ç‚«,è”¡é’Ÿå,æƒæ˜­è´¤,å¾æ™ºè•™,é‡‘èŒ‚ä¿Š,æ›¹ç§€é¦™,å…¨æƒ åª›,æœ´æ™ºç‚« å¯¼æ¼”ï¼šèµµé›„ ç®€ä»‹ï¼šæ­¤å‰§æ˜¯ä¸€éƒ¨è¿åŠ¨çˆ±æƒ…é¢˜æç”µè§†å‰§ï¼Œè®²è¿°äº†25å²ï¼Œç¾½æ¯›çƒå®ä¸šç»„é€‰æ‰‹ä»¬çš„æ•…äº‹ã€‚ä¸»è¦è®²è¿°äº†æ··åˆåŒæ‰“ç”·å¥³ä¸»å¯¹ç¾½æ¯›çƒçš„çƒ­çˆ±å’Œçˆ±æƒ…æ•…äº‹ã€‚ è¯„åˆ†ï¼š7.3ï¼ˆæˆªæ­¢2022å¹´5æœˆ24æ—¥ï¼‰ ä¸ªäººè¯„ä»·ï¼šğŸŒŸğŸŒŸğŸŒŸ äºŒåäº”ï¼ŒäºŒåä¸€ç±»å‹ï¼šçˆ±æƒ… &#x2F; åœ°åŒºï¼šéŸ©å›½ &#x2F; å¹´ä»½ï¼š2022 ä¸»æ¼”ï¼šé‡‘æ³°æ¢¨,å—æŸ±èµ«,é‡‘çŸ¥å¦,å´”æ˜¾æ—­,æå‘¨æ˜ å¯¼æ¼”ï¼šéƒ‘å¿—è´¤ ç®€ä»‹ï¼šå—æŸ±èµ«ã€é‡‘æ³°æ¢¨æœ‰æœ›ä¸»æ¼”tvNæ–°å‰§ã€ŠäºŒåäº” äºŒåä¸€ã€‹(ìŠ¤ë¬¼ë‹¤ì„¯ ìŠ¤ë¬¼í•˜ë‚˜ï¼Œæš‚è¯‘)ã€‚è¯¥å‰§ç”±éƒ‘å¿—è´¤(ã€Šå›½ç‹ï¼šæ°¸è¿œçš„å›ä¸»ã€‹)æ‰§å¯¼ï¼Œæƒåº¦æ©(ã€Šè¯·è¾“å…¥æœç´¢è¯ï¼šWWWã€‹)æ“åˆ€å‰§æœ¬ï¼Œè®²è¿°1998-2021å¹´é—´çš„æ•…äº‹ï¼Œ1998å¹´22å²å’Œ18å²çš„ä¸¤ä½ä¸»äººå…¬ç›¸é‡ï¼Œåˆ°äº†1999å¹´æ—¶ä¸¤äººå¼€å§‹äº’ç›¸ä¼¤å®³ï¼Œ2000å¹´æ—¶ä¸¤äººå¼€å§‹äº’ç›¸ä¾é ï¼Œç›´åˆ°2001å¹´ä¸¤äººæ‰å¼€å§‹ä¸€æ®µæ‹æƒ…ã€‚ å—æŸ±èµ«å°†é¥°æ¼”UBSä½“è‚²è®°è€…ç™½ä¸€é•‡ï¼Œä»–23å²æ—¶æˆä¸ºç”µå°è®°è€…ï¼Œåœ¨æš—è®¿æ—¶ä¼ªè£…æˆåŒ–å¦†å“æ¨é”€å‘˜ï¼Œåæ¥åœ¨äºšè¿ä¼šæœŸé—´æˆä¸ºä½“è‚²è®°è€…ã€‚åœ¨äºšè¿ä¼šçš„æ¯”èµ›ä¸­ä»–ä¸é‡‘ç‰Œå¾—ä¸»ç½—ç†™åº¦(é‡‘æ³°æ¢¨é¥°)ç›¸é‡ã€‚å¥³ä¸»è§’ç½—ç†™åº¦æ˜¯é«˜ä¸­å‡»å‰‘éƒ¨çš„å›½å®¶ä»£è¡¨é˜Ÿé˜Ÿå‘˜ã€‚ç›®å‰ï¼Œä¸¤äººç»çºªå…¬å¸è¡¨ç¤ºæ­£åœ¨å•†è®®ä¸­ï¼Œè¯¥å‰§è®¡åˆ’ä»Šå¹´å†¬å¤©tvNæ’­å‡ºã€‚ è¯„åˆ†ï¼š9.1ï¼ˆæˆªæ­¢2022å¹´5æœˆ24æ—¥ï¼‰ ä¸ªäººè¯„ä»·ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ åºŸæŸ´èˆ…èˆ…ç±»å‹ï¼šå‰§æƒ…,å–œå‰§ &#x2F; åœ°åŒºï¼šéŸ©å›½ &#x2F; å¹´ä»½ï¼š2021 ä¸»æ¼”ï¼šå´æ”¿ä¸–,å…¨æ…§ç,é»„é›¨ç‘Ÿæƒ ,ææ—¶åª›,æœ´å–„è‹±,æå°šç¦¹,æåº†å‹‹ å¯¼æ¼”ï¼šæ± è‹±æ´™ æ›´æ–°ï¼š2022-01-31 04:01:56 ç®€ä»‹ï¼šè¯¥å‰§ç¿»æ‹è‡ªåŒåBBCè‹±å‰§ï¼Œè®²è¿°ç…§é¡¾12å²ä¾„å­ï¼Œä¸ºäº†å®ˆæŠ¤ä¾„å­çš„æ— ä¸šæ¸¸æ°‘å”å”å­¤å†›å¥‹æ–—æˆé•¿æ•…äº‹ã€‚ è¯„åˆ†ï¼š7.2ï¼ˆæˆªæ­¢2022å¹´5æœˆ24æ—¥ï¼‰ ä¸ªäººè¯„ä»·ï¼šğŸŒŸğŸŒŸğŸŒŸ é‚£å¹´ï¼Œæˆ‘ä»¬çš„å¤å¤©ç±»å‹ï¼šçˆ±æƒ… &#x2F; åœ°åŒºï¼šéŸ©å›½ &#x2F; å¹´ä»½ï¼š2021 ä¸»æ¼”ï¼šå´”å®‡æ¤,é‡‘å¤šç¾, é‡‘åœ£å–†,å¢æ­£ä¹‰ ç®€ä»‹ï¼šè¿™å¯¹äº‰åµä¸ä¼‘çš„æ˜”æ—¥æ‹äººï¼Œé«˜ä¸­æ—¶æ›¾æ‹è¿‡ä¸€éƒ¨çˆ†çº¢çºªå½•ç‰‡ã€‚å› ä¸ºè¿™éƒ¨ä½œå“ï¼Œä¸¤äººæ—¶éš”å¤šå¹´åˆè¢«æ‹‰å›é•œå¤´å‰ï¼Œä¹Ÿå›åˆ°å½¼æ­¤çš„ç”Ÿæ´»ä¸­ã€‚ è¯„åˆ†ï¼š8.7ï¼ˆæˆªæ­¢2022å¹´5æœˆ24æ—¥ï¼‰ ä¸ªäººè¯„ä»·ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ é±¿é±¼æ¸¸æˆç±»å‹ï¼šæ‚¬ç–‘,æƒŠæ‚š &#x2F; åœ°åŒºï¼šéŸ©å›½ &#x2F; å¹´ä»½ï¼š2021 ä¸»æ¼”ï¼šææ”¿å®°,é­åŒ–ä¿Š,è®¸æˆæ³°,é‡‘å‘¨çµ,æœ´æµ·ç§€,å­”åˆ˜,å…ƒæ˜¥åœ­,éƒ‘æµ©å¦ å¯¼æ¼”ï¼šé»„ä¸œèµ« ç®€ä»‹ï¼šNetflix |ã€Šé±¿é±¼æ¸¸æˆã€‹ã€Œä¸€åˆ‡åªæ˜¯ä¸€åœºæ¸¸æˆã€‚ã€456 ä½å‚èµ›è€…ï¼Œ456 äº¿å…ƒå¥–é‡‘èµŒä¸Šè‡ªå·±çš„å‘½ï¼Œç©å°å­©ç©çš„æ¸¸æˆã€Šé±¿é±¼æ¸¸æˆã€‹å°†äº9æœˆ17æ—¥Netflix ç‹¬å®¶ä¸Šçº¿ã€‚ è¯„åˆ†ï¼š8.6ï¼ˆæˆªæ­¢2022å¹´5æœˆ24æ—¥ï¼‰ ä¸ªäººè¯„ä»·ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ æœºæ™ºåŒ»ç”Ÿç”Ÿæ´»ç¬¬äºŒå­£ç±»å‹ï¼šå‰§æƒ… &#x2F; åœ°åŒºï¼šéŸ©å›½ &#x2F; å¹´ä»½ï¼š2021 ä¸»æ¼”ï¼šæ›¹æ”¿å¥­,æŸ³æ¼”é”¡,éƒ‘æ•¬æ·,é‡‘å¤§æ˜,ç”°ç¾éƒ½,æ²³å…åº† å¯¼æ¼”ï¼šç”³å…ƒæµ© ç®€ä»‹ï¼šåœ¨åŒ»é™¢é‡Œï¼Œæ¯ä½ç—…äººåŠæ¯ä»¶äº‹éƒ½è‡³å…³é‡è¦ï¼Œèº«ä¸ºåŒ»ç”ŸåŒæ—¶ä¹Ÿæ˜¯å¹³å‡¡äººçš„äº”äººå¸®ï¼Œå°†åœ¨æ­¤é¢å¯¹äººç”Ÿçš„èµ·èµ·è½è½ã€‚ è¯„åˆ†ï¼š9.5ï¼ˆæˆªæ­¢2022å¹´5æœˆ24æ—¥ï¼‰ ä¸ªäººè¯„ä»·ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ çª¥æ¢ç±»å‹ï¼šå‰§æƒ…,æ‚¬ç–‘,çŠ¯ç½ª &#x2F; åœ°åŒºï¼šéŸ©å›½ &#x2F; å¹´ä»½ï¼š2021 ä¸»æ¼”ï¼šææ˜‡åŸº,æç†™ä¿Š,æœ´æŸ±ç‚«,æ™¯æ”¶çœŸ,å®‰åœ¨æ—­,é‡‘è´å…°,æƒåç„•,èµµåœ¨å…,é‡‘è‹±ç‰,å®‰å†…ç›¸,é‡‘è‹±åœ¨,è¡¨å¿—å‹‹,ç¦¹å¿—è´¤ å¯¼æ¼”ï¼šå´”ä¿Šè£´ ç®€ä»‹ï¼šä»¥ã€Œå¦‚æœå¯ä»¥é€šè¿‡èƒå„¿åŸºå› æ£€æµ‹æ˜¯å¦ä¸ºç²¾ç¥ç—…æ‚£è€…ï¼Œè‚šå­é‡Œçš„å­©å­è¢«ç¡®è®¤æ˜¯æ‚£è€…ï¼Œæ‚¨æ˜¯å¦ä¼šé€‰æ‹©ç”Ÿä¸‹æ¥ï¼Ÿã€ä¸ºä¸»é¢˜æ‰€å±•å¼€çš„æ•…äº‹ã€‚å°†ä¸åŒäºä»¥å¾€ç²¾ç¥ç—…é¢˜æçš„ç”µè§†å‰§ã€‚ææ˜‡åŸºé¥°æ¼”æ­£ç›´çš„å¹´è½»åˆ‘è­¦ï¼Œé¢å¯¹ä¸å…¬æ­£çš„äº‹å°±æ®ç†åŠ›äº‰ï¼Œå°†ä¸è®©å…¨å›½é™·å…¥ææ€–çš„å…ˆå¤©ç²¾ç¥ç—…æ‚£çš„ç½ªçŠ¯å¯¹å³™ï¼Œå®Œå…¨æ”¹å˜è‡ªå·±äººç”Ÿçš„è§’è‰²ã€‚ è¯„åˆ†ï¼š8.6ï¼ˆæˆªæ­¢2022å¹´5æœˆ24æ—¥ï¼‰ ä¸ªäººè¯„ä»·ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸ","categories":[{"name":"å¨±ä¹","slug":"å¨±ä¹","permalink":"https://guoshunfa.com/categories/%E5%A8%B1%E4%B9%90/"}],"tags":[{"name":"éŸ©å‰§","slug":"éŸ©å‰§","permalink":"https://guoshunfa.com/tags/%E9%9F%A9%E5%89%A7/"}]},{"title":"æ€ç»´æ¨¡å¼","slug":"é˜…è¯»/æ€ç»´æ¨¡å¼","date":"2023-01-16T13:41:31.000Z","updated":"2024-01-28T11:41:39.311Z","comments":true,"path":"2023/01/æ€ç»´æ¨¡å¼/","link":"","permalink":"https://guoshunfa.com/2023/01/%E6%80%9D%E7%BB%B4%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ä¼˜è´¨æ€ç»´æ¨¡å¼ äºŒå…«åŸåˆ™ã€‚ç›¸å¯¹äºå…¨é¢çš„äººï¼Œè¿™ä¸ªç¤¾ä¼šæ›´åŠ æ„¿æ„å¥–åŠ±æœ‰ä¸“é•¿çš„äººã€‚äº‹ä¸šå‘å±•çš„å¥½çš„äººï¼Œåœ¨æŸæ–¹é¢éƒ½æœ‰ç‰¹é•¿ã€‚é›·å†›â€œAre you okï¼Ÿâ€é¬¼ç•œéƒ½çœ‹è¿‡ï¼Œä¸€èˆ¬å¤§å­¦ç”Ÿæ¯”é›·å†›è‹±è¯­éƒ½å¥½ï¼Œä½†ä»–çš„ç®¡ç†èƒ½åŠ›ï¼Œå•†ä¸šæ´å¯Ÿå´æ˜¯å°‘æœ‰äººçš„ä¼åŠã€‚ä»–åœ¨å•†ä¸šä¸Šçš„æˆåŠŸä¾é çš„æ˜¯ä»–çš„é•¿å¤„ã€‚ é»˜è®¤è®¾ç½®ã€‚â€œé»˜è®¤è®¾ç½®â€æ‹‰é•¿åˆ°ä¸‰å¹´æ—¶é—´ï¼Œè¶³ä»¥æ‹‰é•¿äººä¸äººçš„å·®è·ã€‚é»˜è®¤è®¾ç½®æŒ‡çš„æ˜¯ä¸€ä¸ªäººåœ¨æ²¡æœ‰å¤–åŠ›å¼ºåˆ¶éœ€è¦å®Œæˆä»»åŠ¡çš„æ—¶å€™ï¼Œä»–è‡ªå‘åœ°ä¼šåšä»€ä¹ˆã€‚æœ‰äº›äººæ²¡äº‹çš„æ—¶å€™å–œæ¬¢åˆ·è§†é¢‘ï¼ˆæ¯”å¦‚æˆ‘ï¼‰ï¼Œæœ‰äº›äººåˆ™ä¼šå–œæ¬¢åœ¨æ²¡äº‹çš„æ—¶å€™çœ‹ä¹¦ã€‚å»ºè®®ç°åœ¨å¼€å§‹ä¼˜åŒ–è‡ªå·±2-3ä¸ªâ€œé»˜è®¤è®¾ç½®â€ã€‚ å¯¹ç­”æ¡ˆã€æŠ„ç­”æ¡ˆã€‚ä¸è¦æœ‰â€œé—®ç­”æ¡ˆâ€è€Œæ˜¯â€œå¯¹ç­”æ¡ˆâ€çš„æ„è¯†ã€‚â€œé—®ç­”æ¡ˆâ€æ˜¯ç›´æ¥è¦ç»“æœä¸ç®¡ä¸­é—´çš„æ¨å¯¼è¿‡ç¨‹ã€‚è€Œâ€œå¯¹ç­”æ¡ˆâ€åˆ™æ˜¯è‡ªå·±é€šè¿‡åŠªåŠ›æ€è€ƒï¼Œåšå¥½å‡†å¤‡ä¹‹åè¯¢é—®åˆ«äººçš„æ€è·¯ï¼Œå¯»æ‰¾å·®å¼‚ï¼Œè¿›è¡Œå­¦ä¹ ã€‚ åªæœ‰æå«ä½ è‡ªå·±çš„æƒåˆ©ï¼Œåˆ«äººæ‰ä¼šå°Šé‡ä½ çš„è¯‰æ±‚ã€‚ä¸è¦åšè€å¥½äººï¼Œä¸€æ¬¡åˆä¸€æ¬¡çš„é€€è®©åªä¼šæ¢æ¥åˆ«äººå˜æœ¬åŠ å‰çš„å‹æ¦¨ã€‚è¦æƒ³æ¸…æ¥šè‡ªå·±çš„åº•çº¿ã€‚ æƒ…ç»ªæœ‰å˜ç°ä»·å€¼ã€‚ä¸è¦ç»™è‡ªå·±çš„æƒ…ç»ªå¸¦ç€èµ°ã€‚æƒ³æƒ³å½“ä¸‹æƒ³è¦è¾¾æˆçš„ç›®çš„ï¼Œç„¶åç”¨åˆé€‚çš„æƒ…ç»ªæ¥å¸®åŠ©ç›®çš„çš„è¾¾æˆã€‚ å¸¸ç”¨çš„æ€ç»´æ–¹å¼5W2Håˆ†ææ³• é€‚ç”¨äºåˆ†æé—®é¢˜ã€è§£å†³é—®é¢˜ã€‚ â€‹ 5W2Håˆ†ææ³•åˆå«ä¸ƒé—®åˆ†ææ³•ï¼Œæ˜¯äºŒæˆ˜ä¸­ç¾å›½é™†å†›å…µå™¨ä¿®ç†éƒ¨é¦–åˆ›ã€‚ç®€å•ã€æ–¹ä¾¿ï¼Œæ˜“äºç†è§£ã€ä½¿ç”¨ï¼Œå¯Œæœ‰å¯å‘æ„ä¹‰ï¼Œå¹¿æ³›ç”¨äºä¼ä¸šç®¡ç†å’ŒæŠ€æœ¯æ´»åŠ¨ï¼Œå¯¹äºå†³ç­–å’Œæ‰§è¡Œæ€§çš„æ´»åŠ¨æªæ–½ä¹Ÿéå¸¸æœ‰å¸®åŠ©ï¼Œä¹Ÿæœ‰åŠ©äºå¼¥è¡¥è€ƒè™‘é—®é¢˜çš„ç–æ¼ã€‚ ï¼ˆ1ï¼‰WHATâ€”â€”æ˜¯ä»€ä¹ˆï¼Ÿç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿåšä»€ä¹ˆå·¥ä½œï¼Ÿ ï¼ˆ2ï¼‰WHYâ€”â€”ä¸ºä»€ä¹ˆè¦åšï¼Ÿå¯ä¸å¯ä»¥ä¸åšï¼Ÿæœ‰æ²¡æœ‰æ›¿ä»£æ–¹æ¡ˆï¼Ÿ ï¼ˆ3ï¼‰WHOâ€”â€”è°ï¼Ÿç”±è°æ¥åšï¼Ÿ ï¼ˆ4ï¼‰WHENâ€”â€”ä½•æ—¶ï¼Ÿä»€ä¹ˆæ—¶é—´åšï¼Ÿä»€ä¹ˆæ—¶æœºæœ€é€‚å®œï¼Ÿ ï¼ˆ5ï¼‰WHEREâ€”â€”ä½•å¤„ï¼Ÿåœ¨å“ªé‡Œåšï¼Ÿ ï¼ˆ6ï¼‰HOW â€”â€”æ€ä¹ˆåšï¼Ÿå¦‚ä½•æé«˜æ•ˆç‡ï¼Ÿå¦‚ä½•å®æ–½ï¼Ÿæ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ ï¼ˆ7ï¼‰HOW MUCHâ€”â€”å¤šå°‘ï¼Ÿåšåˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿæ•°é‡å¦‚ä½•ï¼Ÿè´¨é‡æ°´å¹³å¦‚ä½•ï¼Ÿè´¹ç”¨äº§å‡ºå¦‚ä½•ï¼Ÿ è´¹æ›¼å­¦ä¹ æ³• é€‚ç”¨äºå­¦ä¹ æ¦‚å¿µã€å†…å®¹ã€‚ â€‹ è´¹æ›¼å­¦ä¹ æ³•çš„æ ¸å¿ƒè¦ä¹‰æ˜¯é€šè¿‡å¤è¿°æ¦‚å¿µå¹¶åé¦ˆç»“æœæ¥åŠ å¼ºè®°å¿†ã€‚ ï¼ˆ1ï¼‰æ˜ç¡®ç›®æ ‡ï¼šä½ æƒ³å­¦ä¹ çš„æ¦‚å¿µã€å†…å®¹ã€‚ ï¼ˆ2ï¼‰ä»¥æ•™ä¿ƒå­¦ï¼šå†™å‡ºè‡ªå·±çš„ç†è§£ã€‚ ï¼ˆ3ï¼‰åŒ–æ•´ä¸ºé›¶ï¼šå°†ç›®æ ‡å†…å®¹åˆ†è§£ä¸ºä¸€ä¸ªä¸ªåŸºç¡€çŸ¥è¯†ç‚¹ã€‚ ï¼ˆ4ï¼‰æ€»ç»“æç‚¼ï¼šåˆå¹¶å†…å®¹ï¼Œç®€åŒ–å¹¶æç‚¼æ ¸å¿ƒå†…å®¹ï¼Œé€šè¿‡è”æƒ³æ¥æ‰“æ¯”æ–¹ã€‚ äºŒå…«æ³•åˆ™ï¼ˆé©¬ç‰¹è±æ³•åˆ™ï¼‰ é€‚ç”¨äºå¦‚ä½•ä»¥æ­£ç¡®çš„è§†è§’è§‚çœ‹äº‹ç‰©ã€‚ï¼ˆç€é‡ç‚¹ï¼‰ ç™¾åº¦ç™¾ç§‘ â€‹ åœ¨ä»»ä½•ä¸€ç»„ä¸œè¥¿ä¸­ï¼Œæœ€é‡è¦çš„åªå å…¶ä¸­ä¸€å°éƒ¨åˆ†ï¼Œçº¦20%ï¼Œå…¶ä½™80%å°½ç®¡æ˜¯å¤šæ•°ï¼Œå´æ˜¯æ¬¡è¦çš„ï¼Œå› æ­¤ç§°äºŒå…«å®šå¾‹ã€‚ å¤šåœºæ™¯çš„ä¾‹å­ï¼š æ—¶é—´æ³•åˆ™ï¼šåŒ–20%çš„æ—¶é—´ä¼šäº§ç”Ÿæˆæœçš„80%ã€‚ å’¨è¯¢æ³•åˆ™ï¼š20%çš„äººå ç”¨äº†æˆ‘ä»¬æ—¶é—´çš„80%ã€‚ äº§å“æ³•åˆ™ï¼šäº§å“çš„20%å¸¦æ¥åˆ©æ¶¦çš„80%ã€‚ é˜…è¯»æ³•åˆ™ï¼š20%çš„ä¹¦ç¯‡å¹…åŒ…æ‹¬äº†å†…å®¹çš„80%ã€‚ å·¥ä½œæ³•åˆ™ï¼š20%çš„å·¥ä½œç»™80%çš„æ»¡æ„ã€‚ æ¼”è®²æ³•åˆ™ï¼š20%çš„æ¼”è®²äº§ç”Ÿå½±å“çš„80%ã€‚ æèµ æ³•åˆ™ï¼š20%çš„äººæå‡ºé‡‘é’±çš„80%ã€‚ é¢†å¯¼æ³•åˆ™ï¼š20%çš„äººä½œå‡º80%çš„å†³å®šã€‚ èµ„æºæ³•åˆ™ï¼š20%çš„äººè€—æ‰èµ„æºçš„80%ã€‚ é‡‘é’±æ³•åˆ™ï¼š20%çš„äººå æœ‰è´¢å¯Œçš„80%ã€‚ åœˆå­å¯†å‹äº”æ¬¡å…ƒç†è®ºä¸€ä¸ªäººçš„è´¢å¯Œå’Œæ™ºæ…§ï¼Œå°±æ˜¯ä»–æœ€å¸¸æ¥è§¦çš„5ä¸ªäººå¹³å‡å€¼ã€‚ æ—¶åˆ»æ¸…é†’ å¦‚æœä½ æƒ³è¦è„±èƒæ¢éª¨èˆ¬çš„æ”¹å˜ï¼Œä½ å¿…é¡»æœ‰æ„è¯†çš„ç”Ÿæ´»ï¼Œè¿™ä¸ªæ–¹æ³•éå¸¸ç®€å•ï¼Œä¸å®¹é”™è¿‡ï¼Œå¤§å¤šæ•°äººæ²¡æœ‰è¿‡è‡ªå·±çš„ç”Ÿæ´»ï¼Œä»–ä»¬åªæ˜¯æ¥å—äº†ç”Ÿæ´»ï¼Œä½†ä½ ä¸€æ—¦æ¥å—äº†ç”Ÿæ´»ï¼Œä½ å°±å¾—é æŸäº›äº‹ç‰©ç”Ÿæ´»ï¼Œæµªè´¹ä½ æ—¶é—´å’Œç²¾åŠ›çš„äº‹ç‰©ã€‚ ç²¾ç¥çš„æˆç†Ÿè€…ï¼Œä»–å¯¹å¤–è¡¨ç°å‡ºæ¥çš„ä¸æ˜¯è€ï¼Œç²¾ç¥çš„æˆç†Ÿè€…ï¼Œä»–å¯¹å¤–è¡¨ç°å‡ºæ¥çš„æ˜¯ä¸€ç§å†…éƒ¨ä¸–ç•Œçš„å’Œè°ï¼Œä»–å¯¹å¤–è¡¨ç°å‡ºæ¥çš„æ˜¯ä¸€ç§å‡¡äº‹éƒ½å¾ˆä»å®¹ï¼Œä»–è¡¨ç°å‡ºæ¥çš„æ˜¯ä¸€ç§ä»–çš„å¿ƒçµå•Šï¼Œæ€»æ˜¯å¾ˆè½»ç›ˆï¼Œä»–è¡¨ç°å‡ºæ¥çš„æ˜¯ä»–çš„èƒ¸è¥Ÿæ€»æ˜¯å¾ˆå¦è¡ï¼Œè¿™æ‰æ˜¯çœŸæ­£ç²¾ç¥æˆç†Ÿçš„äººã€‚ åªæœ‰å½“ä½ çœŸæ­£çš„ä½“ä¼šåˆ°äº†ç—›è‹¦ï¼Œä½ æ‰ä¼šçœŸæ­£çš„çŸ¥é“ï¼Œå¹³å‡¡çš„å¹¸ç¦æœ‰å¤šä¹ˆå¹¸ç¦ï¼Œä½ æ‰ä¼šçæƒœè¿™äº›å¹³å‡¡çš„å¹¸ç¦ã€‚ çœŸæ­£çš„å¹¸ç¦å•Šï¼Œå¹¶ä¸æ˜¯å¾—åˆ°ä½ æåŠ›è¿½æ±‚çš„ä¸œè¥¿ï¼Œè€Œæ˜¯é‚£äº›ä½ ä¹ ä»¥ä¸ºå¸¸ï¼ŒçŸ¥é“å¤±å»åæ‚”è«åŠçš„ä¸œè¥¿ã€‚çœŸæ­£çš„å¯Œæœ‰ï¼Œå¹¶ä¸æ˜¯æ‹¥æœ‰è±ªè½¦è±ªå®…ï¼Œç‹æœ‹ç‹—å‹éå¤©ä¸‹ï¼Œå› ä¸ºè¿™äº›çœ‹ä¼¼çš„å¯Œæœ‰ï¼Œæ— æ³•å¡«æ»¡ä½ å†…å¿ƒé‚£ä¸ªåƒç–®ç™¾å­”çš„å¿ƒã€‚ â€”â€”â€”ç½—ç¿” å‚è€ƒèµ„æ–™ ä¸–ä¸Šæœ€å¼ºå­¦ä¹ æ–¹æ³•â€”â€”è´¹æ›¼å­¦ä¹ æ³•ï¼ˆæ·±åº¦å­¦ä¹ ï¼‰","categories":[],"tags":[]},{"title":"ã€Š100å¤©åä¼šæ­»çš„é³„é±¼å›ã€‹ç¬¬ä¸€éé˜…è¯»","slug":"é˜…è¯»/ã€Š100å¤©åä¼šæ­»çš„é³„é±¼å›ã€‹ç¬¬ä¸€éé˜…è¯»","date":"2022-11-07T11:20:09.000Z","updated":"2024-01-28T11:41:39.310Z","comments":true,"path":"2022/11/ã€Š100å¤©åä¼šæ­»çš„é³„é±¼å›ã€‹ç¬¬ä¸€éé˜…è¯»/","link":"","permalink":"https://guoshunfa.com/2022/11/%E3%80%8A100%E5%A4%A9%E5%90%8E%E4%BC%9A%E6%AD%BB%E7%9A%84%E9%B3%84%E9%B1%BC%E5%90%9B%E3%80%8B%E7%AC%AC%E4%B8%80%E9%81%8D%E9%98%85%E8%AF%BB/","excerpt":"","text":"ç¼–å†™æ—¶é—´ï¼š2022&#x2F;11&#x2F;07 19:20 ä½œè€…ï¼šã€æ—¥ã€‘èŠæ± ç¥çºªã€‚ ã€Š100å¤©åä¼šæ­»çš„é³„é±¼å›ã€‹ä¸»è¦è®°å½•ç€ä¸€ä¸ªé³„é±¼ï¼ˆä¸»äººå…¬ï¼‰ï¼Œå°†åœ¨100å¤©åå»ä¸–çš„æ•…äº‹ã€‚ æ•…äº‹çš„å†…å®¹å¾ˆç®€å•ï¼Œä¹Ÿå¾ˆå¹³æ·¡ï¼Œåªæ˜¯è®°å½•è€…ä¸»äººå…¬ä¸€å¤©çš„æ—¥å¸¸ã€‚ä½†æ˜¯å”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œç«™åœ¨ä¸Šå¸è§†è§’çš„æˆ‘ï¼Œæ˜¯çŸ¥é“100å¤©åä»–ä¼šæ­»äº¡çš„ã€‚æŠ±ç€è¿™ç§å¿ƒæ€å»çœ‹è¿™éƒ¨ä½œå“ï¼Œå°±ä¼šä¸æ–­çš„åæ€ã€‚ æ•…äº‹ä»¥å››æ ¼æ¼«ç”»çš„è¿›è¡Œè¿›è¡Œè®°è½½ï¼Œä¸€é¡µä»£è¡¨ç€ä¸€å¤©ï¼Œä¸Šæ–¹è®°å½•ç€æ­£åœ¨è¿›è¡Œçš„å¤©æ•°ï¼Œä¸‹æ–¹è®°å½•ç€100å¤©å€’è®¡æ—¶ï¼Œè¿™ç§æè¿°æ–¹å¼å¾ˆå‹æŠ‘ï¼Œä¹Ÿåœ¨ä¸æ–­çš„æé†’è¯»è€…ï¼Œä¸»äººå…¬çš„ç”Ÿå‘½å¿«åˆ°äº†å°½å¤´ã€‚ é³„é±¼å›ä¹Ÿæ˜¯åªæ˜¯ä¸€ä¸ªå¾ˆæ™®é€šçš„äººï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“è®©è¯»è€…äº§ç”Ÿå…±é¸£ã€‚æ•…äº‹æ²¡æœ‰è¯´æ˜é³„é±¼å›æ˜¯å¦çŸ¥é“è‡ªå·±çš„å¯¿å‘½å·²ç»è¿›å…¥äº†å€’è®¡æ—¶ï¼Œé³„é±¼å›æ¯å¤©éƒ½è¿˜åœ¨å…¨åŠ›ä»¥èµ´çš„æ´»ç€ã€‚ ä»æ•…äº‹ä¸­å¯ä»¥çœ‹åˆ°é³„é±¼å›çœŸçš„å’Œå¤§å¤šæ•°æ™®é€šäººä¸€æ ·ï¼š æ†§æ†¬ç€è‡ªå·±çš„çˆ±æƒ…ï¼Œä½†æ²¡æœ‰è¶³å¤Ÿçš„å‹‡æ°”å»äº‰å–ï¼Œå¯¹æ–¹çš„ä»»ä½•ç»†èŠ‚éƒ½ä¼šæ³¨æ„ï¼Œä¸€ç‚¹ç‚¹æ‹’ç»å°±ä¼šæƒ³è¦é€€ç¼©ï¼Œä¸€ç‚¹ç‚¹å¸Œæœ›å°±ä¼šå¾ˆå¼€å¿ƒï¼Œä¹Ÿä¸æ•¢å»æ‰“æ‰°å¯¹æ–¹ï¼Œæ€»è§‰å¾—è‡ªå·±ä¼šè¢«æ‹’ç»ï¼› åšç€è‡ªå·±ä¸å–œæ¬¢çš„å·¥ä½œï¼Œåªæ˜¯ä¸ºäº†ç»´æŒç”Ÿè®¡ï¼› æœ‰è‡ªå·±çš„æ¢¦æƒ³ï¼Œä½†ä¸æ•¢æ‰¿å—åæœï¼› æœ‰ä¸¤ä¸‰ä¸ªçœŸå¿ƒæœ‹å‹ï¼Œå¹³æ—¶å˜»å˜»å“ˆå“ˆï¼Œæœ‰å›°éš¾äº†è¿˜èƒ½äº’ç›¸æ€æ‰¶ï¼› æœ‰ä¸€ä¸ªå‹æ¦¨è‡ªå·±çš„é¢†å¯¼ï¼Œæ¯å¤©å¹²ä¸å®Œçš„å·¥ä½œï¼› ä¸€ä¸¤ä¸ªä¸é”™çš„åŒäº‹ï¼Œå·¥ä½œæ—¶ä¸è‡³äºå¤ªæ¶ˆæï¼› å¹³æ—¶å–œæ¬¢æ’¸ä¸²ï¼Œéš”ä¸‰å·®äº”æ‰¾æœ‹å‹èšä¸€èšï¼› å–œæ¬¢çœ‹ç»¼è‰ºèŠ‚ç›®ï¼Œæ¯æ¬¡éƒ½èƒ½é€—çš„å“ˆå“ˆå¤§ç¬‘ï¼› çœ‹åˆ°å¿ƒåŠ¨çš„å•†å“ï¼Œä¼šå¿ä¸ä½çš„ä¸‹å•ï¼› ä¿ç•™äº†æœ¬å¿ƒï¼Œä¿ç•™äº†å–„è‰¯ï¼› ä¼‘æ¯æ—¥å–œæ¬¢ç¡æ‡’è§‰ï¼Œè°ä¹Ÿå«ä¸é†’ï¼› å–œæ¬¢å’Œæœ‹å‹ç©è¡—æœºæ¸¸æˆï¼Œæ„Ÿè§‰é‚£ä¸ªæ—¶å€™æ‰æ˜¯æœ€æ”¾æ¾çš„ï¼› è‡ªå·±èƒ½åšåˆ°çš„äº‹ä½†åˆ«äººæ²¡åšåˆ°ï¼Œå°±ä¼šæ„Ÿè§‰åˆ«äººæ²¡æœ‰è®¤çœŸï¼› å–œæ¬¢è¿½å‰§ï¼Œå³ä½¿ä»–çš„ä¸Šæ˜ æ—¶é—´æ˜¯æ˜å¹´æ˜¥å¤©ï¼› å¯¹ä»»ä½•äº‹éƒ½å¾ˆä¹è§‚ï¼Œèººå¹³èƒ½è§£å†³ä¸€åˆ‡ï¼› å–œæ¬¢ç©æ‰­è›‹ï¼Œè™½ç„¶æ¯æ¬¡æ‰‹æ°”éƒ½å¾ˆå·®ï¼› å¥½å¥æˆ‘å’Œä½ éƒ½æ˜¯â€œ100å¤©â€åå³å°†æ­»å»çš„é³„é±¼ï¼Œè™½ç„¶ä¸çŸ¥é“ç”Ÿå‘½ä»€ä¹ˆæ—¶å€™ç»ˆç»“ï¼Œä½†è¿˜æ˜¯è¦å…¨åŠ›ä»¥èµ´çš„æ´»ç€ã€‚ æ¯ä¸ªäººçš„ç»ˆç‚¹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå…¶å®ç›¸æ¯”äºç»“æœæˆ‘è§‰å¾—æ›´åº”è¯¥æ³¨é‡è¿‡ç¨‹ï¼Œæ¯å¤©éƒ½æ´»æˆè‡ªå·±å¸Œæœ›çš„æ ·å­ï¼Œå¯¹è‡ªå·±æŠ±æœ‰è¶³å¤Ÿçš„ä¿¡å¿ƒï¼Œæ›´åŠ åŠªåŠ›çš„å‘ç›®æ ‡å‰è¿›ï¼Œæ‹’ç»ä»»ä½•è´Ÿé¢æƒ…ç»ªçš„å…¥ä¾µï¼Œæ›´åŠ æ³¨é‡åšä¸€ä»¶äº‹çš„è¿‡ç¨‹è€Œä¸æ˜¯ç»“æœã€‚ æ€»ç»“åœ¨ä¿¡æ¯å‘è¾¾çš„æ—¶ä»£ï¼Œå¯ä»¥0æˆæœ¬çš„èƒ½çœ‹åˆ°åˆ«äººå½¢å½¢è‰²è‰²çš„äººç”Ÿï¼Œä¸æ–­çš„æ”€æ¯”æ‰ä¼šäº§ç”Ÿç„¦è™‘ã€‚å…¶å®å¹³å‡¡ã€æ™®é€šæ‰æ˜¯å¤§å¤šæ•°äººçš„ç”Ÿæ´»ã€‚ä¿ç•™ä½æœ¬å¿ƒï¼Œå¥åº·å¿«ä¹çš„ç”Ÿæ´»ï¼Œæ‰æ˜¯æˆ‘æ‰€æœŸæœ›çš„ã€‚","categories":[{"name":"é˜…è¯»","slug":"é˜…è¯»","permalink":"https://guoshunfa.com/categories/%E9%98%85%E8%AF%BB/"}],"tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"https://guoshunfa.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"å¿ƒç†","slug":"å¿ƒç†","permalink":"https://guoshunfa.com/tags/%E5%BF%83%E7%90%86/"}]},{"title":"ã€Šåˆ»æ„ç»ƒä¹ ã€‹å›é¡¾ç¬¬ä¸€éé˜…è¯»","slug":"é˜…è¯»/ã€Šåˆ»æ„ç»ƒä¹ ã€‹å›é¡¾ç¬¬ä¸€éé˜…è¯»","date":"2022-11-02T18:13:50.000Z","updated":"2024-01-28T11:41:39.311Z","comments":true,"path":"2022/11/ã€Šåˆ»æ„ç»ƒä¹ ã€‹å›é¡¾ç¬¬ä¸€éé˜…è¯»/","link":"","permalink":"https://guoshunfa.com/2022/11/%E3%80%8A%E5%88%BB%E6%84%8F%E7%BB%83%E4%B9%A0%E3%80%8B%E5%9B%9E%E9%A1%BE%E7%AC%AC%E4%B8%80%E9%81%8D%E9%98%85%E8%AF%BB/","excerpt":"","text":"ç¼–å†™æ—¶é—´ï¼š2022&#x2F;11&#x2F;03 02:13 ï¼ˆå¤±çœ ingï¼‰ ã€Šåˆ»æ„ç»ƒä¹ ã€‹Anders Ericsson | Robert Pool è·ç¦»ä¸Šæ¬¡é˜…è¯»å®Œã€Šåˆ»æ„ç»ƒä¹ ã€‹å·²ç»æœ‰åŠå¹´çš„æ—¶é—´äº†ï¼Œä¸ºäº†åŠ æ·±å¯¹è¿™æœ¬ä¹¦çš„å°è±¡ï¼Œä¸´æ—¶å†™ä¸€ç¯‡è¯»ä¹¦ç¬”è®°ã€‚ é¦–å…ˆï¼Œå…ˆè¯´ä¸€ä¸‹ã€Šåˆ»æ„ç»ƒä¹ ã€‹è¿™æœ¬ä¹¦èƒ½ç»™æˆ‘å¸¦æ¥ä»€ä¹ˆï¼Œå½“æ—¶çœ‹äº†è¿™æœ¬ä¹¦çš„ä¹¦åï¼Œæˆ‘çš„æ„Ÿè§‰æ˜¯ä»–åº”è¯¥èƒ½ç»™æˆ‘å¸¦æ¥ä¸€ä¸ªå­¦ä¹ ä¸œè¥¿çš„æ–¹æ³•ï¼Œå…¶å®å¹¶ä¸æ˜¯ã€‚ã€Šåˆ»æ„ç»ƒä¹ ã€‹è¿™æœ¬ä¹¦æ˜¯é€šè¿‡å¤§é‡çš„æ¡ˆä¾‹æ¥å‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ªçœŸå®çš„æƒ³è±¡ï¼šæ‰€æœ‰äººéƒ½ä»¥ä¸ºâ€œæ°å‡ºâ€æºäºâ€œå¤©èµ‹â€ï¼Œâ€œå¤©æ‰â€å´è¯´ï¼šæˆ‘çš„æˆå°±æºäºâ€œæ­£ç¡®çš„ç»ƒä¹ â€ã€‚ â€œå¤©æ‰çœŸçš„å­˜åœ¨å—â€ï¼Œå¥½å¤šäººå¯¹äºåˆ«äººçš„â€œæ“…é•¿â€ï¼Œéƒ½è®¤å®šä»–æ˜¯ä¸€ä¸ªâ€œå¤©èµ‹â€æå¥½çš„â€œå¤©æ‰â€ï¼Œç°å®çœŸçš„å¦‚æ­¤å—ã€‚åŒæ ·åšç¼–ç¨‹çš„å¼€å‘äººï¼Œæœ‰çš„å·¥ä½œ3å¹´åªèƒ½åˆ°ä¸­çº§çš„æ°´å¹³ï¼Œæœ‰çš„å·¥ä½œ3å¹´å·²ç»æ˜¯èµ„æ·±äº†ã€‚ä»ç»“æœä¸Šçœ‹ï¼ŒåŒæ ·çš„æ—¶é—´ï¼Œæœ€ç»ˆçš„æ°´å¹³æœ‰å¾ˆå¤§çš„å·®å¼‚ï¼Œä»è¿‡ç¨‹ä¸Šçœ‹ï¼Œä¸¤ä¸ªäººéƒ½æ˜¯åœ¨æŒç»­å­¦ä¹ ï¼Œä¹Ÿéƒ½å¾ˆåˆ»è‹¦ã€‚æ„Ÿè§‰3å¹´å°±è¾¾åˆ°èµ„æ·±æ°´å¹³çš„äººå¾ˆæœ‰ç¼–ç¨‹çš„â€œå¤©èµ‹â€ï¼Œä½†çœŸçš„æ˜¯è¿™æ ·å—ã€‚æˆ‘ä»¬åè§‚ä¸¤ä½çš„å­¦ä¹ è¿‡ç¨‹å°±å¯ä»¥çœ‹å‡ºç«¯å€ªã€‚å·¥ä½œ3å¹´åˆ°è¾¾ä¸­çº§æ°´å¹³çš„å¼€å‘è€…ï¼Œæ¯å¤©è™½ç„¶å¾ˆå……å®ï¼Œä½†æ˜¯é‡å¤æ€§å·¥ä½œå¤ªå¤šï¼Œä¹Ÿæ²¡æœ‰ä¸€ä¸ªæ˜ç¡®çš„è§„åˆ’ã€è‰¯å¥½çš„å­¦ä¹ æ°›å›´ã€å‰å®³çš„å¯¼å¸ˆï¼Œå¯¼è‡´3å¹´å†…çš„è¿›æ­¥æå°‘ã€‚è€Œ3å¹´å°±åˆ°è¾¾èµ„æ·±æ°´å¹³çš„å¼€å‘è€…ï¼Œè‡ªå·±æœ‰ä¸€å¥—å­¦ä¹ æ–¹å¼å’Œæ˜ç¡®çš„è§„åˆ’ï¼Œæ—¶å¸¸è¯·æ•™å…¬å¸å†…éƒ¨çš„æŠ€æœ¯å¤§æ‹¿ï¼Œæ‰ä¼šåœ¨çŸ­çŸ­çš„3å¹´æ—¶é—´é‡Œè®©è‡ªå·±çš„èƒ½åŠ›æœ‰å¾ˆå¤§çš„æå‡ã€‚è¿™æ˜¯è¿™æœ¬ä¹¦ä¼ é€’ç»™æˆ‘çš„ä¸€ä¸ªæœ€é‡è¦çš„æ€æƒ³ä¹‹ä¸€ï¼šé€šè¿‡æ­£ç¡®çš„è®­ç»ƒä¸ç»ƒä¹ ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥æœ‰â€œå¤©èµ‹â€ã€‚ â€œæœ‰ç›®çš„çš„ç»ƒä¹ â€ï¼Œä½œè€…è®°å½•äº†ä¸€ä¸ªå®éªŒï¼Œæˆ‘è¯´å‡º9ä½æ•°çš„æ•°å­—ï¼Œè¯´å®Œåè®©ä½ è¿…é€Ÿé»˜å†™å‡ºæ¥ã€‚è¿™ä¸ªå®éªŒçš„å®éªŒå¯¹è±¡æ˜¯ä¸€ä¸ªåå‡ å²çš„å­©å­ï¼Œåœ¨ä¸æ–­æ›´æ–°è¿­ä»£ç»ƒä¹ æ–¹å¼å’Œå¤§é‡æ—¶é—´çš„è®­ç»ƒä¹‹åï¼Œé‚£ä¸ªå­©å­ä»ä¸€å¼€å§‹çš„é»˜å†™9ä½æ•°ï¼Œåˆ°åæ¥çš„é»˜å†™å‡ åä½æ•°ï¼Œå†åˆ°å‡ ç™¾ä½æ•°ã€‚é€šè¿‡æœ‰ç›®çš„çš„ç»ƒä¹ ï¼Œå¯ä»¥æ¿€å‘å‡ºæ¥ä½ æƒ³è±¡ä¸åˆ°çš„â€œæ½œåŠ›â€ã€‚é‚£ä»€ä¹ˆæ˜¯æœ‰ç›®çš„çš„ç»ƒä¹ ï¼šèµ°å‡ºä½ çš„èˆ’é€‚åŒºï¼Œä½†è¦ä»¥ä¸“æ³¨çš„æ–¹å¼åˆ¶å®šæ˜ç¡®çš„ç›®æ ‡ï¼Œä¸ºè¾¾åˆ°é‚£äº›ç›®æ ‡åˆ¶å®šä¸€ä¸ªè®¡åˆ’ï¼Œè€Œä¸”æƒ³å‡ºç›‘è§†ä½ çš„è¿›æ­¥çš„æ–¹æ³•ã€‚è¿˜è¦æƒ³åŠæ³•ä¿æŒä½ çš„åŠ¨æœºã€‚ â€œå¤§è„‘çš„é€‚åº”èƒ½åŠ›â€ï¼Œä¸è¦ä½ä¼°è‡ªå·±å¤§è„‘çš„é€‚åº”èƒ½åŠ›ï¼Œå½“ä½ èµ°å‡ºèˆ’é€‚åœˆåï¼Œé€šè¿‡ä¸æ–­çš„æŒ‘æˆ˜è‡ªå·±çš„æé™ï¼Œæ¥æ”¹å˜è‡ªå·±çš„å¤§è„‘ã€‚ä½†æ˜¯è¦æœ‰å°ºåº¦ï¼Œåœ¨è¿‡é•¿çš„æ—¶é—´å†…è¿‡åˆ†çš„é€¼è¿«è‡ªå·±ï¼Œå¯èƒ½å¯¼è‡´å€¦æ€ å’Œå­¦ä¹ ä½æ•ˆã€‚å½“ç„¶ï¼Œå¦‚æœåœæ­¢è®­ç»ƒï¼Œä¾¿ä¸ä¼šå†è¿›æ­¥ï¼Œ åˆ»æ„ç»ƒä¹ çš„ç‰¹ç‚¹ï¼š åˆ»æ„ç»ƒä¹ å‘å±•çš„æŠ€èƒ½ï¼Œæ˜¯å…¶ä»–äººå·²ç»æƒ³å‡ºæ€æ ·æé«˜çš„æŠ€èƒ½ï¼Œä¹Ÿæ˜¯å·²ç»æ‹¥æœ‰ä¸€æ•´å¥—è¡Œä¹‹æœ‰æ•ˆçš„è®­ç»ƒæ–¹æ³•çš„æŠ€èƒ½ã€‚è®­ç»ƒçš„æ–¹æ¡ˆåº”å½“ç”±å¯¼å¸ˆæˆ–æ•™ç»ƒæ¥è®¾è®¡å’Œç›‘ç®¡ï¼Œä»–ä»¬å³ç†Ÿæ‚‰æ°å‡ºäººç‰©çš„èƒ½åŠ›ï¼Œä¹Ÿç†Ÿæ‚‰æ€ä¹ˆæ ·æ‰èƒ½æœ€å¥½çš„æé«˜é‚£ç§èƒ½åŠ›ã€‚åˆ»æ„ç»ƒä¹ å‘ç”Ÿåœ¨äººä»¬çš„èˆ’é€‚åŒºä¹‹å¤–ï¼Œè€Œä¸”è¦æ±‚å­¦ç”ŸæŒç»­ä¸æ–­çš„å°è¯•é‚£äº›åˆšå¥½è¶…è¿‡ä»–å½“å‰èƒ½åŠ›èŒƒå›´çš„äº‹ç‰©ã€‚å› æ­¤ï¼Œå®ƒéœ€è¦äººä»¬ä»˜å‡ºè¿‘ä¹æœ€å¤§é™åº¦çš„åŠªåŠ›ã€‚ä¸€èˆ¬æ¥è®²ï¼Œè¿™å¹¶ä¸ä»¤äººå¿ƒæƒ…æ„‰å¿«ã€‚åˆ»æ„ç»ƒä¹ åŒ…å«å¾—åˆ°è‰¯å¥½çš„ç‰¹å®šç›®æ ‡ï¼Œé€šå¸¸è¿˜åŒ…æ‹¬ç›®æ ‡è¡¨ç°çš„æŸäº›æ–¹é¢ï¼›å®ƒå¹¶éæŒ‡å‘æŸäº›æ¨¡ç³Šçš„æ€»ä½“æ”¹è¿›ã€‚ä¸€æ—¦è®¾å®šäº†æ€»ä½“ç›®æ ‡ï¼Œå¯¼å¸ˆæˆ–æ•™ç»ƒå°†åˆ¶è®¢ä¸€ä¸ªè®¡åˆ’ï¼Œä»¥ä¾¿å®ç°ä¸€ç³»åˆ—å¾®å°çš„æ”¹å˜ï¼Œæœ€åå°†è¿™äº›æ”¹å˜ç§¯ç´¯èµ·æ¥ï¼Œæ„æˆä¹‹å‰æœŸæœ›çš„æ›´å¤§çš„å˜åŒ–ã€‚æ”¹è¿›ç›®æ ‡è¡¨ç°çš„æŸäº›æ–¹é¢ï¼Œä½¿å¾—ä»ä¸šè€…èƒ½å¤Ÿçœ‹åˆ°ä»–çš„è¡¨ç°é€šè¿‡è®­ç»ƒå¾—åˆ°äº†æé«˜ã€‚åˆ»æ„ç»ƒä¹ æ˜¯æœ‰æ„è€Œä¸ºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒéœ€è¦äººä»¬å®Œå…¨çš„å…³æ³¨å’Œæœ‰æ„è¯†çš„è¡ŒåŠ¨ã€‚ç®€å•çš„éµç…§å¯¼å¸ˆæˆ–æ•™ç»ƒçš„ä¹‹äº‹å»åšï¼Œè¿˜ä¸å¤Ÿï¼Œå­¦ç”Ÿå¿…é¡»ç´§è·Ÿä»–çš„ç»ƒä¹ å’Œç‰¹å®šç›®æ ‡ï¼Œä»¥ä¾¿èƒ½åšå‡ºé€‚å½“çš„è°ƒæ•´ï¼Œæ§åˆ¶ç»ƒä¹ ã€‚åˆ»æ„ç»ƒä¹ åŒ…å«åé¦ˆï¼Œä»¥åŠä¸ºåº”å¯¹é‚£äº›åé¦ˆè€Œè¿›è¡Œè°ƒæ•´çš„åŠªåŠ›ï¼Œåœ¨ç»ƒä¹ è¿‡ç¨‹çš„æ—©æœŸï¼Œå¤§é‡çš„åé¦ˆæ¥è‡ªå¯¼å¸ˆæˆ–æ•™ç»ƒï¼Œä»–ä»¬å°†ç›‘æµ‹å­¦ç”Ÿçš„è¿›æ­¥ï¼ŒæŒ‡å‡ºå­˜åœ¨çš„é—®é¢˜ï¼Œè€Œä¸”æä¾›è§£å†³è¿™äº›é—®é¢˜çš„æ–¹æ³•ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå­¦ç”Ÿå¿…é¡»å­¦ä¼šè‡ªå·±ç›‘æµ‹è‡ªå·±ã€è‡ªå·±å‘ç°é”™è¯¯ï¼Œå¹¶åšå‡ºç›¸åº”è°ƒæ•´ã€‚è¿™ç§è‡ªæˆ‘æ£€æµ‹ï¼Œè–›ç‘¶é«˜æ•ˆçš„å¿ƒç†è¡¨å¾ã€‚åˆ»æ„ç»ƒä¹ æ—¢äº§ç”Ÿæœ‰æ•ˆçš„å¿ƒç†è¡¨å¾ï¼Œåˆä¾é æœ‰æ•ˆçš„å¿ƒç†è¡¨å¾ã€‚æé«˜æ°´å¹³ä¸æ”¹è¿›å¿ƒç†è¡¨å¾æ˜¯ç›¸è¾…ç›¸æˆçš„ï¼Œä¸¤è€…ä¸å¯ååºŸï¼›éšç€äººä»¬æ°´å¹³çš„æå‡ï¼Œè¡¨å¾ä¹Ÿå˜å¾—æ›´åŠ è¯¦å°½å’Œæœ‰æ•ˆï¼Œåè¿‡æ¥ä½¿å¾—äººä»¬å¯èƒ½å®ç°æ›´å¤§ç¨‹åº¦çš„æ”¹è¿›ã€‚å¿ƒç†è¡¨å¾ä½¿äººä»¬èƒ½ç›‘æµ‹åœ¨è®­ç»ƒä¸­å’Œå®é™…çš„å·¥ä½œä¸­åšå¾—æ€ä¹ˆæ ·ã€‚å®ƒä»¬è¡¨æ˜äº†åšæŸä»¶äº‹çš„æ­£ç¡®æ–¹æ³•ï¼Œå¹¶ä½¿å¾—äººä»¬æ³¨æ„åˆ°ä»€ä¹ˆæ—¶å€™åšçš„ä¸å¯¹ï¼Œä»¥åŠæ€æ ·æ¥çº æ­£ã€‚åˆ»æ„ç»ƒä¹ é€šè¿‡ç€é‡å…³æ³¨è¿‡å»è·å–çš„æŠ€èƒ½çš„æŸäº›ç‰¹å®šæ–¹é¢ï¼Œè‡´åŠ›äºé’ˆå¯¹æ€§çš„æé«˜é‚£äº›æ–¹é¢ï¼Œè€Œä¸”å‡ ä¹æ€»æ˜¯åŒ…æ‹¬æ„å»ºæˆ–ä¿®æ”¹é‚£äº›è¿‡å»å·²ç»è·å–çš„æŠ€èƒ½ï¼›éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¿™ç§é€æ­¥çš„æ”¹è¿›æœ€ç»ˆå°†é€ å°±å“è¶Šçš„è¡¨ç°ã€‚ç”±äºæ–°æŠ€èƒ½çš„å­¦ä¹ æ˜¯å»ºç«‹åœ¨ç°æœ‰æŠ€èƒ½åŸºç¡€ä¸Šçš„ï¼Œå› æ­¤å¯¼å¸ˆä¼šä¸ºåˆå­¦è€…æä¾›æ­£ç¡®çš„åŸºæœ¬æŠ€èƒ½ï¼Œä½¿å­¦ç”Ÿåæ¥èƒ½åœ¨æ›´é«˜å±‚é¢ä¸Šé‡æ–°å­¦ä¹ é‚£äº›åŸºæœ¬çš„æŠ€èƒ½ã€‚","categories":[{"name":"é˜…è¯»","slug":"é˜…è¯»","permalink":"https://guoshunfa.com/categories/%E9%98%85%E8%AF%BB/"}],"tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"https://guoshunfa.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"å¿ƒç†","slug":"å¿ƒç†","permalink":"https://guoshunfa.com/tags/%E5%BF%83%E7%90%86/"}]},{"title":"Final Cat Pro è½¯ä»¶æ“ä½œ","slug":"è‡ªåª’ä½“/Final-Cat-Pro-è½¯ä»¶æ“ä½œ","date":"2022-10-16T13:34:41.000Z","updated":"2024-01-28T11:41:39.236Z","comments":true,"path":"2022/10/Final-Cat-Pro-è½¯ä»¶æ“ä½œ/","link":"","permalink":"https://guoshunfa.com/2022/10/Final-Cat-Pro-%E8%BD%AF%E4%BB%B6%E6%93%8D%E4%BD%9C/","excerpt":"","text":"é«˜è´¨é‡æ•™å­¦è§†é¢‘ï¼šPAPAYAç”µè„‘æ•™å®¤ | youtube è‹¹æœå…¬å¸å¾¡ç”¨å‰ªè¾‘å¸ˆæ•™ä½ å¦‚ä½•ä½¿ç”¨final cut proè®©ä½ æˆä¸ºç”µå½±å¤§å¸ˆ &#x2F; é™„å¸¦bilibiliè§†é¢‘ å¿«æ·é”®è§†é¢‘æ–‡ä»¶æ“ä½œå°†è§†é¢‘åŠ å…¥ä¸»æ•…äº‹çº¿æœ€åï¼šé€‰æ‹©è§†é¢‘æ–‡ä»¶ + Eã€‚ï¼ˆEï¼šendï¼‰ å°†è§†é¢‘åŠ å…¥ä¸»æ•…äº‹çº¿æœ€å‰æ–¹ï¼šé€‰æ‹©è§†é¢‘æ–‡ä»¶ + Wã€‚ å åŠ è§†é¢‘ï¼Œæ”¾å…¥ä¸»æ•…äº‹çº¿ä¸Šæ–¹ï¼šQ ä»¥è¦†ç›–çš„æ–¹å¼æ’å…¥è§†é¢‘ï¼šD åˆ‡å‰²è§†é¢‘ï¼šcommand + B è§†é¢‘é€Ÿåº¦æ§åˆ¶ï¼šcommand + R é€Ÿåº¦æ§åˆ¶æ‹¦åˆ‡å‰²ï¼šshift + B è®¾å®šç•Œé™ï¼šX ç›´æ¥åˆ é™¤è§†é¢‘ç‰‡æ®µï¼šbackspaceã€‚ åˆ é™¤è§†é¢‘ç‰‡æ®µï¼Œä¿ç•™è§†é¢‘æ‰€åœ¨åŒºé—´ï¼šdelete åšè®°å·ï¼šM ä½ç½®è¿ç§»ï¼šP è§†é¢‘ç´ ææˆªå–ï¼šI å·¦æˆªå– O å³æˆªå– è§†é¢‘ç´ ææ ‡è®° &#x2F; è§†é¢‘ç´ æå–æ¶ˆæ ‡è®°ï¼šF &#x2F; U æ—¶é—´è½´æ§åˆ¶shift + Zï¼Œå¯å°†å½±ç‰‡æ‹‰é•¿åˆ°è·Ÿæ—¶é—´è½´ç­‰å®½ã€‚ command + ï¼ˆ - &#x2F; + ï¼‰å¯ä»¥ç¼©æ”¾&#x2F;æ‹‰ä¼¸æ—¶é—´è½´ã€‚","categories":[],"tags":[]},{"title":"ä¹è§‚é”è§£å†³æ•°æ®åº“å¹¶å‘ä¿®æ”¹é—®é¢˜","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/ä¹è§‚é”è§£å†³æ•°æ®åº“å¹¶å‘ä¿®æ”¹é—®é¢˜","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.236Z","comments":true,"path":"2022/07/ä¹è§‚é”è§£å†³æ•°æ®åº“å¹¶å‘ä¿®æ”¹é—®é¢˜/","link":"","permalink":"https://guoshunfa.com/2022/07/%E4%B9%90%E8%A7%82%E9%94%81%E8%A7%A3%E5%86%B3%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B9%B6%E5%8F%91%E4%BF%AE%E6%94%B9%E9%97%AE%E9%A2%98/","excerpt":"","text":"1. ç›¸å…³ä¿¡æ¯æè¿°1.1. æ•°æ®åº“å¹¶å‘åœºæ™¯æè¿°è¡¨ä¸­æœ‰ä¸€å±æ€§ï¼Œè®°å½•ç€å½“å‰è®°å½•è¢«æŸ¥è¯¢çš„æ¬¡æ•°ã€‚æ¯ä¸€æ¬¡æŸ¥è¯¢ä¹‹åä¼šæŠŠå¤„ç†è¿‡ç¨‹ç”©ç»™eventï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰ã€‚å¦‚æœä¸€æ®µæ—¶é—´å†…è®¿é—®é‡å˜å¤§ä¼šå‡ºç°å¹¶å‘é—®é¢˜ã€‚å¹¶å‘ä¼šå¯¼è‡´æ•°æ®çš„ä¸å‡†ç¡®ã€‚ 1.2. ä»€ä¹ˆæ˜¯ä¹è§‚é” ä¹è§‚é”ï¼ˆ Optimistic Locking ï¼‰ ç›¸å¯¹æ‚²è§‚é”è€Œè¨€ï¼Œä¹è§‚é”æœºåˆ¶é‡‡å–äº†æ›´åŠ å®½æ¾çš„åŠ é”æœºåˆ¶ã€‚æ‚²è§‚é”å¤§å¤šæ•°æƒ…å†µä¸‹ä¾é æ•°æ®åº“çš„é”æœºåˆ¶å®ç°ï¼Œä»¥ä¿è¯æ“ä½œæœ€å¤§ç¨‹åº¦çš„ç‹¬å æ€§ã€‚ä½†éšä¹‹è€Œæ¥çš„å°±æ˜¯æ•°æ®åº“æ€§èƒ½çš„å¤§é‡å¼€é”€ï¼Œç‰¹åˆ«æ˜¯å¯¹é•¿äº‹åŠ¡è€Œè¨€ï¼Œè¿™æ ·çš„å¼€é”€å¾€å¾€æ— æ³•æ‰¿å—ã€‚è€Œä¹è§‚é”æœºåˆ¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä¹è§‚é”ï¼Œå¤§å¤šæ˜¯åŸºäºæ•°æ®ç‰ˆæœ¬ï¼ˆ Version ï¼‰è®°å½•æœºåˆ¶å®ç°ã€‚ä½•è°“æ•°æ®ç‰ˆæœ¬ï¼Ÿå³ä¸ºæ•°æ®å¢åŠ ä¸€ä¸ªç‰ˆæœ¬æ ‡è¯†ï¼Œåœ¨åŸºäºæ•°æ®åº“è¡¨çš„ç‰ˆæœ¬è§£å†³æ–¹æ¡ˆä¸­ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡ä¸ºæ•°æ®åº“è¡¨å¢åŠ ä¸€ä¸ª â€œversionâ€ å­—æ®µæ¥å®ç°ã€‚è¯»å–å‡ºæ•°æ®æ—¶ï¼Œå°†æ­¤ç‰ˆæœ¬å·ä¸€åŒè¯»å‡ºï¼Œä¹‹åæ›´æ–°æ—¶ï¼Œå¯¹æ­¤ç‰ˆæœ¬å·åŠ ä¸€ã€‚æ­¤æ—¶ï¼Œå°†æäº¤æ•°æ®çš„ç‰ˆæœ¬æ•°æ®ä¸æ•°æ®åº“è¡¨å¯¹åº”è®°å½•çš„å½“å‰ç‰ˆæœ¬ä¿¡æ¯è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœæäº¤çš„æ•°æ®ç‰ˆæœ¬å·ç­‰äºæ•°æ®åº“è¡¨å½“å‰ç‰ˆæœ¬å·ï¼Œåˆ™äºˆä»¥æ›´æ–°ï¼Œå¦åˆ™è®¤ä¸ºæ˜¯è¿‡æœŸæ•°æ®ã€‚ 2. å®ç°2.1. åœºæ™¯æè¿°SpringBoot + Mysql 2.2. æ•°æ®åº“è¡¨è°ƒæ•´åŠ å…¥å±æ€§versionï¼Œç”¨æ¥åšä¹è§‚é”éªŒè¯ã€‚ 2.3. sqlè°ƒæ•´1update test_user set age=age+1,version=version+1 where id=#&#123;id&#125; and version=#&#123;version&#125;; 2.4. æœåŠ¡å±‚é€»è¾‘åŠ å…¥ä¹è§‚é”12345678910public void userAgeAddOne(String id) &#123; TestUser testUser = userTestMapper.findById(id); int i = userTestMapper.userAgeAddOne(testUser.getId(), testUser.getVersion()); if (i == 0) &#123; userAgeAddOne(id); &#125; else &#123; return ; &#125;&#125;","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"ä¹è§‚é”","slug":"ä¹è§‚é”","permalink":"https://guoshunfa.com/tags/%E4%B9%90%E8%A7%82%E9%94%81/"},{"name":"å¹¶å‘","slug":"å¹¶å‘","permalink":"https://guoshunfa.com/tags/%E5%B9%B6%E5%8F%91/"},{"name":"è§£å†³æ–¹æ¡ˆ","slug":"è§£å†³æ–¹æ¡ˆ","permalink":"https://guoshunfa.com/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"}]},{"title":"å¦‚ä½•æ­å»ºå›¾åºŠ","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/å¦‚ä½•æ­å»ºå›¾åºŠ","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.237Z","comments":true,"path":"2022/07/å¦‚ä½•æ­å»ºå›¾åºŠ/","link":"","permalink":"https://guoshunfa.com/2022/07/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A/","excerpt":"","text":"Qï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨å›¾åºŠå‘¢ï¼Ÿä»€ä¹ˆæ˜¯å›¾åºŠï¼Ÿ Aï¼šå†™åšå®¢æ–‡ç« æ—¶ï¼Œå›¾ç‰‡çš„ä¸Šä¼ å’Œå­˜æ”¾æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰çš„æœ‹å‹å¯èƒ½ä¼šæŠŠå›¾ç‰‡æ”¾åˆ°å’Œåšå®¢åŒä¸€ä¸ªä»“åº“å½“ä¸­ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨ï¼Œè¿™æ ·åæœŸç»´æŠ¤èµ·æ¥ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚è¿˜æœ‰çš„æœ‹å‹ä¼šåœ¨ä¸åŒçš„å¹³å°å‘å¸ƒåŒä¸€ç¯‡æ–‡ç« ï¼Œè¿™æ ·ä¸€æ¥æ¯ä¸ªå¹³å°éƒ½è¦ä¸Šä¼ å›¾ç‰‡ï¼Œä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯æŠŠå›¾ç‰‡ç»Ÿä¸€ä¸Šä¼ åˆ°ä¸€ä¸ªåœ¨çº¿çš„ç¬¬ä¸‰æ–¹é™æ€èµ„æºåº“ä¸­ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªèµ„æºåº“ç§°ä¸ºå›¾åºŠï¼Œå…¶è¿”å›ä¸€ä¸ªå›¾ç‰‡çš„URLï¼Œä½¿ç”¨markdown+å›¾ç‰‡urlçš„æ–¹å¼å†™ä½œæ–‡ç« ï¼Œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„ä½¿ç”¨~ Qï¼šæ­å»ºå›¾åºŠçš„æ–¹å¼ Aï¼šæ¨èä½¿ç”¨GitHubä½œä¸ºå›¾åºŠï¼Œç‰¹ç‚¹æ˜¯å…è´¹ã€ç¨³å®šï¼Œæœ‰ä¸€ä¸ªå°ç¼ºç‚¹æ˜¯å›½å†…è®¿é—®é€Ÿåº¦æ…¢ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨jsDelivrå…è´¹CDNåŠ é€Ÿã€‚jsDelivræ˜¯å›½å¤–çš„ä¸€å®¶ä¼˜ç§€çš„å…¬å…± CDN æœåŠ¡æä¾›å•†ï¼Œè¯¥å¹³å°æ˜¯é¦–ä¸ªã€Œæ‰“é€šä¸­å›½å¤§é™†ä¸æµ·å¤–çš„å…è´¹CDNæœåŠ¡ã€ï¼Œæ— é¡»æ‹…å¿ƒä¸­å›½é˜²ç«å¢™é—®é¢˜è€Œå½±å“ä½¿ç”¨ã€‚å®˜ç½‘ï¼šhttp://www.jsdelivr.com/(opens new window), Bï¼šGitee+PicXã€‚ Bï¼šOSSå­˜å‚¨ï¼Œç‰¹ç‚¹æ˜¯ç¨³å®šã€å®¹é‡å¤§ï¼Œç¼ºç‚¹å°±æ˜¯å­˜å‚¨ä»˜è´¹+æµé‡ä»˜è´¹ï¼ˆå¤§ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ECSå†…ç½‘è®¿é—®èº²é¿æµé‡è´¹ç”¨ã€‚ Qï¼šå¦‚ä½•ç»Ÿä¸€ç®¡ç† Aï¼šä½¿ç”¨åŸŸåè¿›è¡Œè§£æã€‚ æ–¹æ¡ˆä¸€ï¼šGitHub + jsDelivr + PicGo Evanâ€™s blog æ–°å»ºGitHubä»“åº“ï¼Œæ³¨æ„ä»“åº“è¦è®¾ç½®æˆå…¬å¼€ã€‚ å‚ç…§ å®˜æ–¹æ–‡æ¡£ ç”Ÿæˆä¸€ä¸ªtokenå¯†é’¥ã€‚ åœ¨ è¿™é‡Œ ä¸‹è½½PicGoï¼Œå®‰è£…å®Œæˆåæ‰“å¼€ï¼Œå›¾åºŠè®¾ç½® é€‰ GitHubå›¾åºŠï¼Œå¹¶å¡«å†™ç›¸åº”çš„ä¿¡æ¯ ä»“åº“åï¼šå‰é¢æ–°å»ºçš„ä»“åº“ï¼Œæ ¼å¼ï¼š&lt;ç”¨æˆ·å&gt;/&lt;ä»“åº“å&gt; åˆ†æ”¯åï¼šå¡«å†™ä¸»åˆ†æ”¯masterå³å¯ Tokenï¼šå‰é¢ç”Ÿæˆçš„tokenå¯†é’¥ å­˜å‚¨è·¯å¾„ï¼šæŒ‰ä½ è‡ªå·±çš„éœ€æ±‚å¡«å†™ è‡ªå®šä¹‰åŸŸåï¼šå›¾ç‰‡ä¸Šä¼ åï¼ŒPicGo ä¼šæŒ‰ç…§ è‡ªå®šä¹‰åŸŸå+ä¸Šä¼ çš„å›¾ç‰‡å çš„æ–¹å¼ç”Ÿæˆè®¿é—®é“¾æ¥ï¼Œæ­¤å¤„æˆ‘ä»¬å¡«å†™jsDelivrçš„CDNåŠ é€Ÿåœ°å€ï¼Œæ ¼å¼ï¼šhttps://cdn.jsdelivr.net/gh/&lt;ç”¨æˆ·å&gt;/&lt;ä»“åº“å&gt; æ–¹æ¡ˆäºŒï¼šOSS + ECS +PicGo æ‰‹é‡Œæœ‰ä¸€ä¸ªå‡†å¤‡å¥½çš„OSSï¼Œä¸€èˆ¬è´­ä¹°çš„éƒ½æ˜¯åªæ˜¯å­˜å‚¨ï¼Œè€Œå¤–ç½‘è®¿é—®ä¼šäº§ç”Ÿæµé‡ï¼Œæµé‡è´¹ç”¨è§ä¸‹å›¾ã€‚å†…ç½‘è®¿é—®å…è´¹ï¼Œå¯ä»¥ä½¿ç”¨ECSäº‘æœåŠ¡å™¨åšä»£ç†è½¬å‘ã€‚ ECSäº‘æœåŠ¡å™¨ä½¿ç”¨nginxåšè½¬å‘ã€‚ 12345678910111213141516server &#123;listen 80 default_server;listen [::]:80 default_server;server_name 47.**.**.43; root /usr/share/nginx/html;# Load configuration files for the default server block.include /etc/nginx/default.d/*.conf;location / &#123;proxy_pass https://bucketname.oss-cn-beijing-internal.aliyuncs.com; proxy_set_header Host $host; &#125;&#125; server_nameï¼šå¯¹å¤–æä¾›åå‘ä»£ç†æœåŠ¡çš„IPï¼Œå³ECSå®ä¾‹çš„å¤–ç½‘åœ°å€ã€‚ proxy_pass ï¼šå¡«å†™è·³è½¬çš„åŸŸåã€‚ å½“ECSå®ä¾‹ä¸Bucketåœ¨åŒä¸€åœ°åŸŸæ—¶ï¼Œå¡«å†™ç›®æ ‡Bucketçš„å†…ç½‘è®¿é—®åŸŸåã€‚è®¿é—®åŸŸåä»‹ç»è¯·å‚è§OSSè®¿é—®åŸŸåä½¿ç”¨è§„åˆ™ã€‚ å½“ECSå®ä¾‹ä¸Bucketä¸åœ¨åŒä¸€åœ°åŸŸæ—¶ï¼Œå¡«å†™ç›®æ ‡Bucketçš„å¤–ç½‘è®¿é—®åŸŸåã€‚ å› OSSçš„å®‰å…¨è®¾ç½®ï¼Œå½“ä½¿ç”¨é»˜è®¤åŸŸåé€šè¿‡æµè§ˆå™¨è®¿é—®OSSä¸­çš„å›¾ç‰‡æˆ–ç½‘é¡µæ–‡ä»¶æ—¶ï¼Œä¼šç›´æ¥ä¸‹è½½ã€‚æ‰€ä»¥ï¼Œè‹¥æ‚¨çš„ç”¨æˆ·éœ€é€šè¿‡æµè§ˆå™¨é¢„è§ˆBucketä¸­çš„å›¾ç‰‡æˆ–ç½‘é¡µæ–‡ä»¶ï¼Œéœ€ä¸ºBucketç»‘å®šè‡ªå®šä¹‰åŸŸåï¼Œå¹¶åœ¨æ­¤é¡¹ä¸­æ·»åŠ å·²ç»‘å®šçš„åŸŸåã€‚ç»‘å®šè‡ªå®šä¹‰åŸŸåæ“ä½œè¯·å‚è§ç»‘å®šè‡ªå®šä¹‰åŸŸåã€‚ proxy_set_header Host $host ï¼šæ·»åŠ æ­¤é¡¹æ—¶ï¼ŒNginxä¼šåœ¨å‘OSSè¯·æ±‚çš„æ—¶å€™ï¼Œå°†hostæ›¿æ¢ä¸ºECSçš„è®¿é—®åœ°å€ã€‚é‡åˆ°ä»¥ä¸‹æƒ…å†µæ—¶ï¼Œæ‚¨éœ€è¦æ·»åŠ æ­¤é¡¹ã€‚ é‡åˆ°ç­¾åé”™è¯¯é—®é¢˜ã€‚ å¦‚æœæ‚¨çš„åŸŸåå·²è§£æåˆ°ECSå®ä¾‹çš„å¤–ç½‘ä¸Šï¼Œä¸”æ‚¨çš„ç”¨æˆ·éœ€è¦é€šè¿‡æµè§ˆå™¨é¢„è§ˆBucketä¸­çš„å›¾ç‰‡æˆ–ç½‘é¡µæ–‡ä»¶ã€‚æ‚¨å¯ä»¥å°†æ‚¨çš„åŸŸåç»‘å®šåˆ°ECSå®ä¾‹ä»£ç†çš„Bucketä¸Šï¼Œä¸é…ç½®CNAMEã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œproxy_passé¡¹å¯ç›´æ¥é…ç½®Bucketçš„å†…ç½‘æˆ–å¤–ç½‘è®¿é—®åœ°å€ã€‚ç»‘å®šè‡ªå®šä¹‰åŸŸåæ“ä½œè¯·å‚è§ç»‘å®šè‡ªå®šä¹‰åŸŸåã€‚ 12nginx -t # éªŒè¯é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®service nginx restart # é‡å¯nginxæœåŠ¡","categories":[{"name":"æœåŠ¡","slug":"æœåŠ¡","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1/"}],"tags":[{"name":"è§£å†³æ–¹æ¡ˆ","slug":"è§£å†³æ–¹æ¡ˆ","permalink":"https://guoshunfa.com/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"name":"å›¾åºŠ","slug":"å›¾åºŠ","permalink":"https://guoshunfa.com/tags/%E5%9B%BE%E5%BA%8A/"}]},{"title":"Mysql ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/Mysql-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/Mysql-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Mysql-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"å®‰è£…MysqlMac å®‰è£…Mysql MySQLå®‰è£…ï¼ˆMacç‰ˆï¼‰ 1brew install mysql Docker å®‰è£… Mysql12345678910111213# dockeræŸ¥è¯¢mysqlé•œåƒdocker search mysql# æ‹‰å–mysqlé•œåƒdocker pull mysql# å¯åŠ¨å®¹å™¨docker run -d -p 3306:3306 --name mymysql -e MYSQL_ROOT_PASSWORD=root docker.io/mysql:latest### å‚æ•°è¯´æ˜ï¼š# -p 3306:3306 å°†ä¸»æœº3306ç«¯å£æ˜ å°„åˆ°å®¹å™¨3306ç«¯å£# -e MYSQL_ROOT_PASSWORD=root è®¾ç½®è¿œç¨‹ç™»å½•çš„rootç”¨æˆ·å¯†ç ä¸ºroot# --name zyz-name å¯é€‰ï¼Œè®¾ç½®å®¹å™¨åˆ«å# mysql é•œåƒåç§°##","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"https://guoshunfa.com/tags/Mysql/"}]},{"title":"Oracle ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/Oracle-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Oracle-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Oracle-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"1. Oracle å®‰è£…1.1. Docker å¿«æ·å®‰è£… è¿˜æ²¡æœ‰å®‰è£…dockeræœåŠ¡çš„ï¼Œè¯·è·³è½¬åˆ°Docker - ä»‹ç»ç« èŠ‚ã€‚ æ‹‰å–oracleé•œåƒ 1docker pull registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g å®‰è£…oracleå®¹å™¨ 1docker run -dp 9090:8080 -p 1521:1521 registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g åˆå§‹ç”¨æˆ·åå¯†ç ï¼šsystem&#x2F;helowinï¼›æœåŠ¡åï¼šhelowin å‚è€ƒæ–‡ç«  Mac ä¸Šå¦‚ä½•å®‰è£… Oracle å®¢æˆ·ç«¯ï¼Ÿ","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"}]},{"title":"Oracle é”™è¯¯è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/Oracle-é”™è¯¯è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Oracle-é”™è¯¯è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Oracle-%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95/","excerpt":"","text":"é”™è¯¯ï¼šsqlplus: command not found è½¬è½½è‡ªï¼šhttps://www.cnblogs.com/sprinng/p/6548540.html 12345678# è°ƒæ•´æˆå¯¹åº”oracleåœ°å€export ORACLE_BASE=/u01/app/oracle# æ³¨æ„è°ƒæ•´å¯¹åº”ç‰ˆæœ¬export ORACLE_HOME=$ORACLE_BASE/product/10.2.0/db_1su - rootln -s $ORACLE_HOME/bin/sqlplus /usr/binsu - oraclesqlplus /nolog","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"}]},{"title":"Oracle è®¾ç½®IDè‡ªå¢","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/Oracleè®¾ç½®IDè‡ªå¢","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Oracleè®¾ç½®IDè‡ªå¢/","link":"","permalink":"https://guoshunfa.com/2022/07/Oracle%E8%AE%BE%E7%BD%AEID%E8%87%AA%E5%A2%9E/","excerpt":"","text":"1. å…ˆæœ‰ä¸ªè¡¨123456789# é¦–å…ˆå¾—æœ‰ä¸ªè¡¨create table t_user(user_id number not null primary key,user_name varchar2(30),credits number,user_password varchar2(32),last_visit date,last_ip varchar2(23)) 2. åˆ›å»ºä¸€ä¸ªåºåˆ— è½¬è½½è‡ªï¼šhttps://blog.csdn.net/jiejie5945/article/details/44198283 1234567# ä¸ºè¿™ä¸ªè¡¨åˆ›å»ºåºåˆ—create sequence T_USER_SEQminvalue 1maxvalue 999999999999999999999999999start with 21increment by 1cache 20; å‚æ•°æè¿°ï¼š create sequence seq_nameï¼šåˆ›å»ºåºåˆ—ï¼Œseq_nameä¸ºåºåˆ—åç§° minvalueï¼šè‡ªå¢æœ€å°å€¼ï¼Œç¼ºçœå€¼ä¸ºnominvalueï¼Œå³ä¸è®¾ç½®æœ€å°å€¼ã€‚ maxvalueï¼šè‡ªå¢æœ€å¤§å€¼ï¼Œç¼ºçœå€¼ä¸ºnomaxvalueï¼Œå³ä¸è®¾ç½®æœ€å¤§å€¼ï¼›ç³»ç»Ÿèƒ½äº§ç”Ÿçš„æœ€å¤§å€¼ä¸º10çš„27æ¬¡æ–¹ã€‚ start withï¼šè‡ªå¢å¼€å§‹å€¼ï¼Œè®¾ç½®æˆ21åˆ™ä»21å¼€å§‹è‡ªå¢ã€‚ increment byï¼šè‡ªå¢æ•°å€¼ï¼Œè®¾ç½®æˆ1åˆ™æ¯æ¬¡é€’å¢1ï¼Œè´Ÿæ•°è¡¨ç¤ºé€’å‡ï¼Œç¼ºçœå€¼ä¸º1ã€‚ cacheï¼šå®šä¹‰ç¼“å­˜åºåˆ—çš„ä¸ªæ•°ï¼Œç¼ºçœå€¼ä¸º20ï¼Œnocacheè¡¨ç¤ºä¸è®¾ç½®ç¼“å­˜ï¼›ä½¿ç”¨ç¼“å­˜å¯ä»¥æé«˜åºåˆ—çš„æ€§èƒ½ï¼Œä½†æ•°æ®åº“å‡ºé”™æ—¶ä¼šé€ æˆæ•°æ®ä¸¢å¤±ä½¿åºåˆ—ä¸è¿ç»­ã€‚ NOCYCLEï¼šä¸€ç›´ç´¯åŠ ï¼Œä¸å¾ªç¯ cycleï¼šå®šä¹‰å½“åºåˆ—è¾¾åˆ°æœ€å¤§&#x2F;å°å€¼åæ˜¯å¦å¾ªç¯ï¼Œç¼ºçœå€¼ä¸ºä¸å¾ªç¯ï¼›nocycleï¼šä¸å¾ªç¯ï¼›**cycleï¼šå¾ªç¯ï¼›å¦‚æœä¸ä½¿ç”¨å¾ªç¯è¾¾åˆ°é™åˆ¶å€¼åç»§ç»­äº§ç”Ÿæ–°å€¼å°±ä¼šå‡ºé”™ï¼›ä½¿ç”¨å¾ªç¯è¾¾åˆ°æœ€å¤§å€¼åçš„ä¸‹ä¸€ä¸ªå€¼ä¸º1ï¼Œå’Œstart** **with**è®¾ç½®çš„å€¼æ— å…³ï¼Œé€’å¢è¿˜æ˜¯increment **by**è®¾ç½®çš„å€¼ï¼› 2.1. åºåˆ—è¯¦ç»†æè¿°ä¸€æ—¦å®šä¹‰äº†emp_sequenceï¼Œä½ å°±å¯ä»¥ç”¨CURRVALï¼ŒNEXTVALCURRVAL &#x3D; è¿”å›sequenceçš„å½“å‰å€¼NEXTVAL &#x3D; å¢åŠ sequenceçš„å€¼ï¼Œç„¶åè¿”å›sequenceå€¼æ¯”å¦‚ï¼šemp_sequence.CURRVALemp_sequence.NEXTVAL å¯ä»¥ä½¿ç”¨sequenceçš„åœ°æ–¹ï¼š ä¸åŒ…å«å­æŸ¥è¯¢ã€snapshotã€VIEWçš„ SELECT è¯­å¥ INSERTè¯­å¥çš„å­æŸ¥è¯¢ä¸­ NSERTè¯­å¥çš„VALUESä¸­ UPDATE çš„ SETä¸­ å¯ä»¥çœ‹å¦‚ä¸‹ä¾‹å­ï¼š 1234INSERT INTO emp VALUES(empseq.nextval, &#x27;LEWIS&#x27;, &#x27;CLERK&#x27;,7902, SYSDATE, 1200, NULL, 20); SELECT empseq.currval FROM DUAL; ä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼š ç¬¬ä¸€æ¬¡NEXTVALè¿”å›çš„æ˜¯åˆå§‹å€¼ï¼›éšåçš„NEXTVALä¼šè‡ªåŠ¨å¢åŠ ä½ å®šä¹‰çš„INCREMENT BYå€¼ï¼Œç„¶åè¿”å›å¢åŠ åçš„å€¼ã€‚CURRVAL æ€»æ˜¯è¿”å›å½“å‰sequenceçš„å€¼ï¼Œä½†æ˜¯åœ¨ç¬¬ä¸€æ¬¡NEXTVALåˆå§‹åŒ–ä¹‹åæ‰èƒ½ä½¿ç”¨CURRVALï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚ä¸€æ¬¡NEXTVALä¼šå¢åŠ ä¸€æ¬¡sequenceçš„å€¼ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨åŒä¸€ä¸ªè¯­å¥é‡Œé¢ä½¿ç”¨å¤šä¸ªNEXTVALï¼Œå…¶å€¼å°±æ˜¯ä¸ä¸€æ ·çš„ã€‚æ˜ç™½ï¼Ÿ å¦‚æœæŒ‡å®šCACHEå€¼ï¼Œoracleå°±å¯ä»¥é¢„å…ˆåœ¨å†…å­˜é‡Œé¢æ”¾ç½®ä¸€äº›sequenceï¼Œè¿™æ ·å­˜å–çš„å¿«äº›ã€‚ cacheé‡Œé¢çš„å–å®Œåï¼Œoracleè‡ªåŠ¨å†å–ä¸€ç»„åˆ°cacheã€‚ ä½¿ç”¨cacheæˆ–è®¸ä¼šè·³å·ï¼Œ æ¯”å¦‚æ•°æ®åº“çªç„¶ä¸æ­£å¸¸downæ‰ï¼ˆshutdown abort),cacheä¸­çš„sequenceå°±ä¼šä¸¢å¤±. æ‰€ä»¥å¯ä»¥åœ¨create sequenceçš„æ—¶å€™ç”¨nocacheé˜²æ­¢è¿™ç§æƒ…å†µã€‚ 2.2. è°ƒæ•´åºåˆ—ä½ æˆ–è€…æ˜¯è¯¥sequenceçš„ownerï¼Œæˆ–è€…æœ‰ALTER ANY sequenceæƒé™æ‰èƒ½æ”¹åŠ¨sequenceã€‚ å¯ä»¥alteré™¤startå€¼ä¹‹å¤–çš„æ‰€æœ‰sequenceå‚æ•°ã€‚å¦‚æœæƒ³è¦æ”¹å˜startå€¼ï¼Œå¿…é¡»drop sequenceå†re-createã€‚ä¾‹å­ï¼š 12345ALTER sequence emp_sequenceINCREMENT BY 10MAXVALUE 10000CYCLE -- åˆ°10000åä»å¤´å¼€å§‹NOCACHE; å½±å“sequenceçš„åˆå§‹åŒ–å‚æ•°ï¼šsequence_CACHE_ENTRIES =è®¾ç½®èƒ½åŒæ—¶è¢«cacheçš„sequenceæ•°ç›®ã€‚ å¯ä»¥å¾ˆç®€å•çš„Drop sequence DROP sequence order_seq; 3. åˆ›å»ºä¸€ä¸ªè§¦å‘å™¨123456create or replace trigger t_user_trbefore insert on t_userfor each rowbeginselect t_user_seq.nextval into :new.user_id from dual;end t_user_tr; å‚æ•°æè¿°ï¼š t_user_tr: éšæ„çš„åå­—ï¼Œä¸è¦é‡å¤å°±è¡Œ t_user: è¡¨å user_id ï¼šè‡ªå¢çš„id åˆ é™¤è§¦å‘å™¨ï¼š 1DROP TRIGGER trigger_name; å‚æ•°æè¿° trigger_nameï¼šè¦åˆ é™¤çš„è§¦å‘å™¨çš„åç§°ã€‚ 4. æµ‹è¯•123456789101112insert into t_user values(null,&#x27;xiaoming&#x27;,123,&#x27;1114&#x27;,sysdate,&#x27;192.168.37.132&#x27;);insert into t_user values(null,&#x27;xiaoming1&#x27;,123,&#x27;1114&#x27;,sysdate,&#x27;192.168.37.132&#x27;);insert into t_user values(null,&#x27;xiaoming1&#x27;,123,&#x27;1114&#x27;,sysdate,&#x27;192.168.37.132&#x27;);insert into t_user values(null,&#x27;xiaoming1&#x27;,123,&#x27;1114&#x27;,sysdate,&#x27;192.168.37.132&#x27;);insert into t_user values(null,&#x27;xiaoming2&#x27;,123,&#x27;1114&#x27;,sysdate,&#x27;192.168.37.132&#x27;);insert into t_user values(null,&#x27;xiaoming&#x27;,123,&#x27;1114&#x27;,sysdate,&#x27;192.168.37.132&#x27;);insert into t_user values(null,&#x27;xiaoming&#x27;,123,&#x27;1114&#x27;,sysdate,&#x27;192.168.37.132&#x27;);insert into t_user values(null,&#x27;xiaoming&#x27;,123,&#x27;1114&#x27;,sysdate,&#x27;192.168.37.132&#x27;);insert into t_user values(null,&#x27;xiaoming&#x27;,123,&#x27;1114&#x27;,sysdate,&#x27;192.168.37.132&#x27;);insert into t_user values(null,&#x27;xiaoming&#x27;,123,&#x27;1114&#x27;,sysdate,&#x27;192.168.37.132&#x27;);select * from t_user å‚è€ƒæ–‡ç«  https://blog.csdn.net/qq_42055933/article/details/117401672 oracleå¦‚ä½•å®ç°IDè‡ªå¢é•¿","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"}]},{"title":"Redis ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/Redis-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Redis-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Redis-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"redis å®˜æ–¹æ–‡æ¡£ | redis ä¸­æ–‡ç½‘ 1. Mac ç³»ç»Ÿå®‰è£…Reids1.1. å®‰è£…Homebrewå¦‚æœå·²ç»å®‰è£…å¯ä»¥å¿½ç•¥ï¼Œæ²¡æœ‰å®‰è£…çš„è¯·æŸ¥çœ‹å°æ˜ä¹‹å‰å†™å¥½çš„æ–‡ç«  macå®‰è£…homebrew 1.2. ä½¿ç”¨Homebrewå®‰è£…Redis1.2.1. å®‰è£…å‘½ä»¤1brew install redis 1.2.2. æŸ¥çœ‹è½¯ä»¶å®‰è£…åŠé…ç½®æ–‡ä»¶ä½ç½®Homebrewå®‰è£…çš„è½¯ä»¶ä¼šé»˜è®¤åœ¨/usr/local/Cellar/è·¯å¾„ä¸‹ï¼› redisçš„é…ç½®æ–‡ä»¶redis.confå­˜æ”¾åœ¨/usr/local/etcè·¯å¾„ä¸‹ã€‚ 1.2.3. å¯åŠ¨redisæœåŠ¡1.2.3.1. æ–¹æ³•ä¸€ï¼šbrewé™¤äº†å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®‰è£…è½¯ä»¶ä»¥å¤–ï¼Œè¿˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¯åŠ¨è½¯ä»¶ 1brew services start redis 1.2.3.2. æ–¹æ³•äºŒï¼š1redis-server /usr/local/etc/redis.conf 1.2.4. æŸ¥çœ‹redisæœåŠ¡è¿›ç¨‹æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤æŸ¥çœ‹redisæ˜¯å¦æ­£åœ¨è¿è¡Œ 1ps axu | grep redis 1.2.5. redis-cliè¿æ¥redisæœåŠ¡redisé»˜è®¤ç«¯å£å·6379ï¼Œé»˜è®¤authä¸ºç©ºï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯è¿æ¥ 1redis-cli -h 127.0.0.1 -p 6379 1.2.6. å…³é—­redisæœåŠ¡ä¼˜é›…çš„å…³é—­redis-cli shutdownæˆ–è€…æ€æ­»sudo pkill redis-server 1.2.7. redis.confé…ç½®æ–‡ä»¶è¯´æ˜redisé»˜è®¤æ˜¯å‰å°å¯åŠ¨ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼ˆåå°è¿è¡Œï¼‰ï¼Œå¯ä»¥åœ¨redis.confä¸­å°†daemonize no,ä¿®æ”¹æˆyeså³å¯ã€‚ Linux ç³»ç»ŸLinuxå®‰è£…Redis","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://guoshunfa.com/tags/Redis/"}]},{"title":"Redis é”™è¯¯æ—¥å¿—è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/Redis-é”™è¯¯æ—¥å¿—è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Redis-é”™è¯¯æ—¥å¿—è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Redis-%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95/","excerpt":"","text":"WRONGPASS invalid username-password pair or user is disabled.æ—¥å¿—æè¿°ï¼šç”¨æˆ·å¯†ç é”™è¯¯ã€‚ è§£å†³æ–¹æ¡ˆï¼š 1234# è®¾ç½®å¯†ç ä¸ºpandaconfig set requirepass panda# ä½¿ç”¨å¯†ç auth panda æ—¥å¿—è¾“å‡º OK ï¼Œä¾¿æˆåŠŸã€‚ (error) MISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on disk. Commands that may modify the data set are disabled. Please check Redis logs for details about the errorï¼æ—¥å¿—æè¿°ï¼šï¼ˆé”™è¯¯ï¼‰misconf redisè¢«é…ç½®ä»¥ä¿å­˜æ•°æ®åº“å¿«ç…§ï¼Œä½†misconf redisç›®å‰ä¸èƒ½åœ¨ç¡¬ç›˜ä¸ŠæŒä¹…åŒ–ã€‚ç”¨æ¥ä¿®æ”¹æ•°æ®é›†åˆçš„å‘½ä»¤ä¸èƒ½ç”¨ï¼Œè¯·ä½¿ç”¨æ—¥å¿—çš„é”™è¯¯è¯¦ç»†ä¿¡æ¯ã€‚ åŸå› ï¼šè¿™æ˜¯ç”±äºå¼ºåˆ¶åœæ­¢rediså¿«ç…§ï¼Œä¸èƒ½æŒä¹…åŒ–å¼•èµ·çš„ï¼Œè¿è¡Œinfoå‘½ä»¤æŸ¥çœ‹rediså¿«ç…§çš„çŠ¶æ€ è§£å†³æ–¹æ¡ˆï¼š è¿æ¥redisåè¿è¡Œ config set stop-writes-on-bgsave-error no å‘½ä»¤ å…³é—­é…ç½®é¡¹stop-writes-on-bgsave-errorè§£å†³è¯¥é—®é¢˜ã€‚","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://guoshunfa.com/tags/Redis/"}]},{"title":"SQLé¢„ç¼–è¯‘","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/SQLé¢„ç¼–è¯‘","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/SQLé¢„ç¼–è¯‘/","link":"","permalink":"https://guoshunfa.com/2022/07/SQL%E9%A2%84%E7%BC%96%E8%AF%91/","excerpt":"","text":"ä½œè€…ï¼šå˜»æ´‹æ´‹é“¾æ¥ï¼šhttps://www.jianshu.com/p/9972d7b33061æ¥æºï¼šç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ æ•°æ®åº“é¢„ç¼–è¯‘èµ·æºï¼ˆ1ï¼‰æ•°æ®åº“SQLè¯­å¥ç¼–è¯‘ç‰¹æ€§ï¼š æ•°æ®åº“æ¥å—åˆ°sqlè¯­å¥ä¹‹åï¼Œéœ€è¦è¯æ³•å’Œè¯­ä¹‰è§£æï¼Œä¼˜åŒ–sqlè¯­å¥ï¼Œåˆ¶å®šæ‰§è¡Œè®¡åˆ’ã€‚è¿™éœ€è¦èŠ±è´¹ä¸€äº›æ—¶é—´ã€‚ä½†æ˜¯å¾ˆå¤šæƒ…å†µï¼Œæˆ‘ä»¬çš„ä¸€æ¡sqlè¯­å¥å¯èƒ½ä¼šåå¤æ‰§è¡Œï¼Œæˆ–è€…æ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™åªæœ‰ä¸ªåˆ«çš„å€¼ä¸åŒï¼ˆæ¯”å¦‚queryçš„whereå­å¥å€¼ä¸åŒï¼Œupdateçš„setå­å¥å€¼ä¸åŒ,insertçš„valueså€¼ä¸åŒï¼‰ã€‚ ï¼ˆ2ï¼‰å‡å°‘ç¼–è¯‘çš„æ–¹æ³• å¦‚æœæ¯æ¬¡éƒ½éœ€è¦ç»è¿‡ä¸Šé¢çš„è¯æ³•è¯­ä¹‰è§£æã€è¯­å¥ä¼˜åŒ–ã€åˆ¶å®šæ‰§è¡Œè®¡åˆ’ç­‰ï¼Œåˆ™æ•ˆç‡å°±æ˜æ˜¾ä¸è¡Œäº†ã€‚ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œäºæ˜¯å°±æœ‰äº†é¢„ç¼–è¯‘ï¼Œé¢„ç¼–è¯‘è¯­å¥å°±æ˜¯å°†è¿™ç±»è¯­å¥ä¸­çš„å€¼ç”¨å ä½ç¬¦æ›¿ä»£ï¼Œå¯ä»¥è§†ä¸ºå°†sqlè¯­å¥æ¨¡æ¿åŒ–æˆ–è€…è¯´å‚æ•°åŒ–ã€‚ä¸€æ¬¡ç¼–è¯‘ã€å¤šæ¬¡è¿è¡Œï¼Œçœå»äº†è§£æä¼˜åŒ–ç­‰è¿‡ç¨‹ã€‚ ï¼ˆ3ï¼‰ç¼“å­˜é¢„ç¼–è¯‘ é¢„ç¼–è¯‘è¯­å¥è¢«DBçš„ç¼–è¯‘å™¨ç¼–è¯‘åçš„æ‰§è¡Œä»£ç è¢«ç¼“å­˜ä¸‹æ¥,é‚£ä¹ˆä¸‹æ¬¡è°ƒç”¨æ—¶åªè¦æ˜¯ç›¸åŒçš„é¢„ç¼–è¯‘è¯­å¥å°±ä¸éœ€è¦ç¼–è¯‘,åªè¦å°†å‚æ•°ç›´æ¥ä¼ å…¥ç¼–è¯‘è¿‡çš„è¯­å¥æ‰§è¡Œä»£ç ä¸­(ç›¸å½“äºä¸€ä¸ªæ¶µæ•°)å°±ä¼šå¾—åˆ°æ‰§è¡Œã€‚ å¹¶ä¸æ˜¯æ‰€ä»¥é¢„ç¼–è¯‘è¯­å¥éƒ½ä¸€å®šä¼šè¢«ç¼“å­˜,æ•°æ®åº“æœ¬èº«ä¼šç”¨ä¸€ç§ç­–ç•¥ï¼ˆå†…éƒ¨æœºåˆ¶ï¼‰ã€‚ (4) é¢„ç¼–è¯‘çš„å®ç°æ–¹æ³• é¢„ç¼–è¯‘æ˜¯é€šè¿‡PreparedStatementå’Œå ä½ç¬¦æ¥å®ç°çš„ã€‚ é¢„ç¼–è¯‘ä½œç”¨ é¢„ç¼–è¯‘é˜¶æ®µå¯ä»¥ä¼˜åŒ– sql çš„æ‰§è¡Œ é¢„ç¼–è¯‘ä¹‹åçš„ sql å¤šæ•°æƒ…å†µä¸‹å¯ä»¥ç›´æ¥æ‰§è¡Œï¼ŒDBMS ä¸éœ€è¦å†æ¬¡ç¼–è¯‘ï¼Œè¶Šå¤æ‚çš„sqlï¼Œç¼–è¯‘çš„å¤æ‚åº¦å°†è¶Šå¤§ï¼Œé¢„ç¼–è¯‘é˜¶æ®µå¯ä»¥åˆå¹¶å¤šæ¬¡æ“ä½œä¸ºä¸€ä¸ªæ“ä½œã€‚å¯ä»¥æå‡æ€§èƒ½ã€‚ é˜²æ­¢SQLæ³¨å…¥ ä½¿ç”¨é¢„ç¼–è¯‘ï¼Œè€Œå…¶åæ³¨å…¥çš„å‚æ•°å°†ä¸ä¼šå†è¿›è¡ŒSQLç¼–è¯‘ã€‚ä¹Ÿå°±æ˜¯è¯´å…¶åæ³¨å…¥è¿›æ¥çš„å‚æ•°ç³»ç»Ÿå°†ä¸ä¼šè®¤ä¸ºå®ƒä¼šæ˜¯ä¸€æ¡SQLè¯­å¥ï¼Œè€Œé»˜è®¤å…¶æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°ä¸­çš„oræˆ–è€…and ç­‰å°±ä¸æ˜¯SQLè¯­æ³•ä¿ç•™å­—äº†ã€‚ é¢„ç¼–è¯‘å¼€å¯ï¼ˆ1ï¼‰æ•°æ®åº“æ˜¯å¦é»˜è®¤å¼€å¯é¢„ç¼–è¯‘å’ŒJDBCç‰ˆæœ¬æœ‰å…³ã€‚ ä¹Ÿå¯ä»¥é…ç½®jdbcé“¾æ¥æ—¶å¼ºåˆ¶å¼€å¯é¢„ç¼–è¯‘å’Œç¼“å­˜:useServerPrepStmtså’ŒcachePrepStmtså‚æ•°ã€‚é¢„ç¼–è¯‘å’Œé¢„ç¼–è¯‘ç¼“å­˜ä¸€å®šè¦åŒæ—¶å¼€å¯æˆ–åŒæ—¶å…³é—­ã€‚å¦åˆ™ä¼šå½±å“æ‰§è¡Œæ•ˆç‡ 1conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/prepare_stmt_test?user=root&amp;password=root&amp;useServerPrepStmts=true&amp;cachePrepStmts=true&quot;); ï¼ˆ2ï¼‰mysqlçš„é¢„ç¼–è¯‘ å¼€å¯äº†é¢„ç¼–è¯‘ç¼“å­˜åï¼Œconnectionä¹‹é—´ï¼Œé¢„ç¼–è¯‘çš„ç»“æœæ˜¯ç‹¬ç«‹çš„ï¼Œæ˜¯æ— æ³•å…±äº«çš„ï¼Œä¸€ä¸ªconnectionæ— æ³•å¾—åˆ°å¦å¤–ä¸€ä¸ªconnectionçš„é¢„ç¼–è¯‘ç¼“å­˜ç»“æœã€‚ ç»è¿‡è¯•éªŒï¼Œmysqlçš„é¢„ç¼–è¯‘åŠŸèƒ½å¯¹æ€§èƒ½å½±å“ä¸å¤§ï¼Œä½†åœ¨jdbcä¸­ä½¿ç”¨PreparedStatementæ˜¯å¿…è¦çš„ï¼Œå¯ä»¥æœ‰æ•ˆåœ°é˜²æ­¢sqlæ³¨å…¥ã€‚ ç›¸åŒPreparedStatementçš„å¯¹è±¡ ï¼Œå¯ä»¥ä¸ç”¨å¼€å¯é¢„ç¼–è¯‘ç¼“å­˜ã€‚ 12345678910111213 conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/prepare_stmt_test?user=root&amp;password=root&amp;useServerPrepStmts=true&quot;); PreparedStatement stmt = conn.prepareStatement(sql); stmt.setString(1, &quot;aaa&quot;); ResultSet rs1 = stmt.executeQuery();//ç¬¬ä¸€æ¬¡æ‰§è¡Œ s1.close(); stmt.setString(1, &quot;ddd&quot;); ResultSet rs2 = stmt.executeQuery();//ç¬¬äºŒæ¬¡æ‰§è¡Œ rs2.close(); stmt.close(); //æŸ¥çœ‹mysqlæ—¥å¿— 1 Prepare select * from users where name = ? 1 Execute select * from users where name = &#x27;aaa&#x27; 1 Execute select * from users where name = &#x27;ddd&#x27; mybatisæ˜¯å¦‚ä½•å®ç°é¢„ç¼–è¯‘çš„mybatis é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†å¯¹æ‰€æœ‰çš„ sql è¿›è¡Œé¢„ç¼–è¯‘ã€‚mybatisåº•å±‚ä½¿ç”¨PreparedStatementï¼Œè¿‡ç¨‹æ˜¯å…ˆå°†å¸¦æœ‰å ä½ç¬¦ï¼ˆå³â€?â€ï¼‰çš„sqlæ¨¡æ¿å‘é€è‡³mysqlæœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨å¯¹æ­¤æ— å‚æ•°çš„sqlè¿›è¡Œç¼–è¯‘åï¼Œå°†ç¼–è¯‘ç»“æœç¼“å­˜ï¼Œç„¶åç›´æ¥æ‰§è¡Œå¸¦æœ‰çœŸå®å‚æ•°çš„sqlã€‚æ ¸å¿ƒæ˜¯é€šè¿‡#&#123; &#125; å®ç°çš„ã€‚ åœ¨é¢„ç¼–è¯‘ä¹‹å‰ï¼Œ#{ } è§£æä¸ºä¸€ä¸ª JDBC é¢„ç¼–è¯‘è¯­å¥ï¼ˆprepared statementï¼‰çš„å‚æ•°æ ‡è®°ç¬¦?ã€‚ 1234//sqlMap ä¸­å¦‚ä¸‹çš„ sql è¯­å¥select * from user where name = #&#123;name&#125;;//è§£ææˆä¸ºé¢„ç¼–è¯‘è¯­å¥select * from user where name = ?; å¦‚æœ${ }ï¼ŒSQL è§£æé˜¶æ®µå°†ä¼šè¿›è¡Œå˜é‡æ›¿æ¢ã€‚ä¸èƒ½å®ç°é¢„ç¼–è¯‘ã€‚ 123select * from user where name = &#x27;$&#123;name&#125;&#x27;//ä¼ é€’çš„å‚æ•°ä¸º &quot;ruhua&quot; æ—¶,è§£æä¸ºå¦‚ä¸‹ï¼Œç„¶åå‘é€æ•°æ®åº“æœåŠ¡å™¨è¿›è¡Œç¼–è¯‘ã€‚select * from user where name = &quot;ruhua&quot;;","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"SQL","slug":"SQL","permalink":"https://guoshunfa.com/tags/SQL/"}]},{"title":"Macç³»ç»Ÿå®‰è£…Docker","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Macç³»ç»Ÿå®‰è£…Docker","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.275Z","comments":true,"path":"2022/07/Macç³»ç»Ÿå®‰è£…Docker/","link":"","permalink":"https://guoshunfa.com/2022/07/Mac%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85Docker/","excerpt":"","text":"è½¬è½½è‡ªï¼šhttps://blog.csdn.net/qq_42405688/article/details/124468315 å¼€å§‹å®‰è£…ï¼š 1ã€ç»ˆç«¯è¾“å…¥ï¼š 1brew install --cask --appdir=/Applications docker 2ã€å‡ºç°ï¼šdocker was successfully installed! å®‰è£…æˆåŠŸã€‚ 3ã€ ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œæ˜¯éœ€è¦æœ¬æœºå¯†ç ç¡®è®¤çš„ã€‚ 4ã€è¾“å…¥å¯†ç åï¼Œå¼¹å‡ºä»¥ä¸‹ç•Œé¢ã€‚ 5ã€å®‰è£…æˆåŠŸåï¼Œå¯åœ¨ç»ˆç«¯æ£€æŸ¥dockerç‰ˆæœ¬ï¼Œæ˜¾ç¤ºç‰ˆæœ¬åï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚ 1docker --version äºŒã€dockerå›½å†…é•œåƒé…ç½® åœ¨çº¢æ¡†å¤„è¿›è¡Œæ·»åŠ ä»¥ä¸‹ä»£ç åï¼Œç‚¹å‡»Apply &amp; Restart æŒ‰é’®ï¼š 123456789101112131415&#123; &quot;builder&quot;: &#123; &quot;gc&quot;: &#123; &quot;enabled&quot;: true, &quot;defaultKeepStorage&quot;: &quot;20GB&quot; &#125; &#125;, &quot;experimental&quot;: false, &quot;features&quot;: &#123; &quot;buildkit&quot;: true &#125;, &quot;registry-mirrors&quot;:[ &quot;http://hub-mirror.c.163.com&quot; ]&#125; æŸ¥çœ‹æ˜¯å¦åº”ç”¨é•œåƒæˆåŠŸï¼Œçº¢æ¡†å†…å®¹å°±æ˜¯ä¸Šé¢é…ç½®çš„å›½å†…é•œåƒï¼š 1docker info é™„dockerå›½å†…å¸¸ç”¨é•œåƒï¼š 1ã€ä¸­ç§‘å¤§: https://docker.mirrors.ustc.edu.cn 2ã€ç½‘æ˜“: http://hub-mirror.c.163.com 3ã€Docker å®˜æ–¹ä¸­å›½åŒº: https://registry.docker-cn.com 4ã€ä¸ƒç‰›äº‘: https://reg-mirror.qiniu.com","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://guoshunfa.com/tags/mac/"},{"name":"docker","slug":"docker","permalink":"https://guoshunfa.com/tags/docker/"}]},{"title":"Shell expectç”¨æ³•æè¿°","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Shell-expect-ç”¨æ³•æè¿°","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.275Z","comments":true,"path":"2022/07/Shell-expect-ç”¨æ³•æè¿°/","link":"","permalink":"https://guoshunfa.com/2022/07/Shell-expect-%E7%94%A8%E6%B3%95%E6%8F%8F%E8%BF%B0/","excerpt":"","text":"1. expect è‡ªåŠ¨åŒ–äº¤äº’è„šæœ¬1.1. ä»‹ç»expectæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–äº¤äº’å¥—ä»¶ï¼Œä¸»è¦åº”ç”¨äºæ‰§è¡Œå‘½ä»¤å’Œç¨‹åºæ—¶ï¼Œç³»ç»Ÿä»¥äº¤äº’å½¢å¼è¦æ±‚è¾“å…¥æŒ‡å®šå­—ç¬¦ä¸²ï¼Œå®ç°äº¤äº’é€šä¿¡ã€‚ 1.2. å®‰è£…12sudo apt-get updatesudo apt-get install expect 1.3. å‘½ä»¤ä»‹ç»Expectä¸­æœ€å…³é”®çš„å››ä¸ªå‘½ä»¤æ˜¯send,expect,spawn,interactã€‚ sendï¼šå‘è¿›ç¨‹å‘é€å­—ç¬¦ä¸²ï¼Œç”¨äºæ¨¡æ‹Ÿç”¨æˆ·çš„è¾“å…¥ï¼Œ è¯¥å‘½ä»¤ä¸èƒ½è‡ªåŠ¨å›è½¦æ¢è¡Œï¼Œä¸€èˆ¬è¦åŠ \\rï¼ˆå›è½¦ï¼‰ expectï¼š expectçš„ä¸€ä¸ªå†…éƒ¨å‘½ä»¤ï¼Œåˆ¤æ–­ä¸Šæ¬¡è¾“å‡ºç»“æœé‡Œæ˜¯å¦åŒ…å«æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœæœ‰åˆ™ç«‹å³è¿”å›ï¼Œå¦åˆ™å°±ç­‰å¾…è¶…æ—¶æ—¶é—´åè¿”å›ï¼Œåªèƒ½æ•æ‰ç”±spawnå¯åŠ¨çš„è¿›ç¨‹çš„è¾“å‡ºexpect spawnï¼šå¯åŠ¨è¿›ç¨‹ï¼Œå¹¶è·Ÿè¸ªåç»­äº¤äº’ä¿¡æ¯ interactï¼šæ‰§è¡Œå®Œæˆåä¿å­˜äº¤äº’çŠ¶æ€ï¼ŒæŠŠæ§åˆ¶æƒäº¤ç»™æ§åˆ¶å° set timeout 30ï¼šè®¾ç½®è¶…æ—¶æ—¶é—´ä¸º30ç§’(é»˜è®¤çš„è¶…æ—¶æ—¶é—´æ˜¯ 10 ç§’ï¼Œé€šè¿‡ set å‘½ä»¤å¯ä»¥è®¾ç½®ä¼šè¯è¶…æ—¶æ—¶é—´, è‹¥ä¸é™åˆ¶è¶…æ—¶æ—¶é—´åˆ™åº”è®¾ç½®ä¸º-1) exp_continueï¼š å…è®¸expectç»§ç»­å‘ä¸‹æ‰§è¡ŒæŒ‡ä»¤meoutï¼šæŒ‡å®šè¶…æ—¶æ—¶é—´ï¼Œè¿‡æœŸåˆ™ç»§ç»­æ‰§è¡Œåç»­æŒ‡ä»¤ send_userï¼š å›æ˜¾å‘½ä»¤ï¼Œç›¸å½“äºecho $argvå‚æ•°æ•°ç»„ï¼šExpectè„šæœ¬å¯ä»¥æ¥å—ä»bashä¼ é€’çš„å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ [lindex $argv n] è·å¾—ï¼Œnä»0å¼€å§‹ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ä¸€ä¸ª$1ï¼Œç¬¬äºŒä¸ª$2ï¼Œç¬¬ä¸‰ä¸ª$3â€¦â€¦å‚æ•° ($argvnæ²¡æœ‰ç©ºæ ¼åˆ™è¡¨ç¤ºè„šæœ¬åç§° ï¼› $argv næœ‰ç©ºæ ¼åˆ™ä»£è¡¨ä¸‹æ ‡) ä¸€èˆ¬æµç¨‹ï¼šspawn å¯åŠ¨è¿½è¸ª â€”&gt; expect åŒ¹é…æ•æ‰å…³é”®å­— â€”â€”&gt; æ•æ‰åˆ°å°†è§¦å‘send ä»£æ›¿äººä¸ºè¾“å…¥æŒ‡ä»¤â€”&gt; interact &#x2F;expect eof Expectè„šæœ¬å¿…é¡»ä»¥interactæˆ–expect eof ç»“æŸï¼Œæ‰§è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡é€šå¸¸expect eofå°±å¤Ÿäº† expect eof æ˜¯åœ¨ç­‰å¾…ç»“æŸæ ‡å¿—ã€‚ç”±spawnå¯åŠ¨çš„å‘½ä»¤åœ¨ç»“æŸæ—¶ä¼šäº§ç”Ÿä¸€ä¸ªeofæ ‡è®°ï¼Œexpect eof å³åœ¨ç­‰å¾…è¿™ä¸ªæ ‡è®° 1.4. bash shellå†…åŠ å…¥expectè„šæœ¬ä½¿ç”¨&lt;&lt;-EOF ï¼Œå¼•å…¥expectè„šæœ¬ã€‚ 1234#!/bin/base/usr/bin/expect &lt;&lt;-EOFEOF 2. äº‹ä¾‹2.1. ssh è¿æ¥è¿œç«¯æœåŠ¡å™¨1). å¼€å§‹æ„å»ºæ–‡ä»¶ 1vi test_expect.exp 2). æ„å»ºæ–‡ä»¶å†…å®¹ 12345678910111213141516171819202122232425262728#!/usr/bin/expect# ä¼ å…¥å‚æ•°æ•°é‡éªŒè¯if &#123;$argc &lt; 3&#125; &#123; #do something send_user &quot;usage: $argv0 &lt;remote_user&gt; &lt;remote_host&gt; &lt;remote_pwd&gt;&quot; exit&#125;// å°†è¶…æ—¶è®¾ç½®ä¸º-1ä»¥ç¦ç”¨è¶…æ—¶åŠŸèƒ½ã€‚set timeout -1# è¿œç¨‹æœåŠ¡å™¨ç”¨æˆ·åset remote_user [lindex $argv 0] # è¿œç¨‹æœåŠ¡å™¨åŸŸåset remote_host [lindex $argv 1] # è¿œç¨‹æœåŠ¡å™¨å¯†ç set remote_pwd [lindex $argv 2]# è¿œç¨‹ç™»å½•spawn ssh $&#123;remote_user&#125;@$&#123;remote_host&#125;expect &#123; &quot;*password&quot; &#123;send &quot;$&#123;remote_pwd&#125;\\r&quot;;&#125; &quot;*yes/no&quot; &#123;send &quot;yes\\r&quot;;exp_continue&#125;&#125;# sshç™»é™†æˆåŠŸåï¼Œç»§ç»­è¿›è¡Œæ“ä½œã€‚expect &quot;]#&quot; &#123; send &quot;cd /\\r&quot; &#125;# ç»“æŸexpect eof 3). ä½¿ç”¨è„šæœ¬ 1./test_expect.exp username ip password ğŸŒŸ æ³¨æ„äº‹é¡¹ è„šæœ¬æ–‡ä»¶å†…å®¹ç¬¬ä¸€è¡Œå¿…é¡»åŠ å…¥#!/usr/bin/expectã€‚ expect è„šæœ¬æ–‡ä»¶æ‰§è¡Œå¿…é¡»ä½¿ç”¨ .&#x2F;test_expect.expã€‚","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"Shell","slug":"Shell","permalink":"https://guoshunfa.com/tags/Shell/"},{"name":"Expect","slug":"Expect","permalink":"https://guoshunfa.com/tags/Expect/"}]},{"title":"IDEA Debugè°ƒè¯•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶ä½¿ç”¨/IDEA-Debugè°ƒè¯•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.298Z","comments":true,"path":"2022/07/IDEA-Debugè°ƒè¯•/","link":"","permalink":"https://guoshunfa.com/2022/07/IDEA-Debug%E8%B0%83%E8%AF%95/","excerpt":"","text":"debug åŸºæœ¬æ“ä½œè¿™é‡Œä¸»è¦æè¿°è¿™äº›æŒ‰é’®çš„ç”¨å¤„ã€‚ æŒ‰é’®ä¾æ¬¡çš„ç”¨å¤„æ˜¯ï¼š å›åˆ°æ–­ç‚¹å¤„ æ­¥è¿‡ æ­¥å…¥ å¼ºåˆ¶æ­¥å…¥ æ­¥å‡º ä¸¢å¸§ è¿è¡Œåˆ°å…‰æ ‡å¤„ è¯„ä¼°è¡¨è¾¾å¼ è·Ÿè¸ªå½“å‰æµé“¾ å›åˆ°æ–­ç‚¹å¤„å½“ä¸çŸ¥é“å½“å‰æ–­ç‚¹åœç•™åœ¨ä½•å¤„æ—¶ï¼Œç‚¹å‡»è¿™ä¸ªæŒ‰é’®ï¼Œå³å¯å›åˆ°å½“å‰æ–­ç‚¹å¤„ã€‚ æ­¥è¿‡æ­£å¸¸æ‰§è¡Œä¸‹ä¸€è¡Œä»£ç ã€‚ æ­¥å…¥è¿›å…¥åˆ°æ–¹æ³•ä¸­ã€‚ å¼ºåˆ¶æ­¥å…¥è¿›å…¥åˆ°æ–¹æ³•çš„æºç ä¸­ã€‚ æ­¥å‡ºäºæ­¥å…¥ç›¸åï¼Œæ­¥å‡ºæ˜¯è®©æ–¹æ³•æ­£å¸¸æ‰§è¡Œç»“æœï¼Œå¹¶ä¸”è¿”å›åˆ°æ–¹æ³•è°ƒç”¨æ–¹ã€‚ ä¸¢å¸§å¦‚æœä¸€éƒ¨åˆ†ä»£ç æ²¡æœ‰è°ƒè¯•åˆ°ï¼Œå¯ä»¥ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ï¼Œå°†æ–­ç‚¹ä¼šé€€åˆ°åŸæ¥ä½ç½®ã€‚ è¿è¡Œåˆ°å…‰æ ‡å¤„å…‰æ ‡æŒ‡å®šå°†è¦æ‰§è¡Œçš„ä¸€è¡Œä»£ç ï¼Œç‚¹å‡»æ­¤æŒ‰é’®ï¼Œæ–­ç‚¹ä¼šåœç•™åˆ°å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸€è¡Œã€‚ è¯„ä¼°è¡¨è¾¾å¼å¯ä»¥é€šè¿‡ä»£ç æ®µçš„æ–¹å¼ï¼Œå¯¹å½“å‰çš„è°ƒè¯•å†…å®¹è¿›è¡Œè¿›ä¸€æ­¥åˆ†æã€‚ è·Ÿè¸ªå½“å‰æµé“¾ä¸»è¦ç”¨äºJDK8 çš„ Streamè°ƒè¯•ã€‚ é’ˆå¯¹Streamçš„è°ƒè¯•ï¼Œideaæä¾›äº†ä¸€ä¸ªå¾ˆå¼ºå¤§çš„åŠŸèƒ½ã€‚é€šè¿‡æµè·Ÿè¸ªï¼Œå¯ä»¥æ¸…æ™°çš„çœ‹å‡ºæ•°æ®çš„èµ°å‘ã€‚ debug é«˜çº§æ“ä½œdebugé«˜çº§è°ƒè¯•åˆ†ä¸ºå‡ ç§ï¼š å­—æ®µæ–­ç‚¹è°ƒè¯• å¼‚å¸¸æ–­ç‚¹è°ƒè¯• æ–¹æ³•æ–­ç‚¹è°ƒè¯• æ‰‹åŠ¨åˆ¶é€ æŠ›å‡ºå¼‚å¸¸ å’Œ å¼ºåˆ¶è¿”å› å­—æ®µæ–­ç‚¹è°ƒè¯•å­—æ®µå·¦ä¾§æ‰“ä¸Šæ–­ç‚¹ï¼Œå³é”®æ–­ç‚¹ä½ç½®ï¼Œæ ¹æ®éœ€è¦è°ƒæ•´é…ç½®ã€‚ æˆ‘è¿™é‡Œé€‰ä¸­äº†â€œå­—æ®µä¿®æ”¹æ—¶ç›‘å¬â€ã€‚ Debugæ—¶å­—æ®µå¦‚æœåœ¨æŸä¸ªä½ç½®è¿›è¡Œäº†ä¿®æ”¹ï¼Œæ–­ç‚¹ä¼šè‡ªåŠ¨æ‰“åˆ°ä¿®æ”¹çš„é‚£è¡Œä»£ç ï¼Œè¯¦ç»†è¯·çœ‹ä¸‹æ–¹æˆªå›¾ã€‚ å¼‚å¸¸æ–­ç‚¹è°ƒè¯•å…ˆçœ‹ä¸€ä¸‹è¿™æ®µä»£ç ã€‚ 12345@Testpublic void exceptionTest() &#123; String str = null; boolean bool = str.equals(&quot;xxx&quot;);&#125; è¿™æ®µä»£ç ä¼šæŠ¥ä¸€ä¸ªé”™è¯¯ï¼šNullPointerExceptionï¼ˆç©ºæŒ‡é’ˆå¼‚å¸¸ï¼‰ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡debugè¿›è¡Œæ•æ‰NullPointerExceptionã€‚ é¦–å…ˆæ‰“å¼€debugæ–­ç‚¹é¢æ¿ æ‰“å¼€æ–­ç‚¹é¢æ¿åï¼Œç‚¹å‡»å·¦ä¸Šè§’åŠ å·ï¼ˆâ•ï¼‰ï¼Œé€‰æ‹©Javaå¼‚å¸¸æ–­ç‚¹ï¼ŒæŸ¥æ‰¾å¹¶æ·»åŠ NullPointerExceptionã€‚ è¿™æ ·å°±èƒ½å¤Ÿæ‹¦æˆªåˆ°NullPointerExceptionäº†ã€‚ æ–¹æ³•æ–­ç‚¹è°ƒè¯•åœ¨æ–¹æ³•å¤„åŠ å…¥æ–­ç‚¹ï¼Œå³é”®æ–­ç‚¹è¿›è¡Œæ–­ç‚¹è¯¦æƒ…ï¼Œå¯ä»¥åœ¨æ–¹æ³•è¾“å…¥æˆ–è¾“å‡ºæ—¶è¿›è¡Œè°ƒè¯•ã€‚ æˆ‘è¿™é‡Œé€‰æ‹©äº†æ–¹æ³•è¾“å…¥å’Œæ–¹æ³•è¾“å‡ºï¼Œåœ¨è¿›è¡Œdebugæ—¶ï¼Œæ–­ç‚¹ä¼šåœç•™åœ¨æ–¹æ³•çš„ç¬¬ä¸€è¡Œå’Œç»“æŸè¡Œã€‚ æ‰‹åŠ¨åˆ¶é€ æŠ›å‡ºå¼‚å¸¸ å’Œ å¼ºåˆ¶è¿”å›åœ¨çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæƒ³åœ¨æŸä¸€è¡Œä»£ç æ‰‹åŠ¨çš„åˆ¶é€ å¼‚å¸¸æŠ›å‡ºæˆ–è€…å¼ºåˆ¶è¿”å›ï¼Œåªéœ€è¦åœ¨å½“å‰å¸§å³é”®ï¼Œé€‰æ‹©æŠ›å‡ºå¼‚å¸¸ï¼ˆæˆ–è€…å¼ºåˆ¶è¿”å›ï¼‰ï¼Œè¾“å…¥å¼‚å¸¸å€¼ï¼ˆæˆ–è€…è¿”å›æ•°æ®ï¼‰ï¼Œå³å¯ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼ˆæˆ–è€…è¿”å›ï¼‰ã€‚ debug è°ƒè¯•è¿œç«¯æœåŠ¡å¦‚æœé€šè¿‡debug è°ƒè¯•è¿œç«¯æœåŠ¡çš„ä»£ç ï¼Œä¸‹é¢æè¿°å‡ ç§æ–¹å¼ã€‚ æœåŠ¡å¯åŠ¨æ—¶æ·»åŠ å‚æ•° åˆ‡è®°ï¼Œä»…å¯ä»¥ç”¨äºæµ‹è¯•ç¯å¢ƒã€‚ 1oracle-java -jar -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005","categories":[{"name":"è½¯ä»¶ä½¿ç”¨","slug":"è½¯ä»¶ä½¿ç”¨","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/"}],"tags":[{"name":"IDEA","slug":"IDEA","permalink":"https://guoshunfa.com/tags/IDEA/"},{"name":"Debug","slug":"Debug","permalink":"https://guoshunfa.com/tags/Debug/"}]},{"title":"IDEA Mavenä¾èµ–ç‰ˆæœ¬å†²çª","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶ä½¿ç”¨/IDEA-Mavenä¾èµ–ç‰ˆæœ¬å†²çª","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.298Z","comments":true,"path":"2022/07/IDEA-Mavenä¾èµ–ç‰ˆæœ¬å†²çª/","link":"","permalink":"https://guoshunfa.com/2022/07/IDEA-Maven%E4%BE%9D%E8%B5%96%E7%89%88%E6%9C%AC%E5%86%B2%E7%AA%81/","excerpt":"","text":"åœ¨ideaä¸­ï¼Œå¦‚ä½•æŸ¥çœ‹mavenä¸­å“ªäº›ä¾èµ–å­˜åœ¨ç€ç‰ˆæœ¬å†²çªã€‚ æˆ‘ä»¬è¿™è¾¹ç”¨mybatisplusä¸¾ä¾‹ï¼Œå¼•å…¥äº†ä¸åŒç‰ˆæœ¬çš„ä¾èµ–ã€‚ 12345678910&lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus&lt;/artifactId&gt; &lt;version&gt;3.5.2&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus-generator&lt;/artifactId&gt; &lt;version&gt;3.2.0&lt;/version&gt;&lt;/dependency&gt; ç‚¹å‡»å³ä¾§è¾¹æ¡†ä¸­çš„mavenæŒ‰é’® æ‰¾åˆ°å¹¶ç‚¹å‡»åˆ†æä¾èµ–å…³ç³»ï¼ˆæ”¾å¤§é•œï¼‰ï¼Œé¡µé¢ä¼šå¼¹å‡ºä¸€ä¸ªç­¾å„¿ã€‚ é€šè¿‡å·¦ä¾§â€œå·²è§£æçš„ä¾èµ–é¡¹â€ï¼Œå¯ä»¥çœ‹å‡ºå“ªäº›ä»¥æ¥å­˜åœ¨é—®é¢˜ï¼ˆæ„Ÿå¹å·æ ‡è¯†ï¼‰ã€‚ ç‚¹å‡»å‡ºç°é—®é¢˜çš„ä¾èµ–é¡¹ï¼Œå¯ä»¥æŸ¥çœ‹è¯¦ç»†ã€‚","categories":[{"name":"è½¯ä»¶ä½¿ç”¨","slug":"è½¯ä»¶ä½¿ç”¨","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/"}],"tags":[{"name":"IDEA","slug":"IDEA","permalink":"https://guoshunfa.com/tags/IDEA/"},{"name":"Maven","slug":"Maven","permalink":"https://guoshunfa.com/tags/Maven/"}]},{"title":"IDEA å®ç”¨æ’ä»¶","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶ä½¿ç”¨/IDEAå®ç”¨æ’ä»¶","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.298Z","comments":true,"path":"2022/07/IDEAå®ç”¨æ’ä»¶/","link":"","permalink":"https://guoshunfa.com/2022/07/IDEA%E5%AE%9E%E7%94%A8%E6%8F%92%E4%BB%B6/","excerpt":"","text":"RestfulToolï¼šå¯ä»¥æ ¹æ®æ¥å£urlï¼Œå¿«é€Ÿå®šä½controllerä»£ç ä½ç½®çš„æ’ä»¶ã€‚ vo2dtoï¼švoã€dtoè½¬æ¢çš„å¿«æ·ä»£ç ç”Ÿæˆæ’ä»¶ã€‚ Easy Javadocï¼šå¿«é€Ÿç”Ÿæˆæ³¨é‡Šçš„æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡è‹±æ–‡è‡ªåŠ¨ç”Ÿæˆå¯¹åº”æ³¨é‡Šå†…å®¹ã€‚ MyBatisCodeHelperProï¼šå¯ä»¥å°†mybatis xmlæ–‡ä»¶ä¸­çš„sqlç‰‡æ®µï¼Œè½¬æ¢æˆå¯æ‰§è¡Œçš„sqlï¼Œè¿˜æ”¯æŒæ‰§è¡Œsqlï¼Œå’ŒæŸ¥çœ‹æ‰§è¡Œä¹‹åçš„æ•°æ®çš„åŠŸèƒ½ã€‚ CamelCaseï¼šä¿®æ”¹å­—æ®µçš„é©¼å³°å¼å‘½åã€‚ Alibaba Java Coding Guidelinesï¼šä»£ç è§„èŒƒæ£€æµ‹æ’ä»¶ã€‚ GsonFormPlusï¼šé€šè¿‡jsonæ•°æ®ï¼ŒåŠ¨æ€ç”ŸæˆDTOæ–‡ä»¶ã€‚å¯ä»¥ç”¨äºå¿«é€Ÿå°è£…ç¬¬ä¸‰æ–¹æ¥å£ã€‚ maven-searchï¼šå¿«é€Ÿæœç´¢mavenä¾èµ–çš„æ’ä»¶ï¼Œå‡å°‘å»mavenå®˜ç½‘ä»“åº“æŸ¥æ‰¾çš„æ“ä½œã€‚ POJO to JSONï¼šå°†pojoå†…å®¹è½¬æ¢æˆjsonæ•°æ®ï¼Œè¿˜æ”¯æŒå¡«å…¥éšæœºå€¼ã€‚ Properties to YAML Convertï¼šspringbootçš„é…ç½®æ–‡ä»¶***.propertiesè½¬æ¢æˆyamlçš„æ’ä»¶ã€‚ JRebal and XRebelï¼šçƒ­éƒ¨ç½²ä»£ç ã€‚ JRebal mybatisPlus extensionï¼šçƒ­éƒ¨ç½²mybatis xmlæ–‡ä»¶ã€‚ Grep Consoleï¼šè°ƒæ•´æ§åˆ¶å°æ—¥å¿—é¢œè‰²çš„æ’ä»¶ã€‚ RainBow Brackersï¼šä»£ç å½©è‰²æ‹¬å·ã€‚ CodeGlance Proï¼šä»£ç ç¼©ç•¥å›¾æ’ä»¶ï¼Œå±•ç¤ºåœ¨ä»£ç å³ä¾§æ»šè½®å¤„ã€‚ Material Theme UIï¼šideaä¸»é¢˜åº“ã€‚ Mybatis Log: æŸ¥çœ‹Mybatis ä¸­sqlçš„æ‰§è¡Œå†…å®¹ã€‚","categories":[{"name":"è½¯ä»¶ä½¿ç”¨","slug":"è½¯ä»¶ä½¿ç”¨","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/"}],"tags":[{"name":"IDEA","slug":"IDEA","permalink":"https://guoshunfa.com/tags/IDEA/"},{"name":"æ’ä»¶","slug":"æ’ä»¶","permalink":"https://guoshunfa.com/tags/%E6%8F%92%E4%BB%B6/"}]},{"title":"IDEA æ‹’ç»å¡é¡¿","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶ä½¿ç”¨/IDEAæ‹’ç»å¡é¡¿","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.298Z","comments":true,"path":"2022/07/IDEAæ‹’ç»å¡é¡¿/","link":"","permalink":"https://guoshunfa.com/2022/07/IDEA%E6%8B%92%E7%BB%9D%E5%8D%A1%E9%A1%BF/","excerpt":"","text":"IDEA - æ‹’ç»å¡é¡¿åœ¨åŒæ ·å†…å­˜çš„ç”µè„‘ï¼Œä¸ºä»€ä¹ˆåˆ«äººèƒ½å¯åŠ¨10ä¸ªJavaç¨‹åºï¼Œè€Œä½ åªèƒ½å¯åŠ¨5ä¸ªã€‚ å…¶å®ä»–ä»¬æ”¹äº†ä¸‹é¢è¿™äº›é…ç½®ã€‚ 1. Javaç¨‹åºå¯åŠ¨é…ç½®ç»™æ¯ä¸€ä¸ªå¯åŠ¨æœåŠ¡ï¼Œéƒ½é…ç½®ä¸€ä¸‹vm optionsï¼Œåˆç†çš„é™ä½æ¯ä¸ªæœåŠ¡å ç”¨çš„èµ„æºã€‚ ä¸‹é¢è¿›è¡Œè°ƒæ•´ï¼Œé¦–å…ˆè¦æ‰¾åˆ°â€œè¿è¡Œé…ç½®æ¨¡ç‰ˆâ€é€‰é¡¹ã€‚ é€‰æ‹©SpringBootï¼Œå°†vm optionså¡«å…¥ã€‚-Xms100m -Xmx100m -XX:+PrintGCDetails -XX:+PrintGCTimeStamps æ·»åŠ å®Œé»˜è®¤å€¼åï¼Œä»¥ååˆ›å»ºçš„Springbootè¿è¡Œé…ç½®ï¼Œéƒ½ä¼šé»˜è®¤æ˜¯è¿™ä¸ªã€‚ 2. è°ƒæ•´idea vm optionsideaé»˜è®¤çš„vm optionsï¼Œä¼šå ç”¨å¾ˆå¤§çš„èµ„æºã€‚è¿™é‡Œè¿›è¡Œåˆç†çš„è°ƒæ•´ å°†è¿™ä¸¤é¡¹é…ç½®è°ƒæ•´ä¸ºï¼š 12-Xmx1024m-Xms1024m","categories":[{"name":"è½¯ä»¶ä½¿ç”¨","slug":"è½¯ä»¶ä½¿ç”¨","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/"}],"tags":[{"name":"IDEA","slug":"IDEA","permalink":"https://guoshunfa.com/tags/IDEA/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® ç‰¹æ®Šå“åº”ç»“æ„","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/01ç»Ÿä¸€ç»“æ„/æ­å»ºå•ä½“SpringBooté¡¹ç›®-ç‰¹æ®Šå“åº”ç»“æ„","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.237Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-ç‰¹æ®Šå“åº”ç»“æ„/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E7%89%B9%E6%AE%8A%E5%93%8D%E5%BA%94%E7%BB%93%E6%9E%84/","excerpt":"","text":"å¹¶ä¸æ˜¯æ‰€æœ‰çš„éœ€æ±‚éƒ½è¦æ±‚ä½¿ç”¨ç»Ÿä¸€çš„å“åº”ç»“æ„ï¼Œåœ¨ç¼–å†™å¯¹å¤–å¼€æ”¾çš„æ¥å£æ—¶ï¼Œå¯èƒ½ä¼šä½¿ç”¨å¦å¤–ä¸€å¥—å“åº”è§„åˆ™è¿›è¡Œè¿”å›ã€‚ è¿™é‡Œåœ¨åŸæœ‰çš„ç»Ÿä¸€å“åº”ç»“æ„çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œä¸€äº›å®šåˆ¶åŒ–å¤„ç†ã€‚ å®šä¹‰ä¸€ä¸ªç‰¹æ®Šå“åº”æ³¨è§£å®šä¹‰ä¸€ä¸ªç”¨äºç‰¹æ®Šå“åº”çš„æ³¨è§£ï¼ŒæŠŠæ³¨è§£æ”¾åœ¨æƒ³è¦ç‰¹æ®Šå“åº”çš„æ¥å£æ–¹æ³•ä¸Šã€‚ 1234567import java.lang.annotation.*;@Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface NotUnifiedResult &#123;&#125; è°ƒæ•´å°è£…è¿”å›ç»“æœ123456789101112131415161718192021222324252627282930313233343536import org.springframework.core.MethodParameter;import org.springframework.web.context.request.NativeWebRequest;import org.springframework.web.method.support.HandlerMethodReturnValueHandler;import org.springframework.web.method.support.ModelAndViewContainer;/** * å°è£…è¿”å›ç»“æœ */public class PandaHandlerMethodReturnValueHandler implements HandlerMethodReturnValueHandler &#123; private final HandlerMethodReturnValueHandler returnValueHandler; public PandaHandlerMethodReturnValueHandler(HandlerMethodReturnValueHandler returnValueHandler) &#123; this.returnValueHandler = returnValueHandler; &#125; @Override public boolean supportsReturnType(MethodParameter returnType) &#123; return returnValueHandler.supportsReturnType(returnType); &#125; @Override public void handleReturnValue(Object returnValue, MethodParameter returnType, ModelAndViewContainer mavContainer, NativeWebRequest webRequest) throws Exception &#123; // ä¸éœ€è¦ç»Ÿä¸€å°è£…çš„æ¥å£ï¼Œç›´æ¥è¿”å›ã€‚ if (returnType.hasMethodAnnotation(NotUnifiedResult.class)) &#123; this.returnValueHandler.handleReturnValue(returnValue, returnType, mavContainer, webRequest); return; &#125; // äººä¸ºçš„ä½¿ç”¨çš„ç»Ÿä¸€å°è£…ï¼Œä¸ä¼šå†æ¬¡å°è£…ã€‚ if (returnValue instanceof ApiResult) &#123; this.returnValueHandler.handleReturnValue(returnValue, returnType, mavContainer, webRequest); return; &#125; this.returnValueHandler.handleReturnValue(ApiResult.ok(returnValue), returnType, mavContainer, webRequest); &#125;&#125;","categories":[{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® ç»Ÿä¸€å“åº”ç»“æ„","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/01ç»Ÿä¸€ç»“æ„/æ­å»ºå•ä½“SpringBooté¡¹ç›®-ç»Ÿä¸€å“åº”ç»“æ„","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.237Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-ç»Ÿä¸€å“åº”ç»“æ„/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E7%BB%9F%E4%B8%80%E5%93%8D%E5%BA%94%E7%BB%93%E6%9E%84/","excerpt":"","text":"æ¯ä¸ªæ¥å£éƒ½éœ€è¦æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å“åº”ç»“æ„ã€‚æ¯”å¦‚ï¼š 12345&#123; &quot;code&quot;: 200, &quot;msg&quot;: &quot;OK&quot;, &quot;data&quot;: &quot;æˆ‘æ˜¯æ•°æ®&quot;&#125; ç»“æœå±•ç¤ºæ¥å£å®šä¹‰ï¼š è¯·æ±‚å“åº”ç»“æœï¼š è®¾å®šä¸€ä¸ªç»Ÿä¸€çš„å“åº”æ¨¡ç‰ˆæ¥å£å“åº”å†…å®¹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071import io.swagger.annotations.ApiModel;import io.swagger.annotations.ApiModelProperty;@ApiModel(&quot;æ¥å£å“åº”å†…å®¹&quot;)public class ApiResult&lt;T&gt; &#123; @ApiModelProperty(&quot;å“åº”ç &quot;) private Integer code; @ApiModelProperty(&quot;æ¶ˆæ¯å†…å®¹&quot;) private String msg; @ApiModelProperty(&quot;å“åº”æ•°æ®&quot;) private T data; public static ApiResult ok() &#123; return ok(null); &#125; public static &lt;T&gt; ApiResult&lt;T&gt; ok(T data) &#123; return ok(&quot;è¯·æ±‚æˆåŠŸ&quot;, data); &#125; public static &lt;T&gt; ApiResult&lt;T&gt; ok(String msg, T data) &#123; return init(ApiResultCodeEnum.SUCCESS.getCode(), msg, data); &#125; public static ApiResult fail() &#123; return fail(null); &#125; public static &lt;T&gt; ApiResult&lt;T&gt; fail(T data) &#123; return fail(&quot;è¯·æ±‚å¤±è´¥&quot;, data); &#125; public static &lt;T&gt; ApiResult&lt;T&gt; fail(String msg, T data) &#123; return init(ApiResultCodeEnum.FAILURE.getCode(), msg, data); &#125; public static &lt;T&gt; ApiResult&lt;T&gt; init(Integer code, String msg, T data) &#123; ApiResult&lt;T&gt; apiResult = new ApiResult&lt;T&gt;(); apiResult.setCode(code); apiResult.setMsg(msg); apiResult.setData(data); return apiResult; &#125; public Integer getCode() &#123; return code; &#125; public void setCode(Integer code) &#123; this.code = code; &#125; public String getMsg() &#123; return msg; &#125; public void setMsg(String msg) &#123; this.msg = msg; &#125; public T getData() &#123; return data; &#125; public void setData(T data) &#123; this.data = data; &#125;&#125; å“åº”ç æšä¸¾123456789101112131415161718192021222324252627282930313233343536/** * å“åº”ç æšä¸¾ */public enum ApiResultCodeEnum &#123; SUCCESS(200, &quot;SUCCESS&quot;), FAILURE(500, &quot;FAILURE&quot;), UN_LOGIN(401, &quot;è¯·æ±‚æœªæˆæƒ&quot;), NOT_FOUND(404, &quot;æ¥å£ä¸å­˜åœ¨&quot;); private Integer code; private String msg; ApiResultCodeEnum(Integer code, String msg) &#123; this.code = code; this.msg = msg; &#125; public Integer getCode() &#123; return code; &#125; public void setCode(Integer code) &#123; this.code = code; &#125; public String getMsg() &#123; return msg; &#125; public void setMsg(String msg) &#123; this.msg = msg; &#125;&#125; å°è£…è¿”å›ç»“æœ123456789101112131415161718192021222324252627282930import org.springframework.core.MethodParameter;import org.springframework.web.context.request.NativeWebRequest;import org.springframework.web.method.support.HandlerMethodReturnValueHandler;import org.springframework.web.method.support.ModelAndViewContainer;/** * å°è£…è¿”å›ç»“æœ */public class PandaHandlerMethodReturnValueHandler implements HandlerMethodReturnValueHandler &#123; private final HandlerMethodReturnValueHandler returnValueHandler; public PandaHandlerMethodReturnValueHandler(HandlerMethodReturnValueHandler returnValueHandler) &#123; this.returnValueHandler = returnValueHandler; &#125; @Override public boolean supportsReturnType(MethodParameter returnType) &#123; return returnValueHandler.supportsReturnType(returnType); &#125; @Override public void handleReturnValue(Object returnValue, MethodParameter returnType, ModelAndViewContainer mavContainer, NativeWebRequest webRequest) throws Exception &#123; if (returnValue instanceof ApiResult) &#123; this.returnValueHandler.handleReturnValue(returnValue, returnType, mavContainer, webRequest); return; &#125; this.returnValueHandler.handleReturnValue(ApiResult.ok(returnValue), returnType, mavContainer, webRequest); &#125;&#125; æ·»åŠ é…ç½®123456789101112131415161718192021222324252627282930import org.springframework.beans.factory.InitializingBean;import org.springframework.context.annotation.Configuration;import org.springframework.web.method.support.HandlerMethodReturnValueHandler;import org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter;import org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor;import javax.annotation.Resource;import java.util.ArrayList;import java.util.List;@Configurationpublic class ReturnValueConfig implements InitializingBean &#123; @Resource RequestMappingHandlerAdapter requestMappingHandlerAdapter; @Override public void afterPropertiesSet() &#123; List&lt;HandlerMethodReturnValueHandler&gt; unmodifiableList = requestMappingHandlerAdapter.getReturnValueHandlers(); List&lt;HandlerMethodReturnValueHandler&gt; list = new ArrayList&lt;&gt;(unmodifiableList.size()); for (HandlerMethodReturnValueHandler returnValueHandler : unmodifiableList) &#123; if (returnValueHandler instanceof RequestResponseBodyMethodProcessor) &#123; list.add(new PandaHandlerMethodReturnValueHandler(returnValueHandler)); &#125; else &#123; list.add(returnValueHandler); &#125; &#125; requestMappingHandlerAdapter.setReturnValueHandlers(list); &#125;&#125;","categories":[{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® ç»Ÿä¸€å¼‚å¸¸å¤„ç†","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/01ç»Ÿä¸€ç»“æ„/æ­å»ºå•ä½“SpringBooté¡¹ç›®-ç»Ÿä¸€å¼‚å¸¸å¤„ç†","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.237Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-ç»Ÿä¸€å¼‚å¸¸å¤„ç†/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/","excerpt":"","text":"æ‰€æœ‰çš„å¼‚å¸¸ä¿¡æ¯è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚ å…³äºå¼‚å¸¸ç›¸å…³çš„çŸ¥è¯†ï¼Œè¯·ç§»æ­¥åˆ°JavaåŸºç¡€ - å¼‚å¸¸ ç»“æœå±•ç¤ºåŠ å…¥æµ‹è¯•ä»£ç ï¼š è¯·æ±‚å“åº”ä¿¡æ¯ï¼š æ·»åŠ ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»12345678910111213141516171819202122232425262728import com.panda.base.exception.custom.PandaException;import com.panda.base.result.vo.ApiResult;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.annotation.RestControllerAdvice;@RestControllerAdvicepublic class PandaGlobalExceptionHandler &#123; /** * è¿™æ˜¯æˆ‘çš„è‡ªå®šä¹‰å¼‚å¸¸ * * @param e * @return */ @ExceptionHandler(&#123;PandaException.class&#125;) public ApiResult runtimeException(PandaException e) &#123; return ApiResult.fail(&quot;PandaException:&quot; + e); &#125; /** * å…œåº•å¼‚å¸¸ï¼Œå…¶ä»–å¼‚å¸¸éƒ½æ²¡æœ‰åŒ¹é…åˆ°çš„ä¼šæ¥åˆ°è¿™ä¸ªæ–¹æ³•è¿›è¡Œå¤„ç†ã€‚ */ @ExceptionHandler(&#123;Exception.class&#125;) public ApiResult Exception(Exception e) &#123; return ApiResult.fail(&quot;Exception:&quot; + e); &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® ç»Ÿä¸€æ—¶é—´å“åº”æ ¼å¼","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/01ç»Ÿä¸€ç»“æ„/æ­å»ºå•ä½“SpringBooté¡¹ç›®-ç»Ÿä¸€æ—¶é—´å“åº”æ ¼å¼","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.237Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-ç»Ÿä¸€æ—¶é—´å“åº”æ ¼å¼/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E7%BB%9F%E4%B8%80%E6%97%B6%E9%97%B4%E5%93%8D%E5%BA%94%E6%A0%BC%E5%BC%8F/","excerpt":"","text":"åœ¨æ—¥å¸¸çš„æ¥å£å¼€å‘ä¸­ï¼Œä¸å…ä¼šé‡åˆ°æ—¶é—´ç±»å‹çš„æ•°æ®ã€‚æ—¶é—´ç±»å‹å¦‚æœä»€ä¹ˆéƒ½ä¸å¤„ç†å°±å“åº”ç»™å‰ç«¯çš„è¯ï¼Œä¸å¤ªå‹å¥½ã€‚ è¿™é‡Œåç«¯åšä¸€äº›é…ç½®ï¼Œå°±å¯ä»¥è®©å“åº”çš„æ—¶é—´æ ¹æ®åˆ¶å®šæ ¼å¼è¿›è¡Œè½¬æ¢ï¼Œå°†è½¬æ¢åçš„æ—¶é—´å“åº”ç»™å‰ç«¯ã€‚ é…ç½®å‰åçš„åŒºåˆ«æ²¡æ·»åŠ é…ç½®å‰ï¼š 12345&#123; &quot;code&quot;: 200, &quot;msg&quot;: &quot;è¯·æ±‚æˆåŠŸ&quot;, &quot;data&quot;: &quot;2022-10-13T05:22:01.961+00:00&quot;&#125; æ·»åŠ é…ç½®åï¼š 12345&#123; &quot;code&quot;: 200, &quot;msg&quot;: &quot;è¯·æ±‚æˆåŠŸ&quot;, &quot;data&quot;: &quot;2022-10-13 13:13:23&quot;&#125; æ·»åŠ é…ç½®ä¿¡æ¯æ·»åŠ é…ç½®ä¿¡æ¯åˆ°springbooté…ç½®æ–‡ä»¶application.propertiesã€‚ 1234# jsonå…¥å‚åŠè¿”å›å€¼Dateæ—¶é—´æ ¼å¼spring.jackson.date-format=yyyy-MM-dd HH:mm:ss# æ—¶åŒºspring.jackson.time-zone=GMT+8","categories":[{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆSpringSecurity","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/10é›†æˆç”¨æˆ·æƒé™éªŒè¯æ¡†æ¶/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆSpringSecurity","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.237Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆSpringSecurity/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90SpringSecurity/","excerpt":"","text":"SpringSecurityæ¡†æ¶ - å®˜æ–¹ä»‹ç» SpringSecurityæ¡†æ¶ - ç†è§£ä¸ä½¿ç”¨","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringSecurity","slug":"SpringSecurity","permalink":"https://guoshunfa.com/tags/SpringSecurity/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"ç”¨æˆ·æƒé™éªŒè¯","slug":"ç”¨æˆ·æƒé™éªŒè¯","permalink":"https://guoshunfa.com/tags/%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E9%AA%8C%E8%AF%81/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® Scheduledæ³¨è§£å®ç°å®šæ—¶å™¨","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/20é›†æˆå®šæ—¶å™¨/æ­å»ºå•ä½“SpringBooté¡¹ç›®-Scheduledæ³¨è§£å®ç°å®šæ—¶å™¨","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.237Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-Scheduledæ³¨è§£å®ç°å®šæ—¶å™¨/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-Scheduled%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0%E5%AE%9A%E6%97%B6%E5%99%A8/","excerpt":"","text":"ä½¿ç”¨springbootæºå¸¦çš„Scheduledæ³¨è§£å®ç°å®šæ—¶å™¨åŠŸèƒ½ã€‚ 1. æ·»åŠ å®šæ—¶ä»»åŠ¡1234567891011121314151617181920import org.springframework.scheduling.annotation.Scheduled;import org.springframework.stereotype.Component;import java.util.concurrent.TimeUnit;@Componentpublic class ScheduledTest &#123; @Scheduled(cron = &quot;0/1 * * * * ?&quot;) public void test1() throws InterruptedException &#123; System.out.println(&quot;test1: &quot; + System.currentTimeMillis()); TimeUnit.SECONDS.sleep(10); &#125; @Scheduled(cron = &quot;0/2 * * * * ?&quot;) public void test2() &#123; System.out.println(&quot;test2: &quot; + System.currentTimeMillis()); &#125;&#125; 2. æ·»åŠ å®šæ—¶å™¨é…ç½®12345678910111213141516import org.springframework.context.annotation.Configuration;import org.springframework.scheduling.annotation.EnableScheduling;import org.springframework.scheduling.annotation.SchedulingConfigurer;import org.springframework.scheduling.config.ScheduledTaskRegistrar;import java.util.concurrent.Executors;@Configuration@EnableSchedulingpublic class ScheduledConfig implements SchedulingConfigurer &#123; @Override public void configureTasks(ScheduledTaskRegistrar taskRegistrar) &#123; // é…ç½®çº¿ç¨‹æ± ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´çº¿ç¨‹æ± å¤§å°ã€‚ taskRegistrar.setScheduler(Executors.newScheduledThreadPool(20)); &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Scheduled","slug":"Scheduled","permalink":"https://guoshunfa.com/tags/Scheduled/"},{"name":"å®šæ—¶å™¨","slug":"å®šæ—¶å™¨","permalink":"https://guoshunfa.com/tags/%E5%AE%9A%E6%97%B6%E5%99%A8/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆ Logback(æ—¥å¿—ç®¡ç†)","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/21é›†æˆæ—¥å¿—ç®¡ç†/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆ Logback(æ—¥å¿—ç®¡ç†)","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.238Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆ Logback(æ—¥å¿—ç®¡ç†)/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90%20Logback(%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86)/","excerpt":"","text":"é›†æˆ Logback(æ—¥å¿—ç®¡ç†)application.properties123logging.config=classpath:config/logback.xmllogging.level.dao=debuglog.path=/Library/work/workspace-learn/springboot/gsf/gsf-log logback.xml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!-- æ—¥å¿—çº§åˆ«ä»ä½åˆ°é«˜åˆ†ä¸ºTRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATALï¼Œå¦‚æœè®¾ç½®ä¸ºWARNï¼Œåˆ™ä½äºWARNçš„ä¿¡æ¯éƒ½ä¸ä¼šè¾“å‡º --&gt;&lt;!-- scan:å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œé…ç½®æ–‡æ¡£å¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤å€¼ä¸ºtrue --&gt;&lt;!-- scanPeriod:è®¾ç½®ç›‘æµ‹é…ç½®æ–‡æ¡£æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’ã€‚ å½“scanä¸ºtrueæ—¶ï¼Œæ­¤å±æ€§ç”Ÿæ•ˆã€‚é»˜è®¤çš„æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿã€‚ --&gt;&lt;!-- debug:å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚ --&gt;&lt;configuration scan=&quot;true&quot; scanPeriod=&quot;10 seconds&quot;&gt; &lt;contextName&gt;logback&lt;/contextName&gt; &lt;!-- è¯»å–application.propertiesä¿¡æ¯ --&gt; &lt;springProperty scope=&quot;context&quot; name=&quot;logPath&quot; source=&quot;log.path&quot; defaultValue=&quot;logdir&quot;/&gt; &lt;!-- nameçš„å€¼æ˜¯å˜é‡çš„åç§°ï¼Œvalueçš„å€¼æ—¶å˜é‡å®šä¹‰çš„å€¼ã€‚é€šè¿‡å®šä¹‰çš„å€¼ä¼šè¢«æ’å…¥åˆ°loggerä¸Šä¸‹æ–‡ä¸­ã€‚å®šä¹‰åï¼Œå¯ä»¥ä½¿â€œ$&#123;&#125;â€æ¥ä½¿ç”¨å˜é‡ã€‚ --&gt; &lt;property name=&quot;log.path&quot; value=&quot;$&#123;logPath&#125;&quot; /&gt; &lt;!--0. æ—¥å¿—æ ¼å¼å’Œé¢œè‰²æ¸²æŸ“ --&gt; &lt;!-- å½©è‰²æ—¥å¿—ä¾èµ–çš„æ¸²æŸ“ç±» --&gt; &lt;conversionRule conversionWord=&quot;clr&quot; converterClass=&quot;org.springframework.boot.logging.logback.ColorConverter&quot; /&gt; &lt;conversionRule conversionWord=&quot;wex&quot; converterClass=&quot;org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter&quot; /&gt; &lt;conversionRule conversionWord=&quot;wEx&quot; converterClass=&quot;org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter&quot; /&gt; &lt;!-- å½©è‰²æ—¥å¿—æ ¼å¼ --&gt; &lt;property name=&quot;CONSOLE_LOG_PATTERN&quot; value=&quot;$&#123;CONSOLE_LOG_PATTERN:-%clr(%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;)&#123;faint&#125; %clr($&#123;LOG_LEVEL_PATTERN:-%5p&#125;) %clr($&#123;PID:- &#125;)&#123;magenta&#125; %clr(---)&#123;faint&#125; %clr([%15.15t])&#123;faint&#125; %clr(%-40.40logger&#123;39&#125;)&#123;cyan&#125; %clr(:)&#123;faint&#125; %m%n$&#123;LOG_EXCEPTION_CONVERSION_WORD:-%wEx&#125;&#125;&quot;/&gt; &lt;!--1. è¾“å‡ºåˆ°æ§åˆ¶å°--&gt; &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt; &lt;!--æ­¤æ—¥å¿—appenderæ˜¯ä¸ºå¼€å‘ä½¿ç”¨ï¼Œåªé…ç½®æœ€åº•çº§åˆ«ï¼Œæ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çº§åˆ«æ˜¯å¤§äºæˆ–ç­‰äºæ­¤çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯--&gt; &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt; &lt;level&gt;debug&lt;/level&gt; &lt;/filter&gt; &lt;encoder&gt; &lt;Pattern&gt;$&#123;CONSOLE_LOG_PATTERN&#125;&lt;/Pattern&gt; &lt;!-- è®¾ç½®å­—ç¬¦é›† --&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;!--2. è¾“å‡ºåˆ°æ–‡æ¡£--&gt; &lt;!-- 2.1 levelä¸º DEBUG æ—¥å¿—ï¼Œæ—¶é—´æ»šåŠ¨è¾“å‡º --&gt; &lt;appender name=&quot;DEBUG_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt; &lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡æ¡£çš„è·¯å¾„åŠæ–‡æ¡£å --&gt; &lt;file&gt;$&#123;log.path&#125;/gsf_debug.log&lt;/file&gt; &lt;!--æ—¥å¿—æ–‡æ¡£è¾“å‡ºæ ¼å¼--&gt; &lt;encoder&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- è®¾ç½®å­—ç¬¦é›† --&gt; &lt;/encoder&gt; &lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt; &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt; &lt;!-- æ—¥å¿—å½’æ¡£ --&gt; &lt;fileNamePattern&gt;$&#123;log.path&#125;/gsf-debug-%d&#123;yyyy-MM-dd&#125;.%i.log&lt;/fileNamePattern&gt; &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt; &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt; &lt;/timeBasedFileNamingAndTriggeringPolicy&gt; &lt;!--æ—¥å¿—æ–‡æ¡£ä¿ç•™å¤©æ•°--&gt; &lt;maxHistory&gt;15&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;!-- æ­¤æ—¥å¿—æ–‡æ¡£åªè®°å½•debugçº§åˆ«çš„ --&gt; &lt;filter class=&quot;ch.qos.logback.classic.filter.LevelFilter&quot;&gt; &lt;level&gt;debug&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- 2.2 levelä¸º INFO æ—¥å¿—ï¼Œæ—¶é—´æ»šåŠ¨è¾“å‡º --&gt; &lt;appender name=&quot;INFO_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt; &lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡æ¡£çš„è·¯å¾„åŠæ–‡æ¡£å --&gt; &lt;file&gt;$&#123;log.path&#125;/gsf_info.log&lt;/file&gt; &lt;!--æ—¥å¿—æ–‡æ¡£è¾“å‡ºæ ¼å¼--&gt; &lt;encoder&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;/encoder&gt; &lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt; &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt; &lt;!-- æ¯å¤©æ—¥å¿—å½’æ¡£è·¯å¾„ä»¥åŠæ ¼å¼ --&gt; &lt;fileNamePattern&gt;$&#123;log.path&#125;/gsf-info-%d&#123;yyyy-MM-dd&#125;.%i.log&lt;/fileNamePattern&gt; &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt; &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt; &lt;/timeBasedFileNamingAndTriggeringPolicy&gt; &lt;!--æ—¥å¿—æ–‡æ¡£ä¿ç•™å¤©æ•°--&gt; &lt;maxHistory&gt;15&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;!-- æ­¤æ—¥å¿—æ–‡æ¡£åªè®°å½•infoçº§åˆ«çš„ --&gt; &lt;filter class=&quot;ch.qos.logback.classic.filter.LevelFilter&quot;&gt; &lt;level&gt;info&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- 2.3 levelä¸º WARN æ—¥å¿—ï¼Œæ—¶é—´æ»šåŠ¨è¾“å‡º --&gt; &lt;appender name=&quot;WARN_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt; &lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡æ¡£çš„è·¯å¾„åŠæ–‡æ¡£å --&gt; &lt;file&gt;$&#123;log.path&#125;/gsf_warn.log&lt;/file&gt; &lt;!--æ—¥å¿—æ–‡æ¡£è¾“å‡ºæ ¼å¼--&gt; &lt;encoder&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- æ­¤å¤„è®¾ç½®å­—ç¬¦é›† --&gt; &lt;/encoder&gt; &lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt; &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt; &lt;fileNamePattern&gt;$&#123;log.path&#125;/gsf-warn-%d&#123;yyyy-MM-dd&#125;.%i.log&lt;/fileNamePattern&gt; &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt; &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt; &lt;/timeBasedFileNamingAndTriggeringPolicy&gt; &lt;!--æ—¥å¿—æ–‡æ¡£ä¿ç•™å¤©æ•°--&gt; &lt;maxHistory&gt;15&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;!-- æ­¤æ—¥å¿—æ–‡æ¡£åªè®°å½•warnçº§åˆ«çš„ --&gt; &lt;filter class=&quot;ch.qos.logback.classic.filter.LevelFilter&quot;&gt; &lt;level&gt;warn&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- 2.4 levelä¸º ERROR æ—¥å¿—ï¼Œæ—¶é—´æ»šåŠ¨è¾“å‡º --&gt; &lt;appender name=&quot;ERROR_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt; &lt;!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡æ¡£çš„è·¯å¾„åŠæ–‡æ¡£å --&gt; &lt;file&gt;$&#123;log.path&#125;/gsf_error.log&lt;/file&gt; &lt;!--æ—¥å¿—æ–‡æ¡£è¾“å‡ºæ ¼å¼--&gt; &lt;encoder&gt; &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&lt;/pattern&gt; &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- æ­¤å¤„è®¾ç½®å­—ç¬¦é›† --&gt; &lt;/encoder&gt; &lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• --&gt; &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt; &lt;fileNamePattern&gt;$&#123;log.path&#125;/gsf-error-%d&#123;yyyy-MM-dd&#125;.%i.log&lt;/fileNamePattern&gt; &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt; &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt; &lt;/timeBasedFileNamingAndTriggeringPolicy&gt; &lt;!--æ—¥å¿—æ–‡æ¡£ä¿ç•™å¤©æ•°--&gt; &lt;maxHistory&gt;15&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;!-- æ­¤æ—¥å¿—æ–‡æ¡£åªè®°å½•ERRORçº§åˆ«çš„ --&gt; &lt;filter class=&quot;ch.qos.logback.classic.filter.LevelFilter&quot;&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- &lt;logger&gt;ç”¨æ¥è®¾ç½®æŸä¸€ä¸ªåŒ…æˆ–è€…å…·ä½“çš„æŸä¸€ä¸ªç±»çš„æ—¥å¿—æ‰“å°çº§åˆ«ã€ ä»¥åŠæŒ‡å®š&lt;appender&gt;ã€‚&lt;logger&gt;ä»…æœ‰ä¸€ä¸ªnameå±æ€§ï¼Œ ä¸€ä¸ªå¯é€‰çš„levelå’Œä¸€ä¸ªå¯é€‰çš„addtivityå±æ€§ã€‚ name:ç”¨æ¥æŒ‡å®šå—æ­¤loggerçº¦æŸçš„æŸä¸€ä¸ªåŒ…æˆ–è€…å…·ä½“çš„æŸä¸€ä¸ªç±»ã€‚ level:ç”¨æ¥è®¾ç½®æ‰“å°çº§åˆ«ï¼Œå¤§å°å†™æ— å…³ï¼šTRACE, DEBUG, INFO, WARN, ERROR, ALL å’Œ OFFï¼Œ è¿˜æœ‰ä¸€ä¸ªç‰¹ä¿—å€¼INHERITEDæˆ–è€…åŒä¹‰è¯NULLï¼Œä»£è¡¨å¼ºåˆ¶æ‰§è¡Œä¸Šçº§çš„çº§åˆ«ã€‚ å¦‚æœæœªè®¾ç½®æ­¤å±æ€§ï¼Œé‚£ä¹ˆå½“å‰loggerå°†ä¼šç»§æ‰¿ä¸Šçº§çš„çº§åˆ«ã€‚ addtivity:æ˜¯å¦å‘ä¸Šçº§loggerä¼ é€’æ‰“å°ä¿¡æ¯ã€‚é»˜è®¤æ˜¯trueã€‚ &lt;logger name=&quot;org.springframework.web&quot; level=&quot;info&quot;/&gt; &lt;logger name=&quot;org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor&quot; level=&quot;INFO&quot;/&gt; --&gt; &lt;!-- ä½¿ç”¨mybatisçš„æ—¶å€™ï¼Œsqlè¯­å¥æ˜¯debugä¸‹æ‰ä¼šæ‰“å°ï¼Œè€Œè¿™é‡Œæˆ‘ä»¬åªé…ç½®äº†infoï¼Œæ‰€ä»¥æƒ³è¦æŸ¥çœ‹sqlè¯­å¥çš„è¯ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ“ä½œï¼š ç¬¬ä¸€ç§æŠŠ&lt;root level=&quot;info&quot;&gt;æ”¹æˆ&lt;root level=&quot;DEBUG&quot;&gt;è¿™æ ·å°±ä¼šæ‰“å°sqlï¼Œä¸è¿‡è¿™æ ·æ—¥å¿—é‚£è¾¹ä¼šå‡ºç°å¾ˆå¤šå…¶ä»–æ¶ˆæ¯ ç¬¬äºŒç§å°±æ˜¯å•ç‹¬ç»™daoä¸‹ç›®å½•é…ç½®debugæ¨¡å¼ï¼Œä»£ç å¦‚ä¸‹ï¼Œè¿™æ ·é…ç½®sqlè¯­å¥ä¼šæ‰“å°ï¼Œå…¶ä»–è¿˜æ˜¯æ­£å¸¸infoçº§åˆ«ï¼š ã€logging.level.org.mybatis=debug logging.level.dao=debugã€‘ --&gt; &lt;!-- rootèŠ‚ç‚¹æ˜¯å¿…é€‰èŠ‚ç‚¹ï¼Œç”¨æ¥æŒ‡å®šæœ€åŸºç¡€çš„æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œåªæœ‰ä¸€ä¸ªlevelå±æ€§ level:ç”¨æ¥è®¾ç½®æ‰“å°çº§åˆ«ï¼Œå¤§å°å†™æ— å…³ï¼šTRACE, DEBUG, INFO, WARN, ERROR, ALL å’Œ OFFï¼Œ ä¸èƒ½è®¾ç½®ä¸ºINHERITEDæˆ–è€…åŒä¹‰è¯NULLã€‚é»˜è®¤æ˜¯DEBUG å¯ä»¥åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œæ ‡è¯†è¿™ä¸ªappenderå°†ä¼šæ·»åŠ åˆ°è¿™ä¸ªloggerã€‚ --&gt; &lt;!-- 4. æœ€ç»ˆçš„ç­–ç•¥ --&gt; &lt;!-- 4.1 å¼€å‘ç¯å¢ƒ:æ‰“å°æ§åˆ¶å°--&gt; &lt;springProfile name=&quot;dev&quot;&gt; &lt;logger name=&quot;com.sdcm.pmp&quot; level=&quot;debug&quot;/&gt; &lt;/springProfile&gt; &lt;root level=&quot;info&quot;&gt; &lt;appender-ref ref=&quot;CONSOLE&quot; /&gt; &lt;appender-ref ref=&quot;DEBUG_FILE&quot; /&gt; &lt;appender-ref ref=&quot;INFO_FILE&quot; /&gt; &lt;appender-ref ref=&quot;WARN_FILE&quot; /&gt; &lt;appender-ref ref=&quot;ERROR_FILE&quot; /&gt; &lt;/root&gt; &lt;!-- 4.2 ç”Ÿäº§ç¯å¢ƒ:è¾“å‡ºåˆ°æ–‡æ¡£ &lt;springProfile name=&quot;pro&quot;&gt; &lt;root level=&quot;info&quot;&gt; &lt;appender-ref ref=&quot;CONSOLE&quot; /&gt; &lt;appender-ref ref=&quot;DEBUG_FILE&quot; /&gt; &lt;appender-ref ref=&quot;INFO_FILE&quot; /&gt; &lt;appender-ref ref=&quot;ERROR_FILE&quot; /&gt; &lt;appender-ref ref=&quot;WARN_FILE&quot; /&gt; &lt;/root&gt; &lt;/springProfile&gt; --&gt;&lt;/configuration&gt;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Logback","slug":"Logback","permalink":"https://guoshunfa.com/tags/Logback/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆå®šæ—¶å™¨Quartz","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/20é›†æˆå®šæ—¶å™¨/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆå®šæ—¶å™¨Quartz","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.237Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆå®šæ—¶å™¨Quartz/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90%E5%AE%9A%E6%97%B6%E5%99%A8Quartz/","excerpt":"","text":"1. Quartz ä»‹ç» Quartzæ˜¯åŠŸèƒ½å¼ºå¤§çš„å¼€æºä½œä¸šè°ƒåº¦åº“ï¼Œå‡ ä¹å¯ä»¥é›†æˆåˆ°ä»»ä½•Javaåº”ç”¨ç¨‹åºä¸­-ä»æœ€å°çš„ç‹¬ç«‹åº”ç”¨ç¨‹åºåˆ°æœ€å¤§çš„ç”µå­å•†åŠ¡ç³»ç»Ÿã€‚Quartzå¯ç”¨äºåˆ›å»ºç®€å•æˆ–å¤æ‚çš„è®¡åˆ’ï¼Œä»¥æ‰§è¡Œæ•°ä»¥åè®¡ï¼Œç™¾è®¡ï¼Œä¸‡è®¡çš„å·¥ä½œã€‚ä»»åŠ¡æ ‡å‡†Javaç»„ä»¶çš„ä»»åŠ¡ï¼Œéƒ½å¯ä»¥æ‰§è¡Œæ‚¨å¯¹å…¶æ‰§è¡Œçš„ä»»ä½•ç¼–ç¨‹æ“ä½œã€‚Quartz ScheduleråŒ…å«è®¸å¤šä¼ä¸šçº§åŠŸèƒ½ï¼Œä¾‹å¦‚å¯¹JTAäº‹åŠ¡å’Œé›†ç¾¤çš„æ”¯æŒã€‚ Quartzæ˜¯å…è´¹ä½¿ç”¨çš„ï¼Œå¹¶æ ¹æ®Apache 2.0è®¸å¯è·å¾—è®¸å¯ã€‚ 2. é›†æˆ Quartzæ¶æ„æè¿°ï¼š Mysqlä½œä¸ºQuartzæŒä¹…åŒ–æ•°æ®åº“ã€‚ MongoDBä½œä¸ºä¸»æ•°æ®å­˜å‚¨æ•°æ®åº“ã€‚ SpringBootæ¡†æ¶ã€‚ æ”¯æŒæœåŠ¡ï¼š æ ¹æ®cronå®šæ—¶æ‰§è¡Œä»»åŠ¡ã€‚ ï¼ˆå¯æ‰©å±•ä¸€æ¬¡æ‰§è¡Œã€‚ï¼‰ 2.1. é¡¹ç›®æ¡†æ¶å‡†å¤‡2.1.1. æ·»åŠ mavenåº“12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;!-- lombok --&gt;&lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!-- quartz --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt; &lt;artifactId&gt;quartz&lt;/artifactId&gt; &lt;version&gt;2.2.3&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt; &lt;artifactId&gt;quartz-jobs&lt;/artifactId&gt; &lt;version&gt;2.2.3&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!-- Spring Boot webå¯åŠ¨å™¨ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!-- Mysql --&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!-- MongoDB --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;&lt;/dependency&gt; 2.1.2. æ‰§è¡Œ Mysql sqlæ–‡ä»¶ jobè¿è¡Œæ—¶éœ€è¦çš„æ–‡ä»¶ï¼Œä¸»è¦ä½œç”¨æ˜¯æŒä¹…åŒ–ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169## Quartz seems to work best with the driver mm.mysql-2.0.7-bin.jar## PLEASE consider using mysql with innodb tables to avoid locking issues## In your Quartz properties file, you&#x27;ll need to set# org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate#DROP TABLE IF EXISTS QRTZ_FIRED_TRIGGERS;DROP TABLE IF EXISTS QRTZ_PAUSED_TRIGGER_GRPS;DROP TABLE IF EXISTS QRTZ_SCHEDULER_STATE;DROP TABLE IF EXISTS QRTZ_LOCKS;DROP TABLE IF EXISTS QRTZ_SIMPLE_TRIGGERS;DROP TABLE IF EXISTS QRTZ_SIMPROP_TRIGGERS;DROP TABLE IF EXISTS QRTZ_CRON_TRIGGERS;DROP TABLE IF EXISTS QRTZ_BLOB_TRIGGERS;DROP TABLE IF EXISTS QRTZ_TRIGGERS;DROP TABLE IF EXISTS QRTZ_JOB_DETAILS;DROP TABLE IF EXISTS QRTZ_CALENDARS;CREATE TABLE QRTZ_JOB_DETAILS ( SCHED_NAME VARCHAR(120) NOT NULL, JOB_NAME VARCHAR(200) NOT NULL, JOB_GROUP VARCHAR(200) NOT NULL, DESCRIPTION VARCHAR(250) NULL, JOB_CLASS_NAME VARCHAR(250) NOT NULL, IS_DURABLE VARCHAR(1) NOT NULL, IS_NONCONCURRENT VARCHAR(1) NOT NULL, IS_UPDATE_DATA VARCHAR(1) NOT NULL, REQUESTS_RECOVERY VARCHAR(1) NOT NULL, JOB_DATA BLOB NULL, PRIMARY KEY (SCHED_NAME,JOB_NAME,JOB_GROUP));CREATE TABLE QRTZ_TRIGGERS ( SCHED_NAME VARCHAR(120) NOT NULL, TRIGGER_NAME VARCHAR(200) NOT NULL, TRIGGER_GROUP VARCHAR(200) NOT NULL, JOB_NAME VARCHAR(200) NOT NULL, JOB_GROUP VARCHAR(200) NOT NULL, DESCRIPTION VARCHAR(250) NULL, NEXT_FIRE_TIME BIGINT(13) NULL, PREV_FIRE_TIME BIGINT(13) NULL, PRIORITY INTEGER NULL, TRIGGER_STATE VARCHAR(16) NOT NULL, TRIGGER_TYPE VARCHAR(8) NOT NULL, START_TIME BIGINT(13) NOT NULL, END_TIME BIGINT(13) NULL, CALENDAR_NAME VARCHAR(200) NULL, MISFIRE_INSTR SMALLINT(2) NULL, JOB_DATA BLOB NULL, PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP), FOREIGN KEY (SCHED_NAME,JOB_NAME,JOB_GROUP) REFERENCES QRTZ_JOB_DETAILS(SCHED_NAME,JOB_NAME,JOB_GROUP));CREATE TABLE QRTZ_SIMPLE_TRIGGERS ( SCHED_NAME VARCHAR(120) NOT NULL, TRIGGER_NAME VARCHAR(200) NOT NULL, TRIGGER_GROUP VARCHAR(200) NOT NULL, REPEAT_COUNT BIGINT(7) NOT NULL, REPEAT_INTERVAL BIGINT(12) NOT NULL, TIMES_TRIGGERED BIGINT(10) NOT NULL, PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP), FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP) REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP));CREATE TABLE QRTZ_CRON_TRIGGERS ( SCHED_NAME VARCHAR(120) NOT NULL, TRIGGER_NAME VARCHAR(200) NOT NULL, TRIGGER_GROUP VARCHAR(200) NOT NULL, CRON_EXPRESSION VARCHAR(200) NOT NULL, TIME_ZONE_ID VARCHAR(80), PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP), FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP) REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP));CREATE TABLE QRTZ_SIMPROP_TRIGGERS ( SCHED_NAME VARCHAR(120) NOT NULL, TRIGGER_NAME VARCHAR(200) NOT NULL, TRIGGER_GROUP VARCHAR(200) NOT NULL, STR_PROP_1 VARCHAR(512) NULL, STR_PROP_2 VARCHAR(512) NULL, STR_PROP_3 VARCHAR(512) NULL, INT_PROP_1 INT NULL, INT_PROP_2 INT NULL, LONG_PROP_1 BIGINT NULL, LONG_PROP_2 BIGINT NULL, DEC_PROP_1 NUMERIC(13,4) NULL, DEC_PROP_2 NUMERIC(13,4) NULL, BOOL_PROP_1 VARCHAR(1) NULL, BOOL_PROP_2 VARCHAR(1) NULL, PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP), FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP) REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP));CREATE TABLE QRTZ_BLOB_TRIGGERS ( SCHED_NAME VARCHAR(120) NOT NULL, TRIGGER_NAME VARCHAR(200) NOT NULL, TRIGGER_GROUP VARCHAR(200) NOT NULL, BLOB_DATA BLOB NULL, PRIMARY KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP), FOREIGN KEY (SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP) REFERENCES QRTZ_TRIGGERS(SCHED_NAME,TRIGGER_NAME,TRIGGER_GROUP));CREATE TABLE QRTZ_CALENDARS ( SCHED_NAME VARCHAR(120) NOT NULL, CALENDAR_NAME VARCHAR(200) NOT NULL, CALENDAR BLOB NOT NULL, PRIMARY KEY (SCHED_NAME,CALENDAR_NAME));CREATE TABLE QRTZ_PAUSED_TRIGGER_GRPS ( SCHED_NAME VARCHAR(120) NOT NULL, TRIGGER_GROUP VARCHAR(200) NOT NULL, PRIMARY KEY (SCHED_NAME,TRIGGER_GROUP));CREATE TABLE QRTZ_FIRED_TRIGGERS ( SCHED_NAME VARCHAR(120) NOT NULL, ENTRY_ID VARCHAR(95) NOT NULL, TRIGGER_NAME VARCHAR(200) NOT NULL, TRIGGER_GROUP VARCHAR(200) NOT NULL, INSTANCE_NAME VARCHAR(200) NOT NULL, FIRED_TIME BIGINT(13) NOT NULL, SCHED_TIME BIGINT(13) NOT NULL, PRIORITY INTEGER NOT NULL, STATE VARCHAR(16) NOT NULL, JOB_NAME VARCHAR(200) NULL, JOB_GROUP VARCHAR(200) NULL, IS_NONCONCURRENT VARCHAR(1) NULL, REQUESTS_RECOVERY VARCHAR(1) NULL, PRIMARY KEY (SCHED_NAME,ENTRY_ID));CREATE TABLE QRTZ_SCHEDULER_STATE ( SCHED_NAME VARCHAR(120) NOT NULL, INSTANCE_NAME VARCHAR(200) NOT NULL, LAST_CHECKIN_TIME BIGINT(13) NOT NULL, CHECKIN_INTERVAL BIGINT(13) NOT NULL, PRIMARY KEY (SCHED_NAME,INSTANCE_NAME));CREATE TABLE QRTZ_LOCKS ( SCHED_NAME VARCHAR(120) NOT NULL, LOCK_NAME VARCHAR(40) NOT NULL, PRIMARY KEY (SCHED_NAME,LOCK_NAME));commit; 2.1.3. é¡¹ç›®é…ç½®1234567891011121314151617181920212223242526272829303132333435server.port=9992# MongoDBæ•°æ®åº“spring.data.mongodb.uri=mongodb://127.0.0.1:27017/gsf_mongodb_20210710#=======================================================#è°ƒåº¦å™¨é…ç½®#=======================================================org.quartz.scheduler.instanceId=AUTOorg.quartz.scheduler.instanceName=project1QuartzSchedulerorg.quartz.scheduler.rmi.export=falseorg.quartz.scheduler.rmi.proxy=false#=======================================================#çº¿ç¨‹æ± é…ç½®#=======================================================org.quartz.threadPool.class=org.quartz.simpl.SimpleThreadPoolorg.quartz.threadPool.threadCount=5org.quartz.threadPool.threadPriority=5org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread=true#=======================================================#JobStoreé…ç½®#=======================================================org.quartz.jobStore.misfireThreshold=60000org.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreTXorg.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.StdJDBCDelegateorg.quartz.jobStore.isClustered=falseorg.quartz.jobStore.tablePrefix=QRTZ_org.quartz.jobStore.dataSource=myDS#=======================================================#Mysqlæ•°æ®åº“é…ç½®#=======================================================org.quartz.dataSource.myDS.driver=com.mysql.jdbc.Driverorg.quartz.dataSource.myDS.URL=jdbc:mysql://localhost:3306/gsf_quartz_20210711?characterEncoding=utf-8org.quartz.dataSource.myDS.user=rootorg.quartz.dataSource.myDS.password=guoshunfaorg.quartz.dataSource.myDS.maxConnections=5 2.2. æœåŠ¡ä»£ç 2.2.1. JobæœåŠ¡ç»Ÿä¸€æ‰§è¡Œç±»1234567891011121314151617181920212223242526272829303132333435363738394041424344import cn.hutool.extra.spring.SpringUtil;import com.gsf.job.entity.JobDataMap;import lombok.Getter;import lombok.Setter;import org.quartz.JobDetail;import org.quartz.JobExecutionContext;import org.quartz.JobExecutionException;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.mongodb.core.MongoTemplate;import org.springframework.scheduling.quartz.QuartzJobBean;import java.lang.reflect.Method;//@DisallowConcurrentExecution // å¹¶å‘å¤„ç†public class JobAutoExe extends QuartzJobBean &#123; /** * ç”±quartzæ¡†æ¶è‡ªåŠ¨è®¾å€¼ï¼šjobDetail.getJobDataMap().put(&quot;jobId&quot;, bean.getId()) è¿™é‡Œé¢çš„å€¼éƒ½ä¼šè¢«è®¾ç½®åˆ°å®ä¾‹ä¸­ */ @Getter @Setter private String jobId; @Autowired private MongoTemplate mongoTemplate; @Override protected void executeInternal(JobExecutionContext jobExecutionContext) throws JobExecutionException &#123; JobDetail jobdetail = jobExecutionContext.getJobDetail(); JobDataMap jobDataMap = mongoTemplate.findById(jobId, JobDataMap.class); if (jobDataMap == null) &#123; return; &#125; Object service = SpringUtil.getBean(jobDataMap.getClassName()); try &#123; Method method = service.getClass().getMethod(jobDataMap.getMethodName()); method.invoke(service); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; System.out.println(&quot;jobç»Ÿä¸€æ‰§è¡Œç±»&quot;); &#125;&#125; 2.2.2. JobæœåŠ¡è°ƒç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118import com.gsf.job.entity.JobDataMap;import org.quartz.*;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.mongodb.core.MongoTemplate;import org.springframework.stereotype.Service;import org.springframework.util.StringUtils;import java.text.ParseException;@Servicepublic class QuartzService &#123; @Autowired private MongoTemplate mongoTemplate; @Autowired private Scheduler scheduler; /** * ä¿å­˜/ä¿®æ”¹job * @param bean */ public void saveJob(JobDataMap bean) &#123; try &#123; JobKey jobKey = new JobKey(bean.getJobName()); JobDetail jobDetail = scheduler.getJobDetail(jobKey); if (jobDetail == null) &#123; jobDetail = newJobDetail(bean); &#125; Trigger trigger = newCronTrigger(bean); if (trigger != null) &#123; scheduler.scheduleJob(jobDetail, trigger); &#125; cronUpdate(bean); &#125; catch (Exception e) &#123; e.printStackTrace(); throw new RuntimeException(e); &#125; &#125; /** * ç§»é™¤job * @param bean */ public void removeJob(JobDataMap bean) &#123; try &#123; TriggerKey key = new TriggerKey(bean.getJobName()); scheduler.pauseTrigger(key); scheduler.unscheduleJob(key); JobKey jobKey = new JobKey(bean.getJobName()); scheduler.deleteJob(jobKey); &#125; catch (SchedulerException e) &#123; throw new RuntimeException(e); &#125; &#125; public void pausedJob(JobDataMap bean) &#123; try &#123; if (bean.isPaused()) &#123; scheduler.pauseTrigger(new TriggerKey(bean.getJobName())); &#125; else &#123; scheduler.resumeTrigger(new TriggerKey(bean.getJobName())); &#125; &#125; catch (SchedulerException e) &#123; throw new RuntimeException(e); &#125; &#125; /** * cron è°ƒæ•´ * @param bean */ private void cronUpdate(JobDataMap bean) &#123; try &#123; JobKey jobKey = new JobKey(bean.getJobName()); JobDetail quartzJob = scheduler.getJobDetail(jobKey); if (quartzJob == null) &#123;//æ²¡æœ‰ä»»åŠ¡æ—¶åˆ›å»ºä»»åŠ¡å¹¶è°ƒåº¦ quartzJob = newJobDetail(bean); Trigger trigger = newCronTrigger(bean); if (trigger != null) &#123; scheduler.scheduleJob(quartzJob, trigger); &#125; &#125; else &#123;//é‡æ–°è°ƒåº¦ TriggerKey triggerKey = new TriggerKey(bean.getJobName()); Trigger trigger = newCronTrigger(bean); scheduler.rescheduleJob(triggerKey, trigger); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; private JobDetail newJobDetail(JobDataMap bean) throws InstantiationException, IllegalAccessException &#123; JobDetail jobDetail = JobBuilder.newJob(JobAutoExe.class) .withIdentity(bean.getJobName()).build(); jobDetail.getJobDataMap().put(&quot;jobId&quot;, bean.getId());//jobå®ä¾‹æ‰§è¡Œå‰ä¼šå°†è¿™äº›å±æ€§å€¼è®¾ç½®è¿›å®ä¾‹ä¸­ï¼Œè¿è¡Œå‰æ ¹æ®idæŸ¥è¯¢è¯¦æƒ… return jobDetail; &#125; /** * æ ¹æ®è°ƒåº¦è®¾ç½®å†³å®šä½¿ç”¨cronè¿˜æ˜¯æ¯«ç§’æ•° * * @param bean * @return * @throws ParseException */ private Trigger newCronTrigger(JobDataMap bean) throws ParseException &#123; if (StringUtils.isEmpty(bean.getCron())) &#123; return null; &#125; return TriggerBuilder.newTrigger().forJob(bean.getJobName()) .withIdentity(bean.getJobName()) .withSchedule(CronScheduleBuilder.cronSchedule(bean.getCron())) .build(); &#125;&#125; 2.2.3. Jobé€šç”¨å®ä½“ç±»123456789101112131415161718192021import com.gsf.common.base.BaseEntity;import io.swagger.annotations.ApiModelProperty;import lombok.Data;@Datapublic class JobDataMap extends BaseEntity &#123; @ApiModelProperty(&quot;jobåç§°&quot;) private String jobName; @ApiModelProperty(&quot;ç±»åç§°&quot;) private String className; @ApiModelProperty(&quot;æ–¹æ³•åç§°&quot;) private String methodName; @ApiModelProperty(&quot;cronè§„åˆ™&quot;) private String cron; @ApiModelProperty(&quot;ä»»åŠ¡çŠ¶æ€ï¼Œæ˜¯å¦æš‚åœã€‚é»˜è®¤ä¸æš‚åœ&quot;) private boolean paused = false;&#125; 2.2.4. JobæœåŠ¡è°ƒç”¨12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import com.gsf.job.entity.JobDataMap;import com.gsf.job.schedule.QuartzService;import com.mongodb.client.result.DeleteResult;import com.mongodb.client.result.UpdateResult;import io.swagger.annotations.ApiOperation;import io.swagger.annotations.ApiParam;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.mongodb.core.MongoTemplate;import org.springframework.data.mongodb.core.query.Criteria;import org.springframework.data.mongodb.core.query.Query;import org.springframework.data.mongodb.core.query.Update;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestBody;import org.springframework.web.bind.annotation.RestController;@RestControllerpublic class JobController &#123; @Autowired private MongoTemplate mongoTemplate; @Autowired private QuartzService quartzService; @PostMapping(&quot;/job/save&quot;) @ApiOperation(value = &quot;åˆ›å»º/ä¿®æ”¹jobä¿¡æ¯&quot;) public JobDataMap saveJob(@RequestBody JobDataMap jobData) &#123; JobDataMap data = mongoTemplate.save(jobData); quartzService.saveJob(data); return data; &#125; @GetMapping(&quot;/job/remove&quot;) @ApiOperation(value = &quot;åˆ é™¤job&quot;) public DeleteResult removeJob(@ApiParam(name = &quot;jobId&quot;, required = true) String jobId) &#123; DeleteResult deleteResult = mongoTemplate.remove(Query.query(Criteria.where(&quot;id&quot;).is(jobId)), JobDataMap.class); JobDataMap data = mongoTemplate.findById(jobId, JobDataMap.class); quartzService.removeJob(data); return deleteResult; &#125; @GetMapping(&quot;/job/paused&quot;) @ApiOperation(value = &quot;æš‚åœ/è¿è¡Œjob&quot;) public UpdateResult pausedJob( @ApiParam(name = &quot;jobId&quot;, required = true) String jobId , @ApiParam(name = &quot;paused&quot;, required = true) Boolean paused) &#123; UpdateResult updateResult = mongoTemplate.updateFirst(Query.query(Criteria.where(&quot;id&quot;).is(jobId)), Update.update(&quot;paused&quot;, paused), JobDataMap.class); JobDataMap data = mongoTemplate.findById(jobId, JobDataMap.class); quartzService.pausedJob(data); return updateResult; &#125;&#125; 2.2.5. æµ‹è¯•123456789101112131415161718public class TestJob &#123; @Test public void saveJob() &#123; String url = &quot;http://127.0.0.1:9992/job/save&quot;; JobDataMap jobDataMap = new JobDataMap(); jobDataMap.setClassName(&quot;TestJob&quot;); jobDataMap.setJobName(&quot;æµ‹è¯•job&quot;); jobDataMap.setCron(&quot;*/5 * * * * ?&quot;); // æ¯éš”5ç§’æ‰§è¡Œä¸€æ¬¡ jobDataMap.setMethodName(&quot;doJob&quot;); jobDataMap.setPaused(true); String post = HttpUtil.post(url, JSONUtil.toJsonStr(jobDataMap)); System.out.println(post); &#125;&#125; 3. æå‡3.1. å¹¶å‘æ§åˆ¶ï¼ˆDisallowConcurrentExecutionæ³¨è§£ï¼‰â€‹ Quartzå®šæ—¶ä»»åŠ¡é»˜è®¤éƒ½æ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œä¸ä¼šç­‰å¾…ä¸Šä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œåªè¦é—´éš”æ—¶é—´åˆ°å°±ä¼šæ‰§è¡Œ, å¦‚æœå®šæ—¶ä»»æ‰§è¡Œå¤ªé•¿ï¼Œä¼šé•¿æ—¶é—´å ç”¨èµ„æºï¼Œå¯¼è‡´å…¶å®ƒä»»åŠ¡å µå¡ã€‚ â€‹ åœ¨Springä¸­è¿™æ—¶éœ€è¦è®¾ç½®concurrentçš„å€¼ä¸ºfalse, ç¦æ­¢å¹¶å‘æ‰§è¡Œã€‚ â€‹ &lt;property name=&quot;concurrent&quot; value=&quot;true&quot; /&gt;â€‹ å½“ä¸ä½¿ç”¨springçš„æ—¶å€™å°±éœ€è¦åœ¨Jobçš„å®ç°ç±»ä¸ŠåŠ @DisallowConcurrentExecutionçš„æ³¨é‡Š@DisallowConcurrentExecution ç¦æ­¢å¹¶å‘æ‰§è¡Œå¤šä¸ªç›¸åŒå®šä¹‰çš„JobDetail, è¿™ä¸ªæ³¨è§£æ˜¯åŠ åœ¨Jobç±»ä¸Šçš„, ä½†æ„æ€å¹¶ä¸æ˜¯ä¸èƒ½åŒæ—¶æ‰§è¡Œå¤šä¸ªJob, è€Œæ˜¯ä¸èƒ½å¹¶å‘æ‰§è¡ŒåŒä¸€ä¸ªJob Definition(ç”±JobDetailå®šä¹‰), ä½†æ˜¯å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä¸åŒçš„JobDetail, ä¸¾ä¾‹è¯´æ˜,æˆ‘ä»¬æœ‰ä¸€ä¸ªJobç±»,å«åšSayHelloJob, å¹¶åœ¨è¿™ä¸ªJobä¸ŠåŠ äº†è¿™ä¸ªæ³¨è§£, ç„¶ååœ¨è¿™ä¸ªJobä¸Šå®šä¹‰äº†å¾ˆå¤šä¸ªJobDetail, å¦‚sayHelloToJoeJobDetail, sayHelloToMikeJobDetail, é‚£ä¹ˆå½“schedulerå¯åŠ¨æ—¶, ä¸ä¼šå¹¶å‘æ‰§è¡Œå¤šä¸ªsayHelloToJoeJobDetailæˆ–è€…sayHelloToMikeJobDetail, ä½†å¯ä»¥åŒæ—¶æ‰§è¡ŒsayHelloToJoeJobDetailè·ŸsayHelloToMikeJobDetail @PersistJobDataAfterExecution åŒæ ·, ä¹Ÿæ˜¯åŠ åœ¨Jobä¸Š,è¡¨ç¤ºå½“æ­£å¸¸æ‰§è¡Œå®ŒJobå, JobDataMapä¸­çš„æ•°æ®åº”è¯¥è¢«æ”¹åŠ¨, ä»¥è¢«ä¸‹ä¸€æ¬¡è°ƒç”¨æ—¶ç”¨ã€‚å½“ä½¿ç”¨- - @PersistJobDataAfterExecution æ³¨è§£æ—¶, ä¸ºäº†é¿å…å¹¶å‘æ—¶, å­˜å‚¨æ•°æ®é€ æˆæ··ä¹±, å¼ºçƒˆå»ºè®®æŠŠ@DisallowConcurrentExecutionæ³¨è§£ä¹ŸåŠ ä¸Šã€‚ @DisallowConcurrentExecution æ­¤æ ‡è®°ç”¨åœ¨å®ç°Jobçš„ç±»ä¸Šé¢,æ„æ€æ˜¯ä¸å…è®¸å¹¶å‘æ‰§è¡Œ,æŒ‰ç…§æˆ‘ä¹‹å‰çš„ç†è§£æ˜¯ ä¸å…è®¸è°ƒåº¦æ¡†æ¶åœ¨åŒä¸€æ—¶åˆ»è°ƒç”¨Jobç±»ï¼Œåæ¥ç»è¿‡æµ‹è¯•å‘ç°å¹¶ä¸æ˜¯è¿™æ ·ï¼Œè€Œæ˜¯Job(ä»»åŠ¡)çš„æ‰§è¡Œæ—¶é—´[æ¯”å¦‚éœ€è¦10ç§’]å¤§äºä»»åŠ¡çš„æ—¶é—´é—´éš”[Intervalï¼ˆ5ç§’)],é‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹,è°ƒåº¦æ¡†æ¶ä¸ºäº†èƒ½è®© ä»»åŠ¡æŒ‰ç…§æˆ‘ä»¬é¢„å®šçš„æ—¶é—´é—´éš”æ‰§è¡Œ,ä¼šé©¬ä¸Šå¯ç”¨æ–°çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚å¦åˆ™çš„è¯ä¼šç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä»¥å å†é‡æ–°æ‰§è¡Œï¼ï¼ˆè¿™æ ·ä¼šå¯¼è‡´ä»»åŠ¡çš„æ‰§è¡Œä¸æ˜¯æŒ‰ç…§æˆ‘ä»¬é¢„å…ˆå®šä¹‰çš„æ—¶é—´é—´éš”æ‰§è¡Œï¼‰ æµ‹è¯•ä»£ç ï¼Œè¿™æ˜¯å®˜æ–¹æä¾›çš„ä¾‹å­ã€‚è®¾å®šçš„æ—¶é—´é—´éš”ä¸º3ç§’,ä½†jobæ‰§è¡Œæ—¶é—´æ˜¯5ç§’,è®¾ç½®@DisallowConcurrentExecutionä»¥åç¨‹åºä¼šç­‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä»¥åå†å»æ‰§è¡Œ,å¦åˆ™ä¼šåœ¨3ç§’æ—¶å†å¯ç”¨æ–°çš„çº¿ç¨‹æ‰§è¡Œ","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"quartz","slug":"quartz","permalink":"https://guoshunfa.com/tags/quartz/"},{"name":"spring-boot","slug":"spring-boot","permalink":"https://guoshunfa.com/tags/spring-boot/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆKafkaæ¶ˆæ¯é˜Ÿåˆ—","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/22é›†æˆæ¶ˆæ¯é˜Ÿåˆ—/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆKafkaæ¶ˆæ¯é˜Ÿåˆ—","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.238Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆKafkaæ¶ˆæ¯é˜Ÿåˆ—/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90Kafka%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/","excerpt":"","text":"1. SpringBoot é›†æˆ kafka ä¸‹é¢çš„ä¾‹å­æ˜¯ä¸€ä¸ªSpringBooté¡¹ç›®å¼•å…¥å¤šä¸ªKafkaæœåŠ¡ï¼Œå¦‚æœåªéœ€è¦å¼•å…¥ä¸€ä¸ªï¼Œåªéœ€è¦æœ‰ä¸€ä¸ªé…ç½®å°±å¥½ã€‚ 1.1. å¼•å…¥kafkaä¾èµ–12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt; &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt; &lt;version&gt;1.1.1.RELEASE&lt;/version&gt;&lt;/dependency&gt; 1.2. ä¿®æ”¹é…ç½®æ–‡ä»¶(application.yml)1234567891011121314spring: kafka: one: bootstrap-servers: IP:PORT consumer: group-id: YOUR_GROUP_ID enable-auto-commit: true .......å…¶ä»–å±æ€§ two: bootstrap-servers: IP:PORT consumer: group-id: YOUR_GROUP_ID enable-auto-commit: true .......å…¶ä»–å±æ€§ 1.3. Kafkaç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„é…ç½®é€šè¿‡@Configurationã€@EnableKafkaï¼Œå£°æ˜Configå¹¶ä¸”æ‰“å¼€KafkaTemplateèƒ½åŠ›ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253@EnableKafka@Configurationpublic class KafkaOneConfig &#123; @Value(&quot;$&#123;spring.kafka.one.bootstrap-servers&#125;&quot;) private String bootstrapServers; @Value(&quot;$&#123;spring.kafka.one.consumer.group-id&#125;&quot;) private String groupId; @Value(&quot;$&#123;spring.kafka.one.consumer.enable-auto-commit&#125;&quot;) private boolean enableAutoCommit; @Bean public KafkaTemplate&lt;String, String&gt; kafkaOneTemplate() &#123; return new KafkaTemplate&lt;&gt;(producerFactory()); &#125; @Bean KafkaListenerContainerFactory&lt;ConcurrentMessageListenerContainer&lt;Integer, String&gt;&gt; kafkaOneContainerFactory() &#123; ConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setConcurrency(3); factory.getContainerProperties().setPollTimeout(3000); return factory; &#125; private ProducerFactory&lt;String, String&gt; producerFactory() &#123; return new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs()); &#125; public ConsumerFactory&lt;Integer, String&gt; consumerFactory() &#123; return new DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs()); &#125; private Map&lt;String, Object&gt; producerConfigs() &#123; Map&lt;String, Object&gt; props = new HashMap&lt;&gt;(); props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers); props.put(ProducerConfig.RETRIES_CONFIG, 0); props.put(ProducerConfig.ACKS_CONFIG, &quot;1&quot;); // ä¸èƒ½å†™æˆ 1 props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class); props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class); return props; &#125; private Map&lt;String, Object&gt; consumerConfigs() &#123; Map&lt;String, Object&gt; props = new HashMap&lt;&gt;(); props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers); props.put(ConsumerConfig.GROUP_ID_CONFIG, groupId); props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, enableAutoCommit); props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); return props; &#125;&#125; 1.4. å¤šä¸ªkafkaåˆ™ç»§ç»­åŠ é…ç½®12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152@Configurationpublic class KafkaTwoConfig &#123; @Value(&quot;$&#123;spring.kafka.two.bootstrap-servers&#125;&quot;) private String bootstrapServers; @Value(&quot;$&#123;spring.kafka.two.consumer.group-id&#125;&quot;) private String groupId; @Value(&quot;$&#123;spring.kafka.two.consumer.enable-auto-commit&#125;&quot;) private boolean enableAutoCommit; @Bean public KafkaTemplate&lt;String, String&gt; kafkaTwoTemplate() &#123; return new KafkaTemplate&lt;&gt;(producerFactory()); &#125; @Bean KafkaListenerContainerFactory&lt;ConcurrentMessageListenerContainer&lt;Integer, String&gt;&gt; kafkaTwoContainerFactory() &#123; ConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setConcurrency(3); factory.getContainerProperties().setPollTimeout(3000); return factory; &#125; private ProducerFactory&lt;String, String&gt; producerFactory() &#123; return new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs()); &#125; public ConsumerFactory&lt;Integer, String&gt; consumerFactory() &#123; return new DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs()); &#125; private Map&lt;String, Object&gt; producerConfigs() &#123; Map&lt;String, Object&gt; props = new HashMap&lt;&gt;(); props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers); props.put(ProducerConfig.RETRIES_CONFIG, 0); props.put(ProducerConfig.ACKS_CONFIG, &quot;1&quot;); props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class); props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class); return props; &#125; private Map&lt;String, Object&gt; consumerConfigs() &#123; Map&lt;String, Object&gt; props = new HashMap&lt;&gt;(); props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers); props.put(ConsumerConfig.GROUP_ID_CONFIG, groupId); props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, enableAutoCommit); props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); return props; &#125;&#125; 1.5. Kafka æ¶ˆæ¯ç”Ÿäº§è€…123456789101112131415161718@Controllerpublic class TestController &#123; @Autowired private KafkaTemplate kafkaOneTemplate; @Autowired private KafkaTemplate kafkaTwoTemplate; @RequestMapping(&quot;/send&quot;) @ResponseBody public String send() &#123; final String TOPIC = &quot;TOPIC_1&quot;; kafkaOneTemplate.send(TOPIC, &quot;kafka one&quot;); kafkaTwoTemplate.send(TOPIC, &quot;kafka two&quot;); return &quot;success&quot;; &#125;&#125; 1.6. Kafka æ¶ˆæ¯æ¶ˆè´¹è€…123456789101112131415161718@Componentpublic class KafkaConsumer &#123; private static final Logger LOGGER = LoggerFactory.getLogger(KafkaConsumer.class); final String TOPIC = &quot;TOPIC_1&quot;; // containerFactoryçš„å€¼è¦ä¸é…ç½®ä¸­KafkaListenerContainerFactoryçš„Beanåç§°ç›¸åŒ @KafkaListener(topics = &#123;TOPIC&#125;, containerFactory = &quot;kafkaOneContainerFactory&quot;) public void listenerOne(ConsumerRecord&lt;?, ?&gt; record) &#123; LOGGER.info(&quot; kafka one æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š&#123;&#125;&quot;, record.value()); &#125; @KafkaListener(topics = &#123;TOPIC&#125;, containerFactory = &quot;kafkaTwoContainerFactory&quot;) public void listenerTwo(ConsumerRecord&lt;?, ?&gt; record) &#123; LOGGER.info(&quot; kafka two æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š&#123;&#125;&quot;, record.value()); &#125;&#125; è¿è¡Œç»“æœå¦‚ä¸‹ï¼š","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Kafka","slug":"Kafka","permalink":"https://guoshunfa.com/tags/Kafka/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆActiviti7 æ•´åˆ","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/23é›†æˆæµç¨‹å¼•æ“/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆActiviti7-æ•´åˆ","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.247Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆActiviti7-æ•´åˆ/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90Activiti7-%E6%95%B4%E5%90%88/","excerpt":"","text":"ä¸€ã€Activitiä¸Springæ•´åˆå¼€å‘1.1 Activitiä¸Springæ•´åˆçš„é…ç½®1)ã€åœ¨pom.xmlæ–‡ä»¶å¼•å…¥åæ ‡å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103&lt;properties&gt; &lt;slf4j.version&gt;1.6.6&lt;/slf4j.version&gt; &lt;log4j.version&gt;1.2.12&lt;/log4j.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-engine&lt;/artifactId&gt; &lt;version&gt;7.0.0.Beta1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-spring&lt;/artifactId&gt; &lt;version&gt;7.0.0.Beta1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-bpmn-model&lt;/artifactId&gt; &lt;version&gt;7.0.0.Beta1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-bpmn-converter&lt;/artifactId&gt; &lt;version&gt;7.0.0.Beta1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-json-converter&lt;/artifactId&gt; &lt;version&gt;7.0.0.Beta1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-bpmn-layout&lt;/artifactId&gt; &lt;version&gt;7.0.0.Beta1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti.cloud&lt;/groupId&gt; &lt;artifactId&gt;activiti-cloud-services-api&lt;/artifactId&gt; &lt;version&gt;7.0.0.Beta1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.5.4&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.40&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;5.0.7.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- log start --&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;$&#123;log4j.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt; &lt;version&gt;$&#123;slf4j.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; &lt;version&gt;$&#123;slf4j.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-nop&lt;/artifactId&gt; &lt;version&gt;$&#123;slf4j.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- log end --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.4.5&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;commons-dbcp&lt;/groupId&gt; &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt; &lt;version&gt;1.4&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;repositories&gt; &lt;repository&gt; &lt;id&gt;alfresco&lt;/id&gt; &lt;name&gt;Activiti Releases&lt;/name&gt; &lt;url&gt;https://artifacts.alfresco.com/nexus/content/repositories/activiti-releases/&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;/repository&gt;&lt;/repositories&gt; åœ¨Activitiä¸­æ ¸å¿ƒç±»çš„æ˜¯ProcessEngineæµç¨‹å¼•æ“ï¼Œä¸Springæ•´åˆå°±æ˜¯è®©Springæ¥ç®¡ç†ProcessEngine é€šè¿‡org.activiti.spring.SpringProcessEngineConfiguration ä¸Springæ•´åˆæ–¹å¼æ¥åˆ›å»ºProcessEngineå¯¹è±¡ã€‚ åˆ›å»ºspringä¸activitiçš„æ•´åˆé…ç½®æ–‡ä»¶ï¼šactiviti-spring.xmlï¼ˆåç§°ä¸å›ºå®šï¼‰ 2)ã€åˆ›å»ºactiviti-spring.xml1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt; &lt;!-- æ•°æ®æº --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/activiti&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;123456&quot;/&gt; &lt;property name=&quot;maxActive&quot; value=&quot;3&quot;/&gt; &lt;property name=&quot;maxIdle&quot; value=&quot;1&quot;/&gt; &lt;/bean&gt; &lt;!-- å·¥ä½œæµå¼•æ“é…ç½®bean --&gt; &lt;bean id=&quot;processEngineConfiguration&quot; class=&quot;org.activiti.spring.SpringProcessEngineConfiguration&quot;&gt; &lt;!-- æ•°æ®æº --&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;!-- ä½¿ç”¨springäº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;property name=&quot;transactionManager&quot; ref=&quot;transactionManager&quot;/&gt; &lt;!-- æ•°æ®åº“ç­–ç•¥ --&gt; &lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;drop-create&quot;/&gt; &lt;/bean&gt; &lt;!-- æµç¨‹å¼•æ“ --&gt; &lt;bean id=&quot;processEngine&quot; class=&quot;org.activiti.spring.ProcessEngineFactoryBean&quot;&gt; &lt;property name=&quot;processEngineConfiguration&quot; ref=&quot;processEngineConfiguration&quot;/&gt; &lt;/bean&gt; &lt;!-- èµ„æºæœåŠ¡service --&gt; &lt;bean id=&quot;repositoryService&quot; factory-bean=&quot;processEngine&quot; factory-method=&quot;getRepositoryService&quot;/&gt; &lt;!-- æµç¨‹è¿è¡Œservice --&gt; &lt;bean id=&quot;runtimeService&quot; factory-bean=&quot;processEngine&quot; factory-method=&quot;getRuntimeService&quot;/&gt; &lt;!-- ä»»åŠ¡ç®¡ç†service --&gt; &lt;bean id=&quot;taskService&quot; factory-bean=&quot;processEngine&quot; factory-method=&quot;getTaskService&quot;/&gt; &lt;!-- å†å²ç®¡ç†service --&gt; &lt;bean id=&quot;historyService&quot; factory-bean=&quot;processEngine&quot; factory-method=&quot;getHistoryService&quot;/&gt; &lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;/bean&gt; &lt;!-- é€šçŸ¥ --&gt; &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt; &lt;tx:attributes&gt; &lt;!-- ä¼ æ’­è¡Œä¸º --&gt; &lt;tx:method name=&quot;save*&quot; propagation=&quot;REQUIRED&quot;/&gt; &lt;tx:method name=&quot;insert*&quot; propagation=&quot;REQUIRED&quot;/&gt; &lt;tx:method name=&quot;delete*&quot; propagation=&quot;REQUIRED&quot;/&gt; &lt;tx:method name=&quot;update*&quot; propagation=&quot;REQUIRED&quot;/&gt; &lt;tx:method name=&quot;find*&quot; propagation=&quot;SUPPORTS&quot; read-only=&quot;true&quot;/&gt; &lt;tx:method name=&quot;get*&quot; propagation=&quot;SUPPORTS&quot; read-only=&quot;true&quot;/&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;!-- åˆ‡é¢ï¼Œæ ¹æ®å…·ä½“é¡¹ç›®ä¿®æ”¹åˆ‡ç‚¹é…ç½® &lt;aop:config proxy-target-class=&quot;true&quot;&gt; &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut=&quot;execution(*com.itheima.service.impl..(..))&quot;/&gt; &lt;/aop:config&gt;--&gt;&lt;/beans&gt; databaseSchemaUpdateçš„å–å€¼å†…å®¹ï¼š flaseï¼š é»˜è®¤å€¼ã€‚activitiåœ¨å¯åŠ¨æ—¶ï¼Œä¼šå¯¹æ¯”æ•°æ®åº“è¡¨ä¸­ä¿å­˜çš„ç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰è¡¨æˆ–è€…ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå°†æŠ›å‡ºå¼‚å¸¸ã€‚ï¼ˆç”Ÿäº§ç¯å¢ƒå¸¸ç”¨ï¼‰trueï¼š activitiä¼šå¯¹æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨è¿›è¡Œæ›´æ–°æ“ä½œã€‚å¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨åˆ›å»ºã€‚ï¼ˆå¼€å‘æ—¶å¸¸ç”¨ï¼‰create_dropï¼š åœ¨activitiå¯åŠ¨æ—¶åˆ›å»ºè¡¨ï¼Œåœ¨å…³é—­æ—¶åˆ é™¤è¡¨ï¼ˆå¿…é¡»æ‰‹åŠ¨å…³é—­å¼•æ“ï¼Œæ‰èƒ½åˆ é™¤è¡¨ï¼‰ã€‚ï¼ˆå•å…ƒæµ‹è¯•å¸¸ç”¨ï¼‰drop-createï¼š åœ¨activitiå¯åŠ¨æ—¶åˆ é™¤åŸæ¥çš„æ—§è¡¨ï¼Œç„¶ååœ¨åˆ›å»ºæ–°è¡¨ï¼ˆä¸éœ€è¦æ‰‹åŠ¨å…³é—­å¼•æ“ï¼‰ã€‚ 1.2 æµ‹è¯•Activitiä¸Springæ•´åˆ1ï¼‰ã€æµ‹è¯•ä»£ç 1234567891011121314/** æµ‹è¯•activitiä¸springæ•´åˆæ˜¯å¦æˆåŠŸ**/@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(locations = &quot;classpath:activiti-spring.xml&quot;) public class ActivitiTest &#123; @Autowired private RepositoryService repositoryService; @Test public void test01()&#123; System.out.println(&quot;éƒ¨ç½²å¯¹è±¡:&quot;+repositoryService); &#125; &#125; 2ï¼‰ã€æ‰§è¡Œæµç¨‹åˆ†æä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥åˆ†æActivitiä¸Springæ•´åˆåŠ è½½çš„è¿‡ç¨‹ã€‚ 1ã€åŠ è½½activiti-spring.xmlé…ç½®æ–‡ä»¶ 2ã€åŠ è½½SpringProcessEngineConfigurationå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å®ƒéœ€è¦ä¾èµ–æ³¨å…¥dataSourceå¯¹è±¡å’ŒtransactionManagerå¯¹è±¡ã€‚ 3ã€åŠ è½½ProcessEngineFactoryBeanå·¥å‚æ¥åˆ›å»ºProcessEngineå¯¹è±¡ï¼Œè€ŒProcessEngineFactoryBeanå·¥å‚åˆéœ€è¦ä¾èµ–æ³¨å…¥processEngineConfigurationå¯¹è±¡ã€‚ 4ã€processEngineå¯¹è±¡æ¥è´Ÿè´£åˆ›å»ºæˆ‘ä»¬çš„Serviceå¯¹è±¡ï¼Œä»è€Œç®€åŒ–Activitiçš„å¼€å‘è¿‡ç¨‹ã€‚ äºŒã€Activiti7ä¸SpringBootæ•´åˆå¼€å‘Activiti7å‘å¸ƒæ­£å¼ç‰ˆä¹‹åï¼Œå®ƒä¸SpringBoot2.xå·²ç»å®Œå…¨æ”¯æŒæ•´åˆå¼€å‘ã€‚ 2.1 SpringBootæ•´åˆActiviti7çš„é…ç½®ä¸ºäº†èƒ½å¤Ÿå®ç°SpringBootä¸Activiti7æ•´åˆå¼€å‘ï¼Œé¦–å…ˆæˆ‘ä»¬è¦å¼•å…¥ç›¸å…³çš„ä¾èµ–æ”¯æŒã€‚ åœ¨å·¥ç¨‹çš„pom.xmlæ–‡ä»¶ä¸­å¼•å…¥ç›¸å…³çš„ä¾èµ–ï¼Œå…¶ä¸­activitiçš„ä¾èµ–æ˜¯ï¼šactiviti-spring-boot-starterã€‚ å…·ä½“ä¾èµ–å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.0.RELEASE&lt;/version&gt;&lt;/parent&gt;&lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;7.0.0.Beta2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.29&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; é€šè¿‡è¯¥pom.xmlæ–‡ä»¶æ‰€å¯¼å…¥çš„åæ ‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°activiti7ä¸Springbootæ•´åˆã€‚ 2.2 SpringBootçš„application.ymlæ–‡ä»¶é…ç½®ä¸ºäº†èƒ½å¤Ÿå®ç°Activiti7ç”Ÿæˆçš„è¡¨æ”¾åˆ°Mysqlæ•°æ®åº“ä¸­ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶application.ymlä¸­æ·»åŠ ç›¸å…³çš„é…ç½® æ³¨æ„ï¼šactiviti7é»˜è®¤æ²¡æœ‰å¼€å¯æ•°æ®åº“å†å²è®°å½•ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®å¼€å¯ 12345678910111213141516171819202122spring: datasource: url: jdbc:mysql:///activiti?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT username: root password: 123456 driver-class-name: com.mysql.jdbc.Driver activiti: #1.flaseï¼šé»˜è®¤å€¼ã€‚activitiåœ¨å¯åŠ¨æ—¶ï¼Œå¯¹æ¯”æ•°æ®åº“è¡¨ä¸­ä¿å­˜çš„ç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰è¡¨æˆ–è€…ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå°†æŠ›å‡ºå¼‚å¸¸ #2.trueï¼š activitiä¼šå¯¹æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨è¿›è¡Œæ›´æ–°æ“ä½œã€‚å¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨åˆ›å»º #3.create_dropï¼š åœ¨activitiå¯åŠ¨æ—¶åˆ›å»ºè¡¨ï¼Œåœ¨å…³é—­æ—¶åˆ é™¤è¡¨ï¼ˆå¿…é¡»æ‰‹åŠ¨å…³é—­å¼•æ“ï¼Œæ‰èƒ½åˆ é™¤è¡¨ï¼‰ #4.drop-createï¼š åœ¨activitiå¯åŠ¨æ—¶åˆ é™¤åŸæ¥çš„æ—§è¡¨ï¼Œç„¶ååœ¨åˆ›å»ºæ–°è¡¨ï¼ˆä¸éœ€è¦æ‰‹åŠ¨å…³é—­å¼•æ“ï¼‰ database-schema-update: true #æ£€æµ‹å†å²è¡¨æ˜¯å¦å­˜åœ¨ activiti7é»˜è®¤æ²¡æœ‰å¼€å¯æ•°æ®åº“å†å²è®°å½• å¯åŠ¨æ•°æ®åº“å†å²è®°å½• db-history-used: true #è®°å½•å†å²ç­‰çº§ å¯é…ç½®çš„å†å²çº§åˆ«æœ‰none, activity, audit, full #noneï¼šä¸ä¿å­˜ä»»ä½•çš„å†å²æ•°æ®ï¼Œå› æ­¤ï¼Œåœ¨æµç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè¿™æ˜¯æœ€é«˜æ•ˆçš„ã€‚ #activityï¼šçº§åˆ«é«˜äºnoneï¼Œä¿å­˜æµç¨‹å®ä¾‹ä¸æµç¨‹è¡Œä¸ºï¼Œå…¶ä»–æ•°æ®ä¸ä¿å­˜ã€‚ #auditï¼šé™¤activityçº§åˆ«ä¼šä¿å­˜çš„æ•°æ®å¤–ï¼Œè¿˜ä¼šä¿å­˜å…¨éƒ¨çš„æµç¨‹ä»»åŠ¡åŠå…¶å±æ€§ã€‚auditä¸ºhistoryçš„é»˜è®¤å€¼ã€‚ #fullï¼šä¿å­˜å†å²æ•°æ®çš„æœ€é«˜çº§åˆ«ï¼Œé™¤äº†ä¼šä¿å­˜auditçº§åˆ«çš„æ•°æ®å¤–ï¼Œè¿˜ä¼šä¿å­˜å…¶ä»–å…¨éƒ¨æµç¨‹ç›¸å…³çš„ç»†èŠ‚æ•°æ®ï¼ŒåŒ…æ‹¬ä¸€äº›æµç¨‹å‚æ•°ç­‰ã€‚ history-level: full #æ ¡éªŒæµç¨‹æ–‡ä»¶ï¼Œé»˜è®¤æ ¡éªŒresourcesä¸‹çš„processesæ–‡ä»¶å¤¹é‡Œçš„æµç¨‹æ–‡ä»¶ check-process-definitions: false 2.3 ç¼–å†™å¯åŠ¨ç±»123456789101112package com.itheima;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@SpringBootApplicationpublic class ActApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ActApplication.class,args); &#125;&#125; 2.4 æ·»åŠ SpringSecurityå®‰å…¨æ¡†æ¶æ•´åˆé…ç½®å› ä¸ºActiviti7ä¸SpringBootæ•´åˆåï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé›†æˆäº†SpringSecurityå®‰å…¨æ¡†æ¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±è¦å»å‡†å¤‡SpringSecurityæ•´åˆè¿›æ¥çš„ç›¸å…³ç”¨æˆ·æƒé™é…ç½®ä¿¡æ¯ã€‚ SpringBootçš„ä¾èµ–åŒ…å·²ç»å°†SpringSecurityçš„ä¾èµ–åŒ…ä¹Ÿæ·»åŠ è¿›é¡¹ç›®ä¸­ã€‚ 2.4.1 æ·»åŠ SecurityUtilç±»ä¸ºäº†èƒ½å¤Ÿå¿«é€Ÿå®ç°SpringSecurityå®‰å…¨æ¡†æ¶çš„é…ç½®ï¼Œæ‰€æ·»åŠ çš„ä¸€ä¸ªç»„ä»¶ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package com.itheima.utils;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.security.core.Authentication;import org.springframework.security.core.GrantedAuthority;import org.springframework.security.core.context.SecurityContextHolder;import org.springframework.security.core.context.SecurityContextImpl;import org.springframework.security.core.userdetails.UserDetails;import org.springframework.security.core.userdetails.UserDetailsService;import org.springframework.stereotype.Component;import java.util.Collection;@Componentpublic class SecurityUtil &#123; private Logger logger = LoggerFactory.getLogger(SecurityUtil.class); @Autowired @Qualifier(&quot;myUserDetailsService&quot;) private UserDetailsService userDetailsService; public void logInAs(String username) &#123; UserDetails user = userDetailsService.loadUserByUsername(username); if (user == null) &#123; throw new IllegalStateException(&quot;User &quot; + username + &quot; doesn&#x27;t exist, please provide a valid user&quot;); &#125; logger.info(&quot;&gt; Logged in as: &quot; + username); SecurityContextHolder.setContext( new SecurityContextImpl( new Authentication() &#123; @Override public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() &#123; return user.getAuthorities(); &#125; @Override public Object getCredentials() &#123; return user.getPassword(); &#125; @Override public Object getDetails() &#123; return user; &#125; @Override public Object getPrincipal() &#123; return user; &#125; @Override public boolean isAuthenticated() &#123; return true; &#125; @Override public void setAuthenticated(boolean isAuthenticated) throws IllegalArgumentException &#123; &#125; @Override public String getName() &#123; return user.getUsername(); &#125; &#125;)); org.activiti.engine.impl.identity.Authentication.setAuthenticatedUserId(username); &#125; &#125; è¿™ä¸ªç±»å¯ä»¥ä»æˆ‘ä»¬ä¸‹è½½çš„Activiti7å®˜æ–¹æä¾›çš„Exampleä¸­æ‰¾åˆ°ã€‚ 2.4.2 æ·»åŠ DemoApplicationConfigç±»åœ¨Activiti7å®˜æ–¹ä¸‹è½½çš„Exampleä¸­æ‰¾åˆ°DemoApplicationConfigç±»ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä¸ºäº†å®ç°SpringSecurityæ¡†æ¶çš„ç”¨æˆ·æƒé™çš„é…ç½®ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨ç”¨æˆ·æƒé™ä¿¡æ¯ã€‚ æœ¬æ¬¡é¡¹ç›®ä¸­åŸºæœ¬æ˜¯åœ¨æ–‡ä»¶ä¸­å®šä¹‰å‡ºæ¥çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯æ•°æ®åº“ä¸­æŸ¥è¯¢çš„ç”¨æˆ·æƒé™ä¿¡æ¯ã€‚ åé¢å¤„ç†æµç¨‹æ—¶ç”¨åˆ°çš„ä»»åŠ¡è´Ÿè´£äººï¼Œéœ€è¦æ·»åŠ åœ¨è¿™é‡Œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package com.itheima.config;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.security.core.authority.SimpleGrantedAuthority;import org.springframework.security.core.userdetails.User;import org.springframework.security.core.userdetails.UserDetailsService;import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;import org.springframework.security.crypto.password.PasswordEncoder;import org.springframework.security.provisioning.InMemoryUserDetailsManager;import java.util.Arrays;import java.util.List;import java.util.stream.Collectors;@Configurationpublic class DemoApplicationConfiguration &#123; private Logger logger = LoggerFactory.getLogger(DemoApplicationConfiguration.class); @Bean public UserDetailsService myUserDetailsService() &#123; InMemoryUserDetailsManager inMemoryUserDetailsManager = new InMemoryUserDetailsManager(); //è¿™é‡Œæ·»åŠ ç”¨æˆ·ï¼Œåé¢å¤„ç†æµç¨‹æ—¶ç”¨åˆ°çš„ä»»åŠ¡è´Ÿè´£äººï¼Œéœ€è¦æ·»åŠ åœ¨è¿™é‡Œ String[][] usersGroupsAndRoles = &#123; &#123;&quot;jack&quot;, &quot;password&quot;, &quot;ROLE_ACTIVITI_USER&quot;, &quot;GROUP_activitiTeam&quot;&#125;, &#123;&quot;rose&quot;, &quot;password&quot;, &quot;ROLE_ACTIVITI_USER&quot;, &quot;GROUP_activitiTeam&quot;&#125;, &#123;&quot;tom&quot;, &quot;password&quot;, &quot;ROLE_ACTIVITI_USER&quot;, &quot;GROUP_activitiTeam&quot;&#125;, &#123;&quot;other&quot;, &quot;password&quot;, &quot;ROLE_ACTIVITI_USER&quot;, &quot;GROUP_otherTeam&quot;&#125;, &#123;&quot;system&quot;, &quot;password&quot;, &quot;ROLE_ACTIVITI_USER&quot;&#125;, &#123;&quot;admin&quot;, &quot;password&quot;, &quot;ROLE_ACTIVITI_ADMIN&quot;&#125;, &#125;; for (String[] user : usersGroupsAndRoles) &#123; List&lt;String&gt; authoritiesStrings = Arrays.asList(Arrays.copyOfRange(user, 2, user.length)); logger.info(&quot;&gt; Registering new user: &quot; + user[0] + &quot; with the following Authorities[&quot; + authoritiesStrings + &quot;]&quot;); inMemoryUserDetailsManager.createUser(new User(user[0], passwordEncoder().encode(user[1]), authoritiesStrings.stream().map(s -&gt; new SimpleGrantedAuthority(s)).collect(Collectors.toList()))); &#125; return inMemoryUserDetailsManager; &#125; @Bean public PasswordEncoder passwordEncoder() &#123; return new BCryptPasswordEncoder(); &#125;&#125; 2.5 åˆ›å»ºBpmnæ–‡ä»¶Activiti7å¯ä»¥è‡ªåŠ¨éƒ¨ç½²æµç¨‹ï¼Œå‰ææ˜¯åœ¨resourcesç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•processesï¼Œç”¨æ¥æ”¾ç½®bpmnæ–‡ä»¶ã€‚ åˆ›å»ºä¸€ä¸ªç®€å•çš„Bpmnæµç¨‹æ–‡ä»¶ï¼Œå¹¶è®¾ç½®ä»»åŠ¡çš„ç”¨æˆ·ç»„Candidate Groupsã€‚ Candidate Groupsä¸­çš„å†…å®¹ä¸ä¸Šé¢DemoApplicationConfigurationç±»ä¸­å‡ºç°çš„ç”¨æˆ·ç»„åç§°è¦ä¿æŒä¸€è‡´ï¼Œå¯ä»¥å¡«å†™ï¼šactivitiTeam æˆ–è€… otherTeamã€‚ è¿™æ ·å¡«å†™çš„å¥½å¤„ï¼šå½“ä¸ç¡®å®šåˆ°åº•ç”±è°æ¥è´Ÿè´£å½“å‰ä»»åŠ¡çš„æ—¶å€™ï¼Œåªè¦æ˜¯Groupså†…çš„ç”¨æˆ·éƒ½å¯ä»¥æ‹¾å–è¿™ä¸ªä»»åŠ¡ 2.6 ä½¿ç”¨Junitæ–¹å¼æµ‹è¯•1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586package com.itheima.test;import com.itheima.utils.SecurityUtil;import org.activiti.api.process.model.ProcessInstance;import org.activiti.api.process.model.builders.ProcessPayloadBuilder;import org.activiti.api.process.runtime.ProcessRuntime;import org.activiti.api.runtime.shared.query.Page;import org.activiti.api.runtime.shared.query.Pageable;import org.activiti.api.task.model.Task;import org.activiti.api.task.model.builders.TaskPayloadBuilder;import org.activiti.api.task.runtime.TaskRuntime;import org.activiti.engine.repository.ProcessDefinition;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;@RunWith(SpringRunner.class)@SpringBootTest public class Actviti7DemoApplicationTests &#123; @Autowired private ProcessRuntime processRuntime; @Autowired private TaskRuntime taskRuntime; @Autowired private SecurityUtil securityUtil; @Test public void testActBoot()&#123; System.out.println(taskRuntime); &#125; /** * æŸ¥çœ‹æµç¨‹å®šä¹‰ */ @Test public void contextLoads() &#123; securityUtil.logInAs(&quot;system&quot;); Page&lt;org.activiti.api.process.model.ProcessDefinition&gt; processDefinitionPage = processRuntime.processDefinitions(Pageable.of(0, 10)); System.out.println(&quot;å¯ç”¨çš„æµç¨‹å®šä¹‰æ•°é‡ï¼š&quot; + processDefinitionPage.getTotalItems()); for (org.activiti.api.process.model.ProcessDefinition pd : processDefinitionPage.getContent()) &#123; System.out.println(&quot;æµç¨‹å®šä¹‰ï¼š&quot; + pd); &#125; &#125; /** * å¯åŠ¨æµç¨‹å®ä¾‹ */ @Test public void testStartProcess() &#123; securityUtil.logInAs(&quot;system&quot;); ProcessInstance pi = processRuntime.start(ProcessPayloadBuilder. start(). withProcessDefinitionKey(&quot;myProcess&quot;). build()); System.out.println(&quot;æµç¨‹å®ä¾‹IDï¼š&quot; + pi.getId()); &#125; /** **æŸ¥è¯¢ä»»åŠ¡ï¼Œå¹¶å®Œæˆè‡ªå·±çš„ä»»åŠ¡ **/ @Test public void testTask() &#123; securityUtil.logInAs(&quot;jack&quot;); Page&lt;Task&gt; taskPage=taskRuntime.tasks(Pageable.of(0,10)); if (taskPage.getTotalItems()&gt;0)&#123; for (Task task:taskPage.getContent())&#123; taskRuntime.claim(TaskPayloadBuilder. claim(). withTaskId(task.getId()).build()); System.out.println(&quot;ä»»åŠ¡ï¼š&quot;+task); taskRuntime.complete(TaskPayloadBuilder. complete(). withTaskId(task.getId()).build()); &#125; &#125; Page&lt;Task&gt; taskPage2=taskRuntime.tasks(Pageable.of*(0,10)); if (taskPage2.getTotalItems()&gt;0)&#123; System.out.println(&quot;ä»»åŠ¡ï¼š&quot;+taskPage2.getContent()); &#125; &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Activiti7","slug":"Activiti7","permalink":"https://guoshunfa.com/tags/Activiti7/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆActiviti7 åŸºç¡€","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/23é›†æˆæµç¨‹å¼•æ“/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆActiviti7-åŸºç¡€","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.238Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆActiviti7-åŸºç¡€/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90Activiti7-%E5%9F%BA%E7%A1%80/","excerpt":"","text":"Bç«™æ•™å­¦è§†é¢‘:https://www.bilibili.com/video/BV1H54y167gf?p=1&amp;vd_source=4f29ed23e5c29723fd1ba4fc53288e87 ä¸€ã€å·¥ä½œæµä»‹ç»1.1 æ¦‚å¿µå·¥ä½œæµ(Workflow)ï¼Œå°±æ˜¯é€šè¿‡è®¡ç®—æœºå¯¹ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–æ‰§è¡Œç®¡ç†ã€‚å®ƒä¸»è¦è§£å†³çš„æ˜¯â€œä½¿åœ¨å¤šä¸ªå‚ä¸è€…ä¹‹é—´æŒ‰ç…§æŸç§é¢„å®šä¹‰çš„è§„åˆ™è‡ªåŠ¨è¿›è¡Œä¼ é€’æ–‡æ¡£ã€ä¿¡æ¯æˆ–ä»»åŠ¡çš„è¿‡ç¨‹ï¼Œä»è€Œå®ç°æŸä¸ªé¢„æœŸçš„ä¸šåŠ¡ç›®æ ‡ï¼Œæˆ–è€…ä¿ƒä½¿æ­¤ç›®æ ‡çš„å®ç°â€ã€‚ 1.2 å·¥ä½œæµç³»ç»Ÿä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿä¸­å…·æœ‰å·¥ä½œæµçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬æŠŠå®ƒç§°ä¸ºå·¥ä½œæµç³»ç»Ÿï¼Œä¸€ä¸ªç³»ç»Ÿä¸­å·¥ä½œæµçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿå°±æ˜¯å¯¹ç³»ç»Ÿçš„ä¸šåŠ¡æµç¨‹è¿›è¡Œè‡ªåŠ¨åŒ–ç®¡ç†ï¼Œæ‰€ä»¥å·¥ä½œæµæ˜¯å»ºç«‹åœ¨ä¸šåŠ¡æµç¨‹çš„åŸºç¡€ä¸Šï¼Œæ‰€ä»¥ä¸€ä¸ªè½¯ä»¶çš„ç³»ç»Ÿæ ¸å¿ƒæ ¹æœ¬ä¸Šè¿˜æ˜¯ç³»ç»Ÿçš„ä¸šåŠ¡æµç¨‹ï¼Œå·¥ä½œæµåªæ˜¯ååŠ©è¿›è¡Œä¸šåŠ¡æµç¨‹ç®¡ç†ã€‚å³ä½¿æ²¡æœ‰å·¥ä½œæµä¸šåŠ¡ç³»ç»Ÿä¹Ÿå¯ä»¥å¼€å‘è¿è¡Œï¼Œåªä¸è¿‡æœ‰äº†å·¥ä½œæµå¯ä»¥æ›´å¥½çš„ç®¡ç†ä¸šåŠ¡æµç¨‹ï¼Œæé«˜ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚ 1.3 é€‚ç”¨è¡Œä¸šæ¶ˆè´¹å“è¡Œä¸šï¼Œåˆ¶é€ ä¸šï¼Œç”µä¿¡æœåŠ¡ä¸šï¼Œé“¶è¯é™©ç­‰é‡‘èæœåŠ¡ä¸šï¼Œç‰©æµæœåŠ¡ä¸šï¼Œç‰©ä¸šæœåŠ¡ä¸šï¼Œç‰©ä¸šç®¡ç†ï¼Œå¤§ä¸­å‹è¿›å‡ºå£è´¸æ˜“å…¬å¸ï¼Œæ”¿åºœäº‹ä¸šæœºæ„ï¼Œç ”ç©¶é™¢æ‰€åŠæ•™è‚²æœåŠ¡ä¸šç­‰ï¼Œç‰¹åˆ«æ˜¯å¤§çš„è·¨å›½ä¼ä¸šå’Œé›†å›¢å…¬å¸ã€‚ 1.4 å…·ä½“åº”ç”¨1ã€å…³é”®ä¸šåŠ¡æµç¨‹ï¼šè®¢å•ã€æŠ¥ä»·å¤„ç†ã€åˆåŒå®¡æ ¸ã€å®¢æˆ·ç”µè¯å¤„ç†ã€ä¾›åº”é“¾ç®¡ç†ç­‰ 2ã€è¡Œæ”¿ç®¡ç†ç±»:å‡ºå·®ç”³è¯·ã€åŠ ç­ç”³è¯·ã€è¯·å‡ç”³è¯·ã€ç”¨è½¦ç”³è¯·ã€å„ç§åŠå…¬ç”¨å“ç”³è¯·ã€è´­ä¹°ç”³è¯·ã€æ—¥æŠ¥å‘¨æŠ¥ç­‰å‡¡æ˜¯åŸæ¥æ‰‹å·¥æµè½¬å¤„ç†çš„è¡Œæ”¿è¡¨å•ã€‚ 3ã€äººäº‹ç®¡ç†ç±»ï¼šå‘˜å·¥åŸ¹è®­å®‰æ’ã€ç»©æ•ˆè€ƒè¯„ã€èŒä½å˜åŠ¨å¤„ç†ã€å‘˜å·¥æ¡£æ¡ˆä¿¡æ¯ç®¡ç†ç­‰ã€‚ 4ã€è´¢åŠ¡ç›¸å…³ç±»ï¼šä»˜æ¬¾è¯·æ±‚ã€åº”æ”¶æ¬¾å¤„ç†ã€æ—¥å¸¸æŠ¥é”€å¤„ç†ã€å‡ºå·®æŠ¥é”€ã€é¢„ç®—å’Œè®¡åˆ’ç”³è¯·ç­‰ã€‚ 5ã€å®¢æˆ·æœåŠ¡ç±»ï¼šå®¢æˆ·ä¿¡æ¯ç®¡ç†ã€å®¢æˆ·æŠ•è¯‰ã€è¯·æ±‚å¤„ç†ã€å”®åæœåŠ¡ç®¡ç†ç­‰ã€‚ 6ã€ç‰¹æ®ŠæœåŠ¡ç±»ï¼šISOç³»åˆ—å¯¹åº”æµç¨‹ã€è´¨é‡ç®¡ç†å¯¹åº”æµç¨‹ã€äº§å“æ•°æ®ä¿¡æ¯ç®¡ç†ã€è´¸æ˜“å…¬å¸æŠ¥å…³å¤„ç†ã€ç‰©æµå…¬å¸è´§ç‰©è·Ÿè¸ªå¤„ç†ç­‰å„ç§é€šè¿‡è¡¨å•é€æ­¥æ‰‹å·¥æµè½¬å®Œæˆçš„ä»»åŠ¡å‡å¯åº”ç”¨å·¥ä½œæµè½¯ä»¶è‡ªåŠ¨è§„èŒƒåœ°å®æ–½ã€‚ 1.5 å®ç°æ–¹å¼åœ¨æ²¡æœ‰ä¸“é—¨çš„å·¥ä½œæµå¼•æ“ä¹‹å‰ï¼Œæˆ‘ä»¬ä¹‹å‰ä¸ºäº†å®ç°æµç¨‹æ§åˆ¶ï¼Œé€šå¸¸çš„åšæ³•å°±æ˜¯é‡‡ç”¨çŠ¶æ€å­—æ®µçš„å€¼æ¥è·Ÿè¸ªæµç¨‹çš„å˜åŒ–æƒ…å†µã€‚è¿™æ ·ä¸ç”¨è§’è‰²çš„ç”¨æˆ·ï¼Œé€šè¿‡çŠ¶æ€å­—æ®µçš„å–å€¼æ¥å†³å®šè®°å½•æ˜¯å¦æ˜¾ç¤ºã€‚ é’ˆå¯¹æœ‰æƒé™å¯ä»¥æŸ¥çœ‹çš„è®°å½•ï¼Œå½“å‰ç”¨æˆ·æ ¹æ®è‡ªå·±çš„è§’è‰²æ¥å†³å®šå®¡æ‰¹æ˜¯å¦åˆæ ¼çš„æ“ä½œã€‚å¦‚æœåˆæ ¼å°†çŠ¶æ€å­—æ®µè®¾ç½®ä¸€ä¸ªå€¼ï¼Œæ¥ä»£è¡¨åˆæ ¼ï¼›å½“ç„¶å¦‚æœä¸åˆæ ¼ä¹Ÿéœ€è¦è®¾ç½®ä¸€ä¸ªå€¼æ¥ä»£è¡¨ä¸åˆæ ¼çš„æƒ…å†µã€‚ è¿™æ˜¯ä¸€ç§æœ€ä¸ºåŸå§‹çš„æ–¹å¼ã€‚é€šè¿‡çŠ¶æ€å­—æ®µè™½ç„¶åšåˆ°äº†æµç¨‹æ§åˆ¶ï¼Œä½†æ˜¯å½“æˆ‘ä»¬çš„æµç¨‹å‘ç”Ÿå˜æ›´çš„æ—¶å€™ï¼Œè¿™ç§æ–¹å¼æ‰€ç¼–å†™çš„ä»£ç ä¹Ÿè¦è¿›è¡Œè°ƒæ•´ã€‚ é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸“ä¸šçš„æ–¹å¼æ¥å®ç°å·¥ä½œæµçš„ç®¡ç†å‘¢ï¼Ÿå¹¶ä¸”å¯ä»¥åšåˆ°ä¸šåŠ¡æµç¨‹å˜åŒ–ä¹‹åï¼Œæˆ‘ä»¬çš„ç¨‹åºå¯ä»¥ä¸ç”¨æ”¹å˜ï¼Œå¦‚æœå¯ä»¥å®ç°è¿™æ ·çš„æ•ˆæœï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ä¸šåŠ¡ç³»ç»Ÿçš„é€‚åº”èƒ½åŠ›å°±å¾—åˆ°äº†æå¤§æå‡ã€‚ äºŒã€Activiti7æ¦‚è¿°2.1 ä»‹ç»Alfrescoè½¯ä»¶åœ¨2010å¹´5æœˆ17æ—¥å®£å¸ƒActivitiä¸šåŠ¡æµç¨‹ç®¡ç†ï¼ˆBPMï¼‰å¼€æºé¡¹ç›®çš„æ­£å¼å¯åŠ¨ï¼Œå…¶é¦–å¸­æ¶æ„å¸ˆç”±ä¸šåŠ¡æµç¨‹ç®¡ç†BPMçš„ä¸“å®¶ Tom Baeyensæ‹…ä»»ï¼ŒTom Baeyenså°±æ˜¯åŸæ¥jbpmçš„æ¶æ„å¸ˆï¼Œè€Œjbpmæ˜¯ä¸€ä¸ªéå¸¸æœ‰åçš„å·¥ä½œæµå¼•æ“ï¼Œå½“ç„¶activitiä¹Ÿæ˜¯ä¸€ä¸ªå·¥ä½œæµå¼•æ“ã€‚ Activitiæ˜¯ä¸€ä¸ªå·¥ä½œæµå¼•æ“ï¼Œ activitiå¯ä»¥å°†ä¸šåŠ¡ç³»ç»Ÿä¸­å¤æ‚çš„ä¸šåŠ¡æµç¨‹æŠ½å–å‡ºæ¥ï¼Œä½¿ç”¨ä¸“é—¨çš„å»ºæ¨¡è¯­è¨€BPMN2.0è¿›è¡Œå®šä¹‰ï¼Œä¸šåŠ¡æµç¨‹æŒ‰ç…§é¢„å…ˆå®šä¹‰çš„æµç¨‹è¿›è¡Œæ‰§è¡Œï¼Œå®ç°äº†ç³»ç»Ÿçš„æµç¨‹ç”±activitiè¿›è¡Œç®¡ç†ï¼Œå‡å°‘ä¸šåŠ¡ç³»ç»Ÿç”±äºæµç¨‹å˜æ›´è¿›è¡Œç³»ç»Ÿå‡çº§æ”¹é€ çš„å·¥ä½œé‡ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¥å£®æ€§ï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†ç³»ç»Ÿå¼€å‘ç»´æŠ¤æˆæœ¬ã€‚ å®˜æ–¹ç½‘ç«™ï¼šhttps://www.activiti.org/ ç»å†çš„ç‰ˆæœ¬: ç›®å‰æœ€æ–°ç‰ˆæœ¬ï¼šActiviti7.0.0.Beta 2.1.1 BPMBPMï¼ˆBusiness Process Managementï¼‰ï¼Œå³ä¸šåŠ¡æµç¨‹ç®¡ç†ï¼Œæ˜¯ä¸€ç§è§„èŒƒåŒ–çš„æ„é€ ç«¯åˆ°ç«¯çš„ä¸šåŠ¡æµç¨‹ï¼Œä»¥æŒç»­çš„æé«˜ç»„ç»‡ä¸šåŠ¡æ•ˆç‡ã€‚å¸¸è§å•†ä¸šç®¡ç†æ•™è‚²å¦‚EMBAã€MBAç­‰å‡å°†BPMåŒ…å«åœ¨å†…ã€‚ 2.1.2 BPMè½¯ä»¶BPMè½¯ä»¶å°±æ˜¯æ ¹æ®ä¼ä¸šä¸­ä¸šåŠ¡ç¯å¢ƒçš„å˜åŒ–ï¼Œæ¨è¿›äººä¸äººä¹‹é—´ã€äººä¸ç³»ç»Ÿä¹‹é—´ä»¥åŠç³»ç»Ÿä¸ç³»ç»Ÿä¹‹é—´çš„æ•´åˆåŠè°ƒæ•´çš„ç»è¥æ–¹æ³•ä¸è§£å†³æ–¹æ¡ˆçš„ITå·¥å…·ã€‚ é€šè¿‡BPMè½¯ä»¶å¯¹ä¼ä¸šå†…éƒ¨åŠå¤–éƒ¨çš„ä¸šåŠ¡æµç¨‹çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸè¿›è¡Œå»ºæ¨¡ã€è‡ªåŠ¨åŒ–ã€ç®¡ç†ç›‘æ§å’Œä¼˜åŒ–ï¼Œä½¿ä¼ä¸šæˆæœ¬é™ä½ï¼Œåˆ©æ¶¦å¾—ä»¥å¤§å¹…æå‡ã€‚ BPMè½¯ä»¶åœ¨ä¼ä¸šä¸­åº”ç”¨é¢†åŸŸå¹¿æ³›ï¼Œå‡¡æ˜¯æœ‰ä¸šåŠ¡æµç¨‹çš„åœ°æ–¹éƒ½å¯ä»¥BPMè½¯ä»¶è¿›è¡Œç®¡ç†ï¼Œæ¯”å¦‚ä¼ä¸šäººäº‹åŠå…¬ç®¡ç†ã€é‡‡è´­æµç¨‹ç®¡ç†ã€å…¬æ–‡å®¡æ‰¹æµç¨‹ç®¡ç†ã€è´¢åŠ¡ç®¡ç†ç­‰ã€‚ 2.1.3 BPMNBPMNï¼ˆBusiness Process Model AndNotationï¼‰- ä¸šåŠ¡æµç¨‹æ¨¡å‹å’Œç¬¦å· æ˜¯ç”±BPMIï¼ˆBusinessProcess Management Initiativeï¼‰å¼€å‘çš„ä¸€å¥—æ ‡å‡†çš„ä¸šåŠ¡æµç¨‹å»ºæ¨¡ç¬¦å·ï¼Œä½¿ç”¨BPMNæä¾›çš„ç¬¦å·å¯ä»¥åˆ›å»ºä¸šåŠ¡æµç¨‹ã€‚ 2004å¹´5æœˆå‘å¸ƒäº†BPMN1.0è§„èŒƒ.BPMIäº2005å¹´9æœˆå¹¶å…¥OMGï¼ˆThe Object Management Groupå¯¹è±¡ç®¡ç†ç»„ç»‡)ç»„ç»‡ã€‚OMGäº2011å¹´1æœˆå‘å¸ƒBPMN2.0çš„æœ€ç»ˆç‰ˆæœ¬ã€‚ å…·ä½“å‘å±•å†å²å¦‚ä¸‹: BPMN æ˜¯ç›®å‰è¢«å„ BPM å‚å•†å¹¿æ³›æ¥å—çš„ BPM æ ‡å‡†ã€‚Activiti å°±æ˜¯ä½¿ç”¨ BPMN 2.0 è¿›è¡Œæµç¨‹å»ºæ¨¡ã€æµç¨‹æ‰§è¡Œç®¡ç†ï¼Œå®ƒåŒ…æ‹¬å¾ˆå¤šçš„å»ºæ¨¡ç¬¦å·ï¼Œæ¯”å¦‚ï¼š Event ç”¨ä¸€ä¸ªåœ†åœˆè¡¨ç¤ºï¼Œå®ƒæ˜¯æµç¨‹ä¸­è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„äº‹æƒ…ã€‚ æ´»åŠ¨ç”¨åœ†è§’çŸ©å½¢è¡¨ç¤ºï¼Œä¸€ä¸ªæµç¨‹ç”±ä¸€ä¸ªæ´»åŠ¨æˆ–å¤šä¸ªæ´»åŠ¨ç»„æˆ Bpmnå›¾å½¢å…¶å®æ˜¯é€šè¿‡xmlè¡¨ç¤ºä¸šåŠ¡æµç¨‹ï¼Œä¸Šè¾¹çš„.bpmnæ–‡ä»¶ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;definitions xmlns=&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:activiti=&quot;http://activiti.org/bpmn&quot; xmlns:bpmndi=&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot; xmlns:omgdc=&quot;http://www.omg.org/spec/DD/20100524/DC&quot; xmlns:omgdi=&quot;http://www.omg.org/spec/DD/20100524/DI&quot; typeLanguage=&quot;http://www.w3.org/2001/XMLSchema&quot; expressionLanguage=&quot;http://www.w3.org/1999/XPath&quot; targetNamespace=&quot;http://www.activiti.org/test&quot;&gt; &lt;process id=&quot;myProcess&quot; name=&quot;My process&quot; isExecutable=&quot;true&quot;&gt; &lt;startEvent id=&quot;startevent1&quot; name=&quot;Start&quot;&gt;&lt;/startEvent&gt; &lt;userTask id=&quot;usertask1&quot; name=&quot;åˆ›å»ºè¯·å‡å•&quot;&gt;&lt;/userTask&gt; &lt;sequenceFlow id=&quot;flow1&quot; sourceRef=&quot;startevent1&quot; targetRef=&quot;usertask1&quot;&gt;&lt;/sequenceFlow&gt; &lt;userTask id=&quot;usertask2&quot; name=&quot;éƒ¨é—¨ç»ç†å®¡æ ¸&quot;&gt;&lt;/userTask&gt; &lt;sequenceFlow id=&quot;flow2&quot; sourceRef=&quot;usertask1&quot; targetRef=&quot;usertask2&quot;&gt;&lt;/sequenceFlow&gt; &lt;userTask id=&quot;usertask3&quot; name=&quot;äººäº‹å¤æ ¸&quot;&gt;&lt;/userTask&gt; &lt;sequenceFlow id=&quot;flow3&quot; sourceRef=&quot;usertask2&quot; targetRef=&quot;usertask3&quot;&gt;&lt;/sequenceFlow&gt; &lt;endEvent id=&quot;endevent1&quot; name=&quot;End&quot;&gt;&lt;/endEvent&gt; &lt;sequenceFlow id=&quot;flow4&quot; sourceRef=&quot;usertask3&quot; targetRef=&quot;endevent1&quot;&gt;&lt;/sequenceFlow&gt; &lt;/process&gt; &lt;bpmndi:BPMNDiagram id=&quot;BPMNDiagram_myProcess&quot;&gt; &lt;bpmndi:BPMNPlane bpmnElement=&quot;myProcess&quot; id=&quot;BPMNPlane_myProcess&quot;&gt; &lt;bpmndi:BPMNShape bpmnElement=&quot;startevent1&quot; id=&quot;BPMNShape_startevent1&quot;&gt; &lt;omgdc:Bounds height=&quot;35.0&quot; width=&quot;35.0&quot; x=&quot;130.0&quot; y=&quot;160.0&quot;&gt;&lt;/omgdc:Bounds&gt; &lt;/bpmndi:BPMNShape&gt; &lt;bpmndi:BPMNShape bpmnElement=&quot;usertask1&quot; id=&quot;BPMNShape_usertask1&quot;&gt; &lt;omgdc:Bounds height=&quot;55.0&quot; width=&quot;105.0&quot; x=&quot;210.0&quot; y=&quot;150.0&quot;&gt;&lt;/omgdc:Bounds&gt; &lt;/bpmndi:BPMNShape&gt; &lt;bpmndi:BPMNShape bpmnElement=&quot;usertask2&quot; id=&quot;BPMNShape_usertask2&quot;&gt; &lt;omgdc:Bounds height=&quot;55.0&quot; width=&quot;105.0&quot; x=&quot;360.0&quot; y=&quot;150.0&quot;&gt;&lt;/omgdc:Bounds&gt; &lt;/bpmndi:BPMNShape&gt; &lt;bpmndi:BPMNShape bpmnElement=&quot;usertask3&quot; id=&quot;BPMNShape_usertask3&quot;&gt; &lt;omgdc:Bounds height=&quot;55.0&quot; width=&quot;105.0&quot; x=&quot;510.0&quot; y=&quot;150.0&quot;&gt;&lt;/omgdc:Bounds&gt; &lt;/bpmndi:BPMNShape&gt; &lt;bpmndi:BPMNShape bpmnElement=&quot;endevent1&quot; id=&quot;BPMNShape_endevent1&quot;&gt; &lt;omgdc:Bounds height=&quot;35.0&quot; width=&quot;35.0&quot; x=&quot;660.0&quot; y=&quot;160.0&quot;&gt;&lt;/omgdc:Bounds&gt; &lt;/bpmndi:BPMNShape&gt; &lt;bpmndi:BPMNEdge bpmnElement=&quot;flow1&quot; id=&quot;BPMNEdge_flow1&quot;&gt; &lt;omgdi:waypoint x=&quot;165.0&quot; y=&quot;177.0&quot;&gt;&lt;/omgdi:waypoint&gt; &lt;omgdi:waypoint x=&quot;210.0&quot; y=&quot;177.0&quot;&gt;&lt;/omgdi:waypoint&gt; &lt;/bpmndi:BPMNEdge&gt; &lt;bpmndi:BPMNEdge bpmnElement=&quot;flow2&quot; id=&quot;BPMNEdge_flow2&quot;&gt; &lt;omgdi:waypoint x=&quot;315.0&quot; y=&quot;177.0&quot;&gt;&lt;/omgdi:waypoint&gt; &lt;omgdi:waypoint x=&quot;360.0&quot; y=&quot;177.0&quot;&gt;&lt;/omgdi:waypoint&gt; &lt;/bpmndi:BPMNEdge&gt; &lt;bpmndi:BPMNEdge bpmnElement=&quot;flow3&quot; id=&quot;BPMNEdge_flow3&quot;&gt; &lt;omgdi:waypoint x=&quot;465.0&quot; y=&quot;177.0&quot;&gt;&lt;/omgdi:waypoint&gt; &lt;omgdi:waypoint x=&quot;510.0&quot; y=&quot;177.0&quot;&gt;&lt;/omgdi:waypoint&gt; &lt;/bpmndi:BPMNEdge&gt; &lt;bpmndi:BPMNEdge bpmnElement=&quot;flow4&quot; id=&quot;BPMNEdge_flow4&quot;&gt; &lt;omgdi:waypoint x=&quot;615.0&quot; y=&quot;177.0&quot;&gt;&lt;/omgdi:waypoint&gt; &lt;omgdi:waypoint x=&quot;660.0&quot; y=&quot;177.0&quot;&gt;&lt;/omgdi:waypoint&gt; &lt;/bpmndi:BPMNEdge&gt; &lt;/bpmndi:BPMNPlane&gt; &lt;/bpmndi:BPMNDiagram&gt;&lt;/definitions&gt; 2.2 ä½¿ç”¨æ­¥éª¤éƒ¨ç½²activitiActivitiæ˜¯ä¸€ä¸ªå·¥ä½œæµå¼•æ“ï¼ˆå…¶å®å°±æ˜¯ä¸€å †jaråŒ…APIï¼‰ï¼Œä¸šåŠ¡ç³»ç»Ÿè®¿é—®(æ“ä½œ)activitiçš„æ¥å£ï¼Œå°±å¯ä»¥æ–¹ä¾¿çš„æ“ä½œæµç¨‹ç›¸å…³æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠå·¥ä½œæµç¯å¢ƒä¸ä¸šåŠ¡ç³»ç»Ÿçš„ç¯å¢ƒé›†æˆåœ¨ä¸€èµ·ã€‚ æµç¨‹å®šä¹‰ä½¿ç”¨activitiæµç¨‹å»ºæ¨¡å·¥å…·(activity-designer)å®šä¹‰ä¸šåŠ¡æµç¨‹(.bpmnæ–‡ä»¶) ã€‚ .bpmnæ–‡ä»¶å°±æ˜¯ä¸šåŠ¡æµç¨‹å®šä¹‰æ–‡ä»¶ï¼Œé€šè¿‡xmlå®šä¹‰ä¸šåŠ¡æµç¨‹ã€‚ æµç¨‹å®šä¹‰éƒ¨ç½²activitiéƒ¨ç½²ä¸šåŠ¡æµç¨‹å®šä¹‰ï¼ˆ.bpmnæ–‡ä»¶ï¼‰ã€‚ ä½¿ç”¨activitiæä¾›çš„apiæŠŠæµç¨‹å®šä¹‰å†…å®¹å­˜å‚¨èµ·æ¥ï¼Œåœ¨Activitiæ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥æŸ¥è¯¢å®šä¹‰çš„å†…å®¹ Activitiæ‰§è¡ŒæŠŠæµç¨‹å®šä¹‰å†…å®¹å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹æµç¨‹å®ä¾‹ä¹Ÿå«ï¼šProcessInstance å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹è¡¨ç¤ºå¼€å§‹ä¸€æ¬¡ä¸šåŠ¡æµç¨‹çš„è¿è¡Œã€‚ åœ¨å‘˜å·¥è¯·å‡æµç¨‹å®šä¹‰éƒ¨ç½²å®Œæˆåï¼Œå¦‚æœå¼ ä¸‰è¦è¯·å‡å°±å¯ä»¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œå¦‚æœæå››è¦è¯·å‡ä¹Ÿå¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œä¸¤ä¸ªæµç¨‹çš„æ‰§è¡Œäº’ç›¸ä¸å½±å“ã€‚ ç”¨æˆ·æŸ¥è¯¢å¾…åŠä»»åŠ¡(Task)å› ä¸ºç°åœ¨ç³»ç»Ÿçš„ä¸šåŠ¡æµç¨‹å·²ç»äº¤ç»™activitiç®¡ç†ï¼Œé€šè¿‡activitiå°±å¯ä»¥æŸ¥è¯¢å½“å‰æµç¨‹æ‰§è¡Œåˆ°å“ªäº†ï¼Œå½“å‰ç”¨æˆ·éœ€è¦åŠç†ä»€ä¹ˆä»»åŠ¡äº†ï¼Œè¿™äº›activitiå¸®æˆ‘ä»¬ç®¡ç†äº†ï¼Œè€Œä¸éœ€è¦å¼€å‘äººå‘˜è‡ªå·±ç¼–å†™åœ¨sqlè¯­å¥æŸ¥è¯¢ã€‚ ç”¨æˆ·åŠç†ä»»åŠ¡ç”¨æˆ·æŸ¥è¯¢å¾…åŠä»»åŠ¡åï¼Œå°±å¯ä»¥åŠç†æŸä¸ªä»»åŠ¡ï¼Œå¦‚æœè¿™ä¸ªä»»åŠ¡åŠç†å®Œæˆè¿˜éœ€è¦å…¶å®ƒç”¨æˆ·åŠç†ï¼Œæ¯”å¦‚é‡‡è´­å•åˆ›å»ºåç”±éƒ¨é—¨ç»ç†å®¡æ ¸ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯ç”±activitiå¸®æˆ‘ä»¬å®Œæˆäº†ã€‚ æµç¨‹ç»“æŸå½“ä»»åŠ¡åŠç†å®Œæˆæ²¡æœ‰ä¸‹ä¸€ä¸ªä»»åŠ¡ç»“ç‚¹äº†ï¼Œè¿™ä¸ªæµç¨‹å®ä¾‹å°±å®Œæˆäº†ã€‚ ä¸‰ã€Activitiç¯å¢ƒ3.1 å¼€å‘ç¯å¢ƒJdk1.8æˆ–ä»¥ä¸Šç‰ˆæœ¬ Mysql 5åŠä»¥ä¸Šçš„ç‰ˆæœ¬ Tomcat8.5 IDEA æ³¨æ„ï¼šactivitiçš„æµç¨‹å®šä¹‰å·¥å…·æ’ä»¶å¯ä»¥å®‰è£…åœ¨IDEAä¸‹ï¼Œä¹Ÿå¯ä»¥å®‰è£…åœ¨Eclipseå·¥å…·ä¸‹ 3.2 Activitiç¯å¢ƒæˆ‘ä»¬ä½¿ç”¨ï¼šActiviti7.0.0.Beta1 é»˜è®¤æ”¯æŒspring5 3.2.1 ä¸‹è½½activiti7Activitiä¸‹è½½åœ°å€ï¼šhttp://activiti.org/download.html ï¼ŒMavençš„ä¾èµ–å¦‚ä¸‹ï¼š 1234567891011&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-dependencies&lt;/artifactId&gt; &lt;version&gt;7.0.0.Beta1&lt;/version&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;type&gt;pom&lt;/type&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt; 1) Databaseï¼š activitiè¿è¡Œéœ€è¦æœ‰æ•°æ®åº“çš„æ”¯æŒï¼Œæ”¯æŒçš„æ•°æ®åº“æœ‰ï¼šh2, mysql, oracle, postgres, mssql, db2ã€‚ 3.2.2 æµç¨‹è®¾è®¡å™¨IDEAä¸‹å®‰è£…åœ¨IDEAçš„Fileèœå•ä¸­æ‰¾åˆ°å­èœå•â€Settingsâ€,åé¢æˆ‘ä»¬å†é€‰æ‹©å·¦ä¾§çš„â€œpluginsâ€èœå•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥æœç´¢åˆ°actiBPMæ’ä»¶ï¼Œå®ƒå°±æ˜¯Activiti Designerçš„IDEAç‰ˆæœ¬ï¼Œæˆ‘ä»¬ç‚¹å‡»Installå®‰è£…ã€‚ å®‰è£…å¥½åï¼Œé¡µé¢å¦‚ä¸‹ï¼š æç¤ºéœ€è¦é‡å¯ideaï¼Œç‚¹å‡»é‡å¯ã€‚ é‡å¯å®Œæˆåï¼Œå†æ¬¡æ‰“å¼€Settings ä¸‹çš„ Pluginsï¼ˆæ’ä»¶åˆ—è¡¨ï¼‰ï¼Œç‚¹å‡»å³ä¾§çš„Installedï¼ˆå·²å®‰è£…çš„æ’ä»¶ï¼‰ï¼Œåœ¨åˆ—è¡¨ä¸­çœ‹åˆ°actiBPMï¼Œå°±è¯´æ˜å·²ç»å®‰è£…æˆåŠŸäº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åé¢çš„è¯¾ç¨‹é‡Œï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨è¿™ä¸ªæµç¨‹è®¾è®¡å™¨è¿›è¡ŒActivitiçš„æµç¨‹è®¾è®¡ã€‚ 3.3 Activitiçš„æ•°æ®åº“æ”¯æŒActiviti åœ¨è¿è¡Œæ—¶éœ€è¦æ•°æ®åº“çš„æ”¯æŒï¼Œä½¿ç”¨25å¼ è¡¨ï¼ŒæŠŠæµç¨‹å®šä¹‰èŠ‚ç‚¹å†…å®¹è¯»å–åˆ°æ•°æ®åº“è¡¨ä¸­ï¼Œä»¥ä¾›åç»­ä½¿ç”¨ã€‚ 3.3.1 Activiti æ”¯æŒçš„æ•°æ®åº“activiti æ”¯æŒçš„æ•°æ®åº“å’Œç‰ˆæœ¬å¦‚ä¸‹ï¼š æ•°æ®åº“ç±»å‹ ç‰ˆæœ¬ JDBCè¿æ¥ç¤ºä¾‹ è¯´æ˜ h2 1.3.168 jdbc:h2:tcp:&#x2F;&#x2F;localhost&#x2F;activiti é»˜è®¤é…ç½®çš„æ•°æ®åº“ mysql 5.1.21 jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;activiti?autoReconnect&#x3D;true ä½¿ç”¨ mysql-connector-java é©±åŠ¨æµ‹è¯• oracle 11.2.0.1.0 jdbc:oracle:thin:@localhost:1521:xe postgres 8.1 jdbc:postgresql:&#x2F;&#x2F;localhost:5432&#x2F;activiti db2 DB2 10.1 using db2jcc4 jdbc:db2:&#x2F;&#x2F;localhost:50000&#x2F;activiti mssql 2008 using sqljdbc4 jdbc:sqlserver:&#x2F;&#x2F;localhost:1433&#x2F;activiti 3.3.2 åœ¨MySQLç”Ÿæˆè¡¨3.3.2.1 åˆ›å»ºæ•°æ®åº“åˆ›å»º mysql æ•°æ®åº“ activiti ï¼ˆåå­—ä»»æ„ï¼‰ï¼š CREATE DATABASE activiti DEFAULT CHARACTER SET utf8; 3.3.2.2 ä½¿ç”¨javaä»£ç ç”Ÿæˆè¡¨1ï¼‰ åˆ›å»º java å·¥ç¨‹ä½¿ç”¨idea åˆ›å»º java çš„mavenå·¥ç¨‹ï¼Œå–åï¼šactiviti01ã€‚ 2ï¼‰ åŠ å…¥ maven ä¾èµ–çš„åæ ‡ï¼ˆjar åŒ…ï¼‰é¦–å…ˆéœ€è¦åœ¨ java å·¥ç¨‹ä¸­åŠ å…¥ ProcessEngine æ‰€éœ€è¦çš„ jar åŒ…ï¼ŒåŒ…æ‹¬ï¼š activiti-engine-7.0.0.beta1.jar activiti ä¾èµ–çš„ jar åŒ…ï¼š mybatisã€ alf4jã€ log4j ç­‰ activiti ä¾èµ–çš„ spring åŒ… mysqlæ•°æ®åº“é©±åŠ¨ ç¬¬ä¸‰æ–¹æ•°æ®è¿æ¥æ±  dbcp å•å…ƒæµ‹è¯• Junit-4.12.jar æˆ‘ä»¬ä½¿ç”¨ maven æ¥å®ç°é¡¹ç›®çš„æ„å»ºï¼Œæ‰€ä»¥åº”å½“å¯¼å…¥è¿™äº› jar æ‰€å¯¹åº”çš„åæ ‡åˆ° pom.xml æ–‡ä»¶ä¸­ã€‚ å®Œæ•´çš„ä¾èµ–å†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586&lt;properties&gt; &lt;slf4j.version&gt;1.6.6&lt;/slf4j.version&gt; &lt;log4j.version&gt;1.2.12&lt;/log4j.version&gt; &lt;activiti.version&gt;7.0.0.Beta1&lt;/activiti.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-engine&lt;/artifactId&gt; &lt;version&gt;$&#123;activiti.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-spring&lt;/artifactId&gt; &lt;version&gt;$&#123;activiti.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- bpmn æ¨¡å‹å¤„ç† --&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-bpmn-model&lt;/artifactId&gt; &lt;version&gt;$&#123;activiti.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- bpmn è½¬æ¢ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-bpmn-converter&lt;/artifactId&gt; &lt;version&gt;$&#123;activiti.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- bpmn jsonæ•°æ®è½¬æ¢ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-json-converter&lt;/artifactId&gt; &lt;version&gt;$&#123;activiti.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- bpmn å¸ƒå±€ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti&lt;/groupId&gt; &lt;artifactId&gt;activiti-bpmn-layout&lt;/artifactId&gt; &lt;version&gt;$&#123;activiti.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- activiti äº‘æ”¯æŒ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.activiti.cloud&lt;/groupId&gt; &lt;artifactId&gt;activiti-cloud-services-api&lt;/artifactId&gt; &lt;version&gt;$&#123;activiti.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- mysqlé©±åŠ¨ --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.40&lt;/version&gt; &lt;/dependency&gt; &lt;!-- mybatis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.4.5&lt;/version&gt; &lt;/dependency&gt; &lt;!-- é“¾æ¥æ±  --&gt; &lt;dependency&gt; &lt;groupId&gt;commons-dbcp&lt;/groupId&gt; &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt; &lt;version&gt;1.4&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt; &lt;!-- log start --&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;$&#123;log4j.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt; &lt;version&gt;$&#123;slf4j.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; &lt;version&gt;$&#123;slf4j.version&#125;&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 3ï¼‰ æ·»åŠ log4jæ—¥å¿—é…ç½®æˆ‘ä»¬ä½¿ç”¨log4jæ—¥å¿—åŒ…ï¼Œå¯ä»¥å¯¹æ—¥å¿—è¿›è¡Œé…ç½® åœ¨resources ä¸‹åˆ›å»ºlog4j.properties 123456789101112131415# Set root category priority to INFO and its only appender to CONSOLE.#log4j.rootCategory=INFO, CONSOLE debug info warn error fatallog4j.rootCategory=debug, CONSOLE, LOGFILE# Set the enterprise logger category to FATAL and its only appender to CONSOLE.log4j.logger.org.apache.axis.enterprise=FATAL, CONSOLE# CONSOLE is set to be a ConsoleAppender using a PatternLayout.log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppenderlog4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayoutlog4j.appender.CONSOLE.layout.ConversionPattern=%d&#123;ISO8601&#125; %-6r[%15.15t] %-5p %30.30c %x - %m\\n# LOGFILE is set to be a File appender using a PatternLayout.log4j.appender.LOGFILE=org.apache.log4j.FileAppenderlog4j.appender.LOGFILE.File=f:\\act\\activiti.loglog4j.appender.LOGFILE.Append=truelog4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayoutlog4j.appender.LOGFILE.layout.ConversionPattern=%d&#123;ISO8601&#125; %-6r[%15.15t] %-5p %30.30c %x - %m\\n 4ï¼‰ æ·»åŠ activitié…ç½®æ–‡ä»¶æˆ‘ä»¬ä½¿ç”¨activitiæä¾›çš„é»˜è®¤æ–¹å¼æ¥åˆ›å»ºmysqlçš„è¡¨ã€‚ é»˜è®¤æ–¹å¼çš„è¦æ±‚æ˜¯åœ¨ resources ä¸‹åˆ›å»º activiti.cfg.xml æ–‡ä»¶ï¼Œæ³¨æ„ï¼šé»˜è®¤æ–¹å¼ç›®å½•å’Œæ–‡ä»¶åä¸èƒ½ä¿®æ”¹ï¼Œå› ä¸ºactivitiçš„æºç ä¸­å·²ç»è®¾ç½®ï¼Œåˆ°å›ºå®šçš„ç›®å½•è¯»å–å›ºå®šæ–‡ä»¶åçš„æ–‡ä»¶ã€‚ 123456789101112&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;xmlns:context=&quot;http://www.springframework.org/schema/context&quot;xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsdhttp://www.springframework.org/schema/contexhttp://www.springframework.org/schema/context/spring-context.xsdhttp://www.springframework.org/schema/txhttp://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;&lt;/beans&gt; 5ï¼‰ åœ¨ activiti.cfg.xml ä¸­è¿›è¡Œé…ç½®é»˜è®¤æ–¹å¼è¦åœ¨åœ¨activiti.cfg.xmlä¸­beançš„åå­—å«processEngineConfigurationï¼Œåå­—ä¸å¯ä¿®æ”¹ åœ¨è¿™é‡Œæœ‰2ä¸­é…ç½®æ–¹å¼ï¼šä¸€ç§æ˜¯å•ç‹¬é…ç½®æ•°æ®æºï¼Œä¸€ç§æ˜¯ä¸å•ç‹¬é…ç½®æ•°æ®æº 1ã€ç›´æ¥é…ç½®processEngineConfigurationprocessEngineConfiguration ç”¨æ¥åˆ›å»º ProcessEngineï¼Œåœ¨åˆ›å»º ProcessEngine æ—¶ä¼šæ‰§è¡Œæ•°æ®åº“çš„æ“ä½œã€‚ 1234567891011121314151617181920212223&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsdhttp://www.springframework.org/schema/contexhttp://www.springframework.org/schema/context/spring-context.xsdhttp://www.springframework.org/schema/txhttp://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt; &lt;!-- é»˜è®¤idå¯¹åº”çš„å€¼ ä¸ºprocessEngineConfiguration --&gt; &lt;!-- processEngine Activitiçš„æµç¨‹å¼•æ“ --&gt; &lt;bean id=&quot;processEngineConfiguration&quot; class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt; &lt;property name=&quot;jdbcDriver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql:///activiti&quot;/&gt; &lt;property name=&quot;jdbcUsername&quot; value=&quot;root&quot;/&gt; &lt;property name=&quot;jdbcPassword&quot; value=&quot;123456&quot;/&gt; &lt;!-- activitiæ•°æ®åº“è¡¨å¤„ç†ç­–ç•¥ --&gt; &lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;true&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; 2ã€é…ç½®æ•°æ®æºåï¼Œåœ¨processEngineConfiguration å¼•ç”¨é¦–å…ˆé…ç½®æ•°æ®æº 123456789101112131415161718192021222324252627282930&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsdhttp://www.springframework.org/schema/contexhttp://www.springframework.org/schema/context/spring-context.xsdhttp://www.springframework.org/schema/txhttp://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt; &lt;!-- è¿™é‡Œå¯ä»¥ä½¿ç”¨ é“¾æ¥æ±  dbcp--&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql:///activiti&quot; /&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt; &lt;property name=&quot;password&quot; value=&quot;123456&quot; /&gt; &lt;property name=&quot;maxActive&quot; value=&quot;3&quot; /&gt; &lt;property name=&quot;maxIdle&quot; value=&quot;1&quot; /&gt; &lt;/bean&gt; &lt;bean id=&quot;processEngineConfiguration&quot; class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt; &lt;!-- å¼•ç”¨æ•°æ®æº ä¸Šé¢å·²ç»è®¾ç½®å¥½äº†--&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt; &lt;!-- activitiæ•°æ®åº“è¡¨å¤„ç†ç­–ç•¥ --&gt; &lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;true&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; 6ï¼‰ javaç±»ç¼–å†™ç¨‹åºç”Ÿæˆè¡¨åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±»ï¼Œè°ƒç”¨activitiçš„å·¥å…·ç±»ï¼Œç”Ÿæˆacitivtiéœ€è¦çš„æ•°æ®åº“è¡¨ã€‚ ç›´æ¥ä½¿ç”¨activitiæä¾›çš„å·¥å…·ç±»ProcessEnginesï¼Œä¼šé»˜è®¤è¯»å–classpathä¸‹çš„activiti.cfg.xmlæ–‡ä»¶ï¼Œè¯»å–å…¶ä¸­çš„æ•°æ®åº“é…ç½®ï¼Œåˆ›å»º ProcessEngineï¼Œåœ¨åˆ›å»ºProcessEngine æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºè¡¨ã€‚ ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718package com.itheima.activiti01.test;import org.activiti.engine.ProcessEngine;import org.activiti.engine.ProcessEngineConfiguration;import org.junit.Test;public class TestDemo &#123; /** * ç”Ÿæˆ activitiçš„æ•°æ®åº“è¡¨ */ @Test public void testCreateDbTable() &#123; //ä½¿ç”¨classpathä¸‹çš„activiti.cfg.xmlä¸­çš„é…ç½®åˆ›å»ºprocessEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); System.out.println(processEngine); &#125;&#125; è¯´æ˜ï¼š1ã€è¿è¡Œä»¥ä¸Šç¨‹åºæ®µå³å¯å®Œæˆ activiti è¡¨åˆ›å»ºï¼Œé€šè¿‡æ”¹å˜ activiti.cfg.xml ä¸­databaseSchemaUpdate å‚æ•°çš„å€¼æ‰§è¡Œä¸åŒçš„æ•°æ®è¡¨å¤„ç†ç­–ç•¥ã€‚2 ã€ ä¸Š è¾¹ çš„ æ–¹æ³• getDefaultProcessEngineæ–¹æ³•åœ¨æ‰§è¡Œæ—¶ï¼Œä»activiti.cfg.xml ä¸­æ‰¾å›ºå®šçš„åç§° processEngineConfiguration ã€‚ åœ¨æµ‹è¯•ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œideaçš„æ§åˆ¶å°ä¼šè¾“å‡ºæ—¥å¿—ï¼Œè¯´æ˜ç¨‹åºæ­£åœ¨åˆ›å»ºæ•°æ®è¡¨ï¼Œç±»ä¼¼å¦‚ä¸‹,æ³¨æ„çº¢çº¿å†…å®¹ï¼š æ‰§è¡Œå®Œæˆåæˆ‘ä»¬æŸ¥çœ‹æ•°æ®åº“ï¼Œ åˆ›å»ºäº† 25 å¼ è¡¨ï¼Œç»“æœå¦‚ä¸‹ï¼š åˆ°è¿™ï¼Œæˆ‘ä»¬å°±å®Œæˆactivitiè¿è¡Œéœ€è¦çš„æ•°æ®åº“å’Œè¡¨çš„åˆ›å»ºã€‚ 3.4 è¡¨ç»“æ„ä»‹ç»3.4.1 è¡¨çš„å‘½åè§„åˆ™å’Œä½œç”¨çœ‹åˆ°åˆšæ‰åˆ›å»ºçš„è¡¨ï¼Œæˆ‘ä»¬å‘ç°Activiti çš„è¡¨éƒ½ä»¥ ACT_ å¼€å¤´ã€‚ ç¬¬äºŒéƒ¨åˆ†æ˜¯è¡¨ç¤ºè¡¨çš„ç”¨é€”çš„ä¸¤ä¸ªå­—æ¯æ ‡è¯†ã€‚ ç”¨é€”ä¹Ÿå’ŒæœåŠ¡çš„ API å¯¹åº”ã€‚ACT_RE ï¼šâ€™REâ€™è¡¨ç¤º repositoryã€‚ è¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æº ï¼ˆå›¾ç‰‡ï¼Œè§„åˆ™ï¼Œç­‰ç­‰ï¼‰ã€‚ACT_RUï¼šâ€™RUâ€™è¡¨ç¤º runtimeã€‚ è¿™äº›è¿è¡Œæ—¶çš„è¡¨ï¼ŒåŒ…å«æµç¨‹å®ä¾‹ï¼Œä»»åŠ¡ï¼Œå˜é‡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œç­‰è¿è¡Œä¸­çš„æ•°æ®ã€‚ Activiti åªåœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œ åœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚ è¿™æ ·è¿è¡Œæ—¶è¡¨å¯ä»¥ä¸€ç›´å¾ˆå°é€Ÿåº¦å¾ˆå¿«ã€‚ACT_HIï¼šâ€™HIâ€™è¡¨ç¤º historyã€‚ è¿™äº›è¡¨åŒ…å«å†å²æ•°æ®ï¼Œæ¯”å¦‚å†å²æµç¨‹å®ä¾‹ï¼Œ å˜é‡ï¼Œä»»åŠ¡ç­‰ç­‰ã€‚ ACT_GE ï¼š GE è¡¨ç¤º generalã€‚ é€šç”¨æ•°æ®ï¼Œ ç”¨äºä¸åŒåœºæ™¯ä¸‹ 3.4.2 Activitiæ•°æ®è¡¨ä»‹ç» è¡¨åˆ†ç±» è¡¨å è§£é‡Š ä¸€èˆ¬æ•°æ® [ACT_GE_BYTEARRAY] é€šç”¨çš„æµç¨‹å®šä¹‰å’Œæµç¨‹èµ„æº [ACT_GE_PROPERTY] ç³»ç»Ÿç›¸å…³å±æ€§ æµç¨‹å†å²è®°å½• [ACT_HI_ACTINST] å†å²çš„æµç¨‹å®ä¾‹ [ACT_HI_ATTACHMENT] å†å²çš„æµç¨‹é™„ä»¶ [ACT_HI_COMMENT] å†å²çš„è¯´æ˜æ€§ä¿¡æ¯ [ACT_HI_DETAIL] å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯ [ACT_HI_IDENTITYLINK] å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³» [ACT_HI_PROCINST] å†å²çš„æµç¨‹å®ä¾‹ [ACT_HI_TASKINST] å†å²çš„ä»»åŠ¡å®ä¾‹ [ACT_HI_VARINST] å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯ æµç¨‹å®šä¹‰è¡¨ [ACT_RE_DEPLOYMENT] éƒ¨ç½²å•å…ƒä¿¡æ¯ [ACT_RE_MODEL] æ¨¡å‹ä¿¡æ¯ [ACT_RE_PROCDEF] å·²éƒ¨ç½²çš„æµç¨‹å®šä¹‰ è¿è¡Œå®ä¾‹è¡¨ [ACT_RU_EVENT_SUBSCR] è¿è¡Œæ—¶äº‹ä»¶ [ACT_RU_EXECUTION] è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ [ACT_RU_IDENTITYLINK] è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ï¼Œå­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯ [ACT_RU_JOB] è¿è¡Œæ—¶ä½œä¸š [ACT_RU_TASK] è¿è¡Œæ—¶ä»»åŠ¡ [ACT_RU_VARIABLE] è¿è¡Œæ—¶å˜é‡è¡¨ å››ã€Activitiç±»å…³ç³»å›¾ä¸Šé¢æˆ‘ä»¬å®Œæˆäº†Activitiæ•°æ®åº“è¡¨çš„ç”Ÿæˆï¼Œjavaä»£ç ä¸­æˆ‘ä»¬è°ƒç”¨Activitiçš„å·¥å…·ç±»ï¼Œä¸‹é¢æ¥äº†è§£Activitiçš„ç±»å…³ç³» 4.1 ç±»å…³ç³»å›¾ åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å®éªŒå¯ä»¥å‘ç°IdentityServiceï¼ŒFormServiceä¸¤ä¸ªSerivceéƒ½å·²ç»åˆ é™¤äº†ã€‚ æ‰€ä»¥åé¢æˆ‘ä»¬å¯¹äºè¿™ä¸¤ä¸ªServiceä¹Ÿä¸è®²è§£äº†ï¼Œä½†è€ç‰ˆæœ¬ä¸­è¿˜æ˜¯æœ‰è¿™ä¸¤ä¸ªServiceï¼ŒåŒå­¦ä»¬éœ€è¦äº†è§£ä¸€ä¸‹ 4.2 activiti.cfg.xmlactivitiçš„å¼•æ“é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬ï¼šProcessEngineConfigurationçš„å®šä¹‰ã€æ•°æ®æºå®šä¹‰ã€äº‹åŠ¡ç®¡ç†å™¨ç­‰ï¼Œæ­¤æ–‡ä»¶å…¶å®å°±æ˜¯ä¸€ä¸ªspringé…ç½®æ–‡ä»¶ã€‚ 4.3 æµç¨‹å¼•æ“é…ç½®ç±»æµç¨‹å¼•æ“çš„é…ç½®ç±»ï¼ˆProcessEngineConfigurationï¼‰ï¼Œé€šè¿‡ProcessEngineConfigurationå¯ä»¥åˆ›å»ºå·¥ä½œæµå¼•æ“ProceccEngineï¼Œå¸¸ç”¨çš„ä¸¤ç§æ–¹æ³•å¦‚ä¸‹ï¼š 4.3.1 StandaloneProcessEngineConfigurationä½¿ç”¨StandaloneProcessEngineConfigurationActivitiå¯ä»¥å•ç‹¬è¿è¡Œï¼Œæ¥åˆ›å»ºProcessEngineï¼ŒActivitiä¼šè‡ªå·±å¤„ç†äº‹åŠ¡ã€‚ é…ç½®æ–‡ä»¶æ–¹å¼ï¼š é€šå¸¸åœ¨activiti.cfg.xmlé…ç½®æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªidä¸º processEngineConfiguration çš„bean. æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314&lt;bean id=&quot;processEngineConfiguration&quot; class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt; &lt;!--é…ç½®æ•°æ®åº“ç›¸å…³çš„ä¿¡æ¯--&gt; &lt;!--æ•°æ®åº“é©±åŠ¨--&gt; &lt;property name=&quot;jdbcDriver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt; &lt;!--æ•°æ®åº“é“¾æ¥--&gt; &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql:///activiti&quot;/&gt; &lt;!--æ•°æ®åº“ç”¨æˆ·å--&gt; &lt;property name=&quot;jdbcUsername&quot; value=&quot;root&quot;/&gt; &lt;!--æ•°æ®åº“å¯†ç --&gt; &lt;property name=&quot;jdbcPassword&quot; value=&quot;123456&quot;/&gt; &lt;!--actvitiæ•°æ®åº“è¡¨åœ¨ç”Ÿæˆæ—¶çš„ç­–ç•¥ true - å¦‚æœæ•°æ®åº“ä¸­å·²ç»å­˜åœ¨ç›¸åº”çš„è¡¨ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šåˆ›å»º--&gt; &lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;true&quot;/&gt; &lt;/bean&gt; è¿˜å¯ä»¥åŠ å…¥è¿æ¥æ± : 12345678910111213141516171819202122232425262728&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsdhttp://www.springframework.org/schema/contexhttp://www.springframework.org/schema/context/spring-context.xsdhttp://www.springframework.org/schema/txhttp://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql:///activiti&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;123456&quot;/&gt; &lt;property name=&quot;maxActive&quot; value=&quot;3&quot;/&gt; &lt;property name=&quot;maxIdle&quot; value=&quot;1&quot;/&gt; &lt;/bean&gt; &lt;!--åœ¨é»˜è®¤æ–¹å¼ä¸‹ beançš„id å›ºå®šä¸º processEngineConfiguration--&gt; &lt;bean id=&quot;processEngineConfiguration&quot; class=&quot;org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;&gt; &lt;!--å¼•å…¥ä¸Šé¢é…ç½®å¥½çš„ é“¾æ¥æ± --&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt; &lt;!--actvitiæ•°æ®åº“è¡¨åœ¨ç”Ÿæˆæ—¶çš„ç­–ç•¥ true - å¦‚æœæ•°æ®åº“ä¸­å·²ç»å­˜åœ¨ç›¸åº”çš„è¡¨ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šåˆ›å»º--&gt; &lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;true&quot;/&gt; &lt;/bean&gt;&lt;/beans&gt; 4.3.2 SpringProcessEngineConfigurationé€šè¿‡org.activiti.spring.SpringProcessEngineConfiguration ä¸Springæ•´åˆã€‚ åˆ›å»ºspringä¸activitiçš„æ•´åˆé…ç½®æ–‡ä»¶ï¼š activity-spring.cfg.xmlï¼ˆåç§°å¯ä¿®æ”¹ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd &quot;&gt; &lt;!-- å·¥ä½œæµå¼•æ“é…ç½®bean --&gt; &lt;bean id=&quot;processEngineConfiguration&quot; class=&quot;org.activiti.spring.SpringProcessEngineConfiguration&quot;&gt; &lt;!-- æ•°æ®æº --&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt; &lt;!-- ä½¿ç”¨springäº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;property name=&quot;transactionManager&quot; ref=&quot;transactionManager&quot; /&gt; &lt;!-- æ•°æ®åº“ç­–ç•¥ --&gt; &lt;property name=&quot;databaseSchemaUpdate&quot; value=&quot;drop-create&quot; /&gt; &lt;!-- activitiçš„å®šæ—¶ä»»åŠ¡å…³é—­ --&gt; &lt;property name=&quot;jobExecutorActivate&quot; value=&quot;false&quot; /&gt; &lt;/bean&gt; &lt;!-- æµç¨‹å¼•æ“ --&gt; &lt;bean id=&quot;processEngine&quot; class=&quot;org.activiti.spring.ProcessEngineFactoryBean&quot;&gt; &lt;property name=&quot;processEngineConfiguration&quot; ref=&quot;processEngineConfiguration&quot; /&gt; &lt;/bean&gt; &lt;!-- èµ„æºæœåŠ¡service --&gt; &lt;bean id=&quot;repositoryService&quot; factory-bean=&quot;processEngine&quot; factory-method=&quot;getRepositoryService&quot; /&gt; &lt;!-- æµç¨‹è¿è¡Œservice --&gt; &lt;bean id=&quot;runtimeService&quot; factory-bean=&quot;processEngine&quot; factory-method=&quot;getRuntimeService&quot; /&gt; &lt;!-- ä»»åŠ¡ç®¡ç†service --&gt; &lt;bean id=&quot;taskService&quot; factory-bean=&quot;processEngine&quot; factory-method=&quot;getTaskService&quot; /&gt; &lt;!-- å†å²ç®¡ç†service --&gt; &lt;bean id=&quot;historyService&quot; factory-bean=&quot;processEngine&quot; factory-method=&quot;getHistoryService&quot; /&gt; &lt;!-- ç”¨æˆ·ç®¡ç†service --&gt; &lt;bean id=&quot;identityService&quot; factory-bean=&quot;processEngine&quot; factory-method=&quot;getIdentityService&quot; /&gt; &lt;!-- å¼•æ“ç®¡ç†service --&gt; &lt;bean id=&quot;managementService&quot; factory-bean=&quot;processEngine&quot; factory-method=&quot;getManagementService&quot; /&gt; &lt;!-- æ•°æ®æº --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/activiti&quot; /&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt; &lt;property name=&quot;password&quot; value=&quot;mysql&quot; /&gt; &lt;property name=&quot;maxActive&quot; value=&quot;3&quot; /&gt; &lt;property name=&quot;maxIdle&quot; value=&quot;1&quot; /&gt; &lt;/bean&gt; &lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt; &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt; &lt;/bean&gt; &lt;!-- é€šçŸ¥ --&gt; &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt; &lt;tx:attributes&gt;&lt;/tx:attributes&gt; &lt;!-- ä¼ æ’­è¡Œä¸º --&gt; &lt;tx:method name=&quot;save*&quot; propagation=&quot;REQUIRED&quot; /&gt; &lt;tx:method name=&quot;insert*&quot; propagation=&quot;REQUIRED&quot; /&gt; &lt;tx:method name=&quot;delete*&quot; propagation=&quot;REQUIRED&quot; /&gt; &lt;tx:method name=&quot;update*&quot; propagation=&quot;REQUIRED&quot; /&gt; &lt;tx:method name=&quot;find*&quot; propagation=&quot;SUPPORTS&quot; read-only=&quot;true&quot; /&gt; &lt;tx:method name=&quot;get*&quot; propagation=&quot;SUPPORTS&quot; read-only=&quot;true&quot; /&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;!-- åˆ‡é¢ï¼Œæ ¹æ®å…·ä½“é¡¹ç›®ä¿®æ”¹åˆ‡ç‚¹é…ç½® --&gt; &lt;aop:config proxy-target-class=&quot;true&quot;&gt; &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut=&quot;execution(* com.itheima.ihrm.service.impl.*.(..))&quot;* /&gt; &lt;/aop:config&gt;&lt;/beans&gt; åˆ›å»ºprocessEngineConfiguration1ProcessEngineConfiguration configuration = ProcessEngineConfiguration.createProcessEngineConfigurationFromResource(&quot;activiti.cfg.xml&quot;) â€‹ ä¸Šè¾¹çš„ä»£ç è¦æ±‚activiti.cfg.xmlä¸­å¿…é¡»æœ‰ä¸€ä¸ªprocessEngineConfigurationçš„bean ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹è¾¹çš„æ–¹æ³•ï¼Œæ›´æ”¹bean çš„åå­—ï¼š 1ProcessEngineConfiguration.createProcessEngineConfigurationFromResource(String resource, String beanName); 4.4 å·¥ä½œæµå¼•æ“åˆ›å»ºå·¥ä½œæµå¼•æ“ï¼ˆProcessEngineï¼‰ï¼Œç›¸å½“äºä¸€ä¸ªé—¨é¢æ¥å£ï¼Œé€šè¿‡ProcessEngineConfigurationåˆ›å»ºprocessEngineï¼Œé€šè¿‡ProcessEngineåˆ›å»ºå„ä¸ªserviceæ¥å£ã€‚ 4.4.1 é»˜è®¤åˆ›å»ºæ–¹å¼å°†activiti.cfg.xmlæ–‡ä»¶ååŠè·¯å¾„å›ºå®šï¼Œä¸”activiti.cfg.xmlæ–‡ä»¶ä¸­æœ‰ processEngineConfigurationçš„é…ç½®ï¼Œ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç åˆ›å»ºprocessEngine: 123//ç›´æ¥ä½¿ç”¨å·¥å…·ç±» ProcessEnginesï¼Œä½¿ç”¨classpathä¸‹çš„activiti.cfg.xmlä¸­çš„é…ç½®åˆ›å»ºprocessEngineProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();System.out.println(processEngine); 4.4.2 ä¸€èˆ¬åˆ›å»ºæ–¹å¼1234//å…ˆæ„å»ºProcessEngineConfigurationProcessEngineConfiguration configuration = ProcessEngineConfiguration.createProcessEngineConfigurationFromResource(&quot;activiti.cfg.xml&quot;);//é€šè¿‡ProcessEngineConfigurationåˆ›å»ºProcessEngineï¼Œæ­¤æ—¶ä¼šåˆ›å»ºæ•°æ®åº“ProcessEngine processEngine = configuration.buildProcessEngine(); 4.5 ServcieæœåŠ¡æ¥å£Serviceæ˜¯å·¥ä½œæµå¼•æ“æä¾›ç”¨äºè¿›è¡Œå·¥ä½œæµéƒ¨ç½²ã€æ‰§è¡Œã€ç®¡ç†çš„æœåŠ¡æ¥å£ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›æ¥å£å¯ä»¥å°±æ˜¯æ“ä½œæœåŠ¡å¯¹åº”çš„æ•°æ®è¡¨ 4.5.1 Serviceåˆ›å»ºæ–¹å¼é€šè¿‡ProcessEngineåˆ›å»ºService æ–¹å¼å¦‚ä¸‹ï¼š 123RuntimeService runtimeService = processEngine.getRuntimeService();RepositoryService repositoryService = processEngine.getRepositoryService();TaskService taskService = processEngine.getTaskService(); 4.5.2 Serviceæ€»è§ˆ serviceåç§° serviceä½œç”¨ RepositoryService activitiçš„èµ„æºç®¡ç†ç±» RuntimeService activitiçš„æµç¨‹è¿è¡Œç®¡ç†ç±» TaskService activitiçš„ä»»åŠ¡ç®¡ç†ç±» HistoryService activitiçš„å†å²ç®¡ç†ç±» ManagerService activitiçš„å¼•æ“ç®¡ç†ç±» ç®€å•ä»‹ç»ï¼š RepositoryService æ˜¯activitiçš„èµ„æºç®¡ç†ç±»ï¼Œæä¾›äº†ç®¡ç†å’Œæ§åˆ¶æµç¨‹å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰çš„æ“ä½œã€‚ä½¿ç”¨å·¥ä½œæµå»ºæ¨¡å·¥å…·è®¾è®¡çš„ä¸šåŠ¡æµç¨‹å›¾éœ€è¦ä½¿ç”¨æ­¤serviceå°†æµç¨‹å®šä¹‰æ–‡ä»¶çš„å†…å®¹éƒ¨ç½²åˆ°è®¡ç®—æœºã€‚ é™¤äº†éƒ¨ç½²æµç¨‹å®šä¹‰ä»¥å¤–è¿˜å¯ä»¥ï¼šæŸ¥è¯¢å¼•æ“ä¸­çš„å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰ã€‚ æš‚åœæˆ–æ¿€æ´»å‘å¸ƒåŒ…ï¼Œå¯¹åº”å…¨éƒ¨å’Œç‰¹å®šæµç¨‹å®šä¹‰ã€‚ æš‚åœæ„å‘³ç€å®ƒä»¬ä¸èƒ½å†æ‰§è¡Œä»»ä½•æ“ä½œäº†ï¼Œæ¿€æ´»æ˜¯å¯¹åº”çš„åå‘æ“ä½œã€‚è·å¾—å¤šç§èµ„æºï¼Œåƒæ˜¯åŒ…å«åœ¨å‘å¸ƒåŒ…é‡Œçš„æ–‡ä»¶ï¼Œ æˆ–å¼•æ“è‡ªåŠ¨ç”Ÿæˆçš„æµç¨‹å›¾ã€‚ è·å¾—æµç¨‹å®šä¹‰çš„pojoç‰ˆæœ¬ï¼Œ å¯ä»¥ç”¨æ¥é€šè¿‡javaè§£ææµç¨‹ï¼Œè€Œä¸å¿…é€šè¿‡xmlã€‚ RuntimeServiceActivitiçš„æµç¨‹è¿è¡Œç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªæœåŠ¡ç±»ä¸­è·å–å¾ˆå¤šå…³äºæµç¨‹æ‰§è¡Œç›¸å…³çš„ä¿¡æ¯ TaskServiceActivitiçš„ä»»åŠ¡ç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªç±»ä¸­è·å–ä»»åŠ¡çš„ä¿¡æ¯ã€‚ HistoryServiceActivitiçš„å†å²ç®¡ç†ç±»ï¼Œå¯ä»¥æŸ¥è¯¢å†å²ä¿¡æ¯ï¼Œæ‰§è¡Œæµç¨‹æ—¶ï¼Œå¼•æ“ä¼šä¿å­˜å¾ˆå¤šæ•°æ®ï¼ˆæ ¹æ®é…ç½®ï¼‰ï¼Œæ¯”å¦‚æµç¨‹å®ä¾‹å¯åŠ¨æ—¶é—´ï¼Œä»»åŠ¡çš„å‚ä¸è€…ï¼Œ å®Œæˆä»»åŠ¡çš„æ—¶é—´ï¼Œæ¯ä¸ªæµç¨‹å®ä¾‹çš„æ‰§è¡Œè·¯å¾„ï¼Œç­‰ç­‰ã€‚ è¿™ä¸ªæœåŠ¡ä¸»è¦é€šè¿‡æŸ¥è¯¢åŠŸèƒ½æ¥è·å¾—è¿™äº›æ•°æ®ã€‚ ManagementServiceActivitiçš„å¼•æ“ç®¡ç†ç±»ï¼Œæä¾›äº†å¯¹ Activiti æµç¨‹å¼•æ“çš„ç®¡ç†å’Œç»´æŠ¤åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¸åœ¨å·¥ä½œæµé©±åŠ¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œä¸»è¦ç”¨äº Activiti ç³»ç»Ÿçš„æ—¥å¸¸ç»´æŠ¤ã€‚ äº”ã€Activitiå…¥é—¨åœ¨æœ¬ç« å†…å®¹ä¸­ï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªActivitiå·¥ä½œæµï¼Œå¹¶å¯åŠ¨è¿™ä¸ªæµç¨‹ã€‚ åˆ›å»ºActivitiå·¥ä½œæµä¸»è¦åŒ…å«ä»¥ä¸‹å‡ æ­¥ï¼š 1ã€å®šä¹‰æµç¨‹ï¼ŒæŒ‰ç…§BPMNçš„è§„èŒƒï¼Œä½¿ç”¨æµç¨‹å®šä¹‰å·¥å…·ï¼Œç”¨æµç¨‹ç¬¦å·æŠŠæ•´ä¸ªæµç¨‹æè¿°å‡ºæ¥ 2ã€éƒ¨ç½²æµç¨‹ï¼ŒæŠŠç”»å¥½çš„æµç¨‹å®šä¹‰æ–‡ä»¶ï¼ŒåŠ è½½åˆ°æ•°æ®åº“ä¸­ï¼Œç”Ÿæˆè¡¨çš„æ•°æ® 3ã€å¯åŠ¨æµç¨‹ï¼Œä½¿ç”¨javaä»£ç æ¥æ“ä½œæ•°æ®åº“è¡¨ä¸­çš„å†…å®¹ 5.1 æµç¨‹ç¬¦å·BPMN 2.0æ˜¯ä¸šåŠ¡æµç¨‹å»ºæ¨¡ç¬¦å·2.0çš„ç¼©å†™ã€‚ å®ƒç”±Business Process Management Initiativeè¿™ä¸ªéè¥åˆ©åä¼šåˆ›å»ºå¹¶ä¸æ–­å‘å±•ã€‚ä½œä¸ºä¸€ç§æ ‡è¯†ï¼ŒBPMN 2.0æ˜¯ä½¿ç”¨ä¸€äº›ç¬¦å·æ¥æ˜ç¡®ä¸šåŠ¡æµç¨‹è®¾è®¡æµç¨‹å›¾çš„ä¸€æ•´å¥—ç¬¦å·è§„èŒƒï¼Œå®ƒèƒ½å¢è¿›ä¸šåŠ¡å»ºæ¨¡æ—¶çš„æ²Ÿé€šæ•ˆç‡ã€‚ ç›®å‰BPMN2.0æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå®ƒç”¨äºåœ¨BPMä¸Šä¸‹æ–‡ä¸­è¿›è¡Œå¸ƒå±€å’Œå¯è§†åŒ–çš„æ²Ÿé€šã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ¥äº†è§£åœ¨æµç¨‹è®¾è®¡ä¸­å¸¸è§çš„ ç¬¦å·ã€‚ BPMN2.0çš„åŸºæœ¬ç¬¦åˆä¸»è¦åŒ…å«ï¼š äº‹ä»¶ Event æ´»åŠ¨ Activityæ´»åŠ¨æ˜¯å·¥ä½œæˆ–ä»»åŠ¡çš„ä¸€ä¸ªé€šç”¨æœ¯è¯­ã€‚ä¸€ä¸ªæ´»åŠ¨å¯ä»¥æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå½“å‰æµç¨‹çš„å­å¤„ç†æµç¨‹ï¼› å…¶æ¬¡ï¼Œä½ è¿˜å¯ä»¥ä¸ºæ´»åŠ¨æŒ‡å®šä¸åŒçš„ç±»å‹ã€‚å¸¸è§æ´»åŠ¨å¦‚ä¸‹ï¼š ç½‘å…³ GateWayç½‘å…³ç”¨æ¥å¤„ç†å†³ç­–ï¼Œæœ‰å‡ ç§å¸¸ç”¨ç½‘å…³éœ€è¦äº†è§£ï¼š æ’ä»–ç½‘å…³ (x)â€”â€”åªæœ‰ä¸€æ¡è·¯å¾„ä¼šè¢«é€‰æ‹©ã€‚æµç¨‹æ‰§è¡Œåˆ°è¯¥ç½‘å…³æ—¶ï¼ŒæŒ‰ç…§è¾“å‡ºæµçš„é¡ºåºé€ä¸ªè®¡ç®—ï¼Œå½“æ¡ä»¶çš„è®¡ç®—ç»“æœä¸ºtrueæ—¶ï¼Œç»§ç»­æ‰§è¡Œå½“å‰ç½‘å…³çš„è¾“å‡ºæµï¼› â€‹ å¦‚æœå¤šæ¡çº¿è·¯è®¡ç®—ç»“æœéƒ½æ˜¯ trueï¼Œåˆ™ä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªå€¼ä¸º true çš„çº¿è·¯ã€‚å¦‚æœæ‰€æœ‰ç½‘å…³è®¡ç®—ç»“æœæ²¡æœ‰trueï¼Œåˆ™å¼•æ“ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ â€‹ æ’ä»–ç½‘å…³éœ€è¦å’Œæ¡ä»¶é¡ºåºæµç»“åˆä½¿ç”¨ï¼Œdefault å±æ€§æŒ‡å®šé»˜è®¤é¡ºåºæµï¼Œå½“æ‰€æœ‰çš„æ¡ä»¶ä¸æ»¡è¶³æ—¶ä¼šæ‰§è¡Œé»˜è®¤é¡ºåºæµã€‚ å¹¶è¡Œç½‘å…³ (+)â€”â€”æ‰€æœ‰è·¯å¾„ä¼šè¢«åŒæ—¶é€‰æ‹© â€‹ æ‹†åˆ† â€”â€” å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰è¾“å‡ºé¡ºåºæµï¼Œä¸ºæ¯ä¸€æ¡é¡ºåºæµåˆ›å»ºä¸€ä¸ªå¹¶è¡Œæ‰§è¡Œçº¿è·¯ã€‚ â€‹ åˆå¹¶ â€”â€” æ‰€æœ‰ä»å¹¶è¡Œç½‘å…³æ‹†åˆ†å¹¶æ‰§è¡Œå®Œæˆçš„çº¿è·¯å‡åœ¨æ­¤ç­‰å€™ï¼Œç›´åˆ°æ‰€æœ‰çš„çº¿è·¯éƒ½æ‰§è¡Œå®Œæˆæ‰ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚ åŒ…å®¹ç½‘å…³ (+)â€”â€” å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šæ¡çº¿è·¯ï¼Œä¹Ÿå¯ä»¥åœ¨ç½‘å…³ä¸Šè®¾ç½®æ¡ä»¶ â€‹ æ‹†åˆ† â€”â€” è®¡ç®—æ¯æ¡çº¿è·¯ä¸Šçš„è¡¨è¾¾å¼ï¼Œå½“è¡¨è¾¾å¼è®¡ç®—ç»“æœä¸ºtrueæ—¶ï¼Œåˆ›å»ºä¸€ä¸ªå¹¶è¡Œçº¿è·¯å¹¶ç»§ç»­æ‰§è¡Œ â€‹ åˆå¹¶ â€”â€” æ‰€æœ‰ä»å¹¶è¡Œç½‘å…³æ‹†åˆ†å¹¶æ‰§è¡Œå®Œæˆçš„çº¿è·¯å‡åœ¨æ­¤ç­‰å€™ï¼Œç›´åˆ°æ‰€æœ‰çš„çº¿è·¯éƒ½æ‰§è¡Œå®Œæˆæ‰ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚ äº‹ä»¶ç½‘å…³ (+)â€”â€” ä¸“é—¨ä¸ºä¸­é—´æ•è·äº‹ä»¶è®¾ç½®çš„ï¼Œå…è®¸è®¾ç½®å¤šä¸ªè¾“å‡ºæµæŒ‡å‘å¤šä¸ªä¸åŒçš„ä¸­é—´æ•è·äº‹ä»¶ã€‚å½“æµç¨‹æ‰§è¡Œåˆ°äº‹ä»¶ç½‘å…³åï¼Œæµç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œéœ€è¦ç­‰å¾…æŠ›å‡ºäº‹ä»¶æ‰èƒ½å°†ç­‰å¾…çŠ¶æ€è½¬æ¢ä¸ºæ´»åŠ¨çŠ¶æ€ã€‚ æµå‘ Flowæµæ˜¯è¿æ¥ä¸¤ä¸ªæµç¨‹èŠ‚ç‚¹çš„è¿çº¿ã€‚å¸¸è§çš„æµå‘åŒ…å«ä»¥ä¸‹å‡ ç§ï¼š 5.2 æµç¨‹è®¾è®¡å™¨ä½¿ç”¨Activiti-Designerä½¿ç”¨Paletteï¼ˆç”»æ¿ï¼‰åœ¨ideaä¸­å®‰è£…æ’ä»¶å³å¯ä½¿ç”¨ï¼Œç”»æ¿ä¸­åŒ…æ‹¬ä»¥ä¸‹ç»“ç‚¹ï¼š Connectionâ€”è¿æ¥ Eventâ€”äº‹ä»¶ Taskâ€”ä»»åŠ¡ Gatewayâ€”ç½‘å…³ Containerâ€”å®¹å™¨ Boundary eventâ€”è¾¹ç•Œäº‹ä»¶ Intermediate event- -ä¸­é—´äº‹ä»¶ æµç¨‹å›¾è®¾è®¡å®Œæ¯•ä¿å­˜ç”Ÿæˆ.bpmnæ–‡ä»¶ æ–°å»ºæµç¨‹(IDEAå·¥å…·)é¦–å…ˆé€‰ä¸­å­˜æ”¾å›¾å½¢çš„ç›®å½•(é€‰æ‹©resourcesä¸‹çš„bpmnç›®å½•)ï¼Œç‚¹å‡»èœå•ï¼šNew -&gt; BpmnFileï¼Œå¦‚å›¾ï¼š å¼¹å‡ºå¦‚ä¸‹å›¾æ‰€ç¤ºæ¡†ï¼Œè¾“å…¥evection è¡¨ç¤º å‡ºå·®å®¡æ‰¹æµç¨‹ï¼š èµ·å®Œåå­—evectionåï¼ˆé»˜è®¤æ‰©å±•åä¸ºbpmnï¼‰ï¼Œå°±å¯ä»¥çœ‹åˆ°æµç¨‹è®¾è®¡é¡µé¢ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å·¦ä¾§åŒºåŸŸæ˜¯ç»˜å›¾åŒºï¼Œå³ä¾§åŒºåŸŸæ˜¯paletteç”»æ¿åŒºåŸŸ é¼ æ ‡å…ˆç‚¹å‡»ç”»æ¿çš„å…ƒç´ å³å¯åœ¨å·¦ä¾§ç»˜å›¾ ç»˜åˆ¶æµç¨‹ä½¿ç”¨æ»‘æ¿æ¥ç»˜åˆ¶æµç¨‹ï¼Œé€šè¿‡ä»å³ä¾§æŠŠå›¾æ ‡æ‹–æ‹½åˆ°å·¦ä¾§çš„ç”»æ¿ï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š æŒ‡å®šæµç¨‹å®šä¹‰Keyæµç¨‹å®šä¹‰keyå³æµç¨‹å®šä¹‰çš„æ ‡è¯†ï¼Œé€šè¿‡propertiesè§†å›¾æŸ¥çœ‹æµç¨‹çš„key æŒ‡å®šä»»åŠ¡è´Ÿè´£äººåœ¨propertiesè§†å›¾æŒ‡å®šæ¯ä¸ªä»»åŠ¡ç»“ç‚¹çš„è´Ÿè´£äººï¼Œå¦‚ï¼šå¡«å†™å‡ºå·®ç”³è¯·çš„è´Ÿè´£äººä¸º zhangsan ç»ç†å®¡æ‰¹è´Ÿè´£äººä¸º jerry æ€»ç»ç†å®¡æ‰¹è´Ÿè´£äººä¸º jack è´¢åŠ¡å®¡æ‰¹è´Ÿè´£äººä¸º rose å…­ã€æµç¨‹æ“ä½œ6.1 æµç¨‹å®šä¹‰æ¦‚è¿°æµç¨‹å®šä¹‰æ˜¯çº¿ä¸‹æŒ‰ç…§bpmn2.0æ ‡å‡†å»æè¿° ä¸šåŠ¡æµç¨‹ï¼Œé€šå¸¸ä½¿ç”¨ideaä¸­çš„æ’ä»¶å¯¹ä¸šåŠ¡æµç¨‹è¿›è¡Œå»ºæ¨¡ã€‚ ä½¿ç”¨ideaä¸‹çš„designerè®¾è®¡å™¨ç»˜åˆ¶æµç¨‹ï¼Œå¹¶ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š.bpmnå’Œ.png .bpmnæ–‡ä»¶ä½¿ç”¨activiti-desingerè®¾è®¡ä¸šåŠ¡æµç¨‹ï¼Œä¼šç”Ÿæˆ.bpmnæ–‡ä»¶ï¼Œä¸Šé¢æˆ‘ä»¬å·²ç»åˆ›å»ºå¥½äº†bpmnæ–‡ä»¶ BPMN 2.0æ ¹èŠ‚ç‚¹æ˜¯definitionsèŠ‚ç‚¹ã€‚ è¿™ä¸ªå…ƒç´ ä¸­ï¼Œå¯ä»¥å®šä¹‰å¤šä¸ªæµç¨‹å®šä¹‰ï¼ˆä¸è¿‡æˆ‘ä»¬å»ºè®®æ¯ä¸ªæ–‡ä»¶åªåŒ…å«ä¸€ä¸ªæµç¨‹å®šä¹‰ï¼Œ å¯ä»¥ç®€åŒ–å¼€å‘è¿‡ç¨‹ä¸­çš„ç»´æŠ¤éš¾åº¦ï¼‰ã€‚ æ³¨æ„ï¼Œdefinitionså…ƒç´  æœ€å°‘ä¹Ÿè¦åŒ…å«xmlns å’Œ targetNamespaceçš„å£°æ˜ã€‚ targetNamespaceå¯ä»¥æ˜¯ä»»æ„å€¼ï¼Œå®ƒç”¨æ¥å¯¹æµç¨‹å®ä¾‹è¿›è¡Œåˆ†ç±»ã€‚ æµç¨‹å®šä¹‰éƒ¨åˆ†ï¼šå®šä¹‰äº†æµç¨‹æ¯ä¸ªç»“ç‚¹çš„æè¿°åŠç»“ç‚¹ä¹‹é—´çš„æµç¨‹æµè½¬ã€‚ æµç¨‹å¸ƒå±€å®šä¹‰ï¼šå®šä¹‰æµç¨‹æ¯ä¸ªç»“ç‚¹åœ¨æµç¨‹å›¾ä¸Šçš„ä½ç½®åæ ‡ç­‰ä¿¡æ¯ã€‚ ç”Ÿæˆ.pngå›¾ç‰‡æ–‡ä»¶IDEAå·¥å…·ä¸­çš„æ“ä½œæ–¹å¼ 1ã€ä¿®æ”¹æ–‡ä»¶åç¼€ä¸ºxmlé¦–å…ˆå°†evection.bpmnæ–‡ä»¶æ”¹åä¸ºevection.xmlï¼Œå¦‚ä¸‹å›¾ï¼š evection.xmlä¿®æ”¹å‰çš„bpmnæ–‡ä»¶ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š 2ã€ä½¿ç”¨designerè®¾è®¡å™¨æ‰“å¼€.xmlæ–‡ä»¶åœ¨evection.xmlæ–‡ä»¶ä¸Šé¢ï¼Œç‚¹å³é”®å¹¶é€‰æ‹©Diagramsèœå•ï¼Œå†é€‰æ‹©Show BPMN2.0 Designerâ€¦ 3ã€æŸ¥çœ‹æ‰“å¼€çš„æ–‡ä»¶æ‰“å¼€åï¼Œå´å‡ºç°ä¹±ç ï¼Œå¦‚å›¾ï¼š 4ã€è§£å†³ä¸­æ–‡ä¹±ç 1ã€æ‰“å¼€Settingsï¼Œæ‰¾åˆ°File Encodingsï¼ŒæŠŠencodingçš„é€‰é¡¹éƒ½é€‰æ‹©UTF-8 2ã€æ‰“å¼€IDEAå®‰è£…è·¯å¾„ï¼Œæ‰¾åˆ°å¦‚ä¸‹çš„å®‰è£…ç›®å½• æ ¹æ®è‡ªå·±æ‰€å®‰è£…çš„ç‰ˆæœ¬æ¥å†³å®šï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯64ä½çš„ideaï¼Œæ‰€ä»¥åœ¨idea64.exe.vmoptionsæ–‡ä»¶çš„æœ€åä¸€è¡Œè¿½åŠ ä¸€æ¡å‘½ä»¤ï¼š -Dfile.encoding&#x3D;UTF-8 å¦‚ä¸‹æ‰€ç¤ºï¼š ä¸€å®šæ³¨æ„ï¼Œä¸è¦æœ‰ç©ºæ ¼ï¼Œå¦åˆ™é‡å¯IDEAæ—¶ä¼šæ‰“ä¸å¼€ï¼Œç„¶å é‡å¯IDEAã€‚ å¦‚æœä»¥ä¸Šæ–¹æ³•å·²ç»åšå®Œï¼Œè¿˜å‡ºç°ä¹±ç ï¼Œå°±å†ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶çš„æœ«å°¾æ·»åŠ ï¼š -Dfile.encoding&#x3D;UTF-8ï¼Œç„¶åé‡å¯ideaï¼Œå¦‚å›¾ï¼š æœ€åé‡æ–°åœ¨evection.xmlæ–‡ä»¶ä¸Šé¢ï¼Œç‚¹å³é”®å¹¶é€‰æ‹©Diagramsèœå•ï¼Œå†é€‰æ‹©Show BPMN2.0 Designerâ€¦ï¼Œçœ‹åˆ°ç”Ÿæˆå›¾ç‰‡ï¼Œå¦‚å›¾ï¼š åˆ°æ­¤ï¼Œè§£å†³ä¹±ç é—®é¢˜ 5ã€å¯¼å‡ºä¸ºå›¾ç‰‡æ–‡ä»¶ç‚¹å‡»Export To Fileçš„å°å›¾æ ‡ï¼Œæ‰“å¼€å¦‚ä¸‹çª—å£ï¼Œæ³¨æ„å¡«å†™æ–‡ä»¶ååŠæ‰©å±•åï¼Œé€‰æ‹©å¥½ä¿å­˜å›¾ç‰‡çš„ä½ç½®ï¼š ç„¶åï¼Œæˆ‘ä»¬æŠŠpngæ–‡ä»¶æ‹·è´åˆ°resourcesä¸‹çš„bpmnç›®å½•ï¼Œå¹¶ä¸”æŠŠevection.xmlæ”¹åä¸ºevection.bpmnã€‚ 6.2 æµç¨‹å®šä¹‰éƒ¨ç½²æ¦‚è¿°å°†ä¸Šé¢åœ¨è®¾è®¡å™¨ä¸­å®šä¹‰çš„æµç¨‹éƒ¨ç½²åˆ°activitiæ•°æ®åº“ä¸­ï¼Œå°±æ˜¯æµç¨‹å®šä¹‰éƒ¨ç½²ã€‚ é€šè¿‡è°ƒç”¨activitiçš„apiå°†æµç¨‹å®šä¹‰çš„bpmnå’Œpngä¸¤ä¸ªæ–‡ä»¶ä¸€ä¸ªä¸€ä¸ªæ·»åŠ éƒ¨ç½²åˆ°activitiä¸­ï¼Œä¹Ÿå¯ä»¥å°†ä¸¤ä¸ªæ–‡ä»¶æ‰“æˆzipåŒ…è¿›è¡Œéƒ¨ç½²ã€‚ å•ä¸ªæ–‡ä»¶éƒ¨ç½²æ–¹å¼åˆ†åˆ«å°†bpmnæ–‡ä»¶å’Œpngå›¾ç‰‡æ–‡ä»¶éƒ¨ç½²ã€‚ 123456789101112131415161718192021222324252627282930package com.itheima.test;import org.activiti.engine.ProcessEngine;import org.activiti.engine.ProcessEngines;import org.activiti.engine.RepositoryService;import org.activiti.engine.repository.Deployment;import org.junit.Test;public class ActivitiDemo &#123; /** * éƒ¨ç½²æµç¨‹å®šä¹‰ */ @Test public void testDeployment()&#123;// 1ã€åˆ›å»ºProcessEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// 2ã€å¾—åˆ°RepositoryServiceå®ä¾‹ RepositoryService repositoryService = processEngine.getRepositoryService();// 3ã€ä½¿ç”¨RepositoryServiceè¿›è¡Œéƒ¨ç½² Deployment deployment = repositoryService.createDeployment() .addClasspathResource(&quot;bpmn/evection.bpmn&quot;) // æ·»åŠ bpmnèµ„æº .addClasspathResource(&quot;bpmn/evection.png&quot;) // æ·»åŠ pngèµ„æº .name(&quot;å‡ºå·®ç”³è¯·æµç¨‹&quot;) .deploy();// 4ã€è¾“å‡ºéƒ¨ç½²ä¿¡æ¯ System.out.println(&quot;æµç¨‹éƒ¨ç½²idï¼š&quot; + deployment.getId()); System.out.println(&quot;æµç¨‹éƒ¨ç½²åç§°ï¼š&quot; + deployment.getName()); &#125;&#125; æ‰§è¡Œæ­¤æ“ä½œåactivitiä¼šå°†ä¸Šè¾¹ä»£ç ä¸­æŒ‡å®šçš„bpmæ–‡ä»¶å’Œå›¾ç‰‡æ–‡ä»¶ä¿å­˜åœ¨activitiæ•°æ®åº“ã€‚ å‹ç¼©åŒ…éƒ¨ç½²æ–¹å¼å°†evection.bpmnå’Œevection.pngå‹ç¼©æˆzipåŒ…ã€‚ 1234567891011121314151617181920@Test public void deployProcessByZip() &#123; // å®šä¹‰zipè¾“å…¥æµ InputStream inputStream = this .getClass() .getClassLoader() .getResourceAsStream( &quot;bpmn/evection.zip&quot;); ZipInputStream zipInputStream = new ZipInputStream(inputStream); // è·å–repositoryService RepositoryService repositoryService = processEngine .getRepositoryService(); // æµç¨‹éƒ¨ç½² Deployment deployment = repositoryService.createDeployment() .addZipInputStream(zipInputStream) .deploy(); System.out.println(&quot;æµç¨‹éƒ¨ç½²idï¼š&quot; + deployment.getId()); System.out.println(&quot;æµç¨‹éƒ¨ç½²åç§°ï¼š&quot; + deployment.getName()); &#125; æ‰§è¡Œæ­¤æ“ä½œåactivitiä¼šå°†ä¸Šè¾¹ä»£ç ä¸­æŒ‡å®šçš„bpmæ–‡ä»¶å’Œå›¾ç‰‡æ–‡ä»¶ä¿å­˜åœ¨activitiæ•°æ®åº“ã€‚ æ“ä½œæ•°æ®è¡¨æµç¨‹å®šä¹‰éƒ¨ç½²åæ“ä½œactivitiçš„3å¼ è¡¨å¦‚ä¸‹ï¼š act_re_deployment æµç¨‹å®šä¹‰éƒ¨ç½²è¡¨ï¼Œæ¯éƒ¨ç½²ä¸€æ¬¡å¢åŠ ä¸€æ¡è®°å½• act_re_procdef æµç¨‹å®šä¹‰è¡¨ï¼Œéƒ¨ç½²æ¯ä¸ªæ–°çš„æµç¨‹å®šä¹‰éƒ½ä¼šåœ¨è¿™å¼ è¡¨ä¸­å¢åŠ ä¸€æ¡è®°å½• act_ge_bytearray æµç¨‹èµ„æºè¡¨ æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå†™å…¥äº†ä»€ä¹ˆæ•°æ®ï¼š 1SELECT * FROM act_re_deployment #æµç¨‹å®šä¹‰éƒ¨ç½²è¡¨ï¼Œè®°å½•æµç¨‹éƒ¨ç½²ä¿¡æ¯ ç»“æœï¼š 1SELECT * FROM act_re_procdef #æµç¨‹å®šä¹‰è¡¨ï¼Œè®°å½•æµç¨‹å®šä¹‰ä¿¡æ¯ ç»“æœï¼š æ³¨æ„ï¼ŒKEY è¿™ä¸ªå­—æ®µæ˜¯ç”¨æ¥å”¯ä¸€è¯†åˆ«ä¸åŒæµç¨‹çš„å…³é”®å­— 1SELECT * FROM act_ge_bytearray #èµ„æºè¡¨ ç»“æœï¼š æ³¨æ„ï¼š act_re_deploymentå’Œact_re_procdefä¸€å¯¹å¤šå…³ç³»ï¼Œä¸€æ¬¡éƒ¨ç½²åœ¨æµç¨‹éƒ¨ç½²è¡¨ç”Ÿæˆä¸€æ¡è®°å½•ï¼Œä½†ä¸€æ¬¡éƒ¨ç½²å¯ä»¥éƒ¨ç½²å¤šä¸ªæµç¨‹å®šä¹‰ï¼Œæ¯ä¸ªæµç¨‹å®šä¹‰åœ¨æµç¨‹å®šä¹‰è¡¨ç”Ÿæˆä¸€æ¡è®°å½•ã€‚æ¯ä¸€ä¸ªæµç¨‹å®šä¹‰åœ¨act_ge_bytearrayä¼šå­˜åœ¨ä¸¤ä¸ªèµ„æºè®°å½•ï¼Œbpmnå’Œpngã€‚ å»ºè®®ï¼šä¸€æ¬¡éƒ¨ç½²ä¸€ä¸ªæµç¨‹ï¼Œè¿™æ ·éƒ¨ç½²è¡¨å’Œæµç¨‹å®šä¹‰è¡¨æ˜¯ä¸€å¯¹ä¸€æœ‰å…³ç³»ï¼Œæ–¹ä¾¿è¯»å–æµç¨‹éƒ¨ç½²åŠæµç¨‹å®šä¹‰ä¿¡æ¯ã€‚ 6.3 å¯åŠ¨æµç¨‹å®ä¾‹æµç¨‹å®šä¹‰éƒ¨ç½²åœ¨activitiåå°±å¯ä»¥é€šè¿‡å·¥ä½œæµç®¡ç†ä¸šåŠ¡æµç¨‹äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸Šè¾¹éƒ¨ç½²çš„å‡ºå·®ç”³è¯·æµç¨‹å¯ä»¥ä½¿ç”¨äº†ã€‚ é’ˆå¯¹è¯¥æµç¨‹ï¼Œå¯åŠ¨ä¸€ä¸ªæµç¨‹è¡¨ç¤ºå‘èµ·ä¸€ä¸ªæ–°çš„å‡ºå·®ç”³è¯·å•ï¼Œè¿™å°±ç›¸å½“äºjavaç±»ä¸javaå¯¹è±¡çš„å…³ç³»ï¼Œç±»å®šä¹‰å¥½åéœ€è¦newåˆ›å»ºä¸€ä¸ªå¯¹è±¡ä½¿ç”¨ï¼Œå½“ç„¶å¯ä»¥newå¤šä¸ªå¯¹è±¡ã€‚å¯¹äºè¯·å‡ºå·®ç”³è¯·æµç¨‹ï¼Œå¼ ä¸‰å‘èµ·ä¸€ä¸ªå‡ºå·®ç”³è¯·å•éœ€è¦å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œå‡ºå·®ç”³è¯·å•å‘èµ·ä¸€ä¸ªå‡ºå·®å•ä¹Ÿéœ€è¦å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚ ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718 /** * å¯åŠ¨æµç¨‹å®ä¾‹ */ @Test public void testStartProcess()&#123;// 1ã€åˆ›å»ºProcessEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// 2ã€è·å–RunTimeService RuntimeService runtimeService = processEngine.getRuntimeService();// 3ã€æ ¹æ®æµç¨‹å®šä¹‰Idå¯åŠ¨æµç¨‹ ProcessInstance processInstance = runtimeService .startProcessInstanceByKey(&quot;myEvection&quot;);// è¾“å‡ºå†…å®¹ System.out.println(&quot;æµç¨‹å®šä¹‰idï¼š&quot; + processInstance.getProcessDefinitionId()); System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + processInstance.getId()); System.out.println(&quot;å½“å‰æ´»åŠ¨Idï¼š&quot; + processInstance.getActivityId()); &#125; è¾“å‡ºå†…å®¹å¦‚ä¸‹ï¼š æ“ä½œæ•°æ®è¡¨ act_hi_actinst æµç¨‹å®ä¾‹æ‰§è¡Œå†å² act_hi_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·å†å²ä¿¡æ¯ act_hi_procinst æµç¨‹å®ä¾‹å†å²ä¿¡æ¯ act_hi_taskinst æµç¨‹ä»»åŠ¡å†å²ä¿¡æ¯ act_ru_execution æµç¨‹æ‰§è¡Œä¿¡æ¯ act_ru_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·ä¿¡æ¯ act_ru_task ä»»åŠ¡ä¿¡æ¯ 6.4 ä»»åŠ¡æŸ¥è¯¢æµç¨‹å¯åŠ¨åï¼Œä»»åŠ¡çš„è´Ÿè´£äººå°±å¯ä»¥æŸ¥è¯¢è‡ªå·±å½“å‰éœ€è¦å¤„ç†çš„ä»»åŠ¡ï¼ŒæŸ¥è¯¢å‡ºæ¥çš„ä»»åŠ¡éƒ½æ˜¯è¯¥ç”¨æˆ·çš„å¾…åŠä»»åŠ¡ã€‚ 12345678910111213141516171819202122232425/** * æŸ¥è¯¢å½“å‰ä¸ªäººå¾…æ‰§è¡Œçš„ä»»åŠ¡ */ @Test public void testFindPersonalTaskList() &#123;// ä»»åŠ¡è´Ÿè´£äºº String assignee = &quot;zhangsan&quot;; ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// åˆ›å»ºTaskService TaskService taskService = processEngine.getTaskService();// æ ¹æ®æµç¨‹key å’Œ ä»»åŠ¡è´Ÿè´£äºº æŸ¥è¯¢ä»»åŠ¡ List&lt;Task&gt; list = taskService.createTaskQuery() .processDefinitionKey(&quot;myEvection&quot;) //æµç¨‹Key .taskAssignee(assignee)//åªæŸ¥è¯¢è¯¥ä»»åŠ¡è´Ÿè´£äººçš„ä»»åŠ¡ .list(); for (Task task : list) &#123; System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + task.getProcessInstanceId()); System.out.println(&quot;ä»»åŠ¡idï¼š&quot; + task.getId()); System.out.println(&quot;ä»»åŠ¡è´Ÿè´£äººï¼š&quot; + task.getAssignee()); System.out.println(&quot;ä»»åŠ¡åç§°ï¼š&quot; + task.getName()); &#125; &#125; è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š 1234æµç¨‹å®ä¾‹idï¼š2501ä»»åŠ¡idï¼š2505ä»»åŠ¡è´Ÿè´£äººï¼šzhangsanä»»åŠ¡åç§°ï¼šåˆ›å»ºå‡ºå·®ç”³è¯· 6.5 æµç¨‹ä»»åŠ¡å¤„ç†ä»»åŠ¡è´Ÿè´£äººæŸ¥è¯¢å¾…åŠä»»åŠ¡ï¼Œé€‰æ‹©ä»»åŠ¡è¿›è¡Œå¤„ç†ï¼Œå®Œæˆä»»åŠ¡ã€‚ 12345678910111213141516171819// å®Œæˆä»»åŠ¡ @Test public void completTask()&#123;// è·å–å¼•æ“ ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// è·å–taskService TaskService taskService = processEngine.getTaskService();// æ ¹æ®æµç¨‹key å’Œ ä»»åŠ¡çš„è´Ÿè´£äºº æŸ¥è¯¢ä»»åŠ¡// è¿”å›ä¸€ä¸ªä»»åŠ¡å¯¹è±¡ Task task = taskService.createTaskQuery() .processDefinitionKey(&quot;myEvection&quot;) //æµç¨‹Key .taskAssignee(&quot;zhangsan&quot;) //è¦æŸ¥è¯¢çš„è´Ÿè´£äºº .singleResult();// å®Œæˆä»»åŠ¡,å‚æ•°ï¼šä»»åŠ¡id taskService.complete(task.getId()); &#125; 6.6 æµç¨‹å®šä¹‰ä¿¡æ¯æŸ¥è¯¢æŸ¥è¯¢æµç¨‹ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…å«æµç¨‹å®šä¹‰ï¼Œæµç¨‹éƒ¨ç½²ï¼Œæµç¨‹å®šä¹‰ç‰ˆæœ¬ 123456789101112131415161718192021222324252627282930 /** * æŸ¥è¯¢æµç¨‹å®šä¹‰ */ @Test public void queryProcessDefinition()&#123; // è·å–å¼•æ“ ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// repositoryService RepositoryService repositoryService = processEngine.getRepositoryService();// å¾—åˆ°ProcessDefinitionQuery å¯¹è±¡ ProcessDefinitionQuery processDefinitionQuery = repositoryService.createProcessDefinitionQuery();// æŸ¥è¯¢å‡ºå½“å‰æ‰€æœ‰çš„æµç¨‹å®šä¹‰// æ¡ä»¶ï¼šprocessDefinitionKey =evection// orderByProcessDefinitionVersion æŒ‰ç…§ç‰ˆæœ¬æ’åº// descå€’å™// list è¿”å›é›†åˆ List&lt;ProcessDefinition&gt; definitionList = processDefinitionQuery.processDefinitionKey(&quot;myEvection&quot;) .orderByProcessDefinitionVersion() .desc() .list();// è¾“å‡ºæµç¨‹å®šä¹‰ä¿¡æ¯ for (ProcessDefinition processDefinition : definitionList) &#123; System.out.println(&quot;æµç¨‹å®šä¹‰ id=&quot;+processDefinition.getId()); System.out.println(&quot;æµç¨‹å®šä¹‰ name=&quot;+processDefinition.getName()); System.out.println(&quot;æµç¨‹å®šä¹‰ key=&quot;+processDefinition.getKey()); System.out.println(&quot;æµç¨‹å®šä¹‰ Version=&quot;+processDefinition.getVersion()); System.out.println(&quot;æµç¨‹éƒ¨ç½²ID =&quot;+processDefinition.getDeploymentId()); &#125; &#125; è¾“å‡ºç»“æœï¼š 1234æµç¨‹å®šä¹‰idï¼šmyEvection:1:4æµç¨‹å®šä¹‰åç§°ï¼šå‡ºå·®ç”³è¯·å•æµç¨‹å®šä¹‰keyï¼šmyEvectionæµç¨‹å®šä¹‰ç‰ˆæœ¬ï¼š1 6.7 æµç¨‹åˆ é™¤1234567891011121314public void deleteDeployment() &#123; // æµç¨‹éƒ¨ç½²id String deploymentId = &quot;1&quot;; ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); // é€šè¿‡æµç¨‹å¼•æ“è·å–repositoryService RepositoryService repositoryService = processEngine .getRepositoryService(); //åˆ é™¤æµç¨‹å®šä¹‰ï¼Œå¦‚æœè¯¥æµç¨‹å®šä¹‰å·²æœ‰æµç¨‹å®ä¾‹å¯åŠ¨åˆ™åˆ é™¤æ—¶å‡ºé”™ repositoryService.deleteDeployment(deploymentId); //è®¾ç½®true çº§è”åˆ é™¤æµç¨‹å®šä¹‰ï¼Œå³ä½¿è¯¥æµç¨‹æœ‰æµç¨‹å®ä¾‹å¯åŠ¨ä¹Ÿå¯ä»¥åˆ é™¤ï¼Œè®¾ç½®ä¸ºfalseéçº§åˆ«åˆ é™¤æ–¹å¼ï¼Œå¦‚æœæµç¨‹ //repositoryService.deleteDeployment(deploymentId, true); &#125; è¯´æ˜ï¼š ä½¿ç”¨repositoryServiceåˆ é™¤æµç¨‹å®šä¹‰ï¼Œå†å²è¡¨ä¿¡æ¯ä¸ä¼šè¢«åˆ é™¤ å¦‚æœè¯¥æµç¨‹å®šä¹‰ä¸‹æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„æµç¨‹ï¼Œåˆ™å¯ä»¥ç”¨æ™®é€šåˆ é™¤ã€‚ å¦‚æœè¯¥æµç¨‹å®šä¹‰ä¸‹å­˜åœ¨å·²ç»è¿è¡Œçš„æµç¨‹ï¼Œä½¿ç”¨æ™®é€šåˆ é™¤æŠ¥é”™ï¼Œå¯ç”¨çº§è”åˆ é™¤æ–¹æ³•å°†æµç¨‹åŠç›¸å…³è®°å½•å…¨éƒ¨åˆ é™¤ã€‚ å…ˆåˆ é™¤æ²¡æœ‰å®Œæˆæµç¨‹èŠ‚ç‚¹ï¼Œæœ€åå°±å¯ä»¥å®Œå…¨åˆ é™¤æµç¨‹å®šä¹‰ä¿¡æ¯ é¡¹ç›®å¼€å‘ä¸­çº§è”åˆ é™¤æ“ä½œä¸€èˆ¬åªå¼€æ”¾ç»™è¶…çº§ç®¡ç†å‘˜ä½¿ç”¨. 6.8 æµç¨‹èµ„æºä¸‹è½½ç°åœ¨æˆ‘ä»¬çš„æµç¨‹èµ„æºæ–‡ä»¶å·²ç»ä¸Šä¼ åˆ°æ•°æ®åº“äº†ï¼Œå¦‚æœå…¶ä»–ç”¨æˆ·æƒ³è¦æŸ¥çœ‹è¿™äº›èµ„æºæ–‡ä»¶ï¼Œå¯ä»¥ä»æ•°æ®åº“ä¸­æŠŠèµ„æºæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚ è§£å†³æ–¹æ¡ˆæœ‰ï¼š 1ã€jdbcå¯¹blobç±»å‹ï¼Œclobç±»å‹æ•°æ®è¯»å–å‡ºæ¥ï¼Œä¿å­˜åˆ°æ–‡ä»¶ç›®å½• 2ã€ä½¿ç”¨activitiçš„apiæ¥å®ç° ä½¿ç”¨commons-io.jar è§£å†³IOçš„æ“ä½œ å¼•å…¥commons-ioä¾èµ–åŒ… 12345&lt;dependency&gt; &lt;groupId&gt;commons-io&lt;/groupId&gt; &lt;artifactId&gt;commons-io&lt;/artifactId&gt; &lt;version&gt;2.6&lt;/version&gt;&lt;/dependency&gt; é€šè¿‡æµç¨‹å®šä¹‰å¯¹è±¡è·å–æµç¨‹å®šä¹‰èµ„æºï¼Œè·å–bpmnå’Œpng 12345678910111213141516171819202122232425262728293031323334353637383940414243import org.apache.commons.io.IOUtils;@Test public void deleteDeployment()&#123;// è·å–å¼•æ“ ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// è·å–repositoryService RepositoryService repositoryService = processEngine.getRepositoryService();// æ ¹æ®éƒ¨ç½²id åˆ é™¤éƒ¨ç½²ä¿¡æ¯,å¦‚æœæƒ³è¦çº§è”åˆ é™¤ï¼Œå¯ä»¥æ·»åŠ ç¬¬äºŒä¸ªå‚æ•°ï¼Œtrue repositoryService.deleteDeployment(&quot;1&quot;); &#125; public void queryBpmnFile() throws IOException &#123;// 1ã€å¾—åˆ°å¼•æ“ ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// 2ã€è·å–repositoryService RepositoryService repositoryService = processEngine.getRepositoryService();// 3ã€å¾—åˆ°æŸ¥è¯¢å™¨ï¼šProcessDefinitionQueryï¼Œè®¾ç½®æŸ¥è¯¢æ¡ä»¶,å¾—åˆ°æƒ³è¦çš„æµç¨‹å®šä¹‰ ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery() .processDefinitionKey(&quot;myEvection&quot;) .singleResult();// 4ã€é€šè¿‡æµç¨‹å®šä¹‰ä¿¡æ¯ï¼Œå¾—åˆ°éƒ¨ç½²ID String deploymentId = processDefinition.getDeploymentId();// 5ã€é€šè¿‡repositoryServiceçš„æ–¹æ³•ï¼Œå®ç°è¯»å–å›¾ç‰‡ä¿¡æ¯å’Œbpmnä¿¡æ¯// pngå›¾ç‰‡çš„æµ InputStream pngInput = repositoryService.getResourceAsStream(deploymentId, processDefinition.getDiagramResourceName());// bpmnæ–‡ä»¶çš„æµ InputStream bpmnInput = repositoryService.getResourceAsStream(deploymentId, processDefinition.getResourceName());// 6ã€æ„é€ OutputStreamæµ File file_png = new File(&quot;d:/evectionflow01.png&quot;); File file_bpmn = new File(&quot;d:/evectionflow01.bpmn&quot;); FileOutputStream bpmnOut = new FileOutputStream(file_bpmn); FileOutputStream pngOut = new FileOutputStream(file_png);// 7ã€è¾“å…¥æµï¼Œè¾“å‡ºæµçš„è½¬æ¢ IOUtils.copy(pngInput,pngOut); IOUtils.copy(bpmnInput,bpmnOut);// 8ã€å…³é—­æµ pngOut.close(); bpmnOut.close(); pngInput.close(); bpmnInput.close(); &#125; è¯´æ˜ï¼š deploymentIdä¸ºæµç¨‹éƒ¨ç½²ID resource_nameä¸ºact_ge_bytearrayè¡¨ä¸­NAME_åˆ—çš„å€¼ ä½¿ç”¨repositoryServiceçš„getDeploymentResourceNamesæ–¹æ³•å¯ä»¥è·å–æŒ‡å®šéƒ¨ç½²ä¸‹å¾—æ‰€æœ‰æ–‡ä»¶çš„åç§° ä½¿ç”¨repositoryServiceçš„getResourceAsStreamæ–¹æ³•ä¼ å…¥éƒ¨ç½²IDå’Œèµ„æºå›¾ç‰‡åç§°å¯ä»¥è·å–éƒ¨ç½²ä¸‹æŒ‡å®šåç§°æ–‡ä»¶çš„è¾“å…¥æµ æœ€åçš„å°†è¾“å…¥æµä¸­çš„å›¾ç‰‡èµ„æºè¿›è¡Œè¾“å‡ºã€‚ 6.9 æµç¨‹å†å²ä¿¡æ¯çš„æŸ¥çœ‹å³ä½¿æµç¨‹å®šä¹‰å·²ç»åˆ é™¤äº†ï¼Œæµç¨‹æ‰§è¡Œçš„å†å²ä¿¡æ¯é€šè¿‡å‰é¢çš„åˆ†æï¼Œä¾ç„¶ä¿å­˜åœ¨activitiçš„act_hi_*ç›¸å…³çš„è¡¨ä¸­ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥æŸ¥è¯¢æµç¨‹æ‰§è¡Œçš„å†å²ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡HistoryServiceæ¥æŸ¥çœ‹ç›¸å…³çš„å†å²è®°å½•ã€‚ 12345678910111213141516171819202122232425262728 /** * æŸ¥çœ‹å†å²ä¿¡æ¯ */ @Test public void findHistoryInfo()&#123;// è·å–å¼•æ“ ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// è·å–HistoryService HistoryService historyService = processEngine.getHistoryService();// è·å– actinstè¡¨çš„æŸ¥è¯¢å¯¹è±¡ HistoricActivityInstanceQuery instanceQuery = historyService.createHistoricActivityInstanceQuery();// æŸ¥è¯¢ actinstè¡¨ï¼Œæ¡ä»¶ï¼šæ ¹æ® InstanceId æŸ¥è¯¢// instanceQuery.processInstanceId(&quot;2501&quot;);// æŸ¥è¯¢ actinstè¡¨ï¼Œæ¡ä»¶ï¼šæ ¹æ® DefinitionId æŸ¥è¯¢ instanceQuery.processDefinitionId(&quot;myEvection:1:4&quot;);// å¢åŠ æ’åºæ“ä½œ,orderByHistoricActivityInstanceStartTime æ ¹æ®å¼€å§‹æ—¶é—´æ’åº asc å‡åº instanceQuery.orderByHistoricActivityInstanceStartTime().asc();// æŸ¥è¯¢æ‰€æœ‰å†…å®¹ List&lt;HistoricActivityInstance&gt; activityInstanceList = instanceQuery.list();// è¾“å‡º for (HistoricActivityInstance hi : activityInstanceList) &#123; System.out.println(hi.getActivityId()); System.out.println(hi.getActivityName()); System.out.println(hi.getProcessDefinitionId()); System.out.println(hi.getProcessInstanceId()); System.out.println(&quot;&lt;==========================&gt;&quot;); &#125; &#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Activiti7","slug":"Activiti7","permalink":"https://guoshunfa.com/tags/Activiti7/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆActiviti7 è¿›é˜¶","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/23é›†æˆæµç¨‹å¼•æ“/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆActiviti7-è¿›é˜¶","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.248Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆActiviti7-è¿›é˜¶/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90Activiti7-%E8%BF%9B%E9%98%B6/","excerpt":"","text":"ä¸€ã€æµç¨‹å®ä¾‹ä»€ä¹ˆæ˜¯æµç¨‹å®ä¾‹æµç¨‹å®ä¾‹ï¼ˆProcessInstanceï¼‰ä»£è¡¨æµç¨‹å®šä¹‰çš„æ‰§è¡Œå®ä¾‹ã€‚ ä¸€ä¸ªæµç¨‹å®ä¾‹åŒ…æ‹¬äº†æ‰€æœ‰çš„è¿è¡ŒèŠ‚ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªå¯¹è±¡æ¥äº†è§£å½“å‰æµç¨‹å®ä¾‹çš„è¿›åº¦ç­‰ä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼šç”¨æˆ·æˆ–ç¨‹åºæŒ‰ç…§æµç¨‹å®šä¹‰å†…å®¹å‘èµ·ä¸€ä¸ªæµç¨‹ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚ æµç¨‹å®šä¹‰å’Œæµç¨‹å®ä¾‹çš„å›¾è§£ï¼š å¯åŠ¨æµç¨‹å®ä¾‹ å¹¶æ·»åŠ Businesskeyï¼ˆä¸šåŠ¡æ ‡è¯†ï¼‰æµç¨‹å®šä¹‰éƒ¨ç½²åœ¨activitiåï¼Œå°±å¯ä»¥åœ¨ç³»ç»Ÿä¸­é€šè¿‡activitiå»ç®¡ç†è¯¥æµç¨‹çš„æ‰§è¡Œï¼Œæ‰§è¡Œæµç¨‹è¡¨ç¤ºæµç¨‹çš„ä¸€æ¬¡æ‰§è¡Œã€‚ æ¯”å¦‚éƒ¨ç½²ç³»ç»Ÿå‡ºå·®æµç¨‹åï¼Œå¦‚æœæŸç”¨æˆ·è¦ç”³è¯·å‡ºå·®è¿™æ—¶å°±éœ€è¦æ‰§è¡Œè¿™ä¸ªæµç¨‹ï¼Œå¦‚æœå¦å¤–ä¸€ä¸ªç”¨æˆ·ä¹Ÿè¦ç”³è¯·å‡ºå·®åˆ™ä¹Ÿéœ€è¦æ‰§è¡Œè¯¥æµç¨‹ï¼Œæ¯ä¸ªæ‰§è¡Œäº’ä¸å½±å“ï¼Œæ¯ä¸ªæ‰§è¡Œæ˜¯å•ç‹¬çš„æµç¨‹å®ä¾‹ã€‚ å¯åŠ¨æµç¨‹å®ä¾‹æ—¶ï¼ŒæŒ‡å®šçš„businesskeyï¼Œå°±ä¼šåœ¨act_ru_execution #æµç¨‹å®ä¾‹çš„æ‰§è¡Œè¡¨ä¸­å­˜å‚¨businesskeyã€‚ Businesskeyï¼šä¸šåŠ¡æ ‡è¯†ï¼Œé€šå¸¸ä¸ºä¸šåŠ¡è¡¨çš„ä¸»é”®ï¼Œä¸šåŠ¡æ ‡è¯†å’Œæµç¨‹å®ä¾‹ä¸€ä¸€å¯¹åº”ã€‚ä¸šåŠ¡æ ‡è¯†æ¥æºäºä¸šåŠ¡ç³»ç»Ÿã€‚å­˜å‚¨ä¸šåŠ¡æ ‡è¯†å°±æ˜¯æ ¹æ®ä¸šåŠ¡æ ‡è¯†æ¥å…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®ã€‚ æ¯”å¦‚ï¼šå‡ºå·®æµç¨‹å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œå°±å¯ä»¥å°†å‡ºå·®å•çš„idä½œä¸ºä¸šåŠ¡æ ‡è¯†å­˜å‚¨åˆ°activitiä¸­ï¼Œå°†æ¥æŸ¥è¯¢activitiçš„æµç¨‹å®ä¾‹ä¿¡æ¯å°±å¯ä»¥è·å–å‡ºå·®å•çš„idä»è€Œå…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿæ•°æ®åº“å¾—åˆ°å‡ºå·®å•ä¿¡æ¯ã€‚ 12345678910111213141516 /** * å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ·»åŠ businessKey */ @Test public void addBusinessKey()&#123;// 1ã€å¾—åˆ°ProcessEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// 2ã€å¾—åˆ°RunTimeService RuntimeService runtimeService = processEngine.getRuntimeService();// 3ã€å¯åŠ¨æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¿˜è¦æŒ‡å®šä¸šåŠ¡æ ‡è¯†businessKeyï¼Œä¹Ÿå°±æ˜¯å‡ºå·®ç”³è¯·å•idï¼Œè¿™é‡Œæ˜¯1001 ProcessInstance processInstance = runtimeService. startProcessInstanceByKey(&quot;myEvection&quot;,&quot;1001&quot;);// 4ã€è¾“å‡ºprocessInstanceç›¸å…³å±æ€§ System.out.println(&quot;ä¸šåŠ¡id==&quot;+processInstance.getBusinessKey()); &#125; Activitiçš„act_ru_executionä¸­å­˜å‚¨ä¸šåŠ¡æ ‡è¯†ï¼š æ“ä½œæ•°æ®åº“è¡¨å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ“ä½œå¦‚ä¸‹æ•°æ®åº“è¡¨ï¼š SELECT * FROM act_ru_execution #æµç¨‹å®ä¾‹æ‰§è¡Œè¡¨ï¼Œè®°å½•å½“å‰æµç¨‹å®ä¾‹çš„æ‰§è¡Œæƒ…å†µ è¯´æ˜ï¼š æµç¨‹å®ä¾‹æ‰§è¡Œï¼Œå¦‚æœå½“å‰åªæœ‰ä¸€ä¸ªåˆ†æ”¯æ—¶ï¼Œä¸€ä¸ªæµç¨‹å®ä¾‹åªæœ‰ä¸€æ¡è®°å½•ä¸”æ‰§è¡Œè¡¨çš„ä¸»é”®idå’Œæµç¨‹å®ä¾‹idç›¸åŒï¼Œå¦‚æœå½“å‰æœ‰å¤šä¸ªåˆ†æ”¯æ­£åœ¨è¿è¡Œåˆ™è¯¥æ‰§è¡Œè¡¨ä¸­æœ‰å¤šæ¡è®°å½•ï¼Œå­˜åœ¨æ‰§è¡Œè¡¨çš„ä¸»é”®å’Œæµç¨‹å®ä¾‹idä¸ç›¸åŒçš„è®°å½•ã€‚ä¸è®ºå½“å‰æœ‰å‡ ä¸ªåˆ†æ”¯æ€»ä¼šæœ‰ä¸€æ¡è®°å½•çš„æ‰§è¡Œè¡¨çš„ä¸»é”®å’Œæµç¨‹å®ä¾‹idç›¸åŒ ä¸€ä¸ªæµç¨‹å®ä¾‹è¿è¡Œå®Œæˆï¼Œæ­¤è¡¨ä¸­ä¸æµç¨‹å®ä¾‹ç›¸å…³çš„è®°å½•åˆ é™¤ã€‚ SELECT * FROM act_ru_task #ä»»åŠ¡æ‰§è¡Œè¡¨ï¼Œè®°å½•å½“å‰æ‰§è¡Œçš„ä»»åŠ¡ è¯´æ˜ï¼šå¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæµç¨‹å½“å‰æ‰§è¡Œåˆ°ç¬¬ä¸€ä¸ªä»»åŠ¡ç»“ç‚¹ï¼Œæ­¤è¡¨ä¼šæ’å…¥ä¸€æ¡è®°å½•è¡¨ç¤ºå½“å‰ä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼Œå¦‚æœä»»åŠ¡å®Œæˆåˆ™è®°å½•åˆ é™¤ã€‚ SELECT * FROM act_ru_identitylink #ä»»åŠ¡å‚ä¸è€…ï¼Œè®°å½•å½“å‰å‚ä¸ä»»åŠ¡çš„ç”¨æˆ·æˆ–ç»„ SELECT * FROM act_hi_procinst #æµç¨‹å®ä¾‹å†å²è¡¨ æµç¨‹å®ä¾‹å¯åŠ¨ï¼Œä¼šåœ¨æ­¤è¡¨æ’å…¥ä¸€æ¡è®°å½•ï¼Œæµç¨‹å®ä¾‹è¿è¡Œå®Œæˆè®°å½•ä¹Ÿä¸ä¼šåˆ é™¤ã€‚ SELECT * FROM act_hi_taskinst #ä»»åŠ¡å†å²è¡¨ï¼Œè®°å½•æ‰€æœ‰ä»»åŠ¡ å¼€å§‹ä¸€ä¸ªä»»åŠ¡ï¼Œä¸ä»…åœ¨act_ru_taskè¡¨æ’å…¥è®°å½•ï¼Œä¹Ÿä¼šåœ¨å†å²ä»»åŠ¡è¡¨æ’å…¥ä¸€æ¡è®°å½•ï¼Œä»»åŠ¡å†å²è¡¨çš„ä¸»é”®å°±æ˜¯ä»»åŠ¡idï¼Œä»»åŠ¡å®Œæˆæ­¤è¡¨è®°å½•ä¸åˆ é™¤ã€‚ SELECT * FROM act_hi_actinst #æ´»åŠ¨å†å²è¡¨ï¼Œè®°å½•æ‰€æœ‰æ´»åŠ¨ æ´»åŠ¨åŒ…æ‹¬ä»»åŠ¡ï¼Œæ‰€ä»¥æ­¤è¡¨ä¸­ä¸ä»…è®°å½•äº†ä»»åŠ¡ï¼Œè¿˜è®°å½•äº†æµç¨‹æ‰§è¡Œè¿‡ç¨‹çš„å…¶å®ƒæ´»åŠ¨ï¼Œæ¯”å¦‚å¼€å§‹äº‹ä»¶ã€ç»“æŸäº‹ä»¶ã€‚ æŸ¥è¯¢æµç¨‹å®ä¾‹æµç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¯ä»¥æŸ¥è¯¢æµç¨‹å®ä¾‹çš„çŠ¶æ€ï¼Œå½“å‰è¿è¡Œç»“ç‚¹ç­‰ä¿¡æ¯ã€‚ 123456789101112131415161718192021222324@Test public void queryProcessInstance() &#123; // æµç¨‹å®šä¹‰key String processDefinitionKey = &quot;evection&quot;; ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); // è·å–RunTimeService RuntimeService runtimeService = processEngine.getRuntimeService(); List&lt;ProcessInstance&gt; list = runtimeService .createProcessInstanceQuery() .processDefinitionKey(processDefinitionKey)// .list(); for (ProcessInstance processInstance : list) &#123; System.out.println(&quot;----------------------------&quot;); System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + processInstance.getProcessInstanceId()); System.out.println(&quot;æ‰€å±æµç¨‹å®šä¹‰idï¼š&quot; + processInstance.getProcessDefinitionId()); System.out.println(&quot;æ˜¯å¦æ‰§è¡Œå®Œæˆï¼š&quot; + processInstance.isEnded()); System.out.println(&quot;æ˜¯å¦æš‚åœï¼š&quot; + processInstance.isSuspended()); System.out.println(&quot;å½“å‰æ´»åŠ¨æ ‡è¯†ï¼š&quot; + processInstance.getActivityId()); &#125; &#125; å…³è”BusinessKeyéœ€æ±‚ï¼š åœ¨activitiå®é™…åº”ç”¨æ—¶ï¼ŒæŸ¥è¯¢æµç¨‹å®ä¾‹åˆ—è¡¨æ—¶å¯èƒ½è¦æ˜¾ç¤ºå‡ºä¸šåŠ¡ç³»ç»Ÿçš„ä¸€äº›ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šæŸ¥è¯¢å½“å‰è¿è¡Œçš„å‡ºå·®æµç¨‹åˆ—è¡¨éœ€è¦å°†å‡ºå·®å•åç§°ã€å‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯æ˜¾ç¤ºå‡ºæ¥ï¼Œå‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­å­˜åœ¨ï¼Œè€Œå¹¶æ²¡æœ‰åœ¨activitiæ•°æ®åº“ä¸­å­˜åœ¨ï¼Œæ‰€ä»¥æ˜¯æ— æ³•é€šè¿‡activitiçš„apiæŸ¥è¯¢åˆ°å‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯ã€‚ å®ç°ï¼š åœ¨æŸ¥è¯¢æµç¨‹å®ä¾‹æ—¶ï¼Œé€šè¿‡businessKeyï¼ˆä¸šåŠ¡æ ‡è¯† ï¼‰å…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿçš„å‡ºå·®å•è¡¨ï¼ŒæŸ¥è¯¢å‡ºå‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯ã€‚ é€šè¿‡ä¸‹é¢çš„ä»£ç å°±å¯ä»¥è·å–activitiä¸­æ‰€å¯¹åº”å®ä¾‹ä¿å­˜çš„ä¸šåŠ¡Keyã€‚è€Œè¿™ä¸ªä¸šåŠ¡Keyä¸€èˆ¬éƒ½ä¼šä¿å­˜ç›¸å…³è”çš„ä¸šåŠ¡æ“ä½œè¡¨çš„ä¸»é”®ï¼Œå†é€šè¿‡ä¸»é”®IDå»æŸ¥è¯¢ä¸šåŠ¡ä¿¡æ¯ï¼Œæ¯”å¦‚é€šè¿‡å‡ºå·®å•çš„IDï¼Œå»æŸ¥è¯¢æ›´å¤šçš„è¯·å‡ä¿¡æ¯ï¼ˆå‡ºå·®äººï¼Œå‡ºå·®æ—¶é—´ï¼Œå‡ºå·®å¤©æ•°ï¼Œå‡ºå·®ç›®çš„åœ°ç­‰ï¼‰ String businessKey &#x3D; processInstance.getBusinessKey(); åœ¨activitiçš„act_ru_executionè¡¨ï¼Œå­—æ®µBUSINESS_KEYå°±æ˜¯å­˜æ”¾ä¸šåŠ¡KEYçš„ã€‚ æŒ‚èµ·ã€æ¿€æ´»æµç¨‹å®ä¾‹æŸäº›æƒ…å†µå¯èƒ½ç”±äºæµç¨‹å˜æ›´éœ€è¦å°†å½“å‰è¿è¡Œçš„æµç¨‹æš‚åœè€Œä¸æ˜¯ç›´æ¥åˆ é™¤ï¼Œæµç¨‹æš‚åœåå°†ä¸ä¼šç»§ç»­æ‰§è¡Œã€‚ å…¨éƒ¨æµç¨‹å®ä¾‹æŒ‚èµ·æ“ä½œæµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¯¥æµç¨‹å®šä¹‰ä¸‹è¾¹æ‰€æœ‰çš„æµç¨‹å®ä¾‹å…¨éƒ¨æš‚åœï¼š æµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€è¯¥æµç¨‹å®šä¹‰å°†ä¸å…è®¸å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¯¥æµç¨‹å®šä¹‰ä¸‹æ‰€æœ‰çš„æµç¨‹å®ä¾‹å°†å…¨éƒ¨æŒ‚èµ·æš‚åœæ‰§è¡Œã€‚ 1234567891011121314151617181920212223242526272829303132333435/** * å…¨éƒ¨æµç¨‹å®ä¾‹æŒ‚èµ·ä¸æ¿€æ´» */ @Test public void SuspendAllProcessInstance()&#123;// è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// è·å–repositoryService RepositoryService repositoryService = processEngine.getRepositoryService();// æŸ¥è¯¢æµç¨‹å®šä¹‰çš„å¯¹è±¡ ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery(). processDefinitionKey(&quot;myEvection&quot;). singleResult();// å¾—åˆ°å½“å‰æµç¨‹å®šä¹‰çš„å®ä¾‹æ˜¯å¦éƒ½ä¸ºæš‚åœçŠ¶æ€ boolean suspended = processDefinition.isSuspended();// æµç¨‹å®šä¹‰id String processDefinitionId = processDefinition.getId();// åˆ¤æ–­æ˜¯å¦ä¸ºæš‚åœ if(suspended)&#123;// å¦‚æœæ˜¯æš‚åœï¼Œå¯ä»¥æ‰§è¡Œæ¿€æ´»æ“ä½œ ,å‚æ•°1 ï¼šæµç¨‹å®šä¹‰id ï¼Œå‚æ•°2ï¼šæ˜¯å¦æ¿€æ´»ï¼Œå‚æ•°3ï¼šæ¿€æ´»æ—¶é—´ repositoryService.activateProcessDefinitionById(processDefinitionId, true, null ); System.out.println(&quot;æµç¨‹å®šä¹‰ï¼š&quot;+processDefinitionId+&quot;,å·²æ¿€æ´»&quot;); &#125;else&#123;// å¦‚æœæ˜¯æ¿€æ´»çŠ¶æ€ï¼Œå¯ä»¥æš‚åœï¼Œå‚æ•°1 ï¼šæµç¨‹å®šä¹‰id ï¼Œå‚æ•°2ï¼šæ˜¯å¦æš‚åœï¼Œå‚æ•°3ï¼šæš‚åœæ—¶é—´ repositoryService.suspendProcessDefinitionById(processDefinitionId, true, null); System.out.println(&quot;æµç¨‹å®šä¹‰ï¼š&quot;+processDefinitionId+&quot;,å·²æŒ‚èµ·&quot;); &#125; &#125; å•ä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·æ“ä½œæµç¨‹å®ä¾‹å¯¹è±¡ï¼Œé’ˆå¯¹å•ä¸ªæµç¨‹æ‰§è¡ŒæŒ‚èµ·æ“ä½œï¼ŒæŸä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·åˆ™æ­¤æµç¨‹ä¸å†ç»§ç»­æ‰§è¡Œï¼Œå®Œæˆè¯¥æµç¨‹å®ä¾‹çš„å½“å‰ä»»åŠ¡å°†æŠ¥å¼‚å¸¸ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/** * å•ä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·ä¸æ¿€æ´» */ @Test public void SuspendSingleProcessInstance()&#123;// è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// RuntimeService RuntimeService runtimeService = processEngine.getRuntimeService();// æŸ¥è¯¢æµç¨‹å®šä¹‰çš„å¯¹è±¡ ProcessInstance processInstance = runtimeService. createProcessInstanceQuery(). processInstanceId(&quot;15001&quot;). singleResult();// å¾—åˆ°å½“å‰æµç¨‹å®šä¹‰çš„å®ä¾‹æ˜¯å¦éƒ½ä¸ºæš‚åœçŠ¶æ€ boolean suspended = processInstance.isSuspended();// æµç¨‹å®šä¹‰id String processDefinitionId = processInstance.getId();// åˆ¤æ–­æ˜¯å¦ä¸ºæš‚åœ if(suspended)&#123;// å¦‚æœæ˜¯æš‚åœï¼Œå¯ä»¥æ‰§è¡Œæ¿€æ´»æ“ä½œ ,å‚æ•°ï¼šæµç¨‹å®šä¹‰id runtimeService.activateProcessInstanceById(processDefinitionId); System.out.println(&quot;æµç¨‹å®šä¹‰ï¼š&quot;+processDefinitionId+&quot;,å·²æ¿€æ´»&quot;); &#125;else&#123;// å¦‚æœæ˜¯æ¿€æ´»çŠ¶æ€ï¼Œå¯ä»¥æš‚åœï¼Œå‚æ•°ï¼šæµç¨‹å®šä¹‰id runtimeService.suspendProcessInstanceById( processDefinitionId); System.out.println(&quot;æµç¨‹å®šä¹‰ï¼š&quot;+processDefinitionId+&quot;,å·²æŒ‚èµ·&quot;); &#125; &#125; /** * æµ‹è¯•å®Œæˆä¸ªäººä»»åŠ¡ */ @Test public void completTask()&#123;// è·å–å¼•æ“ ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// è·å–æ“ä½œä»»åŠ¡çš„æœåŠ¡ TaskService TaskService taskService = processEngine.getTaskService();// å®Œæˆä»»åŠ¡,å‚æ•°ï¼šæµç¨‹å®ä¾‹id,å®Œæˆzhangsançš„ä»»åŠ¡ Task task = taskService.createTaskQuery() .processInstanceId(&quot;15001&quot;) .taskAssignee(&quot;rose&quot;) .singleResult(); System.out.println(&quot;æµç¨‹å®ä¾‹id=&quot;+task.getProcessInstanceId()); System.out.println(&quot;ä»»åŠ¡Id=&quot;+task.getId()); System.out.println(&quot;ä»»åŠ¡è´Ÿè´£äºº=&quot;+task.getAssignee()); System.out.println(&quot;ä»»åŠ¡åç§°=&quot;+task.getName()); taskService.complete(task.getId()); &#125; äºŒã€ä¸ªäººä»»åŠ¡2.1ã€åˆ†é…ä»»åŠ¡è´Ÿè´£äºº2.1.1ã€å›ºå®šåˆ†é…åœ¨è¿›è¡Œä¸šåŠ¡æµç¨‹å»ºæ¨¡æ—¶æŒ‡å®šå›ºå®šçš„ä»»åŠ¡è´Ÿè´£äººï¼Œ å¦‚å›¾ï¼š å¹¶åœ¨ properties è§†å›¾ä¸­ï¼Œå¡«å†™ Assignee é¡¹ä¸ºä»»åŠ¡è´Ÿè´£äººã€‚ 2.1.2ã€è¡¨è¾¾å¼åˆ†é…ç”±äºå›ºå®šåˆ†é…æ–¹å¼ï¼Œä»»åŠ¡åªç®¡ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œä»»åŠ¡ï¼Œæ‰§è¡Œåˆ°æ¯ä¸€ä¸ªä»»åŠ¡å°†æŒ‰ç…§ bpmn çš„é…ç½®å»åˆ†é…ä»»åŠ¡è´Ÿè´£äººã€‚ 2.1.2.1ã€UEL è¡¨è¾¾å¼Activiti ä½¿ç”¨ UEL è¡¨è¾¾å¼ï¼Œ UEL æ˜¯ java EE6 è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œ UELï¼ˆUnified Expression Languageï¼‰å³ ç»Ÿä¸€è¡¨è¾¾å¼è¯­è¨€ï¼Œ activiti æ”¯æŒä¸¤ä¸ª UEL è¡¨è¾¾å¼ï¼š UEL-value å’Œ UEL-methodã€‚ 1ï¼‰UEL-value å®šä¹‰å¦‚å›¾ï¼š assignee è¿™ä¸ªå˜é‡æ˜¯ activiti çš„ä¸€ä¸ªæµç¨‹å˜é‡ï¼Œ æˆ–è€…ä½¿ç”¨è¿™ç§æ–¹å¼å®šä¹‰ï¼š å¦‚å›¾ï¼š user ä¹Ÿæ˜¯ activiti çš„ä¸€ä¸ªæµç¨‹å˜é‡ï¼Œ user.assignee è¡¨ç¤ºé€šè¿‡è°ƒç”¨ user çš„ getter æ–¹æ³•è·å–å€¼ã€‚ 2ï¼‰UEL-method æ–¹å¼å¦‚å›¾ï¼š userBean æ˜¯ spring å®¹å™¨ä¸­çš„ä¸€ä¸ª beanï¼Œè¡¨ç¤ºè°ƒç”¨è¯¥ bean çš„ getUserId()æ–¹æ³•ã€‚ 3ï¼‰UEL-method ä¸ UEL-value ç»“åˆå†æ¯”å¦‚ï¼š${ldapService.findManagerForEmployee(emp)}ldapService æ˜¯ spring å®¹å™¨çš„ä¸€ä¸ª beanï¼ŒfindManagerForEmployee æ˜¯è¯¥ bean çš„ä¸€ä¸ªæ–¹æ³•ï¼Œemp æ˜¯ activitiæµç¨‹å˜é‡ï¼Œ emp ä½œä¸ºå‚æ•°ä¼ åˆ° ldapService.findManagerForEmployee æ–¹æ³•ä¸­ã€‚ 4ï¼‰å…¶å®ƒè¡¨è¾¾å¼æ”¯æŒè§£æåŸºç¡€ç±»å‹ã€ beanã€ listã€ array å’Œ mapï¼Œä¹Ÿå¯ä½œä¸ºæ¡ä»¶åˆ¤æ–­ã€‚å¦‚ä¸‹ï¼š${order.price &gt; 100 &amp;&amp; order.price &lt; 250} 2.1.2.2ã€ç¼–å†™ä»£ç é…ç½®è´Ÿè´£äºº1)å®šä¹‰ä»»åŠ¡åˆ†é…æµç¨‹å˜é‡å¦‚å›¾ï¼š 2)è®¾ç½®æµç¨‹å˜é‡åœ¨å¯åŠ¨æµç¨‹å®ä¾‹æ—¶è®¾ç½®æµç¨‹å˜é‡ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920 /** * è®¾ç½®æµç¨‹è´Ÿè´£äºº */ @Test public void assigneeUEL()&#123;// è·å–æµç¨‹å¼•æ“ ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// è·å– RuntimeService RuntimeService runtimeService = processEngine.getRuntimeService();// è®¾ç½®assigneeçš„å–å€¼ï¼Œç”¨æˆ·å¯ä»¥åœ¨ç•Œé¢ä¸Šè®¾ç½®æµç¨‹çš„æ‰§è¡Œ Map&lt;String,Object&gt; assigneeMap = new HashMap&lt;&gt;(); assigneeMap.put(&quot;assignee0&quot;,&quot;å¼ ä¸‰&quot;); assigneeMap.put(&quot;assignee1&quot;,&quot;æç»ç†&quot;); assigneeMap.put(&quot;assignee2&quot;,&quot;ç‹æ€»ç»ç†&quot;); assigneeMap.put(&quot;assignee3&quot;,&quot;èµµè´¢åŠ¡&quot;);// å¯åŠ¨æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¿˜è¦è®¾ç½®æµç¨‹å®šä¹‰çš„assigneeçš„å€¼ runtimeService.startProcessInstanceByKey(&quot;myEvection1&quot;,assigneeMap);// è¾“å‡º System.out.println(processEngine.getName()); &#125; æ‰§è¡ŒæˆåŠŸåï¼Œå¯ä»¥åœ¨act_ru_variableè¡¨ä¸­çœ‹åˆ°åˆšæ‰mapä¸­çš„æ•°æ® 2.1.2.3ã€æ³¨æ„äº‹é¡¹ç”±äºä½¿ç”¨äº†è¡¨è¾¾å¼åˆ†é…ï¼Œå¿…é¡»ä¿è¯åœ¨ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹è¡¨è¾¾å¼æ‰§è¡ŒæˆåŠŸï¼Œæ¯”å¦‚ï¼šæŸä¸ªä»»åŠ¡ä½¿ç”¨äº†è¡¨è¾¾å¼${order.price &gt; 100 &amp;&amp; order.price &lt; 250}ï¼Œå½“æ‰§è¡Œè¯¥ä»»åŠ¡æ—¶å¿…é¡»ä¿è¯ order åœ¨æµç¨‹å˜é‡ä¸­å­˜åœ¨ï¼Œå¦åˆ™ activiti å¼‚å¸¸ã€‚ 2.1.3ã€ç›‘å¬å™¨åˆ†é…å¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆå¾ˆå¤šActivitiæµç¨‹çš„ä¸šåŠ¡ã€‚ åœ¨æœ¬ç« æˆ‘ä»¬ä½¿ç”¨ç›‘å¬å™¨çš„æ–¹å¼æ¥æŒ‡å®šè´Ÿè´£äººï¼Œé‚£ä¹ˆåœ¨æµç¨‹è®¾è®¡æ—¶å°±ä¸éœ€è¦æŒ‡å®šassigneeã€‚ ä»»åŠ¡ç›‘å¬å™¨æ˜¯å‘ç”Ÿå¯¹åº”çš„ä»»åŠ¡ç›¸å…³äº‹ä»¶æ—¶æ‰§è¡Œè‡ªå®šä¹‰ java é€»è¾‘ æˆ–è¡¨è¾¾å¼ã€‚ä»»åŠ¡ç›¸å½“äº‹ä»¶åŒ…æ‹¬ï¼š Eventçš„é€‰é¡¹åŒ…å«ï¼š 1234Createï¼šä»»åŠ¡åˆ›å»ºåè§¦å‘Assignmentï¼šä»»åŠ¡åˆ†é…åè§¦å‘Deleteï¼šä»»åŠ¡å®Œæˆåè§¦å‘Allï¼šæ‰€æœ‰äº‹ä»¶å‘ç”Ÿéƒ½è§¦å‘ å®šä¹‰ä»»åŠ¡ç›‘å¬ç±»ï¼Œä¸”ç±»å¿…é¡»å®ç° org.activiti.engine.delegate.TaskListener æ¥å£ 12345678910public class MyTaskListener implements TaskListener &#123; @Override public void notify(DelegateTask delegateTask) &#123; if(delegateTask.getName().equals(&quot;åˆ›å»ºå‡ºå·®ç”³è¯·&quot;)&amp;&amp; delegateTask.getEventName().equals(&quot;create&quot;))&#123; //è¿™é‡ŒæŒ‡å®šä»»åŠ¡è´Ÿè´£äºº delegateTask.setAssignee(&quot;å¼ ä¸‰&quot;); &#125; &#125;&#125; DelegateTaskå¯¹è±¡çš„å†…å®¹å¦‚ä¸‹ï¼š 2.1.3.1ã€æ³¨æ„äº‹é¡¹ä½¿ç”¨ç›‘å¬å™¨åˆ†é…æ–¹å¼ï¼ŒæŒ‰ç…§ç›‘å¬äº‹ä»¶å»æ‰§è¡Œç›‘å¬ç±»çš„ notify æ–¹æ³•ï¼Œæ–¹æ³•å¦‚æœä¸èƒ½æ­£å¸¸æ‰§è¡Œä¹Ÿä¼šå½±å“ä»»åŠ¡çš„æ‰§è¡Œã€‚ 2.2ã€æŸ¥è¯¢ä»»åŠ¡æŸ¥è¯¢ä»»åŠ¡è´Ÿè´£äººçš„å¾…åŠä»»åŠ¡ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122// æŸ¥è¯¢å½“å‰ä¸ªäººå¾…æ‰§è¡Œçš„ä»»åŠ¡@Testpublic void findPersonalTaskList() &#123; // æµç¨‹å®šä¹‰key String processDefinitionKey = &quot;myEvection1&quot;; // ä»»åŠ¡è´Ÿè´£äºº String assignee = &quot;å¼ ä¸‰&quot;; // è·å–TaskService TaskService taskService = processEngine.getTaskService(); List&lt;Task&gt; taskList = taskService.createTaskQuery() .processDefinitionKey(processDefinitionKey) .includeProcessVariables() .taskAssignee(assignee) .list(); for (Task task : taskList) &#123; System.out.println(&quot;----------------------------&quot;); System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š &quot; + task.getProcessInstanceId()); System.out.println(&quot;ä»»åŠ¡idï¼š &quot; + task.getId()); System.out.println(&quot;ä»»åŠ¡è´Ÿè´£äººï¼š &quot; + task.getAssignee()); System.out.println(&quot;ä»»åŠ¡åç§°ï¼š &quot; + task.getName()); &#125;&#125; å…³è” businessKeyéœ€æ±‚ï¼šåœ¨ activiti å®é™…åº”ç”¨æ—¶ï¼ŒæŸ¥è¯¢å¾…åŠä»»åŠ¡å¯èƒ½è¦æ˜¾ç¤ºå‡ºä¸šåŠ¡ç³»ç»Ÿçš„ä¸€äº›ç›¸å…³ä¿¡æ¯ã€‚ æ¯”å¦‚ï¼šæŸ¥è¯¢å¾…å®¡æ‰¹å‡ºå·®ä»»åŠ¡åˆ—è¡¨éœ€è¦å°†å‡ºå·®å•çš„æ—¥æœŸã€ å‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯æ˜¾ç¤ºå‡ºæ¥ã€‚ å‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­å­˜åœ¨ï¼Œè€Œå¹¶æ²¡æœ‰åœ¨ activiti æ•°æ®åº“ä¸­å­˜åœ¨ï¼Œæ‰€ä»¥æ˜¯æ— æ³•é€šè¿‡ activiti çš„ api æŸ¥è¯¢åˆ°å‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯ã€‚å®ç°ï¼šåœ¨æŸ¥è¯¢å¾…åŠä»»åŠ¡æ—¶ï¼Œé€šè¿‡ businessKeyï¼ˆä¸šåŠ¡æ ‡è¯† ï¼‰å…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿçš„å‡ºå·®å•è¡¨ï¼ŒæŸ¥è¯¢å‡ºå‡ºå·®å¤©æ•°ç­‰ä¿¡æ¯ã€‚ 12345678910111213141516171819202122232425@Test public void findProcessInstance()&#123;// è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// è·å–TaskService TaskService taskService = processEngine.getTaskService();// è·å–RuntimeService RuntimeService runtimeService = processEngine.getRuntimeService();// æŸ¥è¯¢æµç¨‹å®šä¹‰çš„å¯¹è±¡ Task task = taskService.createTaskQuery() .processDefinitionKey(&quot;myEvection1&quot;) .taskAssignee(&quot;å¼ ä¸‰&quot;) .singleResult();// ä½¿ç”¨taskå¯¹è±¡è·å–å®ä¾‹id String processInstanceId = task.getProcessInstanceId();// ä½¿ç”¨å®ä¾‹idï¼Œè·å–æµç¨‹å®ä¾‹å¯¹è±¡ ProcessInstance processInstance = runtimeService.createProcessInstanceQuery() .processInstanceId(processInstanceId) .singleResult();// ä½¿ç”¨processInstanceï¼Œå¾—åˆ° businessKey String businessKey = processInstance.getBusinessKey(); System.out.println(&quot;businessKey==&quot;+businessKey); &#125; 2.3ã€åŠç†ä»»åŠ¡æ³¨æ„ï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå®Œæˆä»»åŠ¡å‰éœ€è¦æ ¡éªŒä»»åŠ¡çš„è´Ÿè´£äººæ˜¯å¦å…·æœ‰è¯¥ä»»åŠ¡çš„åŠç†æƒé™ ã€‚ 12345678910111213141516171819202122232425/** * å®Œæˆä»»åŠ¡ï¼Œåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™ */ @Test public void completTask() &#123; //ä»»åŠ¡id String taskId = &quot;15005&quot;;// ä»»åŠ¡è´Ÿè´£äºº String assingee = &quot;å¼ ä¸‰&quot;; //è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); // åˆ›å»ºTaskService TaskService taskService = processEngine.getTaskService();// å®Œæˆä»»åŠ¡å‰ï¼Œéœ€è¦æ ¡éªŒè¯¥è´Ÿè´£äººå¯ä»¥å®Œæˆå½“å‰ä»»åŠ¡// æ ¡éªŒæ–¹æ³•ï¼š// æ ¹æ®ä»»åŠ¡idå’Œä»»åŠ¡è´Ÿè´£äººæŸ¥è¯¢å½“å‰ä»»åŠ¡ï¼Œå¦‚æœæŸ¥åˆ°è¯¥ç”¨æˆ·æœ‰æƒé™ï¼Œå°±å®Œæˆ Task task = taskService.createTaskQuery() .taskId(taskId) .taskAssignee(assingee) .singleResult(); if(task != null)&#123; taskService.complete(taskId); System.out.println(&quot;å®Œæˆä»»åŠ¡&quot;); &#125; &#125; ä¸‰ã€æµç¨‹å˜é‡3.1ã€ä»€ä¹ˆæ˜¯æµç¨‹å˜é‡æµç¨‹å˜é‡åœ¨ activiti ä¸­æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„è§’è‰²ï¼Œæµç¨‹è¿è½¬æœ‰æ—¶éœ€è¦é æµç¨‹å˜é‡ï¼Œä¸šåŠ¡ç³»ç»Ÿå’Œ activitiç»“åˆæ—¶å°‘ä¸äº†æµç¨‹å˜é‡ï¼Œæµç¨‹å˜é‡å°±æ˜¯ activiti åœ¨ç®¡ç†å·¥ä½œæµæ—¶æ ¹æ®ç®¡ç†éœ€è¦è€Œè®¾ç½®çš„å˜é‡ã€‚æ¯”å¦‚ï¼šåœ¨å‡ºå·®ç”³è¯·æµç¨‹æµè½¬æ—¶å¦‚æœå‡ºå·®å¤©æ•°å¤§äº 3 å¤©åˆ™ç”±æ€»ç»ç†å®¡æ ¸ï¼Œå¦åˆ™ç”±äººäº‹ç›´æ¥å®¡æ ¸ï¼Œ å‡ºå·®å¤©æ•°å°±å¯ä»¥è®¾ç½®ä¸ºæµç¨‹å˜é‡ï¼Œåœ¨æµç¨‹æµè½¬æ—¶ä½¿ç”¨ã€‚ æ³¨æ„ï¼šè™½ç„¶æµç¨‹å˜é‡ä¸­å¯ä»¥å­˜å‚¨ä¸šåŠ¡æ•°æ®å¯ä»¥é€šè¿‡activitiçš„apiæŸ¥è¯¢æµç¨‹å˜é‡ä»è€Œå®ç° æŸ¥è¯¢ä¸šåŠ¡æ•°æ®ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™æ ·ä½¿ç”¨ï¼Œå› ä¸ºä¸šåŠ¡æ•°æ®æŸ¥è¯¢ç”±ä¸šåŠ¡ç³»ç»Ÿè´Ÿè´£ï¼Œactivitiè®¾ç½®æµç¨‹å˜é‡æ˜¯ä¸ºäº†æµç¨‹æ‰§è¡Œéœ€è¦è€Œåˆ›å»ºã€‚ 3.2ã€æµç¨‹å˜é‡ç±»å‹å¦‚æœå°† pojo å­˜å‚¨åˆ°æµç¨‹å˜é‡ä¸­ï¼Œå¿…é¡»å®ç°åºåˆ—åŒ–æ¥å£ serializableï¼Œä¸ºäº†é˜²æ­¢ç”±äºæ–°å¢å­—æ®µæ— æ³•ååºåˆ—åŒ–ï¼Œéœ€è¦ç”Ÿæˆ serialVersionUIDã€‚ 3.3ã€æµç¨‹å˜é‡ä½œç”¨åŸŸæµç¨‹å˜é‡çš„ä½œç”¨åŸŸå¯ä»¥æ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹(processInstance)ï¼Œæˆ–ä¸€ä¸ªä»»åŠ¡(task)ï¼Œæˆ–ä¸€ä¸ªæ‰§è¡Œå®ä¾‹(execution) 3.3.1ã€globaå˜é‡æµç¨‹å˜é‡çš„é»˜è®¤ä½œç”¨åŸŸæ˜¯æµç¨‹å®ä¾‹ã€‚å½“ä¸€ä¸ªæµç¨‹å˜é‡çš„ä½œç”¨åŸŸä¸ºæµç¨‹å®ä¾‹æ—¶ï¼Œå¯ä»¥ç§°ä¸º global å˜é‡ æ³¨æ„ï¼š å¦‚ï¼š Globalå˜é‡ï¼šuserIdï¼ˆå˜é‡åï¼‰ã€zhangsanï¼ˆå˜é‡å€¼ï¼‰ global å˜é‡ä¸­å˜é‡åä¸å…è®¸é‡å¤ï¼Œè®¾ç½®ç›¸åŒåç§°çš„å˜é‡ï¼Œåè®¾ç½®çš„å€¼ä¼šè¦†ç›–å‰è®¾ç½®çš„å˜é‡å€¼ã€‚ 3.3.2ã€localå˜é‡ä»»åŠ¡å’Œæ‰§è¡Œå®ä¾‹ä»…ä»…æ˜¯é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸ªæ‰§è¡Œå®ä¾‹èŒƒå›´ï¼ŒèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§ï¼Œ ç§°ä¸º local å˜é‡ã€‚ Local å˜é‡ç”±äºåœ¨ä¸åŒçš„ä»»åŠ¡æˆ–ä¸åŒçš„æ‰§è¡Œå®ä¾‹ä¸­ï¼Œä½œç”¨åŸŸäº’ä¸å½±å“ï¼Œå˜é‡åå¯ä»¥ç›¸åŒæ²¡æœ‰å½±å“ã€‚Local å˜é‡åä¹Ÿå¯ä»¥å’Œ global å˜é‡åç›¸åŒï¼Œæ²¡æœ‰å½±å“ã€‚ 3.4ã€æµç¨‹å˜é‡çš„ä½¿ç”¨æ–¹æ³•3.4.1ã€åœ¨å±æ€§ä¸Šä½¿ç”¨UELè¡¨è¾¾å¼å¯ä»¥åœ¨ assignee å¤„è®¾ç½® UEL è¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼çš„å€¼ä¸ºä»»åŠ¡çš„è´Ÿè´£äººï¼Œæ¯”å¦‚ï¼š ${assignee}ï¼Œ assignee å°±æ˜¯ä¸€ä¸ªæµç¨‹å˜é‡åç§°ã€‚ Activitiè·å–UELè¡¨è¾¾å¼çš„å€¼ï¼Œå³æµç¨‹å˜é‡assigneeçš„å€¼ ï¼Œå°†assigneeçš„å€¼ä½œä¸ºä»»åŠ¡çš„è´Ÿè´£äººè¿›è¡Œä»»åŠ¡åˆ†é… 3.4.2ã€åœ¨è¿çº¿ä¸Šä½¿ç”¨UELè¡¨è¾¾å¼å¯ä»¥åœ¨è¿çº¿ä¸Šè®¾ç½®UELè¡¨è¾¾å¼ï¼Œå†³å®šæµç¨‹èµ°å‘ã€‚ æ¯”å¦‚ï¼š${price&lt;10000} ã€‚priceå°±æ˜¯ä¸€ä¸ªæµç¨‹å˜é‡åç§°ï¼Œuelè¡¨è¾¾å¼ç»“æœç±»å‹ä¸ºå¸ƒå°”ç±»å‹ã€‚ å¦‚æœUELè¡¨è¾¾å¼æ˜¯trueï¼Œè¦å†³å®š æµç¨‹æ‰§è¡Œèµ°å‘ã€‚ 3.5ã€ä½¿ç”¨Globalå˜é‡æ§åˆ¶æµç¨‹3.5.1ã€éœ€æ±‚å‘˜å·¥åˆ›å»ºå‡ºå·®ç”³è¯·å•ï¼Œç”±éƒ¨é—¨ç»ç†å®¡æ ¸ï¼Œéƒ¨é—¨ç»ç†å®¡æ ¸é€šè¿‡åå‡ºå·®3å¤©åŠä»¥ä¸‹ç”±äººè´¢åŠ¡ç›´æ¥å®¡æ‰¹ï¼Œ3å¤©ä»¥ä¸Šå…ˆç”±æ€»ç»ç†å®¡æ ¸ï¼Œæ€»ç»ç†å®¡æ ¸é€šè¿‡å†ç”±è´¢åŠ¡å®¡æ‰¹ã€‚ 3.5.2ã€æµç¨‹å®šä¹‰1ï¼‰ã€å‡ºå·®å¤©æ•°å¤§äºç­‰äº3è¿çº¿æ¡ä»¶ ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡å‚æ•°å‘½åï¼Œå¦‚evection.numï¼š 2ï¼‰ã€å‡ºå·®å¤©æ•°å°äº3è¿çº¿æ¡ä»¶ ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡å‚æ•°å‘½åï¼Œå¦‚ï¼š 3.5.3ã€è®¾ç½®globalæµç¨‹å˜é‡åœ¨éƒ¨é—¨ç»ç†å®¡æ ¸å‰è®¾ç½®æµç¨‹å˜é‡ï¼Œå˜é‡å€¼ä¸ºå‡ºå·®å•ä¿¡æ¯ï¼ˆåŒ…æ‹¬å‡ºå·®å¤©æ•°ï¼‰ï¼Œéƒ¨é—¨ç»ç†å®¡æ ¸åå¯ä»¥æ ¹æ®æµç¨‹å˜é‡çš„å€¼å†³å®šæµç¨‹èµ°å‘ã€‚ åœ¨è®¾ç½®æµç¨‹å˜é‡æ—¶ï¼Œå¯ä»¥åœ¨å¯åŠ¨æµç¨‹æ—¶è®¾ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨ä»»åŠ¡åŠç†æ—¶è®¾ç½® 3.5.3.1ã€åˆ›å»ºPOJOå¯¹è±¡åˆ›å»ºå‡ºå·®ç”³è¯·pojoå¯¹è±¡ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495package com.itheima.demo.pojo;import java.io.Serializable;import java.util.Date;/** * å‡ºå·®ç”³è¯· pojo */public class Evection implements Serializable &#123; /** * ä¸»é”®id */ private Long id; /** * å‡ºå·®ç”³è¯·å•åç§° */ private String evectionName; /** * å‡ºå·®å¤©æ•° */ private Double num; /** * é¢„è®¡å¼€å§‹æ—¶é—´ */ private Date beginDate; /** * é¢„è®¡ç»“æŸæ—¶é—´ */ private Date endDate; /** * ç›®çš„åœ° */ private String destination; /** * å‡ºå·®äº‹ç”± */ private String reson; public Long getId() &#123; return id; &#125; public void setId(Long id) &#123; this.id = id; &#125; public String getEvectionName() &#123; return evectionName; &#125; public void setEvectionName(String evectionName) &#123; this.evectionName = evectionName; &#125; public Date getBeginDate() &#123; return beginDate; &#125; public void setBeginDate(Date beginDate) &#123; this.beginDate = beginDate; &#125; public Date getEndDate() &#123; return endDate; &#125; public void setEndDate(Date endDate) &#123; this.endDate = endDate; &#125; public String getDestination() &#123; return destination; &#125; public void setDestination(String destination) &#123; this.destination = destination; &#125; public String getReson() &#123; return reson; &#125; public void setReson(String reson) &#123; this.reson = reson; &#125; public Double getNum() &#123; return num; &#125; public void setNum(Double num) &#123; this.num = num; &#125;&#125; 3.5.3.2ã€å¯åŠ¨æµç¨‹æ—¶è®¾ç½®å˜é‡åœ¨å¯åŠ¨æµç¨‹æ—¶è®¾ç½®æµç¨‹å˜é‡ï¼Œå˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªæµç¨‹å®ä¾‹ã€‚ é€šè¿‡Map&lt;key,value&gt;è®¾ç½®æµç¨‹å˜é‡ï¼Œmapä¸­å¯ä»¥è®¾ç½®å¤šä¸ªå˜é‡ï¼Œè¿™ä¸ªkeyå°±æ˜¯æµç¨‹å˜é‡çš„åå­—ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657 /** * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡çš„å€¼ */ @Test public void startProcess()&#123;// è·å–æµç¨‹å¼•æ“ ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// è·å–RunTimeService RuntimeService runtimeService = processEngine.getRuntimeService();// æµç¨‹å®šä¹‰key String key = &quot;myEvection2&quot;;// åˆ›å»ºå˜é‡é›†åˆ Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();// åˆ›å»ºå‡ºå·®pojoå¯¹è±¡ Evection evection = new Evection();// è®¾ç½®å‡ºå·®å¤©æ•° evection.setNum(2d);// å®šä¹‰æµç¨‹å˜é‡ï¼ŒæŠŠå‡ºå·®pojoå¯¹è±¡æ”¾å…¥map map.put(&quot;evection&quot;,evection);// è®¾ç½®assigneeçš„å–å€¼ï¼Œç”¨æˆ·å¯ä»¥åœ¨ç•Œé¢ä¸Šè®¾ç½®æµç¨‹çš„æ‰§è¡Œ map.put(&quot;assignee0&quot;,&quot;å¼ ä¸‰&quot;); map.put(&quot;assignee1&quot;,&quot;æç»ç†&quot;); map.put(&quot;assignee2&quot;,&quot;ç‹æ€»ç»ç†&quot;); map.put(&quot;assignee3&quot;,&quot;èµµè´¢åŠ¡&quot;);// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå¹¶è®¾ç½®æµç¨‹å˜é‡çš„å€¼ï¼ˆæŠŠmapä¼ å…¥ï¼‰ ProcessInstance processInstance = runtimeService .startProcessInstanceByKey(key, map);// è¾“å‡º System.out.println(&quot;æµç¨‹å®ä¾‹åç§°=&quot;+processInstance.getName()); System.out.println(&quot;æµç¨‹å®šä¹‰id==&quot;+processInstance.getProcessDefinitionId()); &#125; /** * å®Œæˆä»»åŠ¡ï¼Œåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™ */ @Test public void completTask() &#123; //ä»»åŠ¡id String key = &quot;myEvection2&quot;;// ä»»åŠ¡è´Ÿè´£äºº String assingee = &quot;å¼ ä¸‰&quot;; //è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); // åˆ›å»ºTaskService TaskService taskService = processEngine.getTaskService();// å®Œæˆä»»åŠ¡å‰ï¼Œéœ€è¦æ ¡éªŒè¯¥è´Ÿè´£äººå¯ä»¥å®Œæˆå½“å‰ä»»åŠ¡// æ ¡éªŒæ–¹æ³•ï¼š// æ ¹æ®ä»»åŠ¡idå’Œä»»åŠ¡è´Ÿè´£äººæŸ¥è¯¢å½“å‰ä»»åŠ¡ï¼Œå¦‚æœæŸ¥åˆ°è¯¥ç”¨æˆ·æœ‰æƒé™ï¼Œå°±å®Œæˆ Task task = taskService.createTaskQuery() .processDefinitionKey(key) .taskAssignee(assingee) .singleResult(); if(task != null)&#123; taskService.complete(task.getId()); System.out.println(&quot;ä»»åŠ¡æ‰§è¡Œå®Œæˆ&quot;); &#125; &#125; è¯´æ˜ï¼š startProcessInstanceByKey(processDefinitionKey, variables) æµç¨‹å˜é‡ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œæµç¨‹å˜é‡ä½¿ç”¨Mapå­˜å‚¨ï¼ŒåŒä¸€ä¸ªæµç¨‹å®ä¾‹è®¾ç½®å˜é‡mapä¸­keyç›¸åŒï¼Œåè€…è¦†ç›–å‰è€…ã€‚ 3.5.3.2ã€ä»»åŠ¡åŠç†æ—¶è®¾ç½®å˜é‡åœ¨å®Œæˆä»»åŠ¡æ—¶è®¾ç½®æµç¨‹å˜é‡ï¼Œè¯¥æµç¨‹å˜é‡åªæœ‰åœ¨è¯¥ä»»åŠ¡å®Œæˆåå…¶å®ƒç»“ç‚¹æ‰å¯ä½¿ç”¨è¯¥å˜é‡ï¼Œå®ƒçš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªæµç¨‹å®ä¾‹ï¼Œå¦‚æœè®¾ç½®çš„æµç¨‹å˜é‡çš„keyåœ¨æµç¨‹å®ä¾‹ä¸­å·²å­˜åœ¨ç›¸åŒçš„åå­—åˆ™åè®¾ç½®çš„å˜é‡æ›¿æ¢å‰è¾¹è®¾ç½®çš„å˜é‡ã€‚ è¿™é‡Œéœ€è¦åœ¨åˆ›å»ºå‡ºå·®å•ä»»åŠ¡å®Œæˆæ—¶è®¾ç½®æµç¨‹å˜é‡ 12345678910111213141516171819202122232425262728293031323334 /** * å®Œæˆä»»åŠ¡ï¼Œåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™ */ @Test public void completTask() &#123; //ä»»åŠ¡id String key = &quot;myEvection2&quot;;// ä»»åŠ¡è´Ÿè´£äºº String assingee = &quot;å¼ ä¸‰&quot;;// è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// åˆ›å»ºTaskService TaskService taskService = processEngine.getTaskService();// åˆ›å»ºå˜é‡é›†åˆ Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();// åˆ›å»ºå‡ºå·®pojoå¯¹è±¡ Evection evection = new Evection();// è®¾ç½®å‡ºå·®å¤©æ•° evection.setNum(2d);// å®šä¹‰æµç¨‹å˜é‡ map.put(&quot;evection&quot;,evection);// å®Œæˆä»»åŠ¡å‰ï¼Œéœ€è¦æ ¡éªŒè¯¥è´Ÿè´£äººå¯ä»¥å®Œæˆå½“å‰ä»»åŠ¡// æ ¡éªŒæ–¹æ³•ï¼š// æ ¹æ®ä»»åŠ¡idå’Œä»»åŠ¡è´Ÿè´£äººæŸ¥è¯¢å½“å‰ä»»åŠ¡ï¼Œå¦‚æœæŸ¥åˆ°è¯¥ç”¨æˆ·æœ‰æƒé™ï¼Œå°±å®Œæˆ Task task = taskService.createTaskQuery() .processDefinitionKey(key) .taskAssignee(assingee) .singleResult(); if(task != null)&#123; //å®Œæˆä»»åŠ¡æ˜¯ï¼Œè®¾ç½®æµç¨‹å˜é‡çš„å€¼ taskService.complete(task.getId(),map); System.out.println(&quot;ä»»åŠ¡æ‰§è¡Œå®Œæˆ&quot;); &#125; &#125; è¯´æ˜ï¼š é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®æµç¨‹å˜é‡ï¼Œéœ€è¦æŒ‡å®šå½“å‰ä»»åŠ¡idï¼Œå¦‚æœå½“å‰æ‰§è¡Œçš„ä»»åŠ¡idä¸å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ ä»»åŠ¡åŠç†æ—¶ä¹Ÿæ˜¯é€šè¿‡map&lt;key,value&gt;è®¾ç½®æµç¨‹å˜é‡ï¼Œä¸€æ¬¡å¯ä»¥è®¾ç½®å¤šä¸ªå˜é‡ã€‚ 3.5.3.3ã€é€šè¿‡å½“å‰æµç¨‹å®ä¾‹è®¾ç½®é€šè¿‡æµç¨‹å®ä¾‹idè®¾ç½®å…¨å±€å˜é‡ï¼Œè¯¥æµç¨‹å®ä¾‹å¿…é¡»æœªæ‰§è¡Œå®Œæˆã€‚ 123456789101112131415161718 @Test public void setGlobalVariableByExecutionId()&#123;// å½“å‰æµç¨‹å®ä¾‹æ‰§è¡Œ idï¼Œé€šå¸¸è®¾ç½®ä¸ºå½“å‰æ‰§è¡Œçš„æµç¨‹å®ä¾‹ String executionId=&quot;2601&quot;;// è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();// è·å–RuntimeService RuntimeService runtimeService = processEngine.getRuntimeService();// åˆ›å»ºå‡ºå·®pojoå¯¹è±¡ Evection evection = new Evection();// è®¾ç½®å¤©æ•° evection.setNum(3d);// é€šè¿‡æµç¨‹å®ä¾‹ idè®¾ç½®æµç¨‹å˜é‡ runtimeService.setVariable(executionId, &quot;evection&quot;, evection);// ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼// runtimeService.setVariables(executionId, variables) &#125; æ³¨æ„ï¼š executionIdå¿…é¡»å½“å‰æœªç»“æŸ æµç¨‹å®ä¾‹çš„æ‰§è¡Œidï¼Œé€šå¸¸æ­¤idè®¾ç½®æµç¨‹å®ä¾‹ çš„idã€‚ä¹Ÿå¯ä»¥é€šruntimeService.getVariable()è·å–æµç¨‹å˜é‡ã€‚ 3.5.3.4ã€é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®12345678910111213141516@Test public void setGlobalVariableByTaskId()&#123; //å½“å‰å¾…åŠä»»åŠ¡id String taskId=&quot;1404&quot;;// è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); TaskService taskService = processEngine.getTaskService(); Evection evection = new Evection(); evection.setNum(3); //é€šè¿‡ä»»åŠ¡è®¾ç½®æµç¨‹å˜é‡ taskService.setVariable(taskId, &quot;evection&quot;, evection); //ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼ //taskService.setVariables(taskId, variables) &#125; æ³¨æ„ï¼š ä»»åŠ¡idå¿…é¡»æ˜¯å½“å‰å¾…åŠä»»åŠ¡idï¼Œact_ru_taskä¸­å­˜åœ¨ã€‚å¦‚æœè¯¥ä»»åŠ¡å·²ç»“æŸï¼Œä¼šæŠ¥é”™ ä¹Ÿå¯ä»¥é€šè¿‡taskService.getVariable()è·å–æµç¨‹å˜é‡ã€‚ 3.5.4ã€æµ‹è¯•æ­£å¸¸æµ‹è¯•ï¼š â€‹ è®¾ç½®æµç¨‹å˜é‡çš„å€¼å¤§äºç­‰äº3å¤© â€‹ è®¾è®¡æµç¨‹å˜é‡çš„å€¼å°äº3å¤© å¼‚å¸¸æµ‹è¯•ï¼š â€‹ æµç¨‹å˜é‡ä¸å­˜åœ¨ â€‹ æµç¨‹å˜é‡çš„å€¼ä¸ºç©ºNULLï¼Œpriceå±æ€§ä¸ºç©º â€‹ UELè¡¨è¾¾å¼éƒ½ä¸ç¬¦åˆæ¡ä»¶ â€‹ ä¸è®¾ç½®è¿çº¿çš„æ¡ä»¶ 3.5.5ã€æ³¨æ„äº‹é¡¹1ã€ å¦‚æœUELè¡¨è¾¾å¼ä¸­æµç¨‹å˜é‡åä¸å­˜åœ¨åˆ™æŠ¥é”™ã€‚ 2ã€ å¦‚æœUELè¡¨è¾¾å¼ä¸­æµç¨‹å˜é‡å€¼ä¸ºç©ºNULLï¼Œæµç¨‹ä¸æŒ‰UELè¡¨è¾¾å¼å»æ‰§è¡Œï¼Œè€Œæµç¨‹ç»“æŸ ã€‚ 3ã€ å¦‚æœUELè¡¨è¾¾å¼éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œæµç¨‹ç»“æŸ 4ã€ å¦‚æœè¿çº¿ä¸è®¾ç½®æ¡ä»¶ï¼Œä¼šèµ°flowåºå·å°çš„é‚£æ¡çº¿ 3.5.6ã€æ“ä½œæ•°æ®åº“è¡¨è®¾ç½®æµç¨‹å˜é‡ä¼šåœ¨å½“å‰æ‰§è¡Œæµç¨‹å˜é‡è¡¨æ’å…¥è®°å½•ï¼ŒåŒæ—¶ä¹Ÿä¼šåœ¨å†å²æµç¨‹å˜é‡è¡¨ä¹Ÿæ’å…¥è®°å½•ã€‚ 12//å½“å‰æµç¨‹å˜é‡è¡¨SELECT * FROM act_ru_variable è®°å½•å½“å‰è¿è¡Œæµç¨‹å®ä¾‹å¯ä½¿ç”¨çš„æµç¨‹å˜é‡ï¼ŒåŒ…æ‹¬ globalå’Œlocalå˜é‡ Id_ï¼šä¸»é”® Type_ï¼šå˜é‡ç±»å‹ Name_ï¼šå˜é‡åç§° Execution_id_ï¼šæ‰€å±æµç¨‹å®ä¾‹æ‰§è¡Œidï¼Œglobalå’Œlocalå˜é‡éƒ½å­˜å‚¨ Proc_inst_id_ï¼šæ‰€å±æµç¨‹å®ä¾‹idï¼Œglobalå’Œlocalå˜é‡éƒ½å­˜å‚¨ Task_id_ï¼šæ‰€å±ä»»åŠ¡idï¼Œlocalå˜é‡å­˜å‚¨ Bytearray_ï¼šserializableç±»å‹å˜é‡å­˜å‚¨å¯¹åº”act_ge_bytearrayè¡¨çš„id Double_ï¼šdoubleç±»å‹å˜é‡å€¼ Long_ï¼šlongç±»å‹å˜é‡å€¼ Text_ï¼štextç±»å‹å˜é‡å€¼ 12 #å†å²æµç¨‹å˜é‡è¡¨SELECT * FROM act_hi_varinst è®°å½•æ‰€æœ‰å·²åˆ›å»ºçš„æµç¨‹å˜é‡ï¼ŒåŒ…æ‹¬ globalå’Œlocalå˜é‡ å­—æ®µæ„ä¹‰å‚è€ƒå½“å‰æµç¨‹å˜é‡è¡¨ã€‚ 3.6ã€è®¾ç½®localæµç¨‹å˜é‡3.6.1ã€ä»»åŠ¡åŠç†æ—¶è®¾ç½® ä»»åŠ¡åŠç†æ—¶è®¾ç½®localæµç¨‹å˜é‡ï¼Œå½“å‰è¿è¡Œçš„æµç¨‹å®ä¾‹åªèƒ½åœ¨è¯¥ä»»åŠ¡ç»“æŸå‰ä½¿ç”¨ï¼Œä»»åŠ¡ç»“æŸè¯¥å˜é‡æ— æ³•åœ¨å½“å‰æµç¨‹å®ä¾‹ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡æŸ¥è¯¢å†å²ä»»åŠ¡æŸ¥è¯¢ã€‚ 1234567891011121314151617181920212223/**å¤„ç†ä»»åŠ¡æ—¶è®¾ç½®localæµç¨‹å˜é‡*/@Testpublic void completTask() &#123; //ä»»åŠ¡id String taskId = &quot;1404&quot;;// è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); TaskService taskService = processEngine.getTaskService();// å®šä¹‰æµç¨‹å˜é‡ Map&lt;String, Object&gt; variables = new HashMap&lt;String, Object&gt;(); Evection evection = new Evection (); evection.setNum(3d);// å®šä¹‰æµç¨‹å˜é‡ Map&lt;String, Object&gt; variables = new HashMap&lt;String, Object&gt;();// å˜é‡åæ˜¯holidayï¼Œå˜é‡å€¼æ˜¯holidayå¯¹è±¡ variables.put(&quot;evection&quot;, evection);// è®¾ç½®localå˜é‡ï¼Œä½œç”¨åŸŸä¸ºè¯¥ä»»åŠ¡ taskService.setVariablesLocal(taskId, variables);// å®Œæˆä»»åŠ¡ taskService.complete(taskId);&#125; â€‹ è¯´æ˜ï¼š è®¾ç½®ä½œç”¨åŸŸä¸ºä»»åŠ¡çš„localå˜é‡ï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥è®¾ç½®åŒåçš„å˜é‡ï¼Œäº’ä¸å½±å“ã€‚ 3.6.2ã€é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®1234567891011121314@Testpublic void setLocalVariableByTaskId()&#123;// å½“å‰å¾…åŠä»»åŠ¡id String taskId=&quot;1404&quot;;// è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); TaskService taskService = processEngine.getTaskService(); Evection evection = new Evection (); evection.setNum(3d);// é€šè¿‡ä»»åŠ¡è®¾ç½®æµç¨‹å˜é‡ taskService.setVariableLocal(taskId, &quot;evection&quot;, evection);// ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼ //taskService.setVariablesLocal(taskId, variables)&#125; æ³¨æ„ï¼š ä»»åŠ¡idå¿…é¡»æ˜¯å½“å‰å¾…åŠä»»åŠ¡idï¼Œact_ru_taskä¸­å­˜åœ¨ã€‚ 3.6.3ã€ Localå˜é‡æµ‹è¯•1å¦‚æœä¸Šè¾¹ä¾‹å­ä¸­è®¾ç½®globalå˜é‡æ”¹ä¸ºè®¾ç½®localå˜é‡æ˜¯å¦å¯è¡Œï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ Localå˜é‡åœ¨ä»»åŠ¡ç»“æŸåæ— æ³•åœ¨å½“å‰æµç¨‹å®ä¾‹æ‰§è¡Œä¸­ä½¿ç”¨ï¼Œå¦‚æœåç»­çš„æµç¨‹æ‰§è¡Œéœ€è¦ç”¨åˆ°æ­¤å˜é‡åˆ™ä¼šæŠ¥é”™ã€‚ 3.6.4ã€ Localå˜é‡æµ‹è¯•2åœ¨éƒ¨é—¨ç»ç†å®¡æ ¸ã€æ€»ç»ç†å®¡æ ¸ã€è´¢åŠ¡å®¡æ ¸æ—¶è®¾ç½®localå˜é‡ï¼Œå¯é€šè¿‡historyServiceæŸ¥è¯¢æ¯ä¸ªå†å²ä»»åŠ¡æ—¶å°†æµç¨‹å˜é‡çš„å€¼ä¹ŸæŸ¥è¯¢å‡ºæ¥ã€‚ ä»£ç å¦‚ä¸‹ï¼š 123456789101112// åˆ›å»ºå†å²ä»»åŠ¡æŸ¥è¯¢å¯¹è±¡ HistoricTaskInstanceQuery historicTaskInstanceQuery = historyService.createHistoricTaskInstanceQuery(); // æŸ¥è¯¢ç»“æœåŒ…æ‹¬ localå˜é‡ historicTaskInstanceQuery.includeTaskLocalVariables();for (HistoricTaskInstance historicTaskInstance : list) &#123; System.out.println(&quot;==============================&quot;); System.out.println(&quot;ä»»åŠ¡idï¼š&quot; + historicTaskInstance.getId()); System.out.println(&quot;ä»»åŠ¡åç§°ï¼š&quot; + historicTaskInstance.getName()); System.out.println(&quot;ä»»åŠ¡è´Ÿè´£äººï¼š&quot; + historicTaskInstance.getAssignee()); System.out.println(&quot;ä»»åŠ¡localå˜é‡ï¼š&quot;+ historicTaskInstance.getTaskLocalVariables());&#125; æ³¨æ„ï¼šæŸ¥è¯¢å†å²æµç¨‹å˜é‡ï¼Œç‰¹åˆ«æ˜¯æŸ¥è¯¢pojoå˜é‡éœ€è¦ç»è¿‡ååºåˆ—åŒ–ï¼Œä¸æ¨èä½¿ç”¨ã€‚ å››ã€ç»„ä»»åŠ¡4.1ã€éœ€æ±‚åœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„ assignee å›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨.bpmn æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸´æ—¶ä»»åŠ¡è´Ÿè´£äººå˜æ›´åˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿå¯æ‰©å±•æ€§å·®ã€‚ é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººï¼Œå¯ä»¥ä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡ã€‚ 4.2ã€è®¾ç½®ä»»åŠ¡å€™é€‰äººåœ¨æµç¨‹å›¾ä¸­ä»»åŠ¡èŠ‚ç‚¹çš„é…ç½®ä¸­è®¾ç½® candidate-users(å€™é€‰äºº)ï¼Œå¤šä¸ªå€™é€‰äººä¹‹é—´ç”¨é€—å·åˆ†å¼€ã€‚ æŸ¥çœ‹bpmnæ–‡ä»¶ 1&lt;userTask activiti:candidateUsers=&quot;lisi,wangwu&quot; activiti:exclusive=&quot;true&quot; id=&quot;_3&quot; name=&quot;ç»ç†å®¡æ‰¹&quot;/&gt; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°éƒ¨é—¨ç»ç†çš„å®¡æ ¸äººå·²ç»è®¾ç½®ä¸º lisi,wangwu è¿™æ ·çš„ä¸€ç»„å€™é€‰äººï¼Œå¯ä»¥ä½¿ç”¨ activiti:candiateUsers&#x3D;â€ç”¨æˆ· 1,ç”¨æˆ· 2,ç”¨æˆ· 3â€çš„è¿™ç§æ–¹å¼æ¥å®ç°è®¾ç½®ä¸€ç»„å€™é€‰äºº 4.3ã€ç»„ä»»åŠ¡4.3.1ã€ç»„ä»»åŠ¡åŠç†æµç¨‹aã€æŸ¥è¯¢ç»„ä»»åŠ¡æŒ‡å®šå€™é€‰äººï¼ŒæŸ¥è¯¢è¯¥å€™é€‰äººå½“å‰çš„å¾…åŠä»»åŠ¡ã€‚ å€™é€‰äººä¸èƒ½ç«‹å³åŠç†ä»»åŠ¡ã€‚ bã€æ‹¾å–(claim)ä»»åŠ¡è¯¥ç»„ä»»åŠ¡çš„æ‰€æœ‰å€™é€‰äººéƒ½èƒ½æ‹¾å–ã€‚ å°†å€™é€‰äººçš„ç»„ä»»åŠ¡ï¼Œå˜æˆä¸ªäººä»»åŠ¡ã€‚åŸæ¥å€™é€‰äººå°±å˜æˆäº†è¯¥ä»»åŠ¡çš„è´Ÿè´£äººã€‚ å¦‚æœæ‹¾å–åä¸æƒ³åŠç†è¯¥ä»»åŠ¡ï¼Ÿ éœ€è¦å°†å·²ç»æ‹¾å–çš„ä¸ªäººä»»åŠ¡å½’è¿˜åˆ°ç»„é‡Œè¾¹ï¼Œå°†ä¸ªäººä»»åŠ¡å˜æˆäº†ç»„ä»»åŠ¡ã€‚ cã€æŸ¥è¯¢ä¸ªäººä»»åŠ¡æŸ¥è¯¢æ–¹å¼åŒä¸ªäººä»»åŠ¡éƒ¨åˆ†ï¼Œæ ¹æ®assigneeæŸ¥è¯¢ç”¨æˆ·è´Ÿè´£çš„ä¸ªäººä»»åŠ¡ã€‚ dã€åŠç†ä¸ªäººä»»åŠ¡4.3.2ã€ æŸ¥è¯¢ç»„ä»»åŠ¡ æ ¹æ®å€™é€‰äººæŸ¥è¯¢ç»„ä»»åŠ¡ 1234567891011121314151617181920212223@Test public void findGroupTaskList() &#123; // æµç¨‹å®šä¹‰key String processDefinitionKey = &quot;evection3&quot;; // ä»»åŠ¡å€™é€‰äºº String candidateUser = &quot;lisi&quot;; // è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); // åˆ›å»ºTaskService TaskService taskService = processEngine.getTaskService(); //æŸ¥è¯¢ç»„ä»»åŠ¡ List&lt;Task&gt; list = taskService.createTaskQuery() .processDefinitionKey(processDefinitionKey) .taskCandidateUser(candidateUser)//æ ¹æ®å€™é€‰äººæŸ¥è¯¢ .list(); for (Task task : list) &#123; System.out.println(&quot;----------------------------&quot;); System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + task.getProcessInstanceId()); System.out.println(&quot;ä»»åŠ¡idï¼š&quot; + task.getId()); System.out.println(&quot;ä»»åŠ¡è´Ÿè´£äººï¼š&quot; + task.getAssignee()); System.out.println(&quot;ä»»åŠ¡åç§°ï¼š&quot; + task.getName()); &#125; &#125; 4.3.3 ã€ æ‹¾å–ç»„ä»»åŠ¡ å€™é€‰äººå‘˜æ‹¾å–ç»„ä»»åŠ¡åè¯¥ä»»åŠ¡å˜ä¸ºè‡ªå·±çš„ä¸ªäººä»»åŠ¡ã€‚ 12345678910111213141516171819202122@Test public void claimTask()&#123; // è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); TaskService taskService = processEngine.getTaskService(); //è¦æ‹¾å–çš„ä»»åŠ¡id String taskId = &quot;6302&quot;; //ä»»åŠ¡å€™é€‰äººid String userId = &quot;lisi&quot;; //æ‹¾å–ä»»åŠ¡ //å³ä½¿è¯¥ç”¨æˆ·ä¸æ˜¯å€™é€‰äººä¹Ÿèƒ½æ‹¾å–(å»ºè®®æ‹¾å–æ—¶æ ¡éªŒæ˜¯å¦æœ‰èµ„æ ¼) //æ ¡éªŒè¯¥ç”¨æˆ·æœ‰æ²¡æœ‰æ‹¾å–ä»»åŠ¡çš„èµ„æ ¼ Task task = taskService.createTaskQuery() .taskId(taskId) .taskCandidateUser(userId)//æ ¹æ®å€™é€‰äººæŸ¥è¯¢ .singleResult(); if(task!=null)&#123; //æ‹¾å–ä»»åŠ¡ taskService.claim(taskId, userId); System.out.println(&quot;ä»»åŠ¡æ‹¾å–æˆåŠŸ&quot;); &#125; &#125; è¯´æ˜ï¼šå³ä½¿è¯¥ç”¨æˆ·ä¸æ˜¯å€™é€‰äººä¹Ÿèƒ½æ‹¾å–ï¼Œå»ºè®®æ‹¾å–æ—¶æ ¡éªŒæ˜¯å¦æœ‰èµ„æ ¼ ç»„ä»»åŠ¡æ‹¾å–åï¼Œè¯¥ä»»åŠ¡å·²æœ‰è´Ÿè´£äººï¼Œé€šè¿‡å€™é€‰äººå°†æŸ¥è¯¢ä¸åˆ°è¯¥ä»»åŠ¡ 4.3.4ã€ æŸ¥è¯¢ä¸ªäººå¾…åŠä»»åŠ¡ æŸ¥è¯¢æ–¹å¼åŒä¸ªäººä»»åŠ¡æŸ¥è¯¢ 12345678910111213141516171819202122@Testpublic void findPersonalTaskList() &#123; // æµç¨‹å®šä¹‰key String processDefinitionKey = &quot;evection1&quot;; // ä»»åŠ¡è´Ÿè´£äºº String assignee = &quot;zhangsan&quot;; // è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); // åˆ›å»ºTaskService TaskService taskService = processEngine.getTaskService(); List&lt;Task&gt; list = taskService.createTaskQuery() .processDefinitionKey(processDefinitionKey) .taskAssignee(assignee) .list(); for (Task task : list) &#123; System.out.println(&quot;----------------------------&quot;); System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + task.getProcessInstanceId()); System.out.println(&quot;ä»»åŠ¡idï¼š&quot; + task.getId()); System.out.println(&quot;ä»»åŠ¡è´Ÿè´£äººï¼š&quot; + task.getAssignee()); System.out.println(&quot;ä»»åŠ¡åç§°ï¼š&quot; + task.getName()); &#125;&#125; 4.3.5ã€ åŠç†ä¸ªäººä»»åŠ¡åŒä¸ªäººä»»åŠ¡åŠç† 1234567891011 /*å®Œæˆä»»åŠ¡*/ @Test public void completeTask()&#123;// ä»»åŠ¡ID String taskId = &quot;12304&quot;;// è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); processEngine.getTaskService() .complete(taskId); System.out.println(&quot;å®Œæˆä»»åŠ¡ï¼š&quot;+taskId); &#125; è¯´æ˜ï¼šå»ºè®®å®Œæˆä»»åŠ¡å‰æ ¡éªŒè¯¥ç”¨æˆ·æ˜¯å¦æ˜¯è¯¥ä»»åŠ¡çš„è´Ÿè´£äººã€‚ 4.3.6ã€ å½’è¿˜ç»„ä»»åŠ¡ å¦‚æœä¸ªäººä¸æƒ³åŠç†è¯¥ç»„ä»»åŠ¡ï¼Œå¯ä»¥å½’è¿˜ç»„ä»»åŠ¡ï¼Œå½’è¿˜åè¯¥ç”¨æˆ·ä¸å†æ˜¯è¯¥ä»»åŠ¡çš„è´Ÿè´£äºº 123456789101112131415161718192021222324/**å½’è¿˜ç»„ä»»åŠ¡ï¼Œç”±ä¸ªäººä»»åŠ¡å˜ä¸ºç»„ä»»åŠ¡ï¼Œè¿˜å¯ä»¥è¿›è¡Œä»»åŠ¡äº¤æ¥*/@Testpublic void setAssigneeToGroupTask() &#123; // è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); // æŸ¥è¯¢ä»»åŠ¡ä½¿ç”¨TaskService TaskService taskService = processEngine.getTaskService(); // å½“å‰å¾…åŠä»»åŠ¡ String taskId = &quot;6004&quot;; // ä»»åŠ¡è´Ÿè´£äºº String userId = &quot;zhangsan2&quot;; // æ ¡éªŒuserIdæ˜¯å¦æ˜¯taskIdçš„è´Ÿè´£äººï¼Œå¦‚æœæ˜¯è´Ÿè´£äººæ‰å¯ä»¥å½’è¿˜ç»„ä»»åŠ¡ Task task = taskService .createTaskQuery() .taskId(taskId) .taskAssignee(userId) .singleResult(); if (task != null) &#123; // å¦‚æœè®¾ç½®ä¸ºnullï¼Œå½’è¿˜ç»„ä»»åŠ¡,è¯¥ ä»»åŠ¡æ²¡æœ‰è´Ÿè´£äºº taskService.setAssignee(taskId, null); &#125;&#125; è¯´æ˜ï¼šå»ºè®®å½’è¿˜ä»»åŠ¡å‰æ ¡éªŒè¯¥ç”¨æˆ·æ˜¯å¦æ˜¯è¯¥ä»»åŠ¡çš„è´Ÿè´£äºº ä¹Ÿå¯ä»¥é€šè¿‡setAssigneeæ–¹æ³•å°†ä»»åŠ¡å§”æ‰˜ç»™å…¶å®ƒç”¨æˆ·è´Ÿè´£ï¼Œæ³¨æ„è¢«å§”æ‰˜çš„ç”¨æˆ·å¯ä»¥ä¸æ˜¯å€™é€‰äººï¼ˆå»ºè®®ä¸è¦è¿™æ ·ä½¿ç”¨ï¼‰ 4.3.7ã€ ä»»åŠ¡äº¤æ¥ä»»åŠ¡äº¤æ¥,ä»»åŠ¡è´Ÿè´£äººå°†ä»»åŠ¡äº¤ç»™å…¶å®ƒå€™é€‰äººåŠç†è¯¥ä»»åŠ¡ 12345678910111213141516171819202122@Test public void setAssigneeToCandidateUser() &#123; // è·å–processEngine ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine(); // æŸ¥è¯¢ä»»åŠ¡ä½¿ç”¨TaskService TaskService taskService = processEngine.getTaskService(); // å½“å‰å¾…åŠä»»åŠ¡ String taskId = &quot;6004&quot;; // ä»»åŠ¡è´Ÿè´£äºº String userId = &quot;zhangsan2&quot;;// å°†æ­¤ä»»åŠ¡äº¤ç»™å…¶å®ƒå€™é€‰äººåŠç†è¯¥ ä»»åŠ¡ String candidateuser = &quot;zhangsan&quot;; // æ ¡éªŒuserIdæ˜¯å¦æ˜¯taskIdçš„è´Ÿè´£äººï¼Œå¦‚æœæ˜¯è´Ÿè´£äººæ‰å¯ä»¥å½’è¿˜ç»„ä»»åŠ¡ Task task = taskService .createTaskQuery() .taskId(taskId) .taskAssignee(userId) .singleResult(); if (task != null) &#123; taskService.setAssignee(taskId, candidateuser); &#125; &#125; 4.3.8ã€ æ•°æ®åº“è¡¨æ“ä½œæŸ¥è¯¢å½“å‰ä»»åŠ¡æ‰§è¡Œè¡¨ 1SELECT * FROM act_ru_task ä»»åŠ¡æ‰§è¡Œè¡¨ï¼Œè®°å½•å½“å‰æ‰§è¡Œçš„ä»»åŠ¡ï¼Œç”±äºè¯¥ä»»åŠ¡å½“å‰æ˜¯ç»„ä»»åŠ¡ï¼Œæ‰€æœ‰assigneeä¸ºç©ºï¼Œå½“æ‹¾å–ä»»åŠ¡åè¯¥å­—æ®µå°±æ˜¯æ‹¾å–ç”¨æˆ·çš„id æŸ¥è¯¢ä»»åŠ¡å‚ä¸è€… 1SELECT * FROM act_ru_identitylink ä»»åŠ¡å‚ä¸è€…ï¼Œè®°å½•å½“å‰å‚è€ƒä»»åŠ¡ç”¨æˆ·æˆ–ç»„ï¼Œå½“å‰ä»»åŠ¡å¦‚æœè®¾ç½®äº†å€™é€‰äººï¼Œä¼šå‘è¯¥è¡¨æ’å…¥å€™é€‰äººè®°å½•ï¼Œæœ‰å‡ ä¸ªå€™é€‰å°±æ’å…¥å‡ ä¸ª ä¸act_ru_identitylinkå¯¹åº”çš„è¿˜æœ‰ä¸€å¼ å†å²è¡¨act_hi_identitylinkï¼Œå‘act_ru_identitylinkæ’å…¥è®°å½•çš„åŒæ—¶ä¹Ÿä¼šå‘å†å²è¡¨æ’å…¥è®°å½•ã€‚ä»»åŠ¡å®Œæˆ äº”ã€ç½‘å…³ç½‘å…³ç”¨æ¥æ§åˆ¶æµç¨‹çš„æµå‘ 5.1 æ’ä»–ç½‘å…³ExclusiveGateway5.1.1 ä»€ä¹ˆæ˜¯æ’ä»–ç½‘å…³ï¼šæ’ä»–ç½‘å…³ï¼Œç”¨æ¥åœ¨æµç¨‹ä¸­å®ç°å†³ç­–ã€‚ å½“æµç¨‹æ‰§è¡Œåˆ°è¿™ä¸ªç½‘å…³ï¼Œæ‰€æœ‰åˆ†æ”¯éƒ½ä¼šåˆ¤æ–­æ¡ä»¶æ˜¯å¦ä¸ºtrueï¼Œå¦‚æœä¸ºtrueåˆ™æ‰§è¡Œè¯¥åˆ†æ”¯ï¼Œ æ³¨æ„ï¼šæ’ä»–ç½‘å…³åªä¼šé€‰æ‹©ä¸€ä¸ªä¸ºtrueçš„åˆ†æ”¯æ‰§è¡Œã€‚å¦‚æœæœ‰ä¸¤ä¸ªåˆ†æ”¯æ¡ä»¶éƒ½ä¸ºtrueï¼Œæ’ä»–ç½‘å…³ä¼šé€‰æ‹©idå€¼è¾ƒå°çš„ä¸€æ¡åˆ†æ”¯å»æ‰§è¡Œã€‚ ä¸ºä»€ä¹ˆè¦ç”¨æ’ä»–ç½‘å…³ï¼Ÿ ä¸ç”¨æ’ä»–ç½‘å…³ä¹Ÿå¯ä»¥å®ç°åˆ†æ”¯ï¼Œå¦‚ï¼šåœ¨è¿çº¿çš„conditionæ¡ä»¶ä¸Šè®¾ç½®åˆ†æ”¯æ¡ä»¶ã€‚ åœ¨è¿çº¿è®¾ç½®conditionæ¡ä»¶çš„ç¼ºç‚¹ï¼šå¦‚æœæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œæµç¨‹å°±ç»“æŸäº†(æ˜¯å¼‚å¸¸ç»“æŸ)ã€‚ å¦‚æœ ä½¿ç”¨æ’ä»–ç½‘å…³å†³å®šåˆ†æ”¯çš„èµ°å‘ï¼Œå¦‚ä¸‹ï¼š å¦‚æœä»ç½‘å…³å‡ºå»çš„çº¿æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³åˆ™ç³»ç»ŸæŠ›å‡ºå¼‚å¸¸ã€‚ 123org.activiti.engine.ActivitiException: No outgoing sequence flow of the exclusive gateway &#x27;exclusivegateway1&#x27; could be selected for continuing the process at org.activiti.engine.impl.bpmn.behavior.ExclusiveGatewayActivityBehavior.leave(ExclusiveGatewayActivityBehavior.java:85) 5.1.2 æµç¨‹å®šä¹‰ æ’ä»–ç½‘å…³å›¾æ ‡ï¼Œçº¢æ¡†å†…ï¼š 5.1.3 æµ‹è¯•åœ¨éƒ¨é—¨ç»ç†å®¡æ ¸åï¼Œèµ°æ’ä»–ç½‘å…³ï¼Œä»æ’ä»–ç½‘å…³å‡ºæ¥çš„åˆ†æ”¯æœ‰ä¸¤æ¡ï¼Œä¸€æ¡æ˜¯åˆ¤æ–­å‡ºå·®å¤©æ•°æ˜¯å¦å¤§äº3å¤©ï¼Œå¦ä¸€æ¡æ˜¯åˆ¤æ–­å‡ºå·®å¤©æ•°æ˜¯å¦å°äºç­‰äº3å¤©ã€‚ è®¾ç½®åˆ†æ”¯æ¡ä»¶æ—¶ï¼Œå¦‚æœæ‰€æœ‰åˆ†æ”¯æ¡ä»¶éƒ½ä¸æ˜¯trueï¼ŒæŠ¥é”™ï¼š 1234org.activiti.engine.ActivitiException: No outgoing sequence flow of the exclusive gateway &#x27;exclusivegateway1&#x27; could be selected for continuing the process at org.activiti.engine.impl.bpmn.behavior.ExclusiveGatewayActivityBehavior.leave(ExclusiveGatewayActivityBehavior.java:85) 5.2 å¹¶è¡Œç½‘å…³ParallelGateway5.2.1 ä»€ä¹ˆæ˜¯å¹¶è¡Œç½‘å…³å¹¶è¡Œç½‘å…³å…è®¸å°†æµç¨‹åˆ†æˆå¤šæ¡åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¤šæ¡åˆ†æ”¯æ±‡èšåˆ°ä¸€èµ·ï¼Œå¹¶è¡Œç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š l forkåˆ†æ”¯ï¼š å¹¶è¡Œåçš„æ‰€æœ‰å¤–å‡ºé¡ºåºæµï¼Œä¸ºæ¯ä¸ªé¡ºåºæµéƒ½åˆ›å»ºä¸€ä¸ªå¹¶å‘åˆ†æ”¯ã€‚ l joinæ±‡èšï¼š æ‰€æœ‰åˆ°è¾¾å¹¶è¡Œç½‘å…³ï¼Œåœ¨æ­¤ç­‰å¾…çš„è¿›å…¥åˆ†æ”¯ï¼Œ ç›´åˆ°æ‰€æœ‰è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ä»¥åï¼Œ æµç¨‹å°±ä¼šé€šè¿‡æ±‡èšç½‘å…³ã€‚ æ³¨æ„ï¼Œå¦‚æœåŒä¸€ä¸ªå¹¶è¡Œç½‘å…³æœ‰å¤šä¸ªè¿›å…¥å’Œå¤šä¸ªå¤–å‡ºé¡ºåºæµï¼Œ å®ƒå°±åŒæ—¶å…·æœ‰åˆ†æ”¯å’Œæ±‡èšåŠŸèƒ½ã€‚ è¿™æ—¶ï¼Œç½‘å…³ä¼šå…ˆæ±‡èšæ‰€æœ‰è¿›å…¥çš„é¡ºåºæµï¼Œç„¶åå†åˆ‡åˆ†æˆå¤šä¸ªå¹¶è¡Œåˆ†æ”¯ã€‚ ä¸å…¶ä»–ç½‘å…³çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚ å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥ã€‚ ä¾‹å­ï¼š è¯´æ˜ï¼š æŠ€æœ¯ç»ç†å’Œé¡¹ç›®ç»ç†æ˜¯ä¸¤ä¸ªexecutionåˆ†æ”¯ï¼Œåœ¨act_ru_executionè¡¨æœ‰ä¸¤æ¡è®°å½•åˆ†åˆ«æ˜¯æŠ€æœ¯ç»ç†å’Œé¡¹ç›®ç»ç†ï¼Œact_ru_executionè¿˜æœ‰ä¸€æ¡è®°å½•è¡¨ç¤ºè¯¥æµç¨‹å®ä¾‹ã€‚ å¾…æŠ€æœ¯ç»ç†å’Œé¡¹ç›®ç»ç†ä»»åŠ¡å…¨éƒ¨å®Œæˆï¼Œåœ¨æ±‡èšç‚¹æ±‡èšï¼Œé€šè¿‡parallelGatewayå¹¶è¡Œç½‘å…³ã€‚ å¹¶è¡Œç½‘å…³åœ¨ä¸šåŠ¡åº”ç”¨ä¸­å¸¸ç”¨äºä¼šç­¾ä»»åŠ¡ï¼Œä¼šç­¾ä»»åŠ¡å³å¤šä¸ªå‚ä¸è€…å…±åŒåŠç†çš„ä»»åŠ¡ã€‚ 5.2.2 æµç¨‹å®šä¹‰å¹¶è¡Œç½‘å…³å›¾æ ‡ï¼Œçº¢æ¡†å†…ï¼š 5.2.3 æµ‹è¯•å½“æ‰§è¡Œåˆ°å¹¶è¡Œç½‘å…³æ•°æ®åº“è·Ÿè¸ªå¦‚ä¸‹ï¼š å½“å‰ä»»åŠ¡è¡¨ï¼šSELECT * FROM act_ru_task ä¸Šå›¾ä¸­ï¼šæœ‰ä¸¤ä¸ªä»»åŠ¡å½“å‰æ‰§è¡Œã€‚ æŸ¥è¯¢æµç¨‹å®ä¾‹æ‰§è¡Œè¡¨ï¼šSELECT * FROM act_ru_execution ä¸Šå›¾ä¸­ï¼Œè¯´æ˜å½“å‰æµç¨‹å®ä¾‹æœ‰å¤šä¸ªåˆ†æ”¯(ä¸¤ä¸ª)åœ¨è¿è¡Œã€‚ å¯¹å¹¶è¡Œä»»åŠ¡çš„æ‰§è¡Œï¼š å¹¶è¡Œä»»åŠ¡æ‰§è¡Œä¸åˆ†å‰åï¼Œç”±ä»»åŠ¡çš„è´Ÿè´£äººå»æ‰§è¡Œå³å¯ã€‚ æ‰§è¡ŒæŠ€æœ¯ç»ç†ä»»åŠ¡åï¼ŒæŸ¥è¯¢å½“å‰ä»»åŠ¡è¡¨ SELECT * FROM act_ru_task å·²å®Œæˆçš„æŠ€æœ¯ç»ç†ä»»åŠ¡åœ¨å½“å‰ä»»åŠ¡è¡¨act_ru_task_å·²è¢«åˆ é™¤ã€‚ åœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¡¨ï¼šSELECT * FROM act_ru_executionæœ‰ä¸­å¤šä¸ªåˆ†æ”¯å­˜åœ¨ä¸”æœ‰å¹¶è¡Œç½‘å…³çš„æ±‡èšç»“ç‚¹ã€‚ æœ‰å¹¶è¡Œç½‘å…³çš„æ±‡èšç»“ç‚¹ï¼šè¯´æ˜æœ‰ä¸€ä¸ªåˆ†æ”¯å·²ç»åˆ°æ±‡èšï¼Œç­‰å¾…å…¶å®ƒçš„åˆ†æ”¯åˆ°è¾¾ã€‚ å½“æ‰€æœ‰åˆ†æ”¯ä»»åŠ¡éƒ½å®Œæˆï¼Œéƒ½åˆ°è¾¾æ±‡èšç»“ç‚¹åï¼š æµç¨‹å®ä¾‹æ‰§è¡Œè¡¨ï¼šSELECT * FROM act_ru_executionï¼Œæ‰§è¡Œæµç¨‹å®ä¾‹å·²ç»å˜ä¸ºæ€»ç»ç†å®¡æ‰¹ï¼Œè¯´æ˜æµç¨‹æ‰§è¡Œå·²ç»é€šè¿‡å¹¶è¡Œç½‘å…³ æ€»ç»“ï¼šæ‰€æœ‰åˆ†æ”¯åˆ°è¾¾æ±‡èšç»“ç‚¹ï¼Œå¹¶è¡Œç½‘å…³æ‰§è¡Œå®Œæˆã€‚ 5.3 åŒ…å«ç½‘å…³InclusiveGateway5.3.1 ä»€ä¹ˆæ˜¯åŒ…å«ç½‘å…³åŒ…å«ç½‘å…³å¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“ã€‚ å’Œæ’ä»–ç½‘å…³ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨å¤–å‡ºé¡ºåºæµä¸Šå®šä¹‰æ¡ä»¶ï¼ŒåŒ…å«ç½‘å…³ä¼šè§£æå®ƒä»¬ã€‚ ä½†æ˜¯ä¸»è¦çš„åŒºåˆ«æ˜¯åŒ…å«ç½‘å…³å¯ä»¥é€‰æ‹©å¤šäºä¸€æ¡é¡ºåºæµï¼Œè¿™å’Œå¹¶è¡Œç½‘å…³ä¸€æ ·ã€‚ åŒ…å«ç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š l åˆ†æ”¯ï¼š æ‰€æœ‰å¤–å‡ºé¡ºåºæµçš„æ¡ä»¶éƒ½ä¼šè¢«è§£æï¼Œç»“æœä¸ºtrueçš„é¡ºåºæµä¼šä»¥å¹¶è¡Œæ–¹å¼ç»§ç»­æ‰§è¡Œï¼Œ ä¼šä¸ºæ¯ä¸ªé¡ºåºæµåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚ l æ±‡èšï¼š æ‰€æœ‰å¹¶è¡Œåˆ†æ”¯åˆ°è¾¾åŒ…å«ç½‘å…³ï¼Œä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œ ç›´åˆ°æ¯ä¸ªåŒ…å«æµç¨‹tokençš„è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ã€‚ è¿™æ˜¯ä¸å¹¶è¡Œç½‘å…³çš„æœ€å¤§ä¸åŒã€‚æ¢å¥è¯è¯´ï¼ŒåŒ…å«ç½‘å…³åªä¼šç­‰å¾…è¢«é€‰ä¸­æ‰§è¡Œäº†çš„è¿›å…¥é¡ºåºæµã€‚ åœ¨æ±‡èšä¹‹åï¼Œæµç¨‹ä¼šç©¿è¿‡åŒ…å«ç½‘å…³ç»§ç»­æ‰§è¡Œã€‚ 5.3.2 æµç¨‹å®šä¹‰ï¼šå‡ºå·®ç”³è¯·å¤§äºç­‰äº3å¤©éœ€è¦ç”±é¡¹ç›®ç»ç†å®¡æ‰¹ï¼Œå°äº3å¤©ç”±æŠ€æœ¯ç»ç†å®¡æ‰¹ï¼Œå‡ºå·®ç”³è¯·å¿…é¡»ç»è¿‡äººäº‹ç»ç†å®¡æ‰¹ã€‚ åŒ…å«ç½‘å…³å›¾æ ‡ï¼Œçº¢æ¡†å†…ï¼š å®šä¹‰æµç¨‹ï¼š æ³¨æ„ï¼šé€šè¿‡åŒ…å«ç½‘å…³çš„æ¯ä¸ªåˆ†æ”¯çš„è¿çº¿ä¸Šè®¾ç½®conditionæ¡ä»¶ã€‚ 5.3.3 æµ‹è¯•å¦‚æœåŒ…å«ç½‘å…³è®¾ç½®çš„æ¡ä»¶ä¸­ï¼Œæµç¨‹å˜é‡ä¸å­˜åœ¨ï¼ŒæŠ¥é”™; 1org.activiti.engine.ActivitiException: Unknown property used in expression: $&#123;evection.num&gt;=3&#125; éœ€è¦åœ¨æµç¨‹å¯åŠ¨æ—¶è®¾ç½®æµç¨‹å˜é‡evection.numã€‚ 1ï¼‰ã€å½“æµç¨‹æ‰§è¡Œåˆ°ç¬¬ä¸€ä¸ªåŒ…å«ç½‘å…³åï¼Œä¼šæ ¹æ®æ¡ä»¶åˆ¤æ–­ï¼Œå½“å‰è¦èµ°å“ªå‡ ä¸ªåˆ†æ”¯ï¼š æµç¨‹å®ä¾‹æ‰§è¡Œè¡¨ï¼šSELECT * FROM act_ru_execution ç¬¬ä¸€æ¡è®°å½•ï¼šåŒ…å«ç½‘å…³åˆ†æ”¯ã€‚ åä¸¤æ¡è®°å½•ä»£è¡¨ä¸¤ä¸ªè¦æ‰§è¡Œçš„åˆ†æ”¯ï¼š ACT_ID &#x3D; â€œ_13â€ ä»£è¡¨ é¡¹ç›®ç»ç†ç¥å“ ACT_ID &#x3D; â€œ_5â€ ä»£è¡¨ äººäº‹ç»ç†å®¡æ‰¹ å½“å‰ä»»åŠ¡è¡¨ï¼šACT_RU_TASK ä¸Šå›¾ä¸­ï¼Œé¡¹ç›®ç»ç†å®¡æ‰¹ã€äººäº‹ç»ç†å®¡æ‰¹ éƒ½æ˜¯å½“å‰çš„ä»»åŠ¡ï¼Œåœ¨å¹¶è¡Œæ‰§è¡Œã€‚ å¦‚æœæœ‰ä¸€ä¸ªåˆ†æ”¯æ‰§è¡Œå…ˆèµ°åˆ°æ±‡èšç»“ç‚¹çš„åˆ†æ”¯ï¼Œè¦ç­‰å¾…å…¶å®ƒæ‰§è¡Œåˆ†æ”¯èµ°åˆ°æ±‡èšã€‚ 2ï¼‰ã€å…ˆæ‰§è¡Œé¡¹ç›®ç»ç†å®¡æ‰¹ï¼Œç„¶åæŸ¥è¯¢å½“å‰ä»»åŠ¡è¡¨ï¼šACT_RU_TASK å½“å‰ä»»åŠ¡è¿˜æœ‰äººäº‹ç»ç†å®¡æ‰¹éœ€è¦å¤„ç†ã€‚ æµç¨‹å®ä¾‹æ‰§è¡Œè¡¨ï¼šSELECT * FROM act_ru_execution å‘ç°äººäº‹ç»ç†çš„åˆ†æ”¯è¿˜å­˜åœ¨ï¼Œè€Œé¡¹ç›®ç»ç†åˆ†æ”¯å·²ç»èµ°åˆ°ACT_ID &#x3D; _18çš„èŠ‚ç‚¹ã€‚è€ŒACT_ID&#x3D;__18å°±æ˜¯ç¬¬äºŒä¸ªåŒ…å«ç½‘å…³ è¿™æ—¶ï¼Œå› ä¸ºæœ‰2ä¸ªåˆ†æ”¯è¦æ‰§è¡Œï¼ŒåŒ…å«ç½‘å…³ä¼šç­‰æ‰€æœ‰åˆ†æ”¯èµ°åˆ°æ±‡èšæ‰èƒ½æ‰§è¡Œå®Œæˆã€‚ 3ï¼‰ã€æ‰§è¡Œäººäº‹ç»ç†å®¡æ‰¹ ç„¶åæŸ¥è¯¢å½“å‰ä»»åŠ¡è¡¨ï¼šACT_RU_TASK å½“å‰ä»»åŠ¡è¡¨å·²ç»ä¸æ˜¯äººäº‹ç»ç†å®¡æ‰¹äº†ï¼Œè¯´æ˜äººäº‹ç»ç†å®¡æ‰¹å·²ç»å®Œæˆã€‚ æµç¨‹å®ä¾‹æ‰§è¡Œè¡¨ï¼šSELECT * FROM act_ru_execution åŒ…å«ç½‘å…³æ‰§è¡Œå®Œæˆï¼Œåˆ†æ”¯å’Œæ±‡èšå°±ä»act_ru_executionåˆ é™¤ã€‚ å°ç»“ï¼šåœ¨åˆ†æ”¯æ—¶ï¼Œéœ€è¦åˆ¤æ–­æ¡ä»¶ï¼Œç¬¦åˆæ¡ä»¶çš„åˆ†æ”¯ï¼Œå°†ä¼šæ‰§è¡Œï¼Œç¬¦åˆæ¡ä»¶çš„åˆ†æ”¯æœ€ç»ˆæ‰è¿›è¡Œæ±‡èšã€‚ 5.4 äº‹ä»¶ç½‘å…³EventGatewayäº‹ä»¶ç½‘å…³å…è®¸æ ¹æ®äº‹ä»¶åˆ¤æ–­æµå‘ã€‚ç½‘å…³çš„æ¯ä¸ªå¤–å‡ºé¡ºåºæµéƒ½è¦è¿æ¥åˆ°ä¸€ä¸ªä¸­é—´æ•è·äº‹ä»¶ã€‚ å½“æµç¨‹åˆ°è¾¾ä¸€ä¸ªåŸºäºäº‹ä»¶ç½‘å…³ï¼Œç½‘å…³ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼šä¼šæš‚åœæ‰§è¡Œã€‚ä¸æ­¤åŒæ—¶ï¼Œä¼šä¸ºæ¯ä¸ªå¤–å‡ºé¡ºåºæµåˆ›å»ºç›¸å¯¹çš„äº‹ä»¶è®¢é˜…ã€‚ äº‹ä»¶ç½‘å…³çš„å¤–å‡ºé¡ºåºæµå’Œæ™®é€šé¡ºåºæµä¸åŒï¼Œè¿™äº›é¡ºåºæµä¸ä¼šçœŸçš„â€æ‰§è¡Œâ€ï¼Œ ç›¸åå®ƒä»¬è®©æµç¨‹å¼•æ“å»å†³å®šæ‰§è¡Œåˆ°äº‹ä»¶ç½‘å…³çš„æµç¨‹éœ€è¦è®¢é˜…å“ªäº›äº‹ä»¶ã€‚ è¦è€ƒè™‘ä»¥ä¸‹æ¡ä»¶ï¼š äº‹ä»¶ç½‘å…³å¿…é¡»æœ‰ä¸¤æ¡æˆ–ä»¥ä¸Šå¤–å‡ºé¡ºåºæµï¼› äº‹ä»¶ç½‘å…³åï¼Œåªèƒ½ä½¿ç”¨intermediateCatchEventç±»å‹ï¼ˆactivitiä¸æ”¯æŒåŸºäºäº‹ä»¶ç½‘å…³åè¿æ¥ReceiveTaskï¼‰ è¿æ¥åˆ°äº‹ä»¶ç½‘å…³çš„ä¸­é—´æ•è·äº‹ä»¶å¿…é¡»åªæœ‰ä¸€ä¸ªå…¥å£é¡ºåºæµã€‚ 5.4.1æµç¨‹å®šä¹‰äº‹ä»¶ç½‘å…³å›¾æ ‡ï¼Œçº¢æ¡†å†… intermediateCatchEventï¼š intermediateCatchEventæ”¯æŒçš„äº‹ä»¶ç±»å‹ï¼š Message Event: æ¶ˆæ¯äº‹ä»¶ Singal Eventï¼š ä¿¡å·äº‹ä»¶ Timer Eventï¼š å®šæ—¶äº‹ä»¶ ä½¿ç”¨äº‹ä»¶ç½‘å…³å®šä¹‰æµç¨‹ï¼š","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Activiti7","slug":"Activiti7","permalink":"https://guoshunfa.com/tags/Activiti7/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆDruidæ•°æ®åº“è¿æ¥æ± å’Œç›‘æ§","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/24é›†æˆæ•°æ®åº“/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆDruidæ•°æ®åº“è¿æ¥æ± å’Œç›‘æ§","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆDruidæ•°æ®åº“è¿æ¥æ± å’Œç›‘æ§/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90Druid%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E5%92%8C%E7%9B%91%E6%8E%A7/","excerpt":"","text":"druid å®˜ç½‘githubåœ°å€ Druid Spring Boot Starter ç”¨äºå¸®åŠ©ä½ åœ¨Spring Booté¡¹ç›®ä¸­è½»æ¾é›†æˆDruidæ•°æ®åº“è¿æ¥æ± å’Œç›‘æ§ã€‚ å¦‚ä½•ä½¿ç”¨ åœ¨ Spring Boot é¡¹ç›®ä¸­åŠ å…¥druid-spring-boot-starterä¾èµ– (ç‚¹å‡»æŸ¥è¯¢æœ€æ–°ç‰ˆæœ¬) Maven 12345&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.17&lt;/version&gt;&lt;/dependency&gt; Gradle 1compile &#x27;com.alibaba:druid-spring-boot-starter:1.1.17&#x27; æ·»åŠ é…ç½® 1234spring.datasource.url= spring.datasource.username=spring.datasource.password=# ...å…¶ä»–é…ç½®ï¼ˆå¯é€‰ï¼Œä¸æ˜¯å¿…é¡»çš„ï¼Œä½¿ç”¨å†…åµŒæ•°æ®åº“çš„è¯ä¸Šè¿°ä¸‰é¡¹ä¹Ÿå¯çœç•¥ä¸å¡«ï¼‰ é…ç½®å±æ€§Druid Spring Boot Starter é…ç½®å±æ€§çš„åç§°å®Œå…¨éµç…§ Druidï¼Œä½ å¯ä»¥é€šè¿‡ Spring Boot é…ç½®æ–‡ä»¶æ¥é…ç½®Druidæ•°æ®åº“è¿æ¥æ± å’Œç›‘æ§ï¼Œå¦‚æœæ²¡æœ‰é…ç½®åˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚ JDBC é…ç½® 1234567# æ•°æ®åº“åœ°å€spring.datasource.druid.url= # æˆ–spring.datasource.url= # æ•°æ®åº“ç”¨æˆ·åspring.datasource.druid.username= # æˆ–spring.datasource.username=# æ•°æ®åº“å¯†ç spring.datasource.druid.password= # æˆ–spring.datasource.password=spring.datasource.druid.driver-class-name= #æˆ– spring.datasource.driver-class-name= è¿æ¥æ± é…ç½® 12345678910111213141516171819202122# æ•°æ®åº“è¿æ¥æ± åˆå§‹å€¼spring.datasource.druid.initial-size=# æ•°æ®åº“è¿æ¥æ± æœ€å¤§å€¼spring.datasource.druid.max-active=# æ•°æ®åº“è¿æ¥æ± æœ€å°ç©ºé—²å€¼spring.datasource.druid.min-idle=# è·å–è¿æ¥æ—¶æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ¯«ç§’(1åˆ†é’Ÿ)spring.datasource.druid.max-wait=spring.datasource.druid.pool-prepared-statements=spring.datasource.druid.max-pool-prepared-statement-per-connection-size= spring.datasource.druid.max-open-prepared-statements= #å’Œä¸Šé¢çš„ç­‰ä»·spring.datasource.druid.validation-query=spring.datasource.druid.validation-query-timeout=spring.datasource.druid.test-on-borrow=spring.datasource.druid.test-on-return=spring.datasource.druid.test-while-idle=spring.datasource.druid.time-between-eviction-runs-millis=spring.datasource.druid.min-evictable-idle-time-millis=spring.datasource.druid.max-evictable-idle-time-millis=spring.datasource.druid.filters= #é…ç½®å¤šä¸ªè‹±æ–‡é€—å·åˆ†éš”....//more ç›‘æ§é…ç½® 123456789101112131415161718192021# WebStatFilteré…ç½®ï¼Œè¯´æ˜è¯·å‚è€ƒDruid Wikiï¼Œé…ç½®_é…ç½®WebStatFilterspring.datasource.druid.web-stat-filter.enabled= #æ˜¯å¦å¯ç”¨StatFilteré»˜è®¤å€¼falsespring.datasource.druid.web-stat-filter.url-pattern=spring.datasource.druid.web-stat-filter.exclusions=spring.datasource.druid.web-stat-filter.session-stat-enable=spring.datasource.druid.web-stat-filter.session-stat-max-count=spring.datasource.druid.web-stat-filter.principal-session-name=spring.datasource.druid.web-stat-filter.principal-cookie-name=spring.datasource.druid.web-stat-filter.profile-enable=# StatViewServleté…ç½®ï¼Œè¯´æ˜è¯·å‚è€ƒDruid Wikiï¼Œé…ç½®_StatViewServleté…ç½®spring.datasource.druid.stat-view-servlet.enabled= #æ˜¯å¦å¯ç”¨StatViewServletï¼ˆç›‘æ§é¡µé¢ï¼‰é»˜è®¤å€¼ä¸ºfalseï¼ˆè€ƒè™‘åˆ°å®‰å…¨é—®é¢˜é»˜è®¤å¹¶æœªå¯åŠ¨ï¼Œå¦‚éœ€å¯ç”¨å»ºè®®è®¾ç½®å¯†ç æˆ–ç™½åå•ä»¥ä¿éšœå®‰å…¨ï¼‰spring.datasource.druid.stat-view-servlet.url-pattern=spring.datasource.druid.stat-view-servlet.reset-enable=spring.datasource.druid.stat-view-servlet.login-username=spring.datasource.druid.stat-view-servlet.login-password=spring.datasource.druid.stat-view-servlet.allow=spring.datasource.druid.stat-view-servlet.deny=# Springç›‘æ§é…ç½®ï¼Œè¯´æ˜è¯·å‚è€ƒDruid Github Wikiï¼Œé…ç½®_Druidå’ŒSpringå…³è”ç›‘æ§é…ç½®spring.datasource.druid.aop-patterns= # Springç›‘æ§AOPåˆ‡å…¥ç‚¹ï¼Œå¦‚x.y.z.service.*,é…ç½®å¤šä¸ªè‹±æ–‡é€—å·åˆ†éš” Druid Spring Boot Starter ä¸ä»…é™äºå¯¹ä»¥ä¸Šé…ç½®å±æ€§æä¾›æ”¯æŒï¼ŒDruidDataSource å†…æä¾›setteræ–¹æ³•çš„å¯é…ç½®å±æ€§éƒ½å°†è¢«æ”¯æŒã€‚ä½ å¯ä»¥å‚è€ƒWIKIæ–‡æ¡£æˆ–é€šè¿‡IDEè¾“å…¥æç¤ºæ¥è¿›è¡Œé…ç½®ã€‚é…ç½®æ–‡ä»¶çš„æ ¼å¼ä½ å¯ä»¥é€‰æ‹©.propertiesæˆ–.ymlï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œåœ¨é…ç½®è¾ƒå¤šçš„æƒ…å†µä¸‹æ¨èä½¿ç”¨.ymlã€‚ å¦‚ä½•é…ç½®å¤šæ•°æ®æº æ·»åŠ é…ç½® 123456789101112131415161718192021spring.datasource.url=spring.datasource.username=spring.datasource.password=# Druid æ•°æ®æºé…ç½®ï¼Œç»§æ‰¿spring.datasource.* é…ç½®ï¼Œç›¸åŒåˆ™è¦†ç›–...spring.datasource.druid.initial-size=5spring.datasource.druid.max-active=5...# Druid æ•°æ®æº 1 é…ç½®ï¼Œç»§æ‰¿spring.datasource.druid.* é…ç½®ï¼Œç›¸åŒåˆ™è¦†ç›–...spring.datasource.druid.one.max-active=10spring.datasource.druid.one.max-wait=10000...# Druid æ•°æ®æº 2 é…ç½®ï¼Œç»§æ‰¿spring.datasource.druid.* é…ç½®ï¼Œç›¸åŒåˆ™è¦†ç›–...spring.datasource.druid.two.max-active=20spring.datasource.druid.two.max-wait=20000... å¼ºçƒˆæ³¨æ„ï¼šSpring Boot 2.X ç‰ˆæœ¬ä¸å†æ”¯æŒé…ç½®ç»§æ‰¿ï¼Œå¤šæ•°æ®æºçš„è¯æ¯ä¸ªæ•°æ®æºçš„æ‰€æœ‰é…ç½®éƒ½éœ€è¦å•ç‹¬é…ç½®ï¼Œå¦åˆ™é…ç½®ä¸ä¼šç”Ÿæ•ˆ åˆ›å»ºæ•°æ®æº 1234567891011@Primary@Bean@ConfigurationProperties(&quot;spring.datasource.druid.one&quot;)public DataSource dataSourceOne()&#123; return DruidDataSourceBuilder.create().build();&#125;@Bean@ConfigurationProperties(&quot;spring.datasource.druid.two&quot;)public DataSource dataSourceTwo()&#123; return DruidDataSourceBuilder.create().build();&#125; å¦‚ä½•é…ç½® Filterä½ å¯ä»¥é€šè¿‡ spring.datasource.druid.filters=stat,wall,log4j ... çš„æ–¹å¼æ¥å¯ç”¨ç›¸åº”çš„å†…ç½®Filterï¼Œä¸è¿‡è¿™äº›Filteréƒ½æ˜¯é»˜è®¤é…ç½®ã€‚å¦‚æœé»˜è®¤é…ç½®ä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥æ”¾å¼ƒè¿™ç§æ–¹å¼ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶æ¥é…ç½®Filterï¼Œä¸‹é¢æ˜¯ä¾‹å­ã€‚ 12345678910111213# é…ç½®StatFilter spring.datasource.druid.filter.stat.enabled=truespring.datasource.druid.filter.stat.db-type=h2spring.datasource.druid.filter.stat.log-slow-sql=truespring.datasource.druid.filter.stat.slow-sql-millis=2000# é…ç½®WallFilter spring.datasource.druid.filter.wall.enabled=truespring.datasource.druid.filter.wall.db-type=h2spring.datasource.druid.filter.wall.config.delete-allow=falsespring.datasource.druid.filter.wall.config.drop-table-allow=false# å…¶ä»– Filter é…ç½®ä¸å†æ¼”ç¤º ç›®å‰ä¸ºä»¥ä¸‹ Filter æä¾›äº†é…ç½®æ”¯æŒï¼Œè¯·å‚è€ƒæ–‡æ¡£æˆ–è€…æ ¹æ®IDEæç¤ºï¼ˆspring.datasource.druid.filter.*ï¼‰è¿›è¡Œé…ç½®ã€‚ StatFilter WallFilter ConfigFilter EncodingConvertFilter Slf4jLogFilter Log4jFilter Log4j2Filter CommonsLogFilter è¦æƒ³ä½¿è‡ªå®šä¹‰ Filter é…ç½®ç”Ÿæ•ˆéœ€è¦å°†å¯¹åº” Filter çš„ enabled è®¾ç½®ä¸º true ï¼ŒDruid Spring Boot Starter é»˜è®¤ç¦ç”¨ StatFilterï¼Œä½ ä¹Ÿå¯ä»¥å°†å…¶ enabled è®¾ç½®ä¸º true æ¥å¯ç”¨å®ƒã€‚ å¦‚ä½•è·å– Druid çš„ç›‘æ§æ•°æ®Druid çš„ç›‘æ§æ•°æ®å¯ä»¥åœ¨å¼€å¯ StatFilter åé€šè¿‡ DruidStatManagerFacade è¿›è¡Œè·å–ï¼Œè·å–åˆ°ç›‘æ§æ•°æ®ä¹‹åä½ å¯ä»¥å°†å…¶æš´éœ²ç»™ä½ çš„ç›‘æ§ç³»ç»Ÿè¿›è¡Œä½¿ç”¨ã€‚Druid é»˜è®¤çš„ç›‘æ§ç³»ç»Ÿæ•°æ®ä¹Ÿæ¥æºäºæ­¤ã€‚ä¸‹é¢ç»™åšä¸€ä¸ªç®€å•çš„æ¼”ç¤ºï¼Œåœ¨ Spring Boot ä¸­å¦‚ä½•é€šè¿‡ HTTP æ¥å£å°† Druid ç›‘æ§æ•°æ®ä»¥ JSON çš„å½¢å¼æš´éœ²å‡ºå»ï¼Œå®é™…ä½¿ç”¨ä¸­ä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦è‡ªç”±åœ°å¯¹ç›‘æ§æ•°æ®ã€æš´éœ²æ–¹å¼è¿›è¡Œæ‰©å±•ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596@RestControllerpublic class DruidStatController &#123; @GetMapping(&quot;/druid/stat&quot;) public Object druidStat()&#123; // DruidStatManagerFacade#getDataSourceStatDataList è¯¥æ–¹æ³•å¯ä»¥è·å–æ‰€æœ‰æ•°æ®æºçš„ç›‘æ§æ•°æ®ï¼Œé™¤æ­¤ä¹‹å¤– DruidStatManagerFacade è¿˜æä¾›äº†ä¸€äº›å…¶ä»–æ–¹æ³•ï¼Œä½ å¯ä»¥æŒ‰éœ€é€‰æ‹©ä½¿ç”¨ã€‚ return DruidStatManagerFacade.getInstance().getDataSourceStatDataList(); &#125;&#125;[ &#123; &quot;Identity&quot;: 1583082378, &quot;Name&quot;: &quot;DataSource-1583082378&quot;, &quot;DbType&quot;: &quot;h2&quot;, &quot;DriverClassName&quot;: &quot;org.h2.Driver&quot;, &quot;URL&quot;: &quot;jdbc:h2:file:./demo-db&quot;, &quot;UserName&quot;: &quot;sa&quot;, &quot;FilterClassNames&quot;: [ &quot;com.alibaba.druid.filter.stat.StatFilter&quot; ], &quot;WaitThreadCount&quot;: 0, &quot;NotEmptyWaitCount&quot;: 0, &quot;NotEmptyWaitMillis&quot;: 0, &quot;PoolingCount&quot;: 2, &quot;PoolingPeak&quot;: 2, &quot;PoolingPeakTime&quot;: 1533782955104, &quot;ActiveCount&quot;: 0, &quot;ActivePeak&quot;: 1, &quot;ActivePeakTime&quot;: 1533782955178, &quot;InitialSize&quot;: 2, &quot;MinIdle&quot;: 2, &quot;MaxActive&quot;: 30, &quot;QueryTimeout&quot;: 0, &quot;TransactionQueryTimeout&quot;: 0, &quot;LoginTimeout&quot;: 0, &quot;ValidConnectionCheckerClassName&quot;: null, &quot;ExceptionSorterClassName&quot;: null, &quot;TestOnBorrow&quot;: true, &quot;TestOnReturn&quot;: true, &quot;TestWhileIdle&quot;: true, &quot;DefaultAutoCommit&quot;: true, &quot;DefaultReadOnly&quot;: null, &quot;DefaultTransactionIsolation&quot;: null, &quot;LogicConnectCount&quot;: 103, &quot;LogicCloseCount&quot;: 103, &quot;LogicConnectErrorCount&quot;: 0, &quot;PhysicalConnectCount&quot;: 2, &quot;PhysicalCloseCount&quot;: 0, &quot;PhysicalConnectErrorCount&quot;: 0, &quot;ExecuteCount&quot;: 102, &quot;ErrorCount&quot;: 0, &quot;CommitCount&quot;: 100, &quot;RollbackCount&quot;: 0, &quot;PSCacheAccessCount&quot;: 100, &quot;PSCacheHitCount&quot;: 99, &quot;PSCacheMissCount&quot;: 1, &quot;StartTransactionCount&quot;: 100, &quot;TransactionHistogram&quot;: [ 55, 44, 1, 0, 0, 0, 0 ], &quot;ConnectionHoldTimeHistogram&quot;: [ 53, 47, 3, 0, 0, 0, 0, 0 ], &quot;RemoveAbandoned&quot;: false, &quot;ClobOpenCount&quot;: 0, &quot;BlobOpenCount&quot;: 0, &quot;KeepAliveCheckCount&quot;: 0, &quot;KeepAlive&quot;: false, &quot;FailFast&quot;: false, &quot;MaxWait&quot;: 1234, &quot;MaxWaitThreadCount&quot;: -1, &quot;PoolPreparedStatements&quot;: true, &quot;MaxPoolPreparedStatementPerConnectionSize&quot;: 5, &quot;MinEvictableIdleTimeMillis&quot;: 30001, &quot;MaxEvictableIdleTimeMillis&quot;: 25200000, &quot;LogDifferentThread&quot;: true, &quot;RecycleErrorCount&quot;: 0, &quot;PreparedStatementOpenCount&quot;: 1, &quot;PreparedStatementClosedCount&quot;: 0, &quot;UseUnfairLock&quot;: true, &quot;InitGlobalVariants&quot;: false, &quot;InitVariants&quot;: false &#125;] IDE æç¤ºæ”¯æŒ æ¼”ç¤ºå…‹éš†é¡¹ç›®ï¼Œè¿è¡ŒteståŒ…å†…çš„DemoApplicationã€‚ æ–‡ç« å‚è€ƒ druid å®˜æ–¹readme.md springbootä¸‹ä½¿ç”¨druid-spring-boot-starter","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"Druid","slug":"Druid","permalink":"https://guoshunfa.com/tags/Druid/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆMongoDBæ•°æ®åº“","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/24é›†æˆæ•°æ®åº“/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆMongoDBæ•°æ®åº“","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆMongoDBæ•°æ®åº“/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90MongoDB%E6%95%B0%E6%8D%AE%E5%BA%93/","excerpt":"","text":"1. é›†æˆ1.1. Maven1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;&lt;/dependency&gt; 1.2. ç¯å¢ƒé…ç½®123# application.properties# MongoDBæ•°æ®åº“spring.data.mongodb.uri=mongodb://127.0.0.1:27017/gsf_test spring.data.mongodb.uri&#x3D;mongodb:&#x2F;&#x2F;name:pass@localhost:27017&#x2F;testï¼Œå…¶ä¸­nameæ˜¯ç”¨æˆ·åï¼Œpassæ˜¯å¯†ç  å¦‚æœè¦é…ç½®å¤šä¸ªæ•°æ®åº“ï¼Œåˆ™ä¸­é—´ç”¨â€,â€åˆ†å‰²ï¼Œä¾‹å¦‚ spring.data.mongodb.uri&#x3D;mongodb:&#x2F;&#x2F;192.168.1.1:20000,192.168.1.2:20000,192.168.252.12:20000&#x2F;test 1.3. demo12345678910111213141516171819@SpringBootTestclass TestMongodbApplicationTests &#123; @Autowired private MongoTemplate mongoTemplate; @Test void contextLoads() &#123; HouseHold houseHold = mongoTemplate.findById(&quot;60fa3b3635f8c5790b880297&quot;, HouseHold.class, &quot;HouseHold&quot;); System.out.println(houseHold.getId() + houseHold.getCreateTime()); &#125; class HouseHold &#123; private String id; private Date createTime; // çœç•¥set get &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MongoDB","slug":"MongoDB","permalink":"https://guoshunfa.com/tags/MongoDB/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆMysqlæ•°æ®åº“","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/24é›†æˆæ•°æ®åº“/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆMysqlæ•°æ®åº“","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆMysqlæ•°æ®åº“/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90Mysql%E6%95%B0%E6%8D%AE%E5%BA%93/","excerpt":"","text":"&#96; 1. SpringBootæ¡†æ¶é›†æˆMysql1.1. å¼•å…¥mysql mavenåŒ…123456789101112131415 &lt;!--é›†æˆmysqlæ•°æ®åº“--&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;&lt;/dependency&gt; 1.2. æ·»åŠ æ•°æ®åº“é…ç½® druidé…ç½®è¯·å‰å¾€ï¼šDruidæ•°æ®åº“è¿æ¥æ± å’Œç›‘æ§ åœ¨spring booté¡¹ç›®çš„é…ç½®æ–‡ä»¶application.propertiesä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š 12345678910111213spring.datasource.druid.url=jdbc:mysql://127.0.0.1:3306/db?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=falsespring.datasource.druid.username=rootspring.datasource.druid.password=pandacodespring.datasource.druid.max-active=20spring.datasource.druid.initial-size=5spring.datasource.druid.min-idle=5spring.datasource.druid.min-evictable-idle-time-millis=300000spring.datasource.druid.max-wait=60000spring.datasource.druid.validation-query=select 1spring.datasource.druid.test-on-borrow=falsespring.datasource.druid.test-on-return=falsespring.datasource.druid.test-while-idle=truespring.datasource.druid.time-between-eviction-runs-millis=60000","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"mysql","slug":"mysql","permalink":"https://guoshunfa.com/tags/mysql/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆRedisæ•°æ®åº“","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/24é›†æˆæ•°æ®åº“/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆRedisæ•°æ®åº“","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆRedisæ•°æ®åº“/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90Redis%E6%95%B0%E6%8D%AE%E5%BA%93/","excerpt":"","text":"å¼•å…¥mavenä¾èµ–1234567891011121314151617181920&lt;!-- redis æ•°æ®åº“ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt; &lt;groupId&gt;io.lettuce&lt;/groupId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.commons&lt;/groupId&gt; &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt; &lt;version&gt;2.9.0&lt;/version&gt;&lt;/dependency&gt; æ·»åŠ é…ç½®ç±»12345678910111213141516171819202122import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.data.redis.connection.RedisConnectionFactory;import org.springframework.data.redis.core.RedisTemplate;import org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;import org.springframework.data.redis.serializer.StringRedisSerializer;@Configurationpublic class RedisConfig &#123; @Bean public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory factory) &#123; RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;(); template.setConnectionFactory(factory); template.setKeySerializer(new StringRedisSerializer()); template.setHashKeySerializer(new StringRedisSerializer()); template.setValueSerializer(new GenericJackson2JsonRedisSerializer()); template.setHashValueSerializer(new GenericJackson2JsonRedisSerializer()); template.afterPropertiesSet(); return template; &#125;&#125; RedisTemplateä½¿ç”¨ä½¿ç”¨RedisTemplateçš„opsFor***æ–¹æ³•ï¼Œè¿›è¡Œæ“æ§æŒ‡å®šç±»å‹çš„æ•°æ®ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"Redis","slug":"Redis","permalink":"https://guoshunfa.com/tags/Redis/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆMybatisPlus-Mybatiså¢å¼ºå™¨","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/25é›†æˆæŒä¹…å±‚æ¡†æ¶/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆMybatisPlus-Mybatiså¢å¼ºå™¨","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆMybatisPlus-Mybatiså¢å¼ºå™¨/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90MybatisPlus-Mybatis%E5%A2%9E%E5%BC%BA%E5%99%A8/","excerpt":"","text":"é›†æˆMybatisPlus(Mybatiså¢å¼ºå™¨) Mybatis Plusè¯¦ç»†è®²è§£ å¼•å…¥maven12345&lt;!-- mybatis-plus --&gt;&lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;&lt;/dependency&gt;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"Mybatis","slug":"Mybatis","permalink":"https://guoshunfa.com/tags/Mybatis/"},{"name":"æŒä¹…å±‚æ¡†æ¶","slug":"æŒä¹…å±‚æ¡†æ¶","permalink":"https://guoshunfa.com/tags/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/"},{"name":"MybatisPlus","slug":"MybatisPlus","permalink":"https://guoshunfa.com/tags/MybatisPlus/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆMybatisPlusä»£ç ç”Ÿæˆ","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/25é›†æˆæŒä¹…å±‚æ¡†æ¶/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆMybatisPlusä»£ç ç”Ÿæˆ","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆMybatisPlusä»£ç ç”Ÿæˆ/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90MybatisPlus%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/","excerpt":"","text":"å®˜æ–¹ è¯´æ˜æ–‡æ¡£ å¼•å…¥maven123456789101112131415&lt;!-- mybatis plus --&gt;&lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!-- mybatis plus generator --&gt;&lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus-generator&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!-- freemarker --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;&lt;/dependency&gt; ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159import com.baomidou.mybatisplus.annotation.FieldFill;import com.baomidou.mybatisplus.annotation.IdType;import com.baomidou.mybatisplus.generator.FastAutoGenerator;import com.baomidou.mybatisplus.generator.config.DataSourceConfig;import com.baomidou.mybatisplus.generator.config.OutputFile;import com.baomidou.mybatisplus.generator.config.converts.MySqlTypeConvert;import com.baomidou.mybatisplus.generator.config.querys.MySqlQuery;import com.baomidou.mybatisplus.generator.config.rules.DateType;import com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;import com.baomidou.mybatisplus.generator.fill.Column;import com.baomidou.mybatisplus.generator.fill.Property;import com.baomidou.mybatisplus.generator.keywords.MySqlKeyWordsHandler;import com.panda.common.base.*;import java.util.Collections;/** * mybatis plus ä»£ç ç”Ÿæˆ&lt;br/&gt; * è¯¦ç»†é…ç½®è¯·å‰å¾€ https://baomidou.com/pages/981406/ * @author guoshunfa */public class CodeGenerate &#123; // æ•°æ®åº“urlåœ°å€ public static final String URL = &quot;jdbc:mysql://127.0.0.1:3306/attacking-panda-db?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&quot;; // æ•°æ®åº“ç”¨æˆ·å public static final String USERNAME = &quot;root&quot;; // æ•°æ®åº“å¯†ç  public static final String PASSWORD = &quot;guoshunfa&quot;; // ä»£ç å¼€å‘ä½œè€… public static final String AUTHOR = &quot;guoshunfa&quot;; // ä»£ç ç”Ÿæˆåˆ°æŒ‡å®šç›®å½• public static final String OUTPUT_DIR = &quot;/Users/guoshunfa/workspace/my/my-main-git-project/attacking-panda/attacking-panda-java/codeGenerate&quot;; // çˆ¶åŒ…å public static final String PARENT = &quot;com.panda.admin&quot;; // çˆ¶åŒ…æ¨¡å— public static final String MODULE_NAME = &quot;system&quot;; // éœ€è¦ç”Ÿæˆçš„è¡¨ public static final String[] ADD_INCLUDE = &#123;&quot;sys_user&quot;, &quot;sys_dept&quot;&#125;; // è®¾ç½®è¿‡æ»¤è¡¨å‰ç¼€ï¼Œä¾‹å­ï¼š&quot;t_&quot;, &quot;c_&quot; public static final String[] ADD_TABLE_PREFIX = &#123;&#125;; public static void main(String[] args) &#123; FastAutoGenerator.create( new DataSourceConfig.Builder(URL, USERNAME, PASSWORD) .dbQuery(new MySqlQuery()) // æ•°æ®åº“æŸ¥è¯¢ .schema(&quot;&quot;) // æ•°æ®åº“ schema(éƒ¨åˆ†æ•°æ®åº“é€‚ç”¨)// .typeConvert(new MySqlTypeConvert()) // æ•°æ®åº“ç±»å‹è½¬æ¢å™¨ .keyWordsHandler(new MySqlKeyWordsHandler()) // æ•°æ®åº“å…³é”®å­—å¤„ç†å™¨ ) // æ•°æ®åº“é…ç½® // ----------------------------------å…¨å±€é…ç½®---------------------------------- .globalConfig(builder -&gt; &#123; builder.fileOverride() // è¦†ç›–å·²ç”Ÿæˆæ–‡ä»¶ï¼Œé»˜è®¤å€¼:false// .disableOpenDir() // ç¦æ­¢æ‰“å¼€è¾“å‡ºç›®å½•ï¼Œé»˜è®¤å€¼:true .outputDir(OUTPUT_DIR) // æŒ‡å®šè¾“å‡ºç›®å½• .author(AUTHOR) // ä½œè€…å// .enableKotlin() // å¼€å¯ kotlin æ¨¡å¼ï¼Œé»˜è®¤å€¼:false .enableSwagger() // å¼€å¯ swagger æ¨¡å¼ï¼Œé»˜è®¤å€¼:false .dateType(DateType.TIME_PACK) // æ—¶é—´ç­–ç•¥ .commentDate(&quot;yyyy-MM-dd&quot;); // æ³¨é‡Šæ—¥æœŸ &#125;) // ----------------------------------åŒ…é…ç½®---------------------------------- .packageConfig(builder -&gt; &#123; builder.parent(PARENT) // çˆ¶åŒ…å é»˜è®¤å€¼:com.baomidou .moduleName(MODULE_NAME) // çˆ¶åŒ…æ¨¡å—å é»˜è®¤å€¼:æ—  .entity(&quot;entity&quot;) // Entity åŒ…å é»˜è®¤å€¼:entity .service(&quot;service&quot;) // Service åŒ…å é»˜è®¤å€¼:service .serviceImpl(&quot;service.impl&quot;) // Service Impl åŒ…å é»˜è®¤å€¼:service.impl .mapper(&quot;mapper&quot;) // Mapper åŒ…å é»˜è®¤å€¼:mapper .xml(&quot;mapper.xml&quot;) // Mapper XML åŒ…å é»˜è®¤å€¼:mapper.xml .controller(&quot;controller&quot;) // Controller åŒ…å é»˜è®¤å€¼:controller .other(&quot;other&quot;) // è‡ªå®šä¹‰æ–‡ä»¶åŒ…å è¾“å‡ºè‡ªå®šä¹‰æ–‡ä»¶æ—¶æ‰€ç”¨åˆ°çš„åŒ…å .pathInfo(Collections.singletonMap(OutputFile.mapperXml, OUTPUT_DIR)) // è·¯å¾„é…ç½®ä¿¡æ¯ .build(); &#125;) // ----------------------------------æ¨¡æ¿é…ç½®----------------------------------// .templateConfig(builder -&gt; &#123;&#125;) // ----------------------------------æ³¨å…¥é…ç½®---------------------------------- .injectionConfig(builder -&gt; &#123; builder.beforeOutputFile(((tableInfo, objectMap) -&gt; &#123; System.out.println(&quot;tableInfo: &quot; + tableInfo.getEntityName() + &quot; objectMap: &quot; + objectMap.size()); &#125;)) // è¾“å‡ºæ–‡ä»¶ä¹‹å‰æ¶ˆè´¹è€…// .customMap(Collections.singletonMap(&quot;test&quot;, &quot;baomidou&quot;)) // è‡ªå®šä¹‰é…ç½® Map å¯¹è±¡// .customFile(Collections.singletonMap(&quot;test.txt&quot;, &quot;/templates/test.vm&quot;)) // è‡ªå®šä¹‰é…ç½®æ¨¡æ¿æ–‡ä»¶ .build(); &#125;) // ----------------------------------ç­–ç•¥é…ç½®---------------------------------- .strategyConfig(builder -&gt; &#123; builder.enableCapitalMode() // å¼€å¯å¤§å†™å‘½å é»˜è®¤å€¼:false .enableSkipView() // å¼€å¯è·³è¿‡è§†å›¾ é»˜è®¤å€¼:false .disableSqlFilter() // ç¦ç”¨ sql è¿‡æ»¤ é»˜è®¤å€¼:trueï¼Œè¯­æ³•ä¸èƒ½æ”¯æŒä½¿ç”¨ sql è¿‡æ»¤è¡¨çš„è¯ï¼Œå¯ä»¥è€ƒè™‘å…³é—­æ­¤å¼€å…³ .enableSchema() // å¯ç”¨ schema é»˜è®¤å€¼:falseï¼Œå¤š schema åœºæ™¯çš„æ—¶å€™æ‰“å¼€// .likeTable(new LikeTable(&quot;USER&quot;)) // æ¨¡ç³Šè¡¨åŒ¹é…(sql è¿‡æ»¤) likeTable ä¸ notLikeTable åªèƒ½é…ç½®ä¸€é¡¹// .notLikeTable(new LikeTable(&quot;USER&quot;)) // æ¨¡ç³Šè¡¨æ’é™¤(sql è¿‡æ»¤) likeTable ä¸ notLikeTable åªèƒ½é…ç½®ä¸€é¡¹ .addInclude(ADD_INCLUDE) // å¢åŠ è¡¨åŒ¹é…(å†…å­˜è¿‡æ»¤) include ä¸ exclude åªèƒ½é…ç½®ä¸€é¡¹// .addExclude(&quot;a_abc&quot;) // å¢åŠ è¡¨æ’é™¤åŒ¹é…(å†…å­˜è¿‡æ»¤) include ä¸ exclude åªèƒ½é…ç½®ä¸€é¡¹ .addTablePrefix(ADD_TABLE_PREFIX) // å¢åŠ è¿‡æ»¤è¡¨å‰ç¼€// .addTableSuffix(&quot;abc&quot;) // å¢åŠ è¿‡æ»¤è¡¨åç¼€// .addFieldPrefix(&quot;sys_&quot;) // å¢åŠ è¿‡æ»¤å­—æ®µå‰ç¼€// .addFieldSuffix(&quot;_flag&quot;) // å¢åŠ è¿‡æ»¤å­—æ®µåç¼€ // ----------------------------------Entity ç­–ç•¥é…ç½®---------------------------------- .entityBuilder().superClass(BaseEntity.class) // è®¾ç½®çˆ¶ç±»// .disableSerialVersionUID() // ç¦ç”¨ç”Ÿæˆ serialVersionUID é»˜è®¤å€¼:true// .enableColumnConstant() // å¼€å¯ç”Ÿæˆå­—æ®µå¸¸é‡ é»˜è®¤å€¼:false .enableChainModel() // å¼€å¯é“¾å¼æ¨¡å‹ é»˜è®¤å€¼:false// .enableLombok() // å¼€å¯ lombok æ¨¡å‹ é»˜è®¤å€¼:false .enableRemoveIsPrefix() // å¼€å¯ Boolean ç±»å‹å­—æ®µç§»é™¤ is å‰ç¼€ é»˜è®¤å€¼:false .enableTableFieldAnnotation() // å¼€å¯ç”Ÿæˆå®ä½“æ—¶ç”Ÿæˆå­—æ®µæ³¨è§£ é»˜è®¤å€¼:false .enableActiveRecord() // å¼€å¯ ActiveRecord æ¨¡å‹ é»˜è®¤å€¼:false .versionColumnName(&quot;version&quot;) // ä¹è§‚é”å­—æ®µå(æ•°æ®åº“) .versionPropertyName(&quot;version&quot;) // ä¹è§‚é”å±æ€§å(å®ä½“) .logicDeleteColumnName(&quot;delete_flag&quot;) // é€»è¾‘åˆ é™¤å­—æ®µå(æ•°æ®åº“) .logicDeletePropertyName(&quot;deleteFlag&quot;) // é€»è¾‘åˆ é™¤å±æ€§å(å®ä½“)// .naming(NamingStrategy.no_change) // æ•°æ®åº“è¡¨æ˜ å°„åˆ°å®ä½“çš„å‘½åç­–ç•¥ é»˜è®¤ä¸‹åˆ’çº¿è½¬é©¼å³°å‘½å:NamingStrategy.underline_to_camel// .columnNaming(NamingStrategy.underline_to_camel) // æ•°æ®åº“è¡¨å­—æ®µæ˜ å°„åˆ°å®ä½“çš„å‘½åç­–ç•¥ é»˜è®¤ä¸º nullï¼ŒæœªæŒ‡å®šæŒ‰ç…§ naming æ‰§è¡Œ .addSuperEntityColumns(&quot;id&quot;, &quot;delete_flag&quot;, &quot;version&quot;, &quot;created_by&quot;, &quot;created_time&quot;, &quot;updated_by&quot;, &quot;updated_time&quot;) // æ·»åŠ çˆ¶ç±»å…¬å…±å­—æ®µ// .addIgnoreColumns(&quot;age&quot;) // æ·»åŠ å¿½ç•¥å­—æ®µ .addTableFills(new Column(&quot;create_time&quot;, FieldFill.INSERT)) // æ·»åŠ è¡¨å­—æ®µå¡«å…… .addTableFills(new Property(&quot;updateTime&quot;, FieldFill.INSERT_UPDATE)) // æ·»åŠ è¡¨å­—æ®µå¡«å…… .idType(IdType.ASSIGN_UUID) // å…¨å±€ä¸»é”®ç±»å‹// .formatFileName(&quot;%sEntity&quot;) // æ ¼å¼åŒ–æ–‡ä»¶åç§° .build() // ----------------------------------Controller ç­–ç•¥é…ç½®---------------------------------- .controllerBuilder() .superClass(BaseController.class) // è®¾ç½®çˆ¶ç±» .enableHyphenStyle() // å¼€å¯é©¼å³°è½¬è¿å­—ç¬¦ .enableRestStyle() // å¼€å¯ç”Ÿæˆ@RestController æ§åˆ¶å™¨// .convertFileName() // è½¬æ¢æ–‡ä»¶åç§° .formatFileName(&quot;%sController&quot;) // æ ¼å¼åŒ–æ–‡ä»¶åç§° .build() // ----------------------------------Service ç­–ç•¥é…ç½®---------------------------------- .serviceBuilder() .superServiceClass(BaseService.class) // è®¾ç½® service æ¥å£çˆ¶ç±» .superServiceImplClass(BaseServiceImpl.class) // è®¾ç½® service å®ç°ç±»çˆ¶ç±»// .convertServiceFileName() // è½¬æ¢ service æ¥å£æ–‡ä»¶åç§°// .convertServiceImplFileName() // è½¬æ¢ service å®ç°ç±»æ–‡ä»¶åç§° .formatServiceFileName(&quot;I%sService&quot;) // æ ¼å¼åŒ– service æ¥å£æ–‡ä»¶åç§° .formatServiceImplFileName(&quot;%sServiceImpl&quot;) // æ ¼å¼åŒ– service å®ç°ç±»æ–‡ä»¶åç§° .build() // ----------------------------------Mapper ç­–ç•¥é…ç½®---------------------------------- .mapperBuilder() .superClass(BaseMapper.class) // è®¾ç½®çˆ¶ç±» .enableMapperAnnotation() // å¼€å¯ @Mapper æ³¨è§£ é»˜è®¤å€¼:false .enableBaseResultMap() // å¯ç”¨ BaseResultMap ç”Ÿæˆ .enableBaseColumnList() // å¯ç”¨ BaseColumnList// .cache(MyMapperCache.class) // è®¾ç½®ç¼“å­˜å®ç°ç±»// .convertMapperFileName(ConverterFileName) // è½¬æ¢ mapper ç±»æ–‡ä»¶åç§°// .convertXmlFileName(ConverterFileName) // è½¬æ¢ xml æ–‡ä»¶åç§° .formatMapperFileName(&quot;%sMapper&quot;) // æ ¼å¼åŒ– mapper æ–‡ä»¶åç§° .formatXmlFileName(&quot;%sXml&quot;) // æ ¼å¼åŒ– xml å®ç°ç±»æ–‡ä»¶åç§° .build(); &#125;) // ----------------------------------è‡ªå®šä¹‰æ¨¡ç‰ˆæ”¯æŒ(DTO\\VOç­‰)é…ç½®---------------------------------- .templateEngine(new FreemarkerTemplateEngine()) // ä½¿ç”¨Freemarkerå¼•æ“æ¨¡æ¿ï¼Œé»˜è®¤çš„æ˜¯Velocityå¼•æ“æ¨¡æ¿ .execute(); &#125;&#125; åŸºç¡€ç±» æœ€ç®€å•çš„åŸºç¡€ç±»ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨è‡ªå·±çš„åŸºç¡€ç±»ï¼Œç›´æ¥ä½¿ç”¨MybatisPlusé»˜è®¤çš„åŸºç¡€ç±»ï¼Œåªéœ€è¦æŠŠé…ç½®çˆ¶ç±»çš„ä»£ç åˆ æ‰å°±å¯ä»¥ã€‚ ä½†æ˜¯æˆ‘å»ºè®®æ˜¯ä½¿ç”¨è‡ªå·±çš„åŸºç¡€ç±»ï¼Œè¿™æ ·å¯ä»¥æ‰©å±•ã€‚ BaseController12345678910/** * åŸºç¡€æ§åˆ¶å™¨ * * @className: BaseController * @author: GuoShunFa * @date: 2022/11/10 **/public class BaseController &#123;&#125; BaseEntity123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106import com.baomidou.mybatisplus.annotation.FieldFill;import com.baomidou.mybatisplus.annotation.TableField;import com.baomidou.mybatisplus.annotation.TableId;import com.baomidou.mybatisplus.extension.activerecord.Model;import io.swagger.annotations.ApiModel;import io.swagger.annotations.ApiModelProperty;import java.io.Serializable;import java.util.Date;/** * åŸºç¡€å®ä½“ç±» * * @className: BaseEntity * @author: GuoShunFa * @date: 2022/11/10 **/@ApiModel(&quot;åŸºç¡€ç±»&quot;)public class BaseEntity&lt;T&gt; extends Model implements Serializable &#123; @ApiModelProperty(&quot;ä¸»é”®idå­—æ®µ&quot;) @TableField(&quot;id&quot;) @TableId private String id; @ApiModelProperty(&quot;ä¹è§‚é”å­—æ®µ&quot;) @TableField(&quot;version&quot;) private String version; @ApiModelProperty(&quot;é€»è¾‘åˆ é™¤å­—æ®µ&quot;) @TableField(&quot;delete_flag&quot;) private String deleteFlag; @ApiModelProperty(&quot;è®°å½•åˆ›å»ºæ—¶é—´&quot;) @TableField(value = &quot;create_time&quot;, fill = FieldFill.INSERT) private Date createTime; @ApiModelProperty(&quot;è®°å½•åˆ›å»ºäºº&quot;) @TableField(&quot;create_by&quot;) private String createBy; @ApiModelProperty(&quot;è®°å½•ä¿®æ”¹æ—¶é—´&quot;) @TableField(value = &quot;update_time&quot;, fill = FieldFill.INSERT_UPDATE) private Date updateTime; @ApiModelProperty(&quot;è®°å½•åˆ›å»ºäºº&quot;) @TableField(&quot;update_by&quot;) private String updateBy; public String getCreateBy() &#123; return createBy; &#125; public void setCreateBy(String createBy) &#123; this.createBy = createBy; &#125; public String getUpdateBy() &#123; return updateBy; &#125; public void setUpdateBy(String updateBy) &#123; this.updateBy = updateBy; &#125; public Date getCreateTime() &#123; return createTime; &#125; public void setCreateTime(Date createTime) &#123; this.createTime = createTime; &#125; public Date getUpdateTime() &#123; return updateTime; &#125; public void setUpdateTime(Date updateTime) &#123; this.updateTime = updateTime; &#125; public String getId() &#123; return id; &#125; public void setId(String id) &#123; this.id = id; &#125; public String getVersion() &#123; return version; &#125; public void setVersion(String version) &#123; this.version = version; &#125; public String getDeleteFlag() &#123; return deleteFlag; &#125; public void setDeleteFlag(String deleteFlag) &#123; this.deleteFlag = deleteFlag; &#125;&#125; BaseMapper123456789/** * åŸºç¡€æ˜ å°„ç±» * * @className: BaseMapper * @author: GuoShunFa * @date: 2022/11/10 **/public interface BaseMapper&lt;T&gt; extends com.baomidou.mybatisplus.core.mapper.BaseMapper&lt;T&gt; &#123;&#125; BaseService1234567891011import com.baomidou.mybatisplus.extension.service.IService;/** * åŸºç¡€æœåŠ¡æ¥å£ * * @className: BaseService * @author: GuoShunFa * @date: 2022/11/10 **/public interface BaseService&lt;T&gt; extends IService &#123;&#125; BaseServiceImpl123456789import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;/** * @className: BaseServiceImpl * @author: GuoShunFa * @date: 2022/11/10 **/public class BaseServiceImpl&lt;M, T&gt; extends ServiceImpl implements BaseService&lt;T&gt; &#123;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"Mybatis","slug":"Mybatis","permalink":"https://guoshunfa.com/tags/Mybatis/"},{"name":"æŒä¹…å±‚æ¡†æ¶","slug":"æŒä¹…å±‚æ¡†æ¶","permalink":"https://guoshunfa.com/tags/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/"},{"name":"MybatisPlus","slug":"MybatisPlus","permalink":"https://guoshunfa.com/tags/MybatisPlus/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆMybatisæŒä¹…å±‚æ¡†æ¶","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/25é›†æˆæŒä¹…å±‚æ¡†æ¶/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆMybatisæŒä¹…å±‚æ¡†æ¶","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆMybatisæŒä¹…å±‚æ¡†æ¶/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90Mybatis%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/","excerpt":"","text":"Mybatisè¯¦ç»†è®²è§£ å¼•å…¥maven12345&lt;!-- mybatis --&gt;&lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt;&lt;/dependency&gt;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"Mybatis","slug":"Mybatis","permalink":"https://guoshunfa.com/tags/Mybatis/"},{"name":"æŒä¹…å±‚æ¡†æ¶","slug":"æŒä¹…å±‚æ¡†æ¶","permalink":"https://guoshunfa.com/tags/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆFreeMarkeræ¨¡æ¿å¼•æ“","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/30é›†æˆæ¨¡ç‰ˆå¼•æ“/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆFreeMarkeræ¨¡æ¿å¼•æ“","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆFreeMarkeræ¨¡æ¿å¼•æ“/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90FreeMarker%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E/","excerpt":"","text":"å®˜ç½‘ | ä¸­æ–‡å®˜ç½‘ æœ¬æ–‡æš‚ä¸ä»‹ç»freemarker apiï¼Œä»¥æ¡ˆä¾‹çš„æ–¹å¼è¿›è¡Œä»‹ç»ã€‚ é¡¹ç›®å¼•å…¥freemarker 12345&lt;dependency&gt; &lt;groupId&gt;org.freemarker&lt;/groupId&gt; &lt;artifactId&gt;freemarker&lt;/artifactId&gt; &lt;version&gt;2.3.31&lt;/version&gt;&lt;/dependency&gt; FreeMarkerä½¿ç”¨docæ¨¡æ¿ä½¿ç”¨docæ¨¡ç‰ˆï¼Œå°†æ•°æ®å¼•å…¥ã€‚ æ¨¡ç‰ˆç¤ºä¾‹ï¼š ç»“æœç¤ºä¾‹ï¼š å…ˆå‡†å¤‡docæ¨¡ç‰ˆæ–‡ä»¶ã€‚å°†éœ€è¦æ”¾å…¥å€¼çš„å±æ€§åŠ ä¸Š$&#123;&#125;ï¼Œå¦‚ï¼š$&#123;aa&#125;ã€‚ å°†å‡†å¤‡å¥½çš„docæ–‡ä»¶è½¬æ¢æˆhtmlæ–‡ä»¶ã€‚ å°†htmlæ–‡ä»¶æ”¾å…¥åŒé¡¹ç›®çš„templatesä¸­ï¼ˆå¦‚è¦è°ƒæ•´å­˜æ”¾æ–‡ä»¶ä½ç½®ï¼Œå¯ä»¥åŒæ­¥æŠŠä¸‹æ–¹å·¥å…·ç±»é‡Œè·¯å¾„ä¹Ÿè°ƒæ•´äº†ã€‚ï¼‰ å¼•å…¥ä¸‹æ–¹å·¥å…·ç±»ã€‚ ä½¿ç”¨å·¥å…·ç±»ã€‚ å·¥å…·ç±»å¯ä»¥æ ¹æ®ä¸ªäººéœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051// å·¥å…·ç±»import com.ruoyi.common.config.RuoYiConfig;import com.ruoyi.common.core.domain.AjaxResult;import freemarker.template.Configuration;import freemarker.template.Template;import java.io.*;import java.util.Map;import java.util.UUID;public class WordUtil &#123; private static Configuration configuration = null; static &#123; configuration = new Configuration(); configuration.setDefaultEncoding(&quot;utf-8&quot;); configuration.setClassForTemplateLoading(WordUtil.class, &quot;/templates&quot;); &#125; private WordUtil() &#123; throw new AssertionError(); &#125; public static AjaxResult exportMillCertificateWord(Map map, String title, String ftlFile) throws IOException &#123; Template freemarkerTemplate = configuration.getTemplate(ftlFile); String fileName = UUID.randomUUID().toString() + &quot;_&quot; + title + &quot;.doc&quot;; String downloadPath = RuoYiConfig.getDownloadPath() + fileName; File desc = new File(downloadPath); if (!desc.getParentFile().exists()) &#123; desc.getParentFile().mkdirs(); &#125; // è°ƒç”¨å·¥å…·ç±»çš„createDocæ–¹æ³•ç”ŸæˆWordæ–‡æ¡£ createDoc(map,freemarkerTemplate,downloadPath); return AjaxResult.success(fileName); &#125; private static File createDoc(Map&lt;?, ?&gt; dataMap, Template template, String name) &#123; File f = new File(name); Template t = template; try &#123; // è¿™ä¸ªåœ°æ–¹ä¸èƒ½ä½¿ç”¨FileWriterå› ä¸ºéœ€è¦æŒ‡å®šç¼–ç ç±»å‹å¦åˆ™ç”Ÿæˆçš„Wordæ–‡æ¡£ä¼šå› ä¸ºæœ‰æ— æ³•è¯†åˆ«çš„ç¼–ç è€Œæ— æ³•æ‰“å¼€ Writer w = new OutputStreamWriter(new FileOutputStream(f), &quot;utf-8&quot;); t.process(dataMap, w); w.close(); &#125; catch (Exception ex) &#123; ex.printStackTrace(); throw new RuntimeException(ex); &#125; return f; &#125;&#125; 12345678// ä½¿ç”¨å·¥å…·ç±»Map map = new HashMap();map.put(&quot;aa&quot;,&quot;å¼ ä¸‰&quot;);map.put(&quot;bb&quot;,&quot;æå››&quot;);map.put(&quot;cc&quot;,&quot;ç‹äº”&quot;);map.put(&quot;dd&quot;,&quot;èµµå…­&quot;);map.put(&quot;ee&quot;,&quot;å­™ä¸ƒ&quot;);return WordUtil.exportMillCertificateWord(map,&quot;offer&quot;,&quot;test.html&quot;); å‚è€ƒæ–‡æ¡£ javaä½¿ç”¨freemarkeré€šè¿‡æ¨¡æ¿å¯¼å‡ºword(åŸºäºè‹¥ä¾)","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"FreeMarker","slug":"FreeMarker","permalink":"https://guoshunfa.com/tags/FreeMarker/"},{"name":"æ¨¡ç‰ˆå¼•æ“","slug":"æ¨¡ç‰ˆå¼•æ“","permalink":"https://guoshunfa.com/tags/%E6%A8%A1%E7%89%88%E5%BC%95%E6%93%8E/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆTestNGæœåŠ¡æµ‹è¯•æ¡†æ¶","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/31é›†æˆæµ‹è¯•æ¡†æ¶/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆTestNGæœåŠ¡æµ‹è¯•æ¡†æ¶","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆTestNGæœåŠ¡æµ‹è¯•æ¡†æ¶/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90TestNG%E6%9C%8D%E5%8A%A1%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/","excerpt":"","text":"1. maven12345678910111213&lt;dependency&gt; &lt;groupId&gt;org.testng&lt;/groupId&gt; &lt;artifactId&gt;testng&lt;/artifactId&gt; &lt;version&gt;6.8.7&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;3.8.1&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; 2. æ¦‚å¿µ TestNGæŒ‰ç…§å®˜æ–¹çš„å®šä¹‰ï¼š TestNGæ˜¯ä¸€ä¸ªæµ‹è¯•æ¡†æ¶ï¼Œå…¶çµæ„Ÿæ¥è‡ªJUnitå’ŒNUnitï¼Œä½†å¼•å…¥äº†ä¸€äº›æ–°çš„åŠŸèƒ½ï¼Œä½¿å…¶åŠŸèƒ½æ›´å¼ºå¤§ï¼Œä½¿ç”¨æ›´æ–¹ä¾¿ã€‚ TestNGæ˜¯ä¸€ä¸ªå¼€æºè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶;TestNGè¡¨ç¤ºä¸‹ä¸€ä»£(Next Generationçš„é¦–å­—æ¯)ã€‚ TestNGç±»ä¼¼äºJUnit(ç‰¹åˆ«æ˜¯JUnit 4)ï¼Œä½†å®ƒä¸æ˜¯JUnitæ¡†æ¶çš„æ‰©å±•ã€‚å®ƒçš„çµæ„Ÿæ¥æºäºJUnitã€‚å®ƒçš„ç›®çš„æ˜¯ä¼˜äºJUnitï¼Œå°¤å…¶æ˜¯åœ¨ç”¨äºæµ‹è¯•é›†æˆå¤šç±»æ—¶ã€‚ TestNGçš„åˆ›å§‹äººæ˜¯Cedric Beust(å¡å¾·é‡Œå…‹Â·åšä¼Šæ–¯ç‰¹)ã€‚ TestNGæ¶ˆé™¤äº†å¤§éƒ¨åˆ†çš„æ—§æ¡†æ¶çš„é™åˆ¶ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿç¼–å†™æ›´åŠ çµæ´»å’Œå¼ºå¤§çš„æµ‹è¯•ã€‚ å› ä¸ºå®ƒåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå€Ÿé‰´äº†Javaæ³¨è§£(JDK5.0å¼•å…¥çš„)æ¥å®šä¹‰æµ‹è¯•ï¼Œå®ƒä¹Ÿå¯ä»¥æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨è¿™ä¸ªæ–°åŠŸèƒ½åœ¨çœŸå®çš„Javaè¯­è¨€ç”Ÿäº§ç¯å¢ƒä¸­ã€‚ TestNGçš„ç‰¹ç‚¹ æ³¨è§£ TestNGä½¿ç”¨Javaå’Œé¢å‘å¯¹è±¡çš„åŠŸèƒ½ æ”¯æŒç»¼åˆç±»æµ‹è¯•(ä¾‹å¦‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ç”¨åˆ›å»ºä¸€ä¸ªæ–°çš„æµ‹è¯•æ¯ä¸ªæµ‹è¯•æ–¹æ³•çš„ç±»çš„å®ä¾‹) ç‹¬ç«‹çš„ç¼–è¯‘æ—¶æµ‹è¯•ä»£ç å’Œè¿è¡Œæ—¶é…ç½®&#x2F;æ•°æ®ä¿¡æ¯ çµæ´»çš„è¿è¡Œæ—¶é…ç½® ä¸»è¦ä»‹ç»â€œæµ‹è¯•ç»„â€ã€‚å½“ç¼–è¯‘æµ‹è¯•ï¼Œåªè¦è¦æ±‚TestNGè¿è¡Œæ‰€æœ‰çš„â€œå‰ç«¯â€çš„æµ‹è¯•ï¼Œæˆ–â€œå¿«â€ï¼Œâ€œæ…¢â€ï¼Œâ€œæ•°æ®åº“â€ç­‰ æ”¯æŒä¾èµ–æµ‹è¯•æ–¹æ³•ï¼Œå¹¶è¡Œæµ‹è¯•ï¼Œè´Ÿè½½æµ‹è¯•ï¼Œå±€éƒ¨æ•…éšœ çµæ´»çš„æ’ä»¶API æ”¯æŒå¤šçº¿ç¨‹æµ‹è¯• 3. TestNG åŸºæœ¬æ³¨è§£3.1. æ³¨è§£åˆ—è¡¨ä»¥ä¸‹æ˜¯TestNGæ”¯æŒçš„æ³¨é‡Šåˆ—è¡¨ï¼š æ³¨è§£ æè¿° @BeforeSuite åœ¨è¯¥å¥—ä»¶çš„æ‰€æœ‰æµ‹è¯•éƒ½è¿è¡Œåœ¨æ³¨é‡Šçš„æ–¹æ³•ä¹‹å‰ï¼Œä»…è¿è¡Œä¸€æ¬¡ã€‚ @AfterSuite åœ¨è¯¥å¥—ä»¶çš„æ‰€æœ‰æµ‹è¯•éƒ½è¿è¡Œåœ¨æ³¨é‡Šæ–¹æ³•ä¹‹åï¼Œä»…è¿è¡Œä¸€æ¬¡ã€‚ @BeforeClass åœ¨è°ƒç”¨å½“å‰ç±»çš„ç¬¬ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰è¿è¡Œï¼Œæ³¨é‡Šæ–¹æ³•ä»…è¿è¡Œä¸€æ¬¡ã€‚ @AfterClass åœ¨è°ƒç”¨å½“å‰ç±»çš„ç¬¬ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹åè¿è¡Œï¼Œæ³¨é‡Šæ–¹æ³•ä»…è¿è¡Œä¸€æ¬¡ @BeforeTest æ³¨é‡Šçš„æ–¹æ³•å°†åœ¨å±äº&lt;test&gt;æ ‡ç­¾å†…çš„ç±»çš„æ‰€æœ‰æµ‹è¯•æ–¹æ³•è¿è¡Œä¹‹å‰è¿è¡Œã€‚ @AfterTest æ³¨é‡Šçš„æ–¹æ³•å°†åœ¨å±äº&lt;test&gt;æ ‡ç­¾å†…çš„ç±»çš„æ‰€æœ‰æµ‹è¯•æ–¹æ³•è¿è¡Œä¹‹åè¿è¡Œã€‚ @BeforeGroups é…ç½®æ–¹æ³•å°†åœ¨ä¹‹å‰è¿è¡Œç»„åˆ—è¡¨ã€‚ æ­¤æ–¹æ³•ä¿è¯åœ¨è°ƒç”¨å±äºè¿™äº›ç»„ä¸­çš„ä»»ä½•ä¸€ä¸ªçš„ç¬¬ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰ä¸ä¹…è¿è¡Œã€‚ @AfterGroups æ­¤é…ç½®æ–¹æ³•å°†åœ¨ä¹‹åè¿è¡Œç»„åˆ—è¡¨ã€‚è¯¥æ–¹æ³•ä¿è¯åœ¨è°ƒç”¨å±äºä»»ä½•è¿™äº›ç»„çš„æœ€åä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹åä¸ä¹…è¿è¡Œã€‚ @BeforeMethod æ³¨é‡Šæ–¹æ³•å°†åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰è¿è¡Œã€‚ @AfterMethod æ³¨é‡Šæ–¹æ³•å°†åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹åè¿è¡Œã€‚ @DataProvider æ ‡è®°ä¸€ç§æ–¹æ³•æ¥æä¾›æµ‹è¯•æ–¹æ³•çš„æ•°æ®ã€‚ æ³¨é‡Šæ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªObject [] []ï¼Œå…¶ä¸­æ¯ä¸ªObject []å¯ä»¥è¢«åˆ†é…ç»™æµ‹è¯•æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ã€‚ è¦ä»è¯¥DataProvideræ¥æ”¶æ•°æ®çš„@Testæ–¹æ³•éœ€è¦ä½¿ç”¨ä¸æ­¤æ³¨é‡Šåç§°ç›¸ç­‰çš„dataProvideråç§°ã€‚ @Factory å°†ä¸€ä¸ªæ–¹æ³•æ ‡è®°ä¸ºå·¥å‚ï¼Œè¿”å›TestNGå°†è¢«ç”¨ä½œæµ‹è¯•ç±»çš„å¯¹è±¡ã€‚ è¯¥æ–¹æ³•å¿…é¡»è¿”å›Object []ã€‚ @Listeners å®šä¹‰æµ‹è¯•ç±»ä¸Šçš„ä¾¦å¬å™¨ã€‚ @Parameters æè¿°å¦‚ä½•å°†å‚æ•°ä¼ é€’ç»™@Testæ–¹æ³•ã€‚ @Test å°†ç±»æˆ–æ–¹æ³•æ ‡è®°ä¸ºæµ‹è¯•çš„ä¸€éƒ¨åˆ†ã€‚ 3.2. å¿½ç•¥æµ‹è¯• é»˜è®¤enabledä¸ºtrueã€‚é»˜è®¤æµ‹è¯•ç”¨ä¾‹æ˜¯å¼€å¯çŠ¶æ€ã€‚ 1@Test(enabled = false) 3.3. è¶…æ—¶å¤„ç† è¶…æ—¶å¤„ç†ï¼Œå¸¸ç”¨æ¥åšæ€§èƒ½æµ‹è¯•ï¼Œè¶…è¿‡æ—¶é—´ä¼šæŠ¥é”™ã€‚å•ä½ï¼šæ¯«ç§’ã€‚ 1@Test(timeOut = 5000) 3.4. ä½¿ç”¨æ³¨é‡Š&#x2F;æ³¨è§£çš„å¥½å¤„ä»¥ä¸‹æ˜¯ä½¿ç”¨æ³¨é‡Š&#x2F;æ³¨è§£çš„ä¸€äº›å¥½å¤„ï¼š TestNGé€šè¿‡æŸ¥æ‰¾æ³¨é‡Š&#x2F;æ³¨è§£æ¥è¯†åˆ«å®ƒæ„Ÿå…´è¶£çš„æ–¹æ³•ã€‚ å› æ­¤ï¼Œæ–¹æ³•åç§°ä¸é™äºä»»ä½•æ¨¡å¼æˆ–æ ¼å¼ã€‚ å¯ä»¥å°†å…¶ä»–å‚æ•°ä¼ é€’ç»™æ³¨é‡Šã€‚ æ³¨é‡Šæ˜¯å¼ºç±»å‹çš„ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¼šé©¬ä¸Šæ ‡è®°ä»»ä½•é”™è¯¯ã€‚ æµ‹è¯•ç±»ä¸å†éœ€è¦æ‰©å±•ä»»ä½•ä¸œè¥¿(å¦‚TestCaseï¼Œå¯¹äºJUnit3)ã€‚ 4. TestNG - DataProviderï¼ˆæ³¨è§£ï¼‰æ•°æ®æä¾›è€… æµ‹è¯•å‚æ•°åŒ–èƒ½è®©æµ‹è¯•å¤§é‡çš„æ•°æ®é›†å˜ä¸ºå¯èƒ½ï¼Œä¹Ÿå¤§å¤§æ–¹ä¾¿æ•°æ®çš„ä¿®æ”¹å’Œæµ‹è¯•è„šæœ¬çš„ç¼–å†™ï¼Œæµ‹è¯•å‚æ•°åŒ–è®©æ•°æ®å’Œè„šæœ¬åˆ†ç¦»å¼€æ¥ï¼Œæ–¹ä¾¿åç»­çš„ç»´æŠ¤ã€‚è¿™ä¸€ç¯‡å…ˆæ¥è¯´è¯´æ•°æ®æä¾›è€…DataProvider æ•°æ®æä¾›è€…@DataProvideræ³¨è§£@DataProvideråœ¨å‚æ•°åŒ–æµ‹è¯•ä¸­èµ·åˆ°é‡è¦çš„ä½œç”¨ï¼Œè¯¥æ³¨è§£ä¸‹çš„å‡½æ•°è¿”å›æ•°æ®ç±»å‹éœ€è¦æ—¶Object[][]ï¼Œçœ‹ä¾‹å­å¦‚ä½•å®ç°ï¼š 4.1. ä½¿ç”¨@DataProviderå‡½æ•°ï¼Œéœ€è¦å®šä¹‰å±æ€§name 123456789@DataProvider(name = &quot;testcase&quot;)public Object[][] dataProvider()&#123; return new Object[][]&#123; &#123;&quot;å°æ&quot;&#125;, &#123;&quot;å°èµµ&quot;&#125;, &#123;&quot;å°æ˜&quot;&#125;, &#123;&quot;å°å‘¨&quot;&#125; &#125;;&#125; 123456// @Testæµ‹è¯•ç”¨ä¾‹ï¼Œå±æ€§dataProvideréœ€è¦æŒ‡å®šå¯¹åº”çš„æ•°æ®æä¾›è€…åç§°@Test(dataProvider = &quot;testcase&quot;)public void testcase(String name)&#123; System.out.println(name);&#125; æ‰§è¡Œç»“æœ 1234567create test :com.testproj.Demo.TestDataProvider@38bc8ab5[TestNG] Running: E:\\OPPO\\JavaProject\\TestNGProj\\res\\testNG.xmlå°æå°èµµå°æ˜å°å‘¨ 4.2. å¤‡æ³¨4.2.1. æ³¨è§£ä½¿ç”¨ DataProvideræ³¨è§£nameå±æ€§å’ŒTestå¯¹åº”dataProviderå±æ€§å¯ä»¥è¿›è¡Œç»‘å®šã€‚ 4.2.2. è¿”å›ç»“æ„Object[][] Object[][]æ¯å±‚éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡æµ‹è¯•ç”¨ä¾‹ã€‚ä¸Šé¢çš„ä¾‹å­ï¼Œä¼šè°ƒç”¨å››æ¬¡å¯¹åº”çš„testcaseæµ‹è¯•ç”¨ä¾‹ã€‚ Object[][]ä¸€å±‚å¯ä»¥æ”¾å…¥å¤šä¸ªå±æ€§ï¼Œä¾‹ï¼š 12345678910111213@DataProvider(name = &quot;testcase&quot;)public Object[][] dataProvider()&#123; return new Object[][]&#123; &#123;&quot;å°æ&quot;, 19, &quot;ç”·&quot;, 187&#125;, &#123;&quot;å°ç‹&quot;, 19, &quot;å¥³&quot;, 167&#125;, &#123;&quot;å°ç»„&quot;, 19, &quot;ç”·&quot;, 174&#125;, &#123;&quot;å°å…­&quot;, 19, &quot;ç”·&quot;, 179&#125; &#125;;&#125;@Test(dataProvider = &quot;testcase&quot;)public void testcase(String name, long age, String sex, long height)&#123; System.out.println(&quot;å§“åï¼š&quot;+name+&quot;ï¼›å¹´é¾„ï¼š&quot;+age+&quot;ï¼›æ€§åˆ«ï¼š&quot;+sex+&quot;ï¼›èº«é«˜ï¼š&quot;+height);&#125; Object[][]æ¯å±‚çš„å‚æ•°æ•°é‡å’Œå‚æ•°ç±»å‹å¿…é¡»ç›¸åŒã€‚ 4.3. æä¾›æ•°æ®æ–¹å¼ ç¡¬ç¼–ç åœ¨Javaæºç ä¸Šã€‚ txtæ–‡æœ¬æ–‡ä»¶ã€‚ é…ç½®æ–‡ä»¶propertiesã€‚ excelæ–‡æ¡£ã€‚ æ•°æ®åº“ã€‚ ç½‘ç»œä¸­ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"TestNG","slug":"TestNG","permalink":"https://guoshunfa.com/tags/TestNG/"},{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"https://guoshunfa.com/tags/%E6%B5%8B%E8%AF%95/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® å¼•å…¥Hutoolå…¨èƒ½å·¥å…·åŒ…","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/60é›†æˆå·¥å…·ç®±/æ­å»ºå•ä½“SpringBooté¡¹ç›®-å¼•å…¥Hutoolå…¨èƒ½å·¥å…·åŒ…","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-å¼•å…¥Hutoolå…¨èƒ½å·¥å…·åŒ…/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E5%BC%95%E5%85%A5Hutool%E5%85%A8%E8%83%BD%E5%B7%A5%E5%85%B7%E5%8C%85/","excerpt":"","text":"Hutool å®˜æ–¹æ–‡æ¡£ 1. Maven12345&lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-all&lt;/artifactId&gt; &lt;version&gt;5.7.6&lt;/version&gt;&lt;/dependency&gt;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"Hutool","slug":"Hutool","permalink":"https://guoshunfa.com/tags/Hutool/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆFastJson jsonæ•°æ®å¤„ç†","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/60é›†æˆå·¥å…·ç®±/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆFastJson-jsonæ•°æ®å¤„ç†","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆFastJson-jsonæ•°æ®å¤„ç†/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90FastJson-json%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/","excerpt":"","text":"1. é›†æˆ Fastjsonç®€å•ä½¿ç”¨ é€šè¿‡mavenå¼•å…¥ç›¸åº”çš„jsonåŒ… 1234567&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.49&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 2. fastjson - è‡ªå®šä¹‰åºåˆ—åŒ– åºåˆ—åŒ–æ—¶éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†çš„ç±»å‹ï¼Œå¯ä»¥è¿›è¡Œç‰¹æ®Šé…ç½®ã€‚ 2.1. è‡ªå®šä¹‰ååºåˆ—åŒ–è§£æå™¨ - ObjectSerializer123456789101112131415161718192021222324package com.ivan.json.converter;import java.io.IOException;import java.lang.reflect.Type;import com.alibaba.fastjson.serializer.JSONSerializer;import com.alibaba.fastjson.serializer.ObjectSerializer;public class SexSerializer implements ObjectSerializer &#123; public void write(JSONSerializer serializer, Object object, Object fieldName, Type fieldType, int features) throws IOException &#123; /** * å¤„ç†è¿‡ç¨‹ */ // textä¸ºå¤„ç†ç»“æœ serializer.write(text); &#125;&#125; 2.2. ä½¿ç”¨è§£æå™¨æœ‰ä¸‰ç§æ–¹æ³•ï¼ŒæŒ‰æƒ…å†µå†³å®šä½¿ç”¨å“ªç§ã€‚ å®šä¹‰çš„å­—æ®µä¸ŠåŠ è§£æå™¨æ³¨è§£ 123456@Setter@Getterprivate static class ResultData &#123; @JSONField(serializeUsing = SexSerializer.class) private Sex sex;&#125; æ¡†æ¶ç»Ÿä¸€é…ç½®ï¼Œåºåˆ—åŒ–æ—¶ä¼šæ ¹æ®ç±»å‹è¿›è¡ŒåŒ¹é…ã€‚ åœ¨WebAppConfigurer#configureMessageConvertersä¸­åŠ å…¥ã€‚ 1SerializeConfig.getGlobalInstance().put(AlarmString.class,AlarmStringSerializer.instance); ç³»åˆ—åŒ–æ—¶ä½¿ç”¨ã€‚ 123SerializeConfig config = new SerializeConfig();config.put(AlarmString.class,AlarmStringSerializer.instance);String jsonStr = JSON.toJsonString(alarm, config); 2.3. åºåˆ—åŒ–ç›¸å…³çš„æ¦‚å¿µ SerializeConfigï¼šå†…éƒ¨æ˜¯ä¸ªmapå®¹å™¨ä¸»è¦åŠŸèƒ½æ˜¯é…ç½®å¹¶è®°å½•æ¯ç§Javaç±»å‹å¯¹åº”çš„åºåˆ—åŒ–ç±»ã€‚ SerializeWriter ç»§æ‰¿è‡ªJavaçš„Writerï¼Œå…¶å®å°±æ˜¯ä¸ªè½¬ä¸ºFastJSONè€Œç”Ÿçš„StringBuilderï¼Œå®Œæˆé«˜æ€§èƒ½çš„å­—ç¬¦ä¸²æ‹¼æ¥ã€‚ SerializeFilter: ç”¨äºå¯¹å¯¹è±¡çš„åºåˆ—åŒ–å®ç°å„ç§å®šåˆ¶åŒ–çš„éœ€æ±‚ã€‚ SerializerFeatureï¼šå¯¹äºå¯¹è¾“å‡ºçš„jsonåšå„ç§æ ¼å¼åŒ–çš„éœ€æ±‚ã€‚ JSONSerializerï¼šç›¸å½“äºä¸€ä¸ªåºåˆ—åŒ–ç»„åˆå™¨ï¼Œé›†æˆäº†SerializeConfigï¼Œ SerializeWriter ï¼Œ SerializeFilterä¸SerializerFeatureã€‚ åºåˆ—åŒ–çš„å…¥å£ä»£ç å¦‚ä¸‹ï¼Œä¸Šé¢æåˆ°çš„å„ç§æ¦‚å¿µéƒ½åŒ…å«äº† 1234567891011121314151617181920212223242526272829public static String toJSONString(Object object, // SerializeConfig config, // SerializeFilter[] filters, // String dateFormat, // int defaultFeatures, // SerializerFeature... features) &#123; SerializeWriter out = new SerializeWriter(null, defaultFeatures, features); try &#123; JSONSerializer serializer = new JSONSerializer(out, config); if (dateFormat != null &amp;&amp; dateFormat.length() != 0) &#123; serializer.setDateFormat(dateFormat); serializer.config(SerializerFeature.WriteDateUseDateFormat, true); &#125; if (filters != null) &#123; for (SerializeFilter filter : filters) &#123; serializer.addFilter(filter); &#125; &#125; serializer.write(object); return out.toString(); &#125; finally &#123; out.close(); &#125;&#125; 3. fastjson - è‡ªå®šä¹‰ååºåˆ—åŒ– ååºåˆ—åŒ–æ—¶éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†çš„ç±»å‹ï¼Œå¯ä»¥è¿›è¡Œç‰¹æ®Šé…ç½®ã€‚ 3.1. è‡ªå®šä¹‰ååºåˆ—åŒ–è§£æå™¨ - ObjectDeserializer12345678910111213141516171819public class PersonDeserializer implements ObjectDeserializer &#123; @Override public Person deserialze(DefaultJSONParser parser, Type type, Object fieldName) &#123; /* * å¤„ç†è¿‡ç¨‹ */ // å¤„ç†ä¹‹åçš„è¿”å›ç»“æœ return null; &#125; @Override public int getFastMatchToken() &#123; return 0; &#125;&#125; 3.2. ä½¿ç”¨è§£æå™¨æœ‰ä¸‰ç§æ–¹æ³•ï¼ŒæŒ‰æƒ…å†µå†³å®šä½¿ç”¨å“ªç§ã€‚ å®šä¹‰çš„å­—æ®µä¸ŠåŠ è§£æå™¨æ³¨è§£ 123456@Setter@Getterprivate static class ResultData &#123; @JSONField(deserializeUsing = PersonDeserializer.class) private Person personInfo;&#125; æ¡†æ¶ç»Ÿä¸€é…ç½®ï¼Œååºåˆ—åŒ–æ—¶ä¼šæ ¹æ®ç±»å‹è¿›è¡ŒåŒ¹é…ã€‚ åœ¨WebAppConfigurer#configureMessageConvertersä¸­åŠ å…¥ã€‚ 1ParserConfig.getGlobalInstance().putDeserializer(AlarmString.class,AlarmStringDeserializer.instance); åç³»åˆ—åŒ–æ—¶ä½¿ç”¨ã€‚ 123ParserConfig parserConfig = new ParserConfig();parserConfig.putDeserializer(AlarmString.class, AlarmStringDeserializer.instance);Alarm alarm = JSON.parseObject(jsonStr, Alarm.class, parserConfig); 3.2.1. ååºåˆ—åŒ–ç›¸å…³çš„æ¦‚å¿µ ParserConfigï¼šå†…éƒ¨é€šè¿‡ä¸€ä¸ªmapä¿å­˜å„ç§ObjectDeserializerã€‚ JSONLexer : ä¸SerializeWriterç›¸å¯¹åº”ï¼Œç”¨äºè§£æjsonå­—ç¬¦ä¸²ã€‚ JSONTokenï¼šå®šä¹‰äº†ä¸€ç³»ç»Ÿçš„ç‰¹æ®Šå­—ç¬¦ï¼Œè¿™äº›ç§°ä¸ºtokenã€‚ ParseProcess ï¼šå®šåˆ¶ååºåˆ—åŒ–ï¼Œç±»ä¼¼äºSerializeFilterã€‚ Featureï¼šç”¨äºå®šåˆ¶å„ç§ååºåˆ—åŒ–çš„ç‰¹æ€§ã€‚ DefaultJSONParserï¼šç›¸å½“äºååºåˆ—åŒ–ç»„åˆå™¨ï¼Œé›†æˆäº†ParserConfigï¼ŒFeatureï¼Œ JSONLexer ä¸ParseProcessã€‚ ååºåˆ—åŒ–çš„å…¥å£ä»£ç å¦‚ä¸‹ï¼Œä¸Šé¢çš„æ¦‚å¿µåŸºæœ¬éƒ½åŒ…å«äº†ï¼š 12345678910111213141516171819202122232425262728293031323334353637@SuppressWarnings(&quot;unchecked&quot;)public static &lt;T&gt; T parseObject(String input, Type clazz, ParserConfig config, ParseProcess processor, int featureValues, Feature... features) &#123; if (input == null) &#123; return null; &#125; if (features != null) &#123; for (Feature feature : features) &#123; featureValues |= feature.mask; &#125; &#125; DefaultJSONParser parser = new DefaultJSONParser(input, config, featureValues); if (processor != null) &#123; if (processor instanceof ExtraTypeProvider) &#123; parser.getExtraTypeProviders().add((ExtraTypeProvider) processor); &#125; if (processor instanceof ExtraProcessor) &#123; parser.getExtraProcessors().add((ExtraProcessor) processor); &#125; if (processor instanceof FieldTypeResolver) &#123; parser.setFieldTypeResolver((FieldTypeResolver) processor); &#125; &#125; T value = (T) parser.parseObject(clazz, null); parser.handleResovleTask(value); parser.close(); return (T) value;&#125; 4. JSONFieldä¸JSONTypeæ³¨è§£çš„ä½¿ç”¨4.1. @JSONFieldâ€‹ fastjsonæä¾›äº†JSONFieldå¯¹åºåˆ—åŒ–ä¸ååºåˆ—åŒ–è¿›è¡Œå®šåˆ¶ï¼Œæ¯”å¦‚å¯ä»¥æŒ‡å®šå­—æ®µçš„åç§°ï¼Œåºåˆ—åŒ–çš„é¡ºåºã€‚JSONFieldç”¨äºå±æ€§ï¼Œæ–¹æ³•æ–¹æ³•å‚æ•°ä¸Šã€‚JSONFieldçš„æºç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940package com.alibaba.fastjson.annotation;import java.lang.annotation.ElementType;import java.lang.annotation.Retention;import java.lang.annotation.RetentionPolicy;import java.lang.annotation.Target;import com.alibaba.fastjson.parser.Feature;import com.alibaba.fastjson.serializer.SerializerFeature;@Retention(RetentionPolicy.RUNTIME)@Target(&#123; ElementType.METHOD, ElementType.FIELD, ElementType.PARAMETER &#125;)public @interface JSONField &#123;// é…ç½®åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„é¡ºåº int ordinal() default 0;// æŒ‡å®šå­—æ®µçš„åç§° String name() default &quot;&quot;;// æŒ‡å®šå­—æ®µçš„æ ¼å¼ï¼Œå¯¹æ—¥æœŸæ ¼å¼æœ‰ç”¨ String format() default &quot;&quot;; // æ˜¯å¦åºåˆ—åŒ– boolean serialize() default true;// æ˜¯å¦ååºåˆ—åŒ– boolean deserialize() default true;//å­—æ®µçº§åˆ«çš„SerializerFeature SerializerFeature[] serialzeFeatures() default &#123;&#125;;// Feature[] parseFeatures() default &#123;&#125;; //ç»™å±æ€§æ‰“ä¸Šæ ‡ç­¾ï¼Œ ç›¸å½“äºç»™å±æ€§è¿›è¡Œäº†åˆ†ç»„ String label() default &quot;&quot;; boolean jsonDirect() default false; //åˆ¶å®šå±æ€§çš„åºåˆ—åŒ–ç±» Class&lt;?&gt; serializeUsing() default Void.class; //åˆ¶å®šå±æ€§çš„ååºåˆ—åŒ–ç±» Class&lt;?&gt; deserializeUsing() default Void.class; String[] alternateNames() default &#123;&#125;; boolean unwrapped() default false;&#125; 4.2. @JSONTypeâ€‹ fastjosnæä¾›äº†JSONTypeç”¨äºç±»çº§åˆ«çš„å®šåˆ¶åŒ–, JSONTypeçš„æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package com.alibaba.fastjson.annotation;import java.lang.annotation.ElementType;import java.lang.annotation.Retention;import java.lang.annotation.RetentionPolicy;import java.lang.annotation.Target;import com.alibaba.fastjson.PropertyNamingStrategy;import com.alibaba.fastjson.parser.Feature;import com.alibaba.fastjson.serializer.SerializeFilter;import com.alibaba.fastjson.serializer.SerializerFeature;@Retention(RetentionPolicy.RUNTIME)//éœ€è¦æ ‡æ³¨åœ¨ç±»ä¸Š@Target(&#123; ElementType.TYPE &#125;)public @interface JSONType &#123; boolean asm() default true;//è¿™é‡Œå¯ä»¥å®šä¹‰è¾“å‡ºjsonçš„å­—æ®µé¡ºåº String[] orders() default &#123;&#125;;//åŒ…å«çš„å­—æ®µ String[] includes() default &#123;&#125;;//ä¸åŒ…å«çš„å­—æ®µ String[] ignores() default &#123;&#125;;//ç±»çº§åˆ«çš„åºåˆ—åŒ–ç‰¹æ€§å®šä¹‰ SerializerFeature[] serialzeFeatures() default &#123;&#125;; Feature[] parseFeatures() default &#123;&#125;; //æŒ‰å­—æ¯é¡ºåºè¿›è¡Œè¾“å‡º boolean alphabetic() default true; Class&lt;?&gt; mappingTo() default Void.class; Class&lt;?&gt; builder() default Void.class; String typeName() default &quot;&quot;; String typeKey() default &quot;&quot;; Class&lt;?&gt;[] seeAlso() default&#123;&#125;; //åºåˆ—åŒ–ç±» Class&lt;?&gt; serializer() default Void.class; //ååºåˆ—åŒ–ç±» Class&lt;?&gt; deserializer() default Void.class; boolean serializeEnumAsJavaBean() default false; PropertyNamingStrategy naming() default PropertyNamingStrategy.CamelCase; Class&lt;? extends SerializeFilter&gt;[] serialzeFilters() default &#123;&#125;;&#125; 5. SerializeFilterâ€‹ fastjsoné€šè¿‡SerializeFilterç¼–ç¨‹æ‰©å±•çš„æ–¹å¼å®šåˆ¶åºåˆ—åŒ–fastjsonæ”¯æŒä»¥ä¸‹SerializeFilterç”¨äºä¸åŒå¸¸æ™¯çš„å®šåˆ¶åºåˆ—åŒ–ï¼š PropertyFilter æ ¹æ®PropertyNameå’ŒPropertyValueæ¥åˆ¤æ–­æ˜¯å¦åºåˆ—åŒ–,æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š 12345678910111213141516package com.alibaba.fastjson.serializer;/** * @author wenshao[szujobs@hotmail.com] */public interface PropertyFilter extends SerializeFilter &#123; /** * @param object the owner of the property * @param name the name of the property * @param value the value of the property * @return true if the property will be included, false if to be filtered out * æ ¹æ® å±æ€§çš„nameä¸valueåˆ¤æ–­æ˜¯å¦è¿›è¡Œåºåˆ—åŒ– */ boolean apply(Object object, String name, Object value);&#125; PropertyPreFilteræ ¹æ®PropertyNameåˆ¤æ–­æ˜¯å¦åºåˆ—åŒ– 1234567package com.alibaba.fastjson.serializer;public interface PropertyPreFilter extends SerializeFilter &#123;//æ ¹æ® objectä¸nameåˆ¤æ–­æ˜¯å¦è¿›è¡Œåºåˆ—åŒ– boolean apply(JSONSerializer serializer, Object object, String name);&#125; NameFilter åºåˆ—åŒ–æ—¶ä¿®æ”¹Key 123456package com.alibaba.fastjson.serializer;public interface NameFilter extends SerializeFilter &#123;//æ ¹æ® nameä¸valueçš„å€¼ï¼Œè¿”å›jsonå­—æ®µkeyçš„å€¼ String process(Object object, String name, Object value);&#125; ValueFilter åºåˆ—åŒ–æ—¶ä¿®æ”¹Value 123456package com.alibaba.fastjson.serializer;public interface ValueFilter extends SerializeFilter &#123; //æ ¹æ®nameä¸valueå®šåˆ¶è¾“å‡ºjsonçš„value Object process(Object object, String name, Object value);&#125; BeforeFilter åœ¨åºåˆ—åŒ–å¯¹è±¡çš„æ‰€æœ‰å±æ€§ä¹‹å‰æ‰§è¡ŒæŸäº›æ“ä½œ 12345678910111213141516171819202122232425262728package com.alibaba.fastjson.serializer;public abstract class BeforeFilter implements SerializeFilter &#123; private static final ThreadLocal&lt;JSONSerializer&gt; serializerLocal = new ThreadLocal&lt;JSONSerializer&gt;(); private static final ThreadLocal&lt;Character&gt; seperatorLocal = new ThreadLocal&lt;Character&gt;(); private final static Character COMMA = Character.valueOf(&#x27;,&#x27;); final char writeBefore(JSONSerializer serializer, Object object, char seperator) &#123; serializerLocal.set(serializer); seperatorLocal.set(seperator); writeBefore(object); serializerLocal.set(null); return seperatorLocal.get(); &#125; protected final void writeKeyValue(String key, Object value) &#123; JSONSerializer serializer = serializerLocal.get(); char seperator = seperatorLocal.get(); serializer.writeKeyValue(seperator, key, value); if (seperator != &#x27;,&#x27;) &#123; seperatorLocal.set(COMMA); &#125; &#125;//éœ€è¦å®ç°çš„æ–¹æ³•ï¼Œåœ¨å®é™…å®ç°ä¸­å¯ä»¥è°ƒç”¨writeKeyValueå¢åŠ jsonçš„å†…å®¹ public abstract void writeBefore(Object object);&#125; AfterFilter åœ¨åºåˆ—åŒ–å¯¹è±¡çš„æ‰€æœ‰å±æ€§ä¹‹åæ‰§è¡ŒæŸäº›æ“ä½œ 12345678910111213141516171819202122232425262728293031package com.alibaba.fastjson.serializer;/** * @since 1.1.35 */public abstract class AfterFilter implements SerializeFilter &#123; private static final ThreadLocal&lt;JSONSerializer&gt; serializerLocal = new ThreadLocal&lt;JSONSerializer&gt;(); private static final ThreadLocal&lt;Character&gt; seperatorLocal = new ThreadLocal&lt;Character&gt;(); private final static Character COMMA = Character.valueOf(&#x27;,&#x27;); final char writeAfter(JSONSerializer serializer, Object object, char seperator) &#123; serializerLocal.set(serializer); seperatorLocal.set(seperator); writeAfter(object); serializerLocal.set(null); return seperatorLocal.get(); &#125; protected final void writeKeyValue(String key, Object value) &#123; JSONSerializer serializer = serializerLocal.get(); char seperator = seperatorLocal.get(); serializer.writeKeyValue(seperator, key, value); if (seperator != &#x27;,&#x27;) &#123; seperatorLocal.set(COMMA); &#125; &#125;//å­ç±»éœ€è¦å®ç°çš„æ–¹æ³•ï¼Œå®é™…ä½¿ç”¨çš„æ—¶å€™å¯ä»¥è°ƒç”¨writeKeyValueå¢åŠ å†…å®¹ public abstract void writeAfter(Object object);&#125; LabelFilteræ ¹æ® JsonFieldé…ç½®çš„labelæ¥åˆ¤æ–­æ˜¯å¦è¿›è¡Œè¾“å‡º 123456package com.alibaba.fastjson.serializer;//æ ¹æ® JsonFieldé…ç½®çš„labelæ¥åˆ¤æ–­æ˜¯å¦è¿›è¡Œè¾“å‡ºpublic interface LabelFilter extends SerializeFilter &#123; boolean apply(String label);&#125; 6. Fastjson - SerializerFeatureç‰¹æ€§çš„ä½¿ç”¨fastjsoné€šè¿‡SerializerFeatureå¯¹ç”Ÿæˆçš„jsonæ ¼å¼çš„æ•°æ®è¿›è¡Œä¸€äº›å®šåˆ¶ï¼Œæ¯”å¦‚å¯ä»¥è¾“å…¥çš„æ ¼å¼æ›´å¥½çœ‹ï¼Œä½¿ç”¨å•å¼•å·è€ŒéåŒå¼•å·ç­‰ã€‚ä¾‹å­ç¨‹åºå¦‚ä¸‹ï¼š 1234567891011121314151617181920package com.ivan.json;import java.util.Date;import com.alibaba.fastjson.JSON;import com.alibaba.fastjson.serializer.SerializerFeature;import com.ivan.json.entity.User;public class SerializerFeatureTest &#123; public static void main(String[] args) &#123; User user = new User(); user.setId(11L); user.setCreateTime(new Date()); String jsonString = JSON.toJSONString(user, SerializerFeature.PrettyFormat, SerializerFeature.WriteNullStringAsEmpty, SerializerFeature.UseSingleQuotes); System.out.println(jsonString); &#125;&#125; â€‹ è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š 12345&#123; &#x27;createTime&#x27;:&#x27;2021-06-23 15:17:48&#x27;, &#x27;id&#x27;: 123 &#x27;name&#x27;: &#x27;&#x27;&#125; SerializerFeatureå¸¸ç”¨å±æ€§ åç§° å«ä¹‰ QuoteFieldNames è¾“å‡ºkeyæ—¶æ˜¯å¦ä½¿ç”¨åŒå¼•å·,é»˜è®¤ä¸ºtrue UseSingleQuotes ä½¿ç”¨å•å¼•å·è€Œä¸æ˜¯åŒå¼•å·,é»˜è®¤ä¸ºfalse WriteMapNullValue æ˜¯å¦è¾“å‡ºå€¼ä¸ºnullçš„å­—æ®µ,é»˜è®¤ä¸ºfalse WriteEnumUsingToString Enumè¾“å‡ºname()æˆ–è€…original,é»˜è®¤ä¸ºfalse UseISO8601DateFormat Dateä½¿ç”¨ISO8601æ ¼å¼è¾“å‡ºï¼Œé»˜è®¤ä¸ºfalse WriteNullListAsEmpty Listå­—æ®µå¦‚æœä¸ºnull,è¾“å‡ºä¸º[],è€Œénull WriteNullStringAsEmpty å­—ç¬¦ç±»å‹å­—æ®µå¦‚æœä¸ºnull,è¾“å‡ºä¸ºâ€â€œ,è€Œénull WriteNullNumberAsZero æ•°å€¼å­—æ®µå¦‚æœä¸ºnull,è¾“å‡ºä¸º0,è€Œénull WriteNullBooleanAsFalse Booleanå­—æ®µå¦‚æœä¸ºnull,è¾“å‡ºä¸ºfalse,è€Œénull SkipTransientField å¦‚æœæ˜¯trueï¼Œç±»ä¸­çš„Getæ–¹æ³•å¯¹åº”çš„Fieldæ˜¯transientï¼Œåºåˆ—åŒ–æ—¶å°†ä¼šè¢«å¿½ç•¥ã€‚é»˜è®¤ä¸ºtrue SortField æŒ‰å­—æ®µåç§°æ’åºåè¾“å‡ºã€‚é»˜è®¤ä¸ºfalse WriteTabAsSpecial æŠŠ\\tåšè½¬ä¹‰è¾“å‡ºï¼Œé»˜è®¤ä¸ºfalseä¸æ¨èè®¾ä¸ºtrue PrettyFormat ç»“æœæ˜¯å¦æ ¼å¼åŒ–,é»˜è®¤ä¸ºfalse WriteClassName åºåˆ—åŒ–æ—¶å†™å…¥ç±»å‹ä¿¡æ¯ï¼Œé»˜è®¤ä¸ºfalseã€‚ååºåˆ—åŒ–æ˜¯éœ€ç”¨åˆ° DisableCircularReferenceDetect æ¶ˆé™¤å¯¹åŒä¸€å¯¹è±¡å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œé»˜è®¤ä¸ºfalse WriteSlashAsSpecial å¯¹æ–œæ â€™&#x2F;â€™è¿›è¡Œè½¬ä¹‰ BrowserCompatible å°†ä¸­æ–‡éƒ½ä¼šåºåˆ—åŒ–ä¸º\\uXXXXæ ¼å¼ï¼Œå­—èŠ‚æ•°ä¼šå¤šä¸€äº›ï¼Œä½†æ˜¯èƒ½å…¼å®¹IE 6ï¼Œé»˜è®¤ä¸ºfalse WriteDateUseDateFormat å…¨å±€ä¿®æ”¹æ—¥æœŸæ ¼å¼,é»˜è®¤ä¸ºfalseã€‚ DisableCheckSpecialChar ä¸€ä¸ªå¯¹è±¡çš„å­—ç¬¦ä¸²å±æ€§ä¸­å¦‚æœæœ‰ç‰¹æ®Šå­—ç¬¦å¦‚åŒå¼•å·ï¼Œå°†ä¼šåœ¨è½¬æˆjsonæ—¶å¸¦æœ‰åæ–œæ è½¬ç§»ç¬¦ã€‚å¦‚æœä¸éœ€è¦è½¬ä¹‰ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå±æ€§ã€‚é»˜è®¤ä¸ºfalse BeanToArray å°†å¯¹è±¡è½¬ä¸ºarrayè¾“å‡º","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"FastJson","slug":"FastJson","permalink":"https://guoshunfa.com/tags/FastJson/"},{"name":"Json","slug":"Json","permalink":"https://guoshunfa.com/tags/Json/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆProfileé¡¹ç›®ç¯å¢ƒç®¡ç†","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/70é¡¹ç›®ç¯å¢ƒç®¡ç†é…ç½®/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆProfileé¡¹ç›®ç¯å¢ƒç®¡ç†","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆProfileé¡¹ç›®ç¯å¢ƒç®¡ç†/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90Profile%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/","excerpt":"","text":"é¡¹ç›®å¤šç¯å¢ƒç®¡ç† 1. Spring ProfileSpring Profile æ˜¯ Spring æä¾›çš„å¤šç¯å¢ƒç®¡ç†æ–¹æ¡ˆã€‚ å¦‚å›¾ï¼Œæ¯ç§ç¯å¢ƒéƒ½å¯¹åº”ä¸€ä¸ª properties æ–‡ä»¶ï¼Œç„¶ååœ¨application.propertiesä¸­é…ç½®ä¸€ä¸‹è¦ä½¿ç”¨çš„ç¯å¢ƒ 1spring.profiles.active=dev ä¸Šé¢é…ç½®åŒ¹é…çš„æ˜¯ application-dev.properties,å¦‚æœå†™çš„æ˜¯testï¼Œåˆ™åŒ¹é… application-test.propertiesã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒSpring Profile å¯¹é…ç½®æ–‡ä»¶çš„å‘½åæœ‰è¦æ±‚ï¼Œå¿…é¡»æ˜¯ application- å¼€å¤´ é™¤äº†é…ç½®ç¯å¢ƒå¤–ï¼Œä¸€äº›ä¸éšç¯å¢ƒè€Œå˜åŒ–çš„é…ç½®ä¹Ÿåº”è¯¥æ”¾åˆ° application.propertiesä¸­ï¼Œapplication-.propertiesæœ€å¥½åªå­˜æ”¾ä¸ç¯å¢ƒç›¸å…³çš„é…ç½®é¡¹ä»¥ä¸Šå°±æ˜¯ Spring Profile ç»™å‡ºçš„å¤šç¯å¢ƒç®¡ç†æ–¹æ¡ˆã€‚ é€šè¿‡æ”¹å˜ spring.profiles.activeçš„å€¼æ¥åˆ‡æ¢ä¸åŒçš„ç¯å¢ƒã€‚ è¿™ç§æ–¹æ³•ç®€å•æ˜“æ‡‚ï¼Œä½†æœ‰ä¸¤ä¸ªé—®é¢˜ã€‚ æ¯æ¬¡åˆ‡æ¢ç¯å¢ƒè¦æ‰‹åŠ¨ä¿®æ”¹ spring.profiles.active çš„å€¼ æ‰“åŒ…çš„æ—¶å€™ï¼Œè¦æ‰‹åŠ¨åˆ é™¤å…¶å®ƒç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œä¸ç„¶å…¶å®ƒç¯å¢ƒçš„æ•æ„Ÿä¿¡æ¯å°±éƒ½æ‰“åŒ…è¿›å»äº† 2. maven profilemaven çš„ profile å¯ä»¥è®©æˆ‘ä»¬å®šä¹‰å¤šå¥—é…ç½®ä¿¡æ¯ï¼Œå¹¶æŒ‡å®šå…¶æ¿€æ´»æ¡ä»¶ï¼Œç„¶ååœ¨ä¸åŒçš„ç¯å¢ƒä¸‹ä½¿ç”¨ä¸åŒçš„profileé…ç½®ã€‚ 2.1. profile çš„å®šä¹‰ä½ç½®åœ¨mavenä¸­æœ‰ä¸¤ä¸ªåœ°æ–¹å¯ä»¥é…ç½® profile pom.xmlä¸­ï¼šè¿™é‡Œé¢å®šä¹‰çš„ profile ä½œç”¨èŒƒå›´æ˜¯å½“å‰é¡¹ç›®{user}&#x2F;.m2&#x2F;settings.xmlä¸­ï¼šè¿™é‡Œé¢å®šä¹‰çš„ profile ä½œç”¨èŒƒå›´æ˜¯æ‰€æœ‰ä½¿ç”¨äº†è¯¥é…ç½®æ–‡ä»¶çš„é¡¹ç›® 2.2. settings.xmlä¸­çš„ profileä¸åŒçš„åœ°æ–¹ profile ä¸­èƒ½å®šä¹‰çš„ä¿¡æ¯ä¹Ÿä¸ç›¸åŒ ç”±äºsettings.xmlä½œç”¨èŒƒå›´å®½æ³›ï¼Œ profile ä¸­åªèƒ½å®šä¹‰ä¸€äº›å…¬å…±ä¿¡æ¯ï¼Œå¦‚ä¸‹ 1234567891011121314&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;... &lt;profiles&gt; &lt;profile&gt; &lt;id&gt;...&lt;/id&gt; &lt;activation&gt;...&lt;/activation&gt; &lt;repositories&gt;...&lt;/repositories&gt; &lt;/profile&gt; &lt;/profiles&gt;...&lt;/settings&gt; idï¼šè¯¥ profile çš„å”¯ä¸€æ ‡è¯†activationï¼šåœ¨å“ªäº›æƒ…å†µä¸‹æ¿€æ´» profile,è¿™é‡Œé¢æœ‰å¤šç§ç­–ç•¥å¯ä¾›é€‰æ‹©,åªè¦æ»¡è¶³å…¶ä¸­ä¸€ä¸ªæ¡ä»¶å°±æ¿€æ´»repositoriesï¼šè¿œç¨‹ä»“åº“ ç”±äºèƒ½é…ç½®çš„ä¸œè¥¿æœ‰é™ï¼Œä¸€èˆ¬éƒ½ä¼šå°† maven profile é…ç½®åœ¨pom.xml 2.3. pom.xmlä¸­ çš„profile1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-parent&lt;/artifactId&gt; &lt;version&gt;2.0.6.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;/parent&gt; &lt;groupId&gt;com.panda&lt;/groupId&gt; &lt;artifactId&gt;test-mongodb&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;name&gt;test-mongodb&lt;/name&gt; &lt;description&gt;test-mongodb&lt;/description&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;/properties&gt; &lt;build&gt; &lt;filters&gt; &lt;!-- æŒ‡å®šä½¿ç”¨çš„ filter,ä¼šåœ¨æ¯ä¸ªmoduleä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥æ–‡ä»¶ç›®å½•éœ€è¦æŒ‡å‘åˆ°é¡¶å±‚ï¼Œå¦åˆ™ä¼šåœ¨æ¯ä¸ªmoduleä¸­æŸ¥æ‰¾æ–‡ä»¶ --&gt; &lt;!-- æ–‡ä»¶æŒ‰é¡ºåºåŠ è½½ï¼Œåé¢çš„ç›¸åŒkeyè¦†ç›–å‰é¢çš„ï¼Œbaseç”¨äºé»˜è®¤é…ç½® --&gt; &lt;filter&gt;profile/base.pro&lt;/filter&gt; &lt;filter&gt;profile/$&#123;env&#125;.pro&lt;/filter&gt; &lt;/filters&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt; &lt;defaultGoal&gt;clean compile package deploy&lt;/defaultGoal&gt; &lt;/build&gt; &lt;profiles&gt; &lt;!-- å¼€å‘ç¯å¢ƒ --&gt; &lt;profile&gt; &lt;id&gt;dev&lt;/id&gt; &lt;activation&gt; &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;/activation&gt; &lt;properties&gt; &lt;env&gt;dev&lt;/env&gt; &lt;/properties&gt; &lt;/profile&gt; &lt;!-- æµ‹è¯•ç¯å¢ƒ --&gt; &lt;profile&gt; &lt;id&gt;test&lt;/id&gt; &lt;properties&gt; &lt;env&gt;test&lt;/env&gt; &lt;/properties&gt; &lt;/profile&gt; &lt;/profiles&gt;&lt;/project&gt; 2.4. æŒ‰ç¯å¢ƒæ‰“åŒ…12# -P ç¯å¢ƒmvn clean package -P test","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"Profile","slug":"Profile","permalink":"https://guoshunfa.com/tags/Profile/"}]},{"title":"æ­å»ºå•ä½“SpringBooté¡¹ç›® é›†æˆJsoupçˆ¬è™«","slug":"è½¯ä»¶å¼€å‘/åœºæ™¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®/99å…¶ä»–/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆJsoupçˆ¬è™«","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/æ­å»ºå•ä½“SpringBooté¡¹ç›®-é›†æˆJsoupçˆ¬è™«/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90Jsoup%E7%88%AC%E8%99%AB/","excerpt":"","text":"1. maven12345&lt;dependency&gt; &lt;groupId&gt;org.jsoup&lt;/groupId&gt; &lt;artifactId&gt;jsoup&lt;/artifactId&gt; &lt;version&gt;1.13.1&lt;/version&gt;&lt;/dependency&gt; 2. demo12345678910111213141516public static void main(String[] args) throws IOException &#123; String url = &quot;https://www.baidu.com/s?wd=a&amp;rsv_spt=1&amp;rsv_iqid=0xf26984b00030eeb8&amp;issp=1&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=2&amp;ie=utf-8&amp;tn=baiduhome_pg&amp;rsv_enter=1&amp;rsv_dl=tb&amp;rsv_sug3=1&amp;rsv_sug1=1&amp;rsv_sug7=100&amp;rsv_sug2=0&amp;rsv_btype=i&amp;inputT=995&amp;rsv_sug4=995&quot;; Document document = Jsoup.parse(new URL(url), 100000); Element elementByClass = document.getElementsByClass(&quot;c-table opr-toplist1-table&quot;).get(0); Elements trElements = elementByClass.getElementsByTag(&quot;tr&quot;); for (Element trElement : trElements) &#123; Elements tdElements = trElement.getElementsByTag(&quot;td&quot;); String index = tdElements.get(0).getElementsByTag(&quot;span&quot;).get(0).text(); String note = tdElements.get(0).getElementsByTag(&quot;a&quot;).get(0).text(); String num = tdElements.get(1).text(); System.out.println(index + &quot;---&quot; + note + &quot;---&quot; + num); &#125; System.out.println();&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"Jsoup","slug":"Jsoup","permalink":"https://guoshunfa.com/tags/Jsoup/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://guoshunfa.com/tags/%E7%88%AC%E8%99%AB/"}]},{"title":"Arthas ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/arthas/Arthas-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Arthas-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Arthas-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"Arthas ä»‹ç»Arthas æ˜¯ä¸€æ¬¾çº¿ä¸Šç›‘æ§è¯Šæ–­äº§å“ï¼Œé€šè¿‡å…¨å±€è§†è§’å®æ—¶æŸ¥çœ‹åº”ç”¨ loadã€å†…å­˜ã€gcã€çº¿ç¨‹çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶èƒ½åœ¨ä¸ä¿®æ”¹åº”ç”¨ä»£ç çš„æƒ…å†µä¸‹ï¼Œå¯¹ä¸šåŠ¡é—®é¢˜è¿›è¡Œè¯Šæ–­ï¼ŒåŒ…æ‹¬æŸ¥çœ‹æ–¹æ³•è°ƒç”¨çš„å‡ºå…¥å‚ã€å¼‚å¸¸ï¼Œç›‘æµ‹æ–¹æ³•æ‰§è¡Œè€—æ—¶ï¼Œç±»åŠ è½½ä¿¡æ¯ç­‰ï¼Œå¤§å¤§æå‡çº¿ä¸Šé—®é¢˜æ’æŸ¥æ•ˆç‡ã€‚","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Arthas","slug":"Arthas","permalink":"https://guoshunfa.com/tags/Arthas/"}]},{"title":"Git å‘½ä»¤è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/git/Git-å‘½ä»¤è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Git-å‘½ä»¤è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Git-%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/","excerpt":"","text":"git clone http://userName:password@é“¾æ¥ 1. Gitæ›´æ¢è¿œç¨‹ä»“åº“åœ°å€123456#æŸ¥çœ‹è¿œç«¯åœ°å€git remote -v#æŸ¥çœ‹è¿œç«¯ä»“åº“ågit remote git remote set-url origin https://gitee.com/xx/xx.git (æ–°åœ°å€) 2. Gitæäº¤&#x2F;æ‹‰å–ä»£ç 2.1. æ‹‰å–ä»£ç 1234# æ‹‰å–å½“å‰åˆ†æ”¯çš„ä»£ç git pull# æ‹‰å–devåˆ†æ”¯çš„ä»£ç ï¼ˆoriginåè¡”æ¥æŒ‡å®šåˆ†æ”¯ï¼‰git pull origin dev 2.2. æŸ¥çœ‹ä»£ç è°ƒæ•´æƒ…å†µ1git status å…·ä½“çŠ¶æ€å¦‚ä¸‹ï¼š Untracked: æœªè·Ÿè¸ª,ä¸€èˆ¬ä¸ºæ–°å¢æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶åœ¨æ–‡ä»¶å¤¹ä¸­, ä½†å¹¶æ²¡æœ‰åŠ å…¥åˆ°gitåº“, ä¸å‚ä¸ç‰ˆæœ¬æ§åˆ¶. é€šè¿‡git add çŠ¶æ€å˜ä¸ºStaged. Modified: æ–‡ä»¶å·²ä¿®æ”¹, ä»…ä»…æ˜¯ä¿®æ”¹, å¹¶æ²¡æœ‰è¿›è¡Œå…¶ä»–çš„æ“ä½œ. deletedï¼š æ–‡ä»¶å·²åˆ é™¤ï¼Œæœ¬åœ°åˆ é™¤ï¼ŒæœåŠ¡å™¨ä¸Šè¿˜æ²¡æœ‰åˆ é™¤. renamedï¼š 2.3. å°†çŠ¶æ€æ”¹å˜çš„ä»£ç æäº¤è‡³ç¼“å­˜12345678# å°†æ‰€æœ‰çš„ä¿®æ”¹çš„æ–‡ä»¶æäº¤åˆ°ç¼“å­˜åŒºgit add .# å°†æŒ‡å®šä¿®æ”¹çš„æ–‡ä»¶æäº¤åˆ°ç¼“å­˜åŒºgit add æ–‡ä»¶# å°†ç›®å½•ä¸‹æ‰€æœ‰ä¿®æ”¹è¿‡çš„è¢«è·Ÿè¸ªä»£ç æäº¤åˆ°ç¼“å­˜åŒºgit add -u ç›®å½•# å°†ç›®å½•ä¸‹æ‰€æœ‰ä¿®æ”¹è¿‡çš„æœªè¢«è·Ÿè¸ªçš„ä»£ç æäº¤åˆ°ç¼“å­˜åŒºgit add -A ç›®å½• 2.4. å°†ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“ä¸­12# -m æ ‡æ³¨æäº¤ä¿¡æ¯git commit -m &quot;ä¿®æ”¹é¡¹ç›®ä»£ç &quot; 2.5. å°†ç¼“å­˜åŒºä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“1234# æ¨é€åˆ°å½“å‰åˆ†æ”¯git push# æ¨é€åˆ°devåˆ†æ”¯ï¼ˆoriginåè¡”æ¥æŒ‡å®šåˆ†æ”¯ï¼‰git push origin dev 3. Gitåˆ‡æ¢åˆ†æ”¯3.1. æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯1git branch -a ä¾‹å­ï¼š 1234567~/panda$ git branch -a* master remotes/origin/HEAD -&gt; origin/master remotes/origin/master remotes/origin/nnvm remotes/origin/piiswrong-patch-1 remotes/origin/v0.9rc1 3.2. æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯12~/panda$ git branch* master 3.3. åˆ‡æ¢åˆ†æ”¯12345678910111213$ git checkout -b dev origin/devBranch dev set up to track remote branch v0.9rc1 from origin.Switched to a new branch &#x27;dev&#x27;ï¼ƒå·²ç»åˆ‡æ¢åˆ°devåˆ†æ”¯äº†$ git branch master* devï¼ƒåˆ‡æ¢å›masteråˆ†æ”¯$ git checkout masterSwitched to branch &#x27;master&#x27;Your branch is up-to-date with &#x27;origin/master&#x27;. å‘½ä»¤è¡ŒæŒ‡å¼•æ‚¨è¿˜å¯ä»¥æŒ‰ç…§ä»¥ä¸‹è¯´æ˜ä»è®¡ç®—æœºä¸­ä¸Šä¼ ç°æœ‰æ–‡ä»¶ã€‚ Git å…¨å±€è®¾ç½®12git config --global user.name &quot;panda&quot;git config --global user.email &quot;pandacode_cn@163.com&quot; åˆ›å»ºä¸€ä¸ªæ–°ä»“åº“1234567git clone http://8.141.66.12:8099/pandacode/panda-doc.gitcd panda-docgit switch -c maintouch README.mdgit add README.mdgit commit -m &quot;add README&quot;git push -u origin main æ¨é€ç°æœ‰æ–‡ä»¶å¤¹123456cd existing_foldergit init --initial-branch=maingit remote add origin http://8.141.66.12:8099/pandacode/panda-doc.gitgit add .git commit -m &quot;Initial commit&quot;git push -u origin main æ¨é€ç°æœ‰çš„ Git ä»“åº“1234cd existing_repogit remote rename origin old-origingit remote add origin http://8.141.66.12:8099/pandacode/panda-doc.gitgit push -u origin --all å‚è€ƒæ–‡æ¡£ gitå‘½ä»¤ï¼åˆ‡æ¢åˆ†æ”¯ Git | åˆ©ç”¨ git å‘½ä»¤è¡Œæäº¤ä»£ç æ­¥éª¤","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://guoshunfa.com/tags/Git/"}]},{"title":"Git é”™è¯¯è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/git/Git-é”™è¯¯è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Git-é”™è¯¯è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Git-%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95/","excerpt":"","text":"host key for (ipåœ°å€) has changed and you have requested strict checking.ssh\\known_hosts æ–‡ä»¶åˆ æ‰å°±å¥½äº† å‚è€ƒæ–‡æ¡£ https://blog.csdn.net/cssxn/article/details/105952399","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://guoshunfa.com/tags/Git/"}]},{"title":"Gitlab Dockeræ–¹å¼éƒ¨ç½²","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/git/Gitlab-Dockeræ–¹å¼éƒ¨ç½²","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Gitlab-Dockeræ–¹å¼éƒ¨ç½²/","link":"","permalink":"https://guoshunfa.com/2022/07/Gitlab-Docker%E6%96%B9%E5%BC%8F%E9%83%A8%E7%BD%B2/","excerpt":"","text":"è½¬å‘è‡ªï¼šä½¿ç”¨Dockeréƒ¨ç½²GitLabï½œ8æœˆæ›´æ–‡æŒ‘æˆ˜ 1. dockeræ‹‰å–gitlabç¤¾åŒºç‰ˆ1docker pull gitlab/gitlab-ce:latest æŸ¥çœ‹æ˜¯å¦æ‹‰å–æˆåŠŸ 123[root@test gitlab] docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEgitlab/gitlab-ce latest 75d591b81fd7 4 days ago 2.23GB 2. ä½¿ç”¨å®¹å™¨å·å°†æ•°æ®æ˜ å°„åˆ°æœ¬åœ°å¹¶è¿è¡Œ å®¿ä¸»æœºä½ç½® å®¹å™¨ä½ç½® ä½œç”¨ &#x2F;usr&#x2F;local&#x2F;gitlab&#x2F;config &#x2F;etc&#x2F;gitlab ç”¨äºå­˜å‚¨ GitLab é…ç½®æ–‡ä»¶ &#x2F;usr&#x2F;local&#x2F;gitlab&#x2F;logs &#x2F;var&#x2F;log&#x2F;gitlab ç”¨äºå­˜å‚¨æ—¥å¿— &#x2F;usr&#x2F;local&#x2F;gitlab&#x2F;data &#x2F;var&#x2F;opt&#x2F;gitlab ç”¨äºå­˜å‚¨åº”ç”¨æ•°æ® 2.1. åœ¨å®¿ä¸»æœºåˆ›å»ºæ˜ å°„ç›®å½•123456[root@test ~] mkdir -p /usr/local/gitlab/config #é€’å½’åˆ›å»ºç›®å½•ï¼Œå³ä½¿ä¸Šçº§ç›®å½•ä¸å­˜åœ¨ï¼Œä¼šæŒ‰ç›®å½•å±‚çº§è‡ªåŠ¨åˆ›å»ºç›®å½•[root@test ~] mkdir -p /usr/local/gitlab/logs[root@test ~] mkdir -p /usr/local/gitlab/data[root@test ~] cd /usr/local/gitlab[root@test gitlab] lsconfig data logs 3. åˆ›å»ºæ–¹æ³•3.1 åˆ›å»ºæ–¹æ³•ä¸€3.1.1. åˆ›å»ºgitlab_start.shæ–‡ä»¶12[root@test gitlab] touch gitlab_start.sh[root@test gitlab] vim gitlab_start.sh ç¼–å†™å†…å®¹ 1234567891011#!/bin/shGITLAB_HOME=/usr/local/gitlabsudo docker run --detach \\ --hostname ä½ çš„æœåŠ¡ip \\ --publish 443:443 --publish 8090:80 --publish 10080:22 \\ --name gitlab \\ --restart always \\ --volume $GITLAB_HOME/config:/etc/gitlab \\ --volume $GITLAB_HOME/logs:/var/log/gitlab \\ --volume $GITLAB_HOME/data:/var/opt/gitlab \\ gitlab/gitlab-ce:latest å‚æ•°è¯´æ˜ï¼š â€“detach: è®¾ç½®å®¹å™¨åå°è¿è¡Œâ€“hostname: è®¾ç½®å®¹å™¨çš„ hostname,å¦‚æœæ˜¯æœ¬åœ°localhost ï¼Œå¦åˆ™ä½¿ç”¨å¤–ç½‘ipâ€“publish: ç«¯å£è½¬å‘è§„åˆ™ï¼ˆ80ï¼šHttp è®¿é—®ç«¯å£ï¼Œ443ï¼šHttps è®¿é—®ç«¯å£ï¼Œ10080ï¼šä¸»æœºçš„ ssh è®¿é—®ç«¯å£ï¼Œ22ï¼šDocker å®¹å™¨ä¸­ ssh è®¿é—®ç«¯å£ï¼‰â€“nameï¼šå®¹å™¨åç§°â€“restart alwaysï¼šæ¯æ¬¡å¯åŠ¨å®¹å™¨å°±é‡å¯GitLabâ€“volume: å…±äº«ç›®å½•æŒ‚è½½ï¼Œå³ docker å®¹å™¨å†…å¤–æ•°æ®å…±äº«â€“eï¼šé…ç½® Gitlab è¿è¡Œçš„ç¯å¢ƒå˜é‡ åœ¨è¯¥æ–‡ä»¶ç›®å½•ä¸‹,æˆäºˆgitlab_start.shæ‰§è¡Œæƒé™ 12chmod +x gitlab_start.sh ./gitlab_start.sh #æ‰§è¡Œè„šæœ¬ 3.1.2. å¯èƒ½é‡åˆ°çš„é”™è¯¯123[root@test gitlab] ./gitlab_start.sh000dc7b1b6e35d94171be203c49ef7a57a1ffb8ea76c72b6765cbed9b5de347bdocker: Error response from daemon: driver failed programming external connectivity on endpoint gitlab (757b5ee12c5202b00ff312c9a927621ebb63e3e5272c827ba36baf19614ee7d7): Error starting userland proxy: listen tcp4 0.0.0.0:80: bind: address already in use. è¦æ³¨æ„ç«¯å£æ˜¯å¦è¢«å ç”¨ 123[root@test gitlab] netstat -ntulp | grep 8090 #æŸ¥çœ‹æ‰€æœ‰80ç«¯å£ä½¿ç”¨æƒ…å†µtcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN 13389/nginx: mastertcp6 0 0 :::8080 :::* LISTEN 5233/oracle-java ä¿®æ”¹gitlab_start.shæ–‡ä»¶,å°†æ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£æ”¹ä¸º8088ï¼Œæˆ–è€…å…¶å®ƒæ²¡è¢«å ç”¨çš„ç«¯å£ 1--publish 443:443 --publish 8088:80 --publish 10080:22 \\ é‡æ–°è¿è¡Œ./gitlab_start.shæ–‡ä»¶ï¼ŒæŠ¥é”™å¦‚ä¸‹ 123[root@test gitlab] ./gitlab_start.shdocker: Error response from daemon: Conflict. The container name &quot;/gitlab&quot; is already in use by container &quot;000dc7b1b6e35d94171be203c49ef7a57a1ffb8ea76c72b6765cbed9b5de347b&quot;. You have to remove (or rename) that container to be able to reuse that name.See &#x27;docker run --help&#x27;. è¿™æ˜¯å› ä¸ºä¹‹å‰çš„å®¹å™¨è™½ç„¶æ²¡æœ‰è¿è¡Œèµ·æ¥ï¼Œä½†æ˜¯å·²ç»åˆ›å»ºäº†ï¼ŒæŠŠå®ƒåˆ é™¤æ‰ 1234567[root@test gitlab] docker ps -aCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES000dc7b1b6e3 gitlab/gitlab-ce:latest &quot;/assets/wrapper&quot; 7 minutes ago Created gitlab[root@test gitlab] docker rm 000d000d[root@test gitlab] docker ps -aCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES é‡æ–°è¿è¡Œgitlab_start.shæ–‡ä»¶ 12345[root@test gitlab] ./gitlab_start.sh70b9da8332b287b9c154988e03eb6b92ba6c360f985d704b1b703367ffe30732[root@test gitlab] docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES70b9da8332b2 gitlab/gitlab-ce:latest &quot;/assets/wrapper&quot; 4 seconds ago Up 3 seconds (health: starting) 0.0.0.0:443-&gt;443/tcp, :::443-&gt;443/tcp, 0.0.0.0:10080-&gt;22/tcp, :::10080-&gt;22/tcp, 0.0.0.0:8088-&gt;80/tcp, :::8088-&gt;80/tcp gitlab å¯ä»¥çœ‹åˆ°å®¹å™¨æˆåŠŸå¯åŠ¨ 3.2åˆ›å»ºæ–¹æ³•äºŒåˆ›å»ºdocker-compose.ymlæ–‡ä»¶ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œdocker-compose up -déœ€è¦äº‹å…ˆå®‰è£…docker-composeå®‰è£…docker-compose 123456789101112131415161718192021version: &#x27;2&#x27;services: gitlab: image: &#x27;gitlab/gitlab-ce:latest&#x27; container_name: &quot;gitlab&quot; restart: always hostname: &#x27;39.105.15.40&#x27; environment: TZ: &#x27;Asia/Shanghai&#x27; GITLAB_OMNIBUS_CONFIG: | external_url &#x27;http://39.105.15.40:8088&#x27; gitlab_rails[&#x27;gitlab_shell_ssh_port&#x27;] = 10080 gitlab_rails[&#x27;time_zone&#x27;] = &#x27;Asia/Shanghai&#x27; ports: - &#x27;8088:8088&#x27; - &#x27;10080:22&#x27; - &#x27;443:443&#x27; volumes: - /usr/local/gitlab/config:/etc/gitlab - /usr/local/gitlab/logs:/var/log/gitlab - /usr/local/gitlab/data:/var/opt/gitlab æ³¨ï¼šç«¯å£å’Œæ˜ å°„ç›®å½•å¯æ ¹æ®éœ€è¦ä¿®æ”¹ è‹¥å¼€æ”¾è®¿é—®ç«¯å£ä¸º80ï¼Œexternal_urlå¯ä¸åŠ ç«¯å£å·ï¼Œé»˜è®¤80 4. ä¿®æ”¹gitlabé…ç½®æ–‡ä»¶ï¼ˆæ–¹æ³•ä¸€éœ€è¦ï¼‰è‹¥ä»¥3.1æ–¹æ³•åˆ›å»ºï¼Œéœ€è¦ä¿®æ”¹ç›¸å…³é…ç½®æ–‡ä»¶ 12345678910vim /usr/local/gitlab/config/gitlab.rb# æ”¹SSHç«¯å£ä¸º10080ï¼Œä»¥ä¾¿ä¸å’Œå®¿ä¸»æœº22ç«¯å£å†²çªgitlab_rails[&#x27;gitlab_shell_ssh_port&#x27;] = 10080# é…ç½®å¤–éƒ¨è®¿é—®åœ°å€# æ—§ç‰ˆæœ¬ # external_url &#x27;ipåœ°å€&#x27; # æ–°ç‰ˆæœ¬ external_url &#x27;http://ipåœ°å€&#x27; 4.1 åº”ç”¨é…ç½®ï¼Œé‡å¯æœåŠ¡åœ¨Gitlabå®¹å™¨è¿è¡ŒçŠ¶æ€æ—¶ï¼Œé‡å¯æœåŠ¡ï¼Œå¹¶è¿œç¨‹è®¿é—®ç½‘ç«™æµ‹è¯• 12345678# è¿›å…¥gitlab bashdocker exec -it gitlab bash # é‡æ–°åº”ç”¨gitlabçš„é…ç½®gitlab-ctl reconfigure# é‡å¯gitlabæœåŠ¡gitlab-ctl restart# æŸ¥çœ‹gitlabè¿è¡ŒçŠ¶æ€gitlab-ctl status è‹¥è®¿é—®Gitlabå‡ºç°502ç­‰é”™è¯¯ï¼Œä½¿ç”¨å‘½ä»¤æ£€æŸ¥é”™è¯¯åŸå›  1gitlab-rake gitlab:check e.g. 12345Try fixing it: Make sure GitLab is running; Check the gitlab-shell configuration file: sudo -u git -H editor /opt/gitlab/embedded/service/gitlab-shell/config.yml Please fix the error above and rerun the checks. æŸ¥çœ‹ä¸Šè¿°é…ç½®æ–‡ä»¶ï¼ŒæŸ¥æ‰¾é”™è¯¯åŸå›  è®¿é—®GitLabå¤±è´¥é”™è¯¯è™½ç„¶å®¹å™¨å¯åŠ¨æˆåŠŸï¼Œä½†æ˜¯å´æ²¡åŠæ³•æ ¹æ®ip:portè®¿é—®gitlab å¯åŠ¨ä¸€ä¸ªtomcatå®¹å™¨æµ‹è¯•ç«¯å£æ‹‰å–tomcaté•œåƒ 1docker pull tomcat:jdk8-openjdk ä¸ºäº†æµ‹è¯•8088ç«¯å£æ˜¯å¦å¯ç”¨ï¼Œå…ˆæŠŠgitlabçš„å®¹å™¨æš‚åœ 1docker stop gitlab å¯åŠ¨tomcatå®¹å™¨ï¼Œå¹¶å°†tomcatå®¹å™¨çš„8080ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„8088ç«¯å£ 12345678910[root@test ~] docker run -d --name tomcat -p 8088:8080 tomcat:jdk8-openjdkaa29b816196ae32f12915a74e447f01bedae64cd200aaa5cab0dedcc383710f7[root@test ~] docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESaa29b816196a tomcat:jdk8-openjdk &quot;catalina.sh run&quot; 3 seconds ago Up 3 seconds 0.0.0.0:8088-&gt;8080/tcp, :::8088-&gt;8080/tcp tomcat[root@test ~] lsof -i:8088COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAMEdocker-pr 2257 root 4u IPv4 2690446 0t0 TCP *:radan-http (LISTEN)docker-pr 2262 root 4u IPv6 2689770 0t0 TCP *:radan-http (LISTEN) ä¸€åˆ‡æ­£å¸¸ï¼Œè®¿é—®ip:8088ï¼Œè¿˜æ˜¯å’Œä»¥å‰ä¸€æ ·è®¿é—®ä¸äº† å¼€å¯é˜²ç«å¢™å¹¶æ‰“å¼€ç«¯å£å› ä¸ºä¹‹å‰ç³»ç»Ÿçš„é˜²ç«å¢™ä¸€ç›´æ˜¯å…³é—­çš„å¹¶ä¸”å…¶å®ƒçš„æœåŠ¡èƒ½æ­£å¸¸è®¿é—®ï¼Œæ‰€ä»¥æ²¡æœ‰æ€€ç–‘æ˜¯é˜²ç«å¢™çš„é—®é¢˜ 1234[root@test ~] firewall-cmd --statenot running[root@test ~] firewall-cmd --permanent --add-port=8088/tcpFirewallD is not running æŠŠé˜²ç«å¢™æ‰“å¼€ 1[root@test ~] systemctl start firewalld.service è®¿é—®ä¹‹å‰èƒ½æ­£å¸¸è®¿é—®çš„æœåŠ¡ï¼Œæœç„¶æ²¡æ³•æ­£å¸¸è®¿é—®ã€‚ æŠŠè¯¥æœåŠ¡çš„ç«¯å£å¼€å‘ï¼Œæ­£å¸¸è®¿é—®ã€‚ æ‰“å¼€8088ç«¯å£ 1234[root@test ~] firewall-cmd --permanent --add-port=8088/tcpsuccess[root@test ~] firewall-cmd --reloadsuccess å†æ¬¡è®¿é—® è¿”å›tomcatçš„404é¡µé¢ï¼šHTTP Status 404 â€“ Not Found è™½ç„¶æ˜¯404é¡µé¢ï¼Œä½†æ˜¯è¯´æ˜æ­¤æ—¶çš„ç«¯å£æ˜¯èƒ½æ­£å¸¸è®¿é—®çš„ å†æ¬¡å¯åŠ¨gitlabæœåŠ¡æŠŠtomcatçš„å®¹å™¨åœæ­¢è¿è¡Œï¼Œé‡æ–°è¿è¡Œgitlabå®¹å™¨ 12345678[root@test ~] docker stop tomcattomcat[root@test ~] docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES[root@test ~] docker start gitlabError response from daemon: driver failed programming external connectivity on endpoint gitlab (1d8b474e20fe113724f1c429c75b6ac3ece200e9c0beacb980907c15470c7d3e): (iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d 0/0 --dport 10080 -j DNAT --to-destination 172.18.0.2:22 ! -i br-12aa369ee4a6: iptables: No chain/target/match by that name. (exit status 1))Error: failed to start containers: gitlab è™½ç„¶æ²¡å¯åŠ¨æˆåŠŸï¼Œä½†ç¦»æˆåŠŸæ›´è¿›ä¸€æ­¥äº†:) å°è¯•æŠŠè¿™ä¸ªå®¹å™¨åˆ é™¤æ‰ï¼Œå†åˆ›å»ºä¸€æ¬¡åè¿˜æ˜¯å¾—åˆ°è¿™ä¸ªé”™è¯¯ã€‚ 123456[root@test gitlab] systemctl restart docker[root@test gitlab] docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES[root@test gitlab] docker-compose up -dStarting gitlab ... done[root@test gitlab] è¿˜æ˜¯è®¿é—®ä¸äº†ï¼Œæ£€æŸ¥ä¸€ä¸‹GitLabå†…éƒ¨æ˜¯å¦æœ‰é—®é¢˜ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990[root@test gitlab] docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES7528489258e0 gitlab/gitlab-ce:latest &quot;/assets/wrapper&quot; 18 minutes ago Up 2 minutes (healthy) 0.0.0.0:443-&gt;443/tcp, :::443-&gt;443/tcp, 80/tcp, 0.0.0.0:8088-&gt;8088/tcp, :::8088-&gt;8088/tcp, 0.0.0.0:10080-&gt;22/tcp, :::10080-&gt;22/tcp gitlab[root@test gitlab] docker exec -it gitlab bashroot@8:/ gitlab-ctl statusrun: alertmanager: (pid 769) 250s; run: log: (pid 621) 281srun: gitaly: (pid 281) 339s; run: log: (pid 316) 337srun: gitlab-exporter: (pid 746) 251s; run: log: (pid 564) 302srun: gitlab-workhorse: (pid 737) 251s; run: log: (pid 525) 314srun: grafana: (pid 784) 249s; run: log: (pid 677) 270srun: logrotate: (pid 253) 351s; run: log: (pid 261) 350srun: nginx: (pid 539) 309s; run: log: (pid 548) 308srun: postgres-exporter: (pid 777) 249s; run: log: (pid 636) 278srun: postgresql: (pid 396) 333s; run: log: (pid 484) 330srun: prometheus: (pid 759) 250s; run: log: (pid 607) 288srun: puma: (pid 487) 327s; run: log: (pid 495) 324srun: redis: (pid 265) 345s; run: log: (pid 273) 344srun: redis-exporter: (pid 748) 251s; run: log: (pid 587) 294srun: sidekiq: (pid 500) 321s; run: log: (pid 511) 318srun: sshd: (pid 31) 361s; run: log: (pid 30) 361sroot@8:/ gitlab-rake gitlab:checkChecking GitLab subtasks ...Checking GitLab Shell ...GitLab Shell: ... GitLab Shell version &gt;= 13.19.0 ? ... OK (13.19.0)Running /opt/gitlab/embedded/service/gitlab-shell/bin/checkInternal API available: OKRedis available via internal API: OKgitlab-shell self-check successfulChecking GitLab Shell ... FinishedChecking Gitaly ...Gitaly: ... default ... OKChecking Gitaly ... FinishedChecking Sidekiq ...Sidekiq: ... Running? ... yesNumber of Sidekiq processes (cluster/worker) ... 1/1Checking Sidekiq ... FinishedChecking Incoming Email ...Incoming Email: ... Reply by email is disabled in config/gitlab.ymlChecking Incoming Email ... FinishedChecking LDAP ...LDAP: ... LDAP is disabled in config/gitlab.ymlChecking LDAP ... FinishedChecking GitLab App ...Git configured correctly? ... yesDatabase config exists? ... yesAll migrations up? ... yesDatabase contains orphaned GroupMembers? ... noGitLab config exists? ... yesGitLab config up to date? ... yesLog directory writable? ... yesTmp directory writable? ... yesUploads directory exists? ... yesUploads directory has correct permissions? ... yesUploads directory tmp has correct permissions? ... skipped (no tmp uploads folder yet)Init script exists? ... skipped (omnibus-gitlab has no init script)Init script up-to-date? ... skipped (omnibus-gitlab has no init script)Projects have namespace: ...GitLab Instance / Monitoring ... yesRedis version &gt;= 5.0.0? ... yesRuby version &gt;= 2.7.2 ? ... yes (2.7.2)Git version &gt;= 2.31.0 ? ... yes (2.32.0)Git user has default SSH configuration? ... yesActive users: ... 1Is authorized keys file accessible? ... yesGitLab configured to store new projects in hashed storage? ... yesAll projects are in hashed storage? ... yesChecking GitLab App ... FinishedChecking GitLab subtasks ... Finished ä¸€åˆ‡æ­£å¸¸ æˆ‘å†æ¬¡æ¢æˆtomcatå®¹å™¨è¿›è¡Œæµ‹è¯•ï¼Œå‘ç°8088ç«¯å£è®¿é—®ä¸äº†äº†ã€‚ ä½†æ˜¯åœ¨å®¿ä¸»æœºå†…pingæœ¬æœºæ˜¯å¯ä»¥çš„ 12[root@test tomcat] curl localhost:8088&lt;!doctype html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;title&gt;HTTP Status 404 â€“ Not Found&lt;/title&gt;&lt;style type=&quot;text/css&quot;&gt;body &#123;font-family:Tahoma,Arial,sans-serif;&#125; h1, h2, h3, b &#123;color:white;background-color:#525D76;&#125; h1 &#123;font-size:22px;&#125; h2 &#123;font-size:16px;&#125; h3 &#123;font-size:14px;&#125; p &#123;font-size:12px;&#125; a &#123;color:black;&#125; .line &#123;height:1px;background-color:#525D76;border:none;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;HTTP Status 404 â€“ Not Found&lt;/h1&gt;&lt;hr class=&quot;line&quot; /&gt;&lt;p&gt;&lt;b&gt;Type&lt;/b&gt; Status Report&lt;/p&gt;&lt;p&gt;&lt;b&gt;Description&lt;/b&gt; The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.&lt;/p&gt;&lt;hr class=&quot;line&quot; /&gt;&lt;h3&gt;Apache Tomcat/9.0.50&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt; ä½†æ˜¯ï¼Œæ¢æˆip:8088åˆ™ä¸è¡Œ é—®é¢˜è½¬ç§»ï¼šä¸ºä»€ä¹ˆè®¿é—®ä¸äº†å®¹å™¨å†…çš„æœåŠ¡ å‚è€ƒ è§£å†³Dockerç«¯å£æ˜ å°„æ— æ³•è®¿é—®é—®é¢˜ é˜¿é‡Œäº‘ ECS çš„Dockerä¸ºä»€ä¹ˆæ— æ³•ç«¯å£æ˜ å°„? æ ¹æ®ä»¥ä¸Šä¸¤ç¯‡æ–‡ç« ï¼Œæå‡ºé˜¿é‡Œäº‘çš„å†…ç½‘eth0 ç½‘æ®µæ­£å¥½è·ŸDocker çš„è™šæ‹Ÿç½‘å¡éƒ½æ˜¯ 172 ç½‘æ®µ,æœ‰å†²çª è§‚å¯Ÿå‘ç°æˆ‘ä½¿ç”¨çš„äº‘æœåŠ¡å™¨ä¹Ÿæ˜¯é˜¿é‡Œäº‘ï¼Œå¹¶ä¸”é€šè¿‡ifconfigæŸ¥çœ‹ 1234567891011121314151617181920212223242526[root@test config] ifconfigbr-12aa369ee4a6: flags=4099&lt;UP,BROADCAST,MULTICAST&gt; mtu 1500 inet 172.18.0.1 netmask 255.255.0.0 broadcast 172.18.255.255 inet6 fe80::42:61ff:fedf:d41f prefixlen 64 scopeid 0x20&lt;link&gt; ether 02:42:61:df:d4:1f txqueuelen 0 (Ethernet) RX packets 6 bytes 1174 (1.1 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 22 bytes 1682 (1.6 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0docker0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 172.17.0.1 netmask 255.255.0.0 broadcast 172.17.255.255 inet6 fe80::42:5dff:fe6c:be47 prefixlen 64 scopeid 0x20&lt;link&gt; ether 02:42:5d:6c:be:47 txqueuelen 0 (Ethernet) RX packets 283 bytes 18925 (18.4 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 254 bytes 19725 (19.2 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 172.xx.x.xxx netmask 255.255.240.0 broadcast 172.16.15.255 inet6 fe80::216:3eff:fe01:2f48 prefixlen 64 scopeid 0x20&lt;link&gt; ether 00:16:3e:01:2f:48 txqueuelen 1000 (Ethernet) RX packets 504273 bytes 329083359 (313.8 MiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 273686 bytes 220530043 (210.3 MiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 å¹¶ä¸”æŸ¥çœ‹é˜¿é‡Œäº‘çš„å†…ç½‘ipç¡®å®ä¹Ÿæ˜¯172å¼€å¤´ã€‚ ç¼–è¾‘é…ç½®æ–‡ä»¶/etc/docker/daemon.json ,è‹¥daemon.jsonæ–‡ä»¶ä¸å­˜åœ¨æ–°å»ºå³å¯ã€‚ 123&#123; &quot;bip&quot;: &quot;192.168.1.5/24&quot;&#125; é‡æ–°å¯åŠ¨dockeræœåŠ¡ 1234567891011121314151617181920212223242526272829systemctl restart dockerå¤åˆ¶ä»£ç [root@test docker]# ifconfigbr-12aa369ee4a6: flags=4099&lt;UP,BROADCAST,MULTICAST&gt; mtu 1500 inet 172.18.0.1 netmask 255.255.0.0 broadcast 172.18.255.255 inet6 fe80::42:61ff:fedf:d41f prefixlen 64 scopeid 0x20&lt;link&gt; ether 02:42:61:df:d4:1f txqueuelen 0 (Ethernet) RX packets 508550 bytes 329587116 (314.3 MiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 276951 bytes 223924395 (213.5 MiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0docker0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 192.168.1.5 netmask 255.255.255.0 broadcast 192.168.1.255 inet6 fe80::42:5dff:fe6c:be47 prefixlen 64 scopeid 0x20&lt;link&gt; ether 02:42:5d:6c:be:47 txqueuelen 0 (Ethernet) RX packets 283 bytes 18925 (18.4 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 258 bytes 20085 (19.6 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500 inet 172.xx.x.xxx netmask 255.255.240.0 broadcast 172.16.15.255 inet6 fe80::216:3eff:fe01:2f48 prefixlen 64 scopeid 0x20&lt;link&gt; ether 00:16:3e:01:2f:48 txqueuelen 1000 (Ethernet) RX packets 508550 bytes 329587116 (314.3 MiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 276958 bytes 223925673 (213.5 MiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 å¯ä»¥çœ‹åˆ°docker0 çš„åœ°å€å˜äº†ã€‚ ä½†æ˜¯è¦æ³¨æ„ï¼Œä½¿ç”¨dockerå¯åŠ¨çš„æœåŠ¡ä¼šé»˜è®¤ä½¿ç”¨docker0ï¼Œå¦‚æœæ˜¯ç”¨docker-composeå¯åŠ¨çš„æœåŠ¡åˆ™ä¸ä¼šã€‚ä¸Šé¢çš„br-12aa369ee4a6å¯¹åº”çš„æ˜¯docker-composeå¯åŠ¨çš„æœåŠ¡ï¼Œå¯ä»¥çœ‹åˆ°è¿˜æ˜¯172çš„ç½‘æ®µã€‚ docker-compose upä½¿ç”¨è‡ªå®šä¹‰çš„ç½‘æ®µçš„ä¸¤ç§æ–¹å¼ï¼ˆä»å…¶æ ¹æºæŒ‡å®šï¼‰ æ ¹æ®è¯¥æ–‡ä½¿ç”¨æ–¹æ³•2ï¼Œå³ä¿®æ”¹daemon.jsonã€‚ä½†å¹¶ä¸èƒ½æˆåŠŸè®¿é—®,æˆ‘çš„ç¯å¢ƒæ˜¯ï¼šdocker:20.10.7,docker-compose:1.24.1 12345678910&#123; &quot;bip&quot;: &quot;192.168.1.5/24&quot;, &quot;debug&quot;: true, &quot;default-address-pools&quot; : [ &#123; &quot;base&quot; : &quot;192.168.1.5/16&quot;, &quot;size&quot; : 24 &#125; ]&#125; åé¢å‘ç°è®¿é—®ä¸æˆåŠŸçš„åŸå› åœ¨äºdockerä¸é˜²ç«å¢™ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥å…³æ‰é˜²ç«å¢™ï¼Œå¼€å¯dockerï¼Œä¸èƒ½è®¿é—®åˆ™æ‰“å¼€é˜²ç«å¢™ã€‚åœ¨å®ƒä»¬ä¹‹é—´æ¥å›è¯•æ¢ &#x3D; &#x3D;ã€‚åé¢å°è¯•è¿‡å…³é—­firewalldï¼Œæ‰“å¼€iptablesã€‚ åœ¨å¯ç”¨iptablesæ—¶ï¼Œä¸€èˆ¬å…³æ‰iptableså¯ä»¥æ­£å¸¸è®¿é—®ï¼Œæ‰“å¼€åˆ™ä¸èƒ½æ­£å¸¸è®¿é—®ã€‚åœ¨å¯ç”¨firewalldæ—¶ï¼ŒæŒ‰ç…§dockerå’Œfirewalldä¹‹é—´å¯åŠ¨å…³é—­çš„é¡ºåºä¸åŒï¼Œæœ‰æ—¶æ˜¯å¼€ç€é˜²ç«å¢™èƒ½è®¿é—®ï¼Œæœ‰æ—¶æ˜¯å…³äº†é˜²ç«å¢™èƒ½è®¿é—®ã€‚ ä½†æ˜¯å®¹å™¨å†…ä¸èƒ½è®¿é—®å¤–éƒ¨ç½‘ç»œï¼Œè¯¥é—®é¢˜ç°åœ¨è¿˜æœªè§£å†³ã€‚ æœ‰ä¸€ç§è¿‚å›çš„è§£å†³æ–¹æ³•å°±æ˜¯å®¹å™¨ä½¿ç”¨hostç½‘ç»œæ¨¡å¼ é—®é¢˜ï¼šæ€€ç–‘æ˜¯dockerï¼Œfirewalldä¸iptablesä¹‹é—´çš„è®¾ç½®é—®é¢˜ Dockerä¸IPtables docker ç«¯å£æ˜ å°„ åŠå¤–éƒ¨æ— æ³•è®¿é—®é—®é¢˜ Docker and IPtables è¿˜æœ‰ä¸€ç§è®¿é—®ä¸äº†GitLabçš„æƒ…å†µæ˜¯ç«¯å£æ˜ å°„å’Œé…ç½®æ–‡ä»¶æœ‰è¯¯ã€‚ å¿«é€Ÿçš„è§£å†³æ–¹æ³•ï¼šå°†å®¿ä¸»æœºç«¯å£å·å’Œå®¹å™¨å·è®¾ç½®ç›¸åŒï¼Œå¯å‚è€ƒä¸‹é¢çš„åšå®¢ã€‚ åˆ©ç”¨GitLab Docker imageså®‰è£…GitLabï¼ˆå¡«å‘ï¼‰ æ€»ç»“â€‹ å¦‚æœç³»ç»Ÿç¯å¢ƒæ­£å¸¸ï¼Œå®‰è£…ä¼šååˆ†é¡ºåˆ©ï¼Œä¸€èˆ¬ä¸ä¼šæœ‰å¥‡æ€ªçš„é—®é¢˜ã€‚æˆ‘åœ¨ä¸åŒçš„æœåŠ¡å™¨å®‰è£…è¿‡â€‹ é˜¿é‡Œäº‘ CentOS 7.6: è®¿é—®æ­£å¸¸ï¼Œä½†æ˜¯å› å†…å­˜ä¸å¤Ÿå‡ºç°502é”™è¯¯ï¼Œå®¹å™¨å†…å¯æ­£å¸¸è¿æ¥å¤–éƒ¨ç½‘ç»œâ€‹ é˜¿é‡Œäº‘ Alibaba Cloud Linux 2: å¯èƒ½ä¸èƒ½æ­£å¸¸è®¿é—®å®¹å™¨ï¼Œå®¹å™¨å†…ä¸èƒ½æ­£å¸¸è¿æ¥å¤–éƒ¨ç½‘ç»œã€‚æ€€ç–‘æ˜¯é˜²ç«å¢™ä¸dockerçš„é—®é¢˜ã€‚","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Gitlab","slug":"Gitlab","permalink":"https://guoshunfa.com/tags/Gitlab/"},{"name":"Docker","slug":"Docker","permalink":"https://guoshunfa.com/tags/Docker/"}]},{"title":"Gitlab GitlabRunnerå¦‚ä½•æ›´æ”¹æ‰§è¡Œç”¨æˆ·","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/git/Gitlab-GitlabRunnerå¦‚ä½•æ›´æ”¹æ‰§è¡Œç”¨æˆ·","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Gitlab-GitlabRunnerå¦‚ä½•æ›´æ”¹æ‰§è¡Œç”¨æˆ·/","link":"","permalink":"https://guoshunfa.com/2022/07/Gitlab-GitlabRunner%E5%A6%82%E4%BD%95%E6%9B%B4%E6%94%B9%E6%89%A7%E8%A1%8C%E7%94%A8%E6%88%B7/","excerpt":"","text":"Gitlab - GitlabRunnerå¦‚ä½•æ›´æ”¹æ‰§è¡Œç”¨æˆ·è½¬è½½è‡ªï¼šhttp://www.fidding.me/article/111 gitlab-ciçš„runneré»˜è®¤ä½¿ç”¨gitlab-runnerç”¨æˆ·æ‰§è¡Œæ“ä½œï¼› é€šè¿‡æŒ‡ä»¤ps aux|grep gitlab-runnerå¯ä»¥çœ‹åˆ°ï¼š 1/usr/bin/gitlab-ci-multi-runner run --working-directory /home/gitlab-runner --config /etc/gitlab-runner/config.toml --service gitlab-runner --syslog --user gitlab-runner å…¶ä¸­ï¼š --working-directoryï¼šè®¾ç½®å·¥ä½œç›®å½•, é»˜è®¤æ˜¯**&#x2F;home&#x2F;{æ‰§è¡Œuser}** --configï¼šè®¾ç½®é…ç½®æ–‡ä»¶ç›®å½•ï¼Œé»˜è®¤æ˜¯**&#x2F;etc&#x2F;gitlab-runner&#x2F;config.toml** --userï¼šè®¾ç½®æ‰§è¡Œç”¨æˆ·åï¼Œé»˜è®¤æ˜¯gitlab-runner å› æ­¤æƒ³è¦æ›´æ”¹userä¸ºrootåªéœ€è¦é‡æ–°è®¾ç½®--userå±æ€§å³å¯ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š åˆ é™¤gitlab-runner 1sudo gitlab-runner uninstall å®‰è£…å¹¶è®¾ç½®--user(ä¾‹å¦‚æˆ‘æƒ³è®¾ç½®ä¸ºroot) 1gitlab-runner install --working-directory /home/gitlab-runner --user root é‡å¯gitlab-runner 1sudo service gitlab-runner restart éªŒè¯ä¸€ä¸‹ï¼š å†æ¬¡æ‰§è¡Œps aux|grep gitlab-runnerä¼šå‘ç°--userçš„ç”¨æˆ·åå·²ç»æ›´æ¢æˆrootäº† 1/usr/bin/gitlab-ci-multi-runner run --working-directory /home/gitlab-runner --config /etc/gitlab-runner/config.toml --service gitlab-runner --syslog --user root è‡³æ­¤gitlab-runneræ‰§è¡Œ.gitlab-cli.yamlæ—¶å€™ä¾¿æ˜¯ä»¥rootç”¨æˆ·å»æ‰§è¡Œæ“ä½œï¼Œå†ä¹Ÿæ²¡æœ‰ç¹ççš„æƒé™é—®é¢˜äº† æ¥è‡ªrootçš„æ¸©é¦¨æç¤ºï¼šèƒ½åŠ›è¶Šå¤§è´£ä»»è¶Šå¤§! happy coding!","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Gitlab","slug":"Gitlab","permalink":"https://guoshunfa.com/tags/Gitlab/"},{"name":"GitlabRunner","slug":"GitlabRunner","permalink":"https://guoshunfa.com/tags/GitlabRunner/"}]},{"title":"Gitlab GitlabRunneræ³¨å†Œ","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/git/Gitlab-GitlabRunneræ³¨å†Œ","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Gitlab-GitlabRunneræ³¨å†Œ/","link":"","permalink":"https://guoshunfa.com/2022/07/Gitlab-GitlabRunner%E6%B3%A8%E5%86%8C/","excerpt":"","text":"Gitlab - GitlabRunneræ³¨å†Œ å®˜æ–¹åœ°å€ï¼šhttps://docs.gitlab.com/runner/register/ æ³¨å†Œè¿è¡Œå™¨æ˜¯å°†è¿è¡Œå™¨ä¸ä¸€ä¸ªæˆ–å¤šä¸ªGitLabå®ä¾‹ç»‘å®šçš„è¿‡ç¨‹ã€‚ æ‚¨å¯ä»¥é€šè¿‡é‡å¤registerå‘½ä»¤åœ¨åŒä¸€å°ä¸»æœºä¸Šæ³¨å†Œå¤šä¸ªè¿è¡Œå™¨ï¼Œæ¯ä¸ªè¿è¡Œå™¨é…ç½®ä¸åŒã€‚ è¦æ±‚åœ¨æ³¨å†Œè·‘æ­¥è€…ä¹‹å‰ï¼Œæ‚¨å¿…é¡»é¦–å…ˆï¼š åœ¨ä¸å®‰è£…GitLabçš„ä½ç½®åˆ†å¼€çš„æœåŠ¡å™¨ä¸Šå®‰è£…å®ƒ è·å–ä»¤ç‰Œï¼š å¯¹äºå…±äº«è¿è¡Œå™¨ï¼Œè¯·ç®¡ç†å‘˜è½¬åˆ°GitLabç®¡ç†åŒºåŸŸï¼Œç„¶åå•å‡»æ¦‚è¿°&gt;è¿è¡Œå™¨ å¯¹äºå°ç»„è·‘æ­¥è€…ï¼Œè¯·è½¬åˆ°è®¾ç½®&gt;CI&#x2F;CDå¹¶å±•å¼€è·‘æ­¥è€…éƒ¨åˆ† å¯¹äºç‰¹å®šäºé¡¹ç›®çš„è¿è¡Œå™¨ï¼Œè¯·è½¬åˆ°è®¾ç½®&gt;CI&#x2F;CDå¹¶å±•å¼€è¿è¡Œå™¨éƒ¨åˆ† åœ¨GitLab.comä¸Šæ³¨å†Œè·‘æ­¥è€…æ—¶ï¼Œgitlab-ci coordinator URLæ˜¯https://gitlab.comã€‚ Dockeræœ¬èŠ‚ä¸­çš„è¯´æ˜é€‚ç”¨äºæ‚¨åœ¨å®¹å™¨ä¸­å®‰è£…GitLab Runneråã€‚ ä»¥ä¸‹æ­¥éª¤æè¿°äº†å¯åŠ¨ä¸€ä¸ªçŸ­å¯¿å‘½çš„gitlab-runnerå®¹å™¨æ¥æ³¨å†Œæ‚¨åœ¨å®‰è£…æœŸé—´åˆ›å»ºçš„å®¹å™¨ã€‚å®Œæˆæ³¨å†Œåï¼Œç”Ÿæˆçš„é…ç½®å°†å†™å…¥æ‚¨é€‰æ‹©çš„é…ç½®å·ï¼ˆä¾‹å¦‚ï¼Œ/srv/gitlab-runner/configï¼‰ï¼Œå¹¶ç”±è¿è¡Œå™¨ä½¿ç”¨è¯¥é…ç½®å·åŠ è½½ã€‚ è¦ä½¿ç”¨Dockerå®¹å™¨æ³¨å†Œè¿è¡Œå™¨ï¼š æ ¹æ®æŒ‚è½½ç±»å‹è¿è¡Œregisterå‘½ä»¤ï¼š å¯¹äºæœ¬åœ°ç³»ç»Ÿå·è£…è½½ï¼š 1docker run --rm -it -v /srv/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner register å¦‚æœæ‚¨åœ¨å®‰è£…è¿‡ç¨‹ä¸­ä½¿ç”¨äº†/srv/gitlab-runner/configä»¥å¤–çš„é…ç½®å·ï¼Œè¯·åŠ¡å¿…ä½¿ç”¨æ­£ç¡®çš„å·æ›´æ–°å‘½ä»¤ã€‚ å¯¹äºDockerå·æŒ‚è½½ï¼š 1docker run --rm -it -v gitlab-runner-config:/etc/gitlab-runner gitlab/gitlab-runner:latest register è¾“å…¥æ‚¨çš„GitLabå®ä¾‹URLï¼ˆä¹Ÿç§°ä¸ºgitlab-ci coordinator URLï¼‰ã€‚ è¾“å…¥æ‚¨è·å¾—çš„ä»¤ç‰Œä»¥æ³¨å†Œè·‘æ­¥è€…ã€‚ è¾“å…¥è·‘æ­¥è€…çš„æè¿°ã€‚æ‚¨å¯ä»¥ç¨ååœ¨GitLabç”¨æˆ·ç•Œé¢ä¸­æ›´æ”¹æ­¤å€¼ã€‚ è¾“å…¥ä¸è¿è¡Œå™¨å…³è”çš„æ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš”ã€‚æ‚¨å¯ä»¥ç¨ååœ¨GitLabç”¨æˆ·ç•Œé¢ä¸­æ›´æ”¹æ­¤å€¼ã€‚ è¾“å…¥è·‘æ­¥è€…çš„ä»»ä½•å¯é€‰ç»´æŠ¤å¤‡æ³¨ã€‚ æä¾›è¿è¡Œå™¨æ‰§è¡Œå™¨ã€‚å¯¹äºå¤§å¤šæ•°ç”¨ä¾‹ï¼Œè¯·è¾“å…¥dockerã€‚ å¦‚æœæ‚¨è¾“å…¥dockerä½œä¸ºæ‰§è¡Œäººï¼Œç³»ç»Ÿä¼šè¦æ±‚æ‚¨å°†é»˜è®¤æ˜ åƒç”¨äºæœªåœ¨.gitlab-ci.ymlä¸­å®šä¹‰ä¸€ä¸ªçš„é¡¹ç›®ã€‚ Linuxè¦åœ¨Linuxä¸‹æ³¨å†Œè¿è¡Œå™¨ï¼š è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1sudo gitlab-runner register å¦‚æœæ‚¨åœ¨ä»£ç†åé¢ï¼Œè¯·æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œç„¶åè¿è¡Œæ³¨å†Œå‘½ä»¤ï¼š 1234export HTTP_PROXY=http://yourproxyurl:3128export HTTPS_PROXY=http://yourproxyurl:3128sudo -E gitlab-runner register è¾“å…¥æ‚¨çš„GitLabå®ä¾‹URLï¼ˆä¹Ÿç§°ä¸ºgitlab-ci coordinator URLï¼‰ã€‚ è¾“å…¥æ‚¨è·å¾—çš„ä»¤ç‰Œä»¥æ³¨å†Œè·‘æ­¥è€…ã€‚ è¾“å…¥è·‘æ­¥è€…çš„æè¿°ã€‚æ‚¨å¯ä»¥ç¨ååœ¨GitLabç”¨æˆ·ç•Œé¢ä¸­æ›´æ”¹æ­¤å€¼ã€‚ è¾“å…¥ä¸è¿è¡Œå™¨å…³è”çš„æ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš”ã€‚æ‚¨å¯ä»¥ç¨ååœ¨GitLabç”¨æˆ·ç•Œé¢ä¸­æ›´æ”¹æ­¤å€¼ã€‚ è¾“å…¥è·‘æ­¥è€…çš„ä»»ä½•å¯é€‰ç»´æŠ¤å¤‡æ³¨ã€‚ æä¾›è¿è¡Œå™¨æ‰§è¡Œå™¨ã€‚å¯¹äºå¤§å¤šæ•°ç”¨ä¾‹ï¼Œè¯·è¾“å…¥dockerã€‚ å¦‚æœæ‚¨è¾“å…¥dockerä½œä¸ºæ‰§è¡Œäººï¼Œç³»ç»Ÿä¼šè¦æ±‚æ‚¨å°†é»˜è®¤æ˜ åƒç”¨äºæœªåœ¨.gitlab-ci.ymlä¸­å®šä¹‰ä¸€ä¸ªçš„é¡¹ç›®ã€‚ macOSåœ¨macOSä¸‹æ³¨å†Œè¿è¡Œå™¨ä¹‹å‰ï¼Œè¯·å…ˆå®‰è£…Docker.appã€‚ è¦åœ¨macOSä¸‹æ³¨å†Œè¿è¡Œå™¨ï¼š è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1gitlab-runner register è¾“å…¥æ‚¨çš„GitLabå®ä¾‹URLï¼ˆä¹Ÿç§°ä¸ºgitlab-ci coordinator URLï¼‰ã€‚ è¾“å…¥æ‚¨è·å¾—çš„ä»¤ç‰Œä»¥æ³¨å†Œè·‘æ­¥è€…ã€‚ è¾“å…¥è·‘æ­¥è€…çš„æè¿°ã€‚æ‚¨å¯ä»¥ç¨ååœ¨GitLabç”¨æˆ·ç•Œé¢ä¸­æ›´æ”¹æ­¤å€¼ã€‚ è¾“å…¥ä¸è¿è¡Œå™¨å…³è”çš„æ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš”ã€‚æ‚¨å¯ä»¥ç¨ååœ¨GitLabç”¨æˆ·ç•Œé¢ä¸­æ›´æ”¹æ­¤å€¼ã€‚ è¾“å…¥è·‘æ­¥è€…çš„ä»»ä½•å¯é€‰ç»´æŠ¤å¤‡æ³¨ã€‚ æä¾›è¿è¡Œå™¨æ‰§è¡Œå™¨ã€‚å¯¹äºå¤§å¤šæ•°ç”¨ä¾‹ï¼Œè¯·è¾“å…¥dockerã€‚ å¦‚æœæ‚¨è¾“å…¥dockerä½œä¸ºæ‰§è¡Œäººï¼Œç³»ç»Ÿå°†è¦æ±‚æ‚¨å°†é»˜è®¤æ˜ åƒç”¨äºæœªå®šä¹‰.gitlab-ci.ymlçš„é¡¹ç›®ã€‚ çª—æˆ·è¦åœ¨Windowsä¸‹æ³¨å†Œè¿è¡Œå™¨ï¼š è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1.\\gitlab-runner.exe register è¾“å…¥æ‚¨çš„GitLabå®ä¾‹URLï¼ˆä¹Ÿç§°ä¸ºgitlab-ci coordinator URLï¼‰ã€‚ è¾“å…¥æ‚¨è·å¾—çš„ä»¤ç‰Œä»¥æ³¨å†Œè·‘æ­¥è€…ã€‚ è¾“å…¥è·‘æ­¥è€…çš„æè¿°ã€‚æ‚¨å¯ä»¥ç¨ååœ¨GitLabç”¨æˆ·ç•Œé¢ä¸­æ›´æ”¹æ­¤å€¼ã€‚ è¾“å…¥ä¸è¿è¡Œå™¨å…³è”çš„æ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš”ã€‚æ‚¨å¯ä»¥ç¨ååœ¨GitLabç”¨æˆ·ç•Œé¢ä¸­æ›´æ”¹æ­¤å€¼ã€‚ è¾“å…¥è·‘æ­¥è€…çš„ä»»ä½•å¯é€‰ç»´æŠ¤å¤‡æ³¨ã€‚ æä¾›è¿è¡Œå™¨æ‰§è¡Œå™¨ã€‚å¯¹äºå¤§å¤šæ•°ç”¨ä¾‹ï¼Œè¯·è¾“å…¥dockerã€‚ å¦‚æœæ‚¨è¾“å…¥dockerä½œä¸ºæ‰§è¡Œäººï¼Œç³»ç»Ÿä¼šè¦æ±‚æ‚¨å°†é»˜è®¤æ˜ åƒç”¨äºæœªåœ¨.gitlab-ci.ymlä¸­å®šä¹‰ä¸€ä¸ªçš„é¡¹ç›®ã€‚ FreeBSDè¦åœ¨FreeBSDä¸‹æ³¨å†Œè·‘æ­¥è€…ï¼š è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1sudo -u gitlab-runner -H /usr/local/bin/gitlab-runner register è¾“å…¥æ‚¨çš„GitLabå®ä¾‹URLï¼ˆä¹Ÿç§°ä¸ºgitlab-ci coordinator URLï¼‰ã€‚ è¾“å…¥æ‚¨è·å¾—çš„ä»¤ç‰Œä»¥æ³¨å†Œè·‘æ­¥è€…ã€‚ è¾“å…¥è·‘æ­¥è€…çš„æè¿°ã€‚æ‚¨å¯ä»¥ç¨ååœ¨GitLabç”¨æˆ·ç•Œé¢ä¸­æ›´æ”¹æ­¤å€¼ã€‚ è¾“å…¥ä¸è¿è¡Œå™¨å…³è”çš„æ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš”ã€‚æ‚¨å¯ä»¥ç¨ååœ¨GitLabç”¨æˆ·ç•Œé¢ä¸­æ›´æ”¹æ­¤å€¼ã€‚ è¾“å…¥è·‘æ­¥è€…çš„ä»»ä½•å¯é€‰ç»´æŠ¤å¤‡æ³¨ã€‚ æä¾›è¿è¡Œå™¨æ‰§è¡Œå™¨ã€‚å¯¹äºå¤§å¤šæ•°ç”¨ä¾‹ï¼Œè¯·è¾“å…¥dockerã€‚ å¦‚æœæ‚¨è¾“å…¥dockerä½œä¸ºæ‰§è¡Œäººï¼Œç³»ç»Ÿä¼šè¦æ±‚æ‚¨å°†é»˜è®¤æ˜ åƒç”¨äºæœªåœ¨.gitlab-ci.ymlä¸­å®šä¹‰ä¸€ä¸ªçš„é¡¹ç›®ã€‚ ä¸€è¡Œæ³¨å†Œå‘½ä»¤å¦‚æœæ‚¨æƒ³ä½¿ç”¨éäº¤äº’å¼æ¨¡å¼æ³¨å†Œè¿è¡Œå™¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨registerå­å‘½ä»¤æˆ–ä½¿ç”¨å…¶ç­‰æ•ˆçš„ç¯å¢ƒå˜é‡ã€‚ è¦æ˜¾ç¤ºæ‰€æœ‰registerå­å‘½ä»¤çš„åˆ—è¡¨ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1gitlab-runner register -h è¦ä½¿ç”¨æœ€å¸¸è§çš„é€‰é¡¹æ³¨å†Œè·‘æ­¥è€…ï¼Œæ‚¨å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š 123456789101112sudo gitlab-runner register \\ --non-interactive \\ --url &quot;https://gitlab.com/&quot; \\ --registration-token &quot;PROJECT_REGISTRATION_TOKEN&quot; \\ --executor &quot;docker&quot; \\ --docker-image alpine:latest \\ --description &quot;docker-runner&quot; \\ --maintenance-note &quot;Free-form maintainer notes about this runner&quot; \\ --tag-list &quot;docker,aws&quot; \\ --run-untagged=&quot;true&quot; \\ --locked=&quot;false&quot; \\ --access-level=&quot;not_protected&quot; å¦‚æœæ‚¨åœ¨Dockerå®¹å™¨ä¸­è¿è¡Œè¿è¡Œå™¨ï¼Œåˆ™registerå‘½ä»¤çš„ç»“æ„ç±»ä¼¼äºä»¥ä¸‹å†…å®¹ï¼š 123456789101112docker run --rm -v /srv/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner register \\ --non-interactive \\ --executor &quot;docker&quot; \\ --docker-image alpine:latest \\ --url &quot;https://gitlab.com/&quot; \\ --registration-token &quot;PROJECT_REGISTRATION_TOKEN&quot; \\ --description &quot;docker-runner&quot; \\ --maintenance-note &quot;Free-form maintainer notes about this runner&quot; \\ --tag-list &quot;docker,aws&quot; \\ --run-untagged=&quot;true&quot; \\ --locked=&quot;false&quot; \\ --access-level=&quot;not_protected&quot; --access-levelå‚æ•°å·²åœ¨GitLab Runner 12.0ä¸­æ·»åŠ ã€‚å®ƒä½¿ç”¨GitLab 11.11ä¸­å¼•å…¥çš„æ³¨å†ŒAPIå‚æ•°ã€‚åœ¨æ³¨å†ŒæœŸé—´ä½¿ç”¨æ­¤å‚æ•°åˆ›å»ºå—ä¿æŠ¤çš„è¿è¡Œå™¨ã€‚å¯¹äºå—ä¿æŠ¤çš„è¿è¡Œå™¨ï¼Œè¯·ä½¿ç”¨--access-level=&quot;ref_protected&quot;å‚æ•°ã€‚å¯¹äºä¸å—ä¿æŠ¤çš„è¿è¡Œå™¨ï¼Œè¯·ä½¿ç”¨--access-level=&quot;not_protected&quot;æˆ–è€…ä¸å®šä¹‰è¯¥å€¼ã€‚æ­¤å€¼ç¨åå¯ä»¥åœ¨é¡¹ç›®çš„è®¾ç½®&gt;CI&#x2F;CDèœå•ä¸­æ‰“å¼€æˆ–å…³é—­ã€‚ --maintenance-noteå‚æ•°å·²åœ¨GitLab Runner 14.8ä¸­æ·»åŠ ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥æ·»åŠ ä¸è¿è¡Œå™¨ç»´æŠ¤ç›¸å…³çš„ä¿¡æ¯ã€‚å…è®¸çš„æœ€å¤§é•¿åº¦ä¸º255ä¸ªå­—ç¬¦ã€‚ Check registration tokené”™è¯¯å½“GitLabå®ä¾‹æ— æ³•è¯†åˆ«è¾“å…¥çš„æ³¨å†Œä»¤ç‰Œæ—¶ï¼Œå°†æ˜¾ç¤ºcheck registration tokenæ³¨å†Œä»¤ç‰Œé”™è¯¯æ¶ˆæ¯ã€‚å½“å®ä¾‹ç»„æˆ–é¡¹ç›®æ³¨å†Œä»¤ç‰Œåœ¨GitLabä¸­æ›´æ”¹æˆ–ç”¨æˆ·æœªæ­£ç¡®è¾“å…¥æ³¨å†Œä»¤ç‰Œæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ­¤é—®é¢˜ã€‚ å‘ç”Ÿæ­¤é”™è¯¯æ—¶ï¼Œç¬¬ä¸€æ­¥æ˜¯è¦æ±‚GitLabç®¡ç†å‘˜éªŒè¯æ³¨å†Œä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆã€‚ [[runners]]é…ç½®æ¨¡æ¿æ–‡ä»¶åœ¨GitLab Runner 12.2ä¸­ä»‹ç»ã€‚ æŸäº›è¿è¡Œå™¨é…ç½®è®¾ç½®æ— æ³•ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å‘½ä»¤è¡Œé€‰é¡¹è¿›è¡Œè®¾ç½®ã€‚ ä¾‹å¦‚ï¼š ç¯å¢ƒå˜é‡ä¸æ”¯æŒåˆ‡ç‰‡ã€‚ å‘½ä»¤è¡Œé€‰é¡¹æ”¯æŒæ•…æ„ä¸é€‚ç”¨äºæ•´ä¸ªKubernetesæ‰§è¡Œå™¨å·æ ‘çš„è®¾ç½®ã€‚ å¯¹äºç”±ä»»ä½•ç±»å‹çš„è‡ªåŠ¨åŒ–å¤„ç†çš„ç¯å¢ƒæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚GitLab Runnerå®˜æ–¹Helmå›¾è¡¨ã€‚åœ¨æ­¤ç±»æƒ…å†µä¸‹ï¼Œå”¯ä¸€çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨è¿è¡Œå™¨æ³¨å†Œåæ‰‹åŠ¨æ›´æ–°config.tomlæ–‡ä»¶ã€‚è¿™ä¸å¤ªç†æƒ³ï¼Œå®¹æ˜“å‡ºé”™ï¼Œä¹Ÿä¸å¯é ã€‚ç‰¹åˆ«æ˜¯å½“ä¸ºåŒä¸€GitLab Runnerå®‰è£…å®Œæˆå¤šä¸ªæ³¨å†Œæ—¶ã€‚ è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡ä½¿ç”¨é…ç½®æ¨¡æ¿æ–‡ä»¶æ¥è§£å†³ã€‚ è¦ä½¿ç”¨é…ç½®æ–‡ä»¶æ¨¡æ¿æ–‡ä»¶ï¼Œè¯·ä¼ é€’æ–‡ä»¶çš„è·¯å¾„ä»¥registerï¼š --template-configå‘½ä»¤è¡Œé€‰é¡¹ã€‚ TEMPLATE_CONFIG_FILEç¯å¢ƒå˜é‡ã€‚ é…ç½®æ¨¡æ¿æ–‡ä»¶æ”¯æŒï¼š åªæœ‰å•ä¸ª[[runners]]éƒ¨åˆ†ã€‚ æ²¡æœ‰å…¨å±€é€‰é¡¹ã€‚ å½“ä½¿ç”¨--template-configæˆ–TEMPLATE_CONFIG_FILEæ—¶ï¼Œ[[runners]]æ¡ç›®çš„é…ç½®å°†åˆå¹¶åˆ°å¸¸è§„config.tomlæ–‡ä»¶ä¸­æ–°åˆ›å»ºçš„[[runners]]æ¡ç›®çš„é…ç½®ä¸­ã€‚ åˆå¹¶ä»…é€‚ç”¨äºç©ºçš„é€‰é¡¹ã€‚é‚£å°±æ˜¯ï¼š ç©ºçš„ç»³å­ã€‚ æ— æ•ˆæˆ–&#x2F;ä¸å­˜åœ¨æ¡ç›®ã€‚ é›¶ã€‚ æœ‰äº†è¿™ä¸ªï¼š registerå‘½ä»¤è°ƒç”¨æœŸé—´ï¼Œæ‰€æœ‰é…å¤‡å‘½ä»¤è¡Œé€‰é¡¹å’Œ&#x2F;æˆ–ç¯å¢ƒå˜é‡çš„é…ç½®éƒ½ä¼˜å…ˆã€‚ è¯¥æ¨¡æ¿å¡«è¡¥äº†ç©ºç™½ï¼Œå¹¶æ·»åŠ äº†å…¶ä»–è®¾ç½®ã€‚ ä¾‹å­æˆ‘ä»¬å°†åŸºäºKubernetesæ‰§è¡Œå™¨çš„è¿è¡Œå™¨æ³¨å†Œåˆ°ä¸€äº›æµ‹è¯•é¡¹ç›®ï¼Œå¹¶æŸ¥çœ‹config.tomlæ–‡ä»¶çš„æ ·å­ï¼š 12345678910111213141516$ sudo gitlab-runner register \\ --config /tmp/test-config.toml \\ --non-interactive \\ --url https://gitlab.com \\ --registration-token __REDACTED__ \\ --name test-runner \\ --tag-list kubernetes,test \\ --locked \\ --paused \\ --executor kubernetes \\ --kubernetes-host http://localhost:9876/Runtime platform arch=amd64 os=linux pid=1684 revision=88310882 version=11.10.0~beta.1251.g88310882Registering runner... succeeded runner=__REDACTED__Runner registered successfully. Feel free to start it, but if it&#x27;s running already the config should be automatically reloaded! ä¸Šé¢çš„å‘½ä»¤åˆ›å»ºä»¥ä¸‹config.tomlæ–‡ä»¶ï¼š 123456789101112131415161718192021222324concurrent = 1check_interval = 0[session_server] session_timeout = 1800[[runners]] name = &quot;test-runner&quot; url = &quot;https://gitlab.com&quot; token = &quot;__REDACTED__&quot; executor = &quot;kubernetes&quot; [runners.cache] [runners.cache.s3] [runners.cache.gcs] [runners.kubernetes] host = &quot;http://localhost:9876/&quot; bearer_token_overwrite_allowed = false image = &quot;&quot; namespace = &quot;&quot; namespace_overwrite_allowed = &quot;&quot; privileged = false service_account_overwrite_allowed = &quot;&quot; pod_annotations_overwrite_allowed = &quot;&quot; [runners.kubernetes.volumes] æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»æä¾›çš„å‘½ä»¤è¡Œé€‰é¡¹åˆ›å»ºçš„åŸºæœ¬é…ç½®ï¼š è¿è¡Œå™¨å‡­æ®ï¼ˆURLå’Œä»¤ç‰Œï¼‰ã€‚ æŒ‡å®šäº†é—å˜±æ‰§è¡Œäººã€‚ é»˜è®¤çš„ç©ºéƒ¨åˆ†runners.kubernetesï¼Œåœ¨æ³¨å†ŒæœŸé—´åªæä¾›äº†ä¸€ä¸ªé€‰é¡¹ã€‚ é€šå¸¸ï¼Œäººä»¬å¿…é¡»å†è®¾ç½®å‡ ä¸ªé€‰é¡¹æ‰èƒ½ä½¿Kubernetesæ‰§è¡Œå™¨å¯ç”¨ï¼Œä½†ä¸Šè¿°å†…å®¹å°±è¶³ä»¥è®©æˆ‘ä»¬çš„ä¾‹å­è€Œè¨€ã€‚ ç°åœ¨å‡è®¾æˆ‘ä»¬å¿…é¡»ä¸ºæˆ‘ä»¬çš„Kubernetesæ‰§è¡Œå™¨é…ç½®ä¸€ä¸ªemptyDirå·ã€‚åœ¨æ³¨å†Œç¯å¢ƒå˜é‡æˆ–å‘½ä»¤è¡Œé€‰é¡¹æ—¶ï¼Œæ— æ³•æ·»åŠ æ­¤å†…å®¹ã€‚æˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨å°†è¿™æ ·çš„ä¸œè¥¿é™„åŠ åˆ°æ–‡ä»¶çš„æœ«å°¾ï¼š 1234[[runners.kubernetes.volumes.empty_dir]] name = &quot;empty_dir&quot; mount_path = &quot;/path/to/empty_dir&quot; medium = &quot;Memory&quot; ç”±äºTOMLä¸éœ€è¦é€‚å½“çš„ç¼©è¿›ï¼ˆå®ƒä¾èµ–äºæ¡ç›®æ’åºï¼‰ï¼Œæˆ‘ä»¬åªéœ€å°†æ‰€éœ€çš„æ›´æ”¹é™„åŠ åˆ°æ–‡ä»¶æœ«å°¾å³å¯ã€‚ç„¶è€Œï¼Œå½“æ›´å¤š[[runners]]éƒ¨åˆ†åœ¨ oneconfigconfig.tomlæ–‡ä»¶ä¸­æ³¨å†Œæ—¶ï¼Œè¿™ä¼šå˜å¾—æ£˜æ‰‹ã€‚å‡è®¾æ–°çš„æ€»æ˜¯åœ¨æœ€åæ˜¯æœ‰é£é™©çš„ã€‚ ä½¿ç”¨GitLab Runner 12.2ï¼Œä½¿ç”¨--template-configæ ‡å¿—ä¼šå®¹æ˜“å¾—å¤šã€‚ 123456789$ cat &gt; /tmp/test-config.template.toml &lt;&lt; EOF[[runners]] [runners.kubernetes] [runners.kubernetes.volumes] [[runners.kubernetes.volumes.empty_dir]] name = &quot;empty_dir&quot; mount_path = &quot;/path/to/empty_dir&quot; medium = &quot;Memory&quot;EOF æœ‰äº†è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å°è¯•å†æ¬¡æ³¨å†Œè¿è¡Œå™¨ï¼Œä½†è¿™æ¬¡æ·»åŠ äº†--template-config /tmp/test-config.template.tomlé€‰é¡¹ã€‚é™¤äº†æ­¤æ›´æ”¹å¤–ï¼Œæ³¨å†Œå‘½ä»¤çš„å…¶ä½™éƒ¨åˆ†å®Œå…¨ç›¸åŒï¼š 123456789101112131415161718$ sudo gitlab-runner register \\ --config /tmp/test-config.toml \\ --template-config /tmp/test-config.template.toml \\ --non-interactive \\ --url https://gitlab.com \\ --registration-token __REDACTED__ \\ --name test-runner \\ --tag-list kubernetes,test \\ --locked \\ --paused \\ --executor kubernetes \\ --kubernetes-host http://localhost:9876/Runtime platform arch=amd64 os=linux pid=8798 revision=88310882 version=11.10.0~beta.1251.g88310882Registering runner... succeeded runner=__REDACTED__Merging configuration from template fileRunner registered successfully. Feel free to start it, but if it&#x27;s running already the config should be automatically reloaded! As we can see, there is a little change in the output of the registration command. We can see a Merging configuration from template file line. ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨æ¨¡æ¿åé…ç½®æ–‡ä»¶æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼š 1234567891011121314151617181920212223242526272829concurrent = 1check_interval = 0[session_server] session_timeout = 1800[[runners]] name = &quot;test-runner&quot; url = &quot;https://gitlab.com&quot; token = &quot;__REDACTED__&quot; executor = &quot;kubernetes&quot; [runners.cache] [runners.cache.s3] [runners.cache.gcs] [runners.kubernetes] host = &quot;http://localhost:9876/&quot; bearer_token_overwrite_allowed = false image = &quot;&quot; namespace = &quot;&quot; namespace_overwrite_allowed = &quot;&quot; privileged = false service_account_overwrite_allowed = &quot;&quot; pod_annotations_overwrite_allowed = &quot;&quot; [runners.kubernetes.volumes] [[runners.kubernetes.volumes.empty_dir]] name = &quot;empty_dir&quot; mount_path = &quot;/path/to/empty_dir&quot; medium = &quot;Memory&quot; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé…ç½®å‡ ä¹å’Œä»¥å‰ä¸€æ ·ã€‚å”¯ä¸€çš„å˜åŒ–æ˜¯ï¼Œå®ƒç°åœ¨æœ‰[[runners.kubernetes.volumes.empty_dir]]æ¡ç›®ï¼Œå…¶é€‰é¡¹ä½äºæ–‡ä»¶æœ«å°¾ã€‚å®ƒè¢«æ·»åŠ åˆ°æ³¨å†Œåˆ›å»ºçš„[[runners]]æ¡ç›®ä¸­ã€‚ç”±äºæ•´ä¸ªæ–‡ä»¶æ˜¯ç”¨ç›¸åŒçš„æœºåˆ¶ä¿å­˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿæœ‰é€‚å½“çš„ç¼©è¿›ã€‚ å¦‚æœé…ç½®æ¨¡æ¿åŒ…å«è®¾ç½®ï¼Œå¹¶ä¸”å°†ç›¸åŒçš„è®¾ç½®ä¼ é€’ç»™registerå‘½ä»¤ï¼Œåˆ™ä¼ é€’ç»™registerå‘½ä»¤çš„è®¾ç½®ä¼˜å…ˆäºé…ç½®æ¨¡æ¿ä¸­æŒ‡å®šçš„è®¾ç½®ã€‚ 12345678910111213141516171819202122$ cat &gt; /tmp/test-config.template.toml &lt;&lt; EOF[[runners]] executor = &quot;docker&quot;EOF$ sudo gitlab-runner register \\ --config /tmp/test-config.toml \\ --template-config /tmp/test-config.template.toml \\ --non-interactive \\ --url https://gitlab.com \\ --registration-token __REDACTED__ \\ --name test-runner \\ --tag-list shell,test \\ --locked \\ --paused \\ --executor shellRuntime platform arch=amd64 os=linux pid=12359 revision=88310882 version=11.10.0~beta.1251.g88310882Registering runner... succeeded runner=__REDACTED__Merging configuration from template fileRunner registered successfully. Feel free to start it, but if it&#x27;s running already the config should be automatically reloaded! æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œæ³¨å†Œå‘½ä»¤æŒ‡å®šäº†shellæ‰§è¡Œå™¨ï¼Œè€Œæ¨¡æ¿åŒ…å«dockerä¸€ä¸ªã€‚è®©æˆ‘ä»¬çœ‹çœ‹æœ€ç»ˆé…ç½®å†…å®¹æ˜¯ä»€ä¹ˆï¼š 1234567891011121314concurrent = 1check_interval = 0[session_server] session_timeout = 1800[[runners]] name = &quot;test-runner&quot; url = &quot;https://gitlab.com&quot; token = &quot;__REDACTED__&quot; executor = &quot;shell&quot; [runners.cache] [runners.cache.s3] [runners.cache.gcs] å¸¦æœ‰registerå‘½ä»¤é€‰é¡¹çš„é…ç½®é›†ä¼˜å…ˆï¼Œå¹¶è¢«é€‰æ‹©æ”¾ç½®åœ¨æœ€ç»ˆé…ç½®ä¸­ã€‚","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"GitlabRunner","slug":"GitlabRunner","permalink":"https://guoshunfa.com/tags/GitlabRunner/"},{"name":"gitlab","slug":"gitlab","permalink":"https://guoshunfa.com/tags/gitlab/"}]},{"title":"Gitlab æ›´æ”¹é»˜è®¤ç«¯å£","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/git/Gitlabæ›´æ”¹é»˜è®¤ç«¯å£","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Gitlabæ›´æ”¹é»˜è®¤ç«¯å£/","link":"","permalink":"https://guoshunfa.com/2022/07/Gitlab%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3/","excerpt":"","text":"è½¬è½½è‡ªï¼šhttps://www.cnblogs.com/hero123/p/10559116.html è‹¥linuxæœåŠ¡å™¨çš„80å’Œ8080ç«¯å£éƒ½å·²ç»è¢«ä½¿ç”¨ï¼Œåˆ™éœ€ä¿®æ”¹gitlabç›‘å¬çš„ç«¯å£ ä¿®æ”¹è·¯å¾„æ–‡ä»¶ï¼švim &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb 1ã€ä¿®æ”¹external_url â€˜http://ip:ç«¯å£å·â€˜ ï¼ˆå°†å‰é¢çš„#æ³¨é‡Šç¬¦å·å»æ‰ï¼‰,æˆ‘æ”¹æˆäº†8099 2ã€æ‰¾åˆ°Advanced settings ä¸‹çš„8080ç«¯å£ å°†ç«¯å£æ”¹æˆè‡ªå·±å¤‡ç”¨ç«¯å£å·ï¼ˆä¸èƒ½å’Œä¸Šé¢urlç«¯å£å·ç›¸åŒï¼Œä¼šå†²çªå ç”¨ï¼ï¼‰ï¼Œæˆ‘æ”¹çš„28080 3ã€è¿è¡Œä¸‹é¢å‘½ä»¤ 123456# åœæ­¢æœåŠ¡sudo gitlab-ctl stop# å¯åŠ¨æœåŠ¡sudo gitlab-ctl reconfigure# å¯åŠ¨æ‰€æœ‰gitlabç»„ä»¶sudo gitlab-ctl start å¯åŠ¨éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œä¸Šè¾¹å¯åŠ¨å®ŒåŸºæœ¬å°±å¯ä»¥äº†ã€‚ æœŸé—´å¯ä»¥æŸ¥çœ‹ç«¯å£è¿›ç¨‹ï¼š 4ã€è‹¥è®¿é—®ä¸äº†gitlabï¼Œå°è¯•å…³é—­æˆ–å¼€æ”¾é˜²ç«å¢™","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Gitlab","slug":"Gitlab","permalink":"https://guoshunfa.com/tags/Gitlab/"}]},{"title":"Gitlab é»˜è®¤å¯†ç æŸ¥çœ‹å’Œé‡åˆ¶å¯†ç ","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/git/Gitlabé»˜è®¤å¯†ç æŸ¥çœ‹å’Œé‡åˆ¶å¯†ç ","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Gitlabé»˜è®¤å¯†ç æŸ¥çœ‹å’Œé‡åˆ¶å¯†ç /","link":"","permalink":"https://guoshunfa.com/2022/07/Gitlab%E9%BB%98%E8%AE%A4%E5%AF%86%E7%A0%81%E6%9F%A5%E7%9C%8B%E5%92%8C%E9%87%8D%E5%88%B6%E5%AF%86%E7%A0%81/","excerpt":"","text":"è½¬å‘è‡ªï¼šhttps://blog.csdn.net/timonium/article/details/119451755 1. GitLabé»˜è®¤å¯†ç  åˆæ¬¡å®‰è£…Gitlabæ—¶ï¼Œå¯†ç æ”¾åœ¨äº†ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­äº† 1/etc/gitlab/initial_root_password è¿™ä¸ªæ–‡ä»¶å°†åœ¨é¦–æ¬¡æ‰§è¡Œreconfigureå24å°æ—¶è‡ªåŠ¨åˆ é™¤ 123456789101112131415161718192021222324Notes:Default admin account has been configured with following details:Username: rootPassword: You didn&#x27;t opt-in to print initial root password to STDOUT.Password stored to /etc/gitlab/initial_root_password. This file will be cleaned up in first reconfigure run after 24 hours.NOTE: Because these credentials might be present in your log files in plain text, it is highly recommended to reset the password following https://docs.gitlab.com/ee/security/reset_user_password.html#reset-your-root-password.gitlab Reconfigured![root@c7-192 src]# cat /etc/gitlab/initial_root_password# WARNING: This value is valid only in the following conditions# 1. If provided manually (either via `GITLAB_ROOT_PASSWORD` environment variable or via `gitlab_rails[&#x27;initial_root_password&#x27;]` setting in `gitlab.rb`, it was provided before database was seeded for the first time (usually, the first reconfigure run).# 2. Password hasn&#x27;t been changed manually, either via UI or via command line.## If the password shown here doesn&#x27;t work, you must reset the admin password following https://docs.gitlab.com/ee/security/reset_user_password.html#reset-your-root-password.Password: thAXLJhVoo6V9sRvRH5HrLrD5rg88C7gccEGZDT4Lq0=# NOTE: This file will be automatically deleted in the first reconfigure run after 24 hours. 2. ç™»å½•å¹¶ä¿®æ”¹å¯†ç  æ‹¿åˆ°è¿™ä¸ªå¯†ç åéœ€è¦å°½å¿«ç™»å½•webç•Œé¢è¿›è¡Œå¯†ç ä¿®æ”¹ è¿›å»ä¿®æ”¹å¯†ç  é‡ç½®å¯†ç ","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Gitlab","slug":"Gitlab","permalink":"https://guoshunfa.com/tags/Gitlab/"}]},{"title":"Docker ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/docker/Docker-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Docker-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Docker-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"docker åº“ | docker å®˜æ–¹æ–‡æ¡£ 1. ç®€ä»‹Dockeræ˜¯ä¸€ä¸ªå¼€æºçš„å¼•æ“ï¼Œå¯ä»¥è½»æ¾çš„ä¸ºä»»ä½•åº”ç”¨åˆ›å»ºä¸€ä¸ªè½»é‡çº§çš„ã€å¯ç§»æ¤çš„ã€è‡ªç»™è‡ªè¶³çš„å®¹å™¨ã€‚å¼€å‘è€…åœ¨ç¬”è®°æœ¬ä¸Šç¼–è¯‘æµ‹è¯•é€šè¿‡çš„å®¹å™¨å¯ä»¥æ‰¹é‡åœ°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²ï¼ŒåŒ…æ‹¬VMsï¼ˆè™šæ‹Ÿæœºï¼‰ã€bare metalã€OpenStack é›†ç¾¤å’Œå…¶ä»–çš„åŸºç¡€åº”ç”¨å¹³å°ã€‚ Dockeræ˜¯ä¸€ä¸ªå¼€æºçš„å¼•æ“ï¼Œå¯ä»¥è½»æ¾çš„ä¸ºä»»ä½•åº”ç”¨åˆ›å»ºä¸€ä¸ªè½»é‡çº§çš„ã€å¯ç§»æ¤çš„ã€è‡ªç»™è‡ªè¶³çš„å®¹å™¨ã€‚å¼€å‘è€…åœ¨ç¬”è®°æœ¬ä¸Šç¼–è¯‘æµ‹è¯•é€šè¿‡çš„å®¹å™¨å¯ä»¥æ‰¹é‡åœ°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²ï¼ŒåŒ…æ‹¬VMsï¼ˆè™šæ‹Ÿæœºï¼‰ã€ bare metalã€OpenStack é›†ç¾¤å’Œå…¶ä»–çš„åŸºç¡€åº”ç”¨å¹³å°ã€‚ 2. é€‚ç”¨åœºæ™¯Dockeré€šå¸¸ç”¨äºå¦‚ä¸‹åœºæ™¯ï¼š webåº”ç”¨çš„è‡ªåŠ¨åŒ–æ‰“åŒ…å’Œå‘å¸ƒï¼› è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŒç»­é›†æˆã€å‘å¸ƒï¼› åœ¨æœåŠ¡å‹ç¯å¢ƒä¸­éƒ¨ç½²å’Œè°ƒæ•´æ•°æ®åº“æˆ–å…¶ä»–çš„åå°åº”ç”¨ï¼› ä»å¤´ç¼–è¯‘æˆ–è€…æ‰©å±•ç°æœ‰çš„OpenShiftæˆ–Cloud Foundryå¹³å°æ¥æ­å»ºè‡ªå·±çš„PaaSç¯å¢ƒã€‚ 3. å®‰è£…3.1. ä½¿ç”¨yumå®‰è£…123456yum update # æ›´æ–°yumyum install docker # å®‰è£…dockersystemctl start docker.service # å¯åŠ¨dockerdocker version # æŸ¥çœ‹dockerç‰ˆæœ¬ï¼ŒéªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸsudo systemctl enable docker # è®¾ç½®å¼€æœºè‡ªå¯åŠ¨# ç»“æŸ 3.2. ä½¿ç”¨brewå®‰è£…1brew install --cask --appdir=/Applications docker macçš„å®‰è£…ï¼Œæ‰§è¡Œå®Œå‘½ä»¤åéœ€è¦æ‰“å¼€dockerçš„Appï¼Œæˆæƒåæ‰èƒ½ä½¿ç”¨ã€‚","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://guoshunfa.com/tags/Docker/"}]},{"title":"Docker å‘½ä»¤è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/docker/Docker-å‘½ä»¤è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Docker-å‘½ä»¤è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Docker-%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/","excerpt":"","text":"docker å‘½ä»¤ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273# æŸ¥çœ‹dockerç‰ˆæœ¬ã€‚docker -vdocker version# æŸ¥çœ‹dockerç³»ç»Ÿä¿¡æ¯docker info# æœç´¢é•œåƒdocker search é•œåƒ# è·å–é•œåƒdocker pull é•œåƒä»“åº“åœ°å€# ä¸Šä¼ é•œåƒdocker push é•œåƒä»“åº“åœ°å€# æŸ¥çœ‹é•œåƒçš„åˆ›å»ºå†å²docker history é•œåƒä»“åº“åœ°å€# è¿è¡Œå®¹å™¨# -name å®šä¹‰ä¸€ä¸ªå®¹å™¨çš„åå­—# -d æ ‡è¯†æ˜¯è®© docker å®¹å™¨çš„åå°è¿è¡Œã€‚# -p æ ‡è¯†é€šçŸ¥ docker å°†å®¹å™¨å†…éƒ¨ä½¿ç”¨çš„ç½‘ç»œç«¯å£æ˜ å°„åˆ°æˆ‘ä»¬ä½¿ç”¨çš„ä¸»æœºä¸Šã€‚docker run --name nginx -p 8080:80 nginx# æŸ¥è¯¢å®¹å™¨å†…éƒ¨ipåœ°å€docker inspect å®¹å™¨ID/å®¹å™¨å | grep IPAddress# åˆ—å‡ºå®¹å™¨ -- ä»…è¿è¡Œçš„å®¹å™¨docker ps# åˆ—å‡ºå®¹å™¨ -- åŒ…å«åœæ­¢çš„å®¹å™¨docker ps -a# æŸ¥çœ‹å½“å‰æœ¬åœ°æ‰€æœ‰çš„é•œåƒdocker images# åœæ­¢å®¹å™¨docker stop å®¹å™¨ID/å®¹å™¨å# å¼€å§‹å®¹å™¨docker start å®¹å™¨ID/å®¹å™¨å# é‡å¯å®¹å™¨docker restart å®¹å™¨ID/å®¹å™¨å# æ€æ‰ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨docker kill -s KILL å®¹å™¨ID/å®¹å™¨å# åˆ é™¤å®¹å™¨docker rm å®¹å™¨ID/å®¹å™¨å# åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨docker rm -f xx,xx2# åˆ é™¤é•œåƒã€é¡ºåºï¼šåœæ­¢é•œåƒé‡Œçš„å®¹å™¨ï¼Œå†åˆ é™¤å®¹å™¨ï¼Œæœ€åå†åˆ é™¤é•œåƒã€‘docker rmi é•œåƒid/é•œåƒå# åˆ—å‡ºæ‰€æœ‰çš„å®¹å™¨ IDdocker ps -aq# åœæ­¢æ‰€æœ‰çš„å®¹å™¨docker stop $(docker ps -aq)# åˆ é™¤æ‰€æœ‰çš„å®¹å™¨docker rm $(docker ps -aq)# åˆ é™¤æ‰€æœ‰çš„é•œåƒdocker rmi $(docker images -q)# åœæ­¢å¹¶åˆ é™¤æŒ‡å®šå®¹å™¨docker ps -a | grep å®¹å™¨ID/å®¹å™¨å | awk &#x27;&#123;print $1&#125;&#x27; \\ | xargs -i docker stop &#123;&#125; | xargs -i docker rm &#123;&#125;# åˆ é™¤é•œåƒdocker images | grep -E &#x27;é•œåƒid/é•œåƒå&#x27; | awk &#x27;&#123;print $3&#125;&#x27; \\ | uniq | xargs -I &#123;&#125; docker rmi --force &#123;&#125;# ex: åˆ é™¤é•œåƒ `nginx:latest`docker images | grep -E &#x27;nginx&#x27; | grep &#x27;latest&#x27; | awk &#x27;&#123;print $3&#125;&#x27; \\ | uniq | xargs -I &#123;&#125; docker rmi --force &#123;&#125;# åˆ é™¤æ‰€æœ‰åœæ­¢çš„å®¹å™¨docker container prune# åˆ é™¤æ‰€æœ‰éƒ¨ä½¿ç”¨çš„é•œåƒdocker image prune --force --alldocker image prune --f --a# é™åˆ¶å®¹å™¨å†…å­˜ -mdocker run --name nginx -d -p 8080:80 -m 100m nginx# æŸ¥çœ‹å®¹å™¨è¿è¡Œå†…å­˜ä¿¡æ¯docker stats nginx# è¿›å…¥å®¹å™¨docker exec -it å®¹å™¨ID/å®¹å™¨å /bin/bash# ä»¥äº¤äº’æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œåœ¨å®¹å™¨å†…æ‰§è¡Œ/bin/bashå‘½ä»¤docker run -i -t å®¹å™¨ID/å®¹å™¨å /bin/bash# æŸ¥çœ‹å®¹å™¨æ—¥å¿— -t: æ˜¾ç¤ºæ—¶é—´æˆ³docker logs -f -t å®¹å™¨ID/å®¹å™¨ådocker logs -fn10 -t å®¹å™¨ID/å®¹å™¨å# æ„å»ºé•œåƒ# ç”¨æ³•ï¼šdocker build -t é•œåƒåç§° .docker build -t docker_demo . 2. docker å¯åŠ¨jaråŒ…2.1. ç¼–å†™dockerFileæ–‡ä»¶1234567891011121314151617181920212223# å¼•ç”¨å“ªä¸ªé•œåƒï¼Œæ²¡æœ‰é•œåƒåˆ™pullFROM centos:7# ä¸ºDockerfileä¸­æ‰€æœ‰RUNã€CMDã€ENTRYPOINTã€COPYå’ŒADDæŒ‡ä»¤è®¾å®šå·¥ä½œç›®å½•WORKDIR /usr# æ‰§è¡Œå‘½ä»¤(è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªç›®å½•)RUN mkdir /usr/local/java# å’Œcopyä¸€æ ·ï¼Œå¤åˆ¶æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•ï¼Œä½†æ˜¯copyä¸èƒ½è§£å‹ï¼Œaddè‡ªåŠ¨è§£å‹ADD jdk-8u111-linux-x64.tar.gz /usr/local/java# é‡å‘½å(ä¸çŸ¥é“æ–‡ä»¶åå¯ä»¥ç°åœ¨å®¿ä¸»æœºè§£å‹åçœ‹ä¸€ä¸‹)RUN ln -s /usr/local/java/jdk1.8.0_111 /usr/local/java/jdk # è®¾ç½®ç¯å¢ƒå˜é‡ ENV JAVA_HOME /usr/local/java/jdk ENV JRE_HOME $&#123;JAVA_HOME&#125;/jre ENV CLASSPATH .:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib ENV PATH $&#123;JAVA_HOME&#125;/bin:$PATH # åˆ›å»ºä¸€ä¸ªç›®å½•RUN mkdir /demo# å°†jaråŒ…copyåˆ°æŒ‡å®šç›®å½•ADD job.jar /demo/app.jar# å¯åŠ¨å‘½ä»¤ENTRYPOINT [&quot;java&quot;,&quot;-Djava.security.egd=file:/dev/./urandom&quot;,&quot;-jar&quot;,&quot;-Xmx512m&quot;,&quot;-Xms512m&quot;,&quot;/demo/app.jar&quot;] 2.2. ä¸‹è½½éœ€è¦çš„å¤–éƒ¨åŒ…â€‹ è¿™ä¸ªåœºæ™¯æˆ‘åªç”¨åˆ°äº†jdkã€‚ 2.3. æ‰§è¡ŒdockerFileæ–‡ä»¶ï¼Œæ„å»ºé•œåƒ1docker build -t my/demo . æ³¨æ„æœ€åçš„ . è¡¨ç¤º Dockerfile æ–‡ä»¶åœ¨å½“å‰ç›®å½•ä¸‹ my&#x2F;demo æ„å»ºä¹‹åé•œåƒåç§° 2.4. è¿è¡Œå®¹å™¨1docker run -d --name demo -p 8080:8080 my/demo å…³äº Docker é•œåƒçš„æ›´å¤šä¿¡æ¯ï¼š Docker é•œåƒæŒ‡å— Docker é•œåƒå­˜å‚¨åœ¨å“ªé‡Œ å…³äº Docker å®¹å™¨çš„æ›´å¤šä¿¡æ¯ï¼š å¦‚ä½•è‡ªåŠ¨åŒ–éƒ¨ç½² Docker å®¹å™¨ å¦‚ä½•ä¿®å¤ Docker å®¹å™¨ å…³äº Docker çš„æ›´å¤šä¿¡æ¯ï¼š Docker å…¥é—¨æŒ‡å— Docker DevOps è¯¾ç¨‹ï¼ˆè§†é¢‘ï¼‰ Docker 101ï¼šä»åˆ›å»ºåˆ°éƒ¨ç½² å‚è€ƒæ–‡æ¡£ å¦‚ä½•åˆ é™¤ Docker é•œåƒå’Œå®¹å™¨","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://guoshunfa.com/tags/Docker/"}]},{"title":"Docker é—®é¢˜è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/docker/Docker-é—®é¢˜è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Docker-é—®é¢˜è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Docker-%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/","excerpt":"","text":"è®°å½•é‡è§è¿‡çš„bug 1. dockerå®¹å™¨è‡ªåŠ¨é€€å‡ºçš„é—®é¢˜å®¹å™¨ç»å¸¸ç”¨äº†ä¸€æ®µæ—¶é—´å°±è‡ªåŠ¨é€€å‡ºäº†ï¼Œdocker pså·²ç»æ‰¾ä¸åˆ°äº†ï¼Œåœ¨docker ps -aé‡Œé¢äº†ã€‚ é—®é¢˜æ€è·¯ï¼šdocker runæŒ‡å®šçš„å‘½ä»¤å¦‚æœä¸æ˜¯é‚£äº›ä¸€ç›´æŒ‚èµ·çš„å‘½ä»¤ï¼ˆæ¯”å¦‚è¿è¡Œtopï¼Œä¸æ–­echoï¼‰ï¼Œå°±æ˜¯ä¼šè‡ªåŠ¨é€€å‡ºçš„ã€‚-då‘½ä»¤æ˜¯è®¾ç½®detachä¸ºtrueï¼Œæ ¹æ®å®˜æ–¹çš„æ–‡æ¡£ï¼Œæ„æ€æ˜¯è®©è¿™ä¸ªå‘½ä»¤åœ¨åå°è¿è¡Œï¼Œä½†å¹¶ä¸æ˜¯ä¸€ç›´è¿è¡Œï¼ŒDockerå®¹å™¨åå°è¿è¡Œ,å°±å¿…é¡»æœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹ã€‚ä¸»çº¿ç¨‹ç»“æŸï¼Œå®¹å™¨ä¼šé€€å‡ºã€‚ æˆ‘ä»¬å¯åŠ¨å®¹å™¨çš„æ—¶å€™ä¸è¦-då‘½ä»¤å¯åŠ¨ï¼Œç”¨-ditå°±å¥½äº† ä¾‹å¦‚ï¼š docker run -d hello-world(ä¸è¦è¿™ä¹ˆåš) docker run -dit hello-world(æ¨è)","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://guoshunfa.com/tags/Docker/"}]},{"title":"Docker å®¹å™¨å¯åŠ¨åä¿®æ”¹æˆ–æ·»åŠ ç«¯å£","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/docker/Dockerå®¹å™¨å¯åŠ¨åä¿®æ”¹æˆ–æ·»åŠ ç«¯å£","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Dockerå®¹å™¨å¯åŠ¨åä¿®æ”¹æˆ–æ·»åŠ ç«¯å£/","link":"","permalink":"https://guoshunfa.com/2022/07/Docker%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E5%90%8E%E4%BF%AE%E6%94%B9%E6%88%96%E6%B7%BB%E5%8A%A0%E7%AB%AF%E5%8F%A3/","excerpt":"","text":"è½¬è½½è‡ªï¼šhttps://cloud.tencent.com/developer/article/1833131 dockerå®¹å™¨å¯åŠ¨åæ€ä¹ˆä¿®æ”¹ç«¯å£æ˜ å°„ï¼Ÿåœ¨docker runåˆ›å»ºå¹¶è¿è¡Œå®¹å™¨çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡-pæŒ‡å®šç«¯å£æ˜ å°„è§„åˆ™ã€‚ä½†æ˜¯ï¼Œä¹Ÿä¼šé‡åˆ°åˆšå¼€å§‹å¿˜è®°è®¾ç½®ç«¯å£æ˜ å°„æˆ–è€…è®¾ç½®é”™äº†éœ€è¦ä¿®æ”¹çš„æƒ…å†µã€‚å½“docker startè¿è¡Œå®¹å™¨åï¼Œå¹¶æ²¡æœ‰æä¾›ä¸€ä¸ª-pé€‰é¡¹æˆ–è®¾ç½®ï¼Œè®©ä½ ä¿®æ”¹æŒ‡å®šç«¯å£æ˜ å°„è§„åˆ™ã€‚ é€šå¸¸é—´æ¥çš„åŠæ³•æ˜¯ï¼Œä¿å­˜é•œåƒï¼Œå†åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œåœ¨åˆ›å»ºæ—¶æŒ‡å®šæ–°çš„ç«¯å£æ˜ å°„ã€‚ æ–¹æ³•ä¸€ï¼šåˆ é™¤åŸæœ‰å®¹å™¨ï¼Œé‡æ–°å»ºæ–°å®¹å™¨è¿™ä¸ªè§£å†³æ–¹æ¡ˆæœ€ä¸ºç®€å•ï¼ŒæŠŠåŸæ¥çš„å®¹å™¨åˆ æ‰ï¼Œé‡æ–°å»ºä¸€ä¸ªã€‚å½“ç„¶è¿™æ¬¡ä¸è¦å¿˜è®°åŠ ä¸Šç«¯å£æ˜ å°„ã€‚ä¼˜ç‚¹æ˜¯ç®€å•å¿«æ·ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä½¿ç”¨è¾ƒå¤šã€‚ç¼ºç‚¹æ˜¯å¦‚æœæ˜¯æ•°æ®åº“é•œåƒï¼Œé‚£é‡æ–°å»ºä¸€ä¸ªåˆè¦é‡æ–°é…ç½®ä¸€æ¬¡ï¼Œå°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚ æ–¹æ³•äºŒï¼šåˆ©ç”¨docker commitæ–°æ„é•œåƒdocker commitï¼šæŠŠä¸€ä¸ªå®¹å™¨çš„æ–‡ä»¶æ”¹åŠ¨å’Œé…ç½®ä¿¡æ¯commitåˆ°ä¸€ä¸ªæ–°çš„é•œåƒã€‚è¿™ä¸ªåœ¨æµ‹è¯•çš„æ—¶å€™ä¼šéå¸¸æœ‰ç”¨ï¼ŒæŠŠå®¹å™¨æ‰€æœ‰çš„æ–‡ä»¶æ”¹åŠ¨å’Œé…ç½®ä¿¡æ¯å¯¼å…¥æˆä¸€ä¸ªæ–°çš„dockeré•œåƒï¼Œç„¶åç”¨è¿™ä¸ªæ–°çš„é•œåƒé‡èµ·ä¸€ä¸ªå®¹å™¨ï¼Œè¿™å¯¹ä¹‹å‰çš„å®¹å™¨ä¸ä¼šæœ‰ä»»ä½•å½±å“ã€‚ 1ã€åœæ­¢dockerå®¹å™¨ 1docker stop container01 2ã€commitè¯¥dockerå®¹å™¨ 1docker commit container01 new_image:tag 3ã€ç”¨å‰ä¸€æ­¥æ–°ç”Ÿæˆçš„é•œåƒé‡æ–°èµ·ä¸€ä¸ªå®¹å™¨ 1docker run --name container02 -p 80:80 new_image:tag è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯ä¸ä¼šå½±å“ç»Ÿä¸€å®¿ä¸»æœºä¸Šçš„å…¶ä»–å®¹å™¨ï¼Œç¼ºç‚¹æ˜¯ç®¡ç†èµ·æ¥æ˜¾å¾—æ¯”è¾ƒä¹±ã€‚ æ–¹æ³•ä¸‰ï¼šä¿®æ”¹æ–‡ä»¶ç«¯å£ï¼Œé‡å¯dockeræœåŠ¡ åœæ­¢docker(ä¸€å®šè¦å…ˆåœæ­¢dokcerï¼Œä¸ç„¶ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸ä¼šç”Ÿæ•ˆ) 1systemctl stop docker 2.ä¿®æ”¹è¿™ä¸ªå®¹å™¨çš„hostconfig.jsonæ–‡ä»¶ä¸­çš„ç«¯å£ï¼ˆå¦‚æœconfig.v2.jsoné‡Œé¢ä¹Ÿè®°å½•äº†ç«¯å£ï¼Œä¹Ÿè¦ä¿®æ”¹ï¼‰ æ³¨ï¼šä»¥ä¸‹æ˜¯æˆ‘ä¸ªäººæ“ä½œ 363ff2d977f8æ˜¯CONTAINER ID æ­¤æ¬¡æ“ä½œæƒ³è®©å®¿ä¸»æœº8080ç«¯å£æ˜ å°„å®¹å™¨å†…çš„80ç«¯å£ é…ç½®æ–‡ä»¶è·¯å¾„/var/lib/docker/containers/363ff2d* å…ˆä¿®æ”¹hostconfig.jsonï¼› å¦‚æœä¹‹å‰æ²¡æœ‰ç«¯å£æ˜ å°„, åº”è¯¥æœ‰è¿™æ ·çš„ä¸€æ®µ: â€œPortBindingsâ€:{} å¢åŠ ä¸€ä¸ªæ˜ å°„, è¿™æ ·å†™: â€œPortBindingsâ€:{â€œ8080&#x2F;tcpâ€:[{â€œHostIpâ€:â€â€,â€œHostPortâ€:â€œ60000â€}]} å‰ä¸€ä¸ªæ•°å­—æ˜¯å®¹å™¨ç«¯å£, åä¸€ä¸ªæ˜¯å®¿ä¸»æœºç«¯å£ã€‚å°†å®¿ä¸»æœºçš„60000ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„8080ç«¯å£ è€Œä¿®æ”¹ç°æœ‰ç«¯å£æ˜ å°„æ›´ç®€å•, æŠŠç«¯å£å·æ”¹æ‰å°±è¡Œã€‚ ä¿®æ”¹å‰ ä¿®æ”¹å 3.åœ¨ä¿®æ”¹config.v2.jsonæ–‡ä»¶ï¼› ä¿®æ”¹å‰ ä¿®æ”¹å ç”±äºæ­¤æ¬¡å®éªŒç›®çš„å®¿ä¸»æœº8080ç«¯å£æ˜ å°„dockeræŒ‡å®šå®¹å™¨å†…çš„80ç«¯å£ å¹¶ä¸”config.v2.jsonåŸæ–‡ä»¶å·²ç»å¸¦æœ‰80ç«¯å£æˆ‘å°±ä¸ç”¨åšæ–°çš„æ›´æ”¹äº† å¦‚æœæ·»åŠ æ–°çš„å…¶ä»–æ˜ å°„ç«¯å£ï¼Œæ­¤æ–‡ä»¶éœ€è¦è¿›è¡Œå¡«å†™å®¹å™¨å†…çš„æ˜ å°„ç«¯å£ï¼Œ 123456ä¸¾ä¾‹ï¼š&quot;ExposedPorts&quot;:&#123; &quot;80/tcp&quot;:&#123; &#125;,&quot;3306/tcp&quot;:&#123; &#125;ï¼Œ&quot;XXXX/tcp&quot;:&#123; &#125;&#125; #æ³¨ï¼šè¿™é‡Œå†™çš„éƒ½æ˜¯å®¹å™¨å†…çš„ç«¯å£ 4ã€é‡å¯ dockeræœåŠ¡ 1systemctl restart docker 5ã€æŸ¥çœ‹é…ç½®é¡¹å·²ç»ä¿®æ”¹æˆåŠŸ 1docker inspect CONTAINER ID","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://guoshunfa.com/tags/Docker/"}]},{"title":"Docker å®¹å™¨æ·»åŠ æ–°çš„ç«¯å£æ˜ å°„","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/docker/Dockerå®¹å™¨æ·»åŠ æ–°çš„ç«¯å£æ˜ å°„","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Dockerå®¹å™¨æ·»åŠ æ–°çš„ç«¯å£æ˜ å°„/","link":"","permalink":"https://guoshunfa.com/2022/07/Docker%E5%AE%B9%E5%99%A8%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%9A%84%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84/","excerpt":"","text":"è½¬è½½è‡ªï¼šhttps://blog.51cto.com/u_15228753/2818167 step 1: æŸ¥çœ‹å®¹å™¨å“ˆå¸Œç¼–ç 1docker inspect centos-desktop-vnc | grep Id 1&quot;Id&quot;: &quot;22132e73736a5700dd5b4215a122310220fc3192b19754917caa1b83ecb89dd3&quot;, step 2: åœæ­¢ç›®æ ‡å®¹å™¨1docker stop centos-desktop-vnc step 3: ä¿®æ”¹é…ç½®æ–‡ä»¶1sudo vim /var/lib/docker/containers/&lt;å®¹å™¨Id&gt;/hostconfig.json åŠ å…¥æ˜ å°„é…ç½® 1234567891011&#123; &quot;PortBindings&quot;:&#123; &quot;22/tcp&quot;:[&#123;&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;10112&quot;&#125;], &quot;5901/tcp&quot;:[&#123;&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;10113&quot;&#125;], &quot;3306/tcp&quot;: [&#123;&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;10114&quot;&#125;], &quot;5672/tcp&quot;: [&#123;&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;10115&quot;&#125;], &quot;6379/tcp&quot;: [&#123;&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;10116&quot;&#125;], &quot;8080/tcp&quot;: [&#123;&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;10117&quot;&#125;], &quot;80/tcp&quot;: [&#123;&quot;HostIp&quot;:&quot;&quot;,&quot;HostPort&quot;:&quot;10118&quot;&#125;], &#125;,&#125; ä¿®æ”¹ä¸‹ä¸€ä¸ªé…ç½®ï¼š 1sudo vim /var/lib/docker/containers/&lt;å®¹å™¨Id&gt;/config.v2.json è¡¥é½é…ç½®ï¼š 1234567891011&#123; &quot;ExposedPorts&quot;:&#123; &quot;22/tcp&quot;:&#123;&#125;, &quot;5901/tcp&quot;:&#123;&#125;, &quot;3306/tcp&quot;:&#123;&#125;, &quot;5672/tcp&quot;:&#123;&#125;, &quot;6379/tcp&quot;:&#123;&#125;, &quot;8080/tcp&quot;:&#123;&#125;, &quot;80/tcp&quot;:&#123;&#125; &#125;&#125; step 4: é‡å¯dockeræœåŠ¡ 1service docker restart step 5: é‡å¯å®¹å™¨1docker start centos-desktop-vnc è®¿é—®å“åº”çš„ç«¯å£ï¼ŒæŸ¥çœ‹æ˜¯å¦æ˜ å°„æˆåŠŸã€‚","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://guoshunfa.com/tags/Docker/"}]},{"title":"Jenkins ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/jenkins/Jenkins-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Jenkins-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Jenkins-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"Jenkinsæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¼€æºè‡ªåŠ¨åŒ–æœåŠ¡å™¨ï¼Œå¯ç”¨äºè‡ªåŠ¨åŒ–å„ç§ä»»åŠ¡ï¼Œå¦‚æ„å»ºï¼Œæµ‹è¯•å’Œéƒ¨ç½²è½¯ä»¶ã€‚Jenkinså¯ä»¥é€šè¿‡æœ¬æœºç³»ç»ŸåŒ…Dockerå®‰è£…ï¼Œç”šè‡³å¯ä»¥é€šè¿‡å®‰è£…Java Runtime Environmentçš„ä»»ä½•æœºå™¨ç‹¬ç«‹è¿è¡Œã€‚ JenkinsæŒç»­é›†æˆä»å…¥é—¨åˆ°ç²¾é€š 1. Jenkins æœåŠ¡å®‰è£…&#x2F;å¯åŠ¨1.1. å‰æéœ€è¦æœ‰JDKç¯å¢ƒã€‚ 1.2. Linux ç³»ç»Ÿ JenkinsæœåŠ¡å®‰è£…&#x2F;å¯åŠ¨1234567891011121314# æ›´æ–°åº“sudo apt-get update# å®‰è£…jenkinssudo apt-get install jenkins# æ³¨å†ŒjenkinsæœåŠ¡sudo systemctl daemon-reload# å¯åŠ¨jenkinsæœåŠ¡sudo systemctl start jenkins# æŸ¥çœ‹jenkinsæœåŠ¡çŠ¶æ€sudo systemctl status jenkins# é‡å¯jenkinsæœåŠ¡sudo systemctl restart jenkins# å…³é—­jenkinsæœåŠ¡sudo systemctl stop jenkins 1.2.1. Linux ç³»ç»Ÿ JenkinsæœåŠ¡å¸è½½123456# å¸è½½æœåŠ¡sudo apt-get remove jenkins# å¸è½½å®‰è£…åŒ…ï¼Œæ³¨æ„è¿™é‡Œå¦‚æœä¸æ˜¯ubuntué‚£å°±yumsudo apt-get remove --auto-remove jenkins# å¸è½½é…ç½®å’Œæ•°æ®sudo apt-get purge jenkinssudo apt-get purge --auto-remove jenkins 2. ä»»åŠ¡åˆ›å»º2.1. åªæ˜¯å°†jenkinsä½œä¸ºä¸€ä¸ªéƒ¨ç½²å¹³å° åªæ˜¯å°†jenkinsä½œä¸ºä¸€ä¸ªéƒ¨ç½²å¹³å°ï¼Œå†…éƒ¨è¿˜æ˜¯è°ƒç”¨çš„shellè„šæœ¬ã€‚ 1). æ–°å»ºä»»åŠ¡ 2). é€‰æ‹©æ„å»º -&gt; ç‚¹å‡»æ‰§è¡Œshell 3). è¾“å…¥å‡†å¤‡æ‰§è¡Œçš„è„šæœ¬ã€‚ç‚¹å‡»ä¿å­˜ã€‚ 4). ä¿å­˜ååœ¨é¦–é¡µèƒ½çœ‹åˆ°panda-docä»»åŠ¡ï¼Œç‚¹å‡»æœ€å³çš„è¿è¡ŒæŒ‰é’®ã€‚ 5). ç‚¹å‡»åç§°(panda-doc)è¿›å…¥è¯¦æƒ…ï¼Œå†ç‚¹å‡»å·¦ä¸‹è§’çš„ä»»åŠ¡è¿›åº¦åŒºåŸŸï¼ŒæŸ¥çœ‹ä»»åŠ¡è¿›åº¦ã€‚ 6). ç‚¹å‡»æ§åˆ¶å°è¾“å‡ºå³å¯æŸ¥çœ‹shellè„šæœ¬çš„è¿è¡Œæƒ…å†µã€‚ 7). è„šæœ¬æ‰§è¡Œå®Œåå¯ä»¥åœ¨é¦–é¡µæŸ¥çœ‹è„šæœ¬è¿è¡Œæƒ…å†µã€‚ å‚è€ƒæ–‡æ¡£ Jenkins å®˜ç½‘","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Jenkins","slug":"Jenkins","permalink":"https://guoshunfa.com/tags/Jenkins/"}]},{"title":"Kafka ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/kafka/Kafka-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Kafka-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Kafka-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"Kafka ç®€ä»‹ 1. Kafka æœåŠ¡å‡†å¤‡1.1. Kafka æœåŠ¡ä¸‹è½½å®‰è£…12345678# ä¸‹è½½kafkaæœåŠ¡åŒ…wget https://archive.apache.org/dist/kafka/0.10.2.1/kafka_2.10-0.10.2.1.tgz# è§£å‹tar -zxvf kafka_2.10-0.10.2.1.tgz# è¿›å…¥kafkaç›®å½•cd kafka_2.10-0.10.2.1# ä¿®æ”¹é…ç½®æ–‡ä»¶server.propertiesvi config/server.properties server.properties demo 123456789101112131415161718192021broker.id=0# ipå¯ä»¥æ˜¯å…¬ç½‘ipadvertised.listeners=PLAINTEXT://ip:9092# ipæœ€å¥½ä½¿ç”¨å†…ç½‘ipï¼Œå¦åˆ™ä¼šå‡ºç°é”™è¯¯ï¼šSocket server failed to bind to ip:9092: æ— æ³•æŒ‡å®šè¢«è¯·æ±‚çš„åœ°å€listeners=PLAINTEXT://ip:9092num.network.threads=3num.io.threads=8socket.send.buffer.bytes=102400socket.receive.buffer.bytes=102400socket.request.max.bytes=104857600log.dirs=/pandas/service/log/kafkanum.partitions=1num.recovery.threads.per.data.dir=1log.retention.hours=168log.segment.bytes=1073741824log.retention.check.interval.ms=300000############################# Zookeeper ############################## æœ€å¥½ä½¿ç”¨å†…ç½‘ipï¼Œå¦åˆ™ä¼šå‡ºç°é”™è¯¯ï¼šSocket server failed to bind to ip:9092: æ— æ³•æŒ‡å®šè¢«è¯·æ±‚çš„åœ°å€zookeeper.connect=ip:2181zookeeper.connection.timeout.ms=6000 1.2. KafkaæœåŠ¡å¯åŠ¨ä¸å…³é—­KafkaæœåŠ¡å¯åŠ¨ 123456#å¯åŠ¨zookeeper/&lt;kafkaç›®å½•&gt;/bin/zookeeper-server-start.sh /&lt;kafkaç›®å½•&gt;/config/zookeeper.properties &amp;#ç­‰3ç§’åæ‰§è¡Œsleep 3 #å¯åŠ¨kafka/&lt;kafkaç›®å½•&gt;/bin/kafka-server-start.sh /&lt;kafkaç›®å½•&gt;/config/server.properties &amp; KafkaæœåŠ¡å…³é—­ 123456#å…³é—­zookeeper/&lt;kafkaç›®å½•&gt;/bin/zookeeper-server-stop.sh /&lt;kafkaç›®å½•&gt;/config/zookeeper.properties &amp;#ç­‰3ç§’åæ‰§è¡Œsleep 3 #å…³é—­kafka/&lt;kafkaç›®å½•&gt;/bin/kafka-server-stop.sh /&lt;kafkaç›®å½•&gt;/config/server.properties &amp; 2. Kafka åŸºæœ¬æœ¯è¯­æè¿° æœ¯è¯­ è¯´æ˜ Topic ä¸»é¢˜ï¼Œç”¨äºåˆ’åˆ†æ¶ˆæ¯ç±»å‹ï¼Œç±»ä¼¼äºåˆ†ç±»æ ‡ç­¾ï¼Œæ˜¯ä¸ªé€»è¾‘æ¦‚å¿µ Partition åˆ†åŒºï¼Œtopicä¸­çš„æ¶ˆæ¯è¢«åˆ†å‰²ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªpartitionï¼Œæ˜¯ä¸€ä¸ªç‰©ç†æ¦‚å¿µï¼Œå¯¹åº”åˆ°ç³»ç»Ÿä¸Šçš„æ˜¯ä¸€ä¸ªæˆ–è€…å¤šä¸ªç›®å½• Segment æ®µï¼Œå°†partitionè¿›ä¸€æ­¥ç»†åˆ†ä¸ºè‹¥å¹²ä¸ªæ®µï¼Œæ¯ä¸ªsegmentæ–‡ä»¶çš„æœ€å¤§å¤§å°ç›¸ç­‰ Broker Kafkaé›†ç¾¤åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡å™¨ï¼Œæ¯ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ç§°ä¸ºä¸€ä¸ªBrokerï¼Œä¸€ä¸ªtopicä¸­è®¾ç½®partitionçš„æ•°é‡æ˜¯brokerçš„æ•´æ•°å€ Producer ç”Ÿäº§è€…ï¼Œå³æ¶ˆæ¯å‘é€è€…ï¼Œä¼šå°†æ¶ˆæ¯å‘é€åˆ°ç›¸åº”çš„partitionä¸­ Consumer Group æ¶ˆè´¹ç»„ï¼Œä¸€ä¸ªpartitionä¸­çš„æ¶ˆæ¯åªèƒ½è¢«åŒä¸€ä¸ªæ¶ˆè´¹ç»„ä¸­çš„ä¸€ä¸ªæ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹ï¼›è€Œä¸€ä¸ªæ¶ˆè´¹ç»„å†…çš„æ¶ˆè´¹è€…åªä¼šæ¶ˆè´¹ä¸€ä¸ªæˆ–è€…å‡ ä¸ªç‰¹å®šçš„partition Replication of partition åˆ†åŒºå‰¯æœ¬ï¼Œå‰¯æœ¬æ˜¯ä¸€ä¸ªåˆ†åŒºçš„å¤‡ä»½ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢æ¶ˆæ¯ä¸¢å¤±è€Œåˆ›å»ºçš„åˆ†åŒºå¤‡ä»½ Partition Leader æ¯ä¸ªpartitionæœ‰å¤šä¸ªå‰¯æœ¬ï¼Œå…¶ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªä½œä¸ºLeaderï¼ŒLeaderæ˜¯å½“å‰è´Ÿè´£è¯»å†™çš„partitionï¼Œå³æ‰€æœ‰è¯»å†™æ“ä½œåªèƒ½å‘ç”ŸäºLeaderåˆ†åŒºä¸Š Partition Follower æ‰€æœ‰Followeréƒ½è¦ä»Leaderä¸ŠåŒæ­¥æ¶ˆæ¯ï¼ŒFollowerä¸Leaderå§‹ç»ˆä¿æŒæ¶ˆæ¯åŒæ­¥ï¼›partition leaderä¸partition followerä¹‹é—´æ˜¯ä¸»å¤‡å…³ç³»è€Œéä¸»ä»å…³ç³» ISR ISRï¼šIn-Sync Replicasï¼Œæ˜¯æŒ‡å‰¯æœ¬åŒæ­¥åˆ—è¡¨ï¼›ARï¼šAssiged Replicasï¼ŒæŒ‡æ‰€æœ‰å‰¯æœ¬ï¼›OSRï¼šOutof-Sync Replicasï¼›AR&#x3D;ISR+OSR offset åç§»é‡ï¼Œæ¯ä¸ªæ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªå½“å‰Partitionä¸‹å”¯ä¸€çš„64å­—èŠ‚çš„offsetï¼Œä»–æ˜¯ç›¸å½“äºå½“å‰åˆ†åŒºç¬¬ä¸€æ¡æ¶ˆæ¯çš„åç§»é‡ offset commit å½“consumerä»partitionä¸­æ¶ˆè´¹äº†æ¶ˆæ¯åï¼Œconsumerä¼šå°†å…¶æ¶ˆè´¹æ¶ˆæ¯çš„offsetæäº¤ç»™brokerï¼Œè¡¨ç¤ºå½“å‰partitionå·²ç»æ¶ˆè´¹åˆ°äº†è¯¥offsetæ‰€æ ‡è¯†çš„æ¶ˆæ¯ã€‚ Rebalance å½“æ¶ˆè´¹è€…ç»„ä¸­æ¶ˆè´¹è€…æ•°é‡å‘ç”Ÿå˜åŒ–æˆ–è€…topicä¸­partitionæ•°é‡å‘ç”Ÿå˜åŒ–ï¼Œpartitionçš„æ‰€æœ‰æƒä¼šåœ¨æ¶ˆè´¹è€…é—´è½¬ç§»ï¼Œå³partitionä¼šé‡æ–°åˆ†é…ã€‚ __commit_offsets æ¶ˆè´¹è€…æäº¤çš„offsetè¢«å°è£…ä¸ºäº†ä¸€ç§ç‰¹æ®Šçš„æ¶ˆæ¯è¢«å†™å…¥åˆ°ä¸€ä¸ªç”±ç³»ç»Ÿåˆ›å»ºçš„ã€åç§°ä¸º__commit_offstesçš„ç‰¹æ®Štopicçš„partitionä¸­ï¼Œè¯¥topicé»˜è®¤åŒ…å«50ä¸ªpartitionï¼Œè¿™äº›offsetçš„é»˜è®¤æœ‰æ•ˆæœŸä¸ºä¸€å¤© Broker Controller Kafkaé›†ç¾¤çš„å¤šä¸ªbrokerä¸­ï¼Œä¼šæœ‰ä¸€ä¸ªè¢«é€‰ä¸¾ä¸ºcontrollerï¼Œè´Ÿè´£ç®¡ç†é›†ç¾¤ä¸­partitionå’Œå‰¯æœ¬replicasçš„çŠ¶æ€ã€‚ Zookeeper è´Ÿè´£ç»´æŠ¤å’Œåè°ƒBrokerï¼Œè´Ÿè´£Broker Controllerçš„é€‰ä¸¾ï¼›è¿™é‡Œè¦è¯´æ˜ä¸€ä¸‹ï¼ŒBroker Controlleræ˜¯ç”±Zookeeperé€‰ä¸¾å‡ºæ¥çš„ï¼Œè€ŒPartition Leaderæ˜¯ç”±Broker Controlleré€‰ä¸¾å‡ºæ¥çš„ã€‚ Group Coordinator group coordinatoræ˜¯è¿è¡Œåœ¨brokerä¸Šçš„çº¿ç¨‹ï¼Œä¸»è¦ç”¨äºconsumer groupä¸­å„ä¸ªæˆå‘˜çš„offsetä½ç§»ç®¡ç†å’ŒRebalanceï¼›Group CoordinatoråŒæ—¶ç®¡ç†ç€å½“å‰brokerçš„æ‰€æœ‰æ¶ˆè´¹è€…ç»„ã€‚å½“Consumeréœ€è¦æ¶ˆè´¹æ•°æ®æ—¶ï¼Œå¹¶ä¸æ˜¯ç›´æ¥ä¸­__comsumer_offsetçš„partitionä¸­è·å–çš„ï¼Œè€Œæ˜¯ä»å½“å‰brokerçš„Coordinatorçš„ç¼“å­˜ä¸­è·å–çš„ã€‚è€Œç¼“å­˜ä¸­çš„æ•°æ®æ˜¯åœ¨consumeræ¶ˆè´¹å®Œæäº¤offsetæ—¶ï¼ŒåŒæ—¶æäº¤åˆ°coordinatorçš„ç¼“å­˜ä»¥åŠ__consumer_offsetçš„partitionä¸­çš„ã€‚ 2.1. topicã€partitionã€segmentã€brokerçš„å…³ç³»topicæ˜¯ä¸€ä¸ªä¸»é¢˜ï¼Œæ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µï¼Œè€Œpartitionæ˜¯ä¸€ä¸ªä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œè€Œæ¶ˆæ¯ä¿¡æ¯å°±å­˜åœ¨partitioné˜Ÿåˆ—ä¸­ï¼Œä½†æ˜¯ç”±äºä¸€ä¸ªtopicå¯¹åº”çš„partitionä¸­æ¶ˆæ¯å†…å®¹å¤ªå¤§ï¼Œå› æ­¤å°†å…¶åˆ†ä¸ºå¤šä¸ªsegmentç”¨äºå­˜å‚¨ã€‚segmentæ–‡ä»¶çš„æœ€å¤§å¤§å°æ˜¯ä¸€è‡´çš„ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä¸€ä¸ªsegmentçš„æœ€å¤§å¤§å°ä¸º10ä¸ªå­—èŠ‚ï¼Œå½“å†™å¤Ÿ10ä¸ªå­—èŠ‚åï¼Œå°±ä¼šé‡æ–°å†ç”Ÿæˆä¸€ä¸ªsegmentï¼Œsegmentå¯¹åº”çš„å°±æ˜¯å®é™…çš„å†…å®¹æ–‡ä»¶ï¼Œè€Œå†…å®¹æ–‡ä»¶åˆåˆ†ä¸ºåç¼€åä¸ºlogçš„å…·ä½“æ¶ˆæ¯æ–‡ä»¶å’Œåç¼€åä¸ºindexçš„æ¶ˆæ¯ç´¢å¼•æ–‡ä»¶ã€‚ åˆ‡æ¢åˆ°kafkaçš„æ—¥è‡³ç›®å½•æ–‡ä»¶ï¼ŒæŸ¥çœ‹å³å¯ï¼š è¿™é‡Œå› ä¸ºæ˜¯æˆ‘è‡ªå·±çš„æµ‹è¯•ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤§çš„æ•°æ®é‡ï¼Œæ‰€ä»¥æ–‡ä»¶éƒ½æ˜¯0ï¼Œæ–‡ä»¶çš„å‘½åæ–¹å¼æ˜¯ä»¥ä¸Šä¸€ä¸ªæ–‡ä»¶çš„ç»“å°¾åç§»é‡å¾—æ¥çš„ï¼Œç¬¬ä¸€ä¸ªæ–‡ä»¶å‰é¢æ²¡æœ‰æ–‡ä»¶ï¼Œæ‰€ä»¥åç§»é‡ä¸º0ã€‚ è€Œbrokeræ˜¯kafkaçš„æœåŠ¡å™¨ï¼Œå‡è®¾æŸtopicä¸­æœ‰Nä¸ªpartitonï¼Œé›†ç¾¤ä¸­æœ‰Mä¸ªbrokerï¼Œåˆ™partitonä¸brokerçš„å…³ç³»ä¸ºï¼š è‹¥N&gt;Mï¼Œä¸”N%M &#x3D;0 ï¼Œåˆ™æ¯ä¸ªbrokerä¼šå¹³å‡å­˜å‚¨è¯¥topicçš„å¤šä¸ªpartiton è‹¥N&gt;Mï¼Œä¸”N%M!&#x3D;0ï¼Œåˆ™æ¯ä¸ªbrokerä¸­çš„partionæ•°é‡ä¸æ˜¯ä¸å¹³å‡çš„ã€‚åº”å°½é‡é¿å…è¿™ç§æƒ…å†µï¼Œå®¹æ˜“å¯¼è‡´Kafka é›†ç¾¤æ¶ˆæ¯ä¸å‡è¡¡ï¼Œå„ä¸ª broker çš„ä»»åŠ¡å‹â¼’ä¸å‡è¡¡ã€‚ è‹¥N&lt;Mï¼Œåˆ™ä¼šæœ‰Nä¸ªbrokerä¸­éƒ½å­˜æ”¾äº†â¼€ä¸ªpartitionï¼Œâ½½æœ‰M-Nä¸ªbrokeræ˜¯æ²¡æœ‰partitionçš„ã€‚ æ€»è€Œè¨€ä¹‹ä¸€å¥è¯ï¼šâ¼€ä¸ª Topic çš„æ¶ˆæ¯å¯ä»¥è¢«å­˜æ”¾åˆ°å¤šä¸ª Broker ä¸­ï¼Œâ¼€ä¸ª Broker ä¸­å¯ä»¥å­˜æ”¾â¼€ä¸ª Topic çš„å¤š ä¸ªPartitionï¼Œâ½½â¼€ä¸ª Partition ä¸­å¯ä»¥å­˜æ”¾å¾ˆå¤šçš„ Segmentï¼Œâ¼€ä¸ª Segment ä¸­å¯ä»¥å­˜æ”¾å¾ˆå¤šçš„æ¶ˆæ¯ã€‚ 2.2. consumerã€consumer groupä¸partitionçš„å…³ç³»consumeræ˜¯æ¶ˆè´¹è€…ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…å¯ä»¥è®¢é˜…å¤šä¸ªtopicæ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥è®¢é˜…åŒä¸€ä¸ªtopicä¸­å¤šä¸ªpartitionçš„æ¶ˆæ¯ã€‚ consumer groupæ˜¯æ¶ˆè´¹è€…ç»„ï¼Œæ¯ä¸€æ¡æ¶ˆæ¯åªèƒ½è¢«ç»„å†…ä¸€ä¸ªå®ä¾‹è¿›è¡Œæ¶ˆè´¹ï¼Œä¸åŒçš„æ¶ˆè´¹ç»„å¯ä»¥æ¶ˆè´¹åŒä¸€æ¡æ¶ˆæ¯ã€‚ consumerä¸partitionçš„å…³ç³»ï¼šä¸€ä¸ªconsumerå¯ä»¥æ¶ˆè´¹ä¸€ä¸ªæˆ–å¤šä¸ªpartitionçš„æ¶ˆæ¯ï¼Œä½†æ˜¯ä¸€ä¸ªpartitionçš„æ¶ˆæ¯ä¸èƒ½è¢«å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œå…¶ä¸»è¦ç›®æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ä¸ºäº†æ­£ç¡®çš„å›å†™æ¶ˆè´¹è¿›åº¦ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸ºäº†ä¿è¯åŒä¸€ä¸ªpartitionçš„æ¶ˆæ¯é¡ºåºå†™ã€é¡ºåºè¯»ï¼›ä½†æ˜¯è¿™æ ·å°±ä¼šé€ æˆä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœæ¶ˆè´¹è€…çš„æ•°é‡å¤šäºpartitionçš„æ•°é‡çš„æ—¶å€™ï¼Œå°±ä¸€å®šæœ‰æ¶ˆè´¹è€…æ˜¯å¤„äºç©ºé—²ã€‚è€Œå¦‚æœpartitionä¸æ˜¯æ¶ˆè´¹è€…çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆä¹Ÿä¼šå­˜åœ¨æœ‰çš„æ¶ˆè´¹è€…æ¶ˆè´¹çš„partitionæ¯”å…¶ä»–æ¶ˆè´¹è€…å¤šçš„æƒ…å†µï¼Œå› æ­¤ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéƒ½ä¼šå°†partitionçš„æ•°é‡è®¾ç½®ä¸ºæ¶ˆè´¹è€…çš„æ•´æ•°å€ï¼Œè¿™æ ·æ‰€æœ‰çš„æ¶ˆè´¹è€…æ¶ˆè´¹çš„partitionæ•°é‡ä¸€è‡´ï¼Œä¸ä¼šäº§ç”Ÿå‹åŠ›ä¸å‡çš„é—®é¢˜ã€‚ 2.3. Replicas of partitionã€Partition Leaderã€Partition FollowerReplicas of partitionå°±æ˜¯partitionçš„å‰¯æœ¬æ•°é‡ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³å•ç‚¹é—®é¢˜å¯¼è‡´çš„brokerå®•æœºåpartitionä¸å¯ç”¨ï¼Œå¦‚æœå‰¯æœ¬ä¸º3ï¼Œé‚£ä¹ˆçœ‹æœ‰å‡ ä¸ªbrokerï¼Œå¦‚æœæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆåœ¨å½“å‰çš„brokerä¸Šä¼šæœ‰ç›¸åŒçš„ä¸‰ä¸ªpartitionï¼Œå¦‚æœæœ‰ä¸¤ä¸ªbrokerï¼Œé‚£ä¹ˆä¼šå­˜åœ¨ä¸€ä¸ªbrokerä¸Šæœ‰ä¸€ä¸ªpartitionå¦å¤–ä¸€ä¸ªbrokerä¸Šæœ‰ä¸¤ä¸ªpartitionçš„æƒ…å†µï¼Œå¦‚æœæœ‰ä¸‰ä¸ªbrokerï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªbrokerä¸Šéƒ½ä¼šæœ‰ä¸€ä¸ªpartitionã€‚ è€ŒPartitionæ˜¯å­˜åœ¨Partition Leaderå’ŒPartition Followerçš„ï¼Œæ¯ä¸€ä¸ªpartitionåœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œéƒ½ä¼šä½¿ç”¨Zookeeperçš„ä¸´æ—¶èŠ‚ç‚¹æ¥ç¡®å®šå“ªä¸€ä¸ªpartitionæ˜¯Leaderï¼Œé‚£ä¹ˆå…¶ä½™çš„Partitionåˆ™éƒ½æ˜¯Followerï¼Œåªæœ‰Leaderä¼šå¤„ç†å®¢æˆ·ç«¯çš„è¯»å†™è¯·æ±‚ï¼Œè€ŒFolloweråªä¼šå°†Leaderä¸­çš„æ•°æ®åŒæ­¥åˆ°è‡ªå·±çš„æ—¥å¿—ä¸­ï¼Œè€Œä¸å‘å¤–éƒ¨å®¢æˆ·ç«¯æä¾›ä»»ä½•æœåŠ¡ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å½“Leaderæ‰€åœ¨çš„brokerå®•æœºåï¼Œå…¶æ‰€é“¾æ¥çš„Zookeeperå°±æ˜¯é‡æ–°é€‰ä¸¾ä¸€ä¸ªLeaderï¼Œè¿™æ˜¯å…¶ä¸­ä¸€ä¸ªFollowerä¼šè¢«é€‰ä¸¾ä¸ºLeaderï¼Œå…¶åŒæ­¥çš„æ•°æ®ä¹Ÿå°±æ´¾ä¸Šäº†ç”¨åœºã€‚ åˆ›å»ºä¸€ä¸ªtopicçš„å‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š 1bin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication\u0002factor 1 --partitions 1 --topic test å…¶ä¸­partitionè¡¨ç¤ºè¯¥topicä¸‹é¢æœ‰å¤šå°‘ä¸ªpartitionï¼Œfactoræ˜¯å¤åˆ¶å› å­ï¼Œè¡¨ç¤ºæ¯ä¸ªpartitionéœ€è¦å¤åˆ¶å‡ ä»½è¿›è¡Œä¿å­˜ï¼Œè¿™é‡Œçš„å¤åˆ¶å› å­æ•°é‡ä¸èƒ½è¶…è¿‡brokerçš„æ•°é‡ï¼Œå› ä¸ºè¶…è¿‡äº†ï¼Œä¸€ä¸ªbrokerä¸­å­˜åœ¨åŒä¸€ä¸ªpartitionçš„æ•°é‡å°±å¤§äºä¸€ï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œè¿”å›ä¼šå¢åŠ æ•°æ®åŒæ­¥å’Œæ•°æ®å­˜å‚¨çš„å‹åŠ›ã€‚ 2.4. offsetã€offset commitã€_consumer offsetsoffsetå°±æ˜¯åç§»é‡ï¼Œconsumeræ¶ˆè´¹æ¶ˆæ¯æ—¶ï¼Œæ˜¯é€šè¿‡æŒ‡å®šçš„offsetæ¥å®šä½ä¸‹ä¸€æ¡è¦è¯»å–æ¶ˆæ¯çš„ä½ç½®ï¼Œoffsetçš„ç»´æŠ¤æ˜¯ç”±consumerè¿›è¡Œç»´æŠ¤çš„ã€‚åœ¨kafka0.8ä¹‹åï¼Œoffsetä¿å­˜åœ¨kafkaé›†ç¾¤ä¸Šï¼Œåœ¨0.8ç‰ˆæœ¬ä¹‹å‰ï¼Œæ˜¯ä¿å­˜åœ¨zookeeperä¸Šçš„ã€‚åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œconsumerçš„offsetå…¶å®æ˜¯ä½œä¸ºä¸€æ¡æ™®é€šçš„æ¶ˆæ¯å‘é€åˆ°kafkaçš„ï¼Œæ¶ˆæ¯çš„é»˜è®¤ä¸»é¢˜æ˜¯_consumer_offsetsï¼Œå…¶é»˜è®¤æœ‰50ä¸ªpartitionã€‚ å½“consumeræ¶ˆè´¹å®Œæ¶ˆæ¯åï¼Œä¼šå°†æ¶ˆè´¹æ¶ˆæ¯çš„offsetæäº¤ç»™brokerï¼Œè¡¨ç¤ºè¿™äº›æ¶ˆæ¯å·²ç»è¢«æ¶ˆè´¹ã€‚ consumeræäº¤æ¶ˆè´¹offsetçš„æ–¹å¼æœ‰è‡ªåŠ¨æäº¤ã€æ‰‹åŠ¨å¼‚æ­¥æäº¤ã€æ‰‹åŠ¨åŒæ­¥æäº¤ã€æ‰‹åŠ¨åŒæ­¥å¼‚æ­¥æ··åˆæäº¤è¿™å‡ ç§æ–¹æ¡ˆï¼š è‡ªåŠ¨æäº¤ï¼šè‡ªåŠ¨æäº¤åªéœ€è¦è®¾ç½®ä½¿ç”¨æ—¶åªéœ€è¦è®¾ç½®enable.auto.commitä¸ºtrueå³å¯ã€‚å…¶ä¼˜ç‚¹å°±æ˜¯æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯ä¼šäº§ç”Ÿé‡å¤æ¶ˆæ¯ã€‚å› ä¸ºè‡ªåŠ¨æäº¤é»˜è®¤çš„æ˜¯5ç§’æäº¤ä¸€æ¬¡ï¼Œæäº¤çš„å†…å®¹æ˜¯ä¸Šä¸€æ¬¡è¢«æ¶ˆè´¹çš„æ•°æ®ï¼Œé‚£ä¹ˆå¦‚æœåœ¨ç¬¬ä¸‰ç§’çš„æ—¶å€™å‡ºç°äº†Rebalanceï¼Œåœ¨Rebalanceåï¼Œconsumeréœ€è¦é‡æ–°ä»ä¸Šä¸€æ¬¡ç¡®è®¤è¿‡çš„offsetå¤„æ¶ˆè´¹ï¼Œå°±ä¼šé€ æˆä¹‹å‰ä¸‰ç§’çš„æ•°æ®å†ä¸€æ¬¡è¢«æ¶ˆè´¹ã€‚ æ‰‹åŠ¨æäº¤ï¼šæ‰‹åŠ¨åŒæ­¥æäº¤éœ€è¦ä½¿ç”¨commitSync()ï¼Œè€Œæ‰‹åŠ¨å¼‚æ­¥æäº¤éœ€è¦ä½¿ç”¨commitAsync()ï¼ŒåŒæ­¥æäº¤çš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒçµæ´»ï¼Œä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯ä¼šé˜»å¡ï¼›è€Œå¼‚æ­¥æäº¤çš„ä¼˜ç‚¹å°±æ˜¯ç›¸å¯¹äºåŒæ­¥æ¥è¯´ï¼Œä¸ä¼šé˜»å¡ï¼›é‚£ä¹ˆä¸€èˆ¬æˆ‘ä»¬ä¼šä½¿ç”¨åŒæ­¥å’Œå¼‚æ­¥ç»„åˆä½¿ç”¨ï¼Œå°±æ˜¯è¿›è¡Œå¼‚æ­¥æäº¤offsetï¼Œä½†æ˜¯éœ€è¦ç›‘å¬brokerçš„å“åº”ç»“æœï¼Œå¦‚æœç›¸åº”ç»“æœæ˜¯æäº¤å¤±è´¥ï¼Œåˆ™å†ä»¥åŒæ­¥çš„æ–¹å¼è¿›è¡Œæäº¤ã€‚ è¿˜æœ‰ä¸€ç§æ›´ä¸ºç²¾è‡´çš„æäº¤æ–¹å¼ï¼ŒcommitSync(Map&lt;TopicPartition, OffsetAndMetadata&gt;)å’ŒcommitAsync(Map&lt;TopicPartition, OffsetAndMetadata&gt;)ã€‚å®ƒä»¬çš„å‚æ•°æ˜¯â¼€ä¸ª Map å¯¹è±¡ï¼Œé”®å°±æ˜¯ TopicPartitionï¼Œå³æ¶ˆè´¹çš„åˆ†åŒºï¼Œâ½½å€¼æ˜¯â¼€ä¸ª OffsetAndMetadata å¯¹è±¡ï¼Œä¿å­˜çš„ä¸»è¦æ˜¯ä½ç§»æ•°æ®ã€‚ ä¸Šé¢æåˆ°çš„_consumer_offsetsï¼Œè¯¥topicçš„partitioné»˜è®¤ä¸º50ä¸ªï¼Œä½¿ç”¨å“ªä¸ªpartitionä½¿ç”¨çš„æ˜¯consumer groupIDçš„hashå€¼ä¸partitionæ•°é‡å–æ¨¡å¤„ç†ï¼Œè¯¥topicä¸­æ•°æ®çš„æœ‰æ•ˆæœŸä¸º1å¤©ï¼Œå…¶key&#x3D;groupid+topic+åˆ†åŒºå·ï¼Œvalueå°±æ˜¯å½“å‰offsetçš„å€¼ã€‚å†™â¼Šåˆ°__consumer_offsetsä¸»é¢˜çš„partitionä¸­çš„offsetæ¶ˆæ¯æ ¼å¼ä¸ºï¼š[Group, Topic, Partition]::[OffsetMetadata[Offset, Metadata], CommitTime, ExpirationTime]ã€‚å½“ Kafka é›†ç¾¤ä¸­çš„ç¬¬â¼€ä¸ª Consumer ç¨‹åºå¯åŠ¨æ—¶ï¼ŒKafka ä¼šâ¾ƒåŠ¨åˆ›å»ºä½ç§»ä¸»é¢˜ã€‚ å‚è€ƒèµ„æ–™ KafkaåŸºæœ¬æœ¯è¯­åŠæè¿°","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Kafka","slug":"Kafka","permalink":"https://guoshunfa.com/tags/Kafka/"}]},{"title":"Kafka é”™è¯¯è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/kafka/Kafka-é”™è¯¯è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Kafka-é”™è¯¯è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Kafka-%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95/","excerpt":"","text":"Kafka - é”™è¯¯è®°å½•cannot allocate memoryæ—¥å¿—æè¿°ï¼š 1234// Javaè¿è¡Œæ—¶ç¯å¢ƒçš„å†…å­˜ä¸è¶³ï¼Œæ— æ³•ç»§ç»­è¿è¡Œã€‚## There is insufficient memory for the Java Runtime Environment to continue. // 1073741824åˆšå¥½æ˜¯1G, è¿™å¥è¯çš„æ„æ€æ˜¯æœ¬æœºå†…å­˜åˆ†é…æœªèƒ½ä¸ºæäº¤ä¿ç•™å†…å­˜åˆ†é…1Gå†…å­˜ã€‚# Native memory allocation (malloc) failed to allocate 1073741824 bytes for committing reserved memory. è§£å†³æ–¹æ¡ˆï¼š ä»è¿™ä¸¤è¡Œæç¤ºä¿¡æ¯æ¥çœ‹ï¼Œåº”è¯¥æ˜¯å†…å­˜ä¸å¤Ÿï¼Œç»è¿‡ç™¾åº¦ï¼Œå‘ç°æ˜¯kafkaé»˜è®¤å¯åŠ¨å†…å­˜æ˜¯1G, è€ŒJVMé»˜è®¤å†…å­˜ä¹Ÿæ˜¯1G, JVMè‡ªç„¶ä¸èƒ½æ‰€æœ‰å†…å­˜éƒ½åˆ†é…ç»™kafkaï¼Œ æ‰€ä»¥kafkaå°±å¯åŠ¨ä¸äº†ï¼Œè§£å†³æ–¹æ³•æ˜¯æŠŠkafkaçš„æœ€å°å¯åŠ¨å†…å­˜è®¾ç½®ä¸ºå°äº1Gçš„å€¼ï¼Œå³æŠŠkafka-server-start.shä¸­æŠŠâ€™export KAFKA_HEAP_OPTS&#x3D;â€-Xmx1G -Xms1Gâ€â€˜ä¸­çš„Xmsè®¾ç½®ä¸º256M, è¿™æ ·ï¼Œkafkaæœ€å°åªéœ€è¦256Må³å¯å¯åŠ¨ã€‚ é‡å¯kafkaæœåŠ¡ã€‚ Executing consumer group command failed due to Request METADATA failed on brokers List(ubuntu:9092 (id: -1 rack: null))æ—¥å¿—æè¿°ï¼š è¿è¡Œbin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --listè§¦å‘çš„é”™è¯¯æ—¥å¿—ã€‚æ¶ˆè´¹è€…å›¢ä½“æ‰§è¡Œå‘½ä»¤å¤±è´¥ç”±äºè¯·æ±‚å…ƒæ•°æ®å¤±è´¥çš„ç»çºªäººåå•ä¸Šã€‚ è§£å†³æ–¹æ¡ˆï¼š æŸ¥çœ‹server.properties zookeeperçš„é…ç½®ä¿¡æ¯ã€‚è°ƒæ•´æˆæ­£ç¡®çš„YOUR_IP_ADDRESSå³å¯ã€‚bin/kafka-consumer-groups.sh --bootstrap-server YOUR_IP_ADDRESS:9092 --list å‚è€ƒèµ„æ–™ å¯åŠ¨kafkaæç¤ºOOMå¼‚å¸¸ï¼Œcannot allocate memory KafkaConsumer é•¿æ—¶é—´åœ°åœ¨poll(long )æ–¹æ³•ä¸­é˜»å¡","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Kafka","slug":"Kafka","permalink":"https://guoshunfa.com/tags/Kafka/"}]},{"title":"Kafka å‘½ä»¤è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/kafka/Kafkaå‘½ä»¤è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Kafkaå‘½ä»¤è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Kafka%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/","excerpt":"","text":"1. æœåŠ¡ç®¡ç†å‰å°å¯åŠ¨broker bin/kafka-server-start.sh &lt;path&gt;/server.propertiesCtrl + C å…³é—­ åå°å¯åŠ¨broker bin/kafka-server-start.sh -daemon &lt;path&gt;/server.properties å…³é—­broker bin/kafka-server-stop.sh 2. Topicç®¡ç†åˆ›å»ºtopic bin/kafka-topics.sh --create --zookeeper localhost:2181 --partitions 3 --replication-factor 3 --topic topicname åˆ é™¤topic bin/kafka-topics.sh --delete --zookeeper localhost:2181 --topic topicname æŸ¥è¯¢topicåˆ—è¡¨ bin/kafka-topics.sh --zookeeper localhost:2181 --list æŸ¥è¯¢topicè¯¦æƒ… bin/kafka-topics.sh --zookeeper localhost:2181 --describe --topic topicname ä¿®æ”¹topic bin/kafka-topics.sh --alter --zookeeper localhost:2181 --partitions 6 --topic topicname ç›¸å…³å¯é€‰å‚æ•° å‚æ•° æè¿° ä¾‹å­ --bootstrap-serveræŒ‡å®škafkaæœåŠ¡ æŒ‡å®šè¿æ¥åˆ°çš„kafkaæœåŠ¡; å¦‚æœæœ‰è¿™ä¸ªå‚æ•°,åˆ™--zookeeperå¯ä»¥ä¸éœ€è¦ â€“bootstrap-server localhost:9092 --zookeeper å¼ƒç”¨, é€šè¿‡zkçš„è¿æ¥æ–¹å¼è¿æ¥åˆ°kafkaé›†ç¾¤; â€“zookeeper localhost:2181 æˆ–è€…localhost:2181&#x2F;kafka --replication-factor å‰¯æœ¬æ•°é‡,æ³¨æ„ä¸èƒ½å¤§äºbrokeræ•°é‡;å¦‚æœä¸æä¾›,åˆ™ä¼šç”¨é›†ç¾¤ä¸­é»˜è®¤é…ç½® â€“replication-factor 3 --partitions åˆ†åŒºæ•°é‡,å½“åˆ›å»ºæˆ–è€…ä¿®æ”¹topicçš„æ—¶å€™,ç”¨è¿™ä¸ªæ¥æŒ‡å®šåˆ†åŒºæ•°;å¦‚æœåˆ›å»ºçš„æ—¶å€™æ²¡æœ‰æä¾›å‚æ•°,åˆ™ç”¨é›†ç¾¤ä¸­é»˜è®¤å€¼; æ³¨æ„å¦‚æœæ˜¯ä¿®æ”¹çš„æ—¶å€™,åˆ†åŒºæ¯”ä¹‹å‰å°ä¼šæœ‰é—®é¢˜ â€“partitions 3 --replica-assignment å‰¯æœ¬åˆ†åŒºåˆ†é…æ–¹å¼;åˆ›å»ºtopicçš„æ—¶å€™å¯ä»¥è‡ªå·±æŒ‡å®šå‰¯æœ¬åˆ†é…æƒ…å†µ; --replica-assignmentBrokerId-0:BrokerId-1:BrokerId-2,BrokerId-1:BrokerId-2:BrokerId-0,BrokerId-2:BrokerId-1:BrokerId-0 ; è¿™ä¸ªæ„æ€æ˜¯æœ‰ä¸‰ä¸ªåˆ†åŒºå’Œä¸‰ä¸ªå‰¯æœ¬,å¯¹åº”åˆ†é…çš„Broker; é€—å·éš”å¼€æ ‡è¯†åˆ†åŒº;å†’å·éš”å¼€è¡¨ç¤ºå‰¯æœ¬ --config&lt;String: name&#x3D;value&gt; ç”¨æ¥è®¾ç½®topicçº§åˆ«çš„é…ç½®ä»¥è¦†ç›–é»˜è®¤é…ç½®;åªåœ¨â€“create å’Œâ€“bootstrap-server åŒæ—¶ä½¿ç”¨æ—¶å€™ç”Ÿæ•ˆ ; å¯ä»¥é…ç½®çš„å‚æ•°åˆ—è¡¨è¯·çœ‹æ–‡æœ«é™„ä»¶ ä¾‹å¦‚è¦†ç›–ä¸¤ä¸ªé…ç½®--config retention.bytes=123455 --config retention.ms=600001 --command-config&lt;String: command æ–‡ä»¶è·¯å¾„&gt; ç”¨æ¥é…ç½®å®¢æˆ·ç«¯Admin Clientå¯åŠ¨é…ç½®,åªåœ¨â€“bootstrap-server åŒæ—¶ä½¿ç”¨æ—¶å€™ç”Ÿæ•ˆ ; ä¾‹å¦‚:è®¾ç½®è¯·æ±‚çš„è¶…æ—¶æ—¶é—´--command-config config/producer.proterties; ç„¶ååœ¨æ–‡ä»¶ä¸­é…ç½® request.timeout.ms&#x3D;300000 3. Consumer-Groupsç®¡ç†æŸ¥è¯¢æ¶ˆè´¹è€…ç»„ bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --list æŸ¥è¯¢æ¶ˆè´¹è€…ç»„è¯¦æƒ… bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group groupname é‡è®¾æ¶ˆè´¹è€…ç»„ä½ç§» 12345678# æœ€æ—©å¤„bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group groupname --reset-offsets --all-topics --to-earliest --execute# æœ€æ–°å¤„bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group groupname --reset-offsets --all-topics --to-latest --execute# æŸä¸ªä½ç½®bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group groupname --reset-offsets --all-topics --to-offset 2000 --execute# è°ƒæ•´åˆ°æŸä¸ªæ—¶é—´ä¹‹åå¾—æœ€æ—©ä½ç§»bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group groupname --reset-offsets --all-topics --to-datetime 2019-09-15T00:00:00.000 åˆ é™¤æ¶ˆè´¹è€…ç»„ bin/kafka-consumer-groups.sh --zookeeper localhost:2181 --delete --group groupname 4. æ¶ˆæ¯ç®¡ç†å®æ—¶æ¥æ”¶æ¶ˆæ¯ bin/kafka-console-consumer.sh --topic topin --bootstrap-server ip:port å‚è€ƒèµ„æ–™ Kafkaè¿ç»´å‘½ä»¤å¤§å…¨","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Kafka","slug":"Kafka","permalink":"https://guoshunfa.com/tags/Kafka/"}]},{"title":"Nexus ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/nexus/Nexus-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Nexus-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Nexus-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"æ³¨æ„ï¼šNexus 3.Xè¦æ±‚JDKçš„ç‰ˆæœ¬åœ¨1.8ä»¥ä¸Š 1. å®‰è£…ã€è¿è¡Œ1.1. ä¸‹è½½å¯¹åº”å®‰è£…åŒ…å‰å¾€å®˜æ–¹ä¸‹è½½åœ°å€ macç³»ç»Ÿæä¾›ç™¾åº¦ç½‘ç›˜ï¼Œæå–ç ï¼š5fsw 1.2. è¿è¡ŒNexusè¿›å…¥å¯¹åº”çš„binç›®å½•ä¸‹å¯åŠ¨nexus 1./nexus start å‡ºç°Starting Nexus OSS... Started Nexus OSS.ï¼Œå³å¯åŠ¨æˆåŠŸã€‚ 1.3. è®¿é—®åœ°å€ 3.xé»˜è®¤æ˜¯127.0.0.1:8081ï¼Œé»˜è®¤çš„ç™»é™†è´¦æˆ·å¯†ç ä¸ºadmin&#x2F;admin123ã€‚ 2.xé»˜è®¤æ˜¯127.0.0.1:8081&#x2F;nexusï¼Œé»˜è®¤çš„ç™»é™†è´¦æˆ·å¯†ç ä¸ºadmin&#x2F;admin123ã€‚","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Nexus","slug":"Nexus","permalink":"https://guoshunfa.com/tags/Nexus/"}]},{"title":"Nginx ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/nginx/Nginx-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.263Z","comments":true,"path":"2022/07/Nginx-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Nginx-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"å®˜æ–¹æ–‡æ¡£ | ä¸­æ–‡æ–‡æ¡£ 1. Nginx æœåŠ¡å®‰è£…1.1. macç³»ç»Ÿ123456# å®‰è£…nginxbrew install nginx# å¯åŠ¨nginxbrew services start nginx# brewå®‰è£…çš„nginxé»˜è®¤é…ç½®æ–‡ä»¶ä½ç½®ï¼š/usr/local/etc/nginx/nginx.conf# å®åœ¨æ‰¾ä¸ç€nginx.confå°±ä½¿ç”¨å‘½ä»¤ï¼šnginx -t 2. Nginx è¯¦ç»†è®²è§£2.1. Nginx å‘½ä»¤ å‘½ä»¤ æè¿° nginx -?,-h,-help æŸ¥çœ‹nginx æ‰€æœ‰å‘½ä»¤ã€‚ nginx -v æ˜¾ç¤ºnginxç‰ˆæœ¬ã€‚ nginx -V æ˜¾ç¤ºnginxç‰ˆæœ¬å’Œå…·ä½“nginxé…ç½®é€‰é¡¹ã€‚ nginx -t æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦å¯è¡Œã€‚ nginx -T æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦å¯è¡Œï¼Œå¹¶ä¸”å±•ç¤ºé…ç½®æ–‡ä»¶å†…å®¹ã€‚ nginx -q åœ¨é…ç½®æµ‹è¯•æœŸé—´æŠ‘åˆ¶éé”™è¯¯æ¶ˆæ¯ã€‚ nginx -s signal å‘ä¸»è¿›ç¨‹å‘é€ä¿¡å·:åœæ­¢(stop)ã€é€€å‡º(quit)ã€é‡æ–°æ‰“å¼€(reopen)ã€é‡æ–°åŠ è½½(reload)ã€‚ï¼ˆé…ç½®æ–‡ä»¶å†…å¿…é¡»æ ‡æ³¨pidä¿¡æ¯ï¼Œå¦‚åœ¨mainå±‚åŠ ä¸€è¡Œï¼špid filenameï¼‰ nginx -p prefix è®¾ç½®å‰ç¼€è·¯å¾„ã€‚ nginx -e filename è®¾ç½®é”™è¯¯æ—¥å¿—æ–‡ä»¶åœ°å€ã€‚ nginx -c filename è®¾ç½®é…ç½®æ–‡ä»¶åœ°å€ã€‚ nginx -g directives åœ¨é…ç½®æ–‡ä»¶å¤–è®¾ç½®å…¨å±€æŒ‡ä»¤ï¼Œéœ€è¦æ›¿ä»£directivesã€‚ 2.2. Nginx é…ç½®æ–‡ä»¶è¯¦è§£ è½¬è½½äºNginxé…ç½®æ–‡ä»¶ nginx.confè¯¦è§£ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393# å®šä¹‰Nginxè¿è¡Œçš„ç”¨æˆ·å’Œç”¨æˆ·ç»„# user nobady nobady;# nginxè¿›ç¨‹æ•°ï¼Œå»ºè®®è®¾ç½®ä¸ºç­‰äºCPUæ€»æ ¸å¿ƒæ•°,é»˜è®¤ä¸º1ã€‚worker_processes 8;#å…¨å±€é”™è¯¯æ—¥å¿—å®šä¹‰ç±»å‹ï¼Œ[ debug | info | notice | warn | error | crit ]error_log /usr/local/nginx/logs/error.log info;#è¿›ç¨‹pidæ–‡ä»¶,æŒ‡å®šnginxè¿›ç¨‹è¿è¡Œæ–‡ä»¶å­˜æ”¾åœ°å€pid /usr/local/nginx/logs/nginx.pid;# æŒ‡å®šè¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æè¿°ç¬¦ï¼šæ•°ç›®# å·¥ä½œæ¨¡å¼ä¸è¿æ¥æ•°ä¸Šé™# è¿™ä¸ªæŒ‡ä»¤æ˜¯æŒ‡å½“ä¸€ä¸ªnginxè¿›ç¨‹æ‰“å¼€çš„æœ€å¤šæ–‡ä»¶æè¿°ç¬¦æ•°ç›®ï¼Œç†è®ºå€¼åº”è¯¥æ˜¯æœ€å¤šæ‰“å¼€æ–‡ä»¶æ•°ï¼ˆulimit -nï¼‰ä¸nginxè¿›ç¨‹æ•°ç›¸é™¤ï¼Œä½†æ˜¯nginxåˆ†é…è¯·æ±‚å¹¶ä¸æ˜¯é‚£ä¹ˆå‡åŒ€ï¼Œæ‰€ä»¥æœ€å¥½ä¸ulimit -n çš„å€¼ä¿æŒä¸€è‡´ã€‚# ç°åœ¨åœ¨linux 2.6å†…æ ¸ä¸‹å¼€å¯æ–‡ä»¶æ‰“å¼€æ•°ä¸º65535ï¼Œworker_rlimit_nofileå°±ç›¸åº”åº”è¯¥å¡«å†™65535ã€‚#è¿™æ˜¯å› ä¸ºnginxè°ƒåº¦æ—¶åˆ†é…è¯·æ±‚åˆ°è¿›ç¨‹å¹¶ä¸æ˜¯é‚£ä¹ˆçš„å‡è¡¡ï¼Œæ‰€ä»¥å‡å¦‚å¡«å†™10240ï¼Œæ€»å¹¶å‘é‡è¾¾åˆ°3-4 ä¸‡æ—¶å°±æœ‰è¿›ç¨‹å¯èƒ½è¶…è¿‡10240äº†ï¼Œè¿™æ—¶ä¼šè¿”å›502é”™è¯¯ã€‚worker_rlimit_nofile 65535;events&#123; #å‚è€ƒäº‹ä»¶æ¨¡å‹ï¼Œuse [ kqueue | rtsig | epoll | /dev/poll | select | poll]; epollæ¨¡å‹ #æ˜¯Linux 2.6ä»¥ä¸Šç‰ˆæœ¬å†…æ ¸ä¸­çš„é«˜æ€§èƒ½ç½‘ç»œI/Oæ¨¡å‹ï¼Œlinuxå»ºè®®epollï¼Œå¦‚æœè·‘åœ¨FreeBSDä¸Šé¢ï¼Œå°±ç”¨kqueueæ¨¡å‹ã€‚ #è¡¥å……è¯´æ˜ï¼š #ä¸apacheç›¸ç±»ï¼Œnginxé’ˆå¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œæœ‰ä¸åŒçš„äº‹ä»¶æ¨¡å‹ #Aï¼‰æ ‡å‡†äº‹ä»¶æ¨¡å‹ #Selectã€pollå±äºæ ‡å‡†äº‹ä»¶æ¨¡å‹ï¼Œå¦‚æœå½“å‰ç³»ç»Ÿä¸å­˜åœ¨æ›´æœ‰æ•ˆçš„æ–¹æ³•ï¼Œnginxä¼šé€‰æ‹©selectæˆ–poll #Bï¼‰é«˜æ•ˆäº‹ä»¶æ¨¡å‹ #Kqueueï¼šä½¿ç”¨äºFreeBSD 4.1+, OpenBSD 2.9+, NetBSD 2.0 å’Œ MacOS X.ä½¿ç”¨åŒå¤„ç†å™¨çš„MacOS Xç³»ç»Ÿä½¿ç”¨kqueueå¯èƒ½ä¼šé€ æˆå†…æ ¸å´©æºƒã€‚ #Epollï¼šä½¿ç”¨äºLinuxå†…æ ¸2.6ç‰ˆæœ¬åŠä»¥åçš„ç³»ç»Ÿã€‚ #/dev/pollï¼šä½¿ç”¨äºSolaris 7 11/99+ï¼ŒHP/UX 11.22+ (eventport)ï¼ŒIRIX6.5.15+ å’Œ Tru64 UNIX 5.1A+ã€‚ #Eventportï¼šä½¿ç”¨äºSolaris 10ã€‚ ä¸ºäº†é˜²æ­¢å‡ºç°å†…æ ¸å´©æºƒçš„é—®é¢˜ï¼Œ æœ‰å¿…è¦å®‰è£…å®‰å…¨è¡¥ä¸ã€‚ use epoll; #å•ä¸ªè¿›ç¨‹æœ€å¤§è¿æ¥æ•°ï¼ˆæœ€å¤§è¿æ¥æ•°=è¿æ¥æ•°*è¿›ç¨‹æ•°ï¼‰ #æ ¹æ®ç¡¬ä»¶è°ƒæ•´ï¼Œå’Œå‰é¢å·¥ä½œè¿›ç¨‹é…åˆèµ·æ¥ç”¨ï¼Œå°½é‡å¤§ï¼Œä½†æ˜¯åˆ«æŠŠcpuè·‘åˆ°100%å°±è¡Œã€‚æ¯ä¸ªè¿›ç¨‹å…è®¸çš„æœ€å¤šè¿æ¥æ•°ï¼Œç†è®ºä¸Šæ¯å°nginxæœåŠ¡å™¨çš„æœ€å¤§è¿æ¥æ•°ä¸ºã€‚ worker_connections 65535; #keepaliveè¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤æ˜¯60sï¼Œåˆ‡è®°è¿™ä¸ªå‚æ•°ä¹Ÿä¸èƒ½è®¾ç½®è¿‡å¤§ï¼å¦åˆ™ä¼šå¯¼è‡´è®¸å¤šæ— æ•ˆçš„httpè¿æ¥å æ®ç€nginxçš„è¿æ¥æ•°ï¼Œç»ˆnginxå´©æºƒï¼ keepalive_timeout 60; #å®¢æˆ·ç«¯è¯·æ±‚å¤´éƒ¨çš„ç¼“å†²åŒºå¤§å°ã€‚è¿™ä¸ªå¯ä»¥æ ¹æ®ä½ çš„ç³»ç»Ÿåˆ†é¡µå¤§å°æ¥è®¾ç½®ï¼Œä¸€èˆ¬ä¸€ä¸ªè¯·æ±‚å¤´çš„å¤§å°ä¸ä¼šè¶…è¿‡1kï¼Œä¸è¿‡ç”±äºä¸€èˆ¬ç³»ç»Ÿåˆ†é¡µéƒ½è¦å¤§äº1kï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸ºåˆ†é¡µå¤§å°ã€‚ #åˆ†é¡µå¤§å°å¯ä»¥ç”¨å‘½ä»¤getconf PAGESIZE å–å¾—ã€‚ #[root@web001 ~]# getconf PAGESIZE #4096 #ä½†ä¹Ÿæœ‰client_header_buffer_sizeè¶…è¿‡4kçš„æƒ…å†µï¼Œä½†æ˜¯client_header_buffer_sizeè¯¥å€¼å¿…é¡»è®¾ç½®ä¸ºâ€œç³»ç»Ÿåˆ†é¡µå¤§å°â€çš„æ•´å€æ•°ã€‚ client_header_buffer_size 4k; #è¿™ä¸ªå°†ä¸ºæ‰“å¼€æ–‡ä»¶æŒ‡å®šç¼“å­˜ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰å¯ç”¨çš„ï¼ŒmaxæŒ‡å®šç¼“å­˜æ•°é‡ï¼Œå»ºè®®å’Œæ‰“å¼€æ–‡ä»¶æ•°ä¸€è‡´ï¼Œinactiveæ˜¯æŒ‡ç»è¿‡å¤šé•¿æ—¶é—´æ–‡ä»¶æ²¡è¢«è¯·æ±‚ååˆ é™¤ç¼“å­˜ã€‚ open_file_cache max=65535 inactive=60s; #è¿™ä¸ªæ˜¯æŒ‡å¤šé•¿æ—¶é—´æ£€æŸ¥ä¸€æ¬¡ç¼“å­˜çš„æœ‰æ•ˆä¿¡æ¯ã€‚ #è¯­æ³•:open_file_cache_valid time é»˜è®¤å€¼:open_file_cache_valid 60 ä½¿ç”¨å­—æ®µ:http, server, location è¿™ä¸ªæŒ‡ä»¤æŒ‡å®šäº†ä½•æ—¶éœ€è¦æ£€æŸ¥open_file_cacheä¸­ç¼“å­˜é¡¹ç›®çš„æœ‰æ•ˆä¿¡æ¯. open_file_cache_valid 60s; #open_file_cacheæŒ‡ä»¤ä¸­çš„inactiveå‚æ•°æ—¶é—´å†…æ–‡ä»¶çš„æœ€å°‘ä½¿ç”¨æ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ•°å­—ï¼Œæ–‡ä»¶æè¿°ç¬¦ä¸€ç›´æ˜¯åœ¨ç¼“å­˜ä¸­æ‰“å¼€çš„ï¼Œå¦‚ä¸Šä¾‹ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶åœ¨inactiveæ—¶é—´å†…ä¸€æ¬¡æ²¡è¢«ä½¿ç”¨ï¼Œå®ƒå°†è¢«ç§»é™¤ã€‚ #è¯­æ³•:open_file_cache_min_uses number é»˜è®¤å€¼:open_file_cache_min_uses 1ä½¿ç”¨å­—æ®µ:http, server, location è¿™ä¸ªæŒ‡ä»¤æŒ‡å®šäº†åœ¨open_file_cacheæŒ‡ä»¤æ— æ•ˆçš„å‚æ•°ä¸­ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…å¯ä»¥ä½¿ç”¨çš„æœ€å°æ–‡ä»¶æ•°,å¦‚æœä½¿ç”¨æ›´å¤§çš„å€¼,æ–‡ä»¶æè¿°ç¬¦åœ¨cacheä¸­æ€»æ˜¯æ‰“å¼€çŠ¶æ€. open_file_cache_min_uses 1; #è¯­æ³•:open_file_cache_errors on | off é»˜è®¤å€¼:open_file_cache_errors offä½¿ç”¨å­—æ®µ:http, server, location è¿™ä¸ªæŒ‡ä»¤æŒ‡å®šæ˜¯å¦åœ¨æœç´¢ä¸€ä¸ªæ–‡ä»¶æ˜¯è®°å½•cacheé”™è¯¯. open_file_cache_errors on; &#125;#è®¾å®šhttpæœåŠ¡å™¨ï¼Œåˆ©ç”¨å®ƒçš„åå‘ä»£ç†åŠŸèƒ½æä¾›è´Ÿè½½å‡è¡¡æ”¯æŒhttp&#123; #æ–‡ä»¶æ‰©å±•åä¸æ–‡ä»¶ç±»å‹æ˜ å°„è¡¨ include mime.types; #é»˜è®¤æ–‡ä»¶ç±»å‹ default_type application/octet-stream; #é»˜è®¤ç¼–ç  #charset utf-8; #æœåŠ¡å™¨åå­—çš„hashè¡¨å¤§å° #ä¿å­˜æœåŠ¡å™¨åå­—çš„hashè¡¨æ˜¯ç”±æŒ‡ä»¤server_names_hash_max_size å’Œserver_names_hash_bucket_sizeæ‰€æ§åˆ¶çš„ã€‚å‚æ•°hash bucket sizeæ€»æ˜¯ç­‰äºhashè¡¨çš„å¤§å°ï¼Œå¹¶ä¸”æ˜¯ä¸€è·¯å¤„ç†å™¨ç¼“å­˜å¤§å°çš„å€æ•°ã€‚åœ¨å‡å°‘äº†åœ¨å†…å­˜ä¸­çš„å­˜å–æ¬¡æ•°åï¼Œä½¿åœ¨å¤„ç†å™¨ä¸­åŠ é€ŸæŸ¥æ‰¾hashè¡¨é”®å€¼æˆä¸ºå¯èƒ½ã€‚å¦‚æœhash bucket sizeç­‰äºä¸€è·¯å¤„ç†å™¨ç¼“å­˜çš„å¤§å°ï¼Œé‚£ä¹ˆåœ¨æŸ¥æ‰¾é”®çš„æ—¶å€™ï¼Œæœ€åçš„æƒ…å†µä¸‹åœ¨å†…å­˜ä¸­æŸ¥æ‰¾çš„æ¬¡æ•°ä¸º2ã€‚ç¬¬ä¸€æ¬¡æ˜¯ç¡®å®šå­˜å‚¨å•å…ƒçš„åœ°å€ï¼Œç¬¬äºŒæ¬¡æ˜¯åœ¨å­˜å‚¨å•å…ƒä¸­æŸ¥æ‰¾é”® å€¼ã€‚å› æ­¤ï¼Œå¦‚æœNginxç»™å‡ºéœ€è¦å¢å¤§hash max size æˆ– hash bucket sizeçš„æç¤ºï¼Œé‚£ä¹ˆé¦–è¦çš„æ˜¯å¢å¤§å‰ä¸€ä¸ªå‚æ•°çš„å¤§å°. server_names_hash_bucket_size 128; #å®¢æˆ·ç«¯è¯·æ±‚å¤´éƒ¨çš„ç¼“å†²åŒºå¤§å°ã€‚è¿™ä¸ªå¯ä»¥æ ¹æ®ä½ çš„ç³»ç»Ÿåˆ†é¡µå¤§å°æ¥è®¾ç½®ï¼Œä¸€èˆ¬ä¸€ä¸ªè¯·æ±‚çš„å¤´éƒ¨å¤§å°ä¸ä¼šè¶…è¿‡1kï¼Œä¸è¿‡ç”±äºä¸€èˆ¬ç³»ç»Ÿåˆ†é¡µéƒ½è¦å¤§äº1kï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸ºåˆ†é¡µå¤§å°ã€‚åˆ†é¡µå¤§å°å¯ä»¥ç”¨å‘½ä»¤getconf PAGESIZEå–å¾—ã€‚ client_header_buffer_size 32k; #å®¢æˆ·è¯·æ±‚å¤´ç¼“å†²å¤§å°ã€‚nginxé»˜è®¤ä¼šç”¨client_header_buffer_sizeè¿™ä¸ªbufferæ¥è¯»å–headerå€¼ï¼Œå¦‚æœheaderè¿‡å¤§ï¼Œå®ƒä¼šä½¿ç”¨large_client_header_buffersæ¥è¯»å–ã€‚ large_client_header_buffers 4 64k; #è®¾å®šé€šè¿‡nginxä¸Šä¼ æ–‡ä»¶çš„å¤§å° client_max_body_size 8m; #å¼€å¯é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼ï¼ŒsendfileæŒ‡ä»¤æŒ‡å®šnginxæ˜¯å¦è°ƒç”¨sendfileå‡½æ•°æ¥è¾“å‡ºæ–‡ä»¶ï¼Œå¯¹äºæ™®é€šåº”ç”¨è®¾ä¸º onï¼Œå¦‚æœç”¨æ¥è¿›è¡Œä¸‹è½½ç­‰åº”ç”¨ç£ç›˜IOé‡è´Ÿè½½åº”ç”¨ï¼Œå¯è®¾ç½®ä¸ºoffï¼Œä»¥å¹³è¡¡ç£ç›˜ä¸ç½‘ç»œI/Oå¤„ç†é€Ÿåº¦ï¼Œé™ä½ç³»ç»Ÿçš„è´Ÿè½½ã€‚æ³¨æ„ï¼šå¦‚æœå›¾ç‰‡æ˜¾ç¤ºä¸æ­£å¸¸æŠŠè¿™ä¸ªæ”¹æˆoffã€‚ #sendfileæŒ‡ä»¤æŒ‡å®š nginx æ˜¯å¦è°ƒç”¨sendfile å‡½æ•°ï¼ˆzero copy æ–¹å¼ï¼‰æ¥è¾“å‡ºæ–‡ä»¶ï¼Œå¯¹äºæ™®é€šåº”ç”¨ï¼Œå¿…é¡»è®¾ä¸ºonã€‚å¦‚æœç”¨æ¥è¿›è¡Œä¸‹è½½ç­‰åº”ç”¨ç£ç›˜IOé‡è´Ÿè½½åº”ç”¨ï¼Œå¯è®¾ç½®ä¸ºoffï¼Œä»¥å¹³è¡¡ç£ç›˜ä¸ç½‘ç»œIOå¤„ç†é€Ÿåº¦ï¼Œé™ä½ç³»ç»Ÿuptimeã€‚ sendfile on; #å¼€å¯ç›®å½•åˆ—è¡¨è®¿é—®ï¼Œåˆé€‚ä¸‹è½½æœåŠ¡å™¨ï¼Œé»˜è®¤å…³é—­ã€‚ autoindex on; #æ­¤é€‰é¡¹å…è®¸æˆ–ç¦æ­¢ä½¿ç”¨sockeçš„TCP_CORKçš„é€‰é¡¹ï¼Œæ­¤é€‰é¡¹ä»…åœ¨ä½¿ç”¨sendfileçš„æ—¶å€™ä½¿ç”¨,å‘Šè¯‰nginxåœ¨ä¸€ä¸ªæ•°æ®åŒ…é‡Œå‘é€æ‰€æœ‰å¤´æ–‡ä»¶ï¼Œè€Œä¸ä¸€ä¸ªæ¥ä¸€ä¸ªçš„å‘é€ã€‚å°±æ˜¯è¯´æ•°æ®åŒ…ä¸ä¼šé©¬ä¸Šä¼ é€å‡ºå»ï¼Œç­‰åˆ°æ•°æ®åŒ…æœ€å¤§æ—¶ï¼Œä¸€æ¬¡æ€§çš„ä¼ è¾“å‡ºå»ï¼Œè¿™æ ·æœ‰åŠ©äºè§£å†³ç½‘ç»œå µå¡ tcp_nopush on; #å‘Šè¯‰nginxä¸è¦ç¼“å­˜æ•°æ®ï¼Œè€Œæ˜¯ä¸€æ®µä¸€æ®µçš„å‘é€--å½“éœ€è¦åŠæ—¶å‘é€æ•°æ®æ—¶ï¼Œå°±åº”è¯¥ç»™åº”ç”¨è®¾ç½®è¿™ä¸ªå±æ€§ï¼Œè¿™æ ·å‘é€ä¸€å°å—æ•°æ®ä¿¡æ¯æ—¶å°±ä¸èƒ½ç«‹å³å¾—åˆ°è¿”å›å€¼ tcp_nodelay on; #é•¿è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ keepalive_timeout 120; #FastCGIç›¸å…³å‚æ•°æ˜¯ä¸ºäº†æ”¹å–„ç½‘ç«™çš„æ€§èƒ½ï¼šå‡å°‘èµ„æºå ç”¨ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚ä¸‹é¢å‚æ•°çœ‹å­—é¢æ„æ€éƒ½èƒ½ç†è§£ã€‚ #è¿™ä¸ªæŒ‡ä»¤ä¸ºFastCGIç¼“å­˜æŒ‡å®šä¸€ä¸ªè·¯å¾„ï¼Œç›®å½•ç»“æ„ç­‰çº§ï¼Œå…³é”®å­—åŒºåŸŸå­˜å‚¨æ—¶é—´å’Œéæ´»åŠ¨åˆ é™¤æ—¶é—´ fastcgi_cache_path /usr/local/nginx/fastcgi_cache levels=1:2 keys_zone=TEST:10m inactive=5m; #æŒ‡å®šè¿æ¥åˆ°åç«¯FastCGIçš„è¶…æ—¶æ—¶é—´ fastcgi_connect_timeout 300; #å‘FastCGIä¼ é€è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œè¿™ä¸ªå€¼æ˜¯æŒ‡å·²ç»å®Œæˆä¸¤æ¬¡æ¡æ‰‹åå‘FastCGIä¼ é€è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ fastcgi_send_timeout 300; #æ¥æ”¶FastCGIåº”ç­”çš„è¶…æ—¶æ—¶é—´ï¼Œè¿™ä¸ªå€¼æ˜¯æŒ‡å·²ç»å®Œæˆä¸¤æ¬¡æ¡æ‰‹åæ¥æ”¶FastCGIåº”ç­”çš„è¶…æ—¶æ—¶é—´ fastcgi_read_timeout 300; #æŒ‡å®šè¯»å–FastCGIåº”ç­”ç¬¬ä¸€éƒ¨åˆ† éœ€è¦ç”¨å¤šå¤§çš„ç¼“å†²åŒº,è¿™é‡Œå¯ä»¥è®¾ç½®ä¸ºfastcgi_buffersæŒ‡ä»¤æŒ‡å®šçš„ç¼“å†²åŒºå¤§å°ï¼Œä¸Šé¢çš„æŒ‡ä»¤æŒ‡å®šå®ƒå°†ä½¿ç”¨1ä¸ª 16kçš„ç¼“å†²åŒºå»è¯»å–åº”ç­”çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œå³åº”ç­”å¤´ï¼Œå…¶å®è¿™ä¸ªåº”ç­”å¤´ä¸€èˆ¬æƒ…å†µä¸‹éƒ½å¾ˆå°ï¼ˆä¸ä¼šè¶…è¿‡1kï¼‰ï¼Œä½†æ˜¯ä½ å¦‚æœåœ¨fastcgi_buffersæŒ‡ä»¤ä¸­æŒ‡å®šäº†ç¼“å†²åŒºçš„å¤§å°ï¼Œé‚£ä¹ˆå®ƒä¹Ÿä¼šåˆ†é…ä¸€ä¸ªfastcgi_buffersæŒ‡å®šçš„ç¼“å†²åŒºå¤§å°å»ç¼“å­˜ fastcgi_buffer_size 64k; #æŒ‡å®šæœ¬åœ°éœ€è¦ç”¨å¤šå°‘å’Œå¤šå¤§çš„ç¼“å†²åŒºæ¥ ç¼“å†²FastCGIçš„åº”ç­”ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼Œå¦‚æœä¸€ä¸ªphpè„šæœ¬æ‰€äº§ç”Ÿçš„é¡µé¢å¤§å°ä¸º256kï¼Œåˆ™ä¼šä¸ºå…¶åˆ†é…16ä¸ª16kçš„ç¼“å†²åŒºæ¥ç¼“å­˜ï¼Œå¦‚æœå¤§äº256kï¼Œå¢å¤§ äº256kçš„éƒ¨åˆ†ä¼šç¼“å­˜åˆ°fastcgi_tempæŒ‡å®šçš„è·¯å¾„ä¸­ï¼Œ å½“ç„¶è¿™å¯¹æœåŠ¡å™¨è´Ÿè½½æ¥è¯´æ˜¯ä¸æ˜æ™ºçš„æ–¹æ¡ˆï¼Œå› ä¸ºå†…å­˜ä¸­å¤„ç†æ•°æ®é€Ÿåº¦è¦å¿«äºç¡¬ç›˜ï¼Œé€šå¸¸è¿™ä¸ªå€¼ çš„è®¾ç½®åº”è¯¥é€‰æ‹©ä¸€ä¸ªä½ çš„ç«™ç‚¹ä¸­çš„phpè„šæœ¬æ‰€äº§ç”Ÿçš„é¡µé¢å¤§å°çš„ä¸­é—´å€¼ï¼Œæ¯”å¦‚ä½ çš„ç«™ç‚¹å¤§éƒ¨åˆ†è„šæœ¬æ‰€äº§ç”Ÿçš„é¡µé¢å¤§å°ä¸º 256kå°±å¯ä»¥æŠŠè¿™ä¸ªå€¼è®¾ç½®ä¸º16 16kï¼Œæˆ–è€…464k æˆ–è€…64 4kï¼Œä½†å¾ˆæ˜¾ç„¶ï¼Œåä¸¤ç§å¹¶ä¸æ˜¯å¥½çš„è®¾ç½®æ–¹æ³•ï¼Œå› ä¸ºå¦‚æœäº§ç”Ÿçš„é¡µé¢åªæœ‰32kï¼Œå¦‚æœç”¨464kå®ƒä¼šåˆ†é…1ä¸ª64kçš„ç¼“å†²åŒºå»ç¼“å­˜ï¼Œè€Œå¦‚æœä½¿ç”¨64 4kå®ƒä¼šåˆ†é…8ä¸ª4kçš„ç¼“å†²åŒºå»ç¼“å­˜ï¼Œè€Œå¦‚æœä½¿ç”¨16 16kåˆ™å®ƒä¼šåˆ†é…2ä¸ª16kå»ç¼“å­˜é¡µé¢ï¼Œè¿™æ ·çœ‹èµ·æ¥ä¼¼ä¹æ›´åŠ åˆç†â€¢ fastcgi_buffers 4 64k; #è¿™ä¸ªæŒ‡ä»¤æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯åšä»€ä¹ˆç”¨ï¼ŒåªçŸ¥é“é»˜è®¤å€¼æ˜¯fastcgi_buffersçš„ä¸¤å€ fastcgi_busy_buffers_size 128k; #åœ¨å†™å…¥fastcgi_temp_pathæ—¶å°†ç”¨å¤šå¤§çš„æ•°æ®å—ï¼Œé»˜è®¤å€¼æ˜¯fastcgi_buffersçš„ä¸¤å€ fastcgi_temp_file_write_size 128k; #å¼€å¯FastCGIç¼“å­˜å¹¶ä¸”ä¸ºå…¶åˆ¶å®šä¸€ä¸ªåç§°ã€‚ä¸ªäººæ„Ÿè§‰å¼€å¯ç¼“å­˜éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½CPUè´Ÿè½½ï¼Œå¹¶ä¸”é˜²æ­¢502é”™è¯¯ã€‚ä½†æ˜¯è¿™ä¸ªç¼“å­˜ä¼šå¼•èµ·å¾ˆå¤šé—®é¢˜ï¼Œå› ä¸ºå®ƒç¼“å­˜çš„æ˜¯åŠ¨æ€é¡µé¢ã€‚å…·ä½“ä½¿ç”¨è¿˜éœ€æ ¹æ®è‡ªå·±çš„éœ€æ±‚ fastcgi_cache TEST #ä¸ºæŒ‡å®šçš„åº”ç­”ä»£ç æŒ‡å®šç¼“å­˜æ—¶é—´ï¼Œå¦‚ä¸Šä¾‹ä¸­å°†200ï¼Œ302åº”ç­”ç¼“å­˜ä¸€å°æ—¶ï¼Œ301åº”ç­”ç¼“å­˜1å¤©ï¼Œå…¶ä»–ä¸º1åˆ†é’Ÿ fastcgi_cache_valid 200 302 1h; fastcgi_cache_valid 301 1d; fastcgi_cache_valid any 1m; #ç¼“å­˜åœ¨fastcgi_cache_pathæŒ‡ä»¤inactiveå‚æ•°å€¼æ—¶é—´å†…çš„æœ€å°‘ä½¿ç”¨æ¬¡æ•°ï¼Œå¦‚ä¸Šä¾‹ï¼Œå¦‚æœåœ¨5åˆ†é’Ÿå†…æŸæ–‡ä»¶1æ¬¡ä¹Ÿæ²¡æœ‰è¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶å°†è¢«ç§»é™¤ fastcgi_cache_min_uses 1; #gzipæ¨¡å—è®¾ç½® #å¼€å¯å‹ç¼© gzip on; # è®¾ç½®å…è®¸å‹ç¼©çš„é¡µé¢æœ€å°å­—èŠ‚æ•°ï¼Œé¡µé¢å­—èŠ‚æ•°ä»headerå¤´å¾—content-lengthä¸­è¿›è¡Œè·å–ã€‚é»˜è®¤å€¼æ˜¯0ï¼Œä¸ç®¡é¡µé¢å¤šå¤§éƒ½å‹ç¼©ã€‚å»ºè®®è®¾ç½®æˆå¤§äº2kçš„å­—èŠ‚æ•°ï¼Œå°äº2kå¯èƒ½ä¼šè¶Šå‹è¶Šå¤§ã€‚ gzip_min_length 2k; # è®¾ç½®ç³»ç»Ÿè·å–å‡ ä¸ªå•ä½çš„ç¼“å­˜ç”¨äºå­˜å‚¨gzipçš„å‹ç¼©ç»“æœæ•°æ®æµã€‚ ä¾‹å¦‚ 4 4k ä»£è¡¨ä»¥4kä¸ºå•ä½ï¼ŒæŒ‰ç…§åŸå§‹æ•°æ®å¤§å°ä»¥4kä¸ºå•ä½çš„4å€ç”³è¯·å†…å­˜ã€‚ 4 8k ä»£è¡¨ä»¥8kä¸ºå•ä½ï¼ŒæŒ‰ç…§åŸå§‹æ•°æ®å¤§å°ä»¥8kä¸ºå•ä½çš„4å€ç”³è¯·å†…å­˜ã€‚ # å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤å€¼æ˜¯ç”³è¯·è·ŸåŸå§‹æ•°æ®ç›¸åŒå¤§å°çš„å†…å­˜ç©ºé—´å»å­˜å‚¨gzipå‹ç¼©ç»“æœã€‚ gzip_buffers 4 16k; #å‹ç¼©çº§åˆ«ï¼Œ1-10ï¼Œæ•°å­—è¶Šå¤§å‹ç¼©çš„è¶Šå¥½ï¼Œä¹Ÿè¶Šå ç”¨CPUæ—¶é—´ gzip_comp_level 5; # é»˜è®¤å€¼: gzip_types text/html (é»˜è®¤ä¸å¯¹js/cssæ–‡ä»¶è¿›è¡Œå‹ç¼©) # å‹ç¼©ç±»å‹ï¼ŒåŒ¹é…MIMEç±»å‹è¿›è¡Œå‹ç¼© # ä¸èƒ½ç”¨é€šé…ç¬¦ text/* # (æ— è®ºæ˜¯å¦æŒ‡å®š)text/htmlé»˜è®¤å·²ç»å‹ç¼© # è®¾ç½®å“ªå‹ç¼©ç§æ–‡æœ¬æ–‡ä»¶å¯å‚è€ƒ conf/mime.types gzip_types text/plain application/x- javascript text/css application/xml; # å€¼ä¸º1.0å’Œ1.1 ä»£è¡¨æ˜¯å¦å‹ç¼©httpåè®®1.0ï¼Œé€‰æ‹©1.0åˆ™1.0å’Œ1.1éƒ½å¯ä»¥å‹ç¼© gzip_http_version 1.0; # IE6åŠä»¥ä¸‹ç¦æ­¢å‹ç¼© gzip_disable &quot;MSIE [1-6]\\.&quot;; # é»˜è®¤å€¼ï¼šoff # Nginxä½œä¸ºåå‘ä»£ç†çš„æ—¶å€™å¯ç”¨ï¼Œå¼€å¯æˆ–è€…å…³é—­åç«¯æœåŠ¡å™¨è¿”å›çš„ç»“æœï¼ŒåŒ¹é…çš„å‰ææ˜¯åç«¯æœåŠ¡å™¨å¿…é¡»è¦è¿”å›åŒ…å«&quot;Via&quot;çš„ headerå¤´ã€‚ # off - å…³é—­æ‰€æœ‰çš„ä»£ç†ç»“æœæ•°æ®çš„å‹ç¼© # expired - å¯ç”¨å‹ç¼©ï¼Œå¦‚æœheaderå¤´ä¸­åŒ…å« &quot;Expires&quot; å¤´ä¿¡æ¯ # no-cache - å¯ç”¨å‹ç¼©ï¼Œå¦‚æœheaderå¤´ä¸­åŒ…å« &quot;Cache-Control:no-cache&quot; å¤´ä¿¡æ¯ # no-store - å¯ç”¨å‹ç¼©ï¼Œå¦‚æœheaderå¤´ä¸­åŒ…å« &quot;Cache-Control:no-store&quot; å¤´ä¿¡æ¯ # private - å¯ç”¨å‹ç¼©ï¼Œå¦‚æœheaderå¤´ä¸­åŒ…å« &quot;Cache-Control:private&quot; å¤´ä¿¡æ¯ # no_last_modified - å¯ç”¨å‹ç¼©,å¦‚æœheaderå¤´ä¸­ä¸åŒ…å« &quot;Last-Modified&quot; å¤´ä¿¡æ¯ # no_etag - å¯ç”¨å‹ç¼© ,å¦‚æœheaderå¤´ä¸­ä¸åŒ…å« &quot;ETag&quot; å¤´ä¿¡æ¯ # auth - å¯ç”¨å‹ç¼© , å¦‚æœheaderå¤´ä¸­åŒ…å« &quot;Authorization&quot; å¤´ä¿¡æ¯ # any - æ— æ¡ä»¶å¯ç”¨å‹ç¼© gzip_proxied expired no-cache no-store private auth; # ç»™CDNå’Œä»£ç†æœåŠ¡å™¨ä½¿ç”¨ï¼Œé’ˆå¯¹ç›¸åŒurlï¼Œå¯ä»¥æ ¹æ®å¤´ä¿¡æ¯è¿”å›å‹ç¼©å’Œéå‹ç¼©å‰¯æœ¬ gzip_vary on; #å¼€å¯é™åˆ¶IPè¿æ¥æ•°çš„æ—¶å€™éœ€è¦ä½¿ç”¨ #limit_zone crawler $binary_remote_addr 10m; #è´Ÿè½½å‡è¡¡é…ç½® upstream www.xx.com &#123; #upstreamçš„è´Ÿè½½å‡è¡¡ï¼Œweightæ˜¯æƒé‡ï¼Œå¯ä»¥æ ¹æ®æœºå™¨é…ç½®å®šä¹‰æƒé‡ã€‚weigthå‚æ•°è¡¨ç¤ºæƒå€¼ï¼Œæƒå€¼è¶Šé«˜è¢«åˆ†é…åˆ°çš„å‡ ç‡è¶Šå¤§ã€‚ server 192.168.80.121:80 weight=3; server 192.168.80.122:80 weight=2; server 192.168.80.123:80 weight=3; #nginxçš„upstreamç›®å‰æ”¯æŒ4ç§æ–¹å¼çš„åˆ†é… #1ã€è½®è¯¢ï¼ˆé»˜è®¤ï¼‰ #æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨downæ‰ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ã€‚ #2ã€weight #æŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œweightå’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µã€‚ #ä¾‹å¦‚ï¼š #upstream bakend &#123; # server 192.168.0.14 weight=10; # server 192.168.0.15 weight=10; #&#125; #2ã€ip_hash #æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®ipçš„hashç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³sessionçš„é—®é¢˜ã€‚ #ä¾‹å¦‚ï¼š #upstream bakend &#123; # ip_hash; # server 192.168.0.14:88; # server 192.168.0.15:80; #&#125; #3ã€fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰ #æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚ #upstream backend &#123; # server server1; # server server2; # fair; #&#125; #4ã€url_hashï¼ˆç¬¬ä¸‰æ–¹ï¼‰ #æŒ‰è®¿é—®urlçš„hashç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œä½¿æ¯ä¸ªurlå®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œåç«¯æœåŠ¡å™¨ä¸ºç¼“å­˜æ—¶æ¯”è¾ƒæœ‰æ•ˆã€‚ #ä¾‹ï¼šåœ¨upstreamä¸­åŠ å…¥hashè¯­å¥ï¼Œserverè¯­å¥ä¸­ä¸èƒ½å†™å…¥weightç­‰å…¶ä»–çš„å‚æ•°ï¼Œhash_methodæ˜¯ä½¿ç”¨çš„hashç®—æ³• #upstream backend &#123; # server squid1:3128; # server squid2:3128; # hash $request_uri; # hash_method crc32; #&#125; #tips: #upstream bakend&#123;#å®šä¹‰è´Ÿè½½å‡è¡¡è®¾å¤‡çš„IpåŠè®¾å¤‡çŠ¶æ€&#125;&#123; # ip_hash; # server 127.0.0.1:9090 down; # server 127.0.0.1:8080 weight=2; # server 127.0.0.1:6060; # server 127.0.0.1:7070 backup; #&#125; #åœ¨éœ€è¦ä½¿ç”¨è´Ÿè½½å‡è¡¡çš„serverä¸­å¢åŠ  proxy_pass http://bakend/; #æ¯ä¸ªè®¾å¤‡çš„çŠ¶æ€è®¾ç½®ä¸º: #1.downè¡¨ç¤ºå•å‰çš„serveræš‚æ—¶ä¸å‚ä¸è´Ÿè½½ #2.weightä¸ºweightè¶Šå¤§ï¼Œè´Ÿè½½çš„æƒé‡å°±è¶Šå¤§ã€‚ #3.max_failsï¼šå…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°é»˜è®¤ä¸º1.å½“è¶…è¿‡æœ€å¤§æ¬¡æ•°æ—¶ï¼Œè¿”å›proxy_next_upstreamæ¨¡å—å®šä¹‰çš„é”™è¯¯ #4.fail_timeout:max_failsæ¬¡å¤±è´¥åï¼Œæš‚åœçš„æ—¶é—´ã€‚ #5.backupï¼š å…¶å®ƒæ‰€æœ‰çš„ébackupæœºå™¨downæˆ–è€…å¿™çš„æ—¶å€™ï¼Œè¯·æ±‚backupæœºå™¨ã€‚æ‰€ä»¥è¿™å°æœºå™¨å‹åŠ›ä¼šæœ€è½»ã€‚ #nginxæ”¯æŒåŒæ—¶è®¾ç½®å¤šç»„çš„è´Ÿè½½å‡è¡¡ï¼Œç”¨æ¥ç»™ä¸ç”¨çš„serveræ¥ä½¿ç”¨ã€‚ #client_body_in_file_onlyè®¾ç½®ä¸ºOn å¯ä»¥è®²client postè¿‡æ¥çš„æ•°æ®è®°å½•åˆ°æ–‡ä»¶ä¸­ç”¨æ¥åšdebug #client_body_temp_pathè®¾ç½®è®°å½•æ–‡ä»¶çš„ç›®å½• å¯ä»¥è®¾ç½®æœ€å¤š3å±‚ç›®å½• #locationå¯¹URLè¿›è¡ŒåŒ¹é….å¯ä»¥è¿›è¡Œé‡å®šå‘æˆ–è€…è¿›è¡Œæ–°çš„ä»£ç† è´Ÿè½½å‡è¡¡ &#125; #è™šæ‹Ÿä¸»æœºçš„é…ç½® server &#123; #ç›‘å¬ç«¯å£ listen 80; #åŸŸåå¯ä»¥æœ‰å¤šä¸ªï¼Œç”¨ç©ºæ ¼éš”å¼€ server_name www.xx.com xx.com; #é»˜è®¤è®¿é—®æ–‡ä»¶ index index.html index.htm index.php; #æ–‡ä»¶æ ¹ç›®å½•ï¼Œä¼šæ ¹æ®æ ¹ç›®å½•æŸ¥æ‰¾é»˜è®¤è®¿é—®æ–‡ä»¶ã€‚ root /data/www/xx; #å¯¹******è¿›è¡Œè´Ÿè½½å‡è¡¡ location ~ .*.(php|php5)?$ &#123; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; include fastcgi.conf; &#125; #å›¾ç‰‡ç¼“å­˜æ—¶é—´è®¾ç½® location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$ &#123; expires 10d; &#125; #JSå’ŒCSSç¼“å­˜æ—¶é—´è®¾ç½® location ~ .*.(js|css)?$ &#123; expires 1h; &#125; #æ—¥å¿—æ ¼å¼è®¾å®š #$remote_addrä¸$http_x_forwarded_forç”¨ä»¥è®°å½•å®¢æˆ·ç«¯çš„ipåœ°å€ï¼› #$remote_userï¼šç”¨æ¥è®°å½•å®¢æˆ·ç«¯ç”¨æˆ·åç§°ï¼› #$time_localï¼š ç”¨æ¥è®°å½•è®¿é—®æ—¶é—´ä¸æ—¶åŒºï¼› #$requestï¼š ç”¨æ¥è®°å½•è¯·æ±‚çš„urlä¸httpåè®®ï¼› #$statusï¼š ç”¨æ¥è®°å½•è¯·æ±‚çŠ¶æ€ï¼›æˆåŠŸæ˜¯200ï¼Œ #$body_bytes_sent ï¼šè®°å½•å‘é€ç»™å®¢æˆ·ç«¯æ–‡ä»¶ä¸»ä½“å†…å®¹å¤§å°ï¼› #$http_refererï¼šç”¨æ¥è®°å½•ä»é‚£ä¸ªé¡µé¢é“¾æ¥è®¿é—®è¿‡æ¥çš„ï¼› #$http_user_agentï¼šè®°å½•å®¢æˆ·æµè§ˆå™¨çš„ç›¸å…³ä¿¡æ¯ï¼› #é€šå¸¸webæœåŠ¡å™¨æ”¾åœ¨åå‘ä»£ç†çš„åé¢ï¼Œè¿™æ ·å°±ä¸èƒ½è·å–åˆ°å®¢æˆ·çš„IPåœ°å€äº†ï¼Œé€šè¿‡$remote_addæ‹¿åˆ°çš„IPåœ°å€æ˜¯åå‘ä»£ç†æœåŠ¡å™¨çš„iPåœ°å€ã€‚ #åå‘ä»£ç†æœåŠ¡å™¨åœ¨è½¬å‘è¯·æ±‚çš„httpå¤´ä¿¡æ¯ä¸­ï¼Œå¯ä»¥å¢åŠ x_forwarded_forä¿¡æ¯ï¼Œç”¨ä»¥è®°å½•åŸæœ‰å®¢æˆ·ç«¯çš„IPåœ°å€å’ŒåŸæ¥å®¢æˆ·ç«¯çš„è¯·æ±‚çš„æœåŠ¡å™¨åœ°å€ã€‚ log_format access &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27; &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27; &#x27;&quot;$http_user_agent&quot; $http_x_forwarded_for&#x27;; #å®šä¹‰æœ¬è™šæ‹Ÿä¸»æœºçš„è®¿é—®æ—¥å¿— access_log /usr/local/nginx/logs/host.access.log main; access_log /usr/local/nginx/logs/host.access.404.log log404; #å¯¹ &quot;/&quot; å¯ç”¨åå‘ä»£ç† location / &#123; proxy_pass http://127.0.0.1:88; proxy_redirect off; proxy_set_header X-Real-IP $remote_addr; #åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; #ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®ï¼Œå¯é€‰ã€‚ proxy_set_header Host $host; #å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•° client_max_body_size 10m; #ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œ #å¦‚æœæŠŠå®ƒè®¾ç½®ä¸ºæ¯”è¾ƒå¤§çš„æ•°å€¼ï¼Œä¾‹å¦‚256kï¼Œé‚£ä¹ˆï¼Œæ— è®ºä½¿ç”¨firefoxè¿˜æ˜¯IEæµè§ˆå™¨ï¼Œæ¥æäº¤ä»»æ„å°äº256kçš„å›¾ç‰‡ï¼Œéƒ½å¾ˆæ­£å¸¸ã€‚å¦‚æœæ³¨é‡Šè¯¥æŒ‡ä»¤ï¼Œä½¿ç”¨é»˜è®¤çš„client_body_buffer_sizeè®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ“ä½œç³»ç»Ÿé¡µé¢å¤§å°çš„ä¸¤å€ï¼Œ8kæˆ–è€…16kï¼Œé—®é¢˜å°±å‡ºç°äº†ã€‚ #æ— è®ºä½¿ç”¨firefox4.0è¿˜æ˜¯IE8.0ï¼Œæäº¤ä¸€ä¸ªæ¯”è¾ƒå¤§ï¼Œ200kå·¦å³çš„å›¾ç‰‡ï¼Œéƒ½è¿”å› 500 Internal Server Erroré”™è¯¯ client_body_buffer_size 128k; #è¡¨ç¤ºä½¿nginxé˜»æ­¢HTTPåº”ç­”ä»£ç ä¸º400æˆ–è€…æ›´é«˜çš„åº”ç­”ã€‚ proxy_intercept_errors on; #åç«¯æœåŠ¡å™¨è¿æ¥çš„è¶…æ—¶æ—¶é—´_å‘èµ·æ¡æ‰‹ç­‰å€™å“åº”è¶…æ—¶æ—¶é—´ #nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶) proxy_connect_timeout 90; #åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶) #åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´_å°±æ˜¯åœ¨è§„å®šæ—¶é—´ä¹‹å†…åç«¯æœåŠ¡å™¨å¿…é¡»ä¼ å®Œæ‰€æœ‰çš„æ•°æ® proxy_send_timeout 90; #è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶) #è¿æ¥æˆåŠŸå_ç­‰å€™åç«¯æœåŠ¡å™¨å“åº”æ—¶é—´_å…¶å®å·²ç»è¿›å…¥åç«¯çš„æ’é˜Ÿä¹‹ä¸­ç­‰å€™å¤„ç†ï¼ˆä¹Ÿå¯ä»¥è¯´æ˜¯åç«¯æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„æ—¶é—´ï¼‰ proxy_read_timeout 90; #è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å° #è®¾ç½®ä»è¢«ä»£ç†æœåŠ¡å™¨è¯»å–çš„ç¬¬ä¸€éƒ¨åˆ†åº”ç­”çš„ç¼“å†²åŒºå¤§å°ï¼Œé€šå¸¸æƒ…å†µä¸‹è¿™éƒ¨åˆ†åº”ç­”ä¸­åŒ…å«ä¸€ä¸ªå°çš„åº”ç­”å¤´ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªå€¼çš„å¤§å°ä¸ºæŒ‡ä»¤proxy_buffersä¸­æŒ‡å®šçš„ä¸€ä¸ªç¼“å†²åŒºçš„å¤§å°ï¼Œä¸è¿‡å¯ä»¥å°†å…¶è®¾ç½®ä¸ºæ›´å° proxy_buffer_size 4k; #proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è®¾ç½® #è®¾ç½®ç”¨äºè¯»å–åº”ç­”ï¼ˆæ¥è‡ªè¢«ä»£ç†æœåŠ¡å™¨ï¼‰çš„ç¼“å†²åŒºæ•°ç›®å’Œå¤§å°ï¼Œé»˜è®¤æƒ…å†µä¹Ÿä¸ºåˆ†é¡µå¤§å°ï¼Œæ ¹æ®æ“ä½œç³»ç»Ÿçš„ä¸åŒå¯èƒ½æ˜¯4kæˆ–è€…8k proxy_buffers 4 32k; #é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰ proxy_busy_buffers_size 64k; #è®¾ç½®åœ¨å†™å…¥proxy_temp_pathæ—¶æ•°æ®çš„å¤§å°ï¼Œé¢„é˜²ä¸€ä¸ªå·¥ä½œè¿›ç¨‹åœ¨ä¼ é€’æ–‡ä»¶æ—¶é˜»å¡å¤ªé•¿ #è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼  proxy_temp_file_write_size 64k; &#125; #è®¾å®šæŸ¥çœ‹NginxçŠ¶æ€çš„åœ°å€ location /NginxStatus &#123; stub_status on; access_log on; auth_basic &quot;NginxStatus&quot;; auth_basic_user_file confpasswd; #htpasswdæ–‡ä»¶çš„å†…å®¹å¯ä»¥ç”¨apacheæä¾›çš„htpasswdå·¥å…·æ¥äº§ç”Ÿã€‚ &#125; #æœ¬åœ°åŠ¨é™åˆ†ç¦»åå‘ä»£ç†é…ç½® #æ‰€æœ‰jspçš„é¡µé¢å‡äº¤ç”±tomcatæˆ–resinå¤„ç† location ~ .(jsp|jspx|do)?$ &#123; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://127.0.0.1:8080; &#125; #æ‰€æœ‰é™æ€æ–‡ä»¶ç”±nginxç›´æ¥è¯»å–ä¸ç»è¿‡tomcatæˆ–resin location ~ .*. (htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt| pdf|xls|mp3|wma)$ &#123; expires 15d; &#125; location ~ .*.(js|css)?$ &#123; expires 1h; &#125; &#125;&#125; 3. å¯æ”¯æŒçš„éœ€æ±‚ ä»¥ä¸‹å†…å®¹çš†æ˜¯å¯¹äºnginx.conf httpæ ‡ç­¾å†…çš„è°ƒæ•´ã€‚ éƒ½åªæ˜¯æœ€ç®€å•çš„demoï¼Œå¦‚æœæƒ³è¦æŸ¥çœ‹è¯¦ç»†å†…å®¹ï¼Œè¯·ç§»æ­¥åˆ°æœ¬ç›®å½•çš„å…¶ä»–æ–‡ä»¶ã€‚ 3.1. éƒ¨ç½²é™æ€æ–‡ä»¶123456server &#123; listen 8991; server_name pandacode.cn; index index.html; root /Users/guoshunfa/workspace/my/git-project/panda-doc/docs/.vuepress/dist;&#125; 3.2. è´Ÿè½½å‡è¡¡1234567891011121314# è´Ÿè½½å‡è¡¡ï¼šè®¾ç½®domainupstream domain &#123; server 127.0.0.1:8551; server 127.0.0.1:8552;&#125;server &#123; listen 8992; server_name 127.0.0.1; location / &#123; # è´Ÿè½½å‡è¡¡é…ç½®ï¼Œè¯·æ±‚ä¼šè¢«å¹³å‡åˆ†é…åˆ°8000å’Œ8001ç«¯å£ proxy_pass http://domain; proxy_set_header Host $host:$server_port; &#125;&#125; 3.3. åå‘ä»£ç†1234567server &#123; listen 8993; server_name 127.0.0.1; location / &#123; proxy_pass http://127.0.0.1:8552; &#125;&#125; å‚è€ƒæ–‡æ¡£ è¿å‰ç«¯éƒ½çœ‹å¾—æ‡‚çš„ã€ŠNginx å…¥é—¨æŒ‡å—ã€‹ 8åˆ†é’Ÿå¸¦ä½ æ·±å…¥æµ…å‡ºææ‡‚Nginx Nginxé…ç½®æ–‡ä»¶ nginx.confè¯¦è§£","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://guoshunfa.com/tags/Nginx/"}]},{"title":"Nginx éƒ¨ç½²é™æ€æ–‡ä»¶","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/nginx/Nginxéƒ¨ç½²é™æ€æ–‡ä»¶","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.263Z","comments":true,"path":"2022/07/Nginxéƒ¨ç½²é™æ€æ–‡ä»¶/","link":"","permalink":"https://guoshunfa.com/2022/07/Nginx%E9%83%A8%E7%BD%B2%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/","excerpt":"","text":"ä»¥éœ€æ±‚ä¸ºå¯¼å‘ï¼Œè¿›è¡Œé…ç½®ã€‚ è¿™é‡Œå·²ç»é»˜è®¤å®‰è£…è¿‡äº†Nginxã€‚ 1. ç®€å•éƒ¨ç½²123456server &#123; listen 8991; server_name 127.0.0.1; index index.html; root /Users/guoshunfa/workspace/my/git-project/panda-doc/docs/.vuepress/dist;&#125; 2. ç»‘å®šåŸŸå(å¯å¤šä¸ª)123456server &#123; listen 80; server_name guoshunfa.cn pandacode.cn blog.pandacode.cn; index index.html; root /Users/guoshunfa/workspace/my/git-project/panda-doc/docs/.vuepress/dist;&#125; 3. åŸŸåé…ç½®ssl é˜¿é‡Œäº‘å®˜æ–¹ä»‹ç»æ–‡æ¡£ã€‚ TODOï¼šæ²¡æœ‰è¿›è¡ŒéªŒè¯ 3.1. å‡†å¤‡å·¥ä½œ3.1.1. Nginx çš„ SSL æ¨¡å—å®‰è£…é…ç½®æŸ¥çœ‹ nginx æ˜¯å¦å®‰è£… http_ssl_module æ¨¡å—ã€‚ 1/usr/local/nginx/sbin/nginx -V å¦‚æœå‡ºç° configure arguments: â€“with-http_ssl_module, åˆ™å·²å®‰è£…ï¼ˆä¸‹é¢çš„æ­¥éª¤å¯ä»¥è·³è¿‡ï¼Œè¿›å…¥ [å‡†å¤‡SSLè¯ä¹¦](#3.1.2. å‡†å¤‡SSL è¯ä¹¦)ï¼‰ã€‚ é…ç½®sslæ¨¡å— 123# é…ç½®sslæ¨¡å—cd nginx-1.15.9 # nginxç›®å½•./configure --prefix=/usr/local/nginx --with-http_ssl_module ä½¿ç”¨ make å‘½ä»¤ç¼–è¯‘ï¼ˆä½¿ç”¨make installä¼šé‡æ–°å®‰è£…nginxï¼‰ï¼Œæ­¤æ—¶å½“å‰ç›®å½•ä¼šå‡ºç° objs æ–‡ä»¶å¤¹ã€‚ ç”¨æ–°çš„ nginx æ–‡ä»¶è¦†ç›–å½“å‰çš„ nginx æ–‡ä»¶ã€‚ 1cp ./objs/nginx /usr/local/nginx/sbin/ å†æ¬¡æŸ¥çœ‹å®‰è£…çš„æ¨¡å—ï¼ˆconfigure arguments: â€“with-http_ssl_moduleè¯´æ˜sslæ¨¡å—å·²å®‰è£…ï¼‰ã€‚ 12/usr/local/nginx/sbin/nginx -Vnginx version: nginx/1.15.9...configure arguments: --with-http_ssl_module 3.1.2. å‡†å¤‡SSL è¯ä¹¦ä¸‹è½½ç”³è¯·å¥½çš„ ssl è¯ä¹¦æ–‡ä»¶å‹ç¼©åŒ…åˆ°æœ¬åœ°å¹¶è§£å‹ï¼ˆè¿™é‡Œæ˜¯ç”¨çš„ pem ä¸ key æ–‡ä»¶ï¼Œæ–‡ä»¶åå¯ä»¥æ›´æ”¹ï¼‰ã€‚ åœ¨ nginx ç›®å½•æ–°å»º cert æ–‡ä»¶å¤¹å­˜æ”¾è¯ä¹¦æ–‡ä»¶ã€‚ 12cd /usr/local/nginxmkdir cert å°†è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸Šä¼ è‡³æœåŠ¡å™¨çš„ cert ç›®å½•é‡Œã€‚è¿™é‡Œä½¿ç”¨ mac ç»ˆç«¯ä¸Šä¼ è‡³æœåŠ¡å™¨çš„ scp å‘½ä»¤ï¼ˆè¿™é‡Œéœ€è¦æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œä¸è¦ä½¿ç”¨è¿æ¥æœåŠ¡å™¨çš„çª—å£ï¼‰: 12scp /Users/yourname/Downloads/ssl.pem root@xxx.xx.xxx.xx:/usr/local/nginx/cert/scp /Users/yourname/Downloads/ssl.key root@xxx.xx.xxx.xx:/usr/local/nginx/cert/ 3.1.3. æ”¾è¡Œsslé»˜è®¤ç«¯å£æœåŠ¡å™¨æ”¾è¡Œ443ç«¯å£ï¼Œé¿å…æ‹¦æˆªã€‚ 4. Nginx.conf é…ç½®ç¼–è¾‘ nginx.conf é…ç½®æ–‡ä»¶ï¼š é…ç½® https serverï¼š 123456789101112131415161718192021server &#123;# æœåŠ¡å™¨ç«¯å£ä½¿ç”¨443ï¼Œå¼€å¯ssl, è¿™é‡Œsslå°±æ˜¯ä¸Šé¢å®‰è£…çš„sslæ¨¡å—listen 443 ssl;# åŸŸåï¼Œå¤šä¸ªä»¥ç©ºæ ¼åˆ†å¼€server_name &lt;a href=&quot;https://www.aliyun.com/minisite/goods?userCode=veyumm2k&quot; target=&quot;_blank&quot;&gt;hack520.com&lt;/a&gt; &lt;a href=&quot;https://www.aliyun.com/minisite/goods?userCode=veyumm2k&quot; target=&quot;_blank&quot;&gt;www.hack520.com&lt;/a&gt;;# sslè¯ä¹¦åœ°å€ssl_certificate /usr/local/nginx/cert/ssl.pem; # pemæ–‡ä»¶çš„è·¯å¾„ssl_certificate_key /usr/local/nginx/cert/ssl.key; # keyæ–‡ä»¶çš„è·¯å¾„# ssléªŒè¯ç›¸å…³é…ç½®ssl_session_timeout 5m; #ç¼“å­˜æœ‰æ•ˆæœŸssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; #åŠ å¯†ç®—æ³•ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #å®‰å…¨é“¾æ¥å¯é€‰çš„åŠ å¯†åè®®ssl_prefer_server_ciphers on; #ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„é¦–é€‰ç®—æ³•location / &#123; root html; index index.html index.htm; &#125;&#125; å°† http é‡å®šå‘ httpsã€‚ 12345server &#123; listen 80; server_name &lt;a href=&quot;https://www.aliyun.com/minisite/goods?userCode=veyumm2k&quot; target=&quot;_blank&quot;&gt;hack520.com&lt;/a&gt; &lt;a href=&quot;https://www.aliyun.com/minisite/goods?userCode=veyumm2k&quot; target=&quot;_blank&quot;&gt;www.hack520.com&lt;/a&gt;; return 301 https://$server_name$request_uri;&#125;","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://guoshunfa.com/tags/Nginx/"},{"name":"éƒ¨ç½²","slug":"éƒ¨ç½²","permalink":"https://guoshunfa.com/tags/%E9%83%A8%E7%BD%B2/"}]},{"title":"Opengrok ä»£ç é˜…è¯»å·¥å…·","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/opengrok/Opengrokä»£ç é˜…è¯»å·¥å…·","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.263Z","comments":true,"path":"2022/07/Opengrokä»£ç é˜…è¯»å·¥å…·/","link":"","permalink":"https://guoshunfa.com/2022/07/Opengrok%E4%BB%A3%E7%A0%81%E9%98%85%E8%AF%BB%E5%B7%A5%E5%85%B7/","excerpt":"","text":"Opengrok åœ¨çº¿ä»£ç é˜…è¯»å·¥å…·ï¼Œæ”¯æŒä»£ç æµè§ˆï¼Œæ–‡ä»¶åæœç´¢ç­‰åŠŸèƒ½ã€‚ API | Github | Docker API æœ€ç»ˆæ•ˆæœï¼š 1. å®‰è£…ä½¿ç”¨æˆ‘æ˜¯ç”¨Dockeré•œåƒçš„å½¢å¼å®‰è£…çš„ï¼Œå¥‰ä¸Šå®˜æ–¹APIï¼Œæ ¹æ®APIå¯ä»¥æ›´é«˜æ•ˆçš„å®Œæˆå®‰è£…ï¼Œè¿™é‡Œä¹Ÿç®€å•çš„åšä¸€ä¸‹ä»‹ç»ã€‚ 1.1. æ‹‰å–dockeré•œåƒ1docker pull opengrok/docker 1.2. è¿è¡Œ1docker run -d -v &lt;path/to/your/src&gt;:/opengrok/src -p 8080:8080 opengrok/docker:latest å®¹å™¨ä¸º OpenGrok å¯¼å‡ºç«¯å£ 8080ã€‚ å®‰è£…åˆ°çš„å·/opengrok/srcåº”åŒ…å«æ‚¨æƒ³è¦æœç´¢çš„é¡¹ç›®ï¼ˆåœ¨å­ç›®å½•ä¸­ï¼‰ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å¸¸è§çš„ä¿®è®¢æ§åˆ¶æ£€å‡ºï¼ˆgitã€svn ç­‰ï¼‰ï¼Œè€Œ OpenGrok å°†æä¾›å†å²å’Œè´£ä»»ä¿¡æ¯ã€‚ è¿è¡ŒæˆåŠŸåå°±å¯ä»¥ç›´æ¥è®¿é—®åˆ°æœåŠ¡äº†ã€‚localhost:8080 2. è¿›é˜¶2.1. ç›®å½•è¯¥å›¾åƒåŒ…å«ä»¥ä¸‹ç›®å½•ï¼š ç›®å½• æè¿° /opengrok/etc å­˜å‚¨ Web åº”ç”¨ç¨‹åºå’Œç´¢å¼•å™¨çš„é…ç½® /opengrok/data æ•°æ®æ ¹ - ç´¢å¼•æ•°æ® /opengrok/src æºæ ¹ - è¾“å…¥æ•°æ® /scripts å¯åŠ¨è„šæœ¬å’Œé¡¶çº§é…ç½®ã€‚é™¤éè°ƒè¯•ï¼Œå¦åˆ™ä¸è¦è¦†ç›–ã€‚ 2.2. ç¯å¢ƒå˜é‡ Docker ç¯å¢ƒå˜é‡ é»˜è®¤å€¼ æè¿° SYNC_PERIOD_MINUTES 10 ä»¥åˆ†é’Ÿä¸ºå•ä½çš„è‡ªåŠ¨åŒæ­¥ï¼ˆå³é•œåƒ + é‡æ–°ç´¢å¼•ï¼‰çš„æ—¶é—´æ®µã€‚è®¾ç½®ä¸º0å°†ç¦ç”¨å®šæœŸåŒæ­¥ï¼ˆå®¹å™¨å¯åŠ¨åçš„åŒæ­¥ä»å°†å®Œæˆï¼‰ã€‚ INDEXER_OPT ç©ºçš„ å°†é¢å¤–çš„é€‰é¡¹ä¼ é€’ç»™ OpenGrok Indexerã€‚é»˜è®¤çš„ç´¢å¼•å™¨é€‰é¡¹é›†æ˜¯ï¼š--remote on -P -H -Wã€‚ä¾‹å¦‚ï¼Œ-i d:vendorå°†ä»*/vendor/*ç´¢å¼•ä¸­åˆ é™¤æ‰€æœ‰æ–‡ä»¶ã€‚æ‚¨å¯ä»¥åœ¨https://github.com/oracle/opengrok/wiki/Python-scripts-transition-guideä¸Šæ£€æŸ¥ç´¢å¼•å™¨é€‰é¡¹ NOMIRROR ç©ºçš„ ä¸ºé¿å…é•œåƒæ­¥éª¤ï¼Œè¯·å°†å˜é‡è®¾ç½®ä¸ºéç©ºå€¼ã€‚ URL_ROOT / è¦†ç›– OpenGrok åº”è¯¥è¿è¡Œçš„å­ URLã€‚ WORKERS å®¹å™¨ä¸­çš„ CPU æ•°é‡ ç”¨äºåŒæ­¥çš„å·¥ä½œäººå‘˜æ•°é‡ï¼ˆä»…é€‚ç”¨äºå¯ç”¨é¡¹ç›®çš„è®¾ç½®ï¼‰ AVOID_PROJECTS ç©ºçš„ åœ¨é¡¹ç›®è¾ƒå°‘çš„é…ç½®ä¸­è¿è¡Œã€‚è®¾ç½®ä¸ºéç©ºå€¼ä¼šç¦ç”¨é¡¹ç›®ã€‚è¿˜ç¦ç”¨å­˜å‚¨åº“åŒæ­¥ã€‚ REST_PORT 5000 ç®€å• REST åº”ç”¨ç¨‹åºä¾¦å¬ GET è¯·æ±‚/reindexä»¥è§¦å‘æ‰‹åŠ¨é‡æ–°ç´¢å¼•çš„TCP ç«¯å£ã€‚ REST_TOKEN æ²¡æœ‰ä»»ä½• å¦‚æœè®¾ç½®ï¼ŒREST åº”ç”¨ç¨‹åºå°†éœ€è¦æ­¤ä»¤ç‰Œä½œä¸ºä¸è®°åä»¤ç‰Œä»¥è§¦å‘é‡æ–°ç´¢å¼•ã€‚ READONLY_CONFIG_FILE æ²¡æœ‰ä»»ä½• å¦‚æœè®¾ç½®ï¼Œé…ç½®å°†ä¸æ­¤æ–‡ä»¶ä¸­çš„é…ç½®åˆå¹¶ã€‚è¿™æ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„ã€‚ CHECK_INDEX æ²¡æœ‰ä»»ä½• å¦‚æœè®¾ç½®ï¼Œå°†é¦–å…ˆæ£€æŸ¥ç´¢å¼•çš„æ ¼å¼ã€‚å¦‚æœç´¢å¼•ä¸å½“å‰è¿è¡Œçš„ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œæ•°æ®æ ¹å°†è¢«æ¸…é™¤å¹¶ä»å¤´å¼€å§‹é‡æ–°ç´¢å¼•ã€‚ è¦ä¸º æŒ‡å®šç¯å¢ƒå˜é‡docker runï¼Œè¯·ä½¿ç”¨è¯¥-eé€‰é¡¹ï¼Œä¾‹å¦‚-e SYNC_PERIOD_MINUTES=30","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Opengrok","slug":"Opengrok","permalink":"https://guoshunfa.com/tags/Opengrok/"}]},{"title":"SVN é”™è¯¯è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/svn/SVN-é”™è¯¯è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.263Z","comments":true,"path":"2022/07/SVN-é”™è¯¯è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/SVN-%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95/","excerpt":"","text":"SVNæäº¤å¤±è´¥ï¼šChanging file â€˜XXXâ€™ is forbidden by the server;Access to â€˜XXXâ€™ forbidden è½¬è½½è‡ªï¼šhttps://blog.csdn.net/diaozhu8194/article/details/102126521 æƒé™ä¸å¤Ÿï¼Œæ‰¾ç®¡ç†äººå‘˜æé«˜ä½ çš„æƒé™ã€‚","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"SVN","slug":"SVN","permalink":"https://guoshunfa.com/tags/SVN/"}]},{"title":"Tomcat ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/tomcat/Tomcat-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.263Z","comments":true,"path":"2022/07/Tomcat-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Tomcat-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"1. Tomcat å®‰è£…&#x2F;æœåŠ¡å¯åŠ¨ä¸å…³é—­1.1. Linux ContOS7 å®‰è£… Tomcat9ä¸ºé˜²æ­¢æ“ä½œæƒé™ä¸è¶³ï¼Œå»ºè®®åˆ‡æ¢rootç”¨æˆ·ï¼Œå½“ç„¶å¦‚æœä½ å¯¹Linuxå‘½ä»¤ç†Ÿæ‚‰ï¼Œèƒ½å¤Ÿè‡ªä¸»å®Œæˆæƒé™æ›´æ–°æ“ä½œï¼Œå¯ä»¥ä¸è€ƒè™‘æ­¤æ¨èã€‚ æ›´å¤šå‘½ä»¤å­¦ä¹ æ¨èï¼š 1.1.1. ä¸‹è½½Linuxç‰ˆTomcatåŒ… tar.gzï¼šLinuxç¯å¢ƒä¸‹çš„å‹ç¼©åŒ…ï¼Œå…å®‰è£…ï¼ 1ã€æ‰‹åŠ¨åœ¨Tomcatå®˜ç½‘ä¸‹è½½ï¼Œå¹¶ä½¿ç”¨XFTPå°†æ–‡ä»¶ä¸Šä¼ è‡³LinuxæŒ‡å®šç›®å½•ä¸‹ï¼ˆä¸ºä¾¿äºç®¡ç†å»ºè®®æ”¾åœ¨å½“å‰ç”¨æˆ·&#x2F;home&#x2F;XXXç›®å½•ä¸‹ï¼‰ã€‚ 2ã€ä½¿ç”¨å‘½ä»¤ä¸‹è½½ã€‚ï¼ˆé»˜è®¤æ–‡ä»¶ä¿å­˜åœ¨å½“å‰ç™»å½•ç”¨æˆ·æ‰€åœ¨ç›®å½•ï¼‰ 1wget https://mirror.bit.edu.cn/apache/tomcat/tomcat-9/v9.0.39/bin/apache-tomcat-9.0.39.tar.gz 1.1.2. è§£å‹å®‰è£…Tomcat9 1ã€åœ¨&#x2F;usr&#x2F;localç›®å½•ä¸‹æ–°å»ºç›®å½•Apacheã€‚ï¼ˆç”¨äºå­˜æ”¾Tomcatçš„å®‰è£…ä½ç½®ï¼‰ã€‚ 2ã€è¿›å…¥ä¸‹è½½å¥½çš„Tomcatå‹ç¼©åŒ…åœ°å€è·¯å¾„ï¼Œè§£å‹Tomcatè‡³&#x2F;usr&#x2F;local&#x2F;Apacheç›®å½•ä¸­ã€‚ 1234567########è¿›å…¥ç›®å½•æŸ¥çœ‹ä¸‹è½½çš„æ–‡ä»¶ï¼ˆTomcatåŒ…ï¼‰[root@localhost Apache]# cd /home/xsge/downfiles/[root@localhost downfiles]# lsapache-tomcat-9.0.39.tar.gz jdk-8u261-linux-x64.tar.gz########è§£å‹TomcatåŒ…åˆ°æŒ‡å®šç›®å½•[root@localhost downfiles]# tar -xvf apache-tomcat-9.0.39.tar.gz -C /usr/local/Apache 3ã€è¿›å…¥è§£å‹ç›®å½•æ£€æŸ¥ 123[root@localhost downfiles]# cd /usr/local/Apache[root@localhost Apache]# lsapache-tomcat-9.0.39 1.1.3. å¯åŠ¨Tomcatç¨‹åº 1ã€è¿›å…¥Tomcatå®‰è£…ç›®å½•ã€‚å‘½ä»¤å¯åŠ¨ï¼ˆé»˜è®¤ç»¿è‰²åç¼€ä¸º.shçš„ä¾¿æ˜¯Linuxçš„å¯æ‰§è¡Œè„šæœ¬ï¼‰ 123456######è¿›å…¥Tomcatå®‰è£…ç›®å½•binç›®å½•ä¸‹[root@localhost bin]# cd /usr/local/Apache/apache-tomcat-9.0.39/bin######å¯åŠ¨æˆ–å…³é—­Tomcat[root@localhost bin]# ./startup.sh[root@localhost bin]# ./shutdown.sh è¯´æ˜ï¼šåœ¨windowç³»ç»Ÿä¸­å¯åŠ¨è„šæœ¬æ˜¯.batæ–‡ä»¶ï¼Œåœ¨Linuxç³»ç»Ÿä¸­ä½¿ç”¨çš„æ˜¯.shæ–‡ä»¶ã€‚æ‰§è¡Œæ ¼å¼ä¸ºï¼š .&#x2F;è„šæœ¬ æ³¨æ„ï¼šå¦‚æœ.shæ–‡ä»¶æ˜¾ç¤ºä¸ºç°è‰²ï¼Œä¸”æ— æ³•æ‰§è¡Œï¼Œåˆ™æ˜¯å› ä¸ºæƒé™ä¸è¶³ï¼Œä½¿ç”¨å‘½ä»¤ç»™è„šæœ¬æ–‡ä»¶å¢åŠ æ‰§è¡Œæƒé™ã€‚ [root@localhost bin]# chmod +x *.sh #ç»™æ‰€æœ‰è„šæœ¬æ–‡ä»¶å¢åŠ æ‰§è¡Œæƒé™ å¯åŠ¨ä¿¡æ¯å¦‚ä¸‹ï¼š 123456789[root@localhost bin]# ./startup.shUsing CATALINA_BASE: /usr/local/Apache/apache-tomcat-9.0.39Using CATALINA_HOME: /usr/local/Apache/apache-tomcat-9.0.39Using CATALINA_TMPDIR: /usr/local/Apache/apache-tomcat-9.0.39/tempUsing JRE_HOME: /usr/lib/jvm/jdk1.8.0_261Using CLASSPATH: /usr/local/Apache/apache-tomcat-9.0.39/bin/bootstrap.jar:/usr/local/Apacheapache-tomcat-9.0.39/bin/tomcat-juli.jarUsing CATALINA_OPTS: Tomcat started.[root@localhost bin]# å¦‚æœå¸Œæœ›æŸ¥çœ‹å¯åŠ¨è¯¦æƒ…ï¼Œå¯ä»¥è¿›å…¥Tomcatçš„logç›®å½•æŸ¥çœ‹æ˜¾ç¤ºæ—¥å¿—ä¿¡æ¯ 1234567891011121314####è¿›å…¥Tomcatæ—¥å¿—ç›®å½•[root@localhost ~]# cd /usr/local/Apache/apache-tomcat-9.0.39/logs####æŸ¥çœ‹æ—¥å¿—ä¿¡æ¯[root@localhost logs]# tail -f catalina.out 15-Oct-2020 13:49:22.162 ä¿¡æ¯ [main] org.apache.catalina.startup.HostConfig.deployDirectory æŠŠweb åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ç›®å½• [/usr/local/Apache/apache-tomcat-9.0.39/webapps/docs]15-Oct-2020 13:49:22.232 ä¿¡æ¯ [main] org.apache.catalina.startup.HostConfig.deployDirectory Webåº”ç”¨ç¨‹åºç›®å½•[/usr/local/Apache/apache-tomcat-9.0.39/webapps/docs]çš„éƒ¨ç½²å·²åœ¨[69]æ¯«ç§’å†…å®Œæˆ15-Oct-2020 13:49:22.232 ä¿¡æ¯ [main] org.apache.catalina.startup.HostConfig.deployDirectory æŠŠweb åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ç›®å½• [/usr/local/Apache/apache-tomcat-9.0.39/webapps/examples]15-Oct-2020 13:49:23.294 ä¿¡æ¯ [main] org.apache.catalina.startup.HostConfig.deployDirectory Webåº”ç”¨ç¨‹åºç›®å½•[/usr/local/Apache/apache-tomcat-9.0.39/webapps/examples]çš„éƒ¨ç½²å·²åœ¨[1,062]æ¯«ç§’å†…å®Œæˆ15-Oct-2020 13:49:23.295 ä¿¡æ¯ [main] org.apache.catalina.startup.HostConfig.deployDirectory æŠŠweb åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ç›®å½• [/usr/local/Apache/apache-tomcat-9.0.39/webapps/host-manager]15-Oct-2020 13:49:23.347 ä¿¡æ¯ [main] org.apache.catalina.startup.HostConfig.deployDirectory Webåº”ç”¨ç¨‹åºç›®å½•[/usr/local/Apache/apache-tomcat-9.0.39/webapps/host-manager]çš„éƒ¨ç½²å·²åœ¨[52]æ¯«ç§’å†…å®Œæˆ15-Oct-2020 13:49:23.348 ä¿¡æ¯ [main] org.apache.catalina.startup.HostConfig.deployDirectory æŠŠweb åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ç›®å½• [/usr/local/Apache/apache-tomcat-9.0.39/webapps/manager]15-Oct-2020 13:49:23.410 ä¿¡æ¯ [main] org.apache.catalina.startup.HostConfig.deployDirectory Webåº”ç”¨ç¨‹åºç›®å½•[/usr/local/Apache/apache-tomcat-9.0.39/webapps/manager]çš„éƒ¨ç½²å·²åœ¨[63]æ¯«ç§’å†…å®Œæˆ15-Oct-2020 13:49:23.429 ä¿¡æ¯ [main] org.apache.coyote.AbstractProtocol.start å¼€å§‹åè®®å¤„ç†å¥æŸ„[&quot;http-nio-8080&quot;]15-Oct-2020 13:49:23.456 ä¿¡æ¯ [main] org.apache.catalina.startup.Catalina.start [2211]æ¯«ç§’åæœåŠ¡å™¨å¯åŠ¨ 1.1.4. æµ‹è¯•è®¿é—® 1ã€å¦‚æœä½ çš„CentOSå®‰è£…äº†Linuxç•Œé¢ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨Linuxç•Œé¢ç³»ç»Ÿä¸­æ‰“å¼€æµè§ˆå™¨è¾“å…¥è®¿é—®åœ°å€ http:&#x2F;&#x2F;è™šæ‹Ÿæœºipåœ°å€æˆ–è€…localhost:8080&#x2F; ï¼ˆå¦‚æœä¸çŸ¥é“è‡ªå·±è™šæ‹ŸæœºIPæ˜¯å¤šå°‘ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ifconfigæŸ¥çœ‹ï¼‰ è®¿é—®ä¸¾ä¾‹ï¼šhttp://192.168.6.88:8080/ http://localhost:8080/ 2ã€å¤–éƒ¨å®ä½“æµ‹è¯•è®¿é—®ã€‚ å¦‚æœæ˜¯å¤–éƒ¨ä¸»æœºæƒ³è¦è®¿é—®Linuxéƒ¨ç½²çš„Tomcatï¼Œå¿…é¡»ä½¿ç”¨ipè®¿é—®ï¼Œä¸”éœ€è¦ç›´æ¥å…³é—­Linuxé˜²ç«å¢™ã€‚ 123####å…³é—­é˜²ç«å¢™[root@localhost bin]# service firewalld stopRedirecting to /bin/systemctl stop firewalld.service æµ‹è¯•è®¿é—®ï¼šhttp://192.168.6.88:8080/ é—®é¢˜ï¼šé˜²ç«å¢™æ˜¯æ‹¦æˆªè§„åˆ™åŠ å¼ºç³»ç»Ÿå®‰å…¨çš„ï¼ŒLinuxä½œä¸ºæœåŠ¡å™¨ä¸»æœºä½¿ç”¨ï¼Œæˆ‘ä»¬ä¸å»ºè®®å…³é—­é˜²ç«å¢™ã€‚å¯ä»¥é€šè¿‡ä¸ºé˜²ç«å¢™åŠ è®¾å¼€æ”¾ç«¯å£ï¼Œå®ç°å…è®¸å¤–éƒ¨è®¿é—®ã€‚ å¦‚æœæ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œåˆ™éœ€è¦ä¿è¯é˜¿é‡Œäº‘çš„å®‰å…¨ç»„ç­–ç•¥æ˜¯å¼€æ”¾çš„ï¼ ï¼ˆé˜¿é‡Œäº‘æœåŠ¡å™¨éƒ¨ç½²é—®é¢˜ï¼Œè¯·å‚è€ƒï¼šï¼‰ é…ç½®é˜²ç«å¢™åŠ è®¾å¼€æ”¾ç«¯å£ï¼Œå¼€å¯Linuxçš„é˜²ç«å¢™æœåŠ¡ï¼š 12345678910111213141516171819#æŸ¥çœ‹firewall(é˜²ç«å¢™)æœåŠ¡çŠ¶æ€systemctl status firewall #å¼€å¯ã€é‡å¯ã€å…³é—­ã€firewalld.serviceæœåŠ¡#å¼€å¯é˜²ç«å¢™service firewalld start#é‡å¯é˜²ç«å¢™service firewalld restart#å…³é—­é˜²ç«å¢™service firewalld stop#########æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™firewall-cmd --list-all #æŸ¥çœ‹å…¨éƒ¨ä¿¡æ¯firewall-cmd --list-ports #åªçœ‹ç«¯å£ä¿¡æ¯#########æ·»åŠ é˜²ç«å¢™å¼€æ”¾ç«¯å£å¼€ç«¯å£å‘½ä»¤: firewall-cmd --zone=public --add-port=8080/tcp --permanenté‡å¯é˜²ç«å¢™: systemctl restart firewalld.serviceå‘½ä»¤å«ä¹‰: --zone #ä½œç”¨åŸŸï¼ˆpublicæ ‡è¯†å…¬å…±çš„ï¼‰ --add-port=80/tcp #æ·»åŠ ç«¯å£ï¼Œ æ ¼å¼ä¸º:ç«¯å£/é€šè®¯åè®® --permanent #æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ æ³¨æ„ï¼šåŠ è®¾é˜²ç«å¢™å¼€æ”¾ç«¯å£ä¸­firewall-cmdæ˜¯ä¸€ä¸ªå®Œæ•´çš„å‘½ä»¤ï¼Œä¸­é—´æ²¡æœ‰ç©ºæ ¼ï¼ï¼ˆæ¸©é¦¨æç¤ºï¼Œä¸Šé¢çš„å‘½ä»¤ä¸­æ²¡æœ‰æ•°å­—ï¼Œå¦‚æœä½ æ€•æ‰‹æ•²é”™è¯¯ï¼Œå»ºè®®å¤åˆ¶ï¼ï¼‰ 3ã€åŠ è®¾é˜²ç«å¢™å¼€æ”¾ç«¯å£åï¼Œæµ‹è¯•è®¿é—® è®¿é—®åœ°å€ä¸¾ä¾‹ï¼šhttp://192.168.6.88:8080/ 1.1.5. é™„å½•ï¼ˆTomcatè‡ªå¯é…ç½®ï¼‰ 1ã€Tomcaté…ç½®æœåŠ¡ æ–°å»ºæœåŠ¡è„šæœ¬ï¼š 11 [root@localhost ~]# vim /etc/init.d/tomcat è¾“å…¥iã€Iã€aç­‰ä»»æ„ä¸€ä¸ªè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œæ·»åŠ è„šæœ¬å†…å®¹ï¼š 1234567891011121314151617181920212223#!/bin/bash# description: Tomcat7 Start Stop Restart# processname: tomcat7# chkconfig: 234 20 80CATALINA_HOME=/usr/local/tomcat/apache-tomcat-9.0.11case $1 in start) sh $CATALINA_HOME/bin/startup.sh ;; stop) sh $CATALINA_HOME/bin/shutdown.sh ;; restart) sh $CATALINA_HOME/bin/shutdown.sh sh $CATALINA_HOME/bin/startup.sh ;; *) echo &#x27;please use : tomcat &#123;start | stop | restart&#125;&#x27; ;;esacexit 0 æŒ‰ESCé€€å‡ºç¼–è¾‘è¾“å…¥å‘½ä»¤ :wq ä¿å­˜è„šæœ¬ã€‚ æ‰§è¡Œè„šæœ¬ï¼Œå¯åŠ¨ã€åœæ­¢ å’Œ é‡å¯æœåŠ¡ã€‚ å¯åŠ¨ï¼šservice tomcat start åœæ­¢ï¼šservice tomcat stop é‡å¯ï¼šservice tomcat restart 2ã€Tomcaté…ç½®å¼€æœºè‡ªå¯åŠ¨ å‘chkconfigæ·»åŠ  tomcat æœåŠ¡çš„ç®¡ç† 1[root@localhost ~]# chkconfig --add tomcat è®¾ç½®tomcatæœåŠ¡è‡ªå¯åŠ¨ 1[root@localhost ~]# chkconfig tomcat on æŸ¥çœ‹tomcatçš„å¯åŠ¨çŠ¶æ€ 123456[root@localhost ~]# chkconfig --list | grep tomcatçŠ¶æ€å¦‚ä¸‹ï¼š[root@localhost ~]# chkconfig --list | grep tomcattomcat 0:off 1:off 2:on 3:on 4:on 5:on 6:off å…³é—­tomcatæœåŠ¡è‡ªå¯åŠ¨ï¼šchkconfig tomcat off åˆ é™¤tomcatæœåŠ¡åœ¨chkconfigä¸Šçš„ç®¡ç†ï¼šchkconfig â€“del tomcat 2. Tomcat å¯åŠ¨webé¡¹ç›®ä½¿ç”¨è¯´æ˜2.1. å¼•å…¥WaråŒ…1ã€å°†WaråŒ…æ‹·è´åˆ°tomact&#x2F;webappsç›®å½•ä¸‹ï¼› 2ã€è¿è¡Œtomact,ä¼šè‡ªåŠ¨è§£å‹waråŒ…ï¼› 3ã€åœ°å€æ è®¿é—®ã€‚","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Tomcat","slug":"Tomcat","permalink":"https://guoshunfa.com/tags/Tomcat/"}]},{"title":"Webç»„ä»¶åº“ JSç»„ä»¶æ–¹æ³•è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/webç»„ä»¶åº“/Webç»„ä»¶åº“JSç»„ä»¶æ–¹æ³•è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.264Z","comments":true,"path":"2022/07/Webç»„ä»¶åº“JSç»„ä»¶æ–¹æ³•è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Web%E7%BB%84%E4%BB%B6%E5%BA%93JS%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95%E8%AE%B0%E5%BD%95/","excerpt":"","text":"ä»¥æŠ˜å é¢æ¿çš„å½¢å¼è¿›è¡Œç»„ä»¶æè¿°ï¼Œç‚¹å‡»å¯¹åº”çš„é¢æ¿ä¼šå±•ç¤ºå¯¹åº”ä¿¡æ¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104/** * @description å°†æ‰å¹³åŒ–æ•°æ® è½¬æ¢æˆ æ ‘çŠ¶ç»“æ„ * @param &#123;Array&#125; arrayList æ‰å¹³åŒ–çš„æ•°æ® * @param &#123;String&#125; pidStr parentIdçš„keyå * @param &#123;String&#125; idStr idçš„keyå * @param &#123;String&#125; childrenStr childrençš„keyå */ function fommat(&#123;arrayList, pidStr = &#x27;pid&#x27;, idStr = &#x27;id&#x27;, childrenStr = &#x27;children&#x27;&#125;) &#123; let listOjb = &#123;&#125;; // ç”¨æ¥å‚¨å­˜&#123;key: obj&#125;æ ¼å¼çš„å¯¹è±¡ let treeList = []; // ç”¨æ¥å‚¨å­˜æœ€ç»ˆæ ‘å½¢ç»“æ„æ•°æ®çš„æ•°ç»„ // å°†æ•°æ®å˜æ¢æˆ&#123;key: obj&#125;æ ¼å¼ï¼Œæ–¹ä¾¿ä¸‹é¢å¤„ç†æ•°æ® for (let i = 0; i &lt; arrayList.length; i++) &#123; listOjb[arrayList[i][idStr]] = arrayList[i] &#125; // æ ¹æ®pidæ¥å°†æ•°æ®è¿›è¡Œæ ¼å¼åŒ– for (let j = 0; j &lt; arrayList.length; j++) &#123; // åˆ¤æ–­çˆ¶çº§æ˜¯å¦å­˜åœ¨ let haveParent = listOjb[arrayList[j][pidStr]] if (haveParent) &#123; // å¦‚æœæœ‰æ²¡æœ‰çˆ¶çº§childrenå­—æ®µï¼Œå°±åˆ›å»ºä¸€ä¸ªchildrenå­—æ®µ !haveParent[childrenStr] &amp;&amp; (haveParent[childrenStr] = []) // åœ¨çˆ¶çº§é‡Œæ’å…¥å­é¡¹ haveParent[childrenStr].push(arrayList[j]) &#125; else &#123; // å¦‚æœæ²¡æœ‰çˆ¶çº§ç›´æ¥æ’å…¥åˆ°æœ€å¤–å±‚ treeList.push(arrayList[j]) &#125; &#125; return treeList &#125; // æµ‹è¯•æ•°æ® var menu_list = [&#123; id: &#x27;1&#x27;, menu_name: &#x27;è®¾ç½®&#x27;, menu_url: &#x27;setting&#x27;, parent_id: 0 &#125;, &#123; id: &#x27;1-1&#x27;, menu_name: &#x27;æƒé™è®¾ç½®&#x27;, menu_url: &#x27;setting.permission&#x27;, parent_id: &#x27;1&#x27; &#125;, &#123; id: &#x27;1-1-1&#x27;, menu_name: &#x27;ç”¨æˆ·ç®¡ç†åˆ—è¡¨&#x27;, menu_url: &#x27;setting.permission.user_list&#x27;, parent_id: &#x27;1-1&#x27; &#125;, &#123; id: &#x27;1-1-2&#x27;, menu_name: &#x27;ç”¨æˆ·ç®¡ç†æ–°å¢&#x27;, menu_url: &#x27;setting.permission.user_add&#x27;, parent_id: &#x27;1-1&#x27; &#125;, &#123; id: &#x27;1-1-3&#x27;, menu_name: &#x27;è§’è‰²ç®¡ç†åˆ—è¡¨&#x27;, menu_url: &#x27;setting.permission.role_list&#x27;, parent_id: &#x27;1-1&#x27; &#125;, &#123; id: &#x27;1-2&#x27;, menu_name: &#x27;èœå•è®¾ç½®&#x27;, menu_url: &#x27;setting.menu&#x27;, parent_id: &#x27;1&#x27; &#125;, &#123; id: &#x27;1-2-1&#x27;, menu_name: &#x27;èœå•åˆ—è¡¨&#x27;, menu_url: &#x27;setting.menu.menu_list&#x27;, parent_id: &#x27;1-2&#x27; &#125;, &#123; id: &#x27;1-2-2&#x27;, menu_name: &#x27;èœå•æ·»åŠ &#x27;, menu_url: &#x27;setting.menu.menu_add&#x27;, parent_id: &#x27;1-2&#x27; &#125;, &#123; id: &#x27;2&#x27;, menu_name: &#x27;è®¢å•&#x27;, menu_url: &#x27;order&#x27;, parent_id: 0 &#125;, &#123; id: &#x27;2-1&#x27;, menu_name: &#x27;æŠ¥å•å®¡æ ¸&#x27;, menu_url: &#x27;order.orderreview&#x27;, parent_id: &#x27;2&#x27; &#125;, &#123; id: &#x27;2-2&#x27;, menu_name: &#x27;é€€æ¬¾ç®¡ç†&#x27;, menu_url: &#x27;order.refundmanagement&#x27;, parent_id: &#x27;2&#x27; &#125;, &#123; id: &#x27;2-2-1&#x27;, menu_name: &#x27;é€€æ¬¾ç®¡ç†2-1&#x27;, menu_url: &#x27;order.refundmanagement&#x27;, parent_id: &#x27;2-2&#x27; &#125; ] // è¾“å‡º console.log( fommat(&#123; arrayList: menu_list, pidStr: &#x27;parent_id&#x27; &#125;) )","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"HTML/CSS/JavaScript","slug":"HTML-CSS-JavaScript","permalink":"https://guoshunfa.com/tags/HTML-CSS-JavaScript/"},{"name":"ç»„ä»¶åº“","slug":"ç»„ä»¶åº“","permalink":"https://guoshunfa.com/tags/%E7%BB%84%E4%BB%B6%E5%BA%93/"}]},{"title":"Webç»„ä»¶åº“ PubSubJS æ¶ˆæ¯å‘å¸ƒè®¢é˜…","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/webç»„ä»¶åº“/Webç»„ä»¶åº“PubSubJSæ¶ˆæ¯å‘å¸ƒè®¢é˜…","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.264Z","comments":true,"path":"2022/07/Webç»„ä»¶åº“PubSubJSæ¶ˆæ¯å‘å¸ƒè®¢é˜…/","link":"","permalink":"https://guoshunfa.com/2022/07/Web%E7%BB%84%E4%BB%B6%E5%BA%93PubSubJS%E6%B6%88%E6%81%AF%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/","excerpt":"","text":"å‰å¾€ Github 1. PubSubJS ä»‹ç»PubSubJSæ˜¯ä¸€ä¸ªç”¨JavaScriptç¼–å†™çš„åŸºäºä¸»é¢˜çš„å‘å¸ƒ&#x2F;è®¢é˜…åº“ã€‚ PubSubJSå…·æœ‰åŒæ­¥è§£è€¦ï¼Œå› æ­¤ä¸»é¢˜æ˜¯å¼‚æ­¥å‘å¸ƒçš„ã€‚è¿™æœ‰åŠ©äºä¿æŒç¨‹åºçš„å¯é¢„æµ‹æ€§ï¼Œå› ä¸ºåœ¨æ¶ˆè´¹è€…å¤„ç†ä¸»é¢˜æ—¶ï¼Œä¸»é¢˜çš„å‘èµ·è€…ä¸ä¼šè¢«é˜»æ­¢ã€‚ å¯¹äºå†’é™©å®¶æ¥è¯´ï¼ŒPubSubJSè¿˜æ”¯æŒåŒæ­¥ä¸»é¢˜å‘å¸ƒã€‚è¿™å¯èƒ½ä¼šåœ¨æŸäº›ç¯å¢ƒä¸­ï¼ˆæµè§ˆå™¨ï¼Œä¸æ˜¯æ‰€æœ‰ç¯å¢ƒï¼‰åŠ å¿«é€Ÿåº¦ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´ä¸€äº›éå¸¸éš¾ä»¥æ¨ç†çš„ç¨‹åºï¼Œå³ä¸€ä¸ªä¸»é¢˜è§¦å‘åŒä¸€æ‰§è¡Œé“¾ä¸­å¦ä¸€ä¸ªä¸»é¢˜çš„å‘å¸ƒã€‚ å•ä¸€æµç¨‹PubSubJSæ—¨åœ¨ç”¨äºå•ä¸ªè¿›ç¨‹ï¼Œä¸æ˜¯å¤šè¿›ç¨‹åº”ç”¨ç¨‹åºï¼ˆå¦‚Node.js â€“ å…·æœ‰è®¸å¤šå­è¿›ç¨‹çš„é›†ç¾¤ï¼‰çš„å¥½å€™é€‰ç¨‹åºã€‚å¦‚æœæ‚¨çš„Node.jsåº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªå•ä¸€çš„è¿›ç¨‹åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆæ‚¨å°±å¾ˆå¥½ã€‚å¦‚æœå®ƒæ˜¯ï¼ˆæˆ–å°†è¦ï¼‰ä¸€ä¸ªå¤šè¿›ç¨‹åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯èƒ½æœ€å¥½ä½¿ç”¨redis Pub&#x2F;Subæˆ–ç±»ä¼¼ ä¸»è¦åŠŸèƒ½ æ— ä¾èµ–é¡¹ åŒæ­¥è§£è€¦ ES3å…¼å®¹ã€‚PubSubJSåº”è¯¥èƒ½å¤Ÿåœ¨å¯ä»¥æ‰§è¡ŒJavaScriptçš„ä»»ä½•åœ°æ–¹è¿è¡Œã€‚æµè§ˆå™¨ã€æœåŠ¡å™¨ã€ç”µå­ä¹¦é˜…è¯»å™¨ã€æ—§æ‰‹æœºã€æ¸¸æˆæœºã€‚ AMD&#x2F;CommonJSæ¨¡å—æ”¯æŒ ä¸ä¿®æ”¹è®¢é˜…è€…ï¼ˆjQueryè‡ªå®šä¹‰äº‹ä»¶ä¿®æ”¹è®¢é˜…è€…ï¼‰ æ˜“äºç†è§£å’Œä½¿ç”¨ï¼ˆæ„Ÿè°¢åŒæ­¥è§£è€¦ï¼‰ å°ï¼ˆç•¥å·ï¼‰ï¼Œå°äº1kbçš„ç¼©å°å’Œgzipped 2. å®‰è£…}}æœ‰å‡ ç§æ–¹æ³•å¯ä»¥è·å–PubSubJS é€šè¿‡npmå®‰è£…ï¼ˆnpm install pubsub-jsï¼‰ é€šè¿‡yarnå®‰è£…ï¼ˆyarn add pubsub-jsï¼‰ ç›´æ¥ä»CDNä½¿ç”¨ http://www.jsdelivr.com/#!pubsubjs https://cdnjs.com/libraries/pubsub-js https://unpkg.com/pubsub-js ä»GitHubä¸‹è½½æ ‡è®°ç‰ˆæœ¬ 3. å¯¼å…¥1234import PubSub from &#x27;pubsub-js&#x27;// or when using CommonJSconst PubSub = require(&#x27;pubsub-js&#x27;); 4. API ä½¿ç”¨4.1. åŸºæœ¬ç¤ºä¾‹12345678910111213141516//åˆ›å»ºä¸€ä¸ªè®¢é˜…ä¸»é¢˜çš„å‡½æ•°var mySubscriber = (msg,data)=&gt;&#123;console.log(msg,data)&#125;// å°†è¯¥åŠŸèƒ½æ·»åŠ åˆ°ç‰¹å®šä¸»é¢˜çš„è®¢é˜…è€…åˆ—è¡¨ä¸­// æˆ‘ä»¬ä¿ç•™äº†è¿”å›çš„ä»¤ç‰Œï¼Œä»¥ä¾¿èƒ½å¤Ÿå–æ¶ˆè®¢é˜…// ä»åé¢çš„ä¸»é¢˜å¼€å§‹var token = PubSub.subscribe(&#x27;MY TOPIC&#x27;, mySubscriber);//å¼‚æ­¥å‘å¸ƒä¸»é¢˜PubSub.publish(&quot;MY TOPIC&quot;, &quot;ä½ å¥½ï¼Œä¸–ç•Œï¼&quot;);//åŒæ­¥å‘å¸ƒä¸»é¢˜ï¼Œè¿™åœ¨æŸäº›ç¯å¢ƒä¸­æ›´å¿«ï¼Œ// ä½†å½“ä¸€ä¸ªä¸»é¢˜è§¦å‘äº†// ç›¸åŒçš„æ‰§è¡Œé“¾// å°å¿ƒä½¿ç”¨ï¼Œè¿™æ˜¯é¾™ï¼ï¼ï¼PubSub.publishSync(&quot;MY TOPIC&quot;,&quot;ä½ å¥½ï¼Œä¸–ç•Œï¼&quot;); 4.2. å–æ¶ˆç‰¹å®šè®¢é˜…12345678910//åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥æ¥æ”¶ä¸»é¢˜var mySubscriber = (msg,data)=&gt;&#123;console.log(msg,data)&#125;//å°†è¯¥å‡½æ•°æ·»åŠ åˆ°ç‰¹å®šä¸»é¢˜çš„è®¢é˜…è€…åˆ—è¡¨ä¸­// æˆ‘ä»¬ä¿ç•™äº†è¿”å›çš„ä»¤ç‰Œï¼Œä»¥ä¾¿èƒ½å¤Ÿå–æ¶ˆè®¢é˜…// ä»åé¢çš„ä¸»é¢˜å¼€å§‹var token = PubSub.subscribe(&#x27;MY TOPIC&#x27;, mySubscriber);//å–æ¶ˆè®¢é˜…æ­¤è®¢é˜…è€…æ­¤ä¸»é¢˜PubSub.unsubscribe(token); 4.3. å–æ¶ˆåŠŸèƒ½çš„æ‰€æœ‰è®¢é˜…12345//åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥æ¥æ”¶ä¸»é¢˜var mySubscriber = (msg,data)=&gt;&#123;console.log(msg,data)&#125;//å–æ¶ˆè®¢é˜…mySubscriberçš„æ‰€æœ‰ä¸»é¢˜PubSub.unsubscribe(mySubscriber); 4.4. æ¸…é™¤ä¸»é¢˜çš„æ‰€æœ‰è®¢é˜…1234567PubSub.subscribe(&#x27;a&#x27;, myFunc1);PubSub.subscribe(&#x27;a.b&#x27;, myFunc2);PubSub.subscribe(&#x27;a.b.c&#x27;, myFunc3);PubSub.unsubscribe(&#x27;a.b&#x27;);// æ²¡æœ‰å…³äºâ€œa.bâ€å’Œâ€œa.b.câ€ä¸»é¢˜çš„è¿›ä¸€æ­¥é€šçŸ¥//â€œaâ€çš„é€šçŸ¥ä»å°†å‘å¸ƒ 4.5. æ¸…é™¤æ‰€æœ‰è®¢é˜…12PubSub.clearAllSubscriptions();// æ‰€æœ‰è®¢é˜…å‡å·²åˆ é™¤ 4.6. è·å–è®¢é˜…12PubSub.getSubscriptions(&#x27;token&#x27;);// æŒ‰ä»£å¸ä»æ‰€æœ‰ä¸»é¢˜è®¢é˜… 4.7. è®¡æ•°è®¢é˜…12PubSub.countSubscriptions(&#x27;token&#x27;);// æŒ‰æ‰€æœ‰ä¸»é¢˜çš„ä»¤ç‰Œè®¡æ•° 4.8. é”™è¯¯å¤„ç†12345// isPublishedæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æœ‰è®¢é˜…è€…æ³¨å†Œäº†æ­¤ä¸»é¢˜var isPublished = PubSub.publish(&#x27;a&#x27;);// å¦‚æœå‡ºç°é—®é¢˜ï¼Œä¸”è®¢é˜…è€…æœªæ³¨å†Œï¼Œä»¤ç‰Œå°†æ˜¯å‡çš„var token = PubSub.subscribe(&#x27;MY TOPIC&#x27;, mySubscriber); 4.9. åˆ†å±‚å¯»å€12345678910111213141516171819202122232425//åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…ï¼Œä»ä¸»é¢˜å±‚æ¬¡ç»“æ„ä¸­æ¥æ”¶æ‰€æœ‰ä¸»é¢˜var myToplevelSubscriber = å‡½æ•°ï¼ˆmsgï¼Œæ•°æ®ï¼‰&#123; console.logï¼ˆ&#x27;é¡¶å±‚ï¼š&#x27;ï¼Œmsgï¼Œæ•°æ®ï¼‰ï¼›&#125;//è®¢é˜…â€œæ±½è½¦â€å±‚æ¬¡ç»“æ„ä¸­çš„æ‰€æœ‰ä¸»é¢˜PubSub.subscribeï¼ˆâ€œcarâ€ï¼ŒmyToplevelSubscriberï¼‰ï¼›//åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…ï¼Œä»…æ¥æ”¶æ¥è‡ªå±‚æ¬¡ç»“æ„æ“ä½œä¸»é¢˜çš„å¶å­ä¸»é¢˜var mySpecificSubscriber = functionï¼ˆmsgï¼Œæ•°æ®ï¼‰&#123; console.log(&#x27;specific: &#x27;, msg, data);&#125;// ä»…è®¢é˜…â€œcar.driveâ€ä¸»é¢˜PubSub.subscribe(&#x27;car.drive&#x27;, mySpecificSubscriber);// å‘å¸ƒä¸€äº›ä¸»é¢˜PubSub.publish(&#x27;car.purchase&#x27;, &#123;name: &#x27;æˆ‘çš„æ–°è½¦&#x27;&#125;);PubSub.publish(&#x27;car.drive&#x27;, &#123;speed: &#x27;14&#x27;&#125;);PubSub.publish(&#x27;car.sell&#x27;, &#123;newOwner: &#x27;å…¶ä»–äºº&#x27;&#125;);// åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†è°ƒç”¨myToplevelSubscriber for all//ä¸»é¢˜ï¼Œæ€»å…±ä¸‰æ¬¡// ä½†æ˜¯ï¼ŒmySpecificSubscriberåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå› ä¸ºå®ƒåª//è®¢é˜…â€œcar.driveâ€ä¸»é¢˜ 5. æç¤ºå¯¹ä¸»é¢˜ä½¿ç”¨â€œå¸¸é‡â€ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²æ–‡æœ¬ã€‚PubSubJSä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºä¸»é¢˜ï¼Œå¹¶å°†å¾ˆé«˜å…´å°è¯•å°†æ‚¨çš„ä¸»é¢˜ä¸ä»»ä½•ä¸»é¢˜ä¸€èµ·äº¤ä»˜ã€‚å› æ­¤ï¼Œå½“æ‚¨è¿›è¡Œé”™åˆ«å­—æ—¶ï¼Œè®©JavaScriptå¼•æ“æŠ±æ€¨ï¼Œä»è€Œé¿å…æ²®ä¸§çš„è°ƒè¯•ã€‚ 5.1. ä½¿ç”¨â€œå¸¸é‡â€çš„ç¤ºä¾‹1234567891011121314// ğŸ‘ åçš„ä½¿ç”¨PubSub.subscribe(&#x27;hello&#x27;, function (msg, data) &#123; console.log(data)&#125;);PubSub.publish(&#x27;hello&#x27;, &#x27;world&#x27;);// ğŸ‘ å°±å¾—è¿™ä¹ˆç”¨var MY_TOPIC = &#x27;hello&#x27;;PubSub.subscribe(MY_TOPIC, function (msg, data) &#123; console.log(data)&#125;);PubSub.publish(MY_TOPIC, &#x27;world&#x27;); 5.2. ä½¿ç”¨ES6&#x2F;7è¯­æ³•çš„â€œç¬¦å·å¸¸æ•°â€ç¤ºä¾‹12345678910// event-types.jsexport const MY_TOPIC = Symbol(&#x27;MY_TOPIC&#x27;)// somefile.jsimport &#123; MY_TOPIC &#125; from &#x27;./event-types.js&#x27;PubSub.subscribe(MY_TOPIC, function (msg, data) &#123; console.log(data)&#125;);PubSub.publish(MY_TOPIC, &#x27;world&#x27;); 5.3. å¼€å‘è€…å·¥å…·ä¸­å †æ ˆè·Ÿè¸ªçš„å³æ—¶ä¾‹å¤–ä»1.3.2ç‰ˆæœ¬å¼€å§‹ï¼Œæ‚¨å¯ä»¥å¼ºåˆ¶ç«‹å³å¼‚å¸¸ï¼ˆè€Œä¸æ˜¯å»¶è¿Ÿå¼‚å¸¸ï¼‰ï¼Œè¿™çš„å¥½å¤„æ˜¯åœ¨å¼€å‘å·¥å…·ä¸­æŸ¥çœ‹æ—¶ä¿æŒå †æ ˆè·Ÿè¸ªã€‚ è¿™åº”è¯¥è¢«è§†ä¸ºä»…å¼€å‘é€‰é¡¹ï¼Œå› ä¸ºPubSubJSæ—¨åœ¨å°è¯•å°†æ‚¨çš„ä¸»é¢˜äº¤ä»˜ç»™æ‰€æœ‰è®¢é˜…è€…ï¼Œå³ä½¿æœ‰äº›è®¢é˜…è€…å¤±è´¥ã€‚ åœ¨å¼€å‘ä¸­è®¾ç½®å³æ—¶å¼‚å¸¸å¾ˆå®¹æ˜“ï¼Œåªéœ€åœ¨åŠ è½½åå‘Šè¯‰PubSubJSã€‚ 1PubSub.immediateExceptions = true; 6. æ›¿ä»£æ–¹æ¡ˆè¿™äº›æ˜¯å‡ ä¸ªæ›¿ä»£é¡¹ç›®ï¼Œä¹Ÿåœ¨JavaScriptä¸­å®ç°åŸºäºä¸»é¢˜çš„å‘å¸ƒè®¢é˜…ã€‚ http://www.joezimjs.com/projects/publish-subscribe-jquery-plugin/ http://amplifyjs.com/api/pubsub/ http://radio.uxder.com/ â€” é¢å‘â€œæ¸ é“â€ï¼Œæ²¡æœ‰ä¾èµ–æ€§ https://github.com/pmelander/Subtopic - æ”¯æŒé¦™è‰ã€ä¸‹åˆ’çº¿ã€jQueryï¼Œç”šè‡³å¯ä»¥åœ¨NuGetä¸­æä¾› å‚è€ƒæ–‡æ¡£ PubSubJS github readmeæ–‡æ¡£ç›´è¯‘","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"HTML/CSS/JavaScript","slug":"HTML-CSS-JavaScript","permalink":"https://guoshunfa.com/tags/HTML-CSS-JavaScript/"},{"name":"PubSubJS","slug":"PubSubJS","permalink":"https://guoshunfa.com/tags/PubSubJS/"}]},{"title":"Webç»„ä»¶åº“ iframeå¼•å…¥å„å¹³å°è§†é¢‘","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/webç»„ä»¶åº“/Webç»„ä»¶åº“iframeå¼•å…¥å„å¹³å°è§†é¢‘","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.265Z","comments":true,"path":"2022/07/Webç»„ä»¶åº“iframeå¼•å…¥å„å¹³å°è§†é¢‘/","link":"","permalink":"https://guoshunfa.com/2022/07/Web%E7%BB%84%E4%BB%B6%E5%BA%93iframe%E5%BC%95%E5%85%A5%E5%90%84%E5%B9%B3%E5%8F%B0%E8%A7%86%E9%A2%91/","excerpt":"","text":"1. å¼•å…¥Bç«™è§†é¢‘1.1. æ•ˆæœ ä»£ç ï¼š 1&lt;iframe src=&quot;//player.bilibili.com/player.html?aid=420367466&amp;bvid=BV1N3411q7z7&amp;cid=401728312&amp;page=1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0&quot; scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot; style=&quot;width: 100%;height: 500px;max-width: 100%;align: center;padding: 20px 0;&quot;&gt; &lt;/iframe&gt; 1.2. å®ç°æ‰¾åˆ°Bç«™è§†é¢‘ä¸‹æ–¹åˆ†äº«ï¼Œå°†åµŒå…¥ä»£ç æ”¾å…¥æºä»£ç ä¸­å³å¯å±•ç¤ºBç«™è§†é¢‘ã€‚ ä¾‹ï¼š 1&lt;iframe src=&quot;//player.bilibili.com/player.html?aid=420367466&amp;bvid=BV1N3411q7z7&amp;cid=401728312&amp;page=1&quot; scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot;&gt; &lt;/iframe&gt; 1.2.1. å‚æ•°æè¿°ï¼ˆsrcï¼‰ key è¯´æ˜ aid ä¹‹å‰ B ç«™ä½¿ç”¨çš„ AV å· bvid ç›®å‰çš„ BV å· page ç¬¬å‡ ä¸ªè§†é¢‘, èµ·å§‹ä¸‹æ ‡ä¸º 1 (é»˜è®¤å€¼ä¹Ÿæ˜¯ä¸º 1)å°±æ˜¯ B ç«™è§†é¢‘, é€‰é›†é‡Œçš„, ç¬¬å‡ ä¸ªè§†é¢‘ as_wide æ˜¯å¦å®½å± ã€1: å®½å±, 0: å°å±ã€‘ high_quality æ˜¯å¦é«˜æ¸… ã€1: é«˜æ¸…(æœ€é«˜1080p) &#x2F; 0: æœ€ä½è§†é¢‘è´¨é‡(é»˜è®¤)ã€‘ danmaku æ˜¯å¦å¼€å¯å¼¹å¹• ã€1: å¼€å¯(é»˜è®¤), 0: å…³é—­ã€‘ 1.2.2. è°ƒæ•´æ ·å¼123456789&lt;style scoped lang=&#x27;stylus&#x27;&gt;iframe &#123; width: 100%; height: 500px; max-width: 100%; align: center; padding: 20px 0;&#125;&lt;/style&gt; æœ€ç»ˆæ•ˆæœï¼š 2. å¼•å…¥è…¾è®¯è§†é¢‘ ä¸Bç«™è§†é¢‘åŒç†ï¼Œå¼•å…¥å†…åµŒä»£ç å³å¯æŸ¥çœ‹è§†é¢‘ã€‚ 2.1. æ•ˆæœ ä»£ç ï¼š 1&lt;iframe frameborder=&quot;0&quot; src=&quot;https://v.qq.com/iframe/player.html?vid=v3270e4uem9&quot; allowFullScreen=&quot;true&quot; style=&quot;width: 100%;height: 500px;max-width: 100%;align: center;padding: 20px 0;&quot;&gt;&lt;/iframe&gt; 2.2. å®ç°2.2.1. å‚æ•°æè¿° key è¯´æ˜ vid è§†é¢‘å”¯ä¸€å€¼ 2.2.1.1. å»å¹¿å‘Šæœ‰å¹¿å‘Šï¼š 1&lt;center&gt;&lt;iframe frameborder=&quot;0&quot; src=&quot;https://v.qq.com/txp/iframe/player.html?vid=h30676epxvg&quot; width=&quot;100%&quot; height=&quot;240&quot;&gt;&lt;/iframe&gt;&lt;/center&gt; æ— å¹¿å‘Šï¼š 1&lt;center&gt;&lt;iframe frameborder=&quot;0&quot; src=&quot;https://v.qq.com/iframe/player.html?vid=h30676epxvg&quot; width=&quot;100%&quot; height=&quot;240&quot;&gt;&lt;/iframe&gt;&lt;/center&gt; åœ°å€å»æ‰&#x2F;txpï¼Œå¯å…³é—­å¹¿å‘Šã€‚","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"iframe","slug":"iframe","permalink":"https://guoshunfa.com/tags/iframe/"}]},{"title":"RSA ç®—æ³•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç†è®º/åŠ å¯†/RSAç®—æ³•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.277Z","comments":true,"path":"2022/07/RSAç®—æ³•/","link":"","permalink":"https://guoshunfa.com/2022/07/RSA%E7%AE%97%E6%B3%95/","excerpt":"","text":"1. RSA ç®—æ³•ä»‹ç» éå¯¹ç§°åŠ å¯†ï¼Œå³ï¼šPKï¼ˆPUBLIC_KEY å…¬é’¥ï¼‰ ä¸ SKï¼ˆ SECRET_KEY å¯†é’¥ï¼‰ ä¸æ˜¯åŒä¸€ä¸ªã€‚ PK åŠ å¯†æ—¶ï¼Œå¿…é¡»ç”¨ SK è§£å¯†ã€åä¹‹ SK åŠ å¯†æ—¶ï¼Œå¿…é¡»ç”¨ PK è§£å¯†ã€‚ PK å†³å®š SKï¼Œä½†æ˜¯ PK å¾ˆéš¾ç®—å‡º SKï¼ˆæ•°å­¦åŸç†ï¼šä¸¤ä¸ªå¤§è´¨æ•°ç›¸ä¹˜ï¼Œç§¯å¾ˆéš¾å› å¼åˆ†è§£ï¼‰ã€‚ é€Ÿåº¦æ…¢ï¼Œé€‚åˆå¯¹å°‘é‡æ•°æ®åŠ å¯†ã€‚ 2. Java ä½¿ç”¨RSAç®—æ³• è¿™é‡Œçš„ä¾‹å­ å…¬é’¥ç§é’¥ä¸­ä½¿ç”¨äº†å¤–åœ¨keyï¼Œè·å–&#x2F;ç”Ÿæˆå…¬é’¥ç§é’¥æ—¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185import org.apache.tomcat.util.codec.binary.Base64;import sun.misc.BASE64Decoder;import sun.misc.BASE64Encoder;import javax.crypto.Cipher;import java.security.*;import java.security.spec.EncodedKeySpec;import java.security.spec.PKCS8EncodedKeySpec;import java.security.spec.X509EncodedKeySpec;/** * RSA éå¯¹ç§°åŠ å¯†å·¥å…·ç±»ã€‚ * 1ã€å…¬é’¥ï¼ˆPUBLIC_KEYï¼‰ã€ç§é’¥ï¼šPRIVATE_KEY å¿…é¡»åˆ†å¼€ä½¿ç”¨ï¼Œæ¯”å¦‚å…¬é’¥åŠ å¯†æ—¶ï¼Œå¿…é¡»æ˜¯ç§é’¥è§£å¯†ï¼Œåä¹‹ç§é’¥åŠ å¯†æ—¶ï¼Œå¿…é¡»æ˜¯å…¬é’¥è§£å¯† */public class CipherRsaUtils &#123; /** * CIPHER_TRANSFORMS : cipher å®ä¾‹åŒ–æ—¶çš„ åŠ å¯†ç®—æ³•/åé¦ˆæ¨¡å¼/å¡«å……æ–¹æ¡ˆã€‚ECB è¡¨ç¤ºæ— å‘é‡æ¨¡å¼ * ALGORITHM: åˆ›å»ºå¯†é’¥æ—¶ä½¿ç”¨çš„ç®—æ³• * KEY_PAIR_LENGTH: ç§˜é’¥å¯¹é•¿åº¦ã€‚æ•°å€¼è¶Šå¤§ï¼Œèƒ½åŠ å¯†çš„å†…å®¹å°±è¶Šå¤§ã€‚ * &lt;p&gt; * å¦‚ KEY_PAIR_LENGTH ä¸º 1024 æ—¶åŠ å¯†æ•°æ®çš„é•¿åº¦ä¸èƒ½è¶…è¿‡ 117 å­—èŠ‚ * å¦‚ KEY_PAIR_LENGTH ä¸º 2048 æ—¶åŠ å¯†æ•°æ®çš„é•¿åº¦ä¸èƒ½è¶…è¿‡ 245 å­—èŠ‚ * ä¾æ¬¡ç±»æ¨ * &lt;/p&gt; */ private static final String CIPHER_TRANSFORMS = &quot;RSA/ECB/PKCS1Padding&quot;; private static final int KEY_PAIR_LENGTH = 1024; /** * ç”Ÿæˆ RSA å¯†é’¥å¯¹ï¼šå…¬é’¥ï¼ˆPUBLIC_KEYï¼‰ã€ç§é’¥ï¼šPRIVATE_KEY * * @param secureRandomSeed ï¼šSecureRandom éšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­ï¼Œåªè¦ç§å­ç›¸åŒï¼Œåˆ™ç”Ÿæˆçš„å…¬é’¥ã€ç§é’¥å°±æ˜¯åŒä¸€å¯¹. * &lt;p&gt;randomSeed é•¿åº¦å¯ä»¥è‡ªå®šä¹‰ï¼ŒåŠ /è§£å¯†å¿…é¡»æ˜¯åŒä¸€ä¸ª.&lt;/p&gt; * @return */ public static KeyPair generateRsaKeyPair(String secureRandomSeed) &#123; //KeyPair æ˜¯å¯†é’¥å¯¹ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰çš„ç®€å•æŒæœ‰è€…ã€‚åŠ å¯†ã€è§£å¯†éƒ½éœ€è¦ä½¿ç”¨. KeyPair keyPair = null; try &#123; //è·å–ç”Ÿæˆ RSA åŠ å¯†ç®—æ³•çš„å…¬é’¥/ç§é’¥å¯¹ KeyPairGenerator å¯¹è±¡ KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;); //è·å–å®ç°æŒ‡å®šç®—æ³•ï¼ˆSHA1PRNGï¼‰çš„éšæœºæ•°ç”Ÿæˆå™¨ï¼ˆRNGï¼‰å¯¹è±¡. SecureRandom secureRandom = SecureRandom.getInstance(&quot;SHA1PRNG&quot;); //é‡æ–°è®¾å®šæ­¤éšæœºå¯¹è±¡çš„ç§å­. secureRandom.setSeed(secureRandomSeed.getBytes()); /** * initialize(int keySize, SecureRandom random):ä½¿ç”¨ç»™å®šçš„éšæœºæºï¼ˆrandomï¼‰åˆå§‹åŒ–ç‰¹å®šå¯†é’¥å¤§å°çš„å¯†é’¥å¯¹ç”Ÿæˆå™¨ã€‚ * keySize: å¥çš„å¤§å°å€¼ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹å®šäºç®—æ³•çš„åº¦é‡ã€‚å€¼è¶Šå¤§ï¼Œèƒ½åŠ å¯†çš„å†…å®¹å°±è¶Šå¤šï¼Œå¦åˆ™ä¼šæŠ›å¼‚å¸¸ï¼šjavax.crypto.IllegalBlockSizeException: Data must not be longer than xxx bytes * å¦‚ keySize ä¸º 2048 æ—¶åŠ å¯†æ•°æ®çš„é•¿åº¦ä¸èƒ½è¶…è¿‡ 245 å­—èŠ‚ã€‚ */ keyPairGenerator.initialize(KEY_PAIR_LENGTH, secureRandom); //genKeyPair(): ç”Ÿæˆå¯†é’¥å¯¹ keyPair = keyPairGenerator.genKeyPair(); &#125; catch (NoSuchAlgorithmException e) &#123; e.printStackTrace(); &#125; return keyPair; &#125; /** * ä½¿ç”¨ç§é’¥ï¼ˆPrivateKeyï¼‰å¯¹æ•°æ®è¿›è¡ŒåŠ å¯† æˆ– è§£å¯† * * @param content :å¾…åŠ /è§£å¯†çš„æ•°æ®ã€‚å¦‚æœå¾…è§£å¯†çš„æ•°æ®ï¼Œåˆ™æ˜¯ Base64 ç¼–ç åçš„å¯è§†å­—ç¬¦ä¸². * @param model ï¼š1 è¡¨ç¤ºåŠ å¯†æ¨¡å¼ï¼ˆCipher.ENCRYPT_MODEï¼‰ï¼Œ2 è¡¨ç¤ºè§£å¯†æ¨¡å¼ï¼ˆCipher.DECRYPT_MODEï¼‰ * @param secureRandomSeed ï¼šSecureRandom éšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­ï¼Œåªè¦ç§å­ç›¸åŒï¼Œåˆ™ç”Ÿæˆçš„å…¬é’¥ã€ç§é’¥å°±æ˜¯åŒä¸€å¯¹. * åŠ è§£å¯†å¿…é¡»æ˜¯åŒä¸€ä¸ª. * @return ï¼šè¿”å›åŠ /è§£å¯†åçš„æ•°æ®ï¼Œå¦‚æœæ˜¯åŠ å¯†ï¼Œåˆ™å°†å­—èŠ‚æ•°ç»„ä½¿ç”¨ Base64 è½¬ä¸ºå¯è§†å­—ç¬¦ä¸². */ public static String cipherByPrivateKey(String content, int model, String secureRandomSeed) &#123; String result = &quot;&quot;; try &#123; //è·å– RSA å¯†é’¥å¯¹ KeyPair keyPair = generateRsaKeyPair(secureRandomSeed); /**getPrivate()ï¼šè·å–å¯†é’¥å¯¹çš„ç§é’¥ã€‚ * getEncoded(): è¿”å›å·²ç¼–ç çš„å¯†é’¥ï¼Œå¦‚æœå¯†é’¥ä¸æ”¯æŒç¼–ç ï¼Œåˆ™è¿”å› null*/ byte[] privateEncoded = keyPair.getPrivate().getEncoded(); /**PKCS8EncodedKeySpec(byte[] encodedKey): ä½¿ç”¨ç»™å®šçš„ç¼–ç å¯†é’¥åˆ›å»ºæ–°çš„ PKCS8EncodedKeySpec * PKCS8EncodedKeySpec è¡¨ç¤º ASN.1 å·ç§é’¥çš„ç¼–ç */ EncodedKeySpec encodedKeySpec = new PKCS8EncodedKeySpec(privateEncoded); //åˆ›å»º KeyFactory å¯¹è±¡ï¼Œç”¨äºè½¬æ¢æŒ‡å®šç®—æ³•(RSA)çš„å…¬é’¥/ç§é’¥ã€‚ KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;); //ä»æä¾›çš„å¯†é’¥è§„èŒƒç”Ÿæˆç§é’¥å¯¹è±¡ PrivateKey keyPrivate = keyFactory.generatePrivate(encodedKeySpec); //å®ä¾‹åŒ– Cipher å¯¹è±¡ã€‚ result = encryptionDecryption(content, model, keyPrivate); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return result; &#125; /** * ä½¿ç”¨å…¬é’¥ï¼ˆPublicKeyï¼‰å¯¹æ•°æ®è¿›è¡ŒåŠ å¯† æˆ– è§£è§£ * * @param content :å¾…åŠ è§£å¯†çš„æ•°æ® * @param model ï¼š1 è¡¨ç¤ºåŠ å¯†æ¨¡å¼ï¼ˆCipher.ENCRYPT_MODEï¼‰ï¼Œ2 è¡¨ç¤ºè§£å¯†æ¨¡å¼ï¼ˆCipher.DECRYPT_MODEï¼‰ * @param secureRandomSeed ï¼šSecureRandom éšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­ï¼Œåªè¦ç§å­ç›¸åŒï¼Œåˆ™ç”Ÿæˆçš„å…¬é’¥ã€ç§é’¥å°±æ˜¯åŒä¸€å¯¹. * åŠ è§£å¯†å¿…é¡»æ˜¯åŒä¸€ä¸ª. * @return :è¿”å›åŠ å¯† æˆ–è€… è§£å¯†åçš„æ•°æ® */ public static String cipherByPublicKey(String content, int model, String secureRandomSeed) &#123; String result = &quot;&quot;; try &#123; // å¾—åˆ°å…¬é’¥ KeyPair keyPair = generateRsaKeyPair(secureRandomSeed); EncodedKeySpec keySpec = new X509EncodedKeySpec(keyPair.getPublic().getEncoded()); KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;); PublicKey keyPublic = keyFactory.generatePublic(keySpec); // æ•°æ®åŠ /è§£å¯† result = encryptionDecryption(content, model, keyPublic); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return result; &#125; /** * åŠ å¯†æˆ–è§£å¯† * * @param content :å¾…åŠ è§£å¯†çš„æ•°æ® * @param model ï¼š1 è¡¨ç¤ºåŠ å¯†æ¨¡å¼ï¼ˆCipher.ENCRYPT_MODEï¼‰ï¼Œ2 è¡¨ç¤ºè§£å¯†æ¨¡å¼ï¼ˆCipher.DECRYPT_MODEï¼‰ * @param key ï¼šå…¬é’¥ï¼ˆPUBLIC_KEYï¼‰æˆ– ç§é’¥ï¼ˆPRIVATE_KEYï¼‰çš„ key * @return */ private static String encryptionDecryption(String content, int model, Key key) &#123; String result = &quot;&quot;; try &#123; Cipher cipher = Cipher.getInstance(CIPHER_TRANSFORMS); //init(int opMode, Key key)ï¼šåˆå§‹åŒ– Cipher. cipher.init(model, key); //å¦‚æœæ˜¯è§£å¯†æ¨¡å¼ï¼Œåˆ™éœ€è¦ä½¿ç”¨ Base64 è¿›è¡Œè§£ç . byte[] contentBytes = content.getBytes(); if (model == Cipher.DECRYPT_MODE) &#123; contentBytes = new BASE64Decoder().decodeBuffer(content); &#125; /**æ‰§è¡ŒåŠ å¯† æˆ– è§£å¯†æ“ä½œã€‚å¦‚æœ contentBytes å†…å®¹è¿‡é•¿ï¼Œåˆ™ doFinal å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸. *javax.crypto.IllegalBlockSizeException: Data must not be longer than 245 bytes ï¼šæ•°æ®ä¸èƒ½è¶…è¿‡xxxå­—èŠ‚ * æ­¤æ—¶éœ€è¦è°ƒå¤§ KEY_PAIR_LENGTH çš„å€¼*/ byte[] finalBytes = cipher.doFinal(contentBytes); //å¦‚æœæ˜¯åŠ å¯†ï¼Œåˆ™å°†åŠ å¯†åçš„å­—èŠ‚æ•°ç»„ä½¿ç”¨ Base64 è½¬æˆå¯è§†åŒ–çš„å­—ç¬¦ä¸²ã€‚å¦åˆ™æ˜¯è§£å¯†æ—¶ï¼Œç›´æ¥ new String å­—ç¬¦ä¸². if (model == Cipher.ENCRYPT_MODE) &#123; result = new BASE64Encoder().encode(finalBytes); &#125; else if (model == Cipher.DECRYPT_MODE) &#123; result = new String(finalBytes); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return result; &#125; public static void main(String[] args) &#123; String content = &quot;panda&quot;; String secureRandomSeed = &quot;1646894592726&quot;; System.out.println(&quot;è¢«åŠ å¯†æ•°æ®å­—èŠ‚å¤§å°ï¼š&quot; + content.getBytes().length + &quot; å­—èŠ‚ï¼Œ&quot; + content.length() + &quot; ä¸ªå­—ç¬¦&quot;); System.out.println(&quot;æºå†…å®¹ï¼š\\n&quot; + content); KeyPair keyPair = generateRsaKeyPair(secureRandomSeed); String publicKey = new String(keyPair.getPublic().getEncoded()); System.out.println(&quot;publicKey:\\n&quot; + publicKey); String publicKeyBase64 = new String(Base64.encodeBase64(keyPair.getPublic().getEncoded())); System.out.println(&quot;publicKeyBase64:\\n&quot; + publicKeyBase64); String privateKeyBase64 = new String(Base64.encodeBase64(keyPair.getPrivate().getEncoded())); System.out.println(&quot;privateKeyBase64:\\n&quot; + privateKeyBase64); try &#123; //å…¬é’¥ã€ç§é’¥å¿…é¡»åˆ†å¼€ä½¿ç”¨ï¼Œå…¬é’¥è§£å¯†æ—¶ï¼Œå¿…é¡»æ˜¯ç§é’¥è§£å¯†ï¼Œåä¹‹äº¦ç„¶. String encrypted = CipherRsaUtils.cipherByPublicKey(content, 1, secureRandomSeed); String decrypted = CipherRsaUtils.cipherByPrivateKey(encrypted, 2, secureRandomSeed); System.out.println(&quot;åŠ å¯†åï¼š\\n&quot; + encrypted); System.out.println(&quot;è§£å¯†åï¼š\\n&quot; + decrypted); String decrypted2 = CipherRsaUtils.cipherByPrivateKey(&quot;j1Jg10GQDqD2G5JQQ/0iuITz60XbIZarXT8SckLwqjy6vwOVzM7U0kDBcSP8cpnJIQnz3zQt/6Igi2GejhCfhuFOB3zD9eJb8qCRwG7xRSadnGyi9gD6RJFQAOHd8hde4ra7XuPL7v7JylM2QzYq2GdZDhRkTiNVEeyPn/+aOJE=&quot;, 2, secureRandomSeed); System.out.println(&quot;over:\\n&quot; + decrypted2); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; 3. H5 ä½¿ç”¨RSAç®—æ³• ä½¿ç”¨JSEncryptåŠ å¯†è§£å¯† 3.1. å¯¼å…¥JSEncryptåŒ…1&lt;script type=&quot;text/javascript&quot; src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/3.0.0-rc.1/jsencrypt.min.js&quot;&gt;&lt;/script&gt; è¿™é‡Œä¹ŸåŠ äº†npm åŠ å…¥çš„æ–¹å¼ã€‚ å®‰è£… npm i jsencrypt â€“save å¼•ç”¨ import {JSEncrypt} from â€˜jsencryptâ€™ 3.2. é»˜è®¤å€¼å’Œæ–¹æ³• 3.3. demo12345678910111213141516171819202122232425262728293031// å…¬é’¥const publicKey = &#x27;MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQChJ0KXUmAiLImRWXlqxwKNDjYxRqKHNzMIHNSISsYAERxuK7T9NsJezONsOFeao4gIpTlvtuTnF8/L+d17GNGeIp4cJLO+NMj6RO6N+YJPKMsST/8beVu3sY6kNKy74QzkRXNfyOk/bWXnAPUxO/HjzqYtxetOpQL2pzYxGIysyQIDAQAB&#x27;;// ç§é’¥const privateKey = &#x27;MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKEnQpdSYCIsiZFZeWrHAo0ONjFGooc3Mwgc1IhKxgARHG4rtP02wl7M42w4V5qjiAilOW+25OcXz8v53XsY0Z4inhwks740yPpE7o35gk8oyxJP/xt5W7exjqQ0rLvhDORFc1/I6T9tZecA9TE78ePOpi3F606lAvanNjEYjKzJAgMBAAECgYBjIDsdyVXIr4yPE3JT88Xl7e/3r3MZqSKCwvkYPKY+NEhAnDHf72bv2Seq0Z1RSXXLm5YQ2XdDjqoK1c8egM2uc44eeLGQzygB7IseA1I1wRcuaUVt59KhbRvcWTaK5fLaZ6lad+l/TXfk9Bq5tQEs11lLt1UdRXdDW41pH6OvgQJBAOg4IG4A96aU71TAs1GiGDuLq+pbXD41cn63V2v0Pawli8Kn7wBGgl4l3m3bb+iHJH/IlgQUpD1dtIyhU2zGux0CQQCxqBDoB02wVpUYbzjoFyBmVRiqGULhhz8nlG7XVXNOXuJ6VmAPr1fDdMCcc1YHs3yMc5jE7qqkesf0K0QcK9ydAkBysMXTjsbBj21k/oeSGey9/A28gcLdNqiFzSdwOgD7tM+CJE72Y9yfgzSILYjn31c3hWoSOd+kL1Os4UDCyKRBAkAUrYcqOo9kUu+PpIJvISH4RzdTtRT/wwoqxTARiDSfjpO1wY/0w2fnrBMvIo2E3/NDNcE2SsE528CiPtbyoHhRAkEArzj8fy2T927A08bXv2pmbI7/joQ2GqcIiOA940Cl8B+dTg+GxKuHqJisy4hYJ+3LyWmSVbIGahRoAUKv7yssRg==&#x27;;// å¯†ç const password = &quot;pandacode&quot;;// åŠ å¯†åçš„å¯†ç const encryptPwd = encrypt(password);// è§£å¯†åçš„å¯†ç const decryptPwd = decrypt(encryptPwd);console.log(&quot;å…¬é’¥ï¼š&quot; + publicKey);console.log(&quot;ç§é’¥ï¼š&quot; + privateKey);console.log(&quot;åŸå¯†ç ï¼š&quot; + password);console.log(&quot;å¯†ç åŠ å¯†åï¼š&quot; + encryptPwd);console.log(&quot;å¯†ç è§£å¯†åï¼š&quot; + decryptPwd);// åŠ å¯†function encrypt(msg) &#123; let jsencrypt = new JSEncrypt() jsencrypt.setPublicKey(publicKey) return jsencrypt.encrypt(msg)&#125;// è§£å¯†function decrypt(msg) &#123; let jsencrypt = new JSEncrypt() jsencrypt.setPrivateKey(privateKey) const decryptMsg = jsencrypt.decrypt(msg) return decryptMsg&#125; å‚è€ƒæ–‡æ¡£ Java åŠ å¯†æ‰©å±•ï¼ˆJCEï¼‰æ¡†æ¶ ä¹‹ Cipher åŠ å¯†ä¸è§£å¯†","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://guoshunfa.com/tags/%E7%AE%97%E6%B3%95/"},{"name":"åŠ å¯†","slug":"åŠ å¯†","permalink":"https://guoshunfa.com/tags/%E5%8A%A0%E5%AF%86/"}]},{"title":"åŠ å¯†ç®—æ³•ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç†è®º/åŠ å¯†/åŠ å¯†ç®—æ³•ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.277Z","comments":true,"path":"2022/07/åŠ å¯†ç®—æ³•ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"åŠ å¯†ç®—æ³•ä»‹ç»1. æ•°å­—ç­¾åæ•°å­—ç­¾åï¼Œç®€å•æ¥è¯´å°±æ˜¯é€šè¿‡æä¾› å¯é‰´åˆ« çš„ æ•°å­—ä¿¡æ¯ éªŒè¯ è‡ªèº«èº«ä»½ çš„ä¸€ç§æ–¹å¼ã€‚ä¸€å¥— æ•°å­—ç­¾å é€šå¸¸å®šä¹‰ä¸¤ç§ äº’è¡¥ çš„è¿ç®—ï¼Œä¸€ä¸ªç”¨äº ç­¾åï¼Œå¦ä¸€ä¸ªç”¨äº éªŒè¯ã€‚åˆ†åˆ«ç”± å‘é€è€… æŒæœ‰èƒ½å¤Ÿ ä»£è¡¨è‡ªå·±èº«ä»½ çš„ ç§é’¥ (ç§é’¥ä¸å¯æ³„éœ²),ç”± æ¥å—è€… æŒæœ‰ä¸ç§é’¥å¯¹åº”çš„ å…¬é’¥ ï¼Œèƒ½å¤Ÿåœ¨ æ¥å— åˆ°æ¥è‡ªå‘é€è€…ä¿¡æ¯æ—¶ç”¨äº éªŒè¯ å…¶èº«ä»½ã€‚ æ³¨æ„ï¼šå›¾ä¸­ åŠ å¯†è¿‡ç¨‹ æœ‰åˆ«äº å…¬é’¥åŠ å¯†ï¼Œæ›´å¤š ä»‹ç»æˆ³è¿™é‡Œã€‚ç­¾å æœ€æ ¹æœ¬çš„ç”¨é€”æ˜¯è¦èƒ½å¤Ÿå”¯ä¸€ è¯æ˜å‘é€æ–¹çš„èº«ä»½ï¼Œé˜²æ­¢ ä¸­é—´äººæ”»å‡»ã€CSRF è·¨åŸŸèº«ä»½ä¼ªé€ ã€‚åŸºäºè¿™ä¸€ç‚¹åœ¨è¯¸å¦‚ è®¾å¤‡è®¤è¯ã€ç”¨æˆ·è®¤è¯ã€ç¬¬ä¸‰æ–¹è®¤è¯ ç­‰è®¤è¯ä½“ç³»ä¸­éƒ½ä¼šä½¿ç”¨åˆ° ç­¾åç®—æ³• (å½¼æ­¤çš„å®ç°æ–¹å¼å¯èƒ½ä¼šæœ‰å·®å¼‚)ã€‚ 2. åŠ å¯†å’Œè§£å¯†2.1. åŠ å¯†æ•°æ®åŠ å¯† çš„åŸºæœ¬è¿‡ç¨‹ï¼Œå°±æ˜¯å¯¹åŸæ¥ä¸º æ˜æ–‡ çš„æ–‡ä»¶æˆ–æ•°æ®æŒ‰ æŸç§ç®—æ³• è¿›è¡Œå¤„ç†ï¼Œä½¿å…¶æˆä¸º ä¸å¯è¯» çš„ä¸€æ®µä»£ç ï¼Œé€šå¸¸ç§°ä¸º â€œå¯†æ–‡â€ã€‚é€šè¿‡è¿™æ ·çš„é€”å¾„ï¼Œæ¥è¾¾åˆ° ä¿æŠ¤æ•°æ® ä¸è¢« éæ³•äººçªƒå–ã€é˜…è¯»çš„ç›®çš„ã€‚ 2.2. è§£å¯†åŠ å¯† çš„ é€†è¿‡ç¨‹ ä¸º è§£å¯†ï¼Œå³å°†è¯¥ ç¼–ç ä¿¡æ¯ è½¬åŒ–ä¸ºå…¶ åŸæ¥æ•°æ® çš„è¿‡ç¨‹ã€‚ 3. å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†åŠ å¯†ç®—æ³•åˆ† å¯¹ç§°åŠ å¯† å’Œ éå¯¹ç§°åŠ å¯†ï¼Œå…¶ä¸­å¯¹ç§°åŠ å¯†ç®—æ³•çš„åŠ å¯†ä¸è§£å¯† å¯†é’¥ç›¸åŒï¼Œéå¯¹ç§°åŠ å¯†ç®—æ³•çš„åŠ å¯†å¯†é’¥ä¸è§£å¯† å¯†é’¥ä¸åŒï¼Œæ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç±» ä¸éœ€è¦å¯†é’¥ çš„ æ•£åˆ—ç®—æ³•ã€‚ å¸¸è§çš„ å¯¹ç§°åŠ å¯† ç®—æ³•ä¸»è¦æœ‰ DESã€3DESã€AES ç­‰ï¼Œå¸¸è§çš„ éå¯¹ç§°ç®—æ³• ä¸»è¦æœ‰ RSAã€DSA ç­‰ï¼Œæ•£åˆ—ç®—æ³• ä¸»è¦æœ‰ SHA-1ã€MD5 ç­‰ã€‚ 3.1. å¯¹ç§°åŠ å¯†å¯¹ç§°åŠ å¯†ç®—æ³• æ˜¯åº”ç”¨è¾ƒæ—©çš„åŠ å¯†ç®—æ³•ï¼Œåˆç§°ä¸º å…±äº«å¯†é’¥åŠ å¯†ç®—æ³•ã€‚åœ¨ å¯¹ç§°åŠ å¯†ç®—æ³• ä¸­ï¼Œä½¿ç”¨çš„å¯†é’¥åªæœ‰ä¸€ä¸ªï¼Œå‘é€ å’Œ æ¥æ”¶ åŒæ–¹éƒ½ä½¿ç”¨è¿™ä¸ªå¯†é’¥å¯¹æ•°æ®è¿›è¡Œ åŠ å¯† å’Œ è§£å¯†ã€‚è¿™å°±è¦æ±‚åŠ å¯†å’Œè§£å¯†æ–¹äº‹å…ˆéƒ½å¿…é¡»çŸ¥é“åŠ å¯†çš„å¯†é’¥ã€‚ æ•°æ®åŠ å¯†è¿‡ç¨‹ï¼šåœ¨å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­ï¼Œæ•°æ®å‘é€æ–¹ å°† æ˜æ–‡ (åŸå§‹æ•°æ®) å’Œ åŠ å¯†å¯†é’¥ ä¸€èµ·ç»è¿‡ç‰¹æ®Š åŠ å¯†å¤„ç†ï¼Œç”Ÿæˆå¤æ‚çš„ åŠ å¯†å¯†æ–‡ è¿›è¡Œå‘é€ã€‚ æ•°æ®è§£å¯†è¿‡ç¨‹ï¼šæ•°æ®æ¥æ”¶æ–¹ æ”¶åˆ°å¯†æ–‡åï¼Œè‹¥æƒ³è¯»å–åŸæ•°æ®ï¼Œåˆ™éœ€è¦ä½¿ç”¨ åŠ å¯†ä½¿ç”¨çš„å¯†é’¥ åŠç›¸åŒç®—æ³•çš„ é€†ç®—æ³• å¯¹åŠ å¯†çš„å¯†æ–‡è¿›è¡Œè§£å¯†ï¼Œæ‰èƒ½ä½¿å…¶æ¢å¤æˆ å¯è¯»æ˜æ–‡ã€‚ 3.2. éå¯¹ç§°åŠ å¯†éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œåˆç§°ä¸º å…¬å¼€å¯†é’¥åŠ å¯†ç®—æ³•ã€‚å®ƒéœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼Œä¸€ä¸ªç§°ä¸º å…¬å¼€å¯†é’¥ (public key)ï¼Œå³ å…¬é’¥ï¼Œå¦ä¸€ä¸ªç§°ä¸º ç§æœ‰å¯†é’¥ (private key)ï¼Œå³ ç§é’¥ã€‚ å› ä¸º åŠ å¯† å’Œ è§£å¯† ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯†é’¥ï¼Œæ‰€ä»¥è¿™ç§ç®—æ³•ç§°ä¸º éå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚ å¦‚æœä½¿ç”¨ å…¬é’¥ å¯¹æ•°æ® è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ ç§é’¥ æ‰èƒ½ è¿›è¡Œè§£å¯†ã€‚ å¦‚æœä½¿ç”¨ ç§é’¥ å¯¹æ•°æ® è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ å…¬é’¥ æ‰èƒ½ è¿›è¡Œè§£å¯†ã€‚ ä¾‹å­ï¼šç”²æ–¹ç”Ÿæˆ ä¸€å¯¹å¯†é’¥ å¹¶å°†å…¶ä¸­çš„ä¸€æŠŠä½œä¸º å…¬é’¥ å‘å…¶å®ƒäººå…¬å¼€ï¼Œå¾—åˆ°è¯¥å…¬é’¥çš„ ä¹™æ–¹ ä½¿ç”¨è¯¥å¯†é’¥å¯¹æœºå¯†ä¿¡æ¯ è¿›è¡ŒåŠ å¯† åå†å‘é€ç»™ç”²æ–¹ï¼Œç”²æ–¹å†ä½¿ç”¨è‡ªå·±ä¿å­˜çš„å¦ä¸€æŠŠ **ä¸“ç”¨å¯†é’¥ (ç§é’¥)**ï¼Œå¯¹ åŠ å¯† åçš„ä¿¡æ¯ è¿›è¡Œè§£å¯†ã€‚ 4. å¸¸ç”¨åŠ å¯†ç®—æ³•4.1. å¸¸ç”¨ç®—æ³•æè¿° åŠ å¯†ç®—æ³• æè¿° SHA1 SHA1 æ˜¯ æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼ŒSHA1 æ¯” MD5 çš„ å®‰å…¨æ€§æ›´å¼ºã€‚å¯¹äºé•¿åº¦å°äº 2 ^ 64 ä½çš„æ¶ˆæ¯ï¼ŒSHA1 ä¼šäº§ç”Ÿä¸€ä¸ª 160 ä½çš„ æ¶ˆæ¯æ‘˜è¦ã€‚åŸºäº MD5ã€SHA1 çš„ä¿¡æ¯æ‘˜è¦ç‰¹æ€§ä»¥åŠ ä¸å¯é€† (ä¸€èˆ¬è€Œè¨€)ï¼Œå¯ä»¥è¢«åº”ç”¨åœ¨æ£€æŸ¥ æ–‡ä»¶å®Œæ•´æ€§ ä»¥åŠ æ•°å­—ç­¾å ç­‰åœºæ™¯ã€‚ BASE64 1ã€BASE64 æœ‰è‡ªå·±çš„ç¼–ç è¡¨ï¼Œå¯ç¼–ç ï¼Œä¹Ÿå¯è§£ç ï¼›è§£ç åèƒ½å¾—åˆ°æºå†…å®¹ã€‚2ã€BASE64 ç¼–ç çš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œéšç€æºå­—ç¬¦ä¸²çš„å¢åŠ è€Œå¢åŠ ã€‚3ã€åœ¨æŸäº›ä¸æ–¹ä¾¿ä½¿ç”¨ä¸­æ–‡çš„åœ°æ–¹ï¼Œå¯ä»¥é€šè¿‡ BASE64 ç¼–ç æˆå¯è§å­—ç¬¦ï¼Œéœ€è¦ä¸­æ–‡æ—¶å†è§£ç å›æ¥å³å¯ï¼Œæ¯”å¦‚ url åœ°å€ï¼Œæˆ–è€… Cookie. MD5 ä¿¡æ¯æ‘˜è¦æ˜¯å®‰å…¨çš„å•å‘å“ˆå¸Œå‡½æ•°ï¼Œå¯¹å¤§å°çš„ä¿¡æ¯è¾“å‡ºå›ºå®šé•¿åº¦çš„å“ˆå¸Œå€¼ï¼Œå•å‘åŠ å¯†ã€æ•°æ®ä¸å¯é€†ã€‚æ‘˜è¦å¥½æ¯”æŒ‡çº¹ï¼Œæ¯ä¸ªäººéƒ½æ˜¯å”¯ä¸€çš„ï¼Œç›¸åŒçš„æºæ•°æ®ï¼Œæ‘˜è¦ä¹Ÿä¸€æ ·ï¼Œä¸åŒçš„æ•°æ®ï¼Œæ‘˜è¦åˆ™ä¸ä¸€æ ·ã€‚æ‘˜è¦åªæ˜¯æºæ•°æ®çš„å±€éƒ¨ï¼Œæ‰€ä»¥æƒ³è¦è§£ç å›å»æ¢å¤æ•´ä¸ªæºæ•°æ®æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºæ˜¯ä¸å®Œæ•´çš„ã€‚æ— è®ºæ˜¯å¤šé•¿çš„è¾“å…¥ï¼ŒMD5 éƒ½ä¼šè¾“å‡ºé•¿åº¦ä¸º 128bits çš„ä¸€ä¸ªä¸² (é€šå¸¸ç”¨ 16 è¿›åˆ¶ è¡¨ç¤ºä¸º 32 ä¸ªå­—ç¬¦)ã€‚ DES Data Encrytion Standardï¼ˆæ•°æ®åŠ å¯†æ ‡å‡†) , ç‰¹ç‚¹ï¼š1. å¯¹ç§°åŠ å¯† 2. åŒä¸€ä¸ª SECRET_KEYï¼ˆå¯†é’¥ï¼‰ AES Advanced Encrytion Standardï¼ˆé«˜çº§åŠ å¯†æ ‡å‡†ï¼‰ï¼Œç‰¹ç‚¹ï¼š1. å¯¹ç§°åŠ å¯† 2. ä¸€ä¸ª SECRET_KEYï¼ˆå¯†é’¥ï¼‰æ‰©å±•æˆå¤šä¸ªå­ SKï¼Œè½®åŠ å¯† RSA RSA åŠ å¯†ç®—æ³•æ˜¯ç›®å‰æœ€æœ‰å½±å“åŠ›çš„ å…¬é’¥åŠ å¯†ç®—æ³•ï¼Œå¹¶ä¸”è¢«æ™®éè®¤ä¸ºæ˜¯ç›®å‰ æœ€ä¼˜ç§€çš„å…¬é’¥æ–¹æ¡ˆ ä¹‹ä¸€ã€‚RSA æ˜¯ç¬¬ä¸€ä¸ªèƒ½åŒæ—¶ç”¨äº åŠ å¯† å’Œ æ•°å­—ç­¾å çš„ç®—æ³•ï¼Œå®ƒèƒ½å¤Ÿ æŠµæŠ— åˆ°ç›®å‰ä¸ºæ­¢å·²çŸ¥çš„ æ‰€æœ‰å¯†ç æ”»å‡»ï¼Œå·²è¢« ISO æ¨èä¸ºå…¬é’¥æ•°æ®åŠ å¯†æ ‡å‡†ã€‚1. éå¯¹ç§°åŠ å¯†ï¼Œå³ï¼šPKï¼ˆPUBLIC_KEY å…¬é’¥ï¼‰ ä¸ SKï¼ˆ SECRET_KEY å¯†é’¥ï¼‰ ä¸æ˜¯åŒä¸€ä¸ª 2. PK åŠ å¯†æ—¶ï¼Œå¿…é¡»ç”¨ SK è§£å¯†ã€åä¹‹ SK åŠ å¯†æ—¶ï¼Œå¿…é¡»ç”¨ PK è§£å¯†ã€‚3. PK å†³å®š SKï¼Œä½†æ˜¯ PK å¾ˆéš¾ç®—å‡º SKï¼ˆæ•°å­¦åŸç†ï¼šä¸¤ä¸ªå¤§è´¨æ•°ç›¸ä¹˜ï¼Œç§¯å¾ˆéš¾å› å¼åˆ†è§£ï¼‰4. é€Ÿåº¦æ…¢ï¼Œé€‚åˆå¯¹å°‘é‡æ•°æ®åŠ å¯† 4.2. å¸¸ç”¨ç®—æ³•å¯¹æ¯”4.2.1. æ•£åˆ—ç®—æ³•æ¯”è¾ƒ åç§° å®‰å…¨æ€§ é€Ÿåº¦ SHA-1 é«˜ æ…¢ MD5 ä¸­ å¿« 4.2.2. å¯¹ç§°åŠ å¯†ç®—æ³•æ¯”è¾ƒ åç§° å¯†é’¥åç§° è¿è¡Œé€Ÿåº¦ å®‰å…¨æ€§ èµ„æºæ¶ˆè€— DES 56ä½ è¾ƒå¿« ä½ ä¸­ 3DES 112ä½æˆ–168ä½ æ…¢ ä¸­ é«˜ AES 128ã€192ã€256ä½ å¿« é«˜ ä½ 4.2.3. éå¯¹ç§°åŠ å¯†ç®—æ³•æ¯”è¾ƒ åç§° æˆç†Ÿåº¦ å®‰å…¨æ€§ è¿ç®—é€Ÿåº¦ èµ„æºæ¶ˆè€— RSA é«˜ é«˜ ä¸­ ä¸­ ECC é«˜ é«˜ æ…¢ é«˜ 4.3. å¯¹ç§°ç®—æ³•ä¸éå¯¹ç§°åŠ å¯†ç®—æ³•4.3.1. å¯¹ç§°ç®—æ³•å¯†é’¥ç®¡ç†ï¼šæ¯”è¾ƒéš¾ï¼Œä¸é€‚åˆäº’è”ç½‘ï¼Œä¸€èˆ¬ç”¨äºå†…éƒ¨ç³»ç»Ÿ å®‰å…¨æ€§ï¼šä¸­ åŠ å¯†é€Ÿåº¦ï¼šå¿«å¥½ å‡ ä¸ªæ•°é‡çº§ (è½¯ä»¶åŠ è§£å¯†é€Ÿåº¦è‡³å°‘å¿« 100 å€ï¼Œæ¯ç§’å¯ä»¥åŠ è§£å¯†æ•° M æ¯”ç‰¹ æ•°æ®)ï¼Œé€‚åˆå¤§æ•°æ®é‡çš„åŠ è§£å¯†å¤„ç† 4.3.2. éå¯¹ç§°ç®—æ³•å¯†é’¥ç®¡ç†ï¼šå¯†é’¥å®¹æ˜“ç®¡ç† å®‰å…¨æ€§ï¼šé«˜ åŠ å¯†é€Ÿåº¦ï¼šæ¯”è¾ƒæ…¢ï¼Œé€‚åˆ å°æ•°æ®é‡ åŠ è§£å¯†æˆ–æ•°æ®ç­¾å å‚è€ƒæ–‡æ¡£ æµ…è°ˆå¸¸è§çš„ä¸ƒç§åŠ å¯†ç®—æ³•åŠå®ç° Java åŠ å¯†æ‰©å±•ï¼ˆJCEï¼‰æ¡†æ¶ ä¹‹ Cipher åŠ å¯†ä¸è§£å¯†","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://guoshunfa.com/tags/%E7%AE%97%E6%B3%95/"},{"name":"åŠ å¯†","slug":"åŠ å¯†","permalink":"https://guoshunfa.com/tags/%E5%8A%A0%E5%AF%86/"}]},{"title":"Leetcodeç¬¬1é¢˜ ä¸¤æ•°ä¹‹å’Œ","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç®—æ³•/leetcode/Leetcodeç¬¬1é¢˜-ä¸¤æ•°ä¹‹å’Œ","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.277Z","comments":true,"path":"2022/07/Leetcodeç¬¬1é¢˜-ä¸¤æ•°ä¹‹å’Œ/","link":"","permalink":"https://guoshunfa.com/2022/07/Leetcode%E7%AC%AC1%E9%A2%98-%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/","excerpt":"","text":"ğŸŒŸé¢˜ç›®æè¿°ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚ ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚ ç¤ºä¾‹ 1ï¼š 123è¾“å…¥ï¼šnums = [2,7,11,15], target = 9è¾“å‡ºï¼š[0,1]è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚ ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šnums = [3,2,4], target = 6è¾“å‡ºï¼š[1,2] ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šnums = [3,3], target = 6è¾“å‡ºï¼š[0,1] æç¤ºï¼š 2 &lt;= nums.length &lt;= 104 -109 &lt;= nums[i] &lt;= 109 -109 &lt;= target &lt;= 109 åªä¼šå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆ è¿›é˜¶ï¼šä½ å¯ä»¥æƒ³å‡ºä¸€ä¸ªæ—¶é—´å¤æ‚åº¦å°äº O(n2) çš„ç®—æ³•å—ï¼Ÿ ğŸ‚ è§£é¢˜æ–¹æ³•1âƒ£ï¸ æ–¹æ³•ä¸€ï¼š 123456789101112class Solution &#123; public int[] twoSum(int[] nums, int target) &#123; HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for(int i = 0 ; i &lt;= nums.length; i++) &#123; if (map.containsKey(target - nums[i])) &#123; return new int[]&#123;map.get(target - nums[i]), i&#125;; &#125; map.put(nums[i], i); &#125; return new int[]&#123;&#125;; &#125;&#125; ğŸ™ æ„Ÿè°¢ åŠ›æ‰£ï¼ˆLeetCodeï¼‰","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://guoshunfa.com/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"Leetcode","slug":"Leetcode","permalink":"https://guoshunfa.com/tags/Leetcode/"}]},{"title":"Leetcodeç¬¬217é¢˜ å­˜åœ¨é‡å¤å…ƒç´ ","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç®—æ³•/leetcode/Leetcodeç¬¬217é¢˜-å­˜åœ¨é‡å¤å…ƒç´ ","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.277Z","comments":true,"path":"2022/07/Leetcodeç¬¬217é¢˜-å­˜åœ¨é‡å¤å…ƒç´ /","link":"","permalink":"https://guoshunfa.com/2022/07/Leetcode%E7%AC%AC217%E9%A2%98-%E5%AD%98%E5%9C%A8%E9%87%8D%E5%A4%8D%E5%85%83%E7%B4%A0/","excerpt":"","text":"ğŸŒŸ é¢˜ç›®æè¿°ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ã€‚å¦‚æœä»»ä¸€å€¼åœ¨æ•°ç»„ä¸­å‡ºç° è‡³å°‘ä¸¤æ¬¡ ï¼Œè¿”å› true ï¼›å¦‚æœæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ äº’ä¸ç›¸åŒï¼Œè¿”å› false ã€‚ ç¤ºä¾‹ 1ï¼š 12è¾“å…¥ï¼šnums = [1,2,3,1]è¾“å‡ºï¼štrue ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šnums = [1,2,3,4]è¾“å‡ºï¼šfalse ç¤ºä¾‹ 3ï¼š 12è¾“å…¥ï¼šnums = [1,1,1,3,3,4,3,2,4,2]è¾“å‡ºï¼štrue æç¤ºï¼š 1 &lt;&#x3D; nums.length &lt;&#x3D; 105 -109 &lt;&#x3D; nums[i] &lt;&#x3D; 109 ğŸ‚ è§£é¢˜æ–¹æ³•1âƒ£ï¸ æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨å¯¹äºæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬å°†å®ƒæ’å…¥åˆ°å“ˆå¸Œè¡¨ä¸­ã€‚å¦‚æœæ’å…¥ä¸€ä¸ªå…ƒç´ æ—¶å‘ç°è¯¥å…ƒç´ å·²ç»å­˜åœ¨äºå“ˆå¸Œè¡¨ä¸­ï¼Œåˆ™è¯´æ˜å­˜åœ¨é‡å¤çš„å…ƒç´ ã€‚ 1234567891011class Solution &#123; public boolean containsDuplicate(int[] nums) &#123; Set&lt;Integer&gt; datas = new HashSet&lt;Integer&gt;(); for(int i = 0; i &lt; nums.length ; i++) &#123; if (!datas.add(nums[i]))&#123; return true; &#125; &#125; return false; &#125;&#125; å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚ ç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚ ğŸ™ æ„Ÿè°¢ åŠ›æ‰£ï¼ˆLeetCodeï¼‰","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://guoshunfa.com/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"Leetcode","slug":"Leetcode","permalink":"https://guoshunfa.com/tags/Leetcode/"}]},{"title":"Leetcodeç¬¬278é¢˜ ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç®—æ³•/leetcode/Leetcodeç¬¬278é¢˜-ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.277Z","comments":true,"path":"2022/07/Leetcodeç¬¬278é¢˜-ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬/","link":"","permalink":"https://guoshunfa.com/2022/07/Leetcode%E7%AC%AC278%E9%A2%98-%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%94%99%E8%AF%AF%E7%9A%84%E7%89%88%E6%9C%AC/","excerpt":"","text":"ğŸŒŸ é¢˜ç›®æè¿°ä½ æ˜¯äº§å“ç»ç†ï¼Œç›®å‰æ­£åœ¨å¸¦é¢†ä¸€ä¸ªå›¢é˜Ÿå¼€å‘æ–°çš„äº§å“ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½ çš„äº§å“çš„æœ€æ–°ç‰ˆæœ¬æ²¡æœ‰é€šè¿‡è´¨é‡æ£€æµ‹ã€‚ç”±äºæ¯ä¸ªç‰ˆæœ¬éƒ½æ˜¯åŸºäºä¹‹å‰çš„ç‰ˆæœ¬å¼€å‘çš„ï¼Œæ‰€ä»¥é”™è¯¯çš„ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½æ˜¯é”™çš„ã€‚ å‡è®¾ä½ æœ‰ n ä¸ªç‰ˆæœ¬ [1, 2, ..., n]ï¼Œä½ æƒ³æ‰¾å‡ºå¯¼è‡´ä¹‹åæ‰€æœ‰ç‰ˆæœ¬å‡ºé”™çš„ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ bool isBadVersion(version) æ¥å£æ¥åˆ¤æ–­ç‰ˆæœ¬å· version æ˜¯å¦åœ¨å•å…ƒæµ‹è¯•ä¸­å‡ºé”™ã€‚å®ç°ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ä½ åº”è¯¥å°½é‡å‡å°‘å¯¹è°ƒç”¨ API çš„æ¬¡æ•°ã€‚ ç¤ºä¾‹ 1ï¼š 1234567è¾“å…¥ï¼šn = 5, bad = 4è¾“å‡ºï¼š4è§£é‡Šï¼šè°ƒç”¨ isBadVersion(3) -&gt; false è°ƒç”¨ isBadVersion(5) -&gt; true è°ƒç”¨ isBadVersion(4) -&gt; trueæ‰€ä»¥ï¼Œ4 æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ ç¤ºä¾‹ 2ï¼š 12è¾“å…¥ï¼šn = 1, bad = 1è¾“å‡ºï¼š1 æç¤ºï¼š 1 &lt;= bad &lt;= n &lt;= 231 - 1 ğŸ‚ è§£é¢˜æ–¹æ³•1âƒ£ï¸ æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾å› ä¸ºé¢˜ç›®è¦æ±‚å°½é‡å‡å°‘è°ƒç”¨æ£€æŸ¥æ¥å£çš„æ¬¡æ•°ï¼Œæ‰€ä»¥ä¸èƒ½å¯¹æ¯ä¸ªç‰ˆæœ¬éƒ½è°ƒç”¨æ£€æŸ¥æ¥å£ï¼Œè€Œæ˜¯åº”è¯¥å°†è°ƒç”¨æ£€æŸ¥æ¥å£çš„æ¬¡æ•°é™åˆ°æœ€ä½ã€‚ æ³¨æ„åˆ°ä¸€ä¸ªæ€§è´¨ï¼šå½“ä¸€ä¸ªç‰ˆæœ¬ä¸ºæ­£ç¡®ç‰ˆæœ¬ï¼Œåˆ™è¯¥ç‰ˆæœ¬ä¹‹å‰çš„æ‰€æœ‰ç‰ˆæœ¬å‡ä¸ºæ­£ç¡®ç‰ˆæœ¬ï¼›å½“ä¸€ä¸ªç‰ˆæœ¬ä¸ºé”™è¯¯ç‰ˆæœ¬ï¼Œåˆ™è¯¥ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬å‡ä¸ºé”™è¯¯ç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ€§è´¨è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚ å…·ä½“åœ°ï¼Œå°†å·¦å³è¾¹ç•Œåˆ†åˆ«åˆå§‹åŒ–ä¸º 1 å’Œ nï¼Œå…¶ä¸­ n æ˜¯ç»™å®šçš„ç‰ˆæœ¬æ•°é‡ã€‚è®¾å®šå·¦å³è¾¹ç•Œä¹‹åï¼Œæ¯æ¬¡æˆ‘ä»¬éƒ½ä¾æ®å·¦å³è¾¹ç•Œæ‰¾åˆ°å…¶ä¸­é—´çš„ç‰ˆæœ¬ï¼Œæ£€æŸ¥å…¶æ˜¯å¦ä¸ºæ­£ç¡®ç‰ˆæœ¬ã€‚å¦‚æœè¯¥ç‰ˆæœ¬ä¸ºæ­£ç¡®ç‰ˆæœ¬ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬å¿…ç„¶ä½äºè¯¥ç‰ˆæœ¬çš„å³ä¾§ï¼Œæˆ‘ä»¬ç¼©ç´§å·¦è¾¹ç•Œï¼›å¦åˆ™ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬å¿…ç„¶ä½äºè¯¥ç‰ˆæœ¬åŠè¯¥ç‰ˆæœ¬çš„å·¦ä¾§ï¼Œæˆ‘ä»¬ç¼©ç´§å³è¾¹ç•Œã€‚ è¿™æ ·æˆ‘ä»¬æ¯åˆ¤æ–­ä¸€æ¬¡éƒ½å¯ä»¥ç¼©ç´§ä¸€æ¬¡è¾¹ç•Œï¼Œè€Œæ¯æ¬¡ç¼©ç´§æ—¶ä¸¤è¾¹ç•Œè·ç¦»å°†å˜ä¸ºåŸæ¥çš„ä¸€åŠï¼Œå› æ­¤æˆ‘ä»¬è‡³å¤šåªéœ€è¦ç¼©ç´§ O(logn) æ¬¡ã€‚ 12345678910111213141516171819202122/* The isBadVersion API is defined in the parent class VersionControl. boolean isBadVersion(int version); */public class Solution extends VersionControl &#123; public int firstBadVersion(int n) &#123; if (n == 1) return n; int l = 1; int r = n; while(l &lt; r) &#123; int m = l + ((r - l) &gt;&gt; 1); if (isBadVersion(m)) &#123; r = m; &#125; else &#123; l = m + 1; &#125; &#125; return l; &#125;&#125; å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦ï¼š O(logn)ï¼Œå…¶ä¸­ n æ˜¯ç»™å®šç‰ˆæœ¬çš„æ•°é‡ã€‚ç©ºé—´å¤æ‚åº¦ï¼š O(1)ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°çš„ç©ºé—´ä¿å­˜è‹¥å¹²å˜é‡ã€‚ ğŸ™ æ„Ÿè°¢ åŠ›æ‰£ï¼ˆLeetCodeï¼‰","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://guoshunfa.com/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"Leetcode","slug":"Leetcode","permalink":"https://guoshunfa.com/tags/Leetcode/"}]},{"title":"Leetcodeç¬¬35é¢˜ æœç´¢æ’å…¥ä½ç½®","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç®—æ³•/leetcode/Leetcodeç¬¬35é¢˜-æœç´¢æ’å…¥ä½ç½®","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.277Z","comments":true,"path":"2022/07/Leetcodeç¬¬35é¢˜-æœç´¢æ’å…¥ä½ç½®/","link":"","permalink":"https://guoshunfa.com/2022/07/Leetcode%E7%AC%AC35%E9%A2%98-%E6%90%9C%E7%B4%A2%E6%8F%92%E5%85%A5%E4%BD%8D%E7%BD%AE/","excerpt":"","text":"ğŸŒŸ é¢˜ç›®æè¿°ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚ è¯·å¿…é¡»ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•ã€‚ ç¤ºä¾‹ 1: 12è¾“å…¥: nums = [1,3,5,6], target = 5è¾“å‡º: 2 ç¤ºä¾‹ 2: 12è¾“å…¥: nums = [1,3,5,6], target = 2è¾“å‡º: 1 ç¤ºä¾‹ 3: 12è¾“å…¥: nums = [1,3,5,6], target = 7è¾“å‡º: 4 ç¤ºä¾‹ 4: 12è¾“å…¥: nums = [1,3,5,6], target = 0è¾“å‡º: 0 ç¤ºä¾‹ 5: 12è¾“å…¥: nums = [1], target = 0è¾“å‡º: 0 æç¤º: 1 &lt;= nums.length &lt;= 104 -104 &lt;= nums[i] &lt;= 104 nums ä¸ºæ— é‡å¤å…ƒç´ çš„å‡åºæ’åˆ—æ•°ç»„ -104 &lt;= target &lt;= 104 ğŸ‚ è§£é¢˜æ–¹æ³•1âƒ£ï¸ æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾å‡è®¾é¢˜æ„æ˜¯å«ä½ åœ¨æ’åºæ•°ç»„ä¸­å¯»æ‰¾æ˜¯å¦å­˜åœ¨ä¸€ä¸ªç›®æ ‡å€¼ï¼Œé‚£ä¹ˆè®­ç»ƒæœ‰ç´ çš„è¯»è€…è‚¯å®šç«‹é©¬å°±èƒ½æƒ³åˆ°åˆ©ç”¨äºŒåˆ†æ³•åœ¨O(log n) çš„æ—¶é—´å†…æ‰¾åˆ°æ˜¯å¦å­˜åœ¨ç›®æ ‡å€¼ã€‚ä½†è¿™é¢˜è¿˜å¤šäº†ä¸ªé¢å¤–çš„æ¡ä»¶ï¼Œå³å¦‚æœä¸å­˜åœ¨æ•°ç»„ä¸­çš„æ—¶å€™éœ€è¦è¿”å›æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ï¼Œé‚£æˆ‘ä»¬è¿˜èƒ½ç”¨äºŒåˆ†æ³•ä¹ˆï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ç¨ä½œä¿®æ”¹å³å¯ã€‚è€ƒè™‘è¿™ä¸ªæ’å…¥çš„ä½ç½®posï¼Œå®ƒæˆç«‹çš„æ¡ä»¶ä¸ºï¼š nums[posâˆ’1]&lt;targetâ‰¤nums[pos] å…¶ä¸­ nums ä»£è¡¨æ’åºæ•°ç»„ã€‚ç”±äºå¦‚æœå­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ï¼Œæˆ‘ä»¬è¿”å›çš„ç´¢å¼•ä¹Ÿæ˜¯ posï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†ä¸¤ä¸ªæ¡ä»¶åˆå¹¶å¾—å‡ºæœ€åçš„ç›®æ ‡ï¼šã€Œåœ¨ä¸€ä¸ªæœ‰åºæ•°ç»„ä¸­æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äº target çš„ä¸‹æ ‡ã€ã€‚ é—®é¢˜è½¬åŒ–åˆ°è¿™é‡Œï¼Œç›´æ¥å¥—ç”¨äºŒåˆ†æ³•å³å¯ï¼Œå³ä¸æ–­ç”¨äºŒåˆ†æ³•é€¼è¿‘æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äº target çš„ä¸‹æ ‡ ã€‚ä¸‹æ–‡ç»™å‡ºçš„ä»£ç æ˜¯ç¬”è€…ä¹ æƒ¯çš„äºŒåˆ†å†™æ³•ï¼Œans åˆå€¼è®¾ç½®ä¸ºæ•°ç»„é•¿åº¦å¯ä»¥çœç•¥è¾¹ç•Œæ¡ä»¶çš„åˆ¤æ–­ï¼Œå› ä¸ºå­˜åœ¨ä¸€ç§æƒ…å†µæ˜¯ target å¤§äºæ•°ç»„ä¸­çš„æ‰€æœ‰æ•°ï¼Œæ­¤æ—¶éœ€è¦æ’å…¥åˆ°æ•°ç»„é•¿åº¦çš„ä½ç½®ã€‚ 12345678910111213141516class Solution &#123; public int searchInsert(int[] nums, int target) &#123; int n = nums.length; int l = 0, r = n - 1; while (l &lt;= r) &#123; int m = l + ((r - l) &gt;&gt; 1); if (nums[m] &gt;= target) &#123; r = m - 1; &#125; else if (nums[m] &lt; target) &#123; l = m + 1; &#125; &#125; return l; &#125;&#125; å¤æ‚åº¦åˆ†æ â€‹ æ—¶é—´å¤æ‚åº¦ï¼š O(logn)ï¼Œå…¶ä¸­ n ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚äºŒåˆ†æŸ¥æ‰¾æ‰€éœ€çš„æ—¶é—´å¤æ‚åº¦ä¸º O(logn)ã€‚ â€‹ ç©ºé—´å¤æ‚åº¦ï¼š O(1)ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚ ğŸ™ æ„Ÿè°¢ åŠ›æ‰£ï¼ˆLeetCodeï¼‰","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://guoshunfa.com/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"Leetcode","slug":"Leetcode","permalink":"https://guoshunfa.com/tags/Leetcode/"}]},{"title":"Leetcodeç¬¬704é¢˜ äºŒåˆ†æŸ¥æ‰¾","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç®—æ³•/leetcode/Leetcodeç¬¬704é¢˜-äºŒåˆ†æŸ¥æ‰¾","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.277Z","comments":true,"path":"2022/07/Leetcodeç¬¬704é¢˜-äºŒåˆ†æŸ¥æ‰¾/","link":"","permalink":"https://guoshunfa.com/2022/07/Leetcode%E7%AC%AC704%E9%A2%98-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/","excerpt":"","text":"Leetcodeç¬¬704é¢˜ - äºŒåˆ†æŸ¥æ‰¾ğŸŒŸ é¢˜ç›®æè¿°ç»™å®šä¸€ä¸ª n ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ target ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢ nums ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1ã€‚ ç¤ºä¾‹ 1: 123è¾“å…¥: nums = [-1,0,3,5,9,12], target = 9è¾“å‡º: 4è§£é‡Š: 9 å‡ºç°åœ¨ nums ä¸­å¹¶ä¸”ä¸‹æ ‡ä¸º 4 ç¤ºä¾‹ 2: 123è¾“å…¥: nums = [-1,0,3,5,9,12], target = 2è¾“å‡º: -1è§£é‡Š: 2 ä¸å­˜åœ¨ nums ä¸­å› æ­¤è¿”å› -1 æç¤ºï¼š ä½ å¯ä»¥å‡è®¾ nums ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯ä¸é‡å¤çš„ã€‚ n å°†åœ¨ [1, 10000]ä¹‹é—´ã€‚ nums çš„æ¯ä¸ªå…ƒç´ éƒ½å°†åœ¨ [-9999, 9999]ä¹‹é—´ã€‚ ğŸ‚ è§£é¢˜æ–¹æ³•1âƒ£ï¸ æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾ 1234567891011121314151617class Solution &#123; public int search(int[] nums, int target) &#123; int left = 0; int right = nums.length-1; while(left &lt;= right ) &#123; int mi = left + (right-left) /2; if (nums[mi]== target) &#123; return mi; &#125; else if (nums[mi] &gt; target) &#123; right = mi-1; &#125; else if (nums[mi] &lt; target) &#123; left = mi+1; &#125; &#125; return -1; &#125;&#125; ğŸ™ æ„Ÿè°¢ åŠ›æ‰£ï¼ˆLeetCodeï¼‰","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://guoshunfa.com/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"Leetcode","slug":"Leetcode","permalink":"https://guoshunfa.com/tags/Leetcode/"}]},{"title":"CSS less åŸºç¡€","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/css/CSS-lessåŸºç¡€","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.278Z","comments":true,"path":"2022/07/CSS-lessåŸºç¡€/","link":"","permalink":"https://guoshunfa.com/2022/07/CSS-less%E5%9F%BA%E7%A1%80/","excerpt":"","text":"ä¸­æ–‡å®˜ç½‘ | åœ¨çº¿less cssç¼–è¯‘å™¨ åœ¨ Node.js ç¯å¢ƒä¸­ä½¿ç”¨ Less ï¼š 1npm install -g less åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ä½¿ç”¨ Less ï¼š 12&lt;link rel=&quot;stylesheet/less&quot; type=&quot;text/css&quot; href=&quot;styles.less&quot; /&gt;&lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/less.js/3.11.1/less.min.js&quot; &gt;&lt;/script&gt; 1. æ¦‚è§ˆ Less ï¼ˆLeaner Style Sheets çš„ç¼©å†™ï¼‰ æ˜¯ä¸€é—¨å‘åå…¼å®¹çš„ CSS æ‰©å±•è¯­è¨€ã€‚è¿™é‡Œå‘ˆç°çš„æ˜¯ Less çš„å®˜æ–¹æ–‡æ¡£ï¼ˆä¸­æ–‡ç‰ˆï¼‰ï¼ŒåŒ…å«äº† Less è¯­è¨€ä»¥åŠåˆ©ç”¨ JavaScript å¼€å‘çš„ç”¨äºå°† Less æ ·å¼è½¬æ¢æˆ CSS æ ·å¼çš„ Less.js å·¥å…·ã€‚ å› ä¸º Less å’Œ CSS éå¸¸åƒï¼Œå› æ­¤å¾ˆå®¹æ˜“å­¦ä¹ ã€‚è€Œä¸” Less ä»…å¯¹ CSS è¯­è¨€å¢åŠ äº†å°‘è®¸æ–¹ä¾¿çš„æ‰©å±•ï¼Œè¿™å°±æ˜¯ Less å¦‚æ­¤æ˜“å­¦çš„åŸå› ä¹‹ä¸€ã€‚ æœ‰å…³ Less è¯­è¨€ç‰¹æ€§çš„è¯¦ç»†æ–‡æ¡£ï¼Œè¯·å‚é˜… Less è¯­è¨€ç‰¹æ€§ ç« èŠ‚ æœ‰å…³ Less å†…ç½®å‡½æ•°çš„åˆ—è¡¨ï¼Œè¯·å‚é˜… Less å‡½æ•°æ‰‹å†Œ ç« èŠ‚ æœ‰å…³è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜ï¼Œè¯·å‚é˜… Less.js ç”¨æ³• ç« èŠ‚ æœ‰å…³ç¬¬ä¸‰æ–¹å·¥å…·çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… å·¥å…· ç« èŠ‚ Less åˆ°åº•ä¸º CSS æ·»åŠ äº†ä»€ä¹ˆåŠŸèƒ½ï¼Ÿä»¥ä¸‹å°±æ˜¯è¿™äº›æ–°åŠ åŠŸèƒ½çš„æ¦‚è§ˆã€‚ 2. å˜é‡ï¼ˆVariablesï¼‰æ— éœ€å¤šè¯´ï¼Œçœ‹ä»£ç ä¸€ç›®äº†ç„¶ï¼š 1234567@width: 10px;@height: @width + 10px;#header &#123; width: @width; height: @height;&#125; ç¼–è¯‘ä¸ºï¼š 1234#header &#123; width: 10px; height: 20px;&#125; äº†è§£å…³äºå˜é‡çš„æ›´å¤šä¿¡æ¯ 3. æ··åˆï¼ˆMixinsï¼‰æ··åˆï¼ˆMixinï¼‰æ˜¯ä¸€ç§å°†ä¸€ç»„å±æ€§ä»ä¸€ä¸ªè§„åˆ™é›†åŒ…å«ï¼ˆæˆ–æ··å…¥ï¼‰åˆ°å¦ä¸€ä¸ªè§„åˆ™é›†çš„æ–¹æ³•ã€‚å‡è®¾æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç±»ï¼ˆclassï¼‰å¦‚ä¸‹ï¼š 1234.bordered &#123; border-top: dotted 1px black; border-bottom: solid 2px black;&#125; å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨å…¶å®ƒè§„åˆ™é›†ä¸­ä½¿ç”¨è¿™äº›å±æ€§å‘¢ï¼Ÿæ²¡é—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€åƒä¸‹é¢è¿™æ ·è¾“å…¥æ‰€éœ€å±æ€§çš„ç±»ï¼ˆclassï¼‰åç§°å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789#menu a &#123; color: #111; .bordered();&#125;.post a &#123; color: red; .bordered();&#125; .bordered ç±»æ‰€åŒ…å«çš„å±æ€§å°±å°†åŒæ—¶å‡ºç°åœ¨ #menu a å’Œ .post a ä¸­äº†ã€‚ï¼ˆæ³¨æ„ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ #ids ä½œä¸º mixin ä½¿ç”¨ã€‚ï¼‰ äº†è§£å…³äºæ··åˆï¼ˆMixinï¼‰çš„æ›´å¤šä¿¡æ¯ 4. åµŒå¥—ï¼ˆNestingï¼‰Less æä¾›äº†ä½¿ç”¨åµŒå¥—ï¼ˆnestingï¼‰ä»£æ›¿å±‚å æˆ–ä¸å±‚å ç»“åˆä½¿ç”¨çš„èƒ½åŠ›ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹ CSS ä»£ç ï¼š 123456789#header &#123; color: black;&#125;#header .navigation &#123; font-size: 12px;&#125;#header .logo &#123; width: 300px;&#125; ç”¨ Less è¯­è¨€æˆ‘ä»¬å¯ä»¥è¿™æ ·ä¹¦å†™ä»£ç ï¼š 123456789#header &#123; color: black; .navigation &#123; font-size: 12px; &#125; .logo &#123; width: 300px; &#125;&#125; ç”¨ Less ä¹¦å†™çš„ä»£ç æ›´åŠ ç®€æ´ï¼Œå¹¶ä¸”æ¨¡ä»¿äº† HTML çš„ç»„ç»‡ç»“æ„ã€‚ ä½ è¿˜å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•å°†ä¼ªé€‰æ‹©å™¨ï¼ˆpseudo-selectorsï¼‰ä¸æ··åˆï¼ˆmixinsï¼‰ä¸€åŒä½¿ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç»å…¸çš„ clearfix æŠ€å·§ï¼Œé‡å†™ä¸ºä¸€ä¸ªæ··åˆï¼ˆmixinï¼‰ (&amp; è¡¨ç¤ºå½“å‰é€‰æ‹©å™¨çš„çˆ¶çº§ï¼‰ï¼š 12345678910111213.clearfix &#123; display: block; zoom: 1; &amp;:after &#123; content: &quot; &quot;; display: block; font-size: 0; height: 0; clear: both; visibility: hidden; &#125;&#125; äº†è§£æœ‰å…³å¤«é€‰æ‹©å™¨çš„è¯¦ç»†ä¿¡æ¯ 5. @è§„åˆ™åµŒå¥—å’Œå†’æ³¡@ è§„åˆ™ï¼ˆä¾‹å¦‚ @media æˆ– @supportsï¼‰å¯ä»¥ä¸é€‰æ‹©å™¨ä»¥ç›¸åŒçš„æ–¹å¼è¿›è¡ŒåµŒå¥—ã€‚@ è§„åˆ™ä¼šè¢«æ”¾åœ¨å‰é¢ï¼ŒåŒä¸€è§„åˆ™é›†ä¸­çš„å…¶å®ƒå…ƒç´ çš„ç›¸å¯¹é¡ºåºä¿æŒä¸å˜ã€‚è¿™å«åšå†’æ³¡ï¼ˆbubblingï¼‰ã€‚ 123456789101112.component &#123; width: 300px; @media (min-width: 768px) &#123; width: 600px; @media (min-resolution: 192dpi) &#123; background-image: url(/img/retina2x.png); &#125; &#125; @media (min-width: 1280px) &#123; width: 800px; &#125;&#125; ç¼–è¯‘ä¸ºï¼š 123456789101112131415161718.component &#123; width: 300px;&#125;@media (min-width: 768px) &#123; .component &#123; width: 600px; &#125;&#125;@media (min-width: 768px) and (min-resolution: 192dpi) &#123; .component &#123; background-image: url(/img/retina2x.png); &#125;&#125;@media (min-width: 1280px) &#123; .component &#123; width: 800px; &#125;&#125; 6. è¿ç®—ï¼ˆOperationsï¼‰ç®—æœ¯è¿ç®—ç¬¦ +ã€-ã€*ã€/ å¯ä»¥å¯¹ä»»ä½•æ•°å­—ã€é¢œè‰²æˆ–å˜é‡è¿›è¡Œè¿ç®—ã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œç®—æœ¯è¿ç®—ç¬¦åœ¨åŠ ã€å‡æˆ–æ¯”è¾ƒä¹‹å‰ä¼šè¿›è¡Œå•ä½æ¢ç®—ã€‚è®¡ç®—çš„ç»“æœä»¥æœ€å·¦ä¾§æ“ä½œæ•°çš„å•ä½ç±»å‹ä¸ºå‡†ã€‚å¦‚æœå•ä½æ¢ç®—æ— æ•ˆæˆ–å¤±å»æ„ä¹‰ï¼Œåˆ™å¿½ç•¥å•ä½ã€‚æ— æ•ˆçš„å•ä½æ¢ç®—ä¾‹å¦‚ï¼špx åˆ° cm æˆ– rad åˆ° % çš„è½¬æ¢ã€‚ 1234567891011// æ‰€æœ‰æ“ä½œæ•°è¢«è½¬æ¢æˆç›¸åŒçš„å•ä½@conversion-1: 5cm + 10mm; // ç»“æœæ˜¯ 6cm@conversion-2: 2 - 3cm - 5mm; // ç»“æœæ˜¯ -1.5cm// conversion is impossible@incompatible-units: 2 + 5px - 3cm; // ç»“æœæ˜¯ 4px// example with variables@base: 5%;@filler: @base * 2; // ç»“æœæ˜¯ 10%@other: @base + @filler; // ç»“æœæ˜¯ 15% ä¹˜æ³•å’Œé™¤æ³•ä¸ä½œè½¬æ¢ã€‚å› ä¸ºè¿™ä¸¤ç§è¿ç®—åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ²¡æœ‰æ„ä¹‰ï¼Œä¸€ä¸ªé•¿åº¦ä¹˜ä»¥ä¸€ä¸ªé•¿åº¦å°±å¾—åˆ°ä¸€ä¸ªåŒºåŸŸï¼Œè€Œ CSS æ˜¯ä¸æ”¯æŒæŒ‡å®šåŒºåŸŸçš„ã€‚Less å°†æŒ‰æ•°å­—çš„åŸæ ·è¿›è¡Œæ“ä½œï¼Œå¹¶å°†ä¸ºè®¡ç®—ç»“æœæŒ‡å®šæ˜ç¡®çš„å•ä½ç±»å‹ã€‚ 1@base: 2cm * 3mm; // ç»“æœæ˜¯ 6cm ä½ è¿˜å¯ä»¥å¯¹é¢œè‰²è¿›è¡Œç®—æœ¯è¿ç®—ï¼š 12@color: #224488 / 2; //ç»“æœæ˜¯ #112244background-color: #112244 + #111; // ç»“æœæ˜¯ #223355 ä¸è¿‡ï¼ŒLess æä¾›çš„ è‰²å½©å‡½æ•° æ›´æœ‰ä½¿ç”¨ä»·å€¼ã€‚ 7. calc() ç‰¹ä¾‹Released v3.0.0 ä¸ºäº†ä¸ CSS ä¿æŒå…¼å®¹ï¼Œcalc() å¹¶ä¸å¯¹æ•°å­¦è¡¨è¾¾å¼è¿›è¡Œè®¡ç®—ï¼Œä½†æ˜¯åœ¨åµŒå¥—å‡½æ•°ä¸­ä¼šè®¡ç®—å˜é‡å’Œæ•°å­¦å…¬å¼çš„å€¼ã€‚ 12@var: 50vh/2;width: calc(50% + (@var - 20px)); // ç»“æœæ˜¯ calc(50% + (25vh - 20px)) 8. è½¬ä¹‰ï¼ˆEscapingï¼‰è½¬ä¹‰ï¼ˆEscapingï¼‰å…è®¸ä½ ä½¿ç”¨ä»»æ„å­—ç¬¦ä¸²ä½œä¸ºå±æ€§æˆ–å˜é‡å€¼ã€‚ä»»ä½• ~&quot;anything&quot; æˆ– ~&#39;anything&#39; å½¢å¼çš„å†…å®¹éƒ½å°†æŒ‰åŸæ ·è¾“å‡ºï¼Œé™¤é interpolationã€‚ 123456@min768: ~&quot;(min-width: 768px)&quot;;.element &#123; @media @min768 &#123; font-size: 1.2rem; &#125;&#125; ç¼–è¯‘ä¸ºï¼š 12345@media (min-width: 768px) &#123; .element &#123; font-size: 1.2rem; &#125;&#125; æ³¨æ„ï¼Œä» Less 3.5 å¼€å§‹ï¼Œå¯ä»¥ç®€å†™ä¸ºï¼š 123456@min768: (min-width: 768px);.element &#123; @media @min768 &#123; font-size: 1.2rem; &#125;&#125; åœ¨ Less 3.5+ ç‰ˆæœ¬ä¸­ï¼Œè®¸å¤šä»¥å‰éœ€è¦â€œå¼•å·è½¬ä¹‰â€çš„æƒ…å†µå°±ä¸å†éœ€è¦äº†ã€‚ 9. å‡½æ•°ï¼ˆFunctionsï¼‰Less å†…ç½®äº†å¤šç§å‡½æ•°ç”¨äºè½¬æ¢é¢œè‰²ã€å¤„ç†å­—ç¬¦ä¸²ã€ç®—æœ¯è¿ç®—ç­‰ã€‚è¿™äº›å‡½æ•°åœ¨Less å‡½æ•°æ‰‹å†Œä¸­æœ‰è¯¦ç»†ä»‹ç»ã€‚ å‡½æ•°çš„ç”¨æ³•éå¸¸ç®€å•ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­å°†ä»‹ç»å¦‚ä½•åˆ©ç”¨ percentage å‡½æ•°å°† 0.5 è½¬æ¢ä¸º 50%ï¼Œå°†é¢œè‰²é¥±å’Œåº¦å¢åŠ  5%ï¼Œä»¥åŠé¢œè‰²äº®åº¦é™ä½ 25% å¹¶ä¸”è‰²ç›¸å€¼å¢åŠ  8 ç­‰ç”¨æ³•ï¼š 12345678@base: #f04615;@width: 0.5;.class &#123; width: percentage(@width); // returns `50%` color: saturate(@base, 5%); background-color: spin(lighten(@base, 25%), 8);&#125; å‚è§ï¼šå‡½æ•°æ‰‹å†Œ 10. å‘½åç©ºé—´å’Œè®¿é—®ç¬¦(ä¸è¦å’Œ CSS @namespace æˆ– namespace selectors æ··æ·†äº†)ã€‚ æœ‰æ—¶ï¼Œå‡ºäºç»„ç»‡ç»“æ„æˆ–ä»…ä»…æ˜¯ä¸ºäº†æä¾›ä¸€äº›å°è£…çš„ç›®çš„ï¼Œä½ å¸Œæœ›å¯¹æ··åˆï¼ˆmixinsï¼‰è¿›è¡Œåˆ†ç»„ã€‚ä½ å¯ä»¥ç”¨ Less æ›´ç›´è§‚åœ°å®ç°è¿™ä¸€éœ€æ±‚ã€‚å‡è®¾ä½ å¸Œæœ›å°†ä¸€äº›æ··åˆï¼ˆmixinsï¼‰å’Œå˜é‡ç½®äº #bundle ä¹‹ä¸‹ï¼Œä¸ºäº†ä»¥åæ–¹ä¾¿é‡ç”¨æˆ–åˆ†å‘ï¼š 123456789101112#bundle() &#123; .button &#123; display: block; border: 1px solid black; background-color: grey; &amp;:hover &#123; background-color: white; &#125; &#125; .tab &#123; ... &#125; .citation &#123; ... &#125;&#125; ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›æŠŠ .button ç±»æ··åˆåˆ° #header a ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š 1234#header a &#123; color: orange; #bundle.button(); // è¿˜å¯ä»¥ä¹¦å†™ä¸º #bundle &gt; .button å½¢å¼&#125; æ³¨æ„ï¼šå¦‚æœä¸å¸Œæœ›å®ƒä»¬å‡ºç°åœ¨è¾“å‡ºçš„ CSS ä¸­ï¼Œä¾‹å¦‚ #bundle .tabï¼Œè¯·å°† () é™„åŠ åˆ°å‘½åç©ºé—´ï¼ˆä¾‹å¦‚ #bundle()ï¼‰åé¢ã€‚ 11. æ˜ å°„ï¼ˆMapsï¼‰ä» Less 3.5 ç‰ˆæœ¬å¼€å§‹ï¼Œä½ è¿˜å¯ä»¥å°†æ··åˆï¼ˆmixinsï¼‰å’Œè§„åˆ™é›†ï¼ˆrulesetsï¼‰ä½œä¸ºä¸€ç»„å€¼çš„æ˜ å°„ï¼ˆmapï¼‰ä½¿ç”¨ã€‚ 123456789#colors() &#123; primary: blue; secondary: green;&#125;.button &#123; color: #colors[primary]; border: 1px solid #colors[secondary];&#125; è¾“å‡ºç¬¦åˆé¢„æœŸï¼š 1234.button &#123; color: blue; border: 1px solid green;&#125; å‚è§ï¼š æ˜ å°„ï¼ˆMapsï¼‰ 12. ä½œç”¨åŸŸï¼ˆScopeï¼‰Less ä¸­çš„ä½œç”¨åŸŸä¸ CSS ä¸­çš„ä½œç”¨åŸŸéå¸¸ç±»ä¼¼ã€‚é¦–å…ˆåœ¨æœ¬åœ°æŸ¥æ‰¾å˜é‡å’Œæ··åˆï¼ˆmixinsï¼‰ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™ä»â€œçˆ¶â€çº§ä½œç”¨åŸŸç»§æ‰¿ã€‚ 12345678@var: red;#page &#123; @var: white; #header &#123; color: @var; // white &#125;&#125; ä¸ CSS è‡ªå®šä¹‰å±æ€§ä¸€æ ·ï¼Œæ··åˆï¼ˆmixinï¼‰å’Œå˜é‡çš„å®šä¹‰ä¸å¿…åœ¨å¼•ç”¨ä¹‹å‰äº‹å…ˆå®šä¹‰ã€‚å› æ­¤ï¼Œä¸‹é¢çš„ Less ä»£ç ç¤ºä¾‹å’Œä¸Šé¢çš„ä»£ç ç¤ºä¾‹æ˜¯ç›¸åŒçš„ï¼š 12345678@var: red;#page &#123; #header &#123; color: @var; // white &#125; @var: white;&#125; å‚è§ï¼šæ‡’åŠ è½½ 13. æ³¨é‡Šï¼ˆCommentsï¼‰å—æ³¨é‡Šå’Œè¡Œæ³¨é‡Šéƒ½å¯ä»¥ä½¿ç”¨ï¼š 123456/* ä¸€ä¸ªå—æ³¨é‡Š * style comment! */@var: red;// è¿™ä¸€è¡Œè¢«æ³¨é‡Šæ‰äº†ï¼@var: white; 14. å¯¼å…¥ï¼ˆImportingï¼‰â€œå¯¼å…¥â€çš„å·¥ä½œæ–¹å¼å’Œä½ é¢„æœŸçš„ä¸€æ ·ã€‚ä½ å¯ä»¥å¯¼å…¥ä¸€ä¸ª .less æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶ä¸­çš„æ‰€æœ‰å˜é‡å°±å¯ä»¥å…¨éƒ¨ä½¿ç”¨äº†ã€‚å¦‚æœå¯¼å…¥çš„æ–‡ä»¶æ˜¯ .less æ‰©å±•åï¼Œåˆ™å¯ä»¥å°†æ‰©å±•åçœç•¥æ‰ï¼š 12@import &quot;library&quot;; // library.less@import &quot;typo.css&quot;; å‚è€ƒæ–‡æ¡£ less ä¸­æ–‡å®˜ç½‘","categories":[{"name":"HTML/CSS/JavaScript","slug":"HTML-CSS-JavaScript","permalink":"https://guoshunfa.com/categories/HTML-CSS-JavaScript/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://guoshunfa.com/tags/CSS/"},{"name":"less","slug":"less","permalink":"https://guoshunfa.com/tags/less/"}]},{"title":"Oracle Java Numberså’ŒStrings","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Oracle-Java-Numberså’ŒStrings","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.279Z","comments":true,"path":"2022/07/Oracle-Java-Numberså’ŒStrings/","link":"","permalink":"https://guoshunfa.com/2022/07/Oracle-Java-Numbers%E5%92%8CStrings/","excerpt":"","text":"æœ¬æ–‡ç« ä»¥jdk8ä¸ºåŸºç¡€è¿›è¡Œç¼–å†™ï¼Œå¦‚æœæƒ³æŸ¥çœ‹åç»­çš„ç‰ˆæœ¬å¯ä»¥å‰å¾€jdkç‰ˆæœ¬ç›®å½•ä¸‹æŸ¥çœ‹ã€‚ ç¿»è¯‘è‡ªï¼šhttps://docs.oracle.com/javase/tutorial/java/data/index.html Numbersæœ¬èŠ‚é¦–å…ˆè®¨è®ºnumberç±»ã€‚langåŒ…åŠå…¶å­ç±»ï¼Œä»¥åŠä½¿ç”¨è¿™äº›ç±»çš„å®ä¾‹åŒ–è€Œä¸æ˜¯åŸå§‹æ•°å­—ç±»å‹çš„æƒ…å†µã€‚ æœ¬èŠ‚è¿˜ä»‹ç»äº†PrintStreamå’ŒDecimalFormatç±»ï¼Œæä¾›äº†ç¼–å†™æ ¼å¼åŒ–æ•°å­—è¾“å‡ºçš„æ–¹æ³•ã€‚ æœ€åï¼ŒMathç±»ã€‚è®¨è®ºäº†langã€‚å®ƒåŒ…å«æ•°å­¦å‡½æ•°æ¥è¡¥å……è¯­è¨€ä¸­å†…ç½®çš„è¿ç®—ç¬¦ã€‚è¿™ç±»æœ‰ä¸‰è§’å‡½æ•°ã€æŒ‡æ•°å‡½æ•°ç­‰æ–¹æ³•ã€‚ Numbers Classesåœ¨å¤„ç†æ•°å­—æ—¶ï¼Œå¤§å¤šæ•°æ—¶å€™éƒ½ä½¿ç”¨ä»£ç ä¸­çš„åŸºå…ƒç±»å‹ã€‚ä¾‹å¦‚ï¼š 123int i = 500;float gpa = 3.65f;byte mask = 0x7f; ç„¶è€Œï¼Œä½¿ç”¨å¯¹è±¡ä»£æ›¿åŸè¯­æ˜¯æœ‰åŸå› çš„ï¼ŒJavaå¹³å°ä¸ºæ¯ç§åŸè¯­æ•°æ®ç±»å‹æä¾›äº†wrapperç±»ã€‚è¿™äº›ç±»å°†åŸºæœ¬ä½“â€œåŒ…è£…â€åœ¨å¯¹è±¡ä¸­ã€‚é€šå¸¸ï¼Œå¦‚æœæ‚¨åœ¨éœ€è¦å¯¹è±¡çš„åœ°æ–¹ä½¿ç”¨åŸè¯­ï¼Œç¼–è¯‘å™¨ä¼šåœ¨å…¶åŒ…è£…ç±»ä¸­ä¸ºæ‚¨åŒ…è£…åŸè¯­ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœåœ¨éœ€è¦åŸºå…ƒæ—¶ä½¿ç”¨æ•°å­—å¯¹è±¡ï¼Œç¼–è¯‘å™¨å°†ä¸ºæ‚¨æ‰“å¼€è¯¥å¯¹è±¡ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§è‡ªåŠ¨è£…ç®±å’Œå–æ¶ˆè£…ç®± æ‰€æœ‰æ•°å­—åŒ…è£…ç±»éƒ½æ˜¯æŠ½è±¡ç±»â€œNumberâ€çš„å­ç±»ï¼š Note: è¿™é‡Œæ²¡æœ‰è®¨è®ºâ€œæ•°å­—â€çš„å…¶ä»–å››ä¸ªå­ç±»BigDecimalå’ŒBigIntegerç”¨äºé«˜ç²¾åº¦è®¡ç®—AtomicIntegerå’ŒAtomicLongç”¨äºå¤šçº¿ç¨‹åº”ç”¨ç¨‹åºã€‚ ä½¿ç”¨â€œNumberâ€å¯¹è±¡è€Œä¸æ˜¯åŸºå…ƒæœ‰ä¸‰ä¸ªåŸå› ï¼š ä½œä¸ºéœ€è¦å¯¹è±¡çš„æ–¹æ³•çš„å‚æ•°ï¼ˆé€šå¸¸åœ¨å¤„ç†æ•°å­—é›†åˆæ—¶ä½¿ç”¨ï¼‰ã€‚ ä½¿ç”¨ç±»å®šä¹‰çš„å¸¸é‡ï¼Œå¦‚â€œMIN_VALUEâ€å’Œâ€œMAX_VALUEâ€œï¼Œå®ƒä»¬æä¾›æ•°æ®ç±»å‹çš„ä¸Šé™å’Œä¸‹é™ã€‚ ä½¿ç”¨ç±»æ–¹æ³•å°†å€¼è½¬æ¢ä¸ºå…¶ä»–åŸºå…ƒç±»å‹å’Œä»å…¶ä»–åŸºå…ƒè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä»¥åŠåœ¨æ•°å­—ç³»ç»Ÿï¼ˆåè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶ã€äºŒè¿›åˆ¶ï¼‰ä¹‹é—´è½¬æ¢ã€‚ ä¸‹è¡¨åˆ—å‡ºäº†â€œNumberâ€ç±»çš„æ‰€æœ‰å­ç±»å®ç°çš„å®ä¾‹æ–¹æ³•ã€‚ Method Description byte byteValue()short shortValue()int intValue()long longValue()float floatValue()double doubleValue() å°†æ­¤â€œNumberâ€å¯¹è±¡çš„å€¼è½¬æ¢ä¸ºè¿”å›çš„åŸºå…ƒæ•°æ®ç±»å‹ã€‚ int compareTo(Byte anotherByte)int compareTo(Double anotherDouble)int compareTo(Float anotherFloat)int compareTo(Integer anotherInteger)int compareTo(Long anotherLong)int compareTo(Short anotherShort) å°†æ­¤â€œæ•°å­—â€å¯¹è±¡ä¸å‚æ•°è¿›è¡Œæ¯”è¾ƒã€‚ boolean equals(Object obj) ç¡®å®šæ­¤æ•°å­—å¯¹è±¡æ˜¯å¦ç­‰äºå‚æ•°ã€‚å¦‚æœå‚æ•°ä¸æ˜¯â€œnullâ€ï¼Œå¹¶ä¸”æ˜¯å…·æœ‰ç›¸åŒç±»å‹å’Œæ•°å€¼çš„å¯¹è±¡ï¼Œåˆ™æ–¹æ³•è¿”å›â€œtrueâ€ã€‚Java APIæ–‡æ¡£ä¸­å¯¹â€œDoubleâ€å’Œâ€œFloatâ€å¯¹è±¡æœ‰ä¸€äº›é¢å¤–çš„è¦æ±‚ã€‚ æ¯ä¸ªâ€œNumberâ€ç±»åŒ…å«å…¶ä»–æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å¯ç”¨äºå°†æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²å’Œä»å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä»¥åŠåœ¨æ•°å­—ç³»ç»Ÿä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚ä¸‹è¡¨åˆ—å‡ºäº†â€œIntegerâ€ç±»ä¸­çš„è¿™äº›æ–¹æ³•ã€‚å…¶ä»–â€œNumberâ€å­ç±»çš„æ–¹æ³•ç±»ä¼¼ï¼š Method Description static Integer decode(String s) å°†å­—ç¬¦ä¸²è§£ç ä¸ºæ•´æ•°ã€‚å¯ä»¥æ¥å—åè¿›åˆ¶ã€å…«è¿›åˆ¶æˆ–åå…­è¿›åˆ¶æ•°å­—çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ä½œä¸ºè¾“å…¥ã€‚ static int parseInt(String s) è¿”å›æ•´æ•°ï¼ˆä»…é™åè¿›åˆ¶ï¼‰ã€‚ static int parseInt(String s, int radix) è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œç»™å®šåè¿›åˆ¶ã€äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶æˆ–åå…­è¿›åˆ¶ï¼ˆâ€œåŸºæ•°â€åˆ†åˆ«ç­‰äº10ã€2ã€8æˆ–16ï¼‰æ•°å­—çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ä½œä¸ºè¾“å…¥ã€‚ String toString() è¿”å›è¡¨ç¤ºæ­¤â€œIntegerâ€å€¼çš„â€œStringâ€å¯¹è±¡ã€‚ static String toString(int i) è¿”å›è¡¨ç¤ºæŒ‡å®šæ•´æ•°çš„â€œå­—ç¬¦ä¸²â€å¯¹è±¡ã€‚ static Integer valueOf(int i) è¿”å›åŒ…å«æŒ‡å®šåŸºå…ƒå€¼çš„â€œIntegerâ€å¯¹è±¡ã€‚ static Integer valueOf(String s) è¿”å›åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼å€¼çš„â€œIntegerâ€å¯¹è±¡ã€‚ static Integer valueOf(String s, int radix) è¿”å›ä¸€ä¸ªâ€œIntegerâ€å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼çš„æ•´æ•°å€¼ï¼Œå¹¶ä½¿ç”¨åŸºæ•°å€¼è¿›è¡Œåˆ†æã€‚ä¾‹å¦‚ï¼Œå¦‚æœs&#x3D;â€œ333â€ä¸”åŸºæ•°&#x3D;8ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›ä¸å…«è¿›åˆ¶æ•°333ç›¸ç­‰çš„åè¿›åˆ¶æ•´æ•°ã€‚ æ ¼å¼åŒ–æ•°å­—æ‰“å°è¾“å‡ºå‰é¢æ‚¨çœ‹åˆ°äº†ä½¿ç”¨â€œprintâ€å’Œâ€œprintlnâ€æ–¹æ³•å°†å­—ç¬¦ä¸²æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºï¼ˆâ€œSystem.outâ€ï¼‰ã€‚ç”±äºæ‰€æœ‰æ•°å­—éƒ½å¯ä»¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆå¦‚æ‚¨å°†åœ¨æœ¬è¯¾ç¨‹åé¢çœ‹åˆ°çš„ï¼‰ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•æ‰“å°å­—ç¬¦ä¸²å’Œæ•°å­—çš„ä»»æ„æ··åˆã€‚ç„¶è€Œï¼ŒJavaç¼–ç¨‹è¯­è¨€è¿˜æœ‰å…¶ä»–æ–¹æ³•ï¼Œå…è®¸æ‚¨åœ¨åŒ…å«æ•°å­—æ—¶å¯¹æ‰“å°è¾“å‡ºè¿›è¡Œæ›´å¤šæ§åˆ¶ã€‚ printfå’Œformatæ–¹æ³•java.ioåŒ…åŒ…å«ä¸€ä¸ªâ€œPrintStreamâ€ç±»ï¼Œè¯¥ç±»æœ‰ä¸¤ç§æ ¼å¼æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥æ›¿æ¢â€œprintâ€å’Œâ€œprintlnâ€ã€‚è¿™äº›æ–¹æ³•â€œformatâ€å’Œâ€œprintfâ€å½¼æ­¤ç­‰æ•ˆã€‚ç†Ÿæ‚‰çš„â€œç³»ç»Ÿâ€ã€‚outâ€æ°å¥½æ˜¯â€œPrintStreamâ€å¯¹è±¡ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨â€œSystem.outâ€ä¸Šè°ƒç”¨â€œPrintStreamâ€æ–¹æ³•ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥åœ¨ä»£ç ä¸­ä»¥å‰ä½¿ç”¨è¿‡â€œprintâ€æˆ–â€œprintlnâ€çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨â€œformatâ€æˆ–â€œprint fâ€ã€‚ä¾‹å¦‚ 1System.out.format(.....); è¿™ä¸¤ä¸ªjava.io.PrintStreamçš„è¯­æ³•æ–¹æ³•ç›¸åŒï¼š 1public PrintStream format(String format, Object... args) å…¶ä¸­â€œformatâ€æ˜¯æŒ‡å®šè¦ä½¿ç”¨çš„æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œâ€œargsâ€æ˜¯ä½¿ç”¨è¯¥æ ¼å¼æ‰“å°çš„å˜é‡åˆ—è¡¨ã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­æ˜¯ 123System.out.format(&quot;The value of &quot; + &quot;the float variable is &quot; + &quot;%f, while the value of the &quot; + &quot;integer variable is %d, &quot; + &quot;and the string is %s&quot;, floatVar, intVar, stringVar); ç¬¬ä¸€ä¸ªå‚æ•°â€œformatâ€æ˜¯ä¸€ä¸ªæ ¼å¼å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šå¦‚ä½•æ ¼å¼åŒ–ç¬¬äºŒä¸ªå‚æ•°â€œargsâ€ä¸­çš„å¯¹è±¡ã€‚æ ¼å¼å­—ç¬¦ä¸²åŒ…å«çº¯æ–‡æœ¬å’Œæ ¼å¼è¯´æ˜ç¬¦ï¼Œå®ƒä»¬æ˜¯æ ¼å¼åŒ–â€œObjectâ€¦argsâ€å‚æ•°çš„ç‰¹æ®Šå­—ç¬¦ã€‚ï¼ˆç¬¦å·â€œObjectâ€¦argsâ€ç§°ä¸ºvarargsï¼Œè¿™æ„å‘³ç€å‚æ•°çš„æ•°é‡å¯èƒ½ä¸åŒã€‚ï¼‰ æ ¼å¼è¯´æ˜ç¬¦ä»¥ç™¾åˆ†å·ï¼ˆ%ï¼‰å¼€å¤´ï¼Œä»¥è½¬æ¢å™¨ç»“å°¾ã€‚è½¬æ¢å™¨æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼ŒæŒ‡ç¤ºè¦æ ¼å¼åŒ–çš„å‚æ•°ç±»å‹ã€‚åœ¨ç™¾åˆ†å·ï¼ˆ%ï¼‰å’Œè½¬æ¢å™¨ä¹‹é—´å¯ä»¥æœ‰å¯é€‰çš„æ ‡å¿—å’Œè¯´æ˜ç¬¦ã€‚java.util.Formatterä¸­è®°å½•äº†è®¸å¤šè½¬æ¢å™¨ã€æ ‡å¿—å’Œè¯´æ˜ç¬¦ ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬ç¤ºä¾‹ï¼š 12int i = 461012;System.out.format(&quot;The value of i is: %d%n&quot;, i); â€œ%dâ€æŒ‡å®šå•ä¸ªå˜é‡æ˜¯åè¿›åˆ¶æ•´æ•°ã€‚â€œ%nâ€æ˜¯ç‹¬ç«‹äºå¹³å°çš„æ¢è¡Œç¬¦ã€‚è¾“å‡ºä¸ºï¼š 1The value of i is: 461012 â€œprintfâ€å’Œâ€œformatâ€æ–¹æ³•å·²é‡è½½ã€‚æ¯ä¸ªéƒ½æœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š 1public PrintStream format(Locale l, String format, Object... args) ä¾‹å¦‚ï¼Œè¦ä»¥æ³•è¯­ç³»ç»Ÿæ‰“å°æ•°å­—ï¼ˆåœ¨è‹±æ–‡æµ®ç‚¹æ•°è¡¨ç¤ºæ³•ä¸­ä½¿ç”¨é€—å·ä»£æ›¿å°æ•°ç‚¹ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ï¼š 1234System.out.format(Locale.FRANCE, &quot;The value of the float &quot; + &quot;variable is %f, while the &quot; + &quot;value of the integer variable &quot; + &quot;is %d, and the string is %s%n&quot;, floatVar, intVar, stringVar); ä¸€ä¸ªğŸŒ°ä¸‹è¡¨åˆ—å‡ºäº†ç¤ºä¾‹ç¨‹åºâ€œTestFormatâ€ä¸­ä½¿ç”¨çš„ä¸€äº›è½¬æ¢å™¨å’Œæ ‡å¿—ã€‚java&#96;ï¼Œå®ƒè·Ÿåœ¨è¡¨åé¢ã€‚ è½¬æ¢å™¨ Flag è§£é‡Š d åè¿›åˆ¶æ•´æ•° f A float. n é€‚ç”¨äºè¿è¡Œåº”ç”¨ç¨‹åºçš„å¹³å°çš„æ–°è¡Œå­—ç¬¦ã€‚æ‚¨åº”è¯¥å§‹ç»ˆä½¿ç”¨â€œ%nâ€ï¼Œè€Œä¸æ˜¯â€œ\\nâ€ã€‚ tB æ—¥æœŸå’Œæ—¶é—´è½¬æ¢åŒºåŸŸè®¾ç½®ç‰¹å®šçš„æœˆä»½å…¨åã€‚ td, te æ—¥æœŸå’Œæ—¶é—´è½¬æ¢â€”â€”æ¯æœˆçš„ä¸¤ä½æ•°ã€‚tdæ ¹æ®éœ€è¦æœ‰å‰å¯¼é›¶ï¼Œteæ²¡æœ‰ã€‚ ty, tY æ—¥æœŸå’Œæ—¶é—´è½¬æ¢ty&#x3D;2ä½å¹´ä»½ï¼Œty&#x3D;4ä½å¹´ä»½ã€‚ tl 12å°æ—¶æ—¶é’Ÿä¸­çš„æ—¥æœŸå’Œæ—¶é—´è½¬æ¢å°æ—¶ã€‚ tM æ—¥æœŸå’Œæ—¶é—´è½¬æ¢åˆ†é’Ÿï¼ˆ2ä½ï¼‰ï¼Œå¿…è¦æ—¶å¸¦å‰å¯¼é›¶ã€‚ tp ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸå’Œæ—¶é—´è½¬æ¢ä¸Šåˆ&#x2F;ä¸‹åˆï¼ˆå°å†™ï¼‰ã€‚ tm æ—¥æœŸå’Œæ—¶é—´è½¬æ¢æœˆä»½ï¼ˆ2ä½ï¼‰ï¼Œå¿…è¦æ—¶å¸¦å‰å¯¼é›¶ã€‚ tD æ—¥æœŸå’Œæ—¶é—´è½¬æ¢æ—¥æœŸä¸º%tm%td%ty 08 å®½åº¦ä¸ºå…«ä¸ªå­—ç¬¦ï¼Œå¿…è¦æ—¶å¸¦å‰å¯¼é›¶ã€‚ + åŒ…æ‹¬æ­£è´Ÿå·ã€‚ , åŒ…æ‹¬åŒºåŸŸè®¾ç½®ç‰¹å®šçš„åˆ†ç»„å­—ç¬¦ã€‚ - å·¦å¯¹é½ã€‚ã€‚ .3 å°æ•°ç‚¹åä¸‰ä½ã€‚ 10.3 å®½åä¸ªå­—ç¬¦ï¼Œå³å¯¹é½ï¼Œå°æ•°ç‚¹åä¸‰ä½ã€‚ ä»¥ä¸‹ç¨‹åºæ˜¾ç¤ºäº†å¯ä»¥ä½¿ç”¨â€œformatâ€è¿›è¡Œçš„ä¸€äº›æ ¼å¼åŒ–ã€‚è¾“å‡ºæ˜¾ç¤ºåœ¨åµŒå…¥æ³¨é‡Šä¸­çš„åŒå¼•å·å†…ï¼š 123456789101112131415161718192021222324252627282930import java.util.Calendar;import java.util.Locale;public class TestFormat &#123; public static void main(String[] args) &#123; long n = 461012; System.out.format(&quot;%d%n&quot;, n); // --&gt; &quot;461012&quot; System.out.format(&quot;%08d%n&quot;, n); // --&gt; &quot;00461012&quot; System.out.format(&quot;%+8d%n&quot;, n); // --&gt; &quot; +461012&quot; System.out.format(&quot;%,8d%n&quot;, n); // --&gt; &quot; 461,012&quot; System.out.format(&quot;%+,8d%n%n&quot;, n); // --&gt; &quot;+461,012&quot; double pi = Math.PI; System.out.format(&quot;%f%n&quot;, pi); // --&gt; &quot;3.141593&quot; System.out.format(&quot;%.3f%n&quot;, pi); // --&gt; &quot;3.142&quot; System.out.format(&quot;%10.3f%n&quot;, pi); // --&gt; &quot; 3.142&quot; System.out.format(&quot;%-10.3f%n&quot;, pi); // --&gt; &quot;3.142&quot; System.out.format(Locale.FRANCE, &quot;%-10.4f%n%n&quot;, pi); // --&gt; &quot;3,1416&quot; Calendar c = Calendar.getInstance(); System.out.format(&quot;%tB %te, %tY%n&quot;, c, c, c); // --&gt; &quot;May 29, 2006&quot; System.out.format(&quot;%tl:%tM %tp%n&quot;, c, c, c); // --&gt; &quot;2:34 am&quot; System.out.format(&quot;%tD%n&quot;, c); // --&gt; &quot;05/29/06&quot; &#125;&#125; Note: æœ¬èŠ‚ä¸­çš„è®¨è®ºä»…æ¶µç›–â€œformatâ€å’Œâ€œprintfâ€æ–¹æ³•çš„åŸºç¡€çŸ¥è¯†ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§Basic I/O åœ¨â€œæ ¼å¼åŒ–â€é¡µé¢ä¸­çš„Essential trailéƒ¨åˆ†ã€‚ä½¿ç”¨Stringã€‚æ ¼å¼åˆ›å»ºå­—ç¬¦ä¸²åŒ…å«åœ¨stringsä¸­. DecimalFormatç±»æ‚¨å¯ä»¥ä½¿ç”¨java.text.DecimalFormatç±»æ¥æ§åˆ¶å‰å¯¼å’Œå°¾éšé›¶ã€å‰ç¼€å’Œåç¼€ã€åˆ†ç»„ï¼ˆåƒï¼‰åˆ†éš”ç¬¦å’Œå°æ•°åˆ†éš”ç¬¦çš„æ˜¾ç¤ºDecimalFormatåœ¨æ•°å­—æ ¼å¼æ–¹é¢æä¾›äº†å¾ˆå¤§çš„çµæ´»æ€§ï¼Œä½†å®ƒä¼šä½¿ä»£ç æ›´åŠ å¤æ‚ã€‚ ä¸‹é¢çš„ç¤ºä¾‹é€šè¿‡å‘â€œDecimalFormatâ€æ„é€ å‡½æ•°ä¼ é€’æ¨¡å¼å­—ç¬¦ä¸²æ¥åˆ›å»ºâ€œDecimalFormatâ€å¯¹è±¡â€œmyFormatterâ€ã€‚â€œformatï¼ˆï¼‰â€æ–¹æ³•ï¼ˆâ€œDecimalFormatâ€ç»§æ‰¿è‡ªâ€œNumberFormatâ€ï¼‰éšåç”±â€œmyFormatterâ€è°ƒç”¨-å®ƒæ¥å—â€œdoubleâ€å€¼ä½œä¸ºå‚æ•°ï¼Œå¹¶ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›æ ¼å¼åŒ–çš„æ•°å­—ï¼š ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ç¨‹åºï¼Œè¯´æ˜äº†â€œDecimalFormatâ€çš„ä½¿ç”¨ï¼š 123456789101112131415161718import java.text.*;public class DecimalFormatDemo &#123; static public void customFormat(String pattern, double value ) &#123; DecimalFormat myFormatter = new DecimalFormat(pattern); String output = myFormatter.format(value); System.out.println(value + &quot; &quot; + pattern + &quot; &quot; + output); &#125; static public void main(String[] args) &#123; customFormat(&quot;###,###.###&quot;, 123456.789); customFormat(&quot;###.##&quot;, 123456.789); customFormat(&quot;000000.000&quot;, 123.78); customFormat(&quot;$###,###.###&quot;, 12345.67); &#125;&#125; The output is: 1234123456.789 ###,###.### 123,456.789123456.789 ###.## 123456.79123.78 000000.000 000123.78012345.67 $###,###.### $12,345.67 ä¸‹è¡¨è§£é‡Šäº†æ¯ä¸€è¡Œè¾“å‡ºã€‚ Value Pattern Output Explanation 123456.789 ###,###.### 123,456.789 ç£…å·ï¼ˆ#ï¼‰è¡¨ç¤ºæ•°å­—ï¼Œé€—å·æ˜¯åˆ†ç»„åˆ†éš”ç¬¦çš„å ä½ç¬¦ï¼Œå¥ç‚¹æ˜¯å°æ•°åˆ†éš”ç¬¦çš„å®šä½å™¨ã€‚ 123456.789 ###.## 123456.79 â€œvalueâ€åœ¨å°æ•°ç‚¹å³ä¾§æœ‰ä¸‰ä½æ•°å­—ï¼Œä½†â€œpatternâ€åªæœ‰ä¸¤ä½ã€‚â€œformatâ€æ–¹æ³•é€šè¿‡èˆå…¥æ¥å¤„ç†æ­¤é—®é¢˜ã€‚ 123.78 000000.000 000123.780 â€œpatternâ€æŒ‡å®šå‰å¯¼å’Œå°¾éšé›¶ï¼Œå› ä¸ºä½¿ç”¨çš„æ˜¯0å­—ç¬¦è€Œä¸æ˜¯ç£…ç¬¦å·ï¼ˆ#ï¼‰ã€‚ 12345.67 $###,###.### $12,345.67 â€œpatternâ€ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ç¾å…ƒç¬¦å·ï¼ˆ$ï¼‰ã€‚æ³¨æ„ï¼Œå®ƒç´§æŒ¨ç€æ ¼å¼åŒ–çš„â€œè¾“å‡ºâ€ä¸­æœ€å·¦è¾¹çš„æ•°å­—ã€‚ è¶…è¶ŠåŸºæœ¬ç®—æœ¯Javaç¼–ç¨‹è¯­è¨€æ”¯æŒåŸºæœ¬ç®—æœ¯åŠå…¶ç®—æœ¯è¿ç®—ç¬¦ï¼š+ã€-ã€*ã€&#x2F;å’Œ%ã€‚Mathç±»ã€‚langåŒ…æä¾›äº†ç”¨äºè¿›è¡Œæ›´é«˜çº§æ•°å­¦è®¡ç®—çš„æ–¹æ³•å’Œå¸¸é‡ã€‚ â€œMathâ€ç±»ä¸­çš„æ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä»ç±»ä¸­è°ƒç”¨å®ƒä»¬ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1Math.cos(angle); Note: ä½¿ç”¨import staticè¯­è¨€åŠŸèƒ½ï¼Œæ‚¨ä¸å¿…åœ¨æ¯ä¸ªæ•°å­¦å‡½æ•°å‰é¢å†™â€œMathâ€ï¼š 1import static java.lang.Math.*; è¿™å…è®¸æ‚¨é€šè¿‡ç®€å•åç§°è°ƒç”¨â€œMathâ€ç±»æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š 1cos(angle); å¸¸é‡å’ŒåŸºæœ¬æ–¹æ³•â€œMathâ€ç±»åŒ…å«ä¸¤ä¸ªå¸¸é‡ï¼š Math.E, è¿™æ˜¯è‡ªç„¶å¯¹æ•°çš„åŸºç¡€ï¼Œä»¥åŠ Math.PI, è¿™æ˜¯åœ†çš„å‘¨é•¿ä¸å…¶ç›´å¾„ä¹‹æ¯”ã€‚ â€œMathâ€ç±»è¿˜åŒ…æ‹¬40å¤šä¸ªé™æ€æ–¹æ³•ã€‚ä¸‹è¡¨åˆ—å‡ºäº†ä¸€äº›åŸºæœ¬æ–¹æ³•ã€‚ Method Description double abs(double d)float abs(float f)int abs(int i)long abs(long lng) è¿”å›å‚æ•°çš„ç»å¯¹å€¼ã€‚ double ceil(double d) è¿”å›å¤§äºæˆ–ç­‰äºå‚æ•°çš„æœ€å°æ•´æ•°ã€‚ä»¥åŒç²¾åº¦è¿”å›ã€‚ double floor(double d) è¿”å›å°äºæˆ–ç­‰äºå‚æ•°çš„æœ€å¤§æ•´æ•°ã€‚ä»¥åŒç²¾åº¦è¿”å›ã€‚ double rint(double d) è¿”å›å€¼æœ€æ¥è¿‘å‚æ•°çš„æ•´æ•°ã€‚ä»¥åŒç²¾åº¦è¿”å›ã€‚ long round(double d)int round(float f) è¿”å›ä¸å‚æ•°æœ€æ¥è¿‘çš„longæˆ–intï¼Œå¦‚æ–¹æ³•çš„è¿”å›ç±»å‹æ‰€ç¤ºã€‚ double min(double arg1, double arg2)float min(float arg1, float arg2)int min(int arg1, int arg2)long min(long arg1, long arg2) è¿”å›ä¸¤ä¸ªå‚æ•°ä¸­è¾ƒå°çš„ä¸€ä¸ªã€‚ double max(double arg1, double arg2)float max(float arg1, float arg2)int max(int arg1, int arg2)long max(long arg1, long arg2) è¿”å›ä¸¤ä¸ªå‚æ•°ä¸­è¾ƒå¤§çš„ä¸€ä¸ªã€‚ ä»¥ä¸‹ç¨‹åºBasicMathDemoï¼Œè¯´æ˜äº†å¦‚ä½•ä½¿ç”¨å…¶ä¸­ä¸€äº›æ–¹æ³•ï¼š 12345678910111213141516171819202122232425public class BasicMathDemo &#123; public static void main(String[] args) &#123; double a = -191.635; double b = 43.74; int c = 16, d = 45; System.out.printf(&quot;The absolute value &quot; + &quot;of %.3f is %.3f%n&quot;, a, Math.abs(a)); System.out.printf(&quot;The ceiling of &quot; + &quot;%.2f is %.0f%n&quot;, b, Math.ceil(b)); System.out.printf(&quot;The floor of &quot; + &quot;%.2f is %.0f%n&quot;, b, Math.floor(b)); System.out.printf(&quot;The rint of %.2f &quot; + &quot;is %.0f%n&quot;, b, Math.rint(b)); System.out.printf(&quot;The max of %d and &quot; + &quot;%d is %d%n&quot;, c, d, Math.max(c, d)); System.out.printf(&quot;The min of of %d &quot; + &quot;and %d is %d%n&quot;, c, d, Math.min(c, d)); &#125;&#125; Hereâ€™s the output from this program: 123456The absolute value of -191.635 is 191.635The ceiling of 43.74 is 44The floor of 43.74 is 43The rint of 43.74 is 44The max of 16 and 45 is 45The min of 16 and 45 is 16 æŒ‡æ•°å’Œå¯¹æ•°æ–¹æ³•ä¸‹è¡¨åˆ—å‡ºäº†â€œMathâ€ç±»çš„æŒ‡æ•°å’Œå¯¹æ•°æ–¹æ³•ã€‚ Method Description double exp(double d) å°†è‡ªç„¶å¯¹æ•°çš„åŸºæ•°eè¿”å›ä¸ºå‚æ•°çš„å¹‚ã€‚ double log(double d) è¿”å›å‚æ•°çš„è‡ªç„¶å¯¹æ•°ã€‚ double pow(double base, double exponent) è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ä¹˜ä»¥ç¬¬äºŒä¸ªå‚æ•°çš„å¹‚ã€‚ double sqrt(double d) è¿”å›å‚æ•°çš„å¹³æ–¹æ ¹ã€‚ ä»¥ä¸‹ç¨‹åºExponentialDemoï¼Œæ˜¾ç¤ºâ€œeâ€çš„å€¼ï¼Œç„¶åå¯¹ä»»æ„é€‰æ‹©çš„æ•°å­—è°ƒç”¨ä¸Šè¡¨ä¸­åˆ—å‡ºçš„æ¯ä¸ªæ–¹æ³•ï¼š 123456789101112131415161718192021public class ExponentialDemo &#123; public static void main(String[] args) &#123; double x = 11.635; double y = 2.76; System.out.printf(&quot;The value of &quot; + &quot;e is %.4f%n&quot;, Math.E); System.out.printf(&quot;exp(%.3f) &quot; + &quot;is %.3f%n&quot;, x, Math.exp(x)); System.out.printf(&quot;log(%.3f) is &quot; + &quot;%.3f%n&quot;, x, Math.log(x)); System.out.printf(&quot;pow(%.3f, %.3f) &quot; + &quot;is %.3f%n&quot;, x, y, Math.pow(x, y)); System.out.printf(&quot;sqrt(%.3f) is &quot; + &quot;%.3f%n&quot;, x, Math.sqrt(x)); &#125;&#125; Hereâ€™s the output youâ€™ll see when you run ExponentialDemo: 12345The value of e is 2.7183exp(11.635) is 112983.831log(11.635) is 2.454pow(11.635, 2.760) is 874.008sqrt(11.635) is 3.411 ä¸‰è§’æµ‹é‡æ³•â€œMathâ€ç±»è¿˜æä¾›äº†ä¸‰è§’å‡½æ•°çš„é›†åˆï¼Œæ€»ç»“å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚ä¼ é€’ç»™æ¯ä¸ªæ–¹æ³•çš„å€¼éƒ½æ˜¯ä»¥å¼§åº¦è¡¨ç¤ºçš„è§’åº¦ã€‚å¯ä»¥ä½¿ç”¨â€œtoRadiansâ€æ–¹æ³•å°†åº¦æ•°è½¬æ¢ä¸ºå¼§åº¦ã€‚ Method Description double sin(double d) è¿”å›æŒ‡å®šåŒç²¾åº¦å€¼çš„æ­£å¼¦å€¼ã€‚ double cos(double d) è¿”å›æŒ‡å®šåŒç²¾åº¦å€¼çš„ä½™å¼¦å€¼ã€‚ double tan(double d) è¿”å›æŒ‡å®šåŒç²¾åº¦å€¼çš„æ­£åˆ‡å€¼ã€‚ double asin(double d) è¿”å›æŒ‡å®šåŒç²¾åº¦å€¼çš„åæ­£å¼¦ã€‚ double acos(double d) è¿”å›æŒ‡å®šåŒç²¾åº¦å€¼çš„åä½™å¼¦ã€‚ double atan(double d) è¿”å›æŒ‡å®šåŒç²¾åº¦å€¼çš„åæ­£åˆ‡ã€‚ double atan2(double y, double x) å°†çŸ©å½¢åæ ‡â€œï¼ˆxï¼Œyï¼‰â€è½¬æ¢ä¸ºæåæ ‡â€œï¼ˆrï¼ŒÎ¸ï¼‰â€å¹¶è¿”å›â€œÎ¸â€ã€‚ double toDegrees(double d)double toRadians(double d) å°†å‚æ•°è½¬æ¢ä¸ºåº¦æˆ–å¼§åº¦ã€‚ è¿™æ˜¯ä¸€ä¸ªç¨‹åºTrigonomicDemoï¼Œä½¿ç”¨è¿™äº›æ–¹æ³•è®¡ç®—45åº¦è§’çš„å„ç§ä¸‰è§’å€¼ï¼š 123456789101112131415161718192021222324252627282930public class TrigonometricDemo &#123; public static void main(String[] args) &#123; double degrees = 45.0; double radians = Math.toRadians(degrees); System.out.format(&quot;The value of pi &quot; + &quot;is %.4f%n&quot;, Math.PI); System.out.format(&quot;The sine of %.1f &quot; + &quot;degrees is %.4f%n&quot;, degrees, Math.sin(radians)); System.out.format(&quot;The cosine of %.1f &quot; + &quot;degrees is %.4f%n&quot;, degrees, Math.cos(radians)); System.out.format(&quot;The tangent of %.1f &quot; + &quot;degrees is %.4f%n&quot;, degrees, Math.tan(radians)); System.out.format(&quot;The arcsine of %.4f &quot; + &quot;is %.4f degrees %n&quot;, Math.sin(radians), Math.toDegrees(Math.asin(Math.sin(radians)))); System.out.format(&quot;The arccosine of %.4f &quot; + &quot;is %.4f degrees %n&quot;, Math.cos(radians), Math.toDegrees(Math.acos(Math.cos(radians)))); System.out.format(&quot;The arctangent of %.4f &quot; + &quot;is %.4f degrees %n&quot;, Math.tan(radians), Math.toDegrees(Math.atan(Math.tan(radians)))); &#125;&#125; The output of this program is as follows: 1234567The value of pi is 3.1416The sine of 45.0 degrees is 0.7071The cosine of 45.0 degrees is 0.7071The tangent of 45.0 degrees is 1.0000The arcsine of 0.7071 is 45.0000 degreesThe arccosine of 0.7071 is 45.0000 degreesThe arctangent of 1.0000 is 45.0000 degrees éšæœºæ•°â€œrandom()â€æ–¹æ³•è¿”å›ä»‹äº0.0å’Œ1.0ä¹‹é—´çš„ä¼ªéšæœºé€‰æ‹©çš„æ•°å­—ã€‚èŒƒå›´åŒ…æ‹¬0.0ä½†ä¸åŒ…æ‹¬1.0ã€‚æ¢å¥è¯è¯´ï¼š 0.0 &lt;= Math.random() &lt; 1.0. è¦è·å¾—ä¸åŒèŒƒå›´çš„æ•°å­—ï¼Œå¯ä»¥å¯¹éšæœºæ–¹æ³•è¿”å›çš„å€¼æ‰§è¡Œç®—æœ¯è¿ç®—ã€‚ä¾‹å¦‚ï¼Œè¦ç”Ÿæˆä¸€ä¸ªä»‹äº0å’Œ9ä¹‹é—´çš„æ•´æ•°ï¼Œæ‚¨å¯ä»¥å†™ï¼š 1int number = (int)(Math.random() * 10); é€šè¿‡å°†è¯¥å€¼ä¹˜ä»¥10ï¼Œå¯èƒ½å€¼çš„èŒƒå›´å˜ä¸º 0.0 &lt;= number &lt; 10.0. ä½¿ç”¨Mathã€‚å½“ä½ éœ€è¦ç”Ÿæˆä¸€ä¸ªéšæœºæ•°æ—¶ï¼Œâ€œéšæœºâ€å¾ˆæœ‰æ•ˆã€‚å¦‚æœéœ€è¦ç”Ÿæˆä¸€ç³»åˆ—éšæœºæ•°ï¼Œåº”è¯¥åˆ›å»ºjava.utilã€‚Randomâ€å¹¶è°ƒç”¨è¯¥å¯¹è±¡ä¸Šçš„æ–¹æ³•ä»¥ç”Ÿæˆæ•°å­—ã€‚ Numbers æ€»ç»“æ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåŒ…è£…ç±»ï¼ˆâ€œByteâ€ã€â€œDoubleâ€ã€â€Floatâ€œã€â€Integerâ€œã€â€Longâ€œæˆ–â€Shortâ€œï¼‰æ¥åŒ…è£…å¯¹è±¡ä¸­çš„å¤šä¸ªåŸºæœ¬ç±»å‹ã€‚Javaç¼–è¯‘å™¨ä¼šåœ¨å¿…è¦æ—¶è‡ªåŠ¨ä¸ºæ‚¨åŒ…è£…ï¼ˆè£…ç®±ï¼‰åŸè¯­ï¼Œå¹¶åœ¨å¿…è¦æ—¶å†æ¬¡æ‰“å¼€å®ƒä»¬ã€‚ â€œNumberâ€ç±»åŒ…æ‹¬å¸¸é‡å’Œæœ‰ç”¨çš„ç±»æ–¹æ³•ã€‚MIN_VALUEå’Œ&#96;MAX_VALUEâ€™å¸¸é‡åŒ…å«è¯¥ç±»å‹å¯¹è±¡å¯ä»¥åŒ…å«çš„æœ€å°å’Œæœ€å¤§å€¼ã€‚â€œbyteValueâ€ã€â€œshortValueâ€å’Œç±»ä¼¼çš„æ–¹æ³•å°†ä¸€ç§æ•°å­—ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§ã€‚â€œvalueOfâ€æ–¹æ³•å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œâ€œtoStringâ€æ–¹æ³•å°†æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ è¦æ ¼å¼åŒ–åŒ…å«æ•°å­—çš„å­—ç¬¦ä¸²ä»¥è¿›è¡Œè¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨â€œPrintStreamâ€ç±»ä¸­çš„â€œprintfï¼ˆï¼‰â€æˆ–â€œformatï¼ˆï¼‰â€æ–¹æ³•ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨â€œNumberFormatâ€ç±»ä½¿ç”¨æ¨¡å¼è‡ªå®šä¹‰æ•°å­—æ ¼å¼ã€‚ â€œMathâ€ç±»åŒ…å«ç”¨äºæ‰§è¡Œæ•°å­¦å‡½æ•°çš„å„ç§ç±»æ–¹æ³•ï¼ŒåŒ…æ‹¬æŒ‡æ•°ã€å¯¹æ•°å’Œä¸‰è§’æ–¹æ³•&#96;Mathè¿˜åŒ…æ‹¬åŸºæœ¬çš„ç®—æœ¯å‡½æ•°ï¼Œå¦‚ç»å¯¹å€¼å’Œèˆå…¥ï¼Œä»¥åŠç”Ÿæˆéšæœºæ•°çš„æ–¹æ³•â€œrandomï¼ˆï¼‰â€ã€‚ Characterså¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯å•ä¸ªå­—ç¬¦å€¼ï¼Œåˆ™å°†ä½¿ç”¨åŸºæœ¬çš„â€œcharâ€ç±»å‹ã€‚ä¾‹å¦‚ï¼š 12345char ch = &#x27;a&#x27;; // Unicode for uppercase Greek omega characterchar uniChar = &#x27;\\u03A9&#x27;;// an array of charschar[] charArray = &#123; &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27; &#125;; ç„¶è€Œï¼Œæœ‰æ—¶éœ€è¦å°†å­—ç¬¦ç”¨ä½œå¯¹è±¡ï¼Œä¾‹å¦‚ï¼Œç”¨ä½œéœ€è¦å¯¹è±¡çš„æ–¹æ³•å‚æ•°ã€‚Javaç¼–ç¨‹è¯­è¨€æä¾›äº†ä¸€ä¸ªwrapperç±»ï¼Œç”¨äºå°†â€œcharâ€â€œåŒ…è£…â€åœ¨â€œCharacterâ€å¯¹è±¡ä¸­ã€‚â€œCharacterâ€ç±»å‹çš„å¯¹è±¡åŒ…å«ä¸€ä¸ªå­—æ®µï¼Œå…¶ç±»å‹ä¸ºâ€œcharâ€ã€‚æ­¤å­—ç¬¦ç±»è¿˜æä¾›äº†è®¸å¤šæœ‰ç”¨çš„ç±»ï¼ˆå³é™æ€ï¼‰æ–¹æ³•æ¥å¤„ç†å­—ç¬¦ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨â€œCharacterâ€æ„é€ å‡½æ•°åˆ›å»ºâ€œCharacterâ€å¯¹è±¡ï¼š 1Character ch = new Character(&#x27;a&#x27;); åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒJavaç¼–è¯‘å™¨è¿˜ä¼šä¸ºæ‚¨åˆ›å»ºä¸€ä¸ªâ€œå­—ç¬¦â€å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°†åŸè¯­â€œcharâ€ä¼ é€’ç»™éœ€è¦å¯¹è±¡çš„æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†â€œcharâ€è½¬æ¢ä¸ºâ€œCharacterâ€ã€‚å¦‚æœè½¬æ¢æ–¹å‘ç›¸åï¼Œåˆ™æ­¤åŠŸèƒ½ç§°ä¸ºautoboxingæˆ–unboxingã€‚æœ‰å…³è‡ªåŠ¨è£…ç®±å’Œå–æ¶ˆè£…ç®±çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§è‡ªåŠ¨è£…ç®±å’Œè§£é™¤è£…ç®±. Note: â€œCharacterâ€ç±»æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ä¸€æ—¦åˆ›å»ºäº†å®ƒï¼Œå°±ä¸èƒ½æ›´æ”¹â€œCharacterâ€å¯¹è±¡ã€‚ ä¸‹è¡¨åˆ—å‡ºäº†â€œCharacterâ€ç±»ä¸­ä¸€äº›æœ€æœ‰ç”¨çš„æ–¹æ³•ï¼Œä½†å¹¶ä¸è¯¦å°½ã€‚æœ‰å…³è¯¥ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„å®Œæ•´åˆ—è¡¨ï¼ˆè¶…è¿‡50ä¸ªï¼‰ï¼Œè¯·å‚é˜…java.lang.CharacterAPIè§„èŒƒã€‚ Method Description boolean isLetter(char ch)boolean isDigit(char ch) ç¡®å®šæŒ‡å®šçš„å­—ç¬¦å€¼æ˜¯å­—æ¯è¿˜æ˜¯æ•°å­—ã€‚ boolean isWhitespace(char ch) ç¡®å®šæŒ‡å®šçš„å­—ç¬¦å€¼æ˜¯å¦ä¸ºç©ºç™½ã€‚ boolean isUpperCase(char ch)boolean isLowerCase(char ch) ç¡®å®šæŒ‡å®šçš„å­—ç¬¦å€¼æ˜¯å¤§å†™è¿˜æ˜¯å°å†™ã€‚ char toUpperCase(char ch)char toLowerCase(char ch) è¿”å›æŒ‡å®šå­—ç¬¦å€¼çš„å¤§å°å†™å½¢å¼ã€‚ toString(char ch) è¿”å›è¡¨ç¤ºæŒ‡å®šå­—ç¬¦å€¼çš„â€œå­—ç¬¦ä¸²â€å¯¹è±¡ï¼Œå³ä¸€ä¸ªå•å­—ç¬¦å­—ç¬¦ä¸²ã€‚ è½¬ä¹‰åºåˆ—åæ–œæ ï¼ˆ\\ï¼‰å‰é¢çš„å­—ç¬¦æ˜¯è½¬ä¹‰åºåˆ—ï¼Œå¯¹ç¼–è¯‘å™¨æœ‰ç‰¹æ®Šæ„ä¹‰ã€‚ä¸‹è¡¨æ˜¾ç¤ºäº†Javaè½¬ä¹‰åºåˆ—ï¼š Escape Sequence Description \\t æ­¤æ—¶åœ¨æ–‡æœ¬ä¸­æ’å…¥ä¸€ä¸ªé€‰é¡¹å¡ã€‚ \\b æ­¤æ—¶åœ¨æ–‡æœ¬ä¸­æ’å…¥é€€æ ¼ã€‚ \\n æ­¤æ—¶åœ¨æ–‡æœ¬ä¸­æ’å…¥æ–°è¡Œã€‚ \\r æ­¤æ—¶åœ¨æ–‡æœ¬ä¸­æ’å…¥å›è½¦ç¬¦ã€‚ \\f æ­¤æ—¶åœ¨æ–‡æœ¬ä¸­æ’å…¥è¡¨å•æºã€‚ \\&#39; æ­¤æ—¶åœ¨æ–‡æœ¬ä¸­æ’å…¥å•å¼•å·å­—ç¬¦ã€‚ \\&quot; æ­¤æ—¶åœ¨æ–‡æœ¬ä¸­æ’å…¥åŒå¼•å·å­—ç¬¦ã€‚ \\\\ æ­¤æ—¶åœ¨æ–‡æœ¬ä¸­æ’å…¥åæ–œæ å­—ç¬¦ã€‚ å½“åœ¨printè¯­å¥ä¸­é‡åˆ°è½¬ä¹‰åºåˆ—æ—¶ï¼Œç¼–è¯‘å™¨ä¼šç›¸åº”åœ°è§£é‡Šå®ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦å°†å¼•å·æ”¾åœ¨å¼•å·å†…ï¼Œå¿…é¡»åœ¨å†…éƒ¨å¼•å·ä¸Šä½¿ç”¨è½¬ä¹‰åºåˆ—â€œâ€ 1She said &quot;Hello!&quot; to me. ä½ ä¼šå†™ 1System.out.println(&quot;She said \\&quot;Hello!\\&quot; to me.&quot;); StringsStrings, åœ¨Javaç¼–ç¨‹ä¸­å¹¿æ³›ä½¿ç”¨çš„å­—ç¬¦åºåˆ—æ˜¯å­—ç¬¦åºåˆ—ã€‚åœ¨Javaç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯å¯¹è±¡ã€‚ Javaå¹³å°æä¾›Stringç±»æ¥åˆ›å»ºå’Œæ“ä½œå­—ç¬¦ä¸²ã€‚ Creating Stringsåˆ›å»ºå­—ç¬¦ä¸²çš„æœ€ç›´æ¥æ–¹æ³•æ˜¯ç¼–å†™ï¼š 1String greeting = &quot;Hello world!&quot;; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€œä½ å¥½ä¸–ç•Œï¼â€æ˜¯å­—ç¬¦ä¸²æ–‡å­—-ä»£ç ä¸­ç”¨åŒå¼•å·æ‹¬èµ·æ¥çš„ä¸€ç³»åˆ—å­—ç¬¦ã€‚æ¯å½“åœ¨ä»£ç ä¸­é‡åˆ°å­—ç¬¦ä¸²æ—¶ï¼Œç¼–è¯‘å™¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªâ€œstringâ€å¯¹è±¡ï¼Œå…¶å€¼åœ¨æœ¬ä¾‹ä¸­ä¸ºâ€œHello worldï¼â€ã€‚ ä¸å…¶ä»–ä»»ä½•å¯¹è±¡ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨â€œnewâ€å…³é”®å­—å’Œæ„é€ å‡½æ•°åˆ›å»ºâ€œStringâ€å¯¹è±¡ã€‚â€œStringâ€ç±»æœ‰13ä¸ªæ„é€ å‡½æ•°ï¼Œå…è®¸æ‚¨ä½¿ç”¨ä¸åŒçš„æºï¼ˆä¾‹å¦‚å­—ç¬¦æ•°ç»„ï¼‰æä¾›å­—ç¬¦ä¸²çš„åˆå§‹å€¼ï¼š 123char[] helloArray = &#123; &#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27;.&#x27; &#125;;String helloString = new String(helloArray);System.out.println(helloString); æ­¤ä»£ç æ®µçš„æœ€åä¸€è¡Œæ˜¾ç¤ºâ€œhelloâ€ã€‚ Note: â€œStringâ€ç±»æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ä¸€æ—¦åˆ›å»ºäº†â€œStringâ€å¯¹è±¡å°±ä¸èƒ½æ›´æ”¹ã€‚â€œStringâ€ç±»æœ‰è®¸å¤šæ–¹æ³•ï¼Œä¸‹é¢å°†è®¨è®ºå…¶ä¸­ä¸€äº›æ–¹æ³•ï¼Œå®ƒä»¬ä¼¼ä¹å¯ä»¥ä¿®æ”¹å­—ç¬¦ä¸²ã€‚ç”±äºå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥è¿™äº›æ–¹æ³•çœŸæ­£è¦åšçš„æ˜¯åˆ›å»ºå¹¶è¿”å›åŒ…å«æ“ä½œç»“æœçš„æ–°å­—ç¬¦ä¸²ã€‚ String Lengthç”¨äºè·å–å¯¹è±¡ä¿¡æ¯çš„æ–¹æ³•ç§°ä¸ºè®¿é—®å™¨æ–¹æ³•ã€‚å¯ä»¥ç”¨äºå­—ç¬¦ä¸²çš„ä¸€ä¸ªè®¿é—®å™¨æ–¹æ³•æ˜¯â€œlengthï¼ˆï¼‰â€æ–¹æ³•ï¼Œå®ƒè¿”å›å­—ç¬¦ä¸²å¯¹è±¡ä¸­åŒ…å«çš„å­—ç¬¦æ•°ã€‚æ‰§è¡Œä»¥ä¸‹ä¸¤è¡Œä»£ç åï¼Œâ€œlenâ€ç­‰äº17ï¼š 12String palindrome = &quot;Dot saw I was Tod&quot;;int len = palindrome.length(); å›æ–‡æ˜¯ä¸€ä¸ªå¯¹ç§°çš„å•è¯æˆ–å¥å­ï¼Œå‰åæ‹¼å†™ç›¸åŒï¼Œå¿½ç•¥å¤§å°å†™å’Œæ ‡ç‚¹ç¬¦å·ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç®€çŸ­è€Œä½æ•ˆçš„ç¨‹åºæ¥åè½¬å›æ–‡å­—ç¬¦ä¸²ã€‚å®ƒè°ƒç”¨â€œStringâ€æ–¹æ³•â€œcharAtï¼ˆiï¼‰â€ï¼Œè¯¥æ–¹æ³•è¿”å›å­—ç¬¦ä¸²ä¸­çš„ç¬¬iä¸ªå­—ç¬¦ï¼Œä»0å¼€å§‹è®¡æ•°ã€‚ 12345678910111213141516171819202122232425public class StringDemo &#123; public static void main(String[] args) &#123; String palindrome = &quot;Dot saw I was Tod&quot;; int len = palindrome.length(); char[] tempCharArray = new char[len]; char[] charArray = new char[len]; // put original string in an // array of chars for (int i = 0; i &lt; len; i++) &#123; tempCharArray[i] = palindrome.charAt(i); &#125; // reverse array of chars for (int j = 0; j &lt; len; j++) &#123; charArray[j] = tempCharArray[len - 1 - j]; &#125; String reversePalindrome = new String(charArray); System.out.println(reversePalindrome); &#125;&#125; Running the program produces this output: 1doT saw I was toD ä¸ºäº†å®ç°å­—ç¬¦ä¸²åè½¬ï¼Œç¨‹åºå¿…é¡»å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„ï¼ˆç¬¬ä¸€ä¸ªâ€œforâ€å¾ªç¯ï¼‰ï¼Œå°†æ•°ç»„åè½¬ä¸ºç¬¬äºŒä¸ªæ•°ç»„ï¼ˆç¬¬äºŒä¸ªâ€œforâ€œå¾ªç¯ï¼‰ï¼Œç„¶åå†è½¬æ¢å›å­—ç¬¦ä¸²ã€‚Stringç±»åŒ…å«ä¸€ä¸ªæ–¹æ³•â€œgetCharsï¼ˆï¼‰â€ï¼Œç”¨äºå°†å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨ 1palindrome.getChars(0, len, tempCharArray, 0); æ‹¼æ¥ Stringsâ€œStringâ€ç±»åŒ…å«ä¸€ä¸ªè¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼š 1string1.concat(string2); è¿™å°†è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²ä¸ºstring1ï¼Œæœ«å°¾æ·»åŠ äº†string2ã€‚ è¿˜å¯ä»¥å¯¹å­—ç¬¦ä¸²æ–‡æœ¬ä½¿ç”¨â€œconcatï¼ˆï¼‰â€æ–¹æ³•ï¼Œå¦‚ï¼š 1&quot;My name is &quot;.concat(&quot;Rumplestiltskin&quot;); å­—ç¬¦ä¸²é€šå¸¸ç”¨â€œ+â€è¿ç®—ç¬¦è¿æ¥ï¼Œå¦‚ 1&quot;Hello,&quot; + &quot; world&quot; + &quot;!&quot; è¿™å¯¼è‡´ 1&quot;Hello, world!&quot; â€œ+â€è¿ç®—ç¬¦åœ¨â€œprintâ€è¯­å¥ä¸­å¹¿æ³›ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š 12String string1 = &quot;saw I was &quot;;System.out.println(&quot;Dot &quot; + string1 + &quot;Tod&quot;); which prints 1Dot saw I was Tod è¿™ç§è¿æ¥å¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡çš„æ··åˆã€‚å¯¹äºæ¯ä¸ªä¸æ˜¯â€œå­—ç¬¦ä¸²â€çš„å¯¹è±¡ï¼Œè°ƒç”¨å…¶â€œtoStringï¼ˆï¼‰â€æ–¹æ³•å°†å…¶è½¬æ¢ä¸ºâ€œå­—ç¬¦ä¸²â€ã€‚ Note: Javaç¼–ç¨‹è¯­è¨€ä¸å…è®¸æ–‡æœ¬å­—ç¬¦ä¸²è·¨è¶Šæºæ–‡ä»¶ä¸­çš„è¡Œï¼Œå› æ­¤å¿…é¡»åœ¨å¤šè¡Œå­—ç¬¦ä¸²ä¸­çš„æ¯è¡Œæœ«å°¾ä½¿ç”¨â€œ+â€è¿æ¥è¿ç®—ç¬¦ã€‚ä¾‹å¦‚ï¼š 123String quote = &quot;Now is the time for all good &quot; + &quot;men to come to the aid of their country.&quot;; åœ¨â€œprintâ€è¯­å¥ä¸­ï¼Œä½¿ç”¨â€œ+â€ä¸²è”è¿ç®—ç¬¦æ–­å¼€è¡Œä¹‹é—´çš„å­—ç¬¦ä¸²ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ã€‚ åˆ›å»ºæ ¼å¼å­—ç¬¦ä¸²æ‚¨å·²ç»çœ‹åˆ°äº†ä½¿ç”¨â€œprintfï¼ˆï¼‰â€å’Œâ€œformatï¼ˆï¼‰â€æ–¹æ³•æ‰“å°å¸¦æœ‰æ ¼å¼åŒ–æ•°å­—çš„è¾“å‡ºã€‚â€œStringâ€ç±»æœ‰ä¸€ä¸ªç­‰æ•ˆçš„ç±»æ–¹æ³•â€œformatï¼ˆï¼‰â€ï¼Œå®ƒè¿”å›â€œStringâ€å¯¹è±¡è€Œä¸æ˜¯â€œPrintStreamâ€å¯¹è±¡ã€‚ ä½¿ç”¨â€œStringâ€çš„â€œstaticâ€formatï¼ˆï¼‰æ–¹æ³•ï¼Œæ‚¨å¯ä»¥åˆ›å»ºå¯é‡å¤ä½¿ç”¨çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§æ‰“å°è¯­å¥ã€‚ä¾‹å¦‚ï¼Œä»£æ›¿ 123456System.out.printf(&quot;The value of the float &quot; + &quot;variable is %f, while &quot; + &quot;the value of the &quot; + &quot;integer variable is %d, &quot; + &quot;and the string is %s&quot;, floatVar, intVar, stringVar); you can write 12345678String fs;fs = String.format(&quot;The value of the float &quot; + &quot;variable is %f, while &quot; + &quot;the value of the &quot; + &quot;integer variable is %d, &quot; + &quot; and the string is %s&quot;, floatVar, intVar, stringVar);System.out.println(fs); åœ¨æ•°å­—å’Œå­—ç¬¦ä¸²ä¹‹é—´è½¬æ¢å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—é€šå¸¸ï¼Œç¨‹åºä»¥å­—ç¬¦ä¸²å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·è¾“å…¥çš„å€¼ï¼‰ä¸­çš„æ•°å­—æ•°æ®ç»“å°¾ã€‚ åŒ…è£…åŸºæœ¬æ•°å­—ç±»å‹çš„â€œNumberâ€å­ç±»ï¼ˆByteï¼ŒIntegerï¼ŒDoubleï¼ŒFloatï¼ŒLongï¼Œå’ŒShort)æ¯ä¸ªéƒ½æä¾›ä¸€ä¸ªåä¸ºâ€œvalueOfâ€çš„ç±»æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºè¯¥ç±»å‹çš„å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ValueOfDemoï¼Œä»å‘½ä»¤è¡Œè·å–ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå°†å®ƒä»¬è½¬æ¢ä¸ºæ•°å­—ï¼Œå¹¶å¯¹å€¼æ‰§è¡Œç®—æœ¯è¿ç®—ï¼š 123456789101112131415161718192021222324252627public class ValueOfDemo &#123; public static void main(String[] args) &#123; // this program requires two // arguments on the command line if (args.length == 2) &#123; // convert strings to numbers float a = (Float.valueOf(args[0])).floatValue(); float b = (Float.valueOf(args[1])).floatValue(); // do some arithmetic System.out.println(&quot;a + b = &quot; + (a + b)); System.out.println(&quot;a - b = &quot; + (a - b)); System.out.println(&quot;a * b = &quot; + (a * b)); System.out.println(&quot;a / b = &quot; + (a / b)); System.out.println(&quot;a % b = &quot; + (a % b)); &#125; else &#123; System.out.println(&quot;This program &quot; + &quot;requires two command-line arguments.&quot;); &#125; &#125;&#125; ä»¥ä¸‹æ˜¯ä½¿ç”¨â€œ4.5â€å’Œâ€œ87.2â€ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°æ—¶ç¨‹åºçš„è¾“å‡ºï¼š 12345a + b = 91.7a - b = -82.7a * b = 392.4a / b = 0.0516055a % b = 4.5 Note: åŒ…è£…åŸå§‹æ•°å­—ç±»å‹çš„æ¯ä¸ªâ€œNumberâ€å­ç±»è¿˜æä¾›äº†ä¸€ä¸ªâ€œparseXXXXï¼ˆï¼‰â€æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼Œâ€œparseFloatï¼ˆï¼‰â€ï¼‰ï¼Œå¯ç”¨äºå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºåŸå§‹æ•°å­—ã€‚ç”±äºè¿”å›çš„æ˜¯åŸºå…ƒç±»å‹è€Œä¸æ˜¯å¯¹è±¡ï¼Œå› æ­¤â€œparseFloatï¼ˆï¼‰â€æ–¹æ³•æ¯”â€œvalueOfï¼ˆï¼‰â€æ›´ç›´æ¥ã€‚ä¾‹å¦‚ï¼Œåœ¨â€œValueOfDemoâ€ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼š 12float a = Float.parseFloat(args[0]);float b = Float.parseFloat(args[1]); å°†æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²æœ‰æ—¶æ‚¨éœ€è¦å°†æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå› ä¸ºæ‚¨éœ€è¦å¯¹å…¶å­—ç¬¦ä¸²å½¢å¼çš„å€¼è¿›è¡Œæ“ä½œã€‚æœ‰å‡ ç§ç®€å•çš„æ–¹æ³•å¯ä»¥å°†æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸²ï¼š 123int i;// Concatenate &quot;i&quot; with an empty string; conversion is handled for you.String s1 = &quot;&quot; + i; or 12// The valueOf class method.String s2 = String.valueOf(i); æ¯ä¸ªâ€œNumberâ€å­ç±»éƒ½åŒ…å«ä¸€ä¸ªç±»æ–¹æ³•â€œtoStringï¼ˆï¼‰â€ï¼Œè¯¥æ–¹æ³•å°†å…¶åŸå§‹ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼š 1234int i;double d;String s3 = Integer.toString(i); String s4 = Double.toString(d); ToStringDemoç¤ºä¾‹ä½¿ç”¨â€œtoStringâ€æ–¹æ³•å°†æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ç„¶åï¼Œç¨‹åºä½¿ç”¨ä¸€äº›å­—ç¬¦ä¸²æ–¹æ³•è®¡ç®—å°æ•°ç‚¹å‰åçš„ä½æ•°ï¼š 1234567891011121314public class ToStringDemo &#123; public static void main(String[] args) &#123; double d = 858.48; String s = Double.toString(d); int dot = s.indexOf(&#x27;.&#x27;); System.out.println(dot + &quot; digits &quot; + &quot;before decimal point.&quot;); System.out.println( (s.length() - dot - 1) + &quot; digits after decimal point.&quot;); &#125;&#125; The output of this program is: 123 digits before decimal point.2 digits after decimal point. æ“çºµå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦â€œStringâ€ç±»æœ‰è®¸å¤šæ–¹æ³•ç”¨äºæ£€æŸ¥å­—ç¬¦ä¸²çš„å†…å®¹ã€æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²ã€æ›´æ”¹å¤§å°å†™å’Œå…¶ä»–ä»»åŠ¡ã€‚ æŒ‰ç´¢å¼•è·å–å­—ç¬¦å’Œå­å­—ç¬¦ä¸²é€šè¿‡è°ƒç”¨â€œcharAtï¼ˆï¼‰â€è®¿é—®å™¨æ–¹æ³•ï¼Œå¯ä»¥è·å–å­—ç¬¦ä¸²ä¸­ç‰¹å®šç´¢å¼•å¤„çš„å­—ç¬¦ã€‚ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•ä¸º0ï¼Œè€Œæœ€åä¸€ä¸ªå­—ç¬¦çš„æŒ‡æ•°ä¸ºâ€œlengthï¼ˆï¼‰-1â€ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç è·å–å­—ç¬¦ä¸²ä¸­ç´¢å¼•9å¤„çš„å­—ç¬¦ï¼š 12String anotherPalindrome = &quot;Niagara. O roar again!&quot;; char aChar = anotherPalindrome.charAt(9); ç´¢å¼•ä»0å¼€å§‹ï¼Œå› æ­¤ç´¢å¼•9å¤„çš„å­—ç¬¦ä¸ºâ€œOâ€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚æœè¦ä»å­—ç¬¦ä¸²ä¸­è·å–å¤šä¸ªè¿ç»­å­—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨â€œsubstringâ€æ–¹æ³•ã€‚â€œsubstringâ€æ–¹æ³•æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š Method Description String substring(int beginIndex, int endIndex) è¿”å›ä½œä¸ºæ­¤å­—ç¬¦ä¸²çš„å­å­—ç¬¦ä¸²çš„æ–°å­—ç¬¦ä¸²ã€‚å­å­—ç¬¦ä¸²ä»æŒ‡å®šçš„â€œbeginIndexâ€å¼€å§‹ï¼Œå¹¶æ‰©å±•åˆ°ç´¢å¼•â€œendIndex-1â€å¤„çš„å­—ç¬¦ã€‚ String substring(int beginIndex) è¿”å›ä½œä¸ºæ­¤å­—ç¬¦ä¸²çš„å­å­—ç¬¦ä¸²çš„æ–°å­—ç¬¦ä¸²ã€‚æ•´æ•°å‚æ•°æŒ‡å®šç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•ã€‚è¿™é‡Œï¼Œè¿”å›çš„å­å­—ç¬¦ä¸²æ‰©å±•åˆ°åŸå§‹å­—ç¬¦ä¸²çš„æœ«å°¾ã€‚ ä»¥ä¸‹ä»£ç ä»å°¼äºšåŠ æ‹‰å›æ–‡ä¸­è·å–ä»ç´¢å¼•11å»¶ä¼¸åˆ°ä½†ä¸åŒ…æ‹¬ç´¢å¼•15çš„å­å­—ç¬¦ä¸²ï¼Œå³å•è¯â€œå’†å“®â€ï¼š 12String anotherPalindrome = &quot;Niagara. O roar again!&quot;; String roar = anotherPalindrome.substring(11, 15); æ“çºµå­—ç¬¦ä¸²çš„å…¶ä»–æ–¹æ³•ä»¥ä¸‹æ˜¯ç”¨äºæ“ä½œå­—ç¬¦ä¸²çš„å…¶ä»–å‡ ç§â€œå­—ç¬¦ä¸²â€æ–¹æ³•ï¼š Method Description String[] split(String regex) String[] split(String regex, int limit) æœç´¢å­—ç¬¦ä¸²å‚æ•°ï¼ˆåŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼‰æŒ‡å®šçš„åŒ¹é…é¡¹ï¼Œå¹¶ç›¸åº”åœ°å°†æ­¤å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºå­—ç¬¦ä¸²æ•°ç»„ã€‚å¯é€‰æ•´æ•°å‚æ•°æŒ‡å®šè¿”å›æ•°ç»„çš„æœ€å¤§å¤§å°ã€‚æ­£åˆ™è¡¨è¾¾å¼åŒ…å«åœ¨é¢˜ä¸ºâ€œæ­£åˆ™è¡¨è¾¾å¼â€çš„è¯¾ç¨‹ä¸­ CharSequence subSequence(int beginIndex, int endIndex) è¿”å›ä»â€œbeginIndexâ€ç´¢å¼•åˆ°â€œendIndexâ€-1æ„é€ çš„æ–°å­—ç¬¦åºåˆ—ã€‚ String trim() è¿”å›æ­¤å­—ç¬¦ä¸²çš„å‰¯æœ¬ï¼Œå…¶ä¸­åˆ é™¤äº†å‰å¯¼ç©ºæ ¼å’Œå°¾éšç©ºæ ¼ã€‚ String toLowerCase()String toUpperCase() è¿”å›è½¬æ¢ä¸ºå°å†™æˆ–å¤§å†™çš„å­—ç¬¦ä¸²å‰¯æœ¬ã€‚å¦‚æœä¸éœ€è¦è½¬æ¢ï¼Œè¿™äº›æ–¹æ³•å°†è¿”å›åŸå§‹å­—ç¬¦ä¸²ã€‚ æœç´¢å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦å’Œå­å­—ç¬¦ä¸²ä¸‹é¢æ˜¯ä¸€äº›ç”¨äºæŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²çš„å…¶ä»–â€œå­—ç¬¦ä¸²â€æ–¹æ³•ã€‚â€œStringâ€ç±»æä¾›äº†è¿”å›ç‰¹å®šå­—ç¬¦æˆ–å­å­—ç¬¦ä¸²åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®çš„è®¿é—®å™¨æ–¹æ³•ï¼šâ€œindexOfï¼ˆï¼‰â€å’Œâ€œlastIndexOfï¼ˆï¼ˆï¼‰â€ã€‚â€œindexOfï¼ˆï¼‰â€æ–¹æ³•ä»å­—ç¬¦ä¸²çš„å¼€å¤´å‘å‰æœç´¢ï¼Œè€Œâ€œlastIndexOfï¼ˆâ€æ–¹æ³•åˆ™ä»å­—ç¬¦ä¸²çš„ç»“å°¾å‘åæœç´¢ã€‚å¦‚æœæœªæ‰¾åˆ°å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²ï¼Œâ€œindexOfï¼ˆï¼‰â€å’Œâ€œlastIndexOfï¼ˆï¼ˆï¼‰â€å°†è¿”å›-1ã€‚ â€œStringâ€ç±»è¿˜æä¾›äº†ä¸€ä¸ªæœç´¢æ–¹æ³•â€œcontainsâ€ï¼Œå¦‚æœå­—ç¬¦ä¸²åŒ…å«ç‰¹å®šçš„å­—ç¬¦åºåˆ—ï¼Œåˆ™è¿”å›trueã€‚å½“æ‚¨åªéœ€è¦çŸ¥é“å­—ç¬¦ä¸²åŒ…å«ä¸€ä¸ªå­—ç¬¦åºåˆ—ï¼Œä½†å‡†ç¡®çš„ä½ç½®å¹¶ä¸é‡è¦æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•ã€‚ ä¸‹è¡¨ä»‹ç»äº†å„ç§å­—ç¬¦ä¸²æœç´¢æ–¹æ³•ã€‚ Method Description int indexOf(int ch)int lastIndexOf(int ch) è¿”å›æŒ‡å®šå­—ç¬¦ç¬¬ä¸€æ¬¡ï¼ˆæœ€åä¸€æ¬¡ï¼‰å‡ºç°çš„ç´¢å¼•ã€‚ int indexOf(int ch, int fromIndex)int lastIndexOf(int ch, int fromIndex) è¿”å›æŒ‡å®šå­—ç¬¦ç¬¬ä¸€æ¬¡ï¼ˆæœ€åä¸€æ¬¡ï¼‰å‡ºç°çš„ç´¢å¼•ï¼Œä»æŒ‡å®šç´¢å¼•å‘å‰ï¼ˆå‘åï¼‰æœç´¢ã€‚ int indexOf(String str)int lastIndexOf(String str) è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡ï¼ˆæœ€åä¸€æ¬¡ï¼‰å‡ºç°çš„ç´¢å¼•ã€‚ int indexOf(String str, int fromIndex)int lastIndexOf(String str, int fromIndex) è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡ï¼ˆæœ€åä¸€æ¬¡ï¼‰å‡ºç°çš„ç´¢å¼•ï¼Œä»æŒ‡å®šç´¢å¼•å‘å‰ï¼ˆå‘åï¼‰æœç´¢ã€‚ boolean contains(CharSequence s) å¦‚æœå­—ç¬¦ä¸²åŒ…å«æŒ‡å®šçš„å­—ç¬¦åºåˆ—ï¼Œåˆ™è¿”å›trueã€‚ Note:CharSequenceæ˜¯ç”±â€œStringâ€ç±»å®ç°çš„æ¥å£ã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºâ€œcontainsï¼ˆï¼‰â€æ–¹æ³•çš„å‚æ•°ã€‚ å°†å­—ç¬¦å’Œå­å­—ç¬¦ä¸²æ›¿æ¢ä¸ºå­—ç¬¦ä¸²â€œStringâ€ç±»å¾ˆå°‘æœ‰å°†å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²æ’å…¥å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå®ƒä»¬æ˜¯ä¸éœ€è¦çš„ï¼šæ‚¨å¯ä»¥é€šè¿‡å°†ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤çš„å­å­—ç¬¦ä¸²ä¸è¦æ’å…¥çš„å­å­—ç¬¦ä¸²ä¸²è”èµ·æ¥æ¥åˆ›å»ºæ–°å­—ç¬¦ä¸²ã€‚ ä¸è¿‡ï¼Œâ€œStringâ€ç±»æœ‰å››ä¸ªæ–¹æ³•æ¥æ›¿æ¢æ‰¾åˆ°çš„å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²ã€‚ä»–ä»¬æ˜¯ï¼š Method Description String replace(char oldChar, char newChar) è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²æ˜¯ç”¨newCharæ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­æ‰€æœ‰oldCharçš„ç»“æœã€‚ String replace(CharSequence target, CharSequence replacement) ç”¨æŒ‡å®šçš„æ–‡å­—æ›¿æ¢åºåˆ—æ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­ä¸æ–‡å­—ç›®æ ‡åºåˆ—åŒ¹é…çš„æ¯ä¸ªå­å­—ç¬¦ä¸²ã€‚ String replaceAll(String regex, String replacement) ç”¨ç»™å®šçš„æ›¿æ¢æ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­ä¸ç»™å®šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ¯ä¸ªå­å­—ç¬¦ä¸²ã€‚ String replaceFirst(String regex, String replacement) ç”¨ç»™å®šçš„æ›¿æ¢æ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­ä¸ç»™å®šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„ç¬¬ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚ ä¸€ä¸ªä¾‹å­ä»¥ä¸‹ç±»[&#96;Filename](https://docs.oracle.com/javase/tutorial/java/data/examples/Filename.java)ï¼Œè¯´æ˜äº†ä½¿ç”¨â€œlastIndexOfï¼ˆï¼‰â€å’Œâ€œsubstringï¼ˆï¼‰â€æ¥éš”ç¦»æ–‡ä»¶åçš„ä¸åŒéƒ¨åˆ†ã€‚ Note: ä¸‹é¢çš„â€œFilenameâ€ç±»ä¸­çš„æ–¹æ³•ä¸è¿›è¡Œä»»ä½•é”™è¯¯æ£€æŸ¥ï¼Œå¹¶å‡å®šå®ƒä»¬çš„å‚æ•°åŒ…å«å®Œæ•´çš„ç›®å½•è·¯å¾„å’Œå¸¦æœ‰æ‰©å±•åçš„æ–‡ä»¶åã€‚å¦‚æœè¿™äº›æ–¹æ³•æ˜¯ç”Ÿäº§ä»£ç ï¼Œå®ƒä»¬å°†éªŒè¯å…¶å‚æ•°æ˜¯å¦æ­£ç¡®æ„é€ ã€‚ 12345678910111213141516171819202122232425262728public class Filename &#123; private String fullPath; private char pathSeparator, extensionSeparator; public Filename(String str, char sep, char ext) &#123; fullPath = str; pathSeparator = sep; extensionSeparator = ext; &#125; public String extension() &#123; int dot = fullPath.lastIndexOf(extensionSeparator); return fullPath.substring(dot + 1); &#125; // gets filename without extension public String filename() &#123; int dot = fullPath.lastIndexOf(extensionSeparator); int sep = fullPath.lastIndexOf(pathSeparator); return fullPath.substring(sep + 1, dot); &#125; public String path() &#123; int sep = fullPath.lastIndexOf(pathSeparator); return fullPath.substring(0, sep); &#125;&#125; è¿™æ˜¯ä¸€ä¸ªç¨‹åºFilenameDemoï¼Œæ„é€ ä¸€ä¸ªâ€œFilenameâ€å¯¹è±¡å¹¶è°ƒç”¨å…¶æ‰€æœ‰æ–¹æ³•ï¼š 123456789public class FilenameDemo &#123; public static void main(String[] args) &#123; final String FPATH = &quot;/home/user/index.html&quot;; Filename myHomePage = new Filename(FPATH, &#x27;/&#x27;, &#x27;.&#x27;); System.out.println(&quot;Extension = &quot; + myHomePage.extension()); System.out.println(&quot;Filename = &quot; + myHomePage.filename()); System.out.println(&quot;Path = &quot; + myHomePage.path()); &#125;&#125; And hereâ€™s the output from the program: 123Extension = htmlFilename = indexPath = /home/user å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„â€œextensionâ€æ–¹æ³•ä½¿ç”¨â€œlastIndexOfâ€æ¥æŸ¥æ‰¾æ–‡ä»¶åä¸­å¥ç‚¹ï¼ˆ.ï¼‰çš„æœ€åä¸€æ¬¡å‡ºç°ã€‚ç„¶åï¼Œâ€œsubstringâ€ä½¿ç”¨â€œlastIndexOfâ€çš„è¿”å›å€¼æå–æ–‡ä»¶æ‰©å±•åï¼Œå³ä»å¥ç‚¹åˆ°å­—ç¬¦ä¸²ç»“å°¾çš„å­å­—ç¬¦ä¸²ã€‚æ­¤ä»£ç å‡å®šæ–‡ä»¶åä¸­æœ‰å¥ç‚¹ï¼›å¦‚æœæ–‡ä»¶åæ²¡æœ‰å¥ç‚¹ï¼Œâ€œlastIndexOfâ€å°†è¿”å›-1ï¼Œè€Œsubstringæ–¹æ³•å°†æŠ›å‡ºâ€œStringIndexOutOfBoundsExceptionâ€ã€‚ æ­¤å¤–ï¼Œè¯·æ³¨æ„ï¼Œâ€œextensionâ€æ–¹æ³•ä½¿ç”¨â€œdot+1â€ä½œä¸ºâ€œsubstringâ€çš„å‚æ•°ã€‚å¦‚æœå¥ç‚¹å­—ç¬¦ï¼ˆ.ï¼‰æ˜¯å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œåˆ™â€œç‚¹+1â€ç­‰äºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæ¯”å­—ç¬¦ä¸²ä¸­æœ€å¤§çš„ç´¢å¼•å¤§ä¸€ä¸ªï¼ˆå› ä¸ºç´¢å¼•ä»0å¼€å§‹ï¼‰ã€‚è¿™æ˜¯â€œsubstringâ€çš„åˆæ³•å‚æ•°ï¼Œå› ä¸ºè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªç­‰äºä½†ä¸å¤§äºå­—ç¬¦ä¸²é•¿åº¦çš„ç´¢å¼•ï¼Œå¹¶å°†å…¶è§£é‡Šä¸ºâ€œå­—ç¬¦ä¸²çš„ç»“å°¾â€ æ¯”è¾ƒå­—ç¬¦ä¸²å’Œéƒ¨åˆ†å­—ç¬¦ä¸²â€œStringâ€ç±»æœ‰è®¸å¤šç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸²å’Œå­—ç¬¦ä¸²éƒ¨åˆ†çš„æ–¹æ³•ã€‚ä¸‹è¡¨åˆ—å‡ºäº†è¿™äº›æ–¹æ³•ã€‚ Method Description boolean endsWith(String suffix)boolean startsWith(String prefix) å¦‚æœæ­¤å­—ç¬¦ä¸²ä»¥æŒ‡å®šä¸ºæ–¹æ³•å‚æ•°çš„å­å­—ç¬¦ä¸²ç»“å°¾æˆ–å¼€å¤´ï¼Œåˆ™è¿”å›â€œtrueâ€ã€‚ boolean startsWith(String prefix, int offset) è€ƒè™‘ä»¥ç´¢å¼•â€œoffsetâ€å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœä»¥æŒ‡å®šä¸ºå‚æ•°çš„å­å­—ç¬¦ä¸²å¼€å¤´ï¼Œåˆ™è¿”å›â€œtrueâ€ã€‚ int compareTo(String anotherString) ä»¥å­—å…¸æ–¹å¼æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚è¿”å›ä¸€ä¸ªæ•´æ•°ï¼ŒæŒ‡ç¤ºæ­¤å­—ç¬¦ä¸²æ˜¯å¦å¤§äºï¼ˆç»“æœ&gt;0ï¼‰ã€ç­‰äºï¼ˆç»“æœ&#x3D;0ï¼‰æˆ–å°äºï¼ˆç»“æœ&lt;0ï¼‰å‚æ•°ã€‚ int compareToIgnoreCase(String str) ä»¥å­—å…¸æ–¹å¼æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¿½ç•¥å¤§å°å†™çš„å·®å¼‚ã€‚è¿”å›ä¸€ä¸ªæ•´æ•°ï¼ŒæŒ‡ç¤ºæ­¤å­—ç¬¦ä¸²æ˜¯å¦å¤§äºï¼ˆç»“æœ&gt;0ï¼‰ã€ç­‰äºï¼ˆç»“æœ&#x3D;0ï¼‰æˆ–å°äºï¼ˆç»“æœ&lt;0ï¼‰å‚æ•°ã€‚ boolean equals(Object anObject) å½“ä¸”ä»…å½“å‚æ•°æ˜¯è¡¨ç¤ºä¸æ­¤å¯¹è±¡ç›¸åŒçš„å­—ç¬¦åºåˆ—çš„â€œå­—ç¬¦ä¸²â€å¯¹è±¡æ—¶ï¼Œè¿”å›â€œtrueâ€ã€‚ boolean equalsIgnoreCase(String anotherString) å½“ä¸”ä»…å½“å‚æ•°æ˜¯ä¸æ­¤å¯¹è±¡è¡¨ç¤ºç›¸åŒå­—ç¬¦åºåˆ—çš„â€œå­—ç¬¦ä¸²â€å¯¹è±¡æ—¶ï¼Œè¿”å›â€œtrueâ€ï¼Œå¿½ç•¥å¤§å°å†™å·®å¼‚ã€‚ boolean regionMatches(int toffset, String other, int ooffset, int len) æµ‹è¯•æ­¤å­—ç¬¦ä¸²çš„æŒ‡å®šåŒºåŸŸæ˜¯å¦ä¸stringå‚æ•°çš„æŒ‡å®šåŒºåŸŸåŒ¹é…ã€‚Regionçš„é•¿åº¦ä¸ºâ€œlenâ€ï¼Œå¯¹äºæ­¤å­—ç¬¦ä¸²ä»¥ç´¢å¼•â€œtoffsetâ€å¼€å§‹ï¼Œå¯¹äºå¦ä¸€ä¸ªå­—ç¬¦ä¸²åˆ™ä»¥ç´¢å¼•â€œooffsetâ€å¼€å¤´ã€‚ boolean regionMatches(boolean ignoreCase, int toffset, String other, int ooffset, int len) æµ‹è¯•æ­¤å­—ç¬¦ä¸²çš„æŒ‡å®šåŒºåŸŸæ˜¯å¦ä¸stringå‚æ•°çš„æŒ‡å®šåŒºåŸŸåŒ¹é…ã€‚Regionçš„é•¿åº¦ä¸ºâ€œlenâ€ï¼Œå¯¹äºæ­¤å­—ç¬¦ä¸²ä»¥ç´¢å¼•â€œtoffsetâ€å¼€å§‹ï¼Œå¯¹äºå¦ä¸€ä¸ªå­—ç¬¦ä¸²åˆ™ä»¥ç´¢å¼•â€œooffsetâ€å¼€å¤´ã€‚å¸ƒå°”å‚æ•°æŒ‡ç¤ºæ˜¯å¦åº”å¿½ç•¥å¤§å°å†™ï¼›å¦‚æœä¸ºtrueï¼Œåˆ™åœ¨æ¯”è¾ƒå­—ç¬¦æ—¶å¿½ç•¥å¤§å°å†™ã€‚ boolean matches(String regex) æµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä¸æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚æ­£åˆ™è¡¨è¾¾å¼åœ¨é¢˜ä¸ºâ€œæ­£åˆ™è¡¨è¾¾å¼â€çš„è¯¾ç¨‹ä¸­è®¨è®º ä»¥ä¸‹ç¨‹åºâ€œRegionMatchesDemoâ€ä½¿ç”¨â€œregionMatchesâ€æ–¹æ³•åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æœç´¢å­—ç¬¦ä¸²ï¼š 1234567891011121314151617181920public class RegionMatchesDemo &#123; public static void main(String[] args) &#123; String searchMe = &quot;Green Eggs and Ham&quot;; String findMe = &quot;Eggs&quot;; int searchMeLength = searchMe.length(); int findMeLength = findMe.length(); boolean foundIt = false; for (int i = 0; i &lt;= (searchMeLength - findMeLength); i++) &#123; if (searchMe.regionMatches(i, findMe, 0, findMeLength)) &#123; foundIt = true; System.out.println(searchMe.substring(i, i + findMeLength)); break; &#125; &#125; if (!foundIt) System.out.println(&quot;No match found.&quot;); &#125;&#125; è¿™ä¸ªç¨‹åºçš„è¾“å‡ºæ˜¯â€œé¸¡è›‹â€ã€‚ ç¨‹åºä¸€æ¬¡ä¸€ä¸ªå­—ç¬¦åœ°éå†â€œsearchMeâ€å¼•ç”¨çš„å­—ç¬¦ä¸²ã€‚å¯¹äºæ¯ä¸ªå­—ç¬¦ï¼Œç¨‹åºè°ƒç”¨regionMatchesæ–¹æ³•æ¥ç¡®å®šä»¥å½“å‰å­—ç¬¦å¼€å¤´çš„å­å­—ç¬¦ä¸²æ˜¯å¦ä¸ç¨‹åºæ­£åœ¨æŸ¥æ‰¾çš„å­—ç¬¦ä¸²åŒ¹é…ã€‚ The StringBuilder ClassStringBuilder å¯¹è±¡ç±»ä¼¼äºStringå¯¹è±¡ï¼Œä½†å®ƒä»¬å¯ä»¥ä¿®æ”¹ã€‚åœ¨å†…éƒ¨ï¼Œè¿™äº›å¯¹è±¡è¢«è§†ä¸ºåŒ…å«å­—ç¬¦åºåˆ—çš„å¯å˜é•¿åº¦æ•°ç»„ã€‚åœ¨ä»»ä½•æ—¶å€™ï¼Œåºåˆ—çš„é•¿åº¦å’Œå†…å®¹éƒ½å¯ä»¥é€šè¿‡æ–¹æ³•è°ƒç”¨æ¥æ›´æ”¹ã€‚ é™¤éå­—ç¬¦ä¸²ç”Ÿæˆå™¨åœ¨æ›´ç®€å•çš„ä»£ç ï¼ˆå‚è§æœ¬èŠ‚æœ«å°¾çš„ç¤ºä¾‹ç¨‹åºï¼‰æˆ–æ›´å¥½çš„æ€§èƒ½æ–¹é¢å…·æœ‰ä¼˜åŠ¿ï¼Œå¦åˆ™åº”å§‹ç»ˆä½¿ç”¨å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦è¿æ¥å¤§é‡å­—ç¬¦ä¸²ï¼Œåˆ™é™„åŠ åˆ°â€œStringBuilderâ€å¯¹è±¡æ›´æœ‰æ•ˆã€‚ é•¿åº¦å’Œå®¹é‡ä¸â€œStringâ€ç±»ä¸€æ ·ï¼Œâ€œStringBuilderâ€ç±»æœ‰ä¸€ä¸ªâ€œlengthï¼ˆï¼‰â€æ–¹æ³•ï¼Œç”¨äºè¿”å›ç”Ÿæˆå™¨ä¸­å­—ç¬¦åºåˆ—çš„é•¿åº¦ã€‚ ä¸å­—ç¬¦ä¸²ä¸åŒï¼Œæ¯ä¸ªå­—ç¬¦ä¸²ç”Ÿæˆå™¨è¿˜å…·æœ‰å®¹é‡ï¼Œå³å·²åˆ†é…çš„å­—ç¬¦ç©ºé—´æ•°ã€‚â€œcapacityï¼ˆï¼‰â€æ–¹æ³•è¿”å›çš„å®¹é‡å§‹ç»ˆå¤§äºæˆ–ç­‰äºé•¿åº¦ï¼ˆé€šå¸¸å¤§äºï¼‰ï¼Œå¹¶å°†æ ¹æ®éœ€è¦è‡ªåŠ¨æ‰©å±•ä»¥é€‚åº”å¯¹å­—ç¬¦ä¸²ç”Ÿæˆå™¨çš„æ·»åŠ ã€‚ Constructor Description StringBuilder() åˆ›å»ºå®¹é‡ä¸º16ï¼ˆ16ä¸ªç©ºå…ƒç´ ï¼‰çš„ç©ºå­—ç¬¦ä¸²ç”Ÿæˆå™¨ã€‚ StringBuilder(CharSequence cs) æ„é€ ä¸€ä¸ªå­—ç¬¦ä¸²ç”Ÿæˆå™¨ï¼Œå…¶ä¸­åŒ…å«ä¸æŒ‡å®šçš„CharSequenceç›¸åŒçš„å­—ç¬¦ï¼Œå†åŠ ä¸ŠCharSequenceåé¢çš„16ä¸ªç©ºå…ƒç´ ã€‚ StringBuilder(int initCapacity) åˆ›å»ºå…·æœ‰æŒ‡å®šåˆå§‹å®¹é‡çš„ç©ºå­—ç¬¦ä¸²ç”Ÿæˆå™¨ã€‚ StringBuilder(String s) åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ç”Ÿæˆå™¨ï¼Œå…¶å€¼ç”±æŒ‡å®šçš„å­—ç¬¦ä¸²åˆå§‹åŒ–ï¼ŒåŠ ä¸Šå­—ç¬¦ä¸²åé¢çš„é¢å¤–16ä¸ªç©ºå…ƒç´ ã€‚ For example, the following code 1234// creates empty builder, capacity 16StringBuilder sb = new StringBuilder();// adds 9 character string at beginningsb.append(&quot;Greetings&quot;); å°†äº§ç”Ÿé•¿åº¦ä¸º9ã€å®¹é‡ä¸º16: â€œStringBuilderâ€ç±»æœ‰ä¸€äº›ä¸â€œStringâ€ç±»æ²¡æœ‰çš„é•¿åº¦å’Œå®¹é‡ç›¸å…³çš„æ–¹æ³•ï¼š Method Description void setLength(int newLength) è®¾ç½®å­—ç¬¦åºåˆ—çš„é•¿åº¦ã€‚å¦‚æœâ€œnewLengthâ€å°äºâ€œlengthï¼ˆï¼‰â€ï¼Œåˆ™å°†æˆªæ–­å­—ç¬¦åºåˆ—ä¸­çš„æœ€åä¸€ä¸ªå­—ç¬¦ã€‚å¦‚æœâ€œnewLengthâ€å¤§äºâ€œlengthï¼ˆï¼‰â€ï¼Œåˆ™åœ¨å­—ç¬¦åºåˆ—æœ«å°¾æ·»åŠ ç©ºå­—ç¬¦ã€‚ void ensureCapacity(int minCapacity) ç¡®ä¿å®¹é‡è‡³å°‘ç­‰äºæŒ‡å®šçš„æœ€å°å€¼ã€‚ è®¸å¤šæ“ä½œï¼ˆä¾‹å¦‚ï¼Œâ€œappendï¼ˆï¼‰â€ã€â€œinsertï¼ˆï¼‰â€æˆ–â€œsetLengthï¼ˆï¼‰â€ï¼‰å¯ä»¥å¢åŠ å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­å­—ç¬¦åºåˆ—çš„é•¿åº¦ï¼Œä»è€Œä½¿ç”Ÿæˆçš„â€œlengthï¼ˆï¼‰â€å¤§äºå½“å‰çš„â€œcapacityï¼ˆï¼‰ï¼‰â€ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶ï¼Œå®¹é‡ä¼šè‡ªåŠ¨å¢åŠ ã€‚ StringBuilderæ“ä½œâ€œStringBuilderâ€ä¸Šçš„ä¸»è¦æ“ä½œåœ¨â€œStringâ€ä¸­ä¸å¯ç”¨ï¼Œå®ƒä»¬æ˜¯â€œappendï¼ˆï¼‰â€å’Œâ€œinsertï¼ˆï¼‰â€æ–¹æ³•ï¼Œå®ƒä»¬è¢«é‡è½½ä»¥æ¥å—ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚æ¯ä¸ªéƒ½å°†å…¶å‚æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åå°†è¯¥å­—ç¬¦ä¸²çš„å­—ç¬¦é™„åŠ æˆ–æ’å…¥åˆ°å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­çš„å­—ç¬¦åºåˆ—ä¸­ã€‚appendæ–¹æ³•æ€»æ˜¯åœ¨ç°æœ‰å­—ç¬¦åºåˆ—çš„æœ«å°¾æ·»åŠ è¿™äº›å­—ç¬¦ï¼Œè€Œinsertæ–¹æ³•åœ¨æŒ‡å®šçš„ç‚¹æ·»åŠ å­—ç¬¦ã€‚ ä¸‹é¢æ˜¯â€œStringBuilderâ€ç±»çš„ä¸€äº›æ–¹æ³•ã€‚ Method Description StringBuilder append(boolean b)StringBuilder append(char c)StringBuilder append(char[] str)StringBuilder append(char[] str, int offset, int len)StringBuilder append(double d)StringBuilder append(float f)StringBuilder append(int i)StringBuilder append(long lng)StringBuilder append(Object obj)StringBuilder append(String s) å°†å‚æ•°è¿½åŠ åˆ°æ­¤å­—ç¬¦ä¸²ç”Ÿæˆå™¨ã€‚åœ¨æ‰§è¡Œè¿½åŠ æ“ä½œä¹‹å‰ï¼Œæ•°æ®è¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ StringBuilder delete(int start, int end)StringBuilder deleteCharAt(int index) ç¬¬ä¸€ä¸ªæ–¹æ³•åˆ é™¤â€œStringBuilderâ€çš„å­—ç¬¦åºåˆ—ä¸­ä»å¤´è‡³å°¾1ï¼ˆå«ï¼‰çš„å­åºåˆ—ã€‚ç¬¬äºŒç§æ–¹æ³•åˆ é™¤ä½äºâ€œindexâ€çš„å­—ç¬¦ã€‚ StringBuilder insert(int offset, boolean b)StringBuilder insert(int offset, char c)StringBuilder insert(int offset, char[] str)StringBuilder insert(int index, char[] str, int offset, int len)StringBuilder insert(int offset, double d)StringBuilder insert(int offset, float f)StringBuilder insert(int offset, int i)StringBuilder insert(int offset, long lng)StringBuilder insert(int offset, Object obj)StringBuilder insert(int offset, String s) å°†ç¬¬äºŒä¸ªå‚æ•°æ’å…¥å­—ç¬¦ä¸²ç”Ÿæˆå™¨ã€‚ç¬¬ä¸€ä¸ªæ•´æ•°å‚æ•°æŒ‡ç¤ºè¦åœ¨å…¶ä¹‹å‰æ’å…¥æ•°æ®çš„ç´¢å¼•ã€‚åœ¨æ‰§è¡Œæ’å…¥æ“ä½œä¹‹å‰ï¼Œæ•°æ®è¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ StringBuilder replace(int start, int end, String s)void setCharAt(int index, char c) æ›¿æ¢æ­¤å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­çš„æŒ‡å®šå­—ç¬¦ã€‚ StringBuilder reverse() åè½¬æ­¤å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­çš„å­—ç¬¦åºåˆ—ã€‚ String toString() è¿”å›åŒ…å«ç”Ÿæˆå™¨ä¸­çš„å­—ç¬¦åºåˆ—çš„å­—ç¬¦ä¸²ã€‚ Note: é€šè¿‡é¦–å…ˆä½¿ç”¨â€œStringBuilderâ€ç±»çš„â€œtoStringï¼ˆï¼‰â€æ–¹æ³•å°†å­—ç¬¦ä¸²ç”Ÿæˆå™¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¯ä»¥åœ¨â€œStringBuilderâ€å¯¹è±¡ä¸Šä½¿ç”¨ä»»ä½•â€œStringâ€æ–¹æ³•ã€‚ç„¶åä½¿ç”¨â€œStringBuilderï¼ˆStringstrï¼‰â€æ„é€ å‡½æ•°å°†å­—ç¬¦ä¸²è½¬æ¢å›å­—ç¬¦ä¸²ç”Ÿæˆå™¨ã€‚ ä¸€ä¸ªä¾‹å­æ ‡é¢˜ä¸ºâ€œå­—ç¬¦ä¸²â€çš„éƒ¨åˆ†ä¸­åˆ—å‡ºçš„â€œStringDemoâ€ç¨‹åºæ˜¯ä¸€ä¸ªç¨‹åºçš„ç¤ºä¾‹ï¼Œå¦‚æœä½¿ç”¨â€œStringBuilderâ€è€Œä¸æ˜¯â€œStringâ€ï¼Œè¯¥ç¨‹åºçš„æ•ˆç‡ä¼šæ›´é«˜ã€‚ StringDemoåè½¬äº†å›æ–‡ã€‚å†æ¬¡åˆ—å‡ºï¼š 12345678910111213141516171819202122232425public class StringDemo &#123; public static void main(String[] args) &#123; String palindrome = &quot;Dot saw I was Tod&quot;; int len = palindrome.length(); char[] tempCharArray = new char[len]; char[] charArray = new char[len]; // put original string in an // array of chars for (int i = 0; i &lt; len; i++) &#123; tempCharArray[i] = palindrome.charAt(i); &#125; // reverse array of chars for (int j = 0; j &lt; len; j++) &#123; charArray[j] = tempCharArray[len - 1 - j]; &#125; String reversePalindrome = new String(charArray); System.out.println(reversePalindrome); &#125;&#125; Running the program produces this output: 1doT saw I was toD ä¸ºäº†å®ç°å­—ç¬¦ä¸²åè½¬ï¼Œç¨‹åºå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„ï¼ˆç¬¬ä¸€ä¸ªâ€œforâ€å¾ªç¯ï¼‰ï¼Œå°†æ•°ç»„åè½¬ä¸ºç¬¬äºŒä¸ªæ•°ç»„ï¼ˆç¬¬äºŒä¸ªâ€œforâ€œå¾ªç¯ï¼‰ï¼Œç„¶åè½¬æ¢å›å­—ç¬¦ä¸²ã€‚ å¦‚æœå°†â€œå›æ–‡â€å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç”Ÿæˆå™¨ï¼Œåˆ™å¯ä»¥åœ¨â€œStringBuilderâ€ç±»ä¸­ä½¿ç”¨â€œreverseï¼ˆï¼‰â€æ–¹æ³•ã€‚å®ƒä½¿ä»£ç æ›´ç®€å•ï¼Œæ›´å®¹æ˜“é˜…è¯»ï¼š 1234567891011public class StringBuilderDemo &#123; public static void main(String[] args) &#123; String palindrome = &quot;Dot saw I was Tod&quot;; StringBuilder sb = new StringBuilder(palindrome); sb.reverse(); // reverse it System.out.println(sb); &#125;&#125; Running this program produces the same output: 1doT saw I was toD Note that println() prints a string builder, as in: 1System.out.println(sb); å› ä¸ºæŸäºº.toString()â€è¢«éšå¼è°ƒç”¨ï¼Œå°±åƒåœ¨â€œprintlnï¼ˆï¼‰â€è°ƒç”¨ä¸­å¯¹ä»»ä½•å…¶ä»–å¯¹è±¡ä¸€æ ·ã€‚ Note: è¿˜æœ‰ä¸€ä¸ªâ€œStringBufferâ€ç±»ä¸â€œStringBuilderâ€ç±»*å®Œå…¨ç›¸åŒï¼Œåªæ˜¯ç”±äºæ–¹æ³•åŒæ­¥ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚çº¿ç¨‹å°†åœ¨å…³äºå¹¶å‘çš„è¯¾ç¨‹ä¸­è®¨è®ºã€‚ Characters and Strings æ€»ç»“å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯å•ä¸ªå­—ç¬¦å€¼ï¼Œåˆ™å°†ä½¿ç”¨åŸºæœ¬çš„â€œcharâ€ç±»å‹ã€‚ç„¶è€Œï¼Œæœ‰æ—¶éœ€è¦å°†å­—ç¬¦ç”¨ä½œå¯¹è±¡ï¼Œä¾‹å¦‚ï¼Œç”¨ä½œéœ€è¦å¯¹è±¡çš„æ–¹æ³•å‚æ•°ã€‚Javaç¼–ç¨‹è¯­è¨€æä¾›äº†ä¸€ä¸ªwrapperç±»ï¼Œç”¨äºå°†â€œcharâ€â€œåŒ…è£…â€åœ¨â€œCharacterâ€å¯¹è±¡ä¸­ã€‚â€œCharacterâ€ç±»å‹çš„å¯¹è±¡åŒ…å«ä¸€ä¸ªç±»å‹ä¸ºâ€œcharâ€çš„å­—æ®µã€‚æ­¤å­—ç¬¦ç±»è¿˜æä¾›äº†è®¸å¤šæœ‰ç”¨çš„ç±»ï¼ˆå³é™æ€ï¼‰æ–¹æ³•æ¥å¤„ç†å­—ç¬¦ã€‚ å­—ç¬¦ä¸²æ˜¯ä¸€ç³»åˆ—å­—ç¬¦ï¼Œåœ¨Javaç¼–ç¨‹ä¸­å¹¿æ³›ä½¿ç”¨ã€‚åœ¨Javaç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯å¯¹è±¡ã€‚Stringç±»æœ‰60å¤šä¸ªæ–¹æ³•å’Œ13ä¸ªæ„é€ å‡½æ•°ã€‚ æœ€å¸¸è§çš„æƒ…å†µæ˜¯ï¼Œæ‚¨ä½¿ç”¨ä»¥ä¸‹è¯­å¥åˆ›å»ºå­—ç¬¦ä¸² 1String s = &quot;Hello world!&quot;; è€Œä¸æ˜¯ä½¿ç”¨â€œStringâ€æ„é€ å‡½æ•°ä¹‹ä¸€ã€‚ â€œStringâ€ç±»æœ‰è®¸å¤šæ–¹æ³•æ¥æŸ¥æ‰¾å’Œæ£€ç´¢å­å­—ç¬¦ä¸²ï¼›ç„¶åå¯ä»¥ä½¿ç”¨â€œ+â€ä¸²è”è¿ç®—ç¬¦å°†è¿™äº›å­—ç¬¦ä¸²è½»æ¾åœ°é‡æ–°ç»„åˆæˆæ–°å­—ç¬¦ä¸²ã€‚ â€œStringâ€ç±»è¿˜åŒ…æ‹¬è®¸å¤šå®ç”¨ç¨‹åºæ–¹æ³•ï¼Œå…¶ä¸­åŒ…æ‹¬â€œsplitï¼ˆï¼‰â€ã€â€œtoLowerCaseï¼ˆï¼‰â€ï¼Œâ€œtoUpperCaseï¼ˆï¼‰â€å’Œâ€œvalueOfï¼ˆï¼‰â€ã€‚åœ¨å°†ç”¨æˆ·è¾“å…¥å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—æ—¶ï¼Œåä¸€ç§æ–¹æ³•æ˜¯å¿…ä¸å¯å°‘çš„ã€‚â€œNumberâ€å­ç±»ä¹Ÿæœ‰å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—çš„æ–¹æ³•ï¼Œåä¹‹äº¦ç„¶ã€‚ é™¤äº†â€œStringâ€ç±»ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªStringBuilderç±»ã€‚ä½¿ç”¨â€œStringBuilderâ€å¯¹è±¡æœ‰æ—¶æ¯”ä½¿ç”¨å­—ç¬¦ä¸²æ›´æœ‰æ•ˆã€‚â€œStringBuilderâ€ç±»æä¾›äº†ä¸€äº›å¯¹å­—ç¬¦ä¸²æœ‰ç”¨çš„æ–¹æ³•ï¼Œå…¶ä¸­åŒ…æ‹¬â€œreverseï¼ˆï¼‰â€ã€‚ç„¶è€Œï¼Œä¸€èˆ¬æ¥è¯´ï¼Œâ€œStringâ€ç±»æœ‰æ›´å¹¿æ³›çš„æ–¹æ³•ã€‚ å¯ä»¥ä½¿ç”¨â€œStringBuilderâ€æ„é€ å‡½æ•°å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç”Ÿæˆå™¨ã€‚å¯ä»¥ä½¿ç”¨â€œtoStringï¼ˆï¼‰â€æ–¹æ³•å°†å­—ç¬¦ä¸²ç”Ÿæˆå™¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±Autoboxingæ˜¯Javaç¼–è¯‘å™¨åœ¨åŸè¯­ç±»å‹åŠå…¶å¯¹åº”çš„å¯¹è±¡åŒ…è£…ç±»ä¹‹é—´è¿›è¡Œçš„è‡ªåŠ¨è½¬æ¢ã€‚ä¾‹å¦‚ï¼Œå°†â€œintâ€è½¬æ¢æˆâ€œIntegerâ€ï¼Œå°†â€œdoubleâ€è½¬æ¢ä¸ºâ€œdoubleâ€ï¼Œä¾æ­¤ç±»æ¨ã€‚å¦‚æœè½¬æ¢ç›¸åï¼Œåˆ™ç§°ä¸ºâ€œunboxingâ€ã€‚ ä»¥ä¸‹æ˜¯è‡ªåŠ¨è£…ç®±çš„æœ€ç®€å•ç¤ºä¾‹ï¼š 1Character ch = &#x27;a&#x27;; æœ¬èŠ‚ä¸­çš„å…¶ä»–ç¤ºä¾‹ä½¿ç”¨æ³›å‹ã€‚å¦‚æœæ‚¨è¿˜ä¸ç†Ÿæ‚‰æ³›å‹çš„è¯­æ³•ï¼Œè¯·å‚é˜…genericsï¼ˆUpdatedï¼‰æ•™è®­ã€‚ è€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š 123List&lt;Integer&gt; li = new ArrayList&lt;&gt;();for (int i = 1; i &lt; 50; i += 2) li.add(i); å°½ç®¡å°†â€œintâ€å€¼ä½œä¸ºåŸºå…ƒç±»å‹è€Œä¸æ˜¯â€œIntegerâ€å¯¹è±¡æ·»åŠ åˆ°â€œliâ€ä¸­ï¼Œä½†ä»£ç ä»ä¼šç¼–è¯‘ã€‚å› ä¸ºâ€œliâ€æ˜¯â€œIntegerâ€å¯¹è±¡çš„åˆ—è¡¨ï¼Œè€Œä¸æ˜¯â€œintâ€å€¼çš„åˆ—è¡¨ï¼Œæ‰€ä»¥æ‚¨å¯èƒ½ä¼šæƒ³ä¸ºä»€ä¹ˆJavaç¼–è¯‘å™¨ä¸ä¼šå‘å‡ºç¼–è¯‘æ—¶é”™è¯¯ã€‚ç¼–è¯‘å™¨ä¸ä¼šç”Ÿæˆé”™è¯¯ï¼Œå› ä¸ºå®ƒä»â€œiâ€åˆ›å»ºäº†ä¸€ä¸ªâ€œIntegerâ€å¯¹è±¡ï¼Œå¹¶å°†è¯¥å¯¹è±¡æ·»åŠ åˆ°â€œliâ€ã€‚å› æ­¤ï¼Œç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶å°†å…ˆå‰çš„ä»£ç è½¬æ¢ä¸ºä»¥ä¸‹ä»£ç ï¼š 123List&lt;Integer&gt; li = new ArrayList&lt;&gt;();for (int i = 1; i &lt; 50; i += 2) li.add(Integer.valueOf(i)); å°†åŸå§‹å€¼ï¼ˆä¾‹å¦‚â€œintâ€ï¼‰è½¬æ¢ä¸ºç›¸åº”åŒ…è£…ç±»ï¼ˆâ€œIntegerâ€ï¼‰çš„å¯¹è±¡ç§°ä¸ºè‡ªåŠ¨è£…ç®±ã€‚å½“åŸºå…ƒå€¼ä¸ºï¼š ä½œä¸ºå‚æ•°ä¼ é€’ç»™éœ€è¦ç›¸åº”åŒ…è£…ç±»çš„å¯¹è±¡çš„æ–¹æ³•ã€‚ åˆ†é…ç»™ç›¸åº”åŒ…è£…ç±»çš„å˜é‡ã€‚ è€ƒè™‘ä»¥ä¸‹æ–¹æ³•ï¼š 1234567public static int sumEven(List&lt;Integer&gt; li) &#123; int sum = 0; for (Integer i: li) if (i % 2 == 0) sum += i; return sum;&#125; ç”±äºä½™æ•°ï¼ˆâ€œ%â€ï¼‰å’Œä¸€å…ƒåŠ å·ï¼ˆâ€œ+&#x3D;â€ï¼‰è¿ç®—ç¬¦ä¸é€‚ç”¨äºâ€œIntegerâ€å¯¹è±¡ï¼Œæ‚¨å¯èƒ½ä¼šæƒ³çŸ¥é“ä¸ºä»€ä¹ˆJavaç¼–è¯‘å™¨ç¼–è¯‘è¯¥æ–¹æ³•è€Œä¸å‘å‡ºä»»ä½•é”™è¯¯ã€‚ç¼–è¯‘å™¨ä¸ä¼šç”Ÿæˆé”™è¯¯ï¼Œå› ä¸ºå®ƒåœ¨è¿è¡Œæ—¶è°ƒç”¨â€œintValueâ€æ–¹æ³•å°†â€œIntegerâ€è½¬æ¢ä¸ºâ€œintâ€ï¼š 1234567public static int sumEven(List&lt;Integer&gt; li) &#123; int sum = 0; for (Integer i : li) if (i.intValue() % 2 == 0) sum += i.intValue(); return sum;&#125; å°†åŒ…è£…ç±»å‹ï¼ˆâ€œIntegerâ€ï¼‰çš„å¯¹è±¡è½¬æ¢ä¸ºå…¶å¯¹åº”çš„åŸè¯­ï¼ˆâ€œintâ€ï¼‰å€¼ç§°ä¸ºå–æ¶ˆè£…ç®±ã€‚å½“åŒ…è£…ç±»çš„å¯¹è±¡ä¸ºï¼š ä½œä¸ºå‚æ•°ä¼ é€’ç»™éœ€è¦ç›¸åº”åŸºå…ƒç±»å‹å€¼çš„æ–¹æ³•ã€‚ åˆ†é…ç»™ç›¸åº”åŸºå…ƒç±»å‹çš„å˜é‡ã€‚ å–æ¶ˆè£…ç®±ç¤ºä¾‹æ˜¾ç¤ºäº†å…¶å·¥ä½œåŸç†ï¼š 123456789101112131415161718192021222324import java.util.ArrayList;import java.util.List;public class Unboxing &#123; public static void main(String[] args) &#123; Integer i = new Integer(-8); // 1. Unboxing through method invocation int absVal = absoluteValue(i); System.out.println(&quot;absolute value of &quot; + i + &quot; = &quot; + absVal); List&lt;Double&gt; ld = new ArrayList&lt;&gt;(); ld.add(3.1416); // Î  is autoboxed through method invocation. // 2. Unboxing through assignment double pi = ld.get(0); System.out.println(&quot;pi = &quot; + pi); &#125; public static int absoluteValue(int i) &#123; return (i &lt; 0) ? -i : i; &#125;&#125; ç¨‹åºæ‰“å°ä»¥ä¸‹å†…å®¹ï¼š 12absolute value of -8 = 8pi = 3.1416 è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±å¯ä»¥è®©å¼€å‘äººå‘˜ç¼–å†™æ›´å¹²å‡€çš„ä»£ç ï¼Œä½¿å…¶æ›´æ˜“äºé˜…è¯»ã€‚ä¸‹è¡¨åˆ—å‡ºäº†Javaç¼–è¯‘å™¨ç”¨äºè‡ªåŠ¨è£…ç®±å’Œå–æ¶ˆè£…ç®±çš„åŸè¯­ç±»å‹åŠå…¶å¯¹åº”çš„åŒ…è£…ç±»ï¼š å…ƒ type åŒ…è£… class boolean Boolean byte Byte char Character float Float int Integer long Long short Short double Double","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"}]},{"title":"JS postæ–¹å¼æ‰“å¼€æ–°çª—å£","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/js/JS-postæ–¹å¼æ‰“å¼€æ–°çª—å£","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/07/JS-postæ–¹å¼æ‰“å¼€æ–°çª—å£/","link":"","permalink":"https://guoshunfa.com/2022/07/JS-post%E6%96%B9%E5%BC%8F%E6%89%93%E5%BC%80%E6%96%B0%E7%AA%97%E5%8F%A3/","excerpt":"","text":"åŸç†ï¼š å‰ç«¯åœ¨æ‰“å¼€æµè§ˆå™¨çª—å£çš„åŒæ—¶ï¼Œæ”¾å…¥ä¸€æ®µhtmlä»£ç ã€‚ htmlä»£ç åŒ…å«è¡¨å•ï¼Œä¹Ÿå°±ç›¸å½“äºæ¨¡æ‹Ÿè¡¨å•postæ–¹å¼æäº¤ã€‚ åç«¯æ¥å£ä¹Ÿé€šè¿‡è¡¨å•çš„æ–¹å¼æ¥å—å‚æ•°ã€‚ 1. html12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;input id=&quot;btn_amp&quot; type=&quot;button&quot; value=&quot;ç‚¹ç‚¹ç‚¹&quot; /&gt;&lt;script src=&quot;https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt; $(function () &#123; $(&quot;#btn_amp&quot;).click(function () &#123; var url = &quot;http://localhost:8080/test3&quot;; var keys = [&quot;userName&quot;]; var values = [&quot;123&quot;]; openWindowWithPost(url, &quot;é¢„è§ˆ&quot;, 500, 400, null, keys, values); &#125;); &#125;); /** * è°ƒç”¨ */ function openWindowWithPost(url, name, width, height, resizable, keys, values) &#123; var screenWidth = screen.availWidth, screenHeight = screen.availHeight; var para = &quot;&quot;; para += &#x27;width=&#x27; + (width ? width : screenWidth - 20); para += &#x27;,height=&#x27; + (height ? height : screenHeight - 43); para += &#x27;,left=&#x27; + (width ? (screenWidth - width) / 2 : 0); para += &#x27;,top=&#x27; + (height ? (screenHeight - height) / 2 : 0); if (resizable) para += &#x27;,resizable = yes&#x27;; if (!name) name = &quot;&quot;; var newWindow = window.open(&quot;&quot;, name, para); if (!newWindow) &#123; return false; &#125; var html = &quot;&quot;; html += &quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;form id=&#x27;formid&#x27; method=&#x27;post&#x27; action=&#x27;&quot; + url + &quot;&#x27;&gt;&quot;; if (keys &amp;&amp; values &amp;&amp; (keys.length == values.length)) &#123; for (var i = 0; i &lt; keys.length; i++) &#123; html += &quot;&lt;input type=&#x27;hidden&#x27; name=&#x27;&quot; + keys[i] + &quot;&#x27; value=&#x27;&quot; + values[i] + &quot;&#x27;/&gt;&quot;; &#125; &#125; html += &quot;&lt;/form&gt;&lt;script type=&#x27;text/javascript&#x27;&gt;document.getElementById(\\&quot;formid\\&quot;).submit()&lt;\\/script&gt;&lt;\\/body&gt;&lt;\\/html&gt;&quot;; newWindow.document.write(html); return newWindow; &#125;&lt;/script&gt; 2. æ¥å£1234@PostMapping(&quot;/test3&quot;)public String test3Conllection(@RequestParam(&quot;userName&quot;) String userName) &#123; return &quot;æµ‹è¯•æˆåŠŸï¼userName=&quot;+userName;&#125;","categories":[{"name":"HTML/CSS/JavaScript","slug":"HTML-CSS-JavaScript","permalink":"https://guoshunfa.com/categories/HTML-CSS-JavaScript/"}],"tags":[{"name":"JS","slug":"JS","permalink":"https://guoshunfa.com/tags/JS/"}]},{"title":"Oracle Javaç±»å’Œå¯¹è±¡","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Oracle-Javaç±»å’Œå¯¹è±¡","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/07/Oracle-Javaç±»å’Œå¯¹è±¡/","link":"","permalink":"https://guoshunfa.com/2022/07/Oracle-Java%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/","excerpt":"","text":"æœ¬æ–‡ç« ä»¥jdk8ä¸ºåŸºç¡€è¿›è¡Œç¼–å†™ï¼Œå¦‚æœæƒ³æŸ¥çœ‹åç»­çš„ç‰ˆæœ¬å¯ä»¥å‰å¾€jdkç‰ˆæœ¬ç›®å½•ä¸‹æŸ¥çœ‹ã€‚ ç¿»è¯‘è‡ªï¼šhttps://docs.oracle.com/javase/tutorial/java/javaOO/index.html ç±»(Classes)åœ¨é¢˜ä¸ºâ€œé¢å‘å¯¹è±¡ç¼–ç¨‹æ¦‚å¿µâ€çš„è¯¾ç¨‹ä¸­ï¼Œé¢å‘å¯¹è±¡æ¦‚å¿µçš„ä»‹ç»ä»¥è‡ªè¡Œè½¦ç±»ä¸ºä¾‹ï¼Œèµ›è½¦ã€å±±åœ°è‡ªè¡Œè½¦å’Œä¸²è”è‡ªè¡Œè½¦ä¸ºå­ç±»ã€‚ä¸‹é¢æ˜¯Bicycleç±»çš„å¯èƒ½å®ç°çš„ç¤ºä¾‹ä»£ç ï¼Œä¸ºæ‚¨æä¾›ç±»å£°æ˜çš„æ¦‚è¿°ã€‚æœ¬è¯¾ç¨‹çš„åç»­éƒ¨åˆ†å°†é€æ­¥æ”¯æŒå’Œè§£é‡Šç±»å£°æ˜ã€‚ç›®å‰ï¼Œä¸è¦å…³å¿ƒç»†èŠ‚ã€‚ 1234567891011121314151617181920212223242526272829303132333435public class Bicycle &#123; // the Bicycle class has // three fields public int cadence; public int gear; public int speed; // the Bicycle class has // one constructor public Bicycle(int startCadence, int startSpeed, int startGear) &#123; gear = startGear; cadence = startCadence; speed = startSpeed; &#125; // the Bicycle class has // four methods public void setCadence(int newValue) &#123; cadence = newValue; &#125; public void setGear(int newValue) &#123; gear = newValue; &#125; public void applyBrake(int decrement) &#123; speed -= decrement; &#125; public void speedUp(int increment) &#123; speed += increment; &#125; &#125; ä½œä¸ºBicycleå­ç±»çš„MountainBikeç±»çš„ç±»å£°æ˜å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415161718192021public class MountainBike extends Bicycle &#123; // the MountainBike subclass has // one field public int seatHeight; // the MountainBike subclass has // one constructor public MountainBike(int startHeight, int startCadence, int startSpeed, int startGear) &#123; super(startCadence, startSpeed, startGear); seatHeight = startHeight; &#125; // the MountainBike subclass has // one method public void setHeight(int newValue) &#123; seatHeight = newValue; &#125; &#125; MountainBikeç»§æ‰¿äº†Bicycleçš„æ‰€æœ‰å­—æ®µå’Œæ–¹æ³•ï¼Œå¹¶æ·»åŠ äº†å­—æ®µseatHeightå’Œè®¾ç½®æ–¹æ³•ï¼ˆå±±åœ°è‡ªè¡Œè½¦å…·æœ‰å¯æ ¹æ®åœ°å½¢éœ€è¦ä¸Šä¸‹ç§»åŠ¨çš„åº§æ¤…ï¼‰ã€‚ å£°æ˜ç±»æ‚¨å·²ç»çœ‹åˆ°äº†ä»¥ä»¥ä¸‹æ–¹å¼å®šä¹‰çš„ç±»ï¼š 1234class MyClass &#123; // field, constructor, and // method declarations&#125; è¿™æ˜¯ä¸€ä¸ªç±»å£°æ˜ã€‚ç±»ä¸»ä½“ï¼ˆå¤§æ‹¬å·ä¹‹é—´çš„åŒºåŸŸï¼‰åŒ…å«äº†ä¸ºä»ç±»åˆ›å»ºçš„å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæä¾›çš„æ‰€æœ‰ä»£ç ï¼šç”¨äºåˆå§‹åŒ–æ–°å¯¹è±¡çš„æ„é€ å‡½æ•°ã€ç”¨äºæä¾›ç±»åŠå…¶å¯¹è±¡çŠ¶æ€çš„å­—æ®µå£°æ˜ï¼Œä»¥åŠç”¨äºå®ç°ç±»åŠå…¶å¯¹è±¡è¡Œä¸ºçš„æ–¹æ³•ã€‚ å‰é¢çš„ç±»å£°æ˜æ˜¯æœ€å°çš„ã€‚å®ƒåªåŒ…å«ç±»å£°æ˜ä¸­éœ€è¦çš„é‚£äº›ç»„ä»¶ã€‚æ‚¨å¯ä»¥åœ¨ç±»å£°æ˜çš„å¼€å¤´æä¾›æœ‰å…³ç±»çš„æ›´å¤šä¿¡æ¯ï¼Œä¾‹å¦‚å…¶è¶…ç±»çš„åç§°ã€æ˜¯å¦å®ç°ä»»ä½•æ¥å£ç­‰ã€‚ä¾‹å¦‚ 1234class MyClass extends MySuperClass implements YourInterface &#123; // field, constructor, and // method declarations&#125; æ„å‘³ç€MyClassæ˜¯MySuperClassçš„å­ç±»ï¼Œå®ƒå®ç°äº†YourInterfaceæ¥å£ã€‚ æ‚¨è¿˜å¯ä»¥åœ¨ä¸€å¼€å§‹å°±æ·»åŠ publicæˆ–privateç­‰ä¿®é¥°ç¬¦ï¼Œè¿™æ ·æ‚¨å¯ä»¥çœ‹åˆ°ç±»å£°æ˜çš„å¼€å¤´è¡Œä¼šå˜å¾—éå¸¸å¤æ‚ã€‚å…¬å…±å’Œç§æœ‰ä¿®é¥°ç¬¦å†³å®šäº†å“ªäº›å…¶ä»–ç±»å¯ä»¥è®¿é—®MyClassï¼Œå°†åœ¨æœ¬è¯¾ç¨åè®¨è®ºã€‚å…³äºæ¥å£å’Œç»§æ‰¿çš„è¯¾ç¨‹å°†è§£é‡Šå¦‚ä½•ä»¥åŠä¸ºä»€ä¹ˆåœ¨ç±»å£°æ˜ä¸­ä½¿ç”¨æ‰©å±•å’Œå®ç°å…³é”®å­—ã€‚ç›®å‰ä½ ä¸éœ€è¦æ‹…å¿ƒè¿™äº›é¢å¤–çš„å¹¶å‘ç—‡ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œç±»å£°æ˜å¯ä»¥åŒ…æ‹¬ä»¥ä¸‹ç»„ä»¶ï¼š ä¿®æ”¹å™¨ï¼Œå¦‚publicã€privateå’Œç¨åå°†é‡åˆ°çš„è®¸å¤šå…¶ä»–ä¿®æ”¹å™¨ã€‚ï¼ˆä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œprivateä¿®é¥°ç¬¦åªèƒ½åº”ç”¨äºNested Classesã€‚ï¼‰ ç±»åï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œé¦–å­—æ¯å¤§å†™ã€‚ ç±»çš„çˆ¶ç±»ï¼ˆè¶…ç±»ï¼‰çš„åç§°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œå‰é¢åŠ ä¸Šå…³é”®å­—extendsã€‚ä¸€ä¸ªç±»åªèƒ½æ‰©å±•ï¼ˆå­ç±»ï¼‰ä¸€ä¸ªçˆ¶ç±»ã€‚ ç”±ç±»å®ç°çš„æ¥å£çš„é€—å·åˆ†éš”åˆ—è¡¨ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œå‰é¢æ˜¯å…³é”®å­—implementsã€‚ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚ ç±»ä¸»ä½“ç”±å¤§æ‹¬å·ï½›ï½åŒ…å›´ã€‚ å£°æ˜æˆå‘˜å˜é‡æœ‰å‡ ç§å˜é‡ï¼š ç±»ä¸­çš„æˆå‘˜å˜é‡ç§°ä¸ºå­—æ®µã€‚ æ–¹æ³•æˆ–ä»£ç å—ä¸­çš„å˜é‡ç§°ä¸ºå±€éƒ¨å˜é‡ã€‚ æ–¹æ³•å£°æ˜ä¸­çš„å˜é‡ç§°ä¸ºå‚æ•°ã€‚ Bicycleç±»ä½¿ç”¨ä»¥ä¸‹ä»£ç è¡Œå®šä¹‰å…¶å­—æ®µï¼š 123public int cadence;public int gear;public int speed; å­—æ®µå£°æ˜ç”±ä¸‰ä¸ªç»„ä»¶ç»„æˆï¼Œé¡ºåºå¦‚ä¸‹ï¼š é›¶ä¸ªæˆ–å¤šä¸ªä¿®é¥°ç¬¦ï¼Œå¦‚publicæˆ–privateã€‚ å­—æ®µçš„ç±»å‹ã€‚ å­—æ®µçš„åç§°ã€‚ Bicycleçš„å­—æ®µåä¸ºâ€œèŠ‚å¥â€ã€â€œæ¡£ä½â€å’Œâ€œé€Ÿåº¦â€ï¼Œå¹¶ä¸”éƒ½æ˜¯æ•´æ•°ï¼ˆintï¼‰æ•°æ®ç±»å‹ã€‚publicå…³é”®å­—å°†è¿™äº›å­—æ®µæ ‡è¯†ä¸ºå…¬å…±æˆå‘˜ï¼Œå¯ç”±ä»»ä½•å¯ä»¥è®¿é—®ç±»çš„å¯¹è±¡è®¿é—®ã€‚ è®¿é—®ä¿®æ”¹å‡½æ•°ä½¿ç”¨çš„ç¬¬ä¸€ä¸ªï¼ˆæœ€å·¦è¾¹ï¼‰ä¿®é¥°ç¬¦å¯ä»¥æ§åˆ¶å“ªäº›å…¶ä»–ç±»å¯ä»¥è®¿é—®æˆå‘˜å­—æ®µã€‚ç›®å‰ï¼Œåªè€ƒè™‘å…¬å…±å’Œç§äººã€‚ç¨åå°†è®¨è®ºå…¶ä»–è®¿é—®ä¿®é¥°ç¬¦ã€‚ publicä¿®é¥°ç¬¦å­—æ®µå¯ä»æ‰€æœ‰ç±»è®¿é—®ã€‚ privateä¿®é¥°ç¬¦å­—æ®µåªèƒ½åœ¨å…¶è‡ªå·±çš„ç±»ä¸­è®¿é—®ã€‚ æœ¬ç€å°è£…çš„ç²¾ç¥ï¼Œå°†å­—æ®µç§æœ‰åŒ–æ˜¯å¾ˆå¸¸è§çš„ã€‚è¿™æ„å‘³ç€åªèƒ½ä»Bicycleç±»ç›´æ¥è®¿é—®å®ƒä»¬ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦è·å¾—è¿™äº›ä»·å€¼è§‚ã€‚è¿™å¯ä»¥é€šè¿‡æ·»åŠ ä¸ºæˆ‘ä»¬è·å–å­—æ®µå€¼çš„å…¬å…±æ–¹æ³•é—´æ¥å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940public class Bicycle &#123; private int cadence; private int gear; private int speed; public Bicycle(int startCadence, int startSpeed, int startGear) &#123; gear = startGear; cadence = startCadence; speed = startSpeed; &#125; public int getCadence() &#123; return cadence; &#125; public void setCadence(int newValue) &#123; cadence = newValue; &#125; public int getGear() &#123; return gear; &#125; public void setGear(int newValue) &#123; gear = newValue; &#125; public int getSpeed() &#123; return speed; &#125; public void applyBrake(int decrement) &#123; speed -= decrement; &#125; public void speedUp(int increment) &#123; speed += increment; &#125;&#125; ç±»å‹æ‰€æœ‰å˜é‡éƒ½å¿…é¡»æœ‰ä¸€ä¸ªç±»å‹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨åŸºæœ¬ç±»å‹ï¼Œå¦‚intã€floatã€booleanç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¼•ç”¨ç±»å‹ï¼Œå¦‚å­—ç¬¦ä¸²ã€æ•°ç»„æˆ–å¯¹è±¡ã€‚ å˜é‡åç§°æ‰€æœ‰å˜é‡ï¼Œæ— è®ºæ˜¯å­—æ®µã€å±€éƒ¨å˜é‡è¿˜æ˜¯å‚æ•°ï¼Œéƒ½éµå¾ªè¯­è¨€åŸºç¡€è¯¾â€œVariablesâ€”Naming.â€ä¸­ä»‹ç»çš„ç›¸åŒå‘½åè§„åˆ™å’Œçº¦å®šã€‚ åœ¨æœ¬è¯¾ä¸­ï¼Œè¯·æ³¨æ„ç›¸åŒçš„å‘½åè§„åˆ™å’Œçº¦å®šç”¨äºæ–¹æ³•å’Œç±»åï¼Œé™¤äº† ç±»åçš„ç¬¬ä¸€ä¸ªå­—æ¯åº”è¯¥å¤§å†™ æ–¹æ³•åä¸­çš„ç¬¬ä¸€ä¸ªï¼ˆæˆ–å”¯ä¸€ä¸€ä¸ªï¼‰å•è¯åº”è¯¥æ˜¯åŠ¨è¯ã€‚ å®šä¹‰æ–¹æ³•ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹æ–¹æ³•å£°æ˜çš„ç¤ºä¾‹ï¼š 1234public double calculateAnswer(double wingSpan, int numberOfEngines, double length, double grossTons) &#123; //do the calculation here&#125; æ–¹æ³•å£°æ˜ä¸­å”¯ä¸€å¿…éœ€çš„å…ƒç´ æ˜¯æ–¹æ³•çš„è¿”å›ç±»å‹ã€åç§°ã€ä¸€å¯¹æ‹¬å·ï¼ˆï¼‰å’Œå¤§æ‹¬å·ä¹‹é—´çš„ä¸»ä½“ï½›ï½ã€‚ æ›´ä¸€èˆ¬åœ°è¯´ï¼Œæ–¹æ³•å£°æ˜æœ‰å…­ä¸ªç»„ä»¶ï¼Œé¡ºåºå¦‚ä¸‹ï¼š ä¿®æ”¹å™¨ï¼Œå¦‚publicã€privateå’Œå…¶ä»–æ‚¨ç¨åå°†äº†è§£çš„ä¿®æ”¹å™¨ã€‚ è¿”å›ç±»å‹æ˜¯æ–¹æ³•è¿”å›å€¼çš„æ•°æ®ç±»å‹ï¼Œå¦‚æœæ–¹æ³•ä¸è¿”å›å€¼ï¼Œåˆ™è¿”å›voidã€‚ æ–¹æ³•åå­—æ®µåè§„åˆ™ä¹Ÿé€‚ç”¨äºæ–¹æ³•åï¼Œä½†çº¦å®šæœ‰ç‚¹ä¸åŒã€‚ æ‹¬å·ä¸­çš„å‚æ•°åˆ—è¡¨â€”ä»¥é€—å·åˆ†éš”çš„è¾“å…¥å‚æ•°åˆ—è¡¨ï¼Œå‰é¢æ˜¯å®ƒä»¬çš„æ•°æ®ç±»å‹ï¼Œç”¨æ‹¬å·ï¼ˆï¼‰æ‹¬èµ·æ¥ã€‚å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ç©ºæ‹¬å·ã€‚ ç¨åå°†è®¨è®ºçš„ä¾‹å¤–åˆ—è¡¨ã€‚ æ–¹æ³•ä½“ï¼ˆåŒ…å«åœ¨æ–¹æ³•ä»£ç çš„å¤§æ‹¬å·ä¸­ï¼ŒåŒ…æ‹¬å±€éƒ¨å˜é‡çš„å£°æ˜ï¼‰ä½äºæ­¤å¤„ã€‚ ä¿®é¥°ç¬¦ã€è¿”å›ç±»å‹å’Œå‚æ•°å°†åœ¨æœ¬è¯¾åé¢è®¨è®ºã€‚ä¾‹å¤–æƒ…å†µå°†åœ¨åé¢çš„è¯¾ç¨‹ä¸­è®¨è®ºã€‚ å®šä¹‰ï¼šæ–¹æ³•å£°æ˜çš„ä¸¤ä¸ªç»„ä»¶åŒ…æ‹¬æ–¹æ³•ç­¾åã€æ–¹æ³•åç§°å’Œå‚æ•°ç±»å‹ã€‚ ä¸Šè¿°æ–¹æ³•çš„ç­¾åä¸ºï¼š 1calculateAnswer(double, int, double, double) å‘½åæ–¹æ³•å°½ç®¡æ–¹æ³•åå¯ä»¥æ˜¯ä»»ä½•åˆæ³•æ ‡è¯†ç¬¦ï¼Œä½†ä»£ç çº¦å®šé™åˆ¶äº†æ–¹æ³•åã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œæ–¹æ³•ååº”è¯¥æ˜¯ä¸€ä¸ªå°å†™çš„åŠ¨è¯ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä»¥å°å†™çš„åŠ¨è¯å¼€å¤´ï¼Œç„¶åæ˜¯å½¢å®¹è¯ã€åè¯ç­‰çš„å¤šå•è¯åã€‚åœ¨å¤šå•è¯åä¸­ï¼Œç¬¬äºŒä¸ªå’Œåé¢çš„æ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯éƒ½åº”è¯¥å¤§å†™ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š 1234567runrunFastgetBackgroundgetFinalDatacompareTosetXisEmpty é€šå¸¸ï¼Œæ–¹æ³•åœ¨å…¶ç±»ä¸­å…·æœ‰å”¯ä¸€çš„åç§°ã€‚ä½†æ˜¯ï¼Œç”±äºæ–¹æ³•é‡è½½ï¼Œæ–¹æ³•å¯èƒ½ä¸å…¶ä»–æ–¹æ³•åŒåã€‚ é‡è½½æ–¹æ³•Javaç¼–ç¨‹è¯­è¨€æ”¯æŒé‡è½½æ–¹æ³•ï¼ŒJavaå¯ä»¥åŒºåˆ†å…·æœ‰ä¸åŒæ–¹æ³•ç­¾åçš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªç±»ä¸­çš„æ–¹æ³•æœ‰ä¸åŒçš„å‚æ•°åˆ—è¡¨ï¼Œé‚£ä¹ˆå®ƒä»¬å¯ä»¥å…·æœ‰ç›¸åŒçš„åç§°ï¼ˆåœ¨â€œæ¥å£å’Œç»§æ‰¿â€ä¸€è¯¾ä¸­å°†è®¨è®ºä¸€äº›é™åˆ¶æ¡ä»¶ï¼‰ã€‚ å‡è®¾æ‚¨æœ‰ä¸€ä¸ªç±»å¯ä»¥ä½¿ç”¨ä¹¦æ³•ç»˜åˆ¶å„ç§ç±»å‹çš„æ•°æ®ï¼ˆå­—ç¬¦ä¸²ã€æ•´æ•°ç­‰ï¼‰ï¼Œè¯¥ç±»åŒ…å«ç»˜åˆ¶æ¯ä¸ªæ•°æ®ç±»å‹çš„æ–¹æ³•ã€‚ä¸ºæ¯ä¸ªæ–¹æ³•ä½¿ç”¨ä¸€ä¸ªæ–°åç§°æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œä¾‹å¦‚drawStringã€drawIntegerã€drawFloatç­‰ã€‚åœ¨Javaç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ‚¨å¯ä»¥ä¸ºæ‰€æœ‰ç»˜åˆ¶æ–¹æ³•ä½¿ç”¨ç›¸åŒçš„åç§°ï¼Œä½†å¯ä»¥ä¸ºæ¯ä¸ªæ–¹æ³•ä¼ é€’ä¸åŒçš„å‚æ•°åˆ—è¡¨ã€‚å› æ­¤ï¼Œæ•°æ®ç»˜åˆ¶ç±»å¯èƒ½ä¼šå£°æ˜å››ä¸ªåä¸ºdrawçš„æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½æœ‰ä¸€ä¸ªä¸åŒçš„å‚æ•°åˆ—è¡¨ã€‚ 123456789101112131415public class DataArtist &#123; ... public void draw(String s) &#123; ... &#125; public void draw(int i) &#123; ... &#125; public void draw(double f) &#123; ... &#125; public void draw(int i, double f) &#123; ... &#125;&#125; é‡è½½æ–¹æ³•é€šè¿‡ä¼ é€’ç»™æ–¹æ³•çš„å‚æ•°çš„æ•°é‡å’Œç±»å‹è¿›è¡ŒåŒºåˆ†ã€‚åœ¨ä»£ç ç¤ºä¾‹ä¸­ï¼Œdrawï¼ˆStringsï¼‰å’Œdrawï¼ˆintiï¼‰æ˜¯æˆªç„¶ä¸åŒçš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦ä¸åŒçš„å‚æ•°ç±»å‹ã€‚ ä¸èƒ½å£°æ˜å¤šä¸ªå…·æœ‰ç›¸åŒåç§°ã€ç›¸åŒæ•°é‡å’Œç±»å‹çš„å‚æ•°çš„æ–¹æ³•ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•åŒºåˆ†å®ƒä»¬ã€‚ ç¼–è¯‘å™¨åœ¨åŒºåˆ†æ–¹æ³•æ—¶ä¸è€ƒè™‘è¿”å›ç±»å‹ï¼Œå› æ­¤æ‚¨ä¸èƒ½å£°æ˜å…·æœ‰ç›¸åŒç­¾åçš„ä¸¤ä¸ªæ–¹æ³•ï¼Œå³ä½¿å®ƒä»¬å…·æœ‰ä¸åŒçš„è¿”å›ç±»å‹ã€‚ &#x3D;&#x3D;æ³¨æ„ï¼šé‡è½½æ–¹æ³•åº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä»¬ä¼šä½¿ä»£ç çš„å¯è¯»æ€§å¤§å¤§é™ä½ã€‚&#x3D;&#x3D; ä¸ºç±»æä¾›æ„é€ å‡½æ•°ç±»åŒ…å«è°ƒç”¨ä»¥ä»ç±»è“å›¾åˆ›å»ºå¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚æ„é€ å‡½æ•°å£°æ˜çœ‹èµ·æ¥åƒæ–¹æ³•å£°æ˜ï¼Œåªæ˜¯å®ƒä»¬ä½¿ç”¨ç±»çš„åç§°å¹¶ä¸”æ²¡æœ‰è¿”å›ç±»å‹ã€‚ä¾‹å¦‚ï¼ŒBicycleæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼š 12345public Bicycle(int startCadence, int startSpeed, int startGear) &#123; gear = startGear; cadence = startCadence; speed = startSpeed;&#125; è¦åˆ›å»ºåä¸ºmyBikeçš„æ–°Bicycleå¯¹è±¡ï¼Œnewæ“ä½œç¬¦å°†è°ƒç”¨æ„é€ å‡½æ•°ï¼š 1Bicycle myBike = new Bicycle(30, 0, 8); newBicycleï¼ˆ30,0,8ï¼‰åœ¨å†…å­˜ä¸­ä¸ºå¯¹è±¡åˆ›å»ºç©ºé—´å¹¶åˆå§‹åŒ–å…¶å­—æ®µã€‚ å°½ç®¡Bicycleåªæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œä½†å®ƒä¹Ÿå¯ä»¥æœ‰å…¶ä»–æ„é€ å‡½æ•°ï¼ŒåŒ…æ‹¬æ— å‚æ•°æ„é€ å‡½æ•°ï¼š 12345public Bicycle() &#123; gear = 1; cadence = 10; speed = 0;&#125; Bicycle yourBike = new Bicycle(); è°ƒç”¨æ— å‚æ•°æ„é€ å‡½æ•°åˆ›å»ºåä¸ºyourBikeçš„æ–°Bicycleå¯¹è±¡ã€‚ ä¸¤ä¸ªæ„é€ å‡½æ•°éƒ½å¯ä»¥åœ¨Bicycleä¸­å£°æ˜ï¼Œå› ä¸ºå®ƒä»¬æœ‰ä¸åŒçš„å‚æ•°åˆ—è¡¨ã€‚ä¸æ–¹æ³•ä¸€æ ·ï¼ŒJavaå¹³å°æ ¹æ®åˆ—è¡¨ä¸­å‚æ•°çš„æ•°é‡åŠå…¶ç±»å‹æ¥åŒºåˆ†æ„é€ å‡½æ•°ã€‚ä¸èƒ½ä¸ºåŒä¸€ç±»ç¼–å†™ä¸¤ä¸ªå‚æ•°æ•°é‡å’Œç±»å‹ç›¸åŒçš„æ„é€ å‡½æ•°ï¼Œå› ä¸ºå¹³å°æ— æ³•å°†å®ƒä»¬åŒºåˆ†å¼€æ¥ã€‚è¿™æ ·åšä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚ æ‚¨ä¸å¿…ä¸ºç±»æä¾›ä»»ä½•æ„é€ å‡½æ•°ï¼Œä½†åœ¨è¿™æ ·åšæ—¶å¿…é¡»å°å¿ƒã€‚ç¼–è¯‘å™¨è‡ªåŠ¨ä¸ºä»»ä½•æ²¡æœ‰æ„é€ å‡½æ•°çš„ç±»æä¾›æ— å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚æ­¤é»˜è®¤æ„é€ å‡½æ•°å°†è°ƒç”¨è¶…ç±»çš„æ— å‚æ•°æ„é€ å‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœè¶…ç±»æ²¡æœ‰æ— å‚æ•°æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šå‘å‡ºæŠ±æ€¨ï¼Œå› æ­¤æ‚¨å¿…é¡»éªŒè¯å®ƒæœ‰æ— å‚æ•°æ„é€ å‡½æ•°ã€‚å¦‚æœæ‚¨çš„ç±»æ²¡æœ‰æ˜¾å¼è¶…ç±»ï¼Œé‚£ä¹ˆå®ƒæœ‰ä¸€ä¸ªéšå¼è¶…ç±»Objectï¼Œè¯¥ç±»æ²¡æœ‰å‚æ•°æ„é€ å‡½æ•°ã€‚ æ‚¨å¯ä»¥è‡ªå·±ä½¿ç”¨è¶…ç±»æ„é€ å‡½æ•°ã€‚æœ¬è¯¾å¼€å§‹æ—¶çš„å±±åœ°è‡ªè¡Œè½¦è¯¾å°±æ˜¯è¿™æ ·åšçš„ã€‚è¿™å°†åœ¨ç¨åçš„æ¥å£å’Œç»§æ‰¿è¯¾ç¨‹ä¸­è®¨è®ºã€‚ å¯ä»¥åœ¨æ„é€ å‡½æ•°å£°æ˜ä¸­ä½¿ç”¨è®¿é—®ä¿®é¥°ç¬¦æ¥æ§åˆ¶å“ªäº›å…¶ä»–ç±»å¯ä»¥è°ƒç”¨æ„é€ å‡½æ•°ã€‚ &#x3D;&#x3D;æ³¨æ„ï¼šå¦‚æœå¦ä¸€ä¸ªç±»ä¸èƒ½è°ƒç”¨MyClassæ„é€ å‡½æ•°ï¼Œåˆ™ä¸èƒ½ç›´æ¥åˆ›å»ºMyClasså¯¹è±¡ã€‚&#x3D;&#x3D; å‘æ–¹æ³•æˆ–æ„é€ å‡½æ•°ä¼ é€’ä¿¡æ¯æ–¹æ³•æˆ–æ„é€ å‡½æ•°çš„å£°æ˜å£°æ˜äº†è¯¥æ–¹æ³•æˆ–æ„é€ å‡½æ•°å‚æ•°çš„æ•°é‡å’Œç±»å‹ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ç§æ ¹æ®è´·æ¬¾é‡‘é¢ã€åˆ©ç‡ã€è´·æ¬¾æœŸé™ï¼ˆæœŸé™æ•°ï¼‰å’Œè´·æ¬¾æœªæ¥ä»·å€¼è®¡ç®—ä½æˆ¿è´·æ¬¾æœˆä»˜æ¬¾çš„æ–¹æ³•ï¼š 12345678910111213public double computePayment( double loanAmt, double rate, double futureValue, int numPeriods) &#123; double interest = rate / 100.0; double partial1 = Math.pow((1 + interest), - numPeriods); double denominator = (1 - partial1) / interest; double answer = (-loanAmt / denominator) - ((futureValue * partial1) / denominator); return answer;&#125; è¯¥æ–¹æ³•æœ‰å››ä¸ªå‚æ•°ï¼šè´·æ¬¾é‡‘é¢ã€åˆ©ç‡ã€æœªæ¥ä»·å€¼å’ŒæœŸæ•°ã€‚å‰ä¸‰ä¸ªæ˜¯åŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œç¬¬å››ä¸ªæ˜¯æ•´æ•°ã€‚å‚æ•°åœ¨æ–¹æ³•ä½“ä¸­ä½¿ç”¨ï¼Œåœ¨è¿è¡Œæ—¶å°†æ¥å—ä¼ å…¥çš„å‚æ•°å€¼ã€‚ &#x3D;&#x3D;æ³¨æ„ï¼šå‚æ•°æ˜¯æŒ‡æ–¹æ³•å£°æ˜ä¸­çš„å˜é‡åˆ—è¡¨ã€‚å‚æ•°æ˜¯è°ƒç”¨æ–¹æ³•æ—¶ä¼ å…¥çš„å®é™…å€¼ã€‚è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä½¿ç”¨çš„å‚æ•°å¿…é¡»åœ¨ç±»å‹å’Œé¡ºåºä¸Šä¸å£°æ˜çš„å‚æ•°åŒ¹é…ã€‚&#x3D;&#x3D; å‚æ•°ç±»å‹æ‚¨å¯ä»¥å°†ä»»ä½•æ•°æ®ç±»å‹ç”¨äºæ–¹æ³•æˆ–æ„é€ å‡½æ•°çš„å‚æ•°ã€‚è¿™åŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¦‚doubleã€floatå’Œintegerï¼Œå¦‚æ‚¨åœ¨computePaymentæ–¹æ³•ä¸­çœ‹åˆ°çš„ï¼Œä»¥åŠå¼•ç”¨æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚å¯¹è±¡å’Œæ•°ç»„ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªæ¥å—æ•°ç»„ä½œä¸ºå‚æ•°çš„æ–¹æ³•çš„ç¤ºä¾‹ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œè¯¥æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å¤šè¾¹å½¢å¯¹è±¡ï¼Œå¹¶ä»Pointå¯¹è±¡æ•°ç»„åˆå§‹åŒ–å®ƒï¼ˆå‡è®¾Pointæ˜¯è¡¨ç¤ºxï¼Œyåæ ‡çš„ç±»ï¼‰ï¼š 123public Polygon polygonFrom(Point[] corners) &#123; // method body goes here&#125; æ³¨æ„ï¼šå¦‚æœè¦å°†æ–¹æ³•ä¼ é€’ç»™æ–¹æ³•ï¼Œè¯·ä½¿ç”¨lambda expression æˆ– method reference. ä»»æ„æ•°é‡çš„å‚æ•°å¯ä»¥ä½¿ç”¨åä¸ºvarargsçš„æ„é€ å°†ä»»æ„æ•°é‡çš„å€¼ä¼ é€’ç»™æ–¹æ³•ã€‚å½“æ‚¨ä¸çŸ¥é“å°†å‘æ–¹æ³•ä¼ é€’å¤šå°‘ç‰¹å®šç±»å‹çš„å‚æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨varargsã€‚è¿™æ˜¯æ‰‹åŠ¨åˆ›å»ºæ•°ç»„çš„å¿«æ·æ–¹å¼ï¼ˆä»¥å‰çš„æ–¹æ³•å¯ä»¥ä½¿ç”¨varargsè€Œä¸æ˜¯æ•°ç»„ï¼‰ã€‚ è¦ä½¿ç”¨varargsï¼Œåœ¨æœ€åä¸€ä¸ªå‚æ•°çš„ç±»å‹åé¢åŠ ä¸€ä¸ªçœç•¥å·ï¼ˆä¸‰ä¸ªç‚¹ï¼Œâ€¦ï¼‰ï¼Œç„¶ååŠ ä¸€ä¸ªç©ºæ ¼å’Œå‚æ•°åç§°ã€‚ç„¶åå¯ä»¥ä½¿ç”¨ä»»æ„æ•°é‡çš„è¯¥å‚æ•°è°ƒç”¨è¯¥æ–¹æ³•ï¼ŒåŒ…æ‹¬æ— ã€‚ 123456789101112public Polygon polygonFrom(Point... corners) &#123; int numberOfSides = corners.length; double squareOfSide1, lengthOfSide1; squareOfSide1 = (corners[1].x - corners[0].x) * (corners[1].x - corners[0].x) + (corners[1].y - corners[0].y) * (corners[1].y - corners[0].y); lengthOfSide1 = Math.sqrt(squareOfSide1); // more method body code follows that creates and returns a // polygon connecting the Points&#125; æ‚¨å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ï¼Œè§’è¢«è§†ä¸ºæ•°ç»„ã€‚å¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–å‚æ•°åºåˆ—è°ƒç”¨è¯¥æ–¹æ³•ã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œæ–¹æ³•ä½“ä¸­çš„ä»£ç éƒ½ä¼šå°†å‚æ•°è§†ä¸ºæ•°ç»„ã€‚ æ‚¨é€šå¸¸ä¼šçœ‹åˆ°å¸¦æœ‰æ‰“å°æ–¹æ³•çš„varargsï¼›ä¾‹å¦‚ï¼Œè¿™ä¸ªprintfæ–¹æ³•ï¼š 1public PrintStream printf(String format, Object... args) å…è®¸æ‚¨æ‰“å°ä»»æ„æ•°é‡çš„å¯¹è±¡ã€‚å¯ä»¥è¿™æ ·ç§°å‘¼ï¼š 1System.out.printf(&quot;%s: %d, %s%n&quot;, name, idnum, address); æˆ–è€…åƒè¿™æ · 1System.out.printf(&quot;%s: %d, %s, %s, %s%n&quot;, name, idnum, address, phone, email); æˆ–è€…å…·æœ‰ä¸åŒæ•°é‡çš„å‚æ•°ã€‚ å‚æ•°åç§°å½“æ‚¨å‘æ–¹æ³•æˆ–æ„é€ å‡½æ•°å£°æ˜å‚æ•°æ—¶ï¼Œæ‚¨éœ€è¦ä¸ºè¯¥å‚æ•°æä¾›ä¸€ä¸ªåç§°ã€‚æ­¤åç§°åœ¨æ–¹æ³•ä½“ä¸­ç”¨äºå¼•ç”¨ä¼ å…¥çš„å‚æ•°ã€‚ å‚æ•°çš„åç§°åœ¨å…¶èŒƒå›´å†…å¿…é¡»å”¯ä¸€ã€‚å®ƒä¸èƒ½ä¸åŒä¸€æ–¹æ³•æˆ–æ„é€ å‡½æ•°çš„å¦ä¸€ä¸ªå‚æ•°çš„åç§°ç›¸åŒï¼Œä¹Ÿä¸èƒ½æ˜¯æ–¹æ³•æˆ–æ„é€ å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡çš„åç§°ã€‚ å‚æ•°å¯ä»¥ä¸ç±»çš„æŸä¸ªå­—æ®µåŒåã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œåˆ™è¯¥å‚æ•°è¢«ç§°ä¸ºé˜´å½±å­—æ®µã€‚é˜´å½±å­—æ®µä¼šä½¿ä»£ç éš¾ä»¥é˜…è¯»ï¼Œé€šå¸¸ä»…åœ¨è®¾ç½®ç‰¹å®šå­—æ®µçš„æ„é€ å‡½æ•°å’Œæ–¹æ³•ä¸­ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹Circleç±»åŠå…¶setOriginæ–¹æ³•ï¼š 123456public class Circle &#123; private int x, y, radius; public void setOrigin(int x, int y) &#123; ... &#125;&#125; Circleç±»æœ‰ä¸‰ä¸ªå­—æ®µï¼šxã€yå’Œradiusã€‚setOriginæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œæ¯ä¸ªå‚æ•°çš„åç§°ä¸å…¶ä¸­ä¸€ä¸ªå­—æ®µçš„åç§°ç›¸åŒã€‚æ¯ä¸ªæ–¹æ³•å‚æ•°éƒ½ä¼šéšè—å…±äº«å…¶åç§°çš„å­—æ®µã€‚å› æ­¤ï¼Œåœ¨æ–¹æ³•ä½“ä¸­ä½¿ç”¨ç®€å•åç§°xæˆ–yæ˜¯æŒ‡å‚æ•°ï¼Œè€Œä¸æ˜¯å­—æ®µã€‚è¦è®¿é—®è¯¥å­—æ®µï¼Œå¿…é¡»ä½¿ç”¨é™å®šåç§°ã€‚è¿™å°†åœ¨æœ¬è¯¾åé¢çš„â€œä½¿ç”¨æ­¤å…³é”®å­—â€ä¸€èŠ‚ä¸­è®¨è®º. ä¼ é€’åŸè¯­æ•°æ®ç±»å‹å‚æ•°åŸå§‹å‚æ•°ï¼ˆå¦‚intæˆ–doubleï¼‰é€šè¿‡å€¼ä¼ é€’åˆ°æ–¹æ³•ä¸­ã€‚è¿™æ„å‘³ç€å¯¹å‚æ•°å€¼çš„ä»»ä½•æ›´æ”¹éƒ½åªå­˜åœ¨äºæ–¹æ³•çš„èŒƒå›´å†…ã€‚å½“æ–¹æ³•è¿”å›æ—¶ï¼Œå‚æ•°å°†æ¶ˆå¤±ï¼Œå¯¹å®ƒä»¬çš„ä»»ä½•æ›´æ”¹éƒ½å°†ä¸¢å¤±ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š 123456789101112131415161718192021public class PassPrimitiveByValue &#123; public static void main(String[] args) &#123; int x = 3; // invoke passMethod() with // x as argument passMethod(x); // print x to see if its // value has changed System.out.println(&quot;After invoking passMethod, x = &quot; + x); &#125; // change parameter in passMethod() public static void passMethod(int p) &#123; p = 10; &#125;&#125; è¿è¡Œæ­¤ç¨‹åºæ—¶ï¼Œè¾“å‡ºä¸ºï¼š 1After invoking passMethod, x = 3 ä¼ é€’å¼•ç”¨æ•°æ®ç±»å‹å‚æ•°å¼•ç”¨æ•°æ®ç±»å‹å‚æ•°ï¼ˆå¦‚å¯¹è±¡ï¼‰ä¹ŸæŒ‰å€¼ä¼ é€’åˆ°æ–¹æ³•ä¸­ã€‚è¿™æ„å‘³ç€å½“æ–¹æ³•è¿”å›æ—¶ï¼Œä¼ å…¥çš„å¼•ç”¨ä»ç„¶å¼•ç”¨ä¸ä»¥å‰ç›¸åŒçš„å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå¦‚æœå¯¹è±¡çš„å­—æ®µå…·æœ‰é€‚å½“çš„è®¿é—®çº§åˆ«ï¼Œåˆ™å¯ä»¥åœ¨æ–¹æ³•ä¸­æ›´æ”¹è¿™äº›å­—æ®µçš„å€¼ã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘ä»»æ„ç±»ä¸­ç§»åŠ¨Circleå¯¹è±¡çš„æ–¹æ³•ï¼š 12345678public void moveCircle(Circle circle, int deltaX, int deltaY) &#123; // code to move origin of circle to x+deltaX, y+deltaY circle.setX(circle.getX() + deltaX); circle.setY(circle.getY() + deltaY); // code to assign a new reference to circle circle = new Circle(0, 0);&#125; ä½¿ç”¨ä»¥ä¸‹å‚æ•°è°ƒç”¨æ–¹æ³•ï¼š 1moveCircle(myCircle, 23, 56) åœ¨æ–¹æ³•ä¸­ï¼Œåœ†æœ€åˆæ˜¯æŒ‡myCircleã€‚è¯¥æ–¹æ³•å°†åœ†å¼•ç”¨çš„å¯¹è±¡ï¼ˆå³myCircleï¼‰çš„xå’Œyåæ ‡åˆ†åˆ«æ›´æ”¹23å’Œ56ã€‚å½“æ–¹æ³•è¿”å›æ—¶ï¼Œè¿™äº›æ›´æ”¹å°†æŒç»­å­˜åœ¨ã€‚ç„¶åï¼Œåœ†è¢«åˆ†é…ç»™ä¸€ä¸ªæ–°çš„circleå¯¹è±¡ï¼ˆx&#x3D;y&#x3D;0ï¼‰çš„å¼•ç”¨ã€‚ä½†æ˜¯ï¼Œè¿™ç§é‡æ–°åˆ†é…æ²¡æœ‰æ°¸ä¹…æ€§ï¼Œå› ä¸ºå¼•ç”¨æ˜¯æŒ‰å€¼ä¼ é€’çš„ï¼Œä¸èƒ½æ›´æ”¹ã€‚åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œåœ†æŒ‡å‘çš„å¯¹è±¡å·²æ›´æ”¹ï¼Œä½†å½“è¯¥æ–¹æ³•è¿”å›æ—¶ï¼ŒmyCircleä»ç„¶å¼•ç”¨ä¸è°ƒç”¨è¯¥æ–¹æ³•ä¹‹å‰ç›¸åŒçš„circleå¯¹è±¡ã€‚ å¯¹è±¡(Objects)å…¸å‹çš„Javaç¨‹åºåˆ›å»ºè®¸å¤šå¯¹è±¡ï¼Œæ­£å¦‚æ‚¨æ‰€çŸ¥ï¼Œè¿™äº›å¯¹è±¡é€šè¿‡è°ƒç”¨æ–¹æ³•è¿›è¡Œäº¤äº’ã€‚é€šè¿‡è¿™äº›å¯¹è±¡äº¤äº’ï¼Œç¨‹åºå¯ä»¥æ‰§è¡Œå„ç§ä»»åŠ¡ï¼Œä¾‹å¦‚å®ç°GUIã€è¿è¡ŒåŠ¨ç”»æˆ–é€šè¿‡ç½‘ç»œå‘é€å’Œæ¥æ”¶ä¿¡æ¯ã€‚ä¸€æ—¦å¯¹è±¡å®Œæˆäº†ä¸ºå…¶åˆ›å»ºçš„å·¥ä½œï¼Œå…¶èµ„æºå°†è¢«å›æ”¶ä¾›å…¶ä»–å¯¹è±¡ä½¿ç”¨ã€‚ è¿™æ˜¯ä¸€ä¸ªåä¸ºCreateObjectDemoçš„å°ç¨‹åºï¼Œå®ƒåˆ›å»ºä¸‰ä¸ªå¯¹è±¡ï¼šä¸€ä¸ªPointå¯¹è±¡å’Œä¸¤ä¸ªRectangleå¯¹è±¡ã€‚ç¼–è¯‘æ­¤ç¨‹åºéœ€è¦æ‰€æœ‰ä¸‰ä¸ªæºæ–‡ä»¶ã€‚ 123456789101112131415161718192021222324252627public class CreateObjectDemo &#123; public static void main(String[] args) &#123; // Declare and create a point object and two rectangle objects. Point originOne = new Point(23, 94); Rectangle rectOne = new Rectangle(originOne, 100, 200); Rectangle rectTwo = new Rectangle(50, 100); // display rectOne&#x27;s width, height, and area System.out.println(&quot;Width of rectOne: &quot; + rectOne.width); System.out.println(&quot;Height of rectOne: &quot; + rectOne.height); System.out.println(&quot;Area of rectOne: &quot; + rectOne.getArea()); // set rectTwo&#x27;s position rectTwo.origin = originOne; // display rectTwo&#x27;s position System.out.println(&quot;X Position of rectTwo: &quot; + rectTwo.origin.x); System.out.println(&quot;Y Position of rectTwo: &quot; + rectTwo.origin.y); // move rectTwo and display its new position rectTwo.move(40, 72); System.out.println(&quot;X Position of rectTwo: &quot; + rectTwo.origin.x); System.out.println(&quot;Y Position of rectTwo: &quot; + rectTwo.origin.y); &#125;&#125; è¯¥ç¨‹åºåˆ›å»ºã€æ“ä½œå’Œæ˜¾ç¤ºæœ‰å…³å„ç§å¯¹è±¡çš„ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯è¾“å‡ºï¼š 1234567Width of rectOne: 100Height of rectOne: 200Area of rectOne: 20000X Position of rectTwo: 23Y Position of rectTwo: 94X Position of rectTwo: 40Y Position of rectTwo: 72 ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ä½¿ç”¨ä¸Šé¢çš„ç¤ºä¾‹æ¥æè¿°ç¨‹åºä¸­å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚ä»ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ç¼–å†™åœ¨è‡ªå·±çš„ç¨‹åºä¸­åˆ›å»ºå’Œä½¿ç”¨å¯¹è±¡çš„ä»£ç ã€‚æ‚¨è¿˜å°†äº†è§£å½“å¯¹è±¡çš„ç”Ÿå‘½ç»“æŸæ—¶ï¼Œç³»ç»Ÿå¦‚ä½•åœ¨å¯¹è±¡ä¹‹åè¿›è¡Œæ¸…ç†ã€‚ åˆ›å»ºå¯¹è±¡å¦‚æ‚¨æ‰€çŸ¥ï¼Œç±»æä¾›å¯¹è±¡çš„è“å›¾ï¼›ä»ç±»åˆ›å»ºå¯¹è±¡ã€‚ä» CreateObjectDemoç¨‹åºä¸­æå–çš„ä»¥ä¸‹è¯­å¥ä¸­çš„æ¯ä¸€ä¸ªéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶å°†å…¶æŒ‡å®šç»™ä¸€ä¸ªå˜é‡ï¼š 123Point originOne = new Point(23, 94);Rectangle rectOne = new Rectangle(originOne, 100, 200);Rectangle rectTwo = new Rectangle(50, 100); ç¬¬ä¸€è¡Œåˆ›å»ºPointç±»çš„å¯¹è±¡ï¼Œç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡Œåˆ†åˆ«åˆ›å»ºRectangleç±»çš„å¯¹è±¡ã€‚ è¿™äº›è¯­å¥ä¸­çš„æ¯ä¸€ä¸ªéƒ½æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼ˆä¸‹é¢å°†è¯¦ç»†è®¨è®ºï¼‰ï¼š å£°æ˜ï¼šç²—ä½“ä»£ç é›†æ˜¯å°†å˜é‡åä¸å¯¹è±¡ç±»å‹å…³è”çš„æ‰€æœ‰å˜é‡å£°æ˜ã€‚ å®ä¾‹åŒ–ï¼šnewå…³é”®å­—æ˜¯åˆ›å»ºå¯¹è±¡çš„Javaè¿ç®—ç¬¦ã€‚ åˆå§‹åŒ–ï¼šæ–°è¿ç®—ç¬¦åé¢æ˜¯å¯¹æ„é€ å‡½æ•°çš„è°ƒç”¨ï¼Œæ„é€ å‡½æ•°åˆå§‹åŒ–æ–°å¯¹è±¡ã€‚ å£°æ˜å˜é‡ä»¥å¼•ç”¨å¯¹è±¡ä¹‹å‰ï¼Œæ‚¨äº†è§£åˆ°è¦å£°æ˜å˜é‡ï¼Œæ‚¨å¯ä»¥ç¼–å†™ï¼š 1type name; è¿™ä¼šé€šçŸ¥ç¼–è¯‘å™¨ï¼Œæ‚¨å°†ä½¿ç”¨åç§°å¼•ç”¨ç±»å‹ä¸ºtypeçš„æ•°æ®ã€‚å¯¹äºåŸºå…ƒå˜é‡ï¼Œæ­¤å£°æ˜è¿˜ä¸ºå˜é‡ä¿ç•™äº†é€‚å½“çš„å†…å­˜é‡ã€‚ æ‚¨ä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„è¡Œä¸­å£°æ˜å¼•ç”¨å˜é‡ã€‚ä¾‹å¦‚ï¼š 1Point originOne; å¦‚æœåƒè¿™æ ·å£°æ˜originOneï¼Œé‚£ä¹ˆåœ¨å®é™…åˆ›å»ºå¹¶åˆ†é…å¯¹è±¡ä¹‹å‰ï¼Œå®ƒçš„å€¼å°†æ— æ³•ç¡®å®šã€‚ç®€å•åœ°å£°æ˜å¼•ç”¨å˜é‡ä¸ä¼šåˆ›å»ºå¯¹è±¡ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦ä½¿ç”¨æ–°è¿ç®—ç¬¦ï¼Œå¦‚ä¸‹ä¸€èŠ‚æ‰€è¿°ã€‚åœ¨ä»£ç ä¸­ä½¿ç”¨å¯¹è±¡ä¹‹å‰ï¼Œå¿…é¡»å°†å…¶åˆ†é…ç»™originOneã€‚å¦åˆ™ï¼Œæ‚¨å°†å¾—åˆ°ä¸€ä¸ªç¼–è¯‘å™¨é”™è¯¯ã€‚ æ­¤çŠ¶æ€ä¸‹çš„å˜é‡å½“å‰æœªå¼•ç”¨ä»»ä½•å¯¹è±¡ï¼Œå¯ä»¥å¦‚ä¸‹æ‰€ç¤ºï¼ˆå˜é‡åoriginOneåŠ ä¸ŠæŒ‡å‘ä»»ä½•å¯¹è±¡çš„å¼•ç”¨ï¼‰ï¼š å®ä¾‹åŒ–ç±»æ–°æ“ä½œç¬¦é€šè¿‡ä¸ºæ–°å¯¹è±¡åˆ†é…å†…å­˜å¹¶è¿”å›å¯¹è¯¥å†…å­˜çš„å¼•ç”¨æ¥å®ä¾‹åŒ–ç±»ã€‚æ–°è¿ç®—ç¬¦è¿˜è°ƒç”¨å¯¹è±¡æ„é€ å‡½æ•°ã€‚ &#x3D;&#x3D;æ³¨æ„ï¼šçŸ­è¯­â€œå®ä¾‹åŒ–ä¸€ä¸ªç±»â€çš„æ„æ€ä¸â€œåˆ›å»ºä¸€ä¸ªå¯¹è±¡â€çš„æ„æ€ç›¸åŒã€‚å½“æ‚¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œæ‚¨æ­£åœ¨åˆ›å»ºä¸€ä¸ªç±»çš„â€œå®ä¾‹â€ï¼Œå› æ­¤â€œå®ä¾‹â€ä¸€ä¸ªç±»ã€‚&#x3D;&#x3D; æ–°è¿ç®—ç¬¦éœ€è¦ä¸€ä¸ªåç¼€å‚æ•°ï¼šå¯¹æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚æ„é€ å‡½æ•°çš„åç§°æä¾›äº†è¦å®ä¾‹åŒ–çš„ç±»çš„åç§°ã€‚ æ–°è¿ç®—ç¬¦è¿”å›å¯¹å…¶åˆ›å»ºçš„å¯¹è±¡çš„å¼•ç”¨ã€‚æ­¤å¼•ç”¨é€šå¸¸åˆ†é…ç»™é€‚å½“ç±»å‹çš„å˜é‡ï¼Œå¦‚ï¼š 1Point originOne = new Point(23, 94); æ–°è¿ç®—ç¬¦è¿”å›çš„å¼•ç”¨ä¸å¿…æŒ‡å®šç»™å˜é‡ã€‚å®ƒä¹Ÿå¯ä»¥ç›´æ¥åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š 1int height = new Rectangle().height; è¿™ä¸€å£°æ˜å°†åœ¨ä¸‹ä¸€èŠ‚è®¨è®ºã€‚ åˆå§‹åŒ–å¯¹è±¡ä»¥ä¸‹æ˜¯Pointç±»çš„ä»£ç ï¼š 123456789public class Point &#123; public int x = 0; public int y = 0; //constructor public Point(int a, int b) &#123; x = a; y = b; &#125;&#125; æ­¤ç±»åŒ…å«å•ä¸ªæ„é€ å‡½æ•°ã€‚æ‚¨å¯ä»¥è¯†åˆ«æ„é€ å‡½æ•°ï¼Œå› ä¸ºå®ƒçš„å£°æ˜ä½¿ç”¨ä¸ç±»ç›¸åŒçš„åç§°ï¼Œå¹¶ä¸”æ²¡æœ‰è¿”å›ç±»å‹ã€‚Pointç±»ä¸­çš„æ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªæ•´æ•°å‚æ•°ï¼Œå¦‚ä»£ç æ‰€å£°æ˜çš„ï¼ˆint aï¼Œint bï¼‰ã€‚ä»¥ä¸‹è¯­å¥æä¾›23å’Œ94ä½œä¸ºè¿™äº›å‚æ•°çš„å€¼ï¼š 1Point originOne = new Point(23, 94); æ‰§è¡Œæ­¤è¯­å¥çš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‹é¢æ˜¯Rectangleç±»çš„ä»£ç ï¼Œå®ƒåŒ…å«å››ä¸ªæ„é€ å‡½æ•°ï¼š 12345678910111213141516171819202122232425262728293031323334public class Rectangle &#123; public int width = 0; public int height = 0; public Point origin; // four constructors public Rectangle() &#123; origin = new Point(0, 0); &#125; public Rectangle(Point p) &#123; origin = p; &#125; public Rectangle(int w, int h) &#123; origin = new Point(0, 0); width = w; height = h; &#125; public Rectangle(Point p, int w, int h) &#123; origin = p; width = w; height = h; &#125; // a method for moving the rectangle public void move(int x, int y) &#123; origin.x = x; origin.y = y; &#125; // a method for computing the area of the rectangle public int getArea() &#123; return width * height; &#125;&#125; æ¯ä¸ªæ„é€ å‡½æ•°éƒ½å…è®¸æ‚¨ä½¿ç”¨åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ä¸ºçŸ©å½¢çš„åŸç‚¹ã€å®½åº¦å’Œé«˜åº¦æä¾›åˆå§‹å€¼ã€‚å¦‚æœä¸€ä¸ªç±»æœ‰å¤šä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒä»¬å¿…é¡»æœ‰ä¸åŒçš„ç­¾åã€‚Javaç¼–è¯‘å™¨æ ¹æ®å‚æ•°çš„æ•°é‡å’Œç±»å‹åŒºåˆ†æ„é€ å‡½æ•°ã€‚å½“Javaç¼–è¯‘å™¨é‡åˆ°ä»¥ä¸‹ä»£ç æ—¶ï¼Œå®ƒçŸ¥é“è°ƒç”¨Rectangleç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œè¯¥æ„é€ å‡½æ•°éœ€è¦Pointå‚æ•°åè·Ÿä¸¤ä¸ªæ•´æ•°å‚æ•°ï¼š 1Rectangle rectOne = new Rectangle(originOne, 100, 200); è¿™å°†è°ƒç”¨Rectangleçš„æ„é€ å‡½æ•°ä¹‹ä¸€ï¼Œè¯¥æ„é€ å‡½æ•°å°†originåˆå§‹åŒ–ä¸ºoriginOneã€‚æ­¤å¤–ï¼Œæ„é€ å‡½æ•°å°†å®½åº¦è®¾ç½®ä¸º100ï¼Œé«˜åº¦è®¾ç½®ä¸º200ã€‚ç°åœ¨æœ‰ä¸¤ä¸ªå¯¹åŒä¸€Pointå¯¹è±¡çš„å¼•ç”¨ï¼Œä¸€ä¸ªå¯¹è±¡å¯ä»¥æœ‰å¤šä¸ªå¯¹å®ƒçš„å¼•ç”¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‹é¢ä¸€è¡Œä»£ç è°ƒç”¨Rectangleæ„é€ å‡½æ•°ï¼Œè¯¥æ„é€ å‡½æ•°éœ€è¦ä¸¤ä¸ªæ•´æ•°å‚æ•°ï¼Œå®ƒä»¬æä¾›å®½åº¦å’Œé«˜åº¦çš„åˆå§‹å€¼ã€‚å¦‚æœæ£€æŸ¥æ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼Œæ‚¨ä¼šçœ‹åˆ°å®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Pointå¯¹è±¡ï¼Œå…¶xå’Œyå€¼è¢«åˆå§‹åŒ–ä¸º0ï¼š 1Rectangle rectTwo = new Rectangle(50, 100); ä»¥ä¸‹è¯­å¥ä¸­ä½¿ç”¨çš„çŸ©å½¢æ„é€ å‡½æ•°ä¸å¸¦ä»»ä½•å‚æ•°ï¼Œå› æ­¤ç§°ä¸ºæ— å‚æ•°æ„é€ å‡½æ•°ï¼š 1Rectangle rect = new Rectangle(); æ‰€æœ‰ç±»éƒ½è‡³å°‘æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚å¦‚æœç±»æ²¡æœ‰æ˜¾å¼å£°æ˜ä»»ä½•ï¼ŒJavaç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æä¾›ä¸€ä¸ªæ— å‚æ•°æ„é€ å‡½æ•°ï¼Œç§°ä¸ºé»˜è®¤æ„é€ å‡½æ•°ã€‚æ­¤é»˜è®¤æ„é€ å‡½æ•°è°ƒç”¨ç±»çˆ¶çº§çš„æ— å‚æ•°æ„é€ å‡½æ•°ï¼Œå¦‚æœç±»æ²¡æœ‰å…¶ä»–çˆ¶çº§ï¼Œåˆ™è°ƒç”¨Objectæ„é€ å‡½æ•°ã€‚å¦‚æœçˆ¶çº§æ²¡æœ‰æ„é€ å‡½æ•°ï¼ˆObjectæœ‰æ„é€ å‡½æ•°ï¼‰ï¼Œç¼–è¯‘å™¨å°†æ‹’ç»è¯¥ç¨‹åºã€‚ ä½¿ç”¨å¯¹è±¡ä¸€æ—¦æ‚¨åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†å…¶ç”¨äºæŸäº›ç”¨é€”ã€‚æ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªå­—æ®µçš„å€¼ã€æ›´æ”¹å…¶ä¸­ä¸€ä¸ªåŸŸæˆ–è°ƒç”¨å…¶ä¸­ä¸€ä¸ªæ–¹æ³•æ¥æ‰§è¡Œæ“ä½œã€‚ å¼•ç”¨å¯¹è±¡çš„å­—æ®µå¯¹è±¡å­—æ®µé€šè¿‡å…¶åç§°è¿›è¡Œè®¿é—®ã€‚æ‚¨å¿…é¡»ä½¿ç”¨æ˜ç¡®çš„åç§°ã€‚ æ‚¨å¯ä»¥åœ¨è‡ªå·±çš„ç±»ä¸­ä¸ºå­—æ®µä½¿ç”¨ä¸€ä¸ªç®€å•çš„åç§°ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Rectangleç±»ä¸­æ·»åŠ ä¸€æ¡è¯­å¥æ¥æ‰“å°å®½åº¦å’Œé«˜åº¦ï¼š 1System.out.println(&quot;Width and height are: &quot; + width + &quot;, &quot; + height); åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®½åº¦å’Œé«˜åº¦æ˜¯ç®€å•çš„åç§°ã€‚ å¯¹è±¡ç±»ä¹‹å¤–çš„ä»£ç å¿…é¡»ä½¿ç”¨å¯¹è±¡å¼•ç”¨æˆ–è¡¨è¾¾å¼ï¼Œåè·Ÿç‚¹ï¼ˆ.ï¼‰è¿ç®—ç¬¦ï¼Œåè·Ÿç®€å•å­—æ®µåï¼Œå¦‚ï¼š 1objectReference.fieldName ä¾‹å¦‚ï¼ŒCreateObjectDemoç±»ä¸­çš„ä»£ç ä½äºRectangleç±»çš„ä»£ç ä¹‹å¤–ã€‚å› æ­¤ï¼Œè¦å¼•ç”¨åä¸ºrectOneçš„çŸ©å½¢å¯¹è±¡ä¸­çš„åŸç‚¹ã€å®½åº¦å’Œé«˜åº¦å­—æ®µï¼ŒCreateObjectDemoç±»å¿…é¡»ä½¿ç”¨åç§°rectOneã€‚åŸç‚¹ï¼ŒrectOneã€‚widthå’ŒrectOneã€‚é«˜åº¦ã€‚ç¨‹åºä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªåç§°æ¥æ˜¾ç¤ºrectOneçš„å®½åº¦å’Œé«˜åº¦ï¼š 12System.out.println(&quot;Width of rectOne: &quot; + rectOne.width);System.out.println(&quot;Height of rectOne: &quot; + rectOne.height); è¯•å›¾ä½¿ç”¨CreateObjectDemoç±»ä¸­ä»£ç ä¸­çš„ç®€å•åç§°widthå’Œheightæ˜¯æ²¡æœ‰æ„ä¹‰çš„-è¿™äº›å­—æ®µåªå­˜åœ¨äºå¯¹è±¡ä¸­-å¹¶å¯¼è‡´ç¼–è¯‘å™¨é”™è¯¯ã€‚ ç¨åï¼Œè¯¥ç¨‹åºä½¿ç”¨ç±»ä¼¼çš„ä»£ç æ¥æ˜¾ç¤ºå…³äºrectTwoçš„ä¿¡æ¯ã€‚ç›¸åŒç±»å‹çš„å¯¹è±¡å…·æœ‰è‡ªå·±çš„ç›¸åŒå®ä¾‹å­—æ®µå‰¯æœ¬ã€‚å› æ­¤ï¼Œæ¯ä¸ªçŸ©å½¢å¯¹è±¡éƒ½æœ‰åä¸ºåŸç‚¹ã€å®½åº¦å’Œé«˜åº¦çš„å­—æ®µã€‚é€šè¿‡å¯¹è±¡å¼•ç”¨è®¿é—®å®ä¾‹å­—æ®µæ—¶ï¼Œå°†å¼•ç”¨è¯¥ç‰¹å®šå¯¹è±¡çš„å­—æ®µã€‚CreateObjectDemoç¨‹åºä¸­çš„ä¸¤ä¸ªå¯¹è±¡rectOneå’ŒrectTwoå…·æœ‰ä¸åŒçš„åŸç‚¹ã€å®½åº¦å’Œé«˜åº¦å­—æ®µã€‚ è¦è®¿é—®å­—æ®µï¼Œå¯ä»¥ä½¿ç”¨å¯¹å¯¹è±¡çš„å‘½åå¼•ç”¨ï¼Œå¦‚å‰é¢çš„ç¤ºä¾‹æ‰€ç¤ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä»»ä½•è¿”å›å¯¹è±¡å¼•ç”¨çš„è¡¨è¾¾å¼ã€‚å›æƒ³ä¸€ä¸‹ï¼Œæ–°æ“ä½œç¬¦è¿”å›å¯¹å¯¹è±¡çš„å¼•ç”¨ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨newè¿”å›çš„å€¼æ¥è®¿é—®æ–°å¯¹è±¡çš„å­—æ®µï¼š 1int height = new Rectangle().height; æ­¤è¯­å¥åˆ›å»ºä¸€ä¸ªæ–°çš„çŸ©å½¢å¯¹è±¡ï¼Œå¹¶ç«‹å³è·å¾—å…¶é«˜åº¦ã€‚æœ¬è´¨ä¸Šï¼Œè¯¥è¯­å¥è®¡ç®—çŸ©å½¢çš„é»˜è®¤é«˜åº¦ã€‚è¯·æ³¨æ„ï¼Œåœ¨æ‰§è¡Œæ­¤è¯­å¥ä¹‹åï¼Œç¨‹åºä¸å†å…·æœ‰å¯¹æ‰€åˆ›å»ºçŸ©å½¢çš„å¼•ç”¨ï¼Œå› ä¸ºç¨‹åºä»æœªå°†è¯¥å¼•ç”¨å­˜å‚¨åœ¨ä»»ä½•ä½ç½®ã€‚å¯¹è±¡æœªè¢«å¼•ç”¨ï¼Œå…¶èµ„æºå¯ç”±Javaè™šæ‹Ÿæœºè‡ªç”±å›æ”¶ã€‚ è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•è¿˜å¯ä»¥ä½¿ç”¨å¯¹è±¡å¼•ç”¨æ¥è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ã€‚æ‚¨å¯ä»¥å°†æ–¹æ³•çš„ç®€å•åç§°é™„åŠ åˆ°å¯¹è±¡å¼•ç”¨ï¼Œä¸­é—´æœ‰ä¸€ä¸ªç‚¹è¿ç®—ç¬¦ï¼ˆ.ï¼‰ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥åœ¨æ‹¬å·å†…æä¾›è¯¥æ–¹æ³•çš„ä»»ä½•å‚æ•°ã€‚å¦‚æœæ–¹æ³•ä¸éœ€è¦ä»»ä½•å‚æ•°ï¼Œè¯·ä½¿ç”¨ç©ºæ‹¬å·ã€‚ 1objectReference.methodName(argumentList); or: 1objectReference.methodName(); Rectangleç±»æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼šgetAreaï¼ˆï¼‰è®¡ç®—çŸ©å½¢çš„é¢ç§¯ï¼Œmoveï¼ˆï¼‰æ›´æ”¹çŸ©å½¢çš„åŸç‚¹ã€‚ä¸‹é¢æ˜¯è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•çš„CreateObjectDemoä»£ç ï¼š 123System.out.println(&quot;Area of rectOne: &quot; + rectOne.getArea());...rectTwo.move(40, 72); ç¬¬ä¸€æ¡è¯­å¥è°ƒç”¨rectOneçš„getAreaï¼ˆï¼‰æ–¹æ³•å¹¶æ˜¾ç¤ºç»“æœã€‚ç¬¬äºŒè¡Œç§»åŠ¨rectTwoï¼Œå› ä¸ºmoveï¼ˆï¼‰æ–¹æ³•ä¸ºå¯¹è±¡çš„åŸç‚¹æŒ‡å®šäº†æ–°å€¼ã€‚xå’ŒåŸç‚¹yã€‚ ä¸å®ä¾‹å­—æ®µä¸€æ ·ï¼ŒobjectReferenceå¿…é¡»æ˜¯å¯¹å¯¹è±¡çš„å¼•ç”¨ã€‚å¯ä»¥ä½¿ç”¨å˜é‡åï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨è¿”å›å¯¹è±¡å¼•ç”¨çš„ä»»ä½•è¡¨è¾¾å¼ã€‚newè¿ç®—ç¬¦è¿”å›ä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨ä»newè¿”å›çš„å€¼æ¥è°ƒç”¨æ–°å¯¹è±¡çš„æ–¹æ³•ï¼š 1new Rectangle(100, 50).getArea() è¡¨è¾¾å¼new Rectangleï¼ˆ100ï¼Œ50ï¼‰è¿”å›ä¸€ä¸ªå¼•ç”¨çŸ©å½¢å¯¹è±¡çš„å¯¹è±¡å¼•ç”¨ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•è°ƒç”¨æ–°çŸ©å½¢çš„getAreaï¼ˆï¼‰æ–¹æ³•æ¥è®¡ç®—æ–°çŸ©å½¢çš„é¢ç§¯ã€‚ ä¸€äº›æ–¹æ³•ï¼Œå¦‚getAreaï¼ˆï¼‰ï¼Œè¿”å›ä¸€ä¸ªå€¼ã€‚å¯¹äºè¿”å›å€¼çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ–¹æ³•è°ƒç”¨ã€‚æ‚¨å¯ä»¥å°†è¿”å›å€¼åˆ†é…ç»™å˜é‡ï¼Œä½¿ç”¨å®ƒæ¥è¿›è¡Œå†³ç­–ï¼Œæˆ–æ§åˆ¶å¾ªç¯ã€‚æ­¤ä»£ç å°†getAreaï¼ˆï¼‰è¿”å›çš„å€¼åˆ†é…ç»™å˜é‡areaOfRectangleï¼š 1int areaOfRectangle = new Rectangle(100, 50).getArea(); è¯·è®°ä½ï¼Œå¯¹ç‰¹å®šå¯¹è±¡è°ƒç”¨æ–¹æ³•ä¸å‘è¯¥å¯¹è±¡å‘é€æ¶ˆæ¯ç›¸åŒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè°ƒç”¨getAreaï¼ˆï¼‰çš„å¯¹è±¡æ˜¯æ„é€ å‡½æ•°è¿”å›çš„çŸ©å½¢ã€‚ åƒåœ¾æ”¶é›†å™¨ä¸€äº›é¢å‘å¯¹è±¡çš„è¯­è¨€è¦æ±‚æ‚¨è·Ÿè¸ªåˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡ï¼Œå¹¶åœ¨ä¸å†éœ€è¦å®ƒä»¬æ—¶æ˜¾å¼é”€æ¯å®ƒä»¬ã€‚æ˜¾å¼åœ°ç®¡ç†å†…å­˜æ˜¯ä¹å‘³ä¸”å®¹æ˜“å‡ºé”™çš„ã€‚Javaå¹³å°å…è®¸æ‚¨åˆ›å»ºä»»æ„å¤šçš„å¯¹è±¡ï¼ˆå½“ç„¶ï¼Œå—é™äºæ‚¨çš„ç³»ç»Ÿæ‰€èƒ½å¤„ç†çš„å¯¹è±¡ï¼‰ï¼Œå¹¶ä¸”æ‚¨ä¸å¿…æ‹…å¿ƒç ´åå®ƒä»¬ã€‚å½“Javaè¿è¡Œæ—¶ç¯å¢ƒç¡®å®šä¸å†ä½¿ç”¨å¯¹è±¡æ—¶ï¼Œå°†åˆ é™¤è¿™äº›å¯¹è±¡ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåƒåœ¾æ”¶é›†ã€‚ å½“ä¸å†æœ‰å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œè¯¥å¯¹è±¡å¯ä»¥è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚å½“å˜é‡è¶…å‡ºèŒƒå›´æ—¶ï¼Œé€šå¸¸ä¼šåˆ é™¤å˜é‡ä¸­çš„å¼•ç”¨ã€‚æˆ–è€…ï¼Œå¯ä»¥é€šè¿‡å°†å˜é‡è®¾ç½®ä¸ºç‰¹æ®Šå€¼nullæ¥æ˜¾å¼åˆ é™¤å¯¹è±¡å¼•ç”¨ã€‚è¯·è®°ä½ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥å¯¹åŒä¸€å¯¹è±¡æœ‰å¤šä¸ªå¼•ç”¨ï¼›åœ¨å¯¹è±¡ç¬¦åˆåƒåœ¾æ”¶é›†æ¡ä»¶ä¹‹å‰ï¼Œå¿…é¡»åˆ é™¤å¯¹è¯¥å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨ã€‚ Javaè¿è¡Œæ—¶ç¯å¢ƒæœ‰ä¸€ä¸ªåƒåœ¾æ”¶é›†å™¨ï¼Œå®ƒå®šæœŸé‡Šæ”¾ä¸å†è¢«å¼•ç”¨çš„å¯¹è±¡æ‰€ä½¿ç”¨çš„å†…å­˜ã€‚åƒåœ¾æ”¶é›†å™¨åœ¨ç¡®å®šæ—¶é—´åˆé€‚æ—¶è‡ªåŠ¨æ‰§è¡Œå…¶ä»»åŠ¡ã€‚ ç±»çš„æ›´å¤šæ“ä½œä»æ–¹æ³•è¿”å›å€¼æ–¹æ³•è¿”å›è°ƒç”¨å®ƒçš„ä»£ç  å®Œæˆæ–¹æ³•ä¸­çš„æ‰€æœ‰è¯­å¥ï¼Œ åˆ°è¾¾è¿”å›è¯­å¥ï¼Œ æˆ–æŠ›å‡ºå¼‚å¸¸ï¼ˆç¨åä»‹ç»ï¼‰ï¼Œ ä»¥å…ˆå‘ç”Ÿè€…ä¸ºå‡†ã€‚ åœ¨æ–¹æ³•å£°æ˜ä¸­å£°æ˜æ–¹æ³•çš„è¿”å›ç±»å‹ã€‚åœ¨æ–¹æ³•ä½“ä¸­ï¼Œä½¿ç”¨returnè¯­å¥è¿”å›å€¼ã€‚ ä»»ä½•å£°æ˜ä¸ºvoidçš„æ–¹æ³•éƒ½ä¸ä¼šè¿”å›å€¼ã€‚å®ƒä¸éœ€è¦åŒ…å«returnè¯­å¥ï¼Œä½†å¯ä»¥è¿™æ ·åšã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨returnè¯­å¥ä»æ§åˆ¶æµå—ä¸­åˆ†æ”¯å‡ºæ¥å¹¶é€€å‡ºè¯¥æ–¹æ³•ï¼Œå…¶ç”¨æ³•å¦‚ä¸‹ï¼š 1return; å¦‚æœæ‚¨è¯•å›¾ä»å£°æ˜ä¸ºvoidçš„æ–¹æ³•è¿”å›å€¼ï¼Œå°†å¾—åˆ°ç¼–è¯‘å™¨é”™è¯¯ã€‚ ä»»ä½•æœªå£°æ˜ä¸ºvoidçš„æ–¹æ³•éƒ½å¿…é¡»åŒ…å«å…·æœ‰ç›¸åº”è¿”å›å€¼çš„returnè¯­å¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1return returnValue; è¿”å›å€¼çš„æ•°æ®ç±»å‹å¿…é¡»ä¸æ–¹æ³•å£°æ˜çš„è¿”å›ç±»å‹åŒ¹é…ï¼›ä¸èƒ½ä»å£°æ˜ä¸ºè¿”å›å¸ƒå°”å€¼çš„æ–¹æ³•è¿”å›æ•´æ•°å€¼ã€‚ Rectangle Rectangelç±»ä¸­çš„getArea()æ–¹æ³•è¿”å›ä¸€ä¸ªæ•´æ•°ï¼š 1234// a method for computing the area of the rectanglepublic int getArea() &#123; return width * height;&#125; æ­¤æ–¹æ³•è¿”å›è¡¨è¾¾å¼width*heightè®¡ç®—çš„æ•´æ•°ã€‚ getAreaæ–¹æ³•è¿”å›ä¸€ä¸ªåŸºå…ƒç±»å‹ã€‚æ–¹æ³•ä¹Ÿå¯ä»¥è¿”å›å¼•ç”¨ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæ“çºµBicycleå¯¹è±¡çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯èƒ½æœ‰è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼š 123456789public Bicycle seeWhosFastest(Bicycle myBike, Bicycle yourBike, Environment env) &#123; Bicycle fastest; // code to calculate which bike is // faster, given each bike&#x27;s gear // and cadence and given the // environment (terrain and wind) return fastest;&#125; è¿”å›ç±»æˆ–æ¥å£å¦‚æœè¿™ä¸€éƒ¨åˆ†è®©æ‚¨æ„Ÿåˆ°å›°æƒ‘ï¼Œè¯·è·³è¿‡å®ƒï¼Œåœ¨å®Œæˆæ¥å£å’Œç»§æ‰¿çš„è¯¾ç¨‹åè¿”å›ã€‚å½“æ–¹æ³•ä½¿ç”¨ç±»åä½œä¸ºå…¶è¿”å›ç±»å‹æ—¶ï¼Œå¦‚whosFastestæ‰€åšçš„é‚£æ ·ï¼Œè¿”å›å¯¹è±¡ç±»å‹çš„ç±»å¿…é¡»æ˜¯è¿”å›ç±»å‹çš„å­ç±»æˆ–ç¡®åˆ‡çš„ç±»ã€‚å‡è®¾æ‚¨æœ‰ä¸€ä¸ªç±»å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­ImaginaryNumberæ˜¯java.lang.Numberçš„å­ç±»ï¼Œè€Œåè€…åˆæ˜¯Objectçš„å­ç±»ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ç°åœ¨å‡è®¾æ‚¨æœ‰ä¸€ä¸ªå£°æ˜ä¸ºè¿”å›Numberçš„æ–¹æ³•ï¼š 123public Number returnANumber() &#123; ...&#125; returnANumberæ–¹æ³•å¯ä»¥è¿”å›ImaginaryNumberï¼Œä½†ä¸èƒ½è¿”å›Objectã€‚ImaginaryNumberæ˜¯Numberï¼Œå› ä¸ºå®ƒæ˜¯Numberçš„å­ç±»ã€‚ç„¶è€Œï¼ŒObjectä¸ä¸€å®šæ˜¯Numberï¼Œå®ƒå¯ä»¥æ˜¯Stringæˆ–å…¶ä»–ç±»å‹ã€‚ æ‚¨å¯ä»¥é‡å†™ä¸€ä¸ªæ–¹æ³•å¹¶å°†å…¶å®šä¹‰ä¸ºè¿”å›åŸå§‹æ–¹æ³•çš„å­ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123public ImaginaryNumber returnANumber() &#123; ...&#125; è¿™ç§ç§°ä¸ºåå˜è¿”å›ç±»å‹çš„æŠ€æœ¯æ„å‘³ç€å…è®¸è¿”å›ç±»å‹ä¸å­ç±»çš„æ–¹å‘ç›¸åŒã€‚ &#x3D;&#x3D;æ³¨æ„ï¼šæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨æ¥å£åç§°ä½œä¸ºè¿”å›ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å›çš„å¯¹è±¡å¿…é¡»å®ç°æŒ‡å®šçš„æ¥å£ã€‚&#x3D;&#x3D; ä½¿ç”¨thiså…³é”®å­—åœ¨å®ä¾‹æ–¹æ³•æˆ–æ„é€ å‡½æ•°ä¸­ï¼Œè¿™æ˜¯å¯¹å½“å‰å¯¹è±¡çš„å¼•ç”¨ï¼Œå³è°ƒç”¨å…¶æ–¹æ³•æˆ–æ„é€ å‡½æ•°çš„å¯¹è±¡ã€‚é€šè¿‡ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå¯ä»¥ä»å®ä¾‹æ–¹æ³•æˆ–æ„é€ å‡½æ•°ä¸­å¼•ç”¨å½“å‰å¯¹è±¡çš„ä»»ä½•æˆå‘˜ã€‚ ä½¿ç”¨thiså­—æ®µä½¿ç”¨thiså…³é”®å­—çš„æœ€å¸¸è§åŸå› æ˜¯å› ä¸ºå­—æ®µè¢«æ–¹æ³•æˆ–æ„é€ å‡½æ•°å‚æ•°é®è”½ã€‚ ä¾‹å¦‚ï¼ŒPointç±»æ˜¯è¿™æ ·ç¼–å†™çš„ 12345678910public class Point &#123; public int x = 0; public int y = 0; //constructor public Point(int a, int b) &#123; x = a; y = b; &#125;&#125; ä½†å®ƒå¯èƒ½æ˜¯è¿™æ ·å†™çš„ï¼š 12345678910public class Point &#123; public int x = 0; public int y = 0; //constructor public Point(int x, int y) &#123; this.x = x; this.y = y; &#125;&#125; æ„é€ å‡½æ•°çš„æ¯ä¸ªå‚æ•°éƒ½ä¼šéšè—å¯¹è±¡çš„ä¸€ä¸ªå­—æ®µâ€”â€”åœ¨æ„é€ å‡½æ•°xä¸­æ˜¯æ„é€ å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°çš„æœ¬åœ°å‰¯æœ¬ã€‚è¦å¼•ç”¨ç‚¹å­—æ®µxï¼Œæ„é€ å‡½æ•°å¿…é¡»ä½¿ç”¨this.xã€‚ å°†thisä¸æ„é€ å‡½æ•°ä¸€èµ·ä½¿ç”¨åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨thiså…³é”®å­—è°ƒç”¨åŒä¸€ç±»ä¸­çš„å¦ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚è¿™æ ·åšç§°ä¸ºæ˜¾å¼æ„é€ å‡½æ•°è°ƒç”¨ã€‚è¿™æ˜¯å¦ä¸€ä¸ªRectangleç±»ï¼Œå…¶å®ç°ä¸Objectséƒ¨åˆ†ä¸­çš„ä¸åŒã€‚ 123456789101112131415161718public class Rectangle &#123; private int x, y; private int width, height; public Rectangle() &#123; this(0, 0, 1, 1); &#125; public Rectangle(int width, int height) &#123; this(0, 0, width, height); &#125; public Rectangle(int x, int y, int width, int height) &#123; this.x = x; this.y = y; this.width = width; this.height = height; &#125; ...&#125; æ­¤ç±»åŒ…å«ä¸€ç»„æ„é€ å‡½æ•°ã€‚æ¯ä¸ªæ„é€ å‡½æ•°åˆå§‹åŒ–çŸ©å½¢çš„ä¸€äº›æˆ–æ‰€æœ‰æˆå‘˜å˜é‡ã€‚æ„é€ å‡½æ•°ä¸ºå‚æ•°æœªæä¾›åˆå§‹å€¼çš„ä»»ä½•æˆå‘˜å˜é‡æä¾›é»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼Œæ— å‚æ•°æ„é€ å‡½æ•°åœ¨åæ ‡0,0å¤„åˆ›å»ºä¸€ä¸ª1x1çŸ©å½¢ã€‚åŒå‚æ•°æ„é€ å‡½æ•°è°ƒç”¨å››å‚æ•°æ„é€ å‡½æ•°ï¼Œä¼ é€’å®½åº¦å’Œé«˜åº¦ï¼Œä½†å§‹ç»ˆä½¿ç”¨0,0åæ ‡ã€‚å¦‚å‰æ‰€è¿°ï¼Œç¼–è¯‘å™¨æ ¹æ®å‚æ•°çš„æ•°é‡å’Œç±»å‹ç¡®å®šè°ƒç”¨å“ªä¸ªæ„é€ å‡½æ•°ã€‚ å¦‚æœå­˜åœ¨ï¼Œå¯¹å¦ä¸€ä¸ªæ„é€ å‡½æ•°çš„è°ƒç”¨å¿…é¡»æ˜¯æ„é€ å‡½æ•°ä¸­çš„ç¬¬ä¸€è¡Œã€‚ æ§åˆ¶å¯¹ç±»æˆå‘˜çš„è®¿é—®è®¿é—®çº§åˆ«ä¿®é¥°ç¬¦ç¡®å®šå…¶ä»–ç±»æ˜¯å¦å¯ä»¥ä½¿ç”¨ç‰¹å®šå­—æ®µæˆ–è°ƒç”¨ç‰¹å®šæ–¹æ³•ã€‚è®¿é—®æ§åˆ¶æœ‰ä¸¤ä¸ªçº§åˆ«ï¼š åœ¨é¡¶å±‚publicæˆ–package privateï¼ˆæ²¡æœ‰æ˜¾å¼ä¿®é¥°ç¬¦ï¼‰ã€‚ åœ¨æˆå‘˜çº§publicã€privateã€protectedæˆ–package privateï¼ˆæ— æ˜¾å¼ä¿®é¥°ç¬¦ï¼‰ã€‚ ç±»å¯ä»¥ç”¨ä¿®é¥°ç¬¦publicå£°æ˜ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç±»éƒ½å¯ä»¥çœ‹åˆ°è¯¥ç±»ã€‚å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰ä¿®é¥°ç¬¦ï¼ˆé»˜è®¤å€¼ï¼Œä¹Ÿç§°ä¸ºpackageprivateï¼‰ï¼Œåˆ™å®ƒåªèƒ½åœ¨å…¶è‡ªå·±çš„åŒ…ä¸­å¯è§ï¼ˆåŒ…æ˜¯ç›¸å…³ç±»çš„å‘½åç»„ï¼Œæ‚¨å°†åœ¨åé¢çš„è¯¾ç¨‹ä¸­äº†è§£å®ƒä»¬ï¼‰ã€‚ åœ¨æˆå‘˜çº§åˆ«ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨publicä¿®é¥°ç¬¦æˆ–noä¿®é¥°ç¬¦ï¼Œå°±åƒé¡¶çº§ç±»ä¸€æ ·ï¼Œå¹¶å…·æœ‰ç›¸åŒçš„å«ä¹‰ã€‚å¯¹äºæˆå‘˜ï¼Œè¿˜æœ‰ä¸¤ä¸ªé¢å¤–çš„è®¿é—®ä¿®é¥°ç¬¦ï¼šprivateå’Œprotectedã€‚ç§æœ‰ä¿®é¥°ç¬¦æŒ‡å®šæˆå‘˜åªèƒ½åœ¨å…¶è‡ªå·±çš„ç±»ä¸­è®¿é—®ã€‚protectedä¿®é¥°ç¬¦æŒ‡å®šæˆå‘˜åªèƒ½åœ¨å…¶è‡ªå·±çš„åŒ…ä¸­è®¿é—®ï¼ˆä¸åŒ…privateä¸€æ ·ï¼‰ï¼Œæ­¤å¤–ï¼Œè¿˜å¯ä»¥ç”±å¦ä¸€ä¸ªåŒ…ä¸­å…¶ç±»çš„å­ç±»è®¿é—®ã€‚ ä¸‹è¡¨æ˜¾ç¤ºäº†æ¯ä¸ªä¿®é¥°ç¬¦å…è®¸çš„æˆå‘˜è®¿é—®æƒé™ã€‚ Modifier Class Package Subclass World public Y Y Y Y protected Y Y Y N no modifier Y Y N N private Y N N N ç¬¬ä¸€ä¸ªæ•°æ®åˆ—æŒ‡ç¤ºç±»æœ¬èº«æ˜¯å¦æœ‰æƒè®¿é—®ç”±è®¿é—®çº§åˆ«å®šä¹‰çš„æˆå‘˜ã€‚å¦‚æ‚¨æ‰€è§ï¼Œç±»å§‹ç»ˆå¯ä»¥è®¿é—®è‡ªå·±çš„æˆå‘˜ã€‚ç¬¬äºŒåˆ—æŒ‡ç¤ºä¸è¯¥ç±»åœ¨åŒä¸€åŒ…ä¸­çš„ç±»ï¼ˆæ— è®ºå…¶çˆ¶çº§å¦‚ä½•ï¼‰æ˜¯å¦æœ‰æƒè®¿é—®è¯¥æˆå‘˜ã€‚ç¬¬ä¸‰åˆ—æŒ‡ç¤ºåœ¨æ­¤åŒ…å¤–éƒ¨å£°æ˜çš„ç±»çš„å­ç±»æ˜¯å¦å¯ä»¥è®¿é—®è¯¥æˆå‘˜ã€‚ç¬¬å››åˆ—æŒ‡ç¤ºæ˜¯å¦æ‰€æœ‰ç±»éƒ½å¯ä»¥è®¿é—®è¯¥æˆå‘˜ã€‚ è®¿é—®çº§åˆ«ä»¥ä¸¤ç§æ–¹å¼å½±å“æ‚¨ã€‚é¦–å…ˆï¼Œå½“æ‚¨ä½¿ç”¨æ¥è‡ªå…¶ä»–æºçš„ç±»ï¼ˆå¦‚Javaå¹³å°ä¸­çš„ç±»ï¼‰æ—¶ï¼Œè®¿é—®çº§åˆ«å†³å®šæ‚¨è‡ªå·±çš„ç±»å¯ä»¥ä½¿ç”¨è¿™äº›ç±»çš„å“ªäº›æˆå‘˜ã€‚ç¬¬äºŒï¼Œåœ¨ç¼–å†™ç±»æ—¶ï¼Œéœ€è¦ç¡®å®šç±»ä¸­æ¯ä¸ªæˆå‘˜å˜é‡å’Œæ¯ä¸ªæ–¹æ³•åº”è¯¥å…·æœ‰çš„è®¿é—®çº§åˆ«ã€‚ è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ç»„ç±»ï¼Œçœ‹çœ‹è®¿é—®çº§åˆ«å¦‚ä½•å½±å“å¯è§æ€§ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†æœ¬ç¤ºä¾‹ä¸­çš„å››ä¸ªç±»ä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚ ä¸‹è¡¨æ˜¾ç¤ºäº†Alphaç±»çš„æˆå‘˜å¯¹äºå¯ä»¥åº”ç”¨äºå®ƒä»¬çš„æ¯ä¸ªè®¿é—®ä¿®é¥°ç¬¦çš„å¯è§ä½ç½®ã€‚ Modifier Alpha Beta Alphasub Gamma public Y Y Y Y protected Y Y Y N no modifier Y Y N N private Y N N N é€‰æ‹©è®¿é—®çº§åˆ«çš„æç¤ºï¼š å¦‚æœå…¶ä»–ç¨‹åºå‘˜ä½¿ç”¨æ‚¨çš„ç±»ï¼Œæ‚¨å¸Œæœ›ç¡®ä¿ä¸ä¼šå‘ç”Ÿè¯¯ç”¨é”™è¯¯ã€‚è®¿é—®çº§åˆ«å¯ä»¥å¸®åŠ©æ‚¨åšåˆ°è¿™ä¸€ç‚¹ã€‚ ä½¿ç”¨å¯¹ç‰¹å®šæˆå‘˜æœ‰æ„ä¹‰çš„æœ€ä¸¥æ ¼çš„è®¿é—®çº§åˆ«ã€‚é™¤éä½ æœ‰å……åˆ†çš„ç†ç”±ä¸è¿™æ ·åšï¼Œå¦åˆ™ä½¿ç”¨éšç§ã€‚ é¿å…é™¤å¸¸é‡å¤–çš„å…¬å…±å­—æ®µã€‚ï¼ˆæœ¬æ•™ç¨‹ä¸­çš„è®¸å¤šç¤ºä¾‹éƒ½ä½¿ç”¨å…¬å…±å­—æ®µã€‚è¿™å¯èƒ½æœ‰åŠ©äºç®€æ˜åœ°è¯´æ˜æŸäº›è¦ç‚¹ï¼Œä½†ä¸å»ºè®®ç”¨äºç”Ÿäº§ä»£ç ã€‚ï¼‰å…¬å…±å­—æ®µå¾€å¾€ä¼šå°†æ‚¨é“¾æ¥åˆ°ç‰¹å®šçš„å®ç°ï¼Œå¹¶é™åˆ¶æ‚¨æ›´æ”¹ä»£ç çš„çµæ´»æ€§ã€‚ äº†è§£ç±»æˆå‘˜åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä½¿ç”¨staticå…³é”®å­—åˆ›å»ºå±äºç±»è€Œä¸æ˜¯ç±»å®ä¾‹çš„å­—æ®µå’Œæ–¹æ³•ã€‚ ç±»å˜é‡å½“ä»åŒä¸€ä¸ªç±»è“å›¾åˆ›å»ºå¤šä¸ªå¯¹è±¡æ—¶ï¼Œå®ƒä»¬éƒ½æœ‰å„è‡ªä¸åŒçš„å®ä¾‹å˜é‡å‰¯æœ¬ã€‚å¯¹äºBicycleç±»ï¼Œå®ä¾‹å˜é‡æ˜¯èŠ‚å¥ã€æ¡£ä½å’Œé€Ÿåº¦ã€‚æ¯ä¸ªBicycleå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„è¿™äº›å˜é‡å€¼ï¼Œå­˜å‚¨åœ¨ä¸åŒçš„å†…å­˜ä½ç½®ã€‚ æœ‰æ—¶ï¼Œæ‚¨å¸Œæœ›æ‰€æœ‰å¯¹è±¡éƒ½æœ‰é€šç”¨çš„å˜é‡ã€‚è¿™æ˜¯é€šè¿‡é™æ€ä¿®é¥°ç¬¦å®ç°çš„ã€‚å£°æ˜ä¸­åŒ…å«é™æ€ä¿®é¥°ç¬¦çš„å­—æ®µç§°ä¸ºé™æ€å­—æ®µæˆ–ç±»å˜é‡ã€‚å®ƒä»¬ä¸ç±»å…³è”ï¼Œè€Œä¸æ˜¯ä¸ä»»ä½•å¯¹è±¡å…³è”ã€‚ç±»çš„æ¯ä¸ªå®ä¾‹å…±äº«ä¸€ä¸ªç±»å˜é‡ï¼Œè¯¥å˜é‡ä½äºå†…å­˜ä¸­çš„ä¸€ä¸ªå›ºå®šä½ç½®ã€‚ä»»ä½•å¯¹è±¡éƒ½å¯ä»¥æ›´æ”¹ç±»å˜é‡çš„å€¼ï¼Œä½†ä¹Ÿå¯ä»¥åœ¨ä¸åˆ›å»ºç±»å®ä¾‹çš„æƒ…å†µä¸‹æ“ä½œç±»å˜é‡ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨è¦åˆ›å»ºå¤šä¸ªBicycleå¯¹è±¡ï¼Œå¹¶ä¸ºæ¯ä¸ªå¯¹è±¡æŒ‡å®šä¸€ä¸ªåºåˆ—å·ï¼Œç¬¬ä¸€ä¸ªå¯¹è±¡ä»1å¼€å§‹ã€‚æ­¤IDå·å¯¹äºæ¯ä¸ªå¯¹è±¡éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå› æ­¤æ˜¯ä¸€ä¸ªå®ä¾‹å˜é‡ã€‚åŒæ—¶ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªå­—æ®µæ¥è·Ÿè¸ªå·²åˆ›å»ºçš„Bicycleå¯¹è±¡çš„æ•°é‡ï¼Œä»¥ä¾¿çŸ¥é“è¦ä¸ºä¸‹ä¸€ä¸ªå¯¹è±¡æŒ‡å®šä»€ä¹ˆIDã€‚è¿™æ ·çš„å­—æ®µä¸ä»»ä½•å•ä¸ªå¯¹è±¡æ— å…³ï¼Œè€Œæ˜¯ä¸æ•´ä¸ªç±»æœ‰å…³ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªç±»å˜é‡numberOfBicyclesï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314public class Bicycle &#123; private int cadence; private int gear; private int speed; // add an instance variable for the object ID private int id; // add a class variable for the // number of Bicycle objects instantiated private static int numberOfBicycles = 0; ...&#125; ç±»å˜é‡ç”±ç±»åæœ¬èº«å¼•ç”¨ï¼Œå¦‚ 1Bicycle.numberOfBicycles è¿™è¡¨æ˜å®ƒä»¬æ˜¯ç±»å˜é‡ã€‚ &#x3D;&#x3D;æ³¨æ„ï¼šæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨åƒmyBikeè¿™æ ·çš„å¯¹è±¡å¼•ç”¨æ¥å¼•ç”¨é™æ€å­—æ®µã€‚&#x3D;&#x3D; &#x3D;&#x3D;numberOfBicyclesï¼Œä½†è¿™æ˜¯ä¸é¼“åŠ±çš„ï¼Œå› ä¸ºå®ƒä¸æ¸…æ¥šå®ƒä»¬æ˜¯ç±»å˜é‡ã€‚&#x3D;&#x3D; æ‚¨å¯ä»¥ä½¿ç”¨Bicycleæ„é€ å‡½æ•°è®¾ç½®idå®ä¾‹å˜é‡å¹¶é€’å¢numberOfBicyclesç±»å˜é‡ï¼š 123456789101112131415161718192021222324public class Bicycle &#123; private int cadence; private int gear; private int speed; private int id; private static int numberOfBicycles = 0; public Bicycle(int startCadence, int startSpeed, int startGear)&#123; gear = startGear; cadence = startCadence; speed = startSpeed; // increment number of Bicycles // and assign ID number id = ++numberOfBicycles; &#125; // new method to return the ID instance variable public int getID() &#123; return id; &#125; ...&#125; ç±»æ–¹æ³•Javaç¼–ç¨‹è¯­è¨€æ”¯æŒé™æ€æ–¹æ³•å’Œé™æ€å˜é‡ã€‚é™æ€æ–¹æ³•ï¼ˆåœ¨å…¶å£°æ˜ä¸­æœ‰é™æ€ä¿®é¥°ç¬¦ï¼‰åº”ä½¿ç”¨ç±»åè°ƒç”¨ï¼Œè€Œæ— éœ€åˆ›å»ºç±»çš„å®ä¾‹ï¼Œå¦‚ 1ClassName.methodName(args) &#x3D;&#x3D;æ³¨æ„ï¼šè¿˜å¯ä»¥ä½¿ç”¨å¯¹è±¡å¼•ç”¨å¼•ç”¨é™æ€æ–¹æ³•ï¼Œå¦‚&#x3D;&#x3D; &#x3D;&#x3D;instanceName.methodName(args)&#x3D;&#x3D; &#x3D;&#x3D;ä½†è¿™æ˜¯ä¸é¼“åŠ±çš„ï¼Œå› ä¸ºå®ƒæ²¡æœ‰æ˜ç¡®è¯´æ˜å®ƒä»¬æ˜¯ç±»æ–¹æ³•&#x3D;&#x3D; é™æ€æ–¹æ³•çš„ä¸€ä¸ªå¸¸è§ç”¨æ³•æ˜¯è®¿é—®é™æ€å­—æ®µã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å‘Bicycleç±»æ·»åŠ ä¸€ä¸ªé™æ€æ–¹æ³•æ¥è®¿é—®numberOfBicyclesé™æ€å­—æ®µï¼š 123public static int getNumberOfBicycles() &#123; return numberOfBicycles;&#125; å¹¶éæ‰€æœ‰å®ä¾‹å’Œç±»å˜é‡åŠæ–¹æ³•çš„ç»„åˆéƒ½æ˜¯å…è®¸çš„ï¼š å®ä¾‹æ–¹æ³•å¯ä»¥ç›´æ¥è®¿é—®å®ä¾‹å˜é‡å’Œå®ä¾‹æ–¹æ³•ã€‚ å®ä¾‹æ–¹æ³•å¯ä»¥ç›´æ¥è®¿é—®ç±»å˜é‡å’Œç±»æ–¹æ³•ã€‚ ç±»æ–¹æ³•å¯ä»¥ç›´æ¥è®¿é—®ç±»å˜é‡å’Œç±»æ–¹æ³•ã€‚ ç±»æ–¹æ³•ä¸èƒ½ç›´æ¥è®¿é—®å®ä¾‹å˜é‡æˆ–å®ä¾‹æ–¹æ³•ï¼Œå®ƒä»¬å¿…é¡»ä½¿ç”¨å¯¹è±¡å¼•ç”¨ã€‚æ­¤å¤–ï¼Œç±»æ–¹æ³•ä¸èƒ½ä½¿ç”¨thiså…³é”®å­—ï¼Œå› ä¸ºæ²¡æœ‰å¯å¼•ç”¨çš„å®ä¾‹ã€‚ å¸¸é‡é™æ€ä¿®é¥°ç¬¦ä¸æœ€ç»ˆä¿®é¥°ç¬¦ç»“åˆä½¿ç”¨ï¼Œä¹Ÿç”¨äºå®šä¹‰å¸¸é‡ã€‚æœ€åä¸€ä¸ªä¿®é¥°ç¬¦è¡¨ç¤ºè¯¥å­—æ®µçš„å€¼ä¸èƒ½æ›´æ”¹ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„å˜é‡å£°æ˜å®šä¹‰äº†ä¸€ä¸ªåä¸ºPIçš„å¸¸æ•°ï¼Œå…¶å€¼æ˜¯PIçš„è¿‘ä¼¼å€¼ï¼ˆåœ†çš„å‘¨é•¿ä¸å…¶ç›´å¾„çš„æ¯”å€¼ï¼‰ï¼š 1static final double PI = 3.141592653589793; æ— æ³•é‡æ–°åˆ†é…ä»¥è¿™ç§æ–¹å¼å®šä¹‰çš„å¸¸é‡ï¼Œå¦‚æœç¨‹åºå°è¯•è¿™æ ·åšï¼Œåˆ™ä¼šå‡ºç°ç¼–è¯‘æ—¶é”™è¯¯ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œå¸¸é‡å€¼çš„åç§°ç”¨å¤§å†™å­—æ¯æ‹¼å†™ã€‚å¦‚æœåç§°ç”±å¤šä¸ªå•è¯ç»„æˆï¼Œåˆ™è¿™äº›å•è¯ç”¨ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰åˆ†éš”ã€‚ &#x3D;&#x3D;æ³¨æ„ï¼šå¦‚æœåŸºå…ƒç±»å‹æˆ–å­—ç¬¦ä¸²è¢«å®šä¹‰ä¸ºå¸¸é‡ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘æ—¶å·²çŸ¥å…¶å€¼ï¼Œç¼–è¯‘å™¨ä¼šç”¨å…¶å€¼æ›¿æ¢ä»£ç ä¸­çš„æ‰€æœ‰å¸¸é‡åç§°ã€‚è¿™ç§°ä¸ºç¼–è¯‘æ—¶å¸¸æ•°ã€‚å¦‚æœå¤–éƒ¨ä¸–ç•Œä¸­å¸¸é‡çš„å€¼å‘ç”Ÿå˜åŒ–ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœç«‹æ³•è§„å®špiå®é™…ä¸Šåº”è¯¥æ˜¯3.975ï¼‰ï¼Œåˆ™éœ€è¦é‡æ–°ç¼–è¯‘ä½¿ç”¨è¯¥å¸¸é‡çš„ä»»ä½•ç±»ä»¥è·å¾—å½“å‰å€¼ã€‚&#x3D;&#x3D; è‡ªè¡Œè½¦class åœ¨æœ¬èŠ‚ä¸­è¿›è¡Œäº†æ‰€æœ‰ä¿®æ”¹åï¼ŒBicycleç±»ç°åœ¨æ˜¯ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657public class Bicycle &#123; private int cadence; private int gear; private int speed; private int id; private static int numberOfBicycles = 0; public Bicycle(int startCadence, int startSpeed, int startGear) &#123; gear = startGear; cadence = startCadence; speed = startSpeed; id = ++numberOfBicycles; &#125; public int getID() &#123; return id; &#125; public static int getNumberOfBicycles() &#123; return numberOfBicycles; &#125; public int getCadence() &#123; return cadence; &#125; public void setCadence(int newValue) &#123; cadence = newValue; &#125; public int getGear()&#123; return gear; &#125; public void setGear(int newValue) &#123; gear = newValue; &#125; public int getSpeed() &#123; return speed; &#125; public void applyBrake(int decrement) &#123; speed -= decrement; &#125; public void speedUp(int increment) &#123; speed += increment; &#125;&#125; åˆå§‹åŒ–å­—æ®µæ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œæ‚¨é€šå¸¸å¯ä»¥åœ¨å­—æ®µå£°æ˜ä¸­ä¸ºå…¶æä¾›åˆå§‹å€¼ï¼š 12345678public class BedAndBreakfast &#123; // initialize to 10 public static int capacity = 10; // initialize to false private boolean full = false;&#125; å½“åˆå§‹åŒ–å€¼å¯ç”¨å¹¶ä¸”å¯ä»¥å°†åˆå§‹åŒ–æ”¾åœ¨ä¸€è¡Œä¸Šæ—¶ï¼Œè¿™å¾ˆå¥½ã€‚ç„¶è€Œï¼Œè¿™ç§å½¢å¼çš„åˆå§‹åŒ–ç”±äºå…¶ç®€å•æ€§è€Œå…·æœ‰å±€é™æ€§ã€‚å¦‚æœåˆå§‹åŒ–éœ€è¦ä¸€äº›é€»è¾‘ï¼ˆä¾‹å¦‚é”™è¯¯å¤„ç†æˆ–ç”¨äºå¡«å……å¤æ‚æ•°ç»„çš„forå¾ªç¯ï¼‰ï¼Œç®€å•çš„ä½œä¸šæ˜¯ä¸å¤Ÿçš„ã€‚å®ä¾‹å˜é‡å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œå…¶ä¸­å¯ä»¥ä½¿ç”¨é”™è¯¯å¤„ç†æˆ–å…¶ä»–é€»è¾‘ã€‚ä¸ºäº†ä¸ºç±»å˜é‡æä¾›ç›¸åŒçš„åŠŸèƒ½ï¼ŒJavaç¼–ç¨‹è¯­è¨€åŒ…æ‹¬é™æ€åˆå§‹åŒ–å—ã€‚ &#x3D;&#x3D;æ³¨æ„ï¼šæ²¡æœ‰å¿…è¦åœ¨ç±»å®šä¹‰çš„å¼€å¤´å£°æ˜å­—æ®µï¼Œå°½ç®¡è¿™æ˜¯æœ€å¸¸è§çš„åšæ³•ã€‚åªéœ€è¦åœ¨ä½¿ç”¨å®ƒä»¬ä¹‹å‰å£°æ˜å’Œåˆå§‹åŒ–å®ƒä»¬ã€‚&#x3D;&#x3D; é™æ€åˆå§‹åŒ–å—é™æ€åˆå§‹åŒ–å—æ˜¯ä¸€ä¸ªæ™®é€šçš„ä»£ç å—ï¼Œç”¨å¤§æ‹¬å·ï½›ï½æ‹¬èµ·æ¥ï¼Œå‰é¢æ˜¯staticå…³é”®å­—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š 123static &#123; // whatever code is needed for initialization goes here&#125; ä¸€ä¸ªç±»å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„é™æ€åˆå§‹åŒ–å—ï¼Œå®ƒä»¬å¯ä»¥å‡ºç°åœ¨ç±»ä¸»ä½“ä¸­çš„ä»»ä½•ä½ç½®ã€‚è¿è¡Œæ—¶ç³»ç»Ÿä¿è¯æŒ‰ç…§é™æ€åˆå§‹åŒ–å—åœ¨æºä»£ç ä¸­å‡ºç°çš„é¡ºåºè°ƒç”¨å®ƒä»¬ã€‚ æœ‰ä¸€ç§æ›¿ä»£é™æ€å—çš„æ–¹æ³•â€”â€”æ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªç§æœ‰é™æ€æ–¹æ³•ï¼š 12345678class Whatever &#123; public static varType myVar = initializeClassVariable(); private static varType initializeClassVariable() &#123; // initialization code goes here &#125;&#125; ç§æœ‰é™æ€æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼Œå¦‚æœéœ€è¦é‡æ–°åˆå§‹åŒ–ç±»å˜é‡ï¼Œåˆ™å¯ä»¥ç¨åé‡ç”¨å®ƒä»¬ã€‚ åˆå§‹åŒ–å®ä¾‹æˆå‘˜é€šå¸¸ï¼Œæ‚¨ä¼šå°†ä»£ç æ”¾åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–å®ä¾‹å˜é‡ã€‚ä½¿ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–å®ä¾‹å˜é‡æœ‰ä¸¤ç§é€‰æ‹©ï¼šåˆå§‹åŒ–å—å’Œfinalæ–¹æ³•ã€‚ å®ä¾‹å˜é‡çš„åˆå§‹åŒ–å™¨å—çœ‹èµ·æ¥ä¸é™æ€åˆå§‹åŒ–å™¨å—ç±»ä¼¼ï¼Œä½†æ²¡æœ‰staticå…³é”®å­—ï¼š 123&#123; // åˆå§‹åŒ–æ‰€éœ€çš„ä»»ä½•ä»£ç éƒ½åœ¨è¿™é‡Œ&#125; Javaç¼–è¯‘å™¨å°†åˆå§‹åŒ–å™¨å—å¤åˆ¶åˆ°æ¯ä¸ªæ„é€ å‡½æ•°ä¸­ã€‚å› æ­¤ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥ç”¨äºåœ¨å¤šä¸ªæ„é€ å‡½æ•°ä¹‹é—´å…±äº«ä»£ç å—ã€‚ finalæ–¹æ³•ä¸èƒ½åœ¨å­ç±»ä¸­é‡å†™ã€‚è¿™åœ¨å…³äºæ¥å£å’Œç»§æ‰¿çš„è¯¾ç¨‹ä¸­è¿›è¡Œäº†è®¨è®ºã€‚ä¸‹é¢æ˜¯ä½¿ç”¨finalæ–¹æ³•åˆå§‹åŒ–å®ä¾‹å˜é‡çš„ç¤ºä¾‹ï¼š 12345678class Whatever &#123; private varType myVar = initializeInstanceVariable(); protected final varType initializeInstanceVariable() &#123; // initialization code goes here &#125;&#125; å¦‚æœå­ç±»å¯èƒ½å¸Œæœ›é‡ç”¨åˆå§‹åŒ–æ–¹æ³•ï¼Œè¿™ä¸€ç‚¹å°¤å…¶æœ‰ç”¨ã€‚è¯¥æ–¹æ³•æ˜¯finalçš„ï¼Œå› ä¸ºåœ¨å®ä¾‹åˆå§‹åŒ–æœŸé—´è°ƒç”¨éfinalæ–¹æ³•å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚ åˆ›å»ºå’Œä½¿ç”¨ç±»å’Œå¯¹è±¡æ¦‚è¿°ç±»å£°æ˜å‘½åç±»ï¼Œå¹¶å°†ç±»ä½“æ‹¬åœ¨å¤§æ‹¬å·ä¹‹é—´ã€‚ç±»åå‰é¢å¯ä»¥æœ‰ä¿®é¥°ç¬¦ã€‚ç±»ä¸»ä½“åŒ…å«ç±»çš„å­—æ®µã€æ–¹æ³•å’Œæ„é€ å‡½æ•°ã€‚ç±»ä½¿ç”¨å­—æ®µæ¥åŒ…å«çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨æ–¹æ³•æ¥å®ç°è¡Œä¸ºã€‚åˆå§‹åŒ–ç±»çš„æ–°å®ä¾‹çš„æ„é€ å‡½æ•°ä½¿ç”¨ç±»çš„åç§°ï¼Œçœ‹èµ·æ¥åƒæ²¡æœ‰è¿”å›ç±»å‹çš„æ–¹æ³•ã€‚ æ‚¨å¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼æ§åˆ¶å¯¹ç±»å’Œæˆå‘˜çš„è®¿é—®ï¼šåœ¨å®ƒä»¬çš„å£°æ˜ä¸­ä½¿ç”¨è®¿é—®ä¿®é¥°ç¬¦ï¼Œå¦‚publicã€‚ é€šè¿‡åœ¨æˆå‘˜å£°æ˜ä¸­ä½¿ç”¨staticå…³é”®å­—æ¥æŒ‡å®šç±»å˜é‡æˆ–ç±»æ–¹æ³•ã€‚æœªå£°æ˜ä¸ºé™æ€çš„æˆå‘˜éšå¼ä¸ºå®ä¾‹æˆå‘˜ã€‚ç±»å˜é‡ç”±ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œå¯ä»¥é€šè¿‡ç±»åå’Œå®ä¾‹å¼•ç”¨è®¿é—®ã€‚ç±»çš„å®ä¾‹è·å¾—æ¯ä¸ªå®ä¾‹å˜é‡çš„è‡ªå·±å‰¯æœ¬ï¼Œå¿…é¡»é€šè¿‡å®ä¾‹å¼•ç”¨è®¿é—®è¯¥å‰¯æœ¬ã€‚ ä½¿ç”¨newè¿ç®—ç¬¦å’Œæ„é€ å‡½æ•°ä»ç±»åˆ›å»ºå¯¹è±¡ã€‚æ–°è¿ç®—ç¬¦è¿”å›å¯¹å·²åˆ›å»ºå¯¹è±¡çš„å¼•ç”¨ã€‚æ‚¨å¯ä»¥å°†å¼•ç”¨åˆ†é…ç»™å˜é‡æˆ–ç›´æ¥ä½¿ç”¨å®ƒã€‚ å®ä¾‹å˜é‡å’Œæ–¹æ³•å¯ç”±å£°æ˜å®ƒä»¬çš„ç±»ä¹‹å¤–çš„ä»£ç è®¿é—®ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨é™å®šåæ¥å¼•ç”¨ã€‚å®ä¾‹å˜é‡çš„é™å®šåå¦‚ä¸‹æ‰€ç¤ºï¼š 1objectReference.variableName æ–¹æ³•çš„é™å®šåå¦‚ä¸‹æ‰€ç¤ºï¼š 1objectReference.methodName(argumentList) or: 1objectReference.methodName() åƒåœ¾æ”¶é›†å™¨ä¼šè‡ªåŠ¨æ¸…ç†æœªä½¿ç”¨çš„å¯¹è±¡ã€‚å¦‚æœç¨‹åºä¸å†åŒ…å«å¯¹å¯¹è±¡çš„å¼•ç”¨ï¼Œåˆ™å¯¹è±¡å°†ä¸è¢«ä½¿ç”¨ã€‚é€šè¿‡å°†ä¿æŒå¼•ç”¨çš„å˜é‡è®¾ç½®ä¸ºnullï¼Œå¯ä»¥æ˜¾å¼åˆ é™¤å¼•ç”¨ã€‚ å†…éƒ¨ç±»Javaç¼–ç¨‹è¯­è¨€å…è®¸æ‚¨åœ¨å¦ä¸€ä¸ªç±»ä¸­å®šä¹‰ä¸€ä¸ªç±»ã€‚è¿™æ ·çš„ç±»ç§°ä¸ºåµŒå¥—ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456class OuterClass &#123; ... class NestedClass &#123; ... &#125;&#125; &#x3D;&#x3D;æœ¯è¯­ï¼šåµŒå¥—ç±»åˆ†ä¸ºä¸¤ç±»ï¼šéé™æ€ç±»å’Œé™æ€ç±»ã€‚éé™æ€åµŒå¥—ç±»ç§°ä¸ºå†…éƒ¨ç±»ã€‚å£°æ˜ä¸ºé™æ€çš„åµŒå¥—ç±»ç§°ä¸ºé™æ€åµŒå¥—ç±»ã€‚&#x3D;&#x3D; 123456789class OuterClass &#123; ... class InnerClass &#123; ... &#125; static class StaticNestedClass &#123; ... &#125;&#125; åµŒå¥—ç±»æ˜¯å…¶å°é—­ç±»çš„æˆå‘˜ã€‚éé™æ€åµŒå¥—ç±»ï¼ˆå†…éƒ¨ç±»ï¼‰å¯ä»¥è®¿é—®å°é—­ç±»çš„å…¶ä»–æˆå‘˜ï¼Œå³ä½¿å®ƒä»¬è¢«å£°æ˜ä¸ºç§æœ‰ã€‚é™æ€åµŒå¥—ç±»æ— æƒè®¿é—®å°é—­ç±»çš„å…¶ä»–æˆå‘˜ã€‚ä½œä¸ºOuterClassçš„æˆå‘˜ï¼ŒåµŒå¥—ç±»å¯ä»¥å£°æ˜ä¸ºprivateã€publicã€protectedæˆ–package privateã€‚ï¼ˆè®°ä½ï¼Œå¤–éƒ¨ç±»åªèƒ½å£°æ˜ä¸ºpublicæˆ–package privateã€‚ï¼‰ ä¸ºä»€ä¹ˆä½¿ç”¨åµŒå¥—ç±»ï¼Ÿä½¿ç”¨åµŒå¥—ç±»çš„ä¸»è¦åŸå› å¦‚ä¸‹ï¼š è¿™æ˜¯ä¸€ç§å¯¹ä»…åœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨çš„ç±»è¿›è¡Œé€»è¾‘åˆ†ç»„çš„æ–¹æ³•ï¼šå¦‚æœä¸€ä¸ªç±»åªå¯¹å¦ä¸€ä¸ªç±»æœ‰ç”¨ï¼Œé‚£ä¹ˆå°†å…¶åµŒå…¥è¯¥ç±»å¹¶å°†ä¸¤è€…ä¿æŒåœ¨ä¸€èµ·æ˜¯åˆä¹é€»è¾‘çš„ã€‚åµŒå¥—è¿™æ ·çš„â€œåŠ©æ‰‹ç±»â€ä½¿å®ƒä»¬çš„åŒ…æ›´åŠ ç²¾ç®€ã€‚ å®ƒå¢åŠ äº†å°è£…ï¼šè€ƒè™‘ä¸¤ä¸ªé¡¶çº§ç±»Aå’ŒBï¼Œå…¶ä¸­Béœ€è¦è®¿é—®Açš„æˆå‘˜ï¼Œå¦åˆ™è¿™äº›æˆå‘˜å°†è¢«å£°æ˜ä¸ºç§æœ‰ã€‚é€šè¿‡å°†ç±»Béšè—åœ¨ç±»Aä¸­ï¼Œå¯ä»¥å°†Açš„æˆå‘˜å£°æ˜ä¸ºç§æœ‰ï¼ŒBå¯ä»¥è®¿é—®å®ƒä»¬ã€‚æ­¤å¤–ï¼ŒBæœ¬èº«å¯ä»¥å¯¹å¤–ç•Œéšè—ã€‚ å®ƒå¯ä»¥äº§ç”Ÿæ›´å¯è¯»å’Œå¯ç»´æŠ¤çš„ä»£ç ï¼šå°†å°ç±»åµŒå¥—åœ¨é¡¶çº§ç±»ä¸­ï¼Œä½¿ä»£ç æ›´æ¥è¿‘ä½¿ç”¨å®ƒçš„åœ°æ–¹ã€‚ å†…éƒ¨ç±»ä¸å®ä¾‹æ–¹æ³•å’Œå˜é‡ä¸€æ ·ï¼Œå†…éƒ¨ç±»ä¸å…¶å°é—­ç±»çš„å®ä¾‹ç›¸å…³è”ï¼Œå¹¶å¯ä»¥ç›´æ¥è®¿é—®è¯¥å¯¹è±¡çš„æ–¹æ³•å’Œå­—æ®µã€‚æ­¤å¤–ï¼Œå› ä¸ºå†…éƒ¨ç±»ä¸å®ä¾‹ç›¸å…³è”ï¼Œæ‰€ä»¥å®ƒæœ¬èº«ä¸èƒ½å®šä¹‰ä»»ä½•é™æ€æˆå‘˜ã€‚ ä½œä¸ºå†…éƒ¨ç±»å®ä¾‹çš„å¯¹è±¡å­˜åœ¨äºå¤–éƒ¨ç±»çš„å®ä¾‹ä¸­ã€‚è€ƒè™‘ä»¥ä¸‹ç±»åˆ«ï¼š 123456class OuterClass &#123; ... class InnerClass &#123; ... &#125;&#125; InnerClasså®ä¾‹åªèƒ½å­˜åœ¨äºOuterClasså®ä¾‹ä¸­ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥è®¿é—®å…¶å°é—­å®ä¾‹çš„æ–¹æ³•å’Œå­—æ®µã€‚ è¦å®ä¾‹åŒ–å†…éƒ¨ç±»ï¼Œå¿…é¡»é¦–å…ˆå®ä¾‹åŒ–å¤–éƒ¨ç±»ã€‚ç„¶åï¼Œä½¿ç”¨ä»¥ä¸‹è¯­æ³•åœ¨å¤–éƒ¨å¯¹è±¡ä¸­åˆ›å»ºå†…éƒ¨å¯¹è±¡ï¼š 12OuterClass outerObject = new OuterClass();OuterClass.InnerClass innerObject = outerObject.new InnerClass(); æœ‰ä¸¤ç§ç‰¹æ®Šçš„å†…éƒ¨ç±»ï¼šlocal classes and anonymous classes. é™æ€åµŒå¥—ç±»ä¸ç±»æ–¹æ³•å’Œå˜é‡ä¸€æ ·ï¼Œé™æ€åµŒå¥—ç±»ä¸å…¶å¤–éƒ¨ç±»ç›¸å…³è”ã€‚ä¸é™æ€ç±»æ–¹æ³•ä¸€æ ·ï¼Œé™æ€åµŒå¥—ç±»ä¸èƒ½ç›´æ¥å¼•ç”¨å…¶å°é—­ç±»ä¸­å®šä¹‰çš„å®ä¾‹å˜é‡æˆ–æ–¹æ³•ï¼šå®ƒåªèƒ½é€šè¿‡å¯¹è±¡å¼•ç”¨æ¥ä½¿ç”¨å®ƒä»¬ã€‚å†…éƒ¨ç±»å’ŒåµŒå¥—é™æ€ç±»ç¤ºä¾‹æ¼”ç¤ºäº†è¿™ä¸€ç‚¹ã€‚ &#x3D;&#x3D;æ³¨æ„ï¼šé™æ€åµŒå¥—ç±»ä¸å…¶å¤–éƒ¨ç±»ï¼ˆå’Œå…¶ä»–ç±»ï¼‰çš„å®ä¾‹æˆå‘˜è¿›è¡Œäº¤äº’ï¼Œå°±åƒä»»ä½•å…¶ä»–é¡¶çº§ç±»ä¸€æ ·ã€‚å®é™…ä¸Šï¼Œé™æ€åµŒå¥—ç±»åœ¨è¡Œä¸ºä¸Šæ˜¯ä¸€ä¸ªé¡¶çº§ç±»ï¼Œä¸ºäº†æ‰“åŒ…æ–¹ä¾¿ï¼Œå®ƒè¢«åµŒå¥—åœ¨å¦ä¸€ä¸ªé¡¶çº§ç±»åˆ«ä¸­ã€‚å†…éƒ¨ç±»å’ŒåµŒå¥—é™æ€ç±»ç¤ºä¾‹ä¹Ÿæ¼”ç¤ºäº†è¿™ä¸€ç‚¹ã€‚&#x3D;&#x3D; ä»¥ä¸é¡¶çº§ç±»ç›¸åŒçš„æ–¹å¼å®ä¾‹åŒ–é™æ€åµŒå¥—ç±»ï¼š 1StaticNestedClass staticNestedObject = new StaticNestedClass(); å†…éƒ¨ç±»å’ŒåµŒå¥—é™æ€ç±»ç¤ºä¾‹ä»¥ä¸‹ç¤ºä¾‹OuterClassä¸TopLevelClassä¸€èµ·æ¼”ç¤ºäº†OuterClassçš„å“ªäº›ç±»æˆå‘˜å¯ä»¥è®¿é—®å†…éƒ¨ç±»ï¼ˆInnerClassï¼‰ã€åµŒå¥—é™æ€ç±»ï¼ˆStaticNestedClassï¼‰å’Œé¡¶çº§ç±»ï¼ˆTopLevelClassï¼‰ï¼š OuterClass.java12345678910111213141516171819202122232425262728293031323334353637383940public class OuterClass &#123; String outerField = &quot;Outer field&quot;; static String staticOuterField = &quot;Static outer field&quot;; class InnerClass &#123; void accessMembers() &#123; System.out.println(outerField); System.out.println(staticOuterField); &#125; &#125; static class StaticNestedClass &#123; void accessMembers(OuterClass outer) &#123; // Compiler error: Cannot make a static reference to the non-static // field outerField // System.out.println(outerField); System.out.println(outer.outerField); System.out.println(staticOuterField); &#125; &#125; public static void main(String[] args) &#123; System.out.println(&quot;Inner class:&quot;); System.out.println(&quot;------------&quot;); OuterClass outerObject = new OuterClass(); OuterClass.InnerClass innerObject = outerObject.new InnerClass(); innerObject.accessMembers(); System.out.println(&quot;\\nStatic nested class:&quot;); System.out.println(&quot;--------------------&quot;); StaticNestedClass staticNestedObject = new StaticNestedClass(); staticNestedObject.accessMembers(outerObject); System.out.println(&quot;\\nTop-level class:&quot;); System.out.println(&quot;--------------------&quot;); TopLevelClass topLevelObject = new TopLevelClass(); topLevelObject.accessMembers(outerObject); &#125;&#125; TopLevelClass.java12345678910public class TopLevelClass &#123; void accessMembers(OuterClass outer) &#123; // Compiler error: Cannot make a static reference to the non-static // field OuterClass.outerField // System.out.println(OuterClass.outerField); System.out.println(outer.outerField); System.out.println(OuterClass.staticOuterField); &#125; &#125; æ­¤ç¤ºä¾‹æ‰“å°ä»¥ä¸‹è¾“å‡ºï¼š 1234567891011121314Inner class:------------Outer fieldStatic outer fieldStatic nested class:--------------------Outer fieldStatic outer fieldTop-level class:--------------------Outer fieldStatic outer field è¯·æ³¨æ„ï¼Œé™æ€åµŒå¥—ç±»ä¸å…¶å¤–éƒ¨ç±»çš„å®ä¾‹æˆå‘˜è¿›è¡Œäº¤äº’ï¼Œå°±åƒä»»ä½•å…¶ä»–é¡¶çº§ç±»ä¸€æ ·ã€‚é™æ€åµŒå¥—ç±»StaticNestedClassæ— æ³•ç›´æ¥è®¿é—®outerFieldï¼Œå› ä¸ºå®ƒæ˜¯å°é—­ç±»OuterClassçš„å®ä¾‹å˜é‡ã€‚Javaç¼–è¯‘å™¨åœ¨çªå‡ºæ˜¾ç¤ºçš„è¯­å¥å¤„ç”Ÿæˆé”™è¯¯ï¼š 1234567static class StaticNestedClass &#123; void accessMembers(OuterClass outer) &#123; // Compiler error: Cannot make a static reference to the non-static // field outerField System.out.println(outerField); &#125;&#125; è¦ä¿®å¤æ­¤é”™è¯¯ï¼Œè¯·é€šè¿‡å¯¹è±¡å¼•ç”¨è®¿é—®outerFieldï¼š 1System.out.println(outer.outerField); åŒæ ·ï¼Œé¡¶çº§ç±»TopLevelClassä¹Ÿä¸èƒ½ç›´æ¥è®¿é—®outerFieldã€‚ é˜´å½±å¦‚æœç‰¹å®šä½œç”¨åŸŸï¼ˆå¦‚å†…éƒ¨ç±»æˆ–æ–¹æ³•å®šä¹‰ï¼‰ä¸­çš„ç±»å‹å£°æ˜ï¼ˆå¦‚æˆå‘˜å˜é‡æˆ–å‚æ•°åç§°ï¼‰ä¸å°é—­ä½œç”¨åŸŸä¸­çš„å¦ä¸€å£°æ˜å…·æœ‰ç›¸åŒçš„åç§°ï¼Œåˆ™è¯¥å£°æ˜å°†éšè—å°é—­ä½œç”¨åŸŸçš„å£°æ˜ã€‚ä¸èƒ½ä»…é€šè¿‡å…¶åç§°å¼•ç”¨é˜´å½±å£°æ˜ã€‚ä»¥ä¸‹ç¤ºä¾‹ShadowTestæ¼”ç¤ºäº†è¿™ä¸€ç‚¹ï¼š 123456789101112131415161718192021public class ShadowTest &#123; public int x = 0; class FirstLevel &#123; public int x = 1; void methodInFirstLevel(int x) &#123; System.out.println(&quot;x = &quot; + x); System.out.println(&quot;this.x = &quot; + this.x); System.out.println(&quot;ShadowTest.this.x = &quot; + ShadowTest.this.x); &#125; &#125; public static void main(String... args) &#123; ShadowTest st = new ShadowTest(); ShadowTest.FirstLevel fl = st.new FirstLevel(); fl.methodInFirstLevel(23); &#125;&#125; ä»¥ä¸‹æ˜¯æœ¬ç¤ºä¾‹çš„è¾“å‡ºï¼š 123x = 23this.x = 1ShadowTest.this.x = 0 æœ¬ä¾‹å®šä¹‰äº†ä¸‰ä¸ªåä¸ºxçš„å˜é‡ï¼šShadowTestç±»çš„æˆå‘˜å˜é‡ã€å†…éƒ¨ç±»FirstLevelçš„æˆå‘˜å˜é‡å’Œæ–¹æ³•methodInFirstLevelä¸­çš„å‚æ•°ã€‚å®šä¹‰ä¸ºæ–¹æ³•methodInFirstLevelçš„å‚æ•°çš„å˜é‡xéšè—äº†å†…éƒ¨ç±»FirstLevelä¸­çš„å˜é‡ã€‚å› æ­¤ï¼Œå½“æ‚¨åœ¨æ–¹æ³•methodInFirstLevelä¸­ä½¿ç”¨å˜é‡xæ—¶ï¼Œå®ƒä¼šå¼•ç”¨æ–¹æ³•å‚æ•°ã€‚è¦å¼•ç”¨å†…éƒ¨ç±»FirstLevelçš„æˆå‘˜å˜é‡ï¼Œè¯·ä½¿ç”¨å…³é”®å­—thisè¡¨ç¤ºå°é—­èŒƒå›´ï¼š 1System.out.println(&quot;this.x = &quot; + this.x); å¼•ç”¨æˆå‘˜å˜é‡ï¼Œè¿™äº›æˆå‘˜å˜é‡é€šè¿‡å…¶æ‰€å±çš„ç±»åå°†è¾ƒå¤§èŒƒå›´æ‹¬èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯­å¥ä»æ–¹æ³•methodInFirstLevelè®¿é—®ShadowTestç±»çš„æˆå‘˜å˜é‡ï¼š 1System.out.println(&quot;ShadowTest.this.x = &quot; + ShadowTest.this.x); åºåˆ—åŒ–å¼ºçƒˆä¸å»ºè®®åºåˆ—åŒ–å†…éƒ¨ç±»ï¼ŒåŒ…æ‹¬æœ¬åœ°ç±»å’ŒåŒ¿åç±»ã€‚å½“Javaç¼–è¯‘å™¨ç¼–è¯‘æŸäº›æ„é€ ï¼ˆå¦‚å†…éƒ¨ç±»ï¼‰æ—¶ï¼Œå®ƒä¼šåˆ›å»ºåˆæˆæ„é€ ï¼›è¿™äº›æ˜¯æºä»£ç ä¸­æ²¡æœ‰ç›¸åº”æ„é€ çš„ç±»ã€æ–¹æ³•ã€å­—æ®µå’Œå…¶ä»–æ„é€ ã€‚åˆæˆæ„é€ ä½¿Javaç¼–è¯‘å™¨èƒ½å¤Ÿåœ¨ä¸æ”¹å˜JVMçš„æƒ…å†µä¸‹å®ç°æ–°çš„Javaè¯­è¨€ç‰¹æ€§ã€‚ç„¶è€Œï¼Œåˆæˆæ„é€ åœ¨ä¸åŒçš„Javaç¼–è¯‘å™¨å®ç°ä¸­å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œè¿™æ„å‘³ç€.classæ–‡ä»¶åœ¨ä¸åŒçš„å®ç°ä¸­ä¹Ÿå¯èƒ½æœ‰æ‰€ä¸åŒã€‚å› æ­¤ï¼Œå¦‚æœåºåˆ—åŒ–å†…éƒ¨ç±»ï¼Œç„¶åä½¿ç”¨ä¸åŒçš„JREå®ç°ååºåˆ—åŒ–ï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°å…¼å®¹æ€§é—®é¢˜ã€‚æœ‰å…³ç¼–è¯‘å†…éƒ¨ç±»æ—¶ç”Ÿæˆçš„åˆæˆæ„é€ çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…è·å–æ–¹æ³•å‚æ•°åç§°ä¸€èŠ‚ä¸­çš„éšå¼å’Œåˆæˆå‚æ•°ä¸€èŠ‚ã€‚ å†…éƒ¨ç±»ç¤ºä¾‹è¦æŸ¥çœ‹æ­£åœ¨ä½¿ç”¨çš„å†…éƒ¨ç±»ï¼Œé¦–å…ˆè€ƒè™‘ä¸€ä¸ªæ•°ç»„ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæ‚¨åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ•´æ•°å€¼å¡«å……å®ƒï¼Œç„¶åæŒ‰å‡åºåªè¾“å‡ºæ•°ç»„å¶æ•°ç´¢å¼•çš„å€¼ã€‚ DataStructure.java ä»¥ä¸‹ç¤ºä¾‹åŒ…æ‹¬ï¼š DataStructureå¤–éƒ¨ç±»ï¼Œå®ƒåŒ…æ‹¬ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨äºåˆ›å»ºDataStructureçš„å®ä¾‹ï¼Œè¯¥å®ä¾‹åŒ…å«ä¸€ä¸ªå¡«å……æœ‰è¿ç»­æ•´æ•°å€¼ï¼ˆ0ã€1ã€2ã€3ç­‰ï¼‰çš„æ•°ç»„ï¼Œä»¥åŠä¸€ä¸ªæ‰“å°å…·æœ‰å¶æ•°ç´¢å¼•å€¼çš„æ•°ç»„å…ƒç´ çš„æ–¹æ³•ã€‚ EvenIteratorå†…éƒ¨ç±»ï¼Œå®ƒå®ç°äº†DataStructureTeratoræ¥å£ï¼Œè¯¥æ¥å£æ‰©å±•äº†Iteratorï¼œIntegerï¼æ¥å£ã€‚è¿­ä»£å™¨ç”¨äºéå†æ•°æ®ç»“æ„ï¼Œé€šå¸¸å…·æœ‰æµ‹è¯•æœ€åä¸€ä¸ªå…ƒç´ ã€æ£€ç´¢å½“å‰å…ƒç´ å¹¶ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ çš„æ–¹æ³•ã€‚ å®ä¾‹åŒ–DataStructureå¯¹è±¡ï¼ˆdsï¼‰çš„ä¸»æ–¹æ³•ï¼Œç„¶åè°ƒç”¨printEvenæ–¹æ³•æ¥æ‰“å°æ•°ç»„arrayOfIntsä¸­å…·æœ‰å¶æ•°ç´¢å¼•å€¼çš„å…ƒç´ ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class DataStructure &#123; // Create an array private final static int SIZE = 15; private int[] arrayOfInts = new int[SIZE]; public DataStructure() &#123; // fill the array with ascending integer values for (int i = 0; i &lt; SIZE; i++) &#123; arrayOfInts[i] = i; &#125; &#125; public void printEven() &#123; // Print out values of even indices of the array DataStructureIterator iterator = this.new EvenIterator(); while (iterator.hasNext()) &#123; System.out.print(iterator.next() + &quot; &quot;); &#125; System.out.println(); &#125; interface DataStructureIterator extends java.util.Iterator&lt;Integer&gt; &#123; &#125; // Inner class implements the DataStructureIterator interface, // which extends the Iterator&lt;Integer&gt; interface private class EvenIterator implements DataStructureIterator &#123; // Start stepping through the array from the beginning private int nextIndex = 0; public boolean hasNext() &#123; // Check if the current element is the last in the array return (nextIndex &lt;= SIZE - 1); &#125; public Integer next() &#123; // Record a value of an even index of the array Integer retValue = Integer.valueOf(arrayOfInts[nextIndex]); // Get the next even element nextIndex += 2; return retValue; &#125; &#125; public static void main(String s[]) &#123; // Fill the array with integer values and print out only // values of even indices DataStructure ds = new DataStructure(); ds.printEven(); &#125;&#125; The output is: 10 2 4 6 8 10 12 14 è¯·æ³¨æ„ï¼ŒEvenIteratorç±»ç›´æ¥å¼•ç”¨DataStructureå¯¹è±¡çš„arrayOfIntså®ä¾‹å˜é‡ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å†…éƒ¨ç±»æ¥å®ç°åŠ©æ‰‹ç±»ï¼Œä¾‹å¦‚æœ¬ç¤ºä¾‹ä¸­æ‰€ç¤ºçš„åŠ©æ‰‹ç±»ã€‚è¦å¤„ç†ç”¨æˆ·ç•Œé¢äº‹ä»¶ï¼Œæ‚¨å¿…é¡»çŸ¥é“å¦‚ä½•ä½¿ç”¨å†…éƒ¨ç±»ï¼Œå› ä¸ºäº‹ä»¶å¤„ç†æœºåˆ¶å¤§é‡ä½¿ç”¨å®ƒä»¬ã€‚ æœ¬åœ°å’ŒåŒ¿åç±»è¿˜æœ‰ä¸¤ç§é¢å¤–ç±»å‹çš„å†…éƒ¨ç±»ã€‚å¯ä»¥åœ¨æ–¹æ³•ä½“ä¸­å£°æ˜å†…éƒ¨ç±»ã€‚è¿™äº›ç±»ç§°ä¸ºæœ¬åœ°ç±»ã€‚æ‚¨è¿˜å¯ä»¥åœ¨æ–¹æ³•ä½“ä¸­å£°æ˜å†…éƒ¨ç±»ï¼Œè€Œä¸å¿…å‘½åè¯¥ç±»ã€‚è¿™äº›ç±»ç§°ä¸ºåŒ¿åç±»ã€‚ ä¿®æ”¹å™¨å¯ä»¥ä¸ºå†…éƒ¨ç±»ä½¿ç”¨ä¸ä¸ºå¤–éƒ¨ç±»çš„å…¶ä»–æˆå‘˜ä½¿ç”¨ç›¸åŒçš„ä¿®é¥°ç¬¦ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨è®¿é—®è¯´æ˜ç¬¦privateã€publicå’Œprotectedæ¥é™åˆ¶å¯¹å†…éƒ¨ç±»çš„è®¿é—®ï¼Œå°±åƒä½¿ç”¨å®ƒä»¬æ¥é™åˆ¶å¯¹å…¶ä»–ç±»æˆå‘˜çš„è®¿é—®ä¸€æ ·ã€‚ æœ¬åœ°ç±»å£°æ˜æœ¬åœ°ç±»å¯ä»¥åœ¨ä»»ä½•å—å†…å®šä¹‰æœ¬åœ°ç±»ï¼ˆæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§è¡¨è¾¾å¼ã€è¯­å¥å’Œå—ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨æ–¹æ³•ä½“ã€Forå¾ªç¯æˆ–ifå­å¥ä¸­å®šä¹‰æœ¬åœ°ç±»ã€‚ ä»¥ä¸‹ç¤ºä¾‹LocalClassExampleéªŒè¯ä¸¤ä¸ªç”µè¯å·ç ã€‚å®ƒåœ¨validatePhoneNumberæ–¹æ³•ä¸­å®šä¹‰äº†æœ¬åœ°ç±»PhoneNumber: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061public class LocalClassExample &#123; static String regularExpression = &quot;[^0-9]&quot;; public static void validatePhoneNumber( String phoneNumber1, String phoneNumber2) &#123; final int numberLength = 10; // Valid in JDK 8 and later: // int numberLength = 10; class PhoneNumber &#123; String formattedPhoneNumber = null; PhoneNumber(String phoneNumber)&#123; // numberLength = 7; String currentNumber = phoneNumber.replaceAll( regularExpression, &quot;&quot;); if (currentNumber.length() == numberLength) formattedPhoneNumber = currentNumber; else formattedPhoneNumber = null; &#125; public String getNumber() &#123; return formattedPhoneNumber; &#125; // Valid in JDK 8 and later:// public void printOriginalNumbers() &#123;// System.out.println(&quot;Original numbers are &quot; + phoneNumber1 +// &quot; and &quot; + phoneNumber2);// &#125; &#125; PhoneNumber myNumber1 = new PhoneNumber(phoneNumber1); PhoneNumber myNumber2 = new PhoneNumber(phoneNumber2); // Valid in JDK 8 and later:// myNumber1.printOriginalNumbers(); if (myNumber1.getNumber() == null) System.out.println(&quot;First number is invalid&quot;); else System.out.println(&quot;First number is &quot; + myNumber1.getNumber()); if (myNumber2.getNumber() == null) System.out.println(&quot;Second number is invalid&quot;); else System.out.println(&quot;Second number is &quot; + myNumber2.getNumber()); &#125; public static void main(String... args) &#123; validatePhoneNumber(&quot;123-456-7890&quot;, &quot;456-7890&quot;); &#125;&#125; è¯¥ç¤ºä¾‹é¦–å…ˆåˆ é™¤ç”µè¯å·ç ä¸­é™¤æ•°å­—0åˆ°9ä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦ï¼Œä»¥éªŒè¯ç”µè¯å·ç ã€‚ç„¶åï¼Œå®ƒæ£€æŸ¥ç”µè¯å·ç æ˜¯å¦æ­£å¥½åŒ…å«åä¸ªæ•°å­—ï¼ˆåŒ—ç¾ç”µè¯å·ç çš„é•¿åº¦ï¼‰ã€‚æ­¤ç¤ºä¾‹æ‰“å°ä»¥ä¸‹å†…å®¹ï¼š 12First number is 1234567890Second number is invalid è®¿é—®å°é—­ç±»çš„æˆå‘˜æœ¬åœ°ç±»å¯ä»¥è®¿é—®å…¶å°é—­ç±»çš„æˆå‘˜ã€‚åœ¨ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­ï¼ŒPhoneNumberæ„é€ å‡½æ•°è®¿é—®æˆå‘˜LocalClassExample.regularExpressionã€‚ æ­¤å¤–ï¼Œå±€éƒ¨ç±»å¯ä»¥è®¿é—®å±€éƒ¨å˜é‡ã€‚ç„¶è€Œï¼Œå±€éƒ¨ç±»åªèƒ½è®¿é—®å£°æ˜ä¸ºfinalçš„å±€éƒ¨å˜é‡ã€‚å½“å±€éƒ¨ç±»è®¿é—®å°é—­å—çš„å±€éƒ¨å˜é‡æˆ–å‚æ•°æ—¶ï¼Œå®ƒä¼šæ•è·è¯¥å˜é‡æˆ–å‚æ•°ã€‚ä¾‹å¦‚ï¼ŒPhoneNumberæ„é€ å‡½æ•°å¯ä»¥è®¿é—®æœ¬åœ°å˜é‡numberLengthï¼Œå› ä¸ºå®ƒè¢«å£°æ˜ä¸ºfinalï¼›numberLengthæ˜¯æ•è·çš„å˜é‡ã€‚ ç„¶è€Œï¼Œä»JavaSE8å¼€å§‹ï¼Œæœ¬åœ°ç±»å¯ä»¥è®¿é—®å°é—­å—çš„æœ€ç»ˆæˆ–æœ‰æ•ˆæœ€ç»ˆçš„æœ¬åœ°å˜é‡å’Œå‚æ•°ã€‚ä¸€ä¸ªå˜é‡æˆ–å‚æ•°ï¼Œå…¶å€¼åœ¨åˆå§‹åŒ–åä»æœªæ”¹å˜ï¼Œå®é™…ä¸Šæ˜¯æœ€ç»ˆçš„ã€‚ä¾‹å¦‚ï¼Œå‡è®¾å˜é‡numberLengthæœªå£°æ˜ä¸ºfinalï¼Œå¹¶ä¸”åœ¨PhoneNumberæ„é€ å‡½æ•°ä¸­æ·»åŠ çªå‡ºæ˜¾ç¤ºçš„èµ‹å€¼è¯­å¥ä»¥å°†æœ‰æ•ˆç”µè¯å·ç çš„é•¿åº¦æ›´æ”¹ä¸º7ä½ï¼š 123456789PhoneNumber(String phoneNumber) &#123; numberLength = 7; String currentNumber = phoneNumber.replaceAll( regularExpression, &quot;&quot;); if (currentNumber.length() == numberLength) formattedPhoneNumber = currentNumber; else formattedPhoneNumber = null;&#125; ç”±äºæ­¤èµ‹å€¼è¯­å¥ï¼Œå˜é‡numberLengthå®é™…ä¸Šä¸å†æ˜¯finalã€‚å› æ­¤ï¼ŒJavaç¼–è¯‘å™¨ä¼šç”Ÿæˆç±»ä¼¼äºâ€œä»å†…éƒ¨ç±»å¼•ç”¨çš„æœ¬åœ°å˜é‡å¿…é¡»æ˜¯æœ€ç»ˆçš„æˆ–æœ‰æ•ˆçš„æœ€ç»ˆçš„â€çš„é”™è¯¯æ¶ˆæ¯ï¼Œå…¶ä¸­å†…éƒ¨ç±»PhoneNumberå°è¯•è®¿é—®numberLengthå˜é‡ï¼š 1if (currentNumber.length() == numberLength) ä»JavaSE8å¼€å§‹ï¼Œå¦‚æœåœ¨æ–¹æ³•ä¸­å£°æ˜æœ¬åœ°ç±»ï¼Œå®ƒå¯ä»¥è®¿é—®è¯¥æ–¹æ³•çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨PhoneNumberæœ¬åœ°ç±»ä¸­å®šä¹‰ä»¥ä¸‹æ–¹æ³•ï¼š 1234public void printOriginalNumbers() &#123; System.out.println(&quot;Original numbers are &quot; + phoneNumber1 + &quot; and &quot; + phoneNumber2);&#125; printOriginalNumbersæ–¹æ³•è®¿é—®validatePhoneNumberæ–¹æ³•çš„å‚æ•°phoneNumber1å’ŒphoneNumber2ã€‚ é˜´å½±å’Œå±€éƒ¨ç±»å±€éƒ¨ç±»ä¸­çš„ç±»å‹å£°æ˜ï¼ˆä¾‹å¦‚å˜é‡ï¼‰åœ¨å°é—­èŒƒå›´å†…çš„å½±å­å£°æ˜ä¸­å…·æœ‰ç›¸åŒåç§°ã€‚See Shadowing for more information. å±€éƒ¨ç±»ä¸å†…éƒ¨ç±»ç›¸ä¼¼æœ¬åœ°ç±»ä¸å†…éƒ¨ç±»ç±»ä¼¼ï¼Œå› ä¸ºå®ƒä»¬ä¸èƒ½å®šä¹‰æˆ–å£°æ˜ä»»ä½•é™æ€æˆå‘˜ã€‚é™æ€æ–¹æ³•ä¸­çš„æœ¬åœ°ç±»ï¼Œä¾‹å¦‚åœ¨é™æ€æ–¹æ³•validatePhoneNumberä¸­å®šä¹‰çš„ç±»PhoneNumberï¼Œåªèƒ½å¼•ç”¨å°é—­ç±»çš„é™æ€æˆå‘˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ²¡æœ‰å°†æˆå‘˜å˜é‡regularExpressionå®šä¹‰ä¸ºstaticï¼Œé‚£ä¹ˆJavaç¼–è¯‘å™¨ä¼šç”Ÿæˆç±»ä¼¼äºâ€œéé™æ€å˜é‡regularè¡¨è¾¾å¼ä¸èƒ½ä»é™æ€ä¸Šä¸‹æ–‡å¼•ç”¨â€çš„é”™è¯¯ æœ¬åœ°ç±»æ˜¯éé™æ€çš„ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥è®¿é—®å°é—­å—çš„å®ä¾‹æˆå‘˜ã€‚å› æ­¤ï¼Œå®ƒä»¬ä¸èƒ½åŒ…å«å¤§å¤šæ•°ç±»å‹çš„é™æ€å£°æ˜ã€‚ ä¸èƒ½åœ¨å—å†…å£°æ˜æ¥å£ï¼›æ¥å£æœ¬è´¨ä¸Šæ˜¯é™æ€çš„ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æ‘˜å½•æ— æ³•ç¼–è¯‘ï¼Œå› ä¸ºæ¥å£HelloThereå®šä¹‰åœ¨æ–¹æ³•greetInEnglishçš„ä¸»ä½“ä¸­ï¼š 123456789101112public void greetInEnglish() &#123; interface HelloThere &#123; public void greet(); &#125; class EnglishHelloThere implements HelloThere &#123; public void greet() &#123; System.out.println(&quot;Hello &quot; + name); &#125; &#125; HelloThere myGreeting = new EnglishHelloThere(); myGreeting.greet();&#125; ä¸èƒ½åœ¨æœ¬åœ°ç±»ä¸­å£°æ˜é™æ€åˆå§‹åŒ–å™¨æˆ–æˆå‘˜æ¥å£ã€‚ä»¥ä¸‹ä»£ç æ‘˜å½•æ— æ³•ç¼–è¯‘ï¼Œå› ä¸ºæ–¹æ³•EnglishGoodbyeã€‚sayGoodbyeè¢«å£°æ˜ä¸ºé™æ€ã€‚å½“ç¼–è¯‘å™¨é‡åˆ°æ­¤æ–¹æ³•å®šä¹‰æ—¶ï¼Œä¼šç”Ÿæˆç±»ä¼¼äºâ€œä»…åœ¨å¸¸é‡å˜é‡å£°æ˜ä¸­å…è®¸ä¿®é¥°ç¬¦â€™staticâ€™â€çš„é”™è¯¯ï¼š 12345678public void sayGoodbyeInEnglish() &#123; class EnglishGoodbye &#123; public static void sayGoodbye() &#123; System.out.println(&quot;Bye bye&quot;); &#125; &#125; EnglishGoodbye.sayGoodbye(); &#125; å±€éƒ¨ç±»å¯ä»¥æœ‰é™æ€æˆå‘˜ï¼Œå‰ææ˜¯å®ƒä»¬æ˜¯å¸¸é‡å˜é‡ã€‚ï¼ˆå¸¸é‡å˜é‡æ˜¯åŸºå…ƒç±»å‹æˆ–å­—ç¬¦ä¸²ç±»å‹çš„å˜é‡ï¼Œå£°æ˜ä¸ºfinalå¹¶ç”¨ç¼–è¯‘æ—¶å¸¸é‡è¡¨è¾¾å¼åˆå§‹åŒ–ã€‚ç¼–è¯‘æ—¶å¸¸é‡é€šå¸¸æ˜¯å¯ä»¥åœ¨ç¼–è¯‘æ—¶è®¡ç®—çš„å­—ç¬¦ä¸²æˆ–ç®—æœ¯è¡¨è¾¾å¼ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…äº†è§£ç±»æˆå‘˜ã€‚)ä»¥ä¸‹ä»£ç æ‘˜å½•ç¼–è¯‘ï¼Œå› ä¸ºé™æ€æˆå‘˜EnglishGoodbyeã€‚å‘Šåˆ«æ˜¯ä¸€ä¸ªå¸¸é‡å˜é‡ï¼š 12345678910public void sayGoodbyeInEnglish() &#123; class EnglishGoodbye &#123; public static final String farewell = &quot;Bye bye&quot;; public void sayGoodbye() &#123; System.out.println(farewell); &#125; &#125; EnglishGoodbye myEnglishGoodbye = new EnglishGoodbye(); myEnglishGoodbye.sayGoodbye();&#125; åŒ¿åç±»åŒ¿åç±»ä½¿æ‚¨èƒ½å¤Ÿä½¿ä»£ç æ›´ç®€æ´ã€‚å®ƒä»¬ä½¿æ‚¨èƒ½å¤ŸåŒæ—¶å£°æ˜å’Œå®ä¾‹åŒ–ç±»ã€‚å®ƒä»¬å°±åƒæœ¬åœ°ç±»ï¼Œåªæ˜¯æ²¡æœ‰åç§°ã€‚å¦‚æœåªéœ€è¦ä½¿ç”¨ä¸€æ¬¡æœ¬åœ°ç±»ï¼Œè¯·ä½¿ç”¨å®ƒä»¬ã€‚ å£°æ˜åŒ¿åç±»è™½ç„¶æœ¬åœ°ç±»æ˜¯ç±»å£°æ˜ï¼Œä½†åŒ¿åç±»æ˜¯è¡¨è¾¾å¼ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼ä¸­å®šä¹‰ç±»ã€‚ä»¥ä¸‹ç¤ºä¾‹HelloWorldAnonymousClassesåœ¨æœ¬åœ°å˜é‡frenchGreetingå’ŒspanishGreetingçš„åˆå§‹åŒ–è¯­å¥ä¸­ä½¿ç”¨åŒ¿åç±»ï¼Œä½†åœ¨å˜é‡englishGreetingåˆå§‹åŒ–æ—¶ä½¿ç”¨æœ¬åœ°ç±»ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354public class HelloWorldAnonymousClasses &#123; interface HelloWorld &#123; public void greet(); public void greetSomeone(String someone); &#125; public void sayHello() &#123; class EnglishGreeting implements HelloWorld &#123; String name = &quot;world&quot;; public void greet() &#123; greetSomeone(&quot;world&quot;); &#125; public void greetSomeone(String someone) &#123; name = someone; System.out.println(&quot;Hello &quot; + name); &#125; &#125; HelloWorld englishGreeting = new EnglishGreeting(); HelloWorld frenchGreeting = new HelloWorld() &#123; String name = &quot;tout le monde&quot;; public void greet() &#123; greetSomeone(&quot;tout le monde&quot;); &#125; public void greetSomeone(String someone) &#123; name = someone; System.out.println(&quot;Salut &quot; + name); &#125; &#125;; HelloWorld spanishGreeting = new HelloWorld() &#123; String name = &quot;mundo&quot;; public void greet() &#123; greetSomeone(&quot;mundo&quot;); &#125; public void greetSomeone(String someone) &#123; name = someone; System.out.println(&quot;Hola, &quot; + name); &#125; &#125;; englishGreeting.greet(); frenchGreeting.greetSomeone(&quot;Fred&quot;); spanishGreeting.greet(); &#125; public static void main(String... args) &#123; HelloWorldAnonymousClasses myApp = new HelloWorldAnonymousClasses(); myApp.sayHello(); &#125; &#125; åŒ¿åç±»çš„è¯­æ³•å¦‚å‰æ‰€è¿°ï¼ŒåŒ¿åç±»æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚åŒ¿åç±»è¡¨è¾¾å¼çš„è¯­æ³•ç±»ä¼¼äºæ„é€ å‡½æ•°çš„è°ƒç”¨ï¼Œåªæ˜¯ä»£ç å—ä¸­åŒ…å«ä¸€ä¸ªç±»å®šä¹‰ã€‚ è€ƒè™‘frenchGreetingå¯¹è±¡çš„å®ä¾‹åŒ–ï¼š 12345678910HelloWorld frenchGreeting = new HelloWorld() &#123; String name = &quot;tout le monde&quot;; public void greet() &#123; greetSomeone(&quot;tout le monde&quot;); &#125; public void greetSomeone(String someone) &#123; name = someone; System.out.println(&quot;Salut &quot; + name); &#125; &#125;; åŒ¿åç±»è¡¨è¾¾å¼ç”±ä»¥ä¸‹å†…å®¹ç»„æˆï¼š newè¿ç®—ç¬¦ è¦å®ç°çš„æ¥å£æˆ–è¦æ‰©å±•çš„ç±»çš„åç§°ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒåŒ¿åç±»å®ç°æ¥å£HelloWorldã€‚ åŒ…å«æ„é€ å‡½æ•°å‚æ•°çš„æ‹¬å·ï¼Œå°±åƒæ™®é€šçš„ç±»å®ä¾‹åˆ›å»ºè¡¨è¾¾å¼ä¸€æ ·ã€‚æ³¨æ„ï¼šå½“æ‚¨å®ç°ä¸€ä¸ªæ¥å£æ—¶ï¼Œæ²¡æœ‰æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æ‚¨ä½¿ç”¨ä¸€å¯¹ç©ºæ‹¬å·ï¼Œå¦‚æœ¬ä¾‹æ‰€ç¤ºã€‚ ä¸€ä¸ªä¸»ä½“ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»å£°æ˜ä¸»ä½“ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œåœ¨æ­£æ–‡ä¸­ï¼Œå…è®¸æ–¹æ³•å£°æ˜ï¼Œä½†ä¸å…è®¸è¯­å¥ã€‚ å› ä¸ºåŒ¿åç±»å®šä¹‰æ˜¯è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å®ƒå¿…é¡»æ˜¯è¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒåŒ¿åç±»è¡¨è¾¾å¼æ˜¯å®ä¾‹åŒ–frenchGreetingå¯¹è±¡çš„è¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚ï¼ˆè¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆå³å¤§æ‹¬å·åé¢æœ‰åˆ†å·ã€‚ï¼‰ è®¿é—®Enclosingä½œç”¨åŸŸçš„å±€éƒ¨å˜é‡ï¼Œä»¥åŠå£°æ˜å’Œè®¿é—®åŒ¿åç±»çš„æˆå‘˜ä¸æœ¬åœ°ç±»ä¸€æ ·ï¼ŒåŒ¿åç±»å¯ä»¥æ•è·å˜é‡ï¼›å®ƒä»¬å¯¹å°é—­ä½œç”¨åŸŸçš„å±€éƒ¨å˜é‡å…·æœ‰ç›¸åŒçš„è®¿é—®æƒé™ï¼š åŒ¿åç±»å¯ä»¥è®¿é—®å…¶å°é—­ç±»çš„æˆå‘˜ã€‚ åŒ¿åç±»ä¸èƒ½è®¿é—®å…¶å°é—­èŒƒå›´ä¸­æœªå£°æ˜ä¸ºfinalæˆ–æœ‰æ•ˆfinalçš„å±€éƒ¨å˜é‡ã€‚ ä¸åµŒå¥—ç±»ä¸€æ ·ï¼ŒåŒ¿åç±»ä¸­çš„ç±»å‹ï¼ˆä¾‹å¦‚å˜é‡ï¼‰å£°æ˜éšè—äº†å°é—­èŒƒå›´ä¸­å…·æœ‰ç›¸åŒåç§°çš„ä»»ä½•å…¶ä»–å£°æ˜ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§é˜´å½±ã€‚ åŒ¿åç±»å¯¹å…¶æˆå‘˜ä¹Ÿæœ‰ä¸æœ¬åœ°ç±»ç›¸åŒçš„é™åˆ¶ï¼š ä¸èƒ½åœ¨åŒ¿åç±»ä¸­å£°æ˜é™æ€åˆå§‹åŒ–å™¨æˆ–æˆå‘˜æ¥å£ã€‚ åŒ¿åç±»å¯ä»¥æœ‰é™æ€æˆå‘˜ï¼Œå‰ææ˜¯å®ƒä»¬æ˜¯å¸¸é‡å˜é‡ã€‚ è¯·æ³¨æ„ï¼Œæ‚¨å¯ä»¥åœ¨åŒ¿åç±»ä¸­å£°æ˜ä»¥ä¸‹å†…å®¹ï¼š Fields Extraæ–¹æ³•ï¼ˆå³ä½¿å®ƒä»¬æ²¡æœ‰å®ç°ä»»ä½•çˆ¶ç±»å‹çš„æ–¹æ³•ï¼‰ Instance initializers Local classes ä½†æ˜¯ï¼Œæ‚¨ä¸èƒ½åœ¨åŒ¿åç±»å†…å£°æ˜æ„é€ å‡½æ•°ã€‚ åŒ¿åç±»ç¤ºä¾‹åŒ¿åç±»é€šå¸¸ç”¨äºå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰åº”ç”¨ç¨‹åºä¸­ã€‚ è€ƒè™‘JavaFXç¤ºä¾‹HelloWorldã€‚javaï¼ˆæ¥è‡ªã€ŠJavaFXå…¥é—¨ã€‹ä¸­çš„Hello Worldï¼ŒJavaFX Styleä¸€èŠ‚ï¼‰ã€‚æ­¤ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªåŒ…å«Sayâ€œHello Worldâ€æŒ‰é’®çš„æ¡†æ¶ã€‚å°†çªå‡ºæ˜¾ç¤ºåŒ¿åç±»è¡¨è¾¾å¼ï¼š 12345678910111213141516171819202122232425262728293031import javafx.event.ActionEvent;import javafx.event.EventHandler;import javafx.scene.Scene;import javafx.scene.control.Button;import javafx.scene.layout.StackPane;import javafx.stage.Stage; public class HelloWorld extends Application &#123; public static void main(String[] args) &#123; launch(args); &#125; @Override public void start(Stage primaryStage) &#123; primaryStage.setTitle(&quot;Hello World!&quot;); Button btn = new Button(); btn.setText(&quot;Say &#x27;Hello World&#x27;&quot;); btn.setOnAction(new EventHandler&lt;ActionEvent&gt;() &#123; @Override public void handle(ActionEvent event) &#123; System.out.println(&quot;Hello World!&quot;); &#125; &#125;); StackPane root = new StackPane(); root.getChildren().add(btn); primaryStage.setScene(new Scene(root, 300, 250)); primaryStage.show(); &#125;&#125; åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæ–¹æ³•è°ƒç”¨btnã€‚setOnActionæŒ‡å®šå½“æ‚¨é€‰æ‹©Sayâ€œHello Worldâ€æŒ‰é’®æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚æ­¤æ–¹æ³•éœ€è¦EventHandlerï¼œActionEventï¼ç±»å‹çš„å¯¹è±¡ã€‚EventHandlerï¼œActionEventï¼æ¥å£ä»…åŒ…å«ä¸€ä¸ªæ–¹æ³•handleã€‚è¯¥ç¤ºä¾‹ä½¿ç”¨äº†ä¸€ä¸ªåŒ¿åç±»è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯ç”¨æ–°ç±»å®ç°æ­¤æ–¹æ³•ã€‚è¯·æ³¨æ„ï¼Œæ­¤è¡¨è¾¾å¼æ˜¯ä¼ é€’ç»™btnçš„å‚æ•°ã€‚setOnActionæ–¹æ³•ã€‚ å› ä¸ºEventHandlerï¼œActionEventï¼æ¥å£åªåŒ…å«ä¸€ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼è€Œä¸æ˜¯åŒ¿åç±»è¡¨è¾¾å¼ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ Lambda Expressionsä¸€èŠ‚ã€‚ åŒ¿åç±»æ˜¯å®ç°åŒ…å«ä¸¤ä¸ªæˆ–å¤šä¸ªæ–¹æ³•çš„æ¥å£çš„ç†æƒ³é€‰æ‹©ã€‚ä»¥ä¸‹JavaFXç¤ºä¾‹æ¥è‡ªUIæ§ä»¶çš„è‡ªå®šä¹‰éƒ¨åˆ†ã€‚çªå‡ºæ˜¾ç¤ºçš„ä»£ç åˆ›å»ºä¸€ä¸ªä»…æ¥å—æ•°å€¼çš„æ–‡æœ¬å­—æ®µã€‚å®ƒé€šè¿‡é‡å†™ä»TextInputControlç±»ç»§æ‰¿çš„replaceTextå’ŒreplaceSelectionæ–¹æ³•ï¼Œç”¨åŒ¿åç±»é‡æ–°å®šä¹‰TextFieldç±»çš„é»˜è®¤å®ç°ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677import javafx.application.Application;import javafx.event.ActionEvent;import javafx.event.EventHandler;import javafx.geometry.Insets;import javafx.scene.Group;import javafx.scene.Scene;import javafx.scene.control.*;import javafx.scene.layout.GridPane;import javafx.scene.layout.HBox;import javafx.stage.Stage;public class CustomTextFieldSample extends Application &#123; final static Label label = new Label(); @Override public void start(Stage stage) &#123; Group root = new Group(); Scene scene = new Scene(root, 300, 150); stage.setScene(scene); stage.setTitle(&quot;Text Field Sample&quot;); GridPane grid = new GridPane(); grid.setPadding(new Insets(10, 10, 10, 10)); grid.setVgap(5); grid.setHgap(5); scene.setRoot(grid); final Label dollar = new Label(&quot;$&quot;); GridPane.setConstraints(dollar, 0, 0); grid.getChildren().add(dollar); final TextField sum = new TextField() &#123; @Override public void replaceText(int start, int end, String text) &#123; if (!text.matches(&quot;[a-z, A-Z]&quot;)) &#123; super.replaceText(start, end, text); &#125; label.setText(&quot;Enter a numeric value&quot;); &#125; @Override public void replaceSelection(String text) &#123; if (!text.matches(&quot;[a-z, A-Z]&quot;)) &#123; super.replaceSelection(text); &#125; &#125; &#125;; sum.setPromptText(&quot;Enter the total&quot;); sum.setPrefColumnCount(10); GridPane.setConstraints(sum, 1, 0); grid.getChildren().add(sum); Button submit = new Button(&quot;Submit&quot;); GridPane.setConstraints(submit, 2, 0); grid.getChildren().add(submit); submit.setOnAction(new EventHandler&lt;ActionEvent&gt;() &#123; @Override public void handle(ActionEvent e) &#123; label.setText(null); &#125; &#125;); GridPane.setConstraints(label, 0, 1); GridPane.setColumnSpan(label, 3); grid.getChildren().add(label); scene.setRoot(grid); stage.show(); &#125; public static void main(String[] args) &#123; launch(args); &#125;&#125; Lambdaè¡¨è¾¾å¼åŒ¿åç±»çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœåŒ¿åç±»çš„å®ç°éå¸¸ç®€å•ï¼Œä¾‹å¦‚ä¸€ä¸ªæ¥å£åªåŒ…å«ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆåŒ¿åç±»çš„è¯­æ³•å¯èƒ½ä¼šæ˜¾å¾—ç¬¨æ‹™å’Œä¸æ¸…æ¥šã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæ‚¨é€šå¸¸è¯•å›¾å°†åŠŸèƒ½ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚å½“æœ‰äººå•å‡»æŒ‰é’®æ—¶åº”è¯¥é‡‡å–ä»€ä¹ˆæ“ä½œã€‚Lambdaè¡¨è¾¾å¼ä½¿æ‚¨èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ï¼Œå°†åŠŸèƒ½è§†ä¸ºæ–¹æ³•å‚æ•°ï¼Œæˆ–å°†ä»£ç è§†ä¸ºæ•°æ®ã€‚ ä¸Šä¸€èŠ‚â€œåŒ¿åç±»â€å‘æ‚¨å±•ç¤ºäº†å¦‚ä½•å®ç°åŸºç±»è€Œä¸ä¸ºå…¶å‘½åã€‚è™½ç„¶è¿™é€šå¸¸æ¯”å‘½åç±»æ›´ç®€æ´ï¼Œä½†å¯¹äºåªæœ‰ä¸€ä¸ªæ–¹æ³•çš„ç±»ï¼Œå³ä½¿æ˜¯åŒ¿åç±»ä¹Ÿæ˜¾å¾—æœ‰ç‚¹è¿‡åˆ†å’Œéº»çƒ¦ã€‚Lambdaè¡¨è¾¾å¼å…è®¸æ‚¨æ›´ç´§å‡‘åœ°è¡¨è¾¾å•ä¸ªæ–¹æ³•ç±»çš„å®ä¾‹ã€‚ Lambdaè¡¨è¾¾å¼çš„ç†æƒ³ç”¨ä¾‹å‡è®¾æ‚¨æ­£åœ¨åˆ›å»ºä¸€ä¸ªç¤¾äº¤ç½‘ç»œåº”ç”¨ç¨‹åºã€‚æ‚¨å¸Œæœ›åˆ›å»ºä¸€ä¸ªåŠŸèƒ½ï¼Œä½¿ç®¡ç†å‘˜èƒ½å¤Ÿå¯¹æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„ç¤¾äº¤ç½‘ç»œåº”ç”¨ç¨‹åºæˆå‘˜æ‰§è¡Œä»»ä½•ç±»å‹çš„æ“ä½œï¼Œä¾‹å¦‚å‘é€æ¶ˆæ¯ã€‚ä¸‹è¡¨è¯¦ç»†æè¿°äº†è¯¥ç”¨ä¾‹ï¼š Field Description Name å¯¹æ‰€é€‰æˆå‘˜æ‰§è¡Œæ“ä½œ Primary Actor ç®¡ç†å‘˜ Preconditions ç®¡ç†å‘˜å·²ç™»å½•ç³»ç»Ÿã€‚ Postconditions ä»…å¯¹ç¬¦åˆæŒ‡å®šæ¡ä»¶çš„æˆå‘˜æ‰§è¡Œæ“ä½œã€‚ Main Success Scenario ç®¡ç†å‘˜æŒ‡å®šè¦å¯¹å…¶æ‰§è¡Œç‰¹å®šæ“ä½œçš„æˆå‘˜çš„æ ‡å‡†ã€‚ç®¡ç†å‘˜æŒ‡å®šè¦å¯¹è¿™äº›é€‰å®šæˆå‘˜æ‰§è¡Œçš„æ“ä½œã€‚ç®¡ç†å‘˜é€‰æ‹©æäº¤æŒ‰é’®ã€‚ç³»ç»Ÿå°†æŸ¥æ‰¾ç¬¦åˆæŒ‡å®šæ¡ä»¶çš„æ‰€æœ‰æˆå‘˜ã€‚ç³»ç»Ÿå¯¹æ‰€æœ‰åŒ¹é…çš„æˆå‘˜æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œã€‚ Extensions 1aä¸­ã€‚ç®¡ç†å‘˜å¯ä»¥é€‰æ‹©åœ¨æŒ‡å®šè¦æ‰§è¡Œçš„æ“ä½œæˆ–é€‰æ‹©æäº¤æŒ‰é’®ä¹‹å‰é¢„è§ˆç¬¦åˆæŒ‡å®šæ¡ä»¶çš„æˆå‘˜ã€‚ Frequency of Occurrence ç™½å¤©å¾ˆå¤šæ¬¡ã€‚ å‡è®¾æ­¤ç¤¾äº¤ç½‘ç»œåº”ç”¨ç¨‹åºçš„æˆå‘˜ç”±ä»¥ä¸‹Personç±»è¡¨ç¤ºï¼š 12345678910111213141516171819public class Person &#123; public enum Sex &#123; MALE, FEMALE &#125; String name; LocalDate birthday; Sex gender; String emailAddress; public int getAge() &#123; // ... &#125; public void printPerson() &#123; // ... &#125;&#125; å‡è®¾ç¤¾äº¤ç½‘ç»œåº”ç”¨ç¨‹åºçš„æˆå‘˜å­˜å‚¨åœ¨List&lt;Person&gt;å®ä¾‹ä¸­ã€‚ æœ¬èŠ‚ä»è¿™ä¸ªç”¨ä¾‹çš„ç®€å•æ–¹æ³•å¼€å§‹ã€‚å®ƒä½¿ç”¨æœ¬åœ°å’ŒåŒ¿åç±»æ”¹è¿›äº†è¿™ç§æ–¹æ³•ï¼Œç„¶åä½¿ç”¨lambdaè¡¨è¾¾å¼ä»¥é«˜æ•ˆç®€æ´çš„æ–¹æ³•ç»“æŸã€‚åœ¨ç¤ºä¾‹RosterTestä¸­æŸ¥æ‰¾æœ¬èŠ‚ä¸­æè¿°çš„ä»£ç æ‘˜å½•ã€‚ æ–¹æ³•1ï¼šåˆ›å»ºæœç´¢ç¬¦åˆä¸€ä¸ªç‰¹å¾çš„æˆå‘˜çš„æ–¹æ³•ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯åˆ›å»ºå‡ ç§æ–¹æ³•ï¼›æ¯ä¸ªæ–¹æ³•éƒ½æœç´¢ä¸ä¸€ä¸ªç‰¹å¾ï¼ˆå¦‚æ€§åˆ«æˆ–å¹´é¾„ï¼‰åŒ¹é…çš„æˆå‘˜ã€‚ä»¥ä¸‹æ–¹æ³•æ‰“å°æ—©äºæŒ‡å®šå¹´é¾„çš„æˆå‘˜ï¼š 1234567public static void printPersonsOlderThan(List&lt;Person&gt; roster, int age) &#123; for (Person p : roster) &#123; if (p.getAge() &gt;= age) &#123; p.printPerson(); &#125; &#125;&#125; æ³¨æ„ï¼š Listæ˜¯ä¸€ä¸ªæœ‰åºçš„ Collection ã€‚é›†åˆæ˜¯å°†å¤šä¸ªå…ƒç´ åˆ†ç»„ä¸ºå•ä¸ªå•å…ƒçš„å¯¹è±¡ã€‚é›†åˆç”¨äºå­˜å‚¨ã€æ£€ç´¢ã€æ“ä½œå’Œä¼ é€’èšåˆæ•°æ®ã€‚æœ‰å…³é›†åˆçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Collections è·Ÿè¸ªã€‚ è¿™ç§æ–¹æ³•å¯èƒ½ä¼šä½¿æ‚¨çš„åº”ç”¨ç¨‹åºå˜å¾—è„†å¼±ï¼Œè¿™æ˜¯å› ä¸ºå¼•å…¥äº†æ›´æ–°ï¼ˆä¾‹å¦‚æ›´æ–°çš„æ•°æ®ç±»å‹ï¼‰è€Œå¯¼è‡´åº”ç”¨ç¨‹åºæ— æ³•å·¥ä½œçš„å¯èƒ½æ€§ã€‚å‡è®¾æ‚¨å‡çº§åº”ç”¨ç¨‹åºå¹¶æ›´æ”¹Personç±»çš„ç»“æ„ï¼Œä½¿å…¶åŒ…å«ä¸åŒçš„æˆå‘˜å˜é‡ï¼›ä¹Ÿè®¸è¯¥ç±»ä½¿ç”¨ä¸åŒçš„æ•°æ®ç±»å‹æˆ–ç®—æ³•è®°å½•å’Œæµ‹é‡å¹´é¾„ã€‚ä¸ºäº†é€‚åº”è¿™ç§å˜åŒ–ï¼Œæ‚¨å¿…é¡»é‡å†™å¤§é‡APIã€‚æ­¤å¤–ï¼Œè¿™ç§æ–¹æ³•å…·æœ‰ä¸å¿…è¦çš„é™åˆ¶æ€§ï¼›ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³æ‰“å°å°äºæŸä¸ªå¹´é¾„çš„ä¼šå‘˜ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ æ–¹æ³•2ï¼šåˆ›å»ºæ›´é€šç”¨çš„æœç´¢æ–¹æ³•ä»¥ä¸‹æ–¹æ³•æ¯”printPersonsHolderThanæ›´é€šç”¨ï¼›å®ƒæ‰“å°æŒ‡å®šå¹´é¾„èŒƒå›´å†…çš„æˆå‘˜ï¼š 12345678public static void printPersonsWithinAgeRange( List&lt;Person&gt; roster, int low, int high) &#123; for (Person p : roster) &#123; if (low &lt;= p.getAge() &amp;&amp; p.getAge() &lt; high) &#123; p.printPerson(); &#125; &#125;&#125; å¦‚æœæ‚¨æƒ³æ‰“å°ç‰¹å®šæ€§åˆ«çš„æˆå‘˜ï¼Œæˆ–æŒ‡å®šæ€§åˆ«å’Œå¹´é¾„èŒƒå›´çš„ç»„åˆï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå¦‚æœæ‚¨å†³å®šæ›´æ”¹Personç±»å¹¶æ·»åŠ å…¶ä»–å±æ€§ï¼Œå¦‚å…³ç³»çŠ¶æ€æˆ–åœ°ç†ä½ç½®ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå°½ç®¡æ­¤æ–¹æ³•æ¯”printPersonsOldThanæ›´é€šç”¨ï¼Œä½†å°è¯•ä¸ºæ¯ä¸ªå¯èƒ½çš„æœç´¢æŸ¥è¯¢åˆ›å»ºå•ç‹¬çš„æ–¹æ³•ä»ç„¶ä¼šå¯¼è‡´ä»£ç è„†å¼±ã€‚ç›¸åï¼Œæ‚¨å¯ä»¥å°†æŒ‡å®šè¦åœ¨ä¸åŒç±»ä¸­æœç´¢çš„æ¡ä»¶çš„ä»£ç åˆ†å¼€ã€‚ æ–¹æ³•3ï¼šåœ¨æœ¬åœ°ç±»ä¸­æŒ‡å®šæœç´¢æ¡ä»¶ä»£ç ä»¥ä¸‹æ–¹æ³•æ‰“å°ç¬¦åˆæ‚¨æŒ‡å®šçš„æœç´¢æ¡ä»¶çš„æˆå‘˜ï¼š 12345678public static void printPersons( List&lt;Person&gt; roster, CheckPerson tester) &#123; for (Person p : roster) &#123; if (tester.test(p)) &#123; p.printPerson(); &#125; &#125;&#125; æ­¤æ–¹æ³•é€šè¿‡è°ƒç”¨tester.testæ–¹æ³•æ£€æŸ¥Listå‚æ•°åˆ—è¡¨ä¸­åŒ…å«çš„æ¯ä¸ªPersonå®ä¾‹æ˜¯å¦æ»¡è¶³CheckPersonå‚æ•°æµ‹è¯•ç¨‹åºä¸­æŒ‡å®šçš„æœç´¢æ¡ä»¶ã€‚å¦‚æœæ–¹æ³•æµ‹è¯•ä»ªã€‚æµ‹è¯•è¿”å›ä¸€ä¸ªçœŸå€¼ï¼Œç„¶ååœ¨Personå®ä¾‹ä¸Šè°ƒç”¨printPersonsæ–¹æ³•ã€‚ è¦æŒ‡å®šæœç´¢æ¡ä»¶ï¼Œè¯·å®ç°CheckPersonç•Œé¢ï¼š 123interface CheckPerson &#123; boolean test(Person p);&#125; ä¸‹é¢çš„ç±»é€šè¿‡æŒ‡å®šæ–¹æ³•æµ‹è¯•çš„å®ç°æ¥å®ç°CheckPersonæ¥å£ã€‚æ­¤æ–¹æ³•ç­›é€‰ç¬¦åˆç¾å›½é€‰æ‹©æ€§æœåŠ¡èµ„æ ¼çš„æˆå‘˜ï¼šå¦‚æœå…¶Personå‚æ•°ä¸ºç”·æ€§ä¸”å¹´é¾„åœ¨18å²è‡³25å²ä¹‹é—´ï¼Œåˆ™è¿”å›çœŸå€¼ï¼š 1234567class CheckPersonEligibleForSelectiveService implements CheckPerson &#123; public boolean test(Person p) &#123; return p.gender == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25; &#125;&#125; è¦ä½¿ç”¨è¯¥ç±»ï¼Œè¯·åˆ›å»ºå®ƒçš„æ–°å®ä¾‹å¹¶è°ƒç”¨printPersonsæ–¹æ³•ï¼š 12printPersons( roster, new CheckPersonEligibleForSelectiveService()); è™½ç„¶è¿™ç§æ–¹æ³•ä¸é‚£ä¹ˆè„†å¼±ï¼Œä½†å¦‚æœæ‚¨æ›´æ”¹Personçš„ç»“æ„ï¼Œåˆ™ä¸å¿…é‡å†™æ–¹æ³•ï¼Œæ‚¨ä»æœ‰é¢å¤–çš„ä»£ç ï¼šä¸€ä¸ªæ–°çš„æ¥å£å’Œä¸€ä¸ªæœ¬åœ°ç±»ï¼Œç”¨äºæ‚¨è®¡åˆ’åœ¨åº”ç”¨ç¨‹åºä¸­æ‰§è¡Œçš„æ¯ä¸ªæœç´¢ã€‚å› ä¸ºCheckPersonEligibleForSelectiveServiceå®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œæ‰€ä»¥æ‚¨å¯ä»¥ä½¿ç”¨åŒ¿åç±»è€Œä¸æ˜¯æœ¬åœ°ç±»ï¼Œå¹¶ä¸”ä¸éœ€è¦ä¸ºæ¯æ¬¡æœç´¢å£°æ˜ä¸€ä¸ªæ–°ç±»ã€‚ æ–¹æ³•4ï¼šåœ¨åŒ¿åç±»ä¸­æŒ‡å®šæœç´¢æ¡ä»¶ä»£ç ä¸‹é¢è°ƒç”¨printPersonsæ–¹æ³•çš„ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªåŒ¿åç±»ï¼Œç”¨äºè¿‡æ»¤ç¬¦åˆç¾å›½é€‰æ‹©æ€§æœåŠ¡èµ„æ ¼çš„æˆå‘˜ï¼šå¹´é¾„åœ¨18å²è‡³25å²ä¹‹é—´çš„ç”·æ€§ï¼š 12345678910printPersons( roster, new CheckPerson() &#123; public boolean test(Person p) &#123; return p.getGender() == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25; &#125; &#125;); è¿™ç§æ–¹æ³•å‡å°‘äº†æ‰€éœ€çš„ä»£ç é‡ï¼Œå› ä¸ºæ‚¨ä¸å¿…ä¸ºè¦æ‰§è¡Œçš„æ¯ä¸ªæœç´¢åˆ›å»ºæ–°ç±»ã€‚ç„¶è€Œï¼Œè€ƒè™‘åˆ°CheckPersonæ¥å£ä»…åŒ…å«ä¸€ä¸ªæ–¹æ³•ï¼ŒåŒ¿åç±»çš„è¯­æ³•éå¸¸åºå¤§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼è€Œä¸æ˜¯åŒ¿åç±»ï¼Œå¦‚ä¸‹ä¸€èŠ‚æ‰€è¿°ã€‚ æ–¹æ³•5ï¼šä½¿ç”¨Lambdaè¡¨è¾¾å¼æŒ‡å®šæœç´¢æ¡ä»¶ä»£ç CheckPersonæ¥å£æ˜¯ä¸€ä¸ªåŠŸèƒ½æ¥å£ã€‚å‡½æ•°æ¥å£æ˜¯åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„ä»»ä½•æ¥å£ã€‚ï¼ˆå‡½æ•°æ¥å£å¯èƒ½åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªé»˜è®¤æ–¹æ³•æˆ–é™æ€æ–¹æ³•ã€‚ï¼‰ç”±äºå‡½æ•°æ¥å£ä»…åŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå› æ­¤åœ¨å®ç°è¯¥æ–¹æ³•æ—¶å¯ä»¥çœç•¥è¯¥æ–¹æ³•çš„åç§°ã€‚ä¸ºæ­¤ï¼Œä¸ä½¿ç”¨åŒ¿åç±»è¡¨è¾¾å¼ï¼Œè€Œæ˜¯ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Œè¯¥è¡¨è¾¾å¼åœ¨ä»¥ä¸‹æ–¹æ³•è°ƒç”¨ä¸­çªå‡ºæ˜¾ç¤ºï¼š 123456printPersons( roster, (Person p) -&gt; p.getGender() == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25); æœ‰å…³å¦‚ä½•å®šä¹‰Lambdaè¡¨è¾¾å¼çš„ä¿¡æ¯ï¼Œè¯·å‚è§ Syntax of Lambda Expressions ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨æ ‡å‡†åŠŸèƒ½æ¥å£ä»£æ›¿CheckPersonæ¥å£ï¼Œè¿™è¿›ä¸€æ­¥å‡å°‘äº†æ‰€éœ€çš„ä»£ç é‡ã€‚ æ–¹æ³•6ï¼šä½¿ç”¨Lambdaè¡¨è¾¾å¼çš„æ ‡å‡†å‡½æ•°æ¥å£é‡æ–°è€ƒè™‘CheckPerson interfaceï¼š 123interface CheckPerson &#123; boolean test(Person p);&#125; è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ç•Œé¢ã€‚å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°æ¥å£ï¼Œå› ä¸ºå®ƒåªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚æ­¤æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°å¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚è¯¥æ–¹æ³•éå¸¸ç®€å•ï¼Œå¯èƒ½ä¸å€¼å¾—åœ¨åº”ç”¨ç¨‹åºä¸­å®šä¹‰å®ƒã€‚å› æ­¤ï¼ŒJDKå®šä¹‰äº†å‡ ä¸ªæ ‡å‡†å‡½æ•°æ¥å£ï¼Œæ‚¨å¯ä»¥åœ¨java.util.functionåŒ…ä¸­æ‰¾åˆ°è¿™äº›æ¥å£ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Predicate&lt;T&gt;æ¥å£ä»£æ›¿CheckPersonã€‚æ­¤æ¥å£åŒ…å«å¸ƒå°”æµ‹è¯•(T t)æ–¹æ³•ï¼š 123interface Predicate&lt;T&gt; &#123; boolean test(T t);&#125; Predicate&lt;T&gt;æ¥å£æ˜¯é€šç”¨æ¥å£çš„ä¸€ä¸ªç¤ºä¾‹ã€‚ï¼ˆæœ‰å…³æ³›å‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Generics (Updated) è¯¾ç¨‹ã€‚ï¼‰æ³›å‹ç±»å‹ï¼ˆå¦‚æ³›å‹æ¥å£ï¼‰åœ¨å°–æ‹¬å·ï¼ˆ&lt;&gt;ï¼‰å†…æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å‚æ•°ã€‚æ­¤æ¥å£ä»…åŒ…å«ä¸€ä¸ªç±»å‹å‚æ•°Tã€‚å½“æ‚¨ä½¿ç”¨å®é™…ç±»å‹å‚æ•°å£°æ˜æˆ–å®ä¾‹åŒ–æ³›å‹ç±»å‹æ—¶ï¼Œæ‚¨å°†æ‹¥æœ‰ä¸€ä¸ªå‚æ•°åŒ–ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå‚æ•°åŒ–ç±»å‹Predicate&lt;Person&gt;å¦‚ä¸‹ï¼š 123interface Predicate&lt;Person&gt; &#123; boolean test(Person t);&#125; æ­¤å‚æ•°åŒ–ç±»å‹åŒ…å«ä¸CheckPersonå…·æœ‰ç›¸åŒè¿”å›ç±»å‹å’Œå‚æ•°çš„æ–¹æ³•ã€‚å¸ƒå°”æµ‹è¯•ï¼ˆPerson pï¼‰ã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨Predicate&lt;T&gt;ä»£æ›¿CheckPersonï¼Œå¦‚ä¸‹æ–¹æ³•æ‰€ç¤ºï¼š 12345678public static void printPersonsWithPredicate( List&lt;Person&gt; roster, Predicate&lt;Person&gt; tester) &#123; for (Person p : roster) &#123; if (tester.test(p)) &#123; p.printPerson(); &#125; &#125;&#125; å› æ­¤ï¼Œä»¥ä¸‹æ–¹æ³•è°ƒç”¨ä¸æ–¹æ³•3ä¸­è°ƒç”¨printPersonsæ—¶ç›¸åŒï¼šåœ¨æœ¬åœ°ç±»ä¸­æŒ‡å®šæœç´¢æ¡ä»¶ä»£ç ä»¥è·å–ç¬¦åˆé€‰æ‹©æ€§æœåŠ¡èµ„æ ¼çš„æˆå‘˜ï¼š 123456printPersonsWithPredicate( roster, p -&gt; p.getGender() == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25); è¿™ä¸æ˜¯æ­¤æ–¹æ³•ä¸­ä½¿ç”¨lambdaè¡¨è¾¾å¼çš„å”¯ä¸€å¯èƒ½ä½ç½®ã€‚ä»¥ä¸‹æ–¹æ³•å»ºè®®ä½¿ç”¨lambdaè¡¨è¾¾å¼çš„å…¶ä»–æ–¹æ³•ã€‚ æ–¹æ³•7ï¼šåœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨Lambdaè¡¨è¾¾å¼é‡æ–°è€ƒè™‘printPersonsWithPredicateæ–¹æ³•ï¼Œçœ‹çœ‹æ‚¨è¿˜å¯ä»¥åœ¨å“ªé‡Œä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼š 12345678public static void printPersonsWithPredicate( List&lt;Person&gt; roster, Predicate&lt;Person&gt; tester) &#123; for (Person p : roster) &#123; if (tester.test(p)) &#123; p.printPerson(); &#125; &#125;&#125; æ­¤æ–¹æ³•æ£€æŸ¥Listå‚æ•°èŠ±åå†Œä¸­åŒ…å«çš„æ¯ä¸ªPersonå®ä¾‹æ˜¯å¦æ»¡è¶³Predicateå‚æ•°æµ‹è¯•ç¨‹åºä¸­æŒ‡å®šçš„æ¡ä»¶ã€‚å¦‚æœPersonå®ä¾‹æ»¡è¶³æµ‹è¯•äººå‘˜æŒ‡å®šçš„æ¡ä»¶ï¼Œåˆ™åœ¨Personå®ä¾‹ä¸Šè°ƒç”¨printPersonæ–¹æ³•ã€‚ æ‚¨å¯ä»¥åœ¨æ»¡è¶³æµ‹è¯•äººå‘˜æŒ‡å®šçš„æ¡ä»¶çš„Personå®ä¾‹ä¸ŠæŒ‡å®šè¦æ‰§è¡Œçš„ä¸åŒæ“ä½œï¼Œè€Œä¸æ˜¯è°ƒç”¨printPersonæ–¹æ³•ã€‚å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼æŒ‡å®šæ­¤æ“ä½œã€‚å‡è®¾æ‚¨éœ€è¦ä¸€ä¸ªç±»ä¼¼äºprintPersonçš„lambdaè¡¨è¾¾å¼ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆPersonç±»å‹çš„å¯¹è±¡ï¼‰å¹¶è¿”å›voidã€‚è®°ä½ï¼Œè¦ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Œéœ€è¦å®ç°å‡½æ•°æ¥å£ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªåŒ…å«æŠ½è±¡æ–¹æ³•çš„å‡½æ•°æ¥å£ï¼Œè¯¥æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªPersonç±»å‹çš„å‚æ•°å¹¶è¿”å›voidã€‚Consumer&lt;T&gt;æ¥å£åŒ…å«æ–¹æ³•void accept(T t)ï¼Œå®ƒå…·æœ‰è¿™äº›ç‰¹æ€§ã€‚ä»¥ä¸‹æ–¹æ³•å°†è°ƒç”¨p.printPerson()æ›¿æ¢ä¸ºè°ƒç”¨acceptæ–¹æ³•çš„Consumer&lt;Person&gt;å®ä¾‹ï¼š 12345678910public static void processPersons( List&lt;Person&gt; roster, Predicate&lt;Person&gt; tester, Consumer&lt;Person&gt; block) &#123; for (Person p : roster) &#123; if (tester.test(p)) &#123; block.accept(p); &#125; &#125;&#125; å› æ­¤ï¼Œä»¥ä¸‹æ–¹æ³•è°ƒç”¨ä¸åœ¨ä¸­è°ƒç”¨printPersonsæ—¶ç›¸åŒ Approach 3: Specify Search Criteria Code in a Local Class è·å¾—ç¬¦åˆé€‰æ‹©æ€§æœåŠ¡èµ„æ ¼çš„ä¼šå‘˜ã€‚ç”¨äºæ‰“å°æˆå‘˜çš„lambdaè¡¨è¾¾å¼çªå‡ºæ˜¾ç¤ºï¼š 1234567processPersons( roster, p -&gt; p.getGender() == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25, p -&gt; p.printPerson()); å¦‚æœæ‚¨æƒ³å¯¹æˆå‘˜çš„ä¸ªäººèµ„æ–™è¿›è¡Œæ›´å¤šå¤„ç†è€Œä¸æ˜¯æ‰“å°å‡ºæ¥ï¼Œè¯¥æ€ä¹ˆåŠã€‚å‡è®¾æ‚¨è¦éªŒè¯æˆå‘˜çš„é…ç½®æ–‡ä»¶æˆ–æ£€ç´¢ä»–ä»¬çš„è”ç³»ä¿¡æ¯ï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªåŒ…å«è¿”å›å€¼çš„æŠ½è±¡æ–¹æ³•çš„å‡½æ•°æ¥å£ã€‚Function&lt;T,R&gt;æ¥å£åŒ…å«æ–¹æ³•R apply(T T)ã€‚ä»¥ä¸‹æ–¹æ³•æ£€ç´¢å‚æ•°æ˜ å°„å™¨æŒ‡å®šçš„æ•°æ®ï¼Œç„¶åå¯¹å‚æ•°å—æŒ‡å®šçš„æ•°æ®æ‰§è¡Œæ“ä½œï¼š 123456789101112public static void processPersonsWithFunction( List&lt;Person&gt; roster, Predicate&lt;Person&gt; tester, Function&lt;Person, String&gt; mapper, Consumer&lt;String&gt; block) &#123; for (Person p : roster) &#123; if (tester.test(p)) &#123; String data = mapper.apply(p); block.accept(data); &#125; &#125;&#125; ä»¥ä¸‹æ–¹æ³•ä»åå†Œä¸­ç¬¦åˆé€‰æ‹©æ€§æœåŠ¡èµ„æ ¼çš„æ¯ä¸ªæˆå‘˜å¤„æ£€ç´¢ç”µå­é‚®ä»¶åœ°å€ï¼Œç„¶åæ‰“å°ï¼š 12345678processPersonsWithFunction( roster, p -&gt; p.getGender() == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25, p -&gt; p.getEmailAddress(), email -&gt; System.out.println(email)); æ–¹æ³•8ï¼šæ›´å¹¿æ³›åœ°ä½¿ç”¨æ³›å‹é‡æ–°è€ƒè™‘æ–¹æ³•processPersonsWithFunctionã€‚ä»¥ä¸‹æ˜¯å®ƒçš„é€šç”¨ç‰ˆæœ¬ï¼Œå®ƒæ¥å—åŒ…å«ä»»ä½•æ•°æ®ç±»å‹å…ƒç´ çš„é›†åˆä½œä¸ºå‚æ•°ï¼š 123456789101112public static &lt;X, Y&gt; void processElements( Iterable&lt;X&gt; source, Predicate&lt;X&gt; tester, Function &lt;X, Y&gt; mapper, Consumer&lt;Y&gt; block) &#123; for (X p : source) &#123; if (tester.test(p)) &#123; Y data = mapper.apply(p); block.accept(data); &#125; &#125;&#125; è¦æ‰“å°ç¬¦åˆé€‰æ‹©æ€§æœåŠ¡èµ„æ ¼çš„æˆå‘˜çš„ç”µå­é‚®ä»¶åœ°å€ï¼Œè¯·æŒ‰å¦‚ä¸‹æ–¹å¼è°ƒç”¨processElementsæ–¹æ³•ï¼š 12345678processElements( roster, p -&gt; p.getGender() == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25, p -&gt; p.getEmailAddress(), email -&gt; System.out.println(email)); æ­¤æ–¹æ³•è°ƒç”¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š ä»é›†åˆæºè·å–å¯¹è±¡æºã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒä»é›†åˆèŠ±åå†Œä¸­è·å–Personå¯¹è±¡çš„æºã€‚æ³¨æ„ï¼Œé›†åˆèŠ±åå†Œæ˜¯Listç±»å‹çš„é›†åˆï¼Œä¹Ÿæ˜¯Iterableç±»å‹çš„å¯¹è±¡ã€‚ è¿‡æ»¤ä¸è°“è¯å¯¹è±¡æµ‹è¯•å™¨åŒ¹é…çš„å¯¹è±¡ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒPredicateå¯¹è±¡æ˜¯ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œå®ƒæŒ‡å®šå“ªäº›æˆå‘˜æœ‰èµ„æ ¼è·å¾—é€‰æ‹©æ€§æœåŠ¡ã€‚ å°†æ¯ä¸ªè¿‡æ»¤å¯¹è±¡æ˜ å°„åˆ°Functionå¯¹è±¡æ˜ å°„å™¨æŒ‡å®šçš„å€¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒFunctionå¯¹è±¡æ˜¯ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œå®ƒè¿”å›æˆå‘˜çš„ç”µå­é‚®ä»¶åœ°å€ã€‚ å¯¹Consumerå¯¹è±¡å—æŒ‡å®šçš„æ¯ä¸ªæ˜ å°„å¯¹è±¡æ‰§è¡Œæ“ä½œã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒConsumerå¯¹è±¡æ˜¯ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œå®ƒæ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²æ˜¯Functionå¯¹è±¡è¿”å›çš„ç”µå­é‚®ä»¶åœ°å€ã€‚ æ‚¨å¯ä»¥ç”¨èšåˆæ“ä½œæ›¿æ¢è¿™äº›æ“ä½œä¸­çš„æ¯ä¸€ä¸ªã€‚ æ–¹æ³•9ï¼šä½¿ç”¨æ¥å—Lambdaè¡¨è¾¾å¼ä½œä¸ºå‚æ•°çš„èšåˆè¿ç®—ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨èšåˆæ“ä½œæ‰“å°æ”¶é›†åå†Œä¸­ç¬¦åˆé€‰æ‹©æ€§æœåŠ¡èµ„æ ¼çš„æˆå‘˜çš„ç”µå­é‚®ä»¶åœ°å€ï¼š 12345678roster .stream() .filter( p -&gt; p.getGender() == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25) .map(p -&gt; p.getEmailAddress()) .forEach(email -&gt; System.out.println(email)); ä¸‹è¡¨å°†processElementæ–¹æ³•æ‰§è¡Œçš„æ¯ä¸ªæ“ä½œä¸ç›¸åº”çš„èšåˆæ“ä½œè¿›è¡Œæ˜ å°„ï¼š processElements Action èšåˆæ“ä½œ è·å–å¯¹è±¡æº Stream&lt;E&gt; stream() ç­›é€‰ä¸â€œè°“è¯â€å¯¹è±¡åŒ¹é…çš„å¯¹è±¡ Stream&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate) å°†å¯¹è±¡æ˜ å°„åˆ°â€œFunctionâ€å¯¹è±¡æŒ‡å®šçš„å¦ä¸€ä¸ªå€¼ &lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T,? extends R&gt; mapper) æ‰§è¡Œâ€œæ¶ˆè´¹è€…â€å¯¹è±¡æŒ‡å®šçš„æ“ä½œ void forEach(Consumer&lt;? super T&gt; action) æ“ä½œfilterã€mapå’ŒforEachæ˜¯èšåˆæ“ä½œã€‚èšåˆæ“ä½œå¤„ç†æ¥è‡ªæµçš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç›´æ¥æ¥è‡ªé›†åˆï¼ˆè¿™å°±æ˜¯æœ¬ä¾‹ä¸­è°ƒç”¨çš„ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯æµçš„åŸå› ï¼‰ã€‚æµæ˜¯ä¸€ç³»åˆ—å…ƒç´ ã€‚ä¸é›†åˆä¸åŒï¼Œå®ƒä¸æ˜¯å­˜å‚¨å…ƒç´ çš„æ•°æ®ç»“æ„ã€‚ç›¸åï¼Œæµé€šè¿‡ç®¡é“ä»æºï¼ˆä¾‹å¦‚é›†åˆï¼‰æ‰¿è½½å€¼ã€‚ç®¡é“æ˜¯ä¸€ç³»åˆ—æµæ“ä½œï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒæ˜¯Eachçš„è¿‡æ»¤å™¨æ˜ å°„ã€‚æ­¤å¤–ï¼Œèšåˆæ“ä½œé€šå¸¸æ¥å—lambdaè¡¨è¾¾å¼ä½œä¸ºå‚æ•°ï¼Œä½¿æ‚¨èƒ½å¤Ÿè‡ªå®šä¹‰å®ƒä»¬çš„è¡Œä¸ºæ–¹å¼ã€‚ æœ‰å…³èšåˆæ“ä½œçš„è¯¦ç»†è®¨è®ºï¼Œè¯·å‚é˜… Aggregate Operations è¯¾ç¨‹ã€‚ GUIåº”ç”¨ç¨‹åºä¸­çš„Lambdaè¡¨è¾¾å¼è¦åœ¨å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰åº”ç”¨ç¨‹åºä¸­å¤„ç†äº‹ä»¶ï¼Œä¾‹å¦‚é”®ç›˜åŠ¨ä½œã€é¼ æ ‡åŠ¨ä½œå’Œæ»šåŠ¨åŠ¨ä½œï¼Œé€šå¸¸éœ€è¦åˆ›å»ºäº‹ä»¶å¤„ç†ç¨‹åºï¼Œè¿™é€šå¸¸æ¶‰åŠå®ç°ç‰¹å®šçš„ç•Œé¢ã€‚é€šå¸¸ï¼Œäº‹ä»¶å¤„ç†ç¨‹åºæ¥å£æ˜¯åŠŸèƒ½æ¥å£ï¼›ä»–ä»¬å¾€å¾€åªæœ‰ä¸€ç§æ–¹æ³•ã€‚ åœ¨JavaFXç¤ºä¾‹ HelloWorld.java ï¼ˆåœ¨å‰é¢çš„Anonymous Classesä¸€èŠ‚ä¸­è®¨è®ºè¿‡ï¼‰ï¼Œæ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„è¯­å¥ä¸­å°†çªå‡ºæ˜¾ç¤ºçš„åŒ¿åç±»æ›¿æ¢ä¸ºlambdaè¡¨è¾¾å¼ï¼š 1234567btn.setOnAction(new EventHandler&lt;ActionEvent&gt;() &#123; @Override public void handle(ActionEvent event) &#123; System.out.println(&quot;Hello World!&quot;); &#125;&#125;); æ–¹æ³•è°ƒç”¨btnã€‚setOnActionæŒ‡å®šå½“æ‚¨é€‰æ‹©btnå¯¹è±¡è¡¨ç¤ºçš„æŒ‰é’®æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚æ­¤æ–¹æ³•éœ€è¦EventHandler&lt;ActionEvent&gt;ç±»å‹çš„å¯¹è±¡ã€‚EventHandler&lt;ActionEvent&gt;æ¥å£åªåŒ…å«ä¸€ä¸ªæ–¹æ³•ï¼Œå³void handle(T event)ã€‚æ­¤æ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°æ¥å£ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çªå‡ºæ˜¾ç¤ºçš„lambdaè¡¨è¾¾å¼æ¥æ›¿æ¢å®ƒï¼š 123btn.setOnAction( event -&gt; System.out.println(&quot;Hello World!&quot;)); Lambdaè¡¨è¾¾å¼çš„è¯­æ³•lambdaè¡¨è¾¾å¼ç”±ä»¥ä¸‹å†…å®¹ç»„æˆï¼š ç”¨é€—å·åˆ†éš”çš„å½¢å¼å‚æ•°åˆ—è¡¨ï¼Œç”¨æ‹¬å·æ‹¬èµ·æ¥ã€‚CheckPersonã€‚æµ‹è¯•æ–¹æ³•åŒ…å«ä¸€ä¸ªå‚æ•°pï¼Œå®ƒè¡¨ç¤ºPersonç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚ æ³¨æ„ï¼šå¯ä»¥çœç•¥lambdaè¡¨è¾¾å¼ä¸­å‚æ•°çš„æ•°æ®ç±»å‹ã€‚æ­¤å¤–ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥çœç•¥æ‹¬å·ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹lambdaè¡¨è¾¾å¼ä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼š 123p -&gt; p.getGender() == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25 ç®­å¤´æ ‡è®°ï¼Œ-&gt; æ­£æ–‡ï¼Œç”±å•ä¸ªè¡¨è¾¾å¼æˆ–è¯­å¥å—ç»„æˆã€‚æ­¤ç¤ºä¾‹ä½¿ç”¨ä»¥ä¸‹è¡¨è¾¾å¼ 123p.getGender() == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25 å¦‚æœæŒ‡å®šäº†ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œåˆ™Javaè¿è¡Œæ—¶å°†è®¡ç®—è¯¥è¡¨è¾¾å¼ï¼Œç„¶åè¿”å›å…¶å€¼ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨returnè¯­å¥ï¼š 12345p -&gt; &#123; return p.getGender() == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25;&#125; returnè¯­å¥ä¸æ˜¯è¡¨è¾¾å¼ï¼›åœ¨lambdaè¡¨è¾¾å¼ä¸­ï¼Œå¿…é¡»å°†è¯­å¥æ‹¬åœ¨å¤§æ‹¬å·ï¼ˆ{}ï¼‰ä¸­ã€‚ä½†æ˜¯ï¼Œæ‚¨ä¸å¿…å°†voidæ–¹æ³•è°ƒç”¨æ‹¬åœ¨å¤§æ‹¬å·ä¸­ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯æœ‰æ•ˆçš„lambdaè¡¨è¾¾å¼ï¼š 1email -&gt; System.out.println(email) æ³¨æ„ï¼Œlambdaè¡¨è¾¾å¼çœ‹èµ·æ¥å¾ˆåƒæ–¹æ³•å£°æ˜ï¼›æ‚¨å¯ä»¥å°†lambdaè¡¨è¾¾å¼è§†ä¸ºæ²¡æœ‰åç§°çš„åŒ¿åæ–¹æ³•æ–¹æ³•ã€‚ ä»¥ä¸‹ç¤ºä¾‹Calculatoræ˜¯é‡‡ç”¨å¤šä¸ªå½¢å¼å‚æ•°çš„lambdaè¡¨è¾¾å¼çš„ç¤ºä¾‹ï¼š 123456789101112131415161718192021public class Calculator &#123; interface IntegerMath &#123; int operation(int a, int b); &#125; public int operateBinary(int a, int b, IntegerMath op) &#123; return op.operation(a, b); &#125; public static void main(String... args) &#123; Calculator myApp = new Calculator(); IntegerMath addition = (a, b) -&gt; a + b; IntegerMath subtraction = (a, b) -&gt; a - b; System.out.println(&quot;40 + 2 = &quot; + myApp.operateBinary(40, 2, addition)); System.out.println(&quot;20 - 10 = &quot; + myApp.operateBinary(20, 10, subtraction)); &#125;&#125; æ–¹æ³•operateBinaryå¯¹ä¸¤ä¸ªæ•´æ•°æ“ä½œæ•°æ‰§è¡Œæ•°å­¦è¿ç®—ã€‚æ“ä½œæœ¬èº«ç”±IntegerMathçš„å®ä¾‹æŒ‡å®šã€‚è¯¥ç¤ºä¾‹ä½¿ç”¨lambdaè¡¨è¾¾å¼å®šä¹‰äº†ä¸¤ä¸ªè¿ç®—ï¼šåŠ æ³•å’Œå‡æ³•ã€‚è¯¥ç¤ºä¾‹æ˜¾ç¤ºä»¥ä¸‹å†…å®¹ï¼š 1240 + 2 = 4220 - 10 = 10 è®¿é—®å°é—­ä½œç”¨åŸŸçš„å±€éƒ¨å˜é‡ä¸æœ¬åœ°ç±»å’ŒåŒ¿åç±»ä¸€æ ·ï¼Œlambdaè¡¨è¾¾å¼å¯ä»¥æ•è·å˜é‡ï¼›å®ƒä»¬å¯¹å°é—­èŒƒå›´çš„å±€éƒ¨å˜é‡å…·æœ‰ç›¸åŒçš„è®¿é—®æƒé™ã€‚ç„¶è€Œï¼Œä¸æœ¬åœ°ç±»å’ŒåŒ¿åç±»ä¸åŒï¼Œlambdaè¡¨è¾¾å¼æ²¡æœ‰ä»»ä½•é˜´å½±é—®é¢˜ï¼ˆæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…é˜´å½±ï¼‰ã€‚Lambdaè¡¨è¾¾å¼å…·æœ‰è¯æ±‡èŒƒå›´ã€‚è¿™æ„å‘³ç€å®ƒä»¬ä¸ä¼šä»çˆ¶ç±»å‹ç»§æ‰¿ä»»ä½•åç§°ï¼Œä¹Ÿä¸ä¼šå¼•å…¥æ–°çš„ä½œç”¨åŸŸçº§åˆ«ã€‚lambdaè¡¨è¾¾å¼ä¸­çš„å£°æ˜çš„è§£é‡Šä¸å®ƒä»¬åœ¨å°é—­ç¯å¢ƒä¸­çš„è§£é‡Šç›¸åŒã€‚ä»¥ä¸‹ç¤ºä¾‹LambdaScopeTestæ¼”ç¤ºäº†è¿™ä¸€ç‚¹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041import java.util.function.Consumer; public class LambdaScopeTest &#123; public int x = 0; class FirstLevel &#123; public int x = 1; void methodInFirstLevel(int x) &#123; int z = 2; Consumer&lt;Integer&gt; myConsumer = (y) -&gt; &#123; // The following statement causes the compiler to generate // the error &quot;Local variable z defined in an enclosing scope // must be final or effectively final&quot; // // z = 99; System.out.println(&quot;x = &quot; + x); System.out.println(&quot;y = &quot; + y); System.out.println(&quot;z = &quot; + z); System.out.println(&quot;this.x = &quot; + this.x); System.out.println(&quot;LambdaScopeTest.this.x = &quot; + LambdaScopeTest.this.x); &#125;; myConsumer.accept(x); &#125; &#125; public static void main(String... args) &#123; LambdaScopeTest st = new LambdaScopeTest(); LambdaScopeTest.FirstLevel fl = st.new FirstLevel(); fl.methodInFirstLevel(23); &#125;&#125; æ­¤ç¤ºä¾‹ç”Ÿæˆä»¥ä¸‹è¾“å‡ºï¼š 12345x = 23y = 23z = 2this.x = 1LambdaScopeTest.this.x = 0 å¦‚æœåœ¨lambdaè¡¨è¾¾å¼myConsumerçš„å£°æ˜ä¸­ç”¨å‚æ•°xä»£æ›¿yï¼Œåˆ™ç¼–è¯‘å™¨å°†ç”Ÿæˆé”™è¯¯ï¼š 123Consumer&lt;Integer&gt; myConsumer = (x) -&gt; &#123; // ...&#125; ç¼–è¯‘å™¨ç”Ÿæˆé”™è¯¯â€œLambdaè¡¨è¾¾å¼çš„å‚æ•°xæ— æ³•é‡æ–°å£°æ˜åœ¨å°é—­èŒƒå›´ä¸­å®šä¹‰çš„å¦ä¸€ä¸ªå±€éƒ¨å˜é‡â€ï¼Œå› ä¸ºLambdaè¡¨è¾¾å¼æ²¡æœ‰å¼•å…¥æ–°çš„èŒƒå›´çº§åˆ«ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥ç›´æ¥è®¿é—®å°é—­èŒƒå›´çš„å­—æ®µã€æ–¹æ³•å’Œå±€éƒ¨å˜é‡ã€‚ä¾‹å¦‚ï¼Œlambdaè¡¨è¾¾å¼ç›´æ¥è®¿é—®æ–¹æ³•methodInFirstLevelçš„å‚æ•°xã€‚è¦è®¿é—®å°é—­ç±»ä¸­çš„å˜é‡ï¼Œè¯·ä½¿ç”¨å…³é”®å­—thisã€‚åœ¨æœ¬ä¾‹ä¸­ã€‚xæ˜¯æŒ‡æˆå‘˜å˜é‡FirstLevel.xã€‚ ç„¶è€Œï¼Œä¸æœ¬åœ°ç±»å’ŒåŒ¿åç±»ä¸€æ ·ï¼Œlambdaè¡¨è¾¾å¼åªèƒ½è®¿é—®å°é—­å—çš„æœ€ç»ˆæˆ–æœ‰æ•ˆæœ€ç»ˆçš„å±€éƒ¨å˜é‡å’Œå‚æ•°ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå˜é‡zå®é™…ä¸Šæ˜¯finalï¼›å…¶å€¼åœ¨åˆå§‹åŒ–åä»æœªæ›´æ”¹ã€‚ä½†æ˜¯ï¼Œå‡è®¾æ‚¨åœ¨lambdaè¡¨è¾¾å¼myConsumerä¸­æ·»åŠ äº†ä»¥ä¸‹èµ‹å€¼è¯­å¥ï¼š 1234Consumer&lt;Integer&gt; myConsumer = (y) -&gt; &#123; z = 99; // ...&#125; ç”±äºè¿™ä¸ªèµ‹å€¼è¯­å¥ï¼Œå˜é‡zå®é™…ä¸Šä¸å†æ˜¯finalã€‚å› æ­¤ï¼ŒJavaç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€æ¡ç±»ä¼¼äºâ€œåœ¨å°é—­èŒƒå›´ä¸­å®šä¹‰çš„æœ¬åœ°å˜é‡zå¿…é¡»æ˜¯finalæˆ–å®é™…ä¸Šæ˜¯finalâ€çš„é”™è¯¯æ¶ˆæ¯ã€‚ ç›®æ ‡ç±»å‹å¦‚ä½•ç¡®å®šlambdaè¡¨è¾¾å¼çš„ç±»å‹ï¼Ÿå›æƒ³ä¸€ä¸‹lambdaè¡¨è¾¾å¼ï¼Œè¯¥è¡¨è¾¾å¼é€‰æ‹©äº†å¹´é¾„åœ¨18è‡³25å²ä¹‹é—´çš„ç”·æ€§æˆå‘˜ï¼š 123p -&gt; p.getGender() == Person.Sex.MALE &amp;&amp; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25 æ­¤lambdaè¡¨è¾¾å¼ç”¨äºä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š public static void printPersons(List&lt;Person&gt; roster, CheckPerson tester) in Approach 3: Specify Search Criteria Code in a Local Class public void printPersonsWithPredicate(List&lt;Person&gt; roster, Predicate&lt;Person&gt; tester) in Approach 6: Use Standard Functional Interfaces with Lambda Expressions å½“Javaè¿è¡Œæ—¶è°ƒç”¨printPersonæ–¹æ³•æ—¶ï¼Œå®ƒéœ€è¦CheckPersonçš„æ•°æ®ç±»å‹ï¼Œå› æ­¤lambdaè¡¨è¾¾å¼æ˜¯è¿™ç§ç±»å‹çš„ã€‚ç„¶è€Œï¼Œå½“Javaè¿è¡Œæ—¶è°ƒç”¨printPersonsWithPredicateæ–¹æ³•æ—¶ï¼Œå®ƒéœ€è¦Predicateï¼œPersonï¼çš„æ•°æ®ç±»å‹ï¼Œå› æ­¤lambdaè¡¨è¾¾å¼æ˜¯è¿™ç§ç±»å‹çš„ã€‚è¿™äº›æ–¹æ³•æ‰€æœŸæœ›çš„æ•°æ®ç±»å‹ç§°ä¸ºç›®æ ‡ç±»å‹ã€‚ä¸ºäº†ç¡®å®šlambdaè¡¨è¾¾å¼çš„ç±»å‹ï¼ŒJavaç¼–è¯‘å™¨ä½¿ç”¨æ‰¾åˆ°lambdaè¡¨è¾¾å¼æ‰€åœ¨çš„ä¸Šä¸‹æ–‡æˆ–æƒ…å†µçš„ç›®æ ‡ç±»å‹ã€‚å› æ­¤ï¼Œæ‚¨åªèƒ½åœ¨Javaç¼–è¯‘å™¨å¯ä»¥ç¡®å®šç›®æ ‡ç±»å‹çš„æƒ…å†µä¸‹ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼š å˜é‡å£°æ˜ èµ‹å€¼ è¿”å›è¯­å¥ æ•°ç»„åˆå§‹åŒ–å™¨ æ–¹æ³•æˆ–æ„é€ å‡½æ•°å‚æ•° Lambdaè¡¨è¾¾å¼ä½“ æ¡ä»¶è¡¨è¾¾å¼ï¼Œ? : å¼ºåˆ¶è½¬æ¢è¡¨è¾¾å¼ ç›®æ ‡ç±»å‹å’Œæ–¹æ³•å‚æ•°å¯¹äºæ–¹æ³•å‚æ•°ï¼ŒJavaç¼–è¯‘å™¨ä½¿ç”¨ä¸¤ä¸ªå…¶ä»–è¯­è¨€ç‰¹æ€§æ¥ç¡®å®šç›®æ ‡ç±»å‹ï¼šé‡è½½è§£æå’Œç±»å‹å‚æ•°æ¨æ–­ã€‚ è€ƒè™‘ä»¥ä¸‹ä¸¤ä¸ªåŠŸèƒ½æ¥å£ ( java.lang.Runnable and java.util.concurrent.Callable): 1234567public interface Runnable &#123; void run();&#125;public interface Callable&lt;V&gt; &#123; V call();&#125; æ–¹æ³•Runnableã€‚runä¸è¿”å›å€¼ï¼Œè€ŒCallable&lt;V&gt;ã€‚å‘¼å«æˆåŠŸã€‚ å‡è®¾æ‚¨å·²æŒ‰å¦‚ä¸‹æ–¹å¼é‡è½½æ–¹æ³•è°ƒç”¨ï¼ˆæœ‰å…³ é‡è½½ Methods çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å®šä¹‰æ–¹æ³•ï¼‰ï¼š 1234567void invoke(Runnable r) &#123; r.run();&#125;&lt;T&gt; T invoke(Callable&lt;T&gt; c) &#123; return c.call();&#125; ä»¥ä¸‹è¯­å¥å°†è°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Ÿ 1String s = invoke(() -&gt; &quot;done&quot;); æ–¹æ³•è°ƒç”¨ï¼ˆCallable&lt;T&gt;ï¼‰å°†è¢«è°ƒç”¨ï¼Œå› ä¸ºè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå€¼ï¼›æ–¹æ³•invokeï¼ˆRunnableï¼‰æ²¡æœ‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œlambdaè¡¨è¾¾å¼ï¼ˆï¼‰-&gt;â€œdoneâ€çš„ç±»å‹æ˜¯Callable&lt;T&gt;ã€‚ åºåˆ—åŒ–å¦‚æœlambdaè¡¨è¾¾å¼çš„ç›®æ ‡ç±»å‹åŠå…¶æ•è·çš„å‚æ•°æ˜¯å¯ serialize çš„ï¼Œåˆ™å¯ä»¥å¯¹å…¶è¿›è¡Œåºåˆ—åŒ–ã€‚ç„¶è€Œï¼Œä¸ inner classes,ä¸€æ ·ï¼Œå¼ºçƒˆä¸é¼“åŠ±lambdaè¡¨è¾¾å¼çš„åºåˆ—åŒ–ã€‚ æ–¹æ³•å‚è€ƒä½¿ç”¨ lambda expressions åˆ›å»ºåŒ¿åæ–¹æ³•ã€‚ç„¶è€Œï¼Œæœ‰æ—¶lambdaè¡¨è¾¾å¼åªä¼šè°ƒç”¨ç°æœ‰æ–¹æ³•ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼ŒæŒ‰åç§°å¼•ç”¨ç°æœ‰æ–¹æ³•é€šå¸¸æ›´æ¸…æ™°ã€‚æ–¹æ³•å¼•ç”¨ä½¿æ‚¨èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ï¼›å¯¹äºå·²ç»æœ‰åç§°çš„æ–¹æ³•ï¼Œå®ƒä»¬æ˜¯ç´§å‡‘ã€æ˜“äºè¯»å–çš„lambdaè¡¨è¾¾å¼ã€‚ å†æ¬¡è€ƒè™‘Lambdaè¡¨è¾¾å¼ä¸€èŠ‚ä¸­è®¨è®ºçš„Personç±»ï¼š 1234567891011121314151617181920public class Person &#123; // ... LocalDate birthday; public int getAge() &#123; // ... &#125; public LocalDate getBirthday() &#123; return birthday; &#125; public static int compareByAge(Person a, Person b) &#123; return a.birthday.compareTo(b.birthday); &#125; // ...&#125; å‡è®¾æ‚¨çš„ç¤¾äº¤ç½‘ç»œåº”ç”¨ç¨‹åºçš„æˆå‘˜åŒ…å«åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæ‚¨å¸Œæœ›æŒ‰å¹´é¾„å¯¹è¯¥æ•°ç»„è¿›è¡Œæ’åºã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼ˆåœ¨ç¤ºä¾‹MethodReferencesTestä¸­æ‰¾åˆ°æœ¬èŠ‚ä¸­æè¿°çš„ä»£ç æ‘˜å½•ï¼‰ï¼š 123456789Person[] rosterAsArray = roster.toArray(new Person[roster.size()]);class PersonAgeComparator implements Comparator&lt;Person&gt; &#123; public int compare(Person a, Person b) &#123; return a.getBirthday().compareTo(b.getBirthday()); &#125;&#125; Arrays.sort(rosterAsArray, new PersonAgeComparator()); æ­¤æ’åºè°ƒç”¨çš„æ–¹æ³•ç­¾åå¦‚ä¸‹ï¼š 1static &lt;T&gt; void sort(T[] a, Comparator&lt;? super T&gt; c) æ³¨æ„ï¼Œæ¥å£Comparatoræ˜¯ä¸€ä¸ªåŠŸèƒ½æ¥å£ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å®šä¹‰å¹¶åˆ›å»ºå®ç°Comparatorçš„ç±»çš„æ–°å®ä¾‹ï¼š 12345Arrays.sort(rosterAsArray, (Person a, Person b) -&gt; &#123; return a.getBirthday().compareTo(b.getBirthday()); &#125;); ä½†æ˜¯ï¼Œè¿™ç§æ¯”è¾ƒä¸¤ä¸ªPersonå®ä¾‹çš„å‡ºç”Ÿæ—¥æœŸçš„æ–¹æ³•å·²ç»ä½œä¸ºPerson.compareByAgeå­˜åœ¨ã€‚æ‚¨å¯ä»¥åœ¨lambdaè¡¨è¾¾å¼çš„ä¸»ä½“ä¸­è°ƒç”¨æ­¤æ–¹æ³•ï¼š 123Arrays.sort(rosterAsArray, (a, b) -&gt; Person.compareByAge(a, b)); ç”±äºæ­¤lambdaè¡¨è¾¾å¼è°ƒç”¨ç°æœ‰æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨è€Œä¸æ˜¯lambdaè¡¨è¾¾å¼ï¼š 1Arrays.sort(rosterAsArray, Person::compareByAge); æ–¹æ³•å¼•ç”¨Person::compareByAgeåœ¨è¯­ä¹‰ä¸Šä¸lambdaè¡¨è¾¾å¼(a, b) -&gt; Person.compareByAge(a, b)æ¯”è¾ƒã€‚æ¯ä¸ªéƒ½å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š å®ƒçš„æ­£å¼å‚æ•°åˆ—è¡¨æ˜¯ä»Comparator&lt;Person&gt;å¤åˆ¶çš„ã€‚æ¯”è¾ƒï¼Œå³(Person, Person)ã€‚ å®ƒçš„ä¸»ä½“è°ƒç”¨æ–¹æ³•Person.compareByAgeã€‚ æ–¹æ³•å¼•ç”¨çš„ç±»å‹æœ‰å››ç§æ–¹æ³•å‚è€ƒï¼š Kind Syntax Examples å¯¹é™æ€æ–¹æ³•çš„å¼•ç”¨ ContainingClass::staticMethodName Person::compareByAge MethodReferencesExamples::appendStrings å¯¹ç‰¹å®šå¯¹è±¡çš„å®ä¾‹æ–¹æ³•çš„å¼•ç”¨ containingObject::instanceMethodName myComparisonProvider::compareByName myApp::appendStrings2 å¯¹ç‰¹å®šç±»å‹çš„ä»»æ„å¯¹è±¡çš„å®ä¾‹æ–¹æ³•çš„å¼•ç”¨ ContainingType::methodName String::compareToIgnoreCase String::concat å¯¹æ„é€ å‡½æ•°çš„å¼•ç”¨ ClassName::new HashSet::new ä»¥ä¸‹ç¤ºä¾‹MethodReferencesExamplesåŒ…å«å‰ä¸‰ç§ç±»å‹çš„æ–¹æ³•å¼•ç”¨çš„ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738import java.util.function.BiFunction;public class MethodReferencesExamples &#123; public static &lt;T&gt; T mergeThings(T a, T b, BiFunction&lt;T, T, T&gt; merger) &#123; return merger.apply(a, b); &#125; public static String appendStrings(String a, String b) &#123; return a + b; &#125; public String appendStrings2(String a, String b) &#123; return a + b; &#125; public static void main(String[] args) &#123; MethodReferencesExamples myApp = new MethodReferencesExamples(); // Calling the method mergeThings with a lambda expression System.out.println(MethodReferencesExamples. mergeThings(&quot;Hello &quot;, &quot;World!&quot;, (a, b) -&gt; a + b)); // Reference to a static method System.out.println(MethodReferencesExamples. mergeThings(&quot;Hello &quot;, &quot;World!&quot;, MethodReferencesExamples::appendStrings)); // Reference to an instance method of a particular object System.out.println(MethodReferencesExamples. mergeThings(&quot;Hello &quot;, &quot;World!&quot;, myApp::appendStrings2)); // Reference to an instance method of an arbitrary object of a // particular type System.out.println(MethodReferencesExamples. mergeThings(&quot;Hello &quot;, &quot;World!&quot;, String::concat)); &#125;&#125; æ‰€æœ‰ System.out.println() è¯­å¥æ‰“å°ç›¸åŒçš„å†…å®¹ï¼š Hello World! BiFunction æ˜¯ java.util.function åŒ…ä¸­è®¸å¤šå‡½æ•°æ¥å£ä¹‹ä¸€ã€‚BiFunctionå‡½æ•°æ¥å£å¯ä»¥è¡¨ç¤ºæ¥å—ä¸¤ä¸ªå‚æ•°å¹¶ç”Ÿæˆç»“æœçš„lambdaè¡¨è¾¾å¼æˆ–æ–¹æ³•å¼•ç”¨ã€‚ å¯¹é™æ€æ–¹æ³•çš„å¼•ç”¨æ–¹æ³•å¼•ç”¨Person::compareByAgeå’ŒMethodReferencesExample::appendStringæ˜¯å¯¹é™æ€æ–¹æ³•çš„å¼•ç”¨ã€‚ å¯¹ç‰¹å®šå¯¹è±¡å®ä¾‹æ–¹æ³•çš„å¼•ç”¨ä»¥ä¸‹æ˜¯å¯¹ç‰¹å®šå¯¹è±¡çš„å®ä¾‹æ–¹æ³•çš„å¼•ç”¨ç¤ºä¾‹ï¼š 1234567891011class ComparisonProvider &#123; public int compareByName(Person a, Person b) &#123; return a.getName().compareTo(b.getName()); &#125; public int compareByAge(Person a, Person b) &#123; return a.getBirthday().compareTo(b.getBirthday()); &#125;&#125;ComparisonProvider myComparisonProvider = new ComparisonProvider();Arrays.sort(rosterAsArray, myComparisonProvider::compareByName); æ–¹æ³•å¼•ç”¨myComparisonProvider::compareByNameè°ƒç”¨ä½œä¸ºå¯¹è±¡myComparison Providerçš„ä¸€éƒ¨åˆ†çš„æ–¹æ³•compareByNameã€‚JREæ¨æ–­æ–¹æ³•ç±»å‹å‚æ•°ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º(Person, Person)ã€‚ ç±»ä¼¼åœ°ï¼Œæ–¹æ³•å¼•ç”¨myApp::appendStrings2è°ƒç”¨ä½œä¸ºå¯¹è±¡myAppä¸€éƒ¨åˆ†çš„æ–¹æ³•appendString2ã€‚JREæ¨æ–­æ–¹æ³•ç±»å‹å‚æ•°ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º(String,String)ã€‚ å¯¹ç‰¹å®šç±»å‹çš„ä»»æ„å¯¹è±¡çš„å®ä¾‹æ–¹æ³•çš„å¼•ç”¨ä»¥ä¸‹æ˜¯å¯¹ç‰¹å®šç±»å‹çš„ä»»æ„å¯¹è±¡çš„å®ä¾‹æ–¹æ³•çš„å¼•ç”¨ç¤ºä¾‹ï¼š 123String[] stringArray = &#123; &quot;Barbara&quot;, &quot;James&quot;, &quot;Mary&quot;, &quot;John&quot;, &quot;Patricia&quot;, &quot;Robert&quot;, &quot;Michael&quot;, &quot;Linda&quot; &#125;;Arrays.sort(stringArray, String::compareToIgnoreCase); æ–¹æ³•å¼•ç”¨String:ï¼šcompareToIgnoreCaseçš„ç­‰æ•ˆlambdaè¡¨è¾¾å¼å°†å…·æœ‰å½¢å¼å‚æ•°åˆ—è¡¨(Stringaï¼ŒStringb)ï¼Œå…¶ä¸­aå’Œbæ˜¯ç”¨äºæ›´å¥½åœ°æè¿°æ­¤ç¤ºä¾‹çš„ä»»æ„åç§°ã€‚æ–¹æ³•å¼•ç”¨å°†è°ƒç”¨æ–¹æ³•a.compareToIgnoreCase(b)ã€‚ ç±»ä¼¼åœ°ï¼Œæ–¹æ³•å¼•ç”¨String::concatå°†è°ƒç”¨æ–¹æ³•a.concat(b)ã€‚ å¯¹æ„é€ å‡½æ•°çš„å¼•ç”¨å¯ä»¥ä½¿ç”¨åç§°newä»¥ä¸é™æ€æ–¹æ³•ç›¸åŒçš„æ–¹å¼å¼•ç”¨æ„é€ å‡½æ•°ã€‚ä»¥ä¸‹æ–¹æ³•å°†å…ƒç´ ä»ä¸€ä¸ªé›†åˆå¤åˆ¶åˆ°å¦ä¸€ä¸ªé›†åˆï¼š 1234567891011public static &lt;T, SOURCE extends Collection&lt;T&gt;, DEST extends Collection&lt;T&gt;&gt; DEST transferElements( SOURCE sourceCollection, Supplier&lt;DEST&gt; collectionFactory) &#123; DEST result = collectionFactory.get(); for (T t : sourceCollection) &#123; result.add(t); &#125; return result;&#125; å‡½æ•°æ¥å£SupplieråŒ…å«ä¸€ä¸ªä¸æ¥å—å‚æ•°å¹¶è¿”å›å¯¹è±¡çš„getæ–¹æ³•ã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼è°ƒç”¨transferElementæ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12Set&lt;Person&gt; rosterSetLambda = transferElements(roster, () -&gt; &#123; return new HashSet&lt;&gt;(); &#125;); å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°å¼•ç”¨ä»£æ›¿lambdaè¡¨è¾¾å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1Set&lt;Person&gt; rosterSet = transferElements(roster, HashSet::new); Javaç¼–è¯‘å™¨æ¨æ–­æ‚¨å¸Œæœ›åˆ›å»ºåŒ…å«Personç±»å‹å…ƒç´ çš„HashSeté›†åˆã€‚æˆ–è€…ï¼Œå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼æŒ‡å®šï¼š 1Set&lt;Person&gt; rosterSet = transferElements(roster, HashSet&lt;Person&gt;::new); ä½•æ—¶ä½¿ç”¨åµŒå¥—ç±»ã€æœ¬åœ°ç±»ã€åŒ¿åç±»å’ŒLambdaè¡¨è¾¾å¼å¦‚åµŒå¥—ç±»ä¸€èŠ‚æ‰€è¿°ï¼ŒåµŒå¥—ç±»ä½¿æ‚¨èƒ½å¤Ÿå¯¹ä»…åœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨çš„ç±»è¿›è¡Œé€»è¾‘åˆ†ç»„ï¼Œå¢åŠ å°è£…çš„ä½¿ç”¨ï¼Œå¹¶åˆ›å»ºæ›´å¯è¯»å’Œå¯ç»´æŠ¤çš„ä»£ç ã€‚æœ¬åœ°ç±»ã€åŒ¿åç±»å’Œlambdaè¡¨è¾¾å¼ä¹Ÿå…·æœ‰è¿™äº›ä¼˜ç‚¹ï¼›ç„¶è€Œï¼Œå®ƒä»¬æ—¨åœ¨ç”¨äºæ›´å…·ä½“çš„æƒ…å†µï¼š æœ¬åœ°ç±»ï¼šå¦‚æœæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªç±»çš„å¤šä¸ªå®ä¾‹ã€è®¿é—®å…¶æ„é€ å‡½æ•°æˆ–å¼•å…¥æ–°çš„å‘½åç±»å‹ï¼ˆä¾‹å¦‚ï¼Œå› ä¸ºæ‚¨éœ€è¦ç¨åè°ƒç”¨å…¶ä»–æ–¹æ³•ï¼‰ï¼Œè¯·ä½¿ç”¨å®ƒã€‚ åŒ¿åç±»ï¼šå¦‚æœéœ€è¦å£°æ˜å­—æ®µæˆ–å…¶ä»–æ–¹æ³•ï¼Œè¯·ä½¿ç”¨å®ƒã€‚ Lambdaè¡¨è¾¾å¼ï¼š å¦‚æœè¦å°è£…è¦ä¼ é€’ç»™å…¶ä»–ä»£ç çš„å•ä¸ªè¡Œä¸ºå•å…ƒï¼Œè¯·ä½¿ç”¨å®ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¸Œæœ›åœ¨é›†åˆçš„æ¯ä¸ªå…ƒç´ ä¸Šæ‰§è¡ŒæŸä¸ªæ“ä½œï¼Œå½“è¿›ç¨‹å®Œæˆæ—¶ï¼Œæˆ–å½“è¿›ç¨‹é‡åˆ°é”™è¯¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ã€‚ å¦‚æœæ‚¨éœ€è¦ä¸€ä¸ªå‡½æ•°æ¥å£çš„ç®€å•å®ä¾‹ï¼Œå¹¶ä¸”å‰é¢çš„æ¡ä»¶éƒ½ä¸é€‚ç”¨ï¼ˆä¾‹å¦‚ï¼Œæ‚¨ä¸éœ€è¦æ„é€ å‡½æ•°ã€å‘½åç±»å‹ã€å­—æ®µæˆ–å…¶ä»–æ–¹æ³•ï¼‰ï¼Œè¯·ä½¿ç”¨å®ƒã€‚ åµŒå¥—ç±»ï¼šå¦‚æœæ‚¨çš„éœ€æ±‚ä¸æœ¬åœ°ç±»çš„éœ€æ±‚ç±»ä¼¼ï¼Œæ‚¨å¸Œæœ›ä½¿ç±»å‹æ›´å¹¿æ³›åœ°å¯ç”¨ï¼Œå¹¶ä¸”ä¸éœ€è¦è®¿é—®æœ¬åœ°å˜é‡æˆ–æ–¹æ³•å‚æ•°ï¼Œè¯·ä½¿ç”¨å®ƒã€‚ å¦‚æœéœ€è¦è®¿é—®å°é—­å®ä¾‹çš„éå…¬å…±å­—æ®µå’Œæ–¹æ³•ï¼Œè¯·ä½¿ç”¨éé™æ€åµŒå¥—ç±»ï¼ˆæˆ–å†…éƒ¨ç±»ï¼‰ã€‚å¦‚æœä¸éœ€è¦æ­¤è®¿é—®æƒé™ï¼Œè¯·ä½¿ç”¨é™æ€åµŒå¥—ç±»ã€‚ æšä¸¾ç±»å‹æšä¸¾ç±»å‹æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œå®ƒå…è®¸å˜é‡æ˜¯ä¸€ç»„é¢„å®šä¹‰çš„å¸¸é‡ã€‚å˜é‡å¿…é¡»ç­‰äºä¸ºå…¶é¢„å®šä¹‰çš„å€¼ä¹‹ä¸€ã€‚å¸¸è§çš„ç¤ºä¾‹åŒ…æ‹¬æŒ‡å—é’ˆæ–¹å‘ï¼ˆåŒ—ã€å—ã€ä¸œå’Œè¥¿çš„å€¼ï¼‰å’Œä¸€å‘¨ä¸­çš„å‡ å¤©ã€‚ ç”±äºå®ƒä»¬æ˜¯å¸¸é‡ï¼Œæšä¸¾ç±»å‹å­—æ®µçš„åç§°éƒ½æ˜¯å¤§å†™å­—æ¯ã€‚ åœ¨Javaç¼–ç¨‹è¯­è¨€ä¸­ï¼Œé€šè¿‡ä½¿ç”¨enumå…³é”®å­—å®šä¹‰æšä¸¾ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å°†æ˜ŸæœŸæšä¸¾ç±»å‹æŒ‡å®šä¸ºï¼š 1234public enum Day &#123; SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY &#125; æ‚¨åº”è¯¥åœ¨ä»»ä½•æ—¶å€™ä½¿ç”¨æšä¸¾ç±»å‹æ¥è¡¨ç¤ºä¸€ç»„å›ºå®šçš„å¸¸é‡ã€‚è¿™åŒ…æ‹¬è‡ªç„¶æšä¸¾ç±»å‹ï¼Œä¾‹å¦‚å¤ªé˜³ç³»ä¸­çš„è¡Œæ˜Ÿï¼Œä»¥åŠåœ¨ç¼–è¯‘æ—¶çŸ¥é“æ‰€æœ‰å¯èƒ½å€¼çš„æ•°æ®é›†ï¼Œä¾‹å¦‚èœå•ä¸Šçš„é€‰é¡¹ã€å‘½ä»¤è¡Œæ ‡å¿—ç­‰ã€‚ ä¸‹é¢æ˜¯ä¸€äº›ä»£ç ï¼Œå‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„Dayæšä¸¾ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940public class EnumTest &#123; Day day; public EnumTest(Day day) &#123; this.day = day; &#125; public void tellItLikeItIs() &#123; switch (day) &#123; case MONDAY: System.out.println(&quot;Mondays are bad.&quot;); break; case FRIDAY: System.out.println(&quot;Fridays are better.&quot;); break; case SATURDAY: case SUNDAY: System.out.println(&quot;Weekends are best.&quot;); break; default: System.out.println(&quot;Midweek days are so-so.&quot;); break; &#125; &#125; public static void main(String[] args) &#123; EnumTest firstDay = new EnumTest(Day.MONDAY); firstDay.tellItLikeItIs(); EnumTest thirdDay = new EnumTest(Day.WEDNESDAY); thirdDay.tellItLikeItIs(); EnumTest fifthDay = new EnumTest(Day.FRIDAY); fifthDay.tellItLikeItIs(); EnumTest sixthDay = new EnumTest(Day.SATURDAY); sixthDay.tellItLikeItIs(); EnumTest seventhDay = new EnumTest(Day.SUNDAY); seventhDay.tellItLikeItIs(); &#125;&#125; The output is: 12345Mondays are bad.Midweek days are so-so.Fridays are better.Weekends are best.Weekends are best. Javaç¼–ç¨‹è¯­è¨€æšä¸¾ç±»å‹æ¯”å…¶ä»–è¯­è¨€ä¸­çš„æšä¸¾ç±»å‹å¼ºå¤§å¾—å¤šã€‚æšä¸¾å£°æ˜å®šä¹‰äº†ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºæšä¸¾ç±»å‹ï¼‰ã€‚æšä¸¾ç±»ä¸»ä½“å¯ä»¥åŒ…æ‹¬æ–¹æ³•å’Œå…¶ä»–å­—æ®µã€‚ç¼–è¯‘å™¨åœ¨åˆ›å»ºæšä¸¾æ—¶è‡ªåŠ¨æ·»åŠ ä¸€äº›ç‰¹æ®Šæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå®ƒä»¬æœ‰ä¸€ä¸ªé™æ€å€¼æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„æŒ‰å£°æ˜é¡ºåºåŒ…å«æšä¸¾çš„æ‰€æœ‰å€¼ã€‚æ­¤æ–¹æ³•é€šå¸¸ä¸for eachæ„é€ ç»“åˆä½¿ç”¨ï¼Œä»¥è¿­ä»£æšä¸¾ç±»å‹çš„å€¼ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„Planetç±»ç¤ºä¾‹ä¸­çš„è¿™æ®µä»£ç ä¼šéå†å¤ªé˜³ç³»ä¸­çš„æ‰€æœ‰è¡Œæ˜Ÿã€‚ 1234for (Planet p : Planet.values()) &#123; System.out.printf(&quot;Your weight on %s is %f%n&quot;, p, p.surfaceWeight(mass));&#125; &#x3D;&#x3D;æ³¨æ„ï¼šæ‰€æœ‰æšä¸¾éƒ½éšå¼æ‰©å±•java.lang.Enumã€‚å› ä¸ºç±»åªèƒ½æ‰©å±•ä¸€ä¸ªçˆ¶ç±»ï¼ˆè¯·å‚è§ Declaring Classesï¼‰ï¼Œæ‰€ä»¥Javaè¯­è¨€ä¸æ”¯æŒçŠ¶æ€çš„å¤šé‡ç»§æ‰¿ï¼ˆè¯·å‚è§çŠ¶æ€ã€å®ç°å’Œç±»å‹çš„å¤šé‡ç»§æ‰¿ï¼‰ï¼Œå› æ­¤æšä¸¾ä¸èƒ½æ‰©å±•ä»»ä½•å…¶ä»–å†…å®¹ã€‚&#x3D;&#x3D; åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼ŒPlanetæ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œè¡¨ç¤ºå¤ªé˜³ç³»ä¸­çš„è¡Œæ˜Ÿã€‚å®ƒä»¬å…·æœ‰æ’å®šçš„è´¨é‡å’ŒåŠå¾„ç‰¹æ€§ã€‚ æ¯ä¸ªæšä¸¾å¸¸é‡éƒ½ç”¨è´¨é‡å’ŒåŠå¾„å‚æ•°çš„å€¼å£°æ˜ã€‚åˆ›å»ºå¸¸é‡æ—¶ï¼Œè¿™äº›å€¼å°†ä¼ é€’ç»™æ„é€ å‡½æ•°ã€‚Javaè¦æ±‚å…ˆå®šä¹‰å¸¸é‡ï¼Œç„¶åå†å®šä¹‰ä»»ä½•å­—æ®µæˆ–æ–¹æ³•ã€‚æ­¤å¤–ï¼Œå½“å­˜åœ¨å­—æ®µå’Œæ–¹æ³•æ—¶ï¼Œæšä¸¾å¸¸é‡åˆ—è¡¨å¿…é¡»ä»¥åˆ†å·ç»“å°¾ã€‚ &#x3D;&#x3D;æ³¨æ„ï¼šæšä¸¾ç±»å‹çš„æ„é€ å‡½æ•°å¿…é¡»æ˜¯åŒ…ç§æœ‰æˆ–ç§æœ‰è®¿é—®ã€‚å®ƒä¼šè‡ªåŠ¨åˆ›å»ºåœ¨æšä¸¾ä½“å¼€å¤´å®šä¹‰çš„å¸¸é‡ã€‚ä¸èƒ½è‡ªå·±è°ƒç”¨æšä¸¾æ„é€ å‡½æ•°ã€‚&#x3D;&#x3D; é™¤äº†å®ƒçš„å±æ€§å’Œæ„é€ å™¨å¤–ï¼ŒPlanetè¿˜æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥è®©æ‚¨æ£€ç´¢æ¯ä¸ªè¡Œæ˜Ÿä¸Šç‰©ä½“çš„è¡¨é¢é‡åŠ›å’Œé‡é‡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ç¨‹åºï¼Œå®ƒå¯ä»¥è®¡ç®—ä½ åœ¨åœ°çƒä¸Šçš„é‡é‡ï¼ˆä»¥ä»»ä½•å•ä½ï¼‰ï¼Œå¹¶è®¡ç®—å’Œæ‰“å°ä½ åœ¨æ‰€æœ‰è¡Œæ˜Ÿä¸Šçš„é‡é‡: 12345678910111213141516171819202122232425262728293031323334353637383940public enum Planet &#123; MERCURY (3.303e+23, 2.4397e6), VENUS (4.869e+24, 6.0518e6), EARTH (5.976e+24, 6.37814e6), MARS (6.421e+23, 3.3972e6), JUPITER (1.9e+27, 7.1492e7), SATURN (5.688e+26, 6.0268e7), URANUS (8.686e+25, 2.5559e7), NEPTUNE (1.024e+26, 2.4746e7); private final double mass; // in kilograms private final double radius; // in meters Planet(double mass, double radius) &#123; this.mass = mass; this.radius = radius; &#125; private double mass() &#123; return mass; &#125; private double radius() &#123; return radius; &#125; // universal gravitational constant (m3 kg-1 s-2) public static final double G = 6.67300E-11; double surfaceGravity() &#123; return G * mass / (radius * radius); &#125; double surfaceWeight(double otherMass) &#123; return otherMass * surfaceGravity(); &#125; public static void main(String[] args) &#123; if (args.length != 1) &#123; System.err.println(&quot;Usage: java Planet &lt;earth_weight&gt;&quot;); System.exit(-1); &#125; double earthWeight = Double.parseDouble(args[0]); double mass = earthWeight/EARTH.surfaceGravity(); for (Planet p : Planet.values()) System.out.printf(&quot;Your weight on %s is %f%n&quot;, p, p.surfaceWeight(mass)); &#125;&#125; å¦‚æœä½ è¿è¡ŒPlanet.classï¼Œæ‚¨å°†å¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š 123456789$ java Planet 175Your weight on MERCURY is 66.107583Your weight on VENUS is 158.374842Your weight on EARTH is 175.000000Your weight on MARS is 66.279007Your weight on JUPITER is 442.847567Your weight on SATURN is 186.552719Your weight on URANUS is 158.397260Your weight on NEPTUNE is 199.207413","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"ç±»","slug":"ç±»","permalink":"https://guoshunfa.com/tags/%E7%B1%BB/"}]},{"title":"ç½‘ç»œè¯·æ±‚AJAX","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/js/ç½‘ç»œè¯·æ±‚AJAX","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/07/ç½‘ç»œè¯·æ±‚AJAX/","link":"","permalink":"https://guoshunfa.com/2022/07/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82AJAX/","excerpt":"","text":"1. AJAX ä»‹ç»â€‹ Ajaxå³Asynchronous Javascript And XMLï¼ˆå¼‚æ­¥JavaScriptå’ŒXMLï¼‰åœ¨ 2005å¹´è¢«Jesse James Garrettæå‡ºçš„æ–°æœ¯è¯­ï¼Œç”¨æ¥æè¿°ä¸€ç§ä½¿ç”¨ç°æœ‰æŠ€æœ¯é›†åˆçš„â€˜æ–°â€™æ–¹æ³•ï¼ŒåŒ…æ‹¬: HTML æˆ– XHTML, CSS, JavaScript, DOM, XML, XSLT, ä»¥åŠæœ€é‡è¦çš„XMLHttpRequestã€‚ [3] ä½¿ç”¨AjaxæŠ€æœ¯ç½‘é¡µåº”ç”¨èƒ½å¤Ÿå¿«é€Ÿåœ°å°†å¢é‡æ›´æ–°å‘ˆç°åœ¨ç”¨æˆ·ç•Œé¢ä¸Šï¼Œè€Œä¸éœ€è¦é‡è½½ï¼ˆåˆ·æ–°ï¼‰æ•´ä¸ªé¡µé¢ï¼Œè¿™ä½¿å¾—ç¨‹åºèƒ½å¤Ÿæ›´å¿«åœ°å›åº”ç”¨æˆ·çš„æ“ä½œã€‚ 2. AJAX çš„å®ç°æ–¹å¼ä»‹ç»ç½‘ç»œç›®å‰å‰ç«¯è¿›è¡Œç½‘ç»œè¯·æ±‚æœ‰ä¸¤ç§æ–¹å¼ï¼ŒXHRå’Œfatchã€‚ å¯¹XHRè¿›è¡Œå°è£…çš„ç»„ä»¶æœ‰å¾ˆå¤šï¼Œå¸¸è§çš„æœ‰axiosï¼Œjqueryã€‚ å¤‡æ³¨ï¼šXHRï¼ˆXMLHttpRequestï¼‰ ï¼ˆå»ºè®®ä½¿ç”¨axiosã€‚ï¼‰ 2.1. ä¼˜ç¼ºç‚¹XHRç¼ºç‚¹ï¼š APIç”¨æ³•ç¹çã€‚ æ²¡æœ‰å…³æ³¨åˆ†ç¦»çš„è®¾è®¡æ€æƒ³ã€‚ fetchä¼˜ç‚¹ï¼š å…³æ³¨åˆ†ç¦»çš„è®¾è®¡æ€æƒ³ã€‚ APIç›¸å¯¹äºXHRæ›´ç®€å•ã€‚ fetchæ˜¯æµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„ï¼Œä½¿ç”¨fetchå¯ä»¥ä¸ç”¨å¼•ç”¨httpçš„ç±»åº“å³å¯å®ç°ã€‚ ç¼ºç‚¹ï¼š è€ç‰ˆæµè§ˆå™¨å…¼å®¹é—®é¢˜ã€‚ï¼ˆIEç³»åˆ—æ˜¯å®Œå…¨ä¸æ”¯æŒçš„ï¼Œä¸»æµæµè§ˆå™¨çš„æ—©èµ·ç‰ˆæœ¬ä¹Ÿä¸æ”¯æŒï¼Œæ‰€ä»¥å¦‚æœåœ¨é¡¹ç›®ä¸­ä½¿ç”¨éœ€è¦åšå…¼å®¹æ–¹æ¡ˆå¤„ç†ã€‚ï¼‰ 3. åŸç”ŸJS å®ç° AJAX ç›´æ¥ä½¿ç”¨XHR(XMLHttpRequest)ã€‚ 12345678910var xhr = new XMLHttpRequest();xhr.open(&quot;get&quot;,url, true);xhr.send(null);xhr.onreadystatechange = function()&#123; if(xhr.readyState === 4)&#123; if(xhr.status == 200)&#123; alert(xhr.responseText); &#125; &#125;&#125; 4. axios å®ç° AJAX å‰å¾€ github ï¼ˆè¯¦æƒ…è¯·æŸ¥çœ‹axios Github é¡¹ç›®README.md æ–‡ä»¶ã€‚ï¼‰ 4.1. å®‰è£…Using npm: 1$ npm install axios Using bower: 1$ bower install axios Using yarn: 1$ yarn add axios Using jsDelivr CDN: 1&lt;script src=&quot;https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt; Using unpkg CDN: 1&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt; 4.2. API demo123456789// Send a POST requestaxios(&#123; method: &#x27;post&#x27;, url: &#x27;/user/12345&#x27;, data: &#123; firstName: &#x27;Fred&#x27;, lastName: &#x27;Flintstone&#x27; &#125;&#125;); 123456789// GET request for remote image in node.jsaxios(&#123; method: &#x27;get&#x27;, url: &#x27;http://bit.ly/2mTM3nY&#x27;, responseType: &#x27;stream&#x27;&#125;) .then(function (response) &#123; response.data.pipe(fs.createWriteStream(&#x27;ada_lovelace.jpg&#x27;)) &#125;); 5. JQuery å®ç° AJAX123456$.ajax(&#123; url: &#x27;url&#x27;, type: &#x27;get&#x27;, success: function()&#123; &#125;&#125;) 6. Fetch å®ç° AJAX123456try &#123; const response= await fetch(url) const data = await response.json()&#125; catch (error) &#123; console.log(&#x27;è¯·æ±‚å‡ºé”™&#x27;,error);&#125; Fetch æ›´å¤šå‚æ•°: 12345678910111213fetch(url, &#123; body: JSON.stringify(data), // must match &#x27;Content-Type&#x27; header cache: &#x27;no-cache&#x27;, // *default, no-cache, reload, force-cache, only-if-cached credentials: &#x27;same-origin&#x27;, // include, same-origin, *omit headers: &#123; &#x27;user-agent&#x27;: &#x27;Mozilla/4.0 MDN Example&#x27;, &#x27;content-type&#x27;: &#x27;application/json&#x27; &#125;, method: &#x27;POST&#x27;, // *GET, POST, PUT, DELETE, etc. mode: &#x27;cors&#x27;, // no-cors, cors, *same-origin redirect: &#x27;follow&#x27;, // manual, *follow, error referrer: &#x27;no-referrer&#x27;, // *client, no-referrer&#125;) å‚è€ƒæ–‡æ¡£ XHR å’Œ Fetch çš„ä½¿ç”¨è¯¦è§£å’ŒåŒºåˆ«æ€»ç»“ ç™¾åº¦ç™¾ç§‘","categories":[{"name":"HTML/CSS/JavaScript","slug":"HTML-CSS-JavaScript","permalink":"https://guoshunfa.com/categories/HTML-CSS-JavaScript/"}],"tags":[{"name":"JS","slug":"JS","permalink":"https://guoshunfa.com/tags/JS/"},{"name":"AJAX","slug":"AJAX","permalink":"https://guoshunfa.com/tags/AJAX/"}]},{"title":"Python scrapyçˆ¬è™«","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/python/Python-scrapyçˆ¬è™«","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/07/Python-scrapyçˆ¬è™«/","link":"","permalink":"https://guoshunfa.com/2022/07/Python-scrapy%E7%88%AC%E8%99%AB/","excerpt":"","text":"scrapy API | å¼€æºproject-github 1. demo1234567891011121314import scrapyclass QuotesSpider(scrapy.Spider): name = &#x27;quotes&#x27; start_urls = [ &#x27;http://quotes.toscrape.com/tag/humor/&#x27;, ] def parse(self, response): for quote in response.css(&#x27;div.quote&#x27;): yield &#123; &#x27;author&#x27;: quote.xpath(&#x27;span/small/text()&#x27;).get(), &#x27;text&#x27;: quote.css(&#x27;span.text::text&#x27;).get(), &#125;","categories":[{"name":"Python","slug":"Python","permalink":"https://guoshunfa.com/categories/Python/"}],"tags":[{"name":"è„šæœ¬","slug":"è„šæœ¬","permalink":"https://guoshunfa.com/tags/%E8%84%9A%E6%9C%AC/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://guoshunfa.com/tags/%E7%88%AC%E8%99%AB/"},{"name":"Python","slug":"Python","permalink":"https://guoshunfa.com/tags/Python/"},{"name":"Scrapy","slug":"Scrapy","permalink":"https://guoshunfa.com/tags/Scrapy/"}]},{"title":"Python è„šæœ¬è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/python/Python-è„šæœ¬è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/07/Python-è„šæœ¬è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Python-%E8%84%9A%E6%9C%AC%E8%AE%B0%E5%BD%95/","excerpt":"","text":"12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#-*- coding:utf-8 -*-import osimport re#è¦æ”¹çš„æ–‡ä»¶å¤¹dir =&quot;/Library/work/workspace-my/test_file/file&quot;#è¦æ”¹çš„æ–‡ä»¶ç±»å‹ï¼ˆå¯ä»¥è¾“å…¥å¤šä¸ªï¼‰file_type=[&quot;.txt&quot;]#æ›¿æ¢è¡¨ï¼ˆå¯ä»¥ç”¨pythonæ­£åˆ™è¡¨è¾¾å¼ï¼‰look_up_table=[ [&quot;ç¬¬ä¸€è¡Œ&quot;,&quot;aaaa&quot;], ]def get_filelist(dir,filetype): Filelist = [] for home, dirs, files in os.walk(dir): for filename in files: if(filename[-len(filetype):]==filetype): Filelist.append(os.path.join(home, filename)) return Filelistif __name__ ==&quot;__main__&quot;: for type in file_type: print(&quot;å¼€å§‹å¤„ç†&quot;+type+&quot;ç±»å‹æ–‡ä»¶&quot;) file_list = get_filelist(dir,type) print(&quot;å…±å‘ç°&quot;+str(len(file_list))+&quot;ä¸ª&quot;+type+&quot;ç±»å‹æ–‡ä»¶&quot;) replace_count=0 file_count=0 for file in file_list: file_count=file_count+1 if(file_count%100==0): print(&quot;ä¿®æ”¹åˆ°ç¬¬&quot;+str(file_count)+&quot;ä¸ªæ–‡ä»¶&quot;) file_data=&quot;&quot; with open(file, &quot;r&quot;) as f: for line in f: for item in look_up_table: if re.search(item[0], line): #print(&quot;æ­£åœ¨ä¿®æ”¹ä»&quot;+item[0]+&quot;åˆ°&quot;+item[1]) line=re.sub(item[0],item[1],line) replace_count=replace_count+1 file_data += line with open(file,&quot;w&quot;) as f: f.write(file_data) print(&quot;ä¸€å…±è¿›è¡Œäº†&quot;+str(replace_count)+&quot;å¤„æ›¿æ¢&quot;) print(&quot;ç»“æŸå¤„ç†&quot;+type+&quot;ç±»å‹æ–‡ä»¶&quot;)print(&quot;å…¨éƒ¨ç»“æŸ&quot;) :::","categories":[{"name":"Python","slug":"Python","permalink":"https://guoshunfa.com/categories/Python/"}],"tags":[{"name":"è„šæœ¬","slug":"è„šæœ¬","permalink":"https://guoshunfa.com/tags/%E8%84%9A%E6%9C%AC/"},{"name":"Python","slug":"Python","permalink":"https://guoshunfa.com/tags/Python/"}]},{"title":"SwiftåŸºç¡€ ä¸‹æ ‡","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-ä¸‹æ ‡","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-ä¸‹æ ‡/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E4%B8%8B%E6%A0%87/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Subscripts.html ç±»ã€ç»“æ„å’Œæšä¸¾å¯ä»¥å®šä¹‰ä¸‹æ ‡ï¼Œä¸‹æ ‡æ˜¯è®¿é—®é›†åˆã€åˆ—è¡¨æˆ–åºåˆ—æˆå‘˜å…ƒç´ çš„å¿«æ·æ–¹å¼ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹æ ‡æŒ‰ç´¢å¼•è®¾ç½®å’Œæ£€ç´¢å€¼ï¼Œè€Œæ— éœ€å•ç‹¬çš„è®¾ç½®å’Œæ£€ç´¢æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä»¥someArray[index]çš„å½¢å¼è®¿é—®æ•°Arrayå®ä¾‹ä¸­çš„å…ƒç´ ï¼Œä»¥someDictionary[key]çš„å½¢å¼è®¿é—®aDictionaryå®ä¾‹ä¸­çš„å…ƒç´ ã€‚ æ‚¨å¯ä»¥ä¸ºå•ä¸ªç±»å‹å®šä¹‰å¤šä¸ªä¸‹æ ‡ï¼Œå¹¶æ ¹æ®æ‚¨ä¼ é€’ç»™ä¸‹æ ‡çš„ç´¢å¼•å€¼ç±»å‹é€‰æ‹©è¦ä½¿ç”¨çš„ç›¸åº”ä¸‹æ ‡é‡è½½ã€‚ä¸‹æ ‡ä¸é™äºå•ä¸ªç»´åº¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¤šä¸ªè¾“å…¥å‚æ•°å®šä¹‰ä¸‹æ ‡ï¼Œä»¥æ»¡è¶³è‡ªå®šä¹‰ç±»å‹çš„éœ€æ±‚ã€‚ ä¸‹æ ‡è¯­æ³•ä¸‹æ ‡ä½¿æ‚¨èƒ½å¤Ÿé€šè¿‡åœ¨å®ä¾‹åç§°åçš„æ–¹æ‹¬å·ä¸­å†™å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ¥æŸ¥è¯¢ç±»å‹çš„å®ä¾‹ã€‚å®ƒä»¬çš„è¯­æ³•ä¸å®ä¾‹æ–¹æ³•è¯­æ³•å’Œè®¡ç®—å±æ€§è¯­æ³•ç›¸ä¼¼ã€‚æ‚¨ä½¿ç”¨ä¸‹æ ‡å…³é”®å­—ç¼–å†™ä¸‹æ ‡å®šä¹‰ï¼Œå¹¶ä»¥ä¸å®ä¾‹æ–¹æ³•ç›¸åŒçš„æ–¹å¼æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥å‚æ•°å’Œè¿”å›ç±»å‹ã€‚ä¸å®ä¾‹æ–¹æ³•ä¸åŒï¼Œä¸‹æ ‡å¯ä»¥æ˜¯è¯»å†™æˆ–åªè¯»ã€‚æ­¤è¡Œä¸ºç”±è·å–è€…å’Œè®¾ç½®å™¨ä»¥ä¸è®¡ç®—å±æ€§ç›¸åŒçš„æ–¹å¼è¿›è¡Œé€šä¿¡ï¼š subscript(index: Int) -&gt; Int { â€‹ get { â€‹ &#x2F;&#x2F; Return an appropriate subscript value here. â€‹ } â€‹ set(newValue) { â€‹ &#x2F;&#x2F; Perform a suitable setting action here. â€‹ } } newValueçš„ç±»å‹ä¸ä¸‹æ ‡çš„è¿”å›å€¼ç›¸åŒã€‚ä¸è®¡ç®—å±æ€§ä¸€æ ·ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä¸æŒ‡å®šsetterçš„(newValue)å‚æ•°ã€‚å¦‚æœæ‚¨è‡ªå·±ä¸æä¾›ä¸€ä¸ªåä¸ºnewValueé»˜è®¤å‚æ•°ï¼Œåˆ™ä¼šå‘æ‚¨çš„è®¾ç½®å™¨æä¾›ä¸€ä¸ªå‚æ•°ã€‚ ä¸åªè¯»è®¡ç®—å±æ€§ä¸€æ ·ï¼Œæ‚¨å¯ä»¥é€šè¿‡åˆ é™¤getå…³é”®å­—åŠå…¶å¤§æ‹¬å·æ¥ç®€åŒ–åªè¯»ä¸‹æ ‡çš„å£°æ˜ï¼š subscript(index: Int) -&gt; Int { â€‹ &#x2F;&#x2F; Return an appropriate subscript value here. } ä»¥ä¸‹æ˜¯åªè¯»ä¸‹æ ‡å®ç°çš„ç¤ºä¾‹ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªTimesTableç»“æ„æ¥è¡¨ç¤ºæ•´æ•°çš„næ¬¡è¡¨ï¼š struct TimesTable { â€‹ let multiplier: Int â€‹ subscript(index: Int) -&gt; Int { â€‹ return multiplier * index â€‹ } } let threeTimesTable &#x3D; TimesTable(multiplier: 3) print(â€œsix times three is (threeTimesTable[6])â€) &#x2F;&#x2F; Prints â€œsix times three is 18â€ åœ¨æœ¬ä¾‹ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„TimesTableå®ä¾‹æ¥è¡¨ç¤ºä¸‰å€è¡¨ã€‚è¿™é€šè¿‡å°†å€¼3ä¼ é€’ç»™ç»“æ„çš„initializerä½œä¸ºç”¨äºå®ä¾‹multiplierå‚æ•°çš„å€¼æ¥è¡¨ç¤ºã€‚ æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨å…¶ä¸‹æ ‡æ¥æŸ¥è¯¢threeTimesTableå®ä¾‹ï¼Œå¦‚å¯¹threeTimesTable[6]çš„è°ƒç”¨æ‰€ç¤ºã€‚è¿™è¦æ±‚ä¸‰å€è¡¨ä¸­çš„ç¬¬å…­ä¸ªæ¡ç›®ï¼Œè¿”å›å€¼ä¸º18æˆ–3ä¹˜ä»¥6ã€‚ æ³¨æ„ n-timesè¡¨åŸºäºå›ºå®šçš„æ•°å­¦è§„åˆ™ã€‚å°†threeTimesTable[someIndex]è®¾ç½®ä¸ºæ–°å€¼æ˜¯ä¸åˆé€‚çš„ï¼Œå› æ­¤TimesTableçš„ä¸‹æ ‡è¢«å®šä¹‰ä¸ºåªè¯»ä¸‹æ ‡ã€‚ ä¸‹æ ‡ç”¨æ³•â€œä¸‹æ ‡â€çš„ç¡®åˆ‡å«ä¹‰å–å†³äºå…¶ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ã€‚ä¸‹æ ‡é€šå¸¸ç”¨ä½œè®¿é—®é›†åˆã€åˆ—è¡¨æˆ–åºåˆ—ä¸­æˆå‘˜å…ƒç´ çš„å¿«æ·æ–¹å¼ã€‚æ‚¨å¯ä»¥è‡ªç”±åœ°ä»¥æœ€é€‚åˆæ‚¨ç‰¹å®šç±»æˆ–ç»“æ„åŠŸèƒ½çš„æ–¹å¼å®ç°ä¸‹æ ‡ã€‚ ä¾‹å¦‚ï¼ŒSwiftçš„Dictionaryç±»å‹å®ç°äº†ä¸‹æ ‡æ¥è®¾ç½®å’Œæ£€ç´¢å­˜å‚¨åœ¨Dictionaryå®ä¾‹ä¸­çš„å€¼ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨ä¸‹æ ‡æ‹¬å·ä¸­æä¾›å­—å…¸é”®ç±»å‹çš„é”®å¹¶å°†å­—å…¸å€¼ç±»å‹çš„å€¼åˆ†é…ç»™ä¸‹æ ‡æ¥åœ¨å­—å…¸ä¸­è®¾ç½®å€¼ï¼š var numberOfLegs &#x3D; [â€œspiderâ€: 8, â€œantâ€: 6, â€œcatâ€: 4] numberOfLegs[â€œbirdâ€] &#x3D; 2 The example above defines a variable called numberOfLegs and initializes it with a dictionary literal containing three key-value pairs. The type of the numberOfLegs dictionary is inferred to be [String: Int]. After creating the dictionary, this example uses subscript assignment to add a String key of &quot;bird&quot; and an Int value of 2 to the dictionary. æœ‰å…³Dictionaryä¸‹æ ‡çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…è®¿é—®å’Œä¿®æ”¹è¯å…¸ã€‚ æ³¨æ„ Swiftçš„Dictionaryç±»å‹å°†å…¶é”®å€¼ä¸‹æ ‡å®ç°ä¸ºæ¥å—å¹¶è¿”å›å¯é€‰ç±»å‹çš„ä¸‹æ ‡ã€‚å¯¹äºä¸Šé¢çš„numberOfLegså­—å…¸ï¼Œé”®å€¼ä¸‹æ ‡æ¥å—å¹¶è¿”å›ç±»å‹ä¸ºInt?æˆ–â€œå¯é€‰intâ€çš„å€¼ã€‚Dictionaryç±»å‹ä½¿ç”¨å¯é€‰çš„ä¸‹æ ‡ç±»å‹æ¥æ¨¡æ‹Ÿå¹¶éæ¯ä¸ªé”®éƒ½æœ‰ä¸€ä¸ªå€¼çš„äº‹å®ï¼Œå¹¶é€šè¿‡ä¸ºè¯¥é”®åˆ†é…ä¸€ä¸ªnilå€¼æ¥ä¸ºè¯¥å€¼æ¥æä¾›åˆ é™¤è¯¥å€¼çš„æ–¹æ³•ã€‚ ä¸‹æ ‡é€‰é¡¹ä¸‹æ ‡å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„è¾“å…¥å‚æ•°ï¼Œè¿™äº›è¾“å…¥å‚æ•°å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„ã€‚ä¸‹æ ‡ä¹Ÿå¯ä»¥è¿”å›ä»»ä½•ç±»å‹çš„å€¼ã€‚ ä¸å‡½æ•°ä¸€æ ·ï¼Œä¸‹æ ‡å¯ä»¥è·å–ä¸åŒæ•°é‡çš„å‚æ•°ï¼Œå¹¶ä¸ºå…¶å‚æ•°æä¾›é»˜è®¤å€¼ï¼Œå¦‚å˜é‡å‚æ•°å’Œé»˜è®¤å‚æ•°å€¼ä¸­æ‰€è¿°ã€‚ç„¶è€Œï¼Œä¸å‡½æ•°ä¸åŒï¼Œä¸‹æ ‡ä¸èƒ½ä½¿ç”¨è¾“å…¥è¾“å‡ºå‚æ•°ã€‚ ç±»æˆ–ç»“æ„å¯ä»¥æ ¹æ®éœ€è¦æä¾›å°½å¯èƒ½å¤šçš„ä¸‹æ ‡å®ç°ï¼Œå¹¶å°†æ ¹æ®ä½¿ç”¨ä¸‹æ ‡æ—¶ä¸‹æ ‡æ‹¬å·ä¸­åŒ…å«çš„å€¼çš„ç±»å‹æ¨æ–­è¦ä½¿ç”¨çš„é€‚å½“ä¸‹æ ‡ã€‚å¤šä¸ªä¸‹æ ‡çš„å®šä¹‰ç§°ä¸ºä¸‹æ ‡é‡è½½ã€‚ è™½ç„¶ä¸‹æ ‡å–å•ä¸ªå‚æ•°æœ€å¸¸è§ï¼Œä½†å¦‚æœé€‚åˆæ‚¨çš„ç±»å‹ï¼Œæ‚¨ä¹Ÿå¯ä»¥å®šä¹‰å…·æœ‰å¤šä¸ªå‚æ•°çš„ä¸‹æ ‡ã€‚ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªMatrixç»“æ„ï¼Œå®ƒè¡¨ç¤ºDoubleå€¼çš„äºŒç»´çŸ©é˜µã€‚Matrixç»“æ„çš„ä¸‹æ ‡éœ€è¦ä¸¤ä¸ªæ•´æ•°å‚æ•°ï¼š struct Matrix { â€‹ let rows: Int, columns: Int â€‹ var grid: [Double] â€‹ init(rows: Int, columns: Int) { â€‹ self.rows &#x3D; rows â€‹ self.columns &#x3D; columns â€‹ grid &#x3D; Array(repeating: 0.0, count: rows * columns) â€‹ } â€‹ func indexIsValid(row: Int, column: Int) -&gt; Bool { â€‹ return row &gt;&#x3D; 0 &amp;&amp; row &lt; rows &amp;&amp; column &gt;&#x3D; 0 &amp;&amp; column &lt; columns â€‹ } â€‹ subscript(row: Int, column: Int) -&gt; Double { â€‹ get { â€‹ assert(indexIsValid(row: row, column: column), â€œIndex out of rangeâ€) â€‹ return grid[(row * columns) + column] â€‹ } â€‹ set { â€‹ assert(indexIsValid(row: row, column: column), â€œIndex out of rangeâ€) â€‹ grid[(row * columns) + column] &#x3D; newValue â€‹ } â€‹ } } Matrixæä¾›äº†ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œè¯¥åˆå§‹åŒ–å™¨æ¥å—ä¸¤ä¸ªç§°ä¸ºrowså’Œcolumnså‚æ•°ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªè¶³å¤Ÿå¤§çš„æ•°ç»„æ¥å­˜å‚¨ç±»å‹ä¸ºDoubleçš„rows*columnså€¼ã€‚çŸ©é˜µä¸­çš„æ¯ä¸ªä½ç½®çš„åˆå§‹å€¼ä¸º0.0ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæ•°ç»„çš„å¤§å°å’Œ0.0çš„åˆå§‹å•å…ƒæ ¼å€¼è¢«ä¼ é€’ç»™æ•°ç»„åˆå§‹åŒ–å™¨ï¼Œè¯¥åˆå§‹åŒ–å™¨åˆ›å»ºå’Œåˆå§‹åŒ–æ­£ç¡®å¤§å°çš„æ–°æ•°ç»„ã€‚æ­¤åˆå§‹åŒ–å™¨åœ¨åˆ›å»ºå…·æœ‰é»˜è®¤å€¼çš„æ•°ç»„ä¸­è¿›è¡Œäº†æ›´è¯¦ç»†çš„æè¿°ã€‚ æ‚¨å¯ä»¥é€šè¿‡å°†é€‚å½“çš„è¡Œå’Œåˆ—è®¡æ•°ä¼ é€’ç»™å…¶åˆå§‹åŒ–å™¨æ¥æ„å»ºæ–°çš„Matrixå®ä¾‹ï¼š var matrix &#x3D; Matrix(rows: 2, columns: 2) ä¸Šé¢çš„ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªå…·æœ‰ä¸¤è¡Œå’Œä¸¤åˆ—çš„æ–°Matrixå®ä¾‹ã€‚æ­¤Matrixå®ä¾‹çš„gridæ•°ç»„å®é™…ä¸Šæ˜¯çŸ©é˜µçš„æ‰å¹³ç‰ˆæœ¬ï¼Œä»å·¦ä¸Šè§’è¯»å–åˆ°å³ä¸‹è§’ï¼š çŸ©é˜µä¸­çš„å€¼å¯ä»¥é€šè¿‡å°†è¡Œå’Œåˆ—å€¼ä¼ é€’åˆ°ä¸‹æ ‡ä¸­æ¥è®¾ç½®ï¼Œå¹¶ç”¨é€—å·åˆ†éš”ï¼š matrix[0, 1] &#x3D; 1.5 matrix[1, 0] &#x3D; 3.2 è¿™ä¸¤ä¸ªè¯­å¥è°ƒç”¨ä¸‹æ ‡çš„è®¾ç½®å™¨ï¼Œåœ¨çŸ©é˜µçš„å³ä¸Šè§’ä½ç½®è®¾ç½®1.5ï¼ˆrow``0ï¼Œcolumn1ï¼‰ï¼Œåœ¨å·¦ä¸‹è§’ä½ç½®è®¾ç½®3.2ï¼ˆrow``1ï¼Œcolumn``0ï¼‰ï¼š Matrixä¸‹æ ‡çš„è·å–å™¨å’Œè®¾ç½®å™¨éƒ½åŒ…å«ä¸€ä¸ªæ–­è¨€ï¼Œä»¥æ£€æŸ¥ä¸‹æ ‡çš„rowå’Œcolumnå€¼æ˜¯å¦æœ‰æ•ˆã€‚ä¸ºäº†å¸®åŠ©è¿™äº›æ–­è¨€ï¼ŒMatrixåŒ…æ‹¬ä¸€ç§åä¸ºindexIsValid(row:column:)çš„æ–¹ä¾¿æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ£€æŸ¥è¯·æ±‚çš„rowå’Œcolumnæ˜¯å¦åœ¨çŸ©é˜µçš„è¾¹ç•Œå†…ï¼š func indexIsValid(row: Int, column: Int) -&gt; Bool { â€‹ return row &gt;&#x3D; 0 &amp;&amp; row &lt; rows &amp;&amp; column &gt;&#x3D; 0 &amp;&amp; column &lt; columns } å¦‚æœæ‚¨å°è¯•è®¿é—®çŸ©é˜µè¾¹ç•Œä¹‹å¤–çš„ä¸‹æ ‡ï¼Œåˆ™ä¼šè§¦å‘æ–­è¨€ï¼š let someValue &#x3D; matrix[2, 2] &#x2F;&#x2F; This triggers an assert, because [2, 2] is outside of the matrix bounds. é”®å…¥ä¸‹æ ‡å¦‚ä¸Šæ‰€è¿°ï¼Œå®ä¾‹ä¸‹æ ‡æ˜¯æ‚¨åœ¨ç‰¹å®šç±»å‹çš„å®ä¾‹ä¸Šè°ƒç”¨çš„ä¸‹æ ‡ã€‚æ‚¨è¿˜å¯ä»¥å®šä¹‰åœ¨ç±»å‹æœ¬èº«ä¸Šè°ƒç”¨çš„ä¸‹æ ‡ã€‚è¿™ç§ä¸‹æ ‡è¢«ç§°ä¸ºç±»å‹ä¸‹æ ‡ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨ä¸‹æ ‡å…³é”®å­—ä¹‹å‰å†™é™æ€å…³é”®å­—æ¥æŒ‡ç¤ºç±»å‹subscriptã€‚ç±»å¯ä»¥ä½¿ç”¨classå…³é”®å­—ï¼Œä»¥å…è®¸å­ç±»è¦†ç›–è¶…ç±»å¯¹è¯¥ä¸‹æ ‡çš„å®ç°ã€‚ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†æ‚¨å¦‚ä½•å®šä¹‰å’Œè°ƒç”¨ç±»å‹ä¸‹æ ‡ï¼š enum Planet: Int { â€‹ case mercury &#x3D; 1, venus, earth, mars, jupiter, saturn, uranus, neptune â€‹ static subscript(n: Int) -&gt; Planet { â€‹ return Planet(rawValue: n)! â€‹ } } let mars &#x3D; Planet[4] print(mars)","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ ä¸é€æ˜çš„ç±»å‹","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-ä¸é€æ˜çš„ç±»å‹","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-ä¸é€æ˜çš„ç±»å‹/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E4%B8%8D%E9%80%8F%E6%98%8E%E7%9A%84%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/OpaqueTypes.html å…·æœ‰ä¸é€æ˜è¿”å›ç±»å‹çš„å‡½æ•°æˆ–æ–¹æ³•éšè—å…¶è¿”å›å€¼çš„ç±»å‹ä¿¡æ¯ã€‚è¿”å›å€¼ä¸æ˜¯æä¾›å…·ä½“ç±»å‹ä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹ï¼Œè€Œæ˜¯æ ¹æ®å…¶æ”¯æŒçš„åè®®æ¥æè¿°ã€‚éšè—ç±»å‹ä¿¡æ¯åœ¨è°ƒç”¨æ¨¡å—çš„æ¨¡å—å’Œä»£ç ä¹‹é—´çš„è¾¹ç•Œä¸Šéå¸¸æœ‰ç”¨ï¼Œå› ä¸ºè¿”å›å€¼çš„åº•å±‚ç±»å‹å¯ä»¥ä¿æŒç§å¯†æ€§ã€‚ä¸è¿”å›ç±»å‹ä¸ºåè®®ç±»å‹çš„å€¼ä¸åŒï¼Œä¸é€æ˜ç±»å‹ä¿ç•™ç±»å‹æ ‡è¯†â€”â€”ç¼–è¯‘å™¨å¯ä»¥è®¿é—®ç±»å‹ä¿¡æ¯ï¼Œä½†æ¨¡å—çš„å®¢æˆ·ç«¯ä¸èƒ½è®¿é—®ã€‚ ä¸é€æ˜ç±»å‹è§£å†³çš„é—®é¢˜ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨æ­£åœ¨ç¼–å†™ä¸€ä¸ªç»˜åˆ¶ASCIIè‰ºæœ¯å½¢çŠ¶çš„æ¨¡å—ã€‚ASCIIè‰ºæœ¯å½¢çŠ¶çš„åŸºæœ¬ç‰¹å¾æ˜¯draw()å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›è¯¥å½¢çŠ¶çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼Œæ‚¨å¯ä»¥å°†å…¶ç”¨ä½œShapeåè®®çš„è¦æ±‚ï¼š protocol Shape { â€‹ func draw() -&gt; String } struct Triangle: Shape { â€‹ var size: Int â€‹ func draw() -&gt; String { â€‹ var result: [String] &#x3D; [] â€‹ for length in 1â€¦size { â€‹ result.append(String(repeating: â€œ*â€, count: length)) â€‹ } â€‹ return result.joined(separator: â€œ\\nâ€) â€‹ } } let smallTriangle &#x3D; Triangle(size: 3) print(smallTriangle.draw()) &#x2F;&#x2F; * &#x2F;&#x2F; ** &#x2F;&#x2F; *** æ‚¨å¯ä»¥ä½¿ç”¨æ³›å‹æ¥å®ç°å‚ç›´ç¿»è½¬å½¢çŠ¶ç­‰æ“ä½œï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªé‡è¦çš„å±€é™æ€§ï¼šç¿»è½¬çš„ç»“æœæš´éœ²äº†ç”¨äºåˆ›å»ºå®ƒçš„ç¡®åˆ‡é€šç”¨ç±»å‹ã€‚ struct FlippedShape&lt;T: Shape&gt;: Shape { â€‹ var shape: T â€‹ func draw() -&gt; String { â€‹ let lines &#x3D; shape.draw().split(separator: â€œ\\nâ€) â€‹ return lines.reversed().joined(separator: â€œ\\nâ€) â€‹ } } let flippedTriangle &#x3D; FlippedShape(shape: smallTriangle) print(flippedTriangle.draw()) &#x2F;&#x2F; *** &#x2F;&#x2F; ** &#x2F;&#x2F; * This approach to defining a JoinedShape&lt;T: Shape, U: Shape&gt; structure that joins two shapes together vertically, like the code below shows, results in types like JoinedShape&lt;FlippedShape&lt;Triangle&gt;, Triangle&gt; from joining a flipped triangle with another triangle. struct JoinedShape&lt;T: Shape, U: Shape&gt;: Shape { â€‹ var top: T â€‹ var bottom: U â€‹ func draw() -&gt; String { â€‹ return top.draw() + â€œ\\nâ€ + bottom.draw() â€‹ } } let joinedTriangles &#x3D; JoinedShape(top: smallTriangle, bottom: flippedTriangle) print(joinedTriangles.draw()) &#x2F;&#x2F; * &#x2F;&#x2F; ** &#x2F;&#x2F; *** &#x2F;&#x2F; *** &#x2F;&#x2F; ** &#x2F;&#x2F; * å…¬å¼€æœ‰å…³åˆ›å»ºå½¢çŠ¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥è®©ä¸æ‰“ç®—å±äºASCIIè‰ºæœ¯æ¨¡å—å…¬å…±ç•Œé¢çš„ç±»å‹æ³„éœ²å‡ºå»ï¼Œå› ä¸ºéœ€è¦å£°æ˜å®Œæ•´çš„è¿”å›ç±»å‹ã€‚æ¨¡å—å†…çš„ä»£ç å¯ä»¥ä»¥å„ç§æ–¹å¼æ„å»ºç›¸åŒçš„å½¢çŠ¶ï¼Œæ¨¡å—å¤–ä½¿ç”¨è¯¥å½¢çŠ¶çš„å…¶ä»–ä»£ç ä¸åº”è€ƒè™‘æœ‰å…³è½¬æ¢åˆ—è¡¨çš„å®ç°ç»†èŠ‚ã€‚JoinedShapeå’ŒFlippedShapeç­‰åŒ…è£…ç±»å‹å¯¹æ¨¡å—çš„ç”¨æˆ·æ— å…³ç´§è¦ï¼Œå®ƒä»¬ä¸åº”è¯¥å¯è§ã€‚è¯¥æ¨¡å—çš„å…¬å…±æ¥å£åŒ…æ‹¬è¿æ¥å’Œç¿»è½¬å½¢çŠ¶ç­‰æ“ä½œï¼Œè¿™äº›æ“ä½œè¿”å›å¦ä¸€ä¸ªShapeå€¼ã€‚ è¿”å›ä¸é€æ˜ç±»å‹ä½ å¯ä»¥æŠŠä¸é€æ˜çš„ç±»å‹æƒ³è±¡æˆé€šç”¨ç±»å‹çš„åé¢ã€‚é€šç”¨ç±»å‹å…è®¸è°ƒç”¨å‡½æ•°çš„ä»£ç ä¸ºè¯¥å‡½æ•°çš„å‚æ•°é€‰æ‹©ç±»å‹ï¼Œå¹¶ä»¥ä»å‡½æ•°å®ç°æŠ½è±¡å‡ºæ¥çš„æ–¹å¼è¿”å›å€¼ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä¸­çš„å‡½æ•°è¿”å›çš„ç±»å‹å–å†³äºå…¶è°ƒç”¨è€…ï¼š func max&lt;T&gt;(_ x: T, _ y: T) -&gt; T where T: Comparable &#123; ... &#125; è°ƒç”¨max(_:_:)çš„ä»£ç ä¸ºxå’Œyé€‰æ‹©å€¼ï¼Œè¿™äº›å€¼çš„ç±»å‹å†³å®šäº†Tçš„å…·ä½“ç±»å‹ã€‚è°ƒç”¨ä»£ç å¯ä»¥ä½¿ç”¨ä»»ä½•ç¬¦åˆComparableåè®®çš„ç±»å‹ã€‚å‡½æ•°ä¸­çš„ä»£ç ä»¥ä¸€èˆ¬æ–¹å¼ç¼–å†™ï¼Œå› æ­¤å®ƒå¯ä»¥å¤„ç†è°ƒç”¨è€…æä¾›çš„ä»»ä½•ç±»å‹ã€‚max(_:_:)çš„å®ç°ä»…ä½¿ç”¨æ‰€æœ‰Comparableç±»å‹å…±äº«çš„åŠŸèƒ½ã€‚ å¯¹äºå…·æœ‰ä¸é€æ˜è¿”å›ç±»å‹çš„å‡½æ•°ï¼Œè¿™äº›è§’è‰²æ˜¯åå‘çš„ã€‚ä¸é€æ˜ç±»å‹å…è®¸å‡½æ•°å®ç°ä»¥ä¸€ç§ä»è°ƒç”¨å‡½æ•°çš„ä»£ç æŠ½è±¡å‡ºæ¥çš„æ–¹å¼é€‰æ‹©å®ƒè¿”å›çš„å€¼çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ç¤ºä¾‹ä¸­çš„å‡½æ•°è¿”å›æ¢¯å½¢è€Œä¸æš´éœ²è¯¥å½¢çŠ¶çš„åº•å±‚ç±»å‹ã€‚ 12345678struct Square: Shape &#123;â€‹ var size: Intâ€‹ func draw() -&gt; String &#123;â€‹ let line = String(repeating: &quot;*&quot;, count: size)â€‹ let result = Array&lt;String&gt;(repeating: line, count: size)â€‹ return result.joined(separator: &quot;\\n&quot;)â€‹ &#125;&#125; func makeTrapezoid() -&gt; some Shape { â€‹ let top &#x3D; Triangle(size: 2) â€‹ let middle &#x3D; Square(size: 2) â€‹ let bottom &#x3D; FlippedShape(shape: top) â€‹ let trapezoid &#x3D; JoinedShape( â€‹ top: top, â€‹ bottom: JoinedShape(top: middle, bottom: bottom) â€‹ ) â€‹ return trapezoid } let trapezoid &#x3D; makeTrapezoid() print(trapezoid.draw()) &#x2F;&#x2F; * &#x2F;&#x2F; ** &#x2F;&#x2F; ** &#x2F;&#x2F; ** &#x2F;&#x2F; ** &#x2F;&#x2F; * æœ¬ç¤ºä¾‹ä¸­çš„makeTrapezoid()å‡½æ•°å°†å…¶è¿”å›ç±»å‹å£°æ˜ä¸ºsomeShapeï¼›å› æ­¤ï¼Œè¯¥å‡½æ•°è¿”å›ç¬¦åˆShapeåè®®çš„ç»™å®šç±»å‹çš„å€¼ï¼Œè€Œä¸æŒ‡å®šä»»ä½•ç‰¹å®šçš„å…·ä½“ç±»å‹ã€‚ä»¥è¿™ç§æ–¹å¼ç¼–å†™makeTrapezoid()å¯ä»¥è¡¨è¾¾å…¶å…¬å…±æ¥å£çš„åŸºæœ¬æ–¹é¢â€”â€”å®ƒè¿”å›çš„å€¼æ˜¯ä¸€ä¸ªå½¢çŠ¶â€”â€”è€Œæ— éœ€åˆ¶ä½œå½¢çŠ¶ç”±å…¶å…¬å…±æ¥å£çš„ä¸€éƒ¨åˆ†åˆ¶æˆçš„ç‰¹å®šç±»å‹ã€‚è¿™ä¸ªå®ç°ä½¿ç”¨ä¸¤ä¸ªä¸‰è§’å½¢å’Œä¸€ä¸ªæ­£æ–¹å½¢ï¼Œä½†å¯ä»¥é‡å†™è¯¥å‡½æ•°ï¼Œä»¥å„ç§å…¶ä»–æ–¹å¼ç»˜åˆ¶æ¢¯å½¢ï¼Œè€Œä¸ä¼šæ”¹å˜å…¶è¿”å›ç±»å‹ã€‚ æ­¤ç¤ºä¾‹çªå‡ºäº†ä¸é€æ˜çš„è¿”å›ç±»å‹ä¸æ³›å‹ç±»å‹ç›¸åçš„æ–¹å¼ã€‚makeTrapezoid()å†…éƒ¨çš„ä»£ç å¯ä»¥è¿”å›å®ƒéœ€è¦çš„ä»»ä½•ç±»å‹ï¼Œåªè¦è¯¥ç±»å‹ç¬¦åˆShapeåè®®ï¼Œå°±åƒè°ƒç”¨é€šç”¨å‡½æ•°ä¸€æ ·ã€‚è°ƒç”¨å‡½æ•°çš„ä»£ç éœ€è¦ä»¥ä¸€èˆ¬æ–¹å¼ç¼–å†™ï¼Œä¾‹å¦‚å®ç°æ³›å‹å‡½æ•°ï¼Œä»¥ä¾¿å®ƒå¯ä»¥ä¸makeTrapezoid()è¿”å›çš„ä»»ä½•Shapeå€¼ä¸€èµ·å·¥ä½œã€‚ æ‚¨è¿˜å¯ä»¥å°†ä¸é€æ˜çš„è¿”å›ç±»å‹ä¸æ³›å‹ç»„åˆåœ¨ä¸€èµ·ã€‚ä»¥ä¸‹ä»£ç ä¸­çš„å‡½æ•°éƒ½è¿”å›ç¬¦åˆShapeåè®®çš„æŸç§ç±»å‹çš„å€¼ã€‚ 1234567891011121314151. func flip&lt;T: Shape&gt;(_ shape: T) -&gt; some Shape &#123;2. â€‹ return FlippedShape(shape: shape)3. &#125;4. func join&lt;T: Shape, U: Shape&gt;(_ top: T, _ bottom: U) -&gt; some Shape &#123;5. â€‹ JoinedShape(top: top, bottom: bottom)6. &#125;7. 8. let opaqueJoinedTriangles = join(smallTriangle, flip(smallTriangle))9. print(opaqueJoinedTriangles.draw())10. // *11. // **12. // ***13. // ***14. // **15. // * æœ¬ç¤ºä¾‹ä¸­opaqueJoinedTrianglesçš„å€¼ä¸æœ¬ç« å‰é¢ä¸é€æ˜ç±»å‹è§£å†³çš„é—®é¢˜éƒ¨åˆ†ä¸­çš„æ³›å‹ç¤ºä¾‹ä¸­çš„joinedTrianglesç›¸åŒã€‚ç„¶è€Œï¼Œä¸è¯¥ç¤ºä¾‹ä¸­çš„å€¼ä¸åŒï¼Œflip(_:)å’Œjoin(_:_:)å°†é€šç”¨å½¢çŠ¶æ“ä½œè¿”å›çš„åº•å±‚ç±»å‹åŒ…è£…åœ¨ä¸é€æ˜çš„è¿”å›ç±»å‹ä¸­ï¼Œè¿™é˜²æ­¢è¿™äº›ç±»å‹å¯è§ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯é€šç”¨çš„ï¼Œå› ä¸ºå®ƒä»¬ä¾èµ–çš„ç±»å‹æ˜¯é€šç”¨çš„ï¼Œå‡½æ•°çš„ç±»å‹å‚æ•°ä¼ é€’FlippedShapeå’ŒJoinedShapeæ‰€éœ€çš„ç±»å‹ä¿¡æ¯ã€‚ å¦‚æœå…·æœ‰ä¸é€æ˜è¿”å›ç±»å‹çš„å‡½æ•°ä»å¤šä¸ªåœ°æ–¹è¿”å›ï¼Œåˆ™æ‰€æœ‰å¯èƒ½çš„è¿”å›å€¼å¿…é¡»å…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚å¯¹äºæ³›å‹å‡½æ•°ï¼Œè¯¥è¿”å›ç±»å‹å¯ä»¥ä½¿ç”¨å‡½æ•°çš„æ³›å‹ç±»å‹å‚æ•°ï¼Œä½†å®ƒå¿…é¡»ä»ç„¶æ˜¯å•ä¸€ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯å½¢çŠ¶ç¿»è½¬å‡½æ•°çš„æ— æ•ˆç‰ˆæœ¬ï¼Œå…¶ä¸­åŒ…æ‹¬æ­£æ–¹å½¢çš„ç‰¹æ®Šæƒ…å†µï¼š 1234561. func invalidFlip&lt;T: Shape&gt;(_ shape: T) -&gt; some Shape &#123;2. â€‹ if shape is Square &#123;3. â€‹ return shape // Error: return types don&#x27;t match4. â€‹ &#125;5. â€‹ return FlippedShape(shape: shape) // Error: return types don&#x27;t match6. &#125; å¦‚æœæ‚¨ä½¿ç”¨Squareè°ƒç”¨æ­¤å‡½æ•°ï¼Œå®ƒå°†è¿”å›Squareï¼›å¦åˆ™ï¼Œå®ƒå°†è¿”å›aFlippedShapeã€‚è¿™è¿åäº†ä»…è¿”å›ä¸€ç§ç±»å‹çš„å€¼çš„è¦æ±‚ï¼Œå¹¶ä½¿invalidFlip(_:)ä»£ç æ— æ•ˆã€‚ä¿®å¤invalidFlip(_:)çš„ä¸€ç§æ–¹æ³•æ˜¯å°†æ­£æ–¹å½¢çš„ç‰¹æ®Šæƒ…å†µç§»åŠ¨åˆ°FlippedShapeçš„å®ç°ä¸­ï¼Œè¿™ä½¿å¾—æ­¤å‡½æ•°å§‹ç»ˆè¿”å›aFlippedShapeå€¼ï¼š 123456789101. struct FlippedShape&lt;T: Shape&gt;: Shape &#123;2. â€‹ var shape: T3. â€‹ func draw() -&gt; String &#123;4. â€‹ if shape is Square &#123;5. â€‹ return shape.draw()6. â€‹ &#125;7. â€‹ let lines = shape.draw().split(separator: &quot;\\n&quot;)8. â€‹ return lines.reversed().joined(separator: &quot;\\n&quot;)9. â€‹ &#125;10. &#125; å§‹ç»ˆè¿”å›å•ä¸ªç±»å‹çš„è¦æ±‚å¹¶ä¸å¦¨ç¢æ‚¨åœ¨ä¸é€æ˜çš„è¿”å›ç±»å‹ä¸­ä½¿ç”¨æ³›å‹ã€‚ä»¥ä¸‹æ˜¯å°†å…¶ç±»å‹å‚æ•°é›†æˆåˆ°å…¶è¿”å›çš„å€¼çš„åŸºç¡€ç±»å‹çš„å‡½æ•°ç¤ºä¾‹ï¼š 1231. func `repeat`&lt;T: Shape&gt;(shape: T, count: Int) -&gt; some Collection &#123;2. â€‹ return Array&lt;T&gt;(repeating: shape, count: count)3. &#125; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å›å€¼çš„åº•å±‚ç±»å‹å› Tè€Œå¼‚ï¼šæ— è®ºä¼ é€’ä»€ä¹ˆå½¢çŠ¶ï¼Œrepeat(shape:count:)åˆ›å»ºå¹¶è¿”å›è¯¥å½¢çŠ¶çš„æ•°ç»„ã€‚ç„¶è€Œï¼Œè¿”å›å€¼å§‹ç»ˆå…·æœ‰ç›¸åŒçš„[T]åº•å±‚ç±»å‹ï¼Œå› æ­¤å®ƒéµå¾ªäº†å…·æœ‰ä¸é€æ˜è¿”å›ç±»å‹çš„å‡½æ•°å¿…é¡»ä»…è¿”å›å•ä¸ªç±»å‹çš„å€¼çš„è¦æ±‚ã€‚ ä¸é€æ˜ç±»å‹å’Œåè®®ç±»å‹ä¹‹é—´çš„å·®å¼‚ è¿”å›ä¸é€æ˜ç±»å‹çœ‹èµ·æ¥ä¸ä½¿ç”¨åè®®ç±»å‹ä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹éå¸¸ç›¸ä¼¼ï¼Œä½†è¿™ä¸¤ç§è¿”å›ç±»å‹åœ¨æ˜¯å¦ä¿ç•™ç±»å‹æ ‡è¯†æ–¹é¢æœ‰æ‰€ä¸åŒã€‚ä¸é€æ˜ç±»å‹æ˜¯æŒ‡ä¸€ç§ç‰¹å®šç±»å‹ï¼Œå°½ç®¡å‡½æ•°çš„è°ƒç”¨è€…æ— æ³•çœ‹åˆ°å“ªç§ç±»å‹ï¼›åè®®ç±»å‹å¯ä»¥å¼•ç”¨ä»»ä½•ç¬¦åˆåè®®çš„ç±»å‹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåè®®ç±»å‹ä½¿æ‚¨æ›´çµæ´»åœ°äº†è§£å®ƒä»¬å­˜å‚¨çš„å€¼çš„åº•å±‚ç±»å‹ï¼Œä¸é€æ˜ç±»å‹å…è®¸æ‚¨å¯¹è¿™äº›åº•å±‚ç±»å‹åšå‡ºæ›´æœ‰åŠ›çš„ä¿è¯ã€‚ ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¸€ä¸ªflip(_:)ç‰ˆæœ¬ï¼Œå®ƒä½¿ç”¨åè®®ç±»å‹ä½œä¸ºå…¶è¿”å›ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸é€æ˜çš„è¿”å›ç±»å‹ï¼š 1231. func protoFlip&lt;T: Shape&gt;(_ shape: T) -&gt; Shape &#123;2. â€‹ return FlippedShape(shape: shape)3. &#125; æ­¤ç‰ˆæœ¬çš„protoFlip(_:)ä¸flip(_:)å…·æœ‰ç›¸åŒçš„ä¸»ä½“ï¼Œå¹¶ä¸”å®ƒæ€»æ˜¯è¿”å›ç›¸åŒç±»å‹çš„å€¼ã€‚ä¸flip(_:)ï¼ŒprotoFlip(_:)è¿”å›çš„å€¼ä¸éœ€è¦å§‹ç»ˆå…·æœ‰ç›¸åŒçš„ç±»å‹â€”â€”å®ƒåªéœ€è¦ç¬¦åˆShapeåè®®ã€‚æ¢å¥è¯è¯´ï¼ŒprotoFlip(_:)ä¸å…¶è°ƒç”¨è€…ç­¾è®¢çš„APIåˆåŒæ¯”flip(_:)çš„APIåˆåŒè¦å®½æ¾å¾—å¤šã€‚å®ƒä¿ç•™äº†è¿”å›å¤šç§ç±»å‹å€¼çš„çµæ´»æ€§ï¼š 12345671. func protoFlip&lt;T: Shape&gt;(_ shape: T) -&gt; Shape &#123;2. â€‹ if shape is Square &#123;3. â€‹ return shape4. â€‹ &#125;5. 6. â€‹ return FlippedShape(shape: shape)7. &#125; ä»£ç çš„ä¿®è®¢ç‰ˆæœ¬è¿”å›Squareçš„å®ä¾‹æˆ–FlippedShapeçš„å®ä¾‹ï¼Œå…·ä½“å–å†³äºä¼ é€’çš„å½¢çŠ¶ã€‚æ­¤å‡½æ•°è¿”å›çš„ä¸¤ä¸ªç¿»è½¬å½¢çŠ¶å¯èƒ½å…·æœ‰å®Œå…¨ä¸åŒçš„ç±»å‹ã€‚å½“ç¿»è½¬ç›¸åŒå½¢çŠ¶çš„å¤šä¸ªå®ä¾‹æ—¶ï¼Œæ­¤å‡½æ•°çš„å…¶ä»–æœ‰æ•ˆç‰ˆæœ¬å¯ä»¥è¿”å›ä¸åŒç±»å‹çš„å€¼ã€‚æ¥è‡ªprotoFlip(_:)ä¸å¤ªå…·ä½“çš„è¿”å›ç±»å‹ä¿¡æ¯æ„å‘³ç€è®¸å¤šä¾èµ–ç±»å‹ä¿¡æ¯çš„æ“ä½œåœ¨è¿”å›çš„å€¼ä¸Šä¸å¯ç”¨ã€‚ä¾‹å¦‚ï¼Œæ— æ³•ç¼–å†™==è¿ç®—ç¬¦æ¥æ¯”è¾ƒæ­¤å‡½æ•°è¿”å›çš„ç»“æœã€‚ let protoFlippedTriangle &#x3D; protoFlip(smallTriangle) let sameThing &#x3D; protoFlip(smallTriangle) protoFlippedTriangle &#x3D;&#x3D; sameThing &#x2F;&#x2F; Error ç¤ºä¾‹æœ€åä¸€è¡Œçš„é”™è¯¯æœ‰å‡ ä¸ªåŸå› ã€‚è¿«åœ¨çœ‰ç«çš„é—®é¢˜æ˜¯ï¼ŒShapeä¸åŒ…å«==è¿ç®—ç¬¦ä½œä¸ºå…¶åè®®è¦æ±‚çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœæ‚¨å°è¯•æ·»åŠ ä¸€ä¸ªï¼Œæ‚¨å°†é‡åˆ°çš„ä¸‹ä¸€ä¸ªé—®é¢˜æ˜¯==è¿ç®—ç¬¦éœ€è¦çŸ¥é“å…¶å·¦æ‰‹å’Œå³æ‰‹å‚æ•°çš„ç±»å‹ã€‚è¿™ç§è¿ç®—ç¬¦é€šå¸¸æ¥å—typeSelfçš„å‚æ•°ï¼ŒåŒ¹é…é‡‡ç”¨åè®®çš„ä»»ä½•å…·ä½“ç±»å‹ï¼Œä½†åœ¨åè®®ä¸­æ·»åŠ Selfè¦æ±‚ä¸å…è®¸å°†åè®®ç”¨ä½œç±»å‹æ—¶å‘ç”Ÿçš„ç±»å‹æ“¦é™¤ã€‚ ä½¿ç”¨åè®®ç±»å‹ä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹ä½¿æ‚¨å¯ä»¥çµæ´»åœ°è¿”å›ä»»ä½•ç¬¦åˆåè®®çš„ç±»å‹ã€‚ç„¶è€Œï¼Œè¿™ç§çµæ´»æ€§çš„æˆæœ¬æ˜¯ï¼Œä¸€äº›æ“ä½œæ— æ³•å¯¹è¿”å›çš„å€¼è¿›è¡Œã€‚è¯¥ç¤ºä¾‹æ˜¾ç¤ºäº†==è¿ç®—ç¬¦å¦‚ä½•ä¸å¯ç”¨â€”â€”è¿™å–å†³äºä½¿ç”¨åè®®ç±»å‹æ— æ³•ä¿ç•™çš„ç‰¹å®šç±»å‹ä¿¡æ¯ã€‚ è¿™ç§æ–¹æ³•çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯å½¢çŠ¶è½¬æ¢ä¸ä¼šåµŒå¥—ã€‚ç¿»è½¬ä¸‰è§’å½¢çš„ç»“æœæ˜¯ç±»å‹ä¸ºShapeçš„å€¼ï¼ŒprotoFlip(_:)å‡½æ•°é‡‡ç”¨ç¬¦åˆShapeåè®®çš„æŸç§ç±»å‹çš„å‚æ•°ã€‚ç„¶è€Œï¼Œåè®®ç±»å‹çš„å€¼ä¸ç¬¦åˆè¯¥åè®®ï¼›protoFlip(_:)è¿”å›çš„å€¼ä¸ç¬¦åˆShapeã€‚è¿™æ„å‘³ç€åƒprotoFlip(protoFlip(smallTriange))è¿™æ ·çš„åº”ç”¨å¤šä¸ªè½¬æ¢çš„ä»£ç æ— æ•ˆï¼Œå› ä¸ºç¿»è½¬çš„å½¢çŠ¶ä¸æ˜¯toprotoFlipprotoFlip(_:)çš„æœ‰æ•ˆå‚æ•°ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸é€æ˜ç±»å‹ä¿ç•™äº†åº•å±‚ç±»å‹çš„èº«ä»½ã€‚Swiftå¯ä»¥æ¨æ–­å…³è”ç±»å‹ï¼Œè¿™å…è®¸æ‚¨åœ¨åè®®ç±»å‹ä¸èƒ½ç”¨ä½œè¿”å›å€¼çš„åœ°æ–¹ä½¿ç”¨ä¸é€æ˜çš„è¿”å›å€¼ã€‚ä¾‹å¦‚ï¼Œè¿™æ˜¯æ¥è‡ªGenericsçš„Containeråè®®çš„ä¸€ä¸ªç‰ˆæœ¬ï¼š protocol Container { â€‹ associatedtype Item â€‹ var count: Int { get } â€‹ subscript(i: Int) -&gt; Item { get } } extension Array: Container { } æ‚¨ä¸èƒ½å°†Containerç”¨ä½œå‡½æ•°çš„è¿”å›ç±»å‹ï¼Œå› ä¸ºè¯¥åè®®å…·æœ‰å…³è”ç±»å‹ã€‚æ‚¨ä¹Ÿä¸èƒ½åœ¨æ³›å‹è¿”å›ç±»å‹ä¸­å°†å…¶ç”¨ä½œçº¦æŸï¼Œå› ä¸ºå‡½æ•°ä½“å¤–éƒ¨æ²¡æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥æ¨æ–­æ³›å‹ç±»å‹éœ€è¦æ˜¯ä»€ä¹ˆã€‚ 1234567891. // Error: Protocol with associated types can&#x27;t be used as a return type.2. func makeProtocolContainer&lt;T&gt;(item: T) -&gt; Container &#123;3. â€‹ return [item]4. &#125;5. 6. // Error: Not enough information to infer C.7. func makeProtocolContainer&lt;T, C: Container&gt;(item: T) -&gt; C &#123;8. â€‹ return [item]9. &#125; ä½¿ç”¨ä¸é€æ˜ç±»å‹someContainerä½œä¸ºè¿”å›ç±»å‹è¡¨ç¤ºæ‰€éœ€çš„APIåˆåŒâ€”â€”è¯¥å‡½æ•°è¿”å›å®¹å™¨ï¼Œä½†æ‹’ç»æŒ‡å®šå®¹å™¨çš„ç±»å‹ï¼š 12345671. func makeOpaqueContainer&lt;T&gt;(item: T) -&gt; some Container &#123;2. â€‹ return [item]3. &#125;4. let opaqueContainer = makeOpaqueContainer(item: 12)5. let twelve = opaqueContainer[0]6. print(type(of: twelve))7. // Prints &quot;Int&quot; twelveçš„ç±»å‹è¢«æ¨æ–­ä¸ºIntï¼Œè¿™è¯´æ˜äº†ç±»å‹æ¨æ–­é€‚ç”¨äºä¸é€æ˜ç±»å‹çš„äº‹å®ã€‚åœ¨makeOpaqueContainer(item:)çš„å®ç°ä¸­ï¼Œä¸é€æ˜å®¹å™¨çš„åŸºç¡€ç±»å‹æ˜¯[T]åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒTæ˜¯Intï¼Œå› æ­¤è¿”å›å€¼æ˜¯æ•´æ•°æ•°æ•°ç»„ï¼Œå¹¶ä¸”æ¨æ–­å‡ºItemå…³è”çš„ç±»å‹ä¸ºIntã€‚Containerä¸Šçš„ä¸‹æ ‡è¿”å›Itemï¼Œè¿™æ„å‘³ç€twelveçš„ç±»å‹ä¹Ÿè¢«æ¨æ–­ä¸ºIntã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ å…³äºSwift","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-å…³äºSwift","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-å…³äºSwift/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%85%B3%E4%BA%8ESwift/","excerpt":"","text":"docs swift | swift learn | youtube | runoob æœ¬ç«™åŸºäºswift 5.6è¿›è¡Œæè¿°ï¼Œç‰ˆæœ¬å‡çº§å¸¦æ¥çš„å˜åŠ¨ä¼šä»¥ç‹¬ç«‹æ–‡ä»¶å±•ç¤ºã€‚ ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/ Swift æ˜¯ç¼–å†™è½¯ä»¶çš„ç»ä½³æ–¹å¼ï¼Œæ— è®ºæ˜¯æ‰‹æœºã€å°å¼æœºã€æœåŠ¡å™¨è¿˜æ˜¯ä»»ä½•å…¶ä»–è¿è¡Œä»£ç çš„å†…å®¹ã€‚è¿™æ˜¯ä¸€ç§å®‰å…¨ã€å¿«é€Ÿå’Œäº’åŠ¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒç»“åˆäº†ç°ä»£è¯­è¨€æ€ç»´çš„æœ€ä½³ä¸æ›´å¹¿æ³›çš„è‹¹æœå·¥ç¨‹æ–‡åŒ–çš„æ™ºæ…§ä»¥åŠå¼€æºç¤¾åŒºçš„å„ç§è´¡çŒ®ã€‚ç¼–è¯‘å™¨é’ˆå¯¹æ€§èƒ½è¿›è¡Œäº†ä¼˜åŒ–ï¼Œè¯­è¨€ä¹Ÿé’ˆå¯¹å¼€å‘è¿›è¡Œäº†ä¼˜åŒ–ï¼ŒåŒæ—¶ä¸å½±å“ä¸¤è€…ã€‚ Swiftå¯¹æ–°ç¨‹åºå‘˜å¾ˆå‹å¥½ã€‚å®ƒæ˜¯ä¸€ç§å·¥ä¸šè´¨é‡çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸è„šæœ¬è¯­è¨€ä¸€æ ·å¯Œæœ‰è¡¨ç°åŠ›å’Œä¹è¶£ã€‚åœ¨ playground ä¸­ç¼–å†™ Swift ä»£ç å¯ä»¥è®©æ‚¨å°è¯•ä»£ç å¹¶ç«‹å³æŸ¥çœ‹ç»“æœï¼Œè€Œæ— éœ€æ„å»ºå’Œè¿è¡Œåº”ç”¨ç¨‹åºã€‚ Swifté€šè¿‡é‡‡ç”¨ç°ä»£ç¼–ç¨‹æ¨¡å¼å®šä¹‰äº†å¤§ç±»å¸¸è§ç¼–ç¨‹é”™è¯¯ï¼š å˜é‡æ€»æ˜¯åœ¨ä½¿ç”¨å‰åˆå§‹åŒ–ã€‚ æ£€æŸ¥æ•°ç»„ç´¢å¼•æ˜¯å¦æœ‰è¶Šç•Œé”™è¯¯ã€‚ æ£€æŸ¥æ•´æ•°æ˜¯å¦æº¢å‡ºã€‚ å¯é€‰ç¡®ä¿æ˜¾å¼å¤„ç†nilå€¼ã€‚ å†…å­˜æ˜¯è‡ªåŠ¨ç®¡ç†çš„ã€‚ é”™è¯¯å¤„ç†å…è®¸ä»æ„å¤–æ•…éšœä¸­æ§åˆ¶æ¢å¤ã€‚ Swiftä»£ç ç»è¿‡ç¼–è¯‘å’Œä¼˜åŒ–ï¼Œä»¥å……åˆ†åˆ©ç”¨ç°ä»£ç¡¬ä»¶ã€‚è¯­æ³•å’Œæ ‡å‡†åº“æ˜¯æ ¹æ®ä»¥ä¸‹æŒ‡å¯¼åŸåˆ™è®¾è®¡çš„ï¼Œå³ç¼–å†™ä»£ç çš„æ˜æ˜¾æ–¹å¼ä¹Ÿåº”å‘æŒ¥æœ€ä½³æ•ˆæœã€‚å®ƒçš„å®‰å…¨æ€§å’Œé€Ÿåº¦ç›¸ç»“åˆï¼Œä½¿Swiftæˆä¸ºâ€œä½ å¥½ï¼Œä¸–ç•Œï¼â€ç­‰ä¸€åˆ‡çš„ç»ä½³é€‰æ‹©ã€‚æ•´ä¸ªæ“ä½œç³»ç»Ÿã€‚ Swiftå°†å¼ºå¤§çš„ç±»å‹æ¨ç†å’Œæ¨¡å¼åŒ¹é…ä¸ç°ä»£è½»é‡çº§è¯­æ³•ç›¸ç»“åˆï¼Œå…è®¸ä»¥æ¸…æ™°ç®€æ´çš„æ–¹å¼è¡¨è¾¾å¤æ‚çš„æƒ³æ³•ã€‚å› æ­¤ï¼Œä»£ç ä¸ä»…æ›´å®¹æ˜“ç¼–å†™ï¼Œè€Œä¸”æ›´å®¹æ˜“é˜…è¯»å’Œç»´æŠ¤ã€‚ Swiftå·²ç»é…é…¿å¤šå¹´ï¼Œå¹¶éšç€æ–°çš„ç‰¹æ€§å’ŒåŠŸèƒ½ä¸æ–­å‘å±•ã€‚æˆ‘ä»¬å¯¹ Swift çš„ç›®æ ‡é›„å¿ƒå‹ƒå‹ƒã€‚æˆ‘ä»¬è¿«ä¸åŠå¾…åœ°æƒ³çœ‹çœ‹ä½ ç”¨å®ƒåˆ›é€ äº†ä»€ä¹ˆã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ å†…å­˜å®‰å…¨","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-å†…å­˜å®‰å…¨","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-å†…å­˜å®‰å…¨/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%86%85%E5%AD%98%E5%AE%89%E5%85%A8/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/MemorySafety.html é»˜è®¤æƒ…å†µä¸‹ï¼ŒSwift å¯ä»¥é˜²æ­¢ä»£ç ä¸­å‡ºç°ä¸å®‰å…¨è¡Œä¸ºã€‚ä¾‹å¦‚ï¼ŒSwiftç¡®ä¿å˜é‡åœ¨ä½¿ç”¨å‰åˆå§‹åŒ–ï¼Œåœ¨é‡Šæ”¾åæ— æ³•è®¿é—®å†…å­˜ï¼Œå¹¶æ£€æŸ¥æ•°ç»„ç´¢å¼•æ˜¯å¦æœ‰è¶Šç•Œé”™è¯¯ã€‚ Swift è¿˜è¦æ±‚ä¿®æ”¹å†…å­˜ä½ç½®çš„ä»£ç ç‹¬å è¯¥å†…å­˜è®¿é—®æƒé™ï¼Œä»è€Œç¡®ä¿å¯¹åŒä¸€å†…å­˜åŒºåŸŸçš„å¤šæ¬¡è®¿é—®ä¸ä¼šå‘ç”Ÿå†²çªã€‚ç”±äº Swift ä¼šè‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œå› æ­¤åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨æ ¹æœ¬ä¸éœ€è¦è€ƒè™‘è®¿é—®å†…å­˜ã€‚ç„¶è€Œï¼Œäº†è§£æ½œåœ¨å†²çªåœ¨å“ªé‡Œå¯èƒ½å‘ç”Ÿå¾ˆé‡è¦ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥é¿å…ç¼–å†™å†…å­˜è®¿é—®å†²çªçš„ä»£ç ã€‚å¦‚æœæ‚¨çš„ä»£ç ç¡®å®åŒ…å«å†²çªï¼Œæ‚¨å°†æ”¶åˆ°ç¼–è¯‘æ—¶æˆ–è¿è¡Œæ—¶é”™è¯¯ã€‚ äº†è§£å†…å­˜è®¿é—®å†²çªå½“æ‚¨æ‰§è¡Œè®¾ç½®å˜é‡å€¼æˆ–å°†å‚æ•°ä¼ é€’ç»™å‡½æ•°ç­‰æ“ä½œæ—¶ï¼Œä»£ç ä¸­ä¼šå‘ç”Ÿå¯¹å†…å­˜çš„è®¿é—®ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç åŒ…å«è¯»å–è®¿é—®å’Œå†™å…¥è®¿é—®ï¼š &#x2F;&#x2F; A write access to the memory where one is stored. var one &#x3D; 1 &#x2F;&#x2F; A read access from the memory where one is stored. print(â€œWeâ€™re number (one)!â€) å½“æ‚¨ä»£ç çš„ä¸åŒéƒ¨åˆ†è¯•å›¾åŒæ—¶è®¿é—®å†…å­˜ä¸­çš„åŒä¸€ä½ç½®æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå¯¹å†…å­˜çš„è®¿é—®å†²çªã€‚åŒæ—¶å¤šæ¬¡è®¿é—®å†…å­˜ä¸­çš„ä½ç½®å¯èƒ½ä¼šäº§ç”Ÿä¸å¯é¢„æµ‹æˆ–ä¸ä¸€è‡´çš„è¡Œä¸ºã€‚åœ¨Swiftä¸­ï¼Œæœ‰å‡ ç§æ–¹æ³•å¯ä»¥ä¿®æ”¹è·¨è¶Šå‡ è¡Œä»£ç çš„å€¼ï¼Œä»è€Œå¯ä»¥åœ¨è‡ªå·±çš„ä¿®æ”¹è¿‡ç¨‹ä¸­å°è¯•è®¿é—®ä¸€ä¸ªå€¼ã€‚ é€šè¿‡è€ƒè™‘å¦‚ä½•æ›´æ–°å†™åœ¨çº¸ä¸Šçš„é¢„ç®—ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ç±»ä¼¼çš„é—®é¢˜ã€‚æ›´æ–°é¢„ç®—æ˜¯ä¸€ä¸ªä¸¤æ­¥è¿‡ç¨‹ï¼šé¦–å…ˆæ·»åŠ é¡¹ç›®çš„åç§°å’Œä»·æ ¼ï¼Œç„¶åæ›´æ”¹æ€»é‡‘é¢ä»¥åæ˜ å½“å‰åˆ—è¡¨ä¸­çš„é¡¹ç›®ã€‚åœ¨æ›´æ–°ä¹‹å‰å’Œä¹‹åï¼Œæ‚¨å¯ä»¥é˜…è¯»é¢„ç®—ä¸­çš„ä»»ä½•ä¿¡æ¯å¹¶è·å¾—æ­£ç¡®çš„ç­”æ¡ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å½“æ‚¨å°†é¡¹ç›®æ·»åŠ åˆ°é¢„ç®—ä¸­æ—¶ï¼Œå®ƒå¤„äºä¸´æ—¶æ— æ•ˆçŠ¶æ€ï¼Œå› ä¸ºæ€»é‡‘é¢å°šæœªæ›´æ–°ä»¥åæ˜ æ–°æ·»åŠ çš„é¡¹ç›®ã€‚åœ¨æ·»åŠ é¡¹ç›®è¿‡ç¨‹ä¸­è¯»å–æ€»é‡‘é¢ä¼šæ˜¾ç¤ºé”™è¯¯çš„ä¿¡æ¯ã€‚ æ­¤ç¤ºä¾‹è¿˜å±•ç¤ºäº†æ‚¨åœ¨ä¿®å¤å†…å­˜è®¿é—®å†²çªæ—¶å¯èƒ½ä¼šé‡åˆ°çš„æŒ‘æˆ˜ï¼šæœ‰æ—¶æœ‰å¤šç§æ–¹æ³•å¯ä»¥è§£å†³äº§ç”Ÿä¸åŒç­”æ¡ˆçš„å†²çªï¼Œå¹¶ä¸”å¹¶ä¸æ€»æ˜¯å¾ˆæ˜æ˜¾å“ªä¸ªç­”æ¡ˆæ˜¯æ­£ç¡®çš„ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæ ¹æ®æ‚¨æƒ³è¦åŸå§‹æ€»é‡‘é¢è¿˜æ˜¯æ›´æ–°çš„æ€»é‡‘é¢ï¼Œ5ç¾å…ƒæˆ–320ç¾å…ƒå¯èƒ½æ˜¯æ­£ç¡®çš„ç­”æ¡ˆã€‚åœ¨ä¿®å¤ç›¸äº’å†²çªçš„è®¿é—®ä¹‹å‰ï¼Œæ‚¨å¿…é¡»ç¡®å®šå®ƒæ‰“ç®—åšä»€ä¹ˆã€‚ æ³¨æ„ å¦‚æœæ‚¨ç¼–å†™äº†å¹¶å‘æˆ–å¤šçº¿ç¨‹ä»£ç ï¼Œå¯¹å†…å­˜çš„è®¿é—®å†²çªå¯èƒ½æ˜¯ä¸€ä¸ªç†Ÿæ‚‰çš„é—®é¢˜ã€‚ç„¶è€Œï¼Œè¿™é‡Œè®¨è®ºçš„ç›¸äº’å†²çªçš„è®¿é—®å¯èƒ½å‘ç”Ÿåœ¨å•ä¸ªçº¿ç¨‹ä¸Šï¼Œä¸æ¶‰åŠå¹¶å‘æˆ–å¤šçº¿ç¨‹ä»£ç ã€‚ å¦‚æœæ‚¨ä»å•ä¸ªçº¿ç¨‹ä¸­å¯¹å†…å­˜çš„è®¿é—®å­˜åœ¨å†²çªï¼ŒSwiftä¿è¯æ‚¨åœ¨ç¼–è¯‘æ—¶æˆ–è¿è¡Œæ—¶éƒ½ä¼šæ”¶åˆ°é”™è¯¯ã€‚å¯¹äºå¤šçº¿ç¨‹ä»£ç ï¼Œè¯·ä½¿ç”¨çº¿ç¨‹æ¶ˆæ¯’å™¨æ¥å¸®åŠ©æ£€æµ‹è·¨çº¿ç¨‹çš„å†²çªè®¿é—®ã€‚ å†…å­˜è®¿é—®çš„ç‰¹ç‚¹åœ¨ç›¸äº’å†²çªçš„è®¿é—®ä¸­ï¼Œå†…å­˜è®¿é—®æœ‰ä¸‰ä¸ªç‰¹å¾éœ€è¦è€ƒè™‘ï¼šè®¿é—®æ˜¯è¯»è¿˜æ˜¯å†™ï¼Œè®¿é—®æŒç»­æ—¶é—´å’Œè¢«è®¿é—®çš„å†…å­˜ä½ç½®ã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœæ‚¨æœ‰ä¸¤ä¸ªè®¿é—®æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶ï¼Œåˆ™ä¼šå‘ç”Ÿå†²çªï¼š è‡³å°‘æœ‰ä¸€ä¸ªæ˜¯å†™å…¥è®¿é—®æˆ–éåŸå­è®¿é—®ã€‚ ä»–ä»¬åœ¨å†…å­˜ä¸­è®¿é—®ç›¸åŒçš„ä½ç½®ã€‚ å®ƒä»¬çš„æŒç»­æ—¶é—´é‡å ã€‚ è¯»å†™è®¿é—®ä¹‹é—´çš„åŒºåˆ«é€šå¸¸æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼šå†™å…¥è®¿é—®ä¼šæ”¹å˜å†…å­˜ä¸­çš„ä½ç½®ï¼Œä½†è¯»å–è®¿é—®ä¸ä¼šã€‚å†…å­˜ä¸­çš„ä½ç½®æ˜¯æŒ‡æ­£åœ¨è®¿é—®çš„å†…å®¹ï¼Œä¾‹å¦‚å˜é‡ã€å¸¸é‡æˆ–å±æ€§ã€‚å†…å­˜è®¿é—®çš„æŒç»­æ—¶é—´è¦ä¹ˆæ˜¯å³æ—¶çš„ï¼Œè¦ä¹ˆæ˜¯é•¿æœŸçš„ã€‚ å¦‚æœæ“ä½œåªä½¿ç”¨CåŸå­è¿ç®—ï¼Œåˆ™è¯¥è¿ç®—æ˜¯åŸå­è¿ç®—ï¼›å¦åˆ™å®ƒæ˜¯éåŸå­è¿ç®—ã€‚æœ‰å…³è¿™äº›åŠŸèƒ½çš„åˆ—è¡¨ï¼Œè¯·å‚é˜…stdatomic(3)æ‰‹å†Œé¡µã€‚ å¦‚æœè®¿é—®æ— æ³•åœ¨è®¿é—®å¼€å§‹åä½†åœ¨è®¿é—®ç»“æŸå‰è¿è¡Œå…¶ä»–ä»£ç ï¼Œåˆ™è®¿é—®æ˜¯å³æ—¶çš„ã€‚å°±å…¶æœ¬è´¨è€Œè¨€ï¼Œä¸¤æ¬¡å³æ—¶è®¿é—®ä¸å¯èƒ½åŒæ—¶å‘ç”Ÿã€‚å¤§å¤šæ•°å†…å­˜è®¿é—®éƒ½æ˜¯å³æ—¶çš„ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç åˆ—è¡¨ä¸­çš„æ‰€æœ‰è¯»å†™è®¿é—®éƒ½æ˜¯å³æ—¶çš„ï¼š func oneMore(than number: Int) -&gt; Int { â€‹ return number + 1 } var myNumber &#x3D; 1 myNumber &#x3D; oneMore(than: myNumber) print(myNumber) &#x2F;&#x2F; Prints â€œ2â€ ç„¶è€Œï¼Œæœ‰å‡ ç§è®¿é—®å†…å­˜çš„æ–¹æ³•ï¼Œç§°ä¸ºé•¿æœŸè®¿é—®ï¼Œè·¨è¶Šäº†å…¶ä»–ä»£ç çš„æ‰§è¡Œã€‚å³æ—¶è®¿é—®å’Œé•¿æœŸè®¿é—®çš„åŒºåˆ«åœ¨äºï¼Œå…¶ä»–ä»£ç å¯ä»¥åœ¨é•¿æœŸè®¿é—®å¼€å§‹åä½†åœ¨ç»“æŸä¹‹å‰è¿è¡Œï¼Œè¿™è¢«ç§°ä¸ºé‡å ã€‚é•¿æœŸè®¿é—®å¯ä»¥ä¸å…¶ä»–é•¿æœŸè®¿é—®å’Œå³æ—¶è®¿é—®é‡å ã€‚ é‡å è®¿é—®ä¸»è¦å‡ºç°åœ¨åœ¨å‡½æ•°å’Œæ–¹æ³•æˆ–ç»“æ„çš„çªå˜æ–¹æ³•ä¸­ä½¿ç”¨å†…å¤–å‚æ•°çš„ä»£ç ä¸­ã€‚ä»¥ä¸‹å„èŠ‚å°†è®¨è®ºä½¿ç”¨é•¿æœŸè®¿é—®çš„ç‰¹å®šç±»å‹çš„Swiftä»£ç ã€‚ å¯¹In-Outå‚æ•°çš„è®¿é—®ç›¸äº’å†²çªå‡½æ•°å¯ä»¥é•¿æœŸå†™å…¥å…¶æ‰€æœ‰è¾“å…¥è¾“å‡ºå‚æ•°ã€‚è¿›å‡ºå‚æ•°çš„å†™å…¥è®¿é—®åœ¨è¯„ä¼°å®Œæ‰€æœ‰éå…¥å‡ºå‚æ•°åå¼€å§‹ï¼Œå¹¶æŒç»­åˆ°è¯¥å‡½æ•°è°ƒç”¨çš„æ•´ä¸ªæŒç»­æ—¶é—´ã€‚å¦‚æœæœ‰å¤šä¸ªè¾“å…¥è¾“å‡ºå‚æ•°ï¼Œå†™å…¥è®¿é—®çš„å¼€å§‹é¡ºåºä¸å‚æ•°æ˜¾ç¤ºçš„é¡ºåºç›¸åŒã€‚ è¿™ç§é•¿æœŸå†™å…¥è®¿é—®çš„ä¸€ä¸ªåæœæ˜¯ï¼Œå³ä½¿èŒƒå›´è§„åˆ™å’Œè®¿é—®æ§åˆ¶å…è®¸ï¼Œæ‚¨ä¹Ÿæ— æ³•è®¿é—®ä½œä¸ºè¿›å‡ºä¼ é€’çš„åŸå§‹å˜é‡â€”â€”å¯¹åŸå§‹å˜é‡çš„ä»»ä½•è®¿é—®éƒ½ä¼šäº§ç”Ÿå†²çªã€‚ä¾‹å¦‚ï¼š var stepSize &#x3D; 1 func increment(_ number: inout Int) { â€‹ number +&#x3D; stepSize } increment(&amp;stepSize) &#x2F;&#x2F; Error: conflicting accesses to stepSize åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒstepSizeæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé€šå¸¸å¯ä»¥ä»increment(_:)è®¿é—®ã€‚ç„¶è€Œï¼Œå¯¹stepSizeçš„è¯»å–è®¿é—®ä¸å†™å…¥è®¿é—®numberé‡å ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œnumberå’ŒstepSizeéƒ½æŒ‡å†…å­˜ä¸­çš„ç›¸åŒä½ç½®ã€‚è¯»å†™è®¿é—®å¼•ç”¨ç›¸åŒçš„å†…å­˜ï¼Œå®ƒä»¬é‡å ï¼Œäº§ç”Ÿå†²çªã€‚ è§£å†³è¿™ç§å†²çªçš„ä¸€ç§æ–¹æ³•æ˜¯æ˜ç¡®å¤åˆ¶stepSizeï¼š &#x2F;&#x2F; Make an explicit copy. var copyOfStepSize &#x3D; stepSize increment(&amp;copyOfStepSize) &#x2F;&#x2F; Update the original. stepSize &#x3D; copyOfStepSize &#x2F;&#x2F; stepSize is now 2 When you make a copy of stepSize before calling increment(_:), itâ€™s clear that the value of copyOfStepSize is incremented by the current step size. The read access ends before the write access starts, so there isnâ€™t a conflict. å¯¹è¿›å‡ºå‚æ•°çš„é•¿æœŸå†™å…¥è®¿é—®çš„å¦ä¸€ä¸ªåæœæ˜¯ï¼Œä¼ é€’å•ä¸ªå˜é‡ä½œä¸ºåŒä¸€å‡½æ•°å¤šä¸ªè¾“å…¥è¾“å‡ºå‚æ•°çš„å‚æ•°ä¼šäº§ç”Ÿå†²çªã€‚ä¾‹å¦‚ï¼š func balance(_ x: inout Int, _ y: inout Int) { â€‹ let sum &#x3D; x + y â€‹ x &#x3D; sum &#x2F; 2 â€‹ y &#x3D; sum - x } var playerOneScore &#x3D; 42 var playerTwoScore &#x3D; 30 balance(&amp;playerOneScore, &amp;playerTwoScore) &#x2F;&#x2F; OK balance(&amp;playerOneScore, &amp;playerOneScore) &#x2F;&#x2F; Error: conflicting accesses to playerOneScore ä¸Šé¢çš„balance(_:_:)å‡½æ•°ä¿®æ”¹å…¶ä¸¤ä¸ªå‚æ•°ï¼Œåœ¨å®ƒä»¬ä¹‹é—´å¹³å‡åˆ†é…æ€»å€¼ã€‚ä½¿ç”¨playerOneScoreå’ŒplayerTwoScoreå°†å…¶ç§°ä¸ºå‚æ•°ä¸ä¼šäº§ç”Ÿå†²çªâ€”â€”æœ‰ä¸¤ä¸ªå†™å…¥è®¿é—®åœ¨æ—¶é—´ä¸Šé‡å ï¼Œä½†å®ƒä»¬è®¿é—®å†…å­˜ä¸­çš„ä¸åŒä½ç½®ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå°†playerOneScoreä½œä¸ºä¸¤ä¸ªå‚æ•°çš„å€¼ä¼šäº§ç”Ÿå†²çªï¼Œå› ä¸ºå®ƒè¯•å›¾åŒæ—¶å¯¹å†…å­˜ä¸­çš„åŒä¸€ä½ç½®æ‰§è¡Œä¸¤æ¬¡å†™å…¥è®¿é—®ã€‚ æ³¨æ„ Because operators are functions, they can also have long-term accesses to their in-out parameters. For example, if balance(_:_:) was an operator function named &lt;^&gt;, writing playerOneScore &lt;^&gt; playerOneScore would result in the same conflict as balance(&amp;playerOneScore, &amp;playerOneScore). åœ¨æ–¹æ³•ä¸­è‡ªæˆ‘è®¿é—®ç›¸äº’å†²çªç»“æ„ä¸Šçš„çªå˜æ–¹æ³•åœ¨æ–¹æ³•è°ƒç”¨æœŸé—´å…·æœ‰å¯¹selfçš„å†™å…¥è®¿é—®æƒé™ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸€ä¸ªæ¸¸æˆï¼Œå…¶ä¸­æ¯ä¸ªç©å®¶çš„ç”Ÿå‘½å€¼åœ¨å—åˆ°ä¼¤å®³æ—¶ä¼šå‡å°‘ï¼Œèƒ½é‡é‡åœ¨ä½¿ç”¨ç‰¹æ®Šèƒ½åŠ›æ—¶ä¼šå‡å°‘ã€‚ struct Player { â€‹ var name: String â€‹ var health: Int â€‹ var energy: Int â€‹ static let maxHealth &#x3D; 10 â€‹ mutating func restoreHealth() { â€‹ health &#x3D; Player.maxHealth â€‹ } } åœ¨ä¸Šé¢çš„restoreHealth()æ–¹æ³•ä¸­ï¼Œå¯¹selfçš„å†™å…¥è®¿é—®ä»æ–¹æ³•çš„å¼€å¤´å¼€å§‹ï¼Œä¸€ç›´æŒç»­åˆ°æ–¹æ³•è¿”å›ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒrestoreHealth()å†…éƒ¨æ²¡æœ‰å…¶ä»–ä»£ç å¯ä»¥é‡å è®¿é—®Playerå®ä¾‹çš„å±æ€§ã€‚ä¸‹é¢çš„shareHealth(with:)æ–¹æ³•å°†å¦ä¸€ä¸ªPlayerå®ä¾‹ä½œä¸ºè¿›å‡ºå‚æ•°ï¼Œä»è€Œäº§ç”Ÿé‡å è®¿é—®çš„å¯èƒ½æ€§ã€‚ extension Player { â€‹ mutating func shareHealth(with teammate: inout Player) { â€‹ balance(&amp;teammate.health, &amp;health) â€‹ } } var oscar &#x3D; Player(name: â€œOscarâ€, health: 10, energy: 10) var maria &#x3D; Player(name: â€œMariaâ€, health: 5, energy: 10) oscar.shareHealth(with: &amp;maria) &#x2F;&#x2F; OK åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä¸ºå¥¥æ–¯å¡çš„ç©å®¶è°ƒç”¨shareHealth(with:)æ–¹æ³•ä¸Mariaçš„ç©å®¶å…±äº«å¥åº·ä¸ä¼šå¼•èµ·å†²çªã€‚åœ¨æ–¹æ³•è°ƒç”¨æœŸé—´ï¼Œå¯¹oscaræœ‰å†™å…¥è®¿é—®æƒé™ï¼Œå› ä¸ºoscaræ˜¯çªå˜æ–¹æ³•ä¸­selfçš„å€¼ï¼Œå¹¶ä¸”æœ‰å¯¹mariaçš„å†™å…¥è®¿é—®æƒé™ï¼Œå› ä¸ºmariaæ˜¯ä½œä¸ºè¿›å‡ºå‚æ•°ä¼ é€’çš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»–ä»¬è®¿é—®å†…å­˜ä¸­çš„ä¸åŒä½ç½®ã€‚å°½ç®¡è¿™ä¸¤ä¸ªå†™å…¥è®¿é—®åœ¨æ—¶é—´ä¸Šé‡å ï¼Œä½†å®ƒä»¬ä¸ä¼šå†²çªã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å°†oscarä½œä¸ºshareHealth(with:)çš„å‚æ•°ï¼Œåˆ™å­˜åœ¨å†²çªï¼š oscar.shareHealth(with: &amp;oscar) &#x2F;&#x2F; Error: conflicting accesses to oscar çªå˜æ–¹æ³•éœ€è¦åœ¨æ–¹æ³•æŒç»­æ—¶é—´å†…å†™å…¥å¯¹selfçš„è®¿é—®æƒé™ï¼Œè€Œå…¥å‡ºå‚æ•°éœ€è¦åœ¨åŒä¸€æŒç»­æ—¶é—´å†…å†™å…¥å¯¹teammateçš„è®¿é—®æƒé™ã€‚åœ¨æ–¹æ³•ä¸­ï¼Œselfå’Œteammateéƒ½å¼•ç”¨äº†å†…å­˜ä¸­çš„ç›¸åŒä½ç½®â€”â€”å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ä¸¤ä¸ªå†™å…¥è®¿é—®æŒ‡çš„æ˜¯ç›¸åŒçš„å†…å­˜ï¼Œå®ƒä»¬é‡å ï¼Œäº§ç”Ÿå†²çªã€‚ å¯¹å±æ€§çš„è®¿é—®ç›¸äº’å†²çªç»“æ„ã€å…ƒç»„å’Œæšä¸¾ç­‰ç±»å‹ç”±å•ä¸ªç»„æˆå€¼ç»„æˆï¼Œä¾‹å¦‚ç»“æ„çš„å±æ€§æˆ–å…ƒç»„çš„å…ƒç´ ã€‚ç”±äºè¿™äº›æ˜¯å€¼ç±»å‹ï¼Œå› æ­¤å˜å¼‚å€¼çš„ä»»ä½•éƒ¨åˆ†éƒ½ä¼šæ”¹å˜æ•´ä¸ªå€¼ï¼Œè¿™æ„å‘³ç€å¯¹å…¶ä¸­ä¸€ä¸ªå±æ€§çš„è¯»æˆ–å†™è®¿é—®éœ€è¦å¯¹æ•´ä¸ªå€¼çš„è¯»æˆ–å†™è®¿é—®ã€‚ä¾‹å¦‚ï¼Œå¯¹å…ƒç»„å…ƒç´ çš„é‡å å†™å…¥è®¿é—®ä¼šäº§ç”Ÿå†²çªï¼š var playerInformation &#x3D; (health: 10, energy: 20) balance(&amp;playerInformation.health, &amp;playerInformation.energy) &#x2F;&#x2F; Error: conflicting access to properties of playerInformation åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œåœ¨å…ƒç»„å…ƒç´ ä¸Šè°ƒç”¨balance(_:_:)ä¼šäº§ç”Ÿå†²çªï¼Œå› ä¸ºå¯¹playerInformationå†™å…¥è®¿é—®é‡å ã€‚playerInformation.healthå’ŒplayerInformation.energyéƒ½ä½œä¸ºè¾“å…¥è¾“å‡ºå‚æ•°ä¼ é€’ï¼Œè¿™æ„å‘³ç€balance(_:_:)éœ€è¦åœ¨å‡½æ•°è°ƒç”¨æœŸé—´å†™å…¥è®¿é—®æƒé™ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå¯¹å…ƒç»„å…ƒç´ çš„å†™å…¥è®¿é—®éƒ½éœ€è¦å¯¹æ•´ä¸ªå…ƒç»„è¿›è¡Œå†™å…¥è®¿é—®ã€‚è¿™æ„å‘³ç€å¯¹playerInformationæœ‰ä¸¤æ¬¡å†™å…¥è®¿é—®ï¼ŒæŒç»­æ—¶é—´é‡å ï¼Œå¯¼è‡´å†²çªã€‚ ä»¥ä¸‹ä»£ç æ˜¾ç¤ºï¼Œå¯¹å­˜å‚¨åœ¨å…¨å±€å˜é‡ä¸­çš„ç»“æ„å±æ€§çš„é‡å å†™å…¥è®¿é—®ä¹Ÿä¼šå‡ºç°ç›¸åŒçš„é”™è¯¯ã€‚ var holly &#x3D; Player(name: â€œHollyâ€, health: 10, energy: 10) balance(&amp;holly.health, &amp;holly.energy) &#x2F;&#x2F; Error åœ¨å®è·µä¸­ï¼Œå¤§å¤šæ•°å¯¹ç»“æ„å±æ€§çš„è®¿é—®å¯ä»¥å®‰å…¨åœ°é‡å ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸Šé¢ç¤ºä¾‹ä¸­çš„å˜é‡hollyæ›´æ”¹ä¸ºå±€éƒ¨å˜é‡è€Œä¸æ˜¯å…¨å±€å˜é‡ï¼Œç¼–è¯‘å™¨å¯ä»¥è¯æ˜å¯¹ç»“æ„å­˜å‚¨å±æ€§çš„é‡å è®¿é—®æ˜¯å®‰å…¨çš„ï¼š func someFunction() { â€‹ var oscar &#x3D; Player(name: â€œOscarâ€, health: 10, energy: 10) â€‹ balance(&amp;oscar.health, &amp;oscar.energy) &#x2F;&#x2F; OK } åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¥¥æ–¯å¡çš„å¥åº·å’Œèƒ½é‡ä½œä¸ºä¸¤ä¸ªå†…å¤–å‚æ•°æ¥balance(_:_:)ç¼–è¯‘å™¨å¯ä»¥è¯æ˜å†…å­˜å®‰å…¨å¾—åˆ°ä¿ç•™ï¼Œå› ä¸ºä¸¤ä¸ªå­˜å‚¨çš„å±æ€§ä¸ä¼šä»¥ä»»ä½•æ–¹å¼äº¤äº’ã€‚ é™åˆ¶é‡å è®¿é—®ç»“æ„å±æ€§å¹¶ä¸æ€»æ˜¯å¿…è¦çš„ï¼Œä»¥ä¿æŒå†…å­˜å®‰å…¨ã€‚å†…å­˜å®‰å…¨æ˜¯ç†æƒ³çš„ä¿è¯ï¼Œä½†ç‹¬å®¶è®¿é—®æ˜¯æ¯”å†…å­˜å®‰å…¨æ›´ä¸¥æ ¼çš„è¦æ±‚â€”â€”è¿™æ„å‘³ç€ä¸€äº›ä»£ç ä¿ç•™äº†å†…å­˜å®‰å…¨ï¼Œå³ä½¿å®ƒè¿åäº†å¯¹å†…å­˜çš„ç‹¬å®¶è®¿é—®ã€‚å¦‚æœç¼–è¯‘å™¨èƒ½å¤Ÿè¯æ˜å¯¹å†…å­˜çš„éæ’ä»–æ€§è®¿é—®ä»ç„¶æ˜¯å®‰å…¨çš„ï¼ŒSwiftå…è®¸æ­¤å†…å­˜å®‰å…¨ä»£ç ã€‚å…·ä½“è€Œè¨€ï¼Œå¦‚æœé€‚ç”¨ä»¥ä¸‹æ¡ä»¶ï¼Œå®ƒå¯ä»¥è¯æ˜å¯¹ç»“æ„å±æ€§çš„é‡å è®¿é—®æ˜¯å®‰å…¨çš„ï¼š æ‚¨ä»…è®¿é—®å®ä¾‹çš„å­˜å‚¨å±æ€§ï¼Œè€Œä¸æ˜¯è®¡ç®—å±æ€§æˆ–ç±»å±æ€§ã€‚ è¯¥ç»“æ„æ˜¯å±€éƒ¨å˜é‡çš„å€¼ï¼Œè€Œä¸æ˜¯å…¨å±€å˜é‡ã€‚ è¯¥ç»“æ„è¦ä¹ˆä¸è¢«ä»»ä½•é—­åŒ…æ•è·ï¼Œè¦ä¹ˆä»…ç”±ä¸è½¬ä¹‰é—­åŒ…æ•è·ã€‚ å¦‚æœç¼–è¯‘å™¨æ— æ³•è¯æ˜è®¿é—®æ˜¯å®‰å…¨çš„ï¼Œåˆ™ä¸å…è®¸è®¿é—®ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ åˆå§‹åŒ–","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-åˆå§‹åŒ–","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-åˆå§‹åŒ–/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%88%9D%E5%A7%8B%E5%8C%96/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Initialization.html åˆå§‹åŒ–æ˜¯å‡†å¤‡ç±»ã€ç»“æ„æˆ–æšä¸¾å®ä¾‹ä»¥ä¾›ä½¿ç”¨çš„è¿‡ç¨‹ã€‚æ­¤è¿‡ç¨‹æ¶‰åŠä¸ºè¯¥å®ä¾‹ä¸Šçš„æ¯ä¸ªå­˜å‚¨å±æ€§è®¾ç½®åˆå§‹å€¼ï¼Œå¹¶åœ¨æ–°å®ä¾‹å‡†å¤‡ä½¿ç”¨ä¹‹å‰æ‰§è¡Œæ‰€éœ€çš„ä»»ä½•å…¶ä»–è®¾ç½®æˆ–åˆå§‹åŒ–ã€‚ æ‚¨é€šè¿‡å®šä¹‰åˆå§‹åŒ–å™¨æ¥å®ç°æ­¤åˆå§‹åŒ–è¿‡ç¨‹ï¼Œåˆå§‹åŒ–å™¨å°±åƒå¯ä»¥è°ƒç”¨ä»¥åˆ›å»ºç‰¹å®šç±»å‹çš„æ–°å®ä¾‹çš„ç‰¹æ®Šæ–¹æ³•ã€‚ä¸Objective-Cåˆå§‹åŒ–å™¨ä¸åŒï¼ŒSwiftåˆå§‹åŒ–å™¨ä¸ä¼šè¿”å›å€¼ã€‚ä»–ä»¬çš„ä¸»è¦ä½œç”¨æ˜¯ç¡®ä¿ä¸€ç§ç±»å‹çš„æ–°å®ä¾‹åœ¨é¦–æ¬¡ä½¿ç”¨ä¹‹å‰è¢«æ­£ç¡®åˆå§‹åŒ–ã€‚ ç±»ç±»å‹çš„å®ä¾‹è¿˜å¯ä»¥å®ç°å»åˆå§‹åŒ–å™¨ï¼Œè¯¥åˆå§‹åŒ–å™¨åœ¨è¯¥ç±»çš„å®ä¾‹è¢«é‡Šæ”¾ä¹‹å‰æ‰§è¡Œä»»ä½•è‡ªå®šä¹‰æ¸…ç†ã€‚æœ‰å…³å»åˆå§‹åŒ–å™¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å–æ¶ˆåˆå§‹åŒ–ã€‚ ä¸ºå­˜å‚¨çš„å±æ€§è®¾ç½®åˆå§‹å€¼ç±»å’Œç»“æ„å¿…é¡»åœ¨åˆ›å»ºè¯¥ç±»æˆ–ç»“æ„çš„å®ä¾‹æ—¶å°†å…¶æ‰€æœ‰å­˜å‚¨å±æ€§è®¾ç½®ä¸ºé€‚å½“çš„åˆå§‹å€¼ã€‚å­˜å‚¨çš„å±æ€§ä¸èƒ½å¤„äºä¸ç¡®å®šçŠ¶æ€ã€‚ æ‚¨å¯ä»¥åœ¨åˆå§‹åŒ–å™¨ä¸­ä¸ºå­˜å‚¨çš„å±æ€§è®¾ç½®åˆå§‹å€¼ï¼Œä¹Ÿå¯ä»¥åˆ†é…é»˜è®¤å±æ€§å€¼ä½œä¸ºå±æ€§å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚ä»¥ä¸‹å„èŠ‚å°†ä»‹ç»è¿™äº›æ“ä½œã€‚ æ³¨æ„ å½“æ‚¨ä¸ºå­˜å‚¨å±æ€§åˆ†é…é»˜è®¤å€¼æˆ–åœ¨åˆå§‹åŒ–å™¨ä¸­è®¾ç½®å…¶åˆå§‹å€¼æ—¶ï¼Œè¯¥å±æ€§çš„å€¼å°†ç›´æ¥è®¾ç½®ï¼Œè€Œæ— éœ€è°ƒç”¨ä»»ä½•å±æ€§è§‚å¯Ÿå™¨ã€‚ åˆå§‹åŒ–å™¨è°ƒç”¨åˆå§‹åŒ–å™¨æ¥åˆ›å»ºç‰¹å®šç±»å‹çš„æ–°å®ä¾‹ã€‚åœ¨æœ€ç®€å•çš„å½¢å¼ä¸­ï¼Œåˆå§‹åŒ–å™¨å°±åƒä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„å®ä¾‹æ–¹æ³•ï¼Œä½¿ç”¨initå…³é”®å­—ç¼–å†™ï¼š init() { â€‹ &#x2F;&#x2F; perform some initialization here } ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ç§åä¸ºFahrenheitçš„æ–°ç»“æ„ï¼Œä»¥å­˜å‚¨åæ°åº¦ä¸­è¡¨è¾¾çš„æ¸©åº¦ã€‚Fahrenheitç»“æ„æœ‰ä¸€ä¸ªå­˜å‚¨å±æ€§ï¼Œtemperatureï¼Œå±äºDoubleç±»å‹ï¼š struct Fahrenheit { â€‹ var temperature: Double â€‹ init() { â€‹ temperature &#x3D; 32.0 â€‹ } } var f &#x3D; Fahrenheit() print(â€œThe default temperature is (f.temperature)Â° Fahrenheitâ€) &#x2F;&#x2F; Prints â€œThe default temperature is 32.0Â° Fahrenheitâ€ è¯¥ç»“æ„å®šä¹‰äº†ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„å•ä¸ªåˆå§‹åŒ–å™¨initï¼Œè¯¥åˆå§‹åŒ–å€¼ä¸º32.0ï¼ˆæ°´çš„å†°ç‚¹ï¼ˆåæ°åº¦ï¼‰ï¼‰çš„å­˜å‚¨æ¸©åº¦ã€‚ é»˜è®¤å±æ€§å€¼æ‚¨å¯ä»¥ä»åˆå§‹åŒ–å™¨ä¸­è®¾ç½®å­˜å‚¨å±æ€§çš„åˆå§‹å€¼ï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚æˆ–è€…ï¼ŒæŒ‡å®šä¸€ä¸ªé»˜è®¤å±æ€§å€¼ä½œä¸ºå±æ€§å£°æ˜çš„ä¸€éƒ¨åˆ†ã€‚æ‚¨å¯ä»¥åœ¨å®šä¹‰å±æ€§æ—¶ä¸ºå±æ€§åˆ†é…åˆå§‹å€¼æ¥æŒ‡å®šé»˜è®¤å±æ€§å€¼ã€‚ æ³¨æ„ å¦‚æœå±æ€§æ€»æ˜¯å…·æœ‰ç›¸åŒçš„åˆå§‹å€¼ï¼Œè¯·æä¾›é»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯åœ¨åˆå§‹åŒ–å™¨ä¸­è®¾ç½®å€¼ã€‚æœ€ç»ˆç»“æœç›¸åŒï¼Œä½†é»˜è®¤å€¼å°†å±æ€§çš„åˆå§‹åŒ–ä¸å…¶å£°æ˜æ›´ç´§å¯†åœ°è”ç³»èµ·æ¥ã€‚å®ƒä½¿åˆå§‹åŒ–å™¨æ›´çŸ­ã€æ›´æ¸…æ™°ï¼Œå¹¶ä½¿æ‚¨èƒ½å¤Ÿä»å…¶é»˜è®¤å€¼æ¨æ–­å±æ€§çš„ç±»å‹ã€‚é»˜è®¤å€¼è¿˜ä½¿æ‚¨æ›´å®¹æ˜“åˆ©ç”¨é»˜è®¤åˆå§‹åŒ–å™¨å’Œåˆå§‹åŒ–å™¨ç»§æ‰¿ï¼Œå¦‚æœ¬ç« åé¢æ‰€è¿°ã€‚ You can write the Fahrenheit structure from above in a simpler form by providing a default value for its temperature property at the point that the property is declared: struct Fahrenheit { â€‹ var temperature &#x3D; 32.0 } è‡ªå®šä¹‰åˆå§‹åŒ–æ‚¨å¯ä»¥ä½¿ç”¨è¾“å…¥å‚æ•°å’Œå¯é€‰å±æ€§ç±»å‹è‡ªå®šä¹‰åˆå§‹åŒ–è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–æœŸé—´åˆ†é…å¸¸é‡å±æ€§ï¼Œå¦‚ä»¥ä¸‹éƒ¨åˆ†æ‰€è¿°ã€‚ åˆå§‹åŒ–å‚æ•°æ‚¨å¯ä»¥æä¾›åˆå§‹åŒ–å‚æ•°ä½œä¸ºåˆå§‹åŒ–å™¨å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼Œä»¥å®šä¹‰è‡ªå®šä¹‰åˆå§‹åŒ–è¿‡ç¨‹çš„å€¼çš„ç±»å‹å’Œåç§°ã€‚åˆå§‹åŒ–å‚æ•°å…·æœ‰ä¸å‡½æ•°å’Œæ–¹æ³•å‚æ•°ç›¸åŒçš„åŠŸèƒ½å’Œè¯­æ³•ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºCelsiusç»“æ„ï¼Œè¯¥ç»“æ„ä»¥æ‘„æ°åº¦è¡¨ç¤ºçš„æ¸©åº¦ã€‚Celsiusç»“æ„å®ç°äº†ä¸¤ä¸ªè‡ªå®šä¹‰åˆå§‹åŒ–å™¨ï¼Œç§°ä¸ºinit(fromFahrenheit:)å’Œinit(fromKelvin:)å®ƒä»¬ä½¿ç”¨ä¸åŒæ¸©åº¦å°ºåº¦çš„å€¼åˆå§‹åŒ–ç»“æ„çš„æ–°å®ä¾‹ï¼š struct Celsius { â€‹ var temperatureInCelsius: Double â€‹ init(fromFahrenheit fahrenheit: Double) { â€‹ temperatureInCelsius &#x3D; (fahrenheit - 32.0) &#x2F; 1.8 â€‹ } â€‹ init(fromKelvin kelvin: Double) { â€‹ temperatureInCelsius &#x3D; kelvin - 273.15 â€‹ } } let boilingPointOfWater &#x3D; Celsius(fromFahrenheit: 212.0) &#x2F;&#x2F; boilingPointOfWater.temperatureInCelsius is 100.0 let freezingPointOfWater &#x3D; Celsius(fromKelvin: 273.15) &#x2F;&#x2F; freezingPointOfWater.temperatureInCelsius is 0.0 ç¬¬ä¸€ä¸ªåˆå§‹åŒ–å™¨æœ‰ä¸€ä¸ªåˆå§‹åŒ–å‚æ•°ï¼Œå‚æ•°æ ‡ç­¾ä¸ºfromFahrenheitï¼Œå‚æ•°åç§°ä¸ºfahrenheitã€‚ç¬¬äºŒä¸ªåˆå§‹åŒ–å™¨æœ‰ä¸€ä¸ªåˆå§‹åŒ–å‚æ•°ï¼Œå‚æ•°æ ‡ç­¾ä¸º fromKelvinï¼Œå‚æ•°åç§°ä¸º ofkelvinã€‚ä¸¤ä¸ªåˆå§‹åŒ–å™¨éƒ½å°†å•ä¸ªå‚æ•°è½¬æ¢ä¸ºç›¸åº”çš„æ‘„æ°åº¦å€¼ï¼Œå¹¶å°†è¯¥å€¼å­˜å‚¨åœ¨åä¸ºtemperatureInCelsiusçš„å±æ€§ä¸­ã€‚ å‚æ•°åç§°å’Œå‚æ•°æ ‡ç­¾ä¸å‡½æ•°å’Œæ–¹æ³•å‚æ•°ä¸€æ ·ï¼Œåˆå§‹åŒ–å‚æ•°æ—¢å¯ä»¥æœ‰ä¸€ä¸ªå‚æ•°åç§°ï¼Œä¾›åˆå§‹åŒ–å™¨æ­£æ–‡ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ªå‚æ•°æ ‡ç­¾ï¼Œä¾›è°ƒç”¨åˆå§‹åŒ–å™¨æ—¶ä½¿ç”¨ã€‚ ç„¶è€Œï¼Œåˆå§‹åŒ–å™¨åœ¨æ‹¬å·å‰æ²¡æœ‰åƒå‡½æ•°å’Œæ–¹æ³•é‚£æ ·è¯†åˆ«å‡½æ•°åç§°ã€‚å› æ­¤ï¼Œåˆå§‹åŒ–å™¨å‚æ•°çš„åç§°å’Œç±»å‹åœ¨ç¡®å®šåº”è¯¥è°ƒç”¨å“ªä¸ªåˆå§‹åŒ–å™¨æ–¹é¢å‘æŒ¥ç€ç‰¹åˆ«é‡è¦çš„ä½œç”¨ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨ä¸æä¾›åˆå§‹åŒ–å™¨ä¸­çš„æ¯ä¸ªå‚æ•°ï¼ŒSwiftä¼šä¸ºè‡ªåŠ¨å‚æ•°æ ‡ç­¾ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºColorçš„ç»“æ„ï¼Œå…·æœ‰ä¸‰ä¸ªå¸¸é‡å±æ€§ï¼Œç§°ä¸ºredã€greenå’Œblueã€‚è¿™äº›å±æ€§å­˜å‚¨çš„å€¼åœ¨0.0åˆ°1.0ä¹‹é—´ï¼Œä»¥æŒ‡ç¤ºé¢œè‰²ä¸­çš„çº¢è‰²ã€ç»¿è‰²å’Œè“è‰²çš„æ•°é‡ã€‚ Colorä¸ºå…¶çº¢è‰²ã€ç»¿è‰²å’Œè“è‰²ç»„ä»¶æä¾›ä¸‰ä¸ªé€‚å½“å‘½åçš„Doubleå‹å‚æ•°çš„åˆå§‹åŒ–å™¨ã€‚Colorè¿˜æä¾›äº†ç¬¬äºŒä¸ªå¸¦æœ‰å•ä¸ªwhiteå‚æ•°çš„åˆå§‹åŒ–å™¨ï¼Œè¯¥å‚æ•°ç”¨äºä¸ºæ‰€æœ‰ä¸‰ä¸ªé¢œè‰²ç»„ä»¶æä¾›ç›¸åŒçš„å€¼ã€‚ struct Color { â€‹ let red, green, blue: Double â€‹ init(red: Double, green: Double, blue: Double) { â€‹ self.red &#x3D; red â€‹ self.green &#x3D; green â€‹ self.blue &#x3D; blue â€‹ } â€‹ init(white: Double) { â€‹ red &#x3D; white â€‹ green &#x3D; white â€‹ blue &#x3D; white â€‹ } } ä¸¤ä¸ªåˆå§‹åŒ–å™¨éƒ½å¯ç”¨äºåˆ›å»ºæ–°çš„Colorå®ä¾‹ï¼Œæ–¹æ³•æ˜¯ä¸ºæ¯ä¸ªåˆå§‹åŒ–å™¨å‚æ•°æä¾›å‘½åå€¼ï¼š let magenta &#x3D; Color(red: 1.0, green: 0.0, blue: 1.0) let halfGray &#x3D; Color(white: 0.5) è¯·æ³¨æ„ï¼Œå¦‚æœä¸ä½¿ç”¨å‚æ•°æ ‡ç­¾ï¼Œå°±æ— æ³•è°ƒç”¨è¿™äº›åˆå§‹åŒ–å™¨ã€‚å¦‚æœå®šä¹‰äº†å‚æ•°æ ‡ç­¾ï¼Œåˆ™å¿…é¡»å§‹ç»ˆåœ¨åˆå§‹åŒ–å™¨ä¸­ä½¿ç”¨å‚æ•°æ ‡ç­¾ï¼Œçœç•¥å®ƒä»¬æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ï¼š let veryGreen &#x3D; Color(0.0, 1.0, 0.0) &#x2F;&#x2F; this reports a compile-time error - argument labels are required æ²¡æœ‰å‚æ•°æ ‡ç­¾çš„åˆå§‹åŒ–å‚æ•°å¦‚æœæ‚¨ä¸æƒ³ä¸ºåˆå§‹åŒ–å‚æ•°ä½¿ç”¨å‚æ•°æ ‡ç­¾ï¼Œè¯·ä¸ºè¯¥å‚æ•°å†™ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰è€Œä¸æ˜¯æ˜¾å¼å‚æ•°æ ‡ç­¾ï¼Œä»¥è¦†ç›–é»˜è®¤è¡Œä¸ºã€‚ ä»¥ä¸‹æ˜¯ä¸Šé¢åˆå§‹åŒ–å‚æ•°ä¸­æ‘„æ°åº¦ç¤ºä¾‹çš„æ‰©å±•ç‰ˆæœ¬ï¼Œä»¥åŠä¸€ä¸ªé¢å¤–çš„åˆå§‹åŒ–å™¨ï¼Œç”¨äºä»å·²ç»åœ¨æ‘„æ°åº¦èŒƒå›´å†…çš„Doubleå€¼åˆ›å»ºæ–°çš„Celsiuså®ä¾‹ï¼š struct Celsius { â€‹ var temperatureInCelsius: Double â€‹ init(fromFahrenheit fahrenheit: Double) { â€‹ temperatureInCelsius &#x3D; (fahrenheit - 32.0) &#x2F; 1.8 â€‹ } â€‹ init(fromKelvin kelvin: Double) { â€‹ temperatureInCelsius &#x3D; kelvin - 273.15 â€‹ } â€‹ init(_ celsius: Double) { â€‹ temperatureInCelsius &#x3D; celsius â€‹ } } let bodyTemperature &#x3D; Celsius(37.0) &#x2F;&#x2F; bodyTemperature.temperatureInCelsius is 37.0 The initializer call Celsius(37.0) is clear in its intent without the need for an argument label. Itâ€™s therefore appropriate to write this initializer as init(_ celsius: Double) so that it can be called by providing an unnamed Double value. å¯é€‰å±æ€§ç±»å‹å¦‚æœæ‚¨çš„è‡ªå®šä¹‰ç±»å‹æœ‰ä¸€ä¸ªé€»è¾‘ä¸Šå…è®¸â€œæ— å€¼â€çš„å­˜å‚¨å±æ€§â€”â€”å¯èƒ½æ˜¯å› ä¸ºåœ¨åˆå§‹åŒ–æœŸé—´æ— æ³•è®¾ç½®å…¶å€¼ï¼Œæˆ–è€…å› ä¸ºå®ƒå…è®¸åœ¨ç¨åæŸä¸ªæ—¶å€™å…·æœ‰â€œæ— å€¼â€â€”â€”è¯·ä½¿ç”¨å¯é€‰ç±»å‹å£°æ˜è¯¥å±æ€§ã€‚å¯é€‰ç±»å‹çš„å±æ€§ä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼Œå€¼ä¸ºnilï¼Œè¿™è¡¨æ˜è¯¥å±æ€§åœ¨åˆå§‹åŒ–æœŸé—´æ•…æ„å…·æœ‰â€œå°šæ— å€¼â€ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºSurveyQuestionç±»ï¼Œå…¶å¯é€‰Stringå±æ€§ç§°ä¸ºresponseï¼š class SurveyQuestion { â€‹ var text: String â€‹ var response: String? â€‹ init(text: String) { â€‹ self.text &#x3D; text â€‹ } â€‹ func ask() { â€‹ print(text) â€‹ } } let cheeseQuestion &#x3D; SurveyQuestion(text: â€œDo you like cheese?â€) cheeseQuestion.ask() &#x2F;&#x2F; Prints â€œDo you like cheese?â€ cheeseQuestion.response &#x3D; â€œYes, I do like cheese.â€ The response to a survey question canâ€™t be known until itâ€™s asked, and so the responseproperty is declared with a type of String?, or â€œoptional Stringâ€. Itâ€™s automatically assigned a default value of nil, meaning â€œno string yetâ€, when a new instance of SurveyQuestion is initialized. åœ¨åˆå§‹åŒ–æœŸé—´åˆ†é…å¸¸é‡å±æ€§æ‚¨å¯ä»¥åœ¨åˆå§‹åŒ–æœŸé—´çš„ä»»ä½•æ—¶å€™ä¸ºå¸¸é‡å±æ€§åˆ†é…å€¼ï¼Œåªè¦åœ¨åˆå§‹åŒ–å®Œæˆæ—¶å°†å…¶è®¾ç½®ä¸ºç¡®å®šå€¼ã€‚ä¸€æ—¦ä¸€ä¸ªå¸¸é‡å±æ€§è¢«åˆ†é…äº†ä¸€ä¸ªå€¼ï¼Œå®ƒå°±æ— æ³•è¿›ä¸€æ­¥ä¿®æ”¹ã€‚ æ³¨æ„ å¯¹äºç±»å®ä¾‹ï¼Œå¸¸é‡å±æ€§åªèƒ½ç”±å¼•å…¥å¸¸é‡å±æ€§çš„ç±»åœ¨åˆå§‹åŒ–æœŸé—´è¿›è¡Œä¿®æ”¹ã€‚å®ƒä¸èƒ½è¢«å­ç±»ä¿®æ”¹ã€‚ æ‚¨å¯ä»¥ä»ä¸Šé¢ä¿®æ”¹SurveyQuestionç¤ºä¾‹ï¼Œä¸ºé—®é¢˜çš„textå±æ€§ä½¿ç”¨å¸¸é‡å±æ€§è€Œä¸æ˜¯å˜é‡å±æ€§ï¼Œä»¥è¡¨æ˜ä¸€æ—¦åˆ›å»ºäº†SurveyQuestionå®ä¾‹ï¼Œé—®é¢˜ä¸ä¼šæ”¹å˜ã€‚å³ä½¿textå±æ€§ç°åœ¨æ˜¯å¸¸é‡ï¼Œå®ƒä»ç„¶å¯ä»¥åœ¨ç±»çš„åˆå§‹åŒ–å™¨ä¸­è®¾ç½®ï¼š class SurveyQuestion { â€‹ let text: String â€‹ var response: String? â€‹ init(text: String) { â€‹ self.text &#x3D; text â€‹ } â€‹ func ask() { â€‹ print(text) â€‹ } } let beetsQuestion &#x3D; SurveyQuestion(text: â€œHow about beets?â€) beetsQuestion.ask() &#x2F;&#x2F; Prints â€œHow about beets?â€ beetsQuestion.response &#x3D; â€œI also like beets. (But not with cheese.)â€ é»˜è®¤åˆå§‹åŒ–å™¨Swiftä¸ºä»»ä½•ä¸ºå…¶æ‰€æœ‰å±æ€§æä¾›é»˜è®¤å€¼çš„ç»“æ„æˆ–ç±»æä¾›é»˜è®¤åˆå§‹åŒ–å™¨ï¼Œå¹¶ä¸”æœ¬èº«ä¸æä¾›è‡³å°‘ä¸€ä¸ªåˆå§‹åŒ–å™¨ã€‚é»˜è®¤åˆå§‹åŒ–å™¨åªéœ€åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹ï¼Œå…¶æ‰€æœ‰å±æ€§éƒ½è®¾ç½®ä¸ºé»˜è®¤å€¼ã€‚ æ­¤ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºShoppingListItemçš„ç±»ï¼Œè¯¥ç±»å°è£…äº†è´­ç‰©æ¸…å•ä¸­å•†å“çš„åç§°ã€æ•°é‡å’Œè´­ä¹°çŠ¶æ€ï¼š class ShoppingListItem { â€‹ var name: String? â€‹ var quantity &#x3D; 1 â€‹ var purchased &#x3D; false } var item &#x3D; ShoppingListItem() ç”±äºShoppingListItemç±»çš„æ‰€æœ‰å±æ€§éƒ½æœ‰é»˜è®¤å€¼ï¼Œå¹¶ä¸”å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ²¡æœ‰è¶…ç±»çš„åŸºç±»ï¼Œå› æ­¤ShoppingListItemä¼šè‡ªåŠ¨è·å¾—é»˜è®¤åˆå§‹åŒ–å™¨å®ç°ï¼Œè¯¥å®ç°åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹ï¼Œå…¶æ‰€æœ‰å±æ€§éƒ½è®¾ç½®ä¸ºé»˜è®¤å€¼ã€‚ï¼ˆnameå±æ€§æ˜¯ä¸€ä¸ªå¯é€‰çš„Stringå±æ€§ï¼Œå› æ­¤å®ƒä¼šè‡ªåŠ¨æ¥æ”¶é»˜è®¤å€¼ä¸ºnilï¼Œå³ä½¿è¯¥å€¼æ²¡æœ‰å†™å…¥ä»£ç ä¸­ã€‚ï¼‰ä¸Šé¢çš„ç¤ºä¾‹ä½¿ç”¨ShoppingListItemç±»çš„é»˜è®¤åˆå§‹åŒ–å™¨åˆ›å»ºå…·æœ‰åˆå§‹åŒ–å™¨è¯­æ³•çš„ç±»çš„æ–°å®ä¾‹ï¼Œå†™ä¸ºShoppingListItem()ï¼Œå¹¶å°†æ­¤æ–°å®ä¾‹åˆ†é…ç»™åä¸ºitemçš„å˜é‡ã€‚ ç»“æ„ç±»å‹çš„æˆå‘˜åˆå§‹åŒ–å™¨å¦‚æœç»“æ„ç±»å‹æ²¡æœ‰å®šä¹‰è‡ªå·±çš„ä»»ä½•è‡ªå®šä¹‰åˆå§‹åŒ–å™¨ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨æ”¶åˆ°æˆå‘˜åˆå§‹åŒ–å™¨ã€‚ä¸é»˜è®¤åˆå§‹åŒ–å™¨ä¸åŒï¼Œè¯¥ç»“æ„å³ä½¿å­˜å‚¨äº†æ²¡æœ‰é»˜è®¤å€¼çš„å±æ€§ï¼Œä¹Ÿä¼šæ¥æ”¶æˆå‘˜åˆå§‹åŒ–å™¨ã€‚ æˆå‘˜åˆå§‹åŒ–å™¨æ˜¯åˆå§‹åŒ–æ–°ç»“æ„å®ä¾‹æˆå‘˜å±æ€§çš„ç®€å†™æ–¹æ³•ã€‚æ–°å®ä¾‹å±æ€§çš„åˆå§‹å€¼å¯ä»¥æŒ‰åç§°ä¼ é€’ç»™æˆå‘˜åˆå§‹åŒ–å™¨ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºSizeçš„ç»“æ„ï¼Œæœ‰ä¸¤ä¸ªå±æ€§ç§°ä¸ºwidthå’Œheightã€‚é€šè¿‡åˆ†é…0.0çš„é»˜è®¤å€¼ï¼Œå¯ä»¥æ¨æ–­å‡ºè¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯Doubleç±»å‹çš„ã€‚ Sizeç»“æ„ä¼šè‡ªåŠ¨æ¥æ”¶init(width:height:)æˆå‘˜åˆå§‹åŒ–å™¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥åˆå§‹åŒ–æ–°çš„Sizeå®ä¾‹ï¼š struct Size { â€‹ var width &#x3D; 0.0, height &#x3D; 0.0 } let twoByTwo &#x3D; Size(width: 2.0, height: 2.0) å½“æ‚¨è°ƒç”¨æˆå‘˜åˆå§‹åŒ–å™¨æ—¶ï¼Œæ‚¨å¯ä»¥çœç•¥ä»»ä½•å…·æœ‰é»˜è®¤å€¼çš„å±æ€§çš„å€¼ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒSizeç»“æ„çš„heightå’Œwidthå±æ€§éƒ½æœ‰é»˜è®¤å€¼ã€‚æ‚¨å¯ä»¥çœç•¥ä»»ä½•ä¸€ä¸ªå±æ€§æˆ–ä¸¤ä¸ªå±æ€§ï¼Œåˆå§‹åŒ–å™¨å¯¹çœç•¥çš„ä»»ä½•å†…å®¹éƒ½ä½¿ç”¨é»˜è®¤å€¼ï¼Œä¾‹å¦‚ï¼š let zeroByTwo &#x3D; Size(height: 2.0) print(zeroByTwo.width, zeroByTwo.height) &#x2F;&#x2F; Prints â€œ0.0 2.0â€ let zeroByZero &#x3D; Size() print(zeroByZero.width, zeroByZero.height) &#x2F;&#x2F; Prints â€œ0.0 0.0â€ å€¼ç±»å‹çš„åˆå§‹åŒ–å§”æ‰˜åˆå§‹åŒ–å™¨å¯ä»¥è°ƒç”¨å…¶ä»–åˆå§‹åŒ–å™¨æ¥æ‰§è¡Œå®ä¾‹çš„éƒ¨åˆ†åˆå§‹åŒ–ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºåˆå§‹åŒ–å™¨å§”æ‰˜ï¼Œé¿å…äº†è·¨å¤šä¸ªåˆå§‹åŒ–å™¨å¤åˆ¶ä»£ç ã€‚ åˆå§‹åŒ–å™¨å§”æ‰˜å¦‚ä½•å·¥ä½œä»¥åŠå…è®¸å“ªç§å½¢å¼çš„å§”æ‰˜çš„è§„åˆ™å¯¹äºå€¼ç±»å‹å’Œç±»ç±»å‹æ˜¯ä¸åŒçš„ã€‚å€¼ç±»å‹ï¼ˆç»“æ„å’Œæšä¸¾ï¼‰ä¸æ”¯æŒç»§æ‰¿ï¼Œå› æ­¤å®ƒä»¬çš„åˆå§‹åŒ–å™¨å§”æ‰˜è¿‡ç¨‹ç›¸å¯¹ç®€å•ï¼Œå› ä¸ºå®ƒä»¬åªèƒ½å§”æ‰˜ç»™è‡ªå·±æä¾›çš„å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨ã€‚ç„¶è€Œï¼Œç±»å¯ä»¥ä»å…¶ä»–ç±»ç»§æ‰¿ï¼Œå¦‚ç»§æ‰¿ä¸­æ‰€è¿°ã€‚è¿™æ„å‘³ç€ç±»æœ‰é¢å¤–çš„è´£ä»»æ¥ç¡®ä¿åœ¨åˆå§‹åŒ–æœŸé—´ä¸ºå…¶ç»§æ‰¿çš„æ‰€æœ‰å­˜å‚¨å±æ€§åˆ†é…åˆé€‚çš„å€¼ã€‚è¿™äº›èŒè´£åœ¨ä¸‹é¢çš„ç±»ç»§æ‰¿å’Œåˆå§‹åŒ–ä¸­æè¿°ã€‚ å¯¹äºå€¼ç±»å‹ï¼Œåœ¨ç¼–å†™è‡ªå·±çš„è‡ªå®šä¹‰åˆå§‹åŒ–å™¨æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨self.initå¼•ç”¨æ¥è‡ªç›¸åŒå€¼ç±»å‹çš„å…¶ä»–åˆå§‹åŒ–å™¨ã€‚æ‚¨åªèƒ½ä»åˆå§‹åŒ–å™¨ä¸­è°ƒç”¨self.initã€‚ è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨ä¸ºå€¼ç±»å‹å®šä¹‰è‡ªå®šä¹‰åˆå§‹åŒ–å™¨ï¼Œæ‚¨å°†æ— æ³•å†è®¿é—®è¯¥ç±»å‹çš„é»˜è®¤åˆå§‹åŒ–å™¨ï¼ˆæˆ–æˆå‘˜åˆå§‹åŒ–å™¨ï¼Œå¦‚æœæ˜¯ç»“æ„ï¼‰ã€‚è¿™ç§çº¦æŸé˜²æ­¢äº†ä½¿ç”¨è‡ªåŠ¨åˆå§‹åŒ–å™¨ä¹‹ä¸€çš„äººæ„å¤–ç»•è¿‡äº†æ›´å¤æ‚çš„åˆå§‹åŒ–å™¨ä¸­æä¾›çš„é¢å¤–åŸºæœ¬è®¾ç½®çš„æƒ…å†µã€‚ æ³¨æ„ å¦‚æœæ‚¨å¸Œæœ›è‡ªå®šä¹‰å€¼ç±»å‹å¯ä»¥ä½¿ç”¨é»˜è®¤åˆå§‹åŒ–å™¨å’Œæˆå‘˜åˆå§‹åŒ–å™¨åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ‚¨è‡ªå·±çš„è‡ªå®šä¹‰åˆå§‹åŒ–å™¨åˆå§‹åŒ–ï¼Œè¯·åœ¨æ‰©å±•ä¸­ç¼–å†™è‡ªå®šä¹‰åˆå§‹åŒ–å™¨ï¼Œè€Œä¸æ˜¯ä½œä¸ºå€¼ç±»å‹åŸå§‹å®ç°çš„ä¸€éƒ¨åˆ†ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ‰©å±•ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰Rectç»“æ„æ¥è¡¨ç¤ºå‡ ä½•çŸ©å½¢ã€‚è¯¥ç¤ºä¾‹éœ€è¦ä¸¤ä¸ªåä¸ºSizeå’ŒPointçš„æ”¯æŒç»“æ„ï¼Œè¿™ä¸¤ä¸ªç»“æ„éƒ½ä¸ºå…¶æ‰€æœ‰å±æ€§æä¾›0.0çš„é»˜è®¤å€¼ï¼š struct Size { â€‹ var width &#x3D; 0.0, height &#x3D; 0.0 } struct Point { â€‹ var x &#x3D; 0.0, y &#x3D; 0.0 } æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼ä¹‹ä¸€åˆå§‹åŒ–Rectç»“æ„â€”â€”ä½¿ç”¨å…¶é»˜è®¤çš„é›¶åˆå§‹åŒ–originå’Œsizeå±æ€§å€¼ï¼Œæä¾›ç‰¹å®šçš„åŸç‚¹å’Œå¤§å°ï¼Œæˆ–æä¾›ç‰¹å®šçš„ä¸­å¿ƒç‚¹å’Œå¤§å°ã€‚è¿™äº›åˆå§‹åŒ–é€‰é¡¹ç”±ä¸‰ä¸ªè‡ªå®šä¹‰åˆå§‹åŒ–å™¨è¡¨ç¤ºï¼Œå®ƒä»¬æ˜¯Rectç»“æ„å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼š struct Rect { â€‹ var origin &#x3D; Point() â€‹ var size &#x3D; Size() â€‹ init() {} â€‹ init(origin: Point, size: Size) { â€‹ self.origin &#x3D; origin â€‹ self.size &#x3D; size â€‹ } â€‹ init(center: Point, size: Size) { â€‹ let originX &#x3D; center.x - (size.width &#x2F; 2) â€‹ let originY &#x3D; center.y - (size.height &#x2F; 2) â€‹ self.init(origin: Point(x: originX, y: originY), size: size) â€‹ } } ç¬¬ä¸€ä¸ªRectåˆå§‹åŒ–å™¨init()åœ¨åŠŸèƒ½ä¸Šä¸ç»“æ„å¦‚æœæ²¡æœ‰è‡ªå·±çš„è‡ªå®šä¹‰åˆå§‹åŒ–å™¨æ—¶ä¼šæ”¶åˆ°çš„é»˜è®¤åˆå§‹åŒ–å™¨ç›¸åŒã€‚æ­¤åˆå§‹åŒ–å™¨æœ‰ä¸€ä¸ªç©ºæ­£æ–‡ï¼Œç”±ä¸€å¯¹ç©ºçš„èŠ±æ‹¬å·&#123;&#125;è¡¨ç¤ºã€‚è°ƒç”¨æ­¤åˆå§‹åŒ–å™¨è¿”å›aRectå®ä¾‹ï¼Œå…¶originå’Œsizeå±æ€§éƒ½ä»å…¶å±æ€§å®šä¹‰ä¸­åˆå§‹åŒ–ä¸ºPoint(x:0.0,y:0.0)å’ŒSize(width:0.0,height:0.0)çš„é»˜è®¤å€¼ï¼š let basicRect &#x3D; Rect() &#x2F;&#x2F; basicRectâ€™s origin is (0.0, 0.0) and its size is (0.0, 0.0) ç¬¬äºŒä¸ªRectåˆå§‹åŒ–å™¨init(origin:size:)åœ¨åŠŸèƒ½ä¸Šä¸ç»“æ„å¦‚æœæ²¡æœ‰è‡ªå·±çš„è‡ªå®šä¹‰åˆå§‹åŒ–å™¨æ—¶ä¼šæ”¶åˆ°çš„æˆå‘˜åˆå§‹åŒ–å™¨ç›¸åŒã€‚æ­¤åˆå§‹åŒ–å™¨åªéœ€å°†originå’Œsizeå‚æ•°å€¼åˆ†é…ç»™é€‚å½“çš„å­˜å‚¨å±æ€§ï¼š let originRect &#x3D; Rect(origin: Point(x: 2.0, y: 2.0), â€‹ size: Size(width: 5.0, height: 5.0)) &#x2F;&#x2F; originRectâ€™s origin is (2.0, 2.0) and its size is (5.0, 5.0) ç¬¬ä¸‰ä¸ªRectåˆå§‹åŒ–å™¨init(center:size:)ç¨å¾®å¤æ‚ä¸€äº›ã€‚å®ƒé¦–å…ˆæ ¹æ®centerå’Œsizeå€¼è®¡ç®—é€‚å½“çš„åŸç‚¹ã€‚ç„¶åï¼Œå®ƒè°ƒç”¨ï¼ˆæˆ–å§”æ‰˜ï¼‰init(origin:size:)åˆå§‹åŒ–å™¨ï¼Œè¯¥åˆå§‹åŒ–å™¨å°†æ–°çš„åŸç‚¹å’Œå¤§å°å€¼å­˜å‚¨åœ¨é€‚å½“çš„å±æ€§ä¸­ï¼š let centerRect &#x3D; Rect(center: Point(x: 4.0, y: 4.0), â€‹ size: Size(width: 3.0, height: 3.0)) &#x2F;&#x2F; centerRectâ€™s origin is (2.5, 2.5) and its size is (3.0, 3.0) init(center:size:)åˆå§‹åŒ–å™¨å¯ä»¥å°†originå€¼å’Œsizeçš„æ–°å€¼åˆ†é…ç»™é€‚å½“çš„å±æ€§æœ¬èº«ã€‚ç„¶è€Œï¼Œinit(center:size:)åˆå§‹åŒ–å™¨æ›´æ–¹ä¾¿ï¼ˆæ„å›¾æ›´æ¸…æ™°ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨å·²ç»æä¾›è¯¥åŠŸèƒ½çš„ç°æœ‰åˆå§‹åŒ–å™¨ã€‚ æ³¨æ„ æœ‰å…³åœ¨ä¸å®šä¹‰init()å’Œinit(origin:size:)åˆå§‹åŒ–å™¨çš„æƒ…å†µä¸‹ç¼–å†™æ­¤ç¤ºä¾‹çš„æ›¿ä»£æ–¹æ³•ï¼Œè¯·å‚é˜…æ‰©å±•ã€‚ ç±»ç»§æ‰¿å’Œåˆå§‹åŒ–ç±»çš„æ‰€æœ‰å­˜å‚¨å±æ€§ï¼ŒåŒ…æ‹¬è¯¥ç±»ä»å…¶è¶…ç±»ç»§æ‰¿çš„ä»»ä½•å±æ€§ï¼Œåœ¨åˆå§‹åŒ–æœŸé—´å¿…é¡»åˆ†é…åˆå§‹å€¼ã€‚ Swiftä¸ºç±»ç±»å‹å®šä¹‰äº†ä¸¤ç§åˆå§‹åŒ–å™¨ï¼Œä»¥å¸®åŠ©ç¡®ä¿æ‰€æœ‰å­˜å‚¨çš„å±æ€§éƒ½æ”¶åˆ°åˆå§‹å€¼ã€‚è¿™äº›è¢«ç§°ä¸ºæŒ‡å®šçš„åˆå§‹åŒ–å™¨å’Œæ–¹ä¾¿åˆå§‹åŒ–å™¨ã€‚ æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿åˆ©åˆå§‹åŒ–å™¨æŒ‡å®šåˆå§‹åŒ–å™¨æ˜¯ç±»çš„ä¸»è¦åˆå§‹åŒ–å™¨ã€‚æŒ‡å®šçš„åˆå§‹åŒ–å™¨å®Œå…¨åˆå§‹åŒ–è¯¥ç±»å¼•å…¥çš„æ‰€æœ‰å±æ€§ï¼Œå¹¶è°ƒç”¨é€‚å½“çš„è¶…ç±»åˆå§‹åŒ–å™¨æ¥ç»§ç»­è¶…ç±»é“¾ä¸Šçš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚ ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨å¾€å¾€å¾ˆå°‘ï¼Œå¹¶ä¸”ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªåˆå§‹åŒ–å™¨å¾ˆå¸¸è§ã€‚æŒ‡å®šçš„åˆå§‹åŒ–å™¨æ˜¯è¿›è¡Œåˆå§‹åŒ–çš„â€œæ¼æ–—â€ç‚¹ï¼Œåˆå§‹åŒ–è¿‡ç¨‹é€šè¿‡è¿™äº›ç‚¹ç»§ç»­è¶…ç±»é“¾ã€‚ æ¯ä¸ªç±»å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–å™¨ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé€šè¿‡ä»è¶…ç±»ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨æ¥æ»¡è¶³è¿™ä¸€è¦æ±‚ï¼Œå¦‚ä¸‹æ–‡çš„è‡ªåŠ¨åˆå§‹åŒ–å™¨ç»§æ‰¿æ‰€è¿°ã€‚ æ–¹ä¾¿åˆå§‹åŒ–å™¨æ˜¯æ¬¡è¦çš„ï¼Œæ”¯æŒç±»çš„åˆå§‹åŒ–å™¨ã€‚æ‚¨å¯ä»¥å®šä¹‰ä¸€ä¸ªæ–¹ä¾¿åˆå§‹åŒ–å™¨ï¼Œä»¥è°ƒç”¨ä¸æ–¹ä¾¿åˆå§‹åŒ–å™¨åŒä¸€ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œå…¶ä¸­æŒ‡å®šåˆå§‹åŒ–å™¨çš„ä¸€äº›å‚æ•°è®¾ç½®ä¸ºé»˜è®¤å€¼ã€‚æ‚¨è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªæ–¹ä¾¿çš„åˆå§‹åŒ–å™¨ï¼Œä¸ºç‰¹å®šçš„ç”¨ä¾‹æˆ–è¾“å…¥å€¼ç±»å‹åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ã€‚ å¦‚æœæ‚¨çš„ç­çº§ä¸éœ€è¦æ–¹ä¾¿çš„åˆå§‹åŒ–å™¨ï¼Œåˆ™ä¸å¿…æä¾›æ–¹ä¾¿çš„åˆå§‹åŒ–å™¨ã€‚æ¯å½“é€šç”¨åˆå§‹åŒ–æ¨¡å¼çš„å¿«æ·æ–¹å¼å°†èŠ‚çœæ—¶é—´æˆ–ä½¿ç±»çš„åˆå§‹åŒ–æ›´æ¸…æ™°æ—¶ï¼Œè¯·åˆ›å»ºæ–¹ä¾¿çš„åˆå§‹åŒ–å™¨ã€‚ æŒ‡å®šå’Œæ–¹ä¾¿åˆå§‹åŒ–å™¨çš„è¯­æ³•ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨çš„ç¼–å†™æ–¹å¼ä¸å€¼ç±»å‹çš„ç®€å•åˆå§‹åŒ–å™¨ç›¸åŒï¼š init(parameters) { â€‹ statements } æ–¹ä¾¿åˆå§‹åŒ–å™¨ä»¥ç›¸åŒçš„æ ·å¼ç¼–å†™ï¼Œä½†convenienceä¿®é¥°ç¬¦æ”¾åœ¨initå…³é”®å­—ä¹‹å‰ï¼Œç”±ç©ºæ ¼åˆ†éš”ï¼š convenience init(parameters) { â€‹ statements } ç±»ç±»å‹çš„åˆå§‹åŒ–å§”æ‰˜ä¸ºäº†ç®€åŒ–æŒ‡å®šåˆå§‹åŒ–å™¨å’Œæ–¹ä¾¿åˆå§‹åŒ–å™¨ä¹‹é—´çš„å…³ç³»ï¼ŒSwiftå¯¹åˆå§‹åŒ–å™¨ä¹‹é—´çš„å§”æ‰˜è°ƒç”¨é€‚ç”¨ä»¥ä¸‹ä¸‰é¡¹è§„åˆ™ï¼š è§„åˆ™1 æŒ‡å®šçš„åˆå§‹åŒ–å™¨å¿…é¡»ä»å…¶ç›´æ¥è¶…ç±»è°ƒç”¨æŒ‡å®šçš„åˆå§‹åŒ–å™¨ã€‚ è§„åˆ™2 æ–¹ä¾¿åˆå§‹åŒ–å™¨å¿…é¡»è°ƒç”¨åŒä¸€ç±»çš„å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨ã€‚ è§„åˆ™3 æ–¹ä¾¿åˆå§‹åŒ–å™¨æœ€ç»ˆå¿…é¡»è°ƒç”¨æŒ‡å®šçš„åˆå§‹åŒ–å™¨ã€‚ è®°ä½è¿™ä¸€ç‚¹çš„ç®€å•æ–¹æ³•æ˜¯ï¼š æŒ‡å®šçš„åˆå§‹åŒ–å™¨å¿…é¡»å§‹ç»ˆå§”æ‰˜ã€‚ æ–¹ä¾¿åˆå§‹åŒ–å™¨å¿…é¡»å§‹ç»ˆå§”æ‰˜ã€‚ è¿™äº›è§„åˆ™å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨è¿™é‡Œï¼Œè¶…ç±»æœ‰ä¸€ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–å™¨å’Œä¸¤ä¸ªæ–¹ä¾¿åˆå§‹åŒ–å™¨ã€‚ä¸€ä¸ªæ–¹ä¾¿åˆå§‹åŒ–å™¨è°ƒç”¨å¦ä¸€ä¸ªæ–¹ä¾¿åˆå§‹åŒ–å™¨ï¼Œè€Œæ–¹ä¾¿åˆå§‹åŒ–å™¨åˆè°ƒç”¨å•ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–å™¨ã€‚è¿™ç¬¦åˆä¸Šé¢çš„è§„åˆ™2å’Œ3ã€‚è¶…çº§ç­æœ¬èº«æ²¡æœ‰è¿›ä¸€æ­¥çš„è¶…çº§ç­çº§ï¼Œå› æ­¤è§„åˆ™1ä¸é€‚ç”¨ã€‚ æœ¬å›¾ä¸­çš„å­ç±»æœ‰ä¸¤ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–å™¨å’Œä¸€ä¸ªæ–¹ä¾¿åˆå§‹åŒ–å™¨ã€‚æ–¹ä¾¿åˆå§‹åŒ–å™¨å¿…é¡»è°ƒç”¨ä¸¤ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ä¸­çš„ä¸€ä¸ªï¼Œå› ä¸ºå®ƒåªèƒ½è°ƒç”¨åŒä¸€ç±»çš„å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨ã€‚è¿™ç¬¦åˆä¸Šé¢çš„è§„åˆ™2å’Œ3ã€‚ä¸¤ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–å™¨éƒ½å¿…é¡»ä»è¶…ç±»è°ƒç”¨å•ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œä»¥æ»¡è¶³ä¸Šé¢çš„è§„åˆ™1ã€‚ æ³¨æ„ è¿™äº›è§„åˆ™ä¸ä¼šå½±å“ç±»ç”¨æˆ·å¦‚ä½•åˆ›å»ºæ¯ä¸ªç±»çš„å®ä¾‹ã€‚ä¸Šå›¾ä¸­çš„ä»»ä½•åˆå§‹åŒ–å™¨éƒ½å¯ç”¨äºåˆ›å»ºå®ƒä»¬æ‰€å±ç±»çš„å®Œå…¨åˆå§‹åŒ–å®ä¾‹ã€‚è¿™äº›è§„åˆ™åªä¼šå½±å“æ‚¨ç¼–å†™ç±»åˆå§‹åŒ–å™¨å®ç°çš„æ–¹å¼ã€‚ ä¸‹å›¾æ˜¾ç¤ºäº†å››ä¸ªç±»çš„æ›´å¤æ‚çš„ç±»å±‚æ¬¡ç»“æ„ã€‚å®ƒè¯´æ˜äº†æ­¤å±‚æ¬¡ç»“æ„ä¸­çš„æŒ‡å®šåˆå§‹åŒ–å™¨å¦‚ä½•å……å½“ç±»åˆå§‹åŒ–çš„â€œæ¼æ–—â€ç‚¹ï¼Œç®€åŒ–äº†é“¾ä¸­ç±»ä¹‹é—´çš„ç›¸äº’å…³ç³»ï¼š ä¸¤é˜¶æ®µåˆå§‹åŒ–Swift ä¸­çš„ç±»åˆå§‹åŒ–æ˜¯ä¸€ä¸ªä¸¤é˜¶æ®µçš„è¿‡ç¨‹ã€‚åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œå¼•å…¥å®ƒçš„ç±»ä¸ºæ¯ä¸ªå­˜å‚¨çš„å±æ€§åˆ†é…ä¸€ä¸ªåˆå§‹å€¼ã€‚ä¸€æ—¦ç¡®å®šäº†æ¯ä¸ªå­˜å‚¨å±æ€§çš„åˆå§‹çŠ¶æ€ï¼Œç¬¬äºŒé˜¶æ®µå°±å¼€å§‹äº†ï¼Œæ¯ä¸ªç±»éƒ½æœ‰æœºä¼šåœ¨æ–°å®ä¾‹è¢«è®¤ä¸ºå¯ä¾›ä½¿ç”¨ä¹‹å‰è¿›ä¸€æ­¥è‡ªå®šä¹‰å…¶å­˜å‚¨å±æ€§ã€‚ ä½¿ç”¨ä¸¤é˜¶æ®µåˆå§‹åŒ–è¿‡ç¨‹ä½¿åˆå§‹åŒ–å®‰å…¨ï¼ŒåŒæ—¶ä»ç„¶ä¸ºç±»å±‚æ¬¡ç»“æ„ä¸­çš„æ¯ä¸ªç±»æä¾›å®Œå…¨çš„çµæ´»æ€§ã€‚ä¸¤é˜¶æ®µåˆå§‹åŒ–å¯ä»¥é˜²æ­¢å±æ€§å€¼åœ¨åˆå§‹åŒ–ä¹‹å‰è¢«è®¿é—®ï¼Œå¹¶é˜²æ­¢å±æ€§å€¼æ„å¤–åœ°è¢«å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨è®¾ç½®ä¸ºä¸åŒçš„å€¼ã€‚ æ³¨æ„ Swiftçš„ä¸¤é˜¶æ®µåˆå§‹åŒ–è¿‡ç¨‹ç±»ä¼¼äºObjective-Cä¸­çš„åˆå§‹åŒ–ã€‚ä¸»è¦åŒºåˆ«åœ¨äºï¼Œåœ¨ç¬¬1é˜¶æ®µï¼ŒObjective-Cä¸ºæ¯ä¸ªå±æ€§åˆ†é…é›¶æˆ–é›¶å€¼ï¼ˆå¦‚0æˆ–nilï¼‰ã€‚Swiftçš„åˆå§‹åŒ–æµç¨‹æ›´åŠ çµæ´»ï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨è®¾ç½®è‡ªå®šä¹‰åˆå§‹å€¼ï¼Œå¹¶å¯ä»¥å¤„ç†0æˆ–nilä¸æ˜¯æœ‰æ•ˆé»˜è®¤å€¼çš„ç±»å‹ã€‚ Swiftçš„ç¼–è¯‘å™¨æ‰§è¡Œäº†å››é¡¹æœ‰ç”¨çš„å®‰å…¨æ£€æŸ¥ï¼Œä»¥ç¡®ä¿ä¸¤é˜¶æ®µåˆå§‹åŒ–æ²¡æœ‰é”™è¯¯åœ°å®Œæˆï¼š å®‰å…¨æ£€æŸ¥1 æŒ‡å®šçš„åˆå§‹åŒ–å™¨å¿…é¡»ç¡®ä¿å…¶ç±»å¼•å…¥çš„æ‰€æœ‰å±æ€§åœ¨å§”æ‰˜ç»™è¶…ç±»åˆå§‹åŒ–å™¨ä¹‹å‰éƒ½å·²åˆå§‹åŒ–ã€‚ å¦‚ä¸Šæ‰€è¿°ï¼Œåªæœ‰å½“å¯¹è±¡æ‰€æœ‰å­˜å‚¨å±æ€§çš„åˆå§‹çŠ¶æ€å·²çŸ¥æ—¶ï¼Œå¯¹è±¡çš„å†…å­˜æ‰ä¼šè¢«è§†ä¸ºå®Œå…¨åˆå§‹åŒ–ã€‚ä¸ºäº†æ»¡è¶³æ­¤è§„åˆ™ï¼ŒæŒ‡å®šçš„åˆå§‹åŒ–å™¨å¿…é¡»ç¡®ä¿å…¶æ‰€æœ‰è‡ªå·±çš„å±æ€§åœ¨å¯åŠ¨é“¾æ¡ä¹‹å‰éƒ½å·²åˆå§‹åŒ–ã€‚ å®‰å…¨æ£€æŸ¥2 åœ¨å°†å€¼åˆ†é…ç»™ç»§æ‰¿çš„å±æ€§ä¹‹å‰ï¼ŒæŒ‡å®šçš„åˆå§‹åŒ–å™¨å¿…é¡»å§”æ‰˜ç»™è¶…ç±»åˆå§‹åŒ–å™¨ã€‚å¦‚æœæ²¡æœ‰ï¼ŒæŒ‡å®šåˆå§‹åŒ–å™¨åˆ†é…çš„æ–°å€¼å°†è¢«è¶…ç±»è¦†ç›–ï¼Œä½œä¸ºå…¶è‡ªèº«åˆå§‹åŒ–çš„ä¸€éƒ¨åˆ†ã€‚ å®‰å…¨æ£€æŸ¥3 åœ¨ä¸ºä»»ä½•å±æ€§ï¼ˆåŒ…æ‹¬åŒä¸€ç±»å®šä¹‰çš„å±æ€§ï¼‰åˆ†é…å€¼ä¹‹å‰ï¼Œæ–¹ä¾¿åˆå§‹åŒ–å™¨å¿…é¡»å§”æ‰˜ç»™å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨ã€‚å¦‚æœæ²¡æœ‰ï¼Œä¾¿åˆ©åˆå§‹åŒ–å™¨åˆ†é…çš„æ–°å€¼å°†è¢«å…¶è‡ªèº«ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨è¦†ç›–ã€‚ å®‰å…¨æ£€æŸ¥4 åœ¨åˆå§‹åŒ–çš„ç¬¬ä¸€é˜¶æ®µå®Œæˆä¹‹å‰ï¼Œåˆå§‹åŒ–å™¨æ— æ³•è°ƒç”¨ä»»ä½•å®ä¾‹æ–¹æ³•ï¼Œè¯»å–ä»»ä½•å®ä¾‹å±æ€§çš„å€¼ï¼Œæˆ–å°†selfç§°ä¸ºå€¼ã€‚ åœ¨ç¬¬ä¸€é˜¶æ®µç»“æŸä¹‹å‰ï¼Œç±»å®ä¾‹ä¸ä¼šå®Œå…¨æœ‰æ•ˆã€‚åªæœ‰åœ¨å·²çŸ¥ç±»å®ä¾‹åœ¨ç¬¬ä¸€é˜¶æ®µç»“æŸæ—¶æœ‰æ•ˆæ—¶ï¼Œæ‰èƒ½è®¿é—®å±æ€§ï¼Œå¹¶ä¸”åªèƒ½è°ƒç”¨æ–¹æ³•ã€‚ æ ¹æ®ä¸Šè¿°å››é¡¹å®‰å…¨æ£€æŸ¥ï¼Œä»¥ä¸‹æ˜¯ä¸¤é˜¶æ®µåˆå§‹åŒ–æ˜¯å¦‚ä½•è¿ä½œçš„ï¼š ç¬¬ä¸€é˜¶æ®µ ç±»è°ƒç”¨æŒ‡å®šæˆ–æ–¹ä¾¿çš„åˆå§‹åŒ–å™¨ã€‚ ä¸ºè¯¥ç±»çš„æ–°å®ä¾‹åˆ†é…å†…å­˜ã€‚å†…å­˜å°šæœªåˆå§‹åŒ–ã€‚ è¯¥ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ç¡®è®¤è¯¥ç±»å¼•å…¥çš„æ‰€æœ‰å­˜å‚¨å±æ€§éƒ½æœ‰ä¸€ä¸ªå€¼ã€‚è¿™äº›å­˜å‚¨å±æ€§çš„å†…å­˜ç°å·²åˆå§‹åŒ–ã€‚ æŒ‡å®šçš„åˆå§‹åŒ–å™¨äº¤ç»™è¶…ç±»åˆå§‹åŒ–å™¨ï¼Œä»¥ä¸ºè‡ªå·±çš„å­˜å‚¨å±æ€§æ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ã€‚ è¿™ç»§ç»­æ²¿ç€ç±»ç»§æ‰¿é“¾ï¼Œç›´åˆ°åˆ°è¾¾é“¾çš„é¡¶éƒ¨ã€‚ ä¸€æ—¦åˆ°è¾¾é“¾çš„é¡¶éƒ¨ï¼Œå¹¶ä¸”é“¾ä¸­çš„æœ€åä¸€ä¸ªç±»ç¡®ä¿å…¶æ‰€æœ‰å­˜å‚¨å±æ€§éƒ½æœ‰ä¸€ä¸ªå€¼ï¼Œå®ä¾‹çš„å†…å­˜å°†è¢«è§†ä¸ºå®Œå…¨åˆå§‹åŒ–ï¼Œé˜¶æ®µ1å®Œæˆã€‚ ç¬¬äºŒé˜¶æ®µ ä»é“¾çš„é¡¶éƒ¨å‘ä¸‹å·¥ä½œï¼Œé“¾ä¸­çš„æ¯ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–å™¨éƒ½å¯ä»¥é€‰æ‹©è¿›ä¸€æ­¥è‡ªå®šä¹‰å®ä¾‹ã€‚åˆå§‹åŒ–å™¨ç°åœ¨å¯ä»¥è®¿é—®selfï¼Œå¹¶å¯ä»¥ä¿®æ”¹å…¶å±æ€§ï¼Œè°ƒç”¨å…¶å®ä¾‹æ–¹æ³•ç­‰ã€‚ æœ€åï¼Œé“¾ä¸­çš„ä»»ä½•æ–¹ä¾¿åˆå§‹åŒ–å™¨éƒ½å¯ä»¥é€‰æ‹©è‡ªå®šä¹‰å®ä¾‹å¹¶ä½¿ç”¨selfã€‚ ä»¥ä¸‹æ˜¯ç¬¬1é˜¶æ®µå¦‚ä½•æŸ¥æ‰¾å‡è®¾å­ç±»å’Œè¶…ç±»çš„åˆå§‹åŒ–è°ƒç”¨ï¼š åœ¨æœ¬ä¾‹ä¸­ï¼Œåˆå§‹åŒ–ä»¥è°ƒç”¨å­ç±»ä¸Šçš„æ–¹ä¾¿åˆå§‹åŒ–å™¨å¼€å§‹ã€‚æ­¤æ–¹ä¾¿åˆå§‹åŒ–å™¨å°šæ— æ³•ä¿®æ”¹ä»»ä½•å±æ€§ã€‚å®ƒå§”æ‰˜ç»™æ¥è‡ªåŒä¸€ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ã€‚ æ ¹æ®å®‰å…¨æ£€æŸ¥1ï¼ŒæŒ‡å®šçš„åˆå§‹åŒ–å™¨ç¡®ä¿å­ç±»çš„æ‰€æœ‰å±æ€§éƒ½æœ‰ä¸€ä¸ªå€¼ã€‚ç„¶åï¼Œå®ƒåœ¨å…¶è¶…ç±»ä¸Šè°ƒç”¨æŒ‡å®šçš„åˆå§‹åŒ–å™¨ï¼Œä»¥ç»§ç»­æ²¿ç€é“¾è¿›è¡Œåˆå§‹åŒ–ã€‚ è¶…ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ç¡®ä¿æ‰€æœ‰è¶…ç±»å±æ€§éƒ½æœ‰ä¸€ä¸ªå€¼ã€‚æ²¡æœ‰æ›´å¤šçš„è¶…çº§ç±»éœ€è¦åˆå§‹åŒ–ï¼Œå› æ­¤ä¸éœ€è¦è¿›ä¸€æ­¥çš„æˆæƒã€‚ ä¸€æ—¦è¶…ç±»çš„æ‰€æœ‰å±æ€§éƒ½å…·æœ‰åˆå§‹å€¼ï¼Œå…¶å†…å­˜å°±ä¼šè¢«è§†ä¸ºå®Œå…¨åˆå§‹åŒ–ï¼Œç¬¬1é˜¶æ®µå°±å®Œæˆäº†ã€‚ ä»¥ä¸‹æ˜¯ç¬¬2é˜¶æ®µå¯¹ç›¸åŒåˆå§‹åŒ–è°ƒç”¨çš„æŸ¥æ‰¾æ–¹å¼ï¼š è¶…ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ç°åœ¨æœ‰æœºä¼šè¿›ä¸€æ­¥è‡ªå®šä¹‰å®ä¾‹ï¼ˆå°½ç®¡å®ƒä¸å¿…è¿™æ ·åšï¼‰ã€‚ ä¸€æ—¦è¶…ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨å®Œæˆï¼Œå­ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨å¯ä»¥æ‰§è¡Œé¢å¤–çš„è‡ªå®šä¹‰ï¼ˆå°½ç®¡åŒæ ·ï¼Œå®ƒä¸å¿…è¿™æ ·åšï¼‰ã€‚ æœ€åï¼Œä¸€æ—¦å­ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨å®Œæˆï¼Œæœ€åˆè°ƒç”¨çš„æ–¹ä¾¿åˆå§‹åŒ–å™¨å¯ä»¥æ‰§è¡Œé¢å¤–çš„è‡ªå®šä¹‰ã€‚ åˆå§‹åŒ–å™¨ç»§æ‰¿å’Œé‡å†™ä¸Objective-Cä¸­çš„å­ç±»ä¸åŒï¼ŒSwiftå­ç±»é»˜è®¤ä¸ä¼šç»§æ‰¿å…¶è¶…ç±»åˆå§‹åŒ–å™¨ã€‚Swiftçš„æ–¹æ³•é˜²æ­¢äº†è¶…ç±»çš„ç®€å•åˆå§‹åŒ–å™¨è¢«æ›´ä¸“ä¸šçš„å­ç±»ç»§æ‰¿ï¼Œå¹¶ç”¨äºåˆ›å»ºæœªå®Œå…¨æˆ–æ­£ç¡®åˆå§‹åŒ–çš„å­ç±»çš„æ–°å®ä¾‹ã€‚ æ³¨æ„ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¶…ç±»åˆå§‹åŒ–å™¨æ˜¯ç»§æ‰¿çš„ï¼Œä½†åªæœ‰åœ¨å®‰å…¨ä¸”åˆé€‚çš„æƒ…å†µä¸‹æ‰ä¼šç»§æ‰¿ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ä¸‹é¢çš„è‡ªåŠ¨åˆå§‹åŒ–å™¨ç»§æ‰¿ã€‚ å¦‚æœæ‚¨å¸Œæœ›è‡ªå®šä¹‰å­ç±»æ˜¾ç¤ºä¸å…¶è¶…ç±»ç›¸åŒçš„ä¸€ä¸ªæˆ–å¤šä¸ªåˆå§‹åŒ–å™¨ï¼Œæ‚¨å¯ä»¥åœ¨å­ç±»ä¸­æä¾›è¿™äº›åˆå§‹åŒ–å™¨çš„è‡ªå®šä¹‰å®ç°ã€‚ å½“æ‚¨ç¼–å†™ä¸è¶…ç±»æŒ‡å®šåˆå§‹åŒ–å™¨åŒ¹é…çš„å­ç±»åˆå§‹åŒ–å™¨æ—¶ï¼Œæ‚¨å®é™…ä¸Šæ˜¯åœ¨æä¾›è¯¥æŒ‡å®šåˆå§‹åŒ–å™¨çš„é‡å†™ã€‚å› æ­¤ï¼Œæ‚¨å¿…é¡»åœ¨å­ç±»çš„åˆå§‹åŒ–å™¨å®šä¹‰ä¹‹å‰ç¼–å†™overrideä¿®é¥°ç¬¦ã€‚å³ä½¿æ‚¨é‡å†™è‡ªåŠ¨æä¾›çš„é»˜è®¤åˆå§‹åŒ–å™¨ï¼Œä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¦‚é»˜è®¤åˆå§‹åŒ–å™¨æ‰€è¿°ã€‚ ä¸é‡å†™å±æ€§ã€æ–¹æ³•æˆ–ä¸‹æ ‡ä¸€æ ·ï¼Œoverrideä¿®é¥°ç¬¦çš„å­˜åœ¨ä¼šæç¤ºSwiftæ£€æŸ¥è¶…ç±»æ˜¯å¦æœ‰åŒ¹é…çš„æŒ‡å®šåˆå§‹åŒ–å™¨è¦é‡å†™ï¼Œå¹¶éªŒè¯é‡å†™åˆå§‹åŒ–å™¨çš„å‚æ•°æ˜¯å¦å·²æŒ‰é¢„æœŸæŒ‡å®šã€‚ æ³¨æ„ åœ¨è¦†ç›–è¶…ç±»æŒ‡å®šåˆå§‹åŒ–å™¨æ—¶ï¼Œæ‚¨æ€»æ˜¯å†™å…¥overrideä¿®é¥°ç¬¦ï¼Œå³ä½¿å­ç±»å¯¹åˆå§‹åŒ–å™¨çš„å®ç°æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„åˆå§‹åŒ–å™¨ã€‚ ç›¸åï¼Œå¦‚æœæ‚¨ç¼–å†™ä¸è¶…ç±»ä¾¿åˆ©åˆå§‹åŒ–å™¨åŒ¹é…çš„å­ç±»åˆå§‹åŒ–å™¨ï¼Œåˆ™æ ¹æ®ä¸Šé¢ç±»ç±»å‹åˆå§‹åŒ–å™¨å§”æ‰˜ä¸­æè¿°çš„è§„åˆ™ï¼Œæ‚¨çš„å­ç±»æ°¸è¿œä¸èƒ½ç›´æ¥è°ƒç”¨è¯¥è¶…ç±»æ–¹ä¾¿åˆå§‹åŒ–å™¨ã€‚å› æ­¤ï¼Œæ‚¨çš„å­ç±»ï¼ˆä¸¥æ ¼æ¥è¯´ï¼‰ä¸æä¾›è¶…ç±»åˆå§‹åŒ–å™¨çš„é‡å†™ã€‚å› æ­¤ï¼Œåœ¨æä¾›è¶…ç±»æ–¹ä¾¿åˆå§‹åŒ–å™¨çš„åŒ¹é…å®ç°æ—¶ï¼Œæ‚¨ä¸ä¼šç¼–å†™overrideä¿®é¥°ç¬¦ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºVehicleçš„åŸºç±»ã€‚è¯¥åŸºç±»å£°æ˜ä¸€ä¸ªåä¸ºnumberOfWheelsçš„å­˜å‚¨å±æ€§ï¼Œé»˜è®¤Intå€¼ä¸º0ã€‚numberOfWheelså±æ€§ç”±ç§°ä¸ºdescriptionçš„è®¡ç®—å±æ€§ç”¨äºåˆ›å»ºè½¦è¾†ç‰¹å¾çš„Stringæè¿°ï¼š class Vehicle { â€‹ var numberOfWheels &#x3D; 0 â€‹ var description: String { â€‹ return â€œ(numberOfWheels) wheel(s)â€ â€‹ } } Vehicleç±»ä¸ºå…¶å”¯ä¸€å­˜å‚¨çš„å±æ€§æä¾›é»˜è®¤å€¼ï¼Œå¹¶ä¸”æœ¬èº«ä¸æä¾›ä»»ä½•è‡ªå®šä¹‰åˆå§‹åŒ–å™¨ã€‚å› æ­¤ï¼Œå®ƒä¼šè‡ªåŠ¨æ¥æ”¶é»˜è®¤åˆå§‹åŒ–å™¨ï¼Œå¦‚é»˜è®¤åˆå§‹åŒ–å™¨ä¸­æ‰€è¿°ã€‚é»˜è®¤åˆå§‹åŒ–å™¨ï¼ˆå¦‚æœå¯ç”¨ï¼‰å§‹ç»ˆæ˜¯ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œå¯ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„Vehicleå®ä¾‹ï¼Œå…¶anumberOfWheelsä¸º0ï¼š let vehicle &#x3D; Vehicle() print(â€œVehicle: (vehicle.description)â€) &#x2F;&#x2F; Vehicle: 0 wheel(s) ä¸‹ä¸€ä¸ªç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºBicycleçš„Vehicleå­ç±»ï¼š class Bicycle: Vehicle { â€‹ override init() { â€‹ super.init() â€‹ numberOfWheels &#x3D; 2 â€‹ } } Bicycleå­ç±»å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡å®šçš„åˆå§‹åŒ–å™¨init()ã€‚æ­¤æŒ‡å®šåˆå§‹åŒ–å™¨ä¸Bicycleè¶…ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨åŒ¹é…ï¼Œå› æ­¤æ­¤åˆå§‹åŒ–å™¨çš„Bicycleç‰ˆæœ¬ç”¨overrideä¿®é¥°ç¬¦æ ‡è®°ã€‚ The init() initializer for Bicycle starts by calling super.init(), which calls the default initializer for the Bicycle classâ€™s superclass, Vehicle. This ensures that the numberOfWheelsinherited property is initialized by Vehicle before Bicycle has the opportunity to modify the property. After calling super.init(), the original value of numberOfWheels is replaced with a new value of 2. å¦‚æœæ‚¨åˆ›å»ºBicycleå®ä¾‹ï¼Œæ‚¨å¯ä»¥è°ƒç”¨å…¶ç»§æ‰¿çš„descriptionè®¡ç®—å±æ€§ï¼Œä»¥æŸ¥çœ‹å…¶numberOfWheelså±æ€§æ˜¯å¦‚ä½•æ›´æ–°çš„ï¼š let bicycle &#x3D; Bicycle() print(â€œBicycle: (bicycle.description)â€) &#x2F;&#x2F; Bicycle: 2 wheel(s) å¦‚æœå­ç±»åˆå§‹åŒ–å™¨åœ¨åˆå§‹åŒ–è¿‡ç¨‹çš„ç¬¬2é˜¶æ®µä¸æ‰§è¡Œè‡ªå®šä¹‰ï¼Œå¹¶ä¸”è¶…ç±»å…·æœ‰é›¶å‚æ•°æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œåˆ™åœ¨ä¸ºå­ç±»çš„æ‰€æœ‰å­˜å‚¨å±æ€§åˆ†é…å€¼åï¼Œæ‚¨å¯ä»¥çœç•¥å¯¹super.init()çš„è°ƒç”¨ã€‚ æ­¤ç¤ºä¾‹å®šä¹‰äº†Vehicleçš„å¦ä¸€ä¸ªå­ç±»ï¼Œç§°ä¸ºHoverboardã€‚åœ¨å…¶åˆå§‹åŒ–å™¨ä¸­ï¼ŒHoverboardç±»ä»…è®¾ç½®å…¶colorå±æ€§ã€‚æ­¤åˆå§‹åŒ–å™¨ä¸æ˜¯æ˜¾å¼è°ƒç”¨super.init()ï¼Œè€Œæ˜¯ä¾èµ–å¯¹å…¶è¶…ç±»åˆå§‹åŒ–å™¨çš„éšå¼è°ƒç”¨æ¥å®Œæˆè¯¥è¿‡ç¨‹ã€‚ class Hoverboard: Vehicle { â€‹ var color: String â€‹ init(color: String) { â€‹ self.color &#x3D; color â€‹ &#x2F;&#x2F; super.init() implicitly called here â€‹ } â€‹ override var description: String { â€‹ return â€œ(super.description) in a beautiful (color)â€ â€‹ } } Hoverboardå®ä¾‹ä½¿ç”¨Vehicleåˆå§‹åŒ–å™¨æä¾›çš„é»˜è®¤è½¦è½®æ•°é‡ã€‚ let hoverboard &#x3D; Hoverboard(color: â€œsilverâ€) print(â€œHoverboard: (hoverboard.description)â€) &#x2F;&#x2F; Hoverboard: 0 wheel(s) in a beautiful silver æ³¨æ„ å­ç±»å¯ä»¥åœ¨åˆå§‹åŒ–æœŸé—´ä¿®æ”¹ç»§æ‰¿çš„å˜é‡å±æ€§ï¼Œä½†ä¸èƒ½ä¿®æ”¹ç»§æ‰¿çš„å¸¸é‡å±æ€§ã€‚ è‡ªåŠ¨åˆå§‹åŒ–å™¨ç»§æ‰¿å¦‚ä¸Šæ‰€è¿°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå­ç±»ä¸ä¼šç»§æ‰¿å…¶è¶…ç±»åˆå§‹åŒ–å™¨ã€‚ç„¶è€Œï¼Œå¦‚æœæ»¡è¶³æŸäº›æ¡ä»¶ï¼Œè¶…ç±»åˆå§‹åŒ–å™¨ä¼šè‡ªåŠ¨ç»§æ‰¿ã€‚åœ¨å®è·µä¸­ï¼Œè¿™æ„å‘³ç€æ‚¨ä¸éœ€è¦åœ¨è®¸å¤šå¸¸è§æƒ…å†µä¸‹ç¼–å†™åˆå§‹åŒ–å™¨é‡å†™ï¼Œåªè¦å®‰å…¨ï¼Œå°±å¯ä»¥æ¯«ä¸è´¹åŠ›åœ°ç»§æ‰¿è¶…ç±»åˆå§‹åŒ–å™¨ã€‚ å‡è®¾æ‚¨ä¸ºåœ¨å­ç±»ä¸­å¼•å…¥çš„ä»»ä½•æ–°å±æ€§æä¾›é»˜è®¤å€¼ï¼Œåˆ™é€‚ç”¨ä»¥ä¸‹ä¸¤æ¡è§„åˆ™ï¼š è§„åˆ™1 å¦‚æœæ‚¨çš„å­ç±»æ²¡æœ‰å®šä¹‰ä»»ä½•æŒ‡å®šçš„åˆå§‹åŒ–å™¨ï¼Œå®ƒä¼šè‡ªåŠ¨ç»§æ‰¿å…¶æ‰€æœ‰è¶…ç±»æŒ‡å®šåˆå§‹åŒ–å™¨ã€‚ è§„åˆ™2 å¦‚æœæ‚¨çš„å­ç±»æä¾›å…¶æ‰€æœ‰è¶…ç±»æŒ‡å®šåˆå§‹åŒ–å™¨çš„å®ç°â€”â€”è¦ä¹ˆæ ¹æ®è§„åˆ™1ç»§æ‰¿å®ƒä»¬ï¼Œè¦ä¹ˆæä¾›è‡ªå®šä¹‰å®ç°ä½œä¸ºå…¶å®šä¹‰çš„ä¸€éƒ¨åˆ†â€”â€”é‚£ä¹ˆå®ƒä¼šè‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰è¶…ç±»æ–¹ä¾¿åˆå§‹åŒ–å™¨ã€‚ å³ä½¿æ‚¨çš„å­ç±»æ·»åŠ äº†è¿›ä¸€æ­¥çš„ä¾¿åˆ©åˆå§‹åŒ–å™¨ï¼Œè¿™äº›è§„åˆ™ä¹Ÿé€‚ç”¨ã€‚ æ³¨æ„ ä½œä¸ºæ»¡è¶³è§„åˆ™2çš„ä¸€éƒ¨åˆ†ï¼Œå­ç±»å¯ä»¥å®ç°è¶…ç±»æŒ‡å®šçš„åˆå§‹åŒ–å™¨ä½œä¸ºå­ç±»æ–¹ä¾¿åˆå§‹åŒ–å™¨ã€‚ æŒ‡å®šå’Œæ–¹ä¾¿çš„åˆå§‹åŒ–å™¨åœ¨æ“ä½œä¸­ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†æŒ‡å®šçš„åˆå§‹åŒ–å™¨ã€æ–¹ä¾¿åˆå§‹åŒ–å™¨å’Œè‡ªåŠ¨åˆå§‹åŒ–å™¨ç»§æ‰¿ã€‚æ­¤ç¤ºä¾‹å®šä¹‰äº†ä¸‰ä¸ªç±»çš„å±‚æ¬¡ç»“æ„ï¼Œç§°ä¸ºFoodã€RecipeIngredientå’ŒShoppingListItemï¼Œå¹¶æ¼”ç¤ºäº†å®ƒä»¬çš„åˆå§‹åŒ–å™¨å¦‚ä½•äº¤äº’ã€‚ å±‚æ¬¡ç»“æ„ä¸­çš„åŸºç±»ç§°ä¸ºFoodï¼Œè¿™æ˜¯ä¸€ä¸ªå°è£…é£Ÿå“åç§°çš„ç®€å•ç±»ã€‚Foodç±»å¼•å…¥äº†ä¸€ä¸ªåä¸ºname``Stringå±æ€§ï¼Œå¹¶ä¸ºåˆ›å»ºFoodå®ä¾‹æä¾›äº†ä¸¤ä¸ªåˆå§‹åŒ–å™¨ï¼š class Food { â€‹ var name: String â€‹ init(name: String) { â€‹ self.name &#x3D; name â€‹ } â€‹ convenience init() { â€‹ self.init(name: â€œ[Unnamed]â€) â€‹ } } ä¸‹å›¾æ˜¾ç¤ºäº†Foodç±»çš„åˆå§‹åŒ–é“¾ï¼š ç±»æ²¡æœ‰é»˜è®¤çš„æŒ‰æˆå‘˜åˆå§‹åŒ–å™¨ï¼Œå› æ­¤Foodç±»æä¾›äº†ä¸€ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–å™¨ï¼Œè¯¥åˆå§‹åŒ–å™¨æ¥å—ä¸€ä¸ªåä¸ºnameå‚æ•°ã€‚æ­¤åˆå§‹åŒ–å™¨å¯ç”¨äºåˆ›å»ºå…·æœ‰ç‰¹å®šåç§°çš„æ–°Foodå®ä¾‹ï¼š let namedMeat &#x3D; Food(name: â€œBaconâ€) &#x2F;&#x2F; namedMeatâ€™s name is â€œBaconâ€ Foodç±»çš„init(name:String)åˆå§‹åŒ–å™¨ä½œä¸ºæŒ‡å®šçš„åˆå§‹åŒ–å™¨æä¾›ï¼Œå› ä¸ºå®ƒç¡®ä¿æ–°Foodå®ä¾‹çš„æ‰€æœ‰å­˜å‚¨å±æ€§éƒ½å®Œå…¨åˆå§‹åŒ–ã€‚Foodç±»æ²¡æœ‰è¶…ç±»ï¼Œå› æ­¤init(name:String)åˆå§‹åŒ–å™¨ä¸éœ€è¦è°ƒç”¨super.init()å³å¯å®Œæˆå…¶åˆå§‹åŒ–ã€‚ Foodç±»è¿˜æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„åˆå§‹åŒ–å™¨init()ï¼Œæ²¡æœ‰å‚æ•°ã€‚Theinitinit()åˆå§‹åŒ–å™¨é€šè¿‡å°†nameå€¼ä¸º[Unnamed]çš„Foodç±»çš„init(name:String)å§”æ‰˜æ¥ä¸ºæ–°é£Ÿç‰©æä¾›é»˜è®¤å ä½ç¬¦åç§°ï¼š let mysteryMeat &#x3D; Food() &#x2F;&#x2F; mysteryMeatâ€™s name is â€œ[Unnamed]â€ å±‚æ¬¡ç»“æ„ä¸­çš„ç¬¬äºŒç±»æ˜¯Foodçš„ä¸€ä¸ªå­ç±»ï¼Œç§°ä¸ºRecipeIngredientã€‚RecipeIngredientåœ¨çƒ¹é¥ªé£Ÿè°±ä¸­å»ºæ¨¡æˆåˆ†ã€‚å®ƒå¼•å…¥äº†ä¸€ä¸ªåä¸ºquantity``Intå±æ€§ï¼ˆé™¤äº†å®ƒä»Foodç»§æ‰¿çš„nameå±æ€§å¤–ï¼‰ï¼Œå¹¶å®šä¹‰äº†ç”¨äºåˆ›å»ºRecipeIngredientå®ä¾‹çš„ä¸¤ä¸ªåˆå§‹åŒ–å™¨ï¼š class RecipeIngredient: Food { â€‹ var quantity: Int â€‹ init(name: String, quantity: Int) { â€‹ self.quantity &#x3D; quantity â€‹ super.init(name: name) â€‹ } â€‹ override convenience init(name: String) { â€‹ self.init(name: name, quantity: 1) â€‹ } } The figure below shows the initializer chain for the RecipeIngredient class: RecipeIngredientç±»æœ‰ä¸€ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–å™¨init(name:String,quantity:Int)å¯ç”¨äºå¡«å……æ–°RecipeIngredientå®ä¾‹çš„æ‰€æœ‰å±æ€§ã€‚æ­¤åˆå§‹åŒ–å™¨é¦–å…ˆå°†ä¼ é€’çš„quantityå‚æ•°åˆ†é…ç»™quantityå±æ€§ï¼Œè¿™æ˜¯RecipeIngredientå¼•å…¥çš„å”¯ä¸€æ–°å±æ€§ã€‚å®Œæˆåï¼Œåˆå§‹åŒ–å™¨å°†å§”æ‰˜ç»™Foodç±»çš„init(name:String)åˆå§‹åŒ–å™¨ã€‚æ­¤è¿‡ç¨‹æ»¡è¶³ä¸Šè¿°ä¸¤é˜¶æ®µåˆå§‹åŒ–çš„å®‰å…¨æ£€æŸ¥1ã€‚ RecipeIngredientè¿˜å®šä¹‰äº†ä¸€ä¸ªæ–¹ä¾¿åˆå§‹åŒ–å™¨init(name:String)å®ƒä»…ç”¨äºæŒ‰åç§°åˆ›å»ºRecipeIngredientå®ä¾‹ã€‚å¯¹äºæ²¡æœ‰æ˜¾å¼æ•°é‡åˆ›å»ºçš„ä»»ä½•RecipeIngredientå®ä¾‹ï¼Œæ­¤æ–¹ä¾¿åˆå§‹åŒ–å™¨å‡è®¾æ•°é‡ä¸º1ã€‚æ­¤æ–¹ä¾¿åˆå§‹åŒ–å™¨çš„å®šä¹‰ä½¿RecipeIngredientå®ä¾‹åˆ›å»ºæ›´å¿«ã€æ›´æ–¹ä¾¿ï¼Œå¹¶åœ¨åˆ›å»ºå¤šä¸ªå•é‡RecipeIngredientå®ä¾‹æ—¶é¿å…ä»£ç å¤åˆ¶ã€‚æ­¤æ–¹ä¾¿åˆå§‹åŒ–å™¨åªéœ€å°†æ•°é‡å€¼å§”æ‰˜ç»™ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œä¼ é€’quantityä¸º1ã€‚ RecipeIngredientæä¾›çš„init(name:String)æ–¹ä¾¿åˆå§‹åŒ–å™¨é‡‡ç”¨ä¸Foodä¸­æŒ‡å®šçš„init(name:String)æŒ‡å®šåˆå§‹åŒ–å™¨ç›¸åŒçš„å‚æ•°ã€‚ç”±äºæ­¤æ–¹ä¾¿åˆå§‹åŒ–å™¨ä»å…¶è¶…ç±»ä¸­è¦†ç›–æŒ‡å®šçš„åˆå§‹åŒ–å™¨ï¼Œå› æ­¤å¿…é¡»ç”¨overrideä¿®é¥°ç¬¦æ ‡è®°ï¼ˆå¦‚åˆå§‹åŒ–å™¨ç»§æ‰¿å’Œé‡å†™ä¸­æ‰€è¿°ï¼‰ã€‚ å°½ç®¡RecipeIngredientæä¾›äº†init(name:String)åˆå§‹åŒ–å™¨ä½œä¸ºæ–¹ä¾¿çš„åˆå§‹åŒ–å™¨ï¼Œä½†RecipeIngredientä»ç„¶æä¾›äº†å…¶æ‰€æœ‰è¶…ç±»æŒ‡å®šåˆå§‹åŒ–å™¨çš„å®ç°ã€‚å› æ­¤ï¼ŒRecipeIngredientä¹Ÿä¼šè‡ªåŠ¨ç»§æ‰¿å…¶æ‰€æœ‰è¶…ç±»çš„ä¾¿åˆ©åˆå§‹åŒ–å™¨ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼ŒRecipeIngredientçš„è¶…ç±»æ˜¯Foodï¼Œå®ƒåªæœ‰ä¸€ä¸ªåä¸ºinit()æ–¹ä¾¿åˆå§‹åŒ–å™¨ã€‚å› æ­¤ï¼Œæ­¤åˆå§‹åŒ–å™¨ç”±RecipeIngredientç»§æ‰¿ã€‚init()çš„ç»§æ‰¿ç‰ˆæœ¬çš„åŠŸèƒ½ä¸Foodç‰ˆæœ¬å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å®ƒå§”æ‰˜ç»™init(name:String)çš„RecipeIngredientç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯Foodç‰ˆæœ¬ã€‚ All three of these initializers can be used to create new RecipeIngredient instances: let oneMysteryItem &#x3D; RecipeIngredient() let oneBacon &#x3D; RecipeIngredient(name: â€œBaconâ€) let sixEggs &#x3D; RecipeIngredient(name: â€œEggsâ€, quantity: 6) The third and final class in the hierarchy is a subclass of RecipeIngredient called ShoppingListItem. The ShoppingListItem class models a recipe ingredient as it appears in a shopping list. è´­ç‰©æ¸…å•ä¸­çš„æ¯ä»¶å•†å“éƒ½ä»¥â€œæœªè´­ä¹°â€å¼€å¤´ã€‚ä¸ºäº†è¡¨ç¤ºè¿™ä¸€äº‹å®ï¼ŒShoppingListItemå¼•å…¥äº†ä¸€ä¸ªåä¸ºpurchasedå¸ƒå°”å±æ€§ï¼Œé»˜è®¤å€¼ä¸ºå…³é—­ã€‚ShoppingListItemè¿˜æ·»åŠ äº†ä¸€ä¸ªè®¡ç®—descriptionå±æ€§ï¼Œè¯¥å±æ€§æä¾›äº†ShoppingListItemå®ä¾‹çš„æ–‡æœ¬æè¿°ï¼š class ShoppingListItem: RecipeIngredient { â€‹ var purchased &#x3D; false â€‹ var description: String { â€‹ var output &#x3D; â€œ(quantity) x (name)â€ â€‹ output +&#x3D; purchased ? â€œ âœ”â€ : â€œ âœ˜â€ â€‹ return output â€‹ } } æ³¨æ„ ShoppingListItemæ²¡æœ‰å®šä¹‰åˆå§‹åŒ–å™¨æ¥ä¸ºpurchasedæä¾›åˆå§‹å€¼ï¼Œå› ä¸ºè´­ç‰©æ¸…å•ä¸­çš„å•†å“ï¼ˆå¦‚æ­¤å¤„å»ºæ¨¡ï¼‰æ€»æ˜¯ä»æœªè´­ä¹°å¼€å§‹ã€‚ ç”±äºå®ƒä¸ºå…¶å¼•å…¥çš„æ‰€æœ‰å±æ€§æä¾›äº†é»˜è®¤å€¼ï¼Œå¹¶ä¸”æœ¬èº«ä¸å®šä¹‰ä»»ä½•åˆå§‹åŒ–å™¨ï¼Œå› æ­¤ShoppingListItemä¼šè‡ªåŠ¨ä»å…¶è¶…ç±»ç»§æ‰¿æ‰€æœ‰æŒ‡å®šå’Œæ–¹ä¾¿çš„åˆå§‹åŒ–å™¨ã€‚ ä¸‹å›¾æ˜¾ç¤ºäº†æ‰€æœ‰ä¸‰ä¸ªç±»åˆ«çš„æ•´ä½“åˆå§‹åŒ–é“¾ï¼š æ‚¨å¯ä»¥ä½¿ç”¨æ‰€æœ‰ä¸‰ä¸ªç»§æ‰¿çš„åˆå§‹åŒ–å™¨æ¥åˆ›å»ºæ–°çš„ShoppingListItemå®ä¾‹ï¼š var breakfastList &#x3D; [ â€‹ ShoppingListItem(), â€‹ ShoppingListItem(name: â€œBaconâ€), â€‹ ShoppingListItem(name: â€œEggsâ€, quantity: 6), ] breakfastList[0].name &#x3D; â€œOrange juiceâ€ breakfastList[0].purchased &#x3D; true for item in breakfastList { â€‹ print(item.description) } &#x2F;&#x2F; 1 x Orange juice âœ” &#x2F;&#x2F; 1 x Bacon âœ˜ &#x2F;&#x2F; 6 x Eggs âœ˜ åœ¨è¿™é‡Œï¼Œä¸€ä¸ªåä¸ºbreakfastListçš„æ–°æ•°ç»„æ˜¯ä»åŒ…å«ä¸‰ä¸ªæ–°ShoppingListItemå®ä¾‹çš„æ•°ç»„æ–‡å­—åˆ›å»ºçš„ã€‚æ•°ç»„çš„ç±»å‹æ¨æ–­ä¸º[ShoppingListItem]æ•°ç»„åˆ›å»ºåï¼Œæ•°ç»„å¼€å¤´çš„ShoppingListItemåç§°ä»&quot;[Unnamed]&quot;æ›´æ”¹ä¸º&quot;Orangejuice&quot;å¹¶æ ‡è®°ä¸ºå·²è´­ä¹°ã€‚æ‰“å°æ•°ç»„ä¸­æ¯ä¸ªé¡¹ç›®çš„æè¿°ä¼šæ˜¾ç¤ºå®ƒä»¬çš„é»˜è®¤çŠ¶æ€å·²æŒ‰é¢„æœŸè®¾ç½®ã€‚ å¤±è´¥çš„åˆå§‹åŒ–å™¨å®šä¹‰åˆå§‹åŒ–å¯èƒ½å¤±è´¥çš„ç±»ã€ç»“æ„æˆ–æšä¸¾æœ‰æ—¶æ˜¯æœ‰ç”¨çš„ã€‚æ­¤æ•…éšœå¯èƒ½ç”±æ— æ•ˆçš„åˆå§‹åŒ–å‚æ•°å€¼ã€ç¼ºä¹æ‰€éœ€çš„å¤–éƒ¨èµ„æºæˆ–é˜»æ­¢åˆå§‹åŒ–æˆåŠŸçš„å…¶ä»–æ¡ä»¶è§¦å‘ã€‚ è¦åº”å¯¹å¯èƒ½å¤±è´¥çš„åˆå§‹åŒ–æ¡ä»¶ï¼Œè¯·å°†ä¸€ä¸ªæˆ–å¤šä¸ªæ•…éšœåˆå§‹åŒ–å™¨å®šä¹‰ä¸ºç±»ã€ç»“æ„æˆ–æšä¸¾å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨initå…³é”®å­—ï¼ˆinit?ï¼‰åæ”¾ç½®é—®å·æ¥ç¼–å†™ä¸€ä¸ªå¤±è´¥çš„åˆå§‹åŒ–å™¨ã€‚ æ³¨æ„ æ‚¨æ— æ³•ä½¿ç”¨ç›¸åŒçš„å‚æ•°ç±»å‹å’Œåç§°å®šä¹‰æ•…éšœå’Œéæ•…éšœåˆå§‹åŒ–å™¨ã€‚ æ•…éšœåˆå§‹åŒ–å™¨ä¼šåˆ›å»ºå…¶åˆå§‹åŒ–ç±»å‹çš„å¯é€‰å€¼ã€‚æ‚¨å¯ä»¥åœ¨å¯æ•…éšœåˆå§‹åŒ–å™¨ä¸­å†™å…¥returnnilï¼Œä»¥æŒ‡ç¤ºå¯ä»¥è§¦å‘åˆå§‹åŒ–å¤±è´¥çš„ç‚¹ã€‚ æ³¨æ„ ä¸¥æ ¼æ¥è¯´ï¼Œåˆå§‹åŒ–å™¨ä¸ä¼šè¿”å›å€¼ã€‚ç›¸åï¼Œä»–ä»¬çš„ä½œç”¨æ˜¯ç¡®ä¿åœ¨åˆå§‹åŒ–ç»“æŸæ—¶å®Œå…¨æ­£ç¡®åœ°åˆå§‹åŒ–selfã€‚è™½ç„¶æ‚¨å†™returnnilä»¥è§¦å‘åˆå§‹åŒ–å¤±è´¥ï¼Œä½†æ‚¨ä¸ä¼šä½¿ç”¨returnå…³é”®å­—æ¥æŒ‡ç¤ºåˆå§‹åŒ–æˆåŠŸã€‚ ä¾‹å¦‚ï¼Œä¸ºæ•°å­—ç±»å‹è½¬æ¢å®ç°äº†æ•…éšœåˆå§‹åŒ–å™¨ã€‚ä¸ºäº†ç¡®ä¿æ•°å­—ç±»å‹ä¹‹é—´çš„è½¬æ¢å‡†ç¡®ä¿æŒè¯¥å€¼ï¼Œè¯·ä½¿ç”¨init(exactly:)åˆå§‹åŒ–å™¨ã€‚å¦‚æœç±»å‹è½¬æ¢æ— æ³•ç»´æŠ¤è¯¥å€¼ï¼Œåˆå§‹åŒ–å™¨å°†å¤±è´¥ã€‚ let wholeNumber: Double &#x3D; 12345.0 let pi &#x3D; 3.14159 if let valueMaintained &#x3D; Int(exactly: wholeNumber) { â€‹ print(â€œ(wholeNumber) conversion to Int maintains value of (valueMaintained)â€) } &#x2F;&#x2F; Prints â€œ12345.0 conversion to Int maintains value of 12345â€ let valueChanged &#x3D; Int(exactly: pi) &#x2F;&#x2F; valueChanged is of type Int?, not Int if valueChanged &#x3D;&#x3D; nil { â€‹ print(â€œ(pi) conversion to Int doesnâ€™t maintain valueâ€) } &#x2F;&#x2F; Prints â€œ3.14159 conversion to Int doesnâ€™t maintain valueâ€ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºAnimalçš„ç»“æ„ï¼Œå…¶å¸¸é‡Stringå±æ€§ç§°ä¸ºspeciesã€‚Animalç»“æ„è¿˜å®šä¹‰äº†ä¸€ä¸ªå…·æœ‰ç§°ä¸ºspeciesçš„å•ä¸ªå‚æ•°çš„æ•…éšœåˆå§‹åŒ–å™¨ã€‚æ­¤åˆå§‹åŒ–å™¨æ£€æŸ¥ä¼ é€’ç»™åˆå§‹åŒ–å™¨çš„specieså€¼æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²ã€‚å¦‚æœæ‰¾åˆ°ç©ºå­—ç¬¦ä¸²ï¼Œåˆ™è§¦å‘åˆå§‹åŒ–å¤±è´¥ã€‚å¦åˆ™ï¼Œå°†è®¾ç½®specieså±æ€§çš„å€¼ï¼Œåˆå§‹åŒ–æˆåŠŸï¼š struct Animal { â€‹ let species: String â€‹ init?(species: String) { â€‹ if species.isEmpty { return nil } â€‹ self.species &#x3D; species â€‹ } } æ‚¨å¯ä»¥ä½¿ç”¨æ­¤æ•…éšœåˆå§‹åŒ–å™¨å°è¯•åˆå§‹åŒ–æ–°çš„Animalå®ä¾‹ï¼Œå¹¶æ£€æŸ¥åˆå§‹åŒ–æ˜¯å¦æˆåŠŸï¼š let someCreature &#x3D; Animal(species: â€œGiraffeâ€) &#x2F;&#x2F; someCreature is of type Animal?, not Animal if let giraffe &#x3D; someCreature { â€‹ print(â€œAn animal was initialized with a species of (giraffe.species)â€) } &#x2F;&#x2F; Prints â€œAn animal was initialized with a species of Giraffeâ€ å¦‚æœæ‚¨å°†ç©ºå­—ç¬¦ä¸²å€¼ä¼ é€’ç»™å¯æ•…éšœåˆå§‹åŒ–å™¨çš„specieså‚æ•°ï¼Œåˆå§‹åŒ–å™¨å°†è§¦å‘åˆå§‹åŒ–å¤±è´¥ï¼š let anonymousCreature &#x3D; Animal(species: â€œâ€) &#x2F;&#x2F; anonymousCreature is of type Animal?, not Animal if anonymousCreature &#x3D;&#x3D; nil { â€‹ print(â€œThe anonymous creature couldnâ€™t be initializedâ€) } &#x2F;&#x2F; Prints â€œThe anonymous creature couldnâ€™t be initializedâ€ æ³¨æ„ æ£€æŸ¥ç©ºå­—ç¬¦ä¸²å€¼ï¼ˆå¦‚&quot;&quot;è€Œä¸æ˜¯&quot;Giraffe&quot;ä¸æ£€æŸ¥nilä»¥æŒ‡ç¤ºæ²¡æœ‰å¯é€‰Stringå€¼ä¸åŒã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œç©ºå­—ç¬¦ä¸²ï¼ˆâ€œâ€ï¼‰æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ã€éå¯é€‰çš„Stringã€‚ç„¶è€Œï¼ŒåŠ¨ç‰©ç”¨ç©ºå­—ç¬¦ä¸²ä½œä¸ºå…¶specieså±æ€§çš„å€¼æ˜¯ä¸åˆé€‚çš„ã€‚è¦æ¨¡æ‹Ÿæ­¤é™åˆ¶ï¼Œå¦‚æœæ‰¾åˆ°ç©ºå­—ç¬¦ä¸²ï¼Œåˆ™æ•…éšœåˆå§‹åŒ–å™¨å°†è§¦å‘åˆå§‹åŒ–å¤±è´¥ã€‚ æšä¸¾çš„å¤±è´¥åˆå§‹åŒ–å™¨æ‚¨å¯ä»¥ä½¿ç”¨æ•…éšœåˆå§‹åŒ–å™¨æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°é€‰æ‹©é€‚å½“çš„æšä¸¾æƒ…å†µã€‚å¦‚æœæä¾›çš„å‚æ•°ä¸é€‚å½“çš„æšä¸¾æƒ…å†µä¸åŒ¹é…ï¼Œåˆå§‹åŒ–å™¨å¯èƒ½ä¼šå¤±è´¥ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºTemperatureUnitæšä¸¾ï¼Œå…·æœ‰ä¸‰ç§å¯èƒ½çš„çŠ¶æ€ï¼ˆkelvinã€æ‘„æ°åº¦å’Œfahrenheitï¼‰ã€‚æ•…éšœåˆå§‹åŒ–å™¨ç”¨äºä¸ºè¡¨ç¤ºæ¸©åº¦ç¬¦å·çš„Characterå€¼æ‰¾åˆ°é€‚å½“çš„æšä¸¾æƒ…å†µï¼š enum TemperatureUnit { â€‹ case kelvin, celsius, fahrenheit â€‹ init?(symbol: Character) { â€‹ switch symbol { â€‹ case â€œKâ€: â€‹ self &#x3D; .kelvin â€‹ case â€œCâ€: â€‹ self &#x3D; .celsius â€‹ case â€œFâ€: â€‹ self &#x3D; .fahrenheit â€‹ default: â€‹ return nil â€‹ } â€‹ } } æ‚¨å¯ä»¥ä½¿ç”¨æ­¤æ•…éšœåˆå§‹åŒ–å™¨ä¸ºä¸‰ç§å¯èƒ½çš„çŠ¶æ€é€‰æ‹©é€‚å½“çš„æšä¸¾æƒ…å†µï¼Œå¦‚æœå‚æ•°ä¸ä»¥ä¸‹çŠ¶æ€ä¹‹ä¸€ä¸åŒ¹é…ï¼Œåˆ™å¯¼è‡´åˆå§‹åŒ–å¤±è´¥ï¼š let fahrenheitUnit &#x3D; TemperatureUnit(symbol: â€œFâ€) if fahrenheitUnit !&#x3D; nil { â€‹ print(â€œThis is a defined temperature unit, so initialization succeeded.â€) } &#x2F;&#x2F; Prints â€œThis is a defined temperature unit, so initialization succeeded.â€ let unknownUnit &#x3D; TemperatureUnit(symbol: â€œXâ€) if unknownUnit &#x3D;&#x3D; nil { â€‹ print(â€œThis isnâ€™t a defined temperature unit, so initialization failed.â€) } &#x2F;&#x2F; Prints â€œThis isnâ€™t a defined temperature unit, so initialization failed.â€ å…·æœ‰åŸå§‹å€¼çš„æšä¸¾çš„å¤±è´¥åˆå§‹åŒ–å™¨å…·æœ‰åŸå§‹å€¼çš„æšä¸¾ä¼šè‡ªåŠ¨æ”¶åˆ°ä¸€ä¸ªå¤±è´¥çš„åˆå§‹åŒ–å™¨ï¼Œinit?(rawValue:)å®ƒæ¥å—ä¸€ä¸ªåä¸ºrawValueçš„é€‚å½“åŸå§‹å€¼ç±»å‹çš„å‚æ•°ï¼Œå¦‚æœæ‰¾åˆ°åŒ¹é…æšä¸¾æƒ…å†µï¼Œåˆ™é€‰æ‹©åŒ¹é…æšä¸¾æƒ…å†µï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…å€¼ï¼Œåˆ™è§¦å‘åˆå§‹åŒ–å¤±è´¥ã€‚ You can rewrite the TemperatureUnit example from above to use raw values of type Character and to take advantage of the init?(rawValue:) initializer: enum TemperatureUnit: Character { â€‹ case kelvin &#x3D; â€œKâ€, celsius &#x3D; â€œCâ€, fahrenheit &#x3D; â€œFâ€ } let fahrenheitUnit &#x3D; TemperatureUnit(rawValue: â€œFâ€) if fahrenheitUnit !&#x3D; nil { â€‹ print(â€œThis is a defined temperature unit, so initialization succeeded.â€) } &#x2F;&#x2F; Prints â€œThis is a defined temperature unit, so initialization succeeded.â€ let unknownUnit &#x3D; TemperatureUnit(rawValue: â€œXâ€) if unknownUnit &#x3D;&#x3D; nil { â€‹ print(â€œThis isnâ€™t a defined temperature unit, so initialization failed.â€) } &#x2F;&#x2F; Prints â€œThis isnâ€™t a defined temperature unit, so initialization failed.â€ åˆå§‹åŒ–å¤±è´¥çš„ä¼ æ’­ç±»ã€ç»“æ„æˆ–æšä¸¾çš„æ•…éšœåˆå§‹åŒ–å™¨å¯ä»¥å§”æ‰˜ç»™æ¥è‡ªåŒä¸€ç±»ã€ç»“æ„æˆ–æšä¸¾çš„å¦ä¸€ä¸ªæ•…éšœåˆå§‹åŒ–å™¨ã€‚åŒæ ·ï¼Œå­ç±»æ•…éšœåˆå§‹åŒ–å™¨æœ€å¤šå¯ä»¥å§”æ‰˜ç»™è¶…ç±»æ•…éšœåˆå§‹åŒ–å™¨ã€‚ æ— è®ºå“ªç§æƒ…å†µï¼Œå¦‚æœæ‚¨å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¼è‡´åˆå§‹åŒ–å¤±è´¥çš„åˆå§‹åŒ–å™¨ï¼Œæ•´ä¸ªåˆå§‹åŒ–è¿‡ç¨‹éƒ½ä¼šç«‹å³å¤±è´¥ï¼Œå¹¶ä¸”ä¸ä¼šæ‰§è¡Œè¿›ä¸€æ­¥çš„åˆå§‹åŒ–ä»£ç ã€‚ æ³¨æ„ æ•…éšœåˆå§‹åŒ–å™¨ä¹Ÿå¯ä»¥å§”æ‰˜ç»™ä¸å¯å¤±è´¥çš„åˆå§‹åŒ–å™¨ã€‚å¦‚æœæ‚¨éœ€è¦å°†æ½œåœ¨çš„å¤±è´¥çŠ¶æ€æ·»åŠ åˆ°ç°æœ‰åˆå§‹åŒ–è¿›ç¨‹ä¸­ï¼Œå¦åˆ™ä¸ä¼šå¤±è´¥ï¼Œè¯·ä½¿ç”¨æ­¤æ–¹æ³•ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºCartItem``Productå­ç±»ã€‚CartItemç±»ä¸ºåœ¨çº¿è´­ç‰©è½¦ä¸­çš„å•†å“å»ºæ¨¡ã€‚CartItemå¼•å…¥äº†ä¸€ä¸ªåä¸ºquantityçš„å­˜å‚¨å¸¸é‡å±æ€§ï¼Œå¹¶ç¡®ä¿è¯¥å±æ€§å§‹ç»ˆå…·æœ‰è‡³å°‘1çš„å€¼ï¼š class Product { â€‹ let name: String â€‹ init?(name: String) { â€‹ if name.isEmpty { return nil } â€‹ self.name &#x3D; name â€‹ } } class CartItem: Product { â€‹ let quantity: Int â€‹ init?(name: String, quantity: Int) { â€‹ if quantity &lt; 1 { return nil } â€‹ self.quantity &#x3D; quantity â€‹ super.init(name: name) â€‹ } } CartItemçš„æ•…éšœåˆå§‹åŒ–å™¨é¦–å…ˆéªŒè¯å®ƒæ˜¯å¦æ”¶åˆ°äº†1æˆ–æ›´å¤šquantityã€‚å¦‚æœquantityæ— æ•ˆï¼Œæ•´ä¸ªåˆå§‹åŒ–è¿‡ç¨‹å°†ç«‹å³å¤±è´¥ï¼Œå¹¶ä¸”ä¸ä¼šæ‰§è¡Œè¿›ä¸€æ­¥çš„åˆå§‹åŒ–ä»£ç ã€‚åŒæ ·ï¼ŒProductæ•…éšœåˆå§‹åŒ–å™¨ä¼šæ£€æŸ¥nameå€¼ï¼Œå¦‚æœnameæ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œåˆå§‹åŒ–è¿‡ç¨‹å°†ç«‹å³å¤±è´¥ã€‚ å¦‚æœæ‚¨åˆ›å»ºå…·æœ‰éç©ºåç§°ä¸”æ•°é‡ä¸º1æˆ–æ›´å¤šå†…å®¹çš„CartItemå®ä¾‹ï¼Œåˆå§‹åŒ–å°†æˆåŠŸï¼š if let twoSocks &#x3D; CartItem(name: â€œsockâ€, quantity: 2) { â€‹ print(â€œItem: (twoSocks.name), quantity: (twoSocks.quantity)â€) } &#x2F;&#x2F; Prints â€œItem: sock, quantity: 2â€ å¦‚æœæ‚¨å°è¯•åˆ›å»ºquantityä¸º0çš„CartItemå®ä¾‹ï¼ŒCartItemåˆå§‹åŒ–ç¨‹åºä¼šå¯¼è‡´åˆå§‹åŒ–å¤±è´¥ï¼š if let zeroShirts &#x3D; CartItem(name: â€œshirtâ€, quantity: 0) { â€‹ print(â€œItem: (zeroShirts.name), quantity: (zeroShirts.quantity)â€) } else { â€‹ print(â€œUnable to initialize zero shirtsâ€) } &#x2F;&#x2F; Prints â€œUnable to initialize zero shirtsâ€ åŒæ ·ï¼Œå¦‚æœæ‚¨å°è¯•åˆ›å»ºnameå€¼ä¸ºç©ºçš„CartItemå®ä¾‹ï¼Œè¶…ç±»Productåˆå§‹åŒ–å™¨ä¼šå¯¼è‡´åˆå§‹åŒ–å¤±è´¥ï¼š if let oneUnnamed &#x3D; CartItem(name: â€œâ€, quantity: 1) { â€‹ print(â€œItem: (oneUnnamed.name), quantity: (oneUnnamed.quantity)â€) } else { â€‹ print(â€œUnable to initialize one unnamed productâ€) } &#x2F;&#x2F; Prints â€œUnable to initialize one unnamed productâ€ è¦†ç›–å¤±è´¥çš„åˆå§‹åŒ–å™¨æ‚¨å¯ä»¥åƒä»»ä½•å…¶ä»–åˆå§‹åŒ–å™¨ä¸€æ ·ï¼Œåœ¨å­ç±»ä¸­è¦†ç›–è¶…ç±»æ•…éšœåˆå§‹åŒ–å™¨ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å­ç±»ä¸å¯å¤±è´¥åˆå§‹åŒ–å™¨è¦†ç›–è¶…ç±»æ•…éšœåˆå§‹åŒ–å™¨ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿå®šä¹‰åˆå§‹åŒ–ä¸èƒ½å¤±è´¥çš„å­ç±»ï¼Œå³ä½¿å…è®¸è¶…ç±»çš„åˆå§‹åŒ–å¤±è´¥ã€‚ è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨ä½¿ç”¨ä¸å¯å¤±è´¥çš„å­ç±»åˆå§‹åŒ–å™¨è¦†ç›–æ•…éšœçš„è¶…ç±»åˆå§‹åŒ–å™¨ï¼Œåˆ™å§”æ‰˜ç»™è¶…ç±»åˆå§‹åŒ–å™¨çš„å”¯ä¸€æ–¹æ³•æ˜¯å¼ºåˆ¶è§£å‹å¯æ•…éšœè¶…ç±»åˆå§‹åŒ–å™¨çš„ç»“æœã€‚ æ³¨æ„ æ‚¨å¯ä»¥ä½¿ç”¨ä¸å¯å¤±è´¥çš„åˆå§‹åŒ–å™¨è¦†ç›–æ•…éšœåˆå§‹åŒ–å™¨ï¼Œä½†ä¸èƒ½åè¿‡æ¥ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºDocumentçš„ç±»ã€‚è¯¥ç±»å»ºæ¨¡æ–‡æ¡£ï¼Œè¯¥æ–‡æ¡£å¯ä»¥ä½¿ç”¨éç©ºå­—ç¬¦ä¸²å€¼æˆ–nilçš„nameå±æ€§åˆå§‹åŒ–ï¼Œä½†ä¸èƒ½æ˜¯ç©ºå­—ç¬¦ä¸²ï¼š class Document { â€‹ var name: String? â€‹ &#x2F;&#x2F; this initializer creates a document with a nil name value â€‹ init() {} â€‹ &#x2F;&#x2F; this initializer creates a document with a nonempty name value â€‹ init?(name: String) { â€‹ if name.isEmpty { return nil } â€‹ self.name &#x3D; name â€‹ } } ä¸‹ä¸€ä¸ªç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºAutomaticallyNamedDocumentçš„Documentå­ç±»ã€‚AutomaticallyNamedDocumentå­ç±»è¦†ç›–äº†Documentå¼•å…¥çš„ä¸¤ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ã€‚å¦‚æœå®ä¾‹åœ¨æ²¡æœ‰åç§°çš„æƒ…å†µä¸‹åˆå§‹åŒ–ï¼Œæˆ–è€…å°†ç©ºå­—ç¬¦ä¸²ä¼ é€’ç»™init(name:)åˆå§‹åŒ–å™¨ï¼Œåˆ™è¿™äº›é‡å†™ç¡®ä¿AutomaticallyNamedDocumentå®ä¾‹çš„åˆå§‹nameå€¼ä¸º&quot;[Untitled]&quot;ï¼š class AutomaticallyNamedDocument: Document { â€‹ override init() { â€‹ super.init() â€‹ self.name &#x3D; â€œ[Untitled]â€ â€‹ } â€‹ override init(name: String) { â€‹ super.init() â€‹ if name.isEmpty { â€‹ self.name &#x3D; â€œ[Untitled]â€ â€‹ } else { â€‹ self.name &#x3D; name â€‹ } â€‹ } } The AutomaticallyNamedDocument overrides its superclassâ€™s failable init?(name:)initializer with a nonfailable init(name:) initializer. Because AutomaticallyNamedDocumentcopes with the empty string case in a different way than its superclass, its initializer doesnâ€™t need to fail, and so it provides a nonfailable version of the initializer instead. æ‚¨å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–å™¨ä¸­çš„å¼ºåˆ¶å±•å¼€ä»è¶…ç±»è°ƒç”¨æ•…éšœåˆå§‹åŒ–å™¨ï¼Œä½œä¸ºå­ç±»ä¸å¯å¤±è´¥åˆå§‹åŒ–å™¨å®ç°çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„UntitledDocumentå­ç±»æ€»æ˜¯å‘½åä¸º&quot;[Untitled]&quot;å¹¶åœ¨åˆå§‹åŒ–æœŸé—´ä½¿ç”¨å…¶è¶…ç±»çš„failableinitinit(name:)åˆå§‹åŒ–å™¨ã€‚ class UntitledDocument: Document { â€‹ override init() { â€‹ super.init(name: â€œ[Untitled]â€)! â€‹ } } åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä»¥ç©ºå­—ç¬¦ä¸²ä¸ºåç§°è°ƒç”¨è¶…ç±»çš„init(name:)åˆå§‹åŒ–å™¨ï¼Œå¼ºåˆ¶å±•å¼€æ“ä½œå°†å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ä½†æ˜¯ï¼Œç”±äºå®ƒæ˜¯ç”¨å­—ç¬¦ä¸²å¸¸é‡è°ƒç”¨çš„ï¼Œå› æ­¤æ‚¨å¯ä»¥çœ‹åˆ°åˆå§‹åŒ–å™¨ä¸ä¼šå¤±è´¥ï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ä¸ä¼šå‘ç”Ÿè¿è¡Œæ—¶é”™è¯¯ã€‚ itï¼åˆå§‹åŒ–å™¨å¤±è´¥æ‚¨é€šå¸¸å®šä¹‰ä¸€ä¸ªå¤±è´¥çš„åˆå§‹åŒ–å™¨ï¼Œé€šè¿‡initå…³é”®å­—ï¼ˆinit?ï¼‰åé¢æ”¾ç½®é—®å·æ¥åˆ›å»ºé€‚å½“ç±»å‹çš„å¯é€‰å®ä¾‹ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥å®šä¹‰ä¸€ä¸ªå¯æ•…éšœçš„åˆå§‹åŒ–å™¨ï¼Œè¯¥åˆå§‹åŒ–å™¨å¯ä»¥åˆ›å»ºé€‚å½“ç±»å‹çš„éšå¼æœªåŒ…è£…çš„å¯é€‰å®ä¾‹ã€‚é€šè¿‡initå…³é”®å­—ï¼ˆinit!ï¼‰åé¢æ”¾ç½®æ„Ÿå¹å·æ¥åšåˆ°è¿™ä¸€ç‚¹è€Œä¸æ˜¯é—®å·ã€‚ You can delegate from init? to init! and vice versa, and you can override init? with init! and vice versa. You can also delegate from init to init!, although doing so will trigger an assertion if the init! initializer causes initialization to fail. å¿…éœ€çš„åˆå§‹åŒ–å™¨åœ¨å®šä¹‰ç±»åˆå§‹åŒ–å™¨ä¹‹å‰å†™å…¥requiredä¿®é¥°ç¬¦ï¼Œä»¥æŒ‡ç¤ºç±»ä¸­çš„æ¯ä¸ªå­ç±»éƒ½å¿…é¡»å®ç°è¯¥åˆå§‹åŒ–å™¨ï¼š class SomeClass { â€‹ required init() { â€‹ &#x2F;&#x2F; initializer implementation goes here â€‹ } } æ‚¨è¿˜å¿…é¡»åœ¨æ¯ä¸ªå¿…éœ€åˆå§‹åŒ–å™¨å­ç±»å®ç°ä¹‹å‰ç¼–å†™requiredä¿®é¥°ç¬¦ï¼Œä»¥è¡¨æ˜åˆå§‹åŒ–å™¨è¦æ±‚é€‚ç”¨äºé“¾ä¸­çš„è¿›ä¸€æ­¥å­ç±»ã€‚åœ¨è¦†ç›–æ‰€éœ€çš„æŒ‡å®šåˆå§‹åŒ–å™¨æ—¶ï¼Œæ‚¨ä¸ä¼šç¼–å†™overrideä¿®é¥°ç¬¦ï¼š class SomeSubclass: SomeClass { â€‹ required init() { â€‹ &#x2F;&#x2F; subclass implementation of the required initializer goes here â€‹ } } æ³¨æ„ å¦‚æœæ‚¨èƒ½å¤Ÿç”¨ç»§æ‰¿çš„åˆå§‹åŒ–å™¨æ»¡è¶³è¦æ±‚ï¼Œåˆ™ä¸å¿…æä¾›æ‰€éœ€åˆå§‹åŒ–å™¨çš„æ˜¾å¼å®ç°ã€‚ ä½¿ç”¨é—­åŒ…æˆ–å‡½æ•°è®¾ç½®é»˜è®¤å±æ€§å€¼å¦‚æœå­˜å‚¨å±æ€§çš„é»˜è®¤å€¼éœ€è¦ä¸€äº›è‡ªå®šä¹‰æˆ–è®¾ç½®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é—­åŒ…æˆ–å…¨å±€å‡½æ•°ä¸ºè¯¥å±æ€§æä¾›è‡ªå®šä¹‰é»˜è®¤å€¼ã€‚æ¯å½“åˆå§‹åŒ–å±æ€§æ‰€å±ç±»å‹çš„æ–°å®ä¾‹æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨é—­åŒ…æˆ–å‡½æ•°ï¼Œå¹¶å°†å…¶è¿”å›å€¼åˆ†é…ä¸ºå±æ€§çš„é»˜è®¤å€¼ã€‚ è¿™äº›ç±»å‹çš„é—­åŒ…æˆ–å‡½æ•°é€šå¸¸ä¼šåˆ›å»ºä¸€ä¸ªä¸å±æ€§ç±»å‹ç›¸åŒçš„ä¸´æ—¶å€¼ï¼Œå®šåˆ¶è¯¥å€¼ä»¥è¡¨ç¤ºæ‰€éœ€çš„åˆå§‹çŠ¶æ€ï¼Œç„¶åè¿”å›è¯¥ä¸´æ—¶å€¼ä½œä¸ºå±æ€§çš„é»˜è®¤å€¼ã€‚ ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨é—­åŒ…æ¥æä¾›é»˜è®¤å±æ€§å€¼çš„éª¨æ¶å¤§çº²ï¼š class SomeClass { â€‹ let someProperty: SomeType &#x3D; { â€‹ &#x2F;&#x2F; create a default value for someProperty inside this closure â€‹ &#x2F;&#x2F; someValue must be of the same type as SomeType â€‹ return someValue â€‹ }() } è¯·æ³¨æ„ï¼Œé—­åˆçš„æœ«ç«¯èŠ±æ‹¬å·åé¢æ˜¯ä¸€å¯¹ç©ºæ‹¬å·ã€‚è¿™å‘Šè¯‰Swiftç«‹å³æ‰§è¡Œå…³é—­ã€‚å¦‚æœæ‚¨çœç•¥è¿™äº›æ‹¬å·ï¼Œæ‚¨å°†å°è¯•å°†é—­åŒ…æœ¬èº«åˆ†é…ç»™å±æ€§ï¼Œè€Œä¸æ˜¯é—­åŒ…çš„è¿”å›å€¼ã€‚ æ³¨æ„ å¦‚æœæ‚¨ä½¿ç”¨é—­åŒ…åˆå§‹åŒ–å±æ€§ï¼Œè¯·è®°ä½ï¼Œåœ¨æ‰§è¡Œé—­åŒ…æ—¶ï¼Œå®ä¾‹çš„å…¶ä½™éƒ¨åˆ†å°šæœªåˆå§‹åŒ–ã€‚è¿™æ„å‘³ç€æ‚¨æ— æ³•ä»é—­åŒ…ä¸­è®¿é—®ä»»ä½•å…¶ä»–å±æ€§å€¼ï¼Œå³ä½¿è¿™äº›å±æ€§å…·æœ‰é»˜è®¤å€¼ã€‚æ‚¨ä¹Ÿä¸èƒ½ä½¿ç”¨éšå¼selfå±æ€§ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨å®ä¾‹çš„ä»»ä½•æ–¹æ³•ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºChessboardç»“æ„ï¼Œè¯¥ç»“æ„ä¸ºå›½é™…è±¡æ£‹æ¸¸æˆå»ºæ¨¡ã€‚å›½é™…è±¡æ£‹åœ¨8 x 8æ£‹ç›˜ä¸Šè¿›è¡Œï¼Œé»‘ç™½æ–¹å—äº¤æ›¿è¿›è¡Œã€‚ ä¸ºäº†è¡¨ç¤ºè¿™ä¸ªæ¸¸æˆæ¿ï¼ŒChessboardç»“æ„æœ‰ä¸€ä¸ªåä¸ºboardColorså•ä¸€å±æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªç”±64ä¸ªBoolå€¼ç»„æˆçš„æ•°ç»„ã€‚æ•°ç»„ä¸­çš„trueå€¼è¡¨ç¤ºé»‘è‰²æ­£æ–¹å½¢ï¼Œfalseå€¼è¡¨ç¤ºç™½è‰²æ­£æ–¹å½¢ã€‚æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªé¡¹ç›®è¡¨ç¤ºæ¿ä¸Šçš„å·¦ä¸Šè§’æ­£æ–¹å½¢ï¼Œæ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªé¡¹è¡¨ç¤ºæ¿ä¸Šçš„å³ä¸‹è§’æ­£æ–¹å½¢ã€‚ boardColorsæ•°ç»„ä½¿ç”¨é—­åŒ…åˆå§‹åŒ–ï¼Œä»¥è®¾ç½®å…¶é¢œè‰²å€¼ï¼š struct Chessboard { â€‹ let boardColors: [Bool] &#x3D; { â€‹ var temporaryBoard: [Bool] &#x3D; [] â€‹ var isBlack &#x3D; false â€‹ for i in 1â€¦8 { â€‹ for j in 1â€¦8 { â€‹ temporaryBoard.append(isBlack) â€‹ isBlack &#x3D; !isBlack â€‹ } â€‹ isBlack &#x3D; !isBlack â€‹ } â€‹ return temporaryBoard â€‹ }() â€‹ func squareIsBlackAt(row: Int, column: Int) -&gt; Bool { â€‹ return boardColors[(row * 8) + column] â€‹ } } æ¯å½“åˆ›å»ºæ–°çš„Chessboardå®ä¾‹æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œé—­åŒ…ï¼Œå¹¶è®¡ç®—å¹¶è¿”å›boardColorsé»˜è®¤å€¼ã€‚ä¸Šé¢ç¤ºä¾‹ä¸­çš„é—­åŒ…è®¡ç®—å¹¶è®¾ç½®åä¸ºtemporaryBoardæ¿ä¸Šçš„æ¯ä¸ªæ­£æ–¹å½¢çš„é€‚å½“é¢œè‰²ï¼Œå¹¶åœ¨è®¾ç½®å®Œæˆåå°†è¯¥ä¸´æ—¶æ•°ç»„ä½œä¸ºé—­åŒ…çš„è¿”å›å€¼ã€‚è¿”å›çš„æ•°ç»„å€¼å­˜å‚¨åœ¨boardColorsï¼Œå¯ä»¥ä½¿ç”¨squareIsBlackAt(row:column:)å®ç”¨ç¨‹åºå‡½æ•°æŸ¥è¯¢ï¼š let board &#x3D; Chessboard() print(board.squareIsBlackAt(row: 0, column: 1)) &#x2F;&#x2F; Prints â€œtrueâ€ print(board.squareIsBlackAt(row: 7, column: 7)) &#x2F;&#x2F; Prints â€œfalseâ€","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ åŠŸèƒ½(Functions)","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-åŠŸèƒ½","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-åŠŸèƒ½/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%8A%9F%E8%83%BD/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Functions.html å‡½æ•°æ˜¯æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„è‡ªåŒ…å«çš„ä»£ç å—ã€‚æ‚¨ç»™å‡½æ•°ä¸€ä¸ªåç§°æ¥æ ‡è¯†å®ƒçš„ä½œç”¨ï¼Œè¯¥åç§°ç”¨äºåœ¨éœ€è¦æ—¶â€œè°ƒç”¨â€è¯¥å‡½æ•°ä»¥æ‰§è¡Œå…¶ä»»åŠ¡ã€‚ Swiftçš„ç»Ÿä¸€å‡½æ•°è¯­æ³•è¶³å¤Ÿçµæ´»ï¼Œå¯ä»¥è¡¨è¾¾ä»»ä½•ä¸œè¥¿ï¼Œä»æ²¡æœ‰å‚æ•°åç§°çš„ç®€å•Cå‹å‡½æ•°åˆ°å¸¦æœ‰æ¯ä¸ªå‚æ•°åç§°å’Œå‚æ•°æ ‡ç­¾çš„å¤æ‚Objective-Cé£æ ¼æ–¹æ³•ã€‚å‚æ•°å¯ä»¥æä¾›é»˜è®¤å€¼æ¥ç®€åŒ–å‡½æ•°è°ƒç”¨ï¼Œå¹¶ä¸”å¯ä»¥ä½œä¸ºè¾“å…¥è¾“å‡ºå‚æ•°ä¼ é€’ï¼Œè¿™äº›å‚æ•°åœ¨å‡½æ•°å®Œæˆæ‰§è¡Œåä¿®æ”¹ä¼ é€’çš„å˜é‡ã€‚ Swiftä¸­çš„æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼Œç”±å‡½æ•°çš„å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ç»„æˆã€‚æ‚¨å¯ä»¥åƒ Swift ä¸­çš„ä»»ä½•å…¶ä»–ç±»å‹ä¸€æ ·ä½¿ç”¨æ­¤ç±»å‹ï¼Œè¿™æ ·å¯ä»¥è½»æ¾åœ°å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œå¹¶ä»å‡½æ•°è¿”å›å‡½æ•°ã€‚å‡½æ•°ä¹Ÿå¯ä»¥å†™å…¥å…¶ä»–å‡½æ•°ï¼Œä»¥å°è£…åµŒå¥—å‡½æ•°èŒƒå›´å†…çš„æœ‰ç”¨åŠŸèƒ½ã€‚ å®šä¹‰å’Œè°ƒç”¨å‡½æ•°å½“æ‚¨å®šä¹‰å‡½æ•°æ—¶ï¼Œæ‚¨å¯ä»¥é€‰æ‹©å®šä¹‰å‡½æ•°ä½œä¸ºè¾“å…¥çš„ä¸€ä¸ªæˆ–å¤šä¸ªå‘½åç±»å‹å€¼ï¼Œç§°ä¸ºå‚æ•°ã€‚æ‚¨è¿˜å¯ä»¥é€‰æ‹©å®šä¹‰ä¸€ç§å€¼ç±»å‹ï¼Œè¯¥å‡½æ•°å°†åœ¨å®Œæˆåä½œä¸ºè¾“å‡ºä¼ é€’å›ï¼Œç§°ä¸ºå…¶è¿”å›ç±»å‹ã€‚ æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå‡½æ•°åï¼Œè¯¥å‡½æ•°åæè¿°äº†å‡½æ•°æ‰§è¡Œçš„ä»»åŠ¡ã€‚è¦ä½¿ç”¨å‡½æ•°ï¼Œæ‚¨å¯ä»¥â€œè°ƒç”¨â€è¯¥å‡½æ•°åŠå…¶åç§°ï¼Œå¹¶å°†å…¶ä¼ é€’ä¸å‡½æ•°å‚æ•°ç±»å‹åŒ¹é…çš„è¾“å…¥å€¼ï¼ˆç§°ä¸ºå‚æ•°ï¼‰ã€‚å‡½æ•°çš„å‚æ•°å¿…é¡»å§‹ç»ˆä»¥ä¸å‡½æ•°å‚æ•°åˆ—è¡¨ç›¸åŒçš„é¡ºåºæä¾›ã€‚ ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„å‡½æ•°ç§°ä¸ºgreet(person:)å› ä¸ºå®ƒå°±æ˜¯è¿™æ ·åšçš„â€”â€”å®ƒä»¥ä¸€ä¸ªäººçš„åå­—ä½œä¸ºè¾“å…¥ï¼Œå¹¶ä¸ºè¯¥äººè¿”å›é—®å€™è¯­ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ‚¨å®šä¹‰äº†ä¸€ä¸ªè¾“å…¥å‚æ•°â€”â€”ä¸€ä¸ªåä¸ºpersonçš„Stringå€¼â€”â€”å’Œä¸€ä¸ªè¿”å›ç±»å‹çš„Stringï¼Œå…¶ä¸­å°†åŒ…å«å¯¹è¯¥äººçš„é—®å€™è¯­ï¼š 1234func greet(person: String) -&gt; String &#123; let greeting = &quot;Hello, &quot; + person + &quot;!&quot; return greeting&#125; æ‰€æœ‰è¿™äº›ä¿¡æ¯éƒ½æ±‡æ€»åˆ°å‡½æ•°çš„å®šä¹‰ä¸­ï¼Œè¯¥å®šä¹‰å‰ç¼€ä¸ºfuncå…³é”®å­—ã€‚æ‚¨å¯ä»¥ä½¿ç”¨è¿”å›ç®­å¤´-&gt;ï¼ˆè¿å­—ç¬¦åè·Ÿç›´è§’æ‹¬å·ï¼‰æŒ‡ç¤ºå‡½æ•°çš„è¿”å›ç±»å‹ï¼Œåè·Ÿè¦è¿”å›çš„ç±»å‹åç§°ã€‚ å®šä¹‰æè¿°äº†å‡½æ•°åšä»€ä¹ˆï¼Œå®ƒå¸Œæœ›æ”¶åˆ°ä»€ä¹ˆï¼Œä»¥åŠå®ƒå®Œæˆåä¼šè¿”å›ä»€ä¹ˆã€‚è¯¥å®šä¹‰å¯ä»¥è½»æ¾åœ°ä»ä»£ç ä¸­çš„å…¶ä»–åœ°æ–¹æ˜ç¡®è°ƒç”¨è¯¥å‡½æ•°ï¼š 1234print(greet(person: &quot;Anna&quot;))// Prints &quot;Hello, Anna!&quot;print(greet(person: &quot;Brian&quot;))// Prints &quot;Hello, Brian!&quot; è°ƒç”¨â€™ greet(person:) â€˜å‡½æ•°çš„æ–¹æ³•æ˜¯åœ¨â€™ person â€˜å‚æ•°æ ‡ç­¾åç»™å®ƒä¼ é€’ä¸€ä¸ªâ€™ String â€˜å€¼ï¼Œä¾‹å¦‚â€™ greet(person: â€œAnnaâ€) â€˜ã€‚å› ä¸ºå‡½æ•°è¿”å›â€™ String â€˜å€¼ï¼Œæ‰€ä»¥å¯ä»¥è°ƒç”¨â€™ print(_:separator:terminator:) â€˜å‡½æ•°æ¥åŒ…è£…â€™ greet(person:) â€˜ï¼Œä»¥æ‰“å°è¯¥å­—ç¬¦ä¸²å¹¶æŸ¥çœ‹å…¶è¿”å›å€¼ï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚ æ³¨æ„ print(_:separator:terminator:)å‡½æ•°æ²¡æœ‰ç¬¬ä¸€ä¸ªå‚æ•°çš„æ ‡ç­¾ï¼Œå…¶å…¶ä»–å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰é»˜è®¤å€¼ã€‚ä¸‹æ–‡åœ¨å‡½æ•°å‚æ•°æ ‡ç­¾å’Œå‚æ•°åç§°ä»¥åŠé»˜è®¤å‚æ•°å€¼ä¸­è®¨è®ºäº†å‡½æ•°è¯­æ³•çš„è¿™äº›å˜åŒ–ã€‚ greet(person:)å‡½æ•°çš„æ­£æ–‡ä»å®šä¹‰ä¸€ä¸ªåä¸ºgreetingçš„æ–°Stringå¸¸é‡å¹¶å°†å…¶è®¾ç½®ä¸ºç®€å•çš„é—®å€™æ¶ˆæ¯å¼€å§‹ã€‚ç„¶åï¼Œä½¿ç”¨returnå…³é”®å­—å°†æ­¤é—®å€™è¯­ä¼ å›å‡½æ•°ã€‚åœ¨æ˜¾ç¤ºreturngreetingçš„ä»£ç è¡Œä¸­ï¼Œè¯¥å‡½æ•°å®Œæˆå…¶æ‰§è¡Œå¹¶è¿”å›greetingçš„å½“å‰å€¼ã€‚ æ‚¨å¯ä»¥å¤šæ¬¡è°ƒç”¨greet(person:)å‡½æ•°ï¼Œè¾“å…¥å€¼ä¸åŒã€‚ä¸Šé¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚æœä½¿ç”¨&quot;Anna&quot;çš„è¾“å…¥å€¼å’Œ&quot;Brian&quot;çš„è¾“å…¥å€¼è°ƒç”¨ä¼šå‘ç”Ÿä»€ä¹ˆã€‚è¯¥åŠŸèƒ½åœ¨æ¯ç§æƒ…å†µä¸‹éƒ½ä¼šè¿”å›é‡èº«å®šåˆ¶çš„é—®å€™è¯­ã€‚ ä¸ºäº†ç¼©çŸ­æ­¤å‡½æ•°çš„ä¸»ä½“ï¼Œæ‚¨å¯ä»¥å°†æ¶ˆæ¯åˆ›å»ºå’Œè¿”å›è¯­å¥åˆå¹¶ä¸ºä¸€è¡Œï¼š 12345func greetAgain(person: String) -&gt; String &#123; return &quot;Hello again, &quot; + person + &quot;!&quot;&#125;print(greetAgain(person: &quot;Anna&quot;))// Prints &quot;Hello again, Anna!&quot; å‡½æ•°å‚æ•°å’Œè¿”å›å€¼åœ¨Swiftä¸­ï¼Œå‡½æ•°å‚æ•°å’Œè¿”å›å€¼éå¸¸çµæ´»ã€‚æ‚¨å¯ä»¥å®šä¹‰ä»»ä½•ä¸œè¥¿ï¼Œä»å…·æœ‰å•ä¸ªæœªå‘½åå‚æ•°çš„ç®€å•å®ç”¨ç¨‹åºå‡½æ•°åˆ°å…·æœ‰è¡¨è¾¾å¼å‚æ•°åç§°å’Œä¸åŒå‚æ•°é€‰é¡¹çš„å¤æ‚å‡½æ•°ã€‚ æ²¡æœ‰å‚æ•°çš„å‡½æ•°å®šä¹‰è¾“å…¥å‚æ•°ä¸éœ€è¦å‡½æ•°ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæ²¡æœ‰è¾“å…¥å‚æ•°çš„å‡½æ•°ï¼Œæ¯å½“è°ƒç”¨æ—¶ï¼Œå®ƒæ€»æ˜¯è¿”å›ç›¸åŒçš„Stringæ¶ˆæ¯ï¼š 12345func sayHelloWorld() -&gt; String &#123; return &quot;hello, world&quot;&#125;print(sayHelloWorld())// Prints &quot;hello, world&quot; å‡½æ•°å®šä¹‰ä»ç„¶éœ€è¦åœ¨å‡½æ•°åç§°åé¢åŠ ä¸Šæ‹¬å·ï¼Œå³ä½¿å®ƒä¸æ¥å—ä»»ä½•å‚æ•°ã€‚è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°ååé¢è¿˜æœ‰ä¸€å¯¹ç©ºæ‹¬å·ã€‚ å…·æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°å‡½æ•°å¯ä»¥æœ‰å¤šä¸ªè¾“å…¥å‚æ•°ï¼Œè¿™äº›å‚æ•°å†™åœ¨å‡½æ•°çš„æ‹¬å·ä¸­ï¼Œç”¨é€—å·åˆ†éš”ã€‚ æ­¤åŠŸèƒ½ä½¿ç”¨ä¸€ä¸ªäººçš„åå­—ä»¥åŠä»–ä»¬æ˜¯å¦å·²ç»è¢«é—®å€™ä½œä¸ºè¾“å…¥ï¼Œå¹¶ä¸ºè¯¥äººè¿”å›é€‚å½“çš„é—®å€™è¯­ï¼š 123456789func greet(person: String, alreadyGreeted: Bool) -&gt; String &#123; if alreadyGreeted &#123; return greetAgain(person: person) &#125; else &#123; return greet(person: person) &#125;&#125;print(greet(person: &quot;Tim&quot;, alreadyGreeted: true))// Prints &quot;Hello again, Tim!&quot; æ‚¨é€šè¿‡å°†æ ‡è®°ä¸ºpersonçš„Stringå‚æ•°å€¼å’Œåœ¨æ‹¬å·ä¸­æ ‡è®°ä¸ºgreedGreetedçš„Boolå‚æ•°å€¼ï¼Œç”¨é€—å·åˆ†éš”ï¼Œæ¥è°ƒç”¨ greet(person:alreadyGreeted:)å‡½æ•°ã€‚è¯·æ³¨æ„ï¼Œæ­¤å‡½æ•°ä¸å‰é¢ä¸€èŠ‚ä¸­æ˜¾ç¤ºçš„greet(person:)å‡½æ•°ä¸åŒã€‚è™½ç„¶è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æœ‰ä»¥greetå¼€å¤´çš„åå­—ï¼Œä½†greet(person:alreadyGreeted:)å‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä½†greet(person:)å‡½æ•°åªéœ€è¦ä¸€ä¸ªå‚æ•°ã€‚ æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°å®šä¹‰è¿”å›ç±»å‹ä¸éœ€è¦å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯greet(person:)å‡½æ•°çš„ç‰ˆæœ¬ï¼Œè¯¥å‡½æ•°æ‰“å°è‡ªå·±çš„Stringå€¼ï¼Œè€Œä¸æ˜¯è¿”å›å®ƒï¼š 12345func greet(person: String) &#123; print(&quot;Hello, \\(person)!&quot;)&#125;greet(person: &quot;Dave&quot;)// Prints &quot;Hello, Dave!&quot; ç”±äºå®ƒä¸éœ€è¦è¿”å›å€¼ï¼Œå‡½æ•°çš„å®šä¹‰ä¸åŒ…æ‹¬è¿”å›ç®­å¤´ï¼ˆ-&gt;ï¼‰æˆ–è¿”å›ç±»å‹ã€‚ æ³¨æ„ ä¸¥æ ¼æ¥è¯´ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„greet(person:)å‡½æ•°ä»ç„¶è¿”å›ä¸€ä¸ªå€¼ï¼Œå³ä½¿æ²¡æœ‰å®šä¹‰è¿”å›å€¼ã€‚æ²¡æœ‰å®šä¹‰è¿”å›ç±»å‹çš„å‡½æ•°è¿”å›ç±»å‹ä¸ºVoidçš„ç‰¹æ®Šå€¼ã€‚è¿™åªæ˜¯ä¸€ä¸ªç©ºå…ƒç»„ï¼Œå†™ä¸º() è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥å¿½ç•¥å…¶è¿”å›å€¼ï¼š 1234567891011func printAndCount(string: String) -&gt; Int &#123; print(string) return string.count&#125;func printWithoutCounting(string: String) &#123; let _ = printAndCount(string: string)&#125;printAndCount(string: &quot;hello, world&quot;)// prints &quot;hello, world&quot; and returns a value of 12printWithoutCounting(string: &quot;hello, world&quot;)// prints &quot;hello, world&quot; but doesn&#x27;t return a value ç¬¬ä¸€ä¸ªå‡½æ•°printAndCount(string:)æ‰“å°å­—ç¬¦ä¸²ï¼Œç„¶åå°†å…¶å­—ç¬¦è®¡æ•°è¿”å›ä¸ºIntã€‚ç¬¬äºŒä¸ªå‡½æ•°printWithoutCounting(string:)è°ƒç”¨ç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œä½†å¿½ç•¥äº†å…¶è¿”å›å€¼ã€‚å½“è°ƒç”¨ç¬¬äºŒä¸ªå‡½æ•°æ—¶ï¼Œæ¶ˆæ¯ä»ç„¶ç”±ç¬¬ä¸€ä¸ªå‡½æ•°æ‰“å°ï¼Œä½†è¿”å›çš„å€¼ä¸ä½¿ç”¨ã€‚ æ³¨æ„ è¿”å›å€¼å¯ä»¥å¿½ç•¥ï¼Œä½†è¡¨ç¤ºå°†è¿”å›å€¼çš„å‡½æ•°å¿…é¡»å§‹ç»ˆè¿™æ ·åšã€‚å…·æœ‰å®šä¹‰è¿”å›ç±»å‹çš„å‡½æ•°ä¸å…è®¸æ§ä»¶åœ¨ä¸è¿”å›å€¼çš„æƒ…å†µä¸‹ä»å‡½æ•°åº•éƒ¨æ‰å‡ºæ¥ï¼Œå°è¯•è¿™æ ·åšå°†å¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚ å…·æœ‰å¤šä¸ªè¿”å›å€¼çš„å‡½æ•°æ‚¨å¯ä»¥ä½¿ç”¨å…ƒç»„ç±»å‹ä½œä¸ºå‡½æ•°è¿”å›å¤šä¸ªå€¼ä½œä¸ºå¤åˆè¿”å›å€¼çš„ä¸€éƒ¨åˆ†çš„è¿”å›ç±»å‹ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºminMax(array:)çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨Intå€¼æ•°ç»„ä¸­æ‰¾åˆ°æœ€å°å’Œæœ€å¤§çš„æ•°å­—ï¼š 123456789101112func minMax(array: [Int]) -&gt; (min: Int, max: Int) &#123; var currentMin = array[0] var currentMax = array[0] for value in array[1..&lt;array.count] &#123; if value &lt; currentMin &#123; currentMin = value &#125; else if value &gt; currentMax &#123; currentMax = value &#125; &#125; return (currentMin, currentMax)&#125; minMax(array:)å‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªIntå€¼çš„å…ƒç»„ã€‚è¿™äº›å€¼è¢«æ ‡è®°ä¸ºminå’Œmaxï¼Œä»¥ä¾¿åœ¨æŸ¥è¯¢å‡½æ•°çš„è¿”å›å€¼æ—¶æŒ‰åç§°è®¿é—®ã€‚ minMax(array:)å‡½æ•°çš„ä¸»ä½“é¦–å…ˆå°†ä¸¤ä¸ªåä¸ºcurrentMinå’ŒcurrentMaxçš„å·¥ä½œå˜é‡è®¾ç½®ä¸ºæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæ•´æ•°çš„å€¼ã€‚ç„¶åï¼Œè¯¥å‡½æ•°è¿­ä»£æ•°ç»„ä¸­çš„å‰©ä½™å€¼ï¼Œå¹¶æ£€æŸ¥æ¯ä¸ªå€¼ï¼Œçœ‹çœ‹å®ƒåˆ†åˆ«å°äºæˆ–å¤§äºcurrentMinå’ŒcurrentMaxçš„å€¼ã€‚æœ€åï¼Œæ€»ä½“æœ€å°å€¼å’Œæœ€å¤§å€¼ä½œä¸ºä¸¤ä¸ªIntå€¼çš„å…ƒç»„è¿”å›ã€‚ ç”±äºå…ƒç»„çš„æˆå‘˜å€¼è¢«å‘½åä¸ºå‡½æ•°è¿”å›ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç‚¹è¯­æ³•è®¿é—®å®ƒä»¬ï¼Œä»¥æ£€ç´¢æ‰¾åˆ°çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼š 123let bounds = minMax(array: [8, -6, 2, 109, 3, 71])print(&quot;min is \\(bounds.min) and max is \\(bounds.max)&quot;)// Prints &quot;min is -6 and max is 109&quot; è¯·æ³¨æ„ï¼Œå…ƒç»„çš„æˆå‘˜ä¸éœ€è¦åœ¨ä»å‡½æ•°è¿”å›å…ƒç»„æ—¶å‘½åï¼Œå› ä¸ºå®ƒä»¬çš„åç§°å·²è¢«æŒ‡å®šä¸ºå‡½æ•°è¿”å›ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚ å¯é€‰çš„å…ƒç»„é€€è´§ç±»å‹å¦‚æœè¦ä»å‡½æ•°è¿”å›çš„å…ƒç»„ç±»å‹æœ‰å¯èƒ½å¯¹æ•´ä¸ªå…ƒç»„å…·æœ‰â€œæ— å€¼â€ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¯é€‰çš„å…ƒç»„è¿”å›ç±»å‹æ¥åæ˜ æ•´ä¸ªå…ƒç»„å¯ä»¥ä¸ºnilçš„äº‹å®ã€‚æ‚¨é€šè¿‡åœ¨å…ƒç»„ç±»å‹çš„ç»“æŸæ‹¬å·åæ”¾ç½®é—®å·æ¥ç¼–å†™å¯é€‰çš„å…ƒç»„è¿”å›ç±»å‹ï¼Œä¾‹å¦‚(Int,Int)?æˆ–è€…(String,Int,Bool)? æ³¨æ„ å¯é€‰å…ƒç»„ç±»å‹ï¼Œå¦‚(Int,Int)?ä¸åŒäºåŒ…å«å¯é€‰ç±»å‹çš„å…ƒç»„ï¼Œå¦‚(Int?,Int?)å¯¹äºå¯é€‰çš„å…ƒç»„ç±»å‹ï¼Œæ•´ä¸ªå…ƒç»„æ˜¯å¯é€‰çš„ï¼Œè€Œä¸ä»…ä»…æ˜¯å…ƒç»„ä¸­çš„æ¯ä¸ªå•ä¸ªå€¼ã€‚ ä¸Šé¢çš„minMax(array:)å‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªIntå€¼çš„å…ƒç»„ã€‚ç„¶è€Œï¼Œè¯¥åŠŸèƒ½ä¸ä¼šå¯¹ä¼ é€’çš„æ•°ç»„è¿›è¡Œä»»ä½•å®‰å…¨æ£€æŸ¥ã€‚å¦‚æœarrayç»„å‚æ•°åŒ…å«ç©ºæ•°ç»„ï¼Œåˆ™ä¸Šé¢å®šä¹‰çš„minMax(array:)å‡½æ•°å°†åœ¨å°è¯•è®¿é—®æ•°array[0]æ—¶è§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚ è¦å®‰å…¨åœ°å¤„ç†ç©ºæ•°ç»„ï¼Œè¯·ä½¿ç”¨å¯é€‰çš„å…ƒç»„è¿”å›ç±»å‹ç¼–å†™minMax(array:)å‡½æ•°ï¼Œå¹¶åœ¨æ•°ç»„ä¸ºç©ºæ—¶è¿”å›nilå€¼ï¼š 12345678910111213func minMax(array: [Int]) -&gt; (min: Int, max: Int)? &#123; if array.isEmpty &#123; return nil &#125; var currentMin = array[0] var currentMax = array[0] for value in array[1..&lt;array.count] &#123; if value &lt; currentMin &#123; currentMin = value &#125; else if value &gt; currentMax &#123; currentMax = value &#125; &#125; return (currentMin, currentMax)&#125; æ‚¨å¯ä»¥ä½¿ç”¨å¯é€‰ç»‘å®šæ¥æ£€æŸ¥æ­¤ç‰ˆæœ¬çš„minMax(array:)å‡½æ•°æ˜¯è¿”å›å®é™…å…ƒç»„å€¼è¿˜æ˜¯nilï¼š 1234if let bounds = minMax(array: [8, -6, 2, 109, 3, 71]) &#123; print(&quot;min is \\(bounds.min) and max is \\(bounds.max)&quot;)&#125;// Prints &quot;min is -6 and max is 109&quot; å…·æœ‰éšå¼è¿”å›çš„å‡½æ•°å¦‚æœå‡½æ•°çš„æ•´ä¸ªä¸»ä½“éƒ½æ˜¯å•ä¸ªè¡¨è¾¾å¼ï¼Œåˆ™å‡½æ•°éšå¼è¿”å›è¯¥è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°éƒ½æœ‰ç›¸åŒçš„è¡Œä¸ºï¼š 1234567891011func greeting(for person: String) -&gt; String &#123; &quot;Hello, &quot; + person + &quot;!&quot;&#125;print(greeting(for: &quot;Dave&quot;))// Prints &quot;Hello, Dave!&quot;func anotherGreeting(for person: String) -&gt; String &#123; return &quot;Hello, &quot; + person + &quot;!&quot;&#125;print(anotherGreeting(for: &quot;Dave&quot;))// Prints &quot;Hello, Dave!&quot; greeting(for:)å‡½æ•°çš„æ•´ä¸ªå®šä¹‰æ˜¯å®ƒè¿”å›çš„é—®å€™ä¿¡æ¯ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥ä½¿ç”¨è¿™ç§è¾ƒçŸ­çš„å½¢å¼ã€‚anotherGreeting(for:)å‡½æ•°è¿”å›ç›¸åŒçš„é—®å€™ä¿¡æ¯ï¼Œåƒä½¿ç”¨è¾ƒé•¿çš„å‡½æ•°ä¸€æ ·ä½¿ç”¨returnå…³é”®å­—ã€‚æ‚¨ä»…å†™ä¸ºä¸€æ¡returnè¡Œçš„ä»»ä½•å‡½æ•°éƒ½å¯ä»¥çœç•¥returnã€‚ æ­£å¦‚æ‚¨åœ¨é€Ÿè®°è·å–å£°æ˜ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œå±æ€§è·å–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨éšå¼è¿”å›ã€‚ æ³¨æ„ æ‚¨å†™å…¥çš„éšå¼è¿”å›å€¼çš„ä»£ç éœ€è¦è¿”å›ä¸€äº›å€¼ã€‚ä¾‹å¦‚ï¼Œæ‚¨ä¸èƒ½ä½¿ç”¨print(13)ä½œä¸ºéšå¼è¿”å›å€¼ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ°¸è¿œä¸ä¼šè¿”å› likefatalErrorfatalError(&quot;Ohno!&quot;)å‡½æ•°ä½œä¸ºéšå¼è¿”å›å€¼ï¼Œå› ä¸ºSwiftçŸ¥é“éšå¼è¿”å›ä¸ä¼šå‘ç”Ÿã€‚ å‡½æ•°å‚æ•°æ ‡ç­¾å’Œå‚æ•°åç§°æ¯ä¸ªå‡½æ•°å‚æ•°éƒ½æœ‰ä¸€ä¸ªå‚æ•°æ ‡ç­¾å’Œä¸€ä¸ªå‚æ•°åç§°ã€‚è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨å‚æ•°æ ‡ç­¾ï¼›æ¯ä¸ªå‚æ•°éƒ½å†™åœ¨å‡½æ•°è°ƒç”¨ä¸­ï¼Œå‰é¢æœ‰å‚æ•°æ ‡ç­¾ã€‚å‚æ•°åç§°ç”¨äºå®ç°å‡½æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå‚æ•°ä½¿ç”¨å…¶å‚æ•°åç§°ä½œä¸ºå‚æ•°æ ‡ç­¾ã€‚ 12345func someFunction(firstParameterName: Int, secondParameterName: Int) &#123; // In the function body, firstParameterName and secondParameterName // refer to the argument values for the first and second parameters.&#125;someFunction(firstParameterName: 1, secondParameterName: 2) æ‰€æœ‰å‚æ•°éƒ½å¿…é¡»æœ‰å”¯ä¸€çš„åç§°ã€‚è™½ç„¶å¤šä¸ªå‚æ•°å¯èƒ½å…·æœ‰ç›¸åŒçš„å‚æ•°æ ‡ç­¾ï¼Œä½†å”¯ä¸€çš„å‚æ•°æ ‡ç­¾æœ‰åŠ©äºä½¿æ‚¨çš„ä»£ç æ›´å…·å¯è¯»æ€§ã€‚ æŒ‡å®šå‚æ•°æ ‡ç­¾æ‚¨åœ¨å‚æ•°åç§°ä¹‹å‰å†™ä¸€ä¸ªå‚æ•°æ ‡ç­¾ï¼Œç”¨ç©ºæ ¼åˆ†éš”ï¼š 1234func someFunction(argumentLabel parameterName: Int) &#123; // In the function body, parameterName refers to the argument value // for that parameter.&#125; ä»¥ä¸‹æ˜¯greet(person:)åŠŸèƒ½çš„å˜ä½“ï¼Œè¯¥å‡½æ•°é‡‡ç”¨ä¸€ä¸ªäººçš„åå­—å’Œå®¶ä¹¡ï¼Œå¹¶è¿”å›é—®å€™è¯­ï¼š 12345func greet(person: String, from hometown: String) -&gt; String &#123; return &quot;Hello \\(person)! Glad you could visit from \\(hometown).&quot;&#125;print(greet(person: &quot;Bill&quot;, from: &quot;Cupertino&quot;))// Prints &quot;Hello Bill! Glad you could visit from Cupertino.&quot; ä½¿ç”¨å‚æ•°æ ‡ç­¾å¯ä»¥å…è®¸ä»¥è¡¨è¾¾å¼ã€ç±»ä¼¼å¥å­çš„æ–¹å¼è°ƒç”¨å‡½æ•°ï¼ŒåŒæ—¶ä»ç„¶æä¾›å¯è¯»ä¸”æ„å›¾æ¸…æ™°çš„å‡½æ•°ä½“ã€‚ çœç•¥å‚æ•°æ ‡ç­¾å¦‚æœæ‚¨ä¸æƒ³è¦å‚æ•°çš„å‚æ•°æ ‡ç­¾ï¼Œè¯·ä¸ºè¯¥å‚æ•°å†™ä¸€ä¸ªä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ï¼Œè€Œä¸æ˜¯æ˜¾å¼å‚æ•°æ ‡ç­¾ã€‚ 12345func someFunction(_ firstParameterName: Int, secondParameterName: Int) &#123; // In the function body, firstParameterName and secondParameterName // refer to the argument values for the first and second parameters.&#125;someFunction(1, secondParameterName: 2) å¦‚æœå‚æ•°æœ‰å‚æ•°æ ‡ç­¾ï¼Œåˆ™åœ¨è°ƒç”¨å‡½æ•°æ—¶å¿…é¡»æ ‡è®°å‚æ•°ã€‚ é»˜è®¤å‚æ•°å€¼æ‚¨å¯ä»¥é€šè¿‡åœ¨è¯¥å‚æ•°ç±»å‹ä¹‹åä¸ºå‚æ•°åˆ†é…å€¼æ¥å®šä¹‰å‡½æ•°ä¸­ä»»ä½•å‚æ•°çš„é»˜è®¤å€¼ã€‚å¦‚æœå®šä¹‰äº†é»˜è®¤å€¼ï¼Œæ‚¨å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶çœç•¥è¯¥å‚æ•°ã€‚ 123456func someFunction(parameterWithoutDefault: Int, parameterWithDefault: Int = 12) &#123; // If you omit the second argument when calling this function, then // the value of parameterWithDefault is 12 inside the function body.&#125;someFunction(parameterWithoutDefault: 3, parameterWithDefault: 6) // parameterWithDefault is 6someFunction(parameterWithoutDefault: 4) // parameterWithDefault is 12 å°†æ²¡æœ‰é»˜è®¤å€¼çš„å‚æ•°æ”¾åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨çš„å¼€å¤´ï¼Œæ”¾åœ¨å…·æœ‰é»˜è®¤å€¼çš„å‚æ•°ä¹‹å‰ã€‚å¦‚æœæ²¡æœ‰é»˜è®¤å€¼çš„å‚æ•°é€šå¸¸å¯¹å‡½æ•°çš„å«ä¹‰æ›´é‡è¦â€”â€”é¦–å…ˆå†™å…¥å®ƒä»¬å¯ä»¥æ›´å®¹æ˜“è¯†åˆ«æ­£åœ¨è°ƒç”¨ç›¸åŒçš„å‡½æ•°ï¼Œæ— è®ºæ˜¯å¦çœç•¥ä»»ä½•é»˜è®¤å‚æ•°ã€‚ å˜é‡å‚æ•°å˜å‚æ•°æ¥å—æŒ‡å®šç±»å‹çš„é›¶ä¸ªæˆ–å¤šä¸ªå€¼ã€‚æ‚¨ä½¿ç”¨å˜å¼‚å‚æ•°æ¥æŒ‡å®šåœ¨è°ƒç”¨å‡½æ•°æ—¶å¯ä»¥ä¼ é€’ä¸åŒæ•°é‡çš„è¾“å…¥å€¼ã€‚é€šè¿‡åœ¨å‚æ•°çš„ç±»å‹åç§°åæ’å…¥ä¸‰ä¸ªå¥å·å­—ç¬¦ï¼ˆ...ï¼‰æ¥ç¼–å†™å˜é‡å‚æ•°ã€‚ ä¼ é€’ç»™å˜é‡å‚æ•°çš„å€¼ä½œä¸ºé€‚å½“ç±»å‹çš„æ•°ç»„åœ¨å‡½æ•°çš„ä¸»ä½“å†…æä¾›ã€‚ä¾‹å¦‚ï¼Œå…·æœ‰numbersåç§°å’ŒDouble...ç±»å‹çš„å˜é‡å‚æ•°åœ¨å‡½æ•°çš„ä¸»ä½“ä¸­ä½œä¸ºç§°ä¸ºç±»å‹[Double]``numbersçš„å¸¸æ•°æ•°ç»„æä¾›ã€‚ ä»¥ä¸‹ç¤ºä¾‹è®¡ç®—äº†ä»»ä½•é•¿åº¦çš„æ•°å­—åˆ—è¡¨çš„ç®—æœ¯å¹³å‡å€¼ï¼ˆä¹Ÿç§°ä¸ºå¹³å‡å€¼ï¼‰ï¼š 1234567891011func arithmeticMean(_ numbers: Double...) -&gt; Double &#123; var total: Double = 0 for number in numbers &#123; total += number &#125; return total / Double(numbers.count)&#125;arithmeticMean(1, 2, 3, 4, 5)// returns 3.0, which is the arithmetic mean of these five numbersarithmeticMean(3, 8.25, 18.75)// returns 10.0, which is the arithmetic mean of these three numbers ä¸€ä¸ªå‡½æ•°å¯ä»¥æœ‰å¤šä¸ªå˜æ€§å‚æ•°ã€‚å˜å‚æ•°ä¹‹åçš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æœ‰ä¸€ä¸ªå‚æ•°æ ‡ç­¾ã€‚å‚æ•°æ ‡ç­¾æ˜ç¡®äº†å“ªäº›å‚æ•°ä¼ é€’ç»™å˜åˆ†å‚æ•°ï¼Œå“ªäº›å‚æ•°ä¼ é€’ç»™å˜åˆ†å‚æ•°ä¹‹åçš„å‚æ•°ã€‚ è¾“å…¥è¾“å‡ºå‚æ•°é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°å‚æ•°æ˜¯å¸¸é‡ã€‚è¯•å›¾ä»è¯¥å‡½æ•°ä¸»ä½“å†…æ›´æ”¹å‡½æ•°å‚æ•°çš„å€¼ä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚è¿™æ„å‘³ç€æ‚¨ä¸èƒ½é”™è¯¯åœ°æ›´æ”¹å‚æ•°çš„å€¼ã€‚å¦‚æœæ‚¨å¸Œæœ›å‡½æ•°ä¿®æ”¹å‚æ•°çš„å€¼ï¼Œå¹¶å¸Œæœ›è¿™äº›æ›´æ”¹åœ¨å‡½æ•°è°ƒç”¨ç»“æŸåæŒç»­å­˜åœ¨ï¼Œè¯·å°†è¯¥å‚æ•°å®šä¹‰ä¸ºè¿›å‡ºå‚æ•°ã€‚ æ‚¨å¯ä»¥é€šè¿‡å°†è¾“å…¥å…³é”®å­—æ”¾åœ¨å‚æ•°ç±»å‹ä¹‹å‰æ¥ç¼–å†™inoutè¾“å‡ºå‚æ•°ã€‚å…¥å‡ºå‚æ•°æœ‰ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼è¢«ä¼ é€’ç»™å‡½æ•°ï¼Œç”±å‡½æ•°ä¿®æ”¹ï¼Œå¹¶ä»å‡½æ•°ä¸­ä¼ é€’å›æ¥ä»¥æ›¿æ¢åŸå§‹å€¼ã€‚æœ‰å…³è¿›å‡ºå‚æ•°å’Œç›¸å…³ç¼–è¯‘å™¨ä¼˜åŒ–è¡Œä¸ºçš„è¯¦ç»†è®¨è®ºï¼Œè¯·å‚é˜…è¾“å…¥è¾“å‡ºå‚æ•°ã€‚ æ‚¨åªèƒ½ä¼ é€’ä¸€ä¸ªå˜é‡ä½œä¸ºè¿›å‡ºå‚æ•°çš„å‚æ•°ã€‚æ‚¨ä¸èƒ½ä¼ é€’å¸¸é‡æˆ–å­—é¢å€¼ä½œä¸ºå‚æ•°ï¼Œå› ä¸ºå¸¸é‡å’Œæ–‡å­—æ— æ³•ä¿®æ”¹ã€‚å½“æ‚¨å°†å®‰åŸ¹æ•°ï¼ˆ&amp;ï¼‰ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¾“å…¥è¾“å‡ºå‚æ•°æ—¶ï¼Œå°†å®ƒç›´æ¥æ”¾åœ¨å˜é‡åç§°ä¹‹å‰ï¼Œä»¥æŒ‡ç¤ºå‡½æ•°å¯ä»¥ä¿®æ”¹å®ƒã€‚ æ³¨æ„ è¿›å‡ºå‚æ•°ä¸èƒ½æœ‰é»˜è®¤å€¼ï¼Œå˜åˆ†å‚æ•°ä¸èƒ½æ ‡è®°ä¸ºinoutã€‚ è¿™æ˜¯ä¸€ä¸ªåä¸ºswapTwoInts(_:_:)çš„å‡½æ•°ç¤ºä¾‹ï¼Œå®ƒæœ‰ä¸¤ä¸ªåä¸ºaå’Œbçš„è¾“å…¥è¾“å‡ºæ•´æ•°å‚æ•°ï¼š 12345func swapTwoInts(_ a: inout Int, _ b: inout Int) &#123; let temporaryA = a a = b b = temporaryA&#125; â€˜ swaptwints(::) â€˜å‡½æ•°åªæ˜¯å°†â€™ b â€˜çš„å€¼äº¤æ¢ä¸ºâ€™ a â€˜ï¼Œ â€˜ a â€˜çš„å€¼äº¤æ¢ä¸ºâ€™ b â€˜ã€‚å‡½æ•°é€šè¿‡å°†â€™ a â€˜çš„å€¼å­˜å‚¨åœ¨ä¸€ä¸ªåä¸ºâ€™ temporaryA â€˜çš„ä¸´æ—¶å¸¸é‡ä¸­ï¼Œå°†â€™ b â€˜çš„å€¼èµ‹ç»™â€™ a â€˜ï¼Œç„¶åå°†â€™ temporaryA â€˜èµ‹ç»™â€™ b â€˜æ¥æ‰§è¡Œäº¤æ¢ã€‚ æ‚¨å¯ä»¥è°ƒç”¨å…·æœ‰Intç±»å‹ä¸ºä¸¤ä¸ªå˜é‡çš„swapTwoIntsswapTwoInts(_:_:)å‡½æ•°æ¥äº¤æ¢å…¶å€¼ã€‚è¯·æ³¨æ„ï¼ŒsomeIntå’ŒanotherIntçš„åç§°å‰ç¼€ä¸ºå®‰åŸ¹ï¼Œå½“å®ƒä»¬ä¼ é€’ç»™swapTwoIntsswapTwoInts(_:_:)å‡½æ•°æ—¶ï¼š 12345var someInt = 3var anotherInt = 107swapTwoInts(&amp;someInt, &amp;anotherInt)print(&quot;someInt is now \\(someInt), and anotherInt is now \\(anotherInt)&quot;)// Prints &quot;someInt is now 107, and anotherInt is now 3&quot; ä¸Šé¢çš„ç¤ºä¾‹è¡¨æ˜ï¼ŒsomeIntå’ŒanotherIntçš„åŸå§‹å€¼è¢«swapTwoIntsswapTwoInts(_:_:)å‡½æ•°ä¿®æ”¹ï¼Œå³ä½¿å®ƒä»¬æœ€åˆæ˜¯åœ¨å‡½æ•°ä¹‹å¤–å®šä¹‰çš„ã€‚ æ³¨æ„ è¾“å…¥è¾“å‡ºå‚æ•°ä¸ä»å‡½æ•°è¿”å›å€¼ä¸åŒã€‚ä¸Šé¢çš„swapTwoIntsç¤ºä¾‹æ²¡æœ‰å®šä¹‰è¿”å›ç±»å‹æˆ–è¿”å›å€¼ï¼Œä½†å®ƒä»ç„¶ä¿®æ”¹äº†someIntå’ŒanotherIntçš„å€¼ã€‚è¾“å…¥è¾“å‡ºå‚æ•°æ˜¯å‡½æ•°åœ¨å…¶å‡½æ•°ä½“èŒƒå›´ä¹‹å¤–äº§ç”Ÿæ•ˆæœçš„å¦ä¸€ç§æ–¹å¼ã€‚ åŠŸèƒ½ç±»å‹æ¯ä¸ªå‡½æ•°éƒ½æœ‰ç‰¹å®šçš„å‡½æ•°ç±»å‹ï¼Œç”±å‚æ•°ç±»å‹å’Œå‡½æ•°çš„è¿”å›ç±»å‹ç»„æˆã€‚ ä¾‹å¦‚ï¼š 123456func addTwoInts(_ a: Int, _ b: Int) -&gt; Int &#123; return a + b&#125;func multiplyTwoInts(_ a: Int, _ b: Int) -&gt; Int &#123; return a * b&#125; æ­¤ç¤ºä¾‹å®šä¹‰äº†ä¸¤ä¸ªç®€å•çš„æ•°å­¦å‡½æ•°ï¼Œç§°ä¸ºaddTwoIntså’ŒmultiplyTwoIntsã€‚è¿™äº›å‡½æ•°å„æ¥å—ä¸¤ä¸ªIntå€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªIntå€¼ï¼Œè¿™æ˜¯æ‰§è¡Œé€‚å½“æ•°å­¦è¿ç®—çš„ç»“æœã€‚ è¿™ä¸¤ä¸ªå‡½æ•°çš„ç±»å‹éƒ½æ˜¯â€™ (Int, Int) -&gt; Int â€˜ã€‚è¿™å¯ä»¥ç†è§£ä¸º: â€œå…·æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œä¸¤ä¸ªå‚æ•°éƒ½æ˜¯Intç±»å‹ï¼Œå¹¶ä¸”è¿”å›Intç±»å‹çš„å€¼ã€‚â€ ä»¥ä¸‹æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œå¯¹äºæ²¡æœ‰å‚æ•°æˆ–è¿”å›å€¼çš„å‡½æ•°ï¼š 123func printHelloWorld() &#123; print(&quot;hello, world&quot;)&#125; è¿™ä¸ªå‡½æ•°çš„ç±»å‹æ˜¯â€™ ()-&gt; Void â€˜ï¼Œæˆ–è€…â€ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„å‡½æ•°ï¼Œè¿”å›â€™ Void â€˜ â€œã€‚ ä½¿ç”¨åŠŸèƒ½ç±»å‹æ‚¨ä½¿ç”¨çš„åŠŸèƒ½ç±»å‹å°±åƒ Swift ä¸­çš„ä»»ä½•å…¶ä»–ç±»å‹ä¸€æ ·ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å°†å¸¸é‡æˆ–å˜é‡å®šä¹‰ä¸ºå‡½æ•°ç±»å‹ï¼Œå¹¶ä¸ºè¯¥å˜é‡åˆ†é…é€‚å½“çš„å‡½æ•°ï¼š 1var mathFunction: (Int, Int) -&gt; Int = addTwoInts è¿™å¯ä»¥ç†è§£ä¸ºï¼š â€œå®šä¹‰ä¸€ä¸ªåä¸ºmathFunctionçš„å˜é‡ï¼Œè¯¥å˜é‡å…·æœ‰ä¸€ç§â€˜æ¥å—ä¸¤ä¸ªIntå€¼å¹¶è¿”å›ä¸€ä¸ªIntå€¼çš„å‡½æ•°â€™ã€‚å°†è¿™ä¸ªæ–°å˜é‡è®¾ç½®ä¸ºå¼•ç”¨åä¸ºaddTwoIntså‡½æ•°ã€‚â€ addTwoInts(_:_:)å‡½æ•°å…·æœ‰ä¸mathFunctionå˜é‡ç›¸åŒçš„ç±»å‹ï¼Œå› æ­¤Swiftçš„ç±»å‹æ£€æŸ¥å™¨å…è®¸æ­¤åˆ†é…ã€‚ æ‚¨ç°åœ¨å¯ä»¥è°ƒç”¨åä¸ºmathFunctionçš„åˆ†é…å‡½æ•°ï¼š 12print(&quot;Result: \\(mathFunction(2, 3))&quot;)// Prints &quot;Result: 5&quot; å…·æœ‰ç›¸åŒåŒ¹é…ç±»å‹çš„ä¸åŒå‡½æ•°å¯ä»¥åˆ†é…ç»™ç›¸åŒçš„å˜é‡ï¼Œå°±åƒéå‡½æ•°ç±»å‹ä¸€æ ·ï¼š 123mathFunction = multiplyTwoIntsprint(&quot;Result: \\(mathFunction(2, 3))&quot;)// Prints &quot;Result: 6&quot; ä¸ä»»ä½•å…¶ä»–ç±»å‹ä¸€æ ·ï¼Œå½“æ‚¨å°†å‡½æ•°åˆ†é…ç»™å¸¸é‡æˆ–å˜é‡æ—¶ï¼Œæ‚¨å¯ä»¥å°†å…¶ç•™ç»™Swiftæ¥æ¨æ–­å‡½æ•°ç±»å‹ï¼š 12let anotherMathFunction = addTwoInts// anotherMathFunction is inferred to be of type (Int, Int) -&gt; Int å‡½æ•°ç±»å‹ä½œä¸ºå‚æ•°ç±»å‹ä½ å¯ä»¥ä½¿ç”¨åƒâ€™ (Int, Int) -&gt; Int â€˜è¿™æ ·çš„å‡½æ•°ç±»å‹ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å½¢å‚ç±»å‹ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿå°†å‡½æ•°å®ç°çš„æŸäº›æ–¹é¢ç•™ç»™å‡½æ•°çš„è°ƒç”¨è€…æ¥æä¾›ã€‚ ä»¥ä¸‹æ˜¯ä»ä¸Šé¢æ‰“å°æ•°å­¦å‡½æ•°ç»“æœçš„ç¤ºä¾‹ï¼š 12345func printMathResult(_ mathFunction: (Int, Int) -&gt; Int, _ a: Int, _ b: Int) &#123; print(&quot;Result: \\(mathFunction(a, b))&quot;)&#125;printMathResult(addTwoInts, 3, 5)// Prints &quot;Result: 8&quot; è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸ºâ€™ printMathResult(:::) â€˜çš„å‡½æ•°ï¼Œå®ƒæœ‰ä¸‰ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°å«åšâ€™ mathFunction â€˜ï¼Œå…¶ç±»å‹ä¸ºâ€™ (Int, Int) -&gt; Int â€˜ã€‚æ‚¨å¯ä»¥ä¼ é€’è¯¥ç±»å‹çš„ä»»ä½•å‡½æ•°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°çš„å®å‚ã€‚ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå½¢å‚ç§°ä¸ºâ€™ a â€˜å’Œâ€™ b â€˜ï¼Œéƒ½æ˜¯â€™ Int â€˜ç±»å‹ã€‚å®ƒä»¬ç”¨ä½œæ‰€æä¾›çš„æ•°å­¦å‡½æ•°çš„ä¸¤ä¸ªè¾“å…¥å€¼ã€‚ å½“è°ƒç”¨printMathResult(_:_:_:)æ—¶ï¼Œå®ƒä¼ é€’äº†addTwoInts(_:_:)å‡½æ•°ä»¥åŠæ•´æ•°å€¼3å’Œ5ã€‚å®ƒè°ƒç”¨å€¼ä¸º3å’Œ5çš„å‡½æ•°ï¼Œå¹¶æ‰“å°8çš„ç»“æœã€‚ printMathResult(_:_:_:)çš„ä½œç”¨æ˜¯æ‰“å°å¯¹é€‚å½“ç±»å‹çš„æ•°å­¦å‡½æ•°çš„è°ƒç”¨ç»“æœã€‚è¯¥å‡½æ•°çš„å®ç°å®é™…åšä»€ä¹ˆå¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯è¯¥å‡½æ•°çš„ç±»å‹æ˜¯å¦æ­£ç¡®ã€‚è¿™ä½¿printMathResult(_:_:_:)èƒ½å¤Ÿä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼å°†å…¶éƒ¨åˆ†åŠŸèƒ½ç§»äº¤ç»™å‡½æ•°çš„è°ƒç”¨è€…ã€‚ å‡½æ•°ç±»å‹ä½œä¸ºè¿”å›ç±»å‹æ‚¨å¯ä»¥ä½¿ç”¨å‡½æ•°ç±»å‹ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›ç±»å‹ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨è¿”å›å‡½æ•°çš„è¿”å›ç®­å¤´ï¼ˆ-&gt;ï¼‰åç«‹å³å†™å…¥å®Œæ•´çš„å‡½æ•°ç±»å‹æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ ä¸‹ä¸€ä¸ªä¾‹å­å®šä¹‰äº†ä¸¤ä¸ªç®€å•çš„å‡½æ•°ï¼Œåˆ†åˆ«å«åšâ€œstepForward(:)â€å’Œâ€œstepBackward(:)â€ã€‚â€™ stepForward(:) â€˜å‡½æ•°è¿”å›çš„å€¼æ¯”å…¶è¾“å…¥å€¼å¤§1ï¼Œâ€™ stepBackward(:) â€˜å‡½æ•°è¿”å›çš„å€¼æ¯”å…¶è¾“å…¥å€¼å°1ã€‚ä¸¤ä¸ªå‡½æ•°éƒ½å…·æœ‰â€™ (Int) -&gt; Int â€˜ç±»å‹: 123456func stepForward(_ input: Int) -&gt; Int &#123; return input + 1&#125;func stepBackward(_ input: Int) -&gt; Int &#123; return input - 1&#125; è¿™é‡Œæœ‰ä¸€ä¸ªå‡½æ•°å«åšâ€™ chooseStepFunction(backward:) â€˜ï¼Œå®ƒçš„è¿”å›ç±»å‹æ˜¯â€™ (Int) -&gt; Int â€˜ã€‚â€™ chooseStepFunction(backward:) â€˜å‡½æ•°è¿”å›â€™ stepForward(:) â€˜å‡½æ•°æˆ–â€™ stepBackward(:) â€˜å‡½æ•°ï¼Œè¯¥å‡½æ•°åŸºäºä¸€ä¸ªåä¸ºâ€™ backward â€˜çš„å¸ƒå°”å½¢å‚: 123func chooseStepFunction(backward: Bool) -&gt; (Int) -&gt; Int &#123; return backward ? stepBackward : stepForward&#125; æ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨chooseStepFunction(backward:)è·å–å°†å‘ä¸€ä¸ªæˆ–å¦ä¸€ä¸ªæ–¹å‘å‰è¿›çš„å‡½æ•°ï¼š var currentValue &#x3D; 3 let moveNearerToZero &#x3D; chooseStepFunction(backward: currentValue &gt; 0) &#x2F;&#x2F; moveNearerToZero now refers to the stepBackward() function ä¸Šé¢çš„ä¾‹å­å†³å®šäº†å°†ä¸€ä¸ªåä¸ºâ€œcurrentValueâ€çš„å˜é‡ç§»åŠ¨åˆ°é€æ¸æ¥è¿‘é›¶çš„ä½ç½®æ—¶ï¼Œæ˜¯éœ€è¦ä¸€ä¸ªæ­£çš„æ­¥éª¤è¿˜æ˜¯è´Ÿçš„æ­¥éª¤ã€‚â€™ currentValue â€˜çš„åˆå§‹å€¼ä¸ºâ€™ 3 â€˜ï¼Œè¿™æ„å‘³ç€â€™ currentValue &gt; 0 â€˜è¿”å›â€™ true â€˜ï¼Œå¯¼è‡´â€™ chooseStepFunction(backward:) â€˜è¿”å›â€™ stepBackward(:) â€˜å‡½æ•°ã€‚å¯¹è¿”å›å‡½æ•°çš„å¼•ç”¨å­˜å‚¨åœ¨ä¸€ä¸ªåä¸ºâ€œmoveNearerToZeroâ€çš„å¸¸é‡ä¸­ã€‚ ç°åœ¨â€™ moveNearerToZero â€˜æŒ‡å‘äº†æ­£ç¡®çš„å‡½æ•°ï¼Œå®ƒå¯ä»¥è¢«ç”¨æ¥è®¡æ•°åˆ°0: 1234567891011print(&quot;Counting to zero:&quot;)// Counting to zero:while currentValue != 0 &#123; print(&quot;\\(currentValue)... &quot;) currentValue = moveNearerToZero(currentValue)&#125;print(&quot;zero!&quot;)// 3...// 2...// 1...// zero! åµŒå¥—å‡½æ•°åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‚¨åœ¨æœ¬ç« ä¸­é‡åˆ°çš„æ‰€æœ‰å‡½æ•°éƒ½æ˜¯å…¨å±€å‡½æ•°çš„ç¤ºä¾‹ï¼Œè¿™äº›å‡½æ•°æ˜¯åœ¨å…¨å±€èŒƒå›´å†…å®šä¹‰çš„ã€‚æ‚¨è¿˜å¯ä»¥å®šä¹‰å…¶ä»–å‡½æ•°ä¸»ä½“å†…çš„å‡½æ•°ï¼Œç§°ä¸ºåµŒå¥—å‡½æ•°ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒåµŒå¥—å‡½æ•°å¯¹å¤–éƒ¨ä¸–ç•Œéšè—ï¼Œä½†ä»ç„¶å¯ä»¥è¢«å…¶å°é—­å‡½æ•°è°ƒç”¨å’Œä½¿ç”¨ã€‚å°é—­å‡½æ•°ä¹Ÿå¯ä»¥è¿”å›å…¶åµŒå¥—å‡½æ•°ä¹‹ä¸€ï¼Œä»¥å…è®¸åµŒå¥—å‡½æ•°åœ¨å¦ä¸€ä¸ªä½œç”¨åŸŸä¸­ä½¿ç”¨ã€‚ æ‚¨å¯ä»¥é‡å†™ä¸Šé¢çš„chooseStepFunction(backward:)ç¤ºä¾‹æ¥ä½¿ç”¨å’Œè¿”å›åµŒå¥—å‡½æ•°ï¼š 123456789101112131415161718func chooseStepFunction(backward: Bool) -&gt; (Int) -&gt; Int &#123; func stepForward(input: Int) -&gt; Int &#123; return input + 1 &#125; func stepBackward(input: Int) -&gt; Int &#123; return input - 1 &#125; return backward ? stepBackward : stepForward&#125;var currentValue = -4let moveNearerToZero = chooseStepFunction(backward: currentValue &gt; 0)// moveNearerToZero now refers to the nested stepForward() functionwhile currentValue != 0 &#123; print(&quot;\\(currentValue)... &quot;) currentValue = moveNearerToZero(currentValue)&#125;print(&quot;zero!&quot;)// -4...// -3...// -2...// -1...// zero!","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ åè®®","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-åè®®","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-åè®®/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%8D%8F%E8%AE%AE/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Protocols.html åè®®å®šä¹‰äº†é€‚åˆç‰¹å®šä»»åŠ¡æˆ–åŠŸèƒ½çš„æ–¹æ³•ã€å±æ€§å’Œå…¶ä»–è¦æ±‚çš„è“å›¾ã€‚ç„¶åï¼Œè¯¥åè®®å¯ä»¥ç”±ç±»ã€ç»“æ„æˆ–æšä¸¾é‡‡ç”¨ï¼Œä»¥æä¾›è¿™äº›è¦æ±‚çš„å®é™…å®ç°ã€‚ä»»ä½•æ»¡è¶³åè®®è¦æ±‚çš„ç±»å‹éƒ½è¢«ç§°ä¸ºç¬¦åˆè¯¥åè®®ã€‚ é™¤äº†æŒ‡å®šç¬¦åˆç±»å‹å¿…é¡»å®ç°çš„è¦æ±‚å¤–ï¼Œæ‚¨è¿˜å¯ä»¥æ‰©å±•åè®®æ¥å®ç°å…¶ä¸­ä¸€äº›éœ€æ±‚æˆ–å®ç°ç¬¦åˆç±»å‹å¯ä»¥åˆ©ç”¨çš„å…¶ä»–åŠŸèƒ½ã€‚ åè®®è¯­æ³•æ‚¨ä»¥ä¸ç±»ã€ç»“æ„å’Œæšä¸¾éå¸¸ç›¸ä¼¼çš„æ–¹å¼å®šä¹‰åè®®ï¼š protocol SomeProtocol { â€‹ &#x2F;&#x2F; protocol definition goes here } è‡ªå®šä¹‰ç±»å‹å£°æ˜ï¼Œä»–ä»¬é‡‡ç”¨ç‰¹å®šåè®®ï¼Œå°†åè®®çš„åç§°æ”¾åœ¨ç±»å‹åç§°ä¹‹åï¼Œç”¨å†’å·åˆ†éš”ï¼Œä½œä¸ºå…¶å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚å¯ä»¥åˆ—å‡ºå¤šä¸ªåè®®ï¼Œå¹¶ç”¨é€—å·åˆ†éš”ï¼š struct SomeStructure: FirstProtocol, AnotherProtocol { â€‹ &#x2F;&#x2F; structure definition goes here } å¦‚æœä¸€ä¸ªç±»æœ‰ä¸€ä¸ªè¶…ç±»ï¼Œè¯·åœ¨å®ƒé‡‡ç”¨çš„ä»»ä½•åè®®ä¹‹å‰åˆ—å‡ºè¶…ç±»åç§°ï¼Œåè·Ÿé€—å·ï¼š class SomeClass: SomeSuperclass, FirstProtocol, AnotherProtocol { â€‹ &#x2F;&#x2F; class definition goes here } è´¢äº§è¦æ±‚åè®®å¯ä»¥è¦æ±‚ä»»ä½•ç¬¦åˆè¦æ±‚çš„ç±»å‹ä¸ºå®ä¾‹å±æ€§æˆ–ç±»å‹å±æ€§æä¾›ç‰¹å®šåç§°å’Œç±»å‹ã€‚è¯¥åè®®æ²¡æœ‰æŒ‡å®šè¯¥å±æ€§æ˜¯å­˜å‚¨å±æ€§è¿˜æ˜¯è®¡ç®—å±æ€§ï¼Œå®ƒåªæŒ‡å®šæ‰€éœ€çš„å±æ€§åç§°å’Œç±»å‹ã€‚è¯¥åè®®è¿˜æŒ‡å®šæ¯ä¸ªå±æ€§å¿…é¡»æ˜¯å¯è·å–çš„è¿˜æ˜¯å¯è·å–å’Œå¯è®¾ç½®çš„ã€‚ å¦‚æœåè®®è¦æ±‚å±æ€§å¯è·å–å’Œå¯è®¾ç½®ï¼Œåˆ™è¯¥å±æ€§è¦æ±‚æ— æ³•ç”±å¸¸é‡å­˜å‚¨å±æ€§æˆ–åªè¯»è®¡ç®—å±æ€§æ»¡è¶³ã€‚å¦‚æœåè®®ä»…è¦æ±‚å±æ€§æ˜¯å¯è·å–çš„ï¼Œåˆ™ä»»ä½•ç±»å‹çš„å±æ€§éƒ½å¯ä»¥æ»¡è¶³è¯¥è¦æ±‚ï¼Œå¦‚æœè¿™å¯¹æ‚¨è‡ªå·±çš„ä»£ç æœ‰ç”¨ï¼Œåˆ™è¯¥å±æ€§ä¹Ÿå¯ä»¥è®¾ç½®ã€‚ Property requirements are always declared as variable properties, prefixed with the varkeyword. Gettable and settable properties are indicated by writing &#123; get set &#125; after their type declaration, and gettable properties are indicated by writing &#123; get &#125;. protocol SomeProtocol { â€‹ var mustBeSettable: Int { get set } â€‹ var doesNotNeedToBeSettable: Int { get } } åœ¨åè®®ä¸­å®šä¹‰ç±»å‹å±æ€§è¦æ±‚æ—¶ï¼Œè¯·åŠ¡å¿…ç”¨é™æ€å…³é”®å­—ä½œä¸ºç±»å‹å±æ€§è¦æ±‚å‰ç¼€ã€‚å³ä½¿ç±»å‹å±æ€§è¦æ±‚åœ¨ç±»å®ç°æ—¶å¯ä»¥ä»¥classæˆ–é™æ€å…³é”®å­—ä¸ºå‰ç¼€ï¼Œä½†æ­¤è§„åˆ™ä¹Ÿé€‚ç”¨ï¼š protocol AnotherProtocol { â€‹ static var someTypeProperty: Int { get set } } ä»¥ä¸‹æ˜¯å…·æœ‰å•ä¸ªå®ä¾‹å±æ€§è¦æ±‚çš„åè®®ç¤ºä¾‹ï¼š protocol FullyNamed { â€‹ var fullName: String { get } } FullyNamedåè®®è¦æ±‚ç¬¦åˆè¦æ±‚çš„ç±»å‹æ¥æä¾›å®Œå…¨é™å®šçš„åç§°ã€‚è¯¥åè®®æ²¡æœ‰æŒ‡å®šä»»ä½•å…³äºç¬¦åˆç±»å‹æ€§è´¨çš„ä»»ä½•å…¶ä»–ä¿¡æ¯â€”â€”å®ƒåªæŒ‡å®šè¯¥ç±»å‹å¿…é¡»èƒ½å¤Ÿä¸ºè‡ªå·±æä¾›å…¨åã€‚è¯¥åè®®è§„å®šï¼Œä»»ä½•FullyNamedç±»å‹éƒ½å¿…é¡»æœ‰ä¸€ä¸ªåä¸ºfullNameçš„gettableå®ä¾‹å±æ€§ï¼Œè¯¥å±æ€§ç±»å‹ä¸ºStringã€‚ ä»¥ä¸‹æ˜¯é‡‡ç”¨å¹¶ç¬¦åˆFullyNamedåè®®çš„ç®€å•ç»“æ„ç¤ºä¾‹ï¼š struct Person: FullyNamed { â€‹ var fullName: String } let john &#x3D; Person(fullName: â€œJohn Appleseedâ€) &#x2F;&#x2F; john.fullName is â€œJohn Appleseedâ€ æ­¤ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºPersonç»“æ„ï¼Œè¯¥ç»“æ„è¡¨ç¤ºä¸€ä¸ªç‰¹å®šçš„å‘½åäººã€‚å®ƒè¡¨ç¤ºï¼Œå®ƒé‡‡ç”¨FullyNamedåè®®ä½œä¸ºå…¶å®šä¹‰ç¬¬ä¸€è¡Œçš„ä¸€éƒ¨åˆ†ã€‚ Each instance of Person has a single stored property called fullName, which is of type String. This matches the single requirement of the FullyNamed protocol, and means that Person has correctly conformed to the protocol. (Swift reports an error at compile time if a protocol requirement isnâ€™t fulfilled.) è¿™é‡Œæœ‰ä¸€ä¸ªæ›´å¤æ‚çš„ç±»ï¼Œå®ƒä¹Ÿé‡‡ç”¨å¹¶ç¬¦åˆFullyNamedåè®®ï¼š class Starship: FullyNamed { â€‹ var prefix: String? â€‹ var name: String â€‹ init(name: String, prefix: String? &#x3D; nil) { â€‹ self.name &#x3D; name â€‹ self.prefix &#x3D; prefix â€‹ } â€‹ var fullName: String { â€‹ return (prefix !&#x3D; nil ? prefix! + â€œ â€œ : â€œâ€) + name â€‹ } } var ncc1701 &#x3D; Starship(name: â€œEnterpriseâ€, prefix: â€œUSSâ€) &#x2F;&#x2F; ncc1701.fullName is â€œUSS Enterpriseâ€ è¯¥ç±»å®ç°fullNameå±æ€§è¦æ±‚ï¼Œä½œä¸ºæ˜Ÿé™…é£èˆ¹çš„è®¡ç®—åªè¯»å±æ€§ã€‚æ¯ä¸ªStarshipç±»å®ä¾‹éƒ½å­˜å‚¨ä¸€ä¸ªå¿…å¡«nameå’Œä¸€ä¸ªå¯é€‰prefixã€‚å¦‚æœå­˜åœ¨ï¼ŒfullNameå±æ€§ä½¿ç”¨prefixå€¼ï¼Œå¹¶å°†å…¶å‰ç½®äºnameå¼€å¤´ï¼Œä¸ºæ˜Ÿèˆ°åˆ›å»ºå…¨åã€‚ æ–¹æ³•è¦æ±‚åè®®å¯ä»¥è¦æ±‚é€šè¿‡ç¬¦åˆç±»å‹å®ç°ç‰¹å®šçš„å®ä¾‹æ–¹æ³•å’Œç±»å‹æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä½œä¸ºåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¸æ™®é€šå®ä¾‹å’Œç±»å‹æ–¹æ³•å®Œå…¨ç›¸åŒçš„æ–¹å¼ç¼–å†™ï¼Œä½†æ²¡æœ‰èŠ±æ‹¬å·æˆ–æ–¹æ³•ä¸»ä½“ã€‚å…è®¸å˜é‡å‚æ•°ï¼Œä½†é¡»éµå®ˆä¸æ­£å¸¸æ–¹æ³•ç›¸åŒçš„è§„åˆ™ã€‚ç„¶è€Œï¼Œæ— æ³•ä¸ºåè®®å®šä¹‰ä¸­çš„æ–¹æ³•å‚æ•°æŒ‡å®šé»˜è®¤å€¼ã€‚ ä¸ç±»å‹å±æ€§è¦æ±‚ä¸€æ ·ï¼Œå½“åœ¨åè®®ä¸­å®šä¹‰staticå…³é”®å­—æ—¶ï¼Œæ‚¨æ€»æ˜¯åœ¨ç±»å‹æ–¹æ³•è¦æ±‚å‰åŠ ä¸Šé™æ€å…³é”®å­—ã€‚å³ä½¿ç±»å‹æ–¹æ³•è¦æ±‚åœ¨ç±»å®ç°æ—¶ä»¥classæˆ–é™æ€å…³é”®å­—ä¸ºå‰ç¼€ï¼Œä¹Ÿæ˜¯å¦‚æ­¤ï¼š protocol SomeProtocol { â€‹ static func someTypeMethod() } ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†å…·æœ‰å•ä¸ªå®ä¾‹æ–¹æ³•è¦æ±‚çš„åè®®ï¼š protocol RandomNumberGenerator { â€‹ func random() -&gt; Double } è¯¥åè®®RandomNumberGeneratorè¦æ±‚ä»»ä½•ç¬¦åˆè¦æ±‚çš„ç±»å‹éƒ½æœ‰ä¸€ä¸ªåä¸ºrandomå®ä¾‹æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åœ¨è°ƒç”¨æ—¶è¿”å›ä¸€ä¸ªDoubleå€¼ã€‚è™½ç„¶å®ƒæ²¡æœ‰æŒ‡å®šä¸ºåè®®çš„ä¸€éƒ¨åˆ†ï¼Œä½†å‡è®¾è¿™ä¸ªå€¼å°†ä»0.0åˆ°ï¼ˆä½†ä¸åŒ…æ‹¬ï¼‰1.0ã€‚ RandomNumberGeneratoråè®®ä¸ä¼šå¯¹å¦‚ä½•ç”Ÿæˆæ¯ä¸ªéšæœºæ•°åšå‡ºä»»ä½•å‡è®¾â€”â€”å®ƒåªæ˜¯è¦æ±‚ç”Ÿæˆå™¨æä¾›ä¸€ç§æ ‡å‡†æ–¹æ³•æ¥ç”Ÿæˆæ–°çš„éšæœºæ•°ã€‚ ä»¥ä¸‹æ˜¯é‡‡ç”¨å¹¶ç¬¦åˆRandomNumberGeneratoråè®®çš„ç±»çš„å®ç°ã€‚è¯¥ç±»å®ç°äº†ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ç®—æ³•ï¼Œç§°ä¸ºçº¿æ€§åŒä½™ç”Ÿæˆå™¨ï¼š class LinearCongruentialGenerator: RandomNumberGenerator { â€‹ var lastRandom &#x3D; 42.0 â€‹ let m &#x3D; 139968.0 â€‹ let a &#x3D; 3877.0 â€‹ let c &#x3D; 29573.0 â€‹ func random() -&gt; Double { â€‹ lastRandom &#x3D; ((lastRandom * a + c) â€‹ .truncatingRemainder(dividingBy:m)) â€‹ return lastRandom &#x2F; m â€‹ } } let generator &#x3D; LinearCongruentialGenerator() print(â€œHereâ€™s a random number: (generator.random())â€) &#x2F;&#x2F; Prints â€œHereâ€™s a random number: 0.3746499199817101â€ print(â€œAnd another one: (generator.random())â€) &#x2F;&#x2F; Prints â€œAnd another one: 0.729023776863283â€ çªå˜æ–¹æ³•è¦æ±‚æœ‰æ—¶ï¼Œæ–¹æ³•éœ€è¦ä¿®æ”¹ï¼ˆæˆ–çªå˜ï¼‰å®ƒæ‰€å±çš„å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œå€¼ç±»å‹ï¼ˆå³ç»“æ„å’Œæšä¸¾ï¼‰ä¸Šçš„æ–¹æ³•ï¼Œæ‚¨å°†mutatingå…³é”®å­—æ”¾åœ¨æ–¹æ³•çš„funcå…³é”®å­—ä¹‹å‰ï¼Œä»¥æŒ‡ç¤ºå…è®¸è¯¥æ–¹æ³•ä¿®æ”¹å…¶æ‰€å±çš„å®ä¾‹å’Œè¯¥å®ä¾‹çš„ä»»ä½•å±æ€§ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨ä»å®ä¾‹å†…æ–¹æ³•ä¿®æ”¹å€¼ç±»å‹ä¸­è¿›è¡Œäº†æè¿°ã€‚ å¦‚æœæ‚¨å®šä¹‰äº†æ—¨åœ¨çªå˜é‡‡ç”¨è¯¥åè®®çš„ä»»ä½•ç±»å‹çš„å®ä¾‹çš„åè®®å®ä¾‹æ–¹æ³•è¦æ±‚ï¼Œè¯·å°†è¯¥æ–¹æ³•æ ‡è®°ä¸ºåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä½¿ç»“æ„å’Œæšä¸¾èƒ½å¤Ÿé‡‡ç”¨åè®®å¹¶æ»¡è¶³è¯¥æ–¹æ³•è¦æ±‚ã€‚ æ³¨æ„ å¦‚æœæ‚¨å°†åè®®å®ä¾‹æ–¹æ³•è¦æ±‚æ ‡è®°ä¸ºmutatingï¼Œåˆ™åœ¨ä¸ºç±»ç¼–å†™è¯¥æ–¹æ³•çš„å®ç°æ—¶æ— éœ€ç¼–å†™mutatingå…³é”®å­—ã€‚mutatingå…³é”®å­—ä»…ä¾›ç»“æ„å’Œæšä¸¾ä½¿ç”¨ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºTogglableçš„åè®®ï¼Œè¯¥åè®®å®šä¹‰äº†ä¸€ä¸ªåä¸ºtoggleå•ä¸ªå®ä¾‹æ–¹æ³•è¦æ±‚ã€‚é¡¾åæ€ä¹‰ï¼Œtoggle()æ–¹æ³•æ—¨åœ¨åˆ‡æ¢æˆ–åè½¬ä»»ä½•ç¬¦åˆç±»å‹çš„çŠ¶æ€ï¼Œé€šå¸¸é€šè¿‡ä¿®æ”¹è¯¥ç±»å‹çš„å±æ€§ã€‚ toggle()æ–¹æ³•è¢«æ ‡è®°ä¸ºmutatingå…³é”®å­—ï¼Œä½œä¸ºTogglableåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼Œä»¥æŒ‡ç¤ºè¯¥æ–¹æ³•åœ¨è°ƒç”¨æ—¶é¢„è®¡å°†çªå˜ç¬¦åˆå®ä¾‹çš„çŠ¶æ€ï¼š protocol Togglable { â€‹ mutating func toggle() } å¦‚æœæ‚¨ä¸ºç»“æ„æˆ–æšä¸¾å®ç°Togglableåè®®ï¼Œè¯¥ç»“æ„æˆ–æšä¸¾å¯ä»¥é€šè¿‡æä¾›ä¹Ÿæ ‡è®°ä¸ºmutatingçš„toggle()æ–¹æ³•çš„å®ç°æ¥ç¬¦åˆåè®®ã€‚ The example below defines an enumeration called OnOffSwitch. This enumeration toggles between two states, indicated by the enumeration cases on and off. The enumerationâ€™s toggle implementation is marked as mutating, to match the Togglable protocolâ€™s requirements: enum OnOffSwitch: Togglable { â€‹ case off, on â€‹ mutating func toggle() { â€‹ switch self { â€‹ case .off: â€‹ self &#x3D; .on â€‹ case .on: â€‹ self &#x3D; .off â€‹ } â€‹ } } var lightSwitch &#x3D; OnOffSwitch.off lightSwitch.toggle() &#x2F;&#x2F; lightSwitch is now equal to .on åˆå§‹åŒ–å™¨è¦æ±‚åè®®å¯ä»¥è¦æ±‚é€šè¿‡ç¬¦åˆç±»å‹å®ç°ç‰¹å®šçš„åˆå§‹åŒ–å™¨ã€‚æ‚¨ä»¥ä¸æ™®é€šåˆå§‹åŒ–å™¨å®Œå…¨ç›¸åŒçš„æ–¹å¼ç¼–å†™è¿™äº›åˆå§‹åŒ–å™¨ä½œä¸ºåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ²¡æœ‰èŠ±æ‹¬å·æˆ–åˆå§‹åŒ–å™¨ä¸»ä½“ï¼š protocol SomeProtocol { â€‹ init(someParameter: Int) } åè®®åˆå§‹åŒ–å™¨è¦æ±‚çš„ç±»å®ç°æ‚¨å¯ä»¥åœ¨ç¬¦åˆè¦æ±‚çš„ç±»ä¸Šå®ç°åè®®åˆå§‹åŒ–å™¨è¦æ±‚ï¼Œä½œä¸ºæŒ‡å®šçš„åˆå§‹åŒ–å™¨æˆ–æ–¹ä¾¿åˆå§‹åŒ–å™¨ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ‚¨éƒ½å¿…é¡»ç”¨requiredä¿®é¥°ç¬¦æ ‡è®°åˆå§‹åŒ–å™¨å®ç°ï¼š class SomeClass: SomeProtocol { â€‹ required init(someParameter: Int) { â€‹ &#x2F;&#x2F; initializer implementation goes here â€‹ } } ä½¿ç”¨requiredä¿®é¥°ç¬¦å¯ç¡®ä¿æ‚¨åœ¨ç¬¦åˆç±»çš„æ‰€æœ‰å­ç±»ä¸Šæä¾›åˆå§‹åŒ–å™¨è¦æ±‚çš„æ˜¾å¼æˆ–ç»§æ‰¿å®ç°ï¼Œä»¥ä¾¿å®ƒä»¬ä¹Ÿç¬¦åˆåè®®ã€‚ æœ‰å…³æ‰€éœ€åˆå§‹åŒ–å™¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ‰€éœ€åˆå§‹åŒ–å™¨ã€‚ æ³¨æ„ æ‚¨ä¸éœ€è¦åœ¨æ ‡æœ‰finalä¿®é¥°ç¬¦çš„ç±»ä¸Šä½¿ç”¨requiredä¿®é¥°ç¬¦æ ‡è®°åè®®åˆå§‹åŒ–å™¨å®ç°ï¼Œå› ä¸ºæœ€ç»ˆç±»æ— æ³•å­ç±»ã€‚æœ‰å…³finalä¿®é¥°ç¬¦çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…é˜²æ­¢è¦†ç›–ã€‚ å¦‚æœå­ç±»ä»è¶…ç±»è¦†ç›–æŒ‡å®šçš„åˆå§‹åŒ–å™¨ï¼Œå¹¶ä¸”è¿˜ä»åè®®ä¸­å®ç°äº†åŒ¹é…çš„åˆå§‹åŒ–å™¨è¦æ±‚ï¼Œè¯·ç”¨requiredä¿®é¥°ç¬¦å’Œoverrideä¿®é¥°ç¬¦æ ‡è®°åˆå§‹åŒ–å™¨å®ç°ï¼š protocol SomeProtocol { â€‹ init() } class SomeSuperClass { â€‹ init() { â€‹ &#x2F;&#x2F; initializer implementation goes here â€‹ } } class SomeSubClass: SomeSuperClass, SomeProtocol { â€‹ &#x2F;&#x2F; â€œrequiredâ€ from SomeProtocol conformance; â€œoverrideâ€ from SomeSuperClass â€‹ required override init() { â€‹ &#x2F;&#x2F; initializer implementation goes here â€‹ } } å¤±è´¥çš„åˆå§‹åŒ–å™¨è¦æ±‚åè®®å¯ä»¥å®šä¹‰ç¬¦åˆç±»å‹çš„æ•…éšœåˆå§‹åŒ–å™¨è¦æ±‚ï¼Œå¦‚æ•…éšœåˆå§‹åŒ–å™¨ä¸­å®šä¹‰ã€‚ ç¬¦åˆè¦æ±‚çš„ç±»å‹ä¸Šçš„å¯æ•…éšœæˆ–ä¸å¯å¤±è´¥çš„åˆå§‹åŒ–å™¨å¯ä»¥æ»¡è¶³æ•…éšœåˆå§‹åŒ–å™¨è¦æ±‚ã€‚éæ•…éšœåˆå§‹åŒ–å™¨æˆ–éšå¼æœªåŒ…è£…çš„æ•…éšœåˆå§‹åŒ–å™¨å¯ä»¥æ»¡è¶³éæ•…éšœåˆå§‹åŒ–å™¨è¦æ±‚ã€‚ åè®®ä½œä¸ºç±»å‹åè®®æœ¬èº«å®é™…ä¸Šå¹¶æ²¡æœ‰å®ç°ä»»ä½•åŠŸèƒ½ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæ‚¨å¯ä»¥åœ¨ä»£ç ä¸­å°†åè®®ç”¨ä½œæˆç†Ÿçš„ç±»å‹ã€‚å°†åè®®ç”¨ä½œç±»å‹æœ‰æ—¶è¢«ç§°ä¸ºå­˜åœ¨ç±»å‹ï¼Œå®ƒæ¥è‡ªçŸ­è¯­â€œå­˜åœ¨ä¸€ç§ç±»å‹Tï¼Œä½¿å¾—Tç¬¦åˆåè®®â€ã€‚ æ‚¨å¯ä»¥åœ¨è®¸å¤šå…è®¸å…¶ä»–ç±»å‹çš„åœ°æ–¹ä½¿ç”¨åè®®ï¼ŒåŒ…æ‹¬ï¼š ä½œä¸ºå‡½æ•°ã€æ–¹æ³•æˆ–åˆå§‹åŒ–å™¨ä¸­çš„å‚æ•°ç±»å‹æˆ–è¿”å›ç±»å‹ ä½œä¸ºå¸¸é‡ã€å˜é‡æˆ–å±æ€§çš„ç±»å‹ ä½œä¸ºæ•°ç»„ã€å­—å…¸æˆ–å…¶ä»–å®¹å™¨ä¸­é¡¹ç›®çš„ç±»å‹ æ³¨æ„ ç”±äºåè®®æ˜¯ç±»å‹ï¼Œå› æ­¤ä»¥å¤§å†™å­—æ¯ï¼ˆå¦‚FullyNamedå’ŒRandomNumberGeneratorï¼‰å¼€å¤´ï¼Œä»¥åŒ¹é…Swiftä¸­å…¶ä»–ç±»å‹çš„åç§°ï¼ˆå¦‚Intã€Stringå’ŒDoubleï¼‰ã€‚ ä»¥ä¸‹æ˜¯ç”¨ä½œç±»å‹çš„åè®®ç¤ºä¾‹ï¼š class Dice { â€‹ let sides: Int â€‹ let generator: RandomNumberGenerator â€‹ init(sides: Int, generator: RandomNumberGenerator) { â€‹ self.sides &#x3D; sides â€‹ self.generator &#x3D; generator â€‹ } â€‹ func roll() -&gt; Int { â€‹ return Int(generator.random() * Double(sides)) + 1 â€‹ } } æ­¤ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºDiceçš„æ–°ç±»ï¼Œå®ƒè¡¨ç¤ºç”¨äºæ£‹ç›˜æ¸¸æˆçš„né¢éª°å­ã€‚Diceå®ä¾‹æœ‰ä¸€ä¸ªç§°ä¸ºsidesçš„æ•´æ•°å±æ€§ï¼Œè¡¨ç¤ºå®ƒä»¬æœ‰å¤šå°‘è¾¹ï¼Œä»¥åŠä¸€ä¸ªç§°ä¸ºç”Ÿgeneratorå±æ€§ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œä»ä¸­åˆ›å»ºéª°å­æ»šåŠ¨å€¼ã€‚ generatorå±æ€§ä¸ºRandomNumberGeneratorç±»å‹ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥å°†å…¶è®¾ç½®ä¸ºé‡‡ç”¨RandomNumberGeneratoråè®®çš„ä»»ä½•ç±»å‹çš„å®ä¾‹ã€‚æ‚¨åˆ†é…ç»™æ­¤å±æ€§çš„å®ä¾‹ä¸éœ€è¦å…¶ä»–å†…å®¹ï¼Œé™¤éå®ä¾‹å¿…é¡»é‡‡ç”¨RandomNumberGeneratoråè®®ã€‚ç”±äºå…¶ç±»å‹æ˜¯RandomNumberGeneratorï¼ŒDiceç±»ä¸­çš„ä»£ç åªèƒ½ä»¥é€‚ç”¨äºæ‰€æœ‰ç¬¦åˆæ­¤åè®®çš„ç”Ÿæˆå™¨çš„æ–¹å¼ä¸generatoräº¤äº’ã€‚è¿™æ„å‘³ç€å®ƒä¸èƒ½ä½¿ç”¨ç”±ç”Ÿæˆå™¨åº•å±‚ç±»å‹å®šä¹‰çš„ä»»ä½•æ–¹æ³•æˆ–å±æ€§ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä»åè®®ç±»å‹é™çº§ç±»å‹åˆ°åº•å±‚ç±»å‹ï¼Œå°±åƒæ‚¨å¯ä»¥ä»è¶…ç±»å‘ä¸‹è½¬æ¢åˆ°å­ç±»ä¸€æ ·ï¼Œæ­£å¦‚åœ¨å‘ä¸‹è½¬æ¢ä¸­è®¨è®ºçš„é‚£æ ·ã€‚ Diceè¿˜æœ‰ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œç”¨äºè®¾ç½®å…¶åˆå§‹çŠ¶æ€ã€‚æ­¤åˆå§‹åŒ–å™¨æœ‰ä¸€ä¸ªåä¸ºgeneratorçš„å‚æ•°ï¼Œè¯¥å‚æ•°ä¹Ÿå±äºRandomNumberGeneratorç±»å‹ã€‚åœ¨åˆå§‹åŒ–æ–°çš„Diceå®ä¾‹æ—¶ï¼Œæ‚¨å¯ä»¥å°†ä»»ä½•ç¬¦åˆç±»å‹çš„å€¼ä¼ é€’ç»™æ­¤å‚æ•°ã€‚ Diceæä¾›ä¸€ç§å®ä¾‹æ–¹æ³•ï¼Œrollï¼Œå®ƒè¿”å›1å’Œéª°å­ä¸Šè¾¹æ•°ä¹‹é—´çš„æ•´æ•°å€¼ã€‚æ­¤æ–¹æ³•è°ƒç”¨ç”Ÿæˆå™¨çš„random()æ–¹æ³•ï¼Œä»¥åˆ›å»ºä¸€ä¸ª0.0åˆ°1.0ä¹‹é—´çš„æ–°éšæœºæ•°ï¼Œå¹¶ä½¿ç”¨æ­¤éšæœºæ•°åœ¨æ­£ç¡®çš„èŒƒå›´å†…åˆ›å»ºéª°å­æ»šåŠ¨å€¼ã€‚ç”±äºå·²çŸ¥generatoré‡‡ç”¨RandomNumberGeneratorï¼Œå› æ­¤å®ƒä¿è¯æœ‰ä¸€ä¸ªrandom()æ–¹æ³•å¯ä»¥è°ƒç”¨ã€‚ ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨Diceåˆ›å»ºä»¥aLinearCongruentialGeneratorå®ä¾‹ä½œä¸ºå…¶éšæœºæ•°ç”Ÿæˆå™¨çš„å…­é¢éª°å­ï¼š var d6 &#x3D; Dice(sides: 6, generator: LinearCongruentialGenerator()) for _ in 1â€¦5 { â€‹ print(â€œRandom dice roll is (d6.roll())â€) } &#x2F;&#x2F; Random dice roll is 3 &#x2F;&#x2F; Random dice roll is 5 &#x2F;&#x2F; Random dice roll is 4 &#x2F;&#x2F; Random dice roll is 5 &#x2F;&#x2F; Random dice roll is 4 æˆæƒå§”æ‰˜æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä½¿ç±»æˆ–ç»“æ„èƒ½å¤Ÿå°†å…¶éƒ¨åˆ†è´£ä»»ç§»äº¤ç»™ï¼ˆæˆ–å§”æ‰˜ï¼‰åˆ°å¦ä¸€ç§ç±»å‹çš„å®ä¾‹ã€‚è¿™ç§è®¾è®¡æ¨¡å¼æ˜¯é€šè¿‡å®šä¹‰å°è£…å§”æ‰˜è´£ä»»çš„åè®®æ¥å®ç°çš„ï¼Œè¿™æ ·ä¿è¯ç¬¦åˆçš„ç±»å‹ï¼ˆç§°ä¸ºå§”æ‰˜ï¼‰å¯ä»¥æä¾›å·²å§”æ‰˜çš„åŠŸèƒ½ã€‚å§”æ‰˜å¯ç”¨äºå“åº”ç‰¹å®šæ“ä½œï¼Œæˆ–ä»å¤–éƒ¨æ¥æºæ£€ç´¢æ•°æ®ï¼Œè€Œæ— éœ€çŸ¥é“è¯¥æºçš„åŸºç¡€ç±»å‹ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸¤ç§ç”¨äºåŸºäºéª°å­çš„æ£‹ç›˜æ¸¸æˆçš„åè®®ï¼š protocol DiceGame { â€‹ var dice: Dice { get } â€‹ func play() } protocol DiceGameDelegate: AnyObject { â€‹ func gameDidStart(_ game: DiceGame) â€‹ func game(_ game: DiceGame, didStartNewTurnWithDiceRoll diceRoll: Int) â€‹ func gameDidEnd(_ game: DiceGame) } DiceGameåè®®æ˜¯ä¸€ç§åè®®ï¼Œä»»ä½•æ¶‰åŠéª°å­çš„æ¸¸æˆéƒ½å¯ä»¥é‡‡ç”¨ã€‚ å¯ä»¥ä½¿ç”¨DiceGameDelegateåè®®æ¥è·Ÿè¸ªDiceGameçš„è¿›åº¦ã€‚ä¸ºäº†é˜²æ­¢å¼ºå¼•ç”¨å‘¨æœŸï¼Œå§”æ‰˜è¢«å£°æ˜ä¸ºå¼±å¼•ç”¨ã€‚æœ‰å…³å¼±å¼•ç”¨çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…ç±»å®ä¾‹ä¹‹é—´çš„å¼ºå¼•ç”¨å‘¨æœŸã€‚å°†åè®®æ ‡è®°ä¸ºä»…ç±»å¯ä»¥è®©SnakesAndLaddersç±»åœ¨æœ¬ç« åé¢å£°æ˜å…¶å§”æ‰˜å¿…é¡»ä½¿ç”¨å¼±å¼•ç”¨ã€‚æ­£å¦‚åœ¨ä»…ç±»åè®®ä¸­è®¨è®ºçš„é‚£æ ·ï¼Œä»…ç±»åè®®é€šè¿‡ä»AnyObjectç»§æ‰¿æ¥æ ‡è®°ã€‚ è¿™æ˜¯æœ€åˆåœ¨Control Flowä¸­å¼•å…¥çš„è›‡å’Œæ¢¯å­æ¸¸æˆçš„ä¸€ä¸ªç‰ˆæœ¬ã€‚æ­¤ç‰ˆæœ¬é€‚ç”¨äºä½¿ç”¨Diceå®ä¾‹è¿›è¡Œéª°å­å·ï¼›é‡‡ç”¨DiceGameåè®®ï¼›å¹¶é€šçŸ¥DiceGameDelegateå…¶è¿›åº¦ï¼š class SnakesAndLadders: DiceGame { â€‹ let finalSquare &#x3D; 25 â€‹ let dice &#x3D; Dice(sides: 6, generator: LinearCongruentialGenerator()) â€‹ var square &#x3D; 0 â€‹ var board: [Int] â€‹ init() { â€‹ board &#x3D; Array(repeating: 0, count: finalSquare + 1) â€‹ board[03] &#x3D; +08; board[06] &#x3D; +11; board[09] &#x3D; +09; board[10] &#x3D; +02 â€‹ board[14] &#x3D; -10; board[19] &#x3D; -11; board[22] &#x3D; -02; board[24] &#x3D; -08 â€‹ } â€‹ weak var delegate: DiceGameDelegate? â€‹ func play() { â€‹ square &#x3D; 0 â€‹ delegate?.gameDidStart(self) â€‹ gameLoop: while square !&#x3D; finalSquare { â€‹ let diceRoll &#x3D; dice.roll() â€‹ delegate?.game(self, didStartNewTurnWithDiceRoll: diceRoll) â€‹ switch square + diceRoll { â€‹ case finalSquare: â€‹ break gameLoop â€‹ case let newSquare where newSquare &gt; finalSquare: â€‹ continue gameLoop â€‹ default: â€‹ square +&#x3D; diceRoll â€‹ square +&#x3D; board[square] â€‹ } â€‹ } â€‹ delegate?.gameDidEnd(self) â€‹ } } æœ‰å…³è›‡å’Œæ¢¯å­æ¸¸æˆç©æ³•çš„æè¿°ï¼Œè¯·å‚é˜…Breakã€‚ è¿™ä¸ªç‰ˆæœ¬çš„æ¸¸æˆè¢«åŒ…è£…æˆä¸€ä¸ªåä¸ºSnakesAndLaddersç±»ï¼Œè¯¥ç±»é‡‡ç”¨äº†DiceGameåè®®ã€‚å®ƒæä¾›äº†ä¸€ä¸ªgettablediceå±æ€§å’Œä¸€ä¸ªplay()æ–¹æ³•ï¼Œä»¥ç¬¦åˆåè®®ã€‚ï¼ˆdiceå±æ€§è¢«å£°æ˜ä¸ºå¸¸é‡å±æ€§ï¼Œå› ä¸ºå®ƒåœ¨åˆå§‹åŒ–åä¸éœ€è¦æ›´æ”¹ï¼Œå¹¶ä¸”åè®®ä»…è¦æ±‚å®ƒå¿…é¡»æ˜¯å¯è·å–çš„ã€‚ï¼‰ Snakes and Laddersæ¸¸æˆæ¿è®¾ç½®åœ¨ç±»çš„init()åˆå§‹åŒ–å™¨ä¸­è¿›è¡Œã€‚æ‰€æœ‰æ¸¸æˆé€»è¾‘éƒ½è½¬ç§»åˆ°åè®®playæ–¹æ³•ä¸­ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨åè®®çš„å¿…éœ€diceå±æ€§æ¥æä¾›å…¶éª°å­æ»šåŠ¨å€¼ã€‚ è¯·æ³¨æ„ï¼Œdelegateå±æ€§è¢«å®šä¹‰ä¸ºå¯é€‰çš„DiceGameDelegateï¼Œå› ä¸ºç©æ¸¸æˆä¸éœ€è¦å§”æ‰˜ã€‚ç”±äºå®ƒæ˜¯å¯é€‰ç±»å‹ï¼Œdelegateå±æ€§ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºnilçš„åˆå§‹å€¼ã€‚æ­¤åï¼Œæ¸¸æˆå®ä¾‹åŒ–å™¨å¯ä»¥é€‰æ‹©å°†å±æ€§è®¾ç½®ä¸ºåˆé€‚çš„å§”æ‰˜ã€‚ç”±äºDiceGameDelegateåè®®ä»…é™ç±»ï¼Œå› æ­¤æ‚¨å¯ä»¥å£°æ˜å§”æ‰˜ä¸ºweakï¼Œä»¥é˜²æ­¢å¼•ç”¨å‘¨æœŸã€‚ DiceGameDelegateæä¾›äº†ä¸‰ç§è·Ÿè¸ªæ¸¸æˆè¿›åº¦çš„æ–¹æ³•ã€‚è¿™ä¸‰ç§æ–¹æ³•å·²çº³å…¥ä¸Šè¿°play()æ–¹æ³•ä¸­çš„æ¸¸æˆé€»è¾‘ï¼Œå¹¶åœ¨æ–°æ¸¸æˆå¼€å§‹ã€æ–°å›åˆå¼€å§‹æˆ–æ¸¸æˆç»“æŸæ—¶è°ƒç”¨ã€‚ ç”±äºdelegateå±æ€§æ˜¯å¯é€‰çš„DiceGameDelegateï¼Œå› æ­¤play()æ–¹æ³•æ¯æ¬¡åœ¨å§”æ‰˜ä¸Šè°ƒç”¨æ–¹æ³•æ—¶éƒ½ä½¿ç”¨å¯é€‰é“¾ã€‚å¦‚æœdelegateå±æ€§ä¸ºé›¶ï¼Œåˆ™è¿™äº›å§”æ‰˜è°ƒç”¨ä¼˜é›…åœ°å¤±è´¥ï¼Œæ²¡æœ‰é”™è¯¯ã€‚å¦‚æœdelegateå±æ€§éé›¶ï¼Œåˆ™è°ƒç”¨å§”æ‰˜æ–¹æ³•ï¼Œå¹¶å°†SnakesAndLadderså®ä¾‹ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ ä¸‹ä¸€ä¸ªç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ä¸ªåä¸ºDiceGameTrackerçš„ç±»ï¼Œè¯¥ç±»é‡‡ç”¨äº†DiceGameDelegateåè®®ï¼š class DiceGameTracker: DiceGameDelegate { â€‹ var numberOfTurns &#x3D; 0 â€‹ func gameDidStart(_ game: DiceGame) { â€‹ numberOfTurns &#x3D; 0 â€‹ if game is SnakesAndLadders { â€‹ print(â€œStarted a new game of Snakes and Laddersâ€) â€‹ } â€‹ print(â€œThe game is using a (game.dice.sides)-sided diceâ€) â€‹ } â€‹ func game(_ game: DiceGame, didStartNewTurnWithDiceRoll diceRoll: Int) { â€‹ numberOfTurns +&#x3D; 1 â€‹ print(â€œRolled a (diceRoll)â€) â€‹ } â€‹ func gameDidEnd(_ game: DiceGame) { â€‹ print(â€œThe game lasted for (numberOfTurns) turnsâ€) â€‹ } } DiceGameTrackerå®ç°DiceGameDelegateæ‰€éœ€çš„æ‰€æœ‰ä¸‰ç§æ–¹æ³•ã€‚å®ƒä½¿ç”¨è¿™äº›æ–¹æ³•æ¥è·Ÿè¸ªæ¸¸æˆçš„è½¬å¼¯æ¬¡æ•°ã€‚å½“æ¸¸æˆå¼€å§‹æ—¶ï¼Œå®ƒä¼šå°†anumberOfTurnså±æ€§é‡ç½®ä¸ºé›¶ï¼Œæ¯æ¬¡æ–°å›åˆå¼€å§‹æ—¶éƒ½ä¼šå¢åŠ ï¼Œå¹¶åœ¨æ¸¸æˆç»“æŸåæ‰“å°å‡ºå›åˆæ€»æ•°ã€‚ ä¸Šé¢æ˜¾ç¤ºçš„gameDidStart(_:)çš„å®ç°ä½¿ç”¨gameå‚æ•°æ‰“å°ä¸€äº›å…³äºå³å°†ç©çš„æ¸¸æˆçš„ä»‹ç»æ€§ä¿¡æ¯ã€‚gameå‚æ•°å…·æœ‰DiceGameç±»å‹ï¼Œè€Œä¸æ˜¯SnakesAndLaddersï¼Œå› æ­¤gameDidStart(_:)åªèƒ½è®¿é—®å’Œä½¿ç”¨ä½œä¸ºDiceGameåè®®ä¸€éƒ¨åˆ†å®ç°çš„æ–¹æ³•å’Œå±æ€§ã€‚ç„¶è€Œï¼Œè¯¥æ–¹æ³•ä»ç„¶èƒ½å¤Ÿä½¿ç”¨ç±»å‹è½¬æ¢æ¥æŸ¥è¯¢åº•å±‚å®ä¾‹çš„ç±»å‹ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒæ£€æŸ¥gameæ˜¯å¦å®é™…ä¸Šæ˜¯å¹•åSnakesAndLaddersçš„å®ä¾‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æ‰“å°é€‚å½“çš„æ¶ˆæ¯ã€‚ gameDidStart(_:)æ–¹æ³•è¿˜è®¿é—®ä¼ é€’gameå‚æ•°çš„diceå±æ€§ã€‚ç”±äºgameå·²çŸ¥ç¬¦åˆDiceGameåè®®ï¼Œå› æ­¤å®ƒä¿è¯å…·æœ‰diceå±æ€§ï¼Œå› æ­¤æ— è®ºç©å“ªç§æ¸¸æˆï¼ŒgameDidStart(_:)æ–¹æ³•éƒ½å¯ä»¥è®¿é—®å’Œæ‰“å°éª°å­çš„sideså±æ€§ã€‚ ä»¥ä¸‹æ˜¯DiceGameTrackeråœ¨æ“ä½œä¸­çš„æ ·å­ï¼š let tracker &#x3D; DiceGameTracker() let game &#x3D; SnakesAndLadders() game.delegate &#x3D; tracker game.play() &#x2F;&#x2F; Started a new game of Snakes and Ladders &#x2F;&#x2F; The game is using a 6-sided dice &#x2F;&#x2F; Rolled a 3 &#x2F;&#x2F; Rolled a 5 &#x2F;&#x2F; Rolled a 4 &#x2F;&#x2F; Rolled a 5 &#x2F;&#x2F; The game lasted for 4 turns é€šè¿‡æ‰©å±•æ·»åŠ åè®®ä¸€è‡´æ€§å³ä½¿æ‚¨æ— æ³•è®¿é—®ç°æœ‰ç±»å‹çš„æºä»£ç ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ‰©å±•ç°æœ‰ç±»å‹ä»¥é‡‡ç”¨å’Œéµå®ˆæ–°åè®®ã€‚æ‰©å±•å¯ä»¥å‘ç°æœ‰ç±»å‹æ·»åŠ æ–°çš„å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡ï¼Œå› æ­¤èƒ½å¤Ÿæ·»åŠ åè®®å¯èƒ½è¦æ±‚çš„ä»»ä½•è¦æ±‚ã€‚æœ‰å…³æ‰©å±•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ‰©å±•ã€‚ æ³¨æ„ å½“è¯¥ä¸€è‡´æ€§åœ¨æ‰©å±•ä¸­æ·»åŠ åˆ°å®ä¾‹çš„ç±»å‹æ—¶ï¼Œç±»å‹çš„ç°æœ‰å®ä¾‹ä¼šè‡ªåŠ¨é‡‡ç”¨å¹¶ç¬¦åˆåè®®ã€‚ ä¾‹å¦‚ï¼Œè¿™ç§åä¸ºTextRepresentableçš„åè®®å¯ä»¥é€šè¿‡ä»»ä½•å¯ä»¥è¡¨ç¤ºä¸ºæ–‡æœ¬çš„ç±»å‹å®ç°ã€‚è¿™å¯èƒ½æ˜¯å¯¹è‡ªèº«çš„æè¿°ï¼Œä¹Ÿå¯èƒ½æ˜¯å…¶å½“å‰çŠ¶æ€çš„æ–‡æœ¬ç‰ˆæœ¬ï¼š protocol TextRepresentable { â€‹ var textualDescription: String { get } } ä¸Šé¢çš„Diceå¯ä»¥æ‰©å±•åˆ°é‡‡ç”¨å¹¶ç¬¦åˆTextRepresentableï¼š extension Dice: TextRepresentable { â€‹ var textualDescription: String { â€‹ return â€œA (sides)-sided diceâ€ â€‹ } } æ­¤æ‰©å±•é‡‡ç”¨æ–°åè®®çš„æ–¹å¼ä¸Diceåœ¨å…¶åŸå§‹å®ç°ä¸­æä¾›çš„æ–¹å¼å®Œå…¨ç›¸åŒã€‚åè®®åç§°åœ¨ç±»å‹åç§°ä¹‹åæä¾›ï¼Œç”±å†’å·åˆ†éš”ï¼Œå¹¶åœ¨æ‰©å±•çš„èŠ±æ‹¬å·å†…æä¾›åè®®æ‰€æœ‰è¦æ±‚çš„å®ç°ã€‚ ä»»ä½•Diceå®ä¾‹ç°åœ¨éƒ½å¯ä»¥è¢«è§†ä¸ºTextRepresentableï¼š let d12 &#x3D; Dice(sides: 12, generator: LinearCongruentialGenerator()) print(d12.textualDescription) &#x2F;&#x2F; Prints â€œA 12-sided diceâ€ åŒæ ·ï¼ŒSnakesAndLaddersæ¸¸æˆç±»å¯ä»¥æ‰©å±•ä¸ºé‡‡ç”¨å¹¶ç¬¦åˆTextRepresentableåè®®ï¼š extension SnakesAndLadders: TextRepresentable { â€‹ var textualDescription: String { â€‹ return â€œA game of Snakes and Ladders with (finalSquare) squaresâ€ â€‹ } } print(game.textualDescription) &#x2F;&#x2F; Prints â€œA game of Snakes and Ladders with 25 squaresâ€ æœ‰æ¡ä»¶åœ°éµå®ˆåè®®åªæœ‰åœ¨ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œä¾‹å¦‚å½“ç±»å‹çš„é€šç”¨å‚æ•°ç¬¦åˆåè®®æ—¶ï¼Œé€šç”¨ç±»å‹æ‰èƒ½æ»¡è¶³åè®®çš„è¦æ±‚ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨æ‰©å±•ç±»å‹æ—¶åˆ—å‡ºçº¦æŸï¼Œä½¿æ³›å‹ç±»å‹æœ‰æ¡ä»¶åœ°ç¬¦åˆåè®®ã€‚é€šè¿‡ç¼–å†™é€šç”¨whereå­å¥ï¼Œåœ¨æ‚¨é‡‡ç”¨çš„åè®®åç§°åå†™å…¥è¿™äº›çº¦æŸã€‚æœ‰å…³é€šç”¨whereå­å¥çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…é€šç”¨whereå­å¥ã€‚ ä»¥ä¸‹æ‰©å±•ä½¿Arrayå®ä¾‹åœ¨å­˜å‚¨ç¬¦åˆTextRepresentableçš„ç±»å‹å…ƒç´ æ—¶ç¬¦åˆTextRepresentableåè®®ã€‚ extension Array: TextRepresentable where Element: TextRepresentable { â€‹ var textualDescription: String { â€‹ let itemsAsText &#x3D; self.map { $0.textualDescription } â€‹ return â€œ[â€œ + itemsAsText.joined(separator: â€œ, â€œ) + â€œ]â€ â€‹ } } let myDice &#x3D; [d6, d12] print(myDice.textualDescription) &#x2F;&#x2F; Prints â€œ[A 6-sided dice, A 12-sided dice]â€ å®£å¸ƒåè®®é€šè¿‡æ‰©å±•å¦‚æœä¸€ç§ç±»å‹å·²ç»ç¬¦åˆåè®®çš„æ‰€æœ‰è¦æ±‚ï¼Œä½†å°šæœªå£°æ˜å®ƒé‡‡ç”¨è¯¥åè®®ï¼Œæ‚¨å¯ä»¥ä½¿å…¶é‡‡ç”¨å¸¦æœ‰ç©ºæ‰©å±•åçš„åè®®ï¼š struct Hamster { â€‹ var name: String â€‹ var textualDescription: String { â€‹ return â€œA hamster named (name)â€ â€‹ } } extension Hamster: TextRepresentable {} ç°åœ¨ï¼Œåªè¦TextRepresentableæ˜¯å¿…å¡«ç±»å‹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨Hamsterå®ä¾‹ï¼š let simonTheHamster &#x3D; Hamster(name: â€œSimonâ€) let somethingTextRepresentable: TextRepresentable &#x3D; simonTheHamster print(somethingTextRepresentable.textualDescription) &#x2F;&#x2F; Prints â€œA hamster named Simonâ€ æ³¨æ„ ç±»å‹ä¸ä¼šä»…ä»…é€šè¿‡æ»¡è¶³å…¶è¦æ±‚è€Œè‡ªåŠ¨é‡‡ç”¨åè®®ã€‚ä»–ä»¬å¿…é¡»å§‹ç»ˆæ˜ç¡®å®£å¸ƒé€šè¿‡è¯¥è®®å®šä¹¦ã€‚ ä½¿ç”¨ç»¼åˆå®ç°é‡‡ç”¨åè®®åœ¨è®¸å¤šç®€å•çš„æƒ…å†µä¸‹ï¼ŒSwiftå¯ä»¥è‡ªåŠ¨ä¸ºEquatableã€Hashableå’ŒComparableæä¾›åè®®ä¸€è‡´æ€§ã€‚ä½¿ç”¨æ­¤ç»¼åˆå®ç°æ„å‘³ç€æ‚¨ä¸å¿…ç¼–å†™é‡å¤çš„æ ·æ¿ä»£ç æ¥è‡ªå·±å®ç°åè®®è¦æ±‚ã€‚ Swiftä¸ºä»¥ä¸‹ç±»å‹çš„è‡ªå®šä¹‰ç±»å‹æä¾›äº†Equatableçš„ç»¼åˆå®ç°ï¼š ä»…å­˜å‚¨ç¬¦åˆEquatableåè®®çš„å±æ€§çš„ç»“æ„ ä»…å…·æœ‰ç¬¦åˆEquatableåè®®çš„å…³è”ç±»å‹çš„æšä¸¾ æ²¡æœ‰å…³è”ç±»å‹çš„æšä¸¾ To receive a synthesized implementation of ==, declare conformance to Equatable in the file that contains the original declaration, without implementing an == operator yourself. The Equatable protocol provides a default implementation of !=. ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸‰ç»´ä½ç½®å‘é‡(x,y,z)çš„Vector3Dç»“æ„ï¼Œç±»ä¼¼äºVector2Dç»“æ„ã€‚ç”±äºxã€yå’Œzå±æ€§éƒ½æ˜¯Equatableçš„ï¼ŒVector3Dæ¥æ”¶ç­‰ä»·è¿ç®—ç¬¦çš„åˆæˆå®ç°ã€‚ struct Vector3D: Equatable { â€‹ var x &#x3D; 0.0, y &#x3D; 0.0, z &#x3D; 0.0 } let twoThreeFour &#x3D; Vector3D(x: 2.0, y: 3.0, z: 4.0) let anotherTwoThreeFour &#x3D; Vector3D(x: 2.0, y: 3.0, z: 4.0) if twoThreeFour &#x3D;&#x3D; anotherTwoThreeFour { â€‹ print(â€œThese two vectors are also equivalent.â€) } &#x2F;&#x2F; Prints â€œThese two vectors are also equivalent.â€ Swiftä¸ºä»¥ä¸‹ç±»å‹çš„è‡ªå®šä¹‰ç±»å‹æä¾›äº†Hashableçš„ç»¼åˆå®ç°ï¼š Structures that have only stored properties that conform to the Hashable protocol ä»…å…·æœ‰ç¬¦åˆHashableåè®®çš„å…³è”ç±»å‹çš„æšä¸¾ æ²¡æœ‰å…³è”ç±»å‹çš„æšä¸¾ è¦æ¥æ”¶hash(into:)çš„åˆæˆå®ç°ï¼Œè¯·åœ¨åŒ…å«åŸå§‹å£°æ˜çš„æ–‡ä»¶ä¸­å£°æ˜ä¸Hashableçš„ä¸€è‡´æ€§ï¼Œè€Œæ— éœ€è‡ªå·±å®ç°hash(into:)æ–¹æ³•ã€‚ Swiftä¸ºæ²¡æœ‰åŸå§‹å€¼çš„æšä¸¾æä¾›äº†Comparableçš„ç»¼åˆå®ç°ã€‚å¦‚æœæšä¸¾å…·æœ‰å…³è”ç±»å‹ï¼Œå®ƒä»¬éƒ½å¿…é¡»ç¬¦åˆComparableåè®®ã€‚è¦æ¥æ”¶&lt;çš„åˆæˆå®ç°ï¼Œè¯·åœ¨åŒ…å«åŸå§‹æšä¸¾å£°æ˜çš„æ–‡ä»¶ä¸­å£°æ˜ä¸€è‡´æ€§ä¸ºComparableï¼Œè€Œæ— éœ€è‡ªå·±å®ç°&lt;è¿ç®—ç¬¦ã€‚Comparableåè®®çš„é»˜è®¤å®ç°&lt;=,&gt;å’Œ&gt;=æä¾›äº†å‰©ä½™çš„æ¯”è¾ƒè¿ç®—ç¬¦ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†é’ˆå¯¹åˆå­¦è€…ã€ä¸­çº§å’Œä¸“å®¶æ¡ˆä¾‹çš„SkillLevelåˆ—ä¸¾ã€‚ä¸“å®¶è¿˜æ ¹æ®ä»–ä»¬æ‹¥æœ‰çš„æ’æ˜Ÿæ•°é‡è¿›è¡Œæ’åã€‚ enum SkillLevel: Comparable { â€‹ case beginner â€‹ case intermediate â€‹ case expert(stars: Int) } var levels &#x3D; [SkillLevel.intermediate, SkillLevel.beginner, â€‹ SkillLevel.expert(stars: 5), SkillLevel.expert(stars: 3)] for level in levels.sorted() { â€‹ print(level) } &#x2F;&#x2F; Prints â€œbeginnerâ€ &#x2F;&#x2F; Prints â€œintermediateâ€ &#x2F;&#x2F; Prints â€œexpert(stars: 3)â€ &#x2F;&#x2F; Prints â€œexpert(stars: 5)â€ åè®®ç±»å‹çš„é›†åˆåè®®å¯ä»¥ç”¨ä½œå­˜å‚¨åœ¨é›†åˆä¸­çš„ç±»å‹ï¼Œå¦‚æ•°ç»„æˆ–å­—å…¸ï¼Œå¦‚åè®®ä¸­æ‰€è¿°ã€‚æ­¤ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªTextRepresentableäº‹ç‰©æ•°ç»„ï¼š let things: [TextRepresentable] &#x3D; [game, d12, simonTheHamster] ç°åœ¨å¯ä»¥è¿­ä»£æ•°ç»„ä¸­çš„é¡¹ç›®ï¼Œå¹¶æ‰“å°æ¯ä¸ªé¡¹ç›®çš„æ–‡æœ¬æè¿°ï¼š for thing in things { â€‹ print(thing.textualDescription) } &#x2F;&#x2F; A game of Snakes and Ladders with 25 squares &#x2F;&#x2F; A 12-sided dice &#x2F;&#x2F; A hamster named Simon è¯·æ³¨æ„ï¼Œå¸¸é‡ä¸ºTextRepresentableç±»å‹ã€‚å®ƒä¸æ˜¯Diceã€orDiceGameæˆ–Hamsterç±»å‹ï¼Œå³ä½¿å¹•åçš„å®é™…å®ä¾‹æ˜¯è¿™äº›ç±»å‹ä¹‹ä¸€ã€‚å°½ç®¡å¦‚æ­¤ï¼Œç”±äºå…¶ç±»å‹ä¸ºTextRepresentableï¼Œå¹¶ä¸”å·²çŸ¥ä»»ä½•TextRepresentableéƒ½å…·æœ‰textualDescriptionå±æ€§ï¼Œå› æ­¤æ¯æ¬¡é€šè¿‡å¾ªç¯è®¿é—®thing.textualDescriptionéƒ½æ˜¯å®‰å…¨çš„ã€‚ åè®®ç»§æ‰¿åè®®å¯ä»¥ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–åè®®ï¼Œå¹¶å¯ä»¥åœ¨ç»§æ‰¿çš„è¦æ±‚ä¹‹å¤–æ·»åŠ è¿›ä¸€æ­¥çš„è¦æ±‚ã€‚åè®®ç»§æ‰¿çš„è¯­æ³•ç±»ä¼¼äºç±»ç»§æ‰¿çš„è¯­æ³•ï¼Œä½†å¯ä»¥é€‰æ‹©åˆ—å‡ºå¤šä¸ªç»§æ‰¿çš„åè®®ï¼Œç”¨é€—å·åˆ†éš”ï¼š protocol InheritingProtocol: SomeProtocol, AnotherProtocol { â€‹ &#x2F;&#x2F; protocol definition goes here } ä»¥ä¸‹æ˜¯ä»ä¸Šé¢ç»§æ‰¿TextRepresentableåè®®çš„åè®®ç¤ºä¾‹ï¼š protocol PrettyTextRepresentable: TextRepresentable { â€‹ var prettyTextualDescription: String { get } } This example defines a new protocol, PrettyTextRepresentable, which inherits from TextRepresentable. Anything that adopts PrettyTextRepresentable must satisfy all of the requirements enforced by TextRepresentable, plus the additional requirements enforced by PrettyTextRepresentable. In this example, PrettyTextRepresentable adds a single requirement to provide a gettable property called prettyTextualDescription that returns a String. SnakesAndLaddersç±»å¯ä»¥æ‰©å±•åˆ°é‡‡ç”¨å¹¶ç¬¦åˆPrettyTextRepresentableï¼š extension SnakesAndLadders: PrettyTextRepresentable { â€‹ var prettyTextualDescription: String { â€‹ var output &#x3D; textualDescription + â€œ:\\nâ€ â€‹ for index in 1â€¦finalSquare { â€‹ switch board[index] { â€‹ case let ladder where ladder &gt; 0: â€‹ output +&#x3D; â€œâ–² â€œ â€‹ case let snake where snake &lt; 0: â€‹ output +&#x3D; â€œâ–¼ â€œ â€‹ default: â€‹ output +&#x3D; â€œâ—‹ â€œ â€‹ } â€‹ } â€‹ return output â€‹ } } æ­¤æ‰©å±•å£°æ˜å®ƒé‡‡ç”¨PrettyTextRepresentableåè®®ï¼Œå¹¶ä¸ºSnakesAndLaddersç±»å‹æä¾›äº† prettyTextualDescriptionå±æ€§çš„å®ç°ã€‚ä»»ä½•PrettyTextRepresentableéƒ½å¿…é¡»æ˜¯TextRepresentableï¼Œå› æ­¤prettyTextualDescriptionçš„å®ç°ä»TextRepresentableåè®®è®¿é—®textualDescriptionå±æ€§å¼€å§‹ï¼Œä»¥å¯åŠ¨è¾“å‡ºå­—ç¬¦ä¸²ã€‚å®ƒé™„åŠ å†’å·å’Œæ¢è¡Œç¬¦ï¼Œå¹¶å°†å…¶ç”¨ä½œå…¶æ¼‚äº®æ–‡æœ¬è¡¨ç¤ºçš„å¼€å§‹ã€‚ç„¶åï¼Œå®ƒé€šè¿‡æ¿æ­£æ–¹å½¢é˜µåˆ—è¿­ä»£ï¼Œå¹¶é™„åŠ ä¸€ä¸ªå‡ ä½•å½¢çŠ¶æ¥è¡¨ç¤ºæ¯ä¸ªæ­£æ–¹å½¢çš„å†…å®¹ï¼š å¦‚æœæ­£æ–¹å½¢çš„å€¼å¤§äº0ï¼Œå®ƒæ˜¯æ¢¯å­çš„åº•éƒ¨ï¼Œå¹¶ç”¨â–²è¡¨ç¤ºã€‚ å¦‚æœæ­£æ–¹å½¢çš„å€¼å°äº0ï¼Œé‚£å°±æ˜¯è›‡çš„å¤´ï¼Œå¹¶ç”¨â–¼è¡¨ç¤ºã€‚ å¦åˆ™ï¼Œæ­£æ–¹å½¢çš„å€¼ä¸º0ï¼Œå®ƒæ˜¯ä¸€ä¸ªâ€œè‡ªç”±â€æ­£æ–¹å½¢ï¼Œç”±â—‹è¡¨ç¤ºã€‚ prettyTextualDescriptionå±æ€§ç°åœ¨å¯ç”¨äºæ‰“å°ä»»ä½•SnakesAndLadderså®ä¾‹çš„æ¼‚äº®æ–‡æœ¬æè¿°ï¼š print(game.prettyTextualDescription) &#x2F;&#x2F; A game of Snakes and Ladders with 25 squares: &#x2F;&#x2F; â—‹ â—‹ â–² â—‹ â—‹ â–² â—‹ â—‹ â–² â–² â—‹ â—‹ â—‹ â–¼ â—‹ â—‹ â—‹ â—‹ â–¼ â—‹ â—‹ â–¼ â—‹ â–¼ â—‹ ä»…ç±»åè®®æ‚¨å¯ä»¥é€šè¿‡å°†AnyObjectåè®®æ·»åŠ åˆ°åè®®çš„ç»§æ‰¿åˆ—è¡¨ä¸­æ¥å°†åè®®é‡‡ç”¨é™åˆ¶ä¸ºç±»ç±»å‹ï¼ˆè€Œä¸æ˜¯ç»“æ„æˆ–æšä¸¾ï¼‰ã€‚ protocol SomeClassOnlyProtocol: AnyObject, SomeInheritedProtocol { â€‹ &#x2F;&#x2F; class-only protocol definition goes here } åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒSomeClassOnlyProtocolåªèƒ½ç”±ç±»ç±»å‹é‡‡ç”¨ã€‚ç¼–å†™è¯•å›¾é‡‡ç”¨SomeClassOnlyProtocolçš„ç»“æ„æˆ–æšä¸¾å®šä¹‰æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ã€‚ æ³¨æ„ å½“è¯¥åè®®è¦æ±‚å®šä¹‰çš„è¡Œä¸ºå‡è®¾æˆ–è¦æ±‚ç¬¦åˆçš„ç±»å‹å…·æœ‰å‚è€ƒè¯­ä¹‰è€Œä¸æ˜¯å€¼è¯­ä¹‰æ—¶ï¼Œè¯·ä½¿ç”¨ä»…ç±»åè®®ã€‚æœ‰å…³å¼•ç”¨å’Œå€¼è¯­ä¹‰çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ç»“æ„å’Œæšä¸¾æ˜¯å€¼ç±»å‹ï¼Œç±»æ˜¯å‚è€ƒç±»å‹ã€‚ ç¤¼å®¾ç»„æˆè¦æ±‚ä¸€ç§ç±»å‹åŒæ—¶éµå®ˆå¤šä¸ªåè®®å¯èƒ½æ˜¯æœ‰ç”¨çš„ã€‚æ‚¨å¯ä»¥å°†å¤šä¸ªåè®®ç»„åˆæˆä¸€ä¸ªå¸¦æœ‰åè®®ç»„åˆçš„å•ä¸ªéœ€æ±‚ã€‚åè®®ç»„åˆçš„è¡Œä¸ºå°±å¥½åƒæ‚¨å®šä¹‰äº†ä¸€ä¸ªä¸´æ—¶æœ¬åœ°åè®®ï¼Œè¯¥åè®®å…·æœ‰ç»„åˆä¸­æ‰€æœ‰åè®®çš„ç»„åˆè¦æ±‚ã€‚åè®®ç»„åˆæ²¡æœ‰å®šä¹‰ä»»ä½•æ–°çš„åè®®ç±»å‹ã€‚ Protocol compositions have the form SomeProtocol &amp; AnotherProtocol. You can list as many protocols as you need, separating them with ampersands (&amp;). In addition to its list of protocols, a protocol composition can also contain one class type, which you can use to specify a required superclass. ä»¥ä¸‹æ˜¯ä¸€ä¸ªå°†ä¸¤ä¸ªåä¸ºNamedå’ŒAgedçš„åè®®ç»„åˆæˆå‡½æ•°å‚æ•°ä¸Šçš„å•ä¸ªåè®®ç»„åˆè¦æ±‚çš„ç¤ºä¾‹ï¼š protocol Named { â€‹ var name: String { get } } protocol Aged { â€‹ var age: Int { get } } struct Person: Named, Aged { â€‹ var name: String â€‹ var age: Int } func wishHappyBirthday(to celebrator: Named &amp; Aged) { â€‹ print(â€œHappy birthday, (celebrator.name), youâ€™re (celebrator.age)!â€) } let birthdayPerson &#x3D; Person(name: â€œMalcolmâ€, age: 21) wishHappyBirthday(to: birthdayPerson) &#x2F;&#x2F; Prints â€œHappy birthday, Malcolm, youâ€™re 21!â€ åœ¨æœ¬ä¾‹ä¸­ï¼ŒNamedåè®®å¯¹åä¸ºnameçš„å¯è·å–Stringå±æ€§æœ‰ä¸€ä¸ªå•ä¸€è¦æ±‚ã€‚Agedåè®®å¯¹å¯å–çš„Intå±æ€§è°ƒç”¨å…·æœ‰å•ä¸€è¦æ±‚ã€‚è¿™ä¸¤ç§åè®®éƒ½ç”±ä¸€ä¸ªåä¸ºPersonçš„ç»“æ„é‡‡ç”¨ã€‚ The example also defines a wishHappyBirthday(to:) function. The type of the celebratorparameter is Named &amp; Aged, which means â€œany type that conforms to both the Named and Aged protocols.â€ It doesnâ€™t matter which specific type is passed to the function, as long as it conforms to both of the required protocols. ç„¶åï¼Œè¯¥ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªåä¸ºbirthdayPersonçš„æ–°Personå®ä¾‹ï¼Œå¹¶å°†æ­¤æ–°å®ä¾‹ä¼ é€’ç»™wishHappyBirthday(to:)å‡½æ•°ã€‚ç”±äºPersonç¬¦åˆè¿™ä¸¤ç§åè®®ï¼Œå› æ­¤æ­¤é€šè¯æ˜¯æœ‰æ•ˆçš„ï¼ŒwishHappyBirthday(to:)åŠŸèƒ½å¯ä»¥æ‰“å°å…¶ç”Ÿæ—¥é—®å€™è¯­ã€‚ ä»¥ä¸‹æ˜¯å°†ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­çš„Namedåè®®ä¸aLocationç±»ç›¸ç»“åˆçš„ç¤ºä¾‹ï¼š class Location { â€‹ var latitude: Double â€‹ var longitude: Double â€‹ init(latitude: Double, longitude: Double) { â€‹ self.latitude &#x3D; latitude â€‹ self.longitude &#x3D; longitude â€‹ } } class City: Location, Named { â€‹ var name: String â€‹ init(name: String, latitude: Double, longitude: Double) { â€‹ self.name &#x3D; name â€‹ super.init(latitude: latitude, longitude: longitude) â€‹ } } func beginConcert(in location: Location &amp; Named) { â€‹ print(â€œHello, (location.name)!â€) } let seattle &#x3D; City(name: â€œSeattleâ€, latitude: 47.6, longitude: -122.3) beginConcert(in: seattle) &#x2F;&#x2F; Prints â€œHello, Seattle!â€ The beginConcert(in:) function takes a parameter of type Location &amp; Named, which means â€œany type thatâ€™s a subclass of Location and that conforms to the Named protocol.â€ In this case, City satisfies both requirements. Passing birthdayPerson to the beginConcert(in:) function is invalid because Person isnâ€™t a subclass of Location. Likewise, if you made a subclass of Location that didnâ€™t conform to the Named protocol, calling beginConcert(in:) with an instance of that type is also invalid. æ£€æŸ¥åè®®ä¸€è‡´æ€§æ‚¨å¯ä»¥ä½¿ç”¨ç±»å‹è½¬æ¢ä¸­æè¿°çš„iså’Œasè¿ç®—ç¬¦æ¥æ£€æŸ¥åè®®ä¸€è‡´æ€§ï¼Œå¹¶è½¬æ¢ä¸ºç‰¹å®šåè®®ã€‚æ£€æŸ¥å’Œè½¬æ¢åˆ°åè®®éµå¾ªä¸æ£€æŸ¥å’Œè½¬æ¢åˆ°ç±»å‹å®Œå…¨ç›¸åŒçš„è¯­æ³•ï¼š å¦‚æœå®ä¾‹ç¬¦åˆåè®®ï¼Œåˆ™isè¿ç®—ç¬¦è¿”å›trueï¼Œå¦‚æœä¸ç¬¦åˆåè®®ï¼Œåˆ™è¿”å›falseã€‚ as?å‘ä¸‹è½¬æ¢è¿ç®—ç¬¦çš„ç‰ˆæœ¬è¿”å›åè®®ç±»å‹çš„å¯é€‰å€¼ï¼Œå¦‚æœå®ä¾‹ä¸ç¬¦åˆè¯¥åè®®ï¼Œåˆ™è¯¥å€¼ä¸ºnilã€‚ as!ä¸‹è°ƒè¿ç®—ç¬¦çš„ç‰ˆæœ¬å°†ä¸‹è°ƒå¼ºåˆ¶åˆ°åè®®ç±»å‹ï¼Œå¦‚æœä¸‹è°ƒå¤±è´¥ï¼Œåˆ™è§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚ æ­¤ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºHasAreaåè®®ï¼Œå…·æœ‰ç§°ä¸ºareaçš„å¯è·å–Doubleå±æ€§çš„å•ä¸ªå±æ€§è¦æ±‚ï¼š protocol HasArea { â€‹ var area: Double { get } } ä»¥ä¸‹æ˜¯ä¸¤ä¸ªç±»åˆ«ï¼ŒCircleå’ŒCountryï¼Œå®ƒä»¬éƒ½ç¬¦åˆHasAreaåè®®ï¼š class Circle: HasArea { â€‹ let pi &#x3D; 3.1415927 â€‹ var radius: Double â€‹ var area: Double { return pi * radius * radius } â€‹ init(radius: Double) { self.radius &#x3D; radius } } class Country: HasArea { â€‹ var area: Double â€‹ init(area: Double) { self.area &#x3D; area } } Circleç±»åŸºäºå­˜å‚¨radiuså±æ€§å°†areaå±æ€§è¦æ±‚ä½œä¸ºè®¡ç®—å±æ€§å®ç°ã€‚Countryç±»ç›´æ¥ä½œä¸ºå­˜å‚¨å±æ€§å®ç°areaè¦æ±‚ã€‚è¿™ä¸¤ä¸ªç±»éƒ½æ­£ç¡®åœ°ç¬¦åˆHasAreaåè®®ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªåä¸ºAnimalçš„ç±»ï¼Œå®ƒä¸ç¬¦åˆHasAreaåè®®ï¼š class Animal { â€‹ var legs: Int â€‹ init(legs: Int) { self.legs &#x3D; legs } } Circleã€Countryå’ŒAnimalç±»æ²¡æœ‰å…±äº«çš„åŸºç±»ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå®ƒä»¬éƒ½æ˜¯ç±»ï¼Œå› æ­¤æ‰€æœ‰ä¸‰ç§ç±»å‹çš„å®ä¾‹éƒ½å¯ä»¥ç”¨äºåˆå§‹åŒ–å­˜å‚¨ç±»å‹AnyObjectå€¼çš„æ•°ç»„ï¼š let objects: [AnyObject] &#x3D; [ â€‹ Circle(radius: 2.0), â€‹ Country(area: 243_610), â€‹ Animal(legs: 4) ] objectsæ•°ç»„åˆå§‹åŒ–ä¸ºæ•°ç»„æ–‡å­—ï¼Œå…¶ä¸­åŒ…å«åŠå¾„ä¸º2ä¸ªå•ä½çš„Circleå®ä¾‹ï¼›ä»¥è‹±å›½è¡¨é¢ç§¯ï¼ˆå¹³æ–¹å…¬é‡Œï¼‰åˆå§‹åŒ–Countryå®ä¾‹ï¼›ä»¥åŠå››ä¸ªè…¿çš„Animalå®ä¾‹ã€‚ ç°åœ¨å¯ä»¥è¿­ä»£objectsæ•°ç»„ï¼Œå¹¶ä¸”å¯ä»¥æ£€æŸ¥æ•°ç»„ä¸­çš„æ¯ä¸ªå¯¹è±¡ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦ç¬¦åˆHasAreaåè®®ï¼š for object in objects { â€‹ if let objectWithArea &#x3D; object as? HasArea { â€‹ print(â€œArea is (objectWithArea.area)â€) â€‹ } else { â€‹ print(â€œSomething that doesnâ€™t have an areaâ€) â€‹ } } &#x2F;&#x2F; Area is 12.5663708 &#x2F;&#x2F; Area is 243610.0 &#x2F;&#x2F; Something that doesnâ€™t have an area Whenever an object in the array conforms to the HasArea protocol, the optional value returned by the as? operator is unwrapped with optional binding into a constant called objectWithArea. The objectWithArea constant is known to be of type HasArea, and so its area property can be accessed and printed in a type-safe way. è¯·æ³¨æ„ï¼ŒåŸºç¡€å¯¹è±¡ä¸ä¼šå› é“¸é€ è¿‡ç¨‹è€Œæ”¹å˜ã€‚ä»–ä»¬ä»ç„¶æ˜¯Circleã€Countryå’ŒAnimalã€‚ç„¶è€Œï¼Œå½“å®ƒä»¬å­˜å‚¨åœ¨objectWithAreaå¸¸é‡ä¸­æ—¶ï¼Œå®ƒä»¬åªçŸ¥é“æ˜¯HasAreaç±»å‹ï¼Œå› æ­¤åªèƒ½è®¿é—®å®ƒä»¬areaå±æ€§ã€‚ ã€Šä»»æ‹©è®®å®šä¹¦ã€‹è¦æ±‚æ‚¨å¯ä»¥å®šä¹‰åè®®çš„å¯é€‰è¦æ±‚ã€‚è¿™äº›è¦æ±‚ä¸å¿…ç”±ç¬¦åˆåè®®çš„ç±»å‹å®ç°ã€‚ä½œä¸ºåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼Œå¯é€‰è¦æ±‚å‰ç¼€ä¸ºoptionalé¥°ç¬¦ã€‚å¯é€‰è¦æ±‚å¯ç”¨ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ç¼–å†™ä¸Objective-Cäº’æ“ä½œçš„ä»£ç ã€‚åè®®å’Œå¯é€‰è¦æ±‚éƒ½å¿…é¡»ç”¨@objcå±æ€§æ ‡è®°ã€‚è¯·æ³¨æ„ï¼Œ@objcåè®®åªèƒ½ç”±ä»Objective-Cç±»æˆ–å…¶ä»–@objcç±»ç»§æ‰¿çš„ç±»é‡‡ç”¨ã€‚å®ƒä»¬ä¸èƒ½è¢«ç»“æ„æˆ–æšä¸¾æ‰€é‡‡ç”¨ã€‚ å½“æ‚¨åœ¨å¯é€‰éœ€æ±‚ä¸­ä½¿ç”¨æ–¹æ³•æˆ–å±æ€§æ—¶ï¼Œå…¶ç±»å‹ä¼šè‡ªåŠ¨æˆä¸ºå¯é€‰ç±»å‹ã€‚ä¾‹å¦‚ï¼Œç±»å‹(Int)-&gt;Stringçš„æ–¹æ³•å˜ä¸º((Int)-&gt;String)?è¯·æ³¨æ„ï¼Œæ•´ä¸ªå‡½æ•°ç±»å‹åŒ…è£…åœ¨å¯é€‰ä¸­ï¼Œè€Œä¸æ˜¯æ–¹æ³•çš„è¿”å›å€¼ä¸­ã€‚ å¯é€‰åè®®è¦æ±‚å¯ä»¥é€šè¿‡å¯é€‰é“¾è°ƒç”¨ï¼Œä»¥è§£é‡Šè¯¥è¦æ±‚ä¸æ˜¯ç”±ç¬¦åˆåè®®çš„ç±»å‹å®ç°çš„å¯èƒ½æ€§ã€‚è°ƒç”¨å¯é€‰æ–¹æ³•æ—¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨æ–¹æ³•åç§°åå†™ä¸€ä¸ªé—®å·æ¥æ£€æŸ¥å…¶å®ç°ï¼Œä¾‹å¦‚someOptionalMethod?(someArgument)æœ‰å…³å¯é€‰é“¾çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…å¯é€‰é“¾ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºCounterçš„æ•´æ•°è®¡æ•°ç±»ï¼Œè¯¥ç±»ä½¿ç”¨å¤–éƒ¨æ•°æ®æºæ¥æä¾›å…¶å¢é‡ã€‚æ­¤æ•°æ®æºç”±CounterDataSourceåè®®å®šä¹‰ï¼Œè¯¥åè®®æœ‰ä¸¤ä¸ªå¯é€‰è¦æ±‚ï¼š @objc protocol CounterDataSource { â€‹ @objc optional func increment(forCount count: Int) -&gt; Int â€‹ @objc optional var fixedIncrement: Int { get } } CounterDataSourceåè®®å®šä¹‰äº†ä¸€ä¸ªåä¸ºincrement(forCount:)çš„å¯é€‰æ–¹æ³•è¦æ±‚å’Œä¸€ä¸ªåä¸ºfixedIncrementå¯é€‰å±æ€§è¦æ±‚ã€‚è¿™äº›è¦æ±‚å®šä¹‰äº†æ•°æ®æºä¸ºCounterå®ä¾‹æä¾›é€‚å½“å¢é‡çš„ä¸¤ç§ä¸åŒæ–¹å¼ã€‚ æ³¨æ„ ä¸¥æ ¼æ¥è¯´ï¼Œæ‚¨å¯ä»¥ç¼–å†™ç¬¦åˆCounterDataSourceçš„è‡ªå®šä¹‰ç±»ï¼Œè€Œæ— éœ€å®ç°ä»»ä¸€åè®®è¦æ±‚ã€‚æ¯•ç«Ÿï¼Œå®ƒä»¬éƒ½æ˜¯å¯é€‰çš„ã€‚è™½ç„¶æŠ€æœ¯ä¸Šå…è®¸ï¼Œä½†è¿™ä¸ä¼šæˆä¸ºä¸€ä¸ªéå¸¸å¥½çš„æ•°æ®æºã€‚ ä¸‹é¢å®šä¹‰çš„Counterç±»å…·æœ‰typeCounterDataSourceCounterDataSource?çš„å¯é€‰dataSourceå±æ€§ï¼š class Counter { â€‹ var count &#x3D; 0 â€‹ var dataSource: CounterDataSource? â€‹ func increment() { â€‹ if let amount &#x3D; dataSource?.increment?(forCount: count) { â€‹ count +&#x3D; amount â€‹ } else if let amount &#x3D; dataSource?.fixedIncrement { â€‹ count +&#x3D; amount â€‹ } â€‹ } } Counterç±»å°†å…¶å½“å‰å€¼å­˜å‚¨åœ¨ç§°ä¸ºcountçš„å˜é‡å±æ€§ä¸­ã€‚Counterç±»è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸ºincrementçš„æ–¹æ³•ï¼Œæ¯æ¬¡è°ƒç”¨æ–¹æ³•æ—¶éƒ½ä¼šå¢åŠ countå±æ€§ã€‚ increment()æ–¹æ³•é¦–å…ˆå°è¯•é€šè¿‡åœ¨å…¶æ•°æ®æºä¸ŠæŸ¥æ‰¾increment(forCount:)æ–¹æ³•çš„å®ç°æ¥æ£€ç´¢å¢é‡ã€‚increment()æ–¹æ³•ä½¿ç”¨å¯é€‰é“¾æ¥å°è¯•è°ƒç”¨increment(forCount:)å¹¶å°†currentcountå€¼ä½œä¸ºæ–¹æ³•çš„å•ä¸ªå‚æ•°ä¼ é€’ã€‚ è¯·æ³¨æ„ï¼Œä¸¤ä¸ªçº§åˆ«çš„å¯é€‰é“¾åœ¨è¿™é‡Œèµ·ä½œç”¨ã€‚é¦–å…ˆï¼ŒdataSourceå¯èƒ½ä¸ºnilï¼Œå› æ­¤dataSourceåç§°åæœ‰ä¸€ä¸ªé—®å·ï¼Œè¡¨ç¤ºåªæœ‰å½“dataSourceä¸æ˜¯nilæ‰åº”è°ƒç”¨increment(forCount:)ï¼‰ã€‚å…¶æ¬¡ï¼Œå³ä½¿dataSourceç¡®å®å­˜åœ¨ï¼Œä¹Ÿä¸èƒ½ä¿è¯å®ƒå®ç°increment(forCount:)å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¯é€‰è¦æ±‚ã€‚åœ¨è¿™é‡Œï¼Œincrement(forCount:)å¯èƒ½æ— æ³•å®ç°çš„å¯èƒ½æ€§ä¹Ÿé€šè¿‡å¯é€‰é“¾å¤„ç†ã€‚åªæœ‰å½“increment(forCount:)å­˜åœ¨æ—¶ï¼Œæ‰ä¼šè°ƒç”¨increment(forCount:)ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå®ƒä¸æ˜¯nilã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆincrement(forCount:)åœ¨åç§°åé¢ä¹Ÿç”¨é—®å·ä¹¦å†™ã€‚ Because the call to increment(forCount:) can fail for either of these two reasons, the call returns an optional Int value. This is true even though increment(forCount:) is defined as returning a non-optional Int value in the definition of CounterDataSource. Even though there are two optional chaining operations, one after another, the result is still wrapped in a single optional. For more information about using multiple optional chaining operations, see Linking Multiple Levels of Chaining. è°ƒç”¨increment(forCount:)åï¼Œå®ƒè¿”å›çš„å¯é€‰Intä½¿ç”¨å¯é€‰ç»‘å®šè§£åŒ…è£…æˆä¸€ä¸ªå¸¸é‡ç§°ä¸ºamountã€‚å¦‚æœå¯é€‰çš„Intç¡®å®åŒ…å«ä¸€ä¸ªå€¼â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå§”æ‰˜å’Œæ–¹æ³•éƒ½å­˜åœ¨ï¼Œå¹¶ä¸”æ–¹æ³•è¿”å›äº†ä¸€ä¸ªå€¼â€”â€”åˆ™æœªåŒ…è£…çš„amountå°†æ·»åŠ åˆ°å­˜å‚¨countå±æ€§ä¸­ï¼Œå¹¶ä¸”å¢é‡å®Œæˆã€‚ å¦‚æœæ— æ³•ä»increment(forCount:)æ–¹æ³•ä¸­æ£€ç´¢å€¼â€”â€”è¦ä¹ˆæ˜¯å› ä¸ºdataSourceä¸ºé›¶ï¼Œè¦ä¹ˆæ˜¯å› ä¸ºæ•°æ®æºæ²¡æœ‰å®ç°increment(forCount:)â€”â€”é‚£ä¹ˆincrement()æ–¹æ³•ä¼šå°è¯•ä»æ•°æ®æºçš„fixedIncrementå±æ€§ä¸­æ£€ç´¢å€¼ã€‚fixedIncrementå±æ€§ä¹Ÿæ˜¯å¯é€‰è¦æ±‚ï¼Œå› æ­¤å…¶å€¼æ˜¯å¯é€‰çš„Intå€¼ï¼Œå³ä½¿fixedIncrementè¢«å®šä¹‰ä¸ºéå¯é€‰çš„Intå±æ€§ï¼Œä½œä¸ºCounterDataSourceåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚ è¿™æ˜¯ä¸€ä¸ªç®€å•çš„CounterDataSourceå®ç°ï¼Œå…¶ä¸­æ•°æ®æºæ¯æ¬¡æŸ¥è¯¢æ—¶éƒ½ä¼šè¿”å›3çš„å¸¸é‡å€¼ã€‚å®ƒé€šè¿‡å®ç°å¯é€‰fixedIncrementå±æ€§è¦æ±‚æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š class ThreeSource: NSObject, CounterDataSource { â€‹ let fixedIncrement &#x3D; 3 } æ‚¨å¯ä»¥ä½¿ç”¨ThreeSourceå®ä¾‹ä½œä¸ºæ–°Counterå®ä¾‹çš„æ•°æ®æºï¼š var counter &#x3D; Counter() counter.dataSource &#x3D; ThreeSource() for _ in 1â€¦4 { â€‹ counter.increment() â€‹ print(counter.count) } &#x2F;&#x2F; 3 &#x2F;&#x2F; 6 &#x2F;&#x2F; 9 &#x2F;&#x2F; 12 ä¸Šé¢çš„ä»£ç åˆ›å»ºä¸€ä¸ªæ–°çš„Counterå®ä¾‹ï¼›å°†å…¶æ•°æ®æºè®¾ç½®ä¸ºnewThreeSourceå®ä¾‹ï¼›å¹¶å››æ¬¡è°ƒç”¨counterçš„increment()æ–¹æ³•ã€‚ä¸å‡ºæ‰€æ–™ï¼Œæ¯æ¬¡è°ƒç”¨increment()æ—¶ï¼Œè®¡æ•°å™¨çš„countå±æ€§éƒ½ä¼šå¢åŠ ä¸‰ä¸ªã€‚ Hereâ€™s a more complex data source called TowardsZeroSource, which makes a Counterinstance count up or down towards zero from its current count value: class TowardsZeroSource: NSObject, CounterDataSource { â€‹ func increment(forCount count: Int) -&gt; Int { â€‹ if count &#x3D;&#x3D; 0 { â€‹ return 0 â€‹ } else if count &lt; 0 { â€‹ return 1 â€‹ } else { â€‹ return -1 â€‹ } â€‹ } } The TowardsZeroSource class implements the optional increment(forCount:) method from the CounterDataSource protocol and uses the count argument value to work out which direction to count in. If count is already zero, the method returns 0 to indicate that no further counting should take place. You can use an instance of TowardsZeroSource with the existing Counter instance to count from -4 to zero. Once the counter reaches zero, no more counting takes place: counter.count &#x3D; -4 counter.dataSource &#x3D; TowardsZeroSource() for _ in 1â€¦5 { â€‹ counter.increment() â€‹ print(counter.count) } &#x2F;&#x2F; -3 &#x2F;&#x2F; -2 &#x2F;&#x2F; -1 &#x2F;&#x2F; 0 &#x2F;&#x2F; 0 åè®®æ‰©å±•åè®®å¯ä»¥æ‰©å±•åˆ°å‘ç¬¦åˆè¦æ±‚çš„ç±»å‹æä¾›æ–¹æ³•ã€åˆå§‹åŒ–å™¨ã€ä¸‹æ ‡å’Œè®¡ç®—å±æ€§å®ç°ã€‚è¿™å…è®¸æ‚¨å®šä¹‰åè®®æœ¬èº«çš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯åœ¨æ¯ç§ç±»å‹çš„å•ä¸ªä¸€è‡´æ€§æˆ–å…¨å±€å‡½æ•°ä¸­ã€‚ ä¾‹å¦‚ï¼ŒRandomNumberGeneratoråè®®å¯ä»¥æ‰©å±•åˆ°æä¾›arandomBoolrandomBool()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨æ‰€éœ€çš„random()æ–¹æ³•çš„ç»“æœè¿”å›éšæœºBoolå€¼ï¼š extension RandomNumberGenerator { â€‹ func randomBool() -&gt; Bool { â€‹ return random() &gt; 0.5 â€‹ } } é€šè¿‡åœ¨åè®®ä¸Šåˆ›å»ºæ‰©å±•ï¼Œæ‰€æœ‰ç¬¦åˆçš„ç±»å‹éƒ½ä¼šè‡ªåŠ¨è·å¾—æ­¤æ–¹æ³•å®ç°ï¼Œè€Œæ— éœ€ä»»ä½•é¢å¤–çš„ä¿®æ”¹ã€‚ let generator &#x3D; LinearCongruentialGenerator() print(â€œHereâ€™s a random number: (generator.random())â€) &#x2F;&#x2F; Prints â€œHereâ€™s a random number: 0.3746499199817101â€ print(â€œAnd hereâ€™s a random Boolean: (generator.randomBool())â€) &#x2F;&#x2F; Prints â€œAnd hereâ€™s a random Boolean: trueâ€ åè®®æ‰©å±•å¯ä»¥å‘ç¬¦åˆè¦æ±‚çš„ç±»å‹æ·»åŠ å®ç°ï¼Œä½†ä¸èƒ½ä½¿åè®®æ‰©å±•æˆ–ä»å…¶ä»–åè®®ç»§æ‰¿ã€‚åè®®ç»§æ‰¿æ€»æ˜¯åœ¨åè®®å£°æ˜æœ¬èº«ä¸­æŒ‡å®šã€‚ æä¾›é»˜è®¤å®ç°æ‚¨å¯ä»¥ä½¿ç”¨åè®®æ‰©å±•ä¸ºè¯¥åè®®çš„ä»»ä½•æ–¹æ³•æˆ–è®¡ç®—å±æ€§è¦æ±‚æä¾›é»˜è®¤å®ç°ã€‚å¦‚æœç¬¦åˆçš„ç±»å‹æä¾›äº†è‡ªå·±å®ç°æ‰€éœ€çš„æ–¹æ³•æˆ–å±æ€§ï¼Œåˆ™å°†ä½¿ç”¨è¯¥å®ç°è€Œä¸æ˜¯æ‰©å±•æä¾›çš„å®ç°ã€‚ æ³¨æ„ æ‰©å±•æä¾›çš„é»˜è®¤å®ç°çš„åè®®è¦æ±‚ä¸ä»»æ‹©è®®å®šä¹¦è¦æ±‚ä¸åŒã€‚è™½ç„¶ç¬¦åˆè¦æ±‚çš„ç±»å‹ä¸å¿…æä¾›å®ƒä»¬è‡ªå·±çš„å®ç°ï¼Œä½†å¯ä»¥è°ƒç”¨é»˜è®¤å®ç°çš„éœ€æ±‚ï¼Œè€Œæ— éœ€å¯é€‰çš„é“¾å¼ã€‚ ä¾‹å¦‚ï¼Œç»§æ‰¿TextRepresentableåè®®çš„PrettyTextRepresentableåè®®å¯ä»¥æä¾›å…¶resedprettyTextualDescriptionå±æ€§çš„é»˜è®¤å®ç°ï¼Œä»¥ç®€å•åœ°è¿”å›è®¿é—®textualDescriptionå±æ€§çš„ç»“æœï¼š extension PrettyTextRepresentable { â€‹ var prettyTextualDescription: String { â€‹ return textualDescription â€‹ } } ä¸ºåè®®æ‰©å±•æ·»åŠ çº¦æŸå½“æ‚¨å®šä¹‰åè®®æ‰©å±•æ—¶ï¼Œæ‚¨å¯ä»¥æŒ‡å®šç¬¦åˆè¦æ±‚çš„ç±»å‹åœ¨æ‰©å±•çš„æ–¹æ³•å’Œå±æ€§å¯ç”¨ä¹‹å‰å¿…é¡»æ»¡è¶³çš„çº¦æŸã€‚æ‚¨é€šè¿‡ç¼–å†™é€šç”¨whereå­å¥ï¼Œåœ¨æ‚¨è¦æ‰©å±•çš„åè®®åç§°åç¼–å†™è¿™äº›çº¦æŸã€‚æœ‰å…³é€šç”¨whereå­å¥çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…é€šç”¨whereå­å¥ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å®šä¹‰Collectionåè®®çš„æ‰©å±•ï¼Œè¯¥æ‰©å±•é€‚ç”¨äºå…¶å…ƒç´ ç¬¦åˆEquatableåè®®çš„ä»»ä½•é›†åˆã€‚é€šè¿‡å°†é›†åˆçš„å…ƒç´ é™åˆ¶åˆ°æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†Equatableåè®®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨==å’Œ!=è¿ç®—ç¬¦æ¥æ£€æŸ¥ä¸¤ä¸ªå…ƒç´ ä¹‹é—´çš„ç­‰å¼å’Œä¸ç­‰å¼ã€‚ extension Collection where Element: Equatable { â€‹ func allEqual() -&gt; Bool { â€‹ for element in self { â€‹ if element !&#x3D; self.first { â€‹ return false â€‹ } â€‹ } â€‹ return true â€‹ } } åªæœ‰å½“é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ç›¸ç­‰æ—¶ï¼ŒallEqual()æ–¹æ³•æ‰ä¼šè¿”å›trueã€‚ è€ƒè™‘ä¸¤ä¸ªæ•´æ•°æ•°ç»„ï¼Œä¸€ä¸ªæ‰€æœ‰å…ƒç´ éƒ½ç›¸åŒï¼Œå¦ä¸€ä¸ªä¸ç›¸åŒï¼š let equalNumbers &#x3D; [100, 100, 100, 100, 100] let differentNumbers &#x3D; [100, 100, 200, 100, 200] ç”±äºæ•°ç»„ç¬¦åˆCollectionï¼Œæ•´æ•°ç¬¦åˆEquatableï¼ŒequalNumberså’ŒdifferentNumberså¯ä»¥ä½¿ç”¨allEqual()æ–¹æ³•ï¼š print(equalNumbers.allEqual()) &#x2F;&#x2F; Prints â€œtrueâ€ print(differentNumbers.allEqual()) &#x2F;&#x2F; Prints â€œfalseâ€ æ³¨æ„ å¦‚æœç¬¦åˆè¦æ±‚çš„ç±»å‹æ»¡è¶³ä¸ºåŒä¸€æ–¹æ³•æˆ–å±æ€§æä¾›å®ç°çš„å¤šä¸ªçº¦æŸæ‰©å±•çš„è¦æ±‚ï¼ŒSwiftå°†ä½¿ç”¨ä¸æœ€ä¸“ä¸šçº¦æŸç›¸å¯¹åº”çš„å®ç°ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ å»åˆå§‹åŒ–","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-å»åˆå§‹åŒ–","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-å»åˆå§‹åŒ–/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%8E%BB%E5%88%9D%E5%A7%8B%E5%8C%96/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Deinitialization.html åœ¨ç±»å®ä¾‹è¢«é‡Šæ”¾ä¹‹å‰ï¼Œä¼šç«‹å³è°ƒç”¨å»åˆå§‹åŒ–å™¨ã€‚æ‚¨ä½¿ç”¨deinitå…³é”®å­—ç¼–å†™å»åˆå§‹åŒ–å™¨ï¼Œç±»ä¼¼äºä½¿ç”¨initå…³é”®å­—ç¼–å†™åˆå§‹åŒ–å™¨çš„æ–¹å¼ã€‚å–æ¶ˆåˆå§‹åŒ–å™¨ä»…é€‚ç”¨äºç±»ç±»å‹ã€‚ Deinitializationå¦‚ä½•è¿ä½œSwift ä¼šåœ¨ä¸å†éœ€è¦å®ä¾‹æ—¶è‡ªåŠ¨å¤„ç†è¿™äº›å®ä¾‹ï¼Œä»¥é‡Šæ”¾èµ„æºã€‚Swifté€šè¿‡è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼‰å¤„ç†å®ä¾‹çš„å†…å­˜ç®¡ç†ï¼Œå¦‚è‡ªåŠ¨å¼•ç”¨è®¡æ•°ä¸­æ‰€è¿°ã€‚é€šå¸¸ï¼Œåœ¨å®ä¾‹è¢«é‡Šæ”¾æ—¶ï¼Œæ‚¨ä¸éœ€è¦è¿›è¡Œæ‰‹åŠ¨æ¸…ç†ã€‚ä½†æ˜¯ï¼Œå½“æ‚¨ä½¿ç”¨è‡ªå·±çš„èµ„æºæ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦è‡ªå·±è¿›è¡Œä¸€äº›é¢å¤–çš„æ¸…ç†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç±»æ¥æ‰“å¼€æ–‡ä»¶å¹¶å‘å…¶å†™å…¥ä¸€äº›æ•°æ®ï¼Œæ‚¨å¯èƒ½éœ€è¦åœ¨ç±»å®ä¾‹è¢«é‡Šæ”¾ä¹‹å‰å…³é—­æ–‡ä»¶ã€‚ ç±»å®šä¹‰æ¯ä¸ªç±»æœ€å¤šå¯ä»¥æœ‰ä¸€ä¸ªå»åˆå§‹åŒ–å™¨ã€‚å–æ¶ˆåˆå§‹åŒ–å™¨ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œå¹¶ä¸”æ²¡æœ‰æ‹¬å·ï¼š deinit { â€‹ &#x2F;&#x2F; perform the deinitialization } åœ¨å®ä¾‹å¤„ç†åˆ†é…å‘ç”Ÿä¹‹å‰ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å»åˆå§‹åŒ–å™¨ã€‚æ‚¨ä¸å¾—è‡ªå·±è°ƒç”¨éåˆå§‹åŒ–å™¨ã€‚è¶…ç±»éåˆå§‹åŒ–å™¨ç”±å…¶å­ç±»ç»§æ‰¿ï¼Œè¶…ç±»éåˆå§‹åŒ–å™¨åœ¨å­ç±»éåˆå§‹åŒ–å™¨å®ç°ç»“æŸæ—¶è‡ªåŠ¨è°ƒç”¨ã€‚æ€»æ˜¯è°ƒç”¨è¶…ç±»éåˆå§‹åŒ–å™¨ï¼Œå³ä½¿å­ç±»ä¸æä¾›è‡ªå·±çš„éåˆå§‹åŒ–å™¨ã€‚ ç”±äºå®ä¾‹åœ¨è°ƒç”¨å…¶éåˆå§‹åŒ–å™¨åæ‰ä¼šè¢«é‡Šæ”¾ï¼Œå› æ­¤éåˆå§‹åŒ–å™¨å¯ä»¥è®¿é—®å…¶è°ƒç”¨çš„å®ä¾‹çš„æ‰€æœ‰å±æ€§ï¼Œå¹¶å¯ä»¥æ ¹æ®è¿™äº›å±æ€§ä¿®æ”¹å…¶è¡Œä¸ºï¼ˆä¾‹å¦‚æŸ¥æ‰¾éœ€è¦å…³é—­çš„æ–‡ä»¶çš„åç§°ï¼‰ã€‚ å»åˆå§‹åŒ–å™¨åœ¨è¡ŒåŠ¨ä»¥ä¸‹æ˜¯ä¸€ä¸ªéåˆå§‹åŒ–å™¨åœ¨èµ·ä½œç”¨çš„ä¾‹å­ã€‚è¿™ä¸ªä¾‹å­ä¸ºä¸€ä¸ªç®€å•çš„æ¸¸æˆå®šä¹‰äº†ä¸¤ç§æ–°ç±»å‹ï¼ŒBankå’ŒPlayerã€‚Bankçº§ç®¡ç†ä¸€ç§åˆ¶æˆå¸ï¼Œæµé€šé‡æ°¸è¿œä¸ä¼šè¶…è¿‡10,000æšç¡¬å¸ã€‚æ¸¸æˆä¸­åªèƒ½æœ‰ä¸€ä¸ªBankï¼Œå› æ­¤è¯¥Bankæ˜¯ä¸€ä¸ªå…·æœ‰ç±»å‹å±æ€§å’Œæ–¹æ³•æ¥å­˜å‚¨å’Œç®¡ç†å…¶å½“å‰çŠ¶æ€çš„ç±»å®ç°ï¼š class Bank { â€‹ static var coinsInBank &#x3D; 10_000 â€‹ static func distribute(coins numberOfCoinsRequested: Int) -&gt; Int { â€‹ let numberOfCoinsToVend &#x3D; min(numberOfCoinsRequested, coinsInBank) â€‹ coinsInBank -&#x3D; numberOfCoinsToVend â€‹ return numberOfCoinsToVend â€‹ } â€‹ static func receive(coins: Int) { â€‹ coinsInBank +&#x3D; coins â€‹ } } Bank keeps track of the current number of coins it holds with its coinsInBank property. It also offers two methodsâ€”distribute(coins:) and receive(coins:)â€”to handle the distribution and collection of coins. distribute(coins:)æ–¹æ³•åœ¨åˆ†å‘ç¡¬å¸ä¹‹å‰æ£€æŸ¥é“¶è¡Œä¸­æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç¡¬å¸ã€‚å¦‚æœç¡¬å¸ä¸å¤Ÿï¼ŒBankè¿”å›çš„æ•°å­—æ¯”è¯·æ±‚çš„æ•°å­—è¦å°ï¼ˆå¦‚æœé“¶è¡Œä¸­æ²¡æœ‰ç¡¬å¸ï¼Œåˆ™è¿”å›é›¶ï¼‰ã€‚å®ƒè¿”å›ä¸€ä¸ªæ•´æ•°å€¼ï¼Œä»¥æŒ‡ç¤ºæä¾›çš„å®é™…ç¡¬å¸æ•°é‡ã€‚ receive(coins:)æ–¹æ³•åªéœ€å°†æ”¶åˆ°çš„ç¡¬å¸æ•°é‡é‡æ–°æ·»åŠ åˆ°é“¶è¡Œçš„ç¡¬å¸å•†åº—ã€‚ Playerç±»æè¿°äº†æ¸¸æˆä¸­çš„ç©å®¶ã€‚æ¯ä¸ªç©å®¶çš„é’±åŒ…é‡Œéšæ—¶éƒ½æœ‰ä¸€å®šæ•°é‡çš„ç¡¬å¸ã€‚è¿™ç”±ç©å®¶çš„coinsInPurseå±æ€§è¡¨ç¤ºï¼š class Player { â€‹ var coinsInPurse: Int â€‹ init(coins: Int) { â€‹ coinsInPurse &#x3D; Bank.distribute(coins: coins) â€‹ } â€‹ func win(coins: Int) { â€‹ coinsInPurse +&#x3D; Bank.distribute(coins: coins) â€‹ } â€‹ deinit { â€‹ Bank.receive(coins: coinsInPurse) â€‹ } } åœ¨åˆå§‹åŒ–æœŸé—´ï¼Œæ¯ä¸ªPlayerå®ä¾‹éƒ½ä½¿ç”¨é“¶è¡ŒæŒ‡å®šæ•°é‡çš„ç¡¬å¸çš„èµ·å§‹é™é¢è¿›è¡Œåˆå§‹åŒ–ï¼Œå°½ç®¡å¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„ç¡¬å¸å¯ç”¨ï¼ŒPlayerå®ä¾‹æ”¶åˆ°çš„ç¡¬å¸å¯èƒ½å°‘äºè¯¥æ•°å­—ã€‚ Playerç±»å®šä¹‰äº†ä¸€ä¸ªwin(coins:)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä»é“¶è¡Œæ£€ç´¢ä¸€å®šæ•°é‡çš„ç¡¬å¸å¹¶å°†å…¶æ·»åŠ åˆ°ç©å®¶çš„é’±åŒ…ä¸­ã€‚Playerç±»è¿˜å®ç°äº†å»åˆå§‹åŒ–å™¨ï¼Œè¯¥å»åˆå§‹åŒ–å™¨æ˜¯åœ¨Playerå®ä¾‹è¢«é‡Šæ”¾ä¹‹å‰è°ƒç”¨çš„ã€‚åœ¨è¿™é‡Œï¼Œå»åˆå§‹åŒ–å™¨åªéœ€å°†ç©å®¶çš„æ‰€æœ‰ç¡¬å¸é€€è¿˜ç»™é“¶è¡Œï¼š var playerOne: Player? &#x3D; Player(coins: 100) print(â€œA new player has joined the game with (playerOne!.coinsInPurse) coinsâ€) &#x2F;&#x2F; Prints â€œA new player has joined the game with 100 coinsâ€ print(â€œThere are now (Bank.coinsInBank) coins left in the bankâ€) &#x2F;&#x2F; Prints â€œThere are now 9900 coins left in the bankâ€ åˆ›å»ºä¸€ä¸ªæ–°çš„Playerå®ä¾‹ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œéœ€è¦100æšç¡¬å¸ã€‚æ­¤Playerå®ä¾‹å­˜å‚¨åœ¨åä¸ºplayerOneçš„å¯é€‰Playerå˜é‡ä¸­ã€‚è¿™é‡Œä½¿ç”¨å¯é€‰å˜é‡ï¼Œå› ä¸ºç©å®¶å¯ä»¥éšæ—¶ç¦»å¼€æ¸¸æˆã€‚å¯é€‰åŠŸèƒ½å…è®¸æ‚¨è·Ÿè¸ªæ¸¸æˆä¸­ç›®å‰æ˜¯å¦æœ‰ç©å®¶ã€‚ å› ä¸ºplayerOneæ˜¯å¯é€‰çš„ï¼Œæ‰€ä»¥å®ƒæœ‰èµ„æ ¼è·å¾—æ„Ÿå¹å·ï¼ˆ!ï¼‰å½“è®¿é—®itscoinsInPurseå±æ€§ä»¥æ‰“å°å…¶é»˜è®¤ç¡¬å¸æ•°é‡æ—¶ï¼Œä»¥åŠæ¯å½“è°ƒç”¨itswinwin(coins:)æ–¹æ³•æ—¶ï¼š playerOne!.win(coins: 2_000) print(â€œPlayerOne won 2000 coins &amp; now has (playerOne!.coinsInPurse) coinsâ€) &#x2F;&#x2F; Prints â€œPlayerOne won 2000 coins &amp; now has 2100 coinsâ€ print(â€œThe bank now only has (Bank.coinsInBank) coins leftâ€) &#x2F;&#x2F; Prints â€œThe bank now only has 7900 coins leftâ€ åœ¨è¿™é‡Œï¼Œç©å®¶èµ¢å¾—äº†2000æšç¡¬å¸ã€‚ç©å®¶çš„é’±åŒ…ç°åœ¨åŒ…å«2100æšç¡¬å¸ï¼Œè€Œé“¶è¡Œåªå‰©ä¸‹7900æšç¡¬å¸ã€‚ playerOne &#x3D; nil print(â€œPlayerOne has left the gameâ€) &#x2F;&#x2F; Prints â€œPlayerOne has left the gameâ€ print(â€œThe bank now has (Bank.coinsInBank) coinsâ€) &#x2F;&#x2F; Prints â€œThe bank now has 10000 coinsâ€ ç©å®¶ç°åœ¨å·²ç»ç¦»å¼€äº†æ¸¸æˆã€‚è¿™é€šè¿‡å°†å¯é€‰çš„playerOneå˜é‡è®¾ç½®ä¸ºnilæ¥æŒ‡ç¤ºï¼Œè¿™æ„å‘³ç€â€œæ²¡æœ‰Playerå®ä¾‹â€ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶ï¼ŒplayerOneå˜é‡å¯¹Playerå®ä¾‹çš„å¼•ç”¨è¢«ç ´åã€‚æ²¡æœ‰å…¶ä»–å±æ€§æˆ–å˜é‡ä»ç„¶å¼•ç”¨Playerå®ä¾‹ï¼Œå› æ­¤å°†å…¶é‡Šæ”¾ä»¥é‡Šæ”¾å…¶å†…å­˜ã€‚å°±åœ¨è¿™ç§æƒ…å†µå‘ç”Ÿä¹‹å‰ï¼Œå…¶å»åˆå§‹åŒ–å™¨ä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œå…¶ç¡¬å¸è¢«é€€å›é“¶è¡Œã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ å¯é€‰é“¾æ¡","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-å¯é€‰é“¾æ¡","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-å¯é€‰é“¾æ¡/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%8F%AF%E9%80%89%E9%93%BE%E6%9D%A1/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/OptionalChaining.html å¯é€‰é“¾æ˜¯ä¸€ä¸ªåœ¨å½“å‰å¯èƒ½ä¸ºnilçš„å¯é€‰é“¾ä¸ŠæŸ¥è¯¢å’Œè°ƒç”¨å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡çš„è¿‡ç¨‹ã€‚å¦‚æœå¯é€‰åŒ…å«å€¼ï¼Œåˆ™å±æ€§ã€æ–¹æ³•æˆ–ä¸‹æ ‡è°ƒç”¨æˆåŠŸï¼›å¦‚æœå¯é€‰å€¼ä¸ºnilï¼Œåˆ™å±æ€§ã€æ–¹æ³•æˆ–ä¸‹æ ‡è°ƒç”¨è¿”å›nilã€‚å¤šä¸ªæŸ¥è¯¢å¯ä»¥é“¾æ¥åœ¨ä¸€èµ·ï¼Œå¦‚æœé“¾ä¸­çš„ä»»ä½•é“¾æ¥ä¸ºnilæ•´ä¸ªé“¾æ¡ä¼šä¼˜é›…åœ°å¤±è´¥ã€‚ æ³¨æ„ Swiftä¸­çš„å¯é€‰é“¾ç±»ä¼¼äºObjective-Cä¸­çš„æ¶ˆæ¯nilï¼Œä½†ä»¥é€‚ç”¨äºä»»ä½•ç±»å‹çš„æ–¹å¼ï¼Œå¹¶ä¸”å¯ä»¥æ£€æŸ¥æˆåŠŸæˆ–å¤±è´¥ã€‚ å¯é€‰é“¾ä½œä¸ºå¼ºåˆ¶æ‰“å¼€åŒ…è£…çš„æ›¿ä»£æ–¹æ¡ˆæ‚¨é€šè¿‡æ”¾ç½®é—®å·ï¼ˆ?ï¼‰æ¥æŒ‡å®šå¯é€‰çš„é“¾æ¡åœ¨å¯é€‰å€¼ä¹‹åï¼Œå¦‚æœå¯é€‰å€¼ä¸ºénilåœ¨æ‚¨å¸Œæœ›è°ƒç”¨å±æ€§ã€æ–¹æ³•æˆ–ä¸‹æ ‡çš„å¯é€‰å€¼ä¹‹åã€‚è¿™ä¸æ”¾ç½®æ„Ÿå¹å·ï¼ˆ!ï¼‰éå¸¸ç›¸ä¼¼åœ¨å¯é€‰å€¼ä¹‹åï¼Œå¼ºåˆ¶å±•å¼€å…¶å€¼ã€‚ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå½“å¯é€‰é“¾æ¥ä¸ºnilï¼Œå¯é€‰é“¾ä¼šä¼˜é›…åœ°å¤±è´¥ï¼Œè€Œå½“å¯é€‰é“¾æ¥ä¸ºnilï¼Œå¼ºåˆ¶å±•å¼€åŒ…è£…ä¼šè§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚ ä¸ºäº†åæ˜ å¯é€‰é“¾å¯ä»¥åœ¨nilå€¼ä¸Šè°ƒç”¨çš„äº‹å®ï¼Œå¯é€‰é“¾è°ƒç”¨çš„ç»“æœå§‹ç»ˆæ˜¯å¯é€‰å€¼ï¼Œå³ä½¿æ‚¨æ­£åœ¨æŸ¥è¯¢çš„å±æ€§ã€æ–¹æ³•æˆ–ä¸‹æ ‡è¿”å›éå¯é€‰å€¼ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤å¯é€‰è¿”å›å€¼æ¥æ£€æŸ¥å¯é€‰é“¾è°ƒç”¨æ˜¯å¦æˆåŠŸï¼ˆè¿”å›çš„å¯é€‰åŒ…å«å€¼ï¼‰ï¼Œè¿˜æ˜¯ç”±äºé“¾ä¸­çš„nilå€¼è€Œæ²¡æœ‰æˆåŠŸï¼ˆè¿”å›çš„å¯é€‰å€¼ä¸ºnilï¼‰ã€‚ å…·ä½“æ¥è¯´ï¼Œå¯é€‰é“¾è°ƒç”¨çš„ç»“æœä¸é¢„æœŸè¿”å›å€¼ç±»å‹ç›¸åŒï¼Œä½†åŒ…è£…åœ¨å¯é€‰ä¸­ã€‚é€šå¸¸è¿”å›Intçš„å±æ€§ä¼šè¿”å›Int?é€šè¿‡å¯é€‰é“¾è®¿é—®æ—¶ã€‚ æ¥ä¸‹æ¥çš„å‡ ä¸ªä»£ç ç‰‡æ®µæ¼”ç¤ºäº†å¯é€‰é“¾ä¸å¼ºåˆ¶æ‹†å¼€çš„åŒºåˆ«ï¼Œå¹¶ä½¿æ‚¨èƒ½å¤Ÿæ£€æŸ¥æˆåŠŸã€‚ First, two classes called Person and Residence are defined: class Person { â€‹ var residence: Residence? } class Residence { â€‹ var numberOfRooms &#x3D; 1 } Residenceå®ä¾‹æœ‰ä¸€ä¸ªåä¸ºnumberOfRooms``Intå±æ€§ï¼Œé»˜è®¤å€¼ä¸º1ã€‚Personå®ä¾‹å…·æœ‰Residence?ç±»å‹ä¸ºå¯é€‰çš„residenceå±æ€§ã€‚ å¦‚æœæ‚¨åˆ›å»ºä¸€ä¸ªæ–°çš„Personå®ä¾‹ï¼Œå…¶residenceå±æ€§é»˜è®¤åˆå§‹åŒ–ä¸ºnilï¼Œå› ä¸ºå®ƒæ˜¯å¯é€‰çš„ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œjohnçš„residenceç‰©ä¸šä»·å€¼ä¸ºnilï¼š let john &#x3D; Person() å¦‚æœæ‚¨å°è¯•è®¿é—®æ­¤äººresidenceçš„numberOfRoomså±æ€§ï¼Œé€šè¿‡åœ¨residenceåæ”¾ç½®æ„Ÿå¹å·ä»¥å¼ºåˆ¶è§£å¼€å…¶å€¼ï¼Œæ‚¨å°†è§¦å‘è¿è¡Œæ—¶é”™è¯¯ï¼Œå› ä¸ºæ²¡æœ‰residenceå€¼å¯ä»¥æ‰“å¼€ï¼š let roomCount &#x3D; john.residence!.numberOfRooms &#x2F;&#x2F; this triggers a runtime error john.residenceå…·æœ‰énilå€¼æ—¶ï¼Œä¸Šè¿°ä»£ç å°†æˆåŠŸï¼Œå¹¶å°†roomCountè®¾ç½®ä¸ºåŒ…å«é€‚å½“æ•°é‡æˆ¿é—´çš„Intå€¼ã€‚ç„¶è€Œï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œå½“residenceä¸ºnilï¼Œæ­¤ä»£ç æ€»æ˜¯è§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚ å¯é€‰é“¾æä¾›äº†ä¸€ç§è®¿é—®numberOfRoomså€¼çš„æ›¿ä»£æ–¹å¼ã€‚è¦ä½¿ç”¨å¯é€‰çš„é“¾æ¡ï¼Œè¯·ä½¿ç”¨é—®å·ä»£æ›¿æ„Ÿå¹å·ï¼š if let roomCount &#x3D; john.residence?.numberOfRooms { â€‹ print(â€œJohnâ€™s residence has (roomCount) room(s).â€) } else { â€‹ print(â€œUnable to retrieve the number of rooms.â€) } &#x2F;&#x2F; Prints â€œUnable to retrieve the number of rooms.â€ è¿™å‘Šè¯‰Swiftåœ¨å¯é€‰çš„residenceå±æ€§ä¸Šâ€œé“¾â€ï¼Œå¦‚æœå­˜åœ¨residenceï¼Œåˆ™æ£€ç´¢numberOfRoomså€¼ã€‚ ç”±äºè®¿é—®numberOfRoomså°è¯•å¯èƒ½ä¼šå¤±è´¥ï¼Œå› æ­¤å¯é€‰çš„é“¾å¼å°è¯•è¿”å›ç±»å‹ä¸ºInt?æˆ–â€œoptional Intâ€çš„å€¼ã€‚å¦‚ä¸Šä¾‹æ‰€ç¤ºï¼Œå½“residenceä¸ºnilï¼Œæ­¤å¯é€‰çš„Intä¹Ÿå°†ä¸ºnilï¼Œä»¥åæ˜ æ— æ³•è®¿é—®numberOfRoomsçš„äº‹å®ã€‚å¯é€‰çš„Inté€šè¿‡å¯é€‰ç»‘å®šè®¿é—®ï¼Œä»¥è§£å¼€æ•´æ•°ï¼Œå¹¶å°†éå¯é€‰å€¼åˆ†é…ç»™roomCountå¸¸é‡ã€‚ è¯·æ³¨æ„ï¼Œå³ä½¿numberOfRoomsæ˜¯ä¸€ä¸ªéå¯é€‰çš„Intä¹Ÿæ˜¯å¦‚æ­¤ã€‚å®ƒé€šè¿‡å¯é€‰é“¾æŸ¥è¯¢çš„äº‹å®æ„å‘³ç€å¯¹numberOfRoomsè°ƒç”¨å°†å§‹ç»ˆè¿”å›anIntInt?è€Œä¸æ˜¯Intã€‚ æ‚¨å¯ä»¥å°†Residenceå®ä¾‹åˆ†é…ç»™john.residenceï¼Œä½¿å…¶ä¸å†å…·æœ‰nilå€¼ï¼š john.residence &#x3D; Residence() john.residenceç°åœ¨åŒ…å«ä¸€ä¸ªå®é™…çš„Residenceå®ä¾‹ï¼Œè€Œä¸æ˜¯nilã€‚å¦‚æœæ‚¨å°è¯•ä½¿ç”¨ä¸ä»¥å‰ç›¸åŒçš„å¯é€‰é“¾æ¡è®¿é—®numberOfRoomsï¼Œå®ƒç°åœ¨å°†è¿”å›ä¸€ä¸ªInt?åŒ…å«é»˜è®¤numberOfRoomså€¼ä¸º1ï¼š if let roomCount &#x3D; john.residence?.numberOfRooms { â€‹ print(â€œJohnâ€™s residence has (roomCount) room(s).â€) } else { â€‹ print(â€œUnable to retrieve the number of rooms.â€) } &#x2F;&#x2F; Prints â€œJohnâ€™s residence has 1 room(s).â€ å®šä¹‰å¯é€‰é“¾çš„æ¨¡å‹ç±»æ‚¨å¯ä»¥ä½¿ç”¨å¯é€‰é“¾æ¥è°ƒç”¨å¤šä¸ªçº§åˆ«æ·±çš„å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿæ·±å…¥äº†è§£ç›¸äº’å…³è”çš„å¤æ‚æ¨¡å‹ä¸­çš„å­å±æ€§ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦å¯ä»¥è®¿é—®è¿™äº›å­å±æ€§çš„å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡ã€‚ ä¸‹é¢çš„ä»£ç ç‰‡æ®µå®šä¹‰äº†å››ä¸ªæ¨¡å‹ç±»ï¼Œç”¨äºåç»­å‡ ä¸ªç¤ºä¾‹ï¼ŒåŒ…æ‹¬å¤šçº§å¯é€‰é“¾çš„ç¤ºä¾‹ã€‚è¿™äº›ç±»é€šè¿‡æ·»åŠ Roomå’ŒAddressç±»ä»¥åŠç›¸å…³çš„å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡æ¥æ‰©å±•ä¸Šé¢çš„Person``Residenceæ¨¡å¼ã€‚ Personç±»çš„å®šä¹‰ä¸ä»¥å‰ç›¸åŒï¼š class Person { â€‹ var residence: Residence? } Residenceèˆ±æ¯”ä»¥å‰æ›´å¤æ‚ã€‚è¿™ä¸€æ¬¡ï¼ŒResidenceç±»å®šä¹‰äº†ä¸€ä¸ªåä¸ºroomsçš„å˜é‡å±æ€§ï¼Œè¯¥å±æ€§ä½¿ç”¨[Room]ç±»å‹çš„ç©ºæ•°ç»„åˆå§‹åŒ–ï¼š class Residence { â€‹ var rooms: [Room] &#x3D; [] â€‹ var numberOfRooms: Int { â€‹ return rooms.count â€‹ } â€‹ subscript(i: Int) -&gt; Room { â€‹ get { â€‹ return rooms[i] â€‹ } â€‹ set { â€‹ rooms[i] &#x3D; newValue â€‹ } â€‹ } â€‹ func printNumberOfRooms() { â€‹ print(â€œThe number of rooms is (numberOfRooms)â€) â€‹ } â€‹ var address: Address? } ç”±äºæ­¤ç‰ˆæœ¬çš„Residenceå­˜å‚¨äº†ä¸€ä¸ªRoomå®ä¾‹æ•°ç»„ï¼Œå› æ­¤å…¶numberOfRoomså±æ€§ä½œä¸ºè®¡ç®—å±æ€§å®ç°ï¼Œè€Œä¸æ˜¯å­˜å‚¨å±æ€§ã€‚computednumberOfRoomså±æ€§åªéœ€ä»roomsæ•°ç»„è¿”å›countå±æ€§çš„å€¼ã€‚ ä½œä¸ºè®¿é—®å…¶roomsæ•°ç»„çš„å¿«æ·æ–¹å¼ï¼Œæ­¤ç‰ˆæœ¬çš„Residenceæä¾›äº†ä¸€ä¸ªè¯»å†™ä¸‹æ ‡ï¼Œè¯¥ä¸‹æ ‡å¯æ ¹æ®roomsæ•°ç»„ä¸­è¯·æ±‚çš„ç´¢å¼•è®¿é—®æˆ¿é—´ã€‚ è¿™ä¸ªç‰ˆæœ¬çš„Residenceè¿˜æä¾›äº†ä¸€ç§åä¸ºprintNumberOfRoomsçš„æ–¹æ³•ï¼Œå®ƒåªéœ€æ‰“å°ä½å®…ä¸­çš„æˆ¿é—´æ•°é‡ã€‚ Finally, Residence defines an optional property called address, with a type of Address?. The Address class type for this property is defined below. ç”¨äºroomsæ•°ç»„çš„Roomç±»æ˜¯ä¸€ä¸ªç®€å•çš„ç±»ï¼Œæœ‰ä¸€ä¸ªåä¸ºnameçš„å±æ€§ï¼Œä»¥åŠå°†è¯¥å±æ€§è®¾ç½®ä¸ºåˆé€‚æˆ¿é—´åç§°çš„åˆå§‹åŒ–å™¨ï¼š class Room { â€‹ let name: String â€‹ init(name: String) { self.name &#x3D; name } } è¿™ä¸ªæ¨¡å‹ä¸­çš„æœ€åä¸€ä¸ªç±»ç§°ä¸ºAddressã€‚è¯¥ç±»æœ‰ä¸‰ä¸ªtypeStringString?çš„å¯é€‰å±æ€§ã€‚å‰ä¸¤ä¸ªå±æ€§ï¼ŒbuildingNameå’ŒbuildingNumberï¼Œæ˜¯å°†ç‰¹å®šå»ºç­‘ç‰©è¯†åˆ«ä¸ºåœ°å€ä¸€éƒ¨åˆ†çš„æ›¿ä»£æ–¹æ³•ã€‚ç¬¬ä¸‰ç§è´¢äº§ï¼Œstreetï¼Œç”¨äºä¸ºè¯¥åœ°å€å‘½åè¡—é“ï¼š class Address { â€‹ var buildingName: String? â€‹ var buildingNumber: String? â€‹ var street: String? â€‹ func buildingIdentifier() -&gt; String? { â€‹ if let buildingNumber &#x3D; buildingNumber, let street &#x3D; street { â€‹ return â€œ(buildingNumber) (street)â€ â€‹ } else if buildingName !&#x3D; nil { â€‹ return buildingName â€‹ } else { â€‹ return nil â€‹ } â€‹ } } The Address class also provides a method called buildingIdentifier(), which has a return type of String?. This method checks the properties of the address and returns buildingName if it has a value, or buildingNumber concatenated with street if both have values, or nil otherwise. é€šè¿‡å¯é€‰é“¾è®¿é—®å±æ€§æ­£å¦‚å¯é€‰é“¾ä½œä¸ºå¼ºåˆ¶æ‰“å¼€åŒ…è£…çš„æ›¿ä»£æ–¹æ¡ˆæ‰€ç¤ºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¯é€‰é“¾è®¿é—®å¯é€‰å€¼ä¸Šçš„å±æ€§ï¼Œå¹¶æ£€æŸ¥è¯¥å±æ€§è®¿é—®æ˜¯å¦æˆåŠŸã€‚ ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„ç±»åˆ›å»ºä¸€ä¸ªæ–°çš„Personå®ä¾‹ï¼Œå¹¶å°è¯•åƒä»¥å‰ä¸€æ ·è®¿é—®å…¶numberOfRoomså±æ€§ï¼š let john &#x3D; Person() if let roomCount &#x3D; john.residence?.numberOfRooms { â€‹ print(â€œJohnâ€™s residence has (roomCount) room(s).â€) } else { â€‹ print(â€œUnable to retrieve the number of rooms.â€) } &#x2F;&#x2F; Prints â€œUnable to retrieve the number of rooms.â€ ç”±äºjohn.residenceä¸ºnilï¼Œè¿™ä¸ªå¯é€‰çš„é“¾å¼è°ƒç”¨ä¸ä»¥å‰ä¸€æ ·å¤±è´¥ã€‚ æ‚¨è¿˜å¯ä»¥å°è¯•é€šè¿‡å¯é€‰é“¾è®¾ç½®å±æ€§çš„å€¼ï¼š let someAddress &#x3D; Address() someAddress.buildingNumber &#x3D; â€œ29â€ someAddress.street &#x3D; â€œAcacia Roadâ€ john.residence?.address &#x3D; someAddress åœ¨æœ¬ä¾‹ä¸­ï¼Œè®¾ç½®john.residence``addresså±æ€§çš„å°è¯•å°†å¤±è´¥ï¼Œå› ä¸ºjohn.residenceç›®å‰ä¸ºnilã€‚ è¯¥èµ‹å€¼æ˜¯å¯é€‰é“¾çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰è®¡ç®—=è¿ç®—ç¬¦å³ä¾§çš„ä»£ç ã€‚åœ¨ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œä¸å®¹æ˜“çœ‹åˆ°someAddressä»æœªè¢«è¯„ä¼°è¿‡ï¼Œå› ä¸ºè®¿é—®å¸¸é‡æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚ä»¥ä¸‹åˆ—è¡¨æ‰§è¡Œç›¸åŒçš„åˆ†é…ï¼Œä½†å®ƒä½¿ç”¨å‡½æ•°æ¥åˆ›å»ºåœ°å€ã€‚è¯¥å‡½æ•°åœ¨è¿”å›å€¼ä¹‹å‰æ‰“å°â€œå‡½æ•°å·²è°ƒç”¨â€ï¼Œè¯¥å€¼å…è®¸æ‚¨æŸ¥çœ‹æ˜¯å¦è®¡ç®—äº†=è¿ç®—ç¬¦çš„å³ä¾§ã€‚ func createAddress() -&gt; Address { â€‹ print(â€œFunction was called.â€) â€‹ let someAddress &#x3D; Address() â€‹ someAddress.buildingNumber &#x3D; â€œ29â€ â€‹ someAddress.street &#x3D; â€œAcacia Roadâ€ â€‹ return someAddress } john.residence?.address &#x3D; createAddress() æ‚¨å¯ä»¥åˆ¤æ–­æ²¡æœ‰è°ƒç”¨createAddress()å‡½æ•°ï¼Œå› ä¸ºæ²¡æœ‰æ‰“å°ä»»ä½•ä¸œè¥¿ã€‚ é€šè¿‡å¯é€‰é“¾è°ƒç”¨æ–¹æ³•æ‚¨å¯ä»¥ä½¿ç”¨å¯é€‰é“¾è°ƒç”¨å¯é€‰å€¼ä¸Šçš„æ–¹æ³•ï¼Œå¹¶æ£€æŸ¥è¯¥æ–¹æ³•è°ƒç”¨æ˜¯å¦æˆåŠŸã€‚å³ä½¿è¯¥æ–¹æ³•æ²¡æœ‰å®šä¹‰è¿”å›å€¼ï¼Œæ‚¨ä¹Ÿå¯ä»¥è¿™æ ·åšã€‚ Residenceç±»ä¸Šçš„printNumberOfRooms()æ–¹æ³•æ‰“å°numberOfRoomså½“å‰å€¼ã€‚ä»¥ä¸‹æ˜¯æ–¹æ³•çš„å¤–è§‚ï¼š func printNumberOfRooms() { â€‹ print(â€œThe number of rooms is (numberOfRooms)â€) } æ­¤æ–¹æ³•æ²¡æœ‰æŒ‡å®šè¿”å›ç±»å‹ã€‚ç„¶è€Œï¼Œæ²¡æœ‰è¿”å›ç±»å‹çš„å‡½æ•°å’Œæ–¹æ³•å…·æœ‰éšå¼è¿”å›ç±»å‹ä¸ºVoidï¼Œå¦‚ã€Šæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ã€‹ä¸­æ‰€è¿°ã€‚è¿™æ„å‘³ç€å®ƒä»¬è¿”å›ä¸€ä¸ªå€¼()æˆ–ä¸€ä¸ªç©ºå…ƒç»„ã€‚ If you call this method on an optional value with optional chaining, the methodâ€™s return type will be Void?, not Void, because return values are always of an optional type when called through optional chaining. This enables you to use an if statement to check whether it was possible to call the printNumberOfRooms() method, even though the method doesnâ€™t itself define a return value. Compare the return value from the printNumberOfRooms call against nil to see if the method call was successful: if john.residence?.printNumberOfRooms() !&#x3D; nil { â€‹ print(â€œIt was possible to print the number of rooms.â€) } else { â€‹ print(â€œIt was not possible to print the number of rooms.â€) } &#x2F;&#x2F; Prints â€œIt was not possible to print the number of rooms.â€ å¦‚æœæ‚¨å°è¯•é€šè¿‡å¯é€‰é“¾è®¾ç½®å±æ€§ï¼Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸Šé¢é€šè¿‡å¯é€‰é“¾è®¿é—®å±æ€§ä¸­çš„ç¤ºä¾‹è¯•å›¾ä¸ºjohn.residenceè®¾ç½®addresså€¼ï¼Œå³ä½¿residenceå±æ€§ä¸ºnilã€‚ä»»ä½•é€šè¿‡å¯é€‰é“¾è®¾ç½®å±æ€§çš„å°è¯•éƒ½ä¼šè¿”å›Void?ç±»å‹çš„å€¼ï¼Œè¿™ä½¿æ‚¨èƒ½å¤Ÿä¸nilè¿›è¡Œæ¯”è¾ƒï¼Œçœ‹çœ‹å±æ€§æ˜¯å¦å·²æˆåŠŸè®¾ç½®ï¼š if (john.residence?.address &#x3D; someAddress) !&#x3D; nil { â€‹ print(â€œIt was possible to set the address.â€) } else { â€‹ print(â€œIt was not possible to set the address.â€) } &#x2F;&#x2F; Prints â€œIt was not possible to set the address.â€ é€šè¿‡å¯é€‰é“¾æ¡è®¿é—®ä¸‹æ ‡æ‚¨å¯ä»¥ä½¿ç”¨å¯é€‰é“¾å°è¯•ä»å¯é€‰å€¼çš„ä¸‹æ ‡ä¸­æ£€ç´¢å’Œè®¾ç½®å€¼ï¼Œå¹¶æ£€æŸ¥è¯¥ä¸‹æ ‡è°ƒç”¨æ˜¯å¦æˆåŠŸã€‚ æ³¨æ„ å½“æ‚¨é€šè¿‡å¯é€‰é“¾è®¿é—®å¯é€‰å€¼çš„ä¸‹æ ‡æ—¶ï¼Œæ‚¨å°†é—®å·æ”¾åœ¨ä¸‹æ ‡æ‹¬å·ä¹‹å‰ï¼Œè€Œä¸æ˜¯ä¹‹åã€‚å¯é€‰çš„é“¾å¼é—®å·æ€»æ˜¯ç´§éšå…¶åäºè¡¨è¾¾å¼çš„å¯é€‰éƒ¨åˆ†ä¹‹åã€‚ ä¸‹é¢çš„ç¤ºä¾‹è¯•å›¾ä½¿ç”¨Residenceç±»ä¸Šå®šä¹‰çš„ä¸‹æ ‡æ£€ç´¢john.residenceå±æ€§çš„roomsæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæˆ¿é—´çš„åç§°ã€‚ç”±äºjohn.residenceç›®å‰ä¸ºnilï¼Œä¸‹æ ‡è°ƒç”¨å¤±è´¥ï¼š if let firstRoomName &#x3D; john.residence?[0].name { â€‹ print(â€œThe first room name is (firstRoomName).â€) } else { â€‹ print(â€œUnable to retrieve the first room name.â€) } &#x2F;&#x2F; Prints â€œUnable to retrieve the first room name.â€ æ­¤ä¸‹æ ‡è°ƒç”¨ä¸­çš„å¯é€‰é“¾é—®å·ç«‹å³æ”¾åœ¨john.residenceä¹‹åçš„ä¸‹æ ‡æ‹¬å·ä¹‹å‰ï¼Œå› ä¸ºjohn.residenceæ˜¯å°è¯•å¯é€‰é“¾çš„å¯é€‰å€¼ã€‚ åŒæ ·ï¼Œæ‚¨å¯ä»¥å°è¯•é€šè¿‡å¸¦æœ‰å¯é€‰é“¾çš„ä¸‹æ ‡è®¾ç½®æ–°å€¼ï¼š john.residence?[0] &#x3D; Room(name: â€œBathroomâ€) æ­¤ä¸‹æ ‡è®¾ç½®å°è¯•ä¹Ÿå¤±è´¥ï¼Œå› ä¸ºresidenceç›®å‰ä¸ºnilã€‚ å¦‚æœæ‚¨åˆ›å»ºå¹¶å‘john.residenceåˆ†é…å®é™…çš„Residenceå®ä¾‹ï¼Œå…¶roomsæ•°ç»„ä¸­æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªRoomå®ä¾‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Residenceä¸‹æ ‡é€šè¿‡å¯é€‰é“¾è®¿é—®roomsæ•°ç»„ä¸­çš„å®é™…é¡¹ç›®ï¼š let johnsHouse &#x3D; Residence() johnsHouse.rooms.append(Room(name: â€œLiving Roomâ€)) johnsHouse.rooms.append(Room(name: â€œKitchenâ€)) john.residence &#x3D; johnsHouse if let firstRoomName &#x3D; john.residence?[0].name { â€‹ print(â€œThe first room name is (firstRoomName).â€) } else { â€‹ print(â€œUnable to retrieve the first room name.â€) } &#x2F;&#x2F; Prints â€œThe first room name is Living Room.â€ è®¿é—®å¯é€‰ç±»å‹çš„ä¸‹æ ‡å¦‚æœä¸‹æ ‡è¿”å›å¯é€‰ç±»å‹çš„å€¼ï¼ˆä¾‹å¦‚Swiftâ€™sDictionaryç±»å‹çš„é”®ä¸‹æ ‡ï¼‰ï¼Œè¯·åœ¨ä¸‹æ ‡çš„é—­æ‹¬å·åæ”¾ç½®ä¸€ä¸ªé—®å·ï¼Œä»¥é“¾å¼é“¾æ¥åˆ°å…¶å¯é€‰è¿”å›å€¼ï¼š var testScores &#x3D; [â€œDaveâ€: [86, 82, 84], â€œBevâ€: [79, 94, 81]] testScores[â€œDaveâ€]?[0] &#x3D; 91 testScores[â€œBevâ€]?[0] +&#x3D; 1 testScores[â€œBrianâ€]?[0] &#x3D; 72 &#x2F;&#x2F; the â€œDaveâ€ array is now [91, 82, 84] and the â€œBevâ€ array is now [80, 94, 81] ä¸Šé¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºtestScoreså­—å…¸ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªé”®å€¼å¯¹ï¼Œå°†Stringé”®æ˜ å°„åˆ°Intå€¼æ•°ç»„ã€‚è¯¥ç¤ºä¾‹ä½¿ç”¨å¯é€‰é“¾å°†&quot;Dave&quot;æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªé¡¹ç›®è®¾ç½®ä¸º91ï¼›å°†&quot;Bev&quot;æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªé¡¹ç›®å¢åŠ 1ï¼›å¹¶å°è¯•å°†æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªé¡¹ç›®è®¾ç½®ä¸º&quot;Brian&quot;çš„é”®ã€‚å‰ä¸¤ä¸ªè°ƒç”¨æˆåŠŸäº†ï¼Œå› ä¸ºtestScoreså­—å…¸åŒ…å«&quot;Dave&quot;å’Œ&quot;Bev&quot;çš„é”®ã€‚ç¬¬ä¸‰æ¬¡è°ƒç”¨å¤±è´¥ï¼Œå› ä¸ºtestScoreså­—å…¸ä¸åŒ…å«&quot;Brian&quot;çš„å¯†é’¥ã€‚ è¿æ¥å¤šä¸ªçº§åˆ«çš„é“¾æ¡æ‚¨å¯ä»¥å°†å¤šä¸ªçº§åˆ«çš„å¯é€‰é“¾é“¾æ¥åœ¨ä¸€èµ·ï¼Œä»¥æ·±å…¥äº†è§£æ¨¡å‹ä¸­æ›´æ·±å¤„çš„å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡ã€‚ç„¶è€Œï¼Œå¤šä¸ªçº§åˆ«çš„å¯é€‰é“¾ä¸ä¼šä¸ºè¿”å›çš„å€¼æ·»åŠ æ›´å¤šçº§åˆ«çš„å¯é€‰æ€§ã€‚ æ¢å¥è¯è¯´ï¼š å¦‚æœæ‚¨è¯•å›¾æ£€ç´¢çš„ç±»å‹ä¸æ˜¯å¯é€‰çš„ï¼Œå®ƒå°†å› å¯é€‰çš„é“¾è€Œæˆä¸ºå¯é€‰çš„ã€‚ å¦‚æœæ‚¨è¯•å›¾æ£€ç´¢çš„ç±»å‹å·²ç»æ˜¯å¯é€‰çš„ï¼Œå®ƒä¸ä¼šå› ä¸ºé“¾è€Œå˜å¾—æ›´åŠ å¯é€‰ã€‚ å› æ­¤ï¼š å¦‚æœæ‚¨å°è¯•é€šè¿‡å¯é€‰é“¾æ£€ç´¢Intå€¼ï¼Œåˆ™ä¸ºInt?æ— è®ºä½¿ç”¨å¤šå°‘çº§åˆ«çš„é“¾æ¡ï¼Œæ€»æ˜¯ä¼šè¿”å›ã€‚ åŒæ ·ï¼Œå¦‚æœæ‚¨å°è¯•æ£€ç´¢Int?é€šè¿‡å¯é€‰é“¾è·å¾—ä»·å€¼ï¼Œä¸€ä¸ªInt?æ— è®ºä½¿ç”¨å¤šå°‘çº§åˆ«çš„é“¾æ¡ï¼Œæ€»æ˜¯ä¼šè¿”å›ã€‚ ä¸‹é¢çš„ç¤ºä¾‹è¯•å›¾è®¿é—®john``addresså±æ€§çš„streetè´¢äº§ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªçº§åˆ«çš„å¯é€‰é“¾æ¡ï¼Œç”¨äºé“¾ç©¿residenceå’Œaddresså±æ€§ï¼Œä¸¤è€…éƒ½æ˜¯å¯é€‰ç±»å‹ï¼š if let johnsStreet &#x3D; john.residence?.address?.street { â€‹ print(â€œJohnâ€™s street name is (johnsStreet).â€) } else { â€‹ print(â€œUnable to retrieve the address.â€) } &#x2F;&#x2F; Prints â€œUnable to retrieve the address.â€ john.residenceçš„å€¼ç›®å‰åŒ…å«ä¸€ä¸ªæœ‰æ•ˆçš„Residenceå®ä¾‹ã€‚ç„¶è€Œï¼Œjohn.residence.addressçš„ä»·å€¼ç›®å‰ä¸ºnilã€‚å› æ­¤ï¼Œç»™john.residence?.address?.streetçš„ç”µè¯å¤±è´¥äº†ã€‚ è¯·æ³¨æ„ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ‚¨æ­£åœ¨å°è¯•æ£€ç´¢streetå±æ€§çš„å€¼ã€‚æ­¤å±æ€§çš„ç±»å‹æ˜¯String?ã€‚å› æ­¤ï¼Œjohn.residence?.address?.streetçš„è¿”å›å€¼ä¹Ÿæ˜¯String?ï¼Œå°½ç®¡é™¤äº†å±æ€§çš„åŸºç¡€å¯é€‰ç±»å‹å¤–ï¼Œè¿˜åº”ç”¨äº†ä¸¤ä¸ªçº§åˆ«çš„å¯é€‰é“¾ã€‚ å¦‚æœæ‚¨å°†å®é™…Addresså®ä¾‹è®¾ç½®ä¸ºjohn.residence.addressçš„å€¼ï¼Œå¹¶ä¸ºåœ°å€çš„streetå±æ€§è®¾ç½®å®é™…å€¼ï¼Œæ‚¨å¯ä»¥é€šè¿‡å¤šçº§å¯é€‰é“¾è®¿é—®streetå±æ€§çš„å€¼ï¼š let johnsAddress &#x3D; Address() johnsAddress.buildingName &#x3D; â€œThe Larchesâ€ johnsAddress.street &#x3D; â€œLaurel Streetâ€ john.residence?.address &#x3D; johnsAddress if let johnsStreet &#x3D; john.residence?.address?.street { â€‹ print(â€œJohnâ€™s street name is (johnsStreet).â€) } else { â€‹ print(â€œUnable to retrieve the address.â€) } &#x2F;&#x2F; Prints â€œJohnâ€™s street name is Laurel Street.â€ åœ¨æœ¬ä¾‹ä¸­ï¼Œè®¾ç½®john.residence``addresså±æ€§çš„å°è¯•å°†æˆåŠŸï¼Œå› ä¸ºjohn.residenceçš„å€¼ç›®å‰åŒ…å«ä¸€ä¸ªæœ‰æ•ˆçš„Residenceå®ä¾‹ã€‚ å…·æœ‰å¯é€‰è¿”å›å€¼çš„æ–¹æ³•é“¾å‰é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•é€šè¿‡å¯é€‰é“¾æ£€ç´¢å¯é€‰ç±»å‹å±æ€§çš„å€¼ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å¯é€‰é“¾è°ƒç”¨è¿”å›å¯é€‰ç±»å‹å€¼çš„æ–¹æ³•ï¼Œå¹¶åœ¨éœ€è¦æ—¶é“¾ä¸Šè¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚ The example below calls the Address classâ€™s buildingIdentifier() method through optional chaining. This method returns a value of type String?. As described above, the ultimate return type of this method call after optional chaining is also String?: if let buildingIdentifier &#x3D; john.residence?.address?.buildingIdentifier() { â€‹ print(â€œJohnâ€™s building identifier is (buildingIdentifier).â€) } &#x2F;&#x2F; Prints â€œJohnâ€™s building identifier is The Larches.â€ å¦‚æœæ‚¨æƒ³å¯¹æ­¤æ–¹æ³•çš„è¿”å›å€¼æ‰§è¡Œè¿›ä¸€æ­¥çš„å¯é€‰é“¾å¼ï¼Œè¯·åœ¨æ–¹æ³•çš„æ‹¬å·åæ”¾ç½®å¯é€‰é“¾é—®å·ï¼š if let beginsWithThe &#x3D; â€‹ john.residence?.address?.buildingIdentifier()?.hasPrefix(â€œTheâ€) { â€‹ if beginsWithThe { â€‹ print(â€œJohnâ€™s building identifier begins with &quot;The&quot;.â€) â€‹ } else { â€‹ print(â€œJohnâ€™s building identifier doesnâ€™t begin with &quot;The&quot;.â€) â€‹ } } &#x2F;&#x2F; Prints â€œJohnâ€™s building identifier begins with â€œTheâ€.â€ æ³¨æ„ In the example above, you place the optional chaining question mark after the parentheses, because the optional value you are chaining on is the buildingIdentifier() methodâ€™s return value, and not the buildingIdentifier() method itself.","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ åŸºæœ¬è¿ç®—ç¬¦","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-åŸºæœ¬è¿ç®—ç¬¦","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-åŸºæœ¬è¿ç®—ç¬¦/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/BasicOperators.html#ID72 æ“ä½œç¬¦æ˜¯ç”¨æ¥æ£€æŸ¥ã€æ›´æ”¹æˆ–åˆå¹¶å€¼çš„ç‰¹æ®Šç¬¦å·æˆ–çŸ­è¯­ã€‚ä¾‹å¦‚ï¼ŒåŠ æ³•è¿ç®—ç¬¦(â€˜ + â€˜)å°†ä¸¤ä¸ªæ•°å­—ç›¸åŠ ï¼Œå¦‚â€™ let i &#x3D; 1 + 2 â€˜ï¼Œé€»è¾‘å’Œè¿ç®—ç¬¦(â€˜ &amp;&amp; â€˜)ç»“åˆä¸¤ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚â€™ if enteredDoorCode &amp;&amp; passsedretinascan â€˜ã€‚ Swiftæ”¯æŒæ‚¨å¯èƒ½å·²ç»ä»Cç­‰è¯­è¨€ä¸­çŸ¥é“çš„è¿ç®—ç¬¦ï¼Œå¹¶æ”¹è¿›äº†å‡ ç§åŠŸèƒ½æ¥æ¶ˆé™¤å¸¸è§çš„ç¼–ç é”™è¯¯ã€‚èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ&#x3D;ï¼‰ä¸è¿”å›å€¼ï¼Œä»¥é˜²æ­¢åœ¨ç­‰äºè¿ç®—ç¬¦ï¼ˆ==æ—¶è¢«é”™è¯¯ä½¿ç”¨ã€‚ç®—æœ¯è¿ç®—ç¬¦ï¼ˆ+ã€-ã€*ã€/ã€%ç­‰ï¼‰æ£€æµ‹å¹¶ç¦æ­¢å€¼æº¢å‡ºï¼Œä»¥é¿å…åœ¨å¤„ç†å¤§äºæˆ–å°äºå­˜å‚¨å®ƒä»¬çš„ç±»å‹å…è®¸å€¼èŒƒå›´çš„æ•°å­—æ—¶å‡ºç°æ„å¤–ç»“æœã€‚æ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨Swiftçš„æº¢å‡ºè¿ç®—ç¬¦æ¥è¯„ä¼°æº¢å‡ºè¡Œä¸ºï¼Œå¦‚æº¢å‡ºè¿ç®—ç¬¦ä¸­æ‰€è¿°ã€‚ Swiftè¿˜æä¾›äº†Cä¸­æ‰¾ä¸åˆ°çš„èŒƒå›´è¿ç®—ç¬¦ï¼Œä¾‹å¦‚a..&lt;bå’Œa...bï¼Œä½œä¸ºè¡¨è¾¾ä¸€ç³»åˆ—å€¼çš„å¿«æ·æ–¹å¼ã€‚ æœ¬ç« ä»‹ç»äº†Swiftä¸­çš„å¸¸è§è¿ç®—ç¬¦ã€‚é«˜çº§è¿ç®—ç¬¦æ¶µç›–äº†Swiftçš„é«˜çº§è¿ç®—ç¬¦ï¼Œå¹¶æè¿°äº†å¦‚ä½•å®šä¹‰è‡ªå·±çš„è‡ªå®šä¹‰è¿ç®—ç¬¦ï¼Œå¹¶å®ç°æ‚¨è‡ªå·±çš„è‡ªå®šä¹‰ç±»å‹çš„æ ‡å‡†è¿ç®—ç¬¦ã€‚ æœ¯è¯­è¿ç®—ç¬¦æ˜¯ä¸€å…ƒã€äºŒè¿›åˆ¶æˆ–ä¸‰å…ƒï¼š ä¸€å…ƒè¿ç®—ç¬¦å¯¹å•ä¸ªç›®æ ‡ï¼ˆå¦‚-aï¼‰è¿›è¡Œæ“ä½œã€‚å…ƒå‰ç¼€è¿ç®—ç¬¦å‡ºç°åœ¨ç›®æ ‡ä¹‹å‰ï¼ˆä¾‹å¦‚!bï¼‰ï¼Œä¸€å…ƒåç¼€è¿ç®—ç¬¦ç«‹å³å‡ºç°åœ¨ç›®æ ‡åé¢ï¼ˆä¾‹å¦‚c!ï¼‰ã€‚ Binary operators operate on two targets (such as 2 + 3) and are infix because they appear in between their two targets. Ternary operators operate on three targets. Like C, Swift has only one ternary operator, the ternary conditional operator (a ? b : c). æ“ä½œç¬¦å½±å“çš„å€¼æ˜¯æ“ä½œæ•°ã€‚åœ¨è¡¨è¾¾å¼ 1 + 2 ä¸­ï¼Œ+ ç¬¦å·æ˜¯ä¸€ä¸ªä¸­ç¼€æ“ä½œç¬¦ï¼Œå®ƒçš„ä¸¤ä¸ªæ“ä½œæ•°æ˜¯å€¼ 1 å’Œ 2 ã€‚ åˆ†é…æ“ä½œå‘˜èµ‹å€¼æ“ä½œç¬¦ ( a = b )ç”¨ b çš„å€¼åˆå§‹åŒ–æˆ–æ›´æ–° a çš„å€¼: 1234let b = 10var a = 5a = b// a is now equal to 10 å¦‚æœèµ‹å€¼çš„å³ä¾§æ˜¯ä¸€ä¸ªå…·æœ‰å¤šä¸ªå€¼çš„å…ƒç»„ï¼Œåˆ™å…¶å…ƒç´ å¯ä»¥åŒæ—¶åˆ†è§£ä¸ºå¤šä¸ªå¸¸é‡æˆ–å˜é‡ï¼š 12let (x, y) = (1, 2)// x is equal to 1, and y is equal to 2 ä¸Cå’ŒObjective-Cä¸­çš„èµ‹å€¼è¿ç®—ç¬¦ä¸åŒï¼ŒSwiftä¸­çš„èµ‹å€¼è¿ç®—ç¬¦æœ¬èº«ä¸ä¼šè¿”å›å€¼ã€‚ä»¥ä¸‹é™ˆè¿°æ— æ•ˆï¼š 123if x = y &#123; // This isn&#x27;t valid, because x = y doesn&#x27;t return a value.&#125; è¿™ä¸ªç‰¹æ€§å¯ä»¥é˜²æ­¢åœ¨å®é™…ä½¿ç”¨ç­‰äºæ“ä½œç¬¦( == )æ—¶æ„å¤–ä½¿ç”¨èµ‹å€¼æ“ä½œç¬¦( = )ã€‚é€šè¿‡ä½¿ if x = y æ— æ•ˆï¼ŒSwiftå¯ä»¥å¸®åŠ©ä½ åœ¨ä»£ç ä¸­é¿å…è¿™ç±»é”™è¯¯ã€‚ ç®—æœ¯è¿ç®—ç¬¦Swiftæ”¯æŒæ‰€æœ‰æ•°å­—ç±»å‹çš„å››ä¸ªæ ‡å‡†ç®—æœ¯è¿ç®—ç¬¦ï¼š æ·»åŠ ï¼ˆ+ï¼‰ å‡æ³•ï¼ˆ-ï¼‰ ä¹˜æ³•ï¼ˆ*ï¼‰ å¸ï¼ˆ/ï¼‰ 12341 + 2 // equals 35 - 3 // equals 22 * 3 // equals 610.0 / 2.5 // equals 4.0 ä¸Cå’ŒObjective-Cä¸­çš„ç®—æœ¯æ“ä½œç¬¦ä¸åŒï¼ŒSwiftçš„ç®—æœ¯æ“ä½œç¬¦é»˜è®¤æƒ…å†µä¸‹ä¸å…è®¸å€¼æº¢å‡ºã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨Swiftçš„æº¢å‡ºæ“ä½œç¬¦(ä¾‹å¦‚ a &amp;+ b )æ¥é€‰æ‹©å€¼æº¢å‡ºè¡Œä¸ºã€‚See Overflow Operators. Stringä¸²è”ä¹Ÿæ”¯æŒåŠ æ³•è¿ç®—ç¬¦ï¼š 1&quot;hello, &quot; + &quot;world&quot; // equals &quot;hello, world&quot; å‰©ä½™è¿ç®—ç¬¦remainderæ“ä½œç¬¦ ( a % b )è®¡ç®—å‡º b çš„å¤šå°‘å€å°†é€‚åˆäº a å¹¶è¿”å›å‰©ä½™çš„å€¼(ç§°ä¸ºremainder)ã€‚ æ³¨æ„ å…¶ä½™è¿ç®—ç¬¦ï¼ˆ%ï¼‰åœ¨å…¶ä»–è¯­è¨€ä¸­ä¹Ÿè¢«ç§°ä¸ºæ¨¡è¿ç®—ç¬¦ã€‚ç„¶è€Œï¼Œå®ƒåœ¨Swiftä¸­å¯¹è´Ÿæ•°çš„è¡Œä¸ºæ„å‘³ç€ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‰©ä½™çš„æ“ä½œï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–æ“ä½œã€‚ ä»¥ä¸‹æ˜¯å‰©ä½™è¿ç®—ç¬¦çš„å·¥ä½œåŸç†ã€‚è¦è®¡ç®—%ï¼Œæ‚¨é¦–å…ˆè®¡ç®—å‡º9ä¸ª4ä¸ªå†…éƒ¨æœ‰å¤šå°‘ä¸ªï¼š æ‚¨å¯ä»¥åœ¨9ä¸ªå†…éƒ¨å®‰è£…ä¸¤ä¸ª4sï¼Œå…¶ä½™ä¸º1ï¼ˆä»¥æ©™è‰²æ˜¾ç¤ºï¼‰ã€‚ åœ¨Swiftä¸­ï¼Œè¿™å°†å†™ä¸ºï¼š 19 % 4 // equals 1 ä¸ºäº†ç¡®å®š%bçš„ç­”æ¡ˆï¼Œ%è¿ç®—ç¬¦è®¡ç®—ä»¥ä¸‹æ–¹ç¨‹ï¼Œå¹¶å°†remainderä½œä¸ºå…¶è¾“å‡ºè¿”å›ï¼š 1a = (b x some multiplier) + remainder å…¶ä¸­somemultiplieræ˜¯é€‚åˆaå†…éƒ¨çš„bçš„æœ€å¤§å€æ•°ã€‚ å°†9å’Œ4æ’å…¥æ­¤æ–¹ç¨‹ä¼šäº§ç”Ÿï¼š 19=(4 x 2)+1 åœ¨è®¡ç®—è´Ÿå€¼çš„ä½™æ•°æ—¶ï¼Œä¹Ÿåº”ç”¨äº†ç›¸åŒçš„æ–¹æ³•ï¼š 1-9 % 4 // equals -1 åœ¨æ–¹ç¨‹ä¸­æ’å…¥-9å’Œ4ä¼šäº§ç”Ÿï¼š 1-9=(4 x -2)-1 ç»™å‡ºå‰©ä½™å€¼-1ã€‚ å½“ b å€¼ä¸ºè´Ÿå€¼æ—¶ï¼Œ b çš„ç¬¦å·å°†è¢«å¿½ç•¥ã€‚è¿™æ„å‘³ç€ a % b å’Œ a % -b æ€»æ˜¯ç»™å‡ºç›¸åŒçš„ç­”æ¡ˆã€‚ ä¸€å…ƒå‡å·è¿ç®—ç¬¦æ•°å­—å€¼çš„ç¬¦å·å¯ä»¥ä½¿ç”¨å‰ç¼€-ï¼ˆç§°ä¸ºä¸€å…ƒå‡å·è¿ç®—ç¬¦ï¼‰åˆ‡æ¢ï¼š 123let three = 3let minusThree = -three // minusThree equals -3let plusThree = -minusThree // plusThree equals 3, or &quot;minus minus three&quot; ä¸€å…ƒå‡ç®—ç¬¦ï¼ˆ-ï¼‰ç›´æ¥æ”¾åœ¨å®ƒæ“ä½œçš„å€¼ä¹‹å‰ï¼Œæ²¡æœ‰ä»»ä½•ç©ºæ ¼ã€‚ Unary Plusè¿ç®—ç¬¦ä¸€å…ƒåŠ è¿ç®—ç¬¦ï¼ˆ+ï¼‰åªéœ€è¿”å›å…¶æ“ä½œçš„å€¼ï¼Œæ— éœ€ä»»ä½•æ›´æ”¹ï¼š 12let minusSix = -6let alsoMinusSix = +minusSix // alsoMinusSix equals -6 è™½ç„¶ä¸€å…ƒåŠ è¿ç®—ç¬¦å®é™…ä¸Šä»€ä¹ˆéƒ½æ²¡åšï¼Œä½†å½“ä½¿ç”¨ä¸€å…ƒå‡è¿ç®—ç¬¦è¿›è¡Œè´Ÿæ•°æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥åœ¨ä»£ç ä¸­ä¸ºæ­£æ•°æä¾›å¯¹ç§°æ€§ã€‚ å¤åˆåˆ†é…è¿ç®—ç¬¦ä¸Cä¸€æ ·ï¼ŒSwiftæä¾›äº†å°†èµ‹å€¼ï¼ˆ&#x3D;ï¼‰ä¸å¦ä¸€ä¸ªæ“ä½œç›¸ç»“åˆçš„å¤åˆèµ‹å€¼è¿ç®—ç¬¦ã€‚ä¸€ä¸ªä¾‹å­æ˜¯åŠ æ³•èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ+=ï¼š 123var a = 1a += 2// a is now equal to 3 è¡¨è¾¾å¼ a += 2 æ˜¯ a = a + 2 çš„ç¼©å†™ã€‚å®é™…ä¸Šï¼ŒåŠ æ³•å’Œèµ‹å€¼è¢«åˆå¹¶åˆ°ä¸€ä¸ªæ“ä½œç¬¦ä¸­ï¼ŒåŒæ—¶æ‰§è¡Œè¿™ä¸¤ä¸ªä»»åŠ¡ã€‚ æ³¨æ„ å¤åˆèµ‹å€¼æ“ä½œç¬¦ä¸è¿”å›å€¼ã€‚ä¾‹å¦‚ï¼Œä½ ä¸èƒ½å†™let b = a += 2ã€‚ æœ‰å…³Swiftæ ‡å‡†åº“æä¾›çš„è¿ç®—ç¬¦çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…è¿ç®—ç¬¦å£°æ˜ã€‚ æ¯”è¾ƒè¿ç®—ç¬¦Swift æ”¯æŒä»¥ä¸‹æ¯”è¾ƒè¿ç®—ç¬¦ï¼š Equal to (a == b) Not equal to (a != b) Greater than (a &gt; b) Less than (a &lt; b) Greater than or equal to (a &gt;= b) Less than or equal to (a &lt;= b) æ³¨æ„ Swiftè¿˜æä¾›äº†ä¸¤ä¸ªèº«ä»½è¿ç®—ç¬¦ï¼ˆ===å’Œ!==ï¼Œç”¨äºæµ‹è¯•ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨æ˜¯å¦éƒ½å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…èº«ä»½è¿è¥å•†ã€‚ æ¯ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦éƒ½è¿”å›ä¸€ä¸ªBoolå€¼ï¼Œä»¥æŒ‡ç¤ºè¯­å¥æ˜¯å¦ä¸ºçœŸï¼š 1234561 == 1 // true because 1 is equal to 12 != 1 // true because 2 isn&#x27;t equal to 12 &gt; 1 // true because 2 is greater than 11 &lt; 2 // true because 1 is less than 21 &gt;= 1 // true because 1 is greater than or equal to 12 &lt;= 1 // false because 2 isn&#x27;t less than or equal to 1 æ¯”è¾ƒè¿ç®—ç¬¦é€šå¸¸ç”¨äºæ¡ä»¶è¯­å¥ï¼Œä¾‹å¦‚ifè¯­å¥ï¼š 1234567let name = &quot;world&quot;if name == &quot;world&quot; &#123; print(&quot;hello, world&quot;)&#125; else &#123; print(&quot;I&#x27;m sorry \\(name), but I don&#x27;t recognize you&quot;)&#125;// Prints &quot;hello, world&quot;, because name is indeed equal to &quot;world&quot;. æœ‰å…³ifè¯­å¥çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ§åˆ¶æµã€‚ å¦‚æœä¸¤ä¸ªå…ƒç»„å…·æœ‰ç›¸åŒçš„ç±»å‹å’Œç›¸åŒæ•°é‡çš„å€¼ï¼Œæ‚¨å¯ä»¥æ¯”è¾ƒå®ƒä»¬ã€‚å…ƒç»„ä»å·¦åˆ°å³æ¯”è¾ƒï¼Œä¸€æ¬¡ä¸€ä¸ªå€¼ï¼Œç›´åˆ°æ¯”è¾ƒå‘ç°ä¸¤ä¸ªä¸ç›¸ç­‰çš„å€¼ã€‚å¯¹è¿™ä¸¤ä¸ªå€¼è¿›è¡Œäº†æ¯”è¾ƒï¼Œæ¯”è¾ƒçš„ç»“æœå†³å®šäº†å…ƒç»„æ¯”è¾ƒçš„æ€»ä½“ç»“æœã€‚å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆå…ƒç»„æœ¬èº«å°±æ˜¯ç›¸ç­‰çš„ã€‚ä¾‹å¦‚ï¼š 123(1, &quot;zebra&quot;) &lt; (2, &quot;apple&quot;) // true because 1 is less than 2; &quot;zebra&quot; and &quot;apple&quot; aren&#x27;t compared(3, &quot;apple&quot;) &lt; (3, &quot;bird&quot;) // true because 3 is equal to 3, and &quot;apple&quot; is less than &quot;bird&quot;(4, &quot;dog&quot;) == (4, &quot;dog&quot;) // true because 4 is equal to 4, and &quot;dog&quot; is equal to &quot;dog&quot; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨ç¬¬ä¸€è¡Œçœ‹åˆ°ä»å·¦åˆ°å³çš„æ¯”è¾ƒè¡Œä¸ºã€‚å› ä¸º1å°äº2(1,&quot;zebra&quot;)è¢«è®¤ä¸ºæ˜¯å°äº(2,&quot;apple&quot;)ï¼Œæ— è®ºå…ƒç»„ä¸­çš„ä»»ä½•å…¶ä»–å€¼å¦‚ä½•ã€‚&quot;zebra&quot;ä¸äºšäº&quot;apple&quot;å¹¶ä¸é‡è¦ï¼Œå› ä¸ºæ¯”è¾ƒå·²ç»ç”±å…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å†³å®šäº†ã€‚ç„¶è€Œï¼Œå½“å…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç›¸åŒæ—¶ï¼Œå®ƒä»¬çš„ç¬¬äºŒä¸ªå…ƒç´ ä¼šè¿›è¡Œæ¯”è¾ƒâ€”â€”è¿™å°±æ˜¯ç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡Œå‘ç”Ÿçš„äº‹æƒ…ã€‚ åªæœ‰å½“è¿ç®—ç¬¦å¯ä»¥åº”ç”¨äºå„è‡ªå…ƒç»„ä¸­çš„æ¯ä¸ªå€¼æ—¶ï¼Œå…ƒç»„æ‰èƒ½ä¸ç»™å®šè¿ç®—ç¬¦è¿›è¡Œæ¯”è¾ƒã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œæ‚¨å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªç±»å‹çš„å…ƒç»„(String,Int)å› ä¸ºå¯ä»¥ä½¿ç”¨&lt;è¿ç®—ç¬¦æ¯”è¾ƒStringå’ŒIntå€¼ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸¤ä¸ªç±»å‹çš„å…ƒç»„(String,Bool)æ— æ³•ä¸&lt;è¿ç®—ç¬¦è¿›è¡Œæ¯”è¾ƒï¼Œå› ä¸º&lt;è¿ç®—ç¬¦ä¸èƒ½åº”ç”¨äºBoolå€¼ã€‚ 12(&quot;blue&quot;, -1) &lt; (&quot;purple&quot;, 1) // OK, evaluates to true(&quot;blue&quot;, false) &lt; (&quot;purple&quot;, true) // Error because &lt; can&#x27;t compare Boolean values æ³¨æ„ Swiftæ ‡å‡†åº“åŒ…æ‹¬å°‘äºä¸ƒä¸ªå…ƒç´ çš„å…ƒç»„çš„å…ƒç»„æ¯”è¾ƒè¿ç®—ç¬¦ã€‚è¦å°†å…ƒç»„ä¸ä¸ƒä¸ªæˆ–æ›´å¤šå…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œæ‚¨å¿…é¡»è‡ªå·±å®ç°æ¯”è¾ƒè¿ç®—ç¬¦ã€‚ ä¸‰å…ƒæ¡ä»¶è¿ç®—ç¬¦ä¸‰å…ƒæ¡ä»¶ç®—å­æ˜¯ä¸€ä¸ªæœ‰ä¸‰ä¸ªéƒ¨åˆ†çš„ç‰¹æ®Šç®—å­ï¼Œå®ƒæ¥å—å½¢å¼question?answer1:answer2ã€‚è¿™æ˜¯æ ¹æ®questionæ˜¯çœŸè¿˜æ˜¯å‡æ¥è¯„ä¼°ä¸¤ä¸ªè¡¨è¾¾å¼ä¹‹ä¸€çš„å¿«æ·æ–¹å¼ã€‚å¦‚æœquestionå±å®ï¼Œå®ƒä¼šè¯„ä¼°answer1å¹¶è¿”å›å…¶å€¼ï¼›å¦åˆ™ï¼Œå®ƒä¼šè¯„ä¼°answer2å¹¶è¿”å›å…¶å€¼ã€‚ ä¸‰å…ƒæ¡ä»¶è¿ç®—ç¬¦æ˜¯ä»¥ä¸‹ä»£ç çš„ç¼©å†™ï¼š 12345if question &#123; answer1&#125; else &#123; answer2&#125; è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼Œå®ƒè®¡ç®—äº†è¡¨æ ¼è¡Œçš„é«˜åº¦ã€‚å¦‚æœè¡Œæœ‰æ ‡é¢˜ï¼Œè¡Œé«˜åº”æ¯”å†…å®¹é«˜åº¦é«˜50åˆ†ï¼Œå¦‚æœè¡Œæ²¡æœ‰æ ‡å¤´ï¼Œåˆ™é«˜20åˆ†ï¼š 1234let contentHeight = 40let hasHeader = truelet rowHeight = contentHeight + (hasHeader ? 50 : 20)// rowHeight is equal to 90 ä¸Šé¢çš„ç¤ºä¾‹æ˜¯ä»¥ä¸‹ä»£ç çš„ç®€å†™ï¼š 123456789let contentHeight = 40let hasHeader = truelet rowHeight: Intif hasHeader &#123; rowHeight = contentHeight + 50&#125; else &#123; rowHeight = contentHeight + 20&#125;// rowHeight is equal to 90 ç¬¬ä¸€ä¸ªç¤ºä¾‹å¯¹ä¸‰å…ƒæ¡ä»¶è¿ç®—ç¬¦çš„ä½¿ç”¨æ„å‘³ç€rowHeightå¯ä»¥åœ¨ä¸€è¡Œä»£ç ä¸Šè®¾ç½®ä¸ºæ­£ç¡®çš„å€¼ï¼Œè¿™æ¯”ç¬¬äºŒä¸ªç¤ºä¾‹ä¸­ä½¿ç”¨çš„ä»£ç æ›´ç®€æ´ã€‚ ä¸‰å…ƒæ¡ä»¶ç®—å­ä¸ºå†³å®šè€ƒè™‘ä¸¤ä¸ªè¡¨è¾¾å¼ä¸­çš„å“ªä¸€ä¸ªæä¾›äº†ä¸€ä¸ªé«˜æ•ˆçš„ç®€å†™ã€‚ç„¶è€Œï¼Œè¯·å°å¿ƒä½¿ç”¨ä¸‰å…ƒæ¡ä»¶æ“ä½œå‘˜ã€‚å¦‚æœè¿‡åº¦ä½¿ç”¨ï¼Œå®ƒçš„ç®€æ´æ€§å¯èƒ½ä¼šå¯¼è‡´éš¾ä»¥é˜…è¯»çš„ä»£ç ã€‚é¿å…å°†ä¸‰å…ƒæ¡ä»¶è¿ç®—ç¬¦çš„å¤šä¸ªå®ä¾‹ç»„åˆæˆä¸€ä¸ªå¤åˆè¯­å¥ã€‚ nil åˆå¹¶è¿ç®—ç¬¦é›¶å…±åŒåŒ–æ“ä½œå‘˜ï¼ˆa??b) å¦‚æœå¯é€‰aåŒ…å«ä¸€ä¸ªå€¼ï¼Œåˆ™è§£å¼€å®ƒï¼Œå¦‚æœaä¸ºnilåˆ™è¿”å›é»˜è®¤å€¼bã€‚è¡¨è¾¾å¼aæ€»æ˜¯å¯é€‰ç±»å‹ã€‚è¡¨è¾¾å¼bå¿…é¡»ä¸å­˜å‚¨åœ¨aä¸­çš„ç±»å‹åŒ¹é…ã€‚ é›¶å…±åŒç®—ç¬¦æ˜¯ä»¥ä¸‹ä»£ç çš„ç¼©å†™ï¼š 1a != nil ? a! : b ä¸Šé¢çš„ä»£ç ä½¿ç”¨ä¸‰å…ƒæ¡ä»¶è¿ç®—ç¬¦å’Œå¼ºåˆ¶å±•å¼€ï¼ˆa!ï¼‰å½“aä¸æ˜¯nilï¼Œè®¿é—®åŒ…è£¹åœ¨aä¸­çš„å€¼ï¼Œå¦åˆ™è¿”å›bã€‚é›¶å‡èšè¿ç®—ç¬¦æä¾›äº†ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼ï¼Œä»¥ç®€æ´æ˜“è¯»çš„å½¢å¼å°è£…è¿™ç§æœ‰æ¡ä»¶çš„æ£€æŸ¥å’Œå±•å¼€åŒ…è£…ã€‚ æ³¨æ„ å¦‚æœaçš„å€¼énilï¼Œåˆ™ä¸è®¡ç®—bçš„å€¼ã€‚è¿™è¢«ç§°ä¸ºçŸ­è·¯è¯„ä¼°ã€‚ ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨é›¶å…±åŒåŒ–è¿ç®—ç¬¦åœ¨é»˜è®¤é¢œè‰²åç§°å’Œå¯é€‰ç”¨æˆ·å®šä¹‰çš„é¢œè‰²åç§°ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼š 12345let defaultColorName = &quot;red&quot;var userDefinedColorName: String? // defaults to nilvar colorNameToUse = userDefinedColorName ?? defaultColorName// userDefinedColorName is nil, so colorNameToUse is set to the default of &quot;red&quot; userDefinedColorNameå˜é‡å®šä¹‰ä¸ºå¯é€‰Stringï¼Œé»˜è®¤å€¼ä¸ºnilã€‚ç”±äºuserDefinedColorNameæ˜¯å¯é€‰ç±»å‹ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨é›¶å¼ºåˆ¶è¿ç®—ç¬¦æ¥è€ƒè™‘å…¶å€¼ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œè¿ç®—ç¬¦ç”¨äºç¡®å®šåä¸ºcolorNameToUseçš„Stringå˜é‡çš„åˆå§‹å€¼ã€‚å› ä¸ºuserDefinedColorNameï¼Œæ‰€ä»¥è¡¨è¾¾å¼userDefinedColorName??defaultColorNameè¿”å›defaultColorNameæˆ–&quot;red&quot;çš„å€¼ã€‚ å¦‚æœæ‚¨å°†énilå€¼åˆ†é…ç»™userDefinedColorNameï¼Œå¹¶å†æ¬¡æ‰§è¡Œé›¶å…±åŒè®¡ç®—ç¬¦æ£€æŸ¥ï¼Œåˆ™ä½¿ç”¨userDefinedColorNameä¸­åŒ…è£…çš„å€¼ï¼Œè€Œä¸æ˜¯é»˜è®¤å€¼ï¼š 123userDefinedColorName = &quot;green&quot;colorNameToUse = userDefinedColorName ?? defaultColorName// userDefinedColorName isn&#x27;t nil, so colorNameToUse is set to &quot;green&quot; èŒƒå›´æ“ä½œå‘˜SwiftåŒ…æ‹¬å‡ ä¸ªèŒƒå›´è¿ç®—ç¬¦ï¼Œå®ƒä»¬æ˜¯è¡¨è¾¾ä¸€ç³»åˆ—å€¼çš„å¿«æ·æ–¹å¼ã€‚ å°é—­å¼è·ç¦»æ“ä½œå‘˜é—­èŒƒå›´è¿ç®—ç¬¦ï¼ˆa...bï¼‰å®šä¹‰äº†ä¸€ä¸ªä»aåˆ°bçš„èŒƒå›´ï¼ŒåŒ…æ‹¬å€¼aå’Œbã€‚açš„å€¼ä¸å¾—å¤§äºbã€‚ åœ¨æ‚¨æƒ³è¦ä½¿ç”¨æ‰€æœ‰å€¼çš„èŒƒå›´ä¸Šè¿­ä»£æ—¶ï¼Œé—­åˆèŒƒå›´è¿ç®—ç¬¦éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚for-inå¾ªç¯ï¼š 12345678for index in 1...5 &#123; print(&quot;\\(index) times 5 is \\(index * 5)&quot;)&#125;// 1 times 5 is 5// 2 times 5 is 10// 3 times 5 is 15// 4 times 5 is 20// 5 times 5 is 25 æœ‰å…³for-inå¾ªç¯çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ§åˆ¶æµã€‚ åŠå¼€æ”¾å¼èŒƒå›´æ“ä½œå‘˜åŠå¼€èŒƒå›´è¿ç®—ç¬¦ï¼ˆa..&lt;bï¼‰å®šä¹‰äº†ä¸€ä¸ªä»aåˆ°bè¿è¡Œçš„èŒƒå›´ï¼Œä½†ä¸åŒ…æ‹¬bã€‚æ®è¯´å®ƒæ˜¯åŠå¼€æ”¾çš„ï¼Œå› ä¸ºå®ƒåŒ…å«å®ƒçš„ç¬¬ä¸€ä¸ªå€¼ï¼Œä½†ä¸åŒ…å«å®ƒçš„æœ€ç»ˆå€¼ã€‚ä¸é—­åŒºé—´è¿ç®—ç¬¦ä¸€æ ·ï¼Œaçš„å€¼ä¸å¾—å¤§äºbã€‚å¦‚æœaçš„å€¼ç­‰äºbï¼Œé‚£ä¹ˆç»“æœèŒƒå›´å°†æ˜¯ç©ºçš„ã€‚ å½“æ‚¨ä½¿ç”¨åŸºäºé›¶çš„åˆ—è¡¨ï¼ˆå¦‚æ•°ç»„ï¼‰æ—¶ï¼ŒåŠå¼€æ”¾èŒƒå›´ç‰¹åˆ«æœ‰ç”¨ï¼Œå…¶ä¸­æœ€å¤šï¼ˆä½†ä¸åŒ…æ‹¬ï¼‰åˆ—è¡¨çš„é•¿åº¦éå¸¸æœ‰ç”¨ï¼š 123456789let names = [&quot;Anna&quot;, &quot;Alex&quot;, &quot;Brian&quot;, &quot;Jack&quot;]let count = names.countfor i in 0..&lt;count &#123; print(&quot;Person \\(i + 1) is called \\(names[i])&quot;)&#125;// Person 1 is called Anna// Person 2 is called Alex// Person 3 is called Brian// Person 4 is called Jack è¯·æ³¨æ„ï¼Œæ•°ç»„åŒ…å«å››ä¸ªé¡¹ç›®ï¼Œä½†0..&lt;countä»…è®¡å…¥3ï¼ˆæ•°ç»„ä¸­æœ€åä¸€ä¸ªé¡¹ç›®çš„ç´¢å¼•ï¼‰ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåŠå¼€æ”¾çš„èŒƒå›´ã€‚æœ‰å…³æ•°ç»„çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ•°ç»„ã€‚ å•é¢èŒƒå›´é—­åŒºé—´è¿ç®—ç¬¦å¯¹å°½å¯èƒ½åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šç»§ç»­çš„èŒƒå›´æœ‰å¦ä¸€ç§å½¢å¼â€”â€”ä¾‹å¦‚ï¼ŒèŒƒå›´åŒ…æ‹¬ä»ç´¢å¼•2åˆ°æ•°ç»„æœ«å°¾çš„æ•°ç»„çš„æ‰€æœ‰å…ƒç´ ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥çœç•¥èŒƒå›´è¿ç®—ç¬¦ä¸€ä¾§çš„å€¼ã€‚è¿™ç§èŒƒå›´è¢«ç§°ä¸ºå•è¾¹èŒƒå›´ï¼Œå› ä¸ºè¿ç®—ç¬¦åªåœ¨ä¸€è¾¹æœ‰ä¸€ä¸ªå€¼ã€‚ä¾‹å¦‚ï¼š 123456789101112for name in names[2...] &#123; print(name)&#125;// Brian// Jackfor name in names[...2] &#123; print(name)&#125;// Anna// Alex// Brian åŠå¼€èŒƒå›´è¿ç®—ç¬¦è¿˜æœ‰ä¸€ä¸ªå•è¾¹å½¢å¼ï¼Œä»…ç”¨å…¶æœ€ç»ˆå€¼ä¹¦å†™ã€‚å°±åƒæ‚¨åœ¨ä¸¤ä¾§éƒ½åŒ…å«ä¸€ä¸ªå€¼ä¸€æ ·ï¼Œæœ€ç»ˆå€¼ä¸æ˜¯èŒƒå›´çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼š 12345for name in names[..&lt;2] &#123; print(name)&#125;// Anna// Alex å•è¾¹èŒƒå›´å¯ç”¨äºå…¶ä»–ä¸Šä¸‹æ–‡ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸‹æ ‡ã€‚æ‚¨æ— æ³•è¿­ä»£çœç•¥ç¬¬ä¸€ä¸ªå€¼çš„å•è¾¹èŒƒå›´ï¼Œå› ä¸ºä¸æ¸…æ¥šè¿­ä»£åº”è¯¥ä»å“ªé‡Œå¼€å§‹ã€‚æ‚¨å¯ä»¥è¿­ä»£çœç•¥å…¶æœ€ç»ˆå€¼çš„å•è¾¹èŒƒå›´ï¼›ä½†æ˜¯ï¼Œç”±äºèŒƒå›´æ— é™æœŸåœ°æŒç»­ï¼Œè¯·ç¡®ä¿ä¸ºå¾ªç¯æ·»åŠ æ˜¾å¼ç»“æŸæ¡ä»¶ã€‚æ‚¨è¿˜å¯ä»¥æ£€æŸ¥å•è¾¹èŒƒå›´æ˜¯å¦åŒ…å«ç‰¹å®šå€¼ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚ 1234let range = ...5range.contains(7) // falserange.contains(4) // truerange.contains(-1) // true é€»è¾‘è¿ç®—ç¬¦é€»è¾‘è¿ç®—ç¬¦ä¿®æ”¹æˆ–ç»„åˆå¸ƒå°”é€»è¾‘å€¼trueå’Œfalseã€‚Swiftæ”¯æŒåœ¨åŸºäºCçš„è¯­è¨€ä¸­æ‰¾åˆ°çš„ä¸‰ä¸ªæ ‡å‡†é€»è¾‘è¿ç®—ç¬¦ï¼š é€»è¾‘ä¸æ˜¯ï¼ˆ!aï¼‰ é€»è¾‘å’Œï¼ˆa&amp;&amp;bï¼‰ Logical OR (a || b) é€»è¾‘éè¿ç®—ç¬¦é€»è¾‘éè¿ç®—ç¬¦ï¼ˆ!aï¼‰åè½¬å¸ƒå°”å€¼ï¼Œä½¿trueå˜æˆfalseï¼Œfalseå˜æˆtrueã€‚ é€»è¾‘NOtè¿ç®—ç¬¦æ˜¯ä¸€ä¸ªå‰ç¼€è¿ç®—ç¬¦ï¼Œå¹¶æ˜¾ç¤ºåœ¨å…¶æ“ä½œçš„å€¼ä¹‹å‰ï¼Œæ²¡æœ‰ä»»ä½•ç©ºæ ¼ã€‚å®ƒå¯ä»¥è¯»ä½œâ€œä¸æ˜¯aâ€ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š 12345let allowedEntry = falseif !allowedEntry &#123; print(&quot;ACCESS DENIED&quot;)&#125;// Prints &quot;ACCESS DENIED&quot; çŸ­è¯­if!allowedEntryå¯ä»¥è¯»ä½œâ€œå¦‚æœä¸å…è®¸è¿›å…¥â€ã€‚åªæœ‰å½“â€œä¸å…è®¸è¾“å…¥â€ä¸ºtrueæ—¶ï¼Œæ‰ä¼šæ‰§è¡Œåç»­è¡Œï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœallowedEntryä¸ºfalseã€‚ ä¸æœ¬ç¤ºä¾‹ä¸€æ ·ï¼Œä»”ç»†é€‰æ‹©å¸ƒå°”å¸¸é‡å’Œå˜é‡åç§°æœ‰åŠ©äºä¿æŒä»£ç çš„å¯è¯»æ€§å’Œç®€æ´æ€§ï¼ŒåŒæ—¶é¿å…åŒé‡å¦å®šæˆ–æ··æ·†é€»è¾‘è¯­å¥ã€‚ é€»è¾‘å’Œè¿ç®—ç¬¦(&amp;&amp;)é€»è¾‘å’Œè¿ç®—ç¬¦ï¼ˆa&amp;&amp;bï¼‰åˆ›å»ºé€»è¾‘è¡¨è¾¾å¼ï¼Œå…¶ä¸­ä¸¤ä¸ªå€¼éƒ½å¿…é¡»trueï¼Œæ•´ä½“è¡¨è¾¾å¼ä¹Ÿä¸ºtrueã€‚ å¦‚æœä»»ä¸€å€¼ä¸ºfalseï¼Œåˆ™æ•´ä½“è¡¨è¾¾å¼ä¹Ÿä¸ºfalseã€‚äº‹å®ä¸Šï¼Œå¦‚æœç¬¬ä¸€ä¸ªå€¼æ˜¯falseçš„ï¼Œç¬¬äºŒä¸ªå€¼ç”šè‡³ä¸ä¼šè¢«è®¡ç®—ï¼Œå› ä¸ºå®ƒä¸å¯èƒ½ä½¿æ•´ä¸ªè¡¨è¾¾å¼ç­‰åŒäºtrueã€‚è¿™è¢«ç§°ä¸ºçŸ­è·¯è¯„ä¼°ã€‚ æ­¤ç¤ºä¾‹è€ƒè™‘ä¸¤ä¸ªBoolå€¼ï¼Œå¹¶ä¸”ä»…å½“ä¸¤ä¸ªå€¼éƒ½ä¸ºtrueæ—¶æ‰å…è®¸è®¿é—®ï¼š 12345678let enteredDoorCode = truelet passedRetinaScan = falseif enteredDoorCode &amp;&amp; passedRetinaScan &#123; print(&quot;Welcome!&quot;)&#125; else &#123; print(&quot;ACCESS DENIED&quot;)&#125;// Prints &quot;ACCESS DENIED&quot; é€»è¾‘ORè¿ç®—ç¬¦(||)é€»è¾‘ORæ“ä½œç¬¦ ( a || b )æ˜¯ç”±ä¸¤ä¸ªç›¸é‚»ç®¡é“å­—ç¬¦ç»„æˆçš„ä¸­ç¼€æ“ä½œç¬¦ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥åˆ›å»ºé€»è¾‘è¡¨è¾¾å¼ï¼Œå…¶ä¸­åªæœ‰ä¸¤ä¸ªå€¼ä¸­çš„ä¸€ä¸ªå¿…é¡»ä¸ºâ€œtrueâ€ï¼Œæ‰èƒ½ä½¿æ•´ä¸ªè¡¨è¾¾å¼ä¸ºâ€œtrueâ€ã€‚ ä¸ä¸Šé¢çš„é€»è¾‘å’Œè¿ç®—ç¬¦ä¸€æ ·ï¼Œé€»è¾‘ORè¿ç®—ç¬¦ä½¿ç”¨çŸ­è·¯æ±‚å€¼æ¥è€ƒè™‘å…¶è¡¨è¾¾å¼ã€‚å¦‚æœé€»è¾‘ORè¡¨è¾¾å¼çš„å·¦ä¾§ä¸ºtrueï¼Œåˆ™ä¸ä¼šè®¡ç®—å³ä¾§ï¼Œå› ä¸ºå®ƒæ— æ³•æ”¹å˜æ•´ä½“è¡¨è¾¾å¼çš„ç»“æœã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€ä¸ªBoolå€¼ï¼ˆhasDoorKeyï¼‰ä¸ºfalseï¼Œä½†ç¬¬äºŒä¸ªå€¼ï¼ˆknowsOverridePasswordï¼‰ä¸ºtrueã€‚å› ä¸ºä¸€ä¸ªå€¼ä¸ºtrueï¼Œå› æ­¤æ•´ä½“è¡¨è¾¾å¼ä¹Ÿè®¡ç®—ä¸ºtrueï¼Œå¹¶ä¸”å…è®¸è®¿é—®ï¼š 12345678let hasDoorKey = falselet knowsOverridePassword = trueif hasDoorKey || knowsOverridePassword &#123; print(&quot;Welcome!&quot;)&#125; else &#123; print(&quot;ACCESS DENIED&quot;)&#125;// Prints &quot;Welcome!&quot; ç»„åˆé€»è¾‘è¿ç®—ç¬¦æ‚¨å¯ä»¥ç»„åˆå¤šä¸ªé€»è¾‘è¿ç®—ç¬¦æ¥åˆ›å»ºæ›´é•¿çš„å¤åˆè¡¨è¾¾å¼ï¼š 123456if enteredDoorCode &amp;&amp; passedRetinaScan || hasDoorKey || knowsOverridePassword &#123; print(&quot;Welcome!&quot;)&#125; else &#123; print(&quot;ACCESS DENIED&quot;)&#125;// Prints &quot;Welcome!&quot; æ­¤ç¤ºä¾‹ä½¿ç”¨å¤šä¸ª&amp;&amp;å’Œ||è¿ç®—ç¬¦æ¥åˆ›å»ºæ›´é•¿çš„å¤åˆè¡¨è¾¾å¼ã€‚ç„¶è€Œï¼Œ&amp;&amp;å’Œ||è¿ç®—ç¬¦ä»ç„¶åªåœ¨ä¸¤ä¸ªå€¼ä¸Šè¿è¡Œï¼Œå› æ­¤è¿™å®é™…ä¸Šæ˜¯ä¸‰ä¸ªè¾ƒå°çš„è¡¨è¾¾å¼é“¾åœ¨ä¸€èµ·ã€‚è¯¥ç¤ºä¾‹å¯ä»¥ç†è§£ä¸ºï¼š å¦‚æœæˆ‘ä»¬è¾“å…¥äº†æ­£ç¡®çš„é—¨å¯†ç å¹¶é€šè¿‡äº†è§†ç½‘è†œæ‰«æï¼Œæˆ–è€…æˆ‘ä»¬æœ‰æœ‰æ•ˆçš„é—¨é’¥åŒ™ï¼Œæˆ–è€…æˆ‘ä»¬çŸ¥é“ç´§æ€¥è¦†ç›–å¯†ç ï¼Œé‚£ä¹ˆå…è®¸è®¿é—®ã€‚ æ ¹æ® enteredDoorCode ï¼Œ passedRetinaScan å’Œ hasDoorKey çš„å€¼ï¼Œå‰ä¸¤ä¸ªå­è¡¨è¾¾å¼ä¸º false ã€‚ä½†æ˜¯ï¼Œç´§æ€¥é‡å†™å¯†ç æ˜¯å·²çŸ¥çš„ï¼Œå› æ­¤æ•´ä¸ªå¤åˆè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœä»ç„¶ä¸ºâ€œtrueâ€ã€‚ æ³¨æ„ Swifté€»è¾‘è¿ç®—ç¬¦&amp;&amp;å’Œ||æ˜¯å·¦å…³è”ï¼Œè¿™æ„å‘³ç€å…·æœ‰å¤šä¸ªé€»è¾‘è¿ç®—ç¬¦çš„å¤åˆè¡¨è¾¾å¼é¦–å…ˆè®¡ç®—æœ€å·¦è¾¹çš„å­è¡¨è¾¾å¼ã€‚ æ˜¾å¼æ‹¬å·æœ‰æ—¶ï¼Œåœ¨ä¸ä¸¥æ ¼éœ€è¦æ‹¬å·æ—¶åŒ…å«æ‹¬å·æ˜¯æœ‰ç”¨çš„ï¼Œä»¥ä½¿å¤æ‚è¡¨è¾¾å¼çš„æ„å›¾æ›´å®¹æ˜“é˜…è¯»ã€‚åœ¨ä¸Šé¢çš„é—¨è®¿é—®ç¤ºä¾‹ä¸­ï¼Œåœ¨å¤åˆè¡¨è¾¾å¼çš„ç¬¬ä¸€éƒ¨åˆ†å‘¨å›´æ·»åŠ æ‹¬å·ä»¥æ˜ç¡®å…¶æ„å›¾æ˜¯æœ‰ç”¨çš„ï¼š 123456if (enteredDoorCode &amp;&amp; passedRetinaScan) || hasDoorKey || knowsOverridePassword &#123; print(&quot;Welcome!&quot;)&#125; else &#123; print(&quot;ACCESS DENIED&quot;)&#125;// Prints &quot;Welcome!&quot; æ‹¬å·æ¸…æ¥šåœ°è¡¨æ˜ï¼Œå‰ä¸¤ä¸ªå€¼è¢«è§†ä¸ºæ•´ä½“é€»è¾‘ä¸­å•ç‹¬å¯èƒ½çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚å¤åˆè¡¨è¾¾å¼çš„è¾“å‡ºä¸ä¼šæ”¹å˜ï¼Œä½†æ•´ä½“æ„å›¾å¯¹è¯»è€…æ¥è¯´æ›´æ¸…æ¥šã€‚å¯è¯»æ€§æ€»æ˜¯æ¯”ç®€æ´æ›´å—æ¬¢è¿ï¼›ä½¿ç”¨æ‹¬å·ï¼Œå®ƒä»¬æœ‰åŠ©äºæ˜ç¡®ä½ çš„æ„å›¾ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ åŸºç¡€çŸ¥è¯†","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-åŸºç¡€çŸ¥è¯†","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-åŸºç¡€çŸ¥è¯†/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/TheBasics.html Swift æ˜¯ iOSã€macOSã€watchOS å’Œ Apple tvOS app å¼€å‘çš„æ–°ç¼–ç¨‹è¯­è¨€ã€‚å°½ç®¡å¦‚æ­¤ï¼Œä»æ‚¨åœ¨Cå’ŒObjective-Cå¼€å‘çš„ç»éªŒæ¥çœ‹ï¼ŒSwiftçš„è®¸å¤šéƒ¨åˆ†éƒ½ä¼šå¾ˆç†Ÿæ‚‰ã€‚ Swiftæä¾›äº†æ‰€æœ‰åŸºæœ¬Cå’ŒObjective-Cç±»å‹çš„è‡ªå·±çš„ç‰ˆæœ¬ï¼ŒåŒ…æ‹¬ç”¨äºæ•´æ•°çš„Intã€ç”¨äºæµ®ç‚¹å€¼çš„Doubleå’ŒFloatã€ç”¨äºå¸ƒå°”å€¼çš„Boolå’Œç”¨äºæ–‡æœ¬æ•°æ®çš„Stringã€‚Swiftè¿˜æä¾›äº†ä¸‰ç§ä¸»è¦é›†åˆç±»å‹çš„å¼ºå¤§ç‰ˆæœ¬ï¼ŒArrayã€Setå’ŒDictionaryï¼Œå¦‚é›†åˆç±»å‹ä¸­æ‰€è¿°ã€‚ ä¸Cä¸€æ ·ï¼ŒSwiftä½¿ç”¨å˜é‡é€šè¿‡æ ‡è¯†åç§°å­˜å‚¨å’Œå¼•ç”¨å€¼ã€‚Swiftè¿˜å¹¿æ³›ä½¿ç”¨å€¼æ— æ³•æ›´æ”¹çš„å˜é‡ã€‚è¿™äº›è¢«ç§°ä¸ºå¸¸æ•°ï¼Œæ¯”Cä¸­çš„å¸¸æ•°å¼ºå¤§å¾—å¤šã€‚åœ¨æ•´ä¸ª Swift ä¸­ï¼Œå¸¸é‡ä¼šä½¿ç”¨ï¼Œä½¿ä»£ç åœ¨å¤„ç†ä¸éœ€è¦æ›´æ”¹çš„å€¼æ—¶æ›´åŠ å®‰å…¨ã€æ›´æ¸…æ™°ã€‚ é™¤äº†ç†Ÿæ‚‰çš„ç±»å‹å¤–ï¼ŒSwiftè¿˜å¼•å…¥äº†Objective-Cä¸­æ²¡æœ‰çš„é«˜çº§ç±»å‹ï¼Œä¾‹å¦‚å…ƒç»„ã€‚å…ƒç»„ä½¿æ‚¨èƒ½å¤Ÿåˆ›å»ºå’Œä¼ é€’å€¼åˆ†ç»„ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å…ƒç»„ä»å‡½æ•°ä¸­è¿”å›å¤šä¸ªå€¼ä½œä¸ºå•ä¸ªå¤åˆå€¼ã€‚ Swiftè¿˜å¼•å…¥äº†å¯é€‰ç±»å‹ï¼Œç”¨äºå¤„ç†å€¼ç¼ºå¤±çš„æƒ…å†µã€‚å¯é€‰å†…å®¹è¦ä¹ˆè¯´â€œæœ‰ä¸€ä¸ªå€¼ï¼Œå®ƒç­‰äºxâ€æˆ–â€œæ ¹æœ¬æ²¡æœ‰å€¼â€ã€‚ä½¿ç”¨å¯é€‰ç±»ä¼¼äºåœ¨Objective-Cä¸­ä½¿ç”¨nilå’ŒæŒ‡é’ˆï¼Œä½†å®ƒä»¬é€‚ç”¨äºä»»ä½•ç±»å‹ï¼Œè€Œä¸ä»…ä»…æ˜¯ç±»ã€‚å¯é€‰é€‰é¡¹ä¸ä»…æ¯”Objective-Cä¸­çš„nilæŒ‡é’ˆæ›´å®‰å…¨ã€æ›´å…·è¡¨ç°åŠ›ï¼Œè€Œä¸”æ˜¯Swiftè®¸å¤šæœ€å¼ºå¤§åŠŸèƒ½çš„æ ¸å¿ƒã€‚ Swift æ˜¯ä¸€ç§ç±»å‹å®‰å…¨çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€è¯¥è¯­è¨€å¯å¸®åŠ©æ‚¨æ¸…æ¥šåœ°äº†è§£ä»£ç å¯ä»¥ä½¿ç”¨çš„å€¼ç±»å‹ã€‚å¦‚æœæ‚¨çš„éƒ¨åˆ†ä»£ç éœ€è¦Stringï¼Œåˆ™ç±»å‹å®‰å…¨å¯ä»¥é˜²æ­¢æ‚¨é”™è¯¯åœ°ä¼ é€’ç»™Intã€‚åŒæ ·ï¼Œç±»å‹å®‰å…¨å¯é˜²æ­¢æ‚¨æ„å¤–åœ°å°†å¯é€‰Stringä¼ é€’ç»™éœ€è¦éå¯é€‰Stringçš„ä»£ç ã€‚ç±»å‹å®‰å…¨å¯å¸®åŠ©æ‚¨åœ¨å¼€å‘è¿‡ç¨‹ä¸­å°½æ—©æ•è·å’Œä¿®å¤é”™è¯¯ã€‚ å¸¸é‡å’Œå˜é‡(Constants and Variables)å¸¸é‡å’Œå˜é‡å°†åç§°ï¼ˆå¦‚maximumNumberOfLoginAttemptsæˆ–welcomeMessageï¼‰ä¸ç‰¹å®šç±»å‹çš„å€¼ï¼ˆå¦‚æ•°å­—10æˆ–å­—ç¬¦ä¸²&quot;Hello&quot;ç›¸å…³è”ã€‚å¸¸é‡çš„å€¼ä¸€æ—¦è®¾ç½®å°±æ— æ³•æ›´æ”¹ï¼Œè€Œå˜é‡å°†æ¥å¯ä»¥è®¾ç½®ä¸ºä¸åŒçš„å€¼ã€‚ å£°æ˜å¸¸é‡å’Œå˜é‡å¸¸é‡å’Œå˜é‡åœ¨ä½¿ç”¨ä¹‹å‰å¿…é¡»å£°æ˜ã€‚æ‚¨å¯ä»¥ä½¿ç”¨letå…³é”®å­—å£°æ˜å¸¸é‡ï¼Œå¹¶ä½¿ç”¨varå…³é”®å­—å£°æ˜å˜é‡ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨å¸¸é‡å’Œå˜é‡æ¥è·Ÿè¸ªç”¨æˆ·å°è¯•ç™»å½•æ¬¡æ•°çš„ç¤ºä¾‹ï¼š 12let maximumNumberOfLoginAttempts = 10var currentLoginAttempt = 0 æ­¤ä»£ç å¯ä»¥è¯»ä½œï¼š â€œå£°æ˜ä¸€ä¸ªåä¸ºmaximumNumberOfLoginAttemptsçš„æ–°å¸¸é‡ï¼Œå¹¶ç»™å®ƒçš„å€¼10ã€‚ç„¶åï¼Œå£°æ˜ä¸€ä¸ªåä¸ºcurrentLoginAttemptçš„æ–°å˜é‡ï¼Œå¹¶ç»™å®ƒä¸€ä¸ªåˆå§‹å€¼0ã€‚â€ åœ¨æœ¬ä¾‹ä¸­ï¼Œå…è®¸çš„æœ€å¤§ç™»å½•å°è¯•æ¬¡æ•°è¢«å£°æ˜ä¸ºå¸¸é‡ï¼Œå› ä¸ºæœ€å¤§å€¼æ°¸è¿œä¸ä¼šæ”¹å˜ã€‚å½“å‰ç™»å½•å°è¯•è®¡æ•°å™¨å£°æ˜ä¸ºå˜é‡ï¼Œå› ä¸ºæ¯æ¬¡ç™»å½•å°è¯•å¤±è´¥åï¼Œæ­¤å€¼å¿…é¡»é€’å¢ã€‚ æ‚¨å¯ä»¥åœ¨ä¸€è¡Œä¸Šå£°æ˜å¤šä¸ªå¸¸é‡æˆ–å¤šä¸ªå˜é‡ï¼Œç”¨é€—å·åˆ†éš”ï¼š 1var x = 0.0, y = 0.0, z = 0.0 æ³¨æ„ å¦‚æœä»£ç ä¸­çš„å­˜å‚¨å€¼ä¸ä¼šæ›´æ”¹ï¼Œè¯·å§‹ç»ˆå°†å…¶å£°æ˜ä¸ºå¸¦æœ‰letå…³é”®å­—çš„å¸¸é‡ã€‚ä»…ä½¿ç”¨å˜é‡æ¥å­˜å‚¨éœ€è¦èƒ½å¤Ÿæ›´æ”¹çš„å€¼ã€‚ ç±»å‹æ³¨é‡Šæ‚¨å¯ä»¥åœ¨å£°æ˜å¸¸é‡æˆ–å˜é‡æ—¶æä¾›ç±»å‹æ³¨é‡Šï¼Œä»¥æ˜ç¡®å¸¸é‡æˆ–å˜é‡å¯ä»¥å­˜å‚¨çš„å€¼ç±»å‹ã€‚é€šè¿‡åœ¨å¸¸é‡æˆ–å˜é‡åç§°åæ”¾ç½®å†’å·ï¼Œåè·Ÿç©ºæ ¼ï¼Œåè·Ÿè¦ä½¿ç”¨çš„ç±»å‹åç§°æ¥ç¼–å†™ç±»å‹æ³¨é‡Šã€‚ æ­¤ç¤ºä¾‹ä¸ºåä¸ºwelcomeMessageçš„å˜é‡æä¾›äº†ä¸€ä¸ªç±»å‹æ³¨é‡Šï¼Œä»¥æŒ‡ç¤ºè¯¥å˜é‡å¯ä»¥å­˜å‚¨Stringå€¼ï¼š 1var welcomeMessage: String å£°æ˜ä¸­çš„å†’å·çš„æ„æ€æ˜¯â€œç±»å‹â€¦â€¦â€ï¼Œå› æ­¤ä¸Šé¢çš„ä»£ç å¯ä»¥ç†è§£ä¸ºï¼š â€œDeclare a variable called welcomeMessage thatâ€™s of type String.â€ â€œStringç±»å‹â€ä¸€è¯çš„æ„æ€æ˜¯â€œå¯ä»¥å­˜å‚¨ä»»ä½•Stringå€¼â€ã€‚æŠŠå®ƒæƒ³è±¡æˆâ€œå¯ä»¥å­˜å‚¨çš„ä¸œè¥¿çš„ç±»å‹â€ï¼ˆæˆ–â€œä¸œè¥¿çš„ç±»å‹â€ï¼‰ã€‚ welcomeMessageå˜é‡ç°åœ¨å¯ä»¥è®¾ç½®ä¸ºä»»ä½•å­—ç¬¦ä¸²å€¼ï¼Œæ²¡æœ‰é”™è¯¯ï¼š 1welcomeMessage = &quot;Hello&quot; æ‚¨å¯ä»¥åœ¨ä¸€è¡Œä¸Šå®šä¹‰åŒä¸€ç±»å‹çš„å¤šä¸ªç›¸å…³å˜é‡ï¼Œç”¨é€—å·åˆ†éš”ï¼Œå¹¶åœ¨æœ€ç»ˆå˜é‡åç§°åé¢æ·»åŠ å•ä¸ªç±»å‹æ³¨é‡Šï¼š 1var red, green, blue: Double æ³¨æ„ åœ¨å®è·µä¸­ï¼Œæ‚¨å¾ˆå°‘éœ€è¦ç¼–å†™ç±»å‹æ³¨é‡Šã€‚å¦‚æœæ‚¨åœ¨å®šä¹‰çš„ç‚¹ä¸ºå¸¸é‡æˆ–å˜é‡æä¾›åˆå§‹å€¼ï¼ŒSwiftå‡ ä¹æ€»æ˜¯å¯ä»¥æ¨æ–­ç”¨äºè¯¥å¸¸é‡æˆ–å˜é‡çš„ç±»å‹ï¼Œå¦‚ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­ä¸­æ‰€è¿°ã€‚åœ¨ä¸Šé¢çš„welcomeMessageç¤ºä¾‹ä¸­ï¼Œæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œå› æ­¤welcomeMessageå˜é‡çš„ç±»å‹ç”¨ç±»å‹æ³¨é‡ŠæŒ‡å®šï¼Œè€Œä¸æ˜¯ä»åˆå§‹å€¼æ¨æ–­ã€‚ å‘½åå¸¸é‡å’Œå˜é‡å¸¸é‡å’Œå˜é‡åå‡ ä¹å¯ä»¥åŒ…å«ä»»ä½•å­—ç¬¦ï¼ŒåŒ…æ‹¬Unicodeå­—ç¬¦ï¼š 123let Ï€ = 3.14159let ä½ å¥½ = &quot;ä½ å¥½ä¸–ç•Œ&quot;let ğŸ¶ğŸ® = &quot;dogcow&quot; å¸¸é‡å’Œå˜é‡åç§°ä¸èƒ½åŒ…å«ç©ºæ ¼å­—ç¬¦ã€æ•°å­¦ç¬¦å·ã€ç®­å¤´ã€ç§äººä½¿ç”¨çš„Unicodeæ ‡é‡å€¼æˆ–çº¿æ¡å’Œæ¡†ç»˜åˆ¶å­—ç¬¦ã€‚å®ƒä»¬ä¹Ÿä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œå°½ç®¡æ•°å­—å¯èƒ½åŒ…å«åœ¨åç§°çš„å…¶ä»–åœ°æ–¹ã€‚ ä¸€æ—¦æ‚¨å£°æ˜äº†ç‰¹å®šç±»å‹çš„å¸¸é‡æˆ–å˜é‡ï¼Œæ‚¨å°±æ— æ³•ä»¥ç›¸åŒåç§°å†æ¬¡å£°æ˜å®ƒï¼Œä¹Ÿæ— æ³•å°†å…¶æ›´æ”¹ä¸ºå­˜å‚¨å…¶ä»–ç±»å‹çš„å€¼ã€‚æ‚¨ä¹Ÿä¸èƒ½å°†å¸¸é‡æ›´æ”¹ä¸ºå˜é‡æˆ–å°†å˜é‡æ›´æ”¹ä¸ºå¸¸é‡ã€‚ æ³¨æ„ å¦‚æœæ‚¨éœ€è¦ä¸ºå¸¸é‡æˆ–å˜é‡æä¾›ä¸ä¿ç•™çš„Swiftå…³é”®å­—ç›¸åŒçš„åç§°ï¼Œè¯·åœ¨å°†å…³é”®å­—ç”¨ä½œåç§°æ—¶ç”¨åå‹¾ï¼ˆ&#96;ï¼‰åŒ…å›´è¯¥å…³é”®å­—ã€‚ä½†æ˜¯ï¼Œé™¤éæ‚¨å®Œå…¨åˆ«æ— é€‰æ‹©ï¼Œå¦åˆ™è¯·é¿å…ä½¿ç”¨å…³é”®å­—ä½œä¸ºåç§°ã€‚ æ‚¨å¯ä»¥å°†ç°æœ‰å˜é‡çš„å€¼æ›´æ”¹ä¸ºå…¼å®¹ç±»å‹çš„å¦ä¸€ä¸ªå€¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œ friendlyWelcome çš„å€¼ä» &quot;Hello!&quot; æ”¹å˜æˆäº† &quot;Bonjour!&quot;: 1231. var friendlyWelcome = &quot;Hello!&quot;2. friendlyWelcome = &quot;Bonjour!&quot;3. // friendlyWelcome is now &quot;Bonjour!&quot; ä¸å˜é‡ä¸åŒï¼Œå¸¸é‡çš„å€¼åœ¨è®¾ç½®åæ— æ³•æ›´æ”¹ã€‚ç¼–è¯‘ä»£ç æ—¶ï¼Œå°è¯•è¿™æ ·åšå°†æŠ¥å‘Šä¸ºé”™è¯¯ï¼š 1231. let languageName = &quot;Swift&quot;2. languageName = &quot;Swift++&quot;3. // This is a compile-time error: languageName cannot be changed. æ‰“å°å¸¸é‡å’Œå˜é‡æ‚¨å¯ä»¥ä½¿ç”¨print(_:separator:terminator:)å‡½æ•°æ‰“å°å¸¸é‡æˆ–å˜é‡çš„å½“å‰å€¼ï¼š 12print(friendlyWelcome)// Prints &quot;Bonjour!&quot; print(_:separator:terminator:)å‡½æ•°æ˜¯ä¸€ä¸ªå…¨å±€å‡½æ•°ï¼Œå°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ‰“å°åˆ°é€‚å½“çš„è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œåœ¨Xcodeä¸­ï¼Œprint(_:separator:terminator:)å‡½æ•°åœ¨Xcodeçš„â€œæ§åˆ¶å°â€çª—æ ¼ä¸­æ‰“å°å…¶è¾“å‡ºã€‚separatorå’Œterminatorå‚æ•°å…·æœ‰é»˜è®¤å€¼ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨è°ƒç”¨æ­¤å‡½æ•°æ—¶çœç•¥å®ƒä»¬ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å‡½æ•°é€šè¿‡æ·»åŠ æ¢è¡Œç¬¦æ¥ç»ˆæ­¢å…¶æ‰“å°çš„è¡Œã€‚è¦æ‰“å°åæ²¡æœ‰æ¢è¡Œç¬¦çš„å€¼ï¼Œè¯·ä¼ é€’ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ä½œä¸ºç»ˆæ­¢ç¬¦â€”â€”ä¾‹å¦‚ï¼Œprint(someValue,terminator:&quot;&quot;)ã€‚æœ‰å…³å…·æœ‰é»˜è®¤å€¼çš„å‚æ•°çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…é»˜è®¤å‚æ•°å€¼ã€‚ Swiftä½¿ç”¨å­—ç¬¦ä¸²æ’å€¼å°†å¸¸é‡æˆ–å˜é‡çš„åç§°ä½œä¸ºå ä½ç¬¦åŒ…å«åœ¨è¾ƒé•¿çš„å­—ç¬¦ä¸²ä¸­ï¼Œå¹¶æç¤ºSwiftå°†å…¶æ›¿æ¢ä¸ºè¯¥å¸¸é‡æˆ–å˜é‡çš„å½“å‰å€¼ã€‚å°†åç§°åŒ…è£…åœ¨æ‹¬å·ä¸­ï¼Œå¹¶åœ¨å¼€å¤´æ‹¬å·å‰ç”¨åæ–œæ è½¬ä¹‰ï¼š 12print(&quot;The current value of friendlyWelcome is \\(friendlyWelcome)&quot;)// Prints &quot;The current value of friendlyWelcome is Bonjour!&quot; æ³¨æ„ å¯ç”¨äºå­—ç¬¦ä¸²æ’å€¼çš„æ‰€æœ‰é€‰é¡¹éƒ½åœ¨å­—ç¬¦ä¸²æ’å€¼ä¸­æè¿°ã€‚ æ³¨é‡Šä½¿ç”¨æ³¨é‡Šåœ¨æ‚¨çš„ä»£ç ä¸­åŒ…å«ä¸å¯æ‰§è¡Œçš„æ–‡æœ¬ï¼Œä½œä¸ºå¯¹æ‚¨è‡ªå·±çš„ä¾¿æ¡æˆ–æé†’ã€‚ç¼–è¯‘ä»£ç æ—¶ï¼ŒSwiftç¼–è¯‘å™¨ä¼šå¿½ç•¥æ³¨é‡Šã€‚ Swift ä¸­çš„æ³¨é‡Šä¸ C ä¸­çš„æ³¨é‡Šéå¸¸ç›¸ä¼¼ã€‚å•è¡Œæ³¨é‡Šä»¥ä¸¤ä¸ªæ­£æ–œæ ï¼ˆ//ï¼‰å¼€å¤´ï¼š 1// This is a comment. å¤šè¡Œæ³¨é‡Šä»¥å‰æ–œæ åè·Ÿæ˜Ÿå·ï¼ˆ/*ï¼‰å¼€å§‹ï¼Œä»¥æ˜Ÿå·åè·Ÿå‰æ–œæ ï¼ˆ*/ï¼‰ç»“æŸï¼š 12/* This is also a commentbut is written over multiple lines. */ ä¸Cä¸­çš„å¤šè¡Œæ³¨é‡Šä¸åŒï¼ŒSwiftä¸­çš„å¤šè¡Œæ³¨é‡Šå¯ä»¥åµŒå¥—åœ¨å…¶ä»–å¤šè¡Œæ³¨é‡Šä¸­ã€‚æ‚¨å¯ä»¥é€šè¿‡å¯åŠ¨å¤šè¡Œæ³¨é‡Šå—ï¼Œç„¶ååœ¨ç¬¬ä¸€ä¸ªå—ä¸­å¯åŠ¨ç¬¬äºŒä¸ªå¤šè¡Œæ³¨é‡Šæ¥ç¼–å†™åµŒå¥—æ³¨é‡Šã€‚ç„¶åå…³é—­ç¬¬äºŒä¸ªå—ï¼Œç„¶åæ˜¯ç¬¬ä¸€ä¸ªå—ï¼š 123/* This is the start of the first multiline comment./* This is the second, nested multiline comment. */This is the end of the first multiline comment. */ åµŒå¥—çš„å¤šè¡Œæ³¨é‡Šä½¿æ‚¨å¯ä»¥å¿«é€Ÿè½»æ¾åœ°æ³¨é‡Šå¤§å—ä»£ç ï¼Œå³ä½¿ä»£ç å·²ç»åŒ…å«å¤šè¡Œæ³¨é‡Šã€‚ åˆ†å·(;)ä¸è®¸å¤šå…¶ä»–è¯­è¨€ä¸åŒï¼ŒSwiftä¸è¦æ±‚æ‚¨åœ¨ä»£ç ä¸­çš„æ¯ä¸ªè¯­å¥åç¼–å†™åˆ†å·ï¼ˆ;ï¼‰ï¼Œå°½ç®¡å¦‚æœæ‚¨æ„¿æ„ï¼Œæ‚¨å¯ä»¥è¿™æ ·åšã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æƒ³åœ¨ä¸€è¡Œä¸Šå†™å¤šä¸ªå•ç‹¬çš„è¯­å¥ï¼Œåˆ™éœ€è¦åˆ†å·ï¼š 12let cat = &quot;ğŸ±&quot;; print(cat)// Prints &quot;ğŸ±&quot; æ•´æ•°(Integers)æ•´æ•°æ˜¯æ²¡æœ‰å°æ•°åˆ†é‡çš„æ•´æ•°ï¼Œä¾‹å¦‚42å’Œ-23ã€‚æ•´æ•°è¦ä¹ˆæ˜¯æœ‰ç¬¦å·ï¼ˆæ­£æ•°ã€é›¶æˆ–è´Ÿæ•°ï¼‰ï¼Œè¦ä¹ˆæ— ç¬¦å·ï¼ˆæ­£æ•°æˆ–é›¶ï¼‰ã€‚ Swiftä»¥8ã€16ã€32å’Œ64ä½å½¢å¼æä¾›æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°ã€‚è¿™äº›æ•´æ•°éµå¾ªç±»ä¼¼äºCçš„å‘½åçº¦å®šï¼Œå³8ä½æ— ç¬¦å·æ•´æ•°ç±»å‹ä¸ºUInt8ï¼Œ32ä½æœ‰ç¬¦å·æ•´æ•°ç±»å‹ä¸ºInt32ã€‚ä¸ Swift ä¸­çš„æ‰€æœ‰ç±»å‹ä¸€æ ·ï¼Œè¿™äº›æ•´æ•°ç±»å‹éƒ½æœ‰å¤§å†™åç§°ã€‚ æ•´æ•°è¾¹ç•Œ(Integer Bounds)æ‚¨å¯ä»¥è®¿é—®æ¯ç§æ•´æ•°ç±»å‹çš„æœ€å°å€¼å’Œæœ€å¤§å€¼åŠå…¶minå’Œmaxï¼š 12let minValue = UInt8.min // minValue is equal to 0, and is of type UInt8let maxValue = UInt8.max // maxValue is equal to 255, and is of type UInt8 è¿™äº›å±æ€§çš„å€¼æ˜¯é€‚å½“å¤§å°çš„æ•°å­—ç±»å‹ï¼ˆå¦‚ä¸Šé¢ç¤ºä¾‹ä¸­çš„UInt8ï¼‰ï¼Œå› æ­¤å¯ä»¥ä¸ç›¸åŒç±»å‹çš„å…¶ä»–å€¼ä¸€èµ·ç”¨äºè¡¨è¾¾å¼ã€‚ Intåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨ä¸éœ€è¦é€‰æ‹©ç‰¹å®šå¤§å°çš„æ•´æ•°æ¥åœ¨ä»£ç ä¸­ä½¿ç”¨ã€‚Swiftæä¾›äº†ä¸€ç§é¢å¤–çš„æ•´æ•°ç±»å‹Intï¼Œå…¶å¤§å°ä¸å½“å‰å¹³å°çš„åŸç”Ÿå•è¯å¤§å°ç›¸åŒï¼š åœ¨32ä½å¹³å°ä¸Šï¼ŒIntä¸Int32çš„å¤§å°ç›¸åŒã€‚ åœ¨64ä½å¹³å°ä¸Šï¼ŒIntä¸Int64çš„å¤§å°ç›¸åŒã€‚ é™¤éæ‚¨éœ€è¦ä½¿ç”¨ç‰¹å®šå¤§å°çš„æ•´æ•°ï¼Œå¦åˆ™è¯·å§‹ç»ˆä½¿ç”¨Intæ¥å¤„ç†ä»£ç ä¸­çš„æ•´æ•°å€¼ã€‚è¿™æœ‰åŠ©äºä»£ç ä¸€è‡´æ€§å’Œäº’æ“ä½œæ€§ã€‚å³ä½¿åœ¨32ä½å¹³å°ä¸Šï¼ŒIntä¹Ÿå¯ä»¥å­˜å‚¨åœ¨-2,147,483,648å’Œ2,147,483,647ä¹‹é—´çš„ä»»ä½•å€¼ï¼Œå¹¶ä¸”å¯¹äºè®¸å¤šæ•´æ•°èŒƒå›´æ¥è¯´è¶³å¤Ÿå¤§ã€‚ UIntSwiftè¿˜æä¾›äº†ä¸€ç§æ— ç¬¦å·æ•´æ•°ç±»å‹UIntï¼Œå…¶å¤§å°ä¸å½“å‰å¹³å°çš„åŸç”Ÿå•è¯å¤§å°ç›¸åŒï¼š åœ¨32ä½å¹³å°ä¸Šï¼ŒUIntä¸UInt32çš„å¤§å°ç›¸åŒã€‚ åœ¨64ä½å¹³å°ä¸Šï¼ŒUIntä¸UInt64çš„å¤§å°ç›¸åŒã€‚ æ³¨æ„ ä»…å½“æ‚¨ç‰¹åˆ«éœ€è¦ä¸å¹³å°åŸç”Ÿå•è¯å¤§å°ç›¸åŒçš„æ— ç¬¦å·æ•´æ•°ç±»å‹æ—¶ï¼Œæ‰ä½¿ç”¨UIntã€‚å¦‚æœä¸æ˜¯è¿™æ ·ï¼Œæœ€å¥½æ˜¯Intï¼Œå³ä½¿å·²çŸ¥è¦å­˜å‚¨çš„å€¼æ˜¯éè´Ÿå€¼ã€‚ä¸€è‡´åœ°ä½¿ç”¨Intè¿›è¡Œæ•´æ•°å€¼æœ‰åŠ©äºä»£ç äº’æ“ä½œæ€§ï¼Œé¿å…åœ¨ä¸åŒæ•°å­—ç±»å‹ä¹‹é—´è½¬æ¢ï¼Œå¹¶åŒ¹é…æ•´æ•°ç±»å‹æ¨æ–­ï¼Œå¦‚ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­æ‰€è¿°ã€‚ æµ®ç‚¹æ•°æµ®ç‚¹æ•°æ˜¯å…·æœ‰å°æ•°åˆ†é‡çš„æ•°å­—ï¼Œå¦‚3.14159ã€0.1å’Œ-273.15ã€‚ æµ®ç‚¹ç±»å‹å¯ä»¥è¡¨ç¤ºæ¯”æ•´æ•°ç±»å‹æ›´å¹¿æ³›çš„å€¼èŒƒå›´ï¼Œå¹¶ä¸”å¯ä»¥å­˜å‚¨æ¯”Intä¸­å­˜å‚¨çš„è¦å¤§å¾—å¤šæˆ–å°å¾—å¤šçš„æ•°å­—ã€‚Swiftæä¾›äº†ä¸¤ç§æœ‰ç¬¦å·æµ®ç‚¹æ•°ç±»å‹ï¼š Doubleè¡¨ç¤º64ä½æµ®ç‚¹æ•°ã€‚ Floatè¡¨ç¤º32ä½æµ®ç‚¹æ•°ã€‚ æ³¨æ„ Doubleç²¾åº¦è‡³å°‘ä¸ºå°æ•°ç‚¹å15ä½ï¼Œè€ŒFloatçš„ç²¾åº¦å¯ä»¥å°åˆ°å°æ•°ç‚¹å6ä½ã€‚è¦ä½¿ç”¨çš„åˆé€‚æµ®ç‚¹ç±»å‹å–å†³äºæ‚¨éœ€è¦åœ¨ä»£ç ä¸­ä½¿ç”¨çš„å€¼çš„æ€§è´¨å’ŒèŒƒå›´ã€‚åœ¨è¿™ä¸¤ç§ç±»å‹åˆé€‚çš„æƒ…å†µä¸‹ï¼Œé¦–é€‰Doubleã€‚ ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­Swiftæ˜¯ä¸€ç§ç±»å‹å®‰å…¨çš„è¯­è¨€ã€‚ç±»å‹å®‰å…¨è¯­è¨€é¼“åŠ±æ‚¨æ˜ç¡®ä»£ç å¯ä»¥ä½¿ç”¨çš„å€¼ç±»å‹ã€‚å¦‚æœæ‚¨çš„éƒ¨åˆ†ä»£ç éœ€è¦Stringï¼Œåˆ™ä¸èƒ½é”™è¯¯åœ°å°†å…¶ä¼ é€’ç»™Intã€‚ ç”±äºSwiftæ˜¯ç±»å‹å®‰å…¨çš„ï¼Œå®ƒåœ¨ç¼–è¯‘ä»£ç æ—¶æ‰§è¡Œç±»å‹æ£€æŸ¥ï¼Œå¹¶å°†ä»»ä½•ä¸åŒ¹é…çš„ç±»å‹æ ‡è®°ä¸ºé”™è¯¯ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿå°½æ—©åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ•è·å’Œä¿®å¤é”™è¯¯ã€‚ ç±»å‹æ£€æŸ¥å¯å¸®åŠ©æ‚¨åœ¨å¤„ç†ä¸åŒç±»å‹çš„å€¼æ—¶é¿å…é”™è¯¯ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€æ‚¨å¿…é¡»æŒ‡å®šæ‚¨å£°æ˜çš„æ¯ä¸ªå¸¸é‡å’Œå˜é‡çš„ç±»å‹ã€‚å¦‚æœæ‚¨æ²¡æœ‰æŒ‡å®šæ‰€éœ€çš„å€¼ç±»å‹ï¼ŒSwiftä¼šä½¿ç”¨ç±»å‹æ¨æ–­æ¥è®¡ç®—é€‚å½“çš„ç±»å‹ã€‚ç±»å‹æ¨æ–­ä½¿ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ä»£ç æ—¶èƒ½å¤Ÿè‡ªåŠ¨æ¨æ–­ç‰¹å®šè¡¨è¾¾å¼çš„ç±»å‹ï¼Œåªéœ€æ£€æŸ¥æ‚¨æä¾›çš„å€¼ã€‚ ç”±äºç±»å‹æ¨æ–­ï¼ŒSwiftéœ€è¦çš„ç±»å‹å£°æ˜æ¯”Cæˆ–Objective-Cç­‰è¯­è¨€å°‘å¾—å¤šã€‚å¸¸é‡å’Œå˜é‡ä»ç„¶æ˜¯æ˜¾å¼ç±»å‹ï¼Œä½†æŒ‡å®šå…¶ç±»å‹çš„å¤§éƒ¨åˆ†å·¥ä½œéƒ½æ˜¯ä¸ºæ‚¨å®Œæˆçš„ã€‚ å½“æ‚¨å£°æ˜å…·æœ‰åˆå§‹å€¼çš„å¸¸é‡æˆ–å˜é‡æ—¶ï¼Œç±»å‹æ¨æ–­ç‰¹åˆ«æœ‰ç”¨ã€‚è¿™é€šå¸¸é€šè¿‡åœ¨æ‚¨å£°æ˜å¸¸é‡æˆ–å˜é‡æ—¶ä¸ºå¸¸é‡æˆ–å˜é‡åˆ†é…å­—é¢å€¼ï¼ˆæˆ–å­—é¢å€¼ï¼‰æ¥å®Œæˆã€‚ï¼ˆå­—é¢å€¼æ˜¯ç›´æ¥å‡ºç°åœ¨æºä»£ç ä¸­çš„å€¼ï¼Œä¾‹å¦‚ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„42å’Œ3.14159ã€‚ï¼‰ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨åœ¨ä¸è¯´æ˜ç±»å‹çš„æƒ…å†µä¸‹ä¸ºæ–°å¸¸é‡åˆ†é…42çš„å­—é¢å€¼ï¼ŒSwiftæ¨æ–­æ‚¨å¸Œæœ›è¯¥å¸¸é‡ä¸ºIntï¼Œå› ä¸ºæ‚¨å·²ç»ç”¨ä¸€ä¸ªçœ‹èµ·æ¥åƒæ•´æ•°çš„æ•°å­—åˆå§‹åŒ–äº†å®ƒï¼š 12let meaningOfLife = 42// meaningOfLife is inferred to be of type Int åŒæ ·ï¼Œå¦‚æœæ‚¨æ²¡æœ‰ä¸ºæµ®ç‚¹æ–‡å­—æŒ‡å®šç±»å‹ï¼ŒSwiftæ¨æ–­æ‚¨æƒ³åˆ›å»ºä¸€ä¸ªDoubleï¼š 12let pi = 3.14159// pi is inferred to be of type Double Swiftåœ¨æ¨æ–­æµ®ç‚¹æ•°ç±»å‹æ—¶æ€»æ˜¯é€‰æ‹©Doubleï¼ˆè€Œä¸æ˜¯Floatï¼‰ã€‚ å¦‚æœæ‚¨åœ¨è¡¨è¾¾å¼ä¸­ç»„åˆæ•´æ•°å’Œæµ®ç‚¹æ–‡å­—ï¼Œåˆ™å°†ä»ä¸Šä¸‹æ–‡ä¸­æ¨æ–­å‡ºä¸€ç§Doubleç±»å‹ï¼š 12let anotherPi = 3 + 0.14159// anotherPi is also inferred to be of type Double 3çš„å­—é¢å€¼æœ¬èº«æ²¡æœ‰æ˜¾å¼ç±»å‹ï¼Œå› æ­¤ä»æµ®ç‚¹å­—é¢å€¼çš„å­˜åœ¨ä¸­æ¨æ–­å‡ºé€‚å½“çš„Doubleè¾“å‡ºç±»å‹ä½œä¸ºåŠ æ³•çš„ä¸€éƒ¨åˆ†ã€‚ æ•°å­—æ–‡å­—æ•´æ•°æ–‡å­—å¯ä»¥å†™æˆï¼š æ²¡æœ‰å‰ç¼€çš„å°æ•° å¸¦æœ‰0bå‰ç¼€çš„äºŒè¿›åˆ¶æ•°å­— ä¸€ä¸ªå…«åº¦æ•°ï¼Œå‰ç¼€ä¸º0o åå…­è¿›åˆ¶æ•°å­—ï¼Œå‰ç¼€ä¸º0x æ‰€æœ‰è¿™äº›æ•´æ•°æ–‡å­—çš„åè¿›åˆ¶å€¼ä¸º17ï¼š 1234let decimalInteger = 17let binaryInteger = 0b10001 // 17 in binary notationlet octalInteger = 0o21 // 17 in octal notationlet hexadecimalInteger = 0x11 // 17 in hexadecimal notation æµ®ç‚¹æ–‡å­—å¯ä»¥æ˜¯åè¿›åˆ¶ï¼ˆæ²¡æœ‰å‰ç¼€ï¼‰æˆ–åå…­è¿›åˆ¶ï¼ˆå¸¦æœ‰0xå‰ç¼€ï¼‰ã€‚å®ƒä»¬å¿…é¡»åœ¨å°æ•°ç‚¹çš„ä¸¤ä¾§å§‹ç»ˆæœ‰ä¸€ä¸ªæ•°å­—ï¼ˆæˆ–åå…­è¿›åˆ¶æ•°å­—ï¼‰ã€‚åè¿›åˆ¶æµ®ç‚¹æ•°ä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ªå¯é€‰çš„æŒ‡æ•°ï¼Œç”¨å¤§å†™æˆ–å°å†™eè¡¨ç¤ºï¼›åå…­è¿›åˆ¶æµ®ç‚¹å¿…é¡»æœ‰ä¸€ä¸ªæŒ‡æ•°ï¼Œç”¨å¤§å†™æˆ–å°å†™pè¡¨ç¤ºã€‚ å¯¹äºæŒ‡æ•°ä¸ºexpçš„å°æ•°ï¼ŒåŸºæ•°ä¹˜ä»¥10expï¼š 1.25e2æ„æ€æ˜¯1.25 x 102ï¼Œæˆ–125.0ã€‚ 1.25e-2æ„æ€æ˜¯1.25 x 10-2ï¼Œæˆ–0.0125ã€‚ å¯¹äºæŒ‡æ•°ä¸ºexpçš„åå…­è¿›åˆ¶æ•°å­—ï¼ŒåŸºæ•°ä¹˜ä»¥2expï¼š 0xFp2æ„æ€æ˜¯15 x 22æˆ–60.0ã€‚ 0xFp-2æ„æ€æ˜¯15 x 2-2ï¼Œæˆ–3.75ã€‚ æ‰€æœ‰è¿™äº›æµ®ç‚¹æ–‡å­—çš„åè¿›åˆ¶å€¼ä¸º12.1875ï¼š 123let decimalDouble = 12.1875let exponentDouble = 1.21875e1let hexadecimalDouble = 0xC.3p0 æ•°å­—æ–‡å­—å¯ä»¥åŒ…å«é¢å¤–çš„æ ¼å¼ï¼Œä½¿å…¶æ›´å®¹æ˜“é˜…è¯»ã€‚æ•´æ•°å’Œæµ®ç‚¹æ•°éƒ½å¯ä»¥ç”¨é¢å¤–çš„é›¶å¡«å……ï¼Œå¹¶å¯ä»¥åŒ…å«ä¸‹åˆ’çº¿ï¼Œä»¥å¸®åŠ©æé«˜å¯è¯»æ€§ã€‚è¿™ä¸¤ç§æ ¼å¼éƒ½ä¸ä¼šå½±å“æ–‡å­—çš„åŸºæœ¬å€¼ï¼š 123let paddedDouble = 000123.456let oneMillion = 1_000_000let justOverOneMillion = 1_000_000.000_000_1 æ•°å­—ç±»å‹è½¬æ¢å¯¹äºä»£ç ä¸­çš„æ‰€æœ‰é€šç”¨æ•´æ•°å¸¸é‡å’Œå˜é‡ï¼Œå³ä½¿å·²çŸ¥å®ƒä»¬æ˜¯éè´Ÿæ•°ï¼Œä¹Ÿè¯·ä½¿ç”¨Intç±»å‹ã€‚åœ¨æ—¥å¸¸æƒ…å†µä¸‹ä½¿ç”¨é»˜è®¤æ•´æ•°ç±»å‹æ„å‘³ç€æ•´æ•°å¸¸é‡å’Œå˜é‡åœ¨æ‚¨çš„ä»£ç ä¸­ç«‹å³äº’æ“ä½œï¼Œå¹¶å°†ä¸æ•´æ•°å­—é¢å€¼çš„æ¨æ–­ç±»å‹åŒ¹é…ã€‚ ä»…åœ¨æ‰‹å¤´ä»»åŠ¡ç‰¹åˆ«éœ€è¦æ—¶ä½¿ç”¨å…¶ä»–æ•´æ•°ç±»å‹ï¼Œå› ä¸ºå¤–éƒ¨æ¥æºçš„æ•°æ®æ˜¾å¼å¤§å°ï¼Œæˆ–ç”¨äºæ€§èƒ½ã€å†…å­˜ä½¿ç”¨æˆ–å…¶ä»–å¿…è¦çš„ä¼˜åŒ–ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ˜¾å¼å¤§å°çš„ç±»å‹æœ‰åŠ©äºæ•è·ä»»ä½•æ„å¤–å€¼æº¢å‡ºï¼Œå¹¶éšå¼è®°å½•æ‰€ç”¨æ•°æ®çš„æ€§è´¨ã€‚ æ•´æ•°è½¬æ¢å¯ä»¥å­˜å‚¨åœ¨æ•´æ•°å¸¸æ•°æˆ–å˜é‡ä¸­çš„æ•°å­—èŒƒå›´å› æ¯ç§æ•°å­—ç±»å‹è€Œå¼‚ã€‚Int8å¸¸é‡æˆ–å˜é‡å¯ä»¥å­˜å‚¨-128å’Œ127ä¹‹é—´çš„æ•°å­—ï¼Œè€ŒUInt8å¸¸é‡æˆ–å˜é‡å¯ä»¥å­˜å‚¨0åˆ°255ä¹‹é—´çš„æ•°å­—ã€‚ç¼–è¯‘ä»£ç æ—¶ï¼Œä¸é€‚åˆå¤§å°æ•´æ•°ç±»å‹çš„å¸¸é‡æˆ–å˜é‡çš„æ•°å­—å°†æŠ¥å‘Šä¸ºé”™è¯¯ï¼š 12345let cannotBeNegative: UInt8 = -1// UInt8 can&#x27;t store negative numbers, and so this will report an errorlet tooBig: Int8 = Int8.max + 1// Int8 can&#x27;t store a number larger than its maximum value,// and so this will also report an error ç”±äºæ¯ç§æ•°å­—ç±»å‹å¯ä»¥å­˜å‚¨ä¸åŒèŒƒå›´çš„å€¼ï¼Œå› æ­¤æ‚¨å¿…é¡»æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©æ•°å­—ç±»å‹è½¬æ¢ã€‚è¿™ç§é€‰æ‹©åŠ å…¥æ–¹æ³•å¯ä»¥é˜²æ­¢éšè—çš„è½¬æ¢é”™è¯¯ï¼Œå¹¶æœ‰åŠ©äºåœ¨ä»£ç ä¸­æ˜ç¡®ç±»å‹è½¬æ¢æ„å›¾ã€‚ è¦å°†ä¸€ç§ç‰¹å®šæ•°å­—ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§ç‰¹å®šæ•°å­—ç±»å‹ï¼Œè¯·ä½¿ç”¨ç°æœ‰å€¼åˆå§‹åŒ–æ‰€éœ€ç±»å‹çš„æ–°æ•°å­—ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œå¸¸é‡twoThousandæ˜¯ç±»å‹UInt16ï¼Œè€Œå¸¸æ•°æ˜¯UInt8ç±»å‹ã€‚å®ƒä»¬ä¸èƒ½ç›´æ¥æ·»åŠ åœ¨ä¸€èµ·ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯åŒä¸€ç±»å‹ã€‚ç›¸åï¼Œæ­¤ç¤ºä¾‹è°ƒç”¨UInt16(one)åˆ›å»ºä¸€ä¸ªæ–°çš„UInt16ï¼Œåˆå§‹åŒ–ä¸ºoneï¼Œå¹¶ä½¿ç”¨æ­¤å€¼ä»£æ›¿åŸå§‹å€¼ï¼š 123let twoThousand: UInt16 = 2_000let one: UInt8 = 1let twoThousandAndOne = twoThousand + UInt16(one) ç”±äºæ·»åŠ çš„ä¸¤ä¾§ç°åœ¨éƒ½æ˜¯UInt16ç±»å‹ï¼Œå› æ­¤å…è®¸æ·»åŠ ã€‚è¾“å‡ºå¸¸æ•°ï¼ˆtwoThousandAndOneï¼‰è¢«æ¨æ–­ä¸ºUInt16ç±»å‹ï¼Œå› ä¸ºå®ƒæ˜¯ä¸¤ä¸ªUInt16å€¼çš„æ€»å’Œã€‚ SomeType(ofInitialValue)æ˜¯è°ƒç”¨Swiftç±»å‹çš„åˆå§‹åŒ–å™¨å¹¶ä¼ é€’åˆå§‹å€¼çš„é»˜è®¤æ–¹å¼ã€‚åœ¨å¹•åï¼ŒUInt16æœ‰ä¸€ä¸ªæ¥å—UInt8å€¼çš„åˆå§‹åŒ–å™¨ï¼Œå› æ­¤æ­¤åˆå§‹åŒ–å™¨ç”¨äºä»ç°æœ‰çš„UInt8åˆ¶ä½œæ–°çš„UInt16ã€‚ç„¶è€Œï¼Œæ‚¨ä¸èƒ½åœ¨è¿™é‡Œä¼ é€’ä»»ä½•ç±»å‹â€”â€”å®ƒå¿…é¡»æ˜¯UInt16æä¾›åˆå§‹åŒ–å™¨çš„ç±»å‹ã€‚æ‰©å±•æ¶µç›–äº†æ‰©å±•ç°æœ‰ç±»å‹ä»¥æä¾›æ¥å—æ–°ç±»å‹ï¼ˆåŒ…æ‹¬æ‚¨è‡ªå·±çš„ç±»å‹å®šä¹‰ï¼‰çš„åˆå§‹åŒ–å™¨ã€‚ æ•´æ•°å’Œæµ®ç‚¹è½¬æ¢æ•´æ•°å’Œæµ®ç‚¹æ•°å­—ç±»å‹ä¹‹é—´çš„è½¬æ¢å¿…é¡»æ˜ç¡®ï¼š 1234let three = 3let pointOneFourOneFiveNine = 0.14159let pi = Double(three) + pointOneFourOneFiveNine// pi equals 3.14159, and is inferred to be of type Double åœ¨è¿™é‡Œï¼Œå¸¸æ•°threeçš„å€¼ç”¨äºåˆ›å»ºDoubleç±»å‹çš„æ–°å€¼ï¼Œä»¥ä¾¿åŠ æ³•çš„ä¸¤ä¾§éƒ½æ˜¯ç›¸åŒçš„ç±»å‹ã€‚å¦‚æœæ²¡æœ‰è¿™ç§è½¬æ¢ï¼Œå°†ä¸å…è®¸æ·»åŠ ã€‚ æµ®ç‚¹åˆ°æ•´æ•°è½¬æ¢ä¹Ÿå¿…é¡»æ˜ç¡®ã€‚æ•´æ•°ç±»å‹å¯ä»¥ç”¨Doubleæˆ–Floatå€¼åˆå§‹åŒ–ï¼š 12let integerPi = Int(pi)// integerPi equals 3, and is inferred to be of type Int å½“ç”¨äºä»¥è¿™ç§æ–¹å¼åˆå§‹åŒ–æ–°çš„æ•´æ•°å€¼æ—¶ï¼Œæµ®ç‚¹å€¼æ€»æ˜¯è¢«æˆªæ–­ã€‚è¿™æ„å‘³ç€4.75å˜æˆ4ï¼Œ-3.9å˜æˆ-3ã€‚ æ³¨æ„ ç»„åˆæ•°å­—å¸¸æ•°å’Œå˜é‡çš„è§„åˆ™ä¸æ•°å­—æ–‡å­—çš„è§„åˆ™ä¸åŒã€‚å­—é¢å€¼3å¯ä»¥ç›´æ¥æ·»åŠ åˆ°å­—é¢å€¼0.14159ä¸­ï¼Œå› ä¸ºæ•°å­—æ–‡å­—æœ¬èº«æ²¡æœ‰æ˜¾å¼ç±»å‹ã€‚åªæœ‰åœ¨ç¼–è¯‘å™¨è¯„ä¼°å®ƒä»¬æ—¶ï¼Œæ‰ä¼šæ¨æ–­å‡ºå®ƒä»¬çš„ç±»å‹ã€‚ ç±»å‹åˆ«åç±»å‹åˆ«åå®šä¹‰äº†ç°æœ‰ç±»å‹çš„æ›¿ä»£åç§°ã€‚æ‚¨å¯ä»¥ä½¿ç”¨typealiaså…³é”®å­—å®šä¹‰ç±»å‹åˆ«åã€‚ å½“æ‚¨æƒ³ç”¨ä¸Šä¸‹æ–‡æ›´åˆé€‚çš„åç§°å¼•ç”¨ç°æœ‰ç±»å‹æ—¶ï¼Œä¾‹å¦‚åœ¨å¤„ç†æ¥è‡ªå¤–éƒ¨æ¥æºçš„ç‰¹å®šå¤§å°çš„æ•°æ®æ—¶ï¼Œç±»å‹åˆ«åéå¸¸æœ‰ç”¨ï¼š 1typealias AudioSample = UInt16 å®šä¹‰ç±»å‹åˆ«ååï¼Œæ‚¨å¯ä»¥åœ¨å¯èƒ½ä½¿ç”¨åŸå§‹åç§°çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨åˆ«åï¼š 12var maxAmplitudeFound = AudioSample.min// maxAmplitudeFound is now 0 åœ¨è¿™é‡Œï¼ŒAudioSampleè¢«å®šä¹‰ä¸ºUInt16çš„åˆ«åã€‚ç”±äºå®ƒæ˜¯ä¸€ä¸ªåˆ«åï¼Œå¯¹AudioSample.minçš„è°ƒç”¨å®é™…ä¸Šè°ƒç”¨UInt16.minï¼Œå®ƒä¸ºmaxAmplitudeFoundå˜é‡æä¾›äº†åˆå§‹å€¼0ã€‚ å¸ƒå°”å€¼(Booleans)Swiftæœ‰ä¸€ä¸ªåŸºæœ¬çš„å¸ƒå°”ç±»å‹ï¼Œç§°ä¸ºBoolã€‚å¸ƒå°”å€¼è¢«ç§°ä¸ºé€»è¾‘å€¼ï¼Œå› ä¸ºå®ƒä»¬åªèƒ½æ˜¯çœŸæˆ–å‡ã€‚Swiftæä¾›äº†ä¸¤ä¸ªå¸ƒå°”å¸¸é‡å€¼ï¼Œtrueå’Œfalseï¼š 12let orangesAreOrange = truelet turnipsAreDelicious = false orangesAreOrange å’Œ turnnipsaredelicious çš„ç±»å‹è¢«æ¨æ–­ä¸ºBoolï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç”¨å¸ƒå°”å€¼åˆå§‹åŒ–çš„ã€‚ä¸ä¸Šé¢çš„â€™ Int â€˜å’Œâ€™ Double â€˜ä¸€æ ·ï¼Œå¦‚æœä½ åœ¨åˆ›å»ºå¸¸é‡æˆ–å˜é‡æ—¶å°†å®ƒä»¬è®¾ç½®ä¸ºâ€™ true â€˜æˆ–â€™ false â€˜ï¼Œä½ å°±ä¸éœ€è¦å°†å®ƒä»¬å£°æ˜ä¸ºâ€™ Bool â€˜ã€‚å½“Swiftä½¿ç”¨å…¶ä»–å·²çŸ¥ç±»å‹çš„å€¼åˆå§‹åŒ–å¸¸é‡æˆ–å˜é‡æ—¶ï¼Œç±»å‹æ¨æ–­æœ‰åŠ©äºä½¿ä»£ç æ›´åŠ ç®€æ´å’Œå¯è¯»ã€‚ å½“æ‚¨ä½¿ç”¨æ¡ä»¶è¯­å¥ï¼ˆå¦‚ifè¯­å¥ï¼‰æ—¶ï¼Œå¸ƒå°”å€¼ç‰¹åˆ«æœ‰ç”¨ï¼š 123456if turnipsAreDelicious &#123; print(&quot;Mmm, tasty turnips!&quot;)&#125; else &#123; print(&quot;Eww, turnips are horrible.&quot;)&#125;// Prints &quot;Eww, turnips are horrible.&quot; Control Flowæ›´è¯¦ç»†åœ°ä»‹ç»äº†æ¡ä»¶è¯­å¥ï¼Œå¦‚ifè¯­å¥ã€‚ Swiftçš„ç±»å‹å®‰å…¨é˜²æ­¢éå¸ƒå°”å€¼è¢«æ›¿æ¢ä¸ºBoolã€‚ä»¥ä¸‹ç¤ºä¾‹æŠ¥å‘Šç¼–è¯‘æ—¶é”™è¯¯ï¼š 1234let i = 1if i &#123; // this example will not compile, and will report an error&#125; ç„¶è€Œï¼Œä¸‹é¢çš„æ›¿ä»£ç¤ºä¾‹æ˜¯æœ‰æ•ˆçš„ï¼š 1234let i = 1if i == 1 &#123;â€‹ // this example will compile successfully&#125; The result of the i == 1 comparison is of type Bool, and so this second example passes the type-check. Comparisons like i == 1 are discussed in Basic Operators. ä¸ Swift ä¸­çš„å…¶ä»–ç±»å‹å®‰å…¨ç¤ºä¾‹ä¸€æ ·ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥é¿å…æ„å¤–é”™è¯¯ï¼Œå¹¶ç¡®ä¿ç‰¹å®šä»£ç éƒ¨åˆ†çš„æ„å›¾å§‹ç»ˆæ¸…æ™°ã€‚ å…ƒç»„å…ƒç»„å°†å¤šä¸ªå€¼åˆ†ç»„ä¸ºå•ä¸ªå¤åˆå€¼ã€‚å…ƒç»„ä¸­çš„å€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œä¸å¿…æ˜¯å½¼æ­¤ç›¸åŒçš„ç±»å‹ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œ(404,&quot;NotFound&quot;)æ˜¯æè¿°HTTPçŠ¶æ€ä»£ç çš„å…ƒç»„ã€‚HTTPçŠ¶æ€ä»£ç æ˜¯WebæœåŠ¡å™¨åœ¨è¯·æ±‚ç½‘é¡µæ—¶è¿”å›çš„ç‰¹æ®Šå€¼ã€‚å¦‚æœæ‚¨è¯·æ±‚ä¸å­˜åœ¨çš„ç½‘é¡µï¼Œåˆ™è¿”å›404NotFoundçš„çŠ¶æ€ä»£ç ã€‚ 12let http404Error = (404, &quot;Not Found&quot;)// http404Error is of type (Int, String), and equals (404, &quot;Not Found&quot;) (404,&quot;NotFound&quot;)å…ƒç»„å°†ä¸€ä¸ªIntå’Œä¸€ä¸ªStringç»„åˆåœ¨ä¸€èµ·ï¼Œä¸ºHTTPçŠ¶æ€ä»£ç æä¾›ä¸¤ä¸ªå•ç‹¬çš„å€¼ï¼šæ•°å­—å’Œäººç±»å¯è¯»æè¿°ã€‚å®ƒå¯ä»¥è¢«æè¿°ä¸ºâ€œç±»å‹å…ƒç»„(Int,String)â€ã€‚ æ‚¨å¯ä»¥ä»ä»»ä½•ç±»å‹çš„æ’åˆ—ä¸­åˆ›å»ºå…ƒç»„ï¼Œå®ƒä»¬å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„ä¸åŒç±»å‹ã€‚æ²¡æœ‰ä»€ä¹ˆå¯ä»¥é˜»æ­¢æ‚¨æ‹¥æœ‰ç±»å‹å…ƒç»„(Int,Int,Int)æˆ–(String,Bool)æˆ–è€…æ‚¨æ‰€éœ€çš„ä»»ä½•å…¶ä»–æ’åˆ—ã€‚ æ‚¨å¯ä»¥å°†å…ƒç»„çš„å†…å®¹åˆ†è§£ä¸ºå•ç‹¬çš„å¸¸é‡æˆ–å˜é‡ï¼Œç„¶ååƒå¾€å¸¸ä¸€æ ·è®¿é—®ï¼š 12345let (statusCode, statusMessage) = http404Errorprint(&quot;The status code is \\(statusCode)&quot;)// Prints &quot;The status code is 404&quot;print(&quot;The status message is \\(statusMessage)&quot;)// Prints &quot;The status message is Not Found&quot; å¦‚æœæ‚¨åªéœ€è¦å…ƒç»„çš„ä¸€äº›å€¼ï¼Œè¯·åœ¨åˆ†è§£å…ƒç»„æ—¶å¿½ç•¥å¸¦ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰çš„å…ƒç»„éƒ¨åˆ†ï¼š 123let (justTheStatusCode, _) = http404Errorprint(&quot;The status code is \\(justTheStatusCode)&quot;)// Prints &quot;The status code is 404&quot; æˆ–è€…ï¼Œä½¿ç”¨ä»é›¶å¼€å§‹çš„ç´¢å¼•å·è®¿é—®å…ƒç»„ä¸­çš„å•ä¸ªå…ƒç´ å€¼ï¼š 1234print(&quot;The status code is \\(http404Error.0)&quot;)// Prints &quot;The status code is 404&quot;print(&quot;The status message is \\(http404Error.1)&quot;)// Prints &quot;The status message is Not Found&quot; å½“å®šä¹‰å…ƒç»„æ—¶ï¼Œæ‚¨å¯ä»¥å‘½åå…ƒç»„ä¸­çš„å•ä¸ªå…ƒç´ ï¼š 1let http200Status = (statusCode: 200, description: &quot;OK&quot;) å¦‚æœæ‚¨å‘½åå…ƒç»„ä¸­çš„å…ƒç´ ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å…ƒç´ åç§°è®¿é—®è¿™äº›å…ƒç´ çš„å€¼ï¼š 1234print(&quot;The status code is \\(http200Status.statusCode)&quot;)// Prints &quot;The status code is 200&quot;print(&quot;The status message is \\(http200Status.description)&quot;)// Prints &quot;The status message is OK&quot; å…ƒç»„ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ç‰¹åˆ«æœ‰ç”¨ã€‚å°è¯•æ£€ç´¢ç½‘é¡µçš„å‡½æ•°å¯èƒ½ä¼šè¿”å›(Int,String)å…ƒç»„ç±»å‹ï¼Œä»¥æè¿°é¡µé¢æ£€ç´¢çš„æˆåŠŸæˆ–å¤±è´¥ã€‚é€šè¿‡è¿”å›å…·æœ‰ä¸¤ä¸ªä¸åŒå€¼çš„å…ƒç»„ï¼Œæ¯ä¸ªå€¼éƒ½å…·æœ‰ä¸åŒçš„ç±»å‹ï¼Œè¯¥å‡½æ•°æä¾›äº†æœ‰å…³å…¶ç»“æœçš„æ›´æœ‰ç”¨çš„ä¿¡æ¯ï¼Œè€Œä¸æ˜¯åªèƒ½è¿”å›å•ä¸ªç±»å‹çš„å•ä¸ªå€¼ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å…·æœ‰å¤šä¸ªè¿”å›å€¼çš„å‡½æ•°ã€‚ æ³¨æ„ å…ƒç»„å¯¹ç®€å•çš„ç›¸å…³å€¼ç»„éå¸¸æœ‰ç”¨ã€‚å®ƒä»¬ä¸é€‚åˆåˆ›å»ºå¤æ‚çš„æ•°æ®ç»“æ„ã€‚å¦‚æœæ‚¨çš„æ•°æ®ç»“æ„å¯èƒ½æ›´å¤æ‚ï¼Œè¯·å°†å…¶å»ºæ¨¡ä¸ºç±»æˆ–ç»“æ„ï¼Œè€Œä¸æ˜¯å…ƒç»„ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ç»“æ„å’Œç±»ã€‚ å¯é€‰åœ¨å€¼å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¯é€‰é€‰é¡¹ã€‚å¯é€‰ä»£è¡¨ä¸¤ç§å¯èƒ½æ€§ï¼šè¦ä¹ˆæœ‰ä¸€ä¸ªå€¼ï¼Œä½ å¯ä»¥è§£å¼€å¯é€‰å€¼æ¥è®¿é—®è¯¥å€¼ï¼Œè¦ä¹ˆæ ¹æœ¬æ²¡æœ‰å€¼ã€‚ æ³¨æ„ Cæˆ–Objective-Cä¸­ä¸å­˜åœ¨å¯é€‰æ¦‚å¿µã€‚Objective-Cä¸­æœ€è¿‘çš„ä¸œè¥¿æ˜¯èƒ½å¤Ÿä»å¦åˆ™ä¼šè¿”å›å¯¹è±¡çš„æ–¹æ³•è¿”å›nilï¼Œnilçš„æ„æ€æ˜¯â€œæ²¡æœ‰æœ‰æ•ˆçš„å¯¹è±¡â€ã€‚ç„¶è€Œï¼Œè¿™ä»…é€‚ç”¨äºå¯¹è±¡ï¼Œä¸é€‚ç”¨äºç»“æ„ã€åŸºæœ¬Cç±»å‹æˆ–æšä¸¾å€¼ã€‚å¯¹äºè¿™äº›ç±»å‹ï¼ŒObjective-Cæ–¹æ³•é€šå¸¸ä¼šè¿”å›ä¸€ä¸ªç‰¹æ®Šå€¼ï¼ˆå¦‚NSNotFoundï¼‰ï¼Œä»¥æŒ‡ç¤ºæ²¡æœ‰å€¼ã€‚è¿™ç§æ–¹æ³•å‡è®¾æ–¹æ³•çš„è°ƒç”¨è€…çŸ¥é“æœ‰ä¸€ä¸ªç‰¹æ®Šå€¼éœ€è¦æµ‹è¯•ï¼Œå¹¶è®°å¾—æ£€æŸ¥å®ƒã€‚Swiftçš„å¯é€‰é€‰é¡¹å…è®¸æ‚¨æŒ‡ç¤ºä»»ä½•ç±»å‹çš„å€¼ï¼Œè€Œæ— éœ€ç‰¹æ®Šå¸¸é‡ã€‚ ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨å¯é€‰é€‰é¡¹æ¥åº”å¯¹å€¼ç¼ºå¤±çš„ç¤ºä¾‹ã€‚Swiftçš„sIntç±»å‹æœ‰ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œå°è¯•å°†Stringå€¼è½¬æ¢ä¸ºIntå€¼ã€‚ç„¶è€Œï¼Œå¹¶éæ¯ä¸ªå­—ç¬¦ä¸²éƒ½å¯ä»¥è½¬æ¢ä¸ºæ•´æ•°ã€‚å­—ç¬¦ä¸²&quot;123&quot;å¯ä»¥è½¬æ¢ä¸ºæ•°å­—å€¼123ï¼Œä½†å­—ç¬¦ä¸²&quot;hello,world&quot;æ²¡æœ‰æ˜æ˜¾çš„æ•°å­—å€¼å¯ä»¥è½¬æ¢åˆ°ã€‚ ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨åˆå§‹åŒ–å™¨å°è¯•å°†Stringè½¬æ¢ä¸ºIntï¼š 123let possibleNumber = &quot;123&quot;let convertedNumber = Int(possibleNumber)// convertedNumber is inferred to be of type &quot;Int?&quot;, or &quot;optional Int&quot; ç”±äºåˆå§‹åŒ–å™¨å¯èƒ½ä¼šå¤±è´¥ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¯é€‰çš„Intï¼Œè€Œä¸æ˜¯ä¸€ä¸ªIntã€‚å¯é€‰çš„Intå†™æˆInt?ï¼Œè€Œä¸æ˜¯Intã€‚é—®å·è¡¨ç¤ºå®ƒåŒ…å«çš„å€¼æ˜¯å¯é€‰çš„ï¼Œè¿™æ„å‘³ç€å®ƒå¯èƒ½åŒ…å«ä¸€äº›Intå€¼ï¼Œæˆ–è€…å®ƒå¯èƒ½æ ¹æœ¬ä¸åŒ…å«ä»»ä½•å€¼ã€‚ï¼ˆå®ƒä¸èƒ½åŒ…å«ä»»ä½•å…¶ä»–å†…å®¹ï¼Œä¾‹å¦‚Boolå€¼æˆ–Stringå€¼ã€‚å®ƒè¦ä¹ˆæ˜¯Intï¼Œè¦ä¹ˆä»€ä¹ˆéƒ½ä¸æ˜¯ã€‚ï¼‰ nilæ‚¨å¯ä»¥é€šè¿‡ä¸ºç‰¹æ®Šå€¼nilå°†å…¶è®¾ç½®ä¸ºæ— å€¼çŠ¶æ€çš„å¯é€‰å˜é‡ï¼š 1234var serverResponseCode: Int? = 404// serverResponseCode contains an actual Int value of 404serverResponseCode = nil// serverResponseCode now contains no value æ³¨æ„ æ‚¨ä¸èƒ½å°†nilä¸éå¯é€‰å¸¸é‡å’Œå˜é‡ä¸€èµ·ä½¿ç”¨ã€‚å¦‚æœä»£ç ä¸­çš„å¸¸é‡æˆ–å˜é‡åœ¨æŸäº›æ¡ä»¶ä¸‹éœ€è¦åœ¨æ²¡æœ‰å€¼çš„æƒ…å†µä¸‹å·¥ä½œï¼Œè¯·å§‹ç»ˆå°†å…¶å£°æ˜ä¸ºé€‚å½“ç±»å‹çš„å¯é€‰å€¼ã€‚ å¦‚æœæ‚¨åœ¨ä¸æä¾›é»˜è®¤å€¼çš„æƒ…å†µä¸‹å®šä¹‰å¯é€‰å˜é‡ï¼Œè¯¥å˜é‡å°†è‡ªåŠ¨è®¾ç½®ä¸ºnilï¼š 12var surveyAnswer: String?// surveyAnswer is automatically set to nil æ³¨æ„ Swiftçš„â€œnilâ€å’ŒObjective-Cä¸­çš„â€œnilâ€ä¸ä¸€æ ·ã€‚åœ¨Objective-Cä¸­ï¼Œâ€™ nil â€˜æ˜¯ä¸€ä¸ªæŒ‡å‘ä¸å­˜åœ¨å¯¹è±¡çš„æŒ‡é’ˆã€‚åœ¨Swiftä¸­ï¼Œâ€™ nil â€˜ä¸æ˜¯ä¸€ä¸ªæŒ‡é’ˆâ€”â€”å®ƒæ˜¯ä¸€ä¸ªç‰¹å®šç±»å‹çš„å€¼çš„ç¼ºå¤±ã€‚ä»»ä½•ç±»å‹çš„å¯é€‰å‚æ•°éƒ½å¯ä»¥è®¾ç½®ä¸ºnilï¼Œè€Œä¸ä»…ä»…æ˜¯å¯¹è±¡ç±»å‹ã€‚ å¦‚æœé™ˆè¿°å’Œå¼ºåˆ¶æ‰“å¼€åŒ…è£…ä½ å¯ä»¥ä½¿ç”¨â€™ if â€˜è¯­å¥ï¼Œé€šè¿‡æ¯”è¾ƒå¯é€‰çš„å’Œâ€™ nil â€˜æ¥ç¡®å®šå¯é€‰çš„æ˜¯å¦åŒ…å«ä¸€ä¸ªå€¼ã€‚å¯ä»¥ä½¿ç”¨â€œç­‰äºâ€æ“ä½œç¬¦(â€˜ &#x3D;&#x3D; â€˜)æˆ–â€œä¸ç­‰äºâ€æ“ä½œç¬¦(â€˜ !&#x3D; â€˜)æ‰§è¡Œæ­¤æ¯”è¾ƒã€‚ å¦‚æœå¯é€‰é€‰é¡¹å…·æœ‰å€¼ï¼Œåˆ™å°†å…¶è§†ä¸ºâ€œä¸ç­‰äºâ€nilï¼š 1234if convertedNumber != nil &#123; print(&quot;convertedNumber contains some integer value.&quot;)&#125;// Prints &quot;convertedNumber contains some integer value.&quot; ä¸€æ—¦æ‚¨ç¡®å®šå¯é€‰å†…å®¹ç¡®å®åŒ…å«ä¸€ä¸ªå€¼ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ·»åŠ æ„Ÿå¹å·æ¥è®¿é—®å…¶åŸºç¡€å€¼ï¼ˆ!ï¼‰ç›´åˆ°å¯é€‰åç§°çš„æœ«å°¾ã€‚æ„Ÿå¹å·æœ‰æ•ˆåœ°è¯´ï¼šâ€œæˆ‘çŸ¥é“è¿™ä¸ªå¯é€‰è‚¯å®šæœ‰ä»·å€¼ï¼›è¯·ä½¿ç”¨å®ƒã€‚â€è¿™è¢«ç§°ä¸ºå¼ºåˆ¶æ‰“å¼€å¯é€‰å€¼ï¼š 1234if convertedNumber != nil &#123; print(&quot;convertedNumber has an integer value of \\(convertedNumber!).&quot;)&#125;// Prints &quot;convertedNumber has an integer value of 123.&quot; æœ‰å…³ifè¯­å¥çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ§åˆ¶æµã€‚ æ³¨æ„ å°è¯•ä½¿ç”¨!è®¿é—®ä¸å­˜åœ¨çš„å¯é€‰å€¼ä¼šè§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œè¯·åŠ¡å¿…ç¡®ä¿å¯é€‰é€‰é¡¹åŒ…å«énilå€¼!å¼ºè¡Œæ‰“å¼€å®ƒçš„ä»·å€¼ã€‚ å¯é€‰ç»‘å®šä½ å¯ä»¥ä½¿ç”¨å¯é€‰ç»‘å®šæ¥ç¡®å®šä¸€ä¸ªå¯é€‰ç»‘å®šæ˜¯å¦åŒ…å«ä¸€ä¸ªå€¼ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†è¯¥å€¼ç”¨ä½œä¸´æ—¶å¸¸é‡æˆ–å˜é‡ã€‚å¯é€‰ç»‘å®šå¯ä»¥ä¸â€™ if â€˜å’Œâ€™ while â€˜è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œä»¥æ£€æŸ¥å¯é€‰ç»‘å®šä¸­çš„å€¼ï¼Œå¹¶å°†è¯¥å€¼æå–åˆ°ä¸€ä¸ªå¸¸é‡æˆ–å˜é‡ä¸­ï¼Œä½œä¸ºå•ä¸ªæ“ä½œçš„ä¸€éƒ¨åˆ†ã€‚â€œifâ€å’Œâ€œwhileâ€è¯­å¥åœ¨Control Flowä¸­æœ‰æ›´è¯¦ç»†çš„æè¿°ã€‚ ä¸ºifè¯­å¥ç¼–å†™å¯é€‰ç»‘å®šï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123if let constantName = someOptional &#123; statements&#125; æ‚¨å¯ä»¥ä»å¯é€‰éƒ¨åˆ†é‡å†™possibleNumberç¤ºä¾‹ï¼Œä»¥ä½¿ç”¨å¯é€‰ç»‘å®šè€Œä¸æ˜¯å¼ºåˆ¶å±•å¼€åŒ…è£…ï¼š 123456if let actualNumber = Int(possibleNumber) &#123; print(&quot;The string \\&quot;\\(possibleNumber)\\&quot; has an integer value of \\(actualNumber)&quot;)&#125; else &#123; print(&quot;The string \\&quot;\\(possibleNumber)\\&quot; couldn&#x27;t be converted to an integer&quot;)&#125;// Prints &quot;The string &quot;123&quot; has an integer value of 123&quot; æ­¤ä»£ç å¯ä»¥è¯»ä½œï¼š â€œå¦‚æœInt(possibleNumber)è¿”å›çš„å¯é€‰IntåŒ…å«ä¸€ä¸ªå€¼ï¼Œè¯·å°†åä¸ºactualNumberçš„æ–°å¸¸é‡è®¾ç½®ä¸ºå¯é€‰å€¼ã€‚â€ å¦‚æœè½¬æ¢æˆåŠŸï¼ŒactualNumberå¸¸é‡å¯ä»¥åœ¨ifè¯­å¥çš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ä¸­ä½¿ç”¨ã€‚å®ƒå·²ç»ç”¨å¯é€‰ä¸­åŒ…å«çš„å€¼åˆå§‹åŒ–ï¼Œå› æ­¤æ‚¨ä¸ä½¿ç”¨!åç¼€ä»¥è®¿é—®å…¶å€¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒactualNumberä»…ç”¨äºæ‰“å°è½¬æ¢ç»“æœã€‚ å¯ä»¥ä½¿ç”¨å¸¦æœ‰å¯é€‰ç»‘å®šçš„å¸¸é‡å’Œå˜é‡ã€‚å¦‚æœä½ æƒ³åœ¨â€™ If â€˜è¯­å¥çš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ä¸­æ“ä½œâ€™ actualNumber â€˜çš„å€¼ï¼Œä½ å¯ä»¥å†™â€™ If var actualNumber â€˜ä»£æ›¿ï¼Œè€ŒåŒ…å«åœ¨å¯é€‰çš„å€¼å°†ä½œä¸ºä¸€ä¸ªå˜é‡è€Œä¸æ˜¯ä¸€ä¸ªå¸¸é‡å¯ç”¨ã€‚ æ‚¨å¯ä»¥æ ¹æ®éœ€è¦åœ¨å•ä¸ªifè¯­å¥ä¸­åŒ…å«å°½å¯èƒ½å¤šçš„å¯é€‰ç»‘å®šå’Œå¸ƒå°”æ¡ä»¶ï¼Œå¹¶ç”¨é€—å·åˆ†éš”ã€‚å¦‚æœå¯é€‰ç»‘å®šä¸­çš„ä»»ä½•å€¼ä¸ºnilï¼Œæˆ–è€…ä»»ä½•å¸ƒå°”æ¡ä»¶è®¡ç®—ä¸ºfalseï¼Œåˆ™æ•´ä¸ªifè¯­å¥çš„æ¡ä»¶è¢«è§†ä¸ºfalseã€‚ifé™ˆè¿°ç­‰æ•ˆï¼Œè¯·æŒ‰ä»¥ä¸‹æ–¹å¼å¤„ç†ï¼š 12345678910111213if let firstNumber = Int(&quot;4&quot;), let secondNumber = Int(&quot;42&quot;), firstNumber &lt; secondNumber &amp;&amp; secondNumber &lt; 100 &#123; print(&quot;\\(firstNumber) &lt; \\(secondNumber) &lt; 100&quot;)&#125;// Prints &quot;4 &lt; 42 &lt; 100&quot;if let firstNumber = Int(&quot;4&quot;) &#123; if let secondNumber = Int(&quot;42&quot;) &#123; if firstNumber &lt; secondNumber &amp;&amp; secondNumber &lt; 100 &#123; print(&quot;\\(firstNumber) &lt; \\(secondNumber) &lt; 100&quot;) &#125; &#125;&#125;// Prints &quot;4 &lt; 42 &lt; 100 æ³¨æ„ åœ¨ifè¯­å¥ä¸­ä½¿ç”¨å¯é€‰ç»‘å®šåˆ›å»ºçš„å¸¸é‡å’Œå˜é‡ä»…åœ¨ifè¯­å¥çš„æ­£æ–‡ä¸­å¯ç”¨ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä½¿ç”¨guardè¯­å¥åˆ›å»ºçš„å¸¸é‡å’Œå˜é‡å¯ä»¥åœ¨guardè¯­å¥åé¢çš„ä»£ç è¡Œä¸­æ‰¾åˆ°ï¼Œå¦‚Early Exitæ‰€è¿°ã€‚ éšå¼æ‹†å¼€çš„å¯é€‰å¦‚ä¸Šæ‰€è¿°ï¼Œå¯é€‰è¡¨ç¤ºå…è®¸å¸¸é‡æˆ–å˜é‡â€œæ— å€¼â€ã€‚å¯é€‰é€‰é¡¹å¯ä»¥ç”¨ifè¯­å¥æ£€æŸ¥ï¼Œçœ‹çœ‹æ˜¯å¦å­˜åœ¨å€¼ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¯é€‰ç»‘å®šæœ‰æ¡ä»¶åœ°å±•å¼€ï¼Œä»¥è®¿é—®å¯é€‰å€¼ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚ æœ‰æ—¶ï¼Œä»ç¨‹åºçš„ç»“æ„ä¸­å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œåœ¨é¦–æ¬¡è®¾ç½®è¯¥å€¼åï¼Œå¯é€‰å€¼å°†å§‹ç»ˆå…·æœ‰è¯¥å€¼ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæ¯æ¬¡è®¿é—®å¯é€‰å€¼æ—¶ï¼Œæ— éœ€æ£€æŸ¥å’Œæ‰“å¼€å…¶å€¼ï¼Œå› ä¸ºå¯ä»¥å®‰å…¨åœ°å‡è®¾å®ƒä¸€ç›´å…·æœ‰å€¼ã€‚ è¿™äº›ç±»å‹çš„å¯é€‰é€‰é¡¹è¢«å®šä¹‰ä¸ºéšå¼æœªåŒ…è£…çš„å¯é€‰é€‰é¡¹ã€‚æ‚¨é€šè¿‡æ”¾ç½®æ„Ÿå¹å·ï¼ˆString!ï¼‰æ¥ç¼–å†™éšå¼æ‰“å¼€çš„å¯é€‰é€‰é¡¹è€Œä¸æ˜¯é—®å·ï¼ˆString?ï¼‰åœ¨æ‚¨æƒ³è¦é€‰æ‹©çš„ç±»å‹ä¹‹åã€‚ä½¿ç”¨æ—¶ï¼Œä¸è¦åœ¨å¯é€‰åç§°åæ”¾ç½®æ„Ÿå¹å·ï¼Œè€Œæ˜¯åœ¨å£°æ˜é€‰é¡¹ç±»å‹åæ”¾ç½®æ„Ÿå¹å·ã€‚ å½“å¯é€‰å€¼åœ¨é¦–æ¬¡å®šä¹‰å¯é€‰åç«‹å³ç¡®è®¤å­˜åœ¨æ—¶ï¼Œéšå¼æœªåŒ…è£…çš„å¯é€‰å€¼éå¸¸æœ‰ç”¨ï¼Œå¹¶ä¸”å¯ä»¥è‚¯å®šå¯ä»¥å‡è®¾åœ¨æ­¤åçš„æ¯ä¸ªç‚¹éƒ½å­˜åœ¨ã€‚Swiftä¸­éšå¼æœªåŒ…è£…çš„å¯é€‰é€‰é¡¹çš„ä¸»è¦ç”¨é€”æ˜¯åœ¨ç±»åˆå§‹åŒ–æœŸé—´ï¼Œå¦‚Unowned Referenceså’ŒImlicitly Unwrapped Optional Propertiesä¸­æ‰€è¿°ã€‚ éšå¼å±•å¼€çš„å¯é€‰é€‰é¡¹æ˜¯å¹•åæ­£å¸¸çš„å¯é€‰é€‰é¡¹ï¼Œä½†ä¹Ÿå¯ä»¥åƒéå¯é€‰å€¼ä¸€æ ·ä½¿ç”¨ï¼Œè€Œæ— éœ€æ¯æ¬¡è®¿é—®æ—¶è§£å¼€å¯é€‰å€¼ã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†å¯é€‰å­—ç¬¦ä¸²å’Œéšå¼æœªåŒ…è£…çš„å¯é€‰å­—ç¬¦ä¸²åœ¨ä»¥æ˜¾å¼Stringçš„å½¢å¼è®¿é—®å…¶åŒ…è£…å€¼æ—¶çš„è¡Œä¸ºå·®å¼‚ï¼š 12345let possibleString: String? = &quot;An optional string.&quot;let forcedString: String = possibleString! // éœ€è¦ä¸€ä¸ªæ„Ÿå¹å·let assumedString: String! = &quot;An implicitly unwrapped optional string.&quot;let implicitString: String = assumedString // ä¸éœ€è¦æ„Ÿå¹å· æ‚¨å¯ä»¥å°†éšå¼è§£å°çš„å¯é€‰é€‰é¡¹è§†ä¸ºåœ¨éœ€è¦æ—¶å¼ºåˆ¶æ‰“å¼€å¯é€‰é€‰é¡¹ã€‚å½“æ‚¨ä½¿ç”¨éšå¼å±•å¼€çš„å¯é€‰å€¼æ—¶ï¼ŒSwifté¦–å…ˆå°è¯•å°†å…¶ç”¨ä½œæ™®é€šçš„å¯é€‰å€¼ï¼›å¦‚æœä¸èƒ½ç”¨ä½œå¯é€‰å€¼ï¼ŒSwiftå°†å¼ºåˆ¶è§£å¼€è¯¥å€¼ã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¯é€‰å€¼ assumedStringåœ¨å°†å…¶å€¼åˆ†é…ç»™implicitStringä¹‹å‰è¢«å¼ºåˆ¶è§£å¼€ï¼Œå› ä¸ºimplicitStringå…·æœ‰æ˜¾å¼ã€éå¯é€‰ç±»å‹çš„Stringã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼ŒoptionalStringæ²¡æœ‰æ˜¾å¼ç±»å‹ï¼Œå› æ­¤å®ƒæ˜¯æ™®é€šçš„å¯é€‰ã€‚ 12let optionalString = assumedString// optionalStringçš„ç±»å‹æ˜¯â€œString?â€ï¼Œè€ŒassumedStringä¸å¼ºåˆ¶è§£åŒ…è£…ã€‚ å¦‚æœéšå¼è§£åŒ…çš„å¯é€‰é€‰é¡¹ä¸ºnilï¼Œå¹¶ä¸”æ‚¨å°è¯•è®¿é—®å…¶åŒ…è£…å€¼ï¼Œæ‚¨å°†è§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚ç»“æœä¸æ‚¨åœ¨ä¸åŒ…å«å€¼çš„æ­£å¸¸å¯é€‰é€‰é¡¹åæ”¾ç½®æ„Ÿå¹å·å®Œå…¨ç›¸åŒã€‚ æ‚¨å¯ä»¥æ£€æŸ¥éšå¼æœªåŒ…è£…çš„å¯é€‰é€‰é¡¹æ˜¯å¦ä¸ºnilï¼Œå°±åƒæ£€æŸ¥æ­£å¸¸å¯é€‰é€‰é¡¹ä¸€æ ·ï¼š 1234if assumedString != nil &#123; print(assumedString!)&#125;// Prints &quot;éšå¼è§£é™¤åŒ…è£…çš„å¯é€‰å­—ç¬¦ä¸²ã€‚&quot; æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å¸¦æœ‰å¯é€‰ç»‘å®šçš„éšå¼è§£åŒ…è£…å¯é€‰é€‰é¡¹ï¼Œåœ¨å•ä¸ªè¯­å¥ä¸­æ£€æŸ¥å’Œè§£åŒ…è£…å…¶å€¼ï¼š 1234if let definiteString = assumedString &#123; print(definiteString)&#125;// Prints &quot;An implicitly unwrapped optional string.&quot; æ³¨æ„ å½“å˜é‡ä»¥åå¯èƒ½å˜æˆnilï¼Œä¸è¦ä½¿ç”¨éšå¼æœªåŒ…è£…çš„å¯é€‰é€‰é¡¹ã€‚å¦‚æœæ‚¨éœ€è¦åœ¨å˜é‡ç”Ÿå‘½å‘¨æœŸå†…æ£€æŸ¥nilå€¼ï¼Œè¯·å§‹ç»ˆä½¿ç”¨æ­£å¸¸çš„å¯é€‰ç±»å‹ã€‚ é”™è¯¯å¤„ç†æ‚¨ä½¿ç”¨é”™è¯¯å¤„ç†æ¥å“åº”ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é”™è¯¯æ¡ä»¶ã€‚ ä¸å¯é€‰é€‰é¡¹ä¸åŒï¼Œåè€…å¯ä»¥ä½¿ç”¨å€¼çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨æ¥ä¼ è¾¾å‡½æ•°çš„æˆåŠŸæˆ–å¤±è´¥ï¼Œä¸ä¹‹ç›¸åï¼Œé”™è¯¯å¤„ç†å…è®¸æ‚¨ç¡®å®šå¤±è´¥çš„æ ¹æœ¬åŸå› ï¼Œå¹¶åœ¨å¿…è¦æ—¶å°†é”™è¯¯ä¼ æ’­åˆ°ç¨‹åºçš„å¦ä¸€éƒ¨åˆ†ã€‚ å½“å‡½æ•°é‡åˆ°é”™è¯¯æ¡ä»¶æ—¶ï¼Œå®ƒä¼šæŠ›å‡ºé”™è¯¯ã€‚ç„¶åï¼Œè¯¥å‡½æ•°çš„è°ƒç”¨è€…å¯ä»¥æ•è·é”™è¯¯å¹¶åšå‡ºé€‚å½“çš„å“åº”ã€‚ 123func canThrowAnError() throws &#123; // è¿™ä¸ªå‡½æ•°å¯èƒ½æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿå¯èƒ½ä¸æŠ›å‡ºé”™è¯¯&#125; å‡½æ•°è¡¨ç¤ºå¯ä»¥é€šè¿‡åœ¨å…¶å£°æ˜ä¸­åŒ…å«throwså…³é”®å­—æ¥æŠ›å‡ºé”™è¯¯ã€‚å½“æ‚¨è°ƒç”¨å¯ä»¥æŠ›å‡ºé”™è¯¯çš„å‡½æ•°æ—¶ï¼Œæ‚¨å°†tryå…³é”®å­—ä¹‹å‰ç½®äºè¡¨è¾¾å¼ã€‚ Swiftä¼šè‡ªåŠ¨å°†é”™è¯¯ä¼ æ’­åˆ°å½“å‰èŒƒå›´ä¹‹å¤–ï¼Œç›´åˆ°å®ƒä»¬ç”±catchå­å¥å¤„ç†ã€‚ 123456do &#123; try canThrowAnError() // no error was thrown&#125; catch &#123; // an error was thrown&#125; doè¯­å¥åˆ›å»ºä¸€ä¸ªæ–°çš„åŒ…å«èŒƒå›´ï¼Œå…è®¸å°†é”™è¯¯ä¼ æ’­åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªcatchå­å¥ã€‚ ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨é”™è¯¯å¤„ç†æ¥å“åº”ä¸åŒé”™è¯¯æ¡ä»¶çš„ç¤ºä¾‹ï¼š 123456789101112func makeASandwich() throws &#123; // ...&#125;do &#123; try makeASandwich() eatASandwich()&#125; catch SandwichError.outOfCleanDishes &#123; washDishes()&#125; catch SandwichError.missingIngredients(let ingredients) &#123; buyGroceries(ingredients)&#125; åœ¨æœ¬ä¾‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰å¹²å‡€çš„èœè‚´æˆ–ç¼ºå°‘ä»»ä½•æˆåˆ†ï¼ŒmakeASandwich()å‡½æ•°å°†æŠ›å‡ºé”™è¯¯ã€‚ç”±äºmakeASandwich()å¯ä»¥æŠ›å‡ºé”™è¯¯ï¼Œå‡½æ•°è°ƒç”¨è¢«åŒ…è£…åœ¨tryè¡¨è¾¾å¼ä¸­ã€‚é€šè¿‡å°†å‡½æ•°è°ƒç”¨åŒ…è£…åœ¨doè¯­å¥ä¸­ï¼ŒæŠ›å‡ºçš„ä»»ä½•é”™è¯¯éƒ½å°†ä¼ æ’­åˆ°æä¾›çš„catchå­å¥ã€‚ å¦‚æœæ²¡æœ‰æŠ›å‡ºé”™è¯¯ï¼Œåˆ™è°ƒç”¨eatASandwich()å‡½æ•°ã€‚å¦‚æœæŠ›å‡ºé”™è¯¯ï¼Œå¹¶ä¸”ä¸SandwichError.outOfCleanDishesæƒ…å†µåŒ¹é…ï¼Œåˆ™å°†è°ƒç”¨washDishes()å‡½æ•°ã€‚å¦‚æœæŠ›å‡ºé”™è¯¯ï¼Œå¹¶ä¸”å®ƒä¸SandwichError.missingIngredientsçš„æƒ…å†µåŒ¹é…ï¼Œåˆ™ä½¿ç”¨catchæ¨¡å¼æ•è·çš„å…³è”[String]å€¼è°ƒç”¨buyGroceries(_:)å‡½æ•°ã€‚ é”™è¯¯å¤„ç†ä¸­æ›´è¯¦ç»†åœ°ä»‹ç»äº†æŠ›å‡ºã€æ•è·å’Œä¼ æ’­é”™è¯¯ã€‚ æ–­è¨€å’Œå…ˆå†³æ¡ä»¶æ–­è¨€å’Œå…ˆå†³æ¡ä»¶æ˜¯åœ¨è¿è¡Œæ—¶å‘ç”Ÿçš„æ£€æŸ¥ã€‚åœ¨æ‰§è¡Œä»»ä½•è¿›ä¸€æ­¥çš„ä»£ç ä¹‹å‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥ç¡®ä¿æ»¡è¶³åŸºæœ¬æ¡ä»¶ã€‚å¦‚æœæ–­è¨€æˆ–å…ˆå†³æ¡ä»¶ä¸­çš„å¸ƒå°”æ¡ä»¶è®¡ç®—ä¸ºtrueï¼Œåˆ™ä»£ç æ‰§è¡Œå°†ç…§å¸¸ç»§ç»­ã€‚å¦‚æœæ¡ä»¶è®¡ç®—ä¸ºfalseï¼Œåˆ™ç¨‹åºçš„å½“å‰çŠ¶æ€æ— æ•ˆï¼›ä»£ç æ‰§è¡Œç»“æŸï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºè¢«ç»ˆæ­¢ã€‚ æ‚¨ä½¿ç”¨æ–­è¨€å’Œå…ˆå†³æ¡ä»¶æ¥è¡¨è¾¾æ‚¨åœ¨ç¼–ç æ—¶æ‰€åšçš„å‡è®¾å’ŒæœŸæœ›ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†å®ƒä»¬åŒ…å«åœ¨ä»£ç ä¸­ã€‚æ–­è¨€å¯å¸®åŠ©æ‚¨åœ¨å¼€å‘è¿‡ç¨‹ä¸­å‘ç°é”™è¯¯å’Œé”™è¯¯çš„å‡è®¾ï¼Œå…ˆå†³æ¡ä»¶å¯å¸®åŠ©æ‚¨æ£€æµ‹ç”Ÿäº§ä¸­çš„é—®é¢˜ã€‚ é™¤äº†åœ¨è¿è¡Œæ—¶éªŒè¯æ‚¨çš„æœŸæœ›å¤–ï¼Œæ–­è¨€å’Œå…ˆå†³æ¡ä»¶ä¹Ÿæˆä¸ºä»£ç ä¸­æœ‰ç”¨çš„æ–‡æ¡£å½¢å¼ã€‚ä¸ä¸Šé¢é”™è¯¯å¤„ç†ä¸­è®¨è®ºçš„é”™è¯¯æ¡ä»¶ä¸åŒï¼Œæ–­è¨€å’Œå…ˆå†³æ¡ä»¶ä¸ç”¨äºå¯æ¢å¤æˆ–é¢„æœŸé”™è¯¯ã€‚ç”±äºå¤±è´¥çš„æ–­è¨€æˆ–å…ˆå†³æ¡ä»¶è¡¨ç¤ºæ— æ•ˆçš„ç¨‹åºçŠ¶æ€ï¼Œå› æ­¤æ— æ³•æ•è·å¤±è´¥çš„æ–­è¨€ã€‚ ä½¿ç”¨æ–­è¨€å’Œå…ˆå†³æ¡ä»¶ä¸èƒ½æ›¿ä»£ä»¥ä¸å¤ªå¯èƒ½å‡ºç°æ— æ•ˆæ¡ä»¶çš„æ–¹å¼è®¾è®¡ä»£ç ã€‚ç„¶è€Œï¼Œä½¿ç”¨å®ƒä»¬æ¥å¼ºåˆ¶æ‰§è¡Œæœ‰æ•ˆæ•°æ®å’ŒçŠ¶æ€ä¼šå¯¼è‡´æ‚¨çš„åº”ç”¨ç¨‹åºåœ¨å‘ç”Ÿæ— æ•ˆçŠ¶æ€æ—¶æ›´å¯é¢„æµ‹åœ°ç»ˆæ­¢ï¼Œå¹¶æœ‰åŠ©äºä½¿é—®é¢˜æ›´å®¹æ˜“è°ƒè¯•ã€‚ä¸€æ—¦æ£€æµ‹åˆ°æ— æ•ˆçŠ¶æ€å°±åœæ­¢æ‰§è¡Œä¹Ÿæœ‰åŠ©äºé™åˆ¶è¯¥æ— æ•ˆçŠ¶æ€é€ æˆçš„æŸå®³ã€‚ æ–­è¨€å’Œå…ˆå†³æ¡ä»¶ä¹‹é—´çš„åŒºåˆ«åœ¨äºå®ƒä»¬è¢«æ£€æŸ¥æ—¶ï¼šæ–­è¨€ä»…åœ¨è°ƒè¯•æ„å»ºä¸­æ£€æŸ¥ï¼Œä½†å…ˆå†³æ¡ä»¶åœ¨è°ƒè¯•å’Œç”Ÿäº§æ„å»ºä¸­éƒ½è¢«æ£€æŸ¥ã€‚åœ¨ç”Ÿäº§æ„å»ºä¸­ï¼Œä¸è¯„ä¼°æ–­è¨€ä¸­çš„æ¡ä»¶ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨ä»»æ„æ•°é‡çš„æ–­è¨€ï¼Œè€Œä¸ä¼šå½±å“ç”Ÿäº§æ€§èƒ½ã€‚ ä½¿ç”¨æ–­è¨€è¿›è¡Œè°ƒè¯•æ‚¨é€šè¿‡ä»Swiftæ ‡å‡†åº“è°ƒç”¨assert(_:_:file:line:)å‡½æ•°æ¥ç¼–å†™æ–­è¨€ã€‚æ‚¨ä¼ é€’æ­¤å‡½æ•°ï¼Œä¸€ä¸ªè®¡ç®—ä¸ºtrueæˆ–falseè¡¨è¾¾å¼ï¼Œå¦‚æœæ¡ä»¶çš„ç»“æœä¸ºfalseï¼Œåˆ™æ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼š 123let age = -3assert(age &gt;= 0, &quot;A person&#x27;s age can&#x27;t be less than zero.&quot;)// è¿™ä¸ªæ–­è¨€å¤±è´¥ï¼Œå› ä¸º-3ä¸æ˜¯&gt;= 0ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œå¦‚æœâ€™ age &gt;&#x3D; 0 â€˜çš„å€¼ä¸ºâ€™ true â€˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœâ€™ age â€˜çš„å€¼æ˜¯éè´Ÿçš„ï¼Œåˆ™ä»£ç ç»§ç»­æ‰§è¡Œã€‚å¦‚æœâ€™ age â€˜çš„å€¼ä¸ºè´Ÿå€¼ï¼Œå¦‚ä¸Šé¢çš„ä»£ç æ‰€ç¤ºï¼Œé‚£ä¹ˆâ€™ age &gt;&#x3D; 0 â€˜çš„è®¡ç®—ç»“æœä¸ºâ€™ false â€˜ï¼Œæ–­è¨€å°†å¤±è´¥ï¼Œä»è€Œç»ˆæ­¢åº”ç”¨ç¨‹åºã€‚ æ‚¨å¯ä»¥çœç•¥æ–­è¨€æ¶ˆæ¯â€”â€”ä¾‹å¦‚ï¼Œå½“å®ƒåªæ˜¯ä½œä¸ºæ•£æ–‡é‡å¤æ¡ä»¶æ—¶ã€‚ 1assert(age &gt;= 0) å¦‚æœä»£ç å·²ç»æ£€æŸ¥äº†æ¡ä»¶ï¼Œåˆ™ä½¿ç”¨â€˜ assertionFailure(:file:line:) â€˜functionè¡¨ç¤ºæ–­è¨€å¤±è´¥ã€‚ä¾‹å¦‚: 1234567if age &gt; 10 &#123; print(&quot;You can ride the roller-coaster or the ferris wheel.&quot;)&#125; else if age &gt;= 0 &#123; print(&quot;You can ride the ferris wheel.&quot;)&#125; else &#123; assertionFailure(&quot;A person&#x27;s age can&#x27;t be less than zero.&quot;)&#125; æ‰§è¡Œå…ˆå†³æ¡ä»¶æ¯å½“æ¡ä»¶å¯èƒ½ä¸ºå‡æ—¶ï¼Œè¯·ä½¿ç”¨å…ˆå†³æ¡ä»¶ï¼Œä½†æ‚¨çš„ä»£ç å¿…é¡»æ˜¯çœŸçš„æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å…ˆå†³æ¡ä»¶æ£€æŸ¥ä¸‹æ ‡æ²¡æœ‰è¶Šç•Œï¼Œæˆ–æ£€æŸ¥å‡½æ•°æ˜¯å¦ä¼ é€’äº†æœ‰æ•ˆå€¼ã€‚ æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨precondition(_:_:file:line:)å‡½æ•°ç¼–å†™å…ˆå†³æ¡ä»¶ã€‚æ‚¨ä¼ é€’æ­¤å‡½æ•°ï¼Œä¸€ä¸ªè®¡ç®—ä¸ºtrueæˆ–falseè¡¨è¾¾å¼ï¼Œå¦‚æœæ¡ä»¶çš„ç»“æœä¸ºfalseï¼Œåˆ™æ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼š 12// åœ¨ä¸‹æ ‡çš„å®ç°ä¸­â€¦precondition(index &gt; 0, &quot;Index must be greater than zero.&quot;) æ‚¨è¿˜å¯ä»¥è°ƒç”¨preconditionFailure(_:file:line:)å‡½æ•°æ¥æŒ‡ç¤ºå‘ç”Ÿäº†æ•…éšœâ€”â€”ä¾‹å¦‚ï¼Œå¦‚æœé‡‡ç”¨äº†äº¤æ¢æœºçš„é»˜è®¤æƒ…å†µï¼Œä½†æ‰€æœ‰æœ‰æ•ˆçš„è¾“å…¥æ•°æ®éƒ½åº”è¯¥ç”±äº¤æ¢æœºçš„å…¶ä»–æƒ…å†µä¹‹ä¸€å¤„ç†ã€‚ æ³¨æ„ å¦‚æœæ‚¨ä»¥æœªé€‰ä¸­æ¨¡å¼ï¼ˆ-Ouncheckedç¼–è¯‘ï¼Œåˆ™ä¸ä¼šæ£€æŸ¥å…ˆå†³æ¡ä»¶ã€‚ç¼–è¯‘å™¨å‡è®¾å…ˆå†³æ¡ä»¶å§‹ç»ˆä¸ºçœŸï¼Œå¹¶ç›¸åº”åœ°ä¼˜åŒ–æ‚¨çš„ä»£ç ã€‚ç„¶è€Œï¼Œæ— è®ºä¼˜åŒ–è®¾ç½®å¦‚ä½•ï¼ŒthefatalErrorfatalError(_:file:line:)å‡½æ•°æ€»æ˜¯åœæ­¢æ‰§è¡Œã€‚ æ‚¨å¯ä»¥åœ¨åŸå‹å’Œæ—©æœŸå¼€å‘æœŸé—´ä½¿ç”¨fatalError(_:file:line:)å‡½æ•°ï¼Œé€šè¿‡ç¼–å†™fatalError(&quot;Unimplemented&quot;)ä½œä¸ºå­˜æ ¹å®ç°ï¼Œä¸ºå°šæœªå®ç°çš„åŠŸèƒ½åˆ›å»ºå­˜æ ¹ã€‚ç”±äºè‡´å‘½é”™è¯¯æ°¸è¿œä¸ä¼šè¢«ä¼˜åŒ–ï¼Œä¸æ–­è¨€æˆ–å…ˆå†³æ¡ä»¶ä¸åŒï¼Œæ‚¨å¯ä»¥ç¡®ä¿å¦‚æœé‡åˆ°å­˜æ ¹å®ç°ï¼Œæ‰§è¡Œæ€»æ˜¯ä¼šåœæ­¢ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ å­—ç¬¦ä¸²å’Œå­—ç¬¦","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-å­—ç¬¦ä¸²å’Œå­—ç¬¦","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-å­—ç¬¦ä¸²å’Œå­—ç¬¦/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/StringsAndCharacters.html å­—ç¬¦ä¸²æ˜¯ä¸€ç³»åˆ—è§’è‰²ï¼Œå¦‚&quot;hello,world&quot;æˆ–&quot;albatross&quot;Swiftå­—ç¬¦ä¸²ç”±Stringç±»å‹è¡¨ç¤ºã€‚Stringçš„å†…å®¹å¯ä»¥é€šè¿‡å„ç§æ–¹å¼è®¿é—®ï¼ŒåŒ…æ‹¬ä½œä¸ºCharacterå€¼çš„é›†åˆã€‚ Swiftçš„Stringå’ŒCharacterç±»å‹æä¾›äº†ä¸€ç§å¿«é€Ÿã€ç¬¦åˆUnicodeçš„æ–¹å¼æ¥å¤„ç†ä»£ç ä¸­çš„æ–‡æœ¬ã€‚å­—ç¬¦ä¸²åˆ›å»ºå’Œæ“ä½œçš„è¯­æ³•è½»å·§ä¸”å¯è¯»ï¼Œå­—ç¬¦ä¸²æ–‡å­—è¯­æ³•ä¸Cç›¸ä¼¼ã€‚å­—ç¬¦ä¸²ä¸²è”å°±åƒå°†ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸+è¿ç®—ç¬¦ç»„åˆåœ¨ä¸€èµ·ä¸€æ ·ç®€å•ï¼Œå­—ç¬¦ä¸²çš„å¯å˜æ€§é€šè¿‡åœ¨å¸¸é‡æˆ–å˜é‡ä¹‹é—´è¿›è¡Œé€‰æ‹©æ¥ç®¡ç†ï¼Œå°±åƒSwiftä¸­çš„ä»»ä½•å…¶ä»–å€¼ä¸€æ ·ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²å°†å¸¸é‡ã€å˜é‡ã€æ–‡å­—å’Œè¡¨è¾¾å¼æ’å…¥è¾ƒé•¿çš„å­—ç¬¦ä¸²ä¸­ï¼Œè¯¥è¿‡ç¨‹ç§°ä¸ºå­—ç¬¦ä¸²æ’å€¼ã€‚è¿™æ ·å¯ä»¥è½»æ¾åˆ›å»ºç”¨äºæ˜¾ç¤ºã€å­˜å‚¨å’Œæ‰“å°çš„è‡ªå®šä¹‰å­—ç¬¦ä¸²å€¼ã€‚ å°½ç®¡è¯­æ³•ç®€å•ï¼Œä½†Swiftçš„Stringç±»å‹æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç°ä»£çš„å­—ç¬¦ä¸²å®ç°ã€‚æ¯ä¸ªå­—ç¬¦ä¸²éƒ½ç”±ç‹¬ç«‹äºç¼–ç çš„Unicodeå­—ç¬¦ç»„æˆï¼Œå¹¶æ”¯æŒåœ¨å„ç§Unicodeè¡¨ç¤ºä¸­è®¿é—®è¿™äº›å­—ç¬¦ã€‚ æ³¨æ„ Swiftçš„Stringç±»å‹ä¸Foundationçš„NSStringç±»æ¡¥æ¥ã€‚Foundationè¿˜æ‰©å±•äº†Stringï¼Œä»¥å…¬å¼€NSStringå®šä¹‰çš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæ‚¨å¯¼å…¥Foundationï¼Œæ‚¨å¯ä»¥åœ¨Stringä¸Šè®¿é—®è¿™äº›NSStringæ–¹æ³•ï¼Œè€Œæ— éœ€é“¸é€ ã€‚ æœ‰å…³å°†Stringä¸Foundationå’ŒCocoaä¸€èµ·ä½¿ç”¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…Stringå’ŒNSStringä¹‹é—´çš„æ¡¥æ¥ã€‚ å¼¦æ–‡å­¦æ‚¨å¯ä»¥åœ¨ä»£ç ä¸­åŒ…å«é¢„å®šä¹‰çš„Stringå€¼ä½œä¸ºå­—ç¬¦ä¸²æ–‡å­—ã€‚å­—ç¬¦ä¸²æ–‡å­—æ˜¯ç”¨åŒå¼•å·åŒ…å›´çš„å­—ç¬¦åºåˆ—ï¼ˆâ€œï¼‰ã€‚ ä½¿ç”¨å­—ç¬¦ä¸²æ–‡å­—ä½œä¸ºå¸¸é‡æˆ–å˜é‡çš„åˆå§‹å€¼ï¼š 1let someString = &quot;Some string literal value&quot; è¯·æ³¨æ„ï¼ŒSwiftæ¨æ–­å‡ºsomeStringå¸¸é‡çš„Stringç±»å‹ï¼Œå› ä¸ºå®ƒæ˜¯ç”¨å­—ç¬¦ä¸²å­—é¢å€¼åˆå§‹åŒ–çš„ã€‚ å¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—å¦‚æœæ‚¨éœ€è¦ä¸€ä¸ªè·¨è¶Šå‡ è¡Œçš„å­—ç¬¦ä¸²ï¼Œè¯·ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—â€”â€”ä¸€ä¸ªç”±ä¸‰ä¸ªåŒå¼•å·åŒ…å›´çš„å­—ç¬¦åºåˆ—ï¼š 1234567let quotation = &quot;&quot;&quot;The White Rabbit put on his spectacles. &quot;Where shall I begin,please your Majesty?&quot; he asked.&quot;Begin at the beginning,&quot; the King said gravely, &quot;and go ontill you come to the end; then stop.&quot;&quot;&quot;&quot; å¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—åŒ…æ‹¬å…¶å¼€å¤´å’Œç»“å°¾å¼•å·ä¹‹é—´çš„æ‰€æœ‰è¡Œã€‚å­—ç¬¦ä¸²åœ¨å¼€å¤´å¼•å·ï¼ˆâ€œâ€ï¼‰åçš„ç¬¬ä¸€è¡Œå¼€å§‹ï¼Œåœ¨ç»“æŸå¼•å·ä¹‹å‰çš„ä¸€è¡Œç»“æŸï¼Œè¿™æ„å‘³ç€ä¸‹é¢çš„å­—ç¬¦ä¸²éƒ½æ²¡æœ‰ä»¥æ¢è¡Œç¬¦å¼€å¤´æˆ–ç»“æŸï¼š 1234let singleLineString = &quot;These are the same.&quot;let multilineString = &quot;&quot;&quot;These are the same.&quot;&quot;&quot; å½“æ‚¨çš„æºä»£ç åœ¨å¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—ä¸­åŒ…å«æ¢è¡Œç¬¦æ—¶ï¼Œè¯¥æ¢è¡Œç¬¦ä¹Ÿä¼šå‡ºç°åœ¨å­—ç¬¦ä¸²çš„å€¼ä¸­ã€‚å¦‚æœæ‚¨æƒ³ä½¿ç”¨æ¢è¡Œç¬¦ä½¿æºä»£ç æ›´å®¹æ˜“é˜…è¯»ï¼Œä½†ä¸å¸Œæœ›æ¢è¡Œç¬¦æˆä¸ºå­—ç¬¦ä¸²å€¼çš„ä¸€éƒ¨åˆ†ï¼Œè¯·åœ¨è¿™äº›è¡Œæœ«å°¾å†™ä¸€ä¸ªåæ–œæ ï¼ˆ\\ï¼‰ï¼š 1234567let softWrappedQuotation = &quot;&quot;&quot;The White Rabbit put on his spectacles. &quot;Where shall I begin, \\please your Majesty?&quot; he asked.&quot;Begin at the beginning,&quot; the King said gravely, &quot;and go on \\till you come to the end; then stop.&quot;&quot;&quot;&quot; è¦åˆ¶ä½œä»¥è¡Œæè¦å¼€å¤´æˆ–ç»“å°¾çš„å¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—ï¼Œè¯·å†™ä¸€è¡Œä½œä¸ºç¬¬ä¸€è¡Œæˆ–æœ€åä¸€è¡Œã€‚ä¾‹å¦‚ï¼š 123456let lineBreaks = &quot;&quot;&quot;This string starts with a line break.It also ends with a line break.&quot;&quot;&quot; å¯ä»¥ç¼©è¿›å¤šè¡Œå­—ç¬¦ä¸²ä»¥åŒ¹é…å‘¨å›´çš„ä»£ç ã€‚ç»“å°¾å¼•å·ï¼ˆâ€œâ€ï¼‰å‰çš„ç©ºæ ¼å‘Šè¯‰Swiftåœ¨æ‰€æœ‰å…¶ä»–è¡Œä¹‹å‰è¦å¿½ç•¥å“ªä¸ªç©ºæ ¼ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨åœ¨è¡Œçš„å¼€å¤´å†™ç©ºæ ¼ï¼Œé™¤äº†ç»“æŸå¼•å·ä¹‹å‰çš„å†…å®¹å¤–ï¼Œåˆ™è¯¥ç©ºæ ¼ä¹ŸåŒ…æ‹¬åœ¨å†…ã€‚ åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå³ä½¿æ•´ä¸ªå¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—ç¼©è¿›ï¼Œå­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œä¹Ÿä¸ä¼šä»¥ä»»ä½•ç©ºæ ¼å¼€å¤´ã€‚ä¸­é—´çº¿çš„ç¼©è¿›æ¯”ç»“æŸå¼•å·æ›´å¤šï¼Œæ‰€ä»¥å®ƒä»é¢å¤–çš„å››ç©ºæ ¼ç¼©è¿›å¼€å§‹ã€‚ æ–‡å­—ä¸­çš„ç‰¹æ®Šå­—ç¬¦å­—ç¬¦ä¸²æ–‡å­—å¯ä»¥åŒ…æ‹¬ä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼š è½¬ä¹‰çš„ç‰¹æ®Šå­—ç¬¦\\0ï¼ˆç©ºå­—ç¬¦ï¼‰ã€\\\\ï¼ˆåæ–œæ ï¼‰ã€\\tï¼ˆæ°´å¹³é€‰é¡¹å¡ï¼‰ã€\\nï¼ˆè¡Œé¦ˆé€ï¼‰ã€\\rï¼ˆå›è½¦ï¼‰ã€\\&quot;ï¼ˆåŒå¼•å·ï¼‰å’Œ\\&#39;ï¼ˆå•å¼•å·ï¼‰ ä¸€ä¸ªä»»æ„çš„Unicodeæ ‡é‡å€¼ï¼Œå†™ä¸º\\u&#123;n&#125;ï¼Œå…¶ä¸­næ˜¯ä¸€ä¸ª1-8ä½åå…­è¿›åˆ¶æ•°å­—ï¼ˆUnicodeåœ¨ä¸‹é¢çš„Unicodeä¸­è®¨è®ºï¼‰ ä¸‹é¢çš„ä»£ç æ˜¾ç¤ºäº†è¿™äº›ç‰¹æ®Šå­—ç¬¦çš„å››ä¸ªç¤ºä¾‹ã€‚wiseWordså¸¸æ•°åŒ…å«ä¸¤ä¸ªè½¬ä¹‰çš„åŒå¼•å·ã€‚dollarSignã€blackHeartå’ŒsparklingHeartå¸¸é‡æ¼”ç¤ºäº†Unicodeæ ‡é‡æ ¼å¼ï¼š 12345let wiseWords = &quot;\\&quot;Imagination is more important than knowledge\\&quot; - Einstein&quot;// &quot;Imagination is more important than knowledge&quot; - Einsteinlet dollarSign = &quot;\\u&#123;24&#125;&quot; // $, Unicode scalar U+0024let blackHeart = &quot;\\u&#123;2665&#125;&quot; // â™¥, Unicode scalar U+2665let sparklingHeart = &quot;\\u&#123;1F496&#125;&quot; // ğŸ’–, Unicode scalar U+1F496 ç”±äºå¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—ä½¿ç”¨ä¸‰ä¸ªåŒå¼•å·ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨å¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—ä¸­åŒ…å«ä¸€ä¸ªåŒå¼•å·ï¼ˆâ€ï¼‰è€Œä¸é€ƒé¿å®ƒã€‚è¦åœ¨å¤šè¡Œå­—ç¬¦ä¸²ä¸­åŒ…å«æ–‡æœ¬&quot;&quot;&quot;è¯·è‡³å°‘è½¬ä¹‰ä¸€ä¸ªå¼•å·ã€‚ä¾‹å¦‚ï¼š 1234let threeDoubleQuotationMarks = &quot;&quot;&quot;Escaping the first quotation mark \\&quot;&quot;&quot;Escaping all three quotation marks \\&quot;\\&quot;\\&quot;&quot;&quot;&quot; æ‰©å±•å­—ç¬¦ä¸²åˆ†éš”ç¬¦ä½ å¯ä»¥åœ¨æ‰©å±•åˆ†éš”ç¬¦ä¸­æ”¾ç½®ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢å€¼ï¼Œä»¥åŒ…å«å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦è€Œä¸è°ƒç”¨å®ƒä»¬çš„æ•ˆæœã€‚å°†å­—ç¬¦ä¸²æ”¾åœ¨å¼•å·( &quot; )å†…ï¼Œç„¶åç”¨æ•°å­—ç¬¦å·( # )åŒ…å›´å®ƒã€‚ä¾‹å¦‚ï¼Œæ‰“å°å­—ç¬¦ä¸²å­—é¢é‡ #&quot;Line 1\\nLine 2&quot;# å°†æ‰“å°æ¢è¡Œè½¬ä¹‰åºåˆ—( \\n )ï¼Œè€Œä¸æ˜¯è·¨ä¸¤è¡Œæ‰“å°å­—ç¬¦ä¸²ã€‚ å¦‚æœæ‚¨éœ€è¦å­—ç¬¦ä¸²å­—é¢é‡ä¸­çš„å­—ç¬¦çš„ç‰¹æ®Šæ•ˆæœï¼Œè¯·åŒ¹é…è½¬ä¹‰å­—ç¬¦(\\ â€˜)ä¹‹åå­—ç¬¦ä¸²ä¸­çš„æ•°å­—ç¬¦å·çš„æ•°é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„å­—ç¬¦ä¸²æ˜¯#â€Line 1\\nLine 2â€# â€˜ï¼Œè€Œä½ æƒ³è¦æ¢è¡Œï¼Œä½ å¯ä»¥ä½¿ç”¨#â€Line 1#nLine 2â€# â€˜ä»£æ›¿ã€‚ç±»ä¼¼åœ°ï¼Œâ€œ###â€Line1###nLine2â€œ###â€ä¹Ÿä¼šæ–­è¡Œã€‚ ä½¿ç”¨æ‰©å±•åˆ†éš”ç¬¦åˆ›å»ºçš„å­—ç¬¦ä¸²æ–‡å­—ä¹Ÿå¯ä»¥æ˜¯å¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ‰©å±•åˆ†éš”ç¬¦å°†æ–‡æœ¬&quot;&quot;&quot;åŒ…å«åœ¨å¤šè¡Œå­—ç¬¦ä¸²ä¸­ï¼Œè¦†ç›–ç»“æŸæ–‡å­—çš„é»˜è®¤è¡Œä¸ºã€‚ä¾‹å¦‚ï¼š 123let threeMoreDoubleQuotationMarks = #&quot;&quot;&quot;Here are three more double quotes: &quot;&quot;&quot;&quot;&quot;&quot;# åˆå§‹åŒ–ç©ºå­—ç¬¦ä¸²è¦åˆ›å»ºä¸€ä¸ªç©ºStringå€¼ä½œä¸ºæ„å»ºè¾ƒé•¿å­—ç¬¦ä¸²çš„èµ·ç‚¹ï¼Œè¯·ä¸ºå˜é‡åˆ†é…ç©ºå­—ç¬¦ä¸²æ–‡å­—ï¼Œæˆ–ä½¿ç”¨åˆå§‹åŒ–å™¨è¯­æ³•åˆå§‹åŒ–æ–°çš„Stringå®ä¾‹ï¼š 123var emptyString = &quot;&quot; // empty string literalvar anotherEmptyString = String() // initializer syntax// these two strings are both empty, and are equivalent to each other é€šè¿‡æ£€æŸ¥isEmpty â€˜å±æ€§æ¥ç¡®å®šString â€˜å€¼æ˜¯å¦ä¸ºç©º: 1234if emptyString.isEmpty &#123; print(&quot;Nothing to see here&quot;)&#125;// Prints &quot;Nothing to see here&quot; å­—ç¬¦ä¸²å¯å˜æ€§æ‚¨æŒ‡ç¤ºæ˜¯å¦å¯ä»¥é€šè¿‡å°†ç‰¹å®šStringåˆ†é…ç»™å˜é‡ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä¿®æ”¹ï¼‰æˆ–å¸¸é‡ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹æ— æ³•ä¿®æ”¹ï¼‰æ¥ä¿®æ”¹ï¼ˆæˆ–çªå˜ï¼‰ï¼š 1234567var variableString = &quot;Horse&quot;variableString += &quot; and carriage&quot;// variableString is now &quot;Horse and carriage&quot;let constantString = &quot;Highlander&quot;constantString += &quot; and another Highlander&quot;// this reports a compile-time error - a constant string cannot be modified æ³¨æ„ è¿™ç§æ–¹æ³•ä¸åŒäºObjective-Cå’ŒCocoaä¸­çš„å­—ç¬¦ä¸²çªå˜ï¼Œåœ¨è¿™ä¸¤ä¸ªç±»ï¼ˆNSStringå’ŒNSMutableStringï¼‰ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼Œä»¥æŒ‡ç¤ºå­—ç¬¦ä¸²æ˜¯å¦å¯ä»¥çªå˜ã€‚ å­—ç¬¦ä¸²æ˜¯å€¼ç±»å‹Swiftçš„Stringç±»å‹æ˜¯ä¸€ç§å€¼ç±»å‹ã€‚å¦‚æœæ‚¨åˆ›å»ºæ–°çš„Stringå€¼ï¼Œåˆ™è¯¥Stringå€¼åœ¨ä¼ é€’ç»™å‡½æ•°æˆ–æ–¹æ³•æ—¶ï¼Œæˆ–åˆ†é…ç»™å¸¸é‡æˆ–å˜é‡æ—¶å°†è¢«å¤åˆ¶ã€‚åœ¨æ¯ç§æƒ…å†µä¸‹ï¼Œéƒ½ä¼šåˆ›å»ºç°æœ‰Stringå€¼çš„æ–°å‰¯æœ¬ï¼Œå¹¶ä¼ é€’æˆ–åˆ†é…æ–°å‰¯æœ¬ï¼Œè€Œä¸æ˜¯åŸå§‹ç‰ˆæœ¬ã€‚å€¼ç±»å‹åœ¨ç»“æ„ä¸­æè¿°ï¼Œæšä¸¾æ˜¯å€¼ç±»å‹ã€‚ Swiftçš„é»˜è®¤å¤åˆ¶Stringè¡Œä¸ºç¡®ä¿å½“å‡½æ•°æˆ–æ–¹æ³•å‘æ‚¨ä¼ é€’Stringå€¼æ—¶ï¼Œå¾ˆæ˜æ˜¾ï¼Œæ— è®ºå®ƒæ¥è‡ªå“ªé‡Œï¼Œæ‚¨éƒ½æ‹¥æœ‰è¯¥ç¡®åˆ‡çš„Stringå€¼ã€‚æ‚¨å¯ä»¥æ”¾å¿ƒï¼Œé™¤éæ‚¨è‡ªå·±ä¿®æ”¹ï¼Œå¦åˆ™ä¼ é€’çš„å­—ç¬¦ä¸²ä¸ä¼šè¢«ä¿®æ”¹ã€‚ åœ¨å¹•åï¼ŒSwiftçš„ç¼–è¯‘å™¨ä¼˜åŒ–äº†å­—ç¬¦ä¸²ä½¿ç”¨ï¼Œå› æ­¤åªæœ‰åœ¨ç»å¯¹å¿…è¦çš„æƒ…å†µä¸‹æ‰èƒ½è¿›è¡Œå®é™…å¤åˆ¶ã€‚è¿™æ„å‘³ç€åœ¨å°†å­—ç¬¦ä¸²ä½œä¸ºå€¼ç±»å‹ä½¿ç”¨æ—¶ï¼Œæ‚¨æ€»æ˜¯ä¼šè·å¾—å‡ºè‰²çš„æ€§èƒ½ã€‚ ä¸è§’è‰²åˆä½œæ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨for-inå¾ªç¯è¿­ä»£å­—ç¬¦ä¸²æ¥è®¿é—®Stringçš„å•ä¸ªCharacterå€¼ï¼š 12345678for character in &quot;Dog!ğŸ¶&quot; &#123; print(character)&#125;// D// o// g// !// ğŸ¶ for-inå¾ªç¯åœ¨For-Inå¾ªç¯ä¸­æè¿°ã€‚ æˆ–è€…ï¼Œæ‚¨å¯ä»¥é€šè¿‡æä¾›Characterç±»å‹æ³¨é‡Šä»å•ä¸ªå­—ç¬¦å­—ç¬¦ä¸²æ–‡å­—ä¸­åˆ›å»ºç‹¬ç«‹çš„Characterå¸¸é‡æˆ–å˜é‡ï¼š 1let exclamationMark: Character = &quot;!&quot; Stringå¯ä»¥é€šè¿‡å°†Characterå€¼æ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶åˆå§‹åŒ–å™¨æ¥æ„å»ºå€¼ï¼š 1234let catCharacters: [Character] = [&quot;C&quot;, &quot;a&quot;, &quot;t&quot;, &quot;!&quot;, &quot;ğŸ±&quot;]let catString = String(catCharacters)print(catString)// Prints &quot;Cat!ğŸ±&quot; ä¸²è”å­—ç¬¦ä¸²å’Œå­—ç¬¦Stringå€¼å¯ä»¥ä¸åŠ æ³•è¿ç®—ç¬¦ï¼ˆ+ï¼‰ä¸€èµ·æ·»åŠ ï¼ˆæˆ–ä¸²è”ï¼‰ï¼Œä»¥åˆ›å»ºæ–°çš„Stringå€¼ï¼š 1234let string1 = &quot;hello&quot;let string2 = &quot; there&quot;var welcome = string1 + string2// welcome now equals &quot;hello there&quot; æ‚¨è¿˜å¯ä»¥ä½¿ç”¨åŠ æ³•èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ+=) Stringå€¼é™„åŠ åˆ°ç°æœ‰çš„Stringå˜é‡ï¼š 123var instruction = &quot;look over&quot;instruction += string2// instruction now equals &quot;look over there&quot; æ‚¨å¯ä»¥ä½¿ç”¨Stringç±»å‹çš„append()æ–¹æ³•å°†Characterå€¼é™„åŠ åˆ°Stringå˜é‡ï¼š 123let exclamationMark: Character = &quot;!&quot;welcome.append(exclamationMark)// welcome now equals &quot;hello there!&quot; æ³¨æ„ æ‚¨æ— æ³•å°†Stringæˆ–Characteré™„åŠ åˆ°ç°æœ‰Characterå˜é‡ï¼Œå› ä¸ºCharacterå€¼å¿…é¡»ä»…åŒ…å«å•ä¸ªå­—ç¬¦ã€‚ å¦‚æœæ‚¨ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—æ¥æ„å»ºè¾ƒé•¿å­—ç¬¦ä¸²çš„è¡Œï¼Œåˆ™å¸Œæœ›å­—ç¬¦ä¸²ä¸­çš„æ¯è¡Œéƒ½ä»¥æ¢è¡Œç¬¦ç»“æŸï¼ŒåŒ…æ‹¬æœ€åä¸€è¡Œã€‚ä¾‹å¦‚ï¼š 12345678910111213141516171819202122let badStart = &quot;&quot;&quot;onetwo&quot;&quot;&quot;let end = &quot;&quot;&quot;three&quot;&quot;&quot;print(badStart + end)// Prints two lines:// one// twothreelet goodStart = &quot;&quot;&quot;onetwo&quot;&quot;&quot;print(goodStart + end)// Prints three lines:// one// two// three åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå°†badStartä¸endè¿æ¥ä¼šäº§ç”Ÿä¸€ä¸ªä¸¤è¡Œå­—ç¬¦ä¸²ï¼Œè¿™ä¸æ˜¯æ‰€éœ€çš„ç»“æœã€‚ç”±äºbadStartçš„æœ€åä¸€è¡Œä¸ä¼šä»¥æ¢è¡Œç¬¦ç»“æŸï¼Œå› æ­¤è¯¥è¡Œä¸ç¬¬ä¸€è¡Œendç›¸ç»“åˆã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸¤æ¡goodStartçº¿éƒ½ä»¥æ¢è¡Œç¬¦ç»“æŸï¼Œå› æ­¤å½“å®ƒä¸endç›¸ç»“åˆæ—¶ï¼Œç»“æœæœ‰ä¸‰æ¡çº¿ï¼Œæ­£å¦‚é¢„æœŸçš„é‚£æ ·ã€‚ å­—ç¬¦ä¸²æ’å€¼å­—ç¬¦ä¸²æ’å€¼æ˜¯ä¸€ç§é€šè¿‡å°†å¸¸é‡ã€å˜é‡ã€æ–‡å­—å’Œè¡¨è¾¾å¼çš„å€¼åŒ…å«åœ¨å­—ç¬¦ä¸²æ–‡å­—ä¸­æ¥æ„å»ºæ–°Stringå€¼çš„æ–¹æ³•ã€‚æ‚¨å¯ä»¥åœ¨å•è¡Œå’Œå¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—ä¸­ä½¿ç”¨å­—ç¬¦ä¸²æ’å€¼ã€‚æ‚¨æ’å…¥å­—ç¬¦ä¸²æ–‡å­—çš„æ¯ä¸ªé¡¹ç›®éƒ½åŒ…è£¹åœ¨ä¸€å¯¹æ‹¬å·ä¸­ï¼Œå‰ç¼€ä¸ºåæ–œæ ï¼ˆ\\ï¼‰ï¼š 123let multiplier = 3let message = &quot;\\(multiplier) times 2.5 is \\(Double(multiplier) * 2.5)&quot;// message is &quot;3 times 2.5 is 7.5&quot; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œmultiplierçš„å€¼è¢«æ’å…¥å­—ç¬¦ä¸²æ–‡å­—ä¸º\\(multiplier)å½“è®¡ç®—å­—ç¬¦ä¸²æ’å€¼ä»¥åˆ›å»ºå®é™…å­—ç¬¦ä¸²æ—¶ï¼Œæ­¤å ä½ç¬¦å°†è¢«multiplierçš„å®é™…å€¼å–ä»£ã€‚ multiplier çš„å€¼ä¹Ÿæ˜¯å­—ç¬¦ä¸²åé¢æ›´å¤§çš„è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªè¡¨è¾¾å¼è®¡ç®— Double(multiplier) * 2.5 çš„å€¼ï¼Œå¹¶å°†ç»“æœ( 7.5 )æ’å…¥åˆ°å­—ç¬¦ä¸²ä¸­ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå½“è¡¨è¾¾å¼åŒ…å«åœ¨å­—ç¬¦ä¸²å­—é¢å€¼ä¸­æ—¶ï¼Œå®ƒè¢«å†™æˆ\\(Double(multiplier) * 2.5) ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨æ‰©å±•å­—ç¬¦ä¸²åˆ†éš”ç¬¦åˆ›å»ºåŒ…å«å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œå¦åˆ™è¿™äº›å­—ç¬¦å°†è¢«è§†ä¸ºå­—ç¬¦ä¸²æ’å€¼ã€‚ä¾‹å¦‚ï¼š 12print(#&quot;Write an interpolated string in Swift using \\(multiplier).&quot;#)// Prints &quot;Write an interpolated string in Swift using \\(multiplier).&quot; è¦åœ¨ä½¿ç”¨æ‰©å±•åˆ†éš”ç¬¦çš„å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å­—ç¬¦ä¸²æ’å€¼ï¼Œè¯·å°†åæ–œæ åçš„æ•°å­—ç¬¦å·æ•°é‡ä¸å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾çš„æ•°å­—ç¬¦å·æ•°é‡åŒ¹é…ã€‚ä¾‹å¦‚ï¼š 12print(#&quot;6 times 7 is \\#(6 * 7).&quot;#)// Prints &quot;6 times 7 is 42.&quot; æ³¨æ„ æ‚¨åœ¨æ’å€¼å­—ç¬¦ä¸²æ‹¬å·å†…å†™çš„è¡¨è¾¾å¼ä¸èƒ½åŒ…å«æœªè½¬ä¹‰åæ–œæ ï¼ˆ\\ï¼‰ã€å›è½¦æˆ–è¡Œé¦ˆé€ã€‚ç„¶è€Œï¼Œå®ƒä»¬å¯ä»¥åŒ…å«å…¶ä»–å­—ç¬¦ä¸²æ–‡å­—ã€‚ UnicodeUnicodeæ˜¯åœ¨ä¸åŒä¹¦å†™ç³»ç»Ÿä¸­ç¼–ç ã€è¡¨ç¤ºå’Œå¤„ç†æ–‡æœ¬çš„å›½é™…æ ‡å‡†ã€‚å®ƒä½¿æ‚¨èƒ½å¤Ÿä»¥æ ‡å‡†åŒ–çš„å½¢å¼è¡¨ç¤ºæ¥è‡ªä»»ä½•è¯­è¨€çš„å‡ ä¹ä»»ä½•å­—ç¬¦ï¼Œå¹¶ä»å¤–éƒ¨æ¥æºï¼ˆå¦‚æ–‡æœ¬æ–‡ä»¶æˆ–ç½‘é¡µï¼‰è¯»å–å’Œå†™å…¥è¿™äº›å­—ç¬¦ã€‚å¦‚æœ¬èŠ‚æ‰€è¿°ï¼ŒSwiftçš„Stringå’ŒCharacterç±»å‹å®Œå…¨ç¬¦åˆUnicodeã€‚ Unicodeæ ‡é‡å€¼åœ¨å¹•åï¼ŒSwiftçš„åŸç”Ÿ String ç±»å‹æ˜¯ç”±Unicodeæ ‡é‡å€¼æ„å»ºçš„ã€‚Unicodeæ ‡é‡å€¼æ˜¯å­—ç¬¦æˆ–ä¿®é¥°ç¬¦çš„å”¯ä¸€21ä½æ•°å­—ï¼Œä¾‹å¦‚â€™ U+0061 è¡¨ç¤ºâ€™æ‹‰ä¸å°å†™å­—æ¯A ( â€œ A â€œ)ï¼Œæˆ– U+1F425 è¡¨ç¤ºæ­£é¢çš„BABY CHICK ( â€œğŸ¥â€)ã€‚ è¯·æ³¨æ„ï¼Œå¹¶éæ‰€æœ‰21ä½Unicodeæ ‡é‡å€¼éƒ½åˆ†é…ç»™ä¸€ä¸ªå­—ç¬¦â€”â€”ä¸€äº›æ ‡é‡ä¿ç•™ç”¨äºæœªæ¥çš„åˆ†é…æˆ–ç”¨äºUTF-16ç¼–ç ã€‚åˆ†é…ç»™å­—ç¬¦çš„æ ‡é‡å€¼é€šå¸¸ä¹Ÿæœ‰ä¸€ä¸ªåç§°ï¼Œä¾‹å¦‚ä¸Šé¢ç¤ºä¾‹ä¸­çš„LATINSMALLLETTERAå’ŒFRONT-FACINGBABYã€‚ æ‰©å±•çš„è¯­æ³•é›†ç¾¤SwiftCharacterç±»å‹çš„æ¯ä¸ªå®ä¾‹éƒ½ä»£è¡¨ä¸€ä¸ªæ‰©å±•çš„å­—ç´ é›†ç¾¤ã€‚æ‰©å±•å­—ç´ é›†ç¾¤æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªUnicodeæ ‡é‡çš„åºåˆ—ï¼Œï¼ˆå½“ç»„åˆæ—¶ï¼‰äº§ç”Ÿå•ä¸ªäººç±»å¯è¯»å­—ç¬¦ã€‚ è¿™æ˜¯ä¸€ä¸ªä¾‹å­ã€‚å­—æ¯ Ã© å¯ä»¥è¡¨ç¤ºä¸ºå•ä¸ªUnicodeæ ‡é‡ Ã© ( æ‹‰ä¸å°å†™å­—æ¯E WITH ACUTE ï¼Œæˆ–â€™ U+00E9 â€˜)ã€‚ç„¶è€Œï¼ŒåŒæ ·çš„å­—æ¯ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºä¸€å¯¹æ ‡é‡â€”â€”ä¸€ä¸ªæ ‡å‡†å­—æ¯ e (æ‹‰ä¸å°å†™å­—æ¯e ï¼Œæˆ–â€™ U+0065 â€˜)ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç»„åˆæ€¥æ€§é‡éŸ³æ ‡é‡( U+0301 )ã€‚ combined ACUTE ACCENT æ ‡é‡å›¾å½¢åŒ–åœ°åº”ç”¨äºå®ƒå‰é¢çš„æ ‡é‡ï¼Œå½“ä¸€ä¸ªæ”¯æŒunicodeçš„æ–‡æœ¬å‘ˆç°ç³»ç»Ÿå‘ˆç°ä¸€ä¸ª e æ—¶ï¼Œå®ƒå°±ä¼šå˜æˆä¸€ä¸ªâ€™ Ã© â€˜ã€‚ åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå­—æ¯Ã©éƒ½è¡¨ç¤ºä¸ºå•ä¸ªSwiftCharacterå€¼ï¼Œè¡¨ç¤ºæ‰©å±•çš„å­—ç´ é›†ç¾¤ã€‚åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œé›†ç¾¤åŒ…å«å•ä¸ªæ ‡é‡ï¼›åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”±ä¸¤ä¸ªæ ‡é‡ç»„æˆçš„é›†ç¾¤ï¼š 123let eAcute: Character = &quot;\\u&#123;E9&#125;&quot; // Ã©let combinedEAcute: Character = &quot;\\u&#123;65&#125;\\u&#123;301&#125;&quot; // e followed by Ì// eAcute is Ã©, combinedEAcute is Ã© æ‰©å±•å­—ç´ é›†ç¾¤æ˜¯ä¸€ç§çµæ´»çš„æ–¹å¼ï¼Œå¯ä»¥å°†è®¸å¤šå¤æ‚çš„è„šæœ¬å­—ç¬¦è¡¨ç¤ºä¸ºå•ä¸ªCharacterå€¼ã€‚ä¾‹å¦‚ï¼ŒéŸ©è¯­å­—æ¯çš„éŸ©è¯­éŸ³èŠ‚å¯ä»¥è¡¨ç¤ºä¸ºé¢„å†™æˆ–åˆ†è§£åºåˆ—ã€‚è¿™ä¸¤ç§è¡¨ç¤ºå½¢å¼éƒ½ç¬¦åˆ Swift ä¸­çš„å•ä¸ªCharacterå€¼ï¼š 123let precomposed: Character = &quot;\\u&#123;D55C&#125;&quot; // í•œlet decomposed: Character = &quot;\\u&#123;1112&#125;\\u&#123;1161&#125;\\u&#123;11AB&#125;&quot; // á„’, á…¡, á†«// precomposed is í•œ, decomposed is í•œ æ‰©å±•çš„å­—ç´ é›†ç¾¤ä½¿ç”¨äºå°é—­æ ‡è®°çš„æ ‡é‡ï¼ˆå¦‚COMBININGENCLOSINGCIRCLEæˆ–U+20DDï¼‰èƒ½å¤Ÿå°†å…¶ä»–Unicodeæ ‡é‡ä½œä¸ºå•ä¸ªCharacterå€¼çš„ä¸€éƒ¨åˆ†åŒ…å›´ï¼š 12let enclosedEAcute: Character = &quot;\\u&#123;E9&#125;\\u&#123;20DD&#125;&quot;// enclosedEAcute is Ã©âƒ åŒºåŸŸæŒ‡æ ‡ç¬¦å·çš„Unicodeæ ‡é‡å¯ä»¥æˆå¯¹ç»„åˆï¼Œå½¢æˆå•ä¸ªCharacterå€¼ï¼Œä¾‹å¦‚REGIONALINDICATORSYMBOLLETTERUï¼ˆU+1F1FAï¼‰REGIONALINDICATORSYMBOLLETTERSï¼ˆU+1F1F8çš„ç»„åˆï¼š 12let regionalIndicatorForUS: Character = &quot;\\u&#123;1F1FA&#125;\\u&#123;1F1F8&#125;&quot;// regionalIndicatorForUS is ğŸ‡ºğŸ‡¸ è®¡æ•°å­—ç¬¦è¦æ£€ç´¢å­—ç¬¦ä¸²ä¸­Characterå€¼çš„è®¡æ•°ï¼Œè¯·ä½¿ç”¨å­—ç¬¦ä¸²çš„countå±æ€§ï¼š 123let unusualMenagerie = &quot;Koala ğŸ¨, Snail ğŸŒ, Penguin ğŸ§, Dromedary ğŸª&quot;print(&quot;unusualMenagerie has \\(unusualMenagerie.count) characters&quot;)// Prints &quot;unusualMenagerie has 40 characters&quot; è¯·æ³¨æ„ï¼ŒSwiftå¯¹Characterå€¼ä½¿ç”¨æ‰©å±•å­—ç´ ç°‡æ„å‘³ç€å­—ç¬¦ä¸²ä¸²è”å’Œä¿®æ”¹å¯èƒ½å¹¶ä¸æ€»æ˜¯å½±å“å­—ç¬¦ä¸²çš„å­—ç¬¦æ•°ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨å››ä¸ªå­—ç¬¦çš„å•è¯cafeåˆå§‹åŒ–æ–°å­—ç¬¦ä¸²ï¼Œç„¶ååœ¨å­—ç¬¦ä¸²æœ«å°¾é™„åŠ COMBININGACUTEACCENTï¼ˆU+0301ï¼‰ï¼Œåˆ™ç”Ÿæˆçš„å­—ç¬¦ä¸²ä»å°†æœ‰4ä¸ªå­—ç¬¦æ•°ï¼Œç¬¬å››ä¸ªå­—ç¬¦ä¸ºÃ©ï¼Œè€Œä¸æ˜¯eï¼š 12345678var word = &quot;cafe&quot;print(&quot;the number of characters in \\(word) is \\(word.count)&quot;)// Prints &quot;the number of characters in cafe is 4&quot;word += &quot;\\u&#123;301&#125;&quot; // COMBINING ACUTE ACCENT, U+0301print(&quot;the number of characters in \\(word) is \\(word.count)&quot;)// Prints &quot;the number of characters in cafÃ© is 4&quot; æ³¨æ„ æ‰©å±•çš„å­—ç´ é›†ç¾¤å¯ä»¥ç”±å¤šä¸ªUnicodeæ ‡é‡ç»„æˆã€‚è¿™æ„å‘³ç€ä¸åŒçš„å­—ç¬¦â€”â€”ä»¥åŠåŒä¸€å­—ç¬¦çš„ä¸åŒè¡¨ç¤ºå½¢å¼â€”â€”å¯èƒ½éœ€è¦ä¸åŒæ•°é‡çš„å†…å­˜æ¥å­˜å‚¨ã€‚å› æ­¤ï¼ŒSwiftä¸­çš„å­—ç¬¦åœ¨å­—ç¬¦ä¸²è¡¨ç¤ºä¸­ä¸ä¼šå„è‡ªå ç”¨ç›¸åŒæ•°é‡çš„å†…å­˜ã€‚å› æ­¤ï¼Œå¦‚æœä¸è¿­ä»£å­—ç¬¦ä¸²ä»¥ç¡®å®šå…¶æ‰©å±•çš„å­—ç´ é›†ç¾¤è¾¹ç•Œï¼Œå°±æ— æ³•è®¡ç®—å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ•°ã€‚å¦‚æœæ‚¨æ­£åœ¨å¤„ç†ç‰¹åˆ«é•¿çš„å­—ç¬¦ä¸²å€¼ï¼Œè¯·æ³¨æ„countå±æ€§å¿…é¡»è¿­ä»£æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„Unicodeæ ‡é‡ï¼Œä»¥ç¡®å®šè¯¥å­—ç¬¦ä¸²çš„å­—ç¬¦ã€‚ countå±æ€§è¿”å›çš„å­—ç¬¦è®¡æ•°å¹¶ä¸æ€»æ˜¯ä¸åŒ…å«ç›¸åŒå­—ç¬¦çš„NSStringçš„lengthå±æ€§ç›¸åŒã€‚NSStringçš„é•¿åº¦åŸºäºå­—ç¬¦ä¸²UTF-16è¡¨ç¤ºä¸­çš„16ä½ä»£ç å•å…ƒæ•°é‡ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ä¸­Unicodeæ‰©å±•å­—ç´ é›†ç¾¤çš„æ•°é‡ã€‚ è®¿é—®å’Œä¿®æ”¹å­—ç¬¦ä¸²æ‚¨å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²çš„æ–¹æ³•å’Œå±æ€§æˆ–ä½¿ç”¨ä¸‹æ ‡è¯­æ³•è®¿é—®å’Œä¿®æ”¹å­—ç¬¦ä¸²ã€‚ å­—ç¬¦ä¸²ç´¢å¼•æ¯ä¸ªStringå€¼éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ç´¢å¼•ç±»å‹String.Indexï¼Œå¯¹åº”äºå­—ç¬¦ä¸²ä¸­æ¯ä¸ªCharacterçš„ä½ç½®ã€‚ å¦‚ä¸Šæ‰€è¿°ï¼Œä¸åŒçš„å­—ç¬¦å¯èƒ½éœ€è¦ä¸åŒæ•°é‡çš„å†…å­˜æ¥å­˜å‚¨ï¼Œå› æ­¤ä¸ºäº†ç¡®å®šå“ªä¸ªCharacterä½äºç‰¹å®šä½ç½®ï¼Œæ‚¨å¿…é¡»ä»è¯¥Stringçš„å¼€å¤´æˆ–ç»“å°¾è¿­ä»£æ¯ä¸ªUnicodeæ ‡é‡ã€‚å› æ­¤ï¼ŒSwiftå­—ç¬¦ä¸²æ— æ³•æŒ‰æ•´æ•°å€¼è¿›è¡Œç´¢å¼•ã€‚ ä½¿ç”¨startIndexå±æ€§è®¿é—®Stringçš„ç¬¬ä¸€ä¸ªCharacterçš„ä½ç½®ã€‚TheendIndexå±æ€§æ˜¯Stringä¸­æœ€åä¸€ä¸ªå­—ç¬¦åçš„ä½ç½®ã€‚å› æ­¤ï¼ŒendIndexå±æ€§ä¸æ˜¯å­—ç¬¦ä¸²ä¸‹æ ‡çš„æœ‰æ•ˆå‚æ•°ã€‚å¦‚æœStringä¸ºç©ºï¼ŒstartIndexå’ŒendIndexæ˜¯ç›¸ç­‰çš„ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨Stringçš„index(before:)å’Œindex(after:)æ–¹æ³•è®¿é—®ç»™å®šç´¢å¼•ä¹‹å‰å’Œä¹‹åçš„ç´¢å¼•ã€‚è¦è®¿é—®ç¦»ç»™å®šç´¢å¼•æ›´è¿œçš„ç´¢å¼•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨index(_:offsetBy:)æ–¹æ³•ï¼Œè€Œä¸æ˜¯å¤šæ¬¡è°ƒç”¨è¿™äº›æ–¹æ³•ä¹‹ä¸€ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹æ ‡è¯­æ³•è®¿é—®ç‰¹å®šStringç´¢å¼•çš„Characterã€‚ 12345678910let greeting = &quot;Guten Tag!&quot;greeting[greeting.startIndex]// Ggreeting[greeting.index(before: greeting.endIndex)]// !greeting[greeting.index(after: greeting.startIndex)]// ulet index = greeting.index(greeting.startIndex, offsetBy: 7)greeting[index]// a å°è¯•è®¿é—®å­—ç¬¦ä¸²èŒƒå›´ä¹‹å¤–çš„ç´¢å¼•æˆ–å­—ç¬¦ä¸²èŒƒå›´ä¹‹å¤–çš„ç´¢å¼•ä¸­çš„Characterå°†è§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚ 12greeting[greeting.endIndex] // Errorgreeting.index(after: greeting.endIndex) // Error ä½¿ç”¨indiceså±æ€§è®¿é—®å­—ç¬¦ä¸²ä¸­å•ä¸ªå­—ç¬¦çš„æ‰€æœ‰ç´¢å¼•ã€‚ 1234for index in greeting.indices &#123; print(&quot;\\(greeting[index]) &quot;, terminator: &quot;&quot;)&#125;// Prints &quot;G u t e n T a g ! &quot; æ³¨æ„ æ‚¨å¯ä»¥åœ¨ç¬¦åˆCollectionåè®®çš„ä»»ä½•ç±»å‹ä¸Šä½¿ç”¨startIndexå’ŒendIndexå±æ€§ä»¥åŠindex(before:) index(after:)å’Œindex(_:offsetBy:)æ–¹æ³•ã€‚è¿™åŒ…æ‹¬Stringï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œä»¥åŠé›†åˆç±»å‹ï¼Œå¦‚æ•°Arrayã€Dictionaryå’ŒSetã€‚ æ’å…¥å’Œç§»é™¤è¦åœ¨æŒ‡å®šç´¢å¼•å¤„å°†å•ä¸ªå­—ç¬¦æ’å…¥å­—ç¬¦ä¸²ï¼Œè¯·ä½¿ç”¨insert(_:at:)æ–¹æ³•ï¼Œè¦åœ¨æŒ‡å®šç´¢å¼•å¤„æ’å…¥å¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹ï¼Œè¯·ä½¿ç”¨insert(contentsOf:at:)æ–¹æ³•ã€‚ 123456var welcome = &quot;hello&quot;welcome.insert(&quot;!&quot;, at: welcome.endIndex)// welcome now equals &quot;hello!&quot;welcome.insert(contentsOf: &quot; there&quot;, at: welcome.index(before: welcome.endIndex))// welcome now equals &quot;hello there!&quot; è¦åœ¨æŒ‡å®šç´¢å¼•å¤„ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤å•ä¸ªå­—ç¬¦ï¼Œè¯·ä½¿ç”¨remove(at:)æ–¹æ³•ï¼Œè¦åˆ é™¤æŒ‡å®šèŒƒå›´å†…çš„å­å­—ç¬¦ä¸²ï¼Œè¯·ä½¿ç”¨removeSubrange(_:)æ–¹æ³•ï¼š 123456welcome.remove(at: welcome.index(before: welcome.endIndex))// welcome now equals &quot;hello there&quot;let range = welcome.index(welcome.endIndex, offsetBy: -6)..&lt;welcome.endIndexwelcome.removeSubrange(range)// welcome now equals &quot;hello&quot; æ³¨æ„ ä½ å¯ä»¥ä½¿ç”¨â€™ insert(:at:) â€˜ï¼Œ â€˜ insert(contentsOf:at:) â€˜ï¼Œ â€˜ remove(at:) â€˜å’Œâ€™ removeSubrange(:) â€˜æ–¹æ³•æ¥å¤„ç†ä»»ä½•ç¬¦åˆâ€™ RangeReplaceableCollection â€˜åè®®çš„ç±»å‹ã€‚è¿™åŒ…æ‹¬å¦‚ä¸‹æ‰€ç¤ºçš„â€™ String â€˜ï¼Œä»¥åŠâ€™ Array â€˜ã€â€™ Dictionary â€˜å’Œâ€™ Set â€˜ç­‰é›†åˆç±»å‹ã€‚ å­å­—ç¬¦ä¸²å½“æ‚¨ä»å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ä¸‹æ ‡æˆ–ç±»ä¼¼prefix(_:)çš„æ–¹æ³•è·å¾—å­å­—ç¬¦ä¸²æ—¶ï¼Œç»“æœæ˜¯Substringçš„å®ä¾‹ï¼Œè€Œä¸æ˜¯å¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚Swiftä¸­çš„å­å­—ç¬¦ä¸²å…·æœ‰å¤§å¤šæ•°ä¸å­—ç¬¦ä¸²ç›¸åŒçš„æ–¹æ³•ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥åƒå¤„ç†å­—ç¬¦ä¸²ä¸€æ ·ä½¿ç”¨å­å­—ç¬¦ä¸²ã€‚ç„¶è€Œï¼Œä¸å­—ç¬¦ä¸²ä¸åŒï¼Œæ‚¨åœ¨å¯¹å­—ç¬¦ä¸²æ‰§è¡Œæ“ä½œæ—¶ä»…ä½¿ç”¨å­å­—ç¬¦ä¸²çš„æ—¶é—´å¾ˆçŸ­ã€‚å½“æ‚¨å‡†å¤‡å°†ç»“æœå­˜å‚¨æ›´é•¿æ—¶é—´æ—¶ï¼Œæ‚¨å°†å­å­—ç¬¦ä¸²è½¬æ¢ä¸ºStringå®ä¾‹ã€‚ä¾‹å¦‚ï¼š 1234567let greeting = &quot;Hello, world!&quot;let index = greeting.firstIndex(of: &quot;,&quot;) ?? greeting.endIndexlet beginning = greeting[..&lt;index]// beginning is &quot;Hello&quot;// Convert the result to a String for long-term storage.let newString = String(beginning) ä¸å­—ç¬¦ä¸²ä¸€æ ·ï¼Œæ¯ä¸ªå­å­—ç¬¦ä¸²éƒ½æœ‰ä¸€ä¸ªå†…å­˜åŒºåŸŸï¼Œå…¶ä¸­å­˜å‚¨äº†æ„æˆå­å­—ç¬¦ä¸²çš„å­—ç¬¦ã€‚å­—ç¬¦ä¸²å’Œå­å­—ç¬¦ä¸²çš„åŒºåˆ«åœ¨äºï¼Œä½œä¸ºæ€§èƒ½ä¼˜åŒ–ï¼Œå­å­—ç¬¦ä¸²å¯ä»¥é‡ç”¨ç”¨äºå­˜å‚¨åŸå§‹å­—ç¬¦ä¸²çš„éƒ¨åˆ†å†…å­˜ï¼Œæˆ–ç”¨äºå­˜å‚¨å¦ä¸€ä¸ªå­å­—ç¬¦ä¸²çš„éƒ¨åˆ†å†…å­˜ã€‚ï¼ˆå­—ç¬¦ä¸²å…·æœ‰ç±»ä¼¼çš„ä¼˜åŒ–ï¼Œä½†å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²å…±äº«å†…å­˜ï¼Œå®ƒä»¬æ˜¯ç›¸ç­‰çš„ã€‚ï¼‰è¿™ç§æ€§èƒ½ä¼˜åŒ–æ„å‘³ç€ï¼Œåœ¨æ‚¨ä¿®æ”¹å­—ç¬¦ä¸²æˆ–å­å­—ç¬¦ä¸²ä¹‹å‰ï¼Œæ‚¨ä¸å¿…æ”¯ä»˜å¤åˆ¶å†…å­˜çš„æ€§èƒ½æˆæœ¬ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œå­å­—ç¬¦ä¸²ä¸é€‚åˆé•¿æœŸå­˜å‚¨â€”â€”å› ä¸ºå®ƒä»¬é‡ç”¨åŸå§‹å­—ç¬¦ä¸²çš„å­˜å‚¨ï¼Œåªè¦ä½¿ç”¨å…¶ä»»ä½•å­å­—ç¬¦ä¸²ï¼Œæ•´ä¸ªåŸå§‹å­—ç¬¦ä¸²éƒ½å¿…é¡»ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œgreetingæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™æ„å‘³ç€å®ƒæœ‰ä¸€ä¸ªå†…å­˜åŒºåŸŸï¼Œå…¶ä¸­å­˜å‚¨äº†æ„æˆå­—ç¬¦ä¸²çš„å­—ç¬¦ã€‚å› ä¸ºbeginningæ˜¯greetingçš„å­å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å®ƒé‡ç”¨greetingä½¿ç”¨çš„è®°å¿†ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒnewStringæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²â€”â€”å½“å®ƒä»å­å­—ç¬¦ä¸²åˆ›å»ºæ—¶ï¼Œå®ƒæœ‰è‡ªå·±çš„å­˜å‚¨ç©ºé—´ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†è¿™äº›å…³ç³»ï¼š æ³¨æ„ Stringå’ŒSubstringéƒ½ç¬¦åˆStringProtocolåè®®ï¼Œè¿™æ„å‘³ç€å­—ç¬¦ä¸²æ“ä½œå‡½æ•°é€šå¸¸å¯ä»¥æ–¹ä¾¿åœ°æ¥å—StringProtocolå€¼ã€‚æ‚¨å¯ä»¥ä½¿ç”¨Stringæˆ–Substringå€¼è°ƒç”¨æ­¤ç±»å‡½æ•°ã€‚ æ¯”è¾ƒå­—ç¬¦ä¸²Swiftæä¾›äº†ä¸‰ç§æ¯”è¾ƒæ–‡æœ¬å€¼çš„æ–¹æ³•ï¼šå­—ç¬¦ä¸²å’Œå­—ç¬¦å¹³ç­‰ã€å‰ç¼€å¹³ç­‰å’Œåç¼€å¹³ç­‰ã€‚ å¼¦ä¹å’Œæ€§æ ¼å¹³ç­‰å­—ç¬¦ä¸²å’Œå­—ç¬¦ç›¸ç­‰æ€§ä¸â€œç­‰äºâ€è¿ç®—ç¬¦ï¼ˆ==å’Œâ€œä¸ç­‰äºâ€è¿ç®—ç¬¦ï¼ˆ!=ï¼‰ï¼Œå¦‚æ¯”è¾ƒè¿ç®—ç¬¦ä¸­æ‰€è¿°ï¼š 123456let quotation = &quot;We&#x27;re a lot alike, you and I.&quot;let sameQuotation = &quot;We&#x27;re a lot alike, you and I.&quot;if quotation == sameQuotation &#123; print(&quot;These two strings are considered equal&quot;)&#125;// Prints &quot;These two strings are considered equal&quot; å¦‚æœæ‰©å±•çš„å­—ç´ ç°‡åœ¨æ­£å…¸ä¸Šç­‰ä»·ï¼Œåˆ™ä¸¤ä¸ªStringå€¼ï¼ˆæˆ–ä¸¤ä¸ªCharacterå€¼ï¼‰è¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ã€‚å¦‚æœæ‰©å±•çš„å­—ç´ ç°‡å…·æœ‰ç›¸åŒçš„è¯­è¨€æ„ä¹‰å’Œå¤–è§‚ï¼Œå³ä½¿å®ƒä»¬æ˜¯ç”±å¹•åä¸åŒçš„Unicodeæ ‡é‡ç»„æˆçš„ï¼Œå®ƒä»¬åœ¨è§„èŒƒä¸Šä¹Ÿæ˜¯ç­‰ä»·çš„ã€‚ ä¾‹å¦‚ï¼Œæ‹‰ä¸å°å†™å­—æ¯EåŠ æ€¥éŸ³(U+00E9) åœ¨è§„èŒƒä¸Šç­‰åŒäºæ‹‰ä¸å°å†™å­—æ¯E(U+0065)åé¢è·Ÿç€ç»„åˆæ€¥éŸ³(U+0301)ã€‚è¿™ä¸¤ä¸ªæ‰©å±•çš„å­—ç´ é›†ç¾¤éƒ½æ˜¯è¡¨ç¤ºå­—ç¬¦ Ã© çš„æœ‰æ•ˆæ–¹æ³•ï¼Œå› æ­¤å®ƒä»¬è¢«è®¤ä¸ºæ˜¯è§„èŒƒç­‰ä»·çš„: 12345678910// &quot;Voulez-vous un cafÃ©?&quot; using LATIN SMALL LETTER E WITH ACUTElet eAcuteQuestion = &quot;Voulez-vous un caf\\u&#123;E9&#125;?&quot;// &quot;Voulez-vous un cafÃ©?&quot; using LATIN SMALL LETTER E and COMBINING ACUTE ACCENTlet combinedEAcuteQuestion = &quot;Voulez-vous un caf\\u&#123;65&#125;\\u&#123;301&#125;?&quot;if eAcuteQuestion == combinedEAcuteQuestion &#123; print(&quot;These two strings are considered equal&quot;)&#125;// Prints &quot;These two strings are considered equal&quot; ç›¸åï¼Œè‹±è¯­ä¸­ä½¿ç”¨çš„LATINCAPITALLETTERAï¼ˆU+0041æˆ–&quot;A&quot;ä¸ç­‰åŒäºä¿„è¯­ä¸­ä½¿ç”¨çš„CYRILLICLETTERAï¼ˆU+0410æˆ–&quot;Ğ&quot;ã€‚è¿™äº›è§’è‰²åœ¨è§†è§‰ä¸Šç›¸ä¼¼ï¼Œä½†æ²¡æœ‰ç›¸åŒçš„è¯­è¨€å«ä¹‰ï¼š 12345678let latinCapitalLetterA: Character = &quot;\\u&#123;41&#125;&quot;let cyrillicCapitalLetterA: Character = &quot;\\u&#123;0410&#125;&quot;if latinCapitalLetterA != cyrillicCapitalLetterA &#123; print(&quot;These two characters aren&#x27;t equivalent.&quot;)&#125;// Prints &quot;These two characters aren&#x27;t equivalent.&quot; æ³¨æ„ Swift ä¸­çš„å­—ç¬¦ä¸²å’Œå­—ç¬¦æ¯”è¾ƒä¸åŒºåˆ†åŒºåŸŸè®¾ç½®ã€‚ å‰ç¼€å’Œåç¼€å¹³ç­‰è¦æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦å…·æœ‰ç‰¹å®šçš„å­—ç¬¦ä¸²å‰ç¼€æˆ–åç¼€ï¼Œè¯·è°ƒç”¨stringâ€™shasPrefixhasPrefix(_:)å’ŒhasSuffix(_:)æ–¹æ³•ï¼Œè¿™ä¸¤ç§æ–¹æ³•éƒ½é‡‡ç”¨typeStringçš„å•ä¸ªå‚æ•°å¹¶è¿”å›å¸ƒå°”å€¼ã€‚ ä»¥ä¸‹ç¤ºä¾‹è€ƒè™‘äº†ä»£è¡¨èå£«æ¯”äºšã€Šç½—å¯†æ¬§ä¸æœ±ä¸½å¶ã€‹å‰ä¸¤å¹•åœºæ™¯ä½ç½®çš„ä¸€ç³»åˆ—å¼¦ï¼š 12345678910111213let romeoAndJuliet = [ &quot;Act 1 Scene 1: Verona, A public place&quot;, &quot;Act 1 Scene 2: Capulet&#x27;s mansion&quot;, &quot;Act 1 Scene 3: A room in Capulet&#x27;s mansion&quot;, &quot;Act 1 Scene 4: A street outside Capulet&#x27;s mansion&quot;, &quot;Act 1 Scene 5: The Great Hall in Capulet&#x27;s mansion&quot;, &quot;Act 2 Scene 1: Outside Capulet&#x27;s mansion&quot;, &quot;Act 2 Scene 2: Capulet&#x27;s orchard&quot;, &quot;Act 2 Scene 3: Outside Friar Lawrence&#x27;s cell&quot;, &quot;Act 2 Scene 4: A street in Verona&quot;, &quot;Act 2 Scene 5: Capulet&#x27;s mansion&quot;, &quot;Act 2 Scene 6: Friar Lawrence&#x27;s cell&quot;] æ‚¨å¯ä»¥ä½¿ç”¨hasPrefix(_:)æ–¹æ³•ä¸romeoAndJulietæ•°ç»„ä¸€èµ·è®¡ç®—è¯¥å‰§ç¬¬1å¹•ä¸­çš„åœºæ™¯æ•°é‡ï¼š 12345678var act1SceneCount = 0for scene in romeoAndJuliet &#123; if scene.hasPrefix(&quot;Act 1 &quot;) &#123; act1SceneCount += 1 &#125;&#125;print(&quot;There are \\(act1SceneCount) scenes in Act 1&quot;)// Prints &quot;There are 5 scenes in Act 1&quot; åŒæ ·ï¼Œä½¿ç”¨hasSuffix(_:)æ–¹æ³•æ¥è®¡ç®—å¡æ™®è±ç‰¹è±ªå®…å’ŒåŠ³ä¼¦æ–¯ä¿®å£«ç‰¢æˆ¿å†…æˆ–å‘¨å›´å‘ç”Ÿçš„åœºæ™¯æ•°é‡ï¼š 1234567891011var mansionCount = 0var cellCount = 0for scene in romeoAndJuliet &#123; if scene.hasSuffix(&quot;Capulet&#x27;s mansion&quot;) &#123; mansionCount += 1 &#125; else if scene.hasSuffix(&quot;Friar Lawrence&#x27;s cell&quot;) &#123; cellCount += 1 &#125;&#125;print(&quot;\\(mansionCount) mansion scenes; \\(cellCount) cell scenes&quot;)// Prints &quot;6 mansion scenes; 2 cell scenes&quot; æ³¨æ„ hasPrefix(_:)å’ŒhasSuffix(_:)æ–¹æ³•åœ¨æ¯ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ‰©å±•å­—ç´ ç°‡ä¹‹é—´æ‰§è¡Œé€ä¸ªå­—ç¬¦è§„èŒƒç­‰ä»·æ¯”è¾ƒï¼Œå¦‚Stringå’Œå­—ç¬¦å¹³ç­‰ä¸­æ‰€è¿°ã€‚ å­—ç¬¦ä¸²çš„Unicodeè¡¨ç¤ºå½“å°†Unicodeå­—ç¬¦ä¸²å†™å…¥æ–‡æœ¬æ–‡ä»¶æˆ–å…¶ä»–å­˜å‚¨æ—¶ï¼Œè¯¥å­—ç¬¦ä¸²ä¸­çš„Unicodeæ ‡é‡å°†ä»¥å‡ ç§Unicodeå®šä¹‰çš„ç¼–ç å½¢å¼ä¹‹ä¸€ç¼–ç ã€‚æ¯ä¸ªè¡¨å•éƒ½ä»¥ç§°ä¸ºä»£ç å•å…ƒçš„å°å—å¯¹å­—ç¬¦ä¸²è¿›è¡Œç¼–ç ã€‚è¿™äº›åŒ…æ‹¬UTF-8ç¼–ç å½¢å¼ï¼ˆå°†å­—ç¬¦ä¸²ç¼–ç ä¸º8ä½ä»£ç å•å…ƒï¼‰ã€UTF-16ç¼–ç å½¢å¼ï¼ˆå°†å­—ç¬¦ä¸²ç¼–ç ä¸º16ä½ä»£ç å•å…ƒï¼‰å’ŒUTF-32ç¼–ç å½¢å¼ï¼ˆå°†å­—ç¬¦ä¸²ç¼–ç ä¸º32ä½ä»£ç å•å…ƒï¼‰ã€‚ Swiftæä¾›äº†å‡ ç§ä¸åŒçš„æ–¹å¼æ¥è®¿é—®å­—ç¬¦ä¸²çš„Unicodeè¡¨ç¤ºå½¢å¼ã€‚æ‚¨å¯ä»¥ä½¿ç”¨inè¯­å¥è¿­ä»£å­—ç¬¦ä¸²ï¼Œä»¥Unicodeæ‰©å±•å­—ç´ é›†ç¾¤çš„å½¢å¼è®¿é—®å…¶å•ä¸ªCharacterå€¼ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨ã€Šå¤„ç†è§’è‰²ã€‹ä¸­è¿›è¡Œäº†æè¿°ã€‚ æˆ–è€…ï¼Œåœ¨å…¶ä»–ä¸‰ç§ç¬¦åˆUnicodeçš„è¡¨ç¤ºå½¢å¼ä¹‹ä¸€ä¸­è®¿é—®Stringå€¼ï¼š UTF-8ä»£ç å•å…ƒçš„é›†åˆï¼ˆä½¿ç”¨å­—ç¬¦ä¸²çš„utf8å±æ€§è®¿é—®ï¼‰ UTF-16ä»£ç å•å…ƒçš„é›†åˆï¼ˆä½¿ç”¨å­—ç¬¦ä¸²çš„utf16å±æ€§è®¿é—®ï¼‰ 21ä½Unicodeæ ‡é‡å€¼çš„é›†åˆï¼Œç›¸å½“äºå­—ç¬¦ä¸²çš„UTF-32ç¼–ç å½¢å¼ï¼ˆä½¿ç”¨å­—ç¬¦ä¸²çš„unicodeScalarså±æ€§è®¿é—®ï¼‰ ä¸‹é¢çš„æ¯ä¸ªä¾‹å­æ˜¾ç¤ºäº†ä»¥ä¸‹å­—ç¬¦ä¸²çš„ä¸åŒè¡¨ç¤ºå½¢å¼ï¼Œè¯¥å­—ç¬¦ä¸²ç”±å­—ç¬¦D, o, g, â€¼ (DOUBLE EXCLAMATION MARK, æˆ–Unicodeæ ‡é‡U+203C)ï¼Œå’ŒğŸ¶å­—ç¬¦(â€˜ DOG FACE â€˜ï¼Œæˆ–Unicodeæ ‡é‡â€™ U+1F436 â€˜)ç»„æˆ: 1let dogString = &quot;Dogâ€¼ğŸ¶&quot; UTF-8ä»£è¡¨æ‚¨å¯ä»¥é€šè¿‡è¿­ä»£å…¶utf8å±æ€§æ¥è®¿é—®Stringçš„UTF-8è¡¨ç¤ºå½¢å¼ã€‚æ­¤å±æ€§ç±»å‹ä¸ºString.UTF8Viewï¼Œè¿™æ˜¯æ— ç¬¦å·8ä½ï¼ˆUInt8ï¼‰å€¼çš„é›†åˆï¼Œå­—ç¬¦ä¸²UTF-8è¡¨ç¤ºä¸­çš„æ¯ä¸ªå­—èŠ‚ä¸€ä¸ªï¼š 12345for codeUnit in dogString.utf8 &#123; print(&quot;\\(codeUnit) &quot;, terminator: &quot;&quot;)&#125;print(&quot;&quot;)// Prints &quot;68 111 103 226 128 188 240 159 144 182 &quot; åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå‰ä¸‰ä¸ªåè¿›åˆ¶â€™ codeUnit â€˜å€¼(â€˜ 68 â€˜ï¼Œâ€™ 111 â€˜ï¼Œâ€™ 103 â€˜)è¡¨ç¤ºå­—ç¬¦â€™ D â€˜ï¼Œ â€˜ o â€˜å’Œâ€™ g â€˜ï¼Œå®ƒä»¬çš„UTF-8è¡¨ç¤ºä¸å®ƒä»¬çš„ASCIIè¡¨ç¤ºç›¸åŒã€‚æ¥ä¸‹æ¥çš„ä¸‰ä¸ªåè¿›åˆ¶â€™ codeUnit â€˜å€¼(â€˜ 226 â€˜ï¼Œâ€™ 128 â€˜ï¼Œâ€™ 188 â€˜)æ˜¯â€™ DOUBLEæ„Ÿå¹å·â€™å­—ç¬¦çš„ä¸‰å­—èŠ‚UTF-8è¡¨ç¤ºã€‚æœ€åå››ä¸ªâ€™ codeUnit â€˜å€¼(â€˜ 240 â€˜ï¼Œâ€™ 159 â€˜ï¼Œâ€™ 144 â€˜ï¼Œâ€™ 182 â€˜)æ˜¯â€™ DOG FACE â€˜å­—ç¬¦çš„å››å­—èŠ‚UTF-8è¡¨ç¤ºã€‚ UTF-16ä»£è¡¨æ‚¨å¯ä»¥é€šè¿‡è¿­ä»£å…¶utf16å±æ€§æ¥è®¿é—®Stringçš„UTF-16è¡¨ç¤ºå½¢å¼ã€‚æ­¤å±æ€§ç±»å‹ä¸ºString.UTF16Viewï¼Œè¿™æ˜¯æ— ç¬¦å·16ä½ï¼ˆUInt16ï¼‰å€¼çš„é›†åˆï¼Œå­—ç¬¦ä¸²UTF-16è¡¨ç¤ºä¸­çš„æ¯ä¸ª16ä½ä»£ç å•å…ƒä¸€ä¸ªï¼š 12345for codeUnit in dogString.utf16 &#123; print(&quot;\\(codeUnit) &quot;, terminator: &quot;&quot;)&#125;print(&quot;&quot;)// Prints &quot;68 111 103 8252 55357 56374 &quot; åŒæ ·ï¼Œå‰ä¸‰ä¸ªcodeUnitå€¼ï¼ˆ68ã€111ã€103ï¼‰ä»£è¡¨å­—ç¬¦Dã€oå’Œgï¼Œå…¶UTF-16ä»£ç å•å…ƒçš„å€¼ä¸å­—ç¬¦ä¸²çš„UTF-8è¡¨ç¤ºç›¸åŒï¼ˆå› ä¸ºè¿™äº›Unicodeæ ‡é‡ä»£è¡¨ASCIIå­—ç¬¦ï¼‰ã€‚ ç¬¬å››ä¸ªcodeUnitå€¼ï¼ˆ8252ï¼‰æ˜¯åå…­è¿›åˆ¶å€¼203Cçš„åè¿›åˆ¶ï¼Œå®ƒè¡¨ç¤ºDOUBLEEXCLAMATIONMARKå­—ç¬¦çš„Unicodeæ ‡é‡U+203Cã€‚æ­¤å­—ç¬¦å¯ä»¥åœ¨UTF-16ä¸­è¡¨ç¤ºä¸ºå•ä¸ªä»£ç å•å…ƒã€‚ ç¬¬5å’Œç¬¬6ä¸ªâ€™ codeUnit â€˜å€¼(â€˜ 55357 â€˜å’Œâ€™ 56374 â€˜)æ˜¯â€™ DOG FACE â€˜å­—ç¬¦çš„UTF-16ä»£ç†å¯¹è¡¨ç¤ºã€‚è¿™äº›å€¼æ˜¯é«˜æ›¿ä»£å€¼â€˜U+D83Dâ€™(åè¿›åˆ¶å€¼â€˜55357â€™)å’Œä½æ›¿ä»£å€¼â€˜U+DC36â€™(åè¿›åˆ¶å€¼â€˜56374â€™)ã€‚ Unicodeæ ‡é‡è¡¨ç¤ºæ‚¨å¯ä»¥é€šè¿‡è¿­ä»£å…¶unicodeScalarså±æ€§æ¥è®¿é—®Stringå€¼çš„Unicodeæ ‡é‡è¡¨ç¤ºå½¢å¼ã€‚æ­¤å±æ€§ç±»å‹ä¸ºUnicodeScalarViewï¼Œè¿™æ˜¯UnicodeScalarç±»å‹çš„å€¼é›†åˆã€‚ æ¯ä¸ªUnicodeScalaréƒ½æœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œè¿”å›æ ‡é‡çš„21ä½å€¼ï¼Œåœ¨UInt32å€¼ä¸­è¡¨ç¤ºï¼š 12345for scalar in dogString.unicodeScalars &#123; print(&quot;\\(scalar.value) &quot;, terminator: &quot;&quot;)&#125;print(&quot;&quot;)// Prints &quot;68 111 103 8252 128054 &quot; å‰ä¸‰ä¸ªUnicodeScalarå€¼ï¼ˆ68ã€111ã€103ï¼‰çš„valueå±æ€§å†æ¬¡è¡¨ç¤ºå­—ç¬¦Dã€oå’Œgã€‚ ç¬¬å››ä¸ªcodeUnitå€¼ï¼ˆ8252ï¼‰å†æ¬¡ç­‰ä»·äºåå…­è¿›åˆ¶å€¼203Cï¼Œè¯¥å€¼è¡¨ç¤ºDOUBLEEXCLAMATIONå­—ç¬¦çš„Unicodeæ ‡é‡U+203Cã€‚ The value property of the fifth and final UnicodeScalar, 128054, is a decimal equivalent of the hexadecimal value 1F436, which represents the Unicode scalar U+1F436 for the DOG FACEcharacter. ä½œä¸ºæŸ¥è¯¢å…¶valueå±æ€§çš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ¯ä¸ªUnicodeScalarå€¼ä¹Ÿå¯ä»¥ç”¨äºæ„å»ºæ–°çš„Stringå€¼ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²æ’å€¼ï¼š 12345678for scalar in dogString.unicodeScalars &#123; print(&quot;\\(scalar) &quot;)&#125;// D// o// g// â€¼// ğŸ¶","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ å±æ€§","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-å±æ€§","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-å±æ€§/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%B1%9E%E6%80%A7/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Properties.html å±æ€§å°†å€¼ä¸ç‰¹å®šç±»ã€ç»“æ„æˆ–æšä¸¾ç›¸å…³è”ã€‚å­˜å‚¨å±æ€§å°†å¸¸é‡å’Œå˜é‡å€¼å­˜å‚¨ä¸ºå®ä¾‹çš„ä¸€éƒ¨åˆ†ï¼Œè€Œè®¡ç®—å±æ€§è®¡ç®—ï¼ˆè€Œä¸æ˜¯å­˜å‚¨ï¼‰å€¼ã€‚è®¡ç®—å±æ€§ç”±ç±»ã€ç»“æ„å’Œæšä¸¾æä¾›ã€‚å­˜å‚¨å±æ€§ä»…ç”±ç±»å’Œç»“æ„æä¾›ã€‚ å­˜å‚¨å’Œè®¡ç®—å±æ€§é€šå¸¸ä¸ç‰¹å®šç±»å‹çš„å®ä¾‹ç›¸å…³è”ã€‚ç„¶è€Œï¼Œå±æ€§ä¹Ÿå¯ä»¥ä¸ç±»å‹æœ¬èº«ç›¸å…³è”ã€‚è¿™äº›å±æ€§è¢«ç§°ä¸ºç±»å‹å±æ€§ã€‚ æ­¤å¤–ï¼Œæ‚¨å¯ä»¥å®šä¹‰å±æ€§è§‚å¯Ÿå™¨æ¥ç›‘æ§å±æ€§å€¼çš„å˜åŒ–ï¼Œæ‚¨å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ“ä½œæ¥å“åº”ã€‚å±æ€§è§‚å¯Ÿè€…å¯ä»¥æ·»åŠ åˆ°æ‚¨è‡ªå·±å®šä¹‰çš„å­˜å‚¨å±æ€§ä¸­ï¼Œä¹Ÿå¯ä»¥æ·»åŠ åˆ°å­ç±»ä»å…¶è¶…ç±»ç»§æ‰¿çš„å±æ€§ä¸­ã€‚ æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å±æ€§åŒ…è£…å™¨åœ¨å¤šä¸ªå±æ€§çš„è·å–å™¨å’Œè®¾ç½®å™¨ä¸­é‡ç”¨ä»£ç ã€‚ å­˜å‚¨çš„å±æ€§åœ¨æœ€ç®€å•çš„å½¢å¼ä¸­ï¼Œå­˜å‚¨å±æ€§æ˜¯ä½œä¸ºç‰¹å®šç±»æˆ–ç»“æ„å®ä¾‹çš„ä¸€éƒ¨åˆ†å­˜å‚¨çš„å¸¸é‡æˆ–å˜é‡ã€‚å­˜å‚¨å±æ€§å¯ä»¥æ˜¯å˜é‡å­˜å‚¨å±æ€§ï¼ˆç”±varå…³é”®å­—å¼•å…¥ï¼‰æˆ–å¸¸é‡å­˜å‚¨å±æ€§ï¼ˆç”±letå…³é”®å­—å¼•å…¥ï¼‰ã€‚ æ‚¨å¯ä»¥ä¸ºå­˜å‚¨å±æ€§æä¾›é»˜è®¤å€¼ï¼Œä½œä¸ºå…¶å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚é»˜è®¤å±æ€§å€¼ä¸­æ‰€è¿°ã€‚æ‚¨è¿˜å¯ä»¥åœ¨åˆå§‹åŒ–æœŸé—´è®¾ç½®å’Œä¿®æ”¹å­˜å‚¨å±æ€§çš„åˆå§‹å€¼ã€‚å³ä½¿æ˜¯å¸¸é‡å­˜å‚¨å±æ€§ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¦‚åˆå§‹åŒ–æœŸé—´åˆ†é…å¸¸é‡å±æ€§ä¸­æ‰€è¿°ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºFixedLengthRangeçš„ç»“æ„ï¼Œè¯¥ç»“æ„æè¿°äº†åˆ›å»ºåæ— æ³•æ›´æ”¹èŒƒå›´é•¿åº¦çš„æ•´æ•°èŒƒå›´ï¼š struct FixedLengthRange { â€‹ var firstValue: Int â€‹ let length: Int } var rangeOfThreeItems &#x3D; FixedLengthRange(firstValue: 0, length: 3) &#x2F;&#x2F; the range represents integer values 0, 1, and 2 rangeOfThreeItems.firstValue &#x3D; 6 &#x2F;&#x2F; the range now represents integer values 6, 7, and 8 FixedLengthRangeçš„å®ä¾‹æœ‰ä¸€ä¸ªåä¸ºfirstValueå˜é‡å­˜å‚¨å±æ€§å’Œä¸€ä¸ªåä¸ºlengthçš„å¸¸é‡å­˜å‚¨å±æ€§ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œlengthåœ¨åˆ›å»ºæ–°èŒƒå›´æ—¶åˆå§‹åŒ–ï¼Œæ­¤åæ— æ³•æ›´æ”¹ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¸¸é‡å±æ€§ã€‚ æ’å®šç»“æ„å®ä¾‹çš„å­˜å‚¨å±æ€§å¦‚æœæ‚¨åˆ›å»ºç»“æ„å®ä¾‹å¹¶å°†è¯¥å®ä¾‹åˆ†é…ç»™å¸¸é‡ï¼Œåˆ™æ— æ³•ä¿®æ”¹å®ä¾‹çš„å±æ€§ï¼Œå³ä½¿å®ƒä»¬è¢«å£°æ˜ä¸ºå˜é‡å±æ€§ï¼š let rangeOfFourItems &#x3D; FixedLengthRange(firstValue: 0, length: 4) &#x2F;&#x2F; this range represents integer values 0, 1, 2, and 3 rangeOfFourItems.firstValue &#x3D; 6 &#x2F;&#x2F; this will report an error, even though firstValue is a variable property ç”±äºrangeOfFourItemsè¢«å£°æ˜ä¸ºå¸¸é‡ï¼ˆä½¿ç”¨letå…³é”®å­—ï¼‰ï¼Œå› æ­¤æ— æ³•æ›´æ”¹å…¶firstValueå±æ€§ï¼Œå³ä½¿firstValueæ˜¯ä¸€ä¸ªå˜é‡å±æ€§ã€‚ è¿™ç§è¡Œä¸ºæ˜¯ç”±äºç»“æ„æ˜¯å€¼ç±»å‹ã€‚å½“å€¼ç±»å‹çš„å®ä¾‹è¢«æ ‡è®°ä¸ºå¸¸é‡æ—¶ï¼Œå…¶æ‰€æœ‰å±æ€§ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ ç±»çš„æƒ…å†µå¹¶éå¦‚æ­¤ï¼Œç±»æ˜¯å‚è€ƒç±»å‹ã€‚å¦‚æœæ‚¨å°†å¼•ç”¨ç±»å‹çš„å®ä¾‹åˆ†é…ç»™å¸¸é‡ï¼Œæ‚¨ä»ç„¶å¯ä»¥æ›´æ”¹è¯¥å®ä¾‹çš„å˜é‡å±æ€§ã€‚ æ‡’æƒ°å­˜å‚¨çš„æˆ¿äº§æƒ°æ€§å­˜å‚¨å±æ€§æ˜¯ç›´åˆ°é¦–æ¬¡ä½¿ç”¨æ—¶æ‰è®¡ç®—åˆå§‹å€¼çš„å±æ€§ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨å£°æ˜ä¹‹å‰å†™å…¥lazyä¿®é¥°ç¬¦æ¥æŒ‡ç¤ºæƒ°æ€§å­˜å‚¨å±æ€§ã€‚ æ³¨æ„ æ‚¨å¿…é¡»å§‹ç»ˆå°†æƒ°æ€§å±æ€§å£°æ˜ä¸ºå˜é‡ï¼ˆä½¿ç”¨varå…³é”®å­—ï¼‰ï¼Œå› ä¸ºåœ¨å®ä¾‹åˆå§‹åŒ–å®Œæˆä¹‹å‰ï¼Œå¯èƒ½æ— æ³•æ£€ç´¢å…¶åˆå§‹å€¼ã€‚åœ¨åˆå§‹åŒ–å®Œæˆä¹‹å‰ï¼Œå¸¸é‡å±æ€§å¿…é¡»å§‹ç»ˆå…·æœ‰å€¼ï¼Œå› æ­¤ä¸èƒ½å£°æ˜ä¸ºæ‡’æƒ°ã€‚ å½“å±æ€§çš„åˆå§‹å€¼ä¾èµ–äºå¤–éƒ¨å› ç´ æ—¶ï¼Œæ‡’æƒ°å±æ€§éå¸¸æœ‰ç”¨ï¼Œè¿™äº›å› ç´ çš„å€¼ç›´åˆ°å®ä¾‹åˆå§‹åŒ–å®Œæˆåæ‰çŸ¥é“ã€‚å½“å±æ€§çš„åˆå§‹å€¼éœ€è¦å¤æ‚æˆ–è®¡ç®—æ˜‚è´µçš„è®¾ç½®æ—¶ï¼Œæ‡’æƒ°å±æ€§ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œé™¤éæˆ–ç›´åˆ°éœ€è¦ï¼Œå¦åˆ™ä¸åº”æ‰§è¡Œã€‚ ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨æƒ°æ€§å­˜å‚¨å±æ€§æ¥é¿å…ä¸å¿…è¦çš„å¤æ‚ç±»åˆå§‹åŒ–ã€‚æ­¤ç¤ºä¾‹å®šä¹‰äº†ä¸¤ä¸ªåä¸ºDataImporterå’ŒDataManagerçš„ç±»ï¼Œè¿™ä¸¤ä¸ªç±»éƒ½æ²¡æœ‰å®Œæ•´æ˜¾ç¤ºï¼š class DataImporter { â€‹ &#x2F;* â€‹ DataImporter is a class to import data from an external file. â€‹ The class is assumed to take a nontrivial amount of time to initialize. â€‹ *&#x2F; â€‹ var filename &#x3D; â€œdata.txtâ€ â€‹ &#x2F;&#x2F; the DataImporter class would provide data importing functionality here } class DataManager { â€‹ lazy var importer &#x3D; DataImporter() â€‹ var data: [String] &#x3D; [] â€‹ &#x2F;&#x2F; the DataManager class would provide data management functionality here } let manager &#x3D; DataManager() manager.data.append(â€œSome dataâ€) manager.data.append(â€œSome more dataâ€) &#x2F;&#x2F; the DataImporter instance for the importer property hasnâ€™t yet been created DataManagerç±»æœ‰ä¸€ä¸ªåä¸ºdataçš„å­˜å‚¨å±æ€§ï¼Œè¯¥å±æ€§ä½¿ç”¨ä¸€ä¸ªæ–°çš„ç©ºStringå€¼æ•°ç»„åˆå§‹åŒ–ã€‚è™½ç„¶æ²¡æœ‰æ˜¾ç¤ºå…¶å…¶ä½™åŠŸèƒ½ï¼Œä½†æ­¤DataManagerç±»çš„ç›®çš„æ˜¯ç®¡ç†å’Œæä¾›å¯¹Stringæ•°æ®æ•°ç»„çš„è®¿é—®ã€‚ DataManagerç±»çš„éƒ¨åˆ†åŠŸèƒ½æ˜¯èƒ½å¤Ÿä»æ–‡ä»¶å¯¼å…¥æ•°æ®ã€‚æ­¤åŠŸèƒ½ç”±DataImporterç±»æä¾›ï¼Œè¯¥ç±»å‡è®¾åˆå§‹åŒ–éœ€è¦éå¸¸å¹³å‡¡çš„æ—¶é—´ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºDataImporterå®ä¾‹åœ¨åˆå§‹åŒ–DataImporterå®ä¾‹æ—¶éœ€è¦æ‰“å¼€æ–‡ä»¶å¹¶å°†å…¶å†…å®¹è¯»å–åˆ°å†…å­˜ä¸­ã€‚ ç”±äºDataManagerå®ä¾‹å¯ä»¥åœ¨ä¸ä»æ–‡ä»¶ä¸­å¯¼å…¥æ•°æ®çš„æƒ…å†µä¸‹ç®¡ç†å…¶æ•°æ®ï¼Œå› æ­¤åœ¨åˆ›å»ºDataManageræœ¬èº«æ—¶ï¼ŒDataManagerä¸ä¼šåˆ›å»ºæ–°çš„DataImporterå®ä¾‹ã€‚ç›¸åï¼Œå½“DataImporterå®ä¾‹é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œåˆ›å»ºå®ƒæ›´æœ‰æ„ä¹‰ã€‚ ç”±äºå®ƒæ ‡æœ‰lazyä¿®é¥°ç¬¦ï¼Œå› æ­¤åªæœ‰åœ¨é¦–æ¬¡è®¿é—®importerå±æ€§æ—¶æ‰ä¼šåˆ›å»ºimporterå±æ€§çš„DataImporterå®ä¾‹ï¼Œä¾‹å¦‚æŸ¥è¯¢å…¶filenameå±æ€§æ—¶ï¼š print(manager.importer.filename) &#x2F;&#x2F; the DataImporter instance for the importer property has now been created &#x2F;&#x2F; Prints â€œdata.txtâ€ æ³¨æ„ å¦‚æœæ ‡è®°æœ‰lazyä¿®é¥°ç¬¦çš„å±æ€§åŒæ—¶ç”±å¤šä¸ªçº¿ç¨‹è®¿é—®ï¼Œå¹¶ä¸”è¯¥å±æ€§å°šæœªåˆå§‹åŒ–ï¼Œåˆ™ä¸èƒ½ä¿è¯è¯¥å±æ€§åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚ å­˜å‚¨å±æ€§å’Œå®ä¾‹å˜é‡å¦‚æœæ‚¨æœ‰Objective-Cçš„ç»éªŒï¼Œæ‚¨å¯èƒ½çŸ¥é“å®ƒæä¾›äº†ä¸¤ç§å­˜å‚¨å€¼å’Œå¼•ç”¨ä½œä¸ºç±»å®ä¾‹çš„ä¸€éƒ¨åˆ†çš„æ–¹æ³•ã€‚é™¤äº†å±æ€§å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨å®ä¾‹å˜é‡ä½œä¸ºå­˜å‚¨åœ¨å±æ€§ä¸­çš„å€¼çš„å¤‡ä»½å­˜å‚¨ã€‚ Swiftå°†è¿™äº›æ¦‚å¿µç»Ÿä¸€ä¸ºå•ä¸ªå±æ€§å£°æ˜ã€‚Swiftå±æ€§æ²¡æœ‰ç›¸åº”çš„å®ä¾‹å˜é‡ï¼Œå¹¶ä¸”ä¸ä¼šç›´æ¥è®¿é—®å±æ€§çš„å¤‡ä»½å­˜å‚¨ã€‚è¿™ç§æ–¹æ³•é¿å…äº†åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­å¦‚ä½•è®¿é—®è¯¥å€¼çš„æ··æ·†ï¼Œå¹¶å°†å±æ€§çš„å£°æ˜ç®€åŒ–ä¸ºå•ä¸ªç¡®å®šæ€§è¯­å¥ã€‚æœ‰å…³å±æ€§çš„æ‰€æœ‰ä¿¡æ¯â€”â€”åŒ…æ‹¬å…¶åç§°ã€ç±»å‹å’Œå†…å­˜ç®¡ç†ç‰¹å¾â€”â€”éƒ½æ˜¯åœ¨å•ä¸ªä½ç½®å®šä¹‰çš„ï¼Œä½œä¸ºç±»å‹å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚ è®¡ç®—å±æ€§é™¤äº†å­˜å‚¨å±æ€§å¤–ï¼Œç±»ã€ç»“æ„å’Œæšä¸¾è¿˜å¯ä»¥å®šä¹‰è®¡ç®—å±æ€§ï¼Œè¿™äº›å±æ€§å®é™…ä¸Šä¸ä¼šå­˜å‚¨å€¼ã€‚ç›¸åï¼Œå®ƒä»¬æä¾›äº†ä¸€ä¸ªgetterå’Œä¸€ä¸ªå¯é€‰çš„setteræ¥é—´æ¥æ£€ç´¢å’Œè®¾ç½®å…¶ä»–å±æ€§å’Œå€¼ã€‚ struct Point { â€‹ var x &#x3D; 0.0, y &#x3D; 0.0 } struct Size { â€‹ var width &#x3D; 0.0, height &#x3D; 0.0 } struct Rect { â€‹ var origin &#x3D; Point() â€‹ var size &#x3D; Size() â€‹ var center: Point { â€‹ get { â€‹ let centerX &#x3D; origin.x + (size.width &#x2F; 2) â€‹ let centerY &#x3D; origin.y + (size.height &#x2F; 2) â€‹ return Point(x: centerX, y: centerY) â€‹ } â€‹ set(newCenter) { â€‹ origin.x &#x3D; newCenter.x - (size.width &#x2F; 2) â€‹ origin.y &#x3D; newCenter.y - (size.height &#x2F; 2) â€‹ } â€‹ } } var square &#x3D; Rect(origin: Point(x: 0.0, y: 0.0), â€‹ size: Size(width: 10.0, height: 10.0)) let initialSquareCenter &#x3D; square.center &#x2F;&#x2F; initialSquareCenter is at (5.0, 5.0) square.center &#x3D; Point(x: 15.0, y: 15.0) print(â€œsquare.origin is now at ((square.origin.x), (square.origin.y))â€) &#x2F;&#x2F; Prints â€œsquare.origin is now at (10.0, 10.0)â€ æ­¤ç¤ºä¾‹å®šä¹‰äº†ç”¨äºå¤„ç†å‡ ä½•å½¢çŠ¶çš„ä¸‰ç§ç»“æ„ï¼š Pointå°è£…ç‚¹çš„xåæ ‡å’Œyåæ ‡ã€‚ Sizeå°è£…widthå’Œheightã€‚ RectæŒ‰åŸç‚¹å’Œå¤§å°å®šä¹‰çŸ©å½¢ã€‚ Rectç»“æ„è¿˜æä¾›äº†ä¸€ä¸ªç§°ä¸ºcenterè®¡ç®—å±æ€§ã€‚Rectçš„å½“å‰ä¸­å¿ƒä½ç½®å§‹ç»ˆå¯ä»¥æ ¹æ®å…¶originå’Œsizeç¡®å®šï¼Œå› æ­¤æ‚¨ä¸éœ€è¦å°†ä¸­å¿ƒç‚¹å­˜å‚¨ä¸ºæ˜¾å¼Pointå€¼ã€‚ç›¸åï¼ŒRectä¸ºç§°ä¸ºcenterçš„è®¡ç®—å˜é‡å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰è·å–å™¨å’Œsetterï¼Œä½¿æ‚¨èƒ½å¤Ÿåƒå¤„ç†çŸ©å½¢centerä¸€æ ·ä½¿ç”¨å®ƒï¼Œå°±åƒå®ƒæ˜¯çœŸæ­£çš„å­˜å‚¨å±æ€§ä¸€æ ·ã€‚ ä¸Šé¢çš„ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªåä¸ºsquareçš„æ–°Rectå˜é‡ã€‚squareå˜é‡åˆå§‹åŒ–ä¸º(0,0)å®½åº¦å’Œé«˜åº¦ä¸º10ã€‚è¿™ä¸ªæ­£æ–¹å½¢ç”±ä¸‹å›¾ä¸­çš„æµ…ç»¿è‰²æ­£æ–¹å½¢è¡¨ç¤ºã€‚ ç„¶åé€šè¿‡ç‚¹è¯­æ³•ï¼ˆsquare.centerï¼‰è®¿é—®squareå˜é‡centerå±æ€§ï¼Œä»è€Œè°ƒç”¨centerè·å–å™¨æ¥æ£€ç´¢å½“å‰å±æ€§å€¼ã€‚å¾—åˆ°è€…å®é™…ä¸Šè®¡ç®—å¹¶è¿”å›ä¸€ä¸ªæ–°ç‚¹æ¥è¡¨ç¤ºæ­£æ–¹å½¢çš„ä¸­å¿ƒï¼Œè€Œä¸æ˜¯è¿”å›ç°æœ‰å€¼ã€‚å¦‚ä¸Šæ‰€ç¤ºï¼Œè·å–å™¨æ­£ç¡®è¿”å›ä¸­å¿ƒç‚¹(5,5) ç„¶åå°†centerå±æ€§è®¾ç½®ä¸º(15,15)çš„æ–°å€¼ï¼Œå°†æ­£æ–¹å½¢å‘ä¸Šå’Œå‘å³ç§»åŠ¨ï¼Œåˆ°ä¸‹å›¾ä¸­æ·±ç»¿è‰²æ­£æ–¹å½¢æ˜¾ç¤ºçš„æ–°ä½ç½®ã€‚è®¾ç½®centerå±æ€§è°ƒç”¨centerè®¾ç½®å™¨ï¼Œè¯¥è®¾ç½®å™¨ä¿®æ”¹å­˜å‚¨originå±æ€§çš„xå’Œyå€¼ï¼Œå¹¶å°†æ­£æ–¹å½¢ç§»åŠ¨åˆ°å…¶æ–°ä½ç½®ã€‚ é€Ÿè®°è·å–å£°æ˜å¦‚æœå¾—åˆ°è€…çš„æ•´ä¸ªä¸»ä½“æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œåˆ™å¾—åˆ°è€…ä¼šéšå¼è¿”å›è¯¥è¡¨è¾¾å¼ã€‚ä»¥ä¸‹æ˜¯åˆ©ç”¨æ­¤é€Ÿè®°ç¬¦å·å’Œè®¾ç½®è€…é€Ÿè®°ç¬¦å·çš„Rectç»“æ„çš„å¦ä¸€ä¸ªç‰ˆæœ¬ï¼š struct CompactRect { â€‹ var origin &#x3D; Point() â€‹ var size &#x3D; Size() â€‹ var center: Point { â€‹ get { â€‹ Point(x: origin.x + (size.width &#x2F; 2), â€‹ y: origin.y + (size.height &#x2F; 2)) â€‹ } â€‹ set { â€‹ origin.x &#x3D; newValue.x - (size.width &#x2F; 2) â€‹ origin.y &#x3D; newValue.y - (size.height &#x2F; 2) â€‹ } â€‹ } } çœç•¥getterçš„returnéµå¾ªä¸çœç•¥å‡½æ•°returnç›¸åŒçš„è§„åˆ™ï¼Œå¦‚ã€Šéšå¼è¿”å›å‡½æ•°ã€‹ä¸­æ‰€è¿°ã€‚ åªè¯»è®¡ç®—å±æ€§å…·æœ‰è·å–å™¨ä½†æ²¡æœ‰è®¾ç½®å™¨çš„è®¡ç®—å±æ€§ç§°ä¸ºåªè¯»è®¡ç®—å±æ€§ã€‚åªè¯»è®¡ç®—å±æ€§æ€»æ˜¯è¿”å›ä¸€ä¸ªå€¼ï¼Œå¯ä»¥é€šè¿‡ç‚¹è¯­æ³•è®¿é—®ï¼Œä½†ä¸èƒ½è®¾ç½®ä¸ºå…¶ä»–å€¼ã€‚ æ³¨æ„ æ‚¨å¿…é¡»ä½¿ç”¨varå…³é”®å­—å°†è®¡ç®—å±æ€§ï¼ˆåŒ…æ‹¬åªè¯»è®¡ç®—å±æ€§ï¼‰å£°æ˜ä¸ºå˜é‡å±æ€§ï¼Œå› ä¸ºå®ƒä»¬çš„å€¼ä¸æ˜¯å›ºå®šçš„ã€‚letå…³é”®å­—ä»…ç”¨äºå¸¸é‡å±æ€§ï¼Œä»¥æŒ‡ç¤ºä¸€æ—¦å°†å…¶è®¾ç½®ä¸ºå®ä¾‹åˆå§‹åŒ–çš„ä¸€éƒ¨åˆ†ï¼Œå…¶å€¼å°±æ— æ³•æ›´æ”¹ã€‚ æ‚¨å¯ä»¥é€šè¿‡åˆ é™¤getå…³é”®å­—åŠå…¶å¤§æ‹¬å·æ¥ç®€åŒ–åªè¯»è®¡ç®—å±æ€§çš„å£°æ˜ï¼š struct Cuboid { â€‹ var width &#x3D; 0.0, height &#x3D; 0.0, depth &#x3D; 0.0 â€‹ var volume: Double { â€‹ return width * height * depth â€‹ } } let fourByFiveByTwo &#x3D; Cuboid(width: 4.0, height: 5.0, depth: 2.0) print(â€œthe volume of fourByFiveByTwo is (fourByFiveByTwo.volume)â€) &#x2F;&#x2F; Prints â€œthe volume of fourByFiveByTwo is 40.0â€ æ­¤ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºCuboidçš„æ–°ç»“æ„ï¼Œå®ƒä»£è¡¨ä¸€ä¸ªå…·æœ‰widthã€heightå’Œdepthå±æ€§çš„3DçŸ©å½¢æ¡†ã€‚è¯¥ç»“æ„è¿˜æœ‰ä¸€ä¸ªåä¸ºvolumeçš„åªè¯»è®¡ç®—å±æ€§ï¼Œè¯¥å±æ€§è®¡ç®—å¹¶è¿”å›é•¿æ–¹ä½“çš„å½“å‰ä½“ç§¯ã€‚volumeå¯è®¾ç½®æ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºå¯¹äºç‰¹å®švolumeå€¼åº”è¯¥ä½¿ç”¨å“ªäº›widthã€heightå’Œdepthå€¼æ˜¯æ¨¡æ£±ä¸¤å¯çš„ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå¯¹äºCuboidï¼Œæä¾›åªè¯»è®¡ç®—å±æ€§ä»¥ä½¿å¤–éƒ¨ç”¨æˆ·èƒ½å¤Ÿå‘ç°å…¶å½“å‰çš„è®¡ç®—å·æ˜¯æœ‰ç”¨çš„ã€‚ è´¢äº§è§‚å¯Ÿå‘˜è´¢äº§è§‚å¯Ÿè€…è§‚å¯Ÿå¹¶å›åº”è´¢äº§ä»·å€¼çš„å˜åŒ–ã€‚æ¯æ¬¡è®¾ç½®å±æ€§å€¼æ—¶éƒ½ä¼šè°ƒç”¨å±æ€§è§‚å¯Ÿè€…ï¼Œå³ä½¿æ–°å€¼ä¸å±æ€§çš„å½“å‰å€¼ç›¸åŒã€‚ æ‚¨å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æ·»åŠ å±æ€§è§‚å¯Ÿè€…ï¼š æ‚¨å®šä¹‰çš„å­˜å‚¨å±æ€§ æ‚¨ç»§æ‰¿çš„å­˜å‚¨å±æ€§ æ‚¨ç»§æ‰¿çš„è®¡ç®—å±æ€§ å¯¹äºç»§æ‰¿çš„å±æ€§ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨å­ç±»ä¸­é‡å†™è¯¥å±æ€§æ¥æ·»åŠ å±æ€§è§‚å¯Ÿè€…ã€‚å¯¹äºæ‚¨å®šä¹‰çš„è®¡ç®—å±æ€§ï¼Œè¯·ä½¿ç”¨å±æ€§çš„è®¾ç½®å™¨æ¥è§‚å¯Ÿå’Œå“åº”å€¼æ›´æ”¹ï¼Œè€Œä¸æ˜¯å°è¯•åˆ›å»ºè§‚å¯Ÿè€…ã€‚é‡å†™å±æ€§åœ¨é‡å†™ä¸­æè¿°ã€‚ æ‚¨å¯ä»¥é€‰æ‹©åœ¨å±æ€§ä¸Šå®šä¹‰ä»¥ä¸‹ä¸€ä¸ªæˆ–å¤šä¸ªè§‚å¯Ÿè€…ï¼š willSetåœ¨å­˜å‚¨å€¼ä¹‹å‰è°ƒç”¨ã€‚ didSetåœ¨å­˜å‚¨æ–°å€¼åç«‹å³è°ƒç”¨ã€‚ If you implement a willSet observer, itâ€™s passed the new property value as a constant parameter. You can specify a name for this parameter as part of your willSetimplementation. If you donâ€™t write the parameter name and parentheses within your implementation, the parameter is made available with a default parameter name of newValue. Similarly, if you implement a didSet observer, itâ€™s passed a constant parameter containing the old property value. You can name the parameter or use the default parameter name of oldValue. If you assign a value to a property within its own didSet observer, the new value that you assign replaces the one that was just set. æ³¨æ„ åœ¨è°ƒç”¨è¶…ç±»åˆå§‹åŒ–å™¨åï¼Œå½“åœ¨å­ç±»åˆå§‹åŒ–å™¨ä¸­è®¾ç½®å±æ€§æ—¶ï¼Œè°ƒç”¨è¶…ç±»å±æ€§çš„willSetå’ŒdidSetè§‚å¯Ÿå™¨ã€‚åœ¨è°ƒç”¨è¶…ç±»åˆå§‹åŒ–å™¨ä¹‹å‰ï¼Œå½“ç±»è®¾ç½®è‡ªå·±çš„å±æ€§æ—¶ï¼Œä¸ä¼šè°ƒç”¨å®ƒä»¬ã€‚ æœ‰å…³åˆå§‹åŒ–å™¨å§”æ‰˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å€¼ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜å’Œç±»ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜ã€‚ ä»¥ä¸‹æ˜¯willSetå’ŒdidSetæ‰§è¡Œçš„å®ä¾‹ã€‚ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºStepCounterçš„æ–°ç±»ï¼Œè¯¥ç±»è·Ÿè¸ªä¸€ä¸ªäººåœ¨è¡Œèµ°æ—¶é‡‡å–çš„æ€»æ­¥æ•°ã€‚è¯¥è¯¾ç¨‹å¯ä»¥ä¸è®¡æ­¥å™¨æˆ–å…¶ä»–æ­¥æ•°è®¡æ•°å™¨çš„è¾“å…¥æ•°æ®ä¸€èµ·ä½¿ç”¨ï¼Œä»¥è·Ÿè¸ªä¸€ä¸ªäººåœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­çš„é”»ç‚¼æƒ…å†µã€‚ class StepCounter { â€‹ var totalSteps: Int &#x3D; 0 { â€‹ willSet(newTotalSteps) { â€‹ print(â€œAbout to set totalSteps to (newTotalSteps)â€) â€‹ } â€‹ didSet { â€‹ if totalSteps &gt; oldValue { â€‹ print(â€œAdded (totalSteps - oldValue) stepsâ€) â€‹ } â€‹ } â€‹ } } let stepCounter &#x3D; StepCounter() stepCounter.totalSteps &#x3D; 200 &#x2F;&#x2F; About to set totalSteps to 200 &#x2F;&#x2F; Added 200 steps stepCounter.totalSteps &#x3D; 360 &#x2F;&#x2F; About to set totalSteps to 360 &#x2F;&#x2F; Added 160 steps stepCounter.totalSteps &#x3D; 896 &#x2F;&#x2F; About to set totalSteps to 896 &#x2F;&#x2F; Added 536 steps The StepCounter class declares a totalSteps property of type Int. This is a stored property with willSet and didSet observers. The willSet and didSet observers for totalSteps are called whenever the property is assigned a new value. This is true even if the new value is the same as the current value. This exampleâ€™s willSet observer uses a custom parameter name of newTotalSteps for the upcoming new value. In this example, it simply prints out the value thatâ€™s about to be set. The didSet observer is called after the value of totalSteps is updated. It compares the new value of totalSteps against the old value. If the total number of steps has increased, a message is printed to indicate how many new steps have been taken. The didSet observer doesnâ€™t provide a custom parameter name for the old value, and the default name of oldValue is used instead. æ³¨æ„ å¦‚æœæ‚¨å°†å…·æœ‰è§‚å¯Ÿè€…ä½œä¸ºè¿›å‡ºå‚æ•°çš„å‡½æ•°çš„å±æ€§ä¼ é€’ï¼Œåˆ™å§‹ç»ˆè°ƒç”¨å°†willSetå’ŒdidSetè§‚å¯Ÿè€…ã€‚è¿™æ˜¯å› ä¸ºè¾“å…¥è¾“å‡ºå‚æ•°çš„å¤åˆ¶å†…å­˜æ¨¡å‹ï¼šè¯¥å€¼æ€»æ˜¯å†™å›å‡½æ•°æœ«å°¾çš„å±æ€§ã€‚æœ‰å…³è¿›å‡ºå‚æ•°è¡Œä¸ºçš„è¯¦ç»†è®¨è®ºï¼Œè¯·å‚é˜…è¾“å…¥è¾“å‡ºå‚æ•°ã€‚ ç‰©ä¸šåŒ…è£…çº¸å±æ€§åŒ…è£…å™¨åœ¨ç®¡ç†å±æ€§å­˜å‚¨æ–¹å¼çš„ä»£ç å’Œå®šä¹‰å±æ€§çš„ä»£ç ä¹‹é—´æ·»åŠ äº†ä¸€å±‚åˆ†ç¦»ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„å±æ€§æä¾›çº¿ç¨‹å®‰å…¨æ£€æŸ¥æˆ–å°†å…¶åŸºç¡€æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œåˆ™å¿…é¡»åœ¨æ¯ä¸ªå±æ€§ä¸Šç¼–å†™è¯¥ä»£ç ã€‚å½“æ‚¨ä½¿ç”¨å±æ€§åŒ…è£…å™¨æ—¶ï¼Œæ‚¨åœ¨å®šä¹‰åŒ…è£…å™¨æ—¶ç¼–å†™ä¸€æ¬¡ç®¡ç†ä»£ç ï¼Œç„¶åé€šè¿‡å°†å…¶åº”ç”¨äºå¤šä¸ªå±æ€§æ¥é‡ç”¨è¯¥ç®¡ç†ä»£ç ã€‚ è¦å®šä¹‰å±æ€§åŒ…è£…å™¨ï¼Œè¯·åˆ¶ä½œä¸€ä¸ªå®šä¹‰awrappedValueå±æ€§çš„ç»“æ„ã€æšä¸¾æˆ–ç±»ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼ŒTwelveOrLessç»“æ„ç¡®ä¿å®ƒåŒ…è£…çš„å€¼å§‹ç»ˆåŒ…å«å°äºæˆ–ç­‰äº12çš„æ•°å­—ã€‚å¦‚æœæ‚¨è¦æ±‚å®ƒå­˜å‚¨æ›´å¤§çš„æ•°é‡ï¼Œå®ƒå°†å­˜å‚¨12ä¸ªã€‚ @propertyWrapper struct TwelveOrLess { â€‹ private var number &#x3D; 0 â€‹ var wrappedValue: Int { â€‹ get { return number } â€‹ set { number &#x3D; min(newValue, 12) } â€‹ } } è®¾ç½®å™¨ç¡®ä¿æ–°å€¼å°äºæˆ–ç­‰äº12ï¼Œå¹¶ä¸”è·å–å™¨è¿”å›å­˜å‚¨å€¼ã€‚ æ³¨æ„ ä¸Šé¢ç¤ºä¾‹ä¸­çš„numberå£°æ˜å°†å˜é‡æ ‡è®°ä¸ºprivateï¼Œè¿™ç¡®ä¿numberä»…ç”¨äºTwelveOrLessçš„å®ç°ã€‚å†™åœ¨å…¶ä»–åœ°æ–¹çš„ä»£ç ä½¿ç”¨wrappedValueçš„getterå’Œsetterè®¿é—®å€¼ï¼Œå¹¶ä¸”ä¸èƒ½ç›´æ¥ä½¿ç”¨numberã€‚æœ‰å…³privateä¿¡æ¯ï¼Œè¯·å‚é˜…è®¿é—®æ§åˆ¶ã€‚ æ‚¨å¯ä»¥é€šè¿‡å°†åŒ…è£…å™¨çš„åç§°å†™åœ¨å±æ€§ä¹‹å‰ä½œä¸ºå±æ€§æ¥å°†åŒ…è£…å™¨åº”ç”¨äºå±æ€§ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç»“æ„ï¼Œå®ƒå­˜å‚¨ä¸€ä¸ªçŸ©å½¢ï¼Œè¯¥çŸ©å½¢ä½¿ç”¨TwelveOrLesså±æ€§åŒ…è£…å™¨ï¼Œä»¥ç¡®ä¿å…¶å°ºå¯¸å§‹ç»ˆä¸º12æˆ–æ›´å°‘ï¼š struct SmallRectangle { â€‹ @TwelveOrLess var height: Int â€‹ @TwelveOrLess var width: Int } var rectangle &#x3D; SmallRectangle() print(rectangle.height) &#x2F;&#x2F; Prints â€œ0â€ rectangle.height &#x3D; 10 print(rectangle.height) &#x2F;&#x2F; Prints â€œ10â€ rectangle.height &#x3D; 24 print(rectangle.height) &#x2F;&#x2F; Prints â€œ12â€ The height and width properties get their initial values from the definition of TwelveOrLess, which sets TwelveOrLess.number to zero. The setter in TwelveOrLess treats 10 as a valid value so storing the number 10 in rectangle.height proceeds as written. However, 24 is larger than TwelveOrLess allows, so trying to store 24 end up setting rectangle.height to 12 instead, the largest allowed value. å½“æ‚¨å°†åŒ…è£…å™¨åº”ç”¨äºå±æ€§æ—¶ï¼Œç¼–è¯‘å™¨ä¼šåˆæˆä¸ºåŒ…è£…å™¨æä¾›å­˜å‚¨çš„ä»£ç å’Œé€šè¿‡åŒ…è£…å™¨è®¿é—®è¯¥å±æ€§çš„ä»£ç ã€‚ï¼ˆå±æ€§åŒ…è£…å™¨è´Ÿè´£å­˜å‚¨åŒ…è£…çš„å€¼ï¼Œå› æ­¤æ²¡æœ‰åˆæˆä»£ç ã€‚ï¼‰æ‚¨å¯ä»¥ç¼–å†™ä½¿ç”¨å±æ€§åŒ…è£…å™¨è¡Œä¸ºçš„ä»£ç ï¼Œè€Œæ— éœ€åˆ©ç”¨ç‰¹æ®Šå±æ€§è¯­æ³•ã€‚ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¹‹å‰ä»£ç åˆ—è¡¨ä¸­çš„SmallRectangleç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬æ˜¾å¼å°†å…¶å±æ€§åŒ…è£…åœ¨TwelveOrLessç»“æ„ä¸­ï¼Œè€Œä¸æ˜¯å°†@TwelveOrLesså†™ä¸ºå±æ€§ï¼š struct SmallRectangle { â€‹ private var _height &#x3D; TwelveOrLess() â€‹ private var _width &#x3D; TwelveOrLess() â€‹ var height: Int { â€‹ get { return _height.wrappedValue } â€‹ set { _height.wrappedValue &#x3D; newValue } â€‹ } â€‹ var width: Int { â€‹ get { return _width.wrappedValue } â€‹ set { _width.wrappedValue &#x3D; newValue } â€‹ } } _heightå’Œ_widthå±æ€§å­˜å‚¨å±æ€§åŒ…è£…å™¨TwelveOrLesså®ä¾‹ã€‚heightå’Œwidthçš„è·å–å™¨å’Œè®¾ç½®å™¨å¯¹wrappedValueå±æ€§çš„è®¿é—®ã€‚ ä¸ºåŒ…è£…å±æ€§è®¾ç½®åˆå§‹å€¼ä¸Šé¢ç¤ºä¾‹ä¸­çš„ä»£ç é€šè¿‡åœ¨TwelveOrLessçš„å®šä¹‰ä¸­ç»™å‡ºnumberåˆå§‹å€¼æ¥è®¾ç½®åŒ…è£…å±æ€§çš„åˆå§‹å€¼ã€‚ä½¿ç”¨æ­¤å±æ€§åŒ…è£…å™¨çš„ä»£ç æ— æ³•ä¸ºç”±TwelveOrLessåŒ…è£…çš„å±æ€§æŒ‡å®šä¸åŒçš„åˆå§‹å€¼â€”â€”ä¾‹å¦‚ï¼ŒSmallRectangleçš„å®šä¹‰ä¸èƒ½ç»™å‡ºheightæˆ–widthåˆå§‹å€¼ã€‚ä¸ºäº†æ”¯æŒè®¾ç½®åˆå§‹å€¼æˆ–å…¶ä»–è‡ªå®šä¹‰ï¼Œå±æ€§åŒ…è£…å™¨éœ€è¦æ·»åŠ åˆå§‹åŒ–å™¨ã€‚ä»¥ä¸‹æ˜¯åä¸ºSmallNumberçš„TwelveOrLessæ‰©å±•ç‰ˆæœ¬ï¼Œå®ƒå®šä¹‰äº†è®¾ç½®åŒ…è£…å’Œæœ€å¤§å€¼çš„åˆå§‹åŒ–å™¨ï¼š @propertyWrapper struct SmallNumber { â€‹ private var maximum: Int â€‹ private var number: Int â€‹ var wrappedValue: Int { â€‹ get { return number } â€‹ set { number &#x3D; min(newValue, maximum) } â€‹ } â€‹ init() { â€‹ maximum &#x3D; 12 â€‹ number &#x3D; 0 â€‹ } â€‹ init(wrappedValue: Int) { â€‹ maximum &#x3D; 12 â€‹ number &#x3D; min(wrappedValue, maximum) â€‹ } â€‹ init(wrappedValue: Int, maximum: Int) { â€‹ self.maximum &#x3D; maximum â€‹ number &#x3D; min(wrappedValue, maximum) â€‹ } } SmallNumberçš„å®šä¹‰åŒ…æ‹¬ä¸‰ä¸ªåˆå§‹åŒ–å™¨â€”â€”init()ï¼‰ã€init(wrappedValue:)å’Œinit(wrappedValue:maximum:)â€”â€”ä»¥ä¸‹ç¤ºä¾‹ç”¨äºè®¾ç½®åŒ…è£…å€¼å’Œæœ€å¤§å€¼ã€‚æœ‰å…³åˆå§‹åŒ–å’Œåˆå§‹åŒ–å™¨è¯­æ³•çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…åˆå§‹åŒ–ã€‚ å½“æ‚¨å°†åŒ…è£…å™¨åº”ç”¨äºå±æ€§å¹¶ä¸”æ²¡æœ‰æŒ‡å®šåˆå§‹å€¼æ—¶ï¼ŒSwiftä¼šä½¿ç”¨thinitinit()åˆå§‹åŒ–å™¨æ¥è®¾ç½®åŒ…è£…å™¨ã€‚ä¾‹å¦‚ï¼š struct ZeroRectangle { â€‹ @SmallNumber var height: Int â€‹ @SmallNumber var width: Int } var zeroRectangle &#x3D; ZeroRectangle() print(zeroRectangle.height, zeroRectangle.width) &#x2F;&#x2F; Prints â€œ0 0â€ åŒ…è£¹heightå’Œwidthçš„SmallNumberå®ä¾‹æ˜¯é€šè¿‡è°ƒç”¨SmallNumber()åˆ›å»ºçš„ã€‚è¯¥åˆå§‹åŒ–å™¨å†…éƒ¨çš„ä»£ç ä½¿ç”¨é›¶å’Œ12çš„é»˜è®¤å€¼è®¾ç½®åˆå§‹åŒ…è£…å€¼å’Œåˆå§‹æœ€å¤§å€¼ã€‚å±æ€§åŒ…è£…å™¨ä»ç„¶æä¾›æ‰€æœ‰åˆå§‹å€¼ï¼Œå°±åƒä¹‹å‰åœ¨SmallRectangleä¸­ä½¿ç”¨TwelveOrLessçš„ç¤ºä¾‹ä¸€æ ·ã€‚ä¸è¯¥ç¤ºä¾‹ä¸åŒï¼ŒSmallNumberè¿˜æ”¯æŒç¼–å†™è¿™äº›åˆå§‹å€¼ï¼Œä½œä¸ºå£°æ˜å±æ€§çš„ä¸€éƒ¨åˆ†ã€‚ å½“æ‚¨ä¸ºå±æ€§æŒ‡å®šåˆå§‹å€¼æ—¶ï¼ŒSwiftä½¿ç”¨init(wrappedValue:)åˆå§‹åŒ–å™¨æ¥è®¾ç½®åŒ…è£…å™¨ã€‚ä¾‹å¦‚ï¼š struct UnitRectangle { â€‹ @SmallNumber var height: Int &#x3D; 1 â€‹ @SmallNumber var width: Int &#x3D; 1 } var unitRectangle &#x3D; UnitRectangle() print(unitRectangle.height, unitRectangle.width) &#x2F;&#x2F; Prints â€œ1 1â€ When you write = 1 on a property with a wrapper, thatâ€™s translated into a call to the init(wrappedValue:) initializer. The instances of SmallNumber that wrap height and widthare created by calling SmallNumber(wrappedValue: 1). The initializer uses the wrapped value thatâ€™s specified here, and it uses the default maximum value of 12. å½“æ‚¨åœ¨è‡ªå®šä¹‰å±æ€§åçš„æ‹¬å·ä¸­å†™å…¥å‚æ•°æ—¶ï¼ŒSwiftä½¿ç”¨æ¥å—è¿™äº›å‚æ•°çš„åˆå§‹åŒ–å™¨æ¥è®¾ç½®åŒ…è£…å™¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æä¾›åˆå§‹å€¼å’Œæœ€å¤§å€¼ï¼ŒSwiftå°†ä½¿ç”¨init(wrappedValue:maximum:)åˆå§‹åŒ–å™¨ï¼š struct NarrowRectangle { â€‹ @SmallNumber(wrappedValue: 2, maximum: 5) var height: Int â€‹ @SmallNumber(wrappedValue: 3, maximum: 4) var width: Int } var narrowRectangle &#x3D; NarrowRectangle() print(narrowRectangle.height, narrowRectangle.width) &#x2F;&#x2F; Prints â€œ2 3â€ narrowRectangle.height &#x3D; 100 narrowRectangle.width &#x3D; 100 print(narrowRectangle.height, narrowRectangle.width) &#x2F;&#x2F; Prints â€œ5 4â€ åŒ…è£¹heightçš„SmallNumberå®ä¾‹æ˜¯é€šè¿‡è°ƒç”¨SmallNumber(wrappedValue:2,maximum:5)åˆ›å»ºçš„ï¼ŒåŒ…è£…widthçš„å®ä¾‹æ˜¯é€šè¿‡è°ƒç”¨SmallNumber(wrappedValue:3,maximum:4)åˆ›å»ºçš„ã€‚ é€šè¿‡å°†å‚æ•°åŒ…å«åœ¨å±æ€§åŒ…è£…å™¨ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨åŒ…è£…å™¨ä¸­è®¾ç½®åˆå§‹çŠ¶æ€ï¼Œæˆ–åœ¨åˆ›å»ºåŒ…è£…å™¨æ—¶å°†å…¶ä»–é€‰é¡¹ä¼ é€’ç»™åŒ…è£…å™¨ã€‚æ­¤è¯­æ³•æ˜¯ä½¿ç”¨å±æ€§åŒ…è£…å™¨çš„æœ€é€šç”¨æ–¹å¼ã€‚æ‚¨å¯ä»¥ä¸ºå±æ€§æä¾›æ‰€éœ€çš„ä»»ä½•å‚æ•°ï¼Œå®ƒä»¬å°†ä¼ é€’ç»™åˆå§‹åŒ–å™¨ã€‚ When you include property wrapper arguments, you can also specify an initial value using assignment. Swift treats the assignment like a wrappedValue argument and uses the initializer that accepts the arguments you include. For example: struct MixedRectangle { â€‹ @SmallNumber var height: Int &#x3D; 1 â€‹ @SmallNumber(maximum: 9) var width: Int &#x3D; 2 } var mixedRectangle &#x3D; MixedRectangle() print(mixedRectangle.height) &#x2F;&#x2F; Prints â€œ1â€ mixedRectangle.height &#x3D; 20 print(mixedRectangle.height) &#x2F;&#x2F; Prints â€œ12â€ The instance of SmallNumber that wraps height is created by calling SmallNumber(wrappedValue: 1), which uses the default maximum value of 12. The instance that wraps width is created by calling SmallNumber(wrappedValue: 2, maximum: 9). ä»å±æ€§åŒ…è£…å™¨ä¸­æŠ•å°„å€¼é™¤äº†åŒ…è£…å€¼å¤–ï¼Œå±æ€§åŒ…è£…å™¨è¿˜å¯ä»¥é€šè¿‡å®šä¹‰æŠ•å½±å€¼æ¥å…¬å¼€å…¶ä»–åŠŸèƒ½â€”â€”ä¾‹å¦‚ï¼Œç®¡ç†æ•°æ®åº“è®¿é—®çš„å±æ€§åŒ…è£…å™¨å¯ä»¥åœ¨å…¶æŠ•å½±å€¼ä¸Šå…¬å¼€flushDatabaseConnection()æ–¹æ³•ã€‚é¢„è®¡ä»·å€¼çš„åç§°ä¸åŒ…è£…ä»·å€¼ç›¸åŒï¼Œåªæ˜¯ä»¥ç¾å…ƒç¬¦å·ï¼ˆ$ï¼‰å¼€å¤´ã€‚ç”±äºæ‚¨çš„ä»£ç æ— æ³•å®šä¹‰ä»¥$å¼€å¤´çš„å±æ€§ï¼Œå› æ­¤æŠ•å½±å€¼æ°¸è¿œä¸ä¼šå¹²æ‰°æ‚¨å®šä¹‰çš„å±æ€§ã€‚ åœ¨ä¸Šé¢çš„SmallNumberç¤ºä¾‹ä¸­ï¼Œå¦‚æœæ‚¨å°è¯•å°†å±æ€§è®¾ç½®ä¸ºå¤ªå¤§çš„æ•°å­—ï¼Œå±æ€§åŒ…è£…å™¨å°†åœ¨å­˜å‚¨ä¹‹å‰è°ƒæ•´æ•°å­—ã€‚ä»¥ä¸‹ä»£ç å°†projectedValueå±æ€§æ·»åŠ åˆ°SmallNumberç»“æ„ä¸­ï¼Œä»¥è·Ÿè¸ªå±æ€§åŒ…è£…å™¨åœ¨å­˜å‚¨è¯¥æ–°å€¼ä¹‹å‰æ˜¯å¦è°ƒæ•´äº†è¯¥å±æ€§çš„æ–°å€¼ã€‚ @propertyWrapper struct SmallNumber { â€‹ private var number: Int â€‹ private(set) var projectedValue: Bool â€‹ var wrappedValue: Int { â€‹ get { return number } â€‹ set { â€‹ if newValue &gt; 12 { â€‹ number &#x3D; 12 â€‹ projectedValue &#x3D; true â€‹ } else { â€‹ number &#x3D; newValue â€‹ projectedValue &#x3D; false â€‹ } â€‹ } â€‹ } â€‹ init() { â€‹ self.number &#x3D; 0 â€‹ self.projectedValue &#x3D; false â€‹ } } struct SomeStructure { â€‹ @SmallNumber var someNumber: Int } var someStructure &#x3D; SomeStructure() someStructure.someNumber &#x3D; 4 print(someStructure.$someNumber) &#x2F;&#x2F; Prints â€œfalseâ€ someStructure.someNumber &#x3D; 55 print(someStructure.$someNumber) &#x2F;&#x2F; Prints â€œtrueâ€ ç¼–å†™someStructure.$someNumberè®¿é—®åŒ…è£…å™¨çš„æŠ•å½±å€¼ã€‚å­˜å‚¨ä¸€ä¸ªå°æ•°å­—ï¼ˆå¦‚4ï¼‰åï¼ŒsomeStructure.$someNumberçš„å€¼ä¸ºfalseã€‚ç„¶è€Œï¼Œåœ¨å°è¯•å­˜å‚¨ä¸€ä¸ªå¤ªå¤§çš„æ•°å­—ï¼ˆå¦‚55ï¼‰åï¼Œé¢„æµ‹å€¼true å±æ€§åŒ…è£…å™¨å¯ä»¥è¿”å›ä»»ä½•ç±»å‹çš„å€¼ä½œä¸ºå…¶æŠ•å½±å€¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå±æ€§åŒ…è£…å™¨åªå…¬å¼€ä¸€æ¡ä¿¡æ¯â€”â€”æ— è®ºæ•°å­—æ˜¯å¦è°ƒæ•´â€”â€”å› æ­¤å®ƒå°†å¸ƒå°”å€¼ä½œä¸ºå…¶é¢„æµ‹å€¼ã€‚éœ€è¦å…¬å¼€æ›´å¤šä¿¡æ¯çš„åŒ…è£…å™¨å¯ä»¥è¿”å›å…¶ä»–æ•°æ®ç±»å‹çš„å®ä¾‹ï¼Œä¹Ÿå¯ä»¥è¿”å›selfä»¥å°†åŒ…è£…å™¨çš„å®ä¾‹ä½œä¸ºå…¶æŠ•å½±å€¼å…¬å¼€ã€‚ å½“æ‚¨ä»å±äºè¯¥ç±»å‹çš„ä»£ç ï¼ˆå¦‚å±æ€§è·å–å™¨æˆ–å®ä¾‹æ–¹æ³•ï¼‰è®¿é—®æŠ•å½±å€¼æ—¶ï¼Œæ‚¨å¯ä»¥åœ¨å±æ€§åç§°ä¹‹å‰çœç•¥self.å°±åƒè®¿é—®å…¶ä»–å±æ€§ä¸€æ ·ã€‚ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„ä»£ç å°†åŒ…è£…å™¨å›´ç»•heightå’Œwidthçš„æŠ•å½±å€¼ç§°ä¸º$heightå’Œ$widthï¼š enum Size { â€‹ case small, large } struct SizedRectangle { â€‹ @SmallNumber var height: Int â€‹ @SmallNumber var width: Int â€‹ mutating func resize(to size: Size) -&gt; Bool { â€‹ switch size { â€‹ case .small: â€‹ height &#x3D; 10 â€‹ width &#x3D; 20 â€‹ case .large: â€‹ height &#x3D; 100 â€‹ width &#x3D; 100 â€‹ } â€‹ return $height || $width â€‹ } } ç”±äºå±æ€§åŒ…è£…è¯­æ³•åªæ˜¯å…·æœ‰è·å–å™¨å’Œè®¾ç½®å™¨çš„å±æ€§çš„å¥æ³•ç³–ï¼Œå› æ­¤è®¿é—®heightå’Œwidthçš„è¡Œä¸ºä¸è®¿é—®ä»»ä½•å…¶ä»–å±æ€§çš„è¡Œä¸ºç›¸åŒã€‚ä¾‹å¦‚ï¼Œresize(to:)ä¸­çš„ä»£ç ä½¿ç”¨å…¶å±æ€§åŒ…è£…å™¨è®¿é—®heightå’Œwidthã€‚å¦‚æœæ‚¨è°ƒç”¨resize(to:.large)``.largeçš„å¼€å…³ç›’å°†çŸ©å½¢çš„é«˜åº¦å’Œå®½åº¦è®¾ç½®ä¸º100ã€‚åŒ…è£…å™¨é˜²æ­¢è¿™äº›å±æ€§çš„å€¼å¤§äº12ï¼Œå¹¶å°†æŠ•å½±å€¼è®¾ç½®ä¸ºtrueï¼Œä»¥è®°å½•å®ƒè°ƒæ•´å…¶å€¼çš„äº‹å®ã€‚åœ¨resize(to:)ç»“æŸæ—¶ï¼Œè¿”å›è¯­å¥æ£€æŸ¥$heightå’Œ$widthï¼Œä»¥ç¡®å®šå±æ€§åŒ…è£…å™¨æ˜¯å¦è°ƒæ•´äº†heightæˆ–widthã€‚ å…¨å±€å’Œå±€éƒ¨å˜é‡ä¸Šè¿°è®¡ç®—å’Œè§‚å¯Ÿå±æ€§çš„åŠŸèƒ½ä¹Ÿé€‚ç”¨äºå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚å…¨å±€å˜é‡æ˜¯åœ¨ä»»ä½•å‡½æ•°ã€æ–¹æ³•ã€é—­åŒ…æˆ–ç±»å‹ä¸Šä¸‹æ–‡ä¹‹å¤–å®šä¹‰çš„å˜é‡ã€‚å±€éƒ¨å˜é‡æ˜¯åœ¨å‡½æ•°ã€æ–¹æ³•æˆ–é—­åŒ…ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„å˜é‡ã€‚ æ‚¨åœ¨å‰å‡ ç« ä¸­é‡åˆ°çš„å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡éƒ½å·²å­˜å‚¨ã€‚å­˜å‚¨çš„å˜é‡ï¼Œå¦‚å­˜å‚¨çš„å±æ€§ï¼Œä¸ºç‰¹å®šç±»å‹çš„å€¼æä¾›å­˜å‚¨ï¼Œå¹¶å…è®¸è®¾ç½®å’Œæ£€ç´¢è¯¥å€¼ã€‚ ä½†æ˜¯ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨å…¨å±€æˆ–å±€åŸŸèŒƒå›´å†…å®šä¹‰è®¡ç®—å˜é‡å¹¶ä¸ºå­˜å‚¨å˜é‡å®šä¹‰è§‚å¯Ÿè€…ã€‚è®¡ç®—å˜é‡è®¡ç®—å…¶å€¼ï¼Œè€Œä¸æ˜¯å­˜å‚¨å®ƒï¼Œå¹¶ä¸”å®ƒä»¬çš„å†™å…¥æ–¹å¼ä¸è®¡ç®—å±æ€§ç›¸åŒã€‚ æ³¨æ„ å…¨å±€å¸¸é‡å’Œå˜é‡æ€»æ˜¯ä»¥ä¸æ‡’æƒ°å­˜å‚¨å±æ€§ç›¸ä¼¼çš„æ–¹å¼è®¡ç®—ã€‚ä¸æƒ°æ€§å­˜å‚¨å±æ€§ä¸åŒï¼Œå…¨å±€å¸¸é‡å’Œå˜é‡ä¸éœ€è¦ç”¨lazyä¿®é¥°ç¬¦æ ‡è®°ã€‚ å±€éƒ¨å¸¸æ•°å’Œå˜é‡ä»ä¸æ‡’æƒ°åœ°è®¡ç®—ã€‚ æ‚¨å¯ä»¥å°†å±æ€§åŒ…è£…å™¨åº”ç”¨äºæœ¬åœ°å­˜å‚¨å˜é‡ï¼Œä½†ä¸èƒ½åº”ç”¨äºå…¨å±€å˜é‡æˆ–è®¡ç®—å˜é‡ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼ŒmyNumberä½¿ç”¨SmallNumberä½œä¸ºå±æ€§åŒ…è£…å™¨ã€‚ func someFunction() { â€‹ @SmallNumber var myNumber: Int &#x3D; 0 â€‹ myNumber &#x3D; 10 â€‹ &#x2F;&#x2F; now myNumber is 10 â€‹ myNumber &#x3D; 24 â€‹ &#x2F;&#x2F; now myNumber is 12 } åƒå°†SmallNumberåº”ç”¨äºå±æ€§ä¸€æ ·ï¼Œå°†myNumberçš„å€¼è®¾ç½®ä¸º10æ˜¯æœ‰æ•ˆçš„ã€‚ç”±äºå±æ€§åŒ…è£…å™¨ä¸å…è®¸å€¼é«˜äº12ï¼Œå› æ­¤å°†myNumberè®¾ç½®ä¸º12è€Œä¸æ˜¯24ã€‚ ç±»å‹å±æ€§å®ä¾‹å±æ€§æ˜¯å±äºç‰¹å®šç±»å‹å®ä¾‹çš„å±æ€§ã€‚æ¯æ¬¡æ‚¨åˆ›å»ºè¯¥ç±»å‹çš„æ–°å®ä¾‹æ—¶ï¼Œå®ƒéƒ½æœ‰è‡ªå·±çš„å±æ€§å€¼é›†ï¼Œä¸ä»»ä½•å…¶ä»–å®ä¾‹åˆ†å¼€ã€‚ æ‚¨è¿˜å¯ä»¥å®šä¹‰å±äºç±»å‹æœ¬èº«çš„å±æ€§ï¼Œè€Œä¸æ˜¯è¯¥ç±»å‹çš„ä»»ä½•å®ä¾‹ã€‚æ— è®ºæ‚¨åˆ›å»ºå¤šå°‘ä¸ªæ­¤ç±»å®ä¾‹ï¼Œè¿™äº›å±æ€§éƒ½å°†åªæœ‰ä¸€ä¸ªå‰¯æœ¬ã€‚è¿™äº›ç±»å‹çš„å±æ€§ç§°ä¸ºç±»å‹å±æ€§ã€‚ ç±»å‹å±æ€§å¯ç”¨äºå®šä¹‰ç‰¹å®šç±»å‹æ‰€æœ‰å®ä¾‹é€šç”¨çš„å€¼ï¼Œä¾‹å¦‚æ‰€æœ‰å®ä¾‹éƒ½å¯ä»¥ä½¿ç”¨çš„å¸¸é‡å±æ€§ï¼ˆå¦‚Cä¸­çš„é™æ€å¸¸é‡ï¼‰ï¼Œæˆ–å­˜å‚¨è¯¥ç±»å‹æ‰€æœ‰å®ä¾‹çš„å…¨å±€å€¼çš„å˜é‡å±æ€§ï¼ˆå¦‚Cä¸­çš„é™æ€å˜é‡ï¼‰ã€‚ å­˜å‚¨çš„ç±»å‹å±æ€§å¯ä»¥æ˜¯å˜é‡æˆ–å¸¸é‡ã€‚è®¡ç®—ç±»å‹å±æ€§æ€»æ˜¯å£°æ˜ä¸ºå˜é‡å±æ€§ï¼Œå°±åƒè®¡ç®—å®ä¾‹å±æ€§ä¸€æ ·ã€‚ æ³¨æ„ ä¸å­˜å‚¨å®ä¾‹å±æ€§ä¸åŒï¼Œæ‚¨å¿…é¡»å§‹ç»ˆä¸ºå­˜å‚¨ç±»å‹å±æ€§æä¾›é»˜è®¤å€¼ã€‚è¿™æ˜¯å› ä¸ºç±»å‹æœ¬èº«æ²¡æœ‰å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶ä¸ºå­˜å‚¨çš„ç±»å‹å±æ€§åˆ†é…å€¼çš„åˆå§‹åŒ–å™¨ã€‚ å­˜å‚¨ç±»å‹å±æ€§åœ¨é¦–æ¬¡è®¿é—®æ—¶è¢«æ‡’æƒ°åœ°åˆå§‹åŒ–ã€‚å®ƒä»¬ä¿è¯åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œå³ä½¿åŒæ—¶ç”±å¤šä¸ªçº¿ç¨‹è®¿é—®ï¼Œå¹¶ä¸”ä¸éœ€è¦ç”¨lazyä¿®é¥°ç¬¦æ ‡è®°å®ƒä»¬ã€‚ ç±»å‹å±æ€§è¯­æ³•åœ¨Cå’ŒObjective-Cä¸­ï¼Œæ‚¨å°†ä¸ç±»å‹å…³è”çš„é™æ€å¸¸é‡å’Œå˜é‡å®šä¹‰ä¸ºå…¨å±€é™æ€å˜é‡ã€‚ç„¶è€Œï¼Œåœ¨Swiftä¸­ï¼Œç±»å‹å±æ€§æ˜¯ä½œä¸ºç±»å‹å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨ç±»å‹çš„å¤–éƒ¨èŠ±æ‹¬å·å†…ç¼–å†™çš„ï¼Œæ¯ä¸ªç±»å‹å±æ€§éƒ½æ˜¾å¼æ‰©å±•åˆ°å®ƒæ”¯æŒçš„ç±»å‹ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨staticå…³é”®å­—å®šä¹‰ç±»å‹å±æ€§ã€‚å¯¹äºç±»ç±»å‹çš„è®¡ç®—ç±»å‹å±æ€§ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨classå…³é”®å­—æ¥å…è®¸å­ç±»è¦†ç›–è¶…ç±»çš„å®ç°ã€‚ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†å­˜å‚¨å’Œè®¡ç®—ç±»å‹å±æ€§çš„è¯­æ³•ï¼š struct SomeStructure { â€‹ static var storedTypeProperty &#x3D; â€œSome value.â€ â€‹ static var computedTypeProperty: Int { â€‹ return 1 â€‹ } } enum SomeEnumeration { â€‹ static var storedTypeProperty &#x3D; â€œSome value.â€ â€‹ static var computedTypeProperty: Int { â€‹ return 6 â€‹ } } class SomeClass { â€‹ static var storedTypeProperty &#x3D; â€œSome value.â€ â€‹ static var computedTypeProperty: Int { â€‹ return 27 â€‹ } â€‹ class var overrideableComputedTypeProperty: Int { â€‹ return 107 â€‹ } } æ³¨æ„ ä¸Šé¢çš„è®¡ç®—ç±»å‹å±æ€§ç¤ºä¾‹é€‚ç”¨äºåªè¯»è®¡ç®—ç±»å‹å±æ€§ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸è®¡ç®—å®ä¾‹å±æ€§ç›¸åŒçš„è¯­æ³•å®šä¹‰è¯»å†™è®¡ç®—ç±»å‹å±æ€§ã€‚ æŸ¥è¯¢å’Œè®¾ç½®ç±»å‹å±æ€§ç±»å‹å±æ€§ä½¿ç”¨ç‚¹è¯­æ³•æŸ¥è¯¢å’Œè®¾ç½®ï¼Œå°±åƒå®ä¾‹å±æ€§ä¸€æ ·ã€‚ä½†æ˜¯ï¼Œç±»å‹å±æ€§æ˜¯åœ¨ç±»å‹ä¸ŠæŸ¥è¯¢å’Œè®¾ç½®çš„ï¼Œè€Œä¸æ˜¯åœ¨è¯¥ç±»å‹çš„å®ä¾‹ä¸Šã€‚ä¾‹å¦‚ï¼š print(SomeStructure.storedTypeProperty) &#x2F;&#x2F; Prints â€œSome value.â€ SomeStructure.storedTypeProperty &#x3D; â€œAnother value.â€ print(SomeStructure.storedTypeProperty) &#x2F;&#x2F; Prints â€œAnother value.â€ print(SomeEnumeration.computedTypeProperty) &#x2F;&#x2F; Prints â€œ6â€ print(SomeClass.computedTypeProperty) &#x2F;&#x2F; Prints â€œ27â€ ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨ä¸¤ä¸ªå­˜å‚¨çš„ç±»å‹å±æ€§ä½œä¸ºä¸ºå¤šä¸ªéŸ³é¢‘é€šé“å»ºæ¨¡éŸ³é¢‘ç”µå¹³è®¡çš„ç»“æ„çš„ä¸€éƒ¨åˆ†ã€‚æ¯ä¸ªé€šé“çš„æ•´æ•°éŸ³é¢‘ç”µå¹³åœ¨0åˆ°10ä¹‹é—´ã€‚ ä¸‹å›¾è¯´æ˜äº†å¦‚ä½•å°†å…¶ä¸­ä¸¤ä¸ªéŸ³é¢‘é€šé“ç»„åˆæˆç«‹ä½“å£°éŸ³é¢‘ç”µå¹³è®¡å»ºæ¨¡ã€‚å½“ä¸€ä¸ªé¢‘é“çš„éŸ³é¢‘ç”µå¹³ä¸º0æ—¶ï¼Œè¯¥é¢‘é“çš„ç¯éƒ½ä¸ä¼šäº®èµ·ã€‚å½“éŸ³é¢‘ç”µå¹³ä¸º10æ—¶ï¼Œè¯¥é€šé“çš„æ‰€æœ‰ç¯éƒ½äº®äº†ã€‚åœ¨è¿™ä¸ªå›¾ä¸­ï¼Œå·¦é€šé“çš„å½“å‰ç”µå¹³ä¸º9ï¼Œå³ä¿¡é“çš„å½“å‰ç”µå¹³ä¸º7ï¼š ä¸Šè¿°éŸ³é¢‘é€šé“ç”±AudioChannelç»“æ„çš„å®ä¾‹è¡¨ç¤ºï¼š struct AudioChannel { â€‹ static let thresholdLevel &#x3D; 10 â€‹ static var maxInputLevelForAllChannels &#x3D; 0 â€‹ var currentLevel: Int &#x3D; 0 { â€‹ didSet { â€‹ if currentLevel &gt; AudioChannel.thresholdLevel { â€‹ &#x2F;&#x2F; cap the new audio level to the threshold level â€‹ currentLevel &#x3D; AudioChannel.thresholdLevel â€‹ } â€‹ if currentLevel &gt; AudioChannel.maxInputLevelForAllChannels { â€‹ &#x2F;&#x2F; store this as the new overall maximum input level â€‹ AudioChannel.maxInputLevelForAllChannels &#x3D; currentLevel â€‹ } â€‹ } â€‹ } } AudioChannelç»“æ„å®šä¹‰äº†ä¸¤ä¸ªå­˜å‚¨çš„ç±»å‹å±æ€§æ¥æ”¯æŒå…¶åŠŸèƒ½ã€‚ç¬¬ä¸€ä¸ªï¼ŒthresholdLevelï¼Œå®šä¹‰äº†éŸ³é¢‘çº§åˆ«å¯ä»¥è¾¾åˆ°çš„æœ€å¤§é˜ˆå€¼ã€‚å¯¹äºæ‰€æœ‰AudioChannelå®ä¾‹ï¼Œè¿™æ˜¯ä¸€ä¸ª10çš„å¸¸é‡å€¼ã€‚å¦‚æœéŸ³é¢‘ä¿¡å·çš„å€¼é«˜äº10ï¼Œå®ƒå°†è¢«é™åˆ¶ä¸ºæ­¤é˜ˆå€¼ï¼ˆå¦‚ä¸‹æ‰€è¿°ï¼‰ã€‚ ç¬¬äºŒç§ç±»å‹å±æ€§æ˜¯ä¸€ä¸ªåä¸ºmaxInputLevelForAllChannelså˜é‡å­˜å‚¨å±æ€§ã€‚è¿™å¯ä»¥è·Ÿè¸ªä»»ä½•AudioChannelå®ä¾‹æ”¶åˆ°çš„æœ€å¤§è¾“å…¥å€¼ã€‚å®ƒä»¥åˆå§‹å€¼0å¼€å¤´ã€‚ AudioChannelç»“æ„è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸ºcurrentLevelçš„å­˜å‚¨å®ä¾‹å±æ€§ï¼Œè¯¥å±æ€§ä»¥0åˆ°10çš„æ¯”ä¾‹è¡¨ç¤ºé€šé“çš„å½“å‰éŸ³é¢‘çº§åˆ«ã€‚ currentLevelå±æ€§æœ‰ä¸€ä¸ªdidSetå±æ€§è§‚å¯Ÿå™¨ï¼Œç”¨äºåœ¨è®¾ç½®currentLevelæ—¶æ£€æŸ¥å…¶å€¼ã€‚æ­¤è§‚å¯Ÿè€…æ‰§è¡Œä¸¤é¡¹æ£€æŸ¥ï¼š å¦‚æœcurrentLevelçš„æ–°å€¼å¤§äºå…è®¸çš„thresholdLevelï¼Œåˆ™å±æ€§è§‚å¯Ÿè€…å°†currentLevelä¸Šé™ä¸º thresholdLevelã€‚ å¦‚æœcurrentLevelçš„æ–°å€¼ï¼ˆåœ¨ä»»ä½•ä¸Šé™ä¹‹åï¼‰é«˜äºä»»ä½•AudioChannelå®ä¾‹ä¹‹å‰æ”¶åˆ°çš„ä»»ä½•å€¼ï¼Œåˆ™å±æ€§è§‚å¯Ÿè€…å°†newcurrentLevelå€¼å­˜å‚¨åœ¨maxInputLevelForAllChannelsç±»å‹å±æ€§ä¸­ã€‚ æ³¨æ„ In the first of these two checks, the didSet observer sets currentLevel to a different value. This doesnâ€™t, however, cause the observer to be called again. æ‚¨å¯ä»¥ä½¿ç”¨AudioChannelç»“æ„åˆ›å»ºä¸¤ä¸ªåä¸ºleftChannelå’ŒrightChannelçš„æ–°éŸ³é¢‘é€šé“ï¼Œä»¥è¡¨ç¤ºç«‹ä½“å£°ç³»ç»Ÿçš„éŸ³é¢‘æ°´å¹³ï¼š var leftChannel &#x3D; AudioChannel() var rightChannel &#x3D; AudioChannel() å¦‚æœæ‚¨å°†å·¦ä¾§é€šé“çš„currentLevelè®¾ç½®ä¸º7ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°maxInputLevelForAllChannelsç±»å‹å±æ€§æ›´æ–°ä¸ºç­‰äº7ï¼š leftChannel.currentLevel &#x3D; 7 print(leftChannel.currentLevel) &#x2F;&#x2F; Prints â€œ7â€ print(AudioChannel.maxInputLevelForAllChannels) &#x2F;&#x2F; Prints â€œ7â€ å¦‚æœæ‚¨å°è¯•å°†æ­£ç¡®é€šé“çš„currentLevelè®¾ç½®ä¸º11ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å³ä¾§é€šé“çš„currentLevelå±æ€§ä¸Šé™ä¸ºæœ€å¤§å€¼10ï¼ŒmaxInputLevelForAllChannelsç±»å‹å±æ€§æ›´æ–°ä¸ºç­‰äº10ï¼š rightChannel.currentLevel &#x3D; 11 print(rightChannel.currentLevel) &#x2F;&#x2F; Prints â€œ10â€ print(AudioChannel.maxInputLevelForAllChannels) &#x2F;&#x2F; Prints â€œ10â€","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ åµŒå¥—","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-åµŒå¥—","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-åµŒå¥—/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%B5%8C%E5%A5%97/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Closures.html#ID102 åµŒå¥—æ˜¯è‡ªåŒ…å«çš„åŠŸèƒ½å—ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­ä¼ é€’å’Œä½¿ç”¨ã€‚Swiftä¸­çš„é—­åŒ…ç±»ä¼¼äºCå’ŒObjective-Cä¸­çš„å—ä»¥åŠå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­çš„lambdasã€‚ é—­åŒ…å¯ä»¥ä»å®šä¹‰å¸¸é‡å’Œå˜é‡çš„ä¸Šä¸‹æ–‡ä¸­æ•è·å’Œå­˜å‚¨å¯¹ä»»ä½•å¸¸é‡å’Œå˜é‡çš„å¼•ç”¨ã€‚è¿™è¢«ç§°ä¸ºå…³é—­è¿™äº›å¸¸é‡å’Œå˜é‡ã€‚Swiftä¸ºæ‚¨å¤„ç†æ•è·çš„æ‰€æœ‰å†…å­˜ç®¡ç†ã€‚ æ³¨æ„ å¦‚æœæ‚¨ä¸ç†Ÿæ‚‰æ•è·çš„æ¦‚å¿µï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚ä¸‹æ–‡åœ¨ã€Šæ•æ‰ä»·å€¼è§‚ã€‹ä¸­å¯¹æ­¤è¿›è¡Œäº†è¯¦ç»†è§£é‡Šã€‚ å‡½æ•°ä¸­å¼•å…¥çš„å…¨å±€å’ŒåµŒå¥—å‡½æ•°å®é™…ä¸Šæ˜¯é—­åŒ…çš„ç‰¹æ®Šæƒ…å†µã€‚å…³é—­é‡‡å–ä¸‰ç§å½¢å¼ä¹‹ä¸€ï¼š å…¨å±€å‡½æ•°æ˜¯å…·æœ‰åç§°ä¸”ä¸æ•è·ä»»ä½•å€¼çš„é—­åŒ…ã€‚ åµŒå¥—å‡½æ•°æ˜¯å…·æœ‰åç§°çš„é—­åŒ…ï¼Œå¯ä»¥ä»å…¶å°é—­å‡½æ•°ä¸­æ•è·å€¼ã€‚ é—­åŒ…è¡¨è¾¾å¼æ˜¯ç”¨è½»é‡çº§è¯­æ³•ç¼–å†™çš„æœªå‘½åé—­åŒ…ï¼Œå¯ä»¥ä»å…¶å‘¨å›´ä¸Šä¸‹æ–‡ä¸­æ•è·å€¼ã€‚ Swiftçš„é—­åŒ…è¡¨è¾¾å¼å…·æœ‰å¹²å‡€ã€æ¸…æ™°çš„é£æ ¼ï¼Œä¼˜åŒ–é¼“åŠ±åœ¨å¸¸è§åœºæ™¯ä¸­è¿›è¡Œç®€çŸ­ã€æ— æ‚ä¹±çš„è¯­æ³•ã€‚è¿™äº›ä¼˜åŒ–åŒ…æ‹¬ï¼š ä»ä¸Šä¸‹æ–‡æ¨æ–­å‚æ•°å’Œè¿”å›å€¼ç±»å‹ æ¥è‡ªå•è¡¨è¾¾å¼é—­åŒ…çš„éšå¼å›æŠ¥ é€Ÿè®°å‚æ•°åç§° å°¾éšé—­åŒ…è¯­æ³• åµŒå¥—è¡¨è¾¾å¼Nested Functionsä¸­å¼•å…¥çš„åµŒå¥—å‡½æ•°æ˜¯å‘½åå’Œå®šä¹‰è‡ªåŒ…å«ä»£ç å—ä½œä¸ºæ›´å¤§å‡½æ•°çš„ä¸€éƒ¨åˆ†çš„ä¾¿æ·æ‰‹æ®µã€‚ç„¶è€Œï¼Œåœ¨æ²¡æœ‰å®Œæ•´å£°æ˜å’Œåç§°çš„æƒ…å†µä¸‹ç¼–å†™ç±»ä¼¼å‡½æ•°çš„æ„é€ çš„è¾ƒçŸ­ç‰ˆæœ¬æœ‰æ—¶æ˜¯æœ‰ç”¨çš„ã€‚å½“æ‚¨ä½¿ç”¨å°†å‡½æ•°ä½œä¸ºä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°çš„å‡½æ•°æˆ–æ–¹æ³•æ—¶ï¼Œå°¤å…¶å¦‚æ­¤ã€‚ é—­åŒ…è¡¨è¾¾å¼æ˜¯ä¸€ç§ä»¥ç®€çŸ­ã€èšç„¦çš„è¯­æ³•ç¼–å†™å†…è”é—­åŒ…çš„æ–¹æ³•ã€‚é—­åŒ…è¡¨è¾¾å¼æä¾›äº†å‡ ç§è¯­æ³•ä¼˜åŒ–ï¼Œç”¨äºä»¥ç¼©çŸ­çš„å½¢å¼ç¼–å†™é—­åŒ…ï¼Œè€Œä¸ä¼šå¤±å»æ¸…æ™°åº¦æˆ–æ„å›¾ã€‚ä¸‹é¢çš„é—­åŒ…è¡¨è¾¾å¼ç¤ºä¾‹é€šè¿‡åœ¨å‡ æ¬¡è¿­ä»£ä¸­å®Œå–„sorted(by:)æ–¹æ³•çš„å•ä¸ªç¤ºä¾‹æ¥è¯´æ˜è¿™äº›ä¼˜åŒ–ï¼Œæ¯ä¸ªè¿­ä»£éƒ½ä»¥æ›´ç®€æ´çš„æ–¹å¼è¡¨è¾¾ç›¸åŒçš„åŠŸèƒ½ã€‚ æ’åºæ–¹æ³•Swiftçš„æ ‡å‡†åº“æä¾›äº†ä¸€ä¸ªåä¸ºsorted(by:)çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ ¹æ®æ‚¨æä¾›çš„æ’åºé—­åŒ…çš„è¾“å‡ºå¯¹å·²çŸ¥ç±»å‹çš„å€¼æ•°ç»„è¿›è¡Œæ’åºã€‚å®Œæˆæ’åºè¿‡ç¨‹åï¼Œsorted(by:)æ–¹æ³•è¿”å›ä¸æ—§æ•°ç»„ç±»å‹å’Œå¤§å°ç›¸åŒçš„æ–°æ•°ç»„ï¼Œå…¶å…ƒç´ æŒ‰æ­£ç¡®çš„æ’åºé¡ºåºæ’åˆ—ã€‚åŸå§‹æ•°ç»„ä¸ä¼šè¢«sorted(by:)æ–¹æ³•ä¿®æ”¹ã€‚ ä¸‹é¢çš„é—­åŒ…è¡¨è¾¾å¼ç¤ºä¾‹ä½¿ç”¨sorted(by:)æ–¹æ³•æŒ‰åå‘å­—æ¯é¡ºåºå¯¹Stringå€¼æ•°ç»„è¿›è¡Œæ’åºã€‚ä»¥ä¸‹æ˜¯è¦æ’åºçš„åˆå§‹æ•°ç»„ï¼š 1let names = [&quot;Chris&quot;, &quot;Alex&quot;, &quot;Ewa&quot;, &quot;Barry&quot;, &quot;Daniella&quot;] sorted(by:)æ–¹æ³•æ¥å—ä¸€ä¸ªé—­åŒ…ï¼Œè¯¥é—­åŒ…æ¥å—ä¸¤ä¸ªä¸æ•°ç»„å†…å®¹ç›¸åŒçš„ç±»å‹å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªBoolå€¼ï¼Œè¯´æ˜å¯¹å€¼è¿›è¡Œæ’åºåï¼Œç¬¬ä¸€ä¸ªå€¼åº”è¯¥å‡ºç°åœ¨ç¬¬äºŒä¸ªå€¼ä¹‹å‰è¿˜æ˜¯ä¹‹åã€‚å¦‚æœç¬¬ä¸€ä¸ªå€¼å‡ºç°åœ¨ç¬¬äºŒä¸ªå€¼ä¹‹å‰ï¼Œæ’åºé—­åŒ…éœ€è¦è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ è¿™ä¸ªä¾‹å­æ˜¯å¯¹ä¸€ä¸ªâ€™ String â€˜å€¼çš„æ•°ç»„è¿›è¡Œæ’åºï¼Œå› æ­¤æ’åºé—­åŒ…éœ€è¦æ˜¯ä¸€ä¸ªç±»å‹ä¸ºâ€™ (String, String) -&gt; Bool â€˜çš„å‡½æ•°ã€‚ æä¾›æ’åºé—­åŒ…çš„ä¸€ç§æ–¹æ³•æ˜¯ç¼–å†™æ­£ç¡®ç±»å‹çš„æ­£å¸¸å‡½æ•°ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™sorted(by:)æ–¹æ³•ï¼š 12345func backward(_ s1: String, _ s2: String) -&gt; Bool &#123; return s1 &gt; s2&#125;var reversedNames = names.sorted(by: backward)// reversedNames is equal to [&quot;Ewa&quot;, &quot;Daniella&quot;, &quot;Chris&quot;, &quot;Barry&quot;, &quot;Alex&quot;] å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆs1ï¼‰å¤§äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼ˆs2ï¼‰ï¼Œåˆ™ backward(_:_:)å‡½æ•°å°†è¿”å›trueï¼Œè¡¨æ˜s1åº”è¯¥å‡ºç°åœ¨æ’åºæ•°ç»„çš„s2ä¹‹å‰ã€‚å¯¹äºå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œâ€œå¤§äºâ€æ„å‘³ç€â€œåœ¨å­—æ¯è¡¨ä¸­å‡ºç°å¾—æ™šäºâ€ã€‚è¿™æ„å‘³ç€å­—æ¯&quot;B&quot;å¤§äºå­—æ¯&quot;A&quot;å­—ç¬¦ä¸²&quot;Tom&quot;å¤§äºå­—ç¬¦ä¸²&quot;Tim&quot;è¿™ç»™å‡ºäº†ä¸€ä¸ªåå‘å­—æ¯æ’åºï¼Œå°†&quot;Barry&quot;æ”¾åœ¨&quot;Alex&quot;ä¹‹å‰ï¼Œä»¥æ­¤ç±»è¿‡ã€‚ ç„¶è€Œï¼Œè¿™æ˜¯ä¸€ç§ç›¸å½“å†—é•¿çš„æ–¹å¼æ¥ç¼–å†™æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå•è¡¨è¾¾å¼å‡½æ•°(â€˜ a &gt;b â€˜)ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ€å¥½ä½¿ç”¨é—­åŒ…è¡¨è¾¾å¼è¯­æ³•å†…è”ç¼–å†™æ’åºé—­åŒ…ã€‚ åµŒå¥—è¡¨è¾¾å¼è¯­æ³•åµŒå¥—è¡¨è¾¾å¼è¯­æ³•å…·æœ‰ä»¥ä¸‹ä¸€èˆ¬å½¢å¼ï¼š 123&#123; (parameters) -&gt; return type in statements&#125; åµŒå¥—è¡¨è¾¾å¼è¯­æ³•ä¸­çš„å‚æ•°å¯ä»¥æ˜¯è¾“å…¥è¾“å‡ºå‚æ•°ï¼Œä½†å®ƒä»¬ä¸èƒ½æœ‰é»˜è®¤å€¼ã€‚å¦‚æœæ‚¨å‘½åå˜é‡å‚æ•°ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å˜é‡å‚æ•°ã€‚å…ƒç»„ä¹Ÿå¯ä»¥ç”¨ä½œå‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ã€‚ ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸Šé¢çš„å‘backward(_:_:)å‡½æ•°çš„é—­åŒ…è¡¨è¾¾å¼ç‰ˆæœ¬ï¼š 123reversedNames = names.sorted(by: &#123; (s1: String, s2: String) -&gt; Bool in return s1 &gt; s2&#125;) è¯·æ³¨æ„ï¼Œè¿™ä¸ªå†…è”é—­åŒ…çš„å½¢å‚å£°æ˜å’Œè¿”å›ç±»å‹ä¸â€™ backward(::) â€˜å‡½æ•°çš„å£°æ˜ç›¸åŒã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå®ƒéƒ½è¢«å†™æˆâ€™ (s1: String, s2: String) -&gt; Bool â€˜ã€‚ä½†æ˜¯ï¼Œå¯¹äºå†…è”é—­åŒ…è¡¨è¾¾å¼ï¼Œå‚æ•°å’Œè¿”å›ç±»å‹å†™åœ¨èŠ±æ‹¬å·çš„*å†…éƒ¨ï¼Œè€Œä¸æ˜¯åœ¨èŠ±æ‹¬å·çš„å¤–é¢ã€‚ é—­åŒ…æ­£æ–‡çš„å¼€å¤´ç”±å…³é”®å­—å¼•å…¥ã€‚æ­¤å…³é”®å­—è¡¨ç¤ºé—­åŒ…å‚æ•°å’Œè¿”å›ç±»å‹çš„å®šä¹‰å·²ç»å®Œæˆï¼Œé—­åŒ…çš„ä¸»ä½“å³å°†å¼€å§‹ã€‚ ç”±äºé—­åŒ…çš„ä¸»ä½“å¤ªçŸ­ï¼Œå®ƒç”šè‡³å¯ä»¥å†™åœ¨ä¸€è¡Œä¸Šï¼š 1reversedNames = names.sorted(by: &#123; (s1: String, s2: String) -&gt; Bool in return s1 &gt; s2 &#125; ) è¿™è¡¨æ˜å¯¹sorted(by:)æ–¹æ³•çš„æ€»ä½“è°ƒç”¨ä¿æŒä¸å˜ã€‚ä¸€å¯¹æ‹¬å·ä»ç„¶åŒ…è£¹ç€æ–¹æ³•çš„æ•´ä¸ªå‚æ•°ã€‚ç„¶è€Œï¼Œè¿™ä¸ªè®ºç‚¹ç°åœ¨æ˜¯ä¸€ä¸ªå†…è”é—­åŒ…ã€‚ ä»ä¸Šä¸‹æ–‡æ¨æ–­ç±»å‹å› ä¸ºæ’åºé—­åŒ…æ˜¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•çš„ï¼Œæ‰€ä»¥Swiftå¯ä»¥æ¨æ–­å‡ºå…¶å‚æ•°çš„ç±»å‹ä»¥åŠè¿”å›å€¼çš„ç±»å‹ã€‚â€™ sorted(by:) â€˜æ–¹æ³•æ˜¯åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ä¸Šè°ƒç”¨çš„ï¼Œæ‰€ä»¥å®ƒçš„å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªç±»å‹ä¸ºâ€™ (String, String) -&gt; Bool â€˜çš„å‡½æ•°ã€‚è¿™æ„å‘³ç€â€™ (String, String) â€˜å’Œâ€™ Bool â€˜ç±»å‹ä¸éœ€è¦ä½œä¸ºé—­åŒ…è¡¨è¾¾å¼å®šä¹‰çš„ä¸€éƒ¨åˆ†ç¼–å†™ã€‚å› ä¸ºæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥è¢«æ¨æ–­ï¼Œæ‰€ä»¥è¿”å›ç®­å¤´(â€˜ -&gt; â€˜)å’Œå½¢å‚åç§°å‘¨å›´çš„æ‹¬å·ä¹Ÿå¯ä»¥è¢«çœç•¥: 1reversedNames = names.sorted(by: &#123; s1, s2 in return s1 &gt; s2 &#125; ) å½“å°†é—­åŒ…ä½œä¸ºå†…è”é—­åŒ…è¡¨è¾¾å¼ä¼ é€’ç»™å‡½æ•°æˆ–æ–¹æ³•æ—¶ï¼Œå§‹ç»ˆå¯ä»¥æ¨æ–­å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ã€‚å› æ­¤ï¼Œå½“é—­åŒ…ç”¨ä½œå‡½æ•°æˆ–æ–¹æ³•å‚æ•°æ—¶ï¼Œæ‚¨æ°¸è¿œä¸éœ€è¦ä»¥æœ€å®Œæ•´çš„å½¢å¼ç¼–å†™å†…è”é—­åŒ…ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œå¦‚æœæ‚¨æ„¿æ„ï¼Œæ‚¨ä»ç„¶å¯ä»¥æ˜ç¡®è¿™äº›ç±»å‹ï¼Œå¦‚æœè¿™èƒ½é¿å…ä»£ç è¯»è€…çš„æ­§ä¹‰ï¼Œåˆ™é¼“åŠ±è¿™æ ·åšã€‚åœ¨sorted(by:)æ–¹æ³•çš„æƒ…å†µä¸‹ï¼Œä»æ­£åœ¨è¿›è¡Œæ’åºçš„äº‹å®ä¸­å¯ä»¥æ¸…æ¥šåœ°çœ‹å‡ºé—­åŒ…çš„ç›®çš„ï¼Œè¯»è€…å¯ä»¥å®‰å…¨åœ°å‡è®¾é—­åŒ…å¯èƒ½ä¸Stringå€¼ä¸€èµ·å·¥ä½œï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºå¯¹å­—ç¬¦ä¸²æ•°ç»„è¿›è¡Œæ’åºã€‚ å•è¡¨è¾¾å¼å…³é—­çš„éšå¼è¿”å›å•è¡¨è¾¾å¼é—­åŒ…å¯ä»¥é€šè¿‡ä»å£°æ˜ä¸­çœç•¥returnå…³é”®å­—æ¥éšå¼è¿”å›å…¶å•ä¸ªè¡¨è¾¾å¼çš„ç»“æœï¼Œå¦‚ä¸Šä¸€ä¸ªç¤ºä¾‹çš„è¿™ä¸ªç‰ˆæœ¬ï¼š 1reversedNames = names.sorted(by: &#123; s1, s2 in s1 &gt; s2 &#125; ) è¿™é‡Œï¼Œâ€™ sorted(by:) â€˜æ–¹æ³•çš„å‚æ•°çš„å‡½æ•°ç±»å‹æ˜ç¡®è¡¨ç¤ºé—­åŒ…å¿…é¡»è¿”å›â€™ Bool â€˜å€¼ã€‚å› ä¸ºé—­åŒ…çš„ä¸»ä½“åŒ…å«ä¸€ä¸ªè¿”å›â€™ Bool â€˜å€¼çš„è¡¨è¾¾å¼(â€˜ s1 &gt; s2 â€˜)ï¼Œæ‰€ä»¥æ²¡æœ‰æ­§ä¹‰ï¼Œå¹¶ä¸”â€™ return â€˜å…³é”®å­—å¯ä»¥è¢«çœç•¥ã€‚ è¿ç®—ç¬¦æ–¹æ³•å®é™…ä¸Šï¼Œæœ‰æ›´çŸ­çš„æ–¹æ³•æ¥ç¼–å†™ä¸Šé¢çš„é—­åŒ…è¡¨è¾¾å¼ã€‚Swiftçš„Stringç±»å‹å°†å…¶å¤§äºè¿ç®—ç¬¦ï¼ˆ&gt;ï¼‰çš„å­—ç¬¦ä¸²ç‰¹å®šå®ç°å®šä¹‰ä¸ºå…·æœ‰ä¸¤ä¸ªStringç±»å‹å‚æ•°çš„æ–¹æ³•ï¼Œå¹¶è¿”å›Boolç±»å‹çš„å€¼ã€‚è¿™å®Œå…¨ç¬¦åˆsorted(by:)æ–¹æ³•æ‰€éœ€çš„æ–¹æ³•ç±»å‹ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥ç®€å•åœ°ä¼ é€’å¤§äºè¿ç®—ç¬¦ï¼ŒSwiftå°†æ¨æ–­æ‚¨æƒ³è¦ä½¿ç”¨å…¶å­—ç¬¦ä¸²ç‰¹å®šçš„å®ç°ï¼š 1reversedNames = names.sorted(by: &gt;) æœ‰å…³è¿ç®—ç¬¦æ–¹æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…è¿ç®—ç¬¦æ–¹æ³•ã€‚ å°¾éšå…³é—­å¦‚æœæ‚¨éœ€è¦å°†é—­åŒ…è¡¨è¾¾å¼ä¼ é€’ç»™å‡½æ•°ä½œä¸ºå‡½æ•°çš„æœ€ç»ˆå‚æ•°ï¼Œå¹¶ä¸”é—­åŒ…è¡¨è¾¾å¼å¾ˆé•¿ï¼Œåˆ™å°†å…¶å†™ä¸ºå°¾éšé—­åŒ…å¯èƒ½ä¼šæœ‰ç”¨ã€‚æ‚¨åœ¨å‡½æ•°è°ƒç”¨çš„æ‹¬å·åå†™ä¸€ä¸ªå°¾éšé—­åŒ…ï¼Œå³ä½¿å°¾éšé—­åŒ…ä»ç„¶æ˜¯å‡½æ•°çš„å‚æ•°ã€‚å½“æ‚¨ä½¿ç”¨å°¾éšé—­åŒ…è¯­æ³•æ—¶ï¼Œæ‚¨ä¸ä¼šå°†ç¬¬ä¸€ä¸ªé—­åŒ…çš„å‚æ•°æ ‡ç­¾ä½œä¸ºå‡½æ•°è°ƒç”¨çš„ä¸€éƒ¨åˆ†ã€‚å‡½æ•°è°ƒç”¨å¯ä»¥åŒ…æ‹¬å¤šä¸ªå°¾éšé—­åŒ…ï¼›ç„¶è€Œï¼Œä»¥ä¸‹å‰å‡ ä¸ªç¤ºä¾‹ä½¿ç”¨å•ä¸ªå°¾éšé—­åŒ…ã€‚ 123456789101112131415func someFunctionThatTakesAClosure(closure: () -&gt; Void) &#123; // function body goes here&#125;// ä¸‹é¢æ˜¯å¦‚ä½•åœ¨ä¸ä½¿ç”¨æœ«å°¾é—­åŒ…çš„æƒ…å†µä¸‹è°ƒç”¨è¿™ä¸ªå‡½æ•°:someFunctionThatTakesAClosure(closure: &#123; // ç»“æŸçš„èº«ä½“åœ¨è¿™é‡Œ&#125;)// ä¸‹é¢æ˜¯å¦‚ä½•ä½¿ç”¨æœ«å°¾é—­åŒ…æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°:someFunctionThatTakesAClosure() &#123; // trailing closure&#x27;s body goes here&#125; ä¸Šé¢çš„é—­åŒ…è¡¨è¾¾å¼è¯­æ³•éƒ¨åˆ†çš„å­—ç¬¦ä¸²æ’åºé—­åŒ…å¯ä»¥åœ¨sorted(by:)æ–¹æ³•çš„æ‹¬å·ä¹‹å¤–å†™æˆå°¾éšé—­åŒ…ï¼š 1reversedNames = names.sorted() &#123; $0 &gt; $1 &#125; å¦‚æœé—­åŒ…è¡¨è¾¾å¼ä½œä¸ºå‡½æ•°æˆ–æ–¹æ³•çš„å”¯ä¸€å‚æ•°æä¾›ï¼Œå¹¶ä¸”æ‚¨å°†è¯¥è¡¨è¾¾å¼ä½œä¸ºå°¾éšé—­åŒ…æä¾›ï¼Œåˆ™åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ‚¨æ— éœ€åœ¨å‡½æ•°æˆ–æ–¹æ³•åç§°åå†™ä¸€å¯¹æ‹¬å·()ï¼‰ï¼š 1reversedNames = names.sorted &#123; $0 &gt; $1 &#125; å½“é—­åŒ…è¶³å¤Ÿé•¿ï¼Œæ— æ³•å°†å…¶å†…è”å†™åœ¨ä¸€è¡Œä¸Šæ—¶ï¼Œå°¾éšé—­åŒ…æœ€æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼ŒSwiftçš„Arrayç±»å‹æœ‰ä¸€ä¸ªmap(_:)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä»¥é—­åŒ…è¡¨è¾¾å¼ä¸ºå•ä¸ªå‚æ•°ã€‚ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹ç›®è°ƒç”¨ä¸€æ¬¡é—­åŒ…ï¼Œå¹¶è¿”å›è¯¥é¡¹ç›®çš„æ›¿ä»£æ˜ å°„å€¼ï¼ˆå¯èƒ½æ˜¯å…¶ä»–ç±»å‹ï¼‰ã€‚æ‚¨é€šè¿‡åœ¨ä¼ é€’ç»™map(_:)çš„é—­åŒ…ä¸­ç¼–å†™ä»£ç æ¥æŒ‡å®šæ˜ å°„çš„æ€§è´¨å’Œè¿”å›å€¼çš„ç±»å‹ã€‚ å°†æä¾›çš„é—­åŒ…åº”ç”¨äºæ¯ä¸ªæ•°ç»„å…ƒç´ åï¼Œmap(_:)æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰æ–°æ˜ å°„å€¼çš„æ–°æ•°ç»„ï¼Œé¡ºåºä¸åŸå§‹æ•°ç»„ä¸­çš„ç›¸åº”å€¼ç›¸åŒã€‚ ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨å¸¦æœ‰å°¾éšé—­åŒ…çš„â€™ map(:) â€˜æ–¹æ³•å°†â€™ Int â€˜å€¼çš„æ•°ç»„è½¬æ¢ä¸ºâ€™ String â€˜å€¼çš„æ•°ç»„ã€‚æ•°ç»„[16,58,510]è¢«ç”¨æ¥åˆ›å»ºæ–°çš„æ•°ç»„[â€œOneSixâ€ï¼Œ â€œFiveEightâ€ï¼Œ â€œFiveOneZeroâ€]: 12345let digitNames = [ 0: &quot;Zero&quot;, 1: &quot;One&quot;, 2: &quot;Two&quot;, 3: &quot;Three&quot;, 4: &quot;Four&quot;, 5: &quot;Five&quot;, 6: &quot;Six&quot;, 7: &quot;Seven&quot;, 8: &quot;Eight&quot;, 9: &quot;Nine&quot;]let numbers = [16, 58, 510] ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†æ•´æ•°æ•°å­—ä¸å…¶åç§°çš„è‹±è¯­ç‰ˆæœ¬ä¹‹é—´çš„æ˜ å°„è¯å…¸ã€‚å®ƒè¿˜å®šä¹‰äº†ä¸€ä¸ªæ•´æ•°æ•°æ•°ç»„ï¼Œå‡†å¤‡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ æ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨numbersæ•°ç»„åˆ›å»ºStringå€¼æ•°ç»„ï¼Œæ–¹æ³•æ˜¯å°†é—­åŒ…è¡¨è¾¾å¼ä½œä¸ºå°¾éšé—­åŒ…ä¼ é€’åˆ°æ•°ç»„çš„map(_:)æ–¹æ³•ï¼š 1234567891011let strings = numbers.map &#123; (number) -&gt; String in var number = number var output = &quot;&quot; repeat &#123; output = digitNames[number % 10]! + output number /= 10 &#125; while number &gt; 0 return output&#125;// strings is inferred to be of type [String]// its value is [&quot;OneSix&quot;, &quot;FiveEight&quot;, &quot;FiveOneZero&quot;] map(_:)æ–¹æ³•ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹è°ƒç”¨é—­åŒ…è¡¨è¾¾å¼ä¸€æ¬¡ã€‚æ‚¨ä¸éœ€è¦æŒ‡å®šé—­åŒ…è¾“å…¥å‚æ•°numberçš„ç±»å‹ï¼Œå› ä¸ºç±»å‹å¯ä»¥ä»è¦æ˜ å°„çš„æ•°ç»„ä¸­çš„å€¼ä¸­æ¨æ–­å‡ºæ¥ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œå˜é‡numberä½¿ç”¨é—­åŒ…numberå‚æ•°çš„å€¼åˆå§‹åŒ–ï¼Œä»¥ä¾¿å¯ä»¥åœ¨é—­åŒ…ä¸»ä½“å†…ä¿®æ”¹è¯¥å€¼ã€‚ï¼ˆå‡½æ•°å’Œé—­åŒ…çš„å‚æ•°å§‹ç»ˆæ˜¯å¸¸é‡ã€‚ï¼‰é—­åŒ…è¡¨è¾¾å¼è¿˜æŒ‡å®šäº†Stringçš„è¿”å›ç±»å‹ï¼Œä»¥æŒ‡ç¤ºå°†å­˜å‚¨åœ¨æ˜ å°„è¾“å‡ºæ•°ç»„ä¸­çš„ç±»å‹ã€‚ é—­åŒ…è¡¨è¾¾å¼æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šæ„å»ºä¸€ä¸ªåä¸ºoutputçš„å­—ç¬¦ä¸²ã€‚å®ƒä½¿ç”¨å‰©ä½™è¿ç®—ç¬¦ï¼ˆnumber%10ï¼‰è®¡ç®—numberçš„æœ€åä¸€ä¸ªæ•°å­—ï¼Œå¹¶ä½¿ç”¨æ­¤æ•°å­—åœ¨digitNameså­—å…¸ä¸­æŸ¥æ‰¾é€‚å½“çš„å­—ç¬¦ä¸²ã€‚é—­åŒ…å¯ç”¨äºåˆ›å»ºä»»ä½•å¤§äºé›¶çš„æ•´æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚ æ³¨æ„ å¯¹digitNameså­—å…¸ä¸‹æ ‡çš„è°ƒç”¨åæ˜¯æ„Ÿå¹å·ï¼ˆ!ï¼‰ï¼Œå› ä¸ºå­—å…¸ä¸‹æ ‡è¿”å›ä¸€ä¸ªå¯é€‰å€¼ï¼Œè¡¨ç¤ºå¦‚æœé”®ä¸å­˜åœ¨ï¼Œå­—å…¸æŸ¥æ‰¾å¯èƒ½ä¼šå¤±è´¥ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä¿è¯number%10å§‹ç»ˆæ˜¯digitNameså­—å…¸çš„æœ‰æ•ˆä¸‹æ ‡é”®ï¼Œå› æ­¤ä½¿ç”¨æ„Ÿå¹å·æ¥å¼ºåˆ¶è§£å¼€å­˜å‚¨åœ¨ä¸‹æ ‡å¯é€‰è¿”å›å€¼ä¸­çš„Stringå€¼ã€‚ ä»digitNameså­—å…¸ä¸­æ£€ç´¢åˆ°çš„å­—ç¬¦ä¸²è¢«æ·»åŠ åˆ°outputçš„å‰é¢ï¼Œæœ‰æ•ˆåœ°åå‘æ„å»ºæ•°å­—çš„å­—ç¬¦ä¸²ç‰ˆæœ¬ã€‚ï¼ˆè¡¨è¾¾å¼number%10å¯¹16ã€58ä¸º8ï¼Œå¯¹510å€¼ä¸º0ã€‚ï¼‰ ç„¶åå°†numberå˜é‡é™¤ä»¥10ã€‚å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œæ‰€ä»¥å®ƒåœ¨åˆ†åŒºæœŸé—´å››èˆäº”å…¥ï¼Œæ‰€ä»¥16å˜æˆ1ï¼Œ58å˜æˆ5ï¼Œ510å˜æˆ51ã€‚ é‡å¤è¯¥è¿‡ç¨‹ï¼Œç›´åˆ°numberç­‰äº0ï¼Œæ­¤æ—¶outputå­—ç¬¦ä¸²ç”±é—­åŒ…è¿”å›ï¼Œå¹¶é€šè¿‡map(_:)æ–¹æ³•æ·»åŠ åˆ°è¾“å‡ºæ•°ç»„ä¸­ã€‚ åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ä½¿ç”¨å°¾éšé—­åŒ…è¯­æ³•ï¼Œåœ¨é—­åŒ…æ”¯æŒçš„å‡½æ•°ä¹‹åç«‹å³æ•´é½åœ°å°è£…é—­åŒ…çš„åŠŸèƒ½ï¼Œè€Œæ— éœ€å°†æ•´ä¸ªé—­åŒ…åŒ…åŒ…åœ¨map(_:)æ–¹æ³•çš„å¤–æ‹¬å·ä¸­ã€‚ å¦‚æœä¸€ä¸ªå‡½æ•°éœ€è¦å¤šä¸ªé—­åŒ…ï¼Œåˆ™çœç•¥ç¬¬ä¸€ä¸ªå°¾éšé—­åŒ…çš„å‚æ•°æ ‡ç­¾ï¼Œå¹¶æ ‡è®°å‰©ä½™çš„å°¾éšé—­åŒ…ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„åŠŸèƒ½åŠ è½½ç…§ç‰‡åº“çš„å›¾ç‰‡ï¼š 1234567func loadPicture(from server: Server, completion: (Picture) -&gt; Void, onFailure: () -&gt; Void) &#123; if let picture = download(&quot;photo.jpg&quot;, from: server) &#123; completion(picture) &#125; else &#123; onFailure() &#125;&#125; å½“æ‚¨è°ƒç”¨æ­¤å‡½æ•°åŠ è½½å›¾ç‰‡æ—¶ï¼Œæ‚¨æä¾›äº†ä¸¤ä¸ªé—­åŒ…ã€‚ç¬¬ä¸€ä¸ªé—­åŒ…æ˜¯ä¸€ä¸ªå®Œæˆå¤„ç†ç¨‹åºï¼Œåœ¨æˆåŠŸä¸‹è½½åæ˜¾ç¤ºå›¾ç‰‡ã€‚ç¬¬äºŒä¸ªé—­åŒ…æ˜¯ä¸€ä¸ªé”™è¯¯å¤„ç†ç¨‹åºï¼Œå‘ç”¨æˆ·æ˜¾ç¤ºé”™è¯¯ã€‚ 12345loadPicture(from: someServer) &#123; picture in someView.currentPicture = picture&#125; onFailure: &#123; print(&quot;Couldn&#x27;t download the next picture.&quot;)&#125; åœ¨æœ¬ä¾‹ä¸­ï¼ŒloadPicture(from:completion:onFailure:)å‡½æ•°å°†å…¶ç½‘ç»œä»»åŠ¡å‘é€åˆ°åå°ï¼Œå¹¶åœ¨ç½‘ç»œä»»åŠ¡å®Œæˆåè°ƒç”¨ä¸¤ä¸ªå®Œæˆå¤„ç†ç¨‹åºä¹‹ä¸€ã€‚ä»¥è¿™ç§æ–¹å¼ç¼–å†™è¯¥åŠŸèƒ½å¯ä»¥è®©æ‚¨å¹²å‡€åœ°å°†è´Ÿè´£å¤„ç†ç½‘ç»œæ•…éšœçš„ä»£ç ä¸æˆåŠŸä¸‹è½½åæ›´æ–°ç”¨æˆ·ç•Œé¢çš„ä»£ç åˆ†å¼€ï¼Œè€Œä¸æ˜¯åªä½¿ç”¨ä¸€ä¸ªå¤„ç†è¿™ä¸¤ç§æƒ…å†µçš„é—­åŒ…ã€‚ æ•æ‰ä»·å€¼è§‚é—­åŒ…å¯ä»¥ä»å®šä¹‰å®ƒçš„å‘¨å›´ä¸Šä¸‹æ–‡ä¸­æ•è·å¸¸é‡å’Œå˜é‡ã€‚ç„¶åï¼Œé—­åŒ…å¯ä»¥ä»å…¶ä¸»ä½“å†…å¼•ç”¨å’Œä¿®æ”¹è¿™äº›å¸¸é‡å’Œå˜é‡çš„å€¼ï¼Œå³ä½¿å®šä¹‰å¸¸é‡å’Œå˜é‡çš„åŸå§‹èŒƒå›´ä¸å†å­˜åœ¨ã€‚ åœ¨Swiftä¸­ï¼Œå¯ä»¥æ•è·å€¼çš„æœ€ç®€å•é—­åŒ…å½¢å¼æ˜¯å†™åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸»ä½“ä¸­çš„åµŒå¥—å‡½æ•°ã€‚åµŒå¥—å‡½æ•°å¯ä»¥æ•è·å…¶å¤–éƒ¨å‡½æ•°çš„ä»»ä½•å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ•è·å¤–éƒ¨å‡½æ•°ä¸­å®šä¹‰çš„ä»»ä½•å¸¸é‡å’Œå˜é‡ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªåä¸ºmakeIncrementerçš„å‡½æ•°çš„ç¤ºä¾‹ï¼Œå®ƒåŒ…å«ä¸€ä¸ªåä¸ºincrementeråµŒå¥—å‡½æ•°ã€‚åµŒå¥—incrementer()å‡½æ•°ä»å…¶å‘¨å›´çš„ä¸Šä¸‹æ–‡æ•è·ä¸¤ä¸ªå€¼ï¼ŒrunningTotalå’Œamountã€‚æ•è·è¿™äº›å€¼åï¼ŒmakeIncrementerå°†ä½œä¸ºé—­åŒ…è¿”å›ï¼Œæ¯æ¬¡è°ƒç”¨æ—¶æŒ‰amountå¢åŠ runningTotalã€‚ 12345678func makeIncrementer(forIncrement amount: Int) -&gt; () -&gt; Int &#123; var runningTotal = 0 func incrementer() -&gt; Int &#123; runningTotal += amount return runningTotal &#125; return incrementer&#125; â€˜ makeIncrementer â€˜çš„è¿”å›ç±»å‹æ˜¯â€™ ()-&gt; Int â€˜ã€‚è¿™æ„å‘³ç€å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç®€å•çš„å€¼ã€‚å®ƒè¿”å›çš„å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½è¿”å›ä¸€ä¸ªâ€™ Int â€˜å€¼ã€‚è¦äº†è§£å‡½æ•°å¦‚ä½•è¿”å›å…¶ä»–å‡½æ•°ï¼Œè¯·å‚é˜…å‡½æ•°ç±»å‹ä½œä¸ºè¿”å›ç±»å‹ã€‚ makeIncrementer(forIncrement:)å‡½æ•°å®šä¹‰äº†ä¸€ä¸ªåä¸ºrunningTotalçš„æ•´æ•°å˜é‡ï¼Œä»¥å­˜å‚¨å°†è¿”å›çš„å¢é‡çš„å½“å‰è¿è¡Œæ€»æ•°ã€‚æ­¤å˜é‡åˆå§‹åŒ–å€¼ä¸º0ã€‚ makeIncrementer(forIncrement:)å‡½æ•°å…·æœ‰å•ä¸ªIntå‚æ•°ï¼Œå‚æ•°æ ‡ç­¾ä¸ºforIncrementï¼Œå‚æ•°åç§°ä¸ºamountã€‚ä¼ é€’ç»™æ­¤å‚æ•°çš„å‚æ•°å€¼æŒ‡å®šæ¯æ¬¡è°ƒç”¨è¿”å›çš„å¢é‡å‡½æ•°æ—¶ï¼ŒrunningTotalåº”è¯¥å¢åŠ å¤šå°‘ã€‚makeIncrementerå‡½æ•°å®šä¹‰äº†ä¸€ä¸ªåä¸ºincrementerçš„åµŒå¥—å‡½æ•°ï¼Œè¯¥å‡½æ•°æ‰§è¡Œå®é™…å¢é‡ã€‚æ­¤å‡½æ•°åªéœ€ä¸ºrunningTotalæ·»åŠ amountï¼Œç„¶åè¿”å›ç»“æœã€‚ å½“å­¤ç«‹åœ°è€ƒè™‘æ—¶ï¼ŒåµŒå¥—incrementer()å‡½æ•°å¯èƒ½çœ‹èµ·æ¥ä¸å¯»å¸¸ï¼š 1234func incrementer() -&gt; Int &#123; runningTotal += amount return runningTotal&#125; incrementer()å‡½æ•°æ²¡æœ‰ä»»ä½•å‚æ•°ï¼Œä½†å®ƒæŒ‡çš„æ˜¯åœ¨å…¶å‡½æ•°ä¸»ä½“å†…runningTotalå’Œamountã€‚å®ƒé€šè¿‡æ•è·å¯¹å‘¨å›´å‡½æ•°ä¸­runningTotalå’Œamountçš„å¼•ç”¨ï¼Œå¹¶åœ¨è‡ªå·±çš„åŠŸèƒ½ä½“ä¸­ä½¿ç”¨å®ƒä»¬æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚é€šè¿‡å¼•ç”¨æ•è·ç¡®ä¿åœ¨makeIncrementerè°ƒç”¨ç»“æŸæ—¶ï¼ŒrunningTotalå’Œamountä¸ä¼šæ¶ˆå¤±ï¼Œå¹¶ç¡®ä¿ä¸‹æ¬¡è°ƒç”¨incrementerå‡½æ•°æ—¶runningTotalå¯ç”¨ã€‚ æ³¨æ„ ä½œä¸ºä¼˜åŒ–ï¼Œå¦‚æœå€¼æ²¡æœ‰è¢«é—­åŒ…çªå˜ï¼Œå¹¶ä¸”å€¼åœ¨é—­åŒ…åˆ›å»ºåæ²¡æœ‰çªå˜ï¼Œåˆ™å¯ä»¥æ•è·å’Œå­˜å‚¨è¯¥å€¼çš„å‰¯æœ¬ã€‚ Swift è¿˜è´Ÿè´£å¤„ç†ä¸å†éœ€è¦çš„å˜é‡æ—¶æ¶‰åŠçš„æ‰€æœ‰å†…å­˜ç®¡ç†ã€‚ ä»¥ä¸‹æ˜¯makeIncrementeråœ¨èµ·ä½œç”¨çš„ä¸€ä¸ªä¾‹å­ï¼š 1let incrementByTen = makeIncrementer(forIncrement: 10) æ­¤ç¤ºä¾‹è®¾ç½®äº†ä¸€ä¸ªåä¸ºincrementByTençš„å¸¸é‡ï¼Œä»¥å¼•ç”¨æ¯æ¬¡è°ƒç”¨æ—¶ä¸ºå…¶runningTotalå˜é‡æ·»åŠ 10å¢é‡å‡½æ•°ã€‚å¤šæ¬¡è°ƒç”¨å‡½æ•°ä¼šæ˜¾ç¤ºæ­¤è¡Œä¸ºï¼š 123456incrementByTen()// returns a value of 10incrementByTen()// returns a value of 20incrementByTen()// returns a value of 30 å¦‚æœæ‚¨åˆ›å»ºç¬¬äºŒä¸ªå¢é‡å™¨ï¼Œå®ƒå°†å¯¹ä¸€ä¸ªæ–°çš„å•ç‹¬runningTotalå˜é‡æœ‰è‡ªå·±çš„å­˜å‚¨å¼•ç”¨ï¼š 123let incrementBySeven = makeIncrementer(forIncrement: 7)incrementBySeven()// returns a value of 7 è°ƒç”¨åŸå§‹å¢é‡å™¨ï¼ˆincrementByTenï¼‰ç»§ç»­å¢åŠ è‡ªå·±çš„runningTotalå˜é‡ï¼Œå¹¶ä¸”ä¸å½±å“incrementBySevenæ•è·çš„å˜é‡ï¼š 12incrementByTen()// returns a value of 40 æ³¨æ„ å¦‚æœæ‚¨ä¸ºç±»å®ä¾‹çš„å±æ€§åˆ†é…é—­åŒ…ï¼Œå¹¶ä¸”é—­åŒ…é€šè¿‡å¼•ç”¨å®ä¾‹æˆ–å…¶æˆå‘˜æ¥æ•è·è¯¥å®ä¾‹ï¼Œæ‚¨å°†åœ¨é—­åŒ…å’Œå®ä¾‹ä¹‹é—´åˆ›å»ºä¸€ä¸ªå¼ºå¤§çš„å¼•ç”¨å‘¨æœŸã€‚Swift ä½¿ç”¨é‡‡é›†åˆ—è¡¨æ¥æ‰“ç ´è¿™äº›å¼ºå¤§çš„å‚è€ƒå‘¨æœŸã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å…³é—­çš„å¼ºå‚è€ƒå‘¨æœŸã€‚ å…³é—­æ˜¯å‚è€ƒç±»å‹åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œâ€™ incrementBySeven â€˜å’Œâ€™ incrementByTen â€˜æ˜¯å¸¸é‡ï¼Œä½†æ˜¯è¿™äº›å¸¸é‡æ‰€å¼•ç”¨çš„é—­åŒ…ä»ç„¶èƒ½å¤Ÿå¢åŠ å®ƒä»¬æ•è·çš„â€™ runningTotal â€˜å˜é‡ã€‚è¿™æ˜¯å› ä¸ºå‡½æ•°å’Œé—­åŒ…éƒ½æ˜¯å¼•ç”¨ç±»å‹ã€‚ æ¯å½“æ‚¨å°†å‡½æ•°æˆ–é—­åŒ…åˆ†é…ç»™å¸¸é‡æˆ–å˜é‡æ—¶ï¼Œæ‚¨å®é™…ä¸Šéƒ½ä¼šå°†è¯¥å¸¸é‡æˆ–å˜é‡è®¾ç½®ä¸ºå¯¹å‡½æ•°æˆ–é—­åŒ…çš„å¼•ç”¨ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒincrementByTenæŒ‡çš„æ˜¯é—­åŒ…çš„é€‰æ‹©æ˜¯å¸¸é‡ï¼Œè€Œä¸æ˜¯é—­åŒ…æœ¬èº«çš„å†…å®¹ã€‚ è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¦‚æœæ‚¨å°†é—­åŒ…åˆ†é…ç»™ä¸¤ä¸ªä¸åŒçš„å¸¸é‡æˆ–å˜é‡ï¼Œè¿™ä¸¤ä¸ªå¸¸é‡æˆ–å˜é‡éƒ½å¼•ç”¨ç›¸åŒçš„é—­åŒ…ã€‚ 123456let alsoIncrementByTen = incrementByTenalsoIncrementByTen()// returns a value of 50incrementByTen()// returns a value of 60 ä¸Šé¢çš„ç¤ºä¾‹è¡¨æ˜ï¼Œè°ƒç”¨alsoIncrementByTenä¸è°ƒç”¨incrementByTenç›¸åŒã€‚ç”±äºå®ƒä»¬éƒ½å¼•ç”¨ç›¸åŒçš„é—­åŒ…ï¼Œå› æ­¤å®ƒä»¬éƒ½ä¼šå¢åŠ å¹¶è¿”å›ç›¸åŒçš„è¿è¡Œæ€»æ•°ã€‚ é€ƒé¿å…³é—­å½“é—­åŒ…ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œé—­åŒ…è¢«ç§°ä¸ºè½¬ä¹‰å‡½æ•°ï¼Œä½†åœ¨å‡½æ•°è¿”å›åè°ƒç”¨é—­åŒ…ã€‚å½“æ‚¨å£°æ˜ä¸€ä¸ªä»¥é—­åŒ…ä½œä¸ºå…¶å‚æ•°ä¹‹ä¸€çš„å‡½æ•°æ—¶ï¼Œæ‚¨å¯ä»¥åœ¨å‚æ•°ç±»å‹ä¹‹å‰ç¼–å†™@escapingï¼Œä»¥æŒ‡ç¤ºå…è®¸é—­åŒ…è½¬ä¹‰ã€‚ é—­åŒ…å¯ä»¥è½¬ä¹‰çš„ä¸€ç§æ–¹æ³•æ˜¯å­˜å‚¨åœ¨å‡½æ•°ä¹‹å¤–å®šä¹‰çš„å˜é‡ä¸­ã€‚ä¾‹å¦‚ï¼Œè®¸å¤šå¯åŠ¨å¼‚æ­¥æ“ä½œçš„å‡½æ•°å°†é—­åŒ…å‚æ•°ä½œä¸ºå®Œæˆå¤„ç†ç¨‹åºã€‚è¯¥å‡½æ•°åœ¨å¼€å§‹æ“ä½œåè¿”å›ï¼Œä½†åœ¨æ“ä½œå®Œæˆä¹‹å‰ä¸ä¼šè°ƒç”¨é—­åŒ…â€”â€”é—­åŒ…éœ€è¦è½¬ä¹‰ï¼Œä»¥ä¾¿ç¨åè°ƒç”¨ã€‚ä¾‹å¦‚ï¼š 1234var completionHandlers: [() -&gt; Void] = []func someFunctionWithEscapingClosure(completionHandler: @escaping () -&gt; Void) &#123; completionHandlers.append(completionHandler)&#125; someFunctionWithEscapingClosure(_:)å‡½æ•°ä»¥é—­åŒ…ä¸ºå‚æ•°ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°å‡½æ•°ä¹‹å¤–å£°æ˜çš„æ•°ç»„ä¸­ã€‚å¦‚æœæ‚¨æ²¡æœ‰ç”¨@escapingæ ‡è®°æ­¤å‡½æ•°çš„å‚æ•°ï¼Œæ‚¨å°†æ”¶åˆ°ç¼–è¯‘æ—¶é”™è¯¯ã€‚ å¦‚æœselfå¼•ç”¨ç±»çš„å®ä¾‹ï¼Œåˆ™å¼•ç”¨selfçš„è½¬ä¹‰é—­åŒ…éœ€è¦ç‰¹æ®Šè€ƒè™‘ã€‚åœ¨é€ƒé€¸é—­åˆä¸­æ•è·selfå¾ˆå®¹æ˜“æ„å¤–åœ°åˆ›å»ºä¸€ä¸ªå¼ºå¤§çš„å‚è€ƒå‘¨æœŸã€‚æœ‰å…³å‚è€ƒå‘¨æœŸçš„ä¿¡æ¯ï¼Œè¯·å‚é˜…è‡ªåŠ¨å‚è€ƒè®¡æ•°ã€‚ é€šå¸¸ï¼Œé—­åŒ…é€šè¿‡åœ¨é—­åŒ…æ­£æ–‡ä¸­ä½¿ç”¨å˜é‡æ¥éšå¼æ•è·å˜é‡ï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦æ˜¾å¼å˜é‡ã€‚å¦‚æœæ‚¨æƒ³æ•è·selfï¼Œè¯·åœ¨ä½¿ç”¨å®ƒæ—¶æ˜¾å¼å†™å…¥selfï¼Œæˆ–å°†selfåŒ…å«åœ¨é—­åŒ…çš„æ•è·åˆ—è¡¨ä¸­ã€‚å†™selfæ˜ç¡®å¯ä»¥è®©æ‚¨è¡¨è¾¾è‡ªå·±çš„æ„å›¾ï¼Œå¹¶æé†’æ‚¨ç¡®è®¤æ²¡æœ‰å‚è€ƒå‘¨æœŸã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œä¼ é€’ç»™someFunctionWithEscapingClosure(_:)çš„é—­åŒ…æ˜¾å¼å¼•ç”¨selfæ˜¾å¼ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¼ é€’ç»™someFunctionWithNonescapingClosure(_:)çš„é—­åŒ…æ˜¯ä¸€ä¸ªä¸å¯è½¬ä¹‰é—­åŒ…ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥éšå¼å¼•ç”¨selfã€‚ 1234567891011121314151617181920func someFunctionWithNonescapingClosure(closure: () -&gt; Void) &#123; closure()&#125;class SomeClass &#123; var x = 10 func doSomething() &#123; someFunctionWithEscapingClosure &#123; self.x = 100 &#125; someFunctionWithNonescapingClosure &#123; x = 200 &#125; &#125;&#125;let instance = SomeClass()instance.doSomething()print(instance.x)// Prints &quot;200&quot;completionHandlers.first?()print(instance.x)// Prints &quot;100&quot; ä»¥ä¸‹æ˜¯doSomething()çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œé€šè¿‡å°†å…¶åŒ…å«åœ¨é—­åŒ…çš„æ•è·åˆ—è¡¨ä¸­æ¥æ•è·selfï¼Œç„¶åéšå«åœ°å¼•ç”¨selfï¼š 1234567class SomeOtherClass &#123; var x = 10 func doSomething() &#123; someFunctionWithEscapingClosure &#123; [self] in x = 100 &#125; someFunctionWithNonescapingClosure &#123; x = 200 &#125; &#125;&#125; å¦‚æœselfæ˜¯ç»“æ„æˆ–æšä¸¾çš„å®ä¾‹ï¼Œæ‚¨å¯ä»¥å§‹ç»ˆéšå¼å¼•ç”¨selfã€‚ç„¶è€Œï¼Œå½“selfæ˜¯ç»“æ„æˆ–æšä¸¾çš„å®ä¾‹æ—¶ï¼Œè½¬ä¹‰é—­åŒ…æ— æ³•æ•è·å¯¹selfçš„å¯å˜å¼•ç”¨ã€‚ç»“æ„å’Œæšä¸¾ä¸å…è®¸å…±äº«å¯å˜æ€§ï¼Œæ­£å¦‚ç»“æ„å’Œæšä¸¾æ˜¯å€¼ç±»å‹ä¸­è®¨è®ºçš„é‚£æ ·ã€‚ 1234567struct SomeStruct &#123; var x = 10 mutating func doSomething() &#123; someFunctionWithNonescapingClosure &#123; x = 200 &#125; // Ok someFunctionWithEscapingClosure &#123; x = 100 &#125; // Error &#125;&#125; ä¸Šé¢ç¤ºä¾‹ä¸­å¯¹someFunctionWithEscapingClosureå‡½æ•°çš„è°ƒç”¨æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå®ƒä½äºçªå˜æ–¹æ³•ä¸­ï¼Œå› æ­¤selfæ˜¯å¯å˜çš„ã€‚è¿™è¿åäº†è§„é€ƒé€¸é—­åŒ…ä¸èƒ½æ•è·ç»“æ„å¯¹selfçš„å¯å˜å¼•ç”¨çš„è§„åˆ™ã€‚ è‡ªåŠ¨å…³é—­è‡ªåŠ¨é—­åŒ…æ˜¯è‡ªåŠ¨åˆ›å»ºçš„é—­åŒ…ï¼Œç”¨äºåŒ…è£…ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°çš„è¡¨è¾¾å¼ã€‚å®ƒä¸éœ€è¦ä»»ä½•å‚æ•°ï¼Œå½“è°ƒç”¨å®ƒæ—¶ï¼Œå®ƒä¼šè¿”å›åŒ…è£¹åœ¨é‡Œé¢çš„è¡¨è¾¾å¼çš„å€¼ã€‚è¿™ç§è¯­æ³•ä¾¿åˆ©æ€§å…è®¸æ‚¨é€šè¿‡ç¼–å†™æ­£æ€è¡¨è¾¾å¼è€Œä¸æ˜¯æ˜¾å¼é—­åŒ…æ¥çœç•¥å‡½æ•°å‚æ•°å‘¨å›´çš„å¤§æ‹¬å·ã€‚ é€šå¸¸è°ƒç”¨å¸¦æœ‰è‡ªåŠ¨é—­åŒ…çš„å‡½æ•°ï¼Œä½†å®ç°è¿™ç±»å‡½æ•°å¹¶ä¸å¸¸è§ã€‚ä¾‹å¦‚ï¼Œassert(condition:message:file:line:)å‡½æ•°çš„conditionå’Œmessageå‚æ•°æ¥å—ä¸€ä¸ªè‡ªåŠ¨é—­åŒ…;å®ƒçš„â€œconditionâ€å‚æ•°ä»…åœ¨è°ƒè¯•ç‰ˆæœ¬ä¸­è®¡ç®—ï¼Œè€Œå®ƒçš„â€œmessageâ€å‚æ•°ä»…åœ¨â€œconditionâ€ä¸ºâ€œfalseâ€æ—¶è®¡ç®—ã€‚ è‡ªåŠ¨å…³é—­å…è®¸æ‚¨å»¶è¿Ÿè¯„ä¼°ï¼Œå› ä¸ºåœ¨æ‚¨è°ƒç”¨å…³é—­ä¹‹å‰ï¼Œå†…éƒ¨ä»£ç ä¸ä¼šè¿è¡Œã€‚å»¶è¿Ÿè¯„ä¼°å¯¹äºå…·æœ‰å‰¯ä½œç”¨æˆ–è®¡ç®—æˆæœ¬çš„ä»£ç éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨æ§åˆ¶ä»£ç ä½•æ—¶è¿›è¡Œè¯„ä¼°ã€‚ä»¥ä¸‹ä»£ç æ˜¾ç¤ºäº†å…³é—­å¦‚ä½•å»¶è¿Ÿè¯„ä¼°ã€‚ 123456789101112var customersInLine = [&quot;Chris&quot;, &quot;Alex&quot;, &quot;Ewa&quot;, &quot;Barry&quot;, &quot;Daniella&quot;]print(customersInLine.count)// Prints &quot;5&quot;let customerProvider = &#123; customersInLine.remove(at: 0) &#125;print(customersInLine.count)// Prints &quot;5&quot;print(&quot;Now serving \\(customerProvider())!&quot;)// Prints &quot;Now serving Chris!&quot;print(customersInLine.count)// Prints &quot;4&quot; å³ä½¿é—­åŒ…å†…çš„ä»£ç åˆ é™¤äº†customersInLineæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä½†åœ¨å®é™…è°ƒç”¨é—­åŒ…ä¹‹å‰ï¼Œæ•°ç»„å…ƒç´ ä¹Ÿä¸ä¼šè¢«åˆ é™¤ã€‚å¦‚æœä»æœªè°ƒç”¨é—­åŒ…ï¼Œåˆ™æ°¸è¿œä¸ä¼šè®¡ç®—é—­åŒ…å†…çš„è¡¨è¾¾å¼ï¼Œè¿™æ„å‘³ç€æ°¸è¿œä¸ä¼šåˆ é™¤æ•°ç»„å…ƒç´ ã€‚è¯·æ³¨æ„ï¼ŒcustomerProviderçš„ç±»å‹ä¸æ˜¯Stringï¼Œè€Œæ˜¯()-&gt;Stringâ€”â€”ä¸€ä¸ªæ²¡æœ‰è¿”å›å­—ç¬¦ä¸²çš„å‚æ•°çš„å‡½æ•°ã€‚ å½“æ‚¨å°†é—­åŒ…ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œæ‚¨å°†è·å¾—ç›¸åŒçš„å»¶è¿Ÿè¯„ä¼°è¡Œä¸ºã€‚ 123456// customersInLine is [&quot;Alex&quot;, &quot;Ewa&quot;, &quot;Barry&quot;, &quot;Daniella&quot;]func serve(customer customerProvider: () -&gt; String) &#123; print(&quot;Now serving \\(customerProvider())!&quot;)&#125;serve(customer: &#123; customersInLine.remove(at: 0) &#125; )// Prints &quot;Now serving Alex!&quot; ä¸Šé¢æ¸…å•ä¸­çš„â€™ serve(customer:) â€˜å‡½æ•°æ¥å—ä¸€ä¸ªæ˜¾å¼çš„é—­åŒ…ï¼Œè¯¥é—­åŒ…è¿”å›å®¢æˆ·çš„åå­—ã€‚ä¸‹é¢çš„â€™ serve(customer:) â€˜ç‰ˆæœ¬æ‰§è¡Œäº†ç›¸åŒçš„æ“ä½œï¼Œä½†å®ƒæ²¡æœ‰é‡‡ç”¨æ˜¾å¼é—­åŒ…ï¼Œè€Œæ˜¯é€šè¿‡ä½¿ç”¨â€™ @autoclosure â€˜å±æ€§æ ‡è®°å…¶å‚æ•°çš„ç±»å‹æ¥æ¥å—ä¸€ä¸ªè‡ªåŠ¨é—­åŒ…ã€‚ç°åœ¨ä½ å¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå°±å¥½åƒå®ƒæœ‰ä¸€ä¸ªâ€™ String â€˜å‚æ•°è€Œä¸æ˜¯ä¸€ä¸ªé—­åŒ…ä¸€æ ·ã€‚å‚æ•°ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºé—­åŒ…ï¼Œå› ä¸ºâ€™ customerProvider â€˜å‚æ•°çš„ç±»å‹æ˜¯ç”¨â€™ @autoclosure â€˜å±æ€§æ ‡è®°çš„ã€‚ 123456// customersInLine is [&quot;Ewa&quot;, &quot;Barry&quot;, &quot;Daniella&quot;]func serve(customer customerProvider: @autoclosure () -&gt; String) &#123; print(&quot;Now serving \\(customerProvider())!&quot;)&#125;serve(customer: customersInLine.remove(at: 0))// Prints &quot;Now serving Ewa!&quot; æ³¨æ„ è¿‡åº¦ä½¿ç”¨è‡ªåŠ¨å…³é—­å¯èƒ½ä¼šä½¿æ‚¨çš„ä»£ç éš¾ä»¥ç†è§£ã€‚ä¸Šä¸‹æ–‡å’Œå‡½æ•°åç§°åº”æ˜ç¡®è¡¨ç¤ºæ­£åœ¨æ¨è¿Ÿè¯„ä¼°ã€‚ å¦‚æœæ‚¨æƒ³è¦ä¸€ä¸ªå…è®¸è½¬ä¹‰çš„è‡ªåŠ¨å…³é—­ï¼Œè¯·ä½¿ç”¨@autoclosureå’Œ@escapingå±æ€§ã€‚@escapingå±æ€§åœ¨ä¸Šæ–‡çš„â€œé€ƒé¿å…³é—­â€ä¸­è¿›è¡Œäº†æè¿°ã€‚ 123456789101112131415// customersInLine is [&quot;Barry&quot;, &quot;Daniella&quot;]var customerProviders: [() -&gt; String] = []func collectCustomerProviders(_ customerProvider: @autoclosure @escaping () -&gt; String) &#123; customerProviders.append(customerProvider)&#125;collectCustomerProviders(customersInLine.remove(at: 0))collectCustomerProviders(customersInLine.remove(at: 0))print(&quot;Collected \\(customerProviders.count) closures.&quot;)// Prints &quot;Collected 2 closures.&quot;for customerProvider in customerProviders &#123; print(&quot;Now serving \\(customerProvider())!&quot;)&#125;// Prints &quot;Now serving Barry!&quot;// Prints &quot;Now serving Daniella!&quot; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒcollectCustomerProviders(_:)å‡½æ•°å°†é—­åŒ…é™„åŠ åˆ°customerProvidersæ•°ç»„ä¸­ï¼Œè€Œä¸æ˜¯å°†ä¼ é€’ç»™å®ƒçš„é—­åŒ…ä½œä¸ºå…¶customerProviderå‚æ•°ã€‚æ•°ç»„å£°æ˜åœ¨å‡½æ•°èŒƒå›´ä¹‹å¤–ï¼Œè¿™æ„å‘³ç€æ•°ç»„ä¸­çš„é—­åŒ…å¯ä»¥åœ¨å‡½æ•°è¿”å›åæ‰§è¡Œã€‚å› æ­¤ï¼Œå¿…é¡»å…è®¸customerProviderå‚æ•°çš„å€¼è½¬ä¹‰å‡½æ•°çš„èŒƒå›´ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ åµŒå¥—ç±»å‹","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-åµŒå¥—ç±»å‹","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-åµŒå¥—ç±»å‹/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%B5%8C%E5%A5%97%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/NestedTypes.html åˆ›å»ºæšä¸¾é€šå¸¸æ˜¯ä¸ºäº†æ”¯æŒç‰¹å®šç±»æˆ–ç»“æ„çš„åŠŸèƒ½ã€‚åŒæ ·ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å®šä¹‰çº¯å±å®ç”¨ç¨‹åºç±»å’Œç»“æ„ï¼Œä»¥ä¾¿åœ¨æ›´å¤æ‚ç±»å‹çš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼ŒSwiftä½¿æ‚¨èƒ½å¤Ÿå®šä¹‰åµŒå¥—ç±»å‹ï¼Œä»è€Œåœ¨å®ƒä»¬æ”¯æŒçš„ç±»å‹çš„å®šä¹‰ä¸­åµŒå¥—æ”¯æŒæšä¸¾ã€ç±»å’Œç»“æ„ã€‚ è¦å°†ç±»å‹åµŒå¥—åœ¨å¦ä¸€ç§ç±»å‹ä¸­ï¼Œè¯·åœ¨å®ƒæ”¯æŒçš„ç±»å‹çš„å¤–éƒ¨å¤§æ‹¬å·ä¸­å†™å…¥å…¶å®šä¹‰ã€‚ç±»å‹å¯ä»¥åµŒå¥—åˆ°æ‰€éœ€çš„ä»»æ„çº§åˆ«ã€‚ åµŒå¥—ç±»å‹åœ¨è¡ŒåŠ¨ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºBlackjackCardç»“æ„ï¼Œè¯¥ç»“æ„æ¨¡æ‹Ÿäº†äºŒåä¸€ç‚¹æ¸¸æˆä¸­ä½¿ç”¨çš„æ‰‘å…‹ç‰Œã€‚BlackjackCardç»“æ„åŒ…å«ä¸¤ç§åµŒå¥—æšä¸¾ç±»å‹ï¼Œç§°ä¸ºSuitå’ŒRankã€‚ åœ¨äºŒåä¸€ç‚¹ä¸­ï¼ŒAceå¡çš„ä»·å€¼ä¸º1æˆ–11ã€‚æ­¤åŠŸèƒ½ç”±ä¸€ä¸ªåä¸ºValuesç»“æ„è¡¨ç¤ºï¼Œè¯¥ç»“æ„åµŒå¥—åœ¨Rankæšä¸¾ä¸­ï¼š struct BlackjackCard { â€‹ &#x2F;&#x2F; nested Suit enumeration â€‹ enum Suit: Character { â€‹ case spades &#x3D; â€œâ™ â€, hearts &#x3D; â€œâ™¡â€, diamonds &#x3D; â€œâ™¢â€, clubs &#x3D; â€œâ™£â€ â€‹ } â€‹ &#x2F;&#x2F; nested Rank enumeration â€‹ enum Rank: Int { â€‹ case two &#x3D; 2, three, four, five, six, seven, eight, nine, ten â€‹ case jack, queen, king, ace â€‹ struct Values { â€‹ let first: Int, second: Int? â€‹ } â€‹ var values: Values { â€‹ switch self { â€‹ case .ace: â€‹ return Values(first: 1, second: 11) â€‹ case .jack, .queen, .king: â€‹ return Values(first: 10, second: nil) â€‹ default: â€‹ return Values(first: self.rawValue, second: nil) â€‹ } â€‹ } â€‹ } â€‹ &#x2F;&#x2F; BlackjackCard properties and methods â€‹ let rank: Rank, suit: Suit â€‹ var description: String { â€‹ var output &#x3D; â€œsuit is (suit.rawValue),â€ â€‹ output +&#x3D; â€œ value is (rank.values.first)â€ â€‹ if let second &#x3D; rank.values.second { â€‹ output +&#x3D; â€œ or (second)â€ â€‹ } â€‹ return output â€‹ } } Suitæšä¸¾æè¿°äº†å››å¥—å¸¸è§çš„æ‰‘å…‹ç‰Œå¥—è£…ï¼Œä»¥åŠä»£è¡¨å…¶ç¬¦å·çš„åŸå§‹Characterå€¼ã€‚ Rankæšä¸¾æè¿°äº†13ä¸ªå¯èƒ½çš„æ‰‘å…‹ç‰Œæ’åï¼Œä»¥åŠè¡¨ç¤ºå…¶é¢å€¼çš„åŸå§‹Intå€¼ã€‚ï¼ˆæ­¤åŸå§‹Intå€¼ä¸ç”¨äºJackã€Queenã€Kingå’ŒAceå¡ã€‚ï¼‰ å¦‚ä¸Šæ‰€è¿°ï¼ŒRankæšä¸¾å®šä¹‰äº†è‡ªå·±çš„è¿›ä¸€æ­¥åµŒå¥—ç»“æ„ï¼Œç§°ä¸ºValuesã€‚è¿™ç§ç»“æ„æ¦‚æ‹¬äº†ä¸€ä¸ªäº‹å®ï¼Œå³å¤§å¤šæ•°å¡ç‰‡åªæœ‰ä¸€ä¸ªå€¼ï¼Œä½†Aceå¡æœ‰ä¸¤ä¸ªå€¼ã€‚Valuesç»“æ„å®šä¹‰äº†ä¸¤ä¸ªå±æ€§æ¥è¡¨ç¤ºè¿™ä¸€ç‚¹ï¼š firstï¼Œç±»å‹Int secondï¼Œç±»å‹ä¸ºInt?ï¼Œæˆ–â€œoptional Intâ€ Rankè¿˜å®šä¹‰äº†ä¸€ä¸ªè®¡ç®—å±æ€§ï¼Œå³valuesï¼Œå®ƒè¿”å›Valuesç»“æ„çš„å®ä¾‹ã€‚æ­¤è®¡ç®—å±æ€§è€ƒè™‘å¡çš„æ’åï¼Œå¹¶æ ¹æ®æ’åä½¿ç”¨é€‚å½“çš„å€¼åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„Valueså®ä¾‹ã€‚å®ƒä¸ºjackã€queenã€kingå’Œaceä½¿ç”¨ç‰¹æ®Šå€¼ã€‚å¯¹äºæ•°å­—å¡ï¼Œå®ƒä½¿ç”¨æ’åçš„åŸå§‹Intå€¼ã€‚ BlackjackCardç»“æ„æœ¬èº«æœ‰ä¸¤ä¸ªå±æ€§â€”â€”rankå’Œsuitã€‚å®ƒè¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸ºdescriptionè®¡ç®—å±æ€§ï¼Œè¯¥å±æ€§ä½¿ç”¨rankå’Œsuitä¸­å­˜å‚¨çš„å€¼æ¥æ„å»ºå¡ç‰‡åç§°å’Œå€¼çš„æè¿°ã€‚descriptionå±æ€§ä½¿ç”¨å¯é€‰ç»‘å®šæ¥æ£€æŸ¥æ˜¯å¦æœ‰ç¬¬äºŒä¸ªå€¼è¦æ˜¾ç¤ºï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¸ºç¬¬äºŒä¸ªå€¼æ’å…¥é¢å¤–çš„æè¿°ç»†èŠ‚ã€‚ ç”±äºBlackjackCardæ˜¯ä¸€ä¸ªæ²¡æœ‰è‡ªå®šä¹‰åˆå§‹åŒ–å™¨çš„ç»“æ„ï¼Œå› æ­¤å®ƒæœ‰ä¸€ä¸ªéšå¼æˆå‘˜åˆå§‹åŒ–å™¨ï¼Œå¦‚ç»“æ„ç±»å‹çš„æˆå‘˜åˆå§‹åŒ–å™¨ä¸­æ‰€è¿°ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤åˆå§‹åŒ–å™¨åˆå§‹åŒ–åä¸ºtheAceOfSpadesçš„æ–°å¸¸é‡ï¼š let theAceOfSpades &#x3D; BlackjackCard(rank: .ace, suit: .spades) print(â€œtheAceOfSpades: (theAceOfSpades.description)â€) &#x2F;&#x2F; Prints â€œtheAceOfSpades: suit is â™ , value is 1 or 11â€ å³ä½¿Rankå’ŒSuitåµŒå¥—åœ¨BlackjackCardä¸­ï¼Œå®ƒä»¬çš„ç±»å‹å¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æ¨æ–­å‡ºæ¥ï¼Œå› æ­¤æ­¤å®ä¾‹çš„åˆå§‹åŒ–åªèƒ½é€šè¿‡å®ƒä»¬çš„å¤§å°å†™åç§°ï¼ˆ.aceå’Œ.spadesï¼‰æ¥å¼•ç”¨æšä¸¾æ¡ˆä¾‹ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œdescriptionå±æ€§æ­£ç¡®åœ°æŠ¥å‘Šé»‘æ¡ƒç‹ç‰Œçš„å€¼ä¸º1æˆ–11ã€‚ æåŠåµŒå¥—ç±»å‹è¦åœ¨å…¶å®šä¹‰ä¸Šä¸‹æ–‡ä¹‹å¤–ä½¿ç”¨åµŒå¥—ç±»å‹ï¼Œè¯·åœ¨å…¶åç§°å‰åŠ ä¸ŠåµŒå¥—åœ¨å…¶ä¸­çš„ç±»å‹åç§°ï¼š let heartsSymbol &#x3D; BlackjackCard.Suit.hearts.rawValue &#x2F;&#x2F; heartsSymbol is â€œâ™¡â€ å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œè¿™ä½¿Suitã€Rankå’ŒValuesçš„åç§°å¯ä»¥æ•…æ„ä¿æŒç®€çŸ­ï¼Œå› ä¸ºå®ƒä»¬çš„åå­—è‡ªç„¶ä¼šè¢«å®šä¹‰å®ƒä»¬çš„ä¸Šä¸‹æ–‡æ‰€é™å®šã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ æ‰©å±•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-æ‰©å±•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-æ‰©å±•/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E6%89%A9%E5%B1%95/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Extensions.html æ‰©å±•ä¸ºç°æœ‰ç±»ã€ç»“æ„ã€æšä¸¾æˆ–åè®®ç±»å‹æ·»åŠ äº†æ–°åŠŸèƒ½ã€‚è¿™åŒ…æ‹¬æ‰©å±•æ‚¨æ— æ³•è®¿é—®åŸå§‹æºä»£ç ï¼ˆç§°ä¸ºè¿½æº¯å»ºæ¨¡ï¼‰çš„ç±»å‹çš„èƒ½åŠ›ã€‚æ‰©å±•ç±»ä¼¼äºObjective-Cä¸­çš„ç±»åˆ«ã€‚ï¼ˆä¸Objective-Cç±»åˆ«ä¸åŒï¼ŒSwiftæ‰©å±•æ²¡æœ‰åç§°ã€‚ï¼‰ Swiftä¸­çš„æ‰©å±•å¯ä»¥ï¼š æ·»åŠ è®¡ç®—å®ä¾‹å±æ€§å’Œè®¡ç®—ç±»å‹å±æ€§ å®šä¹‰å®ä¾‹æ–¹æ³•å’Œç±»å‹æ–¹æ³• æä¾›æ–°çš„åˆå§‹åŒ–å™¨ å®šä¹‰ä¸‹æ ‡ å®šä¹‰å’Œä½¿ç”¨æ–°çš„åµŒå¥—ç±»å‹ ä½¿ç°æœ‰ç±»å‹ç¬¦åˆåè®® åœ¨ Swift ä¸­ï¼Œæ‚¨ç”šè‡³å¯ä»¥æ‰©å±•åè®®ï¼Œä»¥æä¾›å…¶è¦æ±‚çš„å®ç°ï¼Œæˆ–æ·»åŠ ç¬¦åˆè¦æ±‚çš„ç±»å‹å¯ä»¥åˆ©ç”¨çš„å…¶ä»–åŠŸèƒ½ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…åè®®æ‰©å±•ã€‚ æ³¨æ„ æ‰©å±•å¯ä»¥ä¸ºç±»å‹æ·»åŠ æ–°åŠŸèƒ½ï¼Œä½†å®ƒä»¬ä¸èƒ½è¦†ç›–ç°æœ‰åŠŸèƒ½ã€‚ æ‰©å±•è¯­æ³•ä½¿ç”¨extensionå…³é”®å­—å£°æ˜æ‰©å±•ï¼š extension SomeType { â€‹ &#x2F;&#x2F; new functionality to add to SomeType goes here } æ‰©å±•å¯ä»¥æ‰©å±•ç°æœ‰ç±»å‹ï¼Œä½¿å…¶é‡‡ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªåè®®ã€‚è¦æ·»åŠ åè®®ä¸€è‡´æ€§ï¼Œæ‚¨ç¼–å†™åè®®åç§°çš„æ–¹å¼ä¸ä¸ºç±»æˆ–ç»“æ„ç¼–å†™åè®®åç§°çš„æ–¹å¼ç›¸åŒï¼š extension SomeType: SomeProtocol, AnotherProtocol { â€‹ &#x2F;&#x2F; implementation of protocol requirements goes here } ä»¥è¿™ç§æ–¹å¼æ·»åŠ åè®®ä¸€è‡´æ€§åœ¨ä½¿ç”¨æ‰©å±•æ·»åŠ åè®®ä¸€è‡´æ€§ä¸­è¿›è¡Œäº†æè¿°ã€‚ æ‰©å±•å¯ç”¨äºæ‰©å±•ç°æœ‰çš„æ³›å‹ç±»å‹ï¼Œå¦‚æ‰©å±•é€šç”¨ç±»å‹ä¸­æ‰€è¿°ã€‚æ‚¨è¿˜å¯ä»¥æ‰©å±•æ³›å‹ç±»å‹ä»¥æœ‰æ¡ä»¶åœ°æ·»åŠ åŠŸèƒ½ï¼Œå¦‚å¸¦æœ‰é€šç”¨Whereå­å¥çš„æ‰©å±•ä¸­æ‰€è¿°ã€‚ æ³¨æ„ å¦‚æœæ‚¨å®šä¹‰äº†ä¸€ä¸ªæ‰©å±•æ¥å‘ç°æœ‰ç±»å‹æ·»åŠ æ–°åŠŸèƒ½ï¼Œåˆ™è¯¥æ–°åŠŸèƒ½å°†åœ¨è¯¥ç±»å‹çš„æ‰€æœ‰ç°æœ‰å®ä¾‹ä¸Šå¯ç”¨ï¼Œå³ä½¿å®ƒä»¬æ˜¯åœ¨å®šä¹‰æ‰©å±•ä¹‹å‰åˆ›å»ºçš„ã€‚ è®¡ç®—å±æ€§æ‰©å±•å¯ä»¥å°†è®¡ç®—å®ä¾‹å±æ€§å’Œè®¡ç®—ç±»å‹å±æ€§æ·»åŠ åˆ°ç°æœ‰ç±»å‹ä¸­ã€‚æ­¤ç¤ºä¾‹ä¸ºSwiftçš„å†…ç½®Doubleç±»å‹æ·»åŠ äº†äº”ä¸ªè®¡ç®—å®ä¾‹å±æ€§ï¼Œä¸ºä½¿ç”¨è·ç¦»å•å…ƒæä¾›åŸºæœ¬æ”¯æŒï¼š extension Double { â€‹ var km: Double { return self * 1_000.0 } â€‹ var m: Double { return self } â€‹ var cm: Double { return self &#x2F; 100.0 } â€‹ var mm: Double { return self &#x2F; 1_000.0 } â€‹ var ft: Double { return self &#x2F; 3.28084 } } let oneInch &#x3D; 25.4.mm print(â€œOne inch is (oneInch) metersâ€) &#x2F;&#x2F; Prints â€œOne inch is 0.0254 metersâ€ let threeFeet &#x3D; 3.ft print(â€œThree feet is (threeFeet) metersâ€) &#x2F;&#x2F; Prints â€œThree feet is 0.914399970739201 metersâ€ è¿™äº›è®¡ç®—å±æ€§è¡¨ç¤ºï¼ŒDoubleå€¼åº”è¢«è§†ä¸ºä¸€å®šçš„é•¿åº¦å•ä½ã€‚è™½ç„¶å®ƒä»¬æ˜¯ä½œä¸ºè®¡ç®—å±æ€§å®ç°çš„ï¼Œä½†è¿™äº›å±æ€§çš„åç§°å¯ä»¥é™„åŠ åˆ°å¸¦æœ‰ç‚¹è¯­æ³•çš„æµ®ç‚¹å­—é¢å€¼ä¸­ï¼Œä½œä¸ºä½¿ç”¨è¯¥å­—é¢å€¼æ‰§è¡Œè·ç¦»è½¬æ¢çš„ä¸€ç§æ–¹å¼ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œ1.0çš„Doubleå€¼è¢«è§†ä¸ºè¡¨ç¤ºâ€œä¸€ç±³â€ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆmè®¡ç®—å±æ€§è¿”å›selfâ€”â€”è¡¨è¾¾å¼1.mè¢«è®¤ä¸ºæ˜¯è®¡ç®—aDoubleå€¼1.0çš„åŸå› ã€‚ å…¶ä»–å•ä½éœ€è¦ä¸€äº›è½¬æ¢æ‰èƒ½è¡¨ç¤ºä¸ºä»¥ç±³ä¸ºå•ä½çš„å€¼ã€‚ä¸€å…¬é‡Œä¸1000ç±³ç›¸åŒï¼Œå› æ­¤è®¡ç®—kmå±æ€§å°†å€¼ä¹˜ä»¥1_000.00ï¼Œè½¬æ¢ä¸ºä»¥ç±³ä¸ºå•ä½çš„æ•°å­—ã€‚åŒæ ·ï¼Œä¸€ç±³æœ‰3.28084è‹±å°ºï¼Œå› æ­¤ftè®¡ç®—å±æ€§å°†åº•å±‚Doubleå€¼é™¤ä»¥3.28084ï¼Œå°†å…¶ä»è‹±å°ºè½¬æ¢ä¸ºç±³ã€‚ è¿™äº›å±æ€§æ˜¯åªè¯»è®¡ç®—å±æ€§ï¼Œå› æ­¤å®ƒä»¬åœ¨æ²¡æœ‰getå…³é”®å­—çš„æƒ…å†µä¸‹è¡¨ç¤ºï¼Œä»¥ä¾¿ç®€çŸ­ã€‚å®ƒä»¬çš„è¿”å›å€¼ä¸ºDoubleç±»å‹ï¼Œæ— è®ºä½•æ—¶æ¥å—Doubleï¼Œéƒ½å¯ä»¥åœ¨æ•°å­¦è®¡ç®—ä¸­ä½¿ç”¨ï¼š let aMarathon &#x3D; 42.km + 195.m print(â€œA marathon is (aMarathon) meters longâ€) &#x2F;&#x2F; Prints â€œA marathon is 42195.0 meters longâ€ æ³¨æ„ æ‰©å±•å¯ä»¥æ·»åŠ æ–°çš„è®¡ç®—å±æ€§ï¼Œä½†å®ƒä»¬ä¸èƒ½æ·»åŠ å­˜å‚¨çš„å±æ€§ï¼Œä¹Ÿä¸èƒ½å‘ç°æœ‰å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿå™¨ã€‚ åˆå§‹åŒ–å™¨æ‰©å±•å¯ä»¥ä¸ºç°æœ‰ç±»å‹æ·»åŠ æ–°çš„åˆå§‹åŒ–å™¨ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿæ‰©å±•å…¶ä»–ç±»å‹ï¼Œä»¥æ¥å—è‡ªå·±çš„è‡ªå®šä¹‰ç±»å‹ä½œä¸ºåˆå§‹åŒ–å‚æ•°ï¼Œæˆ–æä¾›æœªä½œä¸ºç±»å‹åŸå§‹å®ç°çš„ä¸€éƒ¨åˆ†çš„å…¶ä»–åˆå§‹åŒ–é€‰é¡¹ã€‚ æ‰©å±•å¯ä»¥å‘ç±»æ·»åŠ æ–°çš„æ–¹ä¾¿åˆå§‹åŒ–å™¨ï¼Œä½†å®ƒä»¬ä¸èƒ½å‘ç±»æ·»åŠ æ–°çš„æŒ‡å®šåˆå§‹åŒ–å™¨æˆ–å»åˆå§‹åŒ–å™¨ã€‚æŒ‡å®šçš„åˆå§‹åŒ–å™¨å’Œå»åˆå§‹åŒ–å™¨å¿…é¡»å§‹ç»ˆç”±åŸå§‹ç±»å®ç°æä¾›ã€‚ å¦‚æœæ‚¨ä½¿ç”¨æ‰©å±•ç¨‹åºå°†åˆå§‹åŒ–å™¨æ·»åŠ åˆ°ä¸ºå…¶æ‰€æœ‰å­˜å‚¨å±æ€§æä¾›é»˜è®¤å€¼ä¸”ä¸å®šä¹‰ä»»ä½•è‡ªå®šä¹‰åˆå§‹åŒ–å™¨çš„å€¼ç±»å‹ä¸­ï¼Œæ‚¨å¯ä»¥ä»æ‰©å±•çš„åˆå§‹åŒ–å™¨ä¸­è°ƒç”¨è¯¥å€¼ç±»å‹çš„é»˜è®¤åˆå§‹åŒ–å™¨å’Œæˆå‘˜åˆå§‹åŒ–å™¨ã€‚å¦‚æœæ‚¨å°†åˆå§‹åŒ–å™¨å†™ä¸ºå€¼ç±»å‹åŸå§‹å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™æƒ…å†µå¹¶éå¦‚æ­¤ï¼Œå¦‚å€¼ç±»å‹çš„åˆå§‹åŒ–å§”æ‰˜æ‰€è¿°ã€‚ å¦‚æœæ‚¨ä½¿ç”¨æ‰©å±•ç¨‹åºå°†åˆå§‹åŒ–å™¨æ·»åŠ åˆ°å¦ä¸€ä¸ªæ¨¡å—ä¸­å£°æ˜çš„ç»“æ„ä¸­ï¼Œåˆ™æ–°åˆå§‹åŒ–å™¨åœ¨ä»å®šä¹‰æ¨¡å—è°ƒç”¨åˆå§‹åŒ–å™¨ä¹‹å‰æ— æ³•è®¿é—®selfã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰Rectç»“æ„æ¥è¡¨ç¤ºå‡ ä½•çŸ©å½¢ã€‚è¯¥ç¤ºä¾‹è¿˜å®šä¹‰äº†ä¸¤ä¸ªåä¸ºSizeå’ŒPointçš„æ”¯æŒç»“æ„ï¼Œè¿™ä¸¤ä¸ªç»“æ„éƒ½ä¸ºå…¶æ‰€æœ‰å±æ€§æä¾›0.0çš„é»˜è®¤å€¼ï¼š struct Size { â€‹ var width &#x3D; 0.0, height &#x3D; 0.0 } struct Point { â€‹ var x &#x3D; 0.0, y &#x3D; 0.0 } struct Rect { â€‹ var origin &#x3D; Point() â€‹ var size &#x3D; Size() } ç”±äºRectç»“æ„ä¸ºå…¶æ‰€æœ‰å±æ€§æä¾›é»˜è®¤å€¼ï¼Œå› æ­¤å®ƒä¼šè‡ªåŠ¨æ¥æ”¶é»˜è®¤åˆå§‹åŒ–å™¨å’Œæˆå‘˜åˆå§‹åŒ–å™¨ï¼Œå¦‚é»˜è®¤åˆå§‹åŒ–å™¨æ‰€è¿°ã€‚è¿™äº›åˆå§‹åŒ–å™¨å¯ç”¨äºåˆ›å»ºæ–°çš„Rectå®ä¾‹ï¼š let defaultRect &#x3D; Rect() let memberwiseRect &#x3D; Rect(origin: Point(x: 2.0, y: 2.0), size: Size(width: 5.0, height: 5.0)) æ‚¨å¯ä»¥æ‰©å±•Rectç»“æ„ï¼Œä»¥æä¾›å…·æœ‰ç‰¹å®šä¸­å¿ƒç‚¹å’Œå¤§å°çš„é¢å¤–åˆå§‹åŒ–å™¨ï¼š extension Rect { â€‹ init(center: Point, size: Size) { â€‹ let originX &#x3D; center.x - (size.width &#x2F; 2) â€‹ let originY &#x3D; center.y - (size.height &#x2F; 2) â€‹ self.init(origin: Point(x: originX, y: originY), size: size) â€‹ } } è¿™ä¸ªæ–°çš„åˆå§‹åŒ–å™¨é¦–å…ˆæ ¹æ®æä¾›çš„centerå’Œsizeå€¼è®¡ç®—é€‚å½“çš„åŸç‚¹ã€‚ç„¶åï¼Œåˆå§‹åŒ–å™¨è°ƒç”¨ç»“æ„çš„è‡ªåŠ¨æˆå‘˜åˆå§‹åŒ–å™¨init(origin:size:)è¯¥åˆå§‹åŒ–å™¨å°†æ–°çš„åŸç‚¹å’Œå¤§å°å€¼å­˜å‚¨åœ¨é€‚å½“çš„å±æ€§ä¸­ï¼š let centerRect &#x3D; Rect(center: Point(x: 4.0, y: 4.0), â€‹ size: Size(width: 3.0, height: 3.0)) &#x2F;&#x2F; centerRectâ€™s origin is (2.5, 2.5) and its size is (3.0, 3.0) æ³¨æ„ å¦‚æœæ‚¨æä¾›å¸¦æœ‰æ‰©å±•çš„æ–°åˆå§‹åŒ–å™¨ï¼Œæ‚¨ä»ç„¶æœ‰è´£ä»»ç¡®ä¿åˆå§‹åŒ–å™¨å®Œæˆåæ¯ä¸ªå®ä¾‹éƒ½å·²å®Œå…¨åˆå§‹åŒ–ã€‚ æ–¹æ³•æ‰©å±•å¯ä»¥å‘ç°æœ‰ç±»å‹æ·»åŠ æ–°çš„å®ä¾‹æ–¹æ³•å’Œç±»å‹æ–¹æ³•ã€‚ä»¥ä¸‹ç¤ºä¾‹ä¸ºIntç±»å‹æ·»åŠ äº†ä¸€ä¸ªåä¸ºrepetitionsçš„æ–°å®ä¾‹æ–¹æ³•ï¼š extension Int { â€‹ func repetitions(task: () -&gt; Void) { â€‹ for _ in 0..&lt;self { â€‹ task() â€‹ } â€‹ } } The repetitions(task:) method takes a single argument of type () -&gt; Void, which indicates a function that has no parameters and doesnâ€™t return a value. å®šä¹‰æ­¤æ‰©å±•åï¼Œæ‚¨å¯ä»¥åœ¨ä»»ä½•æ•´æ•°ä¸Šè°ƒç”¨repetitions(task:)æ–¹æ³•æ¥æ‰§è¡Œå¤šæ¬¡ä»»åŠ¡ï¼š 3.repetitions { â€‹ print(â€œHello!â€) } &#x2F;&#x2F; Hello! &#x2F;&#x2F; Hello! &#x2F;&#x2F; Hello! çªå˜å®ä¾‹æ–¹æ³•ä½¿ç”¨æ‰©å±•æ·»åŠ çš„å®ä¾‹æ–¹æ³•ä¹Ÿå¯ä»¥ä¿®æ”¹ï¼ˆæˆ–çªå˜ï¼‰å®ä¾‹æœ¬èº«ã€‚ä¿®æ”¹selfæˆ–å…¶å±æ€§çš„ç»“æ„å’Œæšä¸¾æ–¹æ³•å¿…é¡»å°†å®ä¾‹æ–¹æ³•æ ‡è®°ä¸ºmutatingï¼Œå°±åƒåŸå§‹å®ç°çš„çªå˜æ–¹æ³•ä¸€æ ·ã€‚ ä»¥ä¸‹ç¤ºä¾‹åœ¨Swiftçš„Intç±»å‹ä¸­æ·»åŠ äº†ä¸€ç§åä¸ºsquareçš„æ–°çªå˜æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†åŸå§‹å€¼å¹³æ–¹ï¼š extension Int { â€‹ mutating func square() { â€‹ self &#x3D; self * self â€‹ } } var someInt &#x3D; 3 someInt.square() &#x2F;&#x2F; someInt is now 9 ä¸‹æ ‡æ‰©å±•å¯ä»¥å‘ç°æœ‰ç±»å‹æ·»åŠ æ–°çš„ä¸‹æ ‡ã€‚æ­¤ç¤ºä¾‹ä¸ºSwiftçš„å†…ç½®Intç±»å‹æ·»åŠ äº†æ•´æ•°ä¸‹æ ‡ã€‚æ­¤ä¸‹æ ‡[n]ä»æ•°å­—å³ä¾§è¿”å›å°æ•°nä½ï¼š 123456789[0]é€€è´§9 123456789[1]é€€è´§8 â€¦ç­‰ç­‰ï¼š extension Int { â€‹ subscript(digitIndex: Int) -&gt; Int { â€‹ var decimalBase &#x3D; 1 â€‹ for _ in 0..&lt;digitIndex { â€‹ decimalBase *&#x3D; 10 â€‹ } â€‹ return (self &#x2F; decimalBase) % 10 â€‹ } } 746381295[0] &#x2F;&#x2F; returns 5 746381295[1] &#x2F;&#x2F; returns 9 746381295[2] &#x2F;&#x2F; returns 2 746381295[8] &#x2F;&#x2F; returns 7 å¦‚æœIntå€¼æ²¡æœ‰è¶³å¤Ÿçš„æ•°å­—æ¥æ»¡è¶³è¯·æ±‚çš„ç´¢å¼•ï¼Œä¸‹æ ‡å®ç°å°†è¿”å›0ï¼Œå°±åƒæ•°å­—åœ¨å·¦ä¾§å¡«å……äº†é›¶ä¸€æ ·ï¼š 746381295[9] &#x2F;&#x2F; returns 0, as if you had requested: 0746381295[9] åµŒå¥—ç±»å‹æ‰©å±•å¯ä»¥å‘ç°æœ‰ç±»ã€ç»“æ„å’Œæšä¸¾æ·»åŠ æ–°çš„åµŒå¥—ç±»å‹ï¼š extension Int { â€‹ enum Kind { â€‹ case negative, zero, positive â€‹ } â€‹ var kind: Kind { â€‹ switch self { â€‹ case 0: â€‹ return .zero â€‹ case let x where x &gt; 0: â€‹ return .positive â€‹ default: â€‹ return .negative â€‹ } â€‹ } } æ­¤ç¤ºä¾‹ä¸ºIntæ·»åŠ äº†ä¸€ä¸ªæ–°çš„åµŒå¥—æšä¸¾ã€‚è¿™ä¸ªæšä¸¾ç§°ä¸ºKindï¼Œè¡¨ç¤ºç‰¹å®šæ•´æ•°æ‰€ä»£è¡¨çš„æ•°å­—ç±»å‹ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒè¡¨ç¤ºæ•°å­—æ˜¯è´Ÿæ•°ã€é›¶è¿˜æ˜¯æ­£æ•°ã€‚ æ­¤ç¤ºä¾‹è¿˜å‘Intæ·»åŠ äº†ä¸€ä¸ªæ–°çš„è®¡ç®—å®ä¾‹å±æ€§ï¼Œç§°ä¸ºkindï¼Œè¯¥å±æ€§è¿”å›è¯¥æ•´æ•°çš„é€‚å½“Kindæšä¸¾æƒ…å†µã€‚ åµŒå¥—æšä¸¾ç°åœ¨å¯ä»¥ä¸ä»»ä½•Intå€¼ä¸€èµ·ä½¿ç”¨ï¼š func printIntegerKinds(_ numbers: [Int]) { â€‹ for number in numbers { â€‹ switch number.kind { â€‹ case .negative: â€‹ print(â€œ- â€œ, terminator: â€œâ€) â€‹ case .zero: â€‹ print(â€œ0 â€œ, terminator: â€œâ€) â€‹ case .positive: â€‹ print(â€œ+ â€œ, terminator: â€œâ€) â€‹ } â€‹ } â€‹ print(â€œâ€) } printIntegerKinds([3, 19, -27, 0, -6, 0, 7]) &#x2F;&#x2F; Prints â€œ+ + - 0 - 0 + â€œ æ­¤å‡½æ•°printIntegerKinds(_:)æ¥å—Intå€¼çš„è¾“å…¥æ•°ç»„ï¼Œå¹¶ä¾æ¬¡è¿­ä»£è¿™äº›å€¼ã€‚å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°ï¼Œå‡½æ•°è€ƒè™‘è¯¥æ•´æ•°çš„kindè®¡ç®—å±æ€§ï¼Œå¹¶æ‰“å°é€‚å½“çš„æè¿°ã€‚ æ³¨æ„ number.kindå·²ç»çŸ¥é“æ˜¯Int.Kindç±»å‹ã€‚å› æ­¤ï¼Œæ‰€æœ‰Int.Kindå¤§å°å†™å€¼éƒ½å¯ä»¥åœ¨switchè¯­å¥ä¸­ä»¥é€Ÿè®°å½¢å¼ä¹¦å†™ï¼Œä¾‹å¦‚.negativeè€Œä¸æ˜¯Int.Kind.negativeã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ å¹¶å‘æ€§","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-å¹¶å‘æ€§","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-å¹¶å‘æ€§/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E5%B9%B6%E5%8F%91%E6%80%A7/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Concurrency.html Swiftå†…ç½®æ”¯æŒä»¥ç»“æ„åŒ–æ–¹å¼ç¼–å†™å¼‚æ­¥å’Œå¹¶è¡Œä»£ç ã€‚å¼‚æ­¥ä»£ç å¯ä»¥æš‚åœå¹¶ç¨åæ¢å¤ï¼Œå°½ç®¡ä¸€æ¬¡åªæ‰§è¡Œä¸€ä¸ªç¨‹åºã€‚åœ¨ç¨‹åºä¸­æš‚åœå’Œæ¢å¤ä»£ç å¯ä»¥è®©å®ƒç»§ç»­åœ¨æ›´æ–°ç”¨æˆ·ç•Œé¢ç­‰çŸ­æœŸæ“ä½œä¸Šå–å¾—è¿›å±•ï¼ŒåŒæ—¶ç»§ç»­å¤„ç†é•¿æœŸè¿è¡Œçš„æ“ä½œï¼Œå¦‚é€šè¿‡ç½‘ç»œè·å–æ•°æ®æˆ–è§£ææ–‡ä»¶ã€‚å¹¶è¡Œä»£ç æ„å‘³ç€å¤šä¸ªä»£ç åŒæ—¶è¿è¡Œâ€”â€”ä¾‹å¦‚ï¼Œä¸€å°é…å¤‡å››æ ¸å¤„ç†å™¨çš„è®¡ç®—æœºå¯ä»¥åŒæ—¶è¿è¡Œå››æ¡ä»£ç ï¼Œæ¯ä¸ªæ ¸å¿ƒæ‰§è¡Œå…¶ä¸­ä¸€é¡¹ä»»åŠ¡ã€‚ä½¿ç”¨å¹¶è¡Œå’Œå¼‚æ­¥ä»£ç çš„ç¨‹åºä¸€æ¬¡æ‰§è¡Œå¤šä¸ªæ“ä½œï¼›å®ƒæš‚åœç­‰å¾…å¤–éƒ¨ç³»ç»Ÿçš„æ“ä½œï¼Œå¹¶ä½¿å…¶æ›´å®¹æ˜“ä»¥å†…å­˜å®‰å…¨çš„æ–¹å¼ç¼–å†™æ­¤ä»£ç ã€‚ å¹¶è¡Œæˆ–å¼‚æ­¥ä»£ç çš„é¢å¤–è°ƒåº¦çµæ´»æ€§ä¹Ÿå¢åŠ äº†å¤æ‚æ€§ã€‚Swiftå…è®¸æ‚¨ä»¥å…è®¸ä¸€äº›ç¼–è¯‘æ—¶æ£€æŸ¥çš„æ–¹å¼è¡¨è¾¾æ‚¨çš„æ„å›¾â€”â€”ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å‚ä¸è€…å®‰å…¨åœ°è®¿é—®å¯å˜çŠ¶æ€ã€‚ç„¶è€Œï¼Œå‘ç¼“æ…¢æˆ–é”™è¯¯çš„ä»£ç æ·»åŠ å¹¶å‘å¹¶ä¸èƒ½ä¿è¯å®ƒä¼šå˜å¾—å¿«é€Ÿæˆ–æ­£ç¡®ã€‚äº‹å®ä¸Šï¼Œæ·»åŠ å¹¶å‘æ€§ç”šè‡³å¯èƒ½ä¼šä½¿æ‚¨çš„ä»£ç æ›´éš¾è°ƒè¯•ã€‚ç„¶è€Œï¼Œä½¿ç”¨Swiftå¯¹ä»£ç ä¸­éœ€è¦å¹¶å‘çš„å¹¶å‘çš„è¯­è¨€çº§æ”¯æŒæ„å‘³ç€Swiftå¯ä»¥å¸®åŠ©æ‚¨åœ¨ç¼–è¯‘æ—¶å‘ç°é—®é¢˜ã€‚ æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†ä½¿ç”¨å¹¶å‘ä¸€è¯æ¥æŒ‡ä»£å¼‚æ­¥å’Œå¹¶è¡Œä»£ç çš„å¸¸è§ç»„åˆã€‚ æ³¨æ„ å¦‚æœæ‚¨ä»¥å‰ç¼–å†™è¿‡å¹¶å‘ä»£ç ï¼Œæ‚¨å¯èƒ½ä¹ æƒ¯äºå¤„ç†çº¿ç¨‹ã€‚Swift ä¸­çš„å¹¶å‘æ¨¡å‹æ„å»ºåœ¨çº¿ç¨‹ä¹‹ä¸Šï¼Œä½†æ‚¨ä¸ä¼šç›´æ¥ä¸å®ƒä»¬äº¤äº’ã€‚Swiftä¸­çš„å¼‚æ­¥å‡½æ•°å¯ä»¥æ”¾å¼ƒå®ƒæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Œè¿™å…è®¸å¦ä¸€ä¸ªå¼‚æ­¥å‡½æ•°åœ¨ç¬¬ä¸€ä¸ªå‡½æ•°è¢«é˜»æ­¢æ—¶åœ¨è¯¥çº¿ç¨‹ä¸Šè¿è¡Œã€‚ è™½ç„¶å¯ä»¥åœ¨ä¸ä½¿ç”¨Swiftè¯­è¨€æ”¯æŒçš„æƒ…å†µä¸‹ç¼–å†™å¹¶å‘ä»£ç ï¼Œä½†è¯¥ä»£ç å¾€å¾€æ›´éš¾é˜…è¯»ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä¸‹è½½ç…§ç‰‡åç§°åˆ—è¡¨ï¼Œä¸‹è½½è¯¥åˆ—è¡¨ä¸­çš„ç¬¬ä¸€å¼ ç…§ç‰‡ï¼Œå¹¶å‘ç”¨æˆ·æ˜¾ç¤ºè¯¥ç…§ç‰‡ï¼š listPhotos(inGallery: â€œSummer Vacationâ€) { photoNames in â€‹ let sortedNames &#x3D; photoNames.sorted() â€‹ let name &#x3D; sortedNames[0] â€‹ downloadPhoto(named: name) { photo in â€‹ show(photo) â€‹ } } å³ä½¿åœ¨è¿™ç§ç®€å•çš„æƒ…å†µä¸‹ï¼Œç”±äºä»£ç å¿…é¡»ç¼–å†™ä¸ºä¸€ç³»åˆ—å®Œæˆå¤„ç†ç¨‹åºï¼Œæ‚¨æœ€ç»ˆä¹Ÿä¼šç¼–å†™åµŒå¥—é—­åŒ…ã€‚åœ¨è¿™ç§é£æ ¼ä¸‹ï¼Œå…·æœ‰æ·±åµŒå¥—çš„æ›´å¤æ‚çš„ä»£ç å¯èƒ½ä¼šå¾ˆå¿«å˜å¾—ç¬¨æ‹™ã€‚ å®šä¹‰å’Œè°ƒç”¨å¼‚æ­¥å‡½æ•°å¼‚æ­¥å‡½æ•°æˆ–å¼‚æ­¥æ–¹æ³•æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°æˆ–æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æš‚åœã€‚è¿™ä¸æ™®é€šçš„åŒæ­¥å‡½æ•°å’Œæ–¹æ³•å½¢æˆé²œæ˜å¯¹æ¯”ï¼Œè¿™äº›å‡½æ•°å’Œæ–¹æ³•è¦ä¹ˆè¿è¡Œåˆ°å®Œæˆï¼Œè¦ä¹ˆæŠ›å‡ºé”™è¯¯ï¼Œè¦ä¹ˆæ°¸è¿œä¸ä¼šè¿”å›ã€‚å¼‚æ­¥å‡½æ•°æˆ–æ–¹æ³•ä»ç„¶å¯ä»¥åšè¿™ä¸‰ä»¶äº‹ä¹‹ä¸€ï¼Œä½†å½“å®ƒç­‰å¾…æŸäº‹æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥åœ¨ä¸­é—´æš‚åœã€‚åœ¨å¼‚æ­¥å‡½æ•°æˆ–æ–¹æ³•çš„ä¸»ä½“ä¸­ï¼Œæ‚¨å¯ä»¥æ ‡è®°å¯ä»¥æš‚åœæ‰§è¡Œçš„æ¯ä¸ªåœ°æ–¹ã€‚ è¦æŒ‡ç¤ºå‡½æ•°æˆ–æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œæ‚¨å°†asyncå…³é”®å­—å†™å…¥å…¶å‚æ•°åçš„å£°æ˜ä¸­ï¼Œç±»ä¼¼äºæ‚¨å¦‚ä½•ä½¿ç”¨throwsæ ‡è®°æŠ›å‡ºå‡½æ•°ã€‚å¦‚æœå‡½æ•°æˆ–æ–¹æ³•è¿”å›å€¼ï¼Œåˆ™åœ¨è¿”å›ç®­å¤´ï¼ˆ-&gt;ï¼‰ä¹‹å‰å†™å…¥asyncã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥åœ¨å›¾åº“ä¸­è·å–ç…§ç‰‡åç§°çš„æ–¹æ³•ï¼š func listPhotos(inGallery name: String) async -&gt; [String] { â€‹ let result &#x3D; &#x2F;&#x2F; â€¦ some asynchronous networking code â€¦ â€‹ return result } å¯¹äºæ—¢å¼‚æ­¥åˆæŠ›å‡ºçš„å‡½æ•°æˆ–æ–¹æ³•ï¼Œæ‚¨åœ¨throwså‰ç¼–å†™asyncã€‚ å½“è°ƒç”¨å¼‚æ­¥æ–¹æ³•æ—¶ï¼Œæ‰§è¡Œæš‚åœï¼Œç›´åˆ°è¯¥æ–¹æ³•è¿”å›ã€‚æ‚¨åœ¨é€šè¯å‰å†™ä¸‹awaitï¼Œä»¥æ ‡è®°å¯èƒ½çš„æš‚åœç‚¹ã€‚è¿™å°±åƒåœ¨è°ƒç”¨æŠ›å‡ºå‡½æ•°æ—¶tryå†™å…¥ï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œåˆ™æ ‡è®°ç¨‹åºæµç¨‹çš„å¯èƒ½æ›´æ”¹ã€‚åœ¨å¼‚æ­¥æ–¹æ³•ä¸­ï¼Œåªæœ‰å½“æ‚¨è°ƒç”¨å¦ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•æ—¶ï¼Œæ‰§è¡Œæµç¨‹æ‰ä¼šæš‚åœâ€”â€”æš‚åœä»æ¥éƒ½ä¸æ˜¯éšå¼æˆ–å…ˆå‘åˆ¶äººçš„â€”â€”è¿™æ„å‘³ç€æ¯ä¸ªå¯èƒ½çš„æš‚åœç‚¹éƒ½æ ‡æœ‰awaitã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç è·å–å›¾åº“ä¸­æ‰€æœ‰å›¾ç‰‡çš„åç§°ï¼Œç„¶åæ˜¾ç¤ºç¬¬ä¸€å¼ å›¾ç‰‡ï¼š let photoNames &#x3D; await listPhotos(inGallery: â€œSummer Vacationâ€) let sortedNames &#x3D; photoNames.sorted() let name &#x3D; sortedNames[0] let photo &#x3D; await downloadPhoto(named: name) show(photo) ç”±äºlistPhotos(inGallery:)å’ŒdownloadPhoto(named:)åŠŸèƒ½éƒ½éœ€è¦æå‡ºç½‘ç»œè¯·æ±‚ï¼Œå› æ­¤å®ƒä»¬å¯èƒ½éœ€è¦ç›¸å¯¹è¾ƒé•¿çš„æ—¶é—´æ‰èƒ½å®Œæˆã€‚é€šè¿‡åœ¨è¿”å›ç®­å¤´ä¹‹å‰å†™å…¥asyncä½¿å®ƒä»¬éƒ½å¼‚æ­¥ï¼Œå¯ä»¥è®©åº”ç”¨ç¨‹åºçš„å…¶ä½™ä»£ç åœ¨è¯¥ä»£ç ç­‰å¾…å›¾ç‰‡å‡†å¤‡å°±ç»ªæ—¶ç»§ç»­è¿è¡Œã€‚ ä¸ºäº†äº†è§£ä¸Šè¿°ç¤ºä¾‹çš„å¹¶å‘æ€§è´¨ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå¯èƒ½çš„æ‰§è¡Œé¡ºåºï¼š ä»£ç ä»ç¬¬ä¸€è¡Œå¼€å§‹è¿è¡Œï¼Œä¸€ç›´è¿è¡Œåˆ°ç¬¬ä¸€è¡Œawaitã€‚å®ƒè°ƒç”¨listPhotos(inGallery:)å‡½æ•°ï¼Œå¹¶åœ¨ç­‰å¾…è¯¥å‡½æ•°è¿”å›æ—¶æš‚åœæ‰§è¡Œã€‚ å½“æ­¤ä»£ç çš„æ‰§è¡Œæš‚åœæ—¶ï¼ŒåŒä¸€ç¨‹åºä¸­è¿˜ä¼šè¿è¡Œä¸€äº›å…¶ä»–å¹¶å‘ä»£ç ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªé•¿æœŸè¿è¡Œçš„èƒŒæ™¯ä»»åŠ¡å¯èƒ½ä¼šç»§ç»­æ›´æ–°æ–°ç…§ç‰‡åº“åˆ—è¡¨ã€‚è¯¥ä»£ç ä¹Ÿä¼šè¿è¡Œåˆ°ä¸‹ä¸€ä¸ªæš‚åœç‚¹ï¼Œä»¥awaitä¸ºæ ‡è®°ï¼Œæˆ–ç›´åˆ°å®ƒå®Œæˆã€‚ listPhotos(inGallery:)è¿”å›åï¼Œæ­¤ä»£ç ä»é‚£æ—¶å¼€å§‹ç»§ç»­æ‰§è¡Œã€‚å®ƒåˆ†é…è¿”å›åˆ°photoNameså€¼ã€‚ å®šä¹‰sortedNameså’Œnameè¡Œæ˜¯å¸¸è§„çš„åŒæ­¥ä»£ç ã€‚ç”±äºè¿™äº›çº¿è·¯ä¸Šæ²¡æœ‰æ ‡è®°awaitï¼Œå› æ­¤æ²¡æœ‰ä»»ä½•å¯èƒ½çš„æš‚åœç‚¹ã€‚ ä¸‹ä¸€ä¸ªawaitæ ‡å¿—ç€å¯¹downloadPhoto(named:)å‡½æ•°çš„è°ƒç”¨ã€‚æ­¤ä»£ç å†æ¬¡æš‚åœæ‰§è¡Œï¼Œç›´åˆ°è¯¥å‡½æ•°è¿”å›ï¼Œä½¿å…¶ä»–å¹¶å‘ä»£ç æœ‰æœºä¼šè¿è¡Œã€‚ downloadPhoto(named:)è¿”å›åï¼Œå…¶è¿”å›å€¼è¢«åˆ†é…ç»™photoï¼Œç„¶ååœ¨è°ƒç”¨show(_:)æ—¶ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ æ ‡è®°ä¸ºawaitçš„ä»£ç ä¸­å¯èƒ½çš„æš‚åœç‚¹è¡¨ç¤ºï¼Œå½“å‰ä»£ç å¯èƒ½ä¼šåœ¨ç­‰å¾…å¼‚æ­¥å‡½æ•°æˆ–æ–¹æ³•è¿”å›æ—¶æš‚åœæ‰§è¡Œã€‚è¿™ä¹Ÿè¢«ç§°ä¸ºç”Ÿæˆçº¿ç¨‹ï¼Œå› ä¸ºåœ¨å¹•åï¼ŒSwiftæš‚åœåœ¨å½“å‰çº¿ç¨‹ä¸Šæ‰§è¡Œä»£ç ï¼Œè€Œæ˜¯åœ¨è¯¥çº¿ç¨‹ä¸Šè¿è¡Œä¸€äº›å…¶ä»–ä»£ç ã€‚ç”±äºawaitçš„ä»£ç éœ€è¦èƒ½å¤Ÿæš‚åœæ‰§è¡Œï¼Œå› æ­¤ç¨‹åºä¸­çš„æŸäº›åœ°æ–¹åªèƒ½è°ƒç”¨å¼‚æ­¥å‡½æ•°æˆ–æ–¹æ³•ï¼š å¼‚æ­¥å‡½æ•°ã€æ–¹æ³•æˆ–å±æ€§ä¸»ä½“ä¸­çš„ä»£ç ã€‚ æ ‡è®°ä¸º@mainç»“æ„ã€ç±»æˆ–æšä¸¾çš„é™æ€main()æ–¹æ³•ä¸­çš„ä»£ç ã€‚ éç»“æ„åŒ–å­ä»»åŠ¡ä¸­çš„ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ æ³¨æ„ Task.sleep(nanoseconds:)æ–¹æ³•åœ¨ç¼–å†™ç®€å•ä»£ç ä»¥äº†è§£å¹¶å‘å·¥ä½œåŸç†æ—¶éå¸¸æœ‰ç”¨ã€‚è¿™ç§æ–¹æ³•ä»€ä¹ˆä¹Ÿåšä¸äº†ï¼Œä½†è‡³å°‘è¦ç­‰å¾…ç»™å®šçš„çº³ç§’æ•°æ‰èƒ½è¿”å›ã€‚ä»¥ä¸‹æ˜¯listPhotos(inGallery:)å‡½æ•°çš„ç‰ˆæœ¬ï¼Œè¯¥å‡½æ•°ä½¿ç”¨sleep(nanoseconds:)æ¥æ¨¡æ‹Ÿç­‰å¾…ç½‘ç»œæ“ä½œï¼š func listPhotos(inGallery name: String) async throws -&gt; [String] { â€‹ try await Task.sleep(nanoseconds: 2 * 1_000_000_000) &#x2F;&#x2F; Two seconds â€‹ return [â€œIMG001â€, â€œIMG99â€, â€œIMG0404â€] } å¼‚æ­¥åºåˆ—åœ¨æ•°ç»„çš„æ‰€æœ‰å…ƒç´ å‡†å¤‡å°±ç»ªåï¼Œä¸Šä¸€èŠ‚ä¸­çš„listPhotos(inGallery:)å‡½æ•°ä¼šå¼‚æ­¥è¿”å›æ•´ä¸ªæ•°ç»„ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å¼‚æ­¥åºåˆ—ä¸€æ¬¡ç­‰å¾…é›†åˆçš„ä¸€ä¸ªå…ƒç´ ã€‚ä»¥ä¸‹æ˜¯å¼‚æ­¥åºåˆ—è¿­ä»£çš„æ ·å­ï¼š import Foundation let handle &#x3D; FileHandle.standardInput for try await line in handle.bytes.lines { â€‹ print(line) } ä¸Šé¢çš„ç¤ºä¾‹ä¸æ˜¯ä½¿ç”¨æ™®é€šçš„for-inå¾ªç¯ï¼Œè€Œæ˜¯åœ¨å®ƒä¹‹åå†™forå’Œawaitã€‚ä¸æ‚¨è°ƒç”¨å¼‚æ­¥å‡½æ•°æˆ–æ–¹æ³•æ—¶ä¸€æ ·ï¼Œå†™å…¥awaitè¡¨ç¤ºå¯èƒ½çš„æ‚¬æµ®ç‚¹ã€‚å½“ç­‰å¾…ä¸‹ä¸€ä¸ªå…ƒç´ å¯ç”¨æ—¶ï¼Œawaitå¾ªç¯å¯èƒ½ä¼šåœ¨æ¯æ¬¡è¿­ä»£å¼€å§‹æ—¶æš‚åœæ‰§è¡Œã€‚ å°±åƒæ‚¨å¯ä»¥é€šè¿‡æ·»åŠ Sequenceåè®®çš„ä¸€è‡´æ€§åœ¨for-inå¾ªç¯ä¸­ä½¿ç”¨è‡ªå·±çš„ç±»å‹ä¸€æ ·ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ·»åŠ å¯¹AsyncSequenceåè®®çš„ä¸€è‡´æ€§åœ¨for-await-inå¾ªç¯ä¸­ä½¿ç”¨è‡ªå·±çš„ç±»å‹ã€‚ å¹¶è¡Œè°ƒç”¨å¼‚æ­¥å‡½æ•°è°ƒç”¨å¸¦æœ‰awaitçš„å¼‚æ­¥å‡½æ•°ä¸€æ¬¡åªè¿è¡Œä¸€æ®µä»£ç ã€‚å½“å¼‚æ­¥ä»£ç è¿è¡Œæ—¶ï¼Œè°ƒç”¨è€…ç­‰å¾…è¯¥ä»£ç å®Œæˆï¼Œç„¶åå†ç»§ç»­è¿è¡Œä¸‹ä¸€è¡Œä»£ç ã€‚ä¾‹å¦‚ï¼Œè¦ä»å›¾åº“ä¸­è·å–å‰ä¸‰å¼ ç…§ç‰‡ï¼Œæ‚¨å¯ä»¥ç­‰å¾…downloadPhoto(named:)åŠŸèƒ½çš„ä¸‰æ¬¡è°ƒç”¨ï¼Œå…·ä½“å¦‚ä¸‹ï¼š let firstPhoto &#x3D; await downloadPhoto(named: photoNames[0]) let secondPhoto &#x3D; await downloadPhoto(named: photoNames[1]) let thirdPhoto &#x3D; await downloadPhoto(named: photoNames[2]) let photos &#x3D; [firstPhoto, secondPhoto, thirdPhoto] show(photos) è¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªé‡è¦çš„ç¼ºç‚¹ï¼šè™½ç„¶ä¸‹è½½æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶å…è®¸åœ¨è¿›è¡Œå…¶ä»–å·¥ä½œæ—¶è¿›è¡Œï¼Œä½†ä¸€æ¬¡åªè¿è¡Œä¸€ä¸ªdownloadPhoto(named:)çš„è°ƒç”¨ã€‚æ¯å¼ ç…§ç‰‡åœ¨ä¸‹ä¸€å¼ ç…§ç‰‡å¼€å§‹ä¸‹è½½ä¹‹å‰éƒ½ä¼šå®Œå…¨ä¸‹è½½ã€‚ç„¶è€Œï¼Œè¿™äº›æ“ä½œæ— éœ€ç­‰å¾…â€”â€”æ¯å¼ ç…§ç‰‡éƒ½å¯ä»¥ç‹¬ç«‹ä¸‹è½½ï¼Œç”šè‡³å¯ä»¥åŒæ—¶ä¸‹è½½ã€‚ è¦è°ƒç”¨å¼‚æ­¥å‡½æ•°å¹¶è®©å®ƒä¸å‘¨å›´çš„ä»£ç å¹¶è¡Œè¿è¡Œï¼Œè¯·åœ¨å®šä¹‰å¸¸é‡æ—¶åœ¨letå‰é¢å†™å…¥asyncï¼Œç„¶ååœ¨æ¯æ¬¡ä½¿ç”¨å¸¸é‡æ—¶å†™å…¥awaitã€‚ async let firstPhoto &#x3D; downloadPhoto(named: photoNames[0]) async let secondPhoto &#x3D; downloadPhoto(named: photoNames[1]) async let thirdPhoto &#x3D; downloadPhoto(named: photoNames[2]) let photos &#x3D; await [firstPhoto, secondPhoto, thirdPhoto] show(photos) åœ¨æœ¬ä¾‹ä¸­ï¼Œæ‰€æœ‰ä¸‰ä¸ªdownloadPhoto(named:)çš„è°ƒç”¨éƒ½æ— éœ€ç­‰å¾…å‰ä¸€ä¸ªè°ƒç”¨å®Œæˆå³å¯å¼€å§‹ã€‚å¦‚æœæœ‰è¶³å¤Ÿçš„ç³»ç»Ÿèµ„æºå¯ç”¨ï¼Œå®ƒä»¬å¯ä»¥åŒæ—¶è¿è¡Œã€‚è¿™äº›å‡½æ•°è°ƒç”¨éƒ½æ²¡æœ‰æ ‡è®°ä¸ºawaitï¼Œå› ä¸ºä»£ç ä¸ä¼šæš‚åœç­‰å¾…å‡½æ•°çš„ç»“æœã€‚ç›¸åï¼Œæ‰§è¡Œä¸€ç›´æŒç»­åˆ°å®šä¹‰photosè¡Œâ€”â€”æ­¤æ—¶ï¼Œç¨‹åºéœ€è¦è¿™äº›å¼‚æ­¥è°ƒç”¨çš„ç»“æœï¼Œå› æ­¤æ‚¨å†™awaitæš‚åœæ‰§è¡Œï¼Œç›´åˆ°æ‰€æœ‰ä¸‰å¼ ç…§ç‰‡å®Œæˆä¸‹è½½ã€‚ ä»¥ä¸‹æ˜¯æ‚¨å¦‚ä½•æ€è€ƒè¿™ä¸¤ç§æ–¹æ³•ä¹‹é—´çš„å·®å¼‚ï¼š å½“ä»¥ä¸‹è¡Œä¸Šçš„ä»£ç å–å†³äºè¯¥å‡½æ•°çš„ç»“æœæ—¶ï¼Œä½¿ç”¨awaitè°ƒç”¨å¼‚æ­¥å‡½æ•°ã€‚è¿™åˆ›é€ äº†æŒ‰é¡ºåºè¿›è¡Œçš„å·¥ä½œã€‚ å½“æ‚¨ç›´åˆ°ä»£ç ç¨åæ‰éœ€è¦ç»“æœæ—¶ï¼Œä½¿ç”¨async``letè°ƒç”¨å¼‚æ­¥å‡½æ•°ã€‚è¿™åˆ›é€ äº†å¯ä»¥å¹¶è¡Œè¿›è¡Œçš„å·¥ä½œã€‚ awaitå’Œasync``letå…è®¸å…¶ä»–ä»£ç åœ¨æš‚åœæ—¶è¿è¡Œã€‚ åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ‚¨éƒ½ä¼šç”¨awaitæ ‡è®°å¯èƒ½çš„æ‚¬æµ®ç‚¹ï¼Œä»¥æŒ‡ç¤ºå¦‚æœéœ€è¦ï¼Œæ‰§è¡Œå°†æš‚åœï¼Œç›´åˆ°è¿”å›å¼‚æ­¥å‡½æ•°ã€‚ æ‚¨è¿˜å¯ä»¥åœ¨åŒä¸€ä»£ç ä¸­æ··åˆè¿™ä¸¤ç§æ–¹æ³•ã€‚ ä»»åŠ¡å’Œä»»åŠ¡ç»„ä»»åŠ¡æ˜¯å¯ä»¥ä½œä¸ºç¨‹åºçš„ä¸€éƒ¨åˆ†å¼‚æ­¥è¿è¡Œçš„å·¥ä½œå•å…ƒã€‚æ‰€æœ‰å¼‚æ­¥ä»£ç éƒ½ä½œä¸ºæŸäº›ä»»åŠ¡çš„ä¸€éƒ¨åˆ†è¿è¡Œã€‚ä¸Šä¸€èŠ‚ä¸­æè¿°çš„async``letè¯­æ³•ä¸ºæ‚¨åˆ›å»ºä¸€ä¸ªå­ä»»åŠ¡ã€‚æ‚¨è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ªä»»åŠ¡ç»„ï¼Œå¹¶å°†å­ä»»åŠ¡æ·»åŠ åˆ°è¯¥ç»„ä¸­ï¼Œè¿™ä½¿æ‚¨å¯ä»¥æ›´å¥½åœ°æ§åˆ¶ä¼˜å…ˆçº§å’Œå–æ¶ˆï¼Œå¹¶å…è®¸æ‚¨åˆ›å»ºåŠ¨æ€æ•°é‡çš„ä»»åŠ¡ã€‚ ä»»åŠ¡æ’åˆ—åœ¨å±‚æ¬¡ç»“æ„ä¸­ã€‚ä»»åŠ¡ç»„ä¸­çš„æ¯ä¸ªä»»åŠ¡éƒ½æœ‰ç›¸åŒçš„çˆ¶ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½å¯ä»¥æœ‰å­ä»»åŠ¡ã€‚ç”±äºä»»åŠ¡å’Œä»»åŠ¡ç»„ä¹‹é—´çš„æ˜¾å¼å…³ç³»ï¼Œè¿™ç§æ–¹æ³•è¢«ç§°ä¸ºç»“æ„åŒ–å¹¶å‘ã€‚è™½ç„¶æ‚¨æ‰¿æ‹…äº†ä¸€äº›æ­£ç¡®æ€§çš„è´£ä»»ï¼Œä½†ä»»åŠ¡ä¹‹é—´çš„æ˜ç¡®çˆ¶å­å…³ç³»å…è®¸Swiftä¸ºæ‚¨å¤„ç†ä¸€äº›è¡Œä¸ºï¼Œä¾‹å¦‚ä¼ æ’­å–æ¶ˆï¼Œå¹¶å…è®¸Swiftåœ¨ç¼–è¯‘æ—¶æ£€æµ‹åˆ°ä¸€äº›é”™è¯¯ã€‚ await withTaskGroup(of: Data.self) { taskGroup in â€‹ let photoNames &#x3D; await listPhotos(inGallery: â€œSummer Vacationâ€) â€‹ for name in photoNames { â€‹ taskGroup.addTask { await downloadPhoto(named: name) } â€‹ } } æœ‰å…³ä»»åŠ¡ç»„çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…TaskGroupã€‚ éç»“æ„åŒ–å¹¶å‘é™¤äº†å‰å‡ èŠ‚ä¸­æè¿°çš„ç»“æ„åŒ–å¹¶å‘æ–¹æ³•å¤–ï¼ŒSwiftè¿˜æ”¯æŒéç»“æ„åŒ–å¹¶å‘ã€‚ä¸ä»»åŠ¡ç»„ä¸­çš„ä»»åŠ¡ä¸åŒï¼Œéç»“æ„åŒ–ä»»åŠ¡æ²¡æœ‰çˆ¶ä»»åŠ¡ã€‚æ‚¨å¯ä»¥å®Œå…¨çµæ´»åœ°ä»¥ä»»ä½•ç¨‹åºéœ€è¦çš„æ–¹å¼ç®¡ç†éç»“æ„åŒ–ä»»åŠ¡ï¼Œä½†æ‚¨ä¹Ÿè¦å¯¹å…¶æ­£ç¡®æ€§æ‰¿æ‹…å…¨éƒ¨è´£ä»»ã€‚è¦åˆ›å»ºåœ¨å½“å‰å‚ä¸è€…ä¸Šè¿è¡Œçš„éç»“æ„åŒ–ä»»åŠ¡ï¼Œè¯·è°ƒç”¨Task.init(priority:operation:)åˆå§‹åŒ–å™¨ã€‚è¦åˆ›å»ºä¸å±äºå½“å‰å‚ä¸è€…çš„éç»“æ„åŒ–ä»»åŠ¡ï¼Œæ›´å…·ä½“åœ°è¯´ï¼Œç§°ä¸ºåˆ†ç¦»ä»»åŠ¡ï¼Œè¯·è°ƒç”¨Task.detached(priority:operation:)ç±»æ–¹æ³•ã€‚è¿™ä¸¤ä¸ªæ“ä½œéƒ½è¿”å›ä¸€ä¸ªä»»åŠ¡å¥æŸ„ï¼Œå…è®¸æ‚¨ä¸ä»»åŠ¡äº¤äº’â€”â€”ä¾‹å¦‚ï¼Œç­‰å¾…å…¶ç»“æœæˆ–å–æ¶ˆå®ƒã€‚ let newPhoto &#x3D; &#x2F;&#x2F; â€¦ some photo data â€¦ let handle &#x3D; Task { â€‹ return await add(newPhoto, toGalleryNamed: â€œSpring Adventuresâ€) } let result &#x3D; await handle.value æœ‰å…³ç®¡ç†ç‹¬ç«‹ä»»åŠ¡çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…Taskã€‚ ä»»åŠ¡å–æ¶ˆSwiftå¹¶å‘ä½¿ç”¨åˆä½œå–æ¶ˆæ¨¡å‹ã€‚æ¯ä¸ªä»»åŠ¡éƒ½ä¼šæ£€æŸ¥å®ƒæ˜¯å¦åœ¨æ‰§è¡Œçš„é€‚å½“ç‚¹è¢«å–æ¶ˆï¼Œå¹¶ä»¥ä»»ä½•é€‚å½“çš„æ–¹å¼å“åº”å–æ¶ˆã€‚æ ¹æ®æ‚¨æ­£åœ¨åšçš„å·¥ä½œï¼Œè¿™é€šå¸¸æ„å‘³ç€ä»¥ä¸‹å†…å®¹ä¹‹ä¸€ï¼š æŠ›å‡ºé”™è¯¯ï¼Œæ¯”å¦‚CancellationError è¿”å›nilæˆ–ç©ºæ”¶è— é€€å›éƒ¨åˆ†å®Œæˆçš„å·¥ä½œ è¦æ£€æŸ¥å–æ¶ˆï¼Œè¯·è°ƒç”¨Task.checkCancellation()ï¼Œå¦‚æœä»»åŠ¡å·²å–æ¶ˆï¼Œåˆ™ä¼šæŠ›å‡ºCancellationErrorï¼Œè¦ä¹ˆæ£€æŸ¥Task.isCancelledçš„å€¼ï¼Œå¹¶åœ¨æ‚¨è‡ªå·±çš„ä»£ç ä¸­å¤„ç†å–æ¶ˆã€‚ä¾‹å¦‚ï¼Œä»å›¾åº“ä¸‹è½½ç…§ç‰‡çš„ä»»åŠ¡å¯èƒ½éœ€è¦åˆ é™¤éƒ¨åˆ†ä¸‹è½½å¹¶å…³é—­ç½‘ç»œè¿æ¥ã€‚ è¦æ‰‹åŠ¨ä¼ æ’­å–æ¶ˆï¼Œè¯·è°ƒç”¨Task.cancel()ã€‚ æ¼”å‘˜ä¸ç±»ä¸€æ ·ï¼Œå‚ä¸è€…æ˜¯å¼•ç”¨ç±»å‹ï¼Œå› æ­¤ç±»æ˜¯å¼•ç”¨ç±»å‹ä¸­çš„å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„æ¯”è¾ƒé€‚ç”¨äºå‚ä¸è€…å’Œç±»ã€‚ä¸ç±»ä¸åŒï¼Œå‚ä¸è€…ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªä»»åŠ¡è®¿é—®å…¶å¯å˜çŠ¶æ€ï¼Œè¿™ä½¿å¾—å¤šä¸ªä»»åŠ¡ä¸­çš„ä»£ç å¯ä»¥å®‰å…¨åœ°ä¸å‚ä¸è€…çš„åŒä¸€å®ä¾‹äº¤äº’ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªè®°å½•æ¸©åº¦çš„æ¼”å‘˜ï¼š actor TemperatureLogger { â€‹ let label: String â€‹ var measurements: [Int] â€‹ private(set) var max: Int â€‹ init(label: String, measurement: Int) { â€‹ self.label &#x3D; label â€‹ self.measurements &#x3D; [measurement] â€‹ self.max &#x3D; measurement â€‹ } } æ‚¨ä»‹ç»ä¸€ä¸ªå¸¦æœ‰actorå…³é”®å­—çš„æ¼”å‘˜ï¼Œç„¶ååœ¨ä¸€å¯¹å¤§æ‹¬å·ä¸­å®šä¹‰ã€‚TemperatureLoggerå‚ä¸è€…å…·æœ‰æ¼”å‘˜ä»¥å¤–çš„å…¶ä»–ä»£ç å¯ä»¥è®¿é—®çš„å±æ€§ï¼Œå¹¶é™åˆ¶maxå±æ€§ï¼Œå› æ­¤åªæœ‰å‚ä¸è€…å†…éƒ¨çš„ä»£ç å¯ä»¥æ›´æ–°æœ€å¤§å€¼ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ä¸ç»“æ„å’Œç±»ç›¸åŒçš„åˆå§‹åŒ–å™¨è¯­æ³•åˆ›å»ºå‚ä¸è€…çš„å®ä¾‹ã€‚å½“æ‚¨è®¿é—®æ¼”å‘˜çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨awaitæ¥æ ‡è®°æ½œåœ¨çš„æš‚åœç‚¹â€”â€”ä¾‹å¦‚ï¼š let logger &#x3D; TemperatureLogger(label: â€œOutdoorsâ€, measurement: 25) print(await logger.max) &#x2F;&#x2F; Prints â€œ25â€ åœ¨æœ¬ä¾‹ä¸­ï¼Œè®¿é—®logger.maxæ˜¯ä¸€ä¸ªå¯èƒ½çš„æ‚¬æ¶ç‚¹ã€‚ç”±äºå‚ä¸è€…ä¸€æ¬¡åªå…è®¸ä¸€ä¸ªä»»åŠ¡è®¿é—®å…¶å¯å˜çŠ¶æ€ï¼Œå¦‚æœæ¥è‡ªå¦ä¸€ä¸ªä»»åŠ¡çš„ä»£ç å·²ç»åœ¨ä¸è®°å½•å™¨äº¤äº’ï¼Œåˆ™è¯¥ä»£ç åœ¨ç­‰å¾…è®¿é—®å±æ€§æ—¶æš‚åœã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œä½œä¸ºå‚ä¸è€…ä¸€éƒ¨åˆ†çš„ä»£ç åœ¨è®¿é—®å‚ä¸è€…çš„å±æ€§æ—¶ä¸ä¼šå†™å…¥awaitã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç”¨æ–°æ¸©åº¦æ›´æ–°TemperatureLoggerçš„æ–¹æ³•ï¼š extension TemperatureLogger { â€‹ func update(with measurement: Int) { â€‹ measurements.append(measurement) â€‹ if measurement &gt; max { â€‹ max &#x3D; measurement â€‹ } â€‹ } } The update(with:) method is already running on the actor, so it doesnâ€™t mark its access to properties like max with await. This method also shows one of the reasons why actors allow only one task at a time to interact with their mutable state: Some updates to an actorâ€™s state temporarily break invariants. The TemperatureLogger actor keeps track of a list of temperatures and a maximum temperature, and it updates the maximum temperature when you record a new measurement. In the middle of an update, after appending the new measurement but before updating max, the temperature logger is in a temporary inconsistent state. Preventing multiple tasks from interacting with the same instance simultaneously prevents problems like the following sequence of events: æ‚¨çš„ä»£ç è°ƒç”¨update(with:)æ–¹æ³•ã€‚å®ƒé¦–å…ˆæ›´æ–°measurementsé˜µåˆ—ã€‚ åœ¨ä»£ç å¯ä»¥æ›´æ–°maxä¹‹å‰ï¼Œå…¶ä»–åœ°æ–¹çš„ä»£ç ä¼šè¯»å–æœ€å¤§å€¼å’Œæ¸©åº¦æ•°ç»„ã€‚ æ‚¨çš„ä»£ç é€šè¿‡æ›´æ”¹maxå®Œæˆæ›´æ–°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨å…¶ä»–åœ°æ–¹è¿è¡Œçš„ä»£ç ä¼šè¯»å–é”™è¯¯çš„ä¿¡æ¯ï¼Œå› ä¸ºå®ƒå¯¹è¡Œä¸ºè€…çš„è®¿é—®åœ¨update(with:)çš„è°ƒç”¨ä¸­äº¤ç»‡åœ¨ä¸€èµ·ï¼Œè€Œæ•°æ®æš‚æ—¶æ— æ•ˆã€‚åœ¨ä½¿ç”¨Swiftè§’è‰²æ—¶ï¼Œæ‚¨å¯ä»¥é˜²æ­¢è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬ä¸€æ¬¡åªå…è®¸åœ¨å…¶çŠ¶æ€ä¸Šæ‰§è¡Œä¸€æ¬¡æ“ä½œï¼Œå¹¶ä¸”è¯¥ä»£ç åªèƒ½åœ¨awaitæ ‡è®°æš‚åœç‚¹çš„åœ°æ–¹ä¸­æ–­ã€‚ç”±äºupdate(with:)ä¸åŒ…å«ä»»ä½•æš‚åœç‚¹ï¼Œå› æ­¤æ²¡æœ‰å…¶ä»–ä»£ç å¯ä»¥åœ¨æ›´æ–°è¿‡ç¨‹ä¸­è®¿é—®æ•°æ®ã€‚ å¦‚æœæ‚¨å°è¯•ä»æ¼”å‘˜å¤–éƒ¨è®¿é—®è¿™äº›å±æ€§ï¼Œå°±åƒä½¿ç”¨ç±»å®ä¾‹ä¸€æ ·ï¼Œæ‚¨å°†æ”¶åˆ°ç¼–è¯‘æ—¶é”™è¯¯ï¼›ä¾‹å¦‚ï¼š print(logger.max) &#x2F;&#x2F; Error åœ¨ä¸å†™å…¥çš„æƒ…å†µä¸‹è®¿é—®logger.maxå¤±è´¥ï¼Œå› ä¸ºæ¼”å‘˜çš„å±æ€§æ˜¯è¯¥æ¼”å‘˜å­¤ç«‹çš„æœ¬åœ°çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚Swiftä¿è¯åªæœ‰æ¼”å‘˜å†…éƒ¨çš„ä»£ç æ‰èƒ½è®¿é—®æ¼”å‘˜çš„æœ¬åœ°çŠ¶æ€ã€‚è¿™ç§ä¿è¯è¢«ç§°ä¸ºæ¼”å‘˜éš”ç¦»ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ æ§åˆ¶æµç¨‹","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-æ§åˆ¶æµç¨‹","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.289Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-æ§åˆ¶æµç¨‹/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/ControlFlow.html Swiftæä¾›äº†å„ç§æ§åˆ¶æµè¯­å¥ã€‚è¿™äº›åŒ…æ‹¬whileå¾ªç¯å¤šæ¬¡æ‰§è¡Œä»»åŠ¡ï¼›ifã€guardå’Œswitchè¯­å¥ï¼Œä»¥æ ¹æ®ç‰¹å®šæ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç åˆ†æ”¯ï¼›ä»¥åŠbreakå’Œcontinueå°†æ‰§è¡Œæµç¨‹è½¬ç§»åˆ°ä»£ç ä¸­çš„å¦ä¸€ä¸ªç‚¹ç­‰è¯­å¥ã€‚ Swiftè¿˜æä¾›äº†ä¸€ä¸ªfor-inå¾ªç¯ï¼Œå¯ä»¥è½»æ¾åœ°åœ¨æ•°ç»„ã€å­—å…¸ã€èŒƒå›´ã€å­—ç¬¦ä¸²å’Œå…¶ä»–åºåˆ—ä¸Šè¿­ä»£ã€‚ Swiftçš„switchè¯­å¥åœ¨è®¸å¤šç±»ä¼¼Cè¯­è¨€ä¸­æ¯”å®ƒçš„å¯¹åº”è¯­å¥å¼ºå¤§å¾—å¤šã€‚æ¡ˆä¾‹å¯ä»¥åŒ¹é…è®¸å¤šä¸åŒçš„æ¨¡å¼ï¼ŒåŒ…æ‹¬é—´éš”åŒ¹é…ã€å…ƒç»„å’Œç‰¹å®šç±»å‹çš„è½¬æ¢ã€‚switchæƒ…å†µä¸‹çš„åŒ¹é…å€¼å¯ä»¥ç»‘å®šåˆ°ä¸´æ—¶å¸¸é‡æˆ–å˜é‡ï¼Œä»¥ä¾¿åœ¨æ¡ˆä¾‹æ­£æ–‡ä¸­ä½¿ç”¨ï¼Œå¤æ‚çš„åŒ¹é…æ¡ä»¶å¯ä»¥ç”¨æ¯ä¸ªæ¡ˆä¾‹çš„whereå­å¥è¡¨ç¤ºã€‚ For-Inå¾ªç¯æ‚¨å¯ä»¥ä½¿ç”¨for-inå¾ªç¯è¿­ä»£åºåˆ—ï¼Œä¾‹å¦‚æ•°ç»„ä¸­çš„é¡¹ã€æ•°å­—èŒƒå›´æˆ–å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚ æ­¤ç¤ºä¾‹ä½¿ç”¨for-inå¾ªç¯æ¥è¿­ä»£æ•°ç»„ä¸­çš„é¡¹ç›®ï¼š 12345678let names = [&quot;Anna&quot;, &quot;Alex&quot;, &quot;Brian&quot;, &quot;Jack&quot;]for name in names &#123; print(&quot;Hello, \\(name)!&quot;)&#125;// Hello, Anna!// Hello, Alex!// Hello, Brian!// Hello, Jack! æ‚¨è¿˜å¯ä»¥è¿­ä»£å­—å…¸ä»¥è®¿é—®å…¶é”®å€¼å¯¹ã€‚å­—å…¸è¿­ä»£æ—¶ï¼Œå­—å…¸ä¸­çš„æ¯ä¸ªé¡¹ç›®éƒ½ä¼šä½œä¸º(key,value)å…ƒç»„è¿”å›ï¼Œæ‚¨å¯ä»¥å°†(key,value)å…ƒç»„çš„æˆå‘˜åˆ†è§£ä¸ºæ˜¾å¼å‘½åçš„å¸¸é‡ï¼Œä»¥ä¾¿åœ¨for-inå¾ªç¯çš„æ­£æ–‡ä¸­ä½¿ç”¨ã€‚åœ¨ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œå­—å…¸çš„é”®è¢«åˆ†è§£ä¸ºåä¸ºanimalNameçš„å¸¸é‡ï¼Œå­—å…¸çš„å€¼è¢«åˆ†è§£ä¸ºåä¸ºlegCountçš„å¸¸é‡ã€‚ 1234567let numberOfLegs = [&quot;spider&quot;: 8, &quot;ant&quot;: 6, &quot;cat&quot;: 4]for (animalName, legCount) in numberOfLegs &#123; print(&quot;\\(animalName)s have \\(legCount) legs&quot;)&#125;// cats have 4 legs// ants have 6 legs// spiders have 8 legs Dictionaryçš„å†…å®¹æœ¬è´¨ä¸Šæ˜¯æ— åºçš„ï¼Œè¿­ä»£å®ƒä»¬å¹¶ä¸èƒ½ä¿è¯æ£€ç´¢å®ƒä»¬çš„é¡ºåºã€‚ç‰¹åˆ«æ˜¯ï¼Œæ‚¨åœ¨Dictionaryä¸­æ’å…¥é¡¹ç›®çš„é¡ºåºå¹¶ä¸èƒ½å®šä¹‰å®ƒä»¬è¿­ä»£çš„é¡ºåºã€‚æœ‰å…³æ•°ç»„å’Œå­—å…¸çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…é›†åˆç±»å‹ã€‚ æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ•°å­—èŒƒå›´çš„for-inå¾ªç¯ã€‚æ­¤ç¤ºä¾‹æ‰“å°äº”æ¬¡è¡¨ä¸­çš„å‰å‡ ä¸ªæ¡ç›®ï¼š 12345678for index in 1...5 &#123; print(&quot;\\(index) times 5 is \\(index * 5)&quot;)&#125;// 1 times 5 is 5// 2 times 5 is 10// 3 times 5 is 15// 4 times 5 is 20// 5 times 5 is 25 æ­£åœ¨è¿­ä»£çš„åºåˆ—æ˜¯ä»1åˆ°5çš„æ•°å­—èŒƒå›´ï¼ŒåŒ…æ‹¬ä½¿ç”¨é—­åŒºé—´è¿ç®—ç¬¦ï¼ˆ...ï¼‰æ‰€ç¤ºã€‚indexçš„å€¼è®¾ç½®ä¸ºèŒƒå›´ï¼ˆ1ï¼‰ä¸­çš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œå¹¶æ‰§è¡Œå¾ªç¯ä¸­çš„è¯­å¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¾ªç¯åªåŒ…å«ä¸€ä¸ªè¯­å¥ï¼Œè¯¥è¯­å¥ä»äº”æ¬¡è¡¨ä¸­æ‰“å°indexå½“å‰å€¼çš„æ¡ç›®ã€‚æ‰§è¡Œè¯­å¥åï¼Œindexå€¼å°†æ›´æ–°ä¸ºåŒ…å«èŒƒå›´ï¼ˆ2ï¼‰ä¸­çš„ç¬¬äºŒä¸ªå€¼ï¼Œå¹¶å†æ¬¡è°ƒç”¨print(_:separator:terminator:)å‡½æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸€ç›´æŒç»­åˆ°èŒƒå›´ç»“æŸã€‚ åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œindexæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå…¶å€¼åœ¨å¾ªç¯æ¯æ¬¡è¿­ä»£å¼€å§‹æ—¶è‡ªåŠ¨è®¾ç½®ã€‚å› æ­¤ï¼Œindexåœ¨ä½¿ç”¨ä¹‹å‰ä¸å¿…å£°æ˜ã€‚å®ƒä»…é€šè¿‡åŒ…å«åœ¨å¾ªç¯å£°æ˜ä¸­æ¥éšå¼å£°æ˜ï¼Œè€Œæ— éœ€letå£°æ˜å…³é”®å­—ã€‚ å¦‚æœæ‚¨ä¸éœ€è¦åºåˆ—ä¸­çš„æ¯ä¸ªå€¼ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ä»£æ›¿å˜é‡åç§°æ¥å¿½ç•¥è¿™äº›å€¼ã€‚ 12345678let base = 3let power = 10var answer = 1for _ in 1...power &#123; answer *= base&#125;print(&quot;\\(base) to the power of \\(power) is \\(answer)&quot;)// Prints &quot;3 to the power of 10 is 59049&quot; ä¸Šé¢çš„ç¤ºä¾‹è®¡ç®—äº†ä¸€ä¸ªæ•°å­—å¯¹å¦ä¸€ä¸ªæ•°å­—å¹‚çš„å€¼ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ3åˆ°10çš„å¹‚ï¼‰ã€‚å®ƒä½¿ç”¨ä»¥1å¼€å¤´å’Œä»¥10ç»“å°¾çš„é—­åˆèŒƒå›´å°†1ï¼ˆå³3åˆ°0çš„å¹‚ï¼‰ä¹˜ä»¥3ã€åå€ã€‚å¯¹äºæ­¤è®¡ç®—ï¼Œæ¯æ¬¡é€šè¿‡å¾ªç¯çš„å•ä¸ªè®¡æ•°å™¨å€¼æ˜¯ä¸å¿…è¦çš„â€”â€”ä»£ç åªéœ€æ­£ç¡®æ‰§è¡Œå¾ªç¯æ¬¡æ•°ã€‚ä»£æ›¿å¾ªç¯å˜é‡çš„ä¸‹åˆ’çº¿å­—ç¬¦ï¼ˆ_ï¼‰ä¼šå¯¼è‡´å•ä¸ªå€¼è¢«å¿½ç•¥ï¼Œå¹¶ä¸”åœ¨å¾ªç¯çš„æ¯æ¬¡è¿­ä»£ä¸­ä¸æä¾›å¯¹å½“å‰å€¼çš„è®¿é—®ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½ä¸æƒ³ä½¿ç”¨é—­åˆèŒƒå›´ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªç«¯ç‚¹ã€‚è€ƒè™‘åœ¨è¡¨ç›˜ä¸Šæ¯åˆ†é’Ÿç»˜åˆ¶åˆ»åº¦ã€‚ä½ æƒ³ç”»60å‹¾å·ï¼Œä»0åˆ†é’Ÿå¼€å§‹ã€‚ä½¿ç”¨åŠå¼€èŒƒå›´è¿ç®—ç¬¦ï¼ˆ..&lt;ï¼‰åŒ…æ‹¬ä¸‹ç•Œï¼Œä½†ä¸åŒ…æ‹¬ä¸Šç•Œã€‚æœ‰å…³èŒƒå›´çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…èŒƒå›´æ“ä½œå‘˜ã€‚ 1234let minutes = 60for tickMark in 0..&lt;minutes &#123; // render the tick mark each minute (60 times)&#125; ä¸€äº›ç”¨æˆ·å¯èƒ½å¸Œæœ›åœ¨ä»–ä»¬çš„UIä¸­å°‘æ‰“å‹¾ã€‚ä»–ä»¬å¯ä»¥é€‰æ‹©æ¯â€œ5â€åˆ†é’Ÿæ‰“ä¸€ä¸ªåˆ†æ•°ã€‚ä½¿ç”¨â€™ stride(from:to:by:) â€˜å‡½æ•°æ¥è·³è¿‡ä¸éœ€è¦çš„æ ‡è®°ã€‚ 1234let minuteInterval = 5for tickMark in stride(from: 0, to: minutes, by: minuteInterval) &#123; // render the tick mark every 5 minutes (0, 5, 10, 15 ... 45, 50, 55)&#125; é—­åˆèŒƒå›´ä¹Ÿå¯ç”¨ï¼Œä½¿ç”¨ stride(from:through:by:)ä»£æ›¿ï¼š 12345let hours = 12let hourInterval = 3for tickMark in stride(from: 3, through: hours, by: hourInterval) &#123; // render the tick mark every 3 hours (3, 6, 9, 12)&#125; ä¸Šé¢çš„ç¤ºä¾‹ä½¿ç”¨for-inå¾ªç¯æ¥è¿­ä»£èŒƒå›´ã€æ•°ç»„ã€å­—å…¸å’Œå­—ç¬¦ä¸²ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤è¯­æ³•è¿­ä»£ä»»ä½•é›†åˆï¼ŒåŒ…æ‹¬æ‚¨è‡ªå·±çš„ç±»å’Œé›†åˆç±»å‹ï¼Œåªè¦è¿™äº›ç±»å‹ç¬¦åˆSequenceåè®®ã€‚ Whileå¾ªç¯whileå¾ªç¯æ‰§è¡Œä¸€ç»„è¯­å¥ï¼Œç›´åˆ°æ¡ä»¶å˜æˆfalseã€‚å½“ç¬¬ä¸€æ¬¡è¿­ä»£å¼€å§‹å‰ä¸çŸ¥é“è¿­ä»£æ¬¡æ•°æ—¶ï¼Œæœ€å¥½ä½¿ç”¨è¿™äº›ç±»å‹çš„å¾ªç¯ã€‚Swiftæä¾›äº†ä¸¤ç§ç±»å‹çš„whileå¾ªç¯ï¼š whileåœ¨æ¯æ¬¡é€šè¿‡å¾ªç¯å¼€å§‹æ—¶è¯„ä¼°å…¶çŠ¶æ€ã€‚ repeat-whileåœ¨æ¯æ¬¡é€šè¿‡å¾ªç¯ç»“æŸæ—¶è¯„ä¼°å…¶çŠ¶æ€ã€‚ Whilewhileå¾ªç¯ä»è¯„ä¼°å•ä¸ªæ¡ä»¶å¼€å§‹ã€‚å¦‚æœæ¡ä»¶ä¸ºtrueï¼Œåˆ™é‡å¤ä¸€ç»„è¯­å¥ï¼Œç›´åˆ°æ¡ä»¶å˜ä¸ºfalseã€‚ ä»¥ä¸‹æ˜¯whileå¾ªç¯çš„ä¸€èˆ¬å½¢å¼ï¼š while condition { â€‹ statements } è¿™ä¸ªä¾‹å­ç©ä¸€ä¸ªç®€å•çš„è›‡å’Œæ¢¯å­æ¸¸æˆï¼ˆä¹Ÿç§°ä¸ºæ»‘æ§½å’Œæ¢¯å­ï¼‰ï¼š æ¸¸æˆè§„åˆ™å¦‚ä¸‹ï¼š è‘£äº‹ä¼šæœ‰25ä¸ªæ­£æ–¹å½¢ï¼Œç›®æ ‡æ˜¯é™è½åœ¨25ä¸ªæ­£æ–¹å½¢æˆ–25ä¸ªä»¥ä¸Šã€‚ ç©å®¶çš„èµ·å§‹æ–¹å—æ˜¯â€œæ­£æ–¹å½¢é›¶â€ï¼Œå°±åœ¨æ£‹ç›˜çš„å·¦ä¸‹è§’ã€‚ æ¯æ¬¡è½¬å¼¯ï¼Œæ‚¨æ»šåŠ¨ä¸€ä¸ªå…­é¢éª°å­ï¼Œå¹¶æ²¿ç€ä¸Šé¢è™šçº¿ç®­å¤´æŒ‡ç¤ºçš„æ°´å¹³è·¯å¾„æŒ‰è¯¥æ•°é‡çš„æ­£æ–¹å½¢ç§»åŠ¨ã€‚ å¦‚æœä½ çš„è½¬å¼¯åœ¨æ¢¯å­åº•éƒ¨ç»“æŸï¼Œä½ å°±å‘ä¸Šç§»åŠ¨ã€‚ å¦‚æœä½ çš„è½¬å¼¯åœ¨è›‡çš„å¤´ä¸Šç»“æŸï¼Œä½ å°±æ²¿ç€é‚£æ¡è›‡å‘ä¸‹ç§»åŠ¨ã€‚ æ¸¸æˆæ¿ç”±Intå€¼æ•°ç»„è¡¨ç¤ºã€‚å®ƒçš„å¤§å°åŸºäºä¸€ä¸ªåä¸ºfinalSquareå¸¸é‡ï¼Œè¯¥å¸¸é‡ç”¨äºåˆå§‹åŒ–æ•°ç»„ï¼Œå¹¶åœ¨ç¤ºä¾‹åé¢æ£€æŸ¥è·èƒœæ¡ä»¶ã€‚å› ä¸ºç©å®¶ä»æ£‹ç›˜å¼€å§‹ï¼Œåœ¨â€œå¹³æ–¹é›¶â€ä¸Šï¼Œæ£‹ç›˜åˆå§‹åŒ–ä¸º26ä¸ªé›¶Intå€¼ï¼Œè€Œä¸æ˜¯25ä¸ªã€‚ 12let finalSquare = 25var board = [Int](repeating: 0, count: finalSquare + 1) ç„¶åå°†ä¸€äº›æ­£æ–¹å½¢è®¾ç½®ä¸ºè›‡å’Œæ¢¯å­å…·æœ‰æ›´å…·ä½“çš„å€¼ã€‚å¸¦æ¢¯å­åº•åº§çš„æ­£æ•°å¯ä»¥å°†æ‚¨å‘ä¸Šç§»åŠ¨ï¼Œè€Œå¸¦è›‡å¤´çš„æ­£æ–¹å½¢åˆ™æœ‰ä¸€ä¸ªè´Ÿæ•°å°†æ‚¨ç§»å›æ¿ä¸Šã€‚ 12board[03] = +08; board[06] = +11; board[09] = +09; board[10] = +02board[14] = -10; board[19] = -11; board[22] = -02; board[24] = -08 æ­£æ–¹å½¢3åŒ…å«ä¸€ä¸ªæ¢¯å­çš„åº•éƒ¨ï¼Œè¯¥æ¢¯å­å°†æ‚¨ç§»åŠ¨åˆ°æ­£æ–¹å½¢11ã€‚ä¸ºäº†è¡¨ç¤ºè¿™ä¸€ç‚¹ï¼Œboard[03]ç­‰äº+08ï¼Œè¿™ç›¸å½“äºæ•´æ•°å€¼8ï¼ˆ3å’Œ11ä¹‹é—´çš„å·®ï¼‰ã€‚ä¸ºäº†å¯¹é½å€¼å’Œè¯­å¥ï¼Œä¸€å…ƒåŠ è¿ç®—ç¬¦ï¼ˆ+iï¼‰æ˜¾å¼åœ°ä¸ä¸€å…ƒå‡è¿ç®—ç¬¦ï¼ˆ-iï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œå°äº10çš„æ•°å­—ç”¨é›¶å¡«å……ã€‚ï¼ˆä¸¤è€…éƒ½ä¸æ˜¯ä¸¥æ ¼å¿…è¦çš„æ–‡ä½“æŠ€æœ¯ï¼Œä½†å®ƒä»¬ä¼šå¯¼è‡´ä»£ç æ›´æ•´æ´ã€‚ï¼‰ 1234567891011121314var square = 0var diceRoll = 0while square &lt; finalSquare &#123; // roll the dice diceRoll += 1 if diceRoll == 7 &#123; diceRoll = 1 &#125; // move by the rolled amount square += diceRoll if square &lt; board.count &#123; // if we&#x27;re still on the board, move up or down for a snake or a ladder square += board[square] &#125;&#125;print(&quot;Game over!&quot;) ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨ä¸€ç§éå¸¸ç®€å•çš„æ–¹æ³•æ¥æ·éª°å­ã€‚å®ƒä¸æ˜¯ç”Ÿæˆéšæœºæ•°ï¼Œè€Œæ˜¯ä»¥diceRollå€¼0å¼€å¤´ã€‚æ¯æ¬¡é€šè¿‡whileå¾ªç¯ï¼ŒdiceRolléƒ½ä¼šå¢åŠ ä¸€ä¸ªï¼Œç„¶åæ£€æŸ¥å®ƒæ˜¯å¦å˜å¾—å¤ªå¤§ã€‚æ¯å½“è¿™ä¸ªè¿”å›å€¼ç­‰äº7æ—¶ï¼Œéª°å­å·å°±å˜å¾—å¤ªå¤§ï¼Œå¹¶é‡ç½®ä¸º1ã€‚ç»“æœæ˜¯ä¸€ç³»åˆ—diceRollå€¼ï¼Œæ€»æ˜¯1ã€2ã€3ã€4ã€5ã€6ã€1ã€2ç­‰ç­‰ã€‚ æ·éª°å­åï¼Œç©å®¶é€šè¿‡diceRollæ­£æ–¹å½¢å‘å‰ç§»åŠ¨ã€‚éª°å­å·å¯èƒ½å·²ç»å°†ç©å®¶ç§»åˆ°äº†25æ–¹å—ä¹‹å¤–ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¸¸æˆå°±ç»“æŸäº†ã€‚ä¸ºäº†åº”å¯¹è¿™ç§æƒ…å†µï¼Œä»£ç æ£€æŸ¥è¯¥squareå°äºboardæ•°ç»„çš„countå±æ€§ã€‚å¦‚æœsquareæœ‰æ•ˆï¼Œåˆ™å°†å­˜å‚¨åœ¨board[square]ä¸­çš„å€¼æ·»åŠ åˆ°å½“å‰squareå€¼ä¸­ï¼Œä»¥å‘ä¸Šæˆ–å‘ä¸‹ç§»åŠ¨ä»»ä½•æ¢¯å­æˆ–è›‡ã€‚ æ³¨æ„ å¦‚æœä¸æ‰§è¡Œæ­¤æ£€æŸ¥ï¼Œboard[square]å¯èƒ½ä¼šå°è¯•è®¿é—®boardæ•°ç»„èŒƒå›´ä¹‹å¤–çš„å€¼ï¼Œè¿™å°†è§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚ ç„¶åï¼Œç”µæµwhileå¾ªç¯æ‰§è¡Œç»“æŸï¼Œå¹¶æ£€æŸ¥å¾ªç¯çš„æ¡ä»¶ï¼Œçœ‹çœ‹æ˜¯å¦åº”è¯¥å†æ¬¡æ‰§è¡Œå¾ªç¯ã€‚å¦‚æœç©å®¶åœ¨æ­£æ–¹å½¢25ä¸Šç§»åŠ¨æˆ–è¶…è¿‡25ï¼Œå¾ªç¯çš„æ¡ä»¶å°†è®¡ç®—ä¸ºfalseï¼Œæ¸¸æˆç»“æŸã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œwhileå¾ªç¯æ˜¯åˆé€‚çš„ï¼Œå› ä¸ºwhileå¾ªç¯å¼€å§‹æ—¶æ¸¸æˆçš„é•¿åº¦ä¸æ˜ç¡®ã€‚ç›¸åï¼Œå¾ªç¯è¢«æ‰§è¡Œï¼Œç›´åˆ°æ»¡è¶³ç‰¹å®šæ¡ä»¶ã€‚ Repeat-Whilewhileå¾ªç¯çš„å¦ä¸€ä¸ªå˜ä½“ï¼Œç§°ä¸ºrepeat``whileå¾ªç¯ï¼Œåœ¨è€ƒè™‘å¾ªç¯çš„æ¡ä»¶ä¹‹å‰ï¼Œå…ˆæ‰§è¡Œä¸€æ¬¡å¾ªç¯å—çš„ä¼ é€’ã€‚ç„¶åï¼Œå®ƒç»§ç»­é‡å¤å¾ªç¯ï¼Œç›´åˆ°æ¡ä»¶ä¸ºfalseã€‚ æ³¨æ„ Swift ä¸­çš„repeatå¾ªç¯ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„whileå¾ªç¯ã€‚ ä»¥ä¸‹æ˜¯repeatå¾ªç¯çš„ä¸€èˆ¬å½¢å¼ï¼š repeat { â€‹ statements } while condition è¿™æ˜¯è›‡å’Œæ¢¯å­çš„ä¾‹å­ï¼Œå†™æˆrepeatå¾ªç¯ï¼Œè€Œä¸æ˜¯whileå¾ªç¯ã€‚finalSquareã€boardã€squareå’ŒdiceRollçš„å€¼åˆå§‹åŒ–æ–¹å¼ä¸whileå¾ªç¯å®Œå…¨ç›¸åŒã€‚ 123456let finalSquare = 25var board = [Int](repeating: 0, count: finalSquare + 1)board[03] = +08; board[06] = +11; board[09] = +09; board[10] = +02board[14] = -10; board[19] = -11; board[22] = -02; board[24] = -08var square = 0var diceRoll = 0 åœ¨è¿™ä¸ªç‰ˆæœ¬çš„æ¸¸æˆä¸­ï¼Œå¾ªç¯ä¸­çš„ç¬¬ä¸€ä¸ªåŠ¨ä½œæ˜¯æ£€æŸ¥æ¢¯å­æˆ–è›‡ã€‚æ£‹ç›˜ä¸Šæ²¡æœ‰æ¢¯å­å°†ç©å®¶ç›´æ¥å¸¦åˆ°25å·æ–¹å—ï¼Œå› æ­¤ä¸å¯èƒ½é€šè¿‡å‘ä¸Šç§»åŠ¨æ¢¯å­æ¥èµ¢å¾—æ¯”èµ›ã€‚å› æ­¤ï¼Œæ£€æŸ¥è›‡æˆ–æ¢¯å­ä½œä¸ºå¾ªç¯ä¸­çš„ç¬¬ä¸€ä¸ªåŠ¨ä½œæ˜¯å®‰å…¨çš„ã€‚ åœ¨æ¸¸æˆå¼€å§‹æ—¶ï¼Œç©å®¶å¤„äºâ€œå¹³æ–¹é›¶â€ã€‚board[0]æ€»æ˜¯ç­‰äº0ï¼Œæ²¡æœ‰æ•ˆæœã€‚ 12345678910repeat &#123; // move up or down for a snake or ladder square += board[square] // roll the dice diceRoll += 1 if diceRoll == 7 &#123; diceRoll = 1 &#125; // move by the rolled amount square += diceRoll&#125; while square &lt; finalSquareprint(&quot;Game over!&quot;) åœ¨ä»£ç æ£€æŸ¥è›‡å’Œæ¢¯å­åï¼Œæ·éª°å­ï¼Œç©å®¶è¢«diceRollæ­£æ–¹å½¢å‘å‰ç§»åŠ¨ã€‚ç„¶åï¼Œå½“å‰çš„å¾ªç¯æ‰§è¡Œç»“æŸã€‚ å¾ªç¯çš„æ¡ä»¶ï¼ˆwhilesquare&lt;finalSquareï¼‰ä¸ä»¥å‰ç›¸åŒï¼Œä½†è¿™æ¬¡è¦åˆ°ç¬¬ä¸€æ¬¡å¾ªç¯è¿è¡Œç»“æŸæ—¶æ‰ä¼šè¿›è¡Œè¯„ä¼°ã€‚repeatå¾ªç¯çš„ç»“æ„æ¯”ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­çš„whileå¾ªç¯æ›´é€‚åˆè¿™ä¸ªæ¸¸æˆã€‚åœ¨ä¸Šé¢çš„whileå¾ªç¯ä¸­ï¼Œsquare+=board[square]æ€»æ˜¯åœ¨å¾ªç¯åç«‹å³æ‰§è¡Œï¼Œwhileæ¡ä»¶ç¡®è®¤squareä»åœ¨æ¿ä¸Šã€‚æ­¤è¡Œä¸ºæ¶ˆé™¤äº†å‰é¢æè¿°çš„æ¸¸æˆwhileå¾ªç¯ç‰ˆæœ¬ä¸­å¯¹æ•°ç»„è¾¹ç•Œæ£€æŸ¥çš„éœ€æ±‚ã€‚ æ¡ä»¶å£°æ˜æ ¹æ®ç‰¹å®šæ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç é€šå¸¸éå¸¸æœ‰ç”¨ã€‚æ‚¨å¯èƒ½å¸Œæœ›åœ¨å‘ç”Ÿé”™è¯¯æ—¶è¿è¡Œé¢å¤–çš„ä»£ç ï¼Œæˆ–è€…åœ¨å€¼å˜å¾—å¤ªé«˜æˆ–å¤ªä½æ—¶æ˜¾ç¤ºæ¶ˆæ¯ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥å°†éƒ¨åˆ†ä»£ç é™„åŠ æ¡ä»¶ã€‚ Swiftæä¾›äº†ä¸¤ç§å‘ä»£ç æ·»åŠ æ¡ä»¶åˆ†æ”¯çš„æ–¹æ³•ï¼šifè¯­å¥å’Œswitchè¯­å¥ã€‚é€šå¸¸ï¼Œæ‚¨ä½¿ç”¨ifè¯­å¥æ¥è¯„ä¼°åªæœ‰å°‘æ•°å¯èƒ½ç»“æœçš„ç®€å•æ¡ä»¶ã€‚switchè¯­å¥æ›´é€‚åˆå…·æœ‰å¤šç§å¯èƒ½æ’åˆ—çš„æ›´å¤æ‚æ¡ä»¶ï¼Œåœ¨æ¨¡å¼åŒ¹é…å¯ä»¥å¸®åŠ©é€‰æ‹©é€‚å½“çš„ä»£ç åˆ†æ”¯æ‰§è¡Œçš„æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚ ifåœ¨æœ€ç®€å•çš„å½¢å¼ä¸­ï¼Œifè¯­å¥æœ‰ä¸€ä¸ªå•ä¸€çš„ifæ¡ä»¶ã€‚åªæœ‰å½“æ¡ä»¶ä¸ºtrueæ—¶ï¼Œå®ƒæ‰ä¼šæ‰§è¡Œä¸€ç»„è¯­å¥ã€‚ 12345var temperatureInFahrenheit = 30if temperatureInFahrenheit &lt;= 32 &#123; print(&quot;It&#x27;s very cold. Consider wearing a scarf.&quot;)&#125;// Prints &quot;It&#x27;s very cold. Consider wearing a scarf.&quot; ä¸Šé¢çš„ä¾‹å­æ£€æŸ¥æ¸©åº¦æ˜¯å°äºè¿˜æ˜¯ç­‰äº32åæ°åº¦ï¼ˆæ°´çš„å†°ç‚¹ï¼‰ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ‰“å°ä¸€æ¡æ¶ˆæ¯ã€‚å¦åˆ™ï¼Œä¸ä¼šæ‰“å°æ¶ˆæ¯ï¼Œä»£ç æ‰§è¡Œåœ¨ifè¯­å¥çš„å…³é—­å¤§æ‹¬å·åç»§ç»­ã€‚ ifè¯­å¥å¯ä»¥ä¸ºifæ¡ä»¶ä¸ºfalseçš„æƒ…å†µæä¾›ä¸€ç»„æ›¿ä»£è¯­å¥ï¼Œç§°ä¸ºe elseå­å¥ã€‚è¿™äº›è¯­å¥ç”±elseå…³é”®å­—è¡¨ç¤ºã€‚ 1234567temperatureInFahrenheit = 40if temperatureInFahrenheit &lt;= 32 &#123; print(&quot;It&#x27;s very cold. Consider wearing a scarf.&quot;)&#125; else &#123; print(&quot;It&#x27;s not that cold. Wear a t-shirt.&quot;)&#125;// Prints &quot;It&#x27;s not that cold. Wear a t-shirt.&quot; è¿™ä¸¤ä¸ªåˆ†æ”¯ä¸­çš„ä¸€ä¸ªæ€»æ˜¯è¢«æ‰§è¡Œçš„ã€‚ç”±äºæ¸©åº¦å·²å‡è‡³åæ°40åº¦ï¼Œå› æ­¤ä¸å†è¶³å¤Ÿå†·ï¼Œæ— æ³•å»ºè®®æˆ´å›´å·¾ï¼Œå› æ­¤ä¼šè§¦å‘elseåˆ†æ”¯ã€‚ æ‚¨å¯ä»¥å°†å¤šä¸ªifè¯­å¥é“¾æ¥åœ¨ä¸€èµ·ï¼Œä»¥è€ƒè™‘å…¶ä»–å­å¥ã€‚ 123456789temperatureInFahrenheit = 90if temperatureInFahrenheit &lt;= 32 &#123; print(&quot;It&#x27;s very cold. Consider wearing a scarf.&quot;)&#125; else if temperatureInFahrenheit &gt;= 86 &#123; print(&quot;It&#x27;s really warm. Don&#x27;t forget to wear sunscreen.&quot;)&#125; else &#123; print(&quot;It&#x27;s not that cold. Wear a t-shirt.&quot;)&#125;// Prints &quot;It&#x27;s really warm. Don&#x27;t forget to wear sunscreen.&quot; åœ¨è¿™é‡Œï¼Œæ·»åŠ äº†ä¸€ä¸ªé¢å¤–çš„ifè¯­å¥ï¼Œä»¥åº”å¯¹ç‰¹åˆ«æ¸©æš–çš„æ¸©åº¦ã€‚æœ€åçš„elseå¥ä»ç„¶å­˜åœ¨ï¼Œå®ƒæ‰“å°äº†å¯¹ä»»ä½•æ—¢ä¸å¤ªæ¸©æš–ä¹Ÿä¸å¤ªå†·çš„æ¸©åº¦çš„å“åº”ã€‚ ç„¶è€Œï¼Œæœ€ç»ˆçš„al elseå­å¥æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸€ç»„æ¡ä»¶ä¸éœ€è¦å®Œæ•´ï¼Œåˆ™å¯ä»¥æ’é™¤ã€‚ 123456temperatureInFahrenheit = 72if temperatureInFahrenheit &lt;= 32 &#123; print(&quot;It&#x27;s very cold. Consider wearing a scarf.&quot;)&#125; else if temperatureInFahrenheit &gt;= 86 &#123; print(&quot;It&#x27;s really warm. Don&#x27;t forget to wear sunscreen.&quot;)&#125; ç”±äºæ¸©åº¦æ—¢ä¸å¤ªå†·ä¹Ÿä¸å¤ªæš–ï¼Œæ— æ³•è§¦å‘ifæˆ–ifæ¡ä»¶ï¼Œå› æ­¤æ²¡æœ‰æ‰“å°ä»»ä½•æ¶ˆæ¯ã€‚ switchswitchè¯­å¥è€ƒè™‘ä¸€ä¸ªå€¼ï¼Œå¹¶å°†å…¶ä¸å‡ ç§å¯èƒ½çš„åŒ¹é…æ¨¡å¼è¿›è¡Œæ¯”è¾ƒã€‚ç„¶åï¼Œå®ƒæ ¹æ®ç¬¬ä¸€ä¸ªæˆåŠŸåŒ¹é…çš„æ¨¡å¼æ‰§è¡Œé€‚å½“çš„ä»£ç å—ã€‚switchè¯­å¥æä¾›äº†ifè¯­å¥çš„æ›¿ä»£æ–¹æ¡ˆï¼Œç”¨äºå“åº”å¤šä¸ªæ½œåœ¨çŠ¶æ€ã€‚ ä»¥æœ€ç®€å•çš„å½¢å¼ï¼Œswitchè¯­å¥å°†ä¸€ä¸ªå€¼ä¸åŒä¸€ç±»å‹çš„ä¸€ä¸ªæˆ–å¤šä¸ªå€¼è¿›è¡Œæ¯”è¾ƒã€‚ 123456789switch some value to consider &#123;case value 1: respond to value 1case value 2, value 3: respond to value 2 or 3default: otherwise, do something else&#125; æ¯ä¸ªswitchè¯­å¥ç”±å¤šä¸ªå¯èƒ½çš„å¤§å°å†™ç»„æˆï¼Œæ¯ä¸ªcaseå…³é”®å­—å¼€å¤´ã€‚é™¤äº†ä¸ç‰¹å®šå€¼è¿›è¡Œæ¯”è¾ƒå¤–ï¼ŒSwiftè¿˜ä¸ºæ¯ç§æƒ…å†µæä¾›äº†å‡ ç§æ–¹æ³•æ¥æŒ‡å®šæ›´å¤æ‚çš„åŒ¹é…æ¨¡å¼ã€‚æœ¬ç« åé¢å°†ä»‹ç»è¿™äº›é€‰é¡¹ã€‚ ifè¯­å¥çš„æ­£æ–‡ä¸€æ ·ï¼Œæ¯ä¸ªcaseéƒ½æ˜¯ä»£ç æ‰§è¡Œçš„å•ç‹¬åˆ†æ”¯ã€‚switchè¯­å¥å†³å®šåº”è¯¥é€‰æ‹©å“ªä¸ªåˆ†æ”¯ã€‚æ­¤è¿‡ç¨‹è¢«ç§°ä¸ºå¯¹æ­£åœ¨è€ƒè™‘çš„å€¼è¿›è¡Œåˆ‡æ¢ã€‚ æ¯ä¸ªswitchè¯­å¥å¿…é¡»è¯¦å°½æ— é—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€è€ƒè™‘çš„ç±»å‹çš„æ¯ä¸ªå¯èƒ½å€¼éƒ½å¿…é¡»ä¸å…¶ä¸­ä¸€ä¸ªswitchæƒ…å†µåŒ¹é…ã€‚å¦‚æœä¸ºæ¯ä¸ªå¯èƒ½çš„å€¼æä¾›ä¸€ä¸ªæ¡ˆä¾‹ä¸åˆé€‚ï¼Œæ‚¨å¯ä»¥å®šä¹‰ä¸€ä¸ªé»˜è®¤å¤§å°å†™ï¼Œä»¥æ¶µç›–ä»»ä½•æœªæ˜¾å¼å¤„ç†çš„å€¼ã€‚æ­¤é»˜è®¤æƒ…å†µç”±defaultå…³é”®å­—è¡¨ç¤ºï¼Œå¹¶ä¸”å¿…é¡»å§‹ç»ˆæ˜¾ç¤ºåœ¨æœ€åã€‚ æ­¤ç¤ºä¾‹ä½¿ç”¨switchè¯­å¥æ¥è€ƒè™‘å•ä¸ªå°å†™å­—ç¬¦ï¼Œç§°ä¸ºsomeCharacterï¼š 12345678910let someCharacter: Character = &quot;z&quot;switch someCharacter &#123;case &quot;a&quot;: print(&quot;The first letter of the alphabet&quot;)case &quot;z&quot;: print(&quot;The last letter of the alphabet&quot;)default: print(&quot;Some other character&quot;)&#125;// Prints &quot;The last letter of the alphabet&quot; switchè¯­å¥çš„ç¬¬ä¸€ä¸ªå¤§å°å†™ä¸è‹±è¯­å­—æ¯è¡¨açš„ç¬¬ä¸€ä¸ªå­—æ¯åŒ¹é…ï¼Œå…¶ç¬¬äºŒä¸ªå¤§å°å†™ä¸æœ€åä¸€ä¸ªå­—æ¯zåŒ¹é…ã€‚ç”±äºswitchå¿…é¡»ä¸ºæ¯ä¸ªå¯èƒ½çš„å­—ç¬¦ï¼ˆè€Œä¸ä»…ä»…æ˜¯æ¯ä¸ªå­—æ¯å­—ç¬¦ï¼‰æœ‰ä¸€ä¸ªå¤§å°å†™ï¼Œå› æ­¤æ­¤switchè¯­å¥ä½¿ç”¨defaultå¤§å°å†™æ¥åŒ¹é…aå’Œzä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦ã€‚è¯¥æ¡æ¬¾ç¡®ä¿äº†switchè¯­å¥è¯¦å°½æ— é—ã€‚ æ²¡æœ‰éšå«Fallthroughä¸Cå’ŒObjective-Cä¸­çš„switchè¯­å¥ä¸åŒï¼ŒSwiftä¸­çš„switchè¯­å¥ä¸ä¼šé»˜è®¤åœ°ä»æ¯ä¸ªæ¡ˆä¾‹çš„åº•éƒ¨æ‰åˆ°ä¸‹ä¸€ä¸ªæ¡ˆä¾‹ä¸­ã€‚ç›¸åï¼Œæ•´ä¸ªswitchè¯­å¥åœ¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„switchæ¡ˆä¾‹å®Œæˆåç«‹å³å®Œæˆæ‰§è¡Œï¼Œè€Œæ— éœ€æ˜¾å¼breakè¯­å¥ã€‚è¿™ä½¿å¾—switchè¯­å¥æ¯”Cä¸­çš„äº¤æ¢æœºè¯­å¥æ›´å®‰å…¨ã€æ›´æ˜“äºä½¿ç”¨ï¼Œå¹¶é¿å…é”™è¯¯åœ°æ‰§è¡Œå¤šä¸ªswitchæ¡ˆä¾‹ã€‚ æ³¨æ„ è™½ç„¶ Swift ä¸­ä¸éœ€è¦breakï¼Œä½†æ‚¨å¯ä»¥ä½¿ç”¨breakè¯­å¥æ¥åŒ¹é…å’Œå¿½ç•¥ç‰¹å®šæ¡ˆä¾‹ï¼Œæˆ–è€…åœ¨æ¡ˆä¾‹å®Œæˆæ‰§è¡Œä¹‹å‰æ‰“ç ´åŒ¹é…çš„æ¡ˆä¾‹ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…åˆ‡æ¢è¯­å¥ä¸­çš„æ–­è£‚ã€‚ æ¯ä¸ªæ¡ˆä¾‹çš„æ­£æ–‡å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå¯æ‰§è¡Œçš„è¯­å¥ã€‚ç¼–å†™ä»¥ä¸‹ä»£ç æ— æ•ˆï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ¡ˆä¾‹ä¸ºç©ºï¼š 123456789let anotherCharacter: Character = &quot;a&quot;switch anotherCharacter &#123;case &quot;a&quot;: // Invalid, the case has an empty bodycase &quot;A&quot;: print(&quot;The letter A&quot;)default: print(&quot;Not the letter A&quot;)&#125;// This will report a compile-time error. ä¸Cä¸­çš„switchè¯­å¥ä¸åŒï¼Œæ­¤switchè¯­å¥ä¸&quot;a&quot;å’Œ&quot;A&quot;éƒ½ä¸åŒ¹é…ã€‚ç›¸åï¼Œå®ƒæŠ¥å‘Šäº†ä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ï¼Œcase&quot;a&quot;:ä¸åŒ…å«ä»»ä½•å¯æ‰§è¡Œè¯­å¥ã€‚è¿™ç§æ–¹æ³•é¿å…äº†ä»ä¸€ä¸ªæ¡ˆä¾‹åˆ°å¦ä¸€ä¸ªæ¡ˆä¾‹çš„æ„å¤–æ•…éšœï¼Œå¹¶ä½¿å…¶æ„å›¾æ›´å®‰å…¨çš„ä»£ç æ›´åŠ æ¸…æ™°ã€‚ è¦ä½¿ç”¨åŒæ—¶åŒ¹é…&quot;a&quot;å’Œ&quot;A&quot;çš„å•ä¸ªå¤§å°å†™è¿›è¡Œswitchè¯·å°†è¿™ä¸¤ä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå¤åˆå¤§å°å†™ï¼Œç”¨é€—å·åˆ†éš”å€¼ã€‚ 12345678let anotherCharacter: Character = &quot;a&quot;switch anotherCharacter &#123;case &quot;a&quot;, &quot;A&quot;: print(&quot;The letter A&quot;)default: print(&quot;Not the letter A&quot;)&#125;// Prints &quot;The letter A&quot; ä¸ºäº†å¯è¯»æ€§ï¼Œå¤åˆæƒ…å†µä¹Ÿå¯ä»¥å†™åœ¨å¤šè¡Œä¸Šã€‚æœ‰å…³å¤åˆç—…ä¾‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å¤åˆæ¡ˆä¾‹ã€‚ æ³¨æ„ è¦åœ¨ç‰¹å®šswitchå¤§å°å†™çš„æœ«å°¾æ˜¾å¼æ‰çº¿ï¼Œè¯·ä½¿ç”¨fallthroughå…³é”®å­—ï¼Œå¦‚Fallthroughä¸­æ‰€è¿°ã€‚ é—´éš”åŒ¹é…switchæƒ…å†µä¸‹çš„å€¼å¯ä»¥æ£€æŸ¥å®ƒä»¬æ˜¯å¦åœ¨é—´éš”å†…åŒ…å«ã€‚æ­¤ç¤ºä¾‹ä½¿ç”¨æ•°å­—é—´éš”ä¸ºä»»ä½•å¤§å°çš„æ•°å­—æä¾›è‡ªç„¶è¯­è¨€è®¡æ•°ï¼š 12345678910111213141516171819let approximateCount = 62let countedThings = &quot;moons orbiting Saturn&quot;let naturalCount: Stringswitch approximateCount &#123;case 0: naturalCount = &quot;no&quot;case 1..&lt;5: naturalCount = &quot;a few&quot;case 5..&lt;12: naturalCount = &quot;several&quot;case 12..&lt;100: naturalCount = &quot;dozens of&quot;case 100..&lt;1000: naturalCount = &quot;hundreds of&quot;default: naturalCount = &quot;many&quot;&#125;print(&quot;There are \\(naturalCount) \\(countedThings).&quot;)// Prints &quot;There are dozens of moons orbiting Saturn.&quot; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒapproximateCountåœ¨switchè¯­å¥ä¸­è®¡ç®—ã€‚æ¯ä¸ªcaseéƒ½å°†è¯¥å€¼ä¸æ•°å­—æˆ–åŒºé—´è¿›è¡Œæ¯”è¾ƒã€‚ç”±äºapproximateCountçš„å€¼åœ¨12åˆ°100ä¹‹é—´ï¼ŒnaturalCountè¢«åˆ†é…åˆ°&quot;dozenså¹¶ä»switchè¯­å¥ä¸­è½¬ç§»æ‰§è¡Œã€‚ å…ƒç»„æ‚¨å¯ä»¥ä½¿ç”¨å…ƒç»„åœ¨åŒä¸€switchè¯­å¥ä¸­æµ‹è¯•å¤šä¸ªå€¼ã€‚å…ƒç»„çš„æ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥æ ¹æ®ä¸åŒçš„å€¼æˆ–å€¼é—´éš”è¿›è¡Œæµ‹è¯•ã€‚æˆ–è€…ï¼Œä½¿ç”¨ä¸‹åˆ’çº¿å­—ç¬¦ï¼ˆ_ï¼‰ï¼Œä¹Ÿç§°ä¸ºé€šé…ç¬¦æ¨¡å¼ï¼Œä»¥åŒ¹é…ä»»ä½•å¯èƒ½çš„å€¼ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å–äº†ä¸€ä¸ªï¼ˆxï¼Œyï¼‰ç‚¹ï¼Œè¡¨ç¤ºä¸ºç±»å‹çš„ç®€å•å…ƒç»„(Int,Int)å¹¶åœ¨ç¤ºä¾‹åé¢çš„å›¾è¡¨ä¸Šå¯¹å…¶è¿›è¡Œåˆ†ç±»ã€‚ 1234567891011121314let somePoint = (1, 1)switch somePoint &#123;case (0, 0): print(&quot;\\(somePoint) is at the origin&quot;)case (_, 0): print(&quot;\\(somePoint) is on the x-axis&quot;)case (0, _): print(&quot;\\(somePoint) is on the y-axis&quot;)case (-2...2, -2...2): print(&quot;\\(somePoint) is inside the box&quot;)default: print(&quot;\\(somePoint) is outside of the box&quot;)&#125;// Prints &quot;(1, 1) is inside the box&quot; switchè¯­å¥ç¡®å®šè¯¥ç‚¹æ˜¯åœ¨åŸç‚¹ï¼ˆ0ï¼Œ0ï¼‰ã€çº¢è‰²xè½´ä¸Šã€ç»¿è‰²yè½´ä¸Šã€ä»¥åŸç‚¹ä¸ºä¸­å¿ƒçš„è“è‰²4ä¹˜4æ¡†å†…ï¼Œè¿˜æ˜¯åœ¨æ¡†å¤–ã€‚ ä¸Cä¸åŒï¼ŒSwiftå…è®¸å¤šä¸ªswitchè€ƒè™‘ç›¸åŒçš„å€¼ã€‚äº‹å®ä¸Šï¼Œç‚¹ï¼ˆ0ï¼Œ0ï¼‰å¯ä»¥åŒ¹é…æœ¬ç¤ºä¾‹ä¸­çš„æ‰€æœ‰å››ä¸ªæƒ…å†µã€‚ä½†æ˜¯ï¼Œå¦‚æœå¯ä»¥è¿›è¡Œå¤šæ¬¡åŒ¹é…ï¼Œåˆ™å§‹ç»ˆä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…æ¡ˆä¾‹ã€‚ç‚¹ï¼ˆ0ï¼Œ0ï¼‰å°†é¦–å…ˆåŒ¹é…case(0,0)å› æ­¤æ‰€æœ‰å…¶ä»–åŒ¹é…æƒ…å†µå°†è¢«å¿½ç•¥ã€‚ ä»·å€¼ç»‘å®šswitchå¤§å°å†™å¯ä»¥å‘½åå…¶åŒ¹é…çš„å€¼æˆ–å€¼ï¼Œä»¥ç”¨äºä¸´æ—¶å¸¸é‡æˆ–å˜é‡ï¼Œä»¥ä¾¿åœ¨æ­£æ–‡ä¸­ä½¿ç”¨ã€‚è¿™ç§è¡Œä¸ºè¢«ç§°ä¸ºå€¼ç»‘å®šï¼Œå› ä¸ºå€¼ç»‘å®šåˆ°æ¡ˆä¾‹æ­£æ–‡ä¸­çš„ä¸´æ—¶å¸¸é‡æˆ–å˜é‡ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å–äº†ä¸€ä¸ªï¼ˆxï¼Œyï¼‰ç‚¹ï¼Œè¡¨ç¤ºä¸ºç±»å‹(Int,Int)çš„å…ƒç»„ï¼Œå¹¶å°†å…¶åˆ†ç±»å¦‚ä¸‹å›¾ï¼š 12345678910let anotherPoint = (2, 0)switch anotherPoint &#123;case (let x, 0): print(&quot;on the x-axis with an x value of \\(x)&quot;)case (0, let y): print(&quot;on the y-axis with a y value of \\(y)&quot;)case let (x, y): print(&quot;somewhere else at (\\(x), \\(y))&quot;)&#125;// Prints &quot;on the x-axis with an x value of 2&quot; switchè¯­å¥å†³å®šäº†è¯¥ç‚¹æ˜¯åœ¨çº¢è‰²xè½´ä¸Šï¼Œè¿˜æ˜¯åœ¨ç»¿è‰²yè½´ä¸Šï¼Œè¿˜æ˜¯åœ¨å…¶ä»–åœ°æ–¹ï¼ˆåœ¨ä¸¤ä¸ªè½´ä¸Šï¼‰ã€‚ è¿™ä¸‰ç§â€™ switch â€˜æƒ…å†µå£°æ˜äº†å ä½ç¬¦å¸¸é‡â€™ x â€˜å’Œâ€™ y â€˜ï¼Œå®ƒä»¬ä¸´æ—¶æ¥å—â€™ anotherPoint â€˜ä¸­çš„ä¸€ä¸ªæˆ–ä¸¤ä¸ªå…ƒç»„å€¼ã€‚ç¬¬ä¸€ç§æƒ…å†µï¼Œâ€™ case (let x, 0) â€˜ï¼ŒåŒ¹é…ä»»ä½•ç‚¹çš„â€™ y â€˜å€¼ä¸ºâ€™ 0 â€˜ï¼Œå¹¶å°†è¯¥ç‚¹çš„â€™ x â€˜å€¼èµ‹ç»™ä¸´æ—¶å¸¸æ•°â€™ x â€˜ã€‚ç±»ä¼¼åœ°ï¼Œç¬¬äºŒç§æƒ…å†µï¼Œâ€™ case (0, let y) â€˜ï¼ŒåŒ¹é…ä»»ä½•ç‚¹çš„â€™ x â€˜å€¼ä¸ºâ€™ 0 â€˜ï¼Œå¹¶å°†è¯¥ç‚¹çš„â€™ y â€˜å€¼èµ‹ç»™ä¸´æ—¶å¸¸æ•°â€™ y â€˜ã€‚ å£°æ˜ä¸´æ—¶å¸¸é‡åï¼Œå®ƒä»¬å¯ä»¥åœ¨æ¡ˆä¾‹çš„ä»£ç å—ä¸­ä½¿ç”¨ã€‚åœ¨è¿™é‡Œï¼Œå®ƒä»¬ç”¨äºæ‰“å°ç‚¹çš„åˆ†ç±»ã€‚ æ­¤switchè¯­å¥æ²¡æœ‰defaultæ¡ˆä¾‹ã€‚æœ€åä¸€ä¸ªæ¡ˆä¾‹ï¼Œcaselet(x,y)å£°æ˜ä¸€ä¸ªç”±ä¸¤ä¸ªå ä½ç¬¦å¸¸é‡ç»„æˆï¼Œå¯ä»¥åŒ¹é…ä»»ä½•å€¼ã€‚ç”±äºanotherPointå§‹ç»ˆæ˜¯ä¸¤ä¸ªå€¼çš„å…ƒç»„ï¼Œå› æ­¤æ­¤æƒ…å†µä¸æ‰€æœ‰å¯èƒ½çš„å‰©ä½™å€¼åŒ¹é…ï¼Œå¹¶ä¸”ä¸éœ€è¦defaultå¤§å°å†™å³å¯ä½¿switchè¯­å¥è¯¦å°½æ— é—ã€‚ whereswitchç›’å¯ä»¥ä½¿ç”¨whereå­å¥æ¥æ£€æŸ¥å…¶ä»–æ¡ä»¶ã€‚ ä»¥ä¸‹ç¤ºä¾‹å¯¹ä»¥ä¸‹å›¾è¡¨ä¸Šçš„ï¼ˆxï¼Œyï¼‰ç‚¹è¿›è¡Œäº†åˆ†ç±»ï¼š 12345678910let yetAnotherPoint = (1, -1)switch yetAnotherPoint &#123;case let (x, y) where x == y: print(&quot;(\\(x), \\(y)) is on the line x == y&quot;)case let (x, y) where x == -y: print(&quot;(\\(x), \\(y)) is on the line x == -y&quot;)case let (x, y): print(&quot;(\\(x), \\(y)) is just some arbitrary point&quot;)&#125;// Prints &quot;(1, -1) is on the line x == -y&quot; â€˜ switch â€˜è¯­å¥ç¡®å®šè¿™ä¸ªç‚¹æ˜¯åœ¨ç»¿è‰²å¯¹è§’çº¿ä¸Šçš„â€™ x &#x3D;&#x3D; y â€˜ï¼Œè¿˜æ˜¯åœ¨ç´«è‰²å¯¹è§’çº¿ä¸Šçš„â€™ x &#x3D;&#x3D; -y â€˜ï¼Œæˆ–è€…ä¸¤è€…éƒ½ä¸åœ¨ã€‚ ä¸‰ä¸ªswitchæƒ…å†µå£°æ˜å ä½ç¬¦å¸¸é‡xå’Œyï¼Œè¿™äº›å¸¸é‡æš‚æ—¶æ¥å— yetAnotherPointçš„ä¸¤ä¸ªå…ƒç»„å€¼ã€‚è¿™äº›å¸¸é‡è¢«ç”¨ä½œwhereå­å¥çš„ä¸€éƒ¨åˆ†ï¼Œä»¥åˆ›å»ºåŠ¨æ€è¿‡æ»¤å™¨ã€‚whereå­å¥çš„æ¡ä»¶è®¡ç®—ä¸ºtrueæ—¶ï¼Œswitchå¤§å°å†™æ‰åŒ¹é…pointçš„å½“å‰å€¼ã€‚ ä¸ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸€æ ·ï¼Œæœ€ç»ˆå¤§å°å†™åŒ¹é…æ‰€æœ‰å¯èƒ½çš„å‰©ä½™å€¼ï¼Œå› æ­¤ä¸éœ€è¦defaultå¤§å°å†™æ¥ä½¿switchè¯­å¥è¯¦å°½æ— é—ã€‚ å¤åˆç—…ä¾‹å…±äº«åŒä¸€ä¸»ä½“çš„å¤šä¸ªå¼€å…³æ¡ˆä¾‹å¯ä»¥é€šè¿‡åœ¨caseåå†™å¤šä¸ªæ¨¡å¼ç»„åˆï¼Œæ¯ä¸ªæ¨¡å¼ä¹‹é—´éƒ½æœ‰ä¸€ä¸ªé€—å·ã€‚å¦‚æœä»»ä½•æ¨¡å¼åŒ¹é…ï¼Œåˆ™è®¤ä¸ºæƒ…å†µåŒ¹é…ã€‚å¦‚æœåˆ—è¡¨å¾ˆé•¿ï¼Œå›¾æ¡ˆå¯ä»¥å†™åœ¨å¤šè¡Œä¸Šã€‚ä¾‹å¦‚ï¼š 1234567891011let someCharacter: Character = &quot;e&quot;switch someCharacter &#123;case &quot;a&quot;, &quot;e&quot;, &quot;i&quot;, &quot;o&quot;, &quot;u&quot;: print(&quot;\\(someCharacter) is a vowel&quot;)case &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;: print(&quot;\\(someCharacter) is a consonant&quot;)default: print(&quot;\\(someCharacter) isn&#x27;t a vowel or a consonant&quot;)&#125;// Prints &quot;e is a vowel&quot; switchè¯­å¥çš„ç¬¬ä¸€ä¸ªå¤§å°å†™ä¸è‹±è¯­ä¸­çš„æ‰€æœ‰äº”ä¸ªå°å†™å…ƒéŸ³ç›¸åŒ¹é…ã€‚åŒæ ·ï¼Œå®ƒçš„ç¬¬äºŒä¸ªå¤§å°å†™åŒ¹é…æ‰€æœ‰å°å†™è‹±è¯­è¾…éŸ³ã€‚æœ€åï¼Œdefaultå¤§å°å†™ä¸ä»»ä½•å…¶ä»–å­—ç¬¦åŒ¹é…ã€‚ å¤åˆæƒ…å†µä¹Ÿå¯ä»¥åŒ…æ‹¬å€¼ç»‘å®šã€‚å¤åˆæƒ…å†µçš„æ‰€æœ‰æ¨¡å¼éƒ½å¿…é¡»åŒ…å«ç›¸åŒçš„å€¼ç»‘å®šé›†ï¼Œå¹¶ä¸”æ¯ä¸ªç»‘å®šå¿…é¡»ä»å¤åˆæƒ…å†µä¸‹çš„æ‰€æœ‰æ¨¡å¼ä¸­è·å¾—ç›¸åŒç±»å‹çš„å€¼ã€‚è¿™ç¡®ä¿äº†æ— è®ºå¤åˆæƒ…å†µçš„å“ªä¸ªéƒ¨åˆ†åŒ¹é…ï¼Œå¤§å°å†™æ­£æ–‡ä¸­çš„ä»£ç éƒ½å¯ä»¥å§‹ç»ˆè®¿é—®ç»‘å®šçš„å€¼ï¼Œå¹¶ä¸”è¯¥å€¼å§‹ç»ˆå…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚ 12345678let stillAnotherPoint = (9, 0)switch stillAnotherPoint &#123;case (let distance, 0), (0, let distance): print(&quot;On an axis, \\(distance) from the origin&quot;)default: print(&quot;Not on an axis&quot;)&#125;// Prints &quot;On an axis, 9 from the origin&quot; ä¸Šè¿°caseæœ‰ä¸¤ç§æ¨¡å¼ï¼š(letdistance,0)åŒ¹é…xè½´ä¸Šçš„ç‚¹ï¼Œ(0,letdistance)åŒ¹é…yè½´ä¸Šçš„ç‚¹ã€‚è¿™ä¸¤ç§æ¨¡å¼éƒ½åŒ…æ‹¬distanceçš„ç»‘å®šï¼Œdistanceæ˜¯ä¸¤ç§æ¨¡å¼ä¸­çš„æ•´æ•°â€”â€”è¿™æ„å‘³ç€caseæ­£æ–‡ä¸­çš„ä»£ç å§‹ç»ˆå¯ä»¥è®¿é—®distanceå€¼ã€‚ æ§åˆ¶è½¬ç§»å£°æ˜æ§åˆ¶è½¬ç§»è¯­å¥é€šè¿‡å°†æ§åˆ¶æƒä»ä¸€æ®µä»£ç ä¼ è¾“åˆ°å¦ä¸€æ®µä»£ç æ¥æ›´æ”¹ä»£ç çš„æ‰§è¡Œé¡ºåºã€‚Swiftæœ‰äº”ä¸ªæ§åˆ¶è½¬ç§»è¯­å¥ï¼š continue break fallthrough return throw continueã€breakå’Œfallthroughçš„é™ˆè¿°å¦‚ä¸‹æ‰€è¿°ã€‚returnè¯­å¥åœ¨å‡½æ•°ä¸­æè¿°ï¼Œthrowè¯­å¥åœ¨ä½¿ç”¨æŠ›å‡ºå‡½æ•°ä¼ æ’­é”™è¯¯ä¸­æè¿°ã€‚ continuecontinueè¯­å¥å‘Šè¯‰å¾ªç¯åœæ­¢å®ƒæ­£åœ¨åšçš„äº‹æƒ…ï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ªè¿­ä»£å¼€å§‹æ—¶é€šè¿‡å¾ªç¯é‡æ–°å¼€å§‹ã€‚å®ƒè¯´â€œæˆ‘å®Œæˆäº†å½“å‰çš„å¾ªç¯è¿­ä»£â€ï¼Œè€Œæ²¡æœ‰å®Œå…¨ç¦»å¼€å¾ªç¯ã€‚ ä»¥ä¸‹ç¤ºä¾‹ä»å°å†™å­—ç¬¦ä¸²ä¸­åˆ é™¤æ‰€æœ‰å…ƒéŸ³å’Œç©ºæ ¼ï¼Œä»¥åˆ›å»ºç¥ç§˜çš„ç›Šæ™ºçŸ­è¯­ï¼š 1234567891011let puzzleInput = &quot;great minds think alike&quot;var puzzleOutput = &quot;&quot;let charactersToRemove: [Character] = [&quot;a&quot;, &quot;e&quot;, &quot;i&quot;, &quot;o&quot;, &quot;u&quot;, &quot; &quot;]for character in puzzleInput &#123; if charactersToRemove.contains(character) &#123; continue &#125; puzzleOutput.append(character)&#125;print(puzzleOutput)// Prints &quot;grtmndsthnklk&quot; ä¸Šé¢çš„ä»£ç æ¯å½“å®ƒåŒ¹é…å…ƒéŸ³æˆ–ç©ºæ ¼æ—¶éƒ½ä¼šè°ƒç”¨continueå…³é”®å­—ï¼Œå¯¼è‡´å¾ªç¯çš„å½“å‰è¿­ä»£ç«‹å³ç»“æŸï¼Œå¹¶ç›´æ¥è·³è½¬åˆ°ä¸‹ä¸€ä¸ªè¿­ä»£çš„å¼€å§‹ã€‚ breakbreakè¯­å¥ç«‹å³ç»“æŸæ•´ä¸ªæ§åˆ¶æµè¯­å¥çš„æ‰§è¡Œã€‚å½“æ‚¨æƒ³æå‰ç»ˆæ­¢switchæˆ–å¾ªç¯è¯­å¥çš„æ‰§è¡Œæ—¶ï¼Œå¯ä»¥åœ¨switchæˆ–å¾ªç¯è¯­å¥ä¸­ä½¿ç”¨ã€‚ æ‰“ç ´å¾ªç¯è¯­å¥å½“åœ¨å¾ªç¯è¯­å¥ä¸­ä½¿ç”¨æ—¶ï¼Œbreakä¼šç«‹å³ç»“æŸå¾ªç¯çš„æ‰§è¡Œï¼Œå¹¶åœ¨å¾ªç¯çš„å…³é—­å¤§æ‹¬å·ï¼ˆ&#125;ï¼‰åå°†æ§åˆ¶æƒä¼ è¾“åˆ°ä»£ç ã€‚æ²¡æœ‰æ‰§è¡Œå¾ªç¯å½“å‰è¿­ä»£çš„è¿›ä¸€æ­¥ä»£ç ï¼Œä¹Ÿæ²¡æœ‰å¼€å§‹å¾ªç¯çš„è¿›ä¸€æ­¥è¿­ä»£ã€‚ åˆ‡æ¢è¯­å¥ä¸­çš„ä¸­æ–­å½“åœ¨switchè¯­å¥ä¸­ä½¿ç”¨æ—¶ï¼Œbreakä¼šå¯¼è‡´switchè¯­å¥ç«‹å³ç»“æŸæ‰§è¡Œï¼Œå¹¶åœ¨switchè¯­å¥çš„å…³é—­å¤§æ‹¬å·ï¼ˆ&#125;ï¼‰åå°†æ§åˆ¶æƒè½¬ç§»åˆ°ä»£ç ä¸­ã€‚ æ­¤è¡Œä¸ºå¯ç”¨äºåŒ¹é…å’Œå¿½ç•¥switchè¯­å¥ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ¡ˆä¾‹ã€‚ç”±äº Swift çš„switchè¯­å¥éå¸¸è¯¦å°½ï¼Œä¸å…è®¸ç©ºæ¡ˆä¾‹ï¼Œå› æ­¤æœ‰æ—¶éœ€è¦æ•…æ„åŒ¹é…å’Œå¿½ç•¥æ¡ˆä¾‹ï¼Œä»¥ä¾¿æ˜ç¡®æ‚¨çš„æ„å›¾ã€‚æ‚¨é€šè¿‡å°†breakå£°æ˜å†™æˆæ‚¨è¦å¿½ç•¥çš„æ•´ä¸ªæ¡ˆä¾‹æ­£æ–‡æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å½“è¯¥æ¡ˆä¾‹ä¸switchè¯­å¥åŒ¹é…æ—¶ï¼Œæ¡ˆä¾‹ä¸­çš„breakè¯­å¥å°†ç«‹å³ç»“æŸswitchè¯­å¥çš„æ‰§è¡Œã€‚ æ³¨æ„ ä»…åŒ…å«æ³¨é‡Šçš„switchæ¡ˆä¾‹è¢«æŠ¥å‘Šä¸ºç¼–è¯‘æ—¶é”™è¯¯ã€‚è¯„è®ºä¸æ˜¯é™ˆè¿°ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´switchæ¡ˆä¾‹è¢«å¿½ç•¥ã€‚åŠ¡å¿…ä½¿ç”¨breakè¯­å¥æ¥å¿½ç•¥switchæ¡ˆä¾‹ã€‚ ä»¥ä¸‹ç¤ºä¾‹åˆ‡æ¢Characterå€¼ï¼Œå¹¶ç¡®å®šå®ƒæ˜¯å¦ä»£è¡¨å››ç§è¯­è¨€ä¹‹ä¸€çš„æ•°å­—ç¬¦å·ã€‚ä¸ºäº†ç®€æ´èµ·ï¼Œå•ä¸ªswitchæ¡ˆä¾‹ä¸­åŒ…å«å¤šä¸ªå€¼ã€‚ 1234567891011121314151617181920let numberSymbol: Character = &quot;ä¸‰&quot; // Chinese symbol for the number 3var possibleIntegerValue: Int?switch numberSymbol &#123;case &quot;1&quot;, &quot;Ù¡&quot;, &quot;ä¸€&quot;, &quot;à¹‘&quot;: possibleIntegerValue = 1case &quot;2&quot;, &quot;Ù¢&quot;, &quot;äºŒ&quot;, &quot;à¹’&quot;: possibleIntegerValue = 2case &quot;3&quot;, &quot;Ù£&quot;, &quot;ä¸‰&quot;, &quot;à¹“&quot;: possibleIntegerValue = 3case &quot;4&quot;, &quot;Ù¤&quot;, &quot;å››&quot;, &quot;à¹”&quot;: possibleIntegerValue = 4default: break&#125;if let integerValue = possibleIntegerValue &#123; print(&quot;The integer value of \\(numberSymbol) is \\(integerValue).&quot;)&#125; else &#123; print(&quot;An integer value couldn&#x27;t be found for \\(numberSymbol).&quot;)&#125;// Prints &quot;The integer value of ä¸‰ is 3.&quot; æ­¤ç¤ºä¾‹æ£€æŸ¥numberSymbolï¼Œä»¥ç¡®å®šæ•°å­—1åˆ°4çš„ç¬¦å·æ˜¯æ‹‰ä¸æ–‡ã€é˜¿æ‹‰ä¼¯æ–‡ã€ä¸­æ–‡è¿˜æ˜¯æ³°è¯­ç¬¦å·ã€‚å¦‚æœæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œswitchè¯­å¥çš„ä¸€ä¸ªæ¡ˆä¾‹ä¼šè®¾ç½®ä¸€ä¸ªå¯é€‰çš„Int?å˜é‡ç§°ä¸ºpossibleIntegerValueåˆ°é€‚å½“çš„æ•´æ•°å€¼ã€‚ åœ¨switchè¯­å¥å®Œæˆæ‰§è¡Œåï¼Œè¯¥ç¤ºä¾‹ä½¿ç”¨å¯é€‰ç»‘å®šæ¥ç¡®å®šæ˜¯å¦æ‰¾åˆ°äº†å€¼ã€‚ç”±äºæ˜¯å¯é€‰ç±»å‹ï¼ŒpossibleIntegerValueå˜é‡çš„éšå¼åˆå§‹å€¼ä¸ºnilï¼Œå› æ­¤åªæœ‰å½“possibleIntegerValueè¢«switchè¯­å¥çš„å‰å››ç§æƒ…å†µä¹‹ä¸€è®¾ç½®ä¸ºå®é™…å€¼æ—¶ï¼Œå¯é€‰ç»‘å®šæ‰ä¼šæˆåŠŸã€‚ å› ä¸ºåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­åˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„â€™ Character â€˜å€¼æ˜¯ä¸å®é™…çš„ï¼Œæ‰€ä»¥â€™ default â€˜ caseå¤„ç†ä»»ä½•ä¸åŒ¹é…çš„å­—ç¬¦ã€‚è¿™ç§â€™ default â€˜æƒ…å†µä¸éœ€è¦æ‰§è¡Œä»»ä½•æ“ä½œï¼Œæ‰€ä»¥å®ƒæ˜¯ç”¨ä¸€ä¸ªâ€™ break â€˜è¯­å¥ä½œä¸ºå®ƒçš„ä¸»ä½“ç¼–å†™çš„ã€‚åªè¦åŒ¹é…åˆ°â€™ default â€˜çš„å¤§å°å†™ï¼Œâ€™ break â€˜è¯­å¥å°±ä¼šç»“æŸâ€™ switch â€˜è¯­å¥çš„æ‰§è¡Œï¼Œä»£ç çš„æ‰§è¡Œä»â€™ if let â€˜è¯­å¥å¼€å§‹ã€‚ fallthroughåœ¨ Swift ä¸­ï¼Œswitchè¯­å¥ä¸ä¼šä»æ¯ä¸ªæ¡ˆä¾‹çš„åº•éƒ¨æ‰åˆ°ä¸‹ä¸€ä¸ªæ¡ˆä¾‹ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•´ä¸ªswitchè¯­å¥åœ¨ç¬¬ä¸€ä¸ªåŒ¹é…æ¡ˆä¾‹å®Œæˆåç«‹å³å®Œæˆæ‰§è¡Œã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒCè¦æ±‚æ‚¨åœ¨æ¯ä¸ªswitchç›’çš„æœ«å°¾æ’å…¥ä¸€ä¸ªæ˜¾å¼breakè¯­å¥ï¼Œä»¥é˜²æ­¢æ‰çº¿ã€‚é¿å…é»˜è®¤çš„æ•…éšœæ„å‘³ç€Swiftswitchè¯­å¥æ¯”Cä¸­çš„å¯¹åº”è¯­å¥æ›´ç®€æ´ã€æ›´å¯é¢„æµ‹ï¼Œå› æ­¤å®ƒä»¬é¿å…é”™è¯¯åœ°æ‰§è¡Œå¤šä¸ªswitchæ¡ˆä¾‹ã€‚ å¦‚æœæ‚¨éœ€è¦Cå‹è·Œå€’æ€§è¡Œä¸ºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨fallthroughå…³é”®å­—é€æ¡ˆé€‰æ‹©åŠ å…¥æ­¤è¡Œä¸ºã€‚ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨fallthroughåˆ›å»ºæ•°å­—çš„æ–‡æœ¬æè¿°ã€‚ 1234567891011let integerToDescribe = 5var description = &quot;The number \\(integerToDescribe) is&quot;switch integerToDescribe &#123;case 2, 3, 5, 7, 11, 13, 17, 19: description += &quot; a prime number, and also&quot; fallthroughdefault: description += &quot; an integer.&quot;&#125;print(description)// Prints &quot;The number 5 is a prime number, and also an integer.&quot; æ­¤ç¤ºä¾‹å£°æ˜ä¸€ä¸ªåä¸ºdescriptionçš„æ–°Stringå˜é‡ï¼Œå¹¶ä¸ºå…¶åˆ†é…åˆå§‹å€¼ã€‚ç„¶åï¼Œå‡½æ•°ä½¿ç”¨switchè¯­å¥è€ƒè™‘integerToDescribeçš„å€¼ã€‚å¦‚æœintegerToDescribeçš„å€¼æ˜¯åˆ—è¡¨ä¸­çš„ç´ æ•°ä¹‹ä¸€ï¼Œåˆ™å‡½æ•°ä¼šå°†æ–‡æœ¬é™„åŠ åˆ°descriptionçš„æœ«å°¾ï¼Œä»¥æ³¨æ„è¯¥æ•°å­—æ˜¯ç´ æ•°ã€‚ç„¶åï¼Œå®ƒä½¿ç”¨fallthroughå…³é”®å­—æ¥â€œè½å…¥â€defaultæƒ…å†µã€‚defaultæƒ…å†µä¸‹ï¼Œåœ¨æè¿°çš„æœ«å°¾æ·»åŠ äº†ä¸€äº›é¢å¤–çš„æ–‡æœ¬ï¼Œswitchè¯­å¥å·²å®Œæˆã€‚ é™¤éintegerToDescribeçš„å€¼åœ¨å·²çŸ¥ç´ æ•°åˆ—è¡¨ä¸­ï¼Œå¦åˆ™å®ƒæ ¹æœ¬ä¸ä¸ç¬¬ä¸€ä¸ªswitchæƒ…å†µåŒ¹é…ã€‚ç”±äºæ²¡æœ‰å…¶ä»–ç‰¹å®šæƒ…å†µï¼ŒintegerToDescribeä¸defaultæƒ…å†µåŒ¹é…ã€‚ switchè¯­å¥æ‰§è¡Œå®Œæˆåï¼Œä½¿ç”¨print(_:separator:terminator:)å‡½æ•°æ‰“å°æ•°å­—æè¿°ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæ•°å­—5è¢«æ­£ç¡®æ ‡è¯†ä¸ºç´ æ•°ã€‚ æ³¨æ„ fallthroughå…³é”®å­—ä¸ä¼šæ£€æŸ¥å®ƒå¯¼è‡´æ‰§è¡Œé™·å…¥çš„switchæ¡ˆä¾‹çš„å¤§å°å†™æ¡ä»¶ã€‚fallthroughå…³é”®å­—åªæ˜¯å¯¼è‡´ä»£ç æ‰§è¡Œç›´æ¥ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæ¡ˆä¾‹ï¼ˆæˆ–defaultå¤§å°å†™ï¼‰å—ä¸­çš„è¯­å¥ï¼Œå°±åƒCçš„æ ‡å‡†switchè¯­å¥è¡Œä¸ºä¸€æ ·ã€‚ å¸¦æ ‡ç­¾çš„è¯­å¥åœ¨Swiftä¸­ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä»–å¾ªç¯å’Œæ¡ä»¶è¯­å¥ä¸­åµŒå¥—å¾ªç¯å’Œæ¡ä»¶è¯­å¥ï¼Œä»¥åˆ›å»ºå¤æ‚çš„æ§åˆ¶æµç»“æ„ã€‚ç„¶è€Œï¼Œå¾ªç¯è¯­å¥å’Œæ¡ä»¶è¯­å¥éƒ½å¯ä»¥ä½¿ç”¨breakè¯­å¥è¿‡æ—©åœ°ç»“æŸå…¶æ‰§è¡Œã€‚å› æ­¤ï¼Œæœ‰æ—¶æ˜ç¡®æ‚¨å¸Œæœ›breakè¯­å¥ç»ˆæ­¢å“ªä¸ªå¾ªç¯æˆ–æ¡ä»¶è¯­å¥æ˜¯æœ‰ç”¨çš„ã€‚åŒæ ·ï¼Œå¦‚æœæ‚¨æœ‰å¤šä¸ªåµŒå¥—å¾ªç¯ï¼Œæ˜ç¡®continueè¯­å¥åº”è¯¥å½±å“å“ªä¸ªå¾ªç¯å¯èƒ½ä¼šæœ‰ç”¨ã€‚ ä¸ºäº†å®ç°è¿™äº›ç›®æ ‡ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å£°æ˜æ ‡ç­¾æ ‡è®°å¾ªç¯è¯­å¥æˆ–æ¡ä»¶è¯­å¥ã€‚ä½¿ç”¨æ¡ä»¶è¯­å¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¸¦æœ‰breakè¯­å¥çš„è¯­å¥æ ‡ç­¾æ¥ç»“æŸæ ‡è®°è¯­å¥çš„æ‰§è¡Œã€‚ä½¿ç”¨å¾ªç¯è¯­å¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¸¦æœ‰breakæˆ–continueè¯­å¥çš„è¯­å¥æ ‡ç­¾æ¥ç»“æŸæˆ–ç»§ç»­æ‰§è¡Œæ ‡è®°è¯­å¥ã€‚ æ ‡è®°è¯­å¥é€šè¿‡åœ¨ä¸è¯­å¥çš„ä»‹ç»å…³é”®å­—ç›¸åŒçš„è¡Œä¸Šæ”¾ç½®æ ‡ç­¾æ¥æŒ‡ç¤ºï¼Œåè·Ÿå†’å·ã€‚ä»¥ä¸‹æ˜¯whileå¾ªç¯è¯­æ³•çš„ä¸€ä¸ªç¤ºä¾‹ï¼Œå°½ç®¡æ‰€æœ‰å¾ªç¯å’Œswitchè¯­å¥çš„åŸåˆ™éƒ½æ˜¯ä¸€æ ·çš„ï¼š label name: while condition { â€‹ statements } ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨æ‚¨åœ¨æœ¬ç« å‰é¢çœ‹åˆ°çš„Snakes and Laddersæ¸¸æˆæ”¹ç¼–ç‰ˆæœ¬çš„å¸¦æœ‰æ ‡ç­¾whileå¾ªç¯çš„breakå’Œcontinueè¯­å¥ã€‚è¿™ä¸€æ¬¡ï¼Œæ¸¸æˆæœ‰ä¸€ä¸ªé¢å¤–çš„è§„åˆ™ï¼š è¦è·èƒœï¼Œä½ å¿…é¡»æ­£å¥½é™è½åœ¨25å·å¹¿åœºã€‚ å¦‚æœä¸€ä¸ªç‰¹å®šçš„éª°å­å·ä¼šå¸¦ä½ è¶…è¿‡25æ–¹å—ï¼Œä½ å¿…é¡»å†æ¬¡æ»šåŠ¨ï¼Œç›´åˆ°ä½ æ»šåŠ¨è½åœ¨25æ–¹å—æ‰€éœ€çš„ç¡®åˆ‡æ•°å­—ã€‚ æ¸¸æˆæ¿å’Œä»¥å‰ä¸€æ ·ã€‚ finalSquareã€boardã€squareå’ŒdiceRollçš„å€¼ä¸ä¹‹å‰ç›¸åŒåˆå§‹åŒ–ï¼š 123456let finalSquare = 25var board = [Int](repeating: 0, count: finalSquare + 1)board[03] = +08; board[06] = +11; board[09] = +09; board[10] = +02board[14] = -10; board[19] = -11; board[22] = -02; board[24] = -08var square = 0var diceRoll = 0 è¿™ä¸ªç‰ˆæœ¬çš„æ¸¸æˆä½¿ç”¨whileå¾ªç¯å’Œswitchè¯­å¥æ¥å®ç°æ¸¸æˆçš„é€»è¾‘ã€‚whileå¾ªç¯æœ‰ä¸€ä¸ªåä¸ºgameLoopçš„è¯­å¥æ ‡ç­¾ï¼Œè¡¨ç¤ºå®ƒæ˜¯è›‡å’Œæ¢¯å­æ¸¸æˆçš„ä¸»è¦æ¸¸æˆå¾ªç¯ã€‚ The while loopâ€™s condition is while square != finalSquare, to reflect that you must land exactly on square 25. 1234567891011121314151617gameLoop: while square != finalSquare &#123; diceRoll += 1 if diceRoll == 7 &#123; diceRoll = 1 &#125; switch square + diceRoll &#123; case finalSquare: // diceRoll will move us to the final square, so the game is over break gameLoop case let newSquare where newSquare &gt; finalSquare: // diceRoll will move us beyond the final square, so roll again continue gameLoop default: // this is a valid move, so find out its effect square += diceRoll square += board[square] &#125;&#125;print(&quot;Game over!&quot;) éª°å­åœ¨æ¯ä¸ªå¾ªç¯çš„å¼€å¤´æ»šåŠ¨ã€‚Loopä¸ç«‹å³ç§»åŠ¨æ’­æ”¾å™¨ï¼Œè€Œæ˜¯ä½¿ç”¨switchè¯­å¥æ¥è€ƒè™‘ç§»åŠ¨çš„ç»“æœï¼Œå¹¶ç¡®å®šæ˜¯å¦å…è®¸ç§»åŠ¨ï¼š å¦‚æœæ·éª°å­å°†ç©å®¶å¸¦åˆ°æœ€åä¸€ä¸ªæ–¹æ ¼ï¼Œé‚£ä¹ˆæ¸¸æˆå°±ç»“æŸäº†ã€‚â€œbreak gamelloopâ€è¯­å¥å°†æ§åˆ¶è½¬ç§»åˆ°â€œwhileâ€å¾ªç¯ä¹‹å¤–çš„ç¬¬ä¸€è¡Œä»£ç ï¼Œä»è€Œç»“æŸæ¸¸æˆã€‚ å¦‚æœæ·éª°å­å°†ç©å®¶ç§»å‡ºæœ€åçš„æ–¹æ ¼ï¼Œé‚£ä¹ˆè¿™ä¸€ç§»åŠ¨å°±æ˜¯æ— æ•ˆçš„ï¼Œç©å®¶éœ€è¦å†æ¬¡æ·éª°å­ã€‚â€œcontinue gameLoopâ€è¯­å¥ç»“æŸå½“å‰çš„â€œwhileâ€å¾ªç¯è¿­ä»£ï¼Œå¹¶å¼€å§‹ä¸‹ä¸€ä¸ªå¾ªç¯è¿­ä»£ã€‚ åœ¨æ‰€æœ‰å…¶ä»–æƒ…å†µä¸‹ï¼Œæ·éª°å­æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ä¸¾åŠ¨ã€‚ç©å®¶é€šè¿‡diceRollæ–¹å—å‘å‰ç§»åŠ¨ï¼Œæ¸¸æˆé€»è¾‘æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•è›‡å’Œæ¢¯å­ã€‚ç„¶åå¾ªç¯ç»“æŸï¼Œæ§ä»¶è¿”å›åˆ°whileæ¡ä»¶ï¼Œä»¥å†³å®šæ˜¯å¦éœ€è¦å†æ¬¡å›åˆã€‚ æ³¨æ„ å¦‚æœä¸Šé¢çš„breakè¯­å¥æ²¡æœ‰ä½¿ç”¨gameLoopæ ‡ç­¾ï¼Œå®ƒå°†ä»switchè¯­å¥ä¸­è„±é¢–è€Œå‡ºï¼Œè€Œä¸æ˜¯whileè¯­å¥ã€‚ä½¿ç”¨gameLoopæ ‡ç­¾å¯ä»¥æ˜ç¡®åº”è¯¥ç»ˆæ­¢å“ªä¸ªæ§åˆ¶è¯­å¥ã€‚ å½“è°ƒç”¨â€œcontinue gameLoopâ€æ¥è·³è½¬åˆ°å¾ªç¯çš„ä¸‹ä¸€ä¸ªè¿­ä»£æ—¶ï¼Œå¹¶ä¸ä¸€å®šè¦ä½¿ç”¨â€œgameLoopâ€æ ‡ç­¾ã€‚æ¸¸æˆä¸­åªæœ‰ä¸€ä¸ªå¾ªç¯ï¼Œå› æ­¤â€œcontinueâ€è¯­å¥å°†å½±å“å“ªä¸ªå¾ªç¯å¹¶ä¸å«ç³Šã€‚ç„¶è€Œï¼Œåœ¨â€œcontinueâ€è¯­å¥ä¸­ä½¿ç”¨â€œgameLoopâ€æ ‡ç­¾å¹¶æ²¡æœ‰ä»€ä¹ˆåå¤„ã€‚è¿™æ ·åšä¸æ ‡ç­¾çš„ä½¿ç”¨ä¸â€œä¸­æ–­â€å£°æ˜æ˜¯ä¸€è‡´çš„ï¼Œå¹¶æœ‰åŠ©äºè®©æ¸¸æˆçš„é€»è¾‘æ›´æ¸…æ™°åœ°é˜…è¯»å’Œç†è§£ã€‚ æå‰é€€å‡ºguardè¯­å¥ï¼Œå¦‚ifè¯­å¥ï¼Œæ ¹æ®è¡¨è¾¾å¼çš„å¸ƒå°”å€¼æ‰§è¡Œè¯­å¥ã€‚æ‚¨ä½¿ç”¨guardè¯­å¥è¦æ±‚æ¡ä»¶å¿…é¡»ä¸ºçœŸï¼Œæ‰èƒ½æ‰§è¡Œguardè¯­å¥ä¹‹åçš„ä»£ç ã€‚ä¸ifè¯­å¥ä¸åŒï¼Œguardè¯­å¥æ€»æ˜¯æœ‰ä¸€ä¸ªelseå­å¥â€”â€”å¦‚æœæ¡ä»¶ä¸æ­£ç¡®ï¼Œåˆ™æ‰§è¡Œelseå­å¥ä¸­çš„ä»£ç ã€‚ 123456789101112131415161718192021func greet(person: [String: String]) &#123; guard let name = person[&quot;name&quot;] else &#123; return &#125; print(&quot;Hello \\(name)!&quot;) guard let location = person[&quot;location&quot;] else &#123; print(&quot;I hope the weather is nice near you.&quot;) return &#125; print(&quot;I hope the weather is nice in \\(location).&quot;)&#125;greet(person: [&quot;name&quot;: &quot;John&quot;])// Prints &quot;Hello John!&quot;// Prints &quot;I hope the weather is nice near you.&quot;greet(person: [&quot;name&quot;: &quot;Jane&quot;, &quot;location&quot;: &quot;Cupertino&quot;])// Prints &quot;Hello Jane!&quot;// Prints &quot;I hope the weather is nice in Cupertino.&quot; å¦‚æœæ»¡è¶³guardè¯­å¥çš„æ¡ä»¶ï¼Œåˆ™åœ¨guardè¯­å¥çš„é—­å¹•å¤§æ‹¬å·åç»§ç»­æ‰§è¡Œä»£ç ã€‚ä½¿ç”¨å¯é€‰ç»‘å®šä½œä¸ºæ¡ä»¶çš„ä¸€éƒ¨åˆ†åˆ†é…å€¼çš„ä»»ä½•å˜é‡æˆ–å¸¸é‡éƒ½å¯ç”¨äºguardè¯­å¥ä¸­æ˜¾ç¤ºçš„ä»£ç å—çš„å…¶ä½™éƒ¨åˆ†ã€‚ å¦‚æœä¸ç¬¦åˆæ­¤æ¡ä»¶ï¼Œåˆ™æ‰§è¡Œelseåˆ†æ”¯å†…çš„ä»£ç ã€‚è¯¥åˆ†æ”¯å¿…é¡»ä¼ è¾“æ§ä»¶æ‰èƒ½é€€å‡ºå‡ºç°guardè¯­å¥çš„ä»£ç å—ã€‚å®ƒå¯ä»¥é€šè¿‡returnã€breakã€continueæˆ–throwç­‰æ§ä»¶ä¼ è¾“è¯­å¥æ¥æ‰§è¡Œæ­¤æ“ä½œï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ä¸è¿”å›çš„å‡½æ•°æˆ–æ–¹æ³•ï¼Œä¾‹å¦‚fatalError(_:file:line:) ä¸å¯¹ifè¯­å¥è¿›è¡Œç›¸åŒçš„æ£€æŸ¥ç›¸æ¯”ï¼Œå¯¹éœ€æ±‚ä½¿ç”¨guardè¯­å¥å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚å®ƒå…è®¸æ‚¨ç¼–å†™é€šå¸¸æ‰§è¡Œçš„ä»£ç ï¼Œè€Œæ— éœ€å°†å…¶åŒ…è£…åœ¨elseå—ä¸­ï¼Œå¹¶å…è®¸æ‚¨å°†å¤„ç†è¿åè¦æ±‚çš„ä»£ç ä¿ç•™åœ¨éœ€æ±‚æ—è¾¹ã€‚ æ£€æŸ¥APIå¯ç”¨æ€§Swiftå†…ç½®äº†å¯¹æ£€æŸ¥APIå¯ç”¨æ€§çš„æ”¯æŒï¼Œè¿™ç¡®ä¿æ‚¨ä¸ä¼šæ„å¤–ä½¿ç”¨ç»™å®šéƒ¨ç½²ç›®æ ‡ä¸Šä¸å¯ç”¨çš„APIã€‚ ç¼–è¯‘å™¨ä½¿ç”¨SDKä¸­çš„å¯ç”¨æ€§ä¿¡æ¯æ¥éªŒè¯ä»£ç ä¸­ä½¿ç”¨çš„æ‰€æœ‰APIæ˜¯å¦åœ¨é¡¹ç›®æŒ‡å®šçš„éƒ¨ç½²ç›®æ ‡ä¸Šå¯ç”¨ã€‚å¦‚æœæ‚¨å°è¯•ä½¿ç”¨ä¸å¯ç”¨çš„APIï¼ŒSwiftä¼šåœ¨ç¼–è¯‘æ—¶æŠ¥å‘Šé”™è¯¯ã€‚ æ‚¨åœ¨ifæˆ–guardè¯­å¥ä¸­ä½¿ç”¨å¯ç”¨æ€§æ¡ä»¶æ‰§è¡Œä»£ç å—ï¼Œå…·ä½“å–å†³äºæ‚¨è¦ä½¿ç”¨çš„APIåœ¨è¿è¡Œæ—¶æ˜¯å¦å¯ç”¨ã€‚ç¼–è¯‘å™¨åœ¨éªŒè¯è¯¥ä»£ç å—ä¸­çš„APIæ˜¯å¦å¯ç”¨æ—¶ï¼Œä½¿ç”¨å¯ç”¨æ€§æ¡ä»¶ä¸­çš„ä¿¡æ¯ã€‚ 12345if #available(iOS 10, macOS 10.12, *) &#123; // Use iOS 10 APIs on iOS, and use macOS 10.12 APIs on macOS&#125; else &#123; // Fall back to earlier iOS and macOS APIs&#125; ä¸Šè¿°å¯ç”¨æ€§æ¡ä»¶æŒ‡å®šï¼Œåœ¨iOSä¸­ï¼Œifè¯­å¥çš„æ­£æ–‡ä»…åœ¨iOS 10åŠæ›´é«˜ç‰ˆæœ¬ä¸­æ‰§è¡Œï¼›åœ¨macOSä¸­ï¼Œä»…åœ¨macOS 10.12åŠæ›´é«˜ç‰ˆæœ¬ä¸­æ‰§è¡Œã€‚æœ€åä¸€ä¸ªå‚æ•°*æ˜¯å¿…éœ€çš„ï¼Œå¹¶æŒ‡å®šåœ¨ä»»ä½•å…¶ä»–å¹³å°ä¸Šï¼Œifçš„æ­£æ–‡å¯¹ç›®æ ‡æŒ‡å®šçš„æœ€å°éƒ¨ç½²ç›®æ ‡æ‰§è¡Œã€‚ åœ¨å…¶ä¸€èˆ¬å½¢å¼ä¸­ï¼Œå¯ç”¨æ€§æ¡ä»¶æ¥å—å¹³å°åç§°å’Œç‰ˆæœ¬åˆ—è¡¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å¹³å°åç§°ï¼Œå¦‚â€™ iOS â€˜ï¼Œ â€˜ macOS â€˜ï¼Œ â€˜ watchOS â€˜å’Œâ€™ tvOS â€˜ -å®Œæ•´çš„åˆ—è¡¨ï¼Œè¯·å‚é˜…å£°æ˜å±æ€§ã€‚é™¤äº†æŒ‡å®šä¸»è¦ç‰ˆæœ¬å·(å¦‚iOS 8æˆ–macOS 10.10)å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®šæ¬¡è¦ç‰ˆæœ¬å·(å¦‚iOS 11.2.6å’ŒmacOS 10.13.3)ã€‚ 12345if #available(platform name version, ..., *) &#123; statements to execute if the APIs are available&#125; else &#123; fallback statements to execute if the APIs are unavailable&#125;","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ æ–¹æ³•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-æ–¹æ³•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.294Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-æ–¹æ³•/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E6%96%B9%E6%B3%95/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Methods.html æ–¹æ³•æ˜¯ä¸ç‰¹å®šç±»å‹å…³è”çš„å‡½æ•°ã€‚ç±»ã€ç»“æ„å’Œæšä¸¾éƒ½å¯ä»¥å®šä¹‰å®ä¾‹æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å°è£…äº†å¤„ç†ç»™å®šç±»å‹å®ä¾‹çš„ç‰¹å®šä»»åŠ¡å’ŒåŠŸèƒ½ã€‚ç±»ã€ç»“æ„å’Œæšä¸¾è¿˜å¯ä»¥å®šä¹‰ç±»å‹æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¸ç±»å‹æœ¬èº«ç›¸å…³è”ã€‚ç±»å‹æ–¹æ³•ç±»ä¼¼äºObjective-Cä¸­çš„ç±»æ–¹æ³•ã€‚ ç»“æ„å’Œæšä¸¾å¯ä»¥åœ¨Swiftä¸­å®šä¹‰æ–¹æ³•ï¼Œè¿™ä¸€äº‹å®ä¸Cå’ŒObjective-Cæœ‰å¾ˆå¤§åŒºåˆ«ã€‚åœ¨Objective-Cä¸­ï¼Œç±»æ˜¯å”¯ä¸€å¯ä»¥å®šä¹‰æ–¹æ³•çš„ç±»å‹ã€‚åœ¨ Swift ä¸­ï¼Œæ‚¨å¯ä»¥é€‰æ‹©æ˜¯å®šä¹‰ç±»ã€ç»“æ„è¿˜æ˜¯æšä¸¾ï¼Œå¹¶ä¸”ä»ç„¶å¯ä»¥çµæ´»åœ°å®šä¹‰æ‚¨åˆ›å»ºçš„ç±»å‹ä¸Šçš„æ–¹æ³•ã€‚ å®ä¾‹æ–¹æ³•å®ä¾‹æ–¹æ³•æ˜¯å±äºç‰¹å®šç±»ã€ç»“æ„æˆ–æšä¸¾å®ä¾‹çš„å‡½æ•°ã€‚å®ƒä»¬æ”¯æŒè¿™äº›å®ä¾‹çš„åŠŸèƒ½ï¼Œè¦ä¹ˆé€šè¿‡æä¾›è®¿é—®å’Œä¿®æ”¹å®ä¾‹å±æ€§çš„æ–¹æ³•ï¼Œè¦ä¹ˆé€šè¿‡æä¾›ä¸å®ä¾‹ç›®çš„ç›¸å…³çš„åŠŸèƒ½ã€‚å®ä¾‹æ–¹æ³•å…·æœ‰ä¸å‡½æ•°å®Œå…¨ç›¸åŒçš„è¯­æ³•ï¼Œå¦‚å‡½æ•°ä¸­æ‰€è¿°ã€‚ æ‚¨å¯ä»¥åœ¨å®ƒæ‰€å±ç±»å‹çš„æ‰“å¼€å’Œå…³é—­å¤§æ‹¬å·ä¸­ç¼–å†™å®ä¾‹æ–¹æ³•ã€‚å®ä¾‹æ–¹æ³•å¯ä»¥éšå¼è®¿é—®è¯¥ç±»å‹çš„æ‰€æœ‰å…¶ä»–å®ä¾‹æ–¹æ³•å’Œå±æ€§ã€‚å®ä¾‹æ–¹æ³•åªèƒ½è°ƒç”¨å…¶æ‰€å±ç±»å‹çš„ç‰¹å®šå®ä¾‹ã€‚æ²¡æœ‰ç°æœ‰å®ä¾‹ï¼Œå°±æ— æ³•å­¤ç«‹åœ°è°ƒç”¨å®ƒã€‚ ä»¥ä¸‹æ˜¯å®šä¹‰ç®€å•Counterç±»çš„ç¤ºä¾‹ï¼Œå¯ç”¨äºè®¡ç®—æ“ä½œå‘ç”Ÿçš„æ¬¡æ•°ï¼š class Counter { â€‹ var count &#x3D; 0 â€‹ func increment() { â€‹ count +&#x3D; 1 â€‹ } â€‹ func increment(by amount: Int) { â€‹ count +&#x3D; amount â€‹ } â€‹ func reset() { â€‹ count &#x3D; 0 â€‹ } } Counterç±»å®šä¹‰äº†ä¸‰ç§å®ä¾‹æ–¹æ³•ï¼š increment()å°†è®¡æ•°å™¨å¢åŠ 1ã€‚ increment(by: Int)è®¡æ•°å™¨ä»¥æŒ‡å®šçš„æ•´æ•°é‡å¢åŠ ã€‚ reset()é‡ç½®è®¡æ•°å™¨ä¸ºé›¶ã€‚ Counterç±»è¿˜å£°æ˜ä¸€ä¸ªå˜é‡å±æ€§countï¼Œä»¥è·Ÿè¸ªå½“å‰è®¡æ•°å™¨å€¼ã€‚ æ‚¨è°ƒç”¨ä¸å±æ€§å…·æœ‰ç›¸åŒç‚¹è¯­æ³•çš„å®ä¾‹æ–¹æ³•ï¼š let counter &#x3D; Counter() &#x2F;&#x2F; the initial counter value is 0 counter.increment() &#x2F;&#x2F; the counterâ€™s value is now 1 counter.increment(by: 5) &#x2F;&#x2F; the counterâ€™s value is now 6 counter.reset() &#x2F;&#x2F; the counterâ€™s value is now 0 å‡½æ•°å‚æ•°å¯ä»¥å…·æœ‰åç§°ï¼ˆç”¨äºå‡½æ•°æ­£æ–‡ï¼‰å’Œå‚æ•°æ ‡ç­¾ï¼ˆç”¨äºè°ƒç”¨å‡½æ•°æ—¶ï¼‰ï¼Œå¦‚å‡½æ•°å‚æ•°æ ‡ç­¾å’Œå‚æ•°åç§°æ‰€è¿°ã€‚æ–¹æ³•å‚æ•°ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› ä¸ºæ–¹æ³•åªæ˜¯ä¸ç±»å‹å…³è”çš„å‡½æ•°ã€‚ è‡ªæˆ‘è´¢äº§ç±»å‹çš„æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ªåä¸ºselfçš„éšå¼å±æ€§ï¼Œè¿™ä¸å®ä¾‹æœ¬èº«å®Œå…¨ç­‰ä»·ã€‚æ‚¨ä½¿ç”¨selfå±æ€§åœ¨è‡ªå·±çš„å®ä¾‹æ–¹æ³•ä¸­å¼•ç”¨å½“å‰å®ä¾‹ã€‚ ä¸Šé¢ç¤ºä¾‹ä¸­çš„increment()æ–¹æ³•å¯ä»¥è¿™æ ·å†™ï¼š func increment() { â€‹ self.count +&#x3D; 1 } åœ¨å®è·µä¸­ï¼Œæ‚¨ä¸éœ€è¦ç»å¸¸åœ¨ä»£ç ä¸­ç¼–å†™selfã€‚å¦‚æœæ‚¨æ²¡æœ‰æ˜¾å¼å†™å…¥selfï¼Œæ¯å½“æ‚¨åœ¨æ–¹æ³•ä¸­ä½¿ç”¨å·²çŸ¥çš„å±æ€§æˆ–æ–¹æ³•åç§°æ—¶ï¼ŒSwiftéƒ½ä¼šå‡è®¾æ‚¨æŒ‡çš„æ˜¯å½“å‰å®ä¾‹çš„å±æ€§æˆ–æ–¹æ³•ã€‚Counterçš„ä¸‰ä¸ªå®ä¾‹æ–¹æ³•ä¸­ä½¿ç”¨countï¼ˆè€Œä¸æ˜¯self.countï¼‰è¯æ˜äº†è¿™ä¸€å‡è®¾ã€‚ å½“å®ä¾‹æ–¹æ³•çš„å‚æ•°åç§°ä¸è¯¥å®ä¾‹çš„å±æ€§å…·æœ‰ç›¸åŒçš„åç§°æ—¶ï¼Œå°±ä¼šå‡ºç°æ­¤è§„åˆ™çš„ä¸»è¦å¼‚å¸¸ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‚æ•°åç§°ä¼˜å…ˆï¼Œæœ‰å¿…è¦ä»¥æ›´é™å®šçš„æ–¹å¼å¼•ç”¨è¯¥å±æ€§ã€‚æ‚¨ä½¿ç”¨selfå±æ€§æ¥åŒºåˆ†å‚æ•°åç§°å’Œå±æ€§åç§°ã€‚ åœ¨è¿™é‡Œï¼Œselfæ¶ˆé™¤åä¸ºxçš„æ–¹æ³•å‚æ•°å’Œä¹Ÿç§°ä¸ºxçš„å®ä¾‹å±æ€§ä¹‹é—´çš„æ­§ä¹‰ï¼š struct Point { â€‹ var x &#x3D; 0.0, y &#x3D; 0.0 â€‹ func isToTheRightOf(x: Double) -&gt; Bool { â€‹ return self.x &gt; x â€‹ } } let somePoint &#x3D; Point(x: 4.0, y: 5.0) if somePoint.isToTheRightOf(x: 1.0) { â€‹ print(â€œThis point is to the right of the line where x &#x3D;&#x3D; 1.0â€) } &#x2F;&#x2F; Prints â€œThis point is to the right of the line where x &#x3D;&#x3D; 1.0â€ æ²¡æœ‰selfå‰ç¼€ï¼ŒSwiftå°†å‡è®¾xçš„ä¸¤ä¸ªç”¨æ³•éƒ½æåˆ°äº†ç§°ä¸ºxçš„æ–¹æ³•å‚æ•°ã€‚ ä»å®ä¾‹å†…æ–¹æ³•ä¿®æ”¹å€¼ç±»å‹ç»“æ„å’Œæšä¸¾æ˜¯å€¼ç±»å‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå€¼ç±»å‹çš„å±æ€§æ— æ³•ä»å…¶å®ä¾‹æ–¹æ³•ä¸­ä¿®æ”¹ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨éœ€è¦åœ¨ç‰¹å®šæ–¹æ³•ä¸­ä¿®æ”¹ç»“æ„æˆ–æšä¸¾çš„å±æ€§ï¼Œæ‚¨å¯ä»¥é€‰æ‹©è¯¥æ–¹æ³•çš„çªå˜è¡Œä¸ºã€‚ç„¶åï¼Œè¯¥æ–¹æ³•å¯ä»¥ä»æ–¹æ³•å†…éƒ¨çªå˜ï¼ˆå³æ›´æ”¹ï¼‰å…¶å±æ€§ï¼Œå¹¶åœ¨æ–¹æ³•ç»“æŸæ—¶å°†å…¶æ‰€åšçš„ä»»ä½•æ›´æ”¹å†™å›åŸå§‹ç»“æ„ã€‚è¯¥æ–¹æ³•è¿˜å¯ä»¥ä¸ºå…¶éšå¼selfå±æ€§åˆ†é…ä¸€ä¸ªå…¨æ–°çš„å®ä¾‹ï¼Œå½“æ–¹æ³•ç»“æŸæ—¶ï¼Œè¯¥æ–°å®ä¾‹å°†å–ä»£ç°æœ‰å®ä¾‹ã€‚ æ‚¨å¯ä»¥é€šè¿‡å°†mutatingå…³é”®å­—æ”¾åœ¨è¯¥æ–¹æ³•çš„funcå…³é”®å­—ä¹‹å‰æ¥é€‰æ‹©åŠ å…¥æ­¤è¡Œä¸ºï¼š struct Point { â€‹ var x &#x3D; 0.0, y &#x3D; 0.0 â€‹ mutating func moveBy(x deltaX: Double, y deltaY: Double) { â€‹ x +&#x3D; deltaX â€‹ y +&#x3D; deltaY â€‹ } } var somePoint &#x3D; Point(x: 1.0, y: 1.0) somePoint.moveBy(x: 2.0, y: 3.0) print(â€œThe point is now at ((somePoint.x), (somePoint.y))â€) &#x2F;&#x2F; Prints â€œThe point is now at (3.0, 4.0)â€ The Point structure above defines a mutating moveBy(x:y:) method, which moves a Pointinstance by a certain amount. Instead of returning a new point, this method actually modifies the point on which itâ€™s called. The mutating keyword is added to its definition to enable it to modify its properties. è¯·æ³¨æ„ï¼Œæ‚¨æ— æ³•åœ¨ç»“æ„ç±»å‹çš„å¸¸é‡ä¸Šè°ƒç”¨çªå˜æ–¹æ³•ï¼Œå› ä¸ºå®ƒçš„å±æ€§æ— æ³•æ›´æ”¹ï¼Œå³ä½¿å®ƒä»¬æ˜¯å˜é‡å±æ€§ï¼Œå¦‚å¸¸é‡ç»“æ„å®ä¾‹çš„å­˜å‚¨å±æ€§ä¸­æ‰€è¿°ï¼š let fixedPoint &#x3D; Point(x: 3.0, y: 3.0) fixedPoint.moveBy(x: 2.0, y: 3.0) &#x2F;&#x2F; this will report an error åœ¨çªå˜æ–¹æ³•ä¸­åˆ†é…ç»™è‡ªæˆ‘çªå˜æ–¹æ³•å¯ä»¥ä¸ºéšå¼selfå±æ€§åˆ†é…ä¸€ä¸ªå…¨æ–°çš„å®ä¾‹ã€‚ä¸Šé¢æ˜¾ç¤ºçš„Pointç¤ºä¾‹å¯ä»¥å†™æˆä»¥ä¸‹æ–¹å¼ï¼š struct Point { â€‹ var x &#x3D; 0.0, y &#x3D; 0.0 â€‹ mutating func moveBy(x deltaX: Double, y deltaY: Double) { â€‹ self &#x3D; Point(x: x + deltaX, y: y + deltaY) â€‹ } } This version of the mutating moveBy(x:y:) method creates a new structure whose x and yvalues are set to the target location. The end result of calling this alternative version of the method will be exactly the same as for calling the earlier version. æšä¸¾çš„çªå˜æ–¹æ³•å¯ä»¥å°†éšå¼selfå‚æ•°è®¾ç½®ä¸ºä¸åŒä¸€æšä¸¾ä¸åŒçš„æƒ…å†µï¼š enum TriStateSwitch { â€‹ case off, low, high â€‹ mutating func next() { â€‹ switch self { â€‹ case .off: â€‹ self &#x3D; .low â€‹ case .low: â€‹ self &#x3D; .high â€‹ case .high: â€‹ self &#x3D; .off â€‹ } â€‹ } } var ovenLight &#x3D; TriStateSwitch.low ovenLight.next() &#x2F;&#x2F; ovenLight is now equal to .high ovenLight.next() &#x2F;&#x2F; ovenLight is now equal to .off æ­¤ç¤ºä¾‹å®šä¹‰äº†ä¸‰æ€å¼€å…³çš„æšä¸¾ã€‚æ¯æ¬¡è°ƒç”¨å…¶next()æ–¹æ³•æ—¶ï¼Œå¼€å…³éƒ½ä¼šåœ¨ä¸‰ç§ä¸åŒçš„åŠŸç‡çŠ¶æ€ï¼ˆoffã€lowå’Œhighï¼‰ä¹‹é—´å¾ªç¯ã€‚ ç±»å‹æ–¹æ³•å¦‚ä¸Šæ‰€è¿°ï¼Œå®ä¾‹æ–¹æ³•æ˜¯æ‚¨åœ¨ç‰¹å®šç±»å‹çš„å®ä¾‹ä¸Šè°ƒç”¨çš„æ–¹æ³•ã€‚æ‚¨è¿˜å¯ä»¥å®šä¹‰åœ¨ç±»å‹æœ¬èº«ä¸Šè°ƒç”¨çš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•è¢«ç§°ä¸ºç±»å‹æ–¹æ³•ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨æ–¹æ³•çš„funcå…³é”®å­—ä¹‹å‰å†™å…¥staticå…³é”®å­—æ¥æŒ‡ç¤ºç±»å‹æ–¹æ³•ã€‚ç±»å¯ä»¥ä½¿ç”¨classå…³é”®å­—ï¼Œä»¥å…è®¸å­ç±»è¦†ç›–è¶…ç±»å¯¹è¯¥æ–¹æ³•çš„å®ç°ã€‚ æ³¨æ„ åœ¨Objective-Cä¸­ï¼Œæ‚¨åªèƒ½ä¸ºObjective-Cç±»å®šä¹‰ç±»å‹çº§æ–¹æ³•ã€‚åœ¨ Swift ä¸­ï¼Œæ‚¨å¯ä»¥ä¸ºæ‰€æœ‰ç±»ã€ç»“æ„å’Œæšä¸¾å®šä¹‰ç±»å‹çº§æ–¹æ³•ã€‚æ¯ä¸ªç±»å‹æ–¹æ³•éƒ½æ˜¾å¼æ‰©å±•åˆ°å®ƒæ”¯æŒçš„ç±»å‹ã€‚ ç±»å‹æ–¹æ³•ä½¿ç”¨ç‚¹è¯­æ³•è°ƒç”¨ï¼Œå°±åƒå®ä¾‹æ–¹æ³•ä¸€æ ·ã€‚ä½†æ˜¯ï¼Œæ‚¨åœ¨ç±»å‹ä¸Šè°ƒç”¨ç±»å‹æ–¹æ³•ï¼Œè€Œä¸æ˜¯åœ¨è¯¥ç±»å‹çš„å®ä¾‹ä¸Šè°ƒç”¨ç±»å‹æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯æ‚¨åœ¨åä¸ºSomeClassçš„ç±»ä¸Šè°ƒç”¨ç±»å‹æ–¹æ³•çš„æ–¹æ³•ï¼š class SomeClass { â€‹ class func someTypeMethod() { â€‹ &#x2F;&#x2F; type method implementation goes here â€‹ } } SomeClass.someTypeMethod() åœ¨ç±»å‹æ–¹æ³•çš„ä¸»ä½“ä¸­ï¼Œéšå¼selfå±æ€§æ˜¯æŒ‡ç±»å‹æœ¬èº«ï¼Œè€Œä¸æ˜¯è¯¥ç±»å‹çš„å®ä¾‹ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨selfæ¥æ¶ˆé™¤ç±»å‹å±æ€§å’Œç±»å‹æ–¹æ³•å‚æ•°ä¹‹é—´çš„æ­§ä¹‰ï¼Œå°±åƒæ‚¨å¯¹å®ä¾‹å±æ€§å’Œå®ä¾‹æ–¹æ³•å‚æ•°æ‰€åšçš„é‚£æ ·ã€‚ æ›´ä¸€èˆ¬åœ°è¯´ï¼Œæ‚¨åœ¨ç±»å‹æ–¹æ³•æ­£æ–‡ä¸­ä½¿ç”¨çš„ä»»ä½•ä¸åˆæ ¼çš„æ–¹æ³•å’Œå±æ€§åç§°éƒ½å°†å¼•ç”¨å…¶ä»–ç±»å‹çº§æ–¹æ³•å’Œå±æ€§ã€‚ç±»å‹æ–¹æ³•å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªç±»å‹æ–¹æ³•ï¼Œä½¿ç”¨å¦ä¸€ä¸ªæ–¹æ³•çš„åç§°ï¼Œè€Œæ— éœ€å°†å…¶å‰ç¼€ä¸ºç±»å‹åç§°ã€‚åŒæ ·ï¼Œç»“æ„å’Œæšä¸¾ä¸Šçš„ç±»å‹æ–¹æ³•å¯ä»¥é€šè¿‡ä½¿ç”¨ç±»å‹å±æ€§çš„åç§°æ¥è®¿é—®ç±»å‹å±æ€§ï¼Œè€Œæ— éœ€ç±»å‹åç§°å‰ç¼€ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºLevelTrackerçš„ç»“æ„ï¼Œè¯¥ç»“æ„è·Ÿè¸ªç©å®¶åœ¨æ¸¸æˆçš„ä¸åŒå…³å¡æˆ–é˜¶æ®µçš„è¿›åº¦ã€‚è¿™æ˜¯ä¸€ä¸ªå•äººæ¸¸æˆï¼Œä½†å¯ä»¥åœ¨ä¸€å°è®¾å¤‡ä¸Šå­˜å‚¨å¤šä¸ªç©å®¶çš„ä¿¡æ¯ã€‚ æ¸¸æˆé¦–æ¬¡ç©æ¸¸æˆæ—¶ï¼Œæ¸¸æˆçš„æ‰€æœ‰å…³å¡ï¼ˆé™¤ä¸€çº§å¤–ï¼‰éƒ½å·²é”å®šã€‚æ¯æ¬¡ç©å®¶å®Œæˆå…³å¡æ—¶ï¼Œè¯¥å…³å¡éƒ½ä¼šä¸ºè®¾å¤‡ä¸Šçš„æ‰€æœ‰ç©å®¶è§£é”ã€‚LevelTrackerç»“æ„ä½¿ç”¨ç±»å‹å±æ€§å’Œæ–¹æ³•æ¥è·Ÿè¸ªæ¸¸æˆçš„å“ªäº›å…³å¡å·²è§£é”ã€‚å®ƒè¿˜è·Ÿè¸ªå•ä¸ªç©å®¶çš„å½“å‰çº§åˆ«ã€‚ struct LevelTracker { â€‹ static var highestUnlockedLevel &#x3D; 1 â€‹ var currentLevel &#x3D; 1 â€‹ static func unlock(_ level: Int) { â€‹ if level &gt; highestUnlockedLevel { highestUnlockedLevel &#x3D; level } â€‹ } â€‹ static func isUnlocked(_ level: Int) -&gt; Bool { â€‹ return level &lt;&#x3D; highestUnlockedLevel â€‹ } â€‹ @discardableResult â€‹ mutating func advance(to level: Int) -&gt; Bool { â€‹ if LevelTracker.isUnlocked(level) { â€‹ currentLevel &#x3D; level â€‹ return true â€‹ } else { â€‹ return false â€‹ } â€‹ } } The LevelTracker structure keeps track of the highest level that any player has unlocked. This value is stored in a type property called highestUnlockedLevel. LevelTrackerè¿˜å®šä¹‰äº†ä¸¤ç§ç±»å‹å‡½æ•°ï¼Œä»¥ä½¿ç”¨highestUnlockedLevelå±æ€§ã€‚ç¬¬ä¸€ä¸ªæ˜¯åä¸ºunlock(_:)çš„ç±»å‹å‡½æ•°ï¼Œæ¯å½“è§£é”æ–°çº§åˆ«æ—¶ï¼Œå®ƒéƒ½ä¼šæ›´æ–°highestUnlockedLevelçš„å€¼ã€‚ç¬¬äºŒä¸ªæ˜¯åä¸ºisUnlocked(_:)çš„æ–¹ä¾¿ç±»å‹å‡½æ•°ï¼Œå¦‚æœç‰¹å®šçº§åˆ«å·å·²è§£é”ï¼Œåˆ™è¿”å›trueã€‚ï¼ˆè¯·æ³¨æ„ï¼Œè¿™äº›ç±»å‹æ–¹æ³•å¯ä»¥è®¿é—®highestUnlockedLevelç±»å‹å±æ€§ï¼Œè€Œæ— éœ€å°†å…¶å†™ä¸ºLevelTracker.highestUnlockedLevelã€‚ï¼‰ é™¤äº†å…¶ç±»å‹å±æ€§å’Œç±»å‹æ–¹æ³•å¤–ï¼ŒLevelTrackerè¿˜è·Ÿè¸ªå•ä¸ªç©å®¶åœ¨æ¸¸æˆä¸­çš„è¿›åº¦ã€‚å®ƒä½¿ç”¨åä¸ºcurrentLevelçš„å®ä¾‹å±æ€§æ¥è·Ÿè¸ªç©å®¶å½“å‰æ­£åœ¨æ’­æ”¾çš„çº§åˆ«ã€‚ To help manage the currentLevel property, LevelTracker defines an instance method called advance(to:). Before updating currentLevel, this method checks whether the requested new level is already unlocked. The advance(to:) method returns a Boolean value to indicate whether or not it was actually able to set currentLevel. Because itâ€™s not necessarily a mistake for code that calls the advance(to:) method to ignore the return value, this function is marked with the @discardableResult attribute. For more information about this attribute, see Attributes. LevelTrackerç»“æ„ä¸å¦‚ä¸‹æ‰€ç¤ºçš„Playerç±»ä¸€èµ·ä½¿ç”¨ï¼Œä»¥è·Ÿè¸ªå’Œæ›´æ–°å•ä¸ªç©å®¶çš„è¿›åº¦ï¼š class Player { â€‹ var tracker &#x3D; LevelTracker() â€‹ let playerName: String â€‹ func complete(level: Int) { â€‹ LevelTracker.unlock(level + 1) â€‹ tracker.advance(to: level + 1) â€‹ } â€‹ init(name: String) { â€‹ playerName &#x3D; name â€‹ } } The Player class creates a new instance of LevelTracker to track that playerâ€™s progress. It also provides a method called complete(level:), which is called whenever a player completes a particular level. This method unlocks the next level for all players and updates the playerâ€™s progress to move them to the next level. (The Boolean return value of advance(to:) is ignored, because the level is known to have been unlocked by the call to LevelTracker.unlock(_:) on the previous line.) æ‚¨å¯ä»¥ä¸ºæ–°ç©å®¶åˆ›å»ºPlayerç±»çš„å®ä¾‹ï¼Œå¹¶æŸ¥çœ‹ç©å®¶å®Œæˆä¸€çº§æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼š var player &#x3D; Player(name: â€œArgyriosâ€) player.complete(level: 1) print(â€œhighest unlocked level is now (LevelTracker.highestUnlockedLevel)â€) &#x2F;&#x2F; Prints â€œhighest unlocked level is now 2â€ å¦‚æœæ‚¨åˆ›å»ºäº†ç¬¬äºŒä¸ªç©å®¶ï¼Œå¹¶è¯•å›¾å°†è¯¥ç©å®¶ç§»åŠ¨åˆ°æ¸¸æˆä¸­ä»»ä½•ç©å®¶å°šæœªè§£é”çš„å…³å¡ï¼Œåˆ™è®¾ç½®ç©å®¶å½“å‰å…³å¡çš„å°è¯•å¤±è´¥ï¼š player &#x3D; Player(name: â€œBetoâ€) if player.tracker.advance(to: 6) { â€‹ print(â€œplayer is now on level 6â€) } else { â€‹ print(â€œlevel 6 hasnâ€™t yet been unlockedâ€) } &#x2F;&#x2F; Prints â€œlevel 6 hasnâ€™t yet been unlockedâ€","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ æšä¸¾","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-æšä¸¾","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.294Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-æšä¸¾/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E6%9E%9A%E4%B8%BE/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Enumerations.html æšä¸¾ä¸ºä¸€ç»„ç›¸å…³å€¼å®šä¹‰äº†é€šç”¨ç±»å‹ï¼Œå¹¶ä½¿æ‚¨èƒ½å¤Ÿåœ¨ä»£ç ä¸­ä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼å¤„ç†è¿™äº›å€¼ã€‚ å¦‚æœæ‚¨ç†Ÿæ‚‰Cï¼Œæ‚¨å°†çŸ¥é“Cæšä¸¾ä¸ºä¸€ç»„æ•´æ•°å€¼åˆ†é…ç›¸å…³åç§°ã€‚Swift ä¸­çš„æšä¸¾è¦çµæ´»å¾—å¤šï¼Œä¸å¿…ä¸ºæ¯ä¸ªæšä¸¾æ¡ˆä¾‹æä¾›å€¼ã€‚å¦‚æœä¸ºæ¯ä¸ªæšä¸¾æƒ…å†µæä¾›äº†ä¸€ä¸ªå€¼ï¼ˆç§°ä¸ºåŸå§‹å€¼ï¼‰ï¼Œåˆ™è¯¥å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€å­—ç¬¦æˆ–ä»»ä½•æ•´æ•°æˆ–æµ®ç‚¹ç±»å‹çš„å€¼ã€‚ æˆ–è€…ï¼Œæšä¸¾å¤§å°å†™å¯ä»¥æŒ‡å®šè¦å­˜å‚¨çš„ä»»ä½•ç±»å‹çš„å…³è”å€¼ï¼Œä»¥åŠæ¯ä¸ªä¸åŒçš„å¤§å°å†™å€¼ï¼Œå°±åƒå…¶ä»–è¯­è¨€ä¸­çš„è”åˆæˆ–å˜ä½“ä¸€æ ·ã€‚æ‚¨å¯ä»¥å°†ä¸€ç»„å¸¸è§çš„ç›¸å…³æƒ…å†µå®šä¹‰ä¸ºä¸€ä¸ªæšä¸¾çš„ä¸€éƒ¨åˆ†ï¼Œæ¯ä¸ªæšä¸¾éƒ½æœ‰ä¸ä¹‹å…³è”çš„ä¸åŒç±»å‹å€¼é›†ã€‚ Swift ä¸­çš„æšä¸¾æœ¬èº«å°±æ˜¯ä¸€æµçš„ç±»å‹ã€‚å®ƒä»¬é‡‡ç”¨äº†è®¸å¤šä¼ ç»Ÿä¸Šä»…ç”±ç±»æ”¯æŒçš„åŠŸèƒ½ï¼Œä¾‹å¦‚è®¡ç®—å±æ€§ä»¥æä¾›æœ‰å…³æšä¸¾å½“å‰å€¼çš„æ›´å¤šä¿¡æ¯ï¼Œä»¥åŠå®ä¾‹æ–¹æ³•ï¼Œä»¥æä¾›ä¸æšä¸¾æ‰€ä»£è¡¨çš„å€¼ç›¸å…³çš„åŠŸèƒ½ã€‚æšä¸¾è¿˜å¯ä»¥å®šä¹‰åˆå§‹åŒ–å™¨ä»¥æä¾›åˆå§‹å¤§å°å†™å€¼ï¼›å¯ä»¥æ‰©å±•å…¶åŠŸèƒ½ï¼Œä½¿å…¶åŠŸèƒ½è¶…å‡ºåŸå§‹å®ç°ï¼›å¹¶ä¸”å¯ä»¥éµå®ˆåè®®ä»¥æä¾›æ ‡å‡†åŠŸèƒ½ã€‚ æœ‰å…³è¿™äº›åŠŸèƒ½çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å±æ€§ã€æ–¹æ³•ã€åˆå§‹åŒ–ã€æ‰©å±•å’Œåè®®ã€‚ æšä¸¾è¯­æ³•æ‚¨ä½¿ç”¨enumå…³é”®å­—å¼•å…¥æšä¸¾ï¼Œå¹¶å°†å®ƒä»¬çš„æ•´ä¸ªå®šä¹‰æ”¾åœ¨ä¸€å¯¹å¤§æ‹¬å·ä¸­ï¼š 123enum SomeEnumeration &#123; // enumeration definition goes here&#125; ä»¥ä¸‹æ˜¯æŒ‡å—é’ˆå››ä¸ªè¦ç‚¹çš„ç¤ºä¾‹ï¼š 123456enum CompassPoint &#123; case north case south case east case west&#125; æšä¸¾ä¸­å®šä¹‰çš„å€¼ï¼ˆå¦‚northã€southã€eastå’Œwestï¼‰æ˜¯å…¶æšä¸¾æƒ…å†µã€‚æ‚¨å¯ä»¥ä½¿ç”¨caseå…³é”®å­—æ¥å¼•å…¥æ–°çš„æšä¸¾æ¡ˆä¾‹ã€‚ æ³¨æ„ ä¸Cå’ŒObjective-Cç­‰è¯­è¨€ä¸åŒï¼ŒSwiftæšä¸¾æ¡ˆä¾‹é»˜è®¤æ²¡æœ‰è®¾ç½®æ•´æ•°å€¼ã€‚åœ¨ä¸Šé¢çš„CompassPointç¤ºä¾‹ä¸­ï¼Œnorthã€southã€eastå’Œwestä¸éšå«ç­‰äº0ã€1ã€2å’Œ3ã€‚ç›¸åï¼Œä¸åŒçš„æšä¸¾æƒ…å†µæœ¬èº«å°±æ˜¯å€¼ï¼Œå…·æœ‰æ˜ç¡®å®šä¹‰çš„CompassPointç±»å‹ã€‚ å¤šä¸ªæ¡ˆä¾‹å¯ä»¥å‡ºç°åœ¨ä¸€è¡Œä¸Šï¼Œç”¨é€—å·åˆ†éš”ï¼š 123enum Planet &#123; case mercury, venus, earth, mars, jupiter, saturn, uranus, neptune&#125; æ¯ä¸ªæšä¸¾å®šä¹‰éƒ½å®šä¹‰äº†ä¸€ç§æ–°ç±»å‹ã€‚ä¸Swiftä¸­çš„å…¶ä»–ç±»å‹ä¸€æ ·ï¼Œä»–ä»¬çš„åå­—ï¼ˆå¦‚CompassPointå’ŒPlanetï¼‰ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚ç»™å‡ºæšä¸¾ç±»å‹å•æ•°è€Œä¸æ˜¯å¤æ•°åç§°ï¼Œä»¥ä¾¿å®ƒä»¬è¯»èµ·æ¥ä¸è¨€è€Œå–»ï¼š 1var directionToHead = CompassPoint.west â€˜ directionToHead â€˜çš„ç±»å‹åœ¨å®ƒè¢«â€™ compaspoint â€˜çš„å¯èƒ½å€¼ä¹‹ä¸€åˆå§‹åŒ–æ—¶è¢«æ¨æ–­å‡ºæ¥ã€‚ä¸€æ—¦â€™ directionToHead â€˜è¢«å£°æ˜ä¸ºâ€™ compaspoint â€˜ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ›´çŸ­çš„ç‚¹è¯­æ³•å°†å®ƒè®¾ç½®ä¸ºä¸€ä¸ªä¸åŒçš„â€™ compaspoint â€˜å€¼: 1directionToHead = .east directionToHeadçš„ç±»å‹å·²ç»çŸ¥é“ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨è®¾ç½®å…¶å€¼æ—¶åˆ é™¤è¯¥ç±»å‹ã€‚è¿™ä½¿å¾—åœ¨å¤„ç†æ˜¾å¼ç±»å‹çš„æšä¸¾å€¼æ—¶å…·æœ‰é«˜åº¦å¯è¯»æ€§çš„ä»£ç ã€‚ å°†æšä¸¾å€¼ä¸Switchè¯­å¥åŒ¹é…æ‚¨å¯ä»¥å°†å•ä¸ªæšä¸¾å€¼ä¸switchè¯­å¥åŒ¹é…ï¼š 123456789101112directionToHead = .southswitch directionToHead &#123;case .north: print(&quot;Lots of planets have a north&quot;)case .south: print(&quot;Watch out for penguins&quot;)case .east: print(&quot;Where the sun rises&quot;)case .west: print(&quot;Where the skies are blue&quot;)&#125;// Prints &quot;Watch out for penguins&quot; æ‚¨å¯ä»¥å°†æ­¤ä»£ç è¯»å–ä¸ºï¼š è€ƒè™‘directionToHeadçš„ä»·å€¼ã€‚åœ¨å®ƒç­‰äº.northçš„æƒ…å†µä¸‹ï¼Œæ‰“å°&quot;Lotsplanetshavenorth&quot;åœ¨å®ƒç­‰äº.southçš„æƒ…å†µä¸‹ï¼Œæ‰“å°&quot;Watchoutpenguins&quot; â€¦ç­‰ç­‰ã€‚ å¦‚Control Flowä¸­æ‰€è¿°ï¼Œåœ¨è€ƒè™‘æšä¸¾çš„æƒ…å†µæ—¶ï¼Œswitchè¯­å¥å¿…é¡»è¯¦å°½æ— é—ã€‚å¦‚æœçœç•¥.west``caseï¼Œæ­¤ä»£ç ä¸ä¼šç¼–è¯‘ï¼Œå› ä¸ºå®ƒä¸è€ƒè™‘CompassPointæ¡ˆä¾‹çš„å®Œæ•´åˆ—è¡¨ã€‚è¦æ±‚è¯¦å°½æ— é—ï¼Œç¡®ä¿æšä¸¾æ¡ˆä¾‹ä¸ä¼šè¢«æ„å¤–çœç•¥ã€‚ å¦‚æœä¸é€‚åˆä¸ºæ¯ä¸ªæšä¸¾æ¡ˆä¾‹æä¾›caseï¼Œæ‚¨å¯ä»¥æä¾›defaultæ¡ˆä¾‹æ¥æ¶µç›–ä»»ä½•æœªæ˜ç¡®è§£å†³çš„æ¡ˆä¾‹ï¼š 12345678let somePlanet = Planet.earthswitch somePlanet &#123;case .earth: print(&quot;Mostly harmless&quot;)default: print(&quot;Not a safe place for humans&quot;)&#125;// Prints &quot;Mostly harmless&quot; è¿­ä»£æšä¸¾æ¡ˆä¾‹å¯¹äºæŸäº›æšä¸¾ï¼Œæ”¶é›†æ‰€æœ‰æšä¸¾çš„æ¡ˆä¾‹æ˜¯æœ‰ç”¨çš„ã€‚æ‚¨é€šè¿‡åœ¨æšä¸¾åç§°åå†™å…¥:CaseIterableæ¥å¯ç”¨æ­¤åŠŸèƒ½ã€‚Swiftå°†æ‰€æœ‰æ¡ˆä¾‹çš„é›†åˆå…¬å¼€ä¸ºæšä¸¾ç±»å‹çš„allCaseså±æ€§ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼š 123456enum Beverage: CaseIterable &#123; case coffee, tea, juice&#125;let numberOfChoices = Beverage.allCases.countprint(&quot;\\(numberOfChoices) beverages available&quot;)// Prints &quot;3 beverages available&quot; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ‚¨ç¼–å†™Beverage.allCasesæ¥è®¿é—®åŒ…å«Beverageæšä¸¾æ‰€æœ‰æ¡ˆä¾‹çš„é›†åˆã€‚æ‚¨å¯ä»¥åƒä½¿ç”¨ä»»ä½•å…¶ä»–é›†åˆä¸€æ ·ä½¿ç”¨allCasesâ€”â€”é›†åˆçš„å…ƒç´ æ˜¯æšä¸¾ç±»å‹çš„å®ä¾‹ï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä»¬æ˜¯Beverageå€¼ã€‚ä¸Šé¢çš„ç¤ºä¾‹è®¡ç®—äº†æœ‰å¤šå°‘ä¸ªæ¡ˆä¾‹ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨for-inå¾ªç¯æ¥è¿­ä»£æ‰€æœ‰æ¡ˆä¾‹ã€‚ 123456for beverage in Beverage.allCases &#123; print(beverage)&#125;// coffee// tea// juice ä¸Šé¢ç¤ºä¾‹ä¸­ä½¿ç”¨çš„è¯­æ³•å°†æšä¸¾æ ‡è®°ä¸ºç¬¦åˆCaseIterableåè®®ã€‚æœ‰å…³åè®®çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…åè®®ã€‚ å…³è”å€¼ä¸Šä¸€èŠ‚ä¸­çš„ç¤ºä¾‹æ˜¾ç¤ºäº†æšä¸¾çš„æƒ…å†µæœ¬èº«æ˜¯å¦‚ä½•å®šä¹‰ï¼ˆå’Œé”®å…¥ï¼‰çš„å€¼ã€‚æ‚¨å¯ä»¥ä¸ºPlanet.earthè®¾ç½®å¸¸é‡æˆ–å˜é‡ï¼Œç¨åæ£€æŸ¥æ­¤å€¼ã€‚ç„¶è€Œï¼Œæœ‰æ—¶å°†å…¶ä»–ç±»å‹çš„å€¼ä¸è¿™äº›å¤§å°å†™å€¼ä¸€èµ·å­˜å‚¨æ˜¯æœ‰ç”¨çš„ã€‚æ­¤é™„åŠ ä¿¡æ¯ç§°ä¸ºå…³è”å€¼ï¼Œæ¯æ¬¡æ‚¨å°†è¯¥æƒ…å†µç”¨ä½œä»£ç ä¸­çš„å€¼æ—¶ï¼Œå®ƒéƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚ æ‚¨å¯ä»¥å®šä¹‰Swiftæšä¸¾æ¥å­˜å‚¨ä»»ä½•ç»™å®šç±»å‹çš„å…³è”å€¼ï¼Œå¦‚æœéœ€è¦ï¼Œæ¯ä¸ªæšä¸¾æƒ…å†µä¸‹çš„å€¼ç±»å‹å¯èƒ½ä¸åŒã€‚ç±»ä¼¼çš„æšä¸¾è¢«ç§°ä¸ºæ­§è§†è”åˆã€æ ‡è®°è”åˆæˆ–å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„å˜ä½“ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾åº“å­˜è·Ÿè¸ªç³»ç»Ÿéœ€è¦é€šè¿‡ä¸¤ç§ä¸åŒç±»å‹çš„æ¡å½¢ç è·Ÿè¸ªäº§å“ã€‚ä¸€äº›äº§å“ä»¥UPCæ ¼å¼æ ‡æœ‰1Dæ¡å½¢ç ï¼Œä½¿ç”¨æ•°å­—0åˆ°9ã€‚æ¯ä¸ªæ¡å½¢ç éƒ½æœ‰ä¸€ä¸ªæ•°å­—ç³»ç»Ÿæ•°å­—ï¼Œç„¶åæ˜¯äº”ä¸ªåˆ¶é€ å•†ä»£ç æ•°å­—å’Œäº”ä¸ªäº§å“ä»£ç æ•°å­—ã€‚åé¢è·Ÿç€ä¸€ä¸ªæ£€æŸ¥æ•°å­—ï¼Œä»¥éªŒè¯ä»£ç æ˜¯å¦å·²æ­£ç¡®æ‰«æï¼š å…¶ä»–äº§å“ä»¥äºŒç»´ç æ ¼å¼æ ‡æœ‰äºŒç»´æ¡å½¢ç ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•ISO 8859-1å­—ç¬¦ï¼Œå¹¶å¯ä»¥å¯¹é•¿åº¦é«˜è¾¾2953ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²è¿›è¡Œç¼–ç ï¼š åº“å­˜è·Ÿè¸ªç³»ç»Ÿå¯ä»¥æ–¹ä¾¿åœ°å°†UPCæ¡å½¢ç å­˜å‚¨ä¸ºå››ä¸ªæ•´æ•°çš„å…ƒç»„ï¼Œå¹¶å°†äºŒç»´ç æ¡å½¢ç å­˜å‚¨ä¸ºä»»ä½•é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚ åœ¨ Swift ä¸­ï¼Œç”¨äºå®šä¹‰ä»»ä¸€ç±»å‹çš„äº§å“æ¡å½¢ç çš„æšä¸¾å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š 1234enum Barcode &#123; case upc(Int, Int, Int, Int) case qrCode(String)&#125; è¿™å¯ä»¥ç†è§£ä¸ºï¼š â€œå®šä¹‰ä¸€ä¸ªåä¸ºâ€˜Barcodeâ€™çš„æšä¸¾ç±»å‹ï¼Œå®ƒå¯ä»¥æ¥å—ä¸€ä¸ªå¸¦æœ‰ç±»å‹å…³è”å€¼(â€˜Intâ€™ï¼Œâ€˜Intâ€™ï¼Œâ€˜Intâ€™ï¼Œâ€˜Intâ€™)çš„â€˜upcâ€™å€¼ï¼Œæˆ–è€…ä¸€ä¸ªå¸¦æœ‰ç±»å‹å…³è”å€¼(â€˜Stringâ€™)çš„â€˜qrCodeâ€™å€¼ã€‚â€ æ­¤å®šä¹‰ä¸æä¾›ä»»ä½•å®é™…çš„Intæˆ–Stringå€¼â€”â€”å®ƒåªæ˜¯å®šä¹‰äº†Barcodeå¸¸é‡å’Œå˜é‡åœ¨ç­‰äºBarcode.upcæˆ–Barcode.qrCodeæ—¶å¯ä»¥å­˜å‚¨çš„å…³è”å€¼ç±»å‹ã€‚ ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»»ä¸€ç±»å‹åˆ›å»ºæ–°æ¡å½¢ç ï¼š 1var productBarcode = Barcode.upc(8, 85909, 51226, 3) ä¸‹é¢çš„ä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªåä¸ºâ€œproductBarcodeâ€çš„æ–°å˜é‡ï¼Œå¹¶å°†å…¶èµ‹å€¼ä¸ºâ€œBarcodeâ€ã€‚Upc â€˜ï¼Œå…³è”å…ƒç»„å€¼ä¸ºâ€™(8,85909,51226,3)â€™ã€‚ æ‚¨å¯ä»¥ä¸ºåŒä¸€äº§å“åˆ†é…ä¸åŒç±»å‹çš„æ¡å½¢ç ï¼š 1productBarcode = .qrCode(&quot;ABCDEFGHIJKLMNOP&quot;) æ­¤æ—¶ï¼ŒåŸå§‹Barcode.upcåŠå…¶æ•´æ•°å€¼å°†è¢«newBarcodeBarcode.qrCodeåŠå…¶å­—ç¬¦ä¸²å€¼å–ä»£ã€‚Barcodeç±»å‹çš„å¸¸é‡å’Œå˜é‡å¯ä»¥å­˜å‚¨.upcæˆ–.qrCodeï¼ˆåŠå…¶ç›¸å…³å€¼ï¼‰ï¼Œä½†å®ƒä»¬åœ¨ä»»ä½•ç»™å®šæ—¶é—´åªèƒ½å­˜å‚¨å…¶ä¸­ä¹‹ä¸€ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å¼€å…³è¯­å¥æ£€æŸ¥ä¸åŒçš„æ¡å½¢ç ç±»å‹ï¼Œç±»ä¼¼äºå°†æšä¸¾å€¼ä¸äº¤æ¢æœºè¯­å¥åŒ¹é…ä¸­çš„ç¤ºä¾‹ã€‚ç„¶è€Œï¼Œè¿™ä¸€æ¬¡ï¼Œå…³è”å€¼ä½œä¸ºå¼€å…³è¯­å¥çš„ä¸€éƒ¨åˆ†æå–ã€‚æ‚¨å¯ä»¥å°†æ¯ä¸ªå…³è”å€¼æå–ä¸ºå¸¸é‡ï¼ˆå¸¦æœ‰letå‰ç¼€ï¼‰æˆ–å˜é‡ï¼ˆå¸¦æœ‰varå‰ç¼€ï¼‰ï¼Œä»¥ä¾¿åœ¨switchå¤§å°å†™çš„æ­£æ–‡ä¸­ä½¿ç”¨ï¼š 1234567switch productBarcode &#123;case .upc(let numberSystem, let manufacturer, let product, let check): print(&quot;UPC: \\(numberSystem), \\(manufacturer), \\(product), \\(check).&quot;)case .qrCode(let productCode): print(&quot;QR code: \\(productCode).&quot;)&#125;// Prints &quot;QR code: ABCDEFGHIJKLMNOP.&quot; å¦‚æœæšä¸¾æƒ…å†µçš„æ‰€æœ‰å…³è”å€¼éƒ½è¢«æå–ä¸ºå¸¸é‡ï¼Œæˆ–è€…æ‰€æœ‰å…³è”å€¼éƒ½è¢«æå–ä¸ºå˜é‡ï¼Œä¸ºäº†ç®€æ´èµ·ä¹‰ï¼Œæ‚¨å¯ä»¥åœ¨æ¡ˆä¾‹åç§°ä¹‹å‰æ”¾ç½®å•ä¸ªvaræˆ–letæ³¨é‡Šï¼š 1234567switch productBarcode &#123;case let .upc(numberSystem, manufacturer, product, check): print(&quot;UPC : \\(numberSystem), \\(manufacturer), \\(product), \\(check).&quot;)case let .qrCode(productCode): print(&quot;QR code: \\(productCode).&quot;)&#125;// Prints &quot;QR code: ABCDEFGHIJKLMNOP.&quot; åŸå§‹å€¼å…³è”å€¼ä¸­çš„æ¡å½¢ç ç¤ºä¾‹æ˜¾ç¤ºäº†æšä¸¾æ¡ˆä¾‹å¦‚ä½•å£°æ˜å®ƒä»¬å­˜å‚¨ä¸åŒç±»å‹çš„å…³è”å€¼ã€‚ä½œä¸ºå…³è”å€¼çš„æ›¿ä»£å“ï¼Œæšä¸¾æƒ…å†µå¯ä»¥é¢„å…ˆå¡«å……é»˜è®¤å€¼ï¼ˆç§°ä¸ºåŸå§‹å€¼ï¼‰ï¼Œè¿™äº›å€¼éƒ½æ˜¯åŒä¸€ç±»å‹ã€‚ ä»¥ä¸‹æ˜¯å°†åŸå§‹ASCIIå€¼ä¸å‘½åæšä¸¾æ¡ˆä¾‹ä¸€èµ·å­˜å‚¨çš„ç¤ºä¾‹ï¼š 12345enum ASCIIControlCharacter: Character &#123; case tab = &quot;\\t&quot; case lineFeed = &quot;\\n&quot; case carriageReturn = &quot;\\r&quot;&#125; åœ¨è¿™é‡Œï¼Œåä¸ºASCIIControlCharacterçš„æšä¸¾çš„åŸå§‹å€¼è¢«å®šä¹‰ä¸ºCharacterç±»å‹ï¼Œå¹¶è®¾ç½®ä¸ºä¸€äº›æ›´å¸¸è§çš„ASCIIæ§åˆ¶å­—ç¬¦ã€‚Characterå€¼åœ¨å­—ç¬¦ä¸²å’Œå­—ç¬¦ä¸­æè¿°ã€‚ åŸå§‹å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€å­—ç¬¦æˆ–ä»»ä½•æ•´æ•°æˆ–æµ®ç‚¹æ•°ç±»å‹ã€‚æ¯ä¸ªåŸå§‹å€¼åœ¨å…¶æšä¸¾å£°æ˜ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚ æ³¨æ„ åŸå§‹å€¼ä¸å…³è”å€¼ä¸åŒã€‚å½“æ‚¨é¦–æ¬¡åœ¨ä»£ç ä¸­å®šä¹‰æšä¸¾æ—¶ï¼ŒåŸå§‹å€¼è®¾ç½®ä¸ºé¢„å¡«å……å€¼ï¼Œå¦‚ä¸Šé¢çš„ä¸‰ä¸ªASCIIä»£ç ã€‚ç‰¹å®šæšä¸¾æƒ…å†µçš„åŸå§‹å€¼å§‹ç»ˆç›¸åŒã€‚å½“æ‚¨æ ¹æ®æšä¸¾çš„ä¸€ä¸ªæƒ…å†µåˆ›å»ºæ–°å¸¸é‡æˆ–å˜é‡æ—¶ï¼Œä¼šè®¾ç½®å…³è”å€¼ï¼Œå¹¶ä¸”æ¯æ¬¡è¿™æ ·åšæ—¶éƒ½å¯èƒ½ä¸åŒã€‚ éšå¼åˆ†é…çš„åŸå§‹å€¼å½“æ‚¨å¤„ç†å­˜å‚¨æ•´æ•°æˆ–å­—ç¬¦ä¸²åŸå§‹å€¼çš„æšä¸¾æ—¶ï¼Œæ‚¨ä¸å¿…ä¸ºæ¯ä¸ªæ¡ˆä¾‹æ˜¾å¼åˆ†é…åŸå§‹å€¼ã€‚å½“æ‚¨ä¸è¿™æ ·åšæ—¶ï¼ŒSwiftä¼šè‡ªåŠ¨ä¸ºæ‚¨åˆ†é…å€¼ã€‚ ä¾‹å¦‚ï¼Œå½“æ•´æ•°ç”¨äºåŸå§‹å€¼æ—¶ï¼Œæ¯ç§æƒ…å†µä¸‹çš„éšå¼å€¼æ¯”ä¸Šä¸€ä¸ªå¤§å°å†™å¤šä¸€ä¸ªã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¡ˆä¾‹æ²¡æœ‰å€¼é›†ï¼Œåˆ™å…¶å€¼ä¸º0ã€‚ ä»¥ä¸‹æšä¸¾æ˜¯å¯¹æ—©æœŸPlanetæšä¸¾çš„ç»†åŒ–ï¼Œå…¶æ•´æ•°åŸå§‹å€¼è¡¨ç¤ºæ¯é¢—è¡Œæ˜Ÿä¸å¤ªé˜³çš„é¡ºåºï¼š 123enum Planet: Int &#123; case mercury = 1, venus, earth, mars, jupiter, saturn, uranus, neptune&#125; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒPlanet.mercuryçš„æ˜¾å¼åŸå§‹å€¼ä¸º1ï¼ŒPlanet.venusçš„éšå¼åŸå§‹å€¼ä¸º2ï¼Œä»¥æ­¤ç±»æ¨ã€‚ å½“å­—ç¬¦ä¸²ç”¨äºåŸå§‹å€¼æ—¶ï¼Œæ¯ä¸ªæ¡ˆä¾‹çš„éšå¼å€¼æ˜¯è¯¥æ¡ˆä¾‹åç§°çš„æ–‡æœ¬ã€‚ ä¸‹é¢çš„æšä¸¾æ˜¯å¯¹æ—©æœŸCompassPointæšä¸¾çš„ç»†åŒ–ï¼Œå­—ç¬¦ä¸²åŸå§‹å€¼è¡¨ç¤ºæ¯ä¸ªæ–¹å‘çš„åç§°ï¼š 123enum CompassPoint: String &#123; case north, south, east, west&#125; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒCompassPoint.southå…·æœ‰&quot;south&quot;ç­‰éšå¼åŸå§‹å€¼ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å…¶rawValueå±æ€§è®¿é—®æšä¸¾æ¡ˆä¾‹çš„åŸå§‹å€¼ï¼š 12345let earthsOrder = Planet.earth.rawValue// earthsOrder is 3let sunsetDirection = CompassPoint.west.rawValue// sunsetDirection is &quot;west&quot; ä»åŸå§‹å€¼åˆå§‹åŒ–å¦‚æœæ‚¨ä½¿ç”¨åŸå§‹å€¼ç±»å‹å®šä¹‰æšä¸¾ï¼Œæšä¸¾ä¼šè‡ªåŠ¨æ”¶åˆ°ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œè¯¥åˆå§‹åŒ–å™¨æ¥å—åŸå§‹å€¼ç±»å‹çš„å€¼ï¼ˆä½œä¸ºç§°ä¸ºrawValueçš„å‚æ•°ï¼‰ï¼Œå¹¶è¿”å›æšä¸¾å¤§å°å†™æˆ–nilã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤åˆå§‹åŒ–å™¨å°è¯•åˆ›å»ºæšä¸¾çš„æ–°å®ä¾‹ã€‚ æ­¤ç¤ºä¾‹ä»åŸå§‹å€¼7ä¸­è¯†åˆ«å¤©ç‹æ˜Ÿï¼š 12let possiblePlanet = Planet(rawValue: 7)// possiblePlanet is of type Planet? and equals Planet.uranus ç„¶è€Œï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰å¯èƒ½çš„â€œIntâ€å€¼éƒ½èƒ½æ‰¾åˆ°åŒ¹é…çš„è¡Œæ˜Ÿã€‚å› æ­¤ï¼ŒåŸå§‹å€¼åˆå§‹åŒ–å™¨æ€»æ˜¯è¿”å›ä¸€ä¸ªå¯é€‰çš„æšä¸¾æƒ…å†µã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œâ€œå¯èƒ½è¡Œæ˜Ÿâ€çš„ç±»å‹æ˜¯â€œè¡Œæ˜Ÿ?â€æˆ–è€…â€œå¯é€‰çš„â€˜è¡Œæ˜Ÿâ€™ã€‚â€ æ³¨æ„ åŸå§‹å€¼åˆå§‹åŒ–å™¨æ˜¯ä¸€ä¸ªå¤±è´¥çš„åˆå§‹åŒ–å™¨ï¼Œå› ä¸ºå¹¶éæ¯ä¸ªåŸå§‹å€¼éƒ½ä¼šè¿”å›ä¸€ä¸ªæšä¸¾æƒ…å†µã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å¤±è´¥çš„åˆå§‹åŒ–å™¨ã€‚ å¦‚æœæ‚¨è¯•å›¾æ‰¾åˆ°ä½ç½®ä¸º11çš„è¡Œæ˜Ÿï¼ŒåŸå§‹å€¼åˆå§‹åŒ–å™¨è¿”å›çš„å¯é€‰Planetå€¼å°†ä¸ºnilï¼š 123456789101112let positionToFind = 11if let somePlanet = Planet(rawValue: positionToFind) &#123; switch somePlanet &#123; case .earth: print(&quot;Mostly harmless&quot;) default: print(&quot;Not a safe place for humans&quot;) &#125;&#125; else &#123; print(&quot;There isn&#x27;t a planet at position \\(positionToFind)&quot;)&#125;// Prints &quot;There isn&#x27;t a planet at position 11&quot; è¿™ä¸ªä¾‹å­ä½¿ç”¨äº†å¯é€‰çš„ç»‘å®šæ¥è®¿é—®ä¸€ä¸ªåŸå§‹å€¼ä¸ºâ€™ 11 â€˜çš„è¡Œæ˜Ÿã€‚è¯­å¥â€™ if let somePlanet &#x3D; Planet(rawValue: 11) â€˜åˆ›å»ºäº†ä¸€ä¸ªå¯é€‰çš„â€™ Planet â€˜ï¼Œå¹¶å°†â€™ somePlanet â€˜è®¾ç½®ä¸ºå¯é€‰çš„â€™ Planet â€˜çš„å€¼ï¼Œå¦‚æœå®ƒå¯ä»¥è¢«æ£€ç´¢ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸å¯èƒ½æ£€ç´¢ä½ç½®ä¸ºâ€œ11â€çš„è¡Œæ˜Ÿï¼Œæ‰€ä»¥æ‰§è¡Œâ€œelseâ€åˆ†æ”¯ã€‚ é€’å½’æšä¸¾é€’å½’æšä¸¾æ˜¯ä¸€ç§æšä¸¾ï¼Œå…¶æšä¸¾çš„å¦ä¸€ä¸ªå®ä¾‹ä½œä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæšä¸¾æ¡ˆä¾‹çš„å…³è”å€¼ã€‚æ‚¨é€šè¿‡åœ¨æšä¸¾å‰indirectå†™å…¥æ¥æŒ‡ç¤ºæšä¸¾æƒ…å†µæ˜¯é€’å½’çš„ï¼Œè¿™å‘Šè¯‰ç¼–è¯‘å™¨æ’å…¥å¿…è¦çš„é—´æ¥å±‚ã€‚ ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå­˜å‚¨ç®€å•ç®—æœ¯è¡¨è¾¾å¼çš„æšä¸¾ï¼š 12345enum ArithmeticExpression &#123; case number(Int) indirect case addition(ArithmeticExpression, ArithmeticExpression) indirect case multiplication(ArithmeticExpression, ArithmeticExpression)&#125; ä½ ä¹Ÿå¯ä»¥åœ¨æšä¸¾çš„å¼€å§‹ä¹‹å‰å†™â€™ indirect â€˜æ¥ä¸ºæ‰€æœ‰æœ‰å…³è”å€¼çš„æšä¸¾æƒ…å†µå¯ç”¨é—´æ¥: 12345indirect enum ArithmeticExpression &#123; case number(Int) case addition(ArithmeticExpression, ArithmeticExpression) case multiplication(ArithmeticExpression, ArithmeticExpression)&#125; æ­¤æšä¸¾å¯ä»¥å­˜å‚¨ä¸‰ç§ç®—æœ¯è¡¨è¾¾å¼:æ™®é€šæ•°å­—ã€ä¸¤ä¸ªè¡¨è¾¾å¼çš„åŠ æ³•å’Œä¸¤ä¸ªè¡¨è¾¾å¼çš„ä¹˜æ³•ã€‚â€œåŠ æ³•â€å’Œâ€œä¹˜æ³•â€çš„å…³è”å€¼ä¹Ÿæ˜¯ç®—æœ¯è¡¨è¾¾å¼â€”â€”è¿™äº›å…³è”å€¼ä½¿å¾—åµŒå¥—è¡¨è¾¾å¼æˆä¸ºå¯èƒ½ã€‚ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼â€™(5 + 4)* 2 â€˜åœ¨ä¹˜æ³•è¿ç®—çš„å³è¾¹æœ‰ä¸€ä¸ªæ•°å­—ï¼Œåœ¨ä¹˜æ³•è¿ç®—çš„å·¦è¾¹æœ‰å¦ä¸€ä¸ªè¡¨è¾¾å¼ã€‚å› ä¸ºæ•°æ®æ˜¯åµŒå¥—çš„ï¼Œæ‰€ä»¥ç”¨äºå­˜å‚¨æ•°æ®çš„æšä¸¾ä¹Ÿéœ€è¦æ”¯æŒåµŒå¥—â€”â€”è¿™æ„å‘³ç€ 12341. let five = ArithmeticExpression.number(5)2. let four = ArithmeticExpression.number(4)3. let sum = ArithmeticExpression.addition(five, four)4. let product = ArithmeticExpression.multiplication(sum, ArithmeticExpression.number(2)) é€’å½’å‡½æ•°æ˜¯å¤„ç†å…·æœ‰é€’å½’ç»“æ„çš„æ•°æ®çš„ä¸€ç§ç®€å•æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªè®¡ç®—ç®—æœ¯è¡¨è¾¾å¼çš„å‡½æ•°ï¼š 12345678910111213func evaluate(_ expression: ArithmeticExpression) -&gt; Int &#123; switch expression &#123; case let .number(value): return value case let .addition(left, right): return evaluate(left) + evaluate(right) case let .multiplication(left, right): return evaluate(left) * evaluate(right) &#125;&#125;print(evaluate(product))// Prints &quot;18&quot; æ­¤å‡½æ•°åªéœ€è¿”å›ç›¸å…³å€¼å³å¯è®¡ç®—çº¯æ•°ã€‚å®ƒé€šè¿‡è¯„ä¼°å·¦ä¾§çš„è¡¨è¾¾å¼ï¼Œåœ¨å³ä¾§è¯„ä¼°è¡¨è¾¾å¼ï¼Œç„¶åå°†å®ƒä»¬æ·»åŠ æˆ–ä¹˜ä»¥å®ƒä»¬æ¥è®¡ç®—åŠ æ³•æˆ–ä¹˜æ³•ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ ç±»å‹é“¸é€ ","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-ç±»å‹é“¸é€ ","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.294Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-ç±»å‹é“¸é€ /","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E7%B1%BB%E5%9E%8B%E9%93%B8%E9%80%A0/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/TypeCasting.html ç±»å‹è½¬æ¢æ˜¯ä¸€ç§æ£€æŸ¥å®ä¾‹ç±»å‹çš„æ–¹æ³•ï¼Œæˆ–å°†è¯¥å®ä¾‹è§†ä¸ºä¸è‡ªèº«ç±»å±‚æ¬¡ç»“æ„ä¸­å…¶ä»–åœ°æ–¹ä¸åŒçš„è¶…ç±»æˆ–å­ç±»ã€‚ Swiftä¸­çš„ç±»å‹è½¬æ¢æ˜¯ç”¨is``asè¿ç®—ç¬¦å®ç°çš„ã€‚è¿™ä¸¤ä¸ªè¿ç®—ç¬¦æä¾›äº†ä¸€ç§ç®€å•è€Œå¯Œæœ‰è¡¨ç°åŠ›çš„æ–¹å¼æ¥æ£€æŸ¥å€¼çš„ç±»å‹æˆ–å°†å€¼è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ã€‚ æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ç±»å‹è½¬æ¢æ¥æ£€æŸ¥ç±»å‹æ˜¯å¦ç¬¦åˆåè®®ï¼Œå¦‚â€œæ£€æŸ¥åè®®ä¸€è‡´æ€§â€ä¸­æ‰€è¿°ã€‚ å®šä¹‰ç±»å‹é“¸é€ çš„ç±»å±‚æ¬¡ç»“æ„æ‚¨å¯ä»¥ä½¿ç”¨å¸¦æœ‰ç±»å’Œå­ç±»å±‚æ¬¡ç»“æ„çš„ç±»å‹è½¬æ¢æ¥æ£€æŸ¥ç‰¹å®šç±»å®ä¾‹çš„ç±»å‹ï¼Œå¹¶å°†è¯¥å®ä¾‹è½¬æ¢ä¸ºåŒä¸€å±‚æ¬¡ç»“æ„ä¸­çš„å¦ä¸€ä¸ªç±»ã€‚ä¸‹é¢çš„ä¸‰ä¸ªä»£ç ç‰‡æ®µå®šä¹‰äº†ç±»çš„å±‚æ¬¡ç»“æ„å’ŒåŒ…å«è¿™äº›ç±»å®ä¾‹çš„æ•°ç»„ï¼Œç”¨äºç±»å‹è½¬æ¢ç¤ºä¾‹ã€‚ ç¬¬ä¸€ä¸ªç‰‡æ®µå®šä¹‰äº†ä¸€ä¸ªåä¸ºMediaItemçš„æ–°åŸºç±»ã€‚è¯¥ç±»ä¸ºæ•°å­—åª’ä½“åº“ä¸­å‡ºç°çš„ä»»ä½•ç±»å‹çš„é¡¹ç›®æä¾›åŸºæœ¬åŠŸèƒ½ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒå£°æ˜Stringç±»å‹çš„nameå±æ€§å’Œinitnameåˆå§‹åŒ–å™¨ã€‚ï¼ˆå‡è®¾æ‰€æœ‰åª’ä½“é¡¹ç›®ï¼ŒåŒ…æ‹¬æ‰€æœ‰ç”µå½±å’Œæ­Œæ›²ï¼Œéƒ½å°†æœ‰ä¸€ä¸ªåç§°ã€‚ï¼‰ class MediaItem { â€‹ var name: String â€‹ init(name: String) { â€‹ self.name &#x3D; name â€‹ } } ä¸‹ä¸€ä¸ªç‰‡æ®µå®šä¹‰äº†MediaItemçš„ä¸¤ä¸ªå­ç±»ã€‚ç¬¬ä¸€ä¸ªå­ç±»â€œMovieä¼šå°è£…æœ‰å…³æŸéƒ¨æˆ–æŸéƒ¨ç”µå½±çš„å…¶ä»–ä¿¡æ¯ã€‚å®ƒåœ¨åŸºç¡€MediaItemç±»ä¹‹ä¸Šæ·»åŠ äº†ä¸€ä¸ªdirectorå±æ€§ï¼Œå¹¶å¸¦æœ‰ç›¸åº”çš„åˆå§‹åŒ–å™¨ã€‚ç¬¬äºŒä¸ªå­ç±»Songåœ¨åŸºç±»ä¹‹ä¸Šæ·»åŠ äº†artistå±æ€§å’Œåˆå§‹åŒ–å™¨ï¼š class Movie: MediaItem { â€‹ var director: String â€‹ init(name: String, director: String) { â€‹ self.director &#x3D; director â€‹ super.init(name: name) â€‹ } } class Song: MediaItem { â€‹ var artist: String â€‹ init(name: String, artist: String) { â€‹ self.artist &#x3D; artist â€‹ super.init(name: name) â€‹ } } æœ€åä¸€ä¸ªç‰‡æ®µåˆ›å»ºä¸€ä¸ªåä¸ºlibraryçš„å¸¸é‡æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªMovieå®ä¾‹å’Œä¸‰ä¸ªSongå®ä¾‹ã€‚é€šè¿‡ä½¿ç”¨æ•°ç»„æ–‡å­—çš„å†…å®¹åˆå§‹åŒ–åº“æ•°ç»„æ¥æ¨æ–­libraryæ•°ç»„çš„ç±»å‹ã€‚Swiftçš„ç±»å‹æ£€æŸ¥å™¨èƒ½å¤Ÿæ¨æ–­Movieå’ŒSongå…·æœ‰å¸¸è§çš„MediaItemè¶…ç±»ï¼Œå› æ­¤å®ƒæ¨æ–­å‡ºåº“æ•°ç»„çš„[MediaItem]ç±»å‹ï¼š let library &#x3D; [ â€‹ Movie(name: â€œCasablancaâ€, director: â€œMichael Curtizâ€), â€‹ Song(name: â€œBlue Suede Shoesâ€, artist: â€œElvis Presleyâ€), â€‹ Movie(name: â€œCitizen Kaneâ€, director: â€œOrson Wellesâ€), â€‹ Song(name: â€œThe One And Onlyâ€, artist: â€œChesney Hawkesâ€), â€‹ Song(name: â€œNever Gonna Give You Upâ€, artist: â€œRick Astleyâ€) ] &#x2F;&#x2F; the type of â€œlibraryâ€ is inferred to be [MediaItem] å­˜å‚¨åœ¨libraryä¸­çš„é¡¹ç›®ä»ç„¶æ˜¯å¹•åMovieå’ŒSongå®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨è¿­ä»£æ­¤æ•°ç»„çš„å†…å®¹ï¼Œåˆ™æ‚¨æ”¶åˆ°çš„é¡¹ç›®è¢«é”®å…¥ä¸ºMediaItemï¼Œè€Œä¸æ˜¯Movieæˆ–Songã€‚ä¸ºäº†å°†ä»–ä»¬ä½œä¸ºä»–ä»¬çš„åŸç”Ÿç±»å‹ï¼Œæ‚¨éœ€è¦æ£€æŸ¥ä»–ä»¬çš„ç±»å‹ï¼Œæˆ–å°†ä»–ä»¬é™ä¸ºå…¶ä»–ç±»å‹ï¼Œå¦‚ä¸‹æ‰€è¿°ã€‚ æ£€æŸ¥ç±»å‹ä½¿ç”¨ç±»å‹æ£€æŸ¥è¿ç®—ç¬¦ï¼ˆisï¼‰æ¥æ£€æŸ¥å®ä¾‹æ˜¯å¦å±äºç‰¹å®šå­ç±»ç±»å‹ã€‚å¦‚æœå®ä¾‹å±äºè¯¥å­ç±»ç±»å‹ï¼Œç±»å‹æ£€æŸ¥è¿ç®—ç¬¦è¿”å›trueï¼Œå¦‚æœä¸æ˜¯è¯¥å­ç±»ç±»å‹ï¼Œåˆ™è¿”å›falseã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸¤ä¸ªå˜é‡ï¼ŒmovieCountå’ŒsongCountï¼Œå®ƒä»¬è®¡ç®—libraryæ•°ç»„ä¸­çš„Movieå’ŒSongå®ä¾‹æ•°é‡ï¼š var movieCount &#x3D; 0 var songCount &#x3D; 0 for item in library { â€‹ if item is Movie { â€‹ movieCount +&#x3D; 1 â€‹ } else if item is Song { â€‹ songCount +&#x3D; 1 â€‹ } } print(â€œMedia library contains (movieCount) movies and (songCount) songsâ€) &#x2F;&#x2F; Prints â€œMedia library contains 2 movies and 3 songsâ€ æ­¤ç¤ºä¾‹è¿­ä»£libraryæ•°ç»„ä¸­çš„æ‰€æœ‰é¡¹ç›®ã€‚åœ¨æ¯æ¬¡ä¼ é€’ä¸­ï¼Œfor-inå¾ªç¯å°†itemå¸¸é‡è®¾ç½®ä¸ºæ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªMediaItemã€‚ item is Movieå¦‚æœå½“å‰MediaItemæ˜¯Movieå®ä¾‹ï¼Œåˆ™è¿”å›trueï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™è¿”å›falseã€‚åŒæ ·ï¼ŒitemisSongï¼Œæ£€æŸ¥é¡¹ç›®æ˜¯å¦æ˜¯Songå®ä¾‹ã€‚åœ¨for-inå¾ªç¯çš„æœ«å°¾ï¼ŒmovieCountå’ŒsongCountçš„å€¼åŒ…å«æ¯ç§ç±»å‹çš„MediaItemå®ä¾‹æ•°é‡ã€‚ å‹å€’ç‰¹å®šç±»ç±»å‹çš„å¸¸é‡æˆ–å˜é‡å®é™…ä¸Šå¯èƒ½æŒ‡å¹•åå­ç±»çš„å®ä¾‹ã€‚å¦‚æœæ‚¨è®¤ä¸ºæƒ…å†µå°±æ˜¯è¿™æ ·ï¼Œæ‚¨å¯ä»¥å°è¯•ä½¿ç”¨ç±»å‹è½¬æ¢è¿ç®—ç¬¦**é™åˆ°å­ç±»ç±»å‹ï¼ˆas?æˆ–è€…as!ï¼‰ã€‚ ç”±äºä¸‹è°ƒå¯èƒ½ä¼šå¤±è´¥ï¼Œç±»å‹è½¬æ¢è¿ç®—ç¬¦æœ‰ä¸¤ç§ä¸åŒçš„å½¢å¼ã€‚æ¡ä»¶å½¢å¼as?è¿”å›æ‚¨è¯•å›¾å‘ä¸‹è½¬æ¢çš„ç±»å‹çš„å¯é€‰å€¼ã€‚å¼ºè¿«å½¢å¼ï¼Œas!ï¼Œå°è¯•å‹å€’å’Œå¼ºè¿«å°†ç»“æœåŒ…è£…ä¸ºå•ä¸ªå¤åˆåŠ¨ä½œã€‚ ä½¿ç”¨ç±»å‹è½¬æ¢è¿ç®—ç¬¦çš„æ¡ä»¶å½¢å¼ï¼ˆas?ï¼‰å½“ä½ ä¸ç¡®å®šæ²®ä¸§çš„äººæ˜¯å¦ä¼šæˆåŠŸæ—¶ã€‚è¿™ç§å½¢å¼çš„è¿ç®—ç¬¦å°†å§‹ç»ˆè¿”å›ä¸€ä¸ªå¯é€‰å€¼ï¼Œå¦‚æœæ— æ³•è¿›è¡Œå‘ä¸‹è½¬æ¢ï¼Œè¯¥å€¼å°†ä¸ºnilã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿæ£€æŸ¥æ˜¯å¦æˆåŠŸä¸‹è°ƒã€‚ ä½¿ç”¨ç±»å‹è½¬æ¢è¿ç®—ç¬¦çš„å¼ºåˆ¶å½¢å¼ï¼ˆas!ï¼‰åªæœ‰å½“ä½ ç¡®ä¿¡æ²®ä¸§çš„äººä¼šæ°¸è¿œæˆåŠŸçš„æ—¶å€™ã€‚å¦‚æœæ‚¨å°è¯•å°†è¿™ç§å½¢å¼çš„è¿ç®—ç¬¦é™åˆ°é”™è¯¯çš„ç±»ç±»å‹ï¼Œå°†è§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚ ä»¥ä¸‹ç¤ºä¾‹å¯¹libraryä¸­çš„æ¯ä¸ªMediaItemè¿­ä»£ï¼Œå¹¶ä¸ºæ¯ä¸ªé¡¹ç›®æ‰“å°é€‚å½“çš„æè¿°ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œå®ƒéœ€è¦å°†æ¯ä¸ªé¡¹ç›®ä½œä¸ºçœŸæ­£çš„Movieæˆ–Songè®¿é—®ï¼Œè€Œä¸ä»…ä»…æ˜¯ä½œä¸ºMediaItemã€‚è¿™æ˜¯å¿…è¦çš„ï¼Œè¿™æ ·å®ƒæ‰èƒ½è®¿é—®Movieæˆ–Songçš„directoræˆ–artistå±æ€§ï¼Œä»¥ä¾¿åœ¨æè¿°ä¸­ä½¿ç”¨ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹ç›®å¯èƒ½æ˜¯Movieï¼Œä¹Ÿå¯èƒ½æ˜¯Songã€‚æ‚¨äº‹å…ˆä¸çŸ¥é“æ¯ä¸ªé¡¹ç›®åº”ä½¿ç”¨å“ªä¸ªå®é™…ç±»ï¼Œå› æ­¤ä½¿ç”¨ç±»å‹è½¬æ¢è¿ç®—ç¬¦çš„æ¡ä»¶å½¢å¼æ˜¯åˆé€‚çš„ï¼ˆas?ï¼‰æ¯æ¬¡é€šè¿‡å¾ªç¯æ£€æŸ¥é™å‹ï¼š for item in library { â€‹ if let movie &#x3D; item as? Movie { â€‹ print(â€œMovie: (movie.name), dir. (movie.director)â€) â€‹ } else if let song &#x3D; item as? Song { â€‹ print(â€œSong: (song.name), by (song.artist)â€) â€‹ } } &#x2F;&#x2F; Movie: Casablanca, dir. Michael Curtiz &#x2F;&#x2F; Song: Blue Suede Shoes, by Elvis Presley &#x2F;&#x2F; Movie: Citizen Kane, dir. Orson Welles &#x2F;&#x2F; Song: The One And Only, by Chesney Hawkes &#x2F;&#x2F; Song: Never Gonna Give You Up, by Rick Astley è¯¥ç¤ºä¾‹é¦–å…ˆå°è¯•å°†å½“å‰itemé™ä¸ºMovieã€‚å› ä¸ºitemæ˜¯MediaItemå®ä¾‹ï¼Œæ‰€ä»¥å®ƒå¯èƒ½æ˜¯ä¸€éƒ¨Movieï¼›åŒæ ·ï¼Œå®ƒä¹Ÿå¯èƒ½æ˜¯ä¸€é¦–Songï¼Œç”šè‡³åªæ˜¯ä¸€ä¸ªåŸºæœ¬çš„MediaItemã€‚å› ä¸ºè¿™ç§ä¸ç¡®å®šæ€§ï¼Œas?å½“å°è¯•å°†ç±»å‹è½¬æ¢ä¸ºå­ç±»ç±»å‹æ—¶ï¼Œç±»å‹è½¬æ¢è¿ç®—ç¬¦çš„å½¢å¼è¿”å›ä¸€ä¸ªå¯é€‰å€¼ã€‚itemçš„ç»“æœas?Movieç±»å‹ä¸ºMovie?ï¼Œæˆ–â€œå¯é€‰Movieâ€ã€‚ å½“åº”ç”¨äºåº“æ•°ç»„ä¸­Songå®ä¾‹æ—¶ï¼Œå°†å‘ä¸‹è½¬æ¢åˆ°Movieå¤±è´¥ã€‚ä¸ºäº†åº”å¯¹è¿™ç§æƒ…å†µï¼Œä¸Šé¢çš„ç¤ºä¾‹ä½¿ç”¨å¯é€‰ç»‘å®šæ¥æ£€æŸ¥å¯é€‰Movieæ˜¯å¦çœŸçš„åŒ…å«ä¸€ä¸ªå€¼ï¼ˆå³æ‰¾å‡ºè¢«å…³é—­çš„ç‰ˆæœ¬æ˜¯å¦æˆåŠŸï¼‰ã€‚è¿™ä¸ªå¯é€‰ç»‘å®šå†™ä¸ºâ€œifletmovie=itemas?Movieâ€ï¼Œå¯ä»¥è¯»ä½œï¼š â€œå°è¯•å°†itemä½œä¸ºMovieè®¿é—®ã€‚å¦‚æœæˆåŠŸï¼Œè¯·å°†åä¸ºmovieçš„æ–°ä¸´æ—¶å¸¸é‡è®¾ç½®ä¸ºå­˜å‚¨åœ¨è¿”å›çš„å¯é€‰Movieä¸­çš„å€¼ã€‚â€ å¦‚æœå‹åˆ¶æˆåŠŸï¼Œåˆ™ä½¿ç”¨movieçš„å±æ€§æ¥æ‰“å°è¯¥Movieå®ä¾‹çš„æè¿°ï¼ŒåŒ…æ‹¬å…¶directorçš„å§“åã€‚ç±»ä¼¼çš„åŸåˆ™ç”¨äºæ£€æŸ¥Songå®ä¾‹ï¼Œå¹¶åœ¨åº“ä¸­æ‰¾åˆ°Songæ—¶æ‰“å°é€‚å½“çš„æè¿°ï¼ˆåŒ…æ‹¬artistå§“åï¼‰ã€‚ æ³¨æ„ é“¸é€ å®é™…ä¸Šä¸ä¼šä¿®æ”¹å®ä¾‹æˆ–æ›´æ”¹å…¶å€¼ã€‚åŸºç¡€å®ä¾‹ä¿æŒä¸å˜ï¼›å®ƒåªæ˜¯ä½œä¸ºå…¶è¢«è½¬æ¢åˆ°çš„ç±»å‹çš„å®ä¾‹è¿›è¡Œå¤„ç†å’Œè®¿é—®ã€‚ ä»»ä½•å’ŒAnyObjectçš„ç±»å‹é“¸é€ Swift æä¾›äº†ä¸¤ç§ç‰¹æ®Šç±»å‹ï¼Œç”¨äºå¤„ç†éç‰¹å®šç±»å‹ï¼š Anyå¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹çš„å®ä¾‹ï¼ŒåŒ…æ‹¬å‡½æ•°ç±»å‹ã€‚ AnyObjectå¯ä»¥è¡¨ç¤ºä»»ä½•ç±»ç±»å‹çš„å®ä¾‹ã€‚ ä»…å½“æ‚¨æ˜ç¡®éœ€è¦å®ƒä»¬æä¾›çš„è¡Œä¸ºå’ŒåŠŸèƒ½æ—¶ï¼Œæ‰ä½¿ç”¨Anyå’ŒAnyObjectã€‚æœ€å¥½å…·ä½“è¯´æ˜æ‚¨å¸Œæœ›åœ¨ä»£ç ä¸­ä½¿ç”¨çš„ç±»å‹ã€‚ ä»¥ä¸‹æ˜¯ä½¿ç”¨Anyå¤„ç†ä¸åŒç±»å‹ç»„åˆçš„ç¤ºä¾‹ï¼ŒåŒ…æ‹¬å‡½æ•°ç±»å‹å’Œéç±»ç±»å‹ã€‚è¯¥ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªåä¸ºthingsçš„æ•°ç»„ï¼Œå¯ä»¥å­˜å‚¨ç±»å‹ä¸ºAnyçš„å€¼ï¼š var things: [Any] &#x3D; [] things.append(0) things.append(0.0) things.append(42) things.append(3.14159) things.append(â€œhelloâ€) things.append((3.0, 5.0)) things.append(Movie(name: â€œGhostbustersâ€, director: â€œIvan Reitmanâ€)) things.append({ (name: String) -&gt; String in â€œHello, (name)â€ }) thingsæ•°ç»„åŒ…å«ä¸¤ä¸ªIntå€¼ã€ä¸¤ä¸ªDoubleå€¼ã€ä¸€ä¸ªStringå€¼ã€ä¸€ä¸ªç±»å‹çš„å…ƒç»„(Double,Double)ç”µå½±â€œGhostbustersâ€å’Œä¸€ä¸ªæ¥å—Stringå€¼å¹¶è¿”å›å¦ä¸€ä¸ªStringå€¼çš„é—­åŒ…è¡¨è¾¾å¼ã€‚ To discover the specific type of a constant or variable thatâ€™s known only to be of type Any or AnyObject, you can use an is or as pattern in a switch statementâ€™s cases. The example below iterates over the items in the things array and queries the type of each item with a switch statement. Several of the switch statementâ€™s cases bind their matched value to a constant of the specified type to enable its value to be printed: for thing in things { â€‹ switch thing { â€‹ case 0 as Int: â€‹ print(â€œzero as an Intâ€) â€‹ case 0 as Double: â€‹ print(â€œzero as a Doubleâ€) â€‹ case let someInt as Int: â€‹ print(â€œan integer value of (someInt)â€) â€‹ case let someDouble as Double where someDouble &gt; 0: â€‹ print(â€œa positive double value of (someDouble)â€) â€‹ case is Double: â€‹ print(â€œsome other double value that I donâ€™t want to printâ€) â€‹ case let someString as String: â€‹ print(â€œa string value of &quot;(someString)&quot;â€œ) â€‹ case let (x, y) as (Double, Double): â€‹ print(â€œan (x, y) point at (x), (y)â€) â€‹ case let movie as Movie: â€‹ print(â€œa movie called (movie.name), dir. (movie.director)â€) â€‹ case let stringConverter as (String) -&gt; String: â€‹ print(stringConverter(â€œMichaelâ€)) â€‹ default: â€‹ print(â€œsomething elseâ€) â€‹ } } &#x2F;&#x2F; zero as an Int &#x2F;&#x2F; zero as a Double &#x2F;&#x2F; an integer value of 42 &#x2F;&#x2F; a positive double value of 3.14159 &#x2F;&#x2F; a string value of â€œhelloâ€ &#x2F;&#x2F; an (x, y) point at 3.0, 5.0 &#x2F;&#x2F; a movie called Ghostbusters, dir. Ivan Reitman &#x2F;&#x2F; Hello, Michael æ³¨æ„ Anyç±»å‹è¡¨ç¤ºä»»ä½•ç±»å‹çš„å€¼ï¼ŒåŒ…æ‹¬å¯é€‰ç±»å‹ã€‚å¦‚æœæ‚¨ä½¿ç”¨å¯é€‰å€¼ï¼Œå…¶ä¸­éœ€è¦Anyç±»å‹çš„å€¼ï¼ŒSwiftä¼šå‘æ‚¨å‘å‡ºè­¦å‘Šã€‚å¦‚æœæ‚¨ç¡®å®éœ€è¦å°†å¯é€‰å€¼ç”¨ä½œAnyå€¼ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨asè¿ç®—ç¬¦å°†å¯é€‰å€¼æ˜¾å¼è½¬æ¢ä¸ºAnyï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ let optionalNumber: Int? &#x3D; 3 things.append(optionalNumber) &#x2F;&#x2F; Warning things.append(optionalNumber as Any) &#x2F;&#x2F; No warning","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ ç»“æ„å’Œç±»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-ç»“æ„å’Œç±»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.294Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-ç»“æ„å’Œç±»/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E7%BB%93%E6%9E%84%E5%92%8C%E7%B1%BB/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/ClassesAndStructures.html ç»“æ„å’Œç±»æ˜¯é€šç”¨çš„ã€çµæ´»çš„ç»“æ„ï¼Œæˆä¸ºç¨‹åºä»£ç çš„æ„å»ºå—ã€‚æ‚¨å®šä¹‰å±æ€§å’Œæ–¹æ³•ï¼Œä½¿ç”¨å®šä¹‰å¸¸é‡ã€å˜é‡å’Œå‡½æ•°çš„ç›¸åŒè¯­æ³•ä¸ºç»“æ„å’Œç±»æ·»åŠ åŠŸèƒ½ã€‚ ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸åŒï¼ŒSwiftä¸è¦æ±‚æ‚¨ä¸ºè‡ªå®šä¹‰ç»“æ„å’Œç±»åˆ›å»ºå•ç‹¬çš„æ¥å£å’Œå®ç°æ–‡ä»¶ã€‚åœ¨Swiftä¸­ï¼Œæ‚¨åœ¨å•ä¸ªæ–‡ä»¶ä¸­å®šä¹‰ç»“æ„æˆ–ç±»ï¼Œè¯¥ç±»æˆ–ç»“æ„çš„å¤–éƒ¨æ¥å£ä¼šè‡ªåŠ¨ä¾›å…¶ä»–ä»£ç ä½¿ç”¨ã€‚ æ³¨æ„ ç±»çš„å®ä¾‹ä¼ ç»Ÿä¸Šè¢«ç§°ä¸ºå¯¹è±¡ã€‚ç„¶è€Œï¼Œä¸å…¶ä»–è¯­è¨€ç›¸æ¯”ï¼ŒSwiftç»“æ„å’Œç±»çš„åŠŸèƒ½è¦æ¥è¿‘å¾—å¤šï¼Œæœ¬ç« çš„å¤§éƒ¨åˆ†å†…å®¹æè¿°äº†é€‚ç”¨äºç±»æˆ–ç»“æ„ç±»å‹çš„å®ä¾‹çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œä½¿ç”¨äº†æ›´é€šç”¨çš„æœ¯è¯­å®ä¾‹ã€‚ æ¯”è¾ƒç»“æ„å’Œç±»Swiftä¸­çš„ç»“æ„å’Œç±»æœ‰å¾ˆå¤šå…±åŒç‚¹ã€‚ä¸¤è€…éƒ½å¯ä»¥ï¼š å®šä¹‰å±æ€§ä»¥å­˜å‚¨å€¼ å®šä¹‰æä¾›åŠŸèƒ½çš„æ–¹æ³• å®šä¹‰ä¸‹æ ‡ï¼Œä»¥ä½¿ç”¨ä¸‹æ ‡è¯­æ³•æä¾›å¯¹å…¶å€¼çš„è®¿é—® å®šä¹‰åˆå§‹åŒ–å™¨ä»¥è®¾ç½®å…¶åˆå§‹çŠ¶æ€ æ‰©å±•ä»¥å°†å…¶åŠŸèƒ½æ‰©å±•åˆ°é»˜è®¤å®ç°ä¹‹å¤– ç¬¦åˆåè®®ï¼Œæä¾›æŸç§ç±»å‹çš„æ ‡å‡†åŠŸèƒ½ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å±æ€§ã€æ–¹æ³•ã€ä¸‹æ ‡ã€åˆå§‹åŒ–ã€æ‰©å±•å’Œåè®®ã€‚ ç±»å…·æœ‰ç»“æ„æ‰€æ²¡æœ‰çš„é¢å¤–åŠŸèƒ½ï¼š ç»§æ‰¿ä½¿ä¸€ä¸ªç±»ç»§æ‰¿å¦ä¸€ä¸ªç±»çš„ç‰¹å¾ã€‚ ç±»å‹è½¬æ¢ä½¿æ‚¨å¯ä»¥åœ¨è¿è¡Œæ—¶æ£€æŸ¥å’Œè§£é‡Šç±»å®ä¾‹çš„ç±»å‹ã€‚ å»åˆå§‹åŒ–å™¨ä½¿ç±»çš„å®ä¾‹èƒ½å¤Ÿé‡Šæ”¾å…¶åˆ†é…çš„ä»»ä½•èµ„æºã€‚ å¼•ç”¨è®¡æ•°å…è®¸å¯¹ç±»å®ä¾‹è¿›è¡Œå¤šä¸ªå¼•ç”¨ã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ç»§æ‰¿ã€ç±»å‹é“¸é€ ã€å»åˆå§‹åŒ–å’Œè‡ªåŠ¨å¼•ç”¨è®¡æ•°ã€‚ ç±»æ”¯æŒçš„é¢å¤–åŠŸèƒ½ä»¥å¢åŠ å¤æ‚æ€§ä¸ºä»£ä»·ã€‚ä½œä¸ºä¸€èˆ¬å‡†åˆ™ï¼Œæ›´å–œæ¬¢ç»“æ„ï¼Œå› ä¸ºå®ƒä»¬æ›´å®¹æ˜“æ¨ç†ï¼Œå¹¶åœ¨é€‚å½“æˆ–å¿…è¦æ—¶ä½¿ç”¨ç±»ã€‚åœ¨å®è·µä¸­ï¼Œè¿™æ„å‘³ç€æ‚¨å®šä¹‰çš„å¤§å¤šæ•°è‡ªå®šä¹‰æ•°æ®ç±»å‹å°†æ˜¯ç»“æ„å’Œæšä¸¾ã€‚æœ‰å…³æ›´è¯¦ç»†çš„æ¯”è¾ƒï¼Œè¯·å‚é˜…åœ¨ç»“æ„å’Œç±»ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚ æ³¨æ„ ç­çº§å’Œæ¼”å‘˜æœ‰è®¸å¤šç›¸åŒçš„ç‰¹å¾å’Œè¡Œä¸ºã€‚æœ‰å…³æ¼”å‘˜çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…å¹¶å‘ã€‚ å®šä¹‰è¯­æ³•ç»“æ„å’Œç±»å…·æœ‰ç›¸ä¼¼çš„å®šä¹‰è¯­æ³•ã€‚æ‚¨å¼•å…¥äº†å¸¦æœ‰structå…³é”®å­—çš„ç»“æ„å’Œå¸¦æœ‰classå…³é”®å­—çš„ç±»ã€‚ä¸¤è€…éƒ½å°†æ•´ä¸ªå®šä¹‰æ”¾åœ¨ä¸€å¯¹å¤§æ‹¬å·ä¸­ï¼š 123456struct SomeStructure &#123; // structure definition goes here&#125;class SomeClass &#123; // class definition goes here&#125; æ³¨æ„ æ— è®ºä½•æ—¶å®šä¹‰ä¸€ä¸ªæ–°çš„ç»“æ„æˆ–ç±»ï¼Œéƒ½è¦å®šä¹‰ä¸€ä¸ªæ–°çš„Swiftç±»å‹ã€‚ç»™ç±»å‹å‘½åä¸ºâ€˜UpperCamelCaseâ€™(æ¯”å¦‚è¿™é‡Œçš„â€˜SomeStructureâ€™å’Œâ€˜SomeClassâ€™)ï¼Œä»¥åŒ¹é…æ ‡å‡†Swiftç±»å‹(æ¯”å¦‚â€˜Stringâ€™ï¼Œâ€˜Intâ€™å’Œâ€˜Boolâ€™)çš„å¤§å°å†™ã€‚å°†å±æ€§å’Œæ–¹æ³•å‘½åä¸ºâ€œlowerCamelCaseâ€(ä¾‹å¦‚â€œframeRateâ€å’Œâ€œincrementCountâ€)ï¼Œä»¥åŒºåˆ«äºç±»å‹åç§°ã€‚ ä»¥ä¸‹æ˜¯ç»“æ„å®šä¹‰å’Œç±»å®šä¹‰çš„ç¤ºä¾‹ï¼š 12345678910struct Resolution &#123; var width = 0 var height = 0&#125;class VideoMode &#123; var resolution = Resolution() var interlaced = false var frameRate = 0.0 var name: String?&#125; ä¸Šé¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºResolutionçš„æ–°ç»“æ„ï¼Œä»¥æè¿°åŸºäºåƒç´ çš„æ˜¾ç¤ºåˆ†è¾¨ç‡ã€‚è¿™ç§ç»“æ„æœ‰ä¸¤ä¸ªå­˜å‚¨å±æ€§ï¼Œç§°ä¸ºwidthå’Œheightã€‚å­˜å‚¨å±æ€§æ˜¯æ†ç»‘å¹¶ä½œä¸ºç»“æ„æˆ–ç±»çš„ä¸€éƒ¨åˆ†å­˜å‚¨çš„å¸¸é‡æˆ–å˜é‡ã€‚é€šè¿‡å°†è¿™ä¸¤ä¸ªå±æ€§è®¾ç½®ä¸ºåˆå§‹æ•´æ•°å€¼ä¸º0ï¼Œå¯ä»¥æ¨æ–­ä¸ºIntç±»å‹ã€‚ ä¸Šé¢çš„ç¤ºä¾‹è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸ºVideoModeçš„æ–°ç±»ï¼Œä»¥æè¿°è§†é¢‘æ˜¾ç¤ºçš„ç‰¹å®šè§†é¢‘æ¨¡å¼ã€‚è¯¥ç±»æœ‰å››ä¸ªå˜é‡å­˜å‚¨å±æ€§ã€‚ç¬¬ä¸€ä¸ªï¼Œresolutionï¼Œç”¨ä¸€ä¸ªæ–°çš„Resolutionç»“æ„å®ä¾‹åˆå§‹åŒ–ï¼Œè¯¥å®ä¾‹æ¨æ–­å‡ºResolutionçš„å±æ€§ç±»å‹ã€‚å¯¹äºå…¶ä»–ä¸‰ä¸ªå±æ€§ï¼Œæ–°çš„VideoModeå®ä¾‹å°†åˆå§‹åŒ–ä¸ºfalseçš„interlacedè®¾ç½®ï¼ˆæ„æ€æ˜¯â€œééš”è¡Œè§†é¢‘â€ï¼‰ï¼Œæ’­æ”¾å¸§é€Ÿç‡ä¸º0.0ï¼Œä»¥åŠåä¸ºnameçš„å¯é€‰Stringå€¼ã€‚nameå±æ€§ä¼šè‡ªåŠ¨è¢«èµ‹äºˆnilçš„é»˜è®¤å€¼æˆ–â€œæ— nameå€¼â€ï¼Œå› ä¸ºå®ƒæ˜¯å¯é€‰ç±»å‹ã€‚ ç»“æ„å’Œç±»å®ä¾‹â€˜ Resolution â€˜ç»“æ„å®šä¹‰å’Œâ€™ VideoMode â€˜ç±»å®šä¹‰åªæè¿°äº†â€™ Resolution â€˜æˆ–â€™ VideoMode â€˜çš„å¤–è§‚ã€‚å®ƒä»¬æœ¬èº«å¹¶ä¸æè¿°ç‰¹å®šçš„åˆ†è¾¨ç‡æˆ–è§†é¢‘æ¨¡å¼ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦åˆ›å»ºç»“æ„æˆ–ç±»çš„å®ä¾‹ã€‚ åˆ›å»ºå®ä¾‹çš„è¯­æ³•å¯¹ç»“æ„å’Œç±»éƒ½éå¸¸ç›¸ä¼¼ï¼š 12let someResolution = Resolution()let someVideoMode = VideoMode() ç»“æ„å’Œç±»éƒ½å¯¹æ–°å®ä¾‹ä½¿ç”¨åˆå§‹åŒ–å™¨è¯­æ³•ã€‚æœ€ç®€å•çš„åˆå§‹åŒ–å™¨è¯­æ³•å½¢å¼ä½¿ç”¨ç±»æˆ–ç»“æ„çš„ç±»å‹åç§°ï¼Œåè·Ÿç©ºæ‹¬å·ï¼Œå¦‚Resolution()æˆ–VideoMode()ã€‚è¿™ä¼šåˆ›å»ºä¸€ä¸ªç±»æˆ–ç»“æ„çš„æ–°å®ä¾‹ï¼Œä»»ä½•å±æ€§éƒ½åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ã€‚ç±»å’Œç»“æ„åˆå§‹åŒ–åœ¨åˆå§‹åŒ–ä¸­è¿›è¡Œäº†æ›´è¯¦ç»†çš„æè¿°ã€‚ è®¿é—®å±æ€§æ‚¨å¯ä»¥ä½¿ç”¨ç‚¹è¯­æ³•è®¿é—®å®ä¾‹çš„å±æ€§ã€‚åœ¨ç‚¹è¯­æ³•ä¸­ï¼Œæ‚¨ç«‹å³åœ¨å®ä¾‹åç§°ä¹‹åå†™å…¥å±æ€§åç§°ï¼Œç”¨å¥ç‚¹ï¼ˆ.ï¼‰åˆ†éš”ï¼Œæ²¡æœ‰ä»»ä½•ç©ºæ ¼ï¼š 12print(&quot;The width of someResolution is \\(someResolution.width)&quot;)// Prints &quot;The width of someResolution is 0&quot; åœ¨æœ¬ä¾‹ä¸­ï¼ŒsomeResolution.widthå¼•ç”¨someResolutionçš„widthå±æ€§ï¼Œå¹¶è¿”å›å…¶é»˜è®¤åˆå§‹å€¼0ã€‚ æ‚¨å¯ä»¥æ·±å…¥äº†è§£å­å±æ€§ï¼Œä¾‹å¦‚VideoMode``resolutionå±æ€§ä¸­çš„widthå±æ€§ï¼š 12print(&quot;The width of someVideoMode is \\(someVideoMode.resolution.width)&quot;)// Prints &quot;The width of someVideoMode is 0&quot; æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ç‚¹è¯­æ³•ä¸ºå˜é‡å±æ€§åˆ†é…æ–°å€¼ï¼š 123someVideoMode.resolution.width = 1280print(&quot;The width of someVideoMode is now \\(someVideoMode.resolution.width)&quot;)// Prints &quot;The width of someVideoMode is now 1280&quot; ç»“æ„ç±»å‹çš„æˆå‘˜åˆå§‹åŒ–å™¨æ‰€æœ‰ç»“æ„éƒ½æœ‰ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„æŒ‰æˆå‘˜åˆå§‹åŒ–å™¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒåˆå§‹åŒ–æ–°ç»“æ„å®ä¾‹çš„æˆå‘˜å±æ€§ã€‚æ–°å®ä¾‹å±æ€§çš„åˆå§‹å€¼å¯ä»¥é€šè¿‡åç§°ä¼ é€’ç»™æˆå‘˜åˆå§‹åŒ–å™¨ï¼š 1let vga = Resolution(width: 640, height: 480) ä¸ç»“æ„ä¸åŒï¼Œç±»å®ä¾‹ä¸ä¼šæ”¶åˆ°é»˜è®¤çš„æŒ‰æˆå‘˜åˆå§‹åŒ–å™¨ã€‚åˆå§‹åŒ–å™¨åœ¨åˆå§‹åŒ–ä¸­è¿›è¡Œäº†æ›´è¯¦ç»†çš„æè¿°ã€‚ ç»“æ„å’Œæšä¸¾æ˜¯å€¼ç±»å‹å€¼ç±»å‹æ˜¯ä¸€ç§ç±»å‹ï¼Œå…¶å€¼åœ¨åˆ†é…ç»™å˜é‡æˆ–å¸¸é‡æ—¶ï¼Œæˆ–å½“ä¼ é€’ç»™å‡½æ•°æ—¶è¢«å¤åˆ¶ã€‚ åœ¨å‰å‡ ç« ä¸­ï¼Œæ‚¨å®é™…ä¸Šä¸€ç›´åœ¨å¹¿æ³›ä½¿ç”¨å€¼ç±»å‹ã€‚äº‹å®ä¸Šï¼ŒSwiftä¸­çš„æ‰€æœ‰åŸºæœ¬ç±»å‹â€”â€”æ•´æ•°ã€æµ®ç‚¹æ•°ã€å¸ƒå°”å€¼ã€å­—ç¬¦ä¸²ã€æ•°ç»„å’Œå­—å…¸â€”â€”éƒ½æ˜¯å€¼ç±»å‹ï¼Œå¹¶ä½œä¸ºå¹•åç»“æ„å®ç°ã€‚ æ‰€æœ‰ç»“æ„å’Œæšä¸¾éƒ½æ˜¯Swiftä¸­çš„å€¼ç±»å‹ã€‚è¿™æ„å‘³ç€ï¼Œæ‚¨åˆ›å»ºçš„ä»»ä½•ç»“æ„å’Œæšä¸¾å®ä¾‹ï¼Œä»¥åŠå®ƒä»¬ä½œä¸ºå±æ€§çš„ä»»ä½•å€¼ç±»å‹ï¼Œåœ¨ä»£ç ä¸­ä¼ é€’æ—¶ï¼Œæ€»æ˜¯ä¼šè¢«å¤åˆ¶ã€‚ æ³¨æ„ æ ‡å‡†åº“å®šä¹‰çš„é›†åˆï¼Œå¦‚æ•°ç»„ã€å­—å…¸å’Œå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ä¼˜åŒ–æ¥é™ä½å¤åˆ¶çš„æ€§èƒ½æˆæœ¬ã€‚è¿™äº›é›†åˆä¸æ˜¯ç«‹å³å¤åˆ¶ï¼Œè€Œæ˜¯å…±äº«å†…å­˜ï¼Œå…¶ä¸­å…ƒç´ å­˜å‚¨åœ¨åŸå§‹å®ä¾‹å’Œä»»ä½•å‰¯æœ¬ä¹‹é—´ã€‚å¦‚æœé›†åˆçš„å‰¯æœ¬ä¹‹ä¸€è¢«ä¿®æ”¹ï¼Œåˆ™åœ¨ä¿®æ”¹å‰å¤åˆ¶å…ƒç´ ã€‚æ‚¨åœ¨ä»£ç ä¸­çœ‹åˆ°çš„è¡Œä¸ºæ€»æ˜¯åƒæ˜¯ç«‹å³å¤åˆ¶ä¸€æ ·ã€‚ è€ƒè™‘è¿™ä¸ªä¾‹å­ï¼Œå®ƒä½¿ç”¨ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­çš„Resolutionç»“æ„ï¼š 12let hd = Resolution(width: 1920, height: 1080)var cinema = hd æ­¤ç¤ºä¾‹å£°æ˜ä¸€ä¸ªåä¸ºhdå¸¸é‡ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºä½¿ç”¨å…¨é«˜æ¸…è§†é¢‘çš„å®½åº¦å’Œé«˜åº¦åˆå§‹åŒ–çš„Resolutionå®ä¾‹ï¼ˆ1920åƒç´ å®½ï¼Œé«˜1080åƒç´ ï¼‰ã€‚ ç„¶åï¼Œå®ƒå£°æ˜ä¸€ä¸ªåä¸ºcinemaçš„å˜é‡ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºhdçš„å½“å‰å€¼ã€‚å› ä¸ºResolutionæ˜¯ä¸€ä¸ªç»“æ„ï¼Œæ‰€ä»¥åˆ¶ä½œäº†ç°æœ‰å®ä¾‹çš„å‰¯æœ¬ï¼Œå¹¶å°†è¿™ä¸ªæ–°å‰¯æœ¬åˆ†é…ç»™cinemaã€‚å°½ç®¡hd``cinemaç°åœ¨å…·æœ‰ç›¸åŒçš„å®½åº¦å’Œé«˜åº¦ï¼Œä½†å®ƒä»¬æ˜¯å¹•åä¸¤ä¸ªå®Œå…¨ä¸åŒçš„å®ä¾‹ã€‚ æ¥ä¸‹æ¥ï¼Œcinemaçš„widthå±æ€§è¢«ä¿®æ”¹ä¸ºç”¨äºæ•°å­—å½±é™¢æŠ•å½±çš„ç¨å®½çš„2Kæ ‡å‡†çš„å®½åº¦ï¼ˆå®½2048åƒç´ ï¼Œé«˜1080åƒç´ ï¼‰ï¼š 1cinema.width = 2048 æ£€æŸ¥cinemaçš„widthå±æ€§è¡¨æ˜ï¼Œå®ƒç¡®å®å˜æˆäº†2048ï¼š 12print(&quot;cinema is now \\(cinema.width) pixels wide&quot;)// Prints &quot;cinema is now 2048 pixels wide&quot; ç„¶è€Œï¼ŒåŸå§‹hdå®ä¾‹çš„widthå±æ€§ä»ç„¶å…·æœ‰1920å¹´çš„æ—§å€¼ï¼š 12print(&quot;hd is still \\(hd.width) pixels wide&quot;)// Prints &quot;hd is still 1920 pixels wide&quot; å½“ç»™cinemaå½“å‰hdå€¼æ—¶ï¼Œå­˜å‚¨åœ¨hdä¸­çš„å€¼è¢«å¤åˆ¶åˆ°æ–°çš„cinemaå®ä¾‹ä¸­ã€‚æœ€ç»ˆç»“æœæ˜¯ä¸¤ä¸ªå®Œå…¨ç‹¬ç«‹çš„å®ä¾‹ï¼Œå…¶ä¸­åŒ…å«ç›¸åŒçš„æ•°å­—å€¼ã€‚ç„¶è€Œï¼Œç”±äºå®ƒä»¬æ˜¯å•ç‹¬çš„å®ä¾‹ï¼Œå°†cinemaçš„å®½åº¦è®¾ç½®ä¸º2048ä¸ä¼šå½±å“å­˜å‚¨åœ¨hdä¸­çš„å®½åº¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åŒæ ·çš„è¡Œä¸ºä¹Ÿé€‚ç”¨äºæšä¸¾ï¼š 1234567891011121314enum CompassPoint &#123; case north, south, east, west mutating func turnNorth() &#123; self = .north &#125;&#125;var currentDirection = CompassPoint.westlet rememberedDirection = currentDirectioncurrentDirection.turnNorth()print(&quot;The current direction is \\(currentDirection)&quot;)print(&quot;The remembered direction is \\(rememberedDirection)&quot;)// Prints &quot;The current direction is north&quot;// Prints &quot;The remembered direction is west&quot; å½“rememberedDirectionè¢«åˆ†é…åˆ°currentDirectionçš„å€¼æ—¶ï¼Œå®ƒå®é™…ä¸Šè¢«è®¾ç½®ä¸ºè¯¥å€¼çš„å‰¯æœ¬ã€‚æ­¤åæ›´æ”¹currentDirectionçš„å€¼ä¸ä¼šå½±å“å­˜å‚¨åœ¨rememberedDirectionä¸­çš„åŸå§‹å€¼çš„å‰¯æœ¬ã€‚ ç±»æ˜¯å‚è€ƒç±»å‹ä¸å€¼ç±»å‹ä¸åŒï¼Œå¼•ç”¨ç±»å‹åœ¨åˆ†é…ç»™å˜é‡æˆ–å¸¸é‡æˆ–ä¼ é€’ç»™å‡½æ•°æ—¶ä¸ä¼šå¤åˆ¶ã€‚ä½¿ç”¨å¯¹ç›¸åŒç°æœ‰å®ä¾‹çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å‰¯æœ¬ã€‚ ä»¥ä¸‹æ˜¯ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„VideoModeç±»çš„ç¤ºä¾‹ï¼š 12345let tenEighty = VideoMode()tenEighty.resolution = hdtenEighty.interlaced = truetenEighty.name = &quot;1080i&quot;tenEighty.frameRate = 25.0 è¿™ä¸ªä¾‹å­å£°æ˜äº†ä¸€ä¸ªåä¸ºâ€™ ten80 â€˜çš„æ–°å¸¸é‡ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºæŒ‡å‘â€™ VideoMode â€˜ç±»çš„ä¸€ä¸ªæ–°å®ä¾‹ã€‚è§†é¢‘æ¨¡å¼è¢«åˆ†é…ä¸€ä¸ªä»¥å‰çš„é«˜æ¸…åˆ†è¾¨ç‡â€œ1920â€åˆ°â€œ1080â€çš„å‰¯æœ¬ã€‚å®ƒè¢«è®¾ç½®ä¸ºäº¤é”™ï¼Œå®ƒçš„åç§°è¢«è®¾ç½®ä¸ºâ€˜1080iâ€™ï¼Œå®ƒçš„å¸§é€Ÿç‡è¢«è®¾ç½®ä¸ºâ€˜25.0â€™å¸§æ¯ç§’ã€‚ æ¥ä¸‹æ¥ï¼ŒtenEightyåˆ†é…ç»™ä¸€ä¸ªæ–°çš„å¸¸é‡ï¼Œç§°ä¸ºalsoTenEightyï¼Œå¹¶ä¿®æ”¹äº†alsoTenEightyå¸§é€Ÿç‡ï¼š 12let alsoTenEighty = tenEightyalsoTenEighty.frameRate = 30.0 ç”±äºç±»æ˜¯å¼•ç”¨ç±»å‹ï¼ŒtenEightyå’ŒalsoTenEightyå®é™…ä¸Šéƒ½å¼•ç”¨åŒä¸€ä¸ªVideoModeå®ä¾‹ã€‚å®é™…ä¸Šï¼Œå®ƒä»¬åªæ˜¯åŒä¸€å•ä¸ªå®ä¾‹çš„ä¸¤ä¸ªä¸åŒåç§°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ£€æŸ¥tenEightyçš„frameRateå±æ€§è¡¨æ˜ï¼Œå®ƒä»åº•å±‚VideoModeå®ä¾‹æ­£ç¡®æŠ¥å‘Šäº†30.0çš„æ–°å¸§é€Ÿç‡ï¼š 12print(&quot;The frameRate property of tenEighty is now \\(tenEighty.frameRate)&quot;)// Prints &quot;The frameRate property of tenEighty is now 30.0&quot; è¿™ä¸ªä¾‹å­è¿˜å±•ç¤ºäº†å¼•ç”¨ç±»å‹å¦‚ä½•æ›´éš¾æ¨ç†ã€‚å¦‚æœtenEightyå’ŒalsoTenEightyç¨‹åºçš„ä»£ç ä¸­ç›¸è·ç”šè¿œï¼Œå¯èƒ½å¾ˆéš¾æ‰¾åˆ°æ›´æ”¹è§†é¢‘æ¨¡å¼çš„æ‰€æœ‰æ–¹å¼ã€‚æ— è®ºä½ åœ¨å“ªé‡Œä½¿ç”¨tenEightyï¼Œä½ è¿˜å¿…é¡»è€ƒè™‘ä½¿ç”¨alsoTenEightyçš„ä»£ç ï¼Œåä¹‹äº¦ç„¶ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå€¼ç±»å‹æ›´å®¹æ˜“æ¨ç†ï¼Œå› ä¸ºæ‰€æœ‰ä¸ç›¸åŒå€¼äº¤äº’çš„ä»£ç éƒ½åœ¨æºæ–‡ä»¶ä¸­ç´§å¯†ç›¸è¿ã€‚ è¯·æ³¨æ„ï¼ŒtenEightyå’ŒalsoTenEightyè¢«å£°æ˜ä¸ºå¸¸é‡ï¼Œè€Œä¸æ˜¯å˜é‡ã€‚ä½†æ˜¯ï¼Œæ‚¨ä»ç„¶å¯ä»¥æ›´æ”¹tenEighty.frameRateå’ŒalsoTenEighty.frameRateï¼Œå› ä¸ºtenEightyå’ŒalsoTenEightyå¸¸é‡æœ¬èº«çš„å€¼å®é™…ä¸Šæ²¡æœ‰å˜åŒ–ã€‚tenEightyå’ŒalsoTenEightyæœ¬èº«ä¸ä¼šâ€œå­˜å‚¨â€VideoModeå®ä¾‹ï¼Œç›¸åï¼Œå®ƒä»¬éƒ½æŒ‡å¹•åVideoModeå®ä¾‹ã€‚æ›´æ”¹çš„æ˜¯åº•å±‚VideoModeçš„frameRateå±æ€§ï¼Œè€Œä¸æ˜¯å¯¹è¯¥VideoModeçš„å¸¸é‡å¼•ç”¨çš„å€¼ã€‚ èº«ä»½è¿ç®—ç¬¦ç”±äºç±»æ˜¯å¼•ç”¨ç±»å‹ï¼Œå› æ­¤å¤šä¸ªå¸¸é‡å’Œå˜é‡å¯ä»¥åœ¨å¹•åå¼•ç”¨ç±»çš„åŒä¸€å•ä¸ªå®ä¾‹ã€‚ï¼ˆç»“æ„å’Œæšä¸¾å¹¶éå¦‚æ­¤ï¼Œå› ä¸ºå®ƒä»¬åœ¨åˆ†é…ç»™å¸¸é‡æˆ–å˜é‡æˆ–ä¼ é€’ç»™å‡½æ•°æ—¶æ€»æ˜¯è¢«å¤åˆ¶ã€‚ï¼‰ æœ‰æ—¶ï¼Œæ‰¾å‡ºä¸¤ä¸ªå¸¸é‡æˆ–å˜é‡æ˜¯å¦å¼•ç”¨ä¸€ä¸ªç±»çš„å®Œå…¨ç›¸åŒçš„å®ä¾‹æ˜¯æœ‰ç”¨çš„ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼ŒSwiftæä¾›äº†ä¸¤ä¸ªèº«ä»½è¿ç®—ç¬¦ï¼š ç›¸åŒåˆ°ï¼ˆ===) Not identical to (!==) ä½¿ç”¨è¿™äº›è¿ç®—ç¬¦æ£€æŸ¥ä¸¤ä¸ªå¸¸é‡æˆ–å˜é‡æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå®ä¾‹ï¼š 1234if tenEighty === alsoTenEighty &#123; print(&quot;tenEighty and alsoTenEighty refer to the same VideoMode instance.&quot;)&#125;// Prints &quot;tenEighty and alsoTenEighty refer to the same VideoMode instance.&quot; è¯·æ³¨æ„ï¼Œç›¸åŒäºï¼ˆç”±ä¸‰ä¸ªç›¸ç­‰ç¬¦å·è¡¨ç¤ºï¼Œæˆ–===å¹¶ä¸æ„å‘³ç€ç­‰äºï¼ˆç”±ä¸¤ä¸ªç›¸ç­‰ç¬¦å·è¡¨ç¤ºï¼Œæˆ–==ç›¸åŒã€‚ä¸ç±»ç±»å‹çš„ä¸¤ä¸ªå¸¸é‡æˆ–å˜é‡å¼•ç”¨å®Œå…¨ç›¸åŒçš„ç±»å®ä¾‹ç›¸åŒã€‚ç­‰äºæ„å‘³ç€ä¸¤ä¸ªå®ä¾‹åœ¨å€¼ä¸Šè¢«è®¤ä¸ºæ˜¯ç›¸ç­‰æˆ–ç­‰ä»·çš„ï¼Œå¯¹äºç±»å‹è®¾è®¡å™¨å®šä¹‰çš„ç›¸ç­‰çš„é€‚å½“å«ä¹‰ã€‚ å½“æ‚¨å®šä¹‰è‡ªå·±çš„è‡ªå®šä¹‰ç»“æ„å’Œç±»æ—¶ï¼Œæ‚¨æœ‰è´£ä»»å†³å®šä»€ä¹ˆç¬¦åˆä¸¤ä¸ªç›¸ç­‰çš„æ¡ä»¶ã€‚å®šä¹‰è‡ªå·±å®ç°==å’Œçš„è¿‡ç¨‹!=è¿ç®—ç¬¦åœ¨ç­‰æ•ˆè¿ç®—ç¬¦ä¸­æè¿°ã€‚ æŒ‡é’ˆå¦‚æœæ‚¨æœ‰ä½¿ç”¨Cã€C++æˆ–Objective-Cçš„ç»éªŒï¼Œæ‚¨å¯èƒ½çŸ¥é“è¿™äº›è¯­è¨€ä½¿ç”¨æŒ‡é’ˆæ¥å¼•ç”¨å†…å­˜ä¸­çš„åœ°å€ã€‚å¼•ç”¨æŸäº›å¼•ç”¨ç±»å‹çš„å®ä¾‹çš„Swiftå¸¸é‡æˆ–å˜é‡ç±»ä¼¼äºCä¸­çš„æŒ‡é’ˆï¼Œä½†ä¸æ˜¯æŒ‡å‘å†…å­˜ä¸­åœ°å€çš„ç›´æ¥æŒ‡é’ˆï¼Œå¹¶ä¸”ä¸éœ€è¦æ‚¨ç¼–å†™æ˜Ÿå·ï¼ˆ*ï¼‰æ¥æŒ‡ç¤ºæ‚¨æ­£åœ¨åˆ›å»ºå¼•ç”¨ã€‚ç›¸åï¼Œè¿™äº›å¼•ç”¨çš„å®šä¹‰ä¸Swiftä¸­çš„ä»»ä½•å…¶ä»–å¸¸é‡æˆ–å˜é‡ä¸€æ ·ã€‚æ ‡å‡†åº“æä¾›äº†æŒ‡é’ˆå’Œç¼“å†²åŒºç±»å‹ï¼Œå¦‚æœæ‚¨éœ€è¦ç›´æ¥ä¸æŒ‡é’ˆäº¤äº’ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›ç±»å‹ï¼Œè¯·å‚é˜…æ‰‹åŠ¨å†…å­˜ç®¡ç†ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ ç»§æ‰¿","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-ç»§æ‰¿","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.294Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-ç»§æ‰¿/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E7%BB%A7%E6%89%BF/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Inheritance.html ä¸€ä¸ªç±»å¯ä»¥ä»å¦ä¸€ä¸ªç±»ç»§æ‰¿æ–¹æ³•ã€å±æ€§å’Œå…¶ä»–ç‰¹å¾ã€‚å½“ä¸€ä¸ªç±»ä»å¦ä¸€ä¸ªç±»ç»§æ‰¿æ—¶ï¼Œç»§æ‰¿ç±»è¢«ç§°ä¸ºå­ç±»ï¼Œå®ƒç»§æ‰¿çš„ç±»è¢«ç§°ä¸ºå…¶è¶…ç±»ã€‚ç»§æ‰¿æ˜¯ä¸€ç§åŸºæœ¬è¡Œä¸ºï¼Œå¯ä»¥å°†ç±»ä¸ Swift ä¸­çš„å…¶ä»–ç±»å‹åŒºåˆ†å¼€æ¥ã€‚ Swiftä¸­çš„ç±»å¯ä»¥è°ƒç”¨å’Œè®¿é—®å±äºå…¶è¶…ç±»çš„æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡ï¼Œå¹¶å¯ä»¥æä¾›è¿™äº›æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡çš„è¦†ç›–ç‰ˆæœ¬ï¼Œä»¥ç»†åŒ–æˆ–ä¿®æ”¹å…¶è¡Œä¸ºã€‚Swifté€šè¿‡æ£€æŸ¥è¦†ç›–å®šä¹‰æ˜¯å¦å…·æœ‰åŒ¹é…çš„è¶…ç±»å®šä¹‰æ¥å¸®åŠ©ç¡®ä¿æ‚¨çš„è¦†ç›–æ­£ç¡®ã€‚ ç±»è¿˜å¯ä»¥å°†å±æ€§è§‚å¯Ÿè€…æ·»åŠ åˆ°ç»§æ‰¿çš„å±æ€§ä¸­ï¼Œä»¥ä¾¿åœ¨å±æ€§å€¼å‘ç”Ÿå˜åŒ–æ—¶æ”¶åˆ°é€šçŸ¥ã€‚å±æ€§è§‚å¯Ÿè€…å¯ä»¥æ·»åŠ åˆ°ä»»ä½•å±æ€§ä¸­ï¼Œæ— è®ºå®ƒæœ€åˆæ˜¯å¦è¢«å®šä¹‰ä¸ºå­˜å‚¨æˆ–è®¡ç®—å±æ€§ã€‚ å®šä¹‰åŸºç±»ä»»ä½•ä¸ä»å¦ä¸€ä¸ªç±»ç»§æ‰¿çš„ç±»éƒ½è¢«ç§°ä¸ºåŸºç±»ã€‚ æ³¨æ„ Swiftç±»ä¸ä¼šä»é€šç”¨åŸºç±»ç»§æ‰¿ã€‚æ‚¨åœ¨ä¸æŒ‡å®šè¶…ç±»çš„æƒ…å†µä¸‹å®šä¹‰çš„ç±»ä¼šè‡ªåŠ¨æˆä¸ºä¾›æ‚¨æ„å»ºçš„åŸºç±»ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºVehicleçš„åŸºç±»ã€‚è¯¥åŸºç±»å®šä¹‰äº†ä¸€ä¸ªåä¸ºcurrentSpeedå­˜å‚¨å±æ€§ï¼Œé»˜è®¤å€¼ä¸º0.0ï¼ˆæ¨æ–­Doubleçš„å±æ€§ç±»å‹ï¼‰ã€‚currentSpeedå±æ€§çš„å€¼è¢«ç§°ä¸ºdescriptionçš„åªè¯»è®¡ç®—Stringå±æ€§ç”¨äºåˆ›å»ºè½¦è¾†çš„æè¿°ã€‚ VehicleåŸºç±»è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸ºmakeNoiseçš„æ–¹æ³•ã€‚æ­¤æ–¹æ³•å®é™…ä¸Šå¯¹åŸºæœ¬Vehicleå®ä¾‹ä¸èµ·ä½œç”¨ï¼Œä½†ç¨åå°†ç”±Vehicleå­ç±»è‡ªå®šä¹‰ï¼š class Vehicle { â€‹ var currentSpeed &#x3D; 0.0 â€‹ var description: String { â€‹ return â€œtraveling at (currentSpeed) miles per hourâ€ â€‹ } â€‹ func makeNoise() { â€‹ &#x2F;&#x2F; do nothing - an arbitrary vehicle doesnâ€™t necessarily make a noise â€‹ } } æ‚¨åˆ›å»ºä¸€ä¸ªå¸¦æœ‰åˆå§‹åŒ–å™¨è¯­æ³•çš„æ–°Vehicleå®ä¾‹ï¼Œè¯¥è¯­æ³•å†™ä¸ºç±»å‹åç§°ï¼Œåè·Ÿç©ºæ‹¬å·ï¼š let someVehicle &#x3D; Vehicle() åˆ›å»ºæ–°çš„Vehicleå®ä¾‹åï¼Œæ‚¨å¯ä»¥è®¿é—®å…¶descriptionå±æ€§ï¼Œä»¥æ‰“å°è½¦è¾†å½“å‰é€Ÿåº¦çš„äººç±»å¯è¯»æè¿°ï¼š print(â€œVehicle: (someVehicle.description)â€) &#x2F;&#x2F; Vehicle: traveling at 0.0 miles per hour Vehicleç±»å®šä¹‰äº†ä»»æ„è½¦è¾†çš„å¸¸è§ç‰¹å¾ï¼Œä½†å…¶æœ¬èº«æ²¡æœ‰å¤šå¤§ç”¨å¤„ã€‚ä¸ºäº†ä½¿å…¶æ›´æœ‰ç”¨ï¼Œæ‚¨éœ€è¦å¯¹å…¶è¿›è¡Œç»†åŒ–ï¼Œä»¥æè¿°æ›´å…·ä½“çš„è½¦è¾†ç±»å‹ã€‚ å­åˆ†ç±»å­ç±»æ˜¯å°†æ–°ç±»å»ºç«‹åœ¨ç°æœ‰ç±»çš„åŸºç¡€ä¸Šçš„è¡Œä¸ºã€‚å­ç±»ç»§æ‰¿äº†ç°æœ‰ç±»çš„ç‰¹å¾ï¼Œç„¶åæ‚¨å¯ä»¥å¯¹å…¶è¿›è¡Œç»†åŒ–ã€‚æ‚¨è¿˜å¯ä»¥ä¸ºå­ç±»æ·»åŠ æ–°ç‰¹å¾ã€‚ è¦æŒ‡ç¤ºå­ç±»æœ‰ä¸€ä¸ªè¶…ç±»ï¼Œè¯·åœ¨è¶…ç±»åç§°ä¹‹å‰å†™ä¸‹å­ç±»åç§°ï¼Œç”¨å†’å·åˆ†éš”ï¼š class SomeSubclass: SomeSuperclass { â€‹ &#x2F;&#x2F; subclass definition goes here } ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºBicycleçš„å­ç±»ï¼Œå…·æœ‰è¶…ç±»Vehicleï¼š class Bicycle: Vehicle { â€‹ var hasBasket &#x3D; false } æ–°çš„Bicycleç±»ä¼šè‡ªåŠ¨è·å¾—Vehicleçš„æ‰€æœ‰ç‰¹å¾ï¼Œä¾‹å¦‚å…¶currentSpeedå’Œdescriptionå±æ€§åŠå…¶makeNoise()æ–¹æ³•ã€‚ é™¤äº†ç»§æ‰¿çš„ç‰¹å¾å¤–ï¼ŒBicycleç±»è¿˜å®šä¹‰äº†ä¸€ä¸ªæ–°çš„å­˜å‚¨å±æ€§hasBasketï¼Œé»˜è®¤å€¼ä¸ºfalseï¼ˆä¸ºè¯¥å±æ€§æ¨æ–­ä¸€ç§Boolç±»å‹ï¼‰ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¨åˆ›å»ºçš„ä»»ä½•æ–°Bicycleå®ä¾‹éƒ½ä¸ä¼šæœ‰ç¯®å­ã€‚åˆ›å»ºç‰¹å®šBicycleå®ä¾‹åï¼Œæ‚¨å¯ä»¥å°†è¯¥å®ä¾‹çš„hasBasketå±æ€§è®¾ç½®ä¸ºtrueï¼š let bicycle &#x3D; Bicycle() bicycle.hasBasket &#x3D; true æ‚¨è¿˜å¯ä»¥ä¿®æ”¹Bicycleå®ä¾‹çš„ç»§æ‰¿çš„currentSpeedå±æ€§ï¼Œå¹¶æŸ¥è¯¢å®ä¾‹çš„ç»§æ‰¿descriptionå±æ€§ï¼š bicycle.currentSpeed &#x3D; 15.0 print(â€œBicycle: (bicycle.description)â€) &#x2F;&#x2F; Bicycle: traveling at 15.0 miles per hour å­ç±»æœ¬èº«å¯ä»¥è¢«å­ç±»ã€‚ä¸‹ä¸€ä¸ªç¤ºä¾‹ä¸ºè¢«ç§°ä¸ºâ€œä¸²è”â€çš„åŒåº§è‡ªè¡Œè½¦åˆ›å»ºBicycleå­ç±»ï¼š class Tandem: Bicycle { â€‹ var currentNumberOfPassengers &#x3D; 0 } Tandem inherits all of the properties and methods from Bicycle, which in turn inherits all of the properties and methods from Vehicle. The Tandem subclass also adds a new stored property called currentNumberOfPassengers, with a default value of 0. å¦‚æœæ‚¨åˆ›å»ºTandemå®ä¾‹ï¼Œæ‚¨å¯ä»¥å¤„ç†å…¶ä»»ä½•æ–°çš„å’Œç»§æ‰¿çš„å±æ€§ï¼Œå¹¶æŸ¥è¯¢å®ƒä»Vehicleç»§æ‰¿çš„åªè¯»descriptionå±æ€§ï¼š let tandem &#x3D; Tandem() tandem.hasBasket &#x3D; true tandem.currentNumberOfPassengers &#x3D; 2 tandem.currentSpeed &#x3D; 22.0 print(â€œTandem: (tandem.description)â€) &#x2F;&#x2F; Tandem: traveling at 22.0 miles per hour å‹å€’ä¸€åˆ‡çš„å­ç±»å¯ä»¥æä¾›å®ä¾‹æ–¹æ³•ã€ç±»å‹æ–¹æ³•ã€å®ä¾‹å±æ€§ã€ç±»å‹å±æ€§æˆ–ä¸‹æ ‡çš„è‡ªå®šä¹‰å®ç°ï¼Œå¦åˆ™å®ƒå°†ä»è¶…ç±»ç»§æ‰¿ã€‚è¿™è¢«ç§°ä¸ºå‹å€’ä¸€åˆ‡ã€‚ è¦è¦†ç›–å¦åˆ™ä¼šç»§æ‰¿çš„ç‰¹å¾ï¼Œè¯·åœ¨è¦†ç›–å®šä¹‰å‰åŠ ä¸Šoverrideå…³é”®å­—ã€‚è¿™æ ·åšä¼šæ¾„æ¸…æ‚¨æ‰“ç®—æä¾›é‡å†™ï¼Œå¹¶ä¸”æ²¡æœ‰é”™è¯¯åœ°æä¾›åŒ¹é…çš„å®šä¹‰ã€‚æ„å¤–è¦†ç›–å¯èƒ½ä¼šå¯¼è‡´æ„å¤–è¡Œä¸ºï¼Œä»»ä½•æ²¡æœ‰overrideå…³é”®å­—çš„è¦†ç›–éƒ½ä¼šåœ¨ç¼–è¯‘ä»£ç æ—¶è¢«è¯Šæ–­ä¸ºé”™è¯¯ã€‚ overrideå…³é”®å­—è¿˜ä¼šæç¤ºSwiftç¼–è¯‘å™¨æ£€æŸ¥é‡å†™ç±»çš„è¶…ç±»ï¼ˆæˆ–å…¶çˆ¶ç±»ä¹‹ä¸€ï¼‰çš„å£°æ˜æ˜¯å¦ä¸æ‚¨ä¸ºé‡å†™æä¾›çš„å£°æ˜ç›¸åŒ¹é…ã€‚æ­¤æ£€æŸ¥å¯ç¡®ä¿æ‚¨çš„é‡å†™å®šä¹‰æ­£ç¡®æ— è¯¯ã€‚ è®¿é—®è¶…ç±»æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡å½“æ‚¨ä¸ºå­ç±»æä¾›æ–¹æ³•ã€å±æ€§æˆ–ä¸‹æ ‡è¦†ç›–æ—¶ï¼Œæœ‰æ—¶ä½¿ç”¨ç°æœ‰çš„è¶…ç±»å®ç°ä½œä¸ºé‡å†™çš„ä¸€éƒ¨åˆ†éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ç»†åŒ–è¯¥ç°æœ‰å®ç°çš„è¡Œä¸ºï¼Œæˆ–å°†ä¿®æ”¹åçš„å€¼å­˜å‚¨åœ¨ç°æœ‰ç»§æ‰¿çš„å˜é‡ä¸­ã€‚ åœ¨é€‚å½“çš„æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨superå‰ç¼€è®¿é—®æ–¹æ³•ã€å±æ€§æˆ–ä¸‹æ ‡çš„è¶…ç±»ç‰ˆæœ¬ï¼š åä¸ºsomeMethod()é‡å†™æ–¹æ³•å¯ä»¥é€šè¿‡åœ¨é‡å†™æ–¹æ³•å®ç°ä¸­è°ƒç”¨super.someMethod()æ¥è°ƒç”¨someMethod()çš„è¶…ç±»ç‰ˆæœ¬ã€‚ åä¸ºsomePropertyçš„é‡å†™å±æ€§å¯ä»¥åœ¨é‡å†™getteræˆ–setterå®ç°ä¸­ä»¥super.somePropertyçš„å½¢å¼è®¿é—®somePropertyçš„è¶…ç±»ç‰ˆæœ¬ã€‚ someIndexçš„é‡å†™ä¸‹æ ‡å¯ä»¥ä»é‡å†™ä¸‹æ ‡å®ç°ä¸­è®¿é—®ä¸super[someIndex]ç›¸åŒçš„ä¸‹æ ‡çš„è¶…ç±»ç‰ˆæœ¬ã€‚ å‹å€’ä¸€åˆ‡çš„æ–¹æ³•æ‚¨å¯ä»¥é‡å†™ç»§æ‰¿çš„å®ä¾‹æˆ–ç±»å‹æ–¹æ³•ï¼Œä»¥ä¾¿åœ¨å­ç±»ä¸­æä¾›æ–¹æ³•çš„å®šåˆ¶æˆ–æ›¿ä»£å®ç°ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºTrainçš„æ–°Vehicleå­ç±»ï¼Œè¯¥å­ç±»è¦†ç›–äº†Trainä»Vehicleç»§æ‰¿çš„makeNoise()æ–¹æ³•ï¼š class Train: Vehicle { â€‹ override func makeNoise() { â€‹ print(â€œChoo Chooâ€) â€‹ } } å¦‚æœæ‚¨åˆ›å»ºä¸€ä¸ªæ–°çš„Trainå®ä¾‹å¹¶è°ƒç”¨å…¶makeNoise()æ–¹æ³•ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°è¯¥æ–¹æ³•çš„Trainå­ç±»ç‰ˆæœ¬è¢«è°ƒç”¨ï¼š let train &#x3D; Train() train.makeNoise() &#x2F;&#x2F; Prints â€œChoo Chooâ€ å‹å€’ä¸€åˆ‡çš„å±æ€§æ‚¨å¯ä»¥é‡å†™ç»§æ‰¿çš„å®ä¾‹æˆ–ç±»å‹å±æ€§ï¼Œä¸ºè¯¥å±æ€§æä¾›è‡ªå·±çš„è‡ªå®šä¹‰è·å–å™¨å’Œè®¾ç½®å™¨ï¼Œæˆ–æ·»åŠ å±æ€§è§‚å¯Ÿå™¨ï¼Œä»¥ä½¿é‡å†™å±æ€§èƒ½å¤Ÿè§‚å¯ŸåŸºç¡€å±æ€§å€¼ä½•æ—¶æ›´æ”¹ã€‚ å‹å€’ä¸€åˆ‡çš„è´¢äº§è·å–è€…å’Œè®¾å®šè€…æ‚¨å¯ä»¥æä¾›è‡ªå®šä¹‰è·å–å™¨ï¼ˆå¦‚æœé€‚ç”¨ï¼Œå¹¶é…Œæƒ…æä¾›è®¾ç½®å™¨ï¼‰æ¥è¦†ç›–ä»»ä½•ç»§æ‰¿çš„å±æ€§ï¼Œæ— è®ºç»§æ‰¿çš„å±æ€§æ˜¯åœ¨æºä»£ç ä¸­å®ç°ä¸ºå­˜å‚¨çš„è¿˜æ˜¯è®¡ç®—å±æ€§ã€‚å­ç±»ä¸çŸ¥é“ç»§æ‰¿å±æ€§çš„å­˜å‚¨æˆ–è®¡ç®—æ€§è´¨â€”â€”å®ƒåªçŸ¥é“ç»§æ‰¿å±æ€§å…·æœ‰ç‰¹å®šçš„åç§°å’Œç±»å‹ã€‚æ‚¨å¿…é¡»å§‹ç»ˆå£°æ˜è¦é‡å†™çš„å±æ€§çš„åç§°å’Œç±»å‹ï¼Œä»¥ä½¿ç¼–è¯‘å™¨èƒ½å¤Ÿæ£€æŸ¥æ‚¨çš„é‡å†™æ˜¯å¦ä¸å…·æœ‰ç›¸åŒåç§°å’Œç±»å‹çš„è¶…ç±»å±æ€§åŒ¹é…ã€‚ æ‚¨å¯ä»¥é€šè¿‡åœ¨å­ç±»å±æ€§é‡å†™ä¸­åŒæ—¶æä¾›è·å–å™¨å’Œè®¾ç½®å™¨æ¥å°†ç»§æ‰¿çš„åªè¯»å±æ€§å‘ˆç°ä¸ºè¯»å†™å±æ€§ã€‚ä½†æ˜¯ï¼Œæ‚¨ä¸èƒ½å°†ç»§æ‰¿çš„è¯»å†™å±æ€§æ˜¾ç¤ºä¸ºåªè¯»å±æ€§ã€‚ æ³¨æ„ å¦‚æœæ‚¨æä¾›è®¾ç½®å™¨ä½œä¸ºå±æ€§è¦†ç›–çš„ä¸€éƒ¨åˆ†ï¼Œæ‚¨è¿˜å¿…é¡»ä¸ºè¯¥è¦†ç›–æä¾›è·å–å™¨ã€‚å¦‚æœæ‚¨ä¸æƒ³åœ¨è¦†ç›–getterä¸­ä¿®æ”¹ç»§æ‰¿å±æ€§çš„å€¼ï¼Œåªéœ€ä»getterè¿”å›super.somePropertyæ¥ä¼ é€’ç»§æ‰¿çš„å€¼ï¼Œå…¶ä¸­somePropertyæ˜¯æ‚¨è¦é‡å†™çš„å±æ€§çš„åç§°ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºCarçš„æ–°ç±»ï¼Œè¿™æ˜¯Vehicleçš„ä¸€ä¸ªå­ç±»ã€‚TheCarç±»å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å­˜å‚¨å±æ€§ï¼Œç§°ä¸ºgearï¼Œé»˜è®¤æ•´æ•°å€¼ä¸º1ã€‚TheCarç±»è¿˜è¦†ç›–äº†å®ƒä»Vehicleç»§æ‰¿çš„descriptionå±æ€§ï¼Œä»¥æä¾›åŒ…å«å½“å‰é½¿è½®çš„è‡ªå®šä¹‰æè¿°ï¼š class Car: Vehicle { â€‹ var gear &#x3D; 1 â€‹ override var description: String { â€‹ return super.description + â€œ in gear (gear)â€ â€‹ } } The override of the description property starts by calling super.description, which returns the Vehicle classâ€™s description property. The Car classâ€™s version of descriptionthen adds some extra text onto the end of this description to provide information about the current gear. å¦‚æœæ‚¨åˆ›å»ºCarç±»çš„å®ä¾‹å¹¶è®¾ç½®å…¶gearå’ŒcurrentSpeedå±æ€§ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å®ƒçš„descriptionå±æ€§è¿”å›åœ¨Carç±»ä¸­å®šä¹‰çš„å®šåˆ¶æè¿°ï¼š let car &#x3D; Car() car.currentSpeed &#x3D; 25.0 car.gear &#x3D; 3 print(â€œCar: (car.description)â€) &#x2F;&#x2F; Car: traveling at 25.0 miles per hour in gear 3 å‹å€’ä¸€åˆ‡çš„è´¢äº§è§‚å¯Ÿè€…æ‚¨å¯ä»¥ä½¿ç”¨å±æ€§é‡å†™å°†å±æ€§è§‚å¯Ÿè€…æ·»åŠ åˆ°ç»§æ‰¿çš„å±æ€§ä¸­ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿåœ¨ç»§æ‰¿å±æ€§çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶æ”¶åˆ°é€šçŸ¥ï¼Œæ— è®ºè¯¥å±æ€§æœ€åˆæ˜¯å¦‚ä½•å®ç°çš„ã€‚æœ‰å…³è´¢äº§è§‚å¯Ÿå‘˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…è´¢äº§è§‚å¯Ÿå‘˜ã€‚ æ³¨æ„ æ‚¨æ— æ³•å°†å±æ€§è§‚å¯Ÿè€…æ·»åŠ åˆ°ç»§æ‰¿çš„å¸¸é‡å­˜å‚¨å±æ€§æˆ–ç»§æ‰¿çš„åªè¯»è®¡ç®—å±æ€§ã€‚æ— æ³•è®¾ç½®è¿™äº›å±æ€§çš„å€¼ï¼Œå› æ­¤ä¸å®œæä¾›å°†willSetæˆ–didSetå®ç°ä½œä¸ºé‡å†™çš„ä¸€éƒ¨åˆ†ã€‚ å¦è¯·æ³¨æ„ï¼Œæ‚¨æ— æ³•åŒæ—¶æä¾›åŒä¸€å±æ€§çš„é‡å†™è®¾ç½®å™¨å’Œé‡å†™å±æ€§è§‚å¯Ÿå™¨ã€‚å¦‚æœæ‚¨æƒ³è§‚å¯Ÿå±æ€§å€¼çš„å˜åŒ–ï¼Œå¹¶ä¸”æ‚¨å·²ç»åœ¨ä¸ºè¯¥å±æ€§æä¾›è‡ªå®šä¹‰è®¾ç½®å™¨ï¼Œæ‚¨å¯ä»¥ç®€å•åœ°ä»è‡ªå®šä¹‰è®¾ç½®å™¨ä¸­è§‚å¯Ÿä»»ä½•å€¼æ›´æ”¹ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºAutomaticCarçš„æ–°ç±»ï¼Œè¿™æ˜¯Carçš„ä¸€ä¸ªå­ç±»ã€‚AutomaticCarç±»è¡¨ç¤ºå¸¦æœ‰è‡ªåŠ¨å˜é€Ÿç®±çš„æ±½è½¦ï¼Œè¯¥å˜é€Ÿç®±æ ¹æ®å½“å‰é€Ÿåº¦è‡ªåŠ¨é€‰æ‹©è¦ä½¿ç”¨çš„é€‚å½“é½¿è½®ï¼š class AutomaticCar: Car { â€‹ override var currentSpeed: Double { â€‹ didSet { â€‹ gear &#x3D; Int(currentSpeed &#x2F; 10.0) + 1 â€‹ } â€‹ } } æ¯å½“æ‚¨è®¾ç½®AutomaticCarå®ä¾‹çš„currentSpeedå±æ€§æ—¶ï¼Œè¯¥å±æ€§çš„sdidSetè§‚å¯Ÿå™¨éƒ½ä¼šå°†å®ä¾‹çš„gearå±æ€§è®¾ç½®ä¸ºæ–°é€Ÿåº¦çš„é€‚å½“é½¿è½®é€‰æ‹©ã€‚å…·ä½“æ¥è¯´ï¼Œå±æ€§è§‚å¯Ÿè€…é€‰æ‹©ä¸€ä¸ªæ–°çš„currentSpeedå€¼é™¤ä»¥10çš„é½¿è½®ï¼Œå››èˆäº”å…¥åˆ°æœ€è¿‘çš„æ•´æ•°ï¼ŒåŠ ä¸Š1ã€‚35.0çš„é€Ÿåº¦äº§ç”Ÿ4çš„é½¿è½®ï¼š let automatic &#x3D; AutomaticCar() automatic.currentSpeed &#x3D; 35.0 print(â€œAutomaticCar: (automatic.description)â€) &#x2F;&#x2F; AutomaticCar: traveling at 35.0 miles per hour in gear 4 é˜²æ­¢é‡å†™You can prevent a method, property, or subscript from being overridden by marking it as final. Do this by writing the final modifier before the method, property, or subscriptâ€™s introducer keyword (such as final var, final func, final class func, and final subscript). ä»»ä½•åœ¨å­ç±»ä¸­é‡å†™æœ€ç»ˆæ–¹æ³•ã€å±æ€§æˆ–ä¸‹æ ‡çš„å°è¯•éƒ½å°†æŠ¥å‘Šä¸ºç¼–è¯‘æ—¶é”™è¯¯ã€‚æ‚¨æ·»åŠ åˆ°æ‰©å±•ç±»çš„æ–¹æ³•ã€å±æ€§æˆ–ä¸‹æ ‡ä¹Ÿå¯ä»¥åœ¨æ‰©å±•çš„å®šä¹‰ä¸­æ ‡è®°ä¸ºæœ€ç»ˆã€‚ æ‚¨å¯ä»¥é€šè¿‡åœ¨ç±»å®šä¹‰ï¼ˆfinalclassï¼‰ä¸­çš„classå…³é”®å­—ä¹‹å‰ç¼–å†™finalä¿®é¥°ç¬¦ï¼Œå°†æ•´ä¸ªç±»æ ‡è®°ä¸ºæœ€ç»ˆä¿®é¥°è¯­ã€‚ä»»ä½•å¯¹æœ€ç»ˆç±»è¿›è¡Œå­ç±»çš„å°è¯•éƒ½å°†æŠ¥å‘Šä¸ºç¼–è¯‘æ—¶é”™è¯¯ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ è‡ªåŠ¨å‚è€ƒè®¡æ•°","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-è‡ªåŠ¨å‚è€ƒè®¡æ•°","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.294Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-è‡ªåŠ¨å‚è€ƒè®¡æ•°/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E8%87%AA%E5%8A%A8%E5%8F%82%E8%80%83%E8%AE%A1%E6%95%B0/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/AutomaticReferenceCounting.html Swift ä½¿ç”¨è‡ªåŠ¨å‚è€ƒè®¡æ•° (ARC) æ¥è·Ÿè¸ªå’Œç®¡ç† app çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€å†…å­˜ç®¡ç†åœ¨Swiftä¸­â€œæœ‰æ•ˆâ€ï¼Œæ‚¨æ— éœ€è‡ªå·±è€ƒè™‘å†…å­˜ç®¡ç†ã€‚å½“ä¸å†éœ€è¦ç±»å®ä¾‹æ—¶ï¼ŒARCä¼šè‡ªåŠ¨é‡Šæ”¾ç±»å®ä¾‹ä½¿ç”¨çš„å†…å­˜ã€‚ ç„¶è€Œï¼Œåœ¨å°‘æ•°æƒ…å†µä¸‹ï¼ŒARCéœ€è¦æœ‰å…³ä»£ç éƒ¨åˆ†ä¹‹é—´å…³ç³»çš„æ›´å¤šä¿¡æ¯ï¼Œä»¥ä¾¿ä¸ºæ‚¨ç®¡ç†å†…å­˜ã€‚æœ¬ç« ä»‹ç»äº†è¿™äº›æƒ…å†µï¼Œå¹¶å±•ç¤ºäº†å¦‚ä½•å¯ç”¨ARCæ¥ç®¡ç†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰å†…å­˜ã€‚åœ¨Swiftä¸­ä½¿ç”¨ARCä¸è¿‡æ¸¡åˆ°ARCå‘å¸ƒè¯´æ˜ä¸­æè¿°çš„å°†ARCä¸Objective-Cä¸€èµ·ä½¿ç”¨çš„æ–¹æ³•éå¸¸ç›¸ä¼¼ã€‚ å¼•ç”¨è®¡æ•°ä»…é€‚ç”¨äºç±»å®ä¾‹ã€‚ç»“æ„å’Œæšä¸¾æ˜¯å€¼ç±»å‹ï¼Œè€Œä¸æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸ä¼šé€šè¿‡å¼•ç”¨å­˜å‚¨å’Œä¼ é€’ã€‚ ARCçš„å·¥ä½œåŸç†æ¯æ¬¡æ‚¨åˆ›å»ºç±»çš„æ–°å®ä¾‹æ—¶ï¼ŒARCéƒ½ä¼šåˆ†é…ä¸€å¤§å—å†…å­˜æ¥å­˜å‚¨æœ‰å…³è¯¥å®ä¾‹çš„ä¿¡æ¯ã€‚æ­¤å†…å­˜åŒ…å«æœ‰å…³å®ä¾‹ç±»å‹çš„ä¿¡æ¯ï¼Œä»¥åŠä¸è¯¥å®ä¾‹å…³è”çš„ä»»ä½•å­˜å‚¨å±æ€§çš„å€¼ã€‚ æ­¤å¤–ï¼Œå½“ä¸å†éœ€è¦å®ä¾‹æ—¶ï¼ŒARCä¼šé‡Šæ”¾è¯¥å®ä¾‹ä½¿ç”¨çš„å†…å­˜ï¼Œä»¥ä¾¿å°†å†…å­˜ç”¨äºå…¶ä»–ç›®çš„ã€‚è¿™ç¡®ä¿äº†ç±»å®ä¾‹åœ¨ä¸å†éœ€è¦æ—¶ä¸ä¼šå ç”¨å†…å­˜ç©ºé—´ã€‚ ä½†æ˜¯ï¼Œå¦‚æœARCè¦å¤„ç†ä»åœ¨ä½¿ç”¨çš„å®ä¾‹ï¼Œå°†æ— æ³•å†è®¿é—®è¯¥å®ä¾‹çš„å±æ€§æˆ–è°ƒç”¨è¯¥å®ä¾‹çš„æ–¹æ³•ã€‚äº‹å®ä¸Šï¼Œå¦‚æœæ‚¨å°è¯•è®¿é—®è¯¥å®ä¾‹ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå¾ˆå¯èƒ½ä¼šå´©æºƒã€‚ ä¸ºäº†ç¡®ä¿å®ä¾‹åœ¨ä»ç„¶éœ€è¦æ—¶ä¸ä¼šæ¶ˆå¤±ï¼ŒARCè·Ÿè¸ªå½“å‰å¼•ç”¨æ¯ä¸ªç±»å®ä¾‹çš„å±æ€§ã€å¸¸é‡å’Œå˜é‡æ•°é‡ã€‚åªè¦è‡³å°‘å­˜åœ¨å¯¹å®ä¾‹çš„è‡³å°‘ä¸€ä¸ªæ´»åŠ¨å¼•ç”¨ï¼ŒARCå°±ä¸ä¼šå¤„ç†è¯¥å®ä¾‹ã€‚ ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ¯å½“æ‚¨å°†ç±»å®ä¾‹åˆ†é…ç»™å±æ€§ã€å¸¸é‡æˆ–å˜é‡æ—¶ï¼Œè¯¥å±æ€§ã€å¸¸é‡æˆ–å˜é‡éƒ½ä¼šå¼ºçƒˆå¼•ç”¨è¯¥å®ä¾‹ã€‚è¯¥å¼•ç”¨è¢«ç§°ä¸ºâ€œå¼ºâ€å¼•ç”¨ï¼Œå› ä¸ºå®ƒç‰¢ç‰¢æŠ“ä½è¯¥å®ä¾‹ï¼Œåªè¦è¯¥å¼ºå¼•ç”¨ä»ç„¶å­˜åœ¨ï¼Œå°±ä¸å…è®¸å°†å…¶äº¤æ˜“ã€‚ ARCåœ¨è¡ŒåŠ¨ä»¥ä¸‹æ˜¯è‡ªåŠ¨å¼•ç”¨è®¡æ•°å·¥ä½œåŸç†çš„ç¤ºä¾‹ã€‚æ­¤ç¤ºä¾‹ä»ä¸€ä¸ªåä¸ºPersonçš„ç®€å•ç±»å¼€å§‹ï¼Œè¯¥ç±»å®šä¹‰äº†ä¸€ä¸ªåä¸ºnameçš„å­˜å‚¨å¸¸é‡å±æ€§ï¼š class Person { â€‹ let name: String â€‹ init(name: String) { â€‹ self.name &#x3D; name â€‹ print(â€œ(name) is being initializedâ€) â€‹ } â€‹ deinit { â€‹ print(â€œ(name) is being deinitializedâ€) â€‹ } } Personç±»æœ‰ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œå¯ä»¥è®¾ç½®å®ä¾‹çš„nameå±æ€§ï¼Œå¹¶æ‰“å°ä¸€æ¡æ¶ˆæ¯æ¥æŒ‡ç¤ºåˆå§‹åŒ–æ­£åœ¨è¿›è¡Œä¸­ã€‚Personç±»è¿˜æœ‰ä¸€ä¸ªå»åˆå§‹åŒ–å™¨ï¼Œå½“ç±»çš„å®ä¾‹è¢«é‡Šæ”¾æ—¶ï¼Œå®ƒä¼šæ‰“å°æ¶ˆæ¯ã€‚ ä¸‹ä¸€ä¸ªä»£ç ç‰‡æ®µå®šä¹‰äº†ç±»å‹ä¸ºPerson?çš„ä¸‰ä¸ªå˜é‡ï¼Œç”¨äºåœ¨åç»­ä»£ç ç‰‡æ®µä¸­è®¾ç½®å¯¹æ–°Personå®ä¾‹çš„å¤šä¸ªå¼•ç”¨ã€‚ç”±äºè¿™äº›å˜é‡æ˜¯å¯é€‰ç±»å‹ï¼ˆPerson?ï¼Œè€Œä¸æ˜¯Personï¼‰ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼Œå€¼ä¸ºnilï¼Œç›®å‰ä¸å¼•ç”¨Personå®ä¾‹ã€‚ var reference1: Person? var reference2: Person? var reference3: Person? æ‚¨ç°åœ¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„Personå®ä¾‹ï¼Œå¹¶å°†å…¶åˆ†é…ç»™ä»¥ä¸‹ä¸‰ä¸ªå˜é‡ä¹‹ä¸€ï¼š reference1 &#x3D; Person(name: â€œJohn Appleseedâ€) &#x2F;&#x2F; Prints â€œJohn Appleseed is being initializedâ€ Note that the message &quot;John Appleseed is being initialized&quot; is printed at the point that you call the Person classâ€™s initializer. This confirms that initialization has taken place. ç”±äºæ–°çš„Personå®ä¾‹å·²åˆ†é…ç»™reference1å˜é‡ï¼Œå› æ­¤ç°åœ¨reference1å¯¹æ–°Personå®ä¾‹æœ‰å¼ºçƒˆå¼•ç”¨ã€‚ç”±äºè‡³å°‘æœ‰ä¸€ä¸ªå¼ºæœ‰åŠ›çš„å‚è€ƒï¼ŒARCç¡®ä¿è¿™ä¸ªäººè¢«ä¿å­˜åœ¨è®°å¿†ä¸­ï¼Œå¹¶ä¸”æ²¡æœ‰è¢«é‡Šæ”¾ã€‚ å¦‚æœæ‚¨å°†åŒä¸€Personå®ä¾‹åˆ†é…ç»™å¦å¤–ä¸¤ä¸ªå˜é‡ï¼Œåˆ™ä¼šå»ºç«‹å¯¹è¯¥å®ä¾‹çš„ä¸¤ä¸ªæ›´å¼ºå¼•ç”¨ï¼š reference2 &#x3D; reference1 reference3 &#x3D; reference1 ç°åœ¨æœ‰ä¸‰ä¸ªå¼ºçƒˆçš„å¼•ç”¨è¿™ä¸ªå•ä¸€Personå®ä¾‹ã€‚ å¦‚æœæ‚¨é€šè¿‡å°†nilé…ç»™å…¶ä¸­ä¸¤ä¸ªå˜é‡æ¥ç ´åå…¶ä¸­ä¸¤ä¸ªå¼ºå¼•ç”¨ï¼ˆåŒ…æ‹¬åŸå§‹å¼•ç”¨ï¼‰ï¼Œåˆ™å°†ä¿ç•™ä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œå¹¶ä¸”Personå®ä¾‹æœªè¢«é‡Šæ”¾ï¼š reference1 &#x3D; nil reference2 &#x3D; nil åœ¨ç¬¬ä¸‰ä¸ªä¹Ÿæ˜¯æœ€åä¸€ä¸ªå¼ºå¼•ç”¨è¢«ç ´åä¹‹å‰ï¼ŒARCä¸ä¼šå¤„ç†Personå®ä¾‹ï¼Œæ­¤æ—¶å¾ˆæ˜æ˜¾æ‚¨ä¸å†ä½¿ç”¨Personå®ä¾‹ï¼š reference3 &#x3D; nil &#x2F;&#x2F; Prints â€œJohn Appleseed is being deinitializedâ€ ç±»å®ä¾‹ä¹‹é—´çš„è¾ƒå¼ºå‚è€ƒå‘¨æœŸåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒARCèƒ½å¤Ÿè·Ÿè¸ªæ‚¨åˆ›å»ºçš„æ–°Personå®ä¾‹çš„å¼•ç”¨æ•°é‡ï¼Œå¹¶åœ¨ä¸å†éœ€è¦æ—¶å¤„ç†è¯¥Personå®ä¾‹ã€‚ ç„¶è€Œï¼Œå¯ä»¥ç¼–å†™ç±»å®ä¾‹æ°¸è¿œä¸ä¼šè¾¾åˆ°é›¶å¼ºå¼•ç”¨çš„ä»£ç ã€‚å¦‚æœä¸¤ä¸ªç±»å®ä¾‹å½¼æ­¤ä¿æŒå¼ºçƒˆå¼•ç”¨ï¼Œè¿™æ ·æ¯ä¸ªå®ä¾‹éƒ½ä¼šä¿æŒå¦ä¸€ä¸ªå®ä¾‹çš„æ´»åŠ›ï¼Œåˆ™ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚è¿™è¢«ç§°ä¸ºå¼ºå‚è€ƒå‘¨æœŸã€‚ æ‚¨é€šè¿‡å°†ç±»ä¹‹é—´çš„ä¸€äº›å…³ç³»å®šä¹‰ä¸ºå¼±å¼•ç”¨æˆ–æ— åå¼•ç”¨è€Œä¸æ˜¯å¼ºå¼•ç”¨æ¥è§£å†³å¼ºå¼•ç”¨å‘¨æœŸã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨è§£å†³ç±»å®ä¾‹ä¹‹é—´çš„å¼ºå¼•ç”¨å‘¨æœŸä¸­è¿›è¡Œäº†æè¿°ã€‚ç„¶è€Œï¼Œåœ¨æ‚¨å­¦ä¹ å¦‚ä½•è§£å†³å¼ºå‚è€ƒå‘¨æœŸä¹‹å‰ï¼Œäº†è§£è¿™ç§å‘¨æœŸæ˜¯å¦‚ä½•å¯¼è‡´çš„éå¸¸æœ‰ç”¨ã€‚ Hereâ€™s an example of how a strong reference cycle can be created by accident. This example defines two classes called Person and Apartment, which model a block of apartments and its residents: class Person { â€‹ let name: String â€‹ init(name: String) { self.name &#x3D; name } â€‹ var apartment: Apartment? â€‹ deinit { print(â€œ(name) is being deinitializedâ€) } } class Apartment { â€‹ let unit: String â€‹ init(unit: String) { self.unit &#x3D; unit } â€‹ var tenant: Person? â€‹ deinit { print(â€œApartment (unit) is being deinitializedâ€) } } æ¯ä¸ªPersonå®ä¾‹éƒ½æœ‰ä¸€ä¸ªStringç±»å‹çš„nameå±æ€§å’Œä¸€ä¸ªæœ€åˆä¸ºnilå¯é€‰apartmentå±æ€§ã€‚apartmentç‰©ä¸šæ˜¯å¯é€‰çš„ï¼Œå› ä¸ºä¸€ä¸ªäººå¯èƒ½å¹¶ä¸æ€»æ˜¯æœ‰å…¬å¯“ã€‚ åŒæ ·ï¼Œæ¯ä¸ªApartmentå®ä¾‹éƒ½æœ‰ä¸€ä¸ªStringç±»å‹çš„unitå±æ€§ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæœ€åˆä¸ºnilçš„å¯é€‰tenantå±æ€§ã€‚ç§Ÿæˆ·ç‰©ä¸šæ˜¯å¯é€‰çš„ï¼Œå› ä¸ºå…¬å¯“å¯èƒ½å¹¶ä¸æ€»æ˜¯æœ‰ç§Ÿæˆ·ã€‚ è¿™ä¸¤ä¸ªç±»è¿˜å®šä¹‰äº†ä¸€ä¸ªå»åˆå§‹åŒ–å™¨ï¼Œè¯¥åˆå§‹åŒ–å™¨æ‰“å°äº†è¯¥ç±»çš„å®ä¾‹æ­£åœ¨è¢«éåˆå§‹åŒ–çš„äº‹å®ã€‚è¿™ä½¿æ‚¨èƒ½å¤ŸæŸ¥çœ‹Personå’ŒApartmentçš„å®ä¾‹æ˜¯å¦æŒ‰é¢„æœŸè¿›è¡Œå¤„ç†ã€‚ ä¸‹ä¸€ä¸ªä»£ç ç‰‡æ®µå®šä¹‰äº†ä¸¤ä¸ªå¯é€‰ç±»å‹çš„å˜é‡ï¼Œç§°ä¸ºjohnå’Œunit4Aï¼Œè¿™äº›å˜é‡å°†è®¾ç½®ä¸ºä¸‹é¢çš„ç‰¹å®šApartmentå’ŒPersonå®ä¾‹ã€‚ç”±äºæ˜¯å¯é€‰çš„ï¼Œè¿™ä¸¤ä¸ªå˜é‡çš„åˆå§‹å€¼ä¸ºnilï¼š var john: Person? var unit4A: Apartment? æ‚¨ç°åœ¨å¯ä»¥åˆ›å»ºç‰¹å®šçš„Personå®ä¾‹å’ŒApartmentå®ä¾‹ï¼Œå¹¶å°†è¿™äº›æ–°å®ä¾‹åˆ†é…ç»™johnå’Œunit4Aå˜é‡ï¼š john &#x3D; Person(name: â€œJohn Appleseedâ€) unit4A &#x3D; Apartment(unit: â€œ4Aâ€) ä»¥ä¸‹æ˜¯åˆ›å»ºå’Œåˆ†é…è¿™ä¸¤ä¸ªå®ä¾‹åå¼ºå¼•ç”¨çš„å¤–è§‚ã€‚johnå˜é‡ç°åœ¨å¼ºçƒˆå¼•ç”¨æ–°çš„Personå®ä¾‹ï¼Œunit4Aå˜é‡å¼ºçƒˆå¼•ç”¨æ–°çš„Apartmentå®ä¾‹ï¼š æ‚¨ç°åœ¨å¯ä»¥å°†è¿™ä¸¤ä¸ªå®ä¾‹é“¾æ¥åœ¨ä¸€èµ·ï¼Œä»¥ä¾¿è¯¥äººæ‹¥æœ‰å…¬å¯“ï¼Œè€Œå…¬å¯“åˆ™æ‹¥æœ‰ç§Ÿæˆ·ã€‚è¯·æ³¨æ„ï¼Œæ„Ÿå¹å· (!)ç”¨äºè§£å¼€å’Œè®¿é—®å­˜å‚¨åœ¨johnå’Œunit4Aå¯é€‰å˜é‡ä¸­çš„å®ä¾‹ï¼Œä»¥ä¾¿å¯ä»¥è®¾ç½®è¿™äº›å®ä¾‹çš„å±æ€§ï¼š john!.apartment &#x3D; unit4A unit4A!.tenant &#x3D; john ä»¥ä¸‹æ˜¯å°†ä¸¤ä¸ªå®ä¾‹é“¾æ¥åœ¨ä¸€èµ·åå¼ºå¼•ç”¨çš„å¤–è§‚ï¼š ä¸å¹¸çš„æ˜¯ï¼Œå°†è¿™ä¸¤ä¸ªå®ä¾‹è”ç³»èµ·æ¥ä¼šåœ¨å®ƒä»¬ä¹‹é—´äº§ç”Ÿå¼ºå¤§çš„å‚è€ƒå‘¨æœŸã€‚Personå®ä¾‹ç°åœ¨å¼ºçƒˆå¼•ç”¨Apartmentå®ä¾‹ï¼ŒApartmentå®ä¾‹å¼ºçƒˆå¼•ç”¨Personå®ä¾‹ã€‚å› æ­¤ï¼Œå½“æ‚¨æ‰“ç ´johnå’Œunit4Aå˜é‡æŒæœ‰çš„å¼ºå¼•ç”¨æ—¶ï¼Œå¼•ç”¨è®¡æ•°ä¸ä¼šé™è‡³é›¶ï¼Œå¹¶ä¸”å®ä¾‹ä¹Ÿä¸ä¼šç”±ARCåˆ†é…ï¼š john &#x3D; nil unit4A &#x3D; nil è¯·æ³¨æ„ï¼Œå½“æ‚¨å°†è¿™ä¸¤ä¸ªå˜é‡è®¾ç½®ä¸ºnilæ—¶ï¼Œä¸¤è€…éƒ½ä¸è°ƒç”¨éåˆå§‹åŒ–å™¨ã€‚å¼ºå¤§çš„å‚è€ƒå‘¨æœŸå¯é˜²æ­¢Personå’ŒApartmentå®ä¾‹è¢«é‡Šæ”¾ï¼Œå¯¼è‡´åº”ç”¨ç¨‹åºå†…å­˜æ³„æ¼ã€‚ ä»¥ä¸‹æ˜¯å°†johnå’Œunit4Aå˜é‡è®¾ç½®ä¸ºnilåå¼ºå¼•ç”¨çš„å¤–è§‚ï¼š Personå®ä¾‹å’ŒApartmentå®ä¾‹ä¹‹é—´çš„å¼ºçƒˆå¼•ç”¨ä»ç„¶å­˜åœ¨ï¼Œä¸èƒ½è¢«æ‰“ç ´ã€‚ è§£å†³ç±»å®ä¾‹ä¹‹é—´çš„å¼ºå¼•ç”¨å‘¨æœŸå½“æ‚¨å¤„ç†ç±»ç±»å‹çš„å±æ€§æ—¶ï¼ŒSwiftæä¾›äº†ä¸¤ç§è§£å†³å¼ºå¼•ç”¨å‘¨æœŸçš„æ–¹æ³•ï¼šå¼±å¼•ç”¨å’Œæ— åå¼•ç”¨ã€‚ å¼±å’Œæ— æ‹¥æœ‰å¼•ç”¨ä½¿å‚è€ƒå‘¨æœŸä¸­çš„ä¸€ä¸ªå®ä¾‹èƒ½å¤Ÿå¼•ç”¨å¦ä¸€ä¸ªå®ä¾‹ï¼Œè€Œæ— éœ€å¼ºåŠ¿æ§åˆ¶å®ƒã€‚ç„¶åï¼Œè¿™äº›å®ä¾‹å¯ä»¥ç›¸äº’å¼•ç”¨ï¼Œè€Œä¸ä¼šåˆ›å»ºå¼ºå¤§çš„å‚è€ƒå‘¨æœŸã€‚ å½“å¦ä¸€ä¸ªå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­æ—¶ï¼Œå³å½“å¦ä¸€ä¸ªå®ä¾‹å¯ä»¥é¦–å…ˆè¿›è¡Œäº¤æ˜“æ—¶ï¼Œè¯·ä½¿ç”¨å¼±å¼•ç”¨ã€‚åœ¨ä¸Šé¢çš„Apartmentç¤ºä¾‹ä¸­ï¼Œå…¬å¯“åœ¨å…¶ç”Ÿå‘½å‘¨æœŸçš„æŸä¸ªé˜¶æ®µæ²¡æœ‰ç§Ÿæˆ·æ˜¯åˆé€‚çš„ï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¼±å‚è€ƒæ˜¯æ‰“ç ´å‚è€ƒå‘¨æœŸçš„é€‚å½“æ–¹å¼ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå½“å¦ä¸€ä¸ªå®ä¾‹å…·æœ‰ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸæˆ–æ›´é•¿çš„ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œè¯·ä½¿ç”¨éæ‹¥æœ‰çš„å¼•ç”¨ã€‚ å¼±å¼•ç”¨å¼±å¼•ç”¨æ˜¯ä¸€ç§å¼•ç”¨ï¼Œå®ƒä¸ä¼šå¼ºçƒˆä¿ç•™å®ƒæ‰€æŒ‡çš„å®ä¾‹ï¼Œå› æ­¤ä¸ä¼šé˜»æ­¢ARCå¤„ç†å¼•ç”¨çš„å®ä¾‹ã€‚æ­¤è¡Œä¸ºé˜»æ­¢å¼•ç”¨æˆä¸ºå¼ºå¼•ç”¨å‘¨æœŸçš„ä¸€éƒ¨åˆ†ã€‚æ‚¨å¯ä»¥é€šè¿‡å°†weakå…³é”®å­—æ”¾åœ¨å±æ€§æˆ–å˜é‡å£°æ˜ä¹‹å‰æ¥æŒ‡ç¤ºå¼±å¼•ç”¨ã€‚ ç”±äºå¼±å¼•ç”¨ä¸èƒ½å¼ºåŠ›ä¿ç•™å…¶å¼•ç”¨çš„å®ä¾‹ï¼Œå› æ­¤å½“å¼±å¼•ç”¨ä»åœ¨å¼•ç”¨æ—¶ï¼Œè¯¥å®ä¾‹å¯èƒ½ä¼šè¢«é‡Šæ”¾ã€‚å› æ­¤ï¼Œå½“å®ƒå¼•ç”¨çš„å®ä¾‹è¢«é‡Šæ”¾æ—¶ï¼ŒARCä¼šè‡ªåŠ¨å°†å¼±å¼•ç”¨è®¾ç½®ä¸ºnilã€‚è€Œä¸”ï¼Œç”±äºå¼±å¼•ç”¨éœ€è¦å…è®¸å…¶å€¼åœ¨è¿è¡Œæ—¶æ›´æ”¹ä¸ºnilï¼Œå› æ­¤å®ƒä»¬æ€»æ˜¯å£°æ˜ä¸ºå¯é€‰ç±»å‹çš„å˜é‡ï¼Œè€Œä¸æ˜¯å¸¸é‡ã€‚ æ‚¨å¯ä»¥åƒä»»ä½•å…¶ä»–å¯é€‰å€¼ä¸€æ ·ï¼Œæ£€æŸ¥å¼±å¼•ç”¨ä¸­æ˜¯å¦å­˜åœ¨å€¼ï¼Œå¹¶ä¸”æ‚¨æ°¸è¿œä¸ä¼šå¼•ç”¨ä¸å†å­˜åœ¨çš„æ— æ•ˆå®ä¾‹ã€‚ æ³¨æ„ å½“ARCå°†å¼±å¼•ç”¨è®¾ç½®ä¸ºnilæ—¶ï¼Œä¸ä¼šè°ƒç”¨å±æ€§è§‚å¯Ÿè€…ã€‚ ä¸‹é¢çš„ç¤ºä¾‹ä¸ä¸Šé¢çš„Personå’ŒApartmentç¤ºä¾‹ç›¸åŒï¼Œæœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ã€‚è¿™ä¸€æ¬¡ï¼ŒApartmentç±»å‹çš„tenantç‰©ä¸šè¢«å®£å¸ƒä¸ºè–„å¼±çš„å‚è€ƒï¼š class Person { â€‹ let name: String â€‹ init(name: String) { self.name &#x3D; name } â€‹ var apartment: Apartment? â€‹ deinit { print(â€œ(name) is being deinitializedâ€) } } class Apartment { â€‹ let unit: String â€‹ init(unit: String) { self.unit &#x3D; unit } â€‹ weak var tenant: Person? â€‹ deinit { print(â€œApartment (unit) is being deinitializedâ€) } } æ¥è‡ªä¸¤ä¸ªå˜é‡ï¼ˆjohnå’Œunit4Aï¼‰çš„å¼ºå¼•ç”¨ä»¥åŠä¸¤ä¸ªå®ä¾‹ä¹‹é—´çš„è”ç³»ä¸ä»¥å‰ä¸€æ ·åˆ›å»ºï¼š var john: Person? var unit4A: Apartment? john &#x3D; Person(name: â€œJohn Appleseedâ€) unit4A &#x3D; Apartment(unit: â€œ4Aâ€) john!.apartment &#x3D; unit4A unit4A!.tenant &#x3D; john ç°åœ¨æ‚¨å·²å°†è¿™ä¸¤ä¸ªå®ä¾‹é“¾æ¥åœ¨ä¸€èµ·ï¼Œå‚è€ƒèµ„æ–™çš„å¤–è§‚å¦‚ä¸‹ï¼š Personå®ä¾‹ä»ç„¶å¯¹Apartmentå®ä¾‹æœ‰å¾ˆå¼ºçš„å¼•ç”¨ï¼Œä½†Apartmentå®ä¾‹ç°åœ¨å¯¹Personå®ä¾‹çš„å¼•ç”¨å¾ˆå¼±ã€‚è¿™æ„å‘³ç€ï¼Œå½“æ‚¨é€šè¿‡å°†johnå˜é‡è®¾ç½®ä¸ºnilæ¥ç ´åå…¶æŒæœ‰çš„å¼ºå¼•ç”¨æ—¶ï¼Œå¯¹Personå®ä¾‹ä¸å†æœ‰æ›´å¼ºå¼•ç”¨ï¼š john &#x3D; nil &#x2F;&#x2F; Prints â€œJohn Appleseed is being deinitializedâ€ ç”±äºæ²¡æœ‰æ›´å¼ºçƒˆçš„å¼•ç”¨Personå®ä¾‹ï¼Œå› æ­¤å®ƒè¢«åˆ†é…ï¼Œtenantå±æ€§è®¾ç½®ä¸ºnilï¼š å¯¹Apartmentå®ä¾‹çš„å”¯ä¸€å¼ºçƒˆå¼•ç”¨æ¥è‡ªunit4Aå˜é‡ã€‚å¦‚æœæ‚¨æ‰“ç ´äº†è¯¥å¼ºå¼•ç”¨ï¼Œåˆ™ä¸å†æœ‰å¯¹Apartmentå®ä¾‹çš„å¼ºå¼•ç”¨ï¼š unit4A &#x3D; nil &#x2F;&#x2F; Prints â€œApartment 4A is being deinitializedâ€ ç”±äºæ²¡æœ‰æ›´å¼ºçƒˆçš„Apartmentå®ä¾‹ï¼Œæ‰€ä»¥å®ƒä¹Ÿè¢«åˆ†é…äº†ï¼š æ³¨æ„ åœ¨ä½¿ç”¨åƒåœ¾æ”¶é›†çš„ç³»ç»Ÿä¸­ï¼Œæœ‰æ—¶ä½¿ç”¨å¼±æŒ‡é’ˆæ¥å®ç°ç®€å•çš„ç¼“å­˜æœºåˆ¶ï¼Œå› ä¸ºåªæœ‰å½“å†…å­˜å‹åŠ›è§¦å‘åƒåœ¾æ”¶é›†æ—¶ï¼Œæ‰ä¼šé‡Šæ”¾æ²¡æœ‰å¼ºå¼•ç”¨çš„å¯¹è±¡ã€‚ç„¶è€Œï¼Œå¯¹äºARCï¼Œå€¼åœ¨åˆ é™¤å…¶æœ€åä¸€ä¸ªå¼ºå¼•ç”¨åç«‹å³è¿›è¡Œåˆ†é…ï¼Œè¿™ä½¿å¾—å¼±å¼•ç”¨ä¸é€‚åˆæ­¤ç›®çš„ã€‚ æœªçŸ¥å‚è€ƒèµ„æ–™ä¸å¼±å¼•ç”¨ä¸€æ ·ï¼Œæ— æ‹¥æœ‰å¼•ç”¨ä¸ä¼šå¼ºçƒˆä¿ç•™å…¶å¼•ç”¨çš„å®ä¾‹ã€‚ç„¶è€Œï¼Œä¸å¼±å¼•ç”¨ä¸åŒï¼Œå½“å¦ä¸€ä¸ªå®ä¾‹å…·æœ‰ç›¸åŒæˆ–æ›´é•¿çš„ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œä¼šä½¿ç”¨éæ‹¥æœ‰å¼•ç”¨ã€‚æ‚¨å¯ä»¥é€šè¿‡å°†éunownedå…³é”®å­—æ”¾åœ¨å±æ€§æˆ–å˜é‡å£°æ˜ä¹‹å‰æ¥æŒ‡ç¤ºéæ‰€æœ‰å¼•ç”¨ã€‚ ä¸å¼±å¼•ç”¨ä¸åŒï¼Œæ— æ‹¥æœ‰å¼•ç”¨åº”è¯¥å§‹ç»ˆå…·æœ‰å€¼ã€‚å› æ­¤ï¼Œå°†å€¼æ ‡è®°ä¸ºéæ‰€æœ‰å€¼å¹¶ä¸ä½¿å…¶æˆä¸ºå¯é€‰çš„ï¼ŒARCæ°¸è¿œä¸ä¼šå°†æ— æ‹¥æœ‰å¼•ç”¨çš„å€¼è®¾ç½®ä¸ºnilã€‚ é‡è¦ ä»…å½“æ‚¨ç¡®å®šå¼•ç”¨æ€»æ˜¯å¼•ç”¨æœªè¢«é‡Šæ”¾çš„å®ä¾‹æ—¶ï¼Œæ‰ä½¿ç”¨éæ‹¥æœ‰çš„å¼•ç”¨ã€‚ å¦‚æœæ‚¨åœ¨å®ä¾‹è¢«é‡Šæ”¾åå°è¯•è®¿é—®è¯¥å®ä¾‹çš„å€¼ï¼Œæ‚¨å°†æ”¶åˆ°ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸¤ä¸ªç±»åˆ«ï¼ŒCustomerå’ŒCreditCardï¼Œå®ƒä»¬ä¸ºé“¶è¡Œå®¢æˆ·å»ºæ¨¡ï¼Œå¹¶ä¸ºè¯¥å®¢æˆ·å»ºæ¨¡å¯èƒ½çš„ä¿¡ç”¨å¡ã€‚è¿™ä¸¤ä¸ªç±»éƒ½å­˜å‚¨å¦ä¸€ä¸ªç±»çš„å®ä¾‹ä½œä¸ºå±æ€§ã€‚è¿™ç§å…³ç³»æœ‰å¯èƒ½åˆ›é€ ä¸€ä¸ªå¼ºå¤§çš„å‚è€ƒå‘¨æœŸã€‚ Customerå’ŒCreditCardä¹‹é—´çš„å…³ç³»ä¸ä¸Šé¢è–„å¼±çš„å‚è€ƒç¤ºä¾‹ä¸­çœ‹åˆ°çš„Apartmentå’ŒPersonä¹‹é—´çš„å…³ç³»ç•¥æœ‰ä¸åŒã€‚åœ¨è¿™ç§æ•°æ®æ¨¡å‹ä¸­ï¼Œå®¢æˆ·å¯èƒ½æœ‰ä¹Ÿå¯èƒ½æ²¡æœ‰ä¿¡ç”¨å¡ï¼Œä½†ä¿¡ç”¨å¡å°†å§‹ç»ˆä¸å®¢æˆ·ç›¸å…³è”ã€‚CreditCardå®ä¾‹æ°¸è¿œä¸ä¼šæ¯”å®ƒæ‰€æŒ‡Customeré•¿å¯¿ã€‚ä¸ºäº†è¡¨ç¤ºè¿™ä¸€ç‚¹ï¼ŒCustomerç±»æœ‰ä¸€ä¸ªå¯é€‰çš„cardå±æ€§ï¼Œä½†CreditCardç±»æœ‰ä¸€ä¸ªéæ‹¥æœ‰ï¼ˆå’Œéå¯é€‰ï¼‰customerå±æ€§ã€‚ æ­¤å¤–ï¼Œæ–°çš„CreditCardå®ä¾‹åªèƒ½é€šè¿‡å°†numberå€¼å’Œcustomerå®ä¾‹ä¼ é€’ç»™è‡ªå®šä¹‰CreditCardåˆå§‹åŒ–å™¨æ¥åˆ›å»ºã€‚è¿™ç¡®ä¿äº†åœ¨åˆ›å»ºä¿¡ç”¨å¡å®ä¾‹æ—¶ï¼ŒCreditCardå®ä¾‹å§‹ç»ˆæœ‰ä¸€ä¸ªcustomerå®ä¾‹ç›¸å…³è”ã€‚ ç”±äºä¿¡ç”¨å¡æ€»æ˜¯æœ‰å®¢æˆ·ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†å…¶customerè´¢äº§å®šä¹‰ä¸ºéæ‰€æœ‰æƒå‚è€ƒï¼Œä»¥é¿å…å¼ºå¤§çš„å‚è€ƒå‘¨æœŸï¼š class Customer { â€‹ let name: String â€‹ var card: CreditCard? â€‹ init(name: String) { â€‹ self.name &#x3D; name â€‹ } â€‹ deinit { print(â€œ(name) is being deinitializedâ€) } } class CreditCard { â€‹ let number: UInt64 â€‹ unowned let customer: Customer â€‹ init(number: UInt64, customer: Customer) { â€‹ self.number &#x3D; number â€‹ self.customer &#x3D; customer â€‹ } â€‹ deinit { print(â€œCard #(number) is being deinitializedâ€) } } æ³¨æ„ CreditCardç±»numberå±æ€§ä½¿ç”¨UInt64è€Œä¸æ˜¯Intæ¥å®šä¹‰ï¼Œä»¥ç¡®ä¿numberå±æ€§çš„å®¹é‡è¶³å¤Ÿå¤§ï¼Œå¯ä»¥åœ¨32ä½å’Œ64ä½ç³»ç»Ÿä¸Šå­˜å‚¨16ä½å¡å·ã€‚ ä¸‹ä¸€ä¸ªä»£ç ç‰‡æ®µå®šä¹‰äº†ä¸€ä¸ªåä¸ºjohnå¯é€‰Customerå˜é‡ï¼Œè¯¥å˜é‡å°†ç”¨äºå­˜å‚¨å¯¹ç‰¹å®šå®¢æˆ·çš„å¼•ç”¨ã€‚ç”±äºè¯¥å˜é‡æ˜¯å¯é€‰çš„ï¼Œå…¶åˆå§‹å€¼ä¸ºé›¶ï¼š var john: Customer? æ‚¨ç°åœ¨å¯ä»¥åˆ›å»ºä¸€ä¸ªCustomerå®ä¾‹ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥åˆå§‹åŒ–å’Œåˆ†é…ä¸€ä¸ªæ–°çš„CreditCardå®ä¾‹ä½œä¸ºè¯¥å®¢æˆ·çš„cardå±æ€§ï¼š john &#x3D; Customer(name: â€œJohn Appleseedâ€) john!.card &#x3D; CreditCard(number: 1234_5678_9012_3456, customer: john!) ç°åœ¨æ‚¨å·²ç»é“¾æ¥äº†è¿™ä¸¤ä¸ªå®ä¾‹ï¼Œå‚è€ƒèµ„æ–™çš„å¤–è§‚å¦‚ä¸‹ï¼š Customerå®ä¾‹ç°åœ¨å¯¹CreditCardå®ä¾‹æœ‰å¼ºçƒˆå¼•ç”¨ï¼ŒCreditCardå®ä¾‹å¯¹Customerå®ä¾‹æœ‰éæ‰€æœ‰å¼•ç”¨ã€‚ ç”±äºéæ‹¥æœ‰customerå¼•ç”¨ï¼Œå½“æ‚¨ç ´åjohnå˜é‡æŒæœ‰çš„å¼ºå¼•ç”¨æ—¶ï¼Œå¯¹Customerå®ä¾‹æ²¡æœ‰æ›´å¼ºçš„å¼•ç”¨ï¼š ç”±äºæ²¡æœ‰å¯¹Customerå®ä¾‹çš„æ›´å¼ºçƒˆå¼•ç”¨ï¼Œå› æ­¤å®ƒè¢«äº¤æ˜“äº†ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µåï¼Œæ²¡æœ‰å¯¹CreditCardå®ä¾‹çš„æ›´å¼ºçƒˆå¼•ç”¨ï¼Œå®ƒä¹Ÿè¢«äº¤æ˜“ï¼š john &#x3D; nil &#x2F;&#x2F; Prints â€œJohn Appleseed is being deinitializedâ€ &#x2F;&#x2F; Prints â€œCard #1234567890123456 is being deinitializedâ€ ä¸Šé¢çš„æœ€ç»ˆä»£ç ç‰‡æ®µæ˜¾ç¤ºï¼ŒCustomerå®ä¾‹å’ŒCreditCardå®ä¾‹çš„å»åˆå§‹åŒ–å™¨éƒ½åœ¨johnå˜é‡è®¾ç½®ä¸ºå¨ä½åæ‰“å°å…¶â€œéåˆå§‹åŒ–â€æ¶ˆæ¯ã€‚ æ³¨æ„ ä¸Šé¢çš„ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å®‰å…¨çš„éæ‰€æœ‰å¼•ç”¨ã€‚Swift è¿˜é’ˆå¯¹éœ€è¦åœç”¨è¿è¡Œæ—¶å®‰å…¨æ£€æŸ¥ï¼ˆä¾‹å¦‚å‡ºäºæ€§èƒ½åŸå› ï¼‰çš„æƒ…å½¢ï¼Œæä¾›äº†ä¸å®‰å…¨çš„ä¸æ‹¥æœ‰çš„å‚è€ƒã€‚ä¸æ‰€æœ‰ä¸å®‰å…¨æ“ä½œä¸€æ ·ï¼Œæ‚¨æœ‰è´£ä»»æ£€æŸ¥è¯¥ä»£ç æ˜¯å¦å®‰å…¨ã€‚ æ‚¨é€šè¿‡å†™æ— unowned(unsafe)è¡¨ç¤ºä¸å®‰å…¨çš„æ— åå¼•ç”¨ã€‚å¦‚æœæ‚¨åœ¨å¼•ç”¨çš„å®ä¾‹è¢«é‡Šæ”¾åå°è¯•è®¿é—®ä¸å®‰å…¨çš„æ— æœ‰å¼•ç”¨ï¼Œæ‚¨çš„ç¨‹åºå°†å°è¯•è®¿é—®å®ä¾‹æ›¾ç»æ‰€åœ¨çš„å†…å­˜ä½ç½®ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸å®‰å…¨çš„æ“ä½œã€‚ æœªæ‹¥æœ‰çš„å¯é€‰å‚è€ƒèµ„æ–™æ‚¨å¯ä»¥å°†ç±»çš„å¯é€‰å¼•ç”¨æ ‡è®°ä¸ºéæ‹¥æœ‰ã€‚å°±ARCæ‰€æœ‰æƒæ¨¡å‹è€Œè¨€ï¼Œæ— ä¸»å¯é€‰å¼•ç”¨å’Œå¼±å¼•ç”¨éƒ½å¯ä»¥åœ¨åŒä¸€ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚åŒºåˆ«åœ¨äºï¼Œå½“æ‚¨ä½¿ç”¨éæ‹¥æœ‰çš„å¯é€‰å¼•ç”¨æ—¶ï¼Œæ‚¨æœ‰è´£ä»»ç¡®ä¿å®ƒå§‹ç»ˆå¼•ç”¨æœ‰æ•ˆå¯¹è±¡æˆ–è®¾ç½®ä¸ºnilã€‚ ä»¥ä¸‹æ˜¯è·Ÿè¸ªå­¦æ ¡ç‰¹å®šéƒ¨é—¨æä¾›çš„è¯¾ç¨‹çš„ç¤ºä¾‹ï¼š class Department { â€‹ var name: String â€‹ var courses: [Course] â€‹ init(name: String) { â€‹ self.name &#x3D; name â€‹ self.courses &#x3D; [] â€‹ } } class Course { â€‹ var name: String â€‹ unowned var department: Department â€‹ unowned var nextCourse: Course? â€‹ init(name: String, in department: Department) { â€‹ self.name &#x3D; name â€‹ self.department &#x3D; department â€‹ self.nextCourse &#x3D; nil â€‹ } } Departmentå¯¹éƒ¨é—¨æä¾›çš„æ¯é—¨è¯¾ç¨‹éƒ½ä¿æŒå¼ºæœ‰åŠ›çš„å‚è€ƒã€‚åœ¨ARCæ‰€æœ‰æƒæ¨¡å¼ä¸­ï¼Œä¸€ä¸ªéƒ¨é—¨æ‹¥æœ‰è‡ªå·±çš„è¯¾ç¨‹ã€‚Courseæœ‰ä¸¤ä¸ªéè‡ªä¸»å‚è€ƒèµ„æ–™ï¼Œä¸€ä¸ªæ˜¯ç³»å‚è€ƒèµ„æ–™ï¼Œå¦ä¸€ä¸ªæ˜¯å­¦ç”Ÿåº”è¯¥å‚åŠ çš„ä¸‹ä¸€é—¨è¯¾ç¨‹ï¼›ä¸€é—¨è¯¾ç¨‹ä¸æ‹¥æœ‰å…¶ä¸­ä»»ä½•ä¸€ä¸ªå¯¹è±¡ã€‚æ¯é—¨è¯¾ç¨‹éƒ½æ˜¯æŸä¸ªéƒ¨é—¨çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤departmentå±æ€§ä¸æ˜¯å¯é€‰çš„ã€‚ç„¶è€Œï¼Œç”±äºä¸€äº›è¯¾ç¨‹æ²¡æœ‰æ¨èçš„åç»­è¯¾ç¨‹ï¼ŒnextCourseå±æ€§æ˜¯å¯é€‰çš„ã€‚ ä»¥ä¸‹æ˜¯ä½¿ç”¨è¿™äº›ç±»çš„ç¤ºä¾‹ï¼š let department &#x3D; Department(name: â€œHorticultureâ€) let intro &#x3D; Course(name: â€œSurvey of Plantsâ€, in: department) let intermediate &#x3D; Course(name: â€œGrowing Common Herbsâ€, in: department) let advanced &#x3D; Course(name: â€œCaring for Tropical Plantsâ€, in: department) intro.nextCourse &#x3D; intermediate intermediate.nextCourse &#x3D; advanced department.courses &#x3D; [intro, intermediate, advanced] ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªéƒ¨é—¨åŠå…¶ä¸‰é—¨è¯¾ç¨‹ã€‚å…¥é—¨è¯¾ç¨‹å’Œä¸­çº§è¯¾ç¨‹éƒ½æœ‰ä¸€ä¸ªå»ºè®®çš„ä¸‹ä¸€é—¨è¯¾ç¨‹å­˜å‚¨åœ¨nextCourseå±æ€§ä¸­ï¼Œè¯¥å±æ€§ä¿ç•™äº†å­¦ç”Ÿåœ¨å®Œæˆè¯¥è¯¾ç¨‹ååº”è¯¥å­¦ä¹ çš„è¯¾ç¨‹çš„æ— é€‰æ‹©å‚è€ƒã€‚ æ— äººä»»ç”¨å¼•ç”¨ä¸ä¼šå¼ºçƒˆä¿ç•™å…¶åŒ…è£…çš„ç±»å®ä¾‹ï¼Œå› æ­¤ä¸ä¼šé˜»æ­¢ARCå¯¹å®ä¾‹è¿›è¡Œäº¤æ˜“ã€‚å®ƒçš„è¡Œä¸ºä¸ARCä¸‹çš„æ— åå¼•ç”¨ç›¸åŒï¼Œåªæ˜¯æ— æ‹¥æœ‰çš„å¯é€‰å¼•ç”¨å¯ä»¥benilã€‚ Like non-optional unowned references, youâ€™re responsible for ensuring that nextCoursealways refers to a course that hasnâ€™t been deallocated. In this case, for example, when you delete a course from department.courses you also need to remove any references to it that other courses might have. æ³¨æ„ å¯é€‰å€¼çš„åŸºç¡€ç±»å‹æ˜¯Optionalï¼Œè¿™æ˜¯Swiftæ ‡å‡†åº“ä¸­çš„æšä¸¾ã€‚ç„¶è€Œï¼Œå¯é€‰æ˜¯å€¼ç±»å‹ä¸èƒ½ç”¨unownedæ ‡è®°çš„è§„åˆ™çš„ä¾‹å¤–ã€‚ åŒ…è£…ç±»çš„å¯é€‰å†…å®¹ä¸ä½¿ç”¨å¼•ç”¨è®¡æ•°ï¼Œå› æ­¤æ‚¨ä¸éœ€è¦å¯¹å¯é€‰çš„å¼ºçƒˆå¼•ç”¨ã€‚ æœªæ‹¥æœ‰çš„å¼•ç”¨å’Œéšå¼è§£å¼€çš„å¯é€‰å±æ€§ä¸Šé¢å¼±å¼•ç”¨å’Œæ— åå¼•ç”¨çš„ç¤ºä¾‹æ¶µç›–äº†ä¸¤ä¸ªæ›´å¸¸è§çš„åœºæ™¯ï¼Œåœ¨è¿™ä¸¤ä¸ªåœºæ™¯ä¸­ï¼Œæœ‰å¿…è¦æ‰“ç ´å¼ºå¼•ç”¨å‘¨æœŸã€‚ Personå’ŒApartmentç¤ºä¾‹æ˜¾ç¤ºäº†ä¸¤ç§è´¢äº§ï¼ˆå‡ä¸ºnilï¼‰å¯èƒ½å¯¼è‡´å¼ºçƒˆå‚è€ƒå‘¨æœŸçš„æƒ…å†µã€‚æœ€å¥½åœ¨å‚è€ƒè¾ƒå¼±çš„æƒ…å†µä¸‹è§£å†³æ­¤æƒ…æ™¯ã€‚ Customerå’ŒCreditCardç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ç§æƒ…å†µï¼Œå³ä¸€ä¸ªå…è®¸ä¸ºnilçš„å±æ€§å’Œå¦ä¸€ä¸ªä¸èƒ½ä¸ºnilçš„å±æ€§å¯èƒ½ä¼šå¯¼è‡´å¼ºå¤§çš„å‚è€ƒå‘¨æœŸã€‚æœ€å¥½é€šè¿‡éè‡ªæœ‰å‚è€ƒæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ç„¶è€Œï¼Œè¿˜æœ‰ç¬¬ä¸‰ç§æƒ…å†µï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªå±æ€§éƒ½åº”è¯¥å§‹ç»ˆæœ‰ä¸€ä¸ªå€¼ï¼Œä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œè¿™ä¸¤ä¸ªå±æ€§éƒ½ä¸åº”è¯¥ä¸ºnilã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ä¸€ä¸ªç±»ä¸Šçš„éæ‰€æœ‰å±æ€§ä¸å¦ä¸€ä¸ªç±»ä¸Šéšå¼è§£åŒ…è£…çš„å¯é€‰å±æ€§ç›¸ç»“åˆæ˜¯æœ‰ç”¨çš„ã€‚ è¿™ä½¿åˆå§‹åŒ–å®Œæˆåå¯ä»¥ç›´æ¥è®¿é—®ä¸¤ä¸ªå±æ€§ï¼ˆæ— éœ€å¯é€‰çš„å±•å¼€ï¼‰ï¼ŒåŒæ—¶ä»ç„¶é¿å…å¼•ç”¨å‘¨æœŸã€‚æœ¬èŠ‚å‘æ‚¨å±•ç¤ºå¦‚ä½•å»ºç«‹è¿™ç§å…³ç³»ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸¤ä¸ªç±»ï¼ŒCountryå’ŒCityï¼Œæ¯ä¸ªç±»éƒ½å­˜å‚¨å¦ä¸€ä¸ªç±»çš„å®ä¾‹ä½œä¸ºå±æ€§ã€‚åœ¨è¿™ä¸ªæ•°æ®æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªå›½å®¶å¿…é¡»å§‹ç»ˆæ‹¥æœ‰ä¸€ä¸ªé¦–éƒ½ï¼Œæ¯ä¸ªåŸå¸‚å¿…é¡»å§‹ç»ˆå±äºä¸€ä¸ªå›½å®¶ã€‚ä¸ºäº†ä»£è¡¨è¿™ä¸€ç‚¹ï¼ŒCountryçº§æœ‰ä¸€ä¸ªcapitalCityè´¢äº§ï¼ŒCityé˜¶çº§æœ‰ä¸€ä¸ªcountryè´¢äº§ï¼š class Country { â€‹ let name: String â€‹ var capitalCity: City! â€‹ init(name: String, capitalName: String) { â€‹ self.name &#x3D; name â€‹ self.capitalCity &#x3D; City(name: capitalName, country: self) â€‹ } } class City { â€‹ let name: String â€‹ unowned let country: Country â€‹ init(name: String, country: Country) { â€‹ self.name &#x3D; name â€‹ self.country &#x3D; country â€‹ } } ä¸ºäº†åœ¨ä¸¤ä¸ªç±»ä¹‹é—´å»ºç«‹ç›¸äº’ä¾å­˜å…³ç³»ï¼ŒCityçš„åˆå§‹åŒ–å™¨é‡‡ç”¨ä¸€ä¸ªå›½å®¶å®ä¾‹ï¼Œå¹¶å°†è¯¥å®ä¾‹å­˜å‚¨åœ¨å…¶countryå±æ€§ä¸­ã€‚ Cityçš„åˆå§‹åŒ–å™¨ä»Countryçš„åˆå§‹åŒ–å™¨ä¸­è°ƒç”¨ã€‚ä½†æ˜¯ï¼Œåœ¨æ–°çš„Countryå®ä¾‹å®Œå…¨åˆå§‹åŒ–ä¹‹å‰ï¼ŒCountryçš„åˆå§‹åŒ–å™¨æ— æ³•å°†selfä¼ é€’ç»™Cityåˆå§‹åŒ–å™¨ï¼Œå¦‚ä¸¤é˜¶æ®µåˆå§‹åŒ–ä¸­æ‰€è¿°ã€‚ ä¸ºäº†æ»¡è¶³è¿™ä¸€è¦æ±‚ï¼Œæ‚¨å£°æ˜Countryçš„capitalCityè´¢äº§ä¸ºéšå¼æœªåŒ…è£…çš„å¯é€‰å±æ€§ï¼Œç”±å…¶ç±»å‹æ³¨é‡Šï¼ˆCity!ï¼‰æœ«å°¾çš„æ„Ÿå¹å·è¡¨ç¤ºã€‚è¿™æ„å‘³ç€ï¼Œä¸ä»»ä½•å…¶ä»–å¯é€‰å±æ€§ä¸€æ ·ï¼ŒcapitalCityå±æ€§çš„é»˜è®¤å€¼ä¸ºnilï¼Œä½†æ— éœ€æŒ‰ç…§éšå¼æœªåŒ…è£…é€‰é¡¹æ‰€è¿°æ‰“å¼€å…¶å€¼å³å¯è®¿é—®ã€‚ Because capitalCity has a default nil value, a new Country instance is considered fully initialized as soon as the Country instance sets its name property within its initializer. This means that the Country initializer can start to reference and pass around the implicit selfproperty as soon as the name property is set. The Country initializer can therefore pass selfas one of the parameters for the City initializer when the Country initializer is setting its own capitalCity property. æ‰€æœ‰è¿™äº›éƒ½æ„å‘³ç€æ‚¨å¯ä»¥åœ¨å•ä¸ªè¯­å¥ä¸­åˆ›å»ºCountryå’ŒCityå®ä¾‹ï¼Œè€Œæ— éœ€åˆ›å»ºå¼ºå¤§çš„å‚è€ƒå‘¨æœŸï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥è®¿é—®capitalCityå±æ€§ï¼Œè€Œæ— éœ€ä½¿ç”¨æ„Ÿå¹å·æ¥è§£å¼€å…¶å¯é€‰å€¼ï¼š var country &#x3D; Country(name: â€œCanadaâ€, capitalName: â€œOttawaâ€) print(â€œ(country.name)â€™s capital city is called (country.capitalCity.name)â€) &#x2F;&#x2F; Prints â€œCanadaâ€™s capital city is called Ottawaâ€ åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨éšå¼æœªåŒ…è£…çš„å¯é€‰é€‰é¡¹æ„å‘³ç€æ»¡è¶³æ‰€æœ‰ä¸¤ç›¸ç±»åˆå§‹åŒ–å™¨è¦æ±‚ã€‚ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼ŒcapitalCityå±æ€§å¯ä»¥åƒéå¯é€‰å€¼ä¸€æ ·ä½¿ç”¨å’Œè®¿é—®ï¼ŒåŒæ—¶ä»ç„¶é¿å…äº†å¼ºå¤§çš„å‚è€ƒå‘¨æœŸã€‚ å…³é—­çš„å¼ºå‚è€ƒå‘¨æœŸæ‚¨åœ¨ä¸Šé¢çœ‹åˆ°äº†å½“ä¸¤ä¸ªç±»å®ä¾‹å±æ€§ç›¸äº’ä¿æŒå¼ºå¼•ç”¨æ—¶ï¼Œå¦‚ä½•åˆ›å»ºå¼ºå¼•ç”¨å‘¨æœŸã€‚æ‚¨è¿˜çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨å¼±å¼•ç”¨å’Œæ— åå¼•ç”¨æ¥æ‰“ç ´è¿™äº›å¼ºå¼•ç”¨å‘¨æœŸã€‚ å¦‚æœæ‚¨ä¸ºç±»å®ä¾‹çš„å±æ€§åˆ†é…é—­åŒ…ï¼Œå¹¶ä¸”è¯¥é—­åŒ…çš„ä¸»ä½“æ•è·å®ä¾‹ï¼Œä¹Ÿå¯èƒ½å‘ç”Ÿå¼ºå¼•ç”¨å‘¨æœŸã€‚å‘ç”Ÿæ­¤æ•è·å¯èƒ½æ˜¯å› ä¸ºé—­åŒ…çš„ä¸»ä½“è®¿é—®å®ä¾‹çš„å±æ€§ï¼Œå¦‚self.somePropertyï¼Œæˆ–è€…å› ä¸ºé—­åŒ…è°ƒç”¨å®ä¾‹ä¸Šçš„æ–¹æ³•ï¼Œå¦‚self.someMethod()ã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œè¿™äº›è®¿é—®éƒ½ä¼šå¯¼è‡´é—­åŒ…â€œæ•è·â€selfï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªå¼ºå¤§çš„å‚è€ƒå‘¨æœŸã€‚ å‡ºç°è¿™ç§å¼ºå¤§çš„å‚è€ƒå‘¨æœŸæ˜¯å› ä¸ºé—­åŒ…ä¸ç±»ä¸€æ ·æ˜¯å¼•ç”¨ç±»å‹ã€‚å½“æ‚¨ä¸ºå±æ€§åˆ†é…é—­åŒ…æ—¶ï¼Œæ‚¨å°†ä¸ºè¯¥é—­åŒ…åˆ†é…å¼•ç”¨ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œè¿™æ˜¯ä¸ä¸Šé¢ç›¸åŒçš„é—®é¢˜â€”â€”ä¸¤ä¸ªå¼ºæœ‰åŠ›çš„å¼•ç”¨è®©å½¼æ­¤ä¿æŒæ´»åŠ›ã€‚ç„¶è€Œï¼Œè¿™æ¬¡ä¸æ˜¯ä¸¤ä¸ªç±»å®ä¾‹ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»å®ä¾‹å’Œä¸€ä¸ªé—­åŒ…ï¼Œå®ƒä»¬è®©å½¼æ­¤ä¿æŒæ´»åŠ›ã€‚ Swiftä¸ºè¿™ä¸ªé—®é¢˜æä¾›äº†ä¸€ä¸ªä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œç§°ä¸ºé—­åŒ…æ•è·åˆ—è¡¨ã€‚ç„¶è€Œï¼Œåœ¨æ‚¨å­¦ä¹ å¦‚ä½•é€šè¿‡é—­åŒ…æ•è·åˆ—è¡¨æ‰“ç ´å¼ºå¤§çš„å‚è€ƒå‘¨æœŸä¹‹å‰ï¼Œäº†è§£å¦‚ä½•å¯¼è‡´è¿™æ ·çš„å¾ªç¯æ˜¯æœ‰ç”¨çš„ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†åœ¨ä½¿ç”¨å¼•ç”¨selfçš„é—­åŒ…æ—¶å¦‚ä½•åˆ›å»ºå¼ºå¼•ç”¨å‘¨æœŸã€‚æ­¤ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºHTMLElementç±»ï¼Œè¯¥ç±»ä¸ºHTMLæ–‡æ¡£ä¸­çš„å•ä¸ªå…ƒç´ æä¾›äº†ä¸€ä¸ªç®€å•çš„æ¨¡å‹ï¼š class HTMLElement { â€‹ let name: String â€‹ let text: String? â€‹ lazy var asHTML: () -&gt; String &#x3D; { â€‹ if let text &#x3D; self.text { â€‹ return â€œ&lt;(self.name)&gt;(text)&lt;&#x2F;(self.name)&gt;â€ â€‹ } else { â€‹ return â€œ&lt;(self.name) &#x2F;&gt;â€ â€‹ } â€‹ } â€‹ init(name: String, text: String? &#x3D; nil) { â€‹ self.name &#x3D; name â€‹ self.text &#x3D; text â€‹ } â€‹ deinit { â€‹ print(â€œ(name) is being deinitializedâ€) â€‹ } } HTMLElementç±»å®šä¹‰äº†ä¸€ä¸ªnameå±æ€§ï¼Œè¯¥å±æ€§æŒ‡ç¤ºå…ƒç´ çš„åç§°ï¼Œä¾‹å¦‚æ ‡é¢˜å…ƒç´ çš„&quot;h1&quot;â€ï¼Œæ®µè½å…ƒç´ çš„&quot;p&quot;æ¢è¡Œç¬¦å…ƒç´ çš„&quot;br&quot;â€ã€‚HTMLElementè¿˜å®šä¹‰äº†ä¸€ä¸ªå¯é€‰çš„textå±æ€§ï¼Œæ‚¨å¯ä»¥å°†å…¶è®¾ç½®ä¸ºè¡¨ç¤ºåœ¨è¯¥HTMLå…ƒç´ ä¸­æ¸²æŸ“çš„æ–‡æœ¬çš„å­—ç¬¦ä¸²ã€‚ é™¤äº†è¿™ä¸¤ä¸ªç®€å•çš„å±æ€§å¤–ï¼ŒHTMLElementç±»è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸ºasHTMLæƒ°æ€§å±æ€§ã€‚æ­¤å±æ€§å¼•ç”¨å°†nameå’Œtextç»„åˆæˆHTMLå­—ç¬¦ä¸²ç‰‡æ®µçš„é—­åŒ…ã€‚asHTMLå±æ€§ç±»å‹ä¸º()-&gt;Stringï¼Œæˆ–â€œä¸æ¥å—å‚æ•°å¹¶è¿”å›Stringå€¼çš„å‡½æ•°â€ã€‚ By default, the asHTML property is assigned a closure that returns a string representation of an HTML tag. This tag contains the optional text value if it exists, or no text content if textdoesnâ€™t exist. For a paragraph element, the closure would return &quot;&lt;p&gt;some text&lt;/p&gt;&quot; or &quot;&lt;p /&gt;&quot;, depending on whether the text property equals &quot;some text&quot; or nil. asHTMLå±æ€§çš„å‘½åå’Œä½¿ç”¨æœ‰ç‚¹åƒå®ä¾‹æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œç”±äºasHTMLæ˜¯ä¸€ä¸ªé—­åŒ…å±æ€§ï¼Œè€Œä¸æ˜¯å®ä¾‹æ–¹æ³•ï¼Œå¦‚æœæ‚¨æƒ³æ›´æ”¹ç‰¹å®šHTMLå…ƒç´ çš„HTMLæ¸²æŸ“ï¼Œæ‚¨å¯ä»¥å°†asHTMLå±æ€§çš„é»˜è®¤å€¼æ›¿æ¢ä¸ºè‡ªå®šä¹‰é—­åŒ…ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœtextå±æ€§ä¸ºnilï¼Œåˆ™å¯ä»¥å°†asHTMLå±æ€§è®¾ç½®ä¸ºé»˜è®¤ä¸ºæŸäº›æ–‡æœ¬çš„é—­åŒ…ï¼Œä»¥é˜²æ­¢è¡¨ç¤ºè¿”å›ç©ºçš„HTMLæ ‡ç­¾ï¼š let heading &#x3D; HTMLElement(name: â€œh1â€) let defaultText &#x3D; â€œsome default textâ€ heading.asHTML &#x3D; { â€‹ return â€œ&lt;(heading.name)&gt;(heading.text ?? defaultText)&lt;&#x2F;(heading.name)&gt;â€ } print(heading.asHTML()) &#x2F;&#x2F; Prints â€œsome default textâ€œ æ³¨æ„ asHTMLå±æ€§è¢«å£°æ˜ä¸ºæƒ°æ€§å±æ€§ï¼Œå› ä¸ºåªæœ‰å½“å…ƒç´ å®é™…ä¸Šéœ€è¦æ¸²æŸ“ä¸ºæŸäº›HTMLè¾“å‡ºç›®æ ‡çš„å­—ç¬¦ä¸²å€¼æ—¶ï¼Œæ‰éœ€è¦å®ƒã€‚asHTMLæ˜¯ä¸€ä¸ªæƒ°æ€§å±æ€§ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨é»˜è®¤é—­åŒ…ä¸­å¼•ç”¨selfï¼Œå› ä¸ºåœ¨åˆå§‹åŒ–å®Œæˆå¹¶å·²çŸ¥selfå­˜åœ¨ä¹‹å‰ï¼Œæ‰ä¼šè®¿é—®æƒ°æ€§å±æ€§ã€‚ HTMLElementç±»æä¾›äº†ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œå®ƒä½¿ç”¨nameå‚æ•°å’Œï¼ˆå¦‚æœéœ€è¦ï¼‰textå‚æ•°æ¥åˆå§‹åŒ–æ–°å…ƒç´ ã€‚è¯¥ç±»è¿˜å®šä¹‰äº†ä¸€ä¸ªå»åˆå§‹åŒ–å™¨ï¼Œè¯¥åˆå§‹åŒ–å™¨æ‰“å°ä¸€æ¡æ¶ˆæ¯ï¼Œä»¥ä¾¿åœ¨HTMLElementå®ä¾‹è¢«é‡Šæ”¾æ—¶æ˜¾ç¤ºã€‚ ä»¥ä¸‹æ˜¯æ‚¨å¦‚ä½•ä½¿ç”¨HTMLElementç±»åˆ›å»ºå’Œæ‰“å°æ–°å®ä¾‹çš„æ–¹æ³•ï¼š var paragraph: HTMLElement? &#x3D; HTMLElement(name: â€œpâ€, text: â€œhello, worldâ€) print(paragraph!.asHTML()) &#x2F;&#x2F; Prints â€œhello, worldâ€œ æ³¨æ„ ä¸Šé¢çš„paragraphå˜é‡è¢«å®šä¹‰ä¸ºå¯é€‰çš„HTMLElementï¼Œå› æ­¤å¯ä»¥å°†å…¶è®¾ç½®ä¸ºnilï¼Œä»¥è¯æ˜å­˜åœ¨å¼ºå¼•ç”¨å‘¨æœŸã€‚ ä¸å¹¸çš„æ˜¯ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼ŒHTMLElementç±»åœ¨HTMLElementå®ä¾‹å’Œç”¨äºå…¶é»˜è®¤ä¸ºasHTMLå€¼çš„é—­åŒ…ä¹‹é—´åˆ›å»ºäº†å¼ºå¤§çš„å‚è€ƒå‘¨æœŸã€‚ä»¥ä¸‹æ˜¯å‘¨æœŸçš„å¤–è§‚ï¼š å®ä¾‹çš„asHTMLå±æ€§å¯¹å…¶é—­åŒ…æœ‰å¾ˆå¼ºçš„å¼•ç”¨ã€‚ç„¶è€Œï¼Œç”±äºé—­åŒ…åœ¨å…¶ä¸»ä½“å†…å¼•ç”¨selfï¼ˆä½œä¸ºå¼•ç”¨self.nameå’Œself.textçš„ä¸€ç§æ–¹å¼ï¼‰ï¼Œé—­åŒ…æ•è·selfï¼Œè¿™æ„å‘³ç€å®ƒå…·æœ‰å¯¹HTMLElementå®ä¾‹çš„å¼ºçƒˆå¼•ç”¨ã€‚ä¸¤è€…ä¹‹é—´åˆ›é€ äº†ä¸€ä¸ªå¼ºå¤§çš„å‚è€ƒå‘¨æœŸã€‚ï¼ˆæœ‰å…³åœ¨é—­åŒ…ä¸­æ•è·å€¼çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ•è·å€¼ã€‚ï¼‰ æ³¨æ„ å°½ç®¡é—­åŒ…å¤šæ¬¡å¼•ç”¨selfï¼Œä½†å®ƒåªæ•è·ä¸€ä¸ªå¯¹HTMLElementå®ä¾‹çš„å¼ºçƒˆå¼•ç”¨ã€‚ å¦‚æœæ‚¨å°†paragraphå˜é‡è®¾ç½®ä¸ºnilå¹¶ç ´åå…¶å¯¹HTMLElementå®ä¾‹çš„å¼ºå¼•ç”¨ï¼Œåˆ™ç”±äºå¼ºå¼•ç”¨å‘¨æœŸï¼ŒHTMLElementå®ä¾‹åŠå…¶é—­åŒ…éƒ½ä¸ä¼šè¢«é‡Šæ”¾ï¼š paragraph &#x3D; nil Note that the message in the HTMLElement deinitializer isnâ€™t printed, which shows that the HTMLElement instance isnâ€™t deallocated. è§£å†³å…³é—­çš„å¼ºå‚è€ƒå‘¨æœŸé€šè¿‡å®šä¹‰æ•è·åˆ—è¡¨ä½œä¸ºé—­åŒ…å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼Œæ‚¨å¯ä»¥è§£å†³é—­åŒ…å’Œç±»å®ä¾‹ä¹‹é—´çš„å¼ºå¼•ç”¨å‘¨æœŸã€‚æ•è·åˆ—è¡¨å®šä¹‰äº†åœ¨é—­åŒ…ä¸»ä½“ä¸­æ•è·ä¸€ä¸ªæˆ–å¤šä¸ªå¼•ç”¨ç±»å‹æ—¶ä½¿ç”¨çš„è§„åˆ™ã€‚ä¸ä¸¤ä¸ªç±»å®ä¾‹ä¹‹é—´çš„å¼ºå¼•ç”¨å‘¨æœŸä¸€æ ·ï¼Œæ‚¨å°†æ¯ä¸ªæ•è·çš„å¼•ç”¨å£°æ˜ä¸ºå¼±å¼•ç”¨æˆ–éè‡ªæœ‰å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¼ºå¼•ç”¨ã€‚å¼±æˆ–æ— æƒçš„é€‚å½“é€‰æ‹©å–å†³äºä»£ç ä¸åŒéƒ¨åˆ†ä¹‹é—´çš„å…³ç³»ã€‚ æ³¨æ„ æ¯å½“æ‚¨å¼•ç”¨é—­åŒ…ä¸­çš„selfæˆå‘˜æ—¶ï¼ŒSwiftè¦æ±‚æ‚¨ç¼–å†™self.somePropertyæˆ–self.someMethod()ï¼ˆè€Œä¸æ˜¯justsomePropertyæˆ–someMethod()ï¼‰ã€‚è¿™æœ‰åŠ©äºä½ è®°ä½ï¼Œå¶ç„¶æ•æ‰selfæ˜¯å¯èƒ½çš„ã€‚ å®šä¹‰æ•è·åˆ—è¡¨Each item in a capture list is a pairing of the weak or unowned keyword with a reference to a class instance (such as self) or a variable initialized with some value (such as delegate = self.delegate). These pairings are written within a pair of square braces, separated by commas. å°†æ•è·åˆ—è¡¨æ”¾åœ¨é—­åŒ…çš„å‚æ•°åˆ—è¡¨ä¹‹å‰ï¼Œå¦‚æœæä¾›äº†å®ƒä»¬ï¼Œåˆ™è¿”å›ç±»å‹ï¼š lazy var someClosure &#x3D; { â€‹ [unowned self, weak delegate &#x3D; self.delegate] â€‹ (index: Int, stringToProcess: String) -&gt; String in â€‹ &#x2F;&#x2F; closure body goes here } å¦‚æœé—­åŒ…æ²¡æœ‰æŒ‡å®šå‚æ•°åˆ—è¡¨æˆ–è¿”å›ç±»å‹ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æ¨æ–­å‡ºæ¥ï¼Œè¯·å°†æ•è·åˆ—è¡¨æ”¾åœ¨é—­åŒ…çš„å¼€å¤´ï¼Œåè·Ÿå…³é”®å­—ï¼š lazy var someClosure &#x3D; { â€‹ [unowned self, weak delegate &#x3D; self.delegate] in â€‹ &#x2F;&#x2F; closure body goes here } å¼±å¼•ç”¨å’Œæ— æ‰€æœ‰å¼•ç”¨å½“é—­åŒ…åŠå…¶æ•è·çš„å®ä¾‹å§‹ç»ˆç›¸äº’å¼•ç”¨æ—¶ï¼Œå°†é—­åŒ…ä¸­çš„æ•è·å®šä¹‰ä¸ºéè‡ªå¼•ç”¨ï¼Œå¹¶ä¸”å§‹ç»ˆåŒæ—¶è¢«é‡Šæ”¾ã€‚ ç›¸åï¼Œå½“æ•è·çš„å¼•ç”¨åœ¨æœªæ¥æŸä¸ªæ—¶å€™å¯èƒ½å˜æˆnilï¼Œå°†æ•è·å®šä¹‰ä¸ºå¼±å¼•ç”¨ã€‚å¼±å¼•ç”¨å§‹ç»ˆæ˜¯å¯é€‰ç±»å‹ï¼Œå½“å®ƒä»¬å¼•ç”¨çš„å®ä¾‹è¢«é‡Šæ”¾æ—¶ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨å˜æˆnilã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿæ£€æŸ¥å®ƒä»¬æ˜¯å¦å­˜åœ¨äºé—­åˆä½“ä¸­ã€‚ æ³¨æ„ å¦‚æœæ•è·çš„å¼•ç”¨æ°¸è¿œä¸ä¼šå˜æˆnilï¼Œåˆ™åº”å§‹ç»ˆå°†å…¶æ•è·ä¸ºéæ‹¥æœ‰çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¼±å¼•ç”¨ã€‚ æ— è‡ªæœ‰å¼•ç”¨æ˜¯ä»ä¸Šé¢çš„å¼ºå¼•ç”¨å‘¨æœŸåˆ°ä¸Šæ–‡çš„HTMLElementç¤ºä¾‹ä¸­è§£æå¼ºå¼•ç”¨å‘¨æœŸçš„é€‚å½“æ•è·æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯æ‚¨ç¼–å†™HTMLElementç±»ä»¥é¿å…å¾ªç¯çš„æ–¹æ³•ï¼š class HTMLElement { â€‹ let name: String â€‹ let text: String? â€‹ lazy var asHTML: () -&gt; String &#x3D; { â€‹ [unowned self] in â€‹ if let text &#x3D; self.text { â€‹ return â€œ&lt;(self.name)&gt;(text)&lt;&#x2F;(self.name)&gt;â€ â€‹ } else { â€‹ return â€œ&lt;(self.name) &#x2F;&gt;â€ â€‹ } â€‹ } â€‹ init(name: String, text: String? &#x3D; nil) { â€‹ self.name &#x3D; name â€‹ self.text &#x3D; text â€‹ } â€‹ deinit { â€‹ print(â€œ(name) is being deinitializedâ€) â€‹ } } é™¤äº†åœ¨asHTMLé—­åŒ…ä¸­æ·»åŠ æ•è·åˆ—è¡¨å¤–ï¼ŒHTMLElementçš„å®ç°ä¸ä¹‹å‰çš„å®ç°ç›¸åŒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•è·åˆ—è¡¨æ˜¯[unownedself]ï¼Œè¿™æ„å‘³ç€â€œæ•è·è‡ªæˆ‘ä½œä¸ºéè‡ªæœ‰å‚è€ƒï¼Œè€Œä¸æ˜¯å¼ºå¼•ç”¨â€ã€‚ æ‚¨å¯ä»¥åƒä»¥å‰ä¸€æ ·åˆ›å»ºå’Œæ‰“å°HTMLElementå®ä¾‹ï¼š var paragraph: HTMLElement? &#x3D; HTMLElement(name: â€œpâ€, text: â€œhello, worldâ€) print(paragraph!.asHTML()) &#x2F;&#x2F; Prints â€œhello, worldâ€œ ä»¥ä¸‹æ˜¯æ•è·åˆ—è¡¨åˆ°ä½åå‚è€ƒèµ„æ–™çš„å¤–è§‚ï¼š è¿™ä¸€æ¬¡ï¼Œé—­åŒ…æ•è·selfæ˜¯ä¸€ä¸ªéæ‹¥æœ‰çš„å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šå¼ºçƒˆä¿ç•™å®ƒæ•è·çš„HTMLElementå®ä¾‹ã€‚å¦‚æœæ‚¨å°†paragraphå˜é‡çš„å¼ºå¼•ç”¨è®¾ç½®ä¸ºnilï¼Œåˆ™HTMLElementå®ä¾‹å°†è¢«é‡Šæ”¾ï¼Œä»ä»¥ä¸‹ç¤ºä¾‹ä¸­æ‰“å°å…¶å»åˆå§‹åŒ–å™¨æ¶ˆæ¯ä¸­å¯ä»¥çœ‹å‡ºï¼š paragraph &#x3D; nil &#x2F;&#x2F; Prints â€œp is being deinitializedâ€ æœ‰å…³æ•è·åˆ—è¡¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ•è·åˆ—è¡¨ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ è®¿é—®æ§åˆ¶","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-è®¿é—®æ§åˆ¶","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.294Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-è®¿é—®æ§åˆ¶/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/AccessControl.html è®¿é—®æ§åˆ¶é™åˆ¶ä»å…¶ä»–æºæ–‡ä»¶å’Œæ¨¡å—ä¸­çš„ä»£ç è®¿é—®éƒ¨åˆ†ä»£ç ã€‚æ­¤åŠŸèƒ½ä½¿æ‚¨èƒ½å¤Ÿéšè—ä»£ç çš„å®ç°è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶æŒ‡å®šå¯ä»¥è®¿é—®å’Œä½¿ç”¨è¯¥ä»£ç çš„é¦–é€‰ç•Œé¢ã€‚ æ‚¨å¯ä»¥ä¸ºå•ä¸ªç±»å‹ï¼ˆç±»ã€ç»“æ„å’Œæšä¸¾ï¼‰ä»¥åŠå±äºè¿™äº›ç±»å‹çš„å±æ€§ã€æ–¹æ³•ã€åˆå§‹åŒ–å™¨å’Œä¸‹æ ‡åˆ†é…ç‰¹å®šçš„è®¿é—®çº§åˆ«ã€‚åè®®å¯ä»¥é™åˆ¶åœ¨ç‰¹å®šä¸Šä¸‹æ–‡ä¸­ï¼Œå…¨å±€å¸¸é‡ã€å˜é‡å’Œå‡½æ•°ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ é™¤äº†æä¾›ä¸åŒçº§åˆ«çš„è®¿é—®æ§åˆ¶å¤–ï¼ŒSwiftè¿˜é€šè¿‡ä¸ºå…¸å‹åœºæ™¯æä¾›é»˜è®¤è®¿é—®çº§åˆ«æ¥å‡å°‘æŒ‡å®šæ˜¾å¼è®¿é—®æ§åˆ¶çº§åˆ«çš„éœ€æ±‚ã€‚äº‹å®ä¸Šï¼Œå¦‚æœæ‚¨æ­£åœ¨ç¼–å†™å•ä¸ªç›®æ ‡åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯èƒ½æ ¹æœ¬ä¸éœ€è¦æŒ‡å®šæ˜¾å¼è®¿é—®æ§åˆ¶çº§åˆ«ã€‚ æ³¨æ„ ä»£ç ä¸­å¯ä»¥å¯¹å…¶åº”ç”¨è®¿é—®æ§åˆ¶çš„å„ä¸ªæ–¹é¢ï¼ˆå±æ€§ã€ç±»å‹ã€å‡½æ•°ç­‰ï¼‰åœ¨ä»¥ä¸‹ç« èŠ‚ä¸­ç§°ä¸ºâ€œå®ä½“â€ï¼Œä»¥æ–¹ä¾¿ç®€æ´ã€‚ æ¨¡å—å’Œæºæ–‡ä»¶Swiftçš„è®¿é—®æ§åˆ¶æ¨¡å‹åŸºäºæ¨¡å—å’Œæºæ–‡ä»¶çš„æ¦‚å¿µã€‚ æ¨¡å—æ˜¯ä»£ç åˆ†å‘çš„å•ä¸ªå•å…ƒï¼Œå³ä¸€ä¸ªæ¡†æ¶æˆ–åº”ç”¨ç¨‹åºï¼Œä½œä¸ºå•ä¸ªå•å…ƒæ„å»ºå’Œå‘å¸ƒï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å¦ä¸€ä¸ªå…·æœ‰Swiftimportå…³é”®å­—çš„æ¨¡å—å¯¼å…¥ã€‚ Xcode ä¸­çš„æ¯ä¸ªæ„å»ºç›®æ ‡ï¼ˆå¦‚ app å¥—è£…æˆ–æ¡†æ¶ï¼‰åœ¨ Swift ä¸­è¢«è§†ä¸ºä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ã€‚å¦‚æœæ‚¨å°†åº”ç”¨ç¨‹åºä»£ç çš„å„ä¸ªæ–¹é¢ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¡†æ¶ç»„åˆåœ¨ä¸€èµ·â€”â€”ä¹Ÿè®¸æ˜¯ä¸ºäº†åœ¨å¤šä¸ªåº”ç”¨ç¨‹åºä¸­å°è£…å’Œé‡ç”¨è¯¥ä»£ç â€”â€”é‚£ä¹ˆæ‚¨åœ¨è¯¥æ¡†æ¶ä¸­å®šä¹‰çš„æ‰€æœ‰å†…å®¹éƒ½å°†åœ¨åº”ç”¨ç¨‹åºä¸­å¯¼å…¥å’Œä½¿ç”¨æ—¶ï¼Œæˆ–è€…åœ¨å¦ä¸€ä¸ªæ¡†æ¶ä¸­ä½¿ç”¨æ—¶ï¼Œéƒ½å°†æˆä¸ºå•ç‹¬æ¨¡å—çš„ä¸€éƒ¨åˆ†ã€‚ æºæ–‡ä»¶æ˜¯æ¨¡å—ä¸­çš„å•ä¸ªSwiftæºä»£ç æ–‡ä»¶ï¼ˆå®é™…ä¸Šï¼Œæ˜¯åº”ç”¨ç¨‹åºæˆ–æ¡†æ¶ä¸­çš„å•ä¸ªæ–‡ä»¶ï¼‰ã€‚è™½ç„¶åœ¨å•ç‹¬çš„æºæ–‡ä»¶ä¸­å®šä¹‰å•ä¸ªç±»å‹å¾ˆå¸¸è§ï¼Œä½†å•ä¸ªæºæ–‡ä»¶å¯ä»¥åŒ…å«å¤šç§ç±»å‹ã€å‡½æ•°ç­‰çš„å®šä¹‰ã€‚ è®¿é—®çº§åˆ«Swiftä¸ºæ‚¨çš„ä»£ç ä¸­çš„å®ä½“æä¾›äº†äº”ä¸ªä¸åŒçš„è®¿é—®çº§åˆ«ã€‚è¿™äº›è®¿é—®çº§åˆ«ç›¸å¯¹äºå®šä¹‰å®ä½“çš„æºæ–‡ä»¶ï¼Œä¹Ÿç›¸å¯¹äºæºæ–‡ä»¶æ‰€å±çš„æ¨¡å—ã€‚ å¼€æ”¾è®¿é—®**å’Œå…¬å…±è®¿é—®ä½¿å®ä½“èƒ½å¤Ÿåœ¨å…¶å®šä¹‰æ¨¡å—çš„ä»»ä½•æºæ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨å¯¼å…¥å®šä¹‰æ¨¡å—çš„å¦ä¸€ä¸ªæ¨¡å—çš„æºæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚åœ¨æŒ‡å®šæ¡†æ¶çš„å…¬å…±æ¥å£æ—¶ï¼Œæ‚¨é€šå¸¸ä½¿ç”¨å¼€æ”¾æˆ–å…¬å…±è®¿é—®ã€‚å¼€æ”¾æ¥å…¥å’Œå…¬å…±è®¿é—®ä¹‹é—´çš„åŒºåˆ«å¦‚ä¸‹ã€‚ å†…éƒ¨è®¿é—®ä½¿å®ä½“èƒ½å¤Ÿåœ¨å…¶å®šä¹‰æ¨¡å—çš„ä»»ä½•æºæ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œä½†ä¸èƒ½åœ¨è¯¥æ¨¡å—ä»¥å¤–çš„ä»»ä½•æºæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚åœ¨å®šä¹‰åº”ç”¨ç¨‹åºæˆ–æ¡†æ¶çš„å†…éƒ¨ç»“æ„æ—¶ï¼Œæ‚¨é€šå¸¸ä½¿ç”¨å†…éƒ¨è®¿é—®ã€‚ æ–‡ä»¶ä¸“ç”¨è®¿é—®å°†å®ä½“çš„ä½¿ç”¨é™åˆ¶åœ¨è‡ªå·±çš„å®šä¹‰æºæ–‡ä»¶ä¸Šã€‚å½“è¿™äº›è¯¦ç»†ä¿¡æ¯åœ¨æ•´ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨æ—¶ï¼Œä½¿ç”¨æ–‡ä»¶ä¸“ç”¨è®¿é—®æ¥éšè—ç‰¹å®šåŠŸèƒ½çš„å®ç°ç»†èŠ‚ã€‚ ç§äººè®¿é—®å°†å®ä½“çš„ä½¿ç”¨é™åˆ¶ä¸ºå°é—­å£°æ˜ï¼Œä»¥åŠåŒä¸€æ–‡ä»¶ä¸­è¯¥å£°æ˜çš„æ‰©å±•åã€‚å½“ç‰¹å®šåŠŸèƒ½çš„å®ç°ç»†èŠ‚ä»…åœ¨å•ä¸ªå£°æ˜ä¸­ä½¿ç”¨æ—¶ï¼Œä½¿ç”¨ç§æœ‰è®¿é—®æ¥éšè—è¿™äº›åŠŸèƒ½çš„å®ç°ç»†èŠ‚ã€‚ å¼€æ”¾è®¿é—®æ˜¯æœ€é«˜ï¼ˆé™åˆ¶æœ€å°‘ï¼‰çš„è®¿é—®çº§åˆ«ï¼Œç§äººè®¿é—®æ˜¯æœ€ä½ï¼ˆé™åˆ¶æœ€å¼ºï¼‰çš„è®¿é—®çº§åˆ«ã€‚ å¼€æ”¾è®¿é—®ä»…é€‚ç”¨äºç±»å’Œç±»æˆå‘˜ï¼Œå®ƒä¸å…¬å…±è®¿é—®ä¸åŒï¼Œå…è®¸æ¨¡å—å¤–çš„ä»£ç å­ç±»å’Œé‡å†™ï¼Œå¦‚ä¸‹æ–‡åœ¨å­ç±»ä¸­è®¨è®ºã€‚å°†ç±»æ ‡è®°ä¸ºå¼€æ”¾æ˜ç¡®è¡¨ç¤ºæ‚¨è€ƒè™‘äº†ä½¿ç”¨è¯¥ç±»ä½œä¸ºè¶…ç±»çš„å…¶ä»–æ¨¡å—ä»£ç çš„å½±å“ï¼Œå¹¶ä¸”æ‚¨ç›¸åº”åœ°è®¾è®¡äº†ç±»çš„ä»£ç ã€‚ è®¿é—®çº§åˆ«çš„æŒ‡å¯¼åŸåˆ™Swiftä¸­çš„è®¿é—®çº§åˆ«éµå¾ªä¸€ä¸ªæ€»ä½“æŒ‡å¯¼åŸåˆ™ï¼šä»»ä½•å®ä½“éƒ½ä¸èƒ½ç”¨å¦ä¸€ä¸ªè®¿é—®çº§åˆ«è¾ƒä½ï¼ˆé™åˆ¶æ€§æ›´å¼ºï¼‰çš„å®ä½“æ¥å®šä¹‰ã€‚ ä¾‹å¦‚ï¼š å…¬å…±å˜é‡ä¸èƒ½å®šä¹‰ä¸ºå…·æœ‰å†…éƒ¨ã€æ–‡ä»¶ç§æœ‰æˆ–ç§æœ‰ç±»å‹ï¼Œå› ä¸ºè¯¥ç±»å‹å¯èƒ½å¹¶éåœ¨ä½¿ç”¨å…¬å…±å˜é‡çš„ä»»ä½•åœ°æ–¹éƒ½å¯ç”¨ã€‚ å‡½æ•°çš„è®¿é—®çº§åˆ«ä¸èƒ½é«˜äºå…¶å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ï¼Œå› ä¸ºè¯¥å‡½æ•°å¯ä»¥åœ¨å…¶ç»„æˆç±»å‹å¯¹å‘¨å›´ä»£ç ä¸å¯ç”¨çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ ä¸‹æ–‡è¯¦ç»†ä»‹ç»äº†è¯¥æŒ‡å¯¼åŸåˆ™å¯¹è¯­è¨€ä¸åŒæ–¹é¢çš„å…·ä½“å½±å“ã€‚ é»˜è®¤è®¿é—®çº§åˆ«å¦‚æœæ‚¨è‡ªå·±æ²¡æœ‰æŒ‡å®šæ˜¾å¼è®¿é—®çº§åˆ«ï¼Œä»£ç ä¸­çš„æ‰€æœ‰å®ä½“ï¼ˆå¦‚æœ¬ç« åé¢æ‰€è¿°ï¼Œæœ‰å‡ ä¸ªç‰¹å®šä¾‹å¤–ï¼‰éƒ½æœ‰å†…éƒ¨çš„é»˜è®¤è®¿é—®çº§åˆ«ã€‚å› æ­¤ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæ‚¨ä¸éœ€è¦åœ¨ä»£ç ä¸­æŒ‡å®šæ˜¾å¼è®¿é—®çº§åˆ«ã€‚ å•ç›®æ ‡åº”ç”¨ç¨‹åºçš„è®¿é—®çº§åˆ«å½“æ‚¨ç¼–å†™ä¸€ä¸ªç®€å•çš„å•ç›®æ ‡åº”ç”¨ç¨‹åºæ—¶ï¼Œåº”ç”¨ç¨‹åºä¸­çš„ä»£ç é€šå¸¸åœ¨åº”ç”¨ç¨‹åºä¸­ç‹¬ç«‹ï¼Œä¸éœ€è¦åœ¨åº”ç”¨ç¨‹åºæ¨¡å—ä¹‹å¤–æä¾›ã€‚å†…éƒ¨çš„é»˜è®¤è®¿é—®çº§åˆ«å·²ç»ç¬¦åˆæ­¤è¦æ±‚ã€‚å› æ­¤ï¼Œæ‚¨ä¸éœ€è¦æŒ‡å®šè‡ªå®šä¹‰è®¿é—®çº§åˆ«ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†ä»£ç çš„æŸäº›éƒ¨åˆ†æ ‡è®°ä¸ºç§æœ‰æˆ–ç§æœ‰æ–‡ä»¶ï¼Œä»¥ä¾¿ä»åº”ç”¨ç¨‹åºæ¨¡å—ä¸­çš„å…¶ä»–ä»£ç ä¸­éšè—å…¶å®ç°è¯¦ç»†ä¿¡æ¯ã€‚ æ¡†æ¶çš„è®¿é—®çº§åˆ«å½“æ‚¨å¼€å‘æ¡†æ¶æ—¶ï¼Œè¯·å°†è¯¥æ¡†æ¶çš„é¢å‘å…¬ä¼—çš„ç•Œé¢æ ‡è®°ä¸ºå¼€æ”¾æˆ–å…¬å…±ï¼Œä»¥ä¾¿å…¶ä»–æ¨¡å—ï¼ˆä¾‹å¦‚å¯¼å…¥æ¡†æ¶çš„åº”ç”¨ç¨‹åºï¼‰å¯ä»¥æŸ¥çœ‹å’Œè®¿é—®ã€‚è¿™ä¸ªé¢å‘å…¬ä¼—çš„ç•Œé¢æ˜¯æ¡†æ¶çš„åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼ˆæˆ–APIï¼‰ã€‚ æ³¨æ„ æ¡†æ¶çš„ä»»ä½•å†…éƒ¨å®ç°è¯¦ç»†ä¿¡æ¯ä»ç„¶å¯ä»¥ä½¿ç”¨å†…éƒ¨çš„é»˜è®¤è®¿é—®çº§åˆ«ï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³ä»æ¡†æ¶å†…éƒ¨ä»£ç çš„å…¶ä»–éƒ¨åˆ†éšè—å®ƒä»¬ï¼Œå¯ä»¥æ ‡è®°ä¸ºç§æœ‰æˆ–æ–‡ä»¶ç§æœ‰ã€‚åªæœ‰å½“æ‚¨å¸Œæœ›å®ä½“æˆä¸ºæ¡†æ¶APIçš„ä¸€éƒ¨åˆ†æ—¶ï¼Œæ‚¨æ‰éœ€è¦å°†å…¶æ ‡è®°ä¸ºå¼€æ”¾æˆ–å…¬å…±å®ä½“ã€‚ å•å…ƒæµ‹è¯•ç›®æ ‡çš„è®¿é—®çº§åˆ«å½“æ‚¨ç¼–å†™å…·æœ‰å•å…ƒæµ‹è¯•ç›®æ ‡çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œåº”ç”¨ç¨‹åºä¸­çš„ä»£ç éœ€è¦æä¾›ç»™è¯¥æ¨¡å—æ‰èƒ½è¿›è¡Œæµ‹è¯•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå…¶ä»–æ¨¡å—åªèƒ½è®¿é—®æ ‡è®°ä¸ºå¼€æ”¾æˆ–å…¬å…±çš„å®ä½“ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ä½¿ç”¨@testableå±æ€§æ ‡è®°äº§å“æ¨¡å—çš„å¯¼å…¥å£°æ˜ï¼Œå¹¶åœ¨å¯ç”¨æµ‹è¯•çš„æƒ…å†µä¸‹ç¼–è¯‘è¯¥äº§å“æ¨¡å—ï¼Œåˆ™å•å…ƒæµ‹è¯•ç›®æ ‡å¯ä»¥è®¿é—®ä»»ä½•å†…éƒ¨å®ä½“ã€‚ è®¿é—®æ§åˆ¶è¯­æ³•é€šè¿‡åœ¨å®ä½“å£°æ˜çš„å¼€å¤´æ”¾ç½®ä¸€ä¸ªopenã€publicã€internalã€fileprivateæˆ–privateä¿®é¥°ç¬¦æ¥å®šä¹‰å®ä½“çš„è®¿é—®çº§åˆ«ã€‚ public class SomePublicClass {} internal class SomeInternalClass {} fileprivate class SomeFilePrivateClass {} private class SomePrivateClass {} public var somePublicVariable &#x3D; 0 internal let someInternalConstant &#x3D; 0 fileprivate func someFilePrivateFunction() {} private func somePrivateFunction() {} é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™é»˜è®¤è®¿é—®çº§åˆ«æ˜¯å†…éƒ¨çš„ï¼Œå¦‚é»˜è®¤è®¿é—®çº§åˆ«æ‰€è¿°ã€‚è¿™æ„å‘³ç€SomeInternalClasså’ŒsomeInternalConstantå¯ä»¥åœ¨æ²¡æœ‰æ˜¾å¼è®¿é—®çº§ä¿®é¥°ç¬¦çš„æƒ…å†µä¸‹ç¼–å†™ï¼Œå¹¶ä¸”ä»ç„¶å…·æœ‰å†…éƒ¨è®¿é—®çº§åˆ«ï¼š class SomeInternalClass {} &#x2F;&#x2F; implicitly internal let someInternalConstant &#x3D; 0 &#x2F;&#x2F; implicitly internal è‡ªå®šä¹‰ç±»å‹å¦‚æœæ‚¨æƒ³ä¸ºè‡ªå®šä¹‰ç±»å‹æŒ‡å®šæ˜¾å¼è®¿é—®çº§åˆ«ï¼Œè¯·åœ¨å®šä¹‰ç±»å‹æ—¶æŒ‡å®šã€‚ç„¶åï¼Œè¿™ç§æ–°å‹å¯ä»¥åœ¨è®¿é—®çº§åˆ«å…è®¸çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å®šä¹‰æ–‡ä»¶ç§æœ‰ç±»ï¼Œè¯¥ç±»åªèƒ½ç”¨ä½œå±æ€§çš„ç±»å‹ï¼Œæˆ–åœ¨å®šä¹‰æ–‡ä»¶ç§æœ‰ç±»çš„æºæ–‡ä»¶ä¸­ç”¨ä½œå‡½æ•°å‚æ•°æˆ–è¿”å›ç±»å‹ã€‚ ç±»å‹çš„è®¿é—®æ§åˆ¶çº§åˆ«ä¹Ÿä¼šå½±å“è¯¥ç±»å‹æˆå‘˜çš„é»˜è®¤è®¿é—®çº§åˆ«ï¼ˆå…¶å±æ€§ã€æ–¹æ³•ã€åˆå§‹åŒ–å™¨å’Œä¸‹æ ‡ï¼‰ã€‚å¦‚æœæ‚¨å°†ç±»å‹çš„è®¿é—®çº§åˆ«å®šä¹‰ä¸ºç§æœ‰æˆ–æ–‡ä»¶ç§æœ‰ï¼Œåˆ™å…¶æˆå‘˜çš„é»˜è®¤è®¿é—®çº§åˆ«ä¹Ÿå°†æ˜¯ç§æœ‰æˆ–æ–‡ä»¶ç§æœ‰ã€‚å¦‚æœæ‚¨å°†ç±»å‹çš„è®¿é—®çº§åˆ«å®šä¹‰ä¸ºå†…éƒ¨æˆ–å…¬å…±ï¼ˆæˆ–ä½¿ç”¨å†…éƒ¨çš„é»˜è®¤è®¿é—®çº§åˆ«ï¼Œè€Œä¸æ˜¾å¼æŒ‡å®šè®¿é—®çº§åˆ«ï¼‰ï¼Œåˆ™è¯¥ç±»å‹æˆå‘˜çš„é»˜è®¤è®¿é—®çº§åˆ«å°†æ˜¯å†…éƒ¨çš„ã€‚ é‡è¦ å…¬å…±ç±»å‹é»˜è®¤ä¸ºæœ‰å†…éƒ¨æˆå‘˜ï¼Œè€Œä¸æ˜¯å…¬å…±æˆå‘˜ã€‚å¦‚æœæ‚¨å¸Œæœ›ç±»å‹æˆå‘˜å…¬å¼€ï¼Œåˆ™å¿…é¡»æ˜ç¡®å°†å…¶æ ‡è®°ä¸ºå…¬å¼€æˆå‘˜ã€‚æ­¤è¦æ±‚ç¡®ä¿ç±»å‹é¢å‘å…¬ä¼—çš„APIæ˜¯æ‚¨é€‰æ‹©å‘å¸ƒçš„å†…å®¹ï¼Œå¹¶é¿å…é”™è¯¯åœ°å°†ç±»å‹çš„å†…éƒ¨å·¥ä½œæ˜¾ç¤ºä¸ºå…¬å…±APIã€‚ public class SomePublicClass { &#x2F;&#x2F; explicitly public class â€‹ public var somePublicProperty &#x3D; 0 &#x2F;&#x2F; explicitly public class member â€‹ var someInternalProperty &#x3D; 0 &#x2F;&#x2F; implicitly internal class member â€‹ fileprivate func someFilePrivateMethod() {} &#x2F;&#x2F; explicitly file-private class member â€‹ private func somePrivateMethod() {} &#x2F;&#x2F; explicitly private class member } class SomeInternalClass { &#x2F;&#x2F; implicitly internal class â€‹ var someInternalProperty &#x3D; 0 &#x2F;&#x2F; implicitly internal class member â€‹ fileprivate func someFilePrivateMethod() {} &#x2F;&#x2F; explicitly file-private class member â€‹ private func somePrivateMethod() {} &#x2F;&#x2F; explicitly private class member } fileprivate class SomeFilePrivateClass { &#x2F;&#x2F; explicitly file-private class â€‹ func someFilePrivateMethod() {} &#x2F;&#x2F; implicitly file-private class member â€‹ private func somePrivateMethod() {} &#x2F;&#x2F; explicitly private class member } private class SomePrivateClass { &#x2F;&#x2F; explicitly private class â€‹ func somePrivateMethod() {} &#x2F;&#x2F; implicitly private class member } å…ƒç»„ç±»å‹å…ƒç»„ç±»å‹çš„è®¿é—®çº§åˆ«æ˜¯è¯¥å…ƒç»„ä¸­ä½¿ç”¨çš„æ‰€æœ‰ç±»å‹çš„è®¿é—®çº§åˆ«ä¸­æœ€ä¸¥æ ¼çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä»ä¸¤ç§ä¸åŒç±»å‹çš„å…ƒç»„ç»„æˆå…ƒç»„ï¼Œä¸€ç§å…·æœ‰å†…éƒ¨è®¿é—®ï¼Œå¦ä¸€ç§å…·æœ‰ç§æœ‰è®¿é—®ï¼Œåˆ™è¯¥å¤åˆå…ƒç»„ç±»å‹çš„è®¿é—®çº§åˆ«å°†æ˜¯ç§æœ‰çš„ã€‚ æ³¨æ„ å…ƒç»„ç±»å‹æ²¡æœ‰åƒç±»ã€ç»“æ„ã€æšä¸¾å’Œå‡½æ•°é‚£æ ·å…·æœ‰ç‹¬ç«‹çš„å®šä¹‰ã€‚å…ƒç»„ç±»å‹çš„è®¿é—®çº§åˆ«æ˜¯ä»æ„æˆå…ƒç»„ç±»å‹çš„ç±»å‹è‡ªåŠ¨ç¡®å®šçš„ï¼Œå¹¶ä¸”æ— æ³•æ˜¾å¼æŒ‡å®šã€‚ åŠŸèƒ½ç±»å‹å‡½æ•°ç±»å‹çš„è®¿é—®çº§åˆ«è®¡ç®—ä¸ºå‡½æ•°å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹çš„æœ€ä¸¥æ ¼çš„è®¿é—®çº§åˆ«ã€‚å¦‚æœå‡½æ•°çš„è®¡ç®—è®¿é—®çº§åˆ«ä¸ä¸Šä¸‹æ–‡é»˜è®¤å€¼ä¸åŒ¹é…ï¼Œåˆ™å¿…é¡»æ˜¾å¼æŒ‡å®šè®¿é—®çº§åˆ«ä½œä¸ºå‡½æ•°å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºsomeFunction()çš„å…¨å±€å‡½æ•°ï¼Œä½†æ²¡æœ‰ä¸ºå‡½æ•°æœ¬èº«æä¾›ç‰¹å®šçš„è®¿é—®çº§ä¿®é¥°ç¬¦ã€‚æ‚¨å¯èƒ½å¸Œæœ›æ­¤åŠŸèƒ½å…·æœ‰â€œå†…éƒ¨â€çš„é»˜è®¤è®¿é—®çº§åˆ«ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚äº‹å®ä¸Šï¼ŒsomeFunction()ä¸ä¼šæŒ‰ä»¥ä¸‹å†…å®¹ç¼–è¯‘ï¼š func someFunction() -&gt; (SomeInternalClass, SomePrivateClass) { â€‹ &#x2F;&#x2F; function implementation goes here } è¯¥å‡½æ•°çš„è¿”å›ç±»å‹æ˜¯ç”±ä¸Šé¢è‡ªå®šä¹‰ç±»å‹ä¸­å®šä¹‰çš„ä¸¤ä¸ªè‡ªå®šä¹‰ç±»ç»„æˆçš„å…ƒç»„ç±»å‹ã€‚å…¶ä¸­ä¸€ç±»è¢«å®šä¹‰ä¸ºå†…éƒ¨ï¼Œå¦ä¸€ç±»è¢«å®šä¹‰ä¸ºç§æœ‰ã€‚å› æ­¤ï¼Œå¤åˆå…ƒç»„ç±»å‹çš„æ•´ä½“è®¿é—®çº§åˆ«æ˜¯ç§æœ‰çš„ï¼ˆå…ƒç»„ç»„æˆéƒ¨åˆ†ç±»å‹çš„æœ€å°è®¿é—®çº§åˆ«ï¼‰ã€‚ ç”±äºå‡½æ•°çš„è¿”å›ç±»å‹æ˜¯ç§æœ‰çš„ï¼Œå› æ­¤æ‚¨å¿…é¡»ç”¨privateä¿®é¥°ç¬¦æ ‡è®°å‡½æ•°çš„æ•´ä½“è®¿é—®çº§åˆ«ï¼Œä»¥ä¾¿å‡½æ•°å£°æ˜æœ‰æ•ˆï¼š private func someFunction() -&gt; (SomeInternalClass, SomePrivateClass) { â€‹ &#x2F;&#x2F; function implementation goes here } ä½¿ç”¨publicæˆ–internalä¿®é¥°ç¬¦æ ‡è®°someFunction()çš„å®šä¹‰æˆ–ä½¿ç”¨å†…éƒ¨çš„é»˜è®¤è®¾ç½®æ— æ•ˆï¼Œå› ä¸ºå‡½æ•°çš„å…¬å…±æˆ–å†…éƒ¨ç”¨æˆ·å¯èƒ½æ— æ³•é€‚å½“è®¿é—®å‡½æ•°è¿”å›ç±»å‹ä¸­ä½¿ç”¨çš„ç§æœ‰ç±»ã€‚ æšä¸¾ç±»å‹æšä¸¾çš„å•ä¸ªæ¡ˆä¾‹ä¼šè‡ªåŠ¨è·å¾—ä¸å®ƒä»¬æ‰€å±æšä¸¾ç›¸åŒçš„è®¿é—®çº§åˆ«ã€‚æ‚¨æ— æ³•ä¸ºå•ä¸ªæšä¸¾æ¡ˆä¾‹æŒ‡å®šä¸åŒçš„è®¿é—®çº§åˆ«ã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼ŒCompassPointæšä¸¾å…·æœ‰æ˜ç¡®çš„å…¬å…±è®¿é—®çº§åˆ«ã€‚å› æ­¤ï¼Œnorthã€southã€eastå’Œweståˆ—ä¸¾æ¡ˆä¾‹ä¹Ÿæœ‰å…¬ä¼—çš„å‡†å…¥çº§åˆ«ï¼š public enum CompassPoint { â€‹ case north â€‹ case south â€‹ case east â€‹ case west } åŸå§‹å€¼å’Œç›¸å…³å€¼ç”¨äºæšä¸¾å®šä¹‰ä¸­ä»»ä½•åŸå§‹å€¼æˆ–ç›¸å…³å€¼çš„ç±»å‹å¿…é¡»å…·æœ‰è‡³å°‘ä¸æšä¸¾è®¿é—®çº§åˆ«ç›¸åŒçš„è®¿é—®çº§åˆ«ã€‚ä¾‹å¦‚ï¼Œæ‚¨ä¸èƒ½ä½¿ç”¨ç§æœ‰ç±»å‹ä½œä¸ºå…·æœ‰å†…éƒ¨è®¿é—®çº§åˆ«çš„æšä¸¾çš„åŸå§‹å€¼ç±»å‹ã€‚ åµŒå¥—ç±»å‹åµŒå¥—ç±»å‹çš„è®¿é—®çº§åˆ«ä¸å…¶åŒ…å«ç±»å‹ç›¸åŒï¼Œé™¤éåŒ…å«ç±»å‹æ˜¯å…¬å…±çš„ã€‚åœ¨å…¬å…±ç±»å‹ä¸­å®šä¹‰çš„åµŒå¥—ç±»å‹å…·æœ‰å†…éƒ¨çš„è‡ªåŠ¨è®¿é—®çº§åˆ«ã€‚å¦‚æœæ‚¨å¸Œæœ›å…¬å…±ç±»å‹ä¸­çš„åµŒå¥—ç±»å‹å…¬å¼€å¯ç”¨ï¼Œåˆ™å¿…é¡»æ˜¾å¼å£°æ˜åµŒå¥—ç±»å‹ä¸ºå…¬å…±ç±»å‹ã€‚ å­åˆ†ç±»æ‚¨å¯ä»¥å¯¹å¯ä»¥åœ¨å½“å‰è®¿é—®ä¸Šä¸‹æ–‡ä¸­è®¿é—®çš„ä»»ä½•ç±»è¿›è¡Œå­ç±»ï¼Œè¯¥ç±»ä¸å­ç±»åœ¨åŒä¸€æ¨¡å—ä¸­å®šä¹‰ã€‚æ‚¨è¿˜å¯ä»¥å¯¹å…¶ä»–æ¨¡å—ä¸­å®šä¹‰çš„ä»»ä½•å¼€æ”¾ç±»è¿›è¡Œå­ç±»ã€‚ä¸€ä¸ªå­ç±»ä¸èƒ½æ¯”å…¶è¶…ç±»å…·æœ‰æ›´é«˜çš„è®¿é—®çº§åˆ«â€”â€”ä¾‹å¦‚ï¼Œæ‚¨ä¸èƒ½ç¼–å†™å†…éƒ¨è¶…ç±»çš„å…¬å…±å­ç±»ã€‚ æ­¤å¤–ï¼Œå¯¹äºåœ¨åŒä¸€æ¨¡å—ä¸­å®šä¹‰çš„ç±»ï¼Œæ‚¨å¯ä»¥è¦†ç›–åœ¨ç‰¹å®šè®¿é—®ä¸Šä¸‹æ–‡ä¸­å¯è§çš„ä»»ä½•ç±»æˆå‘˜ï¼ˆæ–¹æ³•ã€å±æ€§ã€åˆå§‹åŒ–å™¨æˆ–ä¸‹æ ‡ï¼‰ã€‚å¯¹äºåœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­å®šä¹‰çš„ç±»ï¼Œæ‚¨å¯ä»¥è¦†ç›–ä»»ä½•æ‰“å¼€çš„ç±»æˆå‘˜ã€‚ é‡å†™å¯ä»¥ä½¿ç»§æ‰¿çš„ç±»æˆå‘˜æ¯”å…¶è¶…ç±»ç‰ˆæœ¬æ›´å®¹æ˜“è®¿é—®ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œç±»Aæ˜¯ä¸€ä¸ªå…¬å…±ç±»ï¼Œå…¶æ–‡ä»¶ç§æœ‰æ–¹æ³•ç§°ä¸ºsomeMethod()ã€‚Bç±»æ˜¯Açš„å­ç±»ï¼Œè®¿é—®çº§åˆ«ä¸ºâ€œå†…éƒ¨â€ã€‚å°½ç®¡å¦‚æ­¤ï¼ŒBç±»æä¾›äº†someMethod()çš„é‡å†™ï¼Œè®¿é—®çº§åˆ«ä¸ºâ€œå†…éƒ¨â€ï¼Œé«˜äºsomeMethod()çš„åŸå§‹å®ç°ï¼š public class A { â€‹ fileprivate func someMethod() {} } internal class B: A { â€‹ override internal func someMethod() {} } å­ç±»æˆå‘˜ç”šè‡³å¯ä»¥è°ƒç”¨è®¿é—®æƒé™ä½äºå­ç±»æˆå‘˜çš„è¶…ç±»æˆå‘˜ï¼Œåªè¦å¯¹è¶…ç±»æˆå‘˜çš„è°ƒç”¨æ˜¯åœ¨å…è®¸çš„è®¿é—®çº§åˆ«ä¸Šä¸‹æ–‡ä¸­ï¼ˆå³åœ¨ä¸æ–‡ä»¶ç§æœ‰æˆå‘˜è°ƒç”¨çš„è¶…ç±»ç›¸åŒçš„æºæ–‡ä»¶ä¸­ï¼Œæˆ–åœ¨ä¸å†…éƒ¨æˆå‘˜è°ƒç”¨çš„è¶…ç±»ç›¸åŒçš„æ¨¡å—ä¸­ï¼‰ï¼š public class A { â€‹ fileprivate func someMethod() {} } internal class B: A { â€‹ override internal func someMethod() { â€‹ super.someMethod() â€‹ } } ç”±äºè¶…ç±»Aå’Œå­ç±»Båœ¨åŒä¸€æºæ–‡ä»¶ä¸­å®šä¹‰ï¼Œå› æ­¤someMethod()çš„Bå®ç°è°ƒç”¨super.someMethod()æ˜¯æœ‰æ•ˆçš„ã€‚ å¸¸é‡ã€å˜é‡ã€å±æ€§å’Œä¸‹æ ‡å¸¸é‡ã€å˜é‡æˆ–å±æ€§ä¸èƒ½æ¯”å…¶ç±»å‹æ›´å…¬å¼€ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ç§æœ‰ç±»å‹å†™å…¥å…¬å…±è´¢äº§æ˜¯æ— æ•ˆçš„ã€‚åŒæ ·ï¼Œä¸‹æ ‡ä¸èƒ½æ¯”å…¶ç´¢å¼•ç±»å‹æˆ–è¿”å›ç±»å‹æ›´å…¬å¼€ã€‚ å¦‚æœå¸¸é‡ã€å˜é‡ã€å±æ€§æˆ–ä¸‹æ ‡ä½¿ç”¨ç§æœ‰ç±»å‹ï¼Œåˆ™å¸¸é‡ã€å˜é‡ã€å±æ€§æˆ–ä¸‹æ ‡ä¹Ÿå¿…é¡»æ ‡è®°ä¸ºprivateï¼š private var privateInstance &#x3D; SomePrivateClass() è·å–è€…å’Œè®¾ç½®è€…å¸¸é‡ã€å˜é‡ã€å±æ€§å’Œä¸‹æ ‡çš„è·å–è€…å’Œè®¾ç½®å™¨ä¼šè‡ªåŠ¨æ¥æ”¶ä¸ä»–ä»¬æ‰€å±çš„å¸¸é‡ã€å˜é‡ã€å±æ€§æˆ–ä¸‹æ ‡ç›¸åŒçš„è®¿é—®çº§åˆ«ã€‚ æ‚¨å¯ä»¥ç»™è®¾ç½®å™¨æ¯”å…¶å¯¹åº”çš„è·å–å™¨æ›´ä½çš„è®¿é—®çº§åˆ«ï¼Œä»¥é™åˆ¶è¯¥å˜é‡ã€å±æ€§æˆ–ä¸‹æ ‡çš„è¯»å†™èŒƒå›´ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨varæˆ–subscriptä»‹ç»å™¨ä¹‹å‰ç¼–å†™fileprivate(set)``private(set)æˆ–internal(set)åˆ†é…è¾ƒä½çš„è®¿é—®çº§åˆ«ã€‚ æ³¨æ„ æ­¤è§„åˆ™é€‚ç”¨äºå­˜å‚¨å±æ€§ä»¥åŠè®¡ç®—å±æ€§ã€‚å³ä½¿æ‚¨æ²¡æœ‰ä¸ºå­˜å‚¨çš„å±æ€§ç¼–å†™æ˜¾å¼è·å–å™¨å’Œè®¾ç½®å™¨ï¼ŒSwiftä»ç„¶ä¼šåˆæˆéšå¼è·å–å™¨å’Œè®¾ç½®å™¨ï¼Œä»¥æä¾›å¯¹å­˜å‚¨å±æ€§å¤‡ä»½å­˜å‚¨çš„è®¿é—®ã€‚ä½¿ç”¨fileprivate(set)``private(set)å’Œinternal(set)ä»¥ä¸è®¡ç®—å±æ€§ä¸­çš„æ˜¾å¼setterå®Œå…¨ç›¸åŒçš„æ–¹å¼æ›´æ”¹æ­¤åˆæˆè®¾ç½®å™¨çš„è®¿é—®çº§åˆ«ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºTrackedStringç»“æ„ï¼Œè¯¥ç»“æ„è·Ÿè¸ªå­—ç¬¦ä¸²å±æ€§è¢«ä¿®æ”¹çš„æ¬¡æ•°ï¼š struct TrackedString { â€‹ private(set) var numberOfEdits &#x3D; 0 â€‹ var value: String &#x3D; â€œâ€ { â€‹ didSet { â€‹ numberOfEdits +&#x3D; 1 â€‹ } â€‹ } } TrackedStringç»“æ„å®šä¹‰äº†ä¸€ä¸ªåä¸ºvalueçš„å­˜å‚¨å­—ç¬¦ä¸²å±æ€§ï¼Œåˆå§‹å€¼ä¸º&quot;&quot;â€ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ã€‚è¯¥ç»“æ„è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸ºnumberOfEditsçš„å­˜å‚¨æ•´æ•°å±æ€§ï¼Œç”¨äºè·Ÿè¸ªè¯¥valueè¢«ä¿®æ”¹çš„æ¬¡æ•°ã€‚æ­¤ä¿®æ”¹è·Ÿè¸ªé€šè¿‡valueå±æ€§ä¸Šçš„didSetå±æ€§è§‚å¯Ÿå™¨å®ç°ï¼Œè¯¥è§‚å¯Ÿå™¨æ¯æ¬¡å°†valueå±æ€§è®¾ç½®ä¸ºæ–°å€¼æ—¶éƒ½ä¼šå¢åŠ numberOfEditsã€‚ TrackedStringç»“æ„å’Œvalueå±æ€§ä¸æä¾›æ˜¾å¼è®¿é—®çº§ä¿®é¥°ç¬¦ï¼Œå› æ­¤å®ƒä»¬éƒ½æ¥æ”¶å†…éƒ¨çš„é»˜è®¤è®¿é—®çº§åˆ«ã€‚ç„¶è€Œï¼ŒnumberOfEditså±æ€§çš„è®¿é—®çº§åˆ«ç”¨private(set)ä¿®é¥°ç¬¦æ ‡è®°ï¼Œä»¥æŒ‡ç¤ºå±æ€§çš„è·å–å™¨ä»ç„¶å…·æœ‰å†…éƒ¨çš„é»˜è®¤è®¿é—®çº§åˆ«ï¼Œä½†è¯¥å±æ€§åªèƒ½ä»ä½œä¸ºTrackedStringç»“æ„ä¸€éƒ¨åˆ†çš„ä»£ç ä¸­è®¾ç½®ã€‚è¿™ä½¿TrackedStringèƒ½å¤Ÿåœ¨å†…éƒ¨ä¿®æ”¹numberOfEditså±æ€§ï¼Œä½†å½“è¯¥å±æ€§åœ¨ç»“æ„å®šä¹‰ä¹‹å¤–ä½¿ç”¨æ—¶ï¼Œå°†å…¶æ˜¾ç¤ºä¸ºåªè¯»å±æ€§ã€‚ å¦‚æœæ‚¨åˆ›å»ºTrackedStringå®ä¾‹å¹¶ä¿®æ”¹å…¶å­—ç¬¦ä¸²å€¼å‡ æ¬¡ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°numberOfEditså±æ€§å€¼æ›´æ–°ï¼Œä»¥åŒ¹é…ä¿®æ”¹æ¬¡æ•°ï¼š var stringToEdit &#x3D; TrackedString() stringToEdit.value &#x3D; â€œThis string will be tracked.â€ stringToEdit.value +&#x3D; â€œ This edit will increment numberOfEdits.â€ stringToEdit.value +&#x3D; â€œ So will this one.â€ print(â€œThe number of edits is (stringToEdit.numberOfEdits)â€) &#x2F;&#x2F; Prints â€œThe number of edits is 3â€ Although you can query the current value of the numberOfEdits property from within another source file, you canâ€™t modify the property from another source file. This restriction protects the implementation details of the TrackedString edit-tracking functionality, while still providing convenient access to an aspect of that functionality. è¯·æ³¨æ„ï¼Œå¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥ä¸ºè·å–å™¨å’Œè®¾ç½®å™¨åˆ†é…æ˜¾å¼è®¿é—®çº§åˆ«ã€‚ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†TrackedStringç»“æ„çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­è¯¥ç»“æ„ä»¥å…¬å…±çš„æ˜¾å¼è®¿é—®çº§åˆ«å®šä¹‰ã€‚å› æ­¤ï¼Œç»“æ„çš„æˆå‘˜ï¼ˆåŒ…æ‹¬numberOfEditså±æ€§ï¼‰é»˜è®¤å…·æœ‰å†…éƒ¨è®¿é—®çº§åˆ«ã€‚æ‚¨å¯ä»¥é€šè¿‡ç»„åˆpublicå’Œprivate(set)è®¿é—®çº§ä¿®é¥°ç¬¦ï¼Œä½¿ç»“æ„çš„numberOfEditså±æ€§è·å–å™¨å…¬å¼€ï¼Œå…¶å±æ€§è®¾ç½®å™¨ä¸ºç§æœ‰ï¼š public struct TrackedString { â€‹ public private(set) var numberOfEdits &#x3D; 0 â€‹ public var value: String &#x3D; â€œâ€ { â€‹ didSet { â€‹ numberOfEdits +&#x3D; 1 â€‹ } â€‹ } â€‹ public init() {} } åˆå§‹åŒ–å™¨è‡ªå®šä¹‰åˆå§‹åŒ–å™¨å¯ä»¥åˆ†é…å°äºæˆ–ç­‰äºå…¶åˆå§‹åŒ–ç±»å‹çš„è®¿é—®çº§åˆ«ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯å¿…éœ€çš„åˆå§‹åŒ–å™¨ï¼ˆå¦‚å¿…éœ€åˆå§‹åŒ–å™¨ä¸­å®šä¹‰ï¼‰ã€‚æ‰€éœ€çš„åˆå§‹åŒ–å™¨å¿…é¡»å…·æœ‰ä¸å®ƒæ‰€å±ç±»ç›¸åŒçš„è®¿é—®çº§åˆ«ã€‚ ä¸å‡½æ•°å’Œæ–¹æ³•å‚æ•°ä¸€æ ·ï¼Œåˆå§‹åŒ–å™¨å‚æ•°çš„ç±»å‹ä¸èƒ½æ¯”åˆå§‹åŒ–å™¨è‡ªå·±çš„è®¿é—®çº§åˆ«æ›´ç§å¯†ã€‚ é»˜è®¤åˆå§‹åŒ–å™¨å¦‚é»˜è®¤åˆå§‹åŒ–å™¨æ‰€è¿°ï¼ŒSwiftä¼šè‡ªåŠ¨æä¾›é»˜è®¤åˆå§‹åŒ–å™¨ï¼Œæ²¡æœ‰ä»»ä½•ç»“æ„æˆ–åŸºç±»çš„å‚æ•°ï¼Œè¿™äº›ç»“æ„æˆ–åŸºç±»ä¸ºå…¶æ‰€æœ‰å±æ€§æä¾›é»˜è®¤å€¼ï¼Œå¹¶ä¸”æœ¬èº«ä¹Ÿä¸æä¾›è‡³å°‘ä¸€ä¸ªåˆå§‹åŒ–å™¨ã€‚ é»˜è®¤åˆå§‹åŒ–å™¨å…·æœ‰ä¸åˆå§‹åŒ–çš„ç±»å‹ç›¸åŒçš„è®¿é—®çº§åˆ«ï¼Œé™¤éè¯¥ç±»å‹è¢«å®šä¹‰ä¸ºpublicã€‚å¯¹äºå®šä¹‰ä¸ºpublicçš„ç±»å‹ï¼Œé»˜è®¤åˆå§‹åŒ–å™¨è¢«è§†ä¸ºå†…éƒ¨åˆå§‹åŒ–å™¨ã€‚å¦‚æœæ‚¨å¸Œæœ›å…¬å…±ç±»å‹åœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­ä½¿ç”¨æ— å‚æ•°åˆå§‹åŒ–å™¨è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ™å¿…é¡»è‡ªå·±æ˜¾å¼æä¾›å…¬å…±æ— å‚æ•°åˆå§‹åŒ–å™¨ï¼Œä½œä¸ºç±»å‹å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚ ç»“æ„ç±»å‹çš„é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨å¦‚æœç»“æ„çš„ä»»ä½•å­˜å‚¨å±æ€§æ˜¯ç§æœ‰çš„ï¼Œåˆ™ç»“æ„ç±»å‹çš„é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨è¢«è§†ä¸ºç§æœ‰ã€‚åŒæ ·ï¼Œå¦‚æœç»“æ„çš„ä»»ä½•å­˜å‚¨å±æ€§æ˜¯æ–‡ä»¶ç§æœ‰çš„ï¼Œåˆ™åˆå§‹åŒ–å™¨æ˜¯æ–‡ä»¶ç§æœ‰çš„ã€‚å¦åˆ™ï¼Œåˆå§‹åŒ–å™¨å…·æœ‰å†…éƒ¨è®¿é—®çº§åˆ«ã€‚ ä¸ä¸Šé¢çš„é»˜è®¤åˆå§‹åŒ–å™¨ä¸€æ ·ï¼Œå¦‚æœæ‚¨å¸Œæœ›å…¬å…±ç»“æ„ç±»å‹åœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–å™¨æ—¶å¯ä»¥åˆå§‹åŒ–ï¼Œåˆ™å¿…é¡»è‡ªå·±æä¾›å…¬å…±æˆå‘˜åˆå§‹åŒ–å™¨ï¼Œä½œä¸ºç±»å‹å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚ åè®®å¦‚æœæ‚¨æƒ³ä¸ºåè®®ç±»å‹åˆ†é…æ˜¾å¼è®¿é—®çº§åˆ«ï¼Œè¯·åœ¨å®šä¹‰åè®®æ—¶è¿™æ ·åšã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿåˆ›å»ºåªèƒ½åœ¨ç‰¹å®šè®¿é—®ä¸Šä¸‹æ–‡ä¸­é‡‡ç”¨çš„åè®®ã€‚ åè®®å®šä¹‰ä¸­æ¯ä¸ªéœ€æ±‚çš„è®¿é—®çº§åˆ«ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºä¸åè®®ç›¸åŒçš„è®¿é—®çº§åˆ«ã€‚æ‚¨æ— æ³•å°†åè®®è¦æ±‚è®¾ç½®ä¸ºä¸å…¶æ”¯æŒçš„åè®®ä¸åŒçš„è®¿é—®çº§åˆ«ã€‚è¿™ç¡®ä¿äº†åè®®çš„æ‰€æœ‰è¦æ±‚åœ¨ä»»ä½•é‡‡ç”¨è¯¥åè®®çš„ç±»å‹ä¸Šéƒ½å¯è§ã€‚ æ³¨æ„ å¦‚æœæ‚¨å®šä¹‰äº†å…¬å…±åè®®ï¼Œåˆ™åè®®çš„è¦æ±‚åœ¨å®ç°æ—¶éœ€è¦è¿™äº›è¦æ±‚çš„å…¬å…±è®¿é—®çº§åˆ«ã€‚è¿™ç§è¡Œä¸ºä¸å…¶ä»–ç±»å‹ä¸åŒï¼Œåœ¨è¿™äº›ç±»å‹ä¸­ï¼Œå…¬å…±ç±»å‹å®šä¹‰æ„å‘³ç€ç±»å‹æˆå‘˜çš„å†…éƒ¨è®¿é—®çº§åˆ«ã€‚ åè®®ç»§æ‰¿å¦‚æœæ‚¨å®šä¹‰äº†ä»ç°æœ‰åè®®ç»§æ‰¿çš„æ–°åè®®ï¼Œåˆ™æ–°åè®®æœ€å¤šå¯ä»¥å…·æœ‰ä¸å®ƒç»§æ‰¿çš„åè®®ç›¸åŒçš„è®¿é—®çº§åˆ«ã€‚ä¾‹å¦‚ï¼Œæ‚¨æ— æ³•ç¼–å†™ä»å†…éƒ¨åè®®ç»§æ‰¿çš„å…¬å…±åè®®ã€‚ åè®®ä¸€è‡´æ€§ç±»å‹å¯ä»¥ç¬¦åˆæ¯”ç±»å‹æœ¬èº«æ›´ä½è®¿é—®çº§åˆ«çš„åè®®ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å®šä¹‰ä¸€ç§å…¬å…±ç±»å‹ï¼Œè¯¥ç±»å‹å¯ä»¥åœ¨å…¶ä»–æ¨¡å—ä¸­ä½¿ç”¨ï¼Œä½†å…¶ä¸å†…éƒ¨åè®®çš„ä¸€è‡´æ€§åªèƒ½åœ¨å†…éƒ¨åè®®çš„å®šä¹‰æ¨¡å—ä¸­ä½¿ç”¨ã€‚ ç±»å‹ç¬¦åˆç‰¹å®šåè®®çš„ä¸Šä¸‹æ–‡æ˜¯ç±»å‹è®¿é—®çº§åˆ«å’Œåè®®è®¿é—®çº§åˆ«çš„æœ€ä½å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ç§ç±»å‹æ˜¯å…¬å¼€çš„ï¼Œä½†å®ƒéµå®ˆçš„åè®®æ˜¯å†…éƒ¨çš„ï¼Œåˆ™è¯¥ç±»å‹ä¸è¯¥åè®®çš„ä¸€è‡´æ€§ä¹Ÿæ˜¯å†…éƒ¨çš„ã€‚ å½“æ‚¨ç¼–å†™æˆ–æ‰©å±•ç±»å‹ä»¥ç¬¦åˆåè®®æ—¶ï¼Œæ‚¨å¿…é¡»ç¡®ä¿è¯¥ç±»å‹å¯¹æ¯ä¸ªåè®®è¦æ±‚çš„å®ç°è‡³å°‘ä¸è¯¥ç±»å‹å¯¹è¯¥åè®®çš„ä¸€è‡´æ€§å…·æœ‰ç›¸åŒçš„è®¿é—®çº§åˆ«ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå…¬å…±ç±»å‹ç¬¦åˆå†…éƒ¨åè®®ï¼Œåˆ™è¯¥ç±»å‹å¯¹æ¯ä¸ªåè®®è¦æ±‚çš„å®ç°å¿…é¡»è‡³å°‘æ˜¯å†…éƒ¨çš„ã€‚ æ³¨æ„ åœ¨Swiftä¸­ï¼Œå°±åƒåœ¨Objective-Cä¸­ä¸€æ ·ï¼Œåè®®ä¸€è‡´æ€§æ˜¯å…¨å±€çš„â€”â€”ç±»å‹ä¸å¯èƒ½åœ¨åŒä¸€ç¨‹åºä¸­ä»¥ä¸¤ç§ä¸åŒçš„æ–¹å¼éµå®ˆåè®®ã€‚ æ‰©å±•æ‚¨å¯ä»¥åœ¨ç±»ã€ç»“æ„æˆ–æšä¸¾å¯ç”¨çš„ä»»ä½•è®¿é—®ä¸Šä¸‹æ–‡ä¸­æ‰©å±•ç±»ã€ç»“æ„æˆ–æšä¸¾ã€‚åœ¨æ‰©å±•ä¸­æ·»åŠ çš„ä»»ä½•ç±»å‹æˆå‘˜çš„é»˜è®¤è®¿é—®çº§åˆ«ä¸æ­£åœ¨æ‰©å±•çš„åŸå§‹ç±»å‹ä¸­å£°æ˜çš„ç±»å‹æˆå‘˜å…·æœ‰ç›¸åŒçš„é»˜è®¤è®¿é—®çº§åˆ«ã€‚å¦‚æœæ‚¨æ‰©å±•å…¬å…±æˆ–å†…éƒ¨ç±»å‹ï¼Œæ‚¨æ·»åŠ çš„ä»»ä½•æ–°ç±»å‹æˆå‘˜éƒ½æœ‰é»˜è®¤çš„å†…éƒ¨è®¿é—®çº§åˆ«ã€‚å¦‚æœæ‚¨æ‰©å±•æ–‡ä»¶ç§æœ‰ç±»å‹ï¼Œåˆ™æ‚¨æ·»åŠ çš„ä»»ä½•æ–°ç±»å‹æˆå‘˜éƒ½æœ‰æ–‡ä»¶ç§æœ‰çš„é»˜è®¤è®¿é—®çº§åˆ«ã€‚å¦‚æœæ‚¨æ‰©å±•ç§æœ‰ç±»å‹ï¼Œåˆ™æ‚¨æ·»åŠ çš„ä»»ä½•æ–°ç±»å‹æˆå‘˜éƒ½æœ‰é»˜è®¤çš„ç§æœ‰è®¿é—®çº§åˆ«ã€‚ æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ˜¾å¼è®¿é—®çº§åˆ«ä¿®é¥°ç¬¦ï¼ˆä¾‹å¦‚privateï¼‰æ ‡è®°æ‰©å±•ï¼Œä¸ºæ‰©å±•ä¸­å®šä¹‰çš„æ‰€æœ‰æˆå‘˜è®¾ç½®æ–°çš„é»˜è®¤è®¿é—®çº§åˆ«ã€‚è¿™ä¸ªæ–°çš„é»˜è®¤å€¼ä»ç„¶å¯ä»¥åœ¨å•ä¸ªç±»å‹æˆå‘˜çš„æ‰©å±•ä¸­é‡å†™ã€‚ å¦‚æœæ‚¨ä½¿ç”¨æ‰©å±•æ¥æ·»åŠ åè®®ä¸€è‡´æ€§ï¼Œåˆ™æ— æ³•ä¸ºæ‰©å±•æä¾›æ˜¾å¼è®¿é—®çº§ä¿®é¥°ç¬¦ã€‚ç›¸åï¼Œåè®®è‡ªå·±çš„è®¿é—®çº§åˆ«ç”¨äºä¸ºæ‰©å±•ä¸­çš„æ¯ä¸ªåè®®éœ€æ±‚å®ç°æä¾›é»˜è®¤è®¿é—®çº§åˆ«ã€‚ æ‰©å±•ä¸­çš„ç§äººæˆå‘˜ä¸å®ƒä»¬æ‰©å±•çš„ç±»ã€ç»“æ„æˆ–æšä¸¾ä½äºåŒä¸€æ–‡ä»¶ä¸­çš„æ‰©å±•åçš„è¡Œä¸ºå°±åƒæ‰©å±•ä¸­çš„ä»£ç æ˜¯ä½œä¸ºåŸå§‹ç±»å‹å£°æ˜çš„ä¸€éƒ¨åˆ†ç¼–å†™çš„ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥ï¼š åœ¨åŸå§‹å£°æ˜ä¸­å£°æ˜ä¸€ä¸ªç§äººæˆå‘˜ï¼Œå¹¶ä»åŒä¸€æ–‡ä»¶ä¸­çš„æ‰©å±•åè®¿é—®è¯¥æˆå‘˜ã€‚ åœ¨ä¸€ä¸ªæ‰©å±•ä¸­å£°æ˜ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼Œå¹¶ä»åŒä¸€æ–‡ä»¶ä¸­çš„å¦ä¸€ä¸ªæ‰©å±•åè®¿é—®è¯¥æˆå‘˜ã€‚ åœ¨æ‰©å±•åä¸­å£°æ˜ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼Œå¹¶ä»åŒä¸€æ–‡ä»¶ä¸­çš„åŸå§‹å£°æ˜è®¿é—®è¯¥æˆå‘˜ã€‚ æ­¤è¡Œä¸ºæ„å‘³ç€æ— è®ºæ‚¨çš„ç±»å‹æ˜¯å¦æœ‰ç§æœ‰å®ä½“ï¼Œæ‚¨éƒ½å¯ä»¥ä»¥åŒæ ·çš„æ–¹å¼ä½¿ç”¨æ‰©å±•æ¥ç»„ç»‡ä»£ç ã€‚ä¾‹å¦‚ï¼Œç»™å®šä»¥ä¸‹ç®€å•çš„åè®®ï¼š protocol SomeProtocol { â€‹ func doSomething() } æ‚¨å¯ä»¥ä½¿ç”¨æ‰©å±•æ¥æ·»åŠ åè®®ä¸€è‡´æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š struct SomeStruct { â€‹ private var privateVariable &#x3D; 12 } extension SomeStruct: SomeProtocol { â€‹ func doSomething() { â€‹ print(privateVariable) â€‹ } } é€šç”¨æ³›å‹ç±»å‹æˆ–æ³›å‹å‡½æ•°çš„è®¿é—®çº§åˆ«æ˜¯æ³›å‹ç±»å‹æˆ–å‡½æ•°æœ¬èº«çš„è®¿é—®çº§åˆ«åŠå…¶ç±»å‹å‚æ•°ä¸Šä»»ä½•ç±»å‹çº¦æŸçš„è®¿é—®çº§åˆ«çš„æœ€ä½å€¼ã€‚ ç±»å‹åˆ«åä¸ºäº†è®¿é—®æ§åˆ¶çš„ç›®çš„ï¼Œæ‚¨å®šä¹‰çš„ä»»ä½•ç±»å‹åˆ«åéƒ½è¢«è§†ä¸ºä¸åŒçš„ç±»å‹ã€‚ç±»å‹åˆ«åçš„è®¿é—®çº§åˆ«å¯ä»¥å°äºæˆ–ç­‰äºå…¶åˆ«åç±»å‹çš„è®¿é—®çº§åˆ«ã€‚ä¾‹å¦‚ï¼Œç§æœ‰ç±»å‹åˆ«åå¯ä»¥åˆ«åç§æœ‰ã€æ–‡ä»¶ç§æœ‰ã€å†…éƒ¨ã€å…¬å…±æˆ–å¼€æ”¾ç±»å‹ï¼Œä½†å…¬å…±ç±»å‹åˆ«åä¸èƒ½åˆ«åå†…éƒ¨ã€æ–‡ä»¶ç§æœ‰æˆ–ç§æœ‰ç±»å‹ã€‚ æ³¨æ„ æ­¤è§„åˆ™ä¹Ÿé€‚ç”¨äºç”¨äºæ»¡è¶³åè®®ä¸€è‡´æ€§çš„å…³è”ç±»å‹çš„ç±»å‹åˆ«åã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ é€šç”¨","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-é€šç”¨","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.294Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-é€šç”¨/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E9%80%9A%E7%94%A8/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/Generics.html é€šç”¨ä»£ç ä½¿æ‚¨èƒ½å¤Ÿç¼–å†™çµæ´»ã€å¯é‡ç”¨çš„å‡½æ•°å’Œç±»å‹ï¼Œè¿™äº›å‡½æ•°å’Œç±»å‹å¯ä»¥æ ¹æ®æ‚¨å®šä¹‰çš„è¦æ±‚é€‚ç”¨äºä»»ä½•ç±»å‹ã€‚æ‚¨å¯ä»¥ç¼–å†™é¿å…é‡å¤çš„ä»£ç ï¼Œå¹¶ä»¥æ¸…æ™°ã€æŠ½è±¡çš„æ–¹å¼è¡¨è¾¾å…¶æ„å›¾ã€‚ é€šç”¨æ˜¯Swiftæœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼ŒSwiftæ ‡å‡†åº“çš„å¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨é€šç”¨ä»£ç æ„å»ºçš„ã€‚äº‹å®ä¸Šï¼Œå³ä½¿æ‚¨æ²¡æœ‰æ„è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œæ‚¨ä¹Ÿä¸€ç›´åœ¨ä½¿ç”¨æ•´ä¸ªè¯­è¨€æŒ‡å—ä¸­çš„æ³›å‹ã€‚ä¾‹å¦‚ï¼ŒSwiftçš„Arrayå’ŒDictionaryç±»å‹éƒ½æ˜¯é€šç”¨é›†åˆã€‚æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«Intå€¼çš„æ•°ç»„ï¼Œæˆ–åŒ…å«Stringå€¼çš„æ•°ç»„ï¼Œæˆ–è€…ä¸ºå¯ä»¥åœ¨Swiftä¸­åˆ›å»ºçš„ä»»ä½•å…¶ä»–ç±»å‹çš„æ•°ç»„ã€‚åŒæ ·ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå­—å…¸æ¥å­˜å‚¨ä»»ä½•æŒ‡å®šç±»å‹çš„å€¼ï¼Œå¹¶ä¸”è¯¥ç±»å‹æ²¡æœ‰é™åˆ¶ã€‚ é€šç”¨è§£å†³çš„é—®é¢˜è¿™é‡Œæœ‰ä¸€ä¸ªåä¸ºswapTwoInts(_:_:)çš„æ ‡å‡†éé€šç”¨å‡½æ•°ï¼Œå®ƒäº¤æ¢äº†ä¸¤ä¸ªIntå€¼ï¼š func swapTwoInts(_ a: inout Int, _ b: inout Int) { â€‹ let temporaryA &#x3D; a â€‹ a &#x3D; b â€‹ b &#x3D; temporaryA } æ­¤å‡½æ•°ä½¿ç”¨è¾“å…¥è¾“å‡ºå‚æ•°æ¥äº¤æ¢aå’Œbçš„å€¼ï¼Œå¦‚In-Outå‚æ•°æ‰€è¿°ã€‚ swapTwoInts(_:_:)å‡½æ•°å°†bçš„åŸå§‹å€¼äº¤æ¢ä¸ºaï¼Œå°†açš„åŸå§‹å€¼äº¤æ¢ä¸ºbã€‚æ‚¨å¯ä»¥è°ƒç”¨æ­¤å‡½æ•°æ¥äº¤æ¢ä¸¤ä¸ªIntå˜é‡ä¸­çš„å€¼ï¼š var someInt &#x3D; 3 var anotherInt &#x3D; 107 swapTwoInts(&amp;someInt, &amp;anotherInt) print(â€œsomeInt is now (someInt), and anotherInt is now (anotherInt)â€) &#x2F;&#x2F; Prints â€œsomeInt is now 107, and anotherInt is now 3â€ swapTwoInts(_:_:)å‡½æ•°éå¸¸æœ‰ç”¨ï¼Œä½†å®ƒåªèƒ½ä¸Intå€¼ä¸€èµ·ä½¿ç”¨ã€‚å¦‚æœæ‚¨æƒ³äº¤æ¢ä¸¤ä¸ªStringå€¼æˆ–ä¸¤ä¸ªDoubleå€¼ï¼Œåˆ™å¿…é¡»ç¼–å†™æ›´å¤šå‡½æ•°ï¼Œä¾‹å¦‚swapTwoStringsswapTwoStrings(_:_:)å’ŒswapTwoDoubles(_:_:)å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š func swapTwoStrings(_ a: inout String, _ b: inout String) { â€‹ let temporaryA &#x3D; a â€‹ a &#x3D; b â€‹ b &#x3D; temporaryA } func swapTwoDoubles(_ a: inout Double, _ b: inout Double) { â€‹ let temporaryA &#x3D; a â€‹ a &#x3D; b â€‹ b &#x3D; temporaryA } æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼ŒswapTwoIntsswapTwoInts(_:_:)``swapTwoStrings(_:_:)å’ŒswapTwoDoubles(_:_:)å‡½æ•°çš„ä¸»ä½“æ˜¯ç›¸åŒçš„ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ä»–ä»¬æ¥å—çš„å€¼çš„ç±»å‹ï¼ˆIntã€Stringå’ŒDoubleï¼‰ã€‚ ç¼–å†™ä¸€ä¸ªäº¤æ¢ä»»ä½•ç±»å‹ä¸¤ä¸ªå€¼çš„å•ä¸ªå‡½æ•°æ›´æœ‰ç”¨ï¼Œä¹Ÿæ›´çµæ´»ã€‚é€šç”¨ä»£ç ä½¿æ‚¨èƒ½å¤Ÿç¼–å†™è¿™æ ·çš„å‡½æ•°ã€‚ï¼ˆè¿™äº›å‡½æ•°çš„é€šç”¨ç‰ˆæœ¬å®šä¹‰å¦‚ä¸‹ã€‚ï¼‰ æ³¨æ„ åœ¨æ‰€æœ‰ä¸‰ä¸ªå‡½æ•°ä¸­ï¼Œaå’Œbçš„ç±»å‹å¿…é¡»ç›¸åŒã€‚å¦‚æœaå’Œbä¸æ˜¯åŒä¸€ç±»å‹ï¼Œåˆ™æ— æ³•äº¤æ¢å®ƒä»¬çš„å€¼ã€‚Swift æ˜¯ä¸€ç§ç±»å‹å®‰å…¨çš„è¯­è¨€ï¼Œä¸å…è®¸ï¼ˆä¾‹å¦‚ï¼‰Stringç±»å‹çš„å˜é‡å’Œç±»å‹Doubleçš„å˜é‡ç›¸äº’äº¤æ¢å€¼ã€‚å°è¯•è¿™æ ·åšä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚ é€šç”¨å‡½æ•°é€šç”¨å‡½æ•°å¯ä»¥é€‚ç”¨äºä»»ä½•ç±»å‹ã€‚è¿™æ˜¯ä¸Šé¢theswapTwoIntsswapTwoInts(_:_:)å‡½æ•°çš„é€šç”¨ç‰ˆæœ¬ï¼Œç§°ä¸ºswapTwoValues(_:_:) 12345func swapTwoValues&lt;T&gt;(_ a: inout T, _ b: inout T) &#123; let temporaryA = a a = b b = temporaryA&#125; swapTwoValues(_:_:)å‡½æ•°çš„ä¸»ä½“ä¸theswapTwoIntsswapTwoInts(_:_:)å‡½æ•°çš„ä¸»ä½“ç›¸åŒã€‚ç„¶è€Œï¼ŒswapTwoValuesswapTwoValues(_:_:)çš„ç¬¬ä¸€è¡Œä¸swapTwoInts(_:_:)ç•¥æœ‰ä¸åŒã€‚ä»¥ä¸‹æ˜¯ç¬¬ä¸€è¡Œçš„æ¯”è¾ƒæ–¹å¼ï¼š func swapTwoInts(_ a: inout Int, _ b: inout Int) func swapTwoValues&lt;T&gt;(_ a: inout T, _ b: inout T) è¯¥å‡½æ•°çš„é€šç”¨ç‰ˆæœ¬ä½¿ç”¨å ä½ç¬¦ç±»å‹åç§°ï¼ˆåœ¨æœ¬ä¾‹ä¸­ç§°ä¸ºTï¼‰è€Œä¸æ˜¯å®é™…ç±»å‹åç§°ï¼ˆå¦‚Intã€Stringæˆ–Doubleï¼‰ã€‚å ä½ç¬¦ç±»å‹åç§°æ²¡æœ‰è¯´æ˜Tå¿…é¡»æ˜¯ä»€ä¹ˆï¼Œä½†å®ƒç¡®å®è¯´aå’Œbå¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹Tï¼Œæ— è®ºTä»£è¡¨ä»€ä¹ˆã€‚æ¯æ¬¡è°ƒç”¨swapTwoValues(_:_:)å‡½æ•°æ—¶ï¼Œéƒ½ä¼šç¡®å®šä»£æ›¿Tçš„å®é™…ç±»å‹ã€‚ The other difference between a generic function and a nongeneric function is that the generic functionâ€™s name (swapTwoValues(_:_:)) is followed by the placeholder type name (T) inside angle brackets (&lt;T&gt;). The brackets tell Swift that T is a placeholder type name within the swapTwoValues(_:_:) function definition. Because T is a placeholder, Swift doesnâ€™t look for an actual type called T. swapTwoValues(_:_:)å‡½æ•°ç°åœ¨å¯ä»¥ä»¥ä¸swapTwoIntsç›¸åŒçš„æ–¹å¼è°ƒç”¨ï¼Œä½†åªè¦è¿™ä¸¤ä¸ªå€¼å½¼æ­¤å…·æœ‰ç›¸åŒçš„ç±»å‹ï¼Œå°±å¯ä»¥ä¼ é€’ä»»ä½•ç±»å‹çš„ä¸¤ä¸ªå€¼ã€‚æ¯æ¬¡è°ƒç”¨swapTwoValues(_:_:)æ—¶ï¼Œéƒ½ä¼šä»ä¼ é€’ç»™å‡½æ•°çš„å€¼ç±»å‹æ¨æ–­Tçš„ç±»å‹ã€‚ åœ¨ä¸‹é¢çš„ä¸¤ä¸ªç¤ºä¾‹ä¸­ï¼Œæ¨æ–­Tåˆ†åˆ«ä¸ºIntå’ŒStringï¼š var someInt &#x3D; 3 var anotherInt &#x3D; 107 swapTwoValues(&amp;someInt, &amp;anotherInt) &#x2F;&#x2F; someInt is now 107, and anotherInt is now 3 var someString &#x3D; â€œhelloâ€ var anotherString &#x3D; â€œworldâ€ swapTwoValues(&amp;someString, &amp;anotherString) &#x2F;&#x2F; someString is now â€œworldâ€, and anotherString is now â€œhelloâ€ æ³¨æ„ ä¸Šé¢å®šä¹‰çš„swapTwoValues(_:_:)å‡½æ•°çš„çµæ„Ÿæ¥è‡ªä¸€ä¸ªåä¸ºswapçš„é€šç”¨å‡½æ•°ï¼Œè¯¥å‡½æ•°æ˜¯Swiftæ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶è‡ªåŠ¨ä¾›æ‚¨åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚å¦‚æœæ‚¨éœ€è¦åœ¨è‡ªå·±çš„ä»£ç ä¸­ä½¿ç”¨swapTwoValues(_:_:)å‡½æ•°çš„è¡Œä¸ºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Swiftç°æœ‰çš„swapswap(_:_:)å‡½æ•°ï¼Œè€Œä¸æ˜¯æä¾›è‡ªå·±çš„å®ç°ã€‚ ç±»å‹å‚æ•°åœ¨ä¸Šé¢çš„swapTwoValues(_:_:)ç¤ºä¾‹ä¸­ï¼Œå ä½ç¬¦ç±»å‹Tæ˜¯ç±»å‹å‚æ•°çš„ç¤ºä¾‹ã€‚ç±»å‹å‚æ•°æŒ‡å®šå¹¶å‘½åå ä½ç¬¦ç±»å‹ï¼Œå¹¶ç«‹å³å†™åœ¨å‡½æ•°åç§°ä¹‹åï¼Œåœ¨ä¸€å¯¹åŒ¹é…çš„è§’åº¦æ‹¬å·ï¼ˆå¦‚&lt;T&gt;ï¼‰ä¹‹é—´ã€‚ æŒ‡å®šç±»å‹å‚æ•°åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥å®šä¹‰å‡½æ•°å‚æ•°çš„ç±»å‹ï¼ˆä¾‹å¦‚swapTwoValuesswapTwoValues(_:_:)å‡½æ•°çš„aå’Œbå‚æ•°ï¼‰ï¼Œæˆ–ä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹ï¼Œæˆ–ä½œä¸ºå‡½æ•°ä¸»ä½“ä¸­çš„ç±»å‹æ³¨é‡Šã€‚åœ¨æ¯ç§æƒ…å†µä¸‹ï¼Œæ¯å½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œç±»å‹å‚æ•°éƒ½ä¼šæ›¿æ¢ä¸ºå®é™…ç±»å‹ã€‚ï¼ˆåœ¨ä¸Šé¢çš„swapTwoValues(_:_:)ç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨å‡½æ•°æ—¶å°†Tæ›¿æ¢ä¸ºIntï¼Œç¬¬äºŒæ¬¡è°ƒç”¨æ—¶æ›¿æ¢ä¸ºStringã€‚ï¼‰ æ‚¨å¯ä»¥é€šè¿‡åœ¨è§’æ‹¬å·å†…å†™å…¥å¤šä¸ªç±»å‹å‚æ•°åç§°ï¼Œç”¨é€—å·åˆ†éš”æ¥æä¾›å¤šä¸ªç±»å‹å‚æ•°ã€‚ å‘½åç±»å‹å‚æ•°In most cases, type parameters have descriptive names, such as Key and Value in Dictionary&lt;Key, Value&gt; and Element in Array&lt;Element&gt;, which tells the reader about the relationship between the type parameter and the generic type or function itâ€™s used in. However, when there isnâ€™t a meaningful relationship between them, itâ€™s traditional to name them using single letters such as T, U, and V, such as T in the swapTwoValues(_:_:) function above. æ³¨æ„ å§‹ç»ˆç»™å‡ºç±»å‹å‚æ•°ä¸Šéª†é©¼å¤§å°å†™åç§°ï¼ˆå¦‚Tå’ŒMyTypeParameterï¼‰ï¼Œä»¥æŒ‡ç¤ºå®ƒä»¬æ˜¯ç±»å‹è€Œä¸æ˜¯å€¼çš„å ä½ç¬¦ã€‚ é€šç”¨ç±»å‹é™¤äº†é€šç”¨å‡½æ•°å¤–ï¼ŒSwiftè¿˜å…è®¸æ‚¨å®šä¹‰è‡ªå·±çš„é€šç”¨ç±»å‹ã€‚è¿™äº›æ˜¯è‡ªå®šä¹‰ç±»ã€ç»“æ„å’Œæšä¸¾ï¼Œå¯ä»¥ä¸ä»»ä½•ç±»å‹ä¸€èµ·å·¥ä½œï¼Œç±»ä¼¼äºArrayå’ŒDictionaryã€‚ æœ¬èŠ‚å‘æ‚¨å±•ç¤ºäº†å¦‚ä½•ç¼–å†™åä¸ºStackçš„é€šç”¨é›†åˆç±»å‹ã€‚å †æ ˆæ˜¯ä¸€ç»„æœ‰åºçš„å€¼ï¼Œç±»ä¼¼äºæ•°ç»„ï¼Œä½†ä¸Swiftçš„Arrayç±»å‹ç›¸æ¯”ï¼Œæ“ä½œé›†æ›´å—é™ã€‚æ•°ç»„å…è®¸åœ¨æ•°ç»„çš„ä»»ä½•ä½ç½®æ’å…¥å’Œåˆ é™¤æ–°é¡¹ç›®ã€‚ç„¶è€Œï¼Œå †æ ˆåªå…è®¸å°†æ–°é¡¹ç›®é™„åŠ åˆ°é›†åˆçš„æœ«å°¾ï¼ˆç§°ä¸ºå°†æ–°å€¼æ¨é€åˆ°å †æ ˆï¼‰ã€‚åŒæ ·ï¼Œå †æ ˆåªå…è®¸ä»é›†åˆçš„æœ«å°¾åˆ é™¤é¡¹ç›®ï¼ˆç§°ä¸ºä»å †æ ˆä¸­å¼¹å‡ºä¸€ä¸ªå€¼ï¼‰ã€‚ æ³¨æ„ The concept of a stack is used by the UINavigationController class to model the view controllers in its navigation hierarchy. You call the UINavigationController class pushViewController(_:animated:) method to add (or push) a view controller on to the navigation stack, and its popViewControllerAnimated(_:) method to remove (or pop) a view controller from the navigation stack. A stack is a useful collection model whenever you need a strict â€œlast in, first outâ€ approach to managing a collection. ä¸‹é¢çš„æ’å›¾æ˜¾ç¤ºäº†å †æ ˆçš„æ¨é€å’Œå¼¹å‡ºè¡Œä¸ºï¼š å †æ ˆä¸Šç›®å‰æœ‰ä¸‰ä¸ªå€¼ã€‚ ç¬¬å››ä¸ªå€¼è¢«æ¨åˆ°å †æ ˆçš„é¡¶éƒ¨ã€‚ å †æ ˆç°åœ¨åŒ…å«å››ä¸ªå€¼ï¼Œæœ€è¿‘çš„ä¸€ä¸ªå€¼åœ¨é¡¶éƒ¨ã€‚ å †æ ˆä¸­çš„é¡¶éƒ¨é¡¹ç›®è¢«å¼¹å‡ºã€‚ å¼¹å‡ºä¸€ä¸ªå€¼åï¼Œå †æ ˆå†æ¬¡åŒ…å«ä¸‰ä¸ªå€¼ã€‚ ä»¥ä¸‹æ˜¯ç¼–å†™å †æ ˆçš„éé€šç”¨ç‰ˆæœ¬çš„æ–¹æ³•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºIntå€¼çš„å †æ ˆï¼š struct IntStack { â€‹ var items: [Int] &#x3D; [] â€‹ mutating func push(_ item: Int) { â€‹ items.append(item) â€‹ } â€‹ mutating func pop() -&gt; Int { â€‹ return items.removeLast() â€‹ } } è¯¥ç»“æ„ä½¿ç”¨ç§°ä¸ºitemsçš„Arrayå±æ€§æ¥å­˜å‚¨å †æ ˆä¸­çš„å€¼ã€‚Stackæä¾›äº†ä¸¤ç§æ–¹æ³•ï¼Œpushå’Œpopï¼Œç”¨äºåœ¨å †æ ˆä¸Šå’Œä¸‹æ¨é€å’Œå¼¹å‡ºå€¼ã€‚è¿™äº›æ–¹æ³•è¢«æ ‡è®°ä¸ºmutatingï¼Œå› ä¸ºå®ƒä»¬éœ€è¦ä¿®æ”¹ï¼ˆæˆ–çªå˜ï¼‰ç»“æ„itemsç»„ã€‚ ç„¶è€Œï¼Œä¸Šé¢æ˜¾ç¤ºçš„IntStackç±»å‹åªèƒ½ä¸Intå€¼ä¸€èµ·ä½¿ç”¨ã€‚å®šä¹‰ä¸€ä¸ªé€šç”¨çš„Stackç»“æ„ä¼šæ›´æœ‰ç”¨ï¼Œå®ƒå¯ä»¥ç®¡ç†ä»»ä½•ç±»å‹å€¼çš„å †æ ˆã€‚ ä»¥ä¸‹æ˜¯åŒä¸€ä»£ç çš„é€šç”¨ç‰ˆæœ¬ï¼š 1234567891. struct Stack&lt;Element&gt; &#123;2. â€‹ var items: [Element] = []3. â€‹ mutating func push(_ item: Element) &#123;4. â€‹ items.append(item)5. â€‹ &#125;6. â€‹ mutating func pop() -&gt; Element &#123;7. â€‹ return items.removeLast()8. â€‹ &#125;9. &#125; è¯·æ³¨æ„ï¼ŒStackçš„é€šç”¨ç‰ˆæœ¬æœ¬è´¨ä¸Šä¸éé€šç”¨ç‰ˆæœ¬ç›¸åŒï¼Œä½†å…·æœ‰åä¸ºElementçš„ç±»å‹å‚æ•°ï¼Œè€Œä¸æ˜¯å®é™…ç±»å‹çš„Intã€‚æ­¤ç±»å‹å‚æ•°å†™åœ¨ç»“æ„åç§°åçš„ä¸€å¯¹è§’æ‹¬å·ï¼ˆ&lt;Element&gt;ï¼‰ä¸­ã€‚ Elementå®šä¹‰ç¨åè¦æä¾›çš„ç±»å‹çš„å ä½ç¬¦åç§°ã€‚è¿™ç§æœªæ¥ç±»å‹å¯ä»¥åœ¨ç»“æ„å®šä¹‰çš„ä»»ä½•åœ°æ–¹è¢«ç§°ä¸ºElementã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒElementåœ¨ä¸‰ä¸ªåœ°æ–¹ç”¨ä½œå ä½ç¬¦ï¼š åˆ›å»ºä¸€ä¸ªåä¸ºitemså±æ€§ï¼Œè¯¥å±æ€§ä½¿ç”¨ç©ºç±»å‹çš„å€¼æ•°ç»„åˆå§‹åŒ–Element è¦æŒ‡å®špush(_:)æ–¹æ³•æœ‰ä¸€ä¸ªåä¸ºitemçš„å•ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å¿…é¡»æ˜¯ç±»å‹Element æŒ‡å®špop()æ–¹æ³•è¿”å›çš„å€¼å°†æ˜¯ç±»å‹çš„å€¼Element ç”±äºå®ƒæ˜¯ä¸€ç§é€šç”¨ç±»å‹ï¼ŒStackå¯ç”¨äºåœ¨Swiftä¸­åˆ›å»ºä»»ä½•æœ‰æ•ˆç±»å‹çš„å †æ ˆï¼Œå…¶æ–¹å¼ç±»ä¼¼äºArrayå’ŒDictionaryã€‚ æ‚¨å¯ä»¥é€šè¿‡åœ¨è§’åº¦æ‹¬å·å†…å†™å…¥è¦å­˜å‚¨åœ¨å †æ ˆä¸­çš„ç±»å‹æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„Stackå®ä¾‹ã€‚ä¾‹å¦‚ï¼Œè¦åˆ›å»ºæ–°çš„å­—ç¬¦ä¸²å †æ ˆï¼Œè¯·ç¼–å†™Stack&lt;String&gt;()ï¼š 1234561. var stackOfStrings = Stack&lt;String&gt;()2. stackOfStrings.push(&quot;uno&quot;)3. stackOfStrings.push(&quot;dos&quot;)4. stackOfStrings.push(&quot;tres&quot;)5. stackOfStrings.push(&quot;cuatro&quot;)6. // the stack now contains 4 strings ä»¥ä¸‹æ˜¯stackOfStringsåœ¨å°†è¿™å››ä¸ªå€¼æ¨é€åˆ°å †æ ˆåçš„æ ·å­ï¼š ä»å †æ ˆä¸­å¼¹å‡ºä¸€ä¸ªå€¼å°†åˆ é™¤å¹¶è¿”å›æœ€é«˜å€¼&quot;cuatro&quot;ï¼š let fromTheTop &#x3D; stackOfStrings.pop() &#x2F;&#x2F; fromTheTop is equal to â€œcuatroâ€, and the stack now contains 3 strings ä»¥ä¸‹æ˜¯å †æ ˆå¼¹å‡ºå…¶æœ€é«˜å€¼åçš„æ ·å­ï¼š æ‰©å±•é€šç”¨ç±»å‹å½“æ‚¨æ‰©å±•æ³›å‹ç±»å‹æ—¶ï¼Œæ‚¨ä¸ä¼šæä¾›ç±»å‹å‚æ•°åˆ—è¡¨ä½œä¸ºæ‰©å±•å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚ç›¸åï¼ŒåŸå§‹ç±»å‹å®šä¹‰çš„ç±»å‹å‚æ•°åˆ—è¡¨åœ¨æ‰©å±•çš„æ­£æ–‡ä¸­å¯ç”¨ï¼ŒåŸå§‹ç±»å‹å‚æ•°åç§°ç”¨äºå¼•ç”¨åŸå§‹å®šä¹‰ä¸­çš„ç±»å‹å‚æ•°ã€‚ ä»¥ä¸‹ç¤ºä¾‹æ‰©å±•äº†é€šç”¨Stackç±»å‹ï¼Œä»¥æ·»åŠ åä¸ºtopItemçš„åªè¯»è®¡ç®—å±æ€§ï¼Œè¯¥å±æ€§è¿”å›å †æ ˆä¸Šçš„é¡¶éƒ¨é¡¹ç›®ï¼Œè€Œä¸ä¼šä»å †æ ˆä¸­å¼¹å‡ºå®ƒï¼š extension Stack { â€‹ var topItem: Element? { â€‹ return items.isEmpty ? nil : items[items.count - 1] â€‹ } } topItemå±æ€§è¿”å›Elementç±»å‹çš„å¯é€‰å€¼ã€‚å¦‚æœå †æ ˆä¸ºç©ºï¼ŒtopItemè¿”å›nilï¼›å¦‚æœå †æ ˆä¸æ˜¯ç©ºçš„ï¼ŒtopItemè¿”å›itemsç»„ä¸­çš„æœ€åä¸€ä¸ªé¡¹ç›®ã€‚ è¯·æ³¨æ„ï¼Œæ­¤æ‰©å±•æ²¡æœ‰å®šä¹‰ç±»å‹å‚æ•°åˆ—è¡¨ã€‚ç›¸åï¼Œåœ¨æ‰©å±•ä¸­ä½¿ç”¨Stackç±»å‹çš„ç°æœ‰ç±»å‹å‚æ•°åç§°Elementæ¥æŒ‡ç¤ºtopItemè®¡ç®—å±æ€§çš„å¯é€‰ç±»å‹ã€‚ topItemè®¡ç®—å±æ€§ç°åœ¨å¯ä»¥ä¸ä»»ä½•Stackå®ä¾‹ä¸€èµ·ä½¿ç”¨ï¼Œä»¥è®¿é—®å’ŒæŸ¥è¯¢å…¶é¡¶éƒ¨é¡¹ç›®ï¼Œè€Œæ— éœ€åˆ é™¤å®ƒã€‚ if let topItem &#x3D; stackOfStrings.topItem { â€‹ print(â€œThe top item on the stack is (topItem).â€) } &#x2F;&#x2F; Prints â€œThe top item on the stack is tres.â€ æ³›å‹ç±»å‹çš„æ‰©å±•è¿˜å¯ä»¥åŒ…æ‹¬æ‰©å±•ç±»å‹çš„å®ä¾‹å¿…é¡»æ»¡è¶³çš„è¦æ±‚ï¼Œä»¥è·å¾—æ–°åŠŸèƒ½ï¼Œå¦‚ä¸‹æ–‡ä¸­å¸¦æœ‰é€šç”¨Whereå­å¥çš„æ‰©å±•ä¸­æ‰€è¿°ã€‚ ç±»å‹çº¦æŸswapTwoValues(_:_:)å‡½æ•°å’ŒStackç±»å‹å¯ä»¥ä¸ä»»ä½•ç±»å‹é…åˆä½¿ç”¨ã€‚ç„¶è€Œï¼Œå¯¹å¯ä»¥ä¸æ³›å‹å‡½æ•°å’Œæ³›å‹ç±»å‹ä¸€èµ·ä½¿ç”¨çš„ç±»å‹æ‰§è¡ŒæŸäº›ç±»å‹çº¦æŸæœ‰æ—¶æ˜¯æœ‰ç”¨çš„ã€‚ç±»å‹çº¦æŸæŒ‡å®šç±»å‹å‚æ•°å¿…é¡»ä»ç‰¹å®šç±»ç»§æ‰¿ï¼Œæˆ–ç¬¦åˆç‰¹å®šçš„åè®®æˆ–åè®®ç»„åˆã€‚ ä¾‹å¦‚ï¼ŒSwiftçš„Dictionaryç±»å‹å¯¹å¯ä»¥ç”¨ä½œå­—å…¸é”®çš„ç±»å‹æ–½åŠ äº†é™åˆ¶ã€‚å¦‚å­—å…¸ä¸­æ‰€è¿°ï¼Œå­—å…¸é”®çš„ç±»å‹å¿…é¡»å¯å“ˆå¸Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¿…é¡»æä¾›ä¸€ç§ä½¿è‡ªå·±å…·æœ‰ç‹¬ç‰¹ä»£è¡¨æ€§çš„æ–¹æ³•ã€‚Dictionaryéœ€è¦å…¶é”®å¯å“ˆå¸Œï¼Œä»¥ä¾¿å¯ä»¥æ£€æŸ¥å®ƒæ˜¯å¦å·²ç»åŒ…å«ç‰¹å®šå¯†é’¥çš„å€¼ã€‚æ²¡æœ‰è¿™ä¸ªè¦æ±‚ï¼ŒDictionaryå°±æ— æ³•åˆ¤æ–­å®ƒæ˜¯å¦åº”è¯¥æ’å…¥æˆ–æ›¿æ¢ç‰¹å®šå¯†é’¥çš„å€¼ï¼Œä¹Ÿæ— æ³•ä¸ºå·²ç»åœ¨å­—å…¸ä¸­çš„ç»™å®šå¯†é’¥æ‰¾åˆ°å€¼ã€‚ æ­¤è¦æ±‚ç”±Dictionaryé”®ç±»å‹çš„ç±»å‹çº¦æŸå¼ºåˆ¶æ‰§è¡Œï¼Œè¯¥çº¦æŸæŒ‡å®šé”®ç±»å‹å¿…é¡»ç¬¦åˆHashableåè®®ï¼ŒHashableåè®®æ˜¯Swiftæ ‡å‡†åº“ä¸­å®šä¹‰çš„ç‰¹æ®Šåè®®ã€‚Swiftçš„æ‰€æœ‰åŸºæœ¬ç±»å‹ï¼ˆå¦‚Stringã€Intã€Doubleå’ŒBoolï¼‰é»˜è®¤éƒ½æ˜¯å¯æ•£åˆ—çš„ã€‚æœ‰å…³ä½¿æ‚¨è‡ªå·±çš„è‡ªå®šä¹‰ç±»å‹ç¬¦åˆHashableåè®®çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…ç¬¦åˆå“ˆå¸Œåè®®ã€‚ æ‚¨å¯ä»¥åœ¨åˆ›å»ºè‡ªå®šä¹‰æ³›å‹ç±»å‹æ—¶å®šä¹‰è‡ªå·±çš„ç±»å‹çº¦æŸï¼Œè¿™äº›çº¦æŸæä¾›äº†æ³›å‹ç¼–ç¨‹çš„å¤§éƒ¨åˆ†åŠŸèƒ½ã€‚åƒHashableæŠ½è±¡æ¦‚å¿µæ ¹æ®æ¦‚å¿µç‰¹å¾è€Œä¸æ˜¯å…·ä½“ç±»å‹æ¥æè¿°ç±»å‹ã€‚ ç±»å‹çº¦æŸè¯­æ³•æ‚¨å¯ä»¥é€šè¿‡åœ¨ç±»å‹å‚æ•°åç§°åæ”¾ç½®å•ä¸ªç±»æˆ–åè®®çº¦æŸæ¥ç¼–å†™ç±»å‹çº¦æŸï¼Œå¹¶ç”¨å†’å·åˆ†éš”ï¼Œä½œä¸ºç±»å‹å‚æ•°åˆ—è¡¨çš„ä¸€éƒ¨åˆ†ã€‚æ³›å‹å‡½æ•°ç±»å‹çº¦æŸçš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼ˆå°½ç®¡æ³›å‹ç±»å‹çš„è¯­æ³•ç›¸åŒï¼‰ï¼š func someFunction&lt;T: SomeClass, U: SomeProtocol&gt;(someT: T, someU: U) { â€‹ &#x2F;&#x2F; function body goes here } ä¸Šé¢çš„å‡è®¾å‡½æ•°æœ‰ä¸¤ä¸ªç±»å‹å‚æ•°ã€‚ç¬¬ä¸€ä¸ªç±»å‹å‚æ•°Tæœ‰ä¸€ä¸ªç±»å‹çº¦æŸï¼Œè¦æ±‚Tæ˜¯SomeClassçš„å­ç±»ã€‚ç¬¬äºŒä¸ªç±»å‹å‚æ•°Uæœ‰ä¸€ä¸ªç±»å‹çº¦æŸï¼Œè¦æ±‚Uç¬¦åˆåè®®SomeProtocolã€‚ æ“ä½œä¸­çš„ç±»å‹çº¦æŸè¿™æ˜¯ä¸€ä¸ªåä¸ºfindIndex(ofString:in:)çš„éé€šç”¨å‡½æ•°ï¼Œå®ƒç»™å‡ºäº†ä¸€ä¸ªè¦æŸ¥æ‰¾çš„Stringå€¼å’Œä¸€ä¸ªè¦æŸ¥æ‰¾çš„Stringå€¼æ•°ç»„ã€‚ThefindIndexfindIndex(ofString:in:)å‡½æ•°è¿”å›ä¸€ä¸ªå¯é€‰çš„Intå€¼ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œå®ƒå°†æ˜¯æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…å­—ç¬¦ä¸²çš„ç´¢å¼•ï¼Œå¦‚æœæ‰¾ä¸åˆ°å­—ç¬¦ä¸²ï¼Œåˆ™ä¸ºnilï¼š func findIndex(ofString valueToFind: String, in array: [String]) -&gt; Int? { â€‹ for (index, value) in array.enumerated() { â€‹ if value &#x3D;&#x3D; valueToFind { â€‹ return index â€‹ } â€‹ } â€‹ return nil } findIndex(ofString:in:)å‡½æ•°å¯ç”¨äºæŸ¥æ‰¾å­—ç¬¦ä¸²æ•°ç»„ä¸­çš„å­—ç¬¦ä¸²å€¼ï¼š let strings &#x3D; [â€œcatâ€, â€œdogâ€, â€œllamaâ€, â€œparakeetâ€, â€œterrapinâ€] if let foundIndex &#x3D; findIndex(ofString: â€œllamaâ€, in: strings) { â€‹ print(â€œThe index of llama is (foundIndex)â€) } &#x2F;&#x2F; Prints â€œThe index of llama is 2â€ ç„¶è€Œï¼Œåœ¨æ•°ç»„ä¸­æŸ¥æ‰¾å€¼ç´¢å¼•çš„åŸç†å¹¶ä¸ä»…é€‚ç”¨äºå­—ç¬¦ä¸²ã€‚æ‚¨å¯ä»¥é€šè¿‡å°†ä»»ä½•æåŠçš„å­—ç¬¦ä¸²æ›¿æ¢ä¸ºæŸç§ç±»å‹Tçš„å€¼æ¥ç¼–å†™ä¸æ³›å‹å‡½æ•°ç›¸åŒçš„åŠŸèƒ½ã€‚ ä»¥ä¸‹æ˜¯æ‚¨å¦‚ä½•æœŸæœ›ç¼–å†™findIndex(ofString:in:)ç§°ä¸ºfindIndex(of:in:)çš„é€šç”¨ç‰ˆæœ¬ã€‚è¯·æ³¨æ„ï¼Œæ­¤å‡½æ•°çš„è¿”å›ç±»å‹ä»ç„¶æ˜¯Int?ï¼Œå› ä¸ºè¯¥å‡½æ•°è¿”å›å¯é€‰ç´¢å¼•å·ï¼Œè€Œä¸æ˜¯æ•°ç»„ä¸­çš„å¯é€‰å€¼ã€‚ä¸è¿‡ï¼Œè¯·æ³¨æ„â€”â€”ç”±äºç¤ºä¾‹åè§£é‡Šçš„åŸå› ï¼Œæ­¤å‡½æ•°ä¸ä¼šç¼–è¯‘ï¼š 123456781. func findIndex&lt;T&gt;(of valueToFind: T, in array:[T]) -&gt; Int? &#123;2. â€‹ for (index, value) in array.enumerated() &#123;3. â€‹ if value == valueToFind &#123;4. â€‹ return index5. â€‹ &#125;6. â€‹ &#125;7. â€‹ return nil8. &#125; This function doesnâ€™t compile as written above. The problem lies with the equality check, â€œif value == valueToFindâ€. Not every type in Swift can be compared with the equal to operator (==). If you create your own class or structure to represent a complex data model, for example, then the meaning of â€œequal toâ€ for that class or structure isnâ€™t something that Swift can guess for you. Because of this, it isnâ€™t possible to guarantee that this code will work for every possible type T, and an appropriate error is reported when you try to compile the code. All is not lost, however. The Swift standard library defines a protocol called Equatable, which requires any conforming type to implement the equal to operator (==) and the not equal to operator (!=) to compare any two values of that type. All of Swiftâ€™s standard types automatically support the Equatable protocol. ä»»ä½•Equatableç±»å‹éƒ½å¯ä»¥å®‰å…¨åœ°ä¸findIndex(of:in:)å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¿è¯æ”¯æŒç­‰äºè¿ç®—ç¬¦ã€‚ä¸ºäº†è¡¨è¾¾è¿™ä¸€äº‹å®ï¼Œå½“æ‚¨å®šä¹‰å‡½æ•°æ—¶ï¼Œæ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªEquatableçš„ç±»å‹çº¦æŸï¼Œä½œä¸ºç±»å‹å‚æ•°å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼š func findIndex&lt;T: Equatable&gt;(of valueToFind: T, in array:[T]) -&gt; Int? { â€‹ for (index, value) in array.enumerated() { â€‹ if value &#x3D;&#x3D; valueToFind { â€‹ return index â€‹ } â€‹ } â€‹ return nil } The single type parameter for findIndex(of:in:) is written as T: Equatable, which means â€œany type T that conforms to the Equatable protocol.â€ findIndex(of:in:)å‡½æ•°ç°åœ¨å¯ä»¥æˆåŠŸç¼–è¯‘ï¼Œå¹¶ä¸”å¯ä»¥ä¸ä»»ä½•Equatableç±»å‹ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚Doubleæˆ–Stringï¼š let doubleIndex &#x3D; findIndex(of: 9.3, in: [3.14159, 0.1, 0.25]) &#x2F;&#x2F; doubleIndex is an optional Int with no value, because 9.3 isnâ€™t in the array let stringIndex &#x3D; findIndex(of: â€œAndreaâ€, in: [â€œMikeâ€, â€œMalcolmâ€, â€œAndreaâ€]) &#x2F;&#x2F; stringIndex is an optional Int containing a value of 2 ç›¸å…³ç±»å‹åœ¨å®šä¹‰åè®®æ—¶ï¼Œå£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ªå…³è”ç±»å‹ä½œä¸ºåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†æœ‰æ—¶æ˜¯æœ‰ç”¨çš„ã€‚å…³è”ç±»å‹ä¸ºç”¨ä½œåè®®ä¸€éƒ¨åˆ†çš„ç±»å‹æä¾›äº†å ä½ç¬¦åç§°ã€‚åœ¨é‡‡ç”¨åè®®ä¹‹å‰ï¼Œä¸ä¼šæŒ‡å®šç”¨äºè¯¥å…³è”ç±»å‹çš„å®é™…ç±»å‹ã€‚å…³è”ç±»å‹ä½¿ç”¨associatedtypeå…³é”®å­—æŒ‡å®šã€‚ æ“ä½œä¸­çš„å…³è”ç±»å‹ä»¥ä¸‹æ˜¯åä¸ºContainerçš„åè®®ç¤ºä¾‹ï¼Œè¯¥åè®®å£°æ˜äº†ä¸€ä¸ªåä¸ºItemçš„å…³è”ç±»å‹ï¼š protocol Container { â€‹ associatedtype Item â€‹ mutating func append(_ item: Item) â€‹ var count: Int { get } â€‹ subscript(i: Int) -&gt; Item { get } } Containeråè®®å®šä¹‰äº†ä»»ä½•å®¹å™¨å¿…é¡»æä¾›çš„ä¸‰ç§æ‰€éœ€åŠŸèƒ½ï¼š å¿…é¡»èƒ½å¤Ÿä½¿ç”¨append(_:)æ–¹æ³•å‘å®¹å™¨æ·»åŠ æ–°é¡¹ç›®ã€‚ å¿…é¡»èƒ½å¤Ÿé€šè¿‡è¿”å›Intå€¼çš„countå±æ€§è®¿é—®å®¹å™¨ä¸­é¡¹ç›®çš„è®¡æ•°ã€‚ å¿…é¡»èƒ½å¤Ÿä½¿ç”¨æ¥å—Intç´¢å¼•å€¼çš„ä¸‹æ ‡æ£€ç´¢å®¹å™¨ä¸­çš„æ¯ä¸ªé¡¹ç›®ã€‚ è¯¥åè®®æ²¡æœ‰æŒ‡å®šå®¹å™¨ä¸­çš„é¡¹ç›®åº”è¯¥å¦‚ä½•å­˜å‚¨æˆ–å…è®¸å®ƒä»¬çš„ç±»å‹ã€‚è¯¥åè®®ä»…æŒ‡å®šä»»ä½•ç±»å‹å¿…é¡»æä¾›çš„ä¸‰ä¸ªä½åŠŸèƒ½æ‰èƒ½è¢«è§†ä¸ºContainerã€‚ç¬¦åˆè¦æ±‚çš„ç±»å‹å¯ä»¥æä¾›é¢å¤–çš„åŠŸèƒ½ï¼Œåªè¦å®ƒæ»¡è¶³è¿™ä¸‰é¡¹è¦æ±‚ã€‚ ä»»ä½•ç¬¦åˆContaineråè®®çš„ç±»å‹éƒ½å¿…é¡»èƒ½å¤ŸæŒ‡å®šå®ƒå­˜å‚¨çš„å€¼ç±»å‹ã€‚å…·ä½“è€Œè¨€ï¼Œå®ƒå¿…é¡»ç¡®ä¿åªå°†æ­£ç¡®ç±»å‹çš„é¡¹ç›®æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œå¹¶ä¸”å¿…é¡»æ˜ç¡®å…¶ä¸‹æ ‡è¿”å›çš„é¡¹ç›®ç±»å‹ã€‚ ä¸ºäº†å®šä¹‰è¿™äº›è¦æ±‚ï¼ŒContaineråè®®éœ€è¦ä¸€ç§æ–¹æ³•æ¥å¼•ç”¨å®¹å™¨å°†æŒæœ‰çš„å…ƒç´ çš„ç±»å‹ï¼Œè€Œä¸çŸ¥é“è¯¥ç±»å‹é€‚ç”¨äºç‰¹å®šå®¹å™¨ã€‚Containeråè®®éœ€è¦æŒ‡å®šä¼ é€’ç»™append(_:)æ–¹æ³•çš„ä»»ä½•å€¼å¿…é¡»å…·æœ‰ä¸å®¹å™¨å…ƒç´ ç±»å‹ç›¸åŒçš„ç±»å‹ï¼Œå¹¶ä¸”å®¹å™¨ä¸‹æ ‡è¿”å›çš„å€¼å°†ä¸å®¹å™¨çš„å…ƒç´ ç±»å‹ç›¸åŒã€‚ To achieve this, the Container protocol declares an associated type called Item, written as associatedtype Item. The protocol doesnâ€™t define what Item isâ€”that information is left for any conforming type to provide. Nonetheless, the Item alias provides a way to refer to the type of the items in a Container, and to define a type for use with the append(_:) method and subscript, to ensure that the expected behavior of any Container is enforced. ä»¥ä¸‹æ˜¯ä¸Šè¿°é€šç”¨ç±»å‹çš„éé€šç”¨IntStackç±»å‹çš„ç‰ˆæœ¬ï¼Œé€‚åˆç¬¦åˆContaineråè®®ï¼š struct IntStack: Container { â€‹ &#x2F;&#x2F; original IntStack implementation â€‹ var items: [Int] &#x3D; [] â€‹ mutating func push(_ item: Int) { â€‹ items.append(item) â€‹ } â€‹ mutating func pop() -&gt; Int { â€‹ return items.removeLast() â€‹ } â€‹ &#x2F;&#x2F; conformance to the Container protocol â€‹ typealias Item &#x3D; Int â€‹ mutating func append(_ item: Int) { â€‹ self.push(item) â€‹ } â€‹ var count: Int { â€‹ return items.count â€‹ } â€‹ subscript(i: Int) -&gt; Int { â€‹ return items[i] â€‹ } } IntStackç±»å‹å®ç°äº†Containeråè®®çš„æ‰€æœ‰ä¸‰ä¸ªéœ€æ±‚ï¼Œå¹¶åœ¨æ¯ç§æƒ…å†µä¸‹åŒ…è£…IntStackç±»å‹çš„éƒ¨åˆ†ç°æœ‰åŠŸèƒ½ä»¥æ»¡è¶³è¿™äº›è¦æ±‚ã€‚ Moreover, IntStack specifies that for this implementation of Container, the appropriate Item to use is a type of Int. The definition of typealias Item = Int turns the abstract type of Item into a concrete type of Int for this implementation of the Container protocol. Thanks to Swiftâ€™s type inference, you donâ€™t actually need to declare a concrete Item of Int as part of the definition of IntStack. Because IntStack conforms to all of the requirements of the Container protocol, Swift can infer the appropriate Item to use, simply by looking at the type of the append(_:) methodâ€™s item parameter and the return type of the subscript. Indeed, if you delete the typealias Item = Int line from the code above, everything still works, because itâ€™s clear what type should be used for Item. æ‚¨è¿˜å¯ä»¥ä½¿é€šç”¨Stackç±»å‹ç¬¦åˆContaineråè®®ï¼š 12345678910111213141516171819201. struct Stack&lt;Element&gt;: Container &#123;2. â€‹ // original Stack&lt;Element&gt; implementation3. â€‹ var items: [Element] = []4. â€‹ mutating func push(_ item: Element) &#123;5. â€‹ items.append(item)6. â€‹ &#125;7. â€‹ mutating func pop() -&gt; Element &#123;8. â€‹ return items.removeLast()9. â€‹ &#125;10. â€‹ // conformance to the Container protocol11. â€‹ mutating func append(_ item: Element) &#123;12. â€‹ self.push(item)13. â€‹ &#125;14. â€‹ var count: Int &#123;15. â€‹ return items.count16. â€‹ &#125;17. â€‹ subscript(i: Int) -&gt; Element &#123;18. â€‹ return items[i]19. â€‹ &#125;20. &#125; è¿™ä¸€æ¬¡ï¼Œç±»å‹å‚æ•°Elementè¢«ç”¨ä½œappend(_:)æ–¹æ³•itemå‚æ•°çš„ç±»å‹å’Œä¸‹æ ‡çš„è¿”å›ç±»å‹ã€‚å› æ­¤ï¼ŒSwiftå¯ä»¥æ¨æ–­Elementæ˜¯ç”¨ä½œæ­¤ç‰¹å®šå®¹å™¨Itemçš„åˆé€‚ç±»å‹ã€‚ æ‰©å±•ç°æœ‰ç±»å‹ä»¥æŒ‡å®šå…³è”ç±»å‹æ‚¨å¯ä»¥æ‰©å±•ç°æœ‰ç±»å‹ä»¥æ·»åŠ åè®®ä¸€è‡´æ€§ï¼Œå¦‚åœ¨æ·»åŠ æ‰©å±•åè®®ä¸€è‡´æ€§ä¸­æ‰€è¿°ã€‚è¿™åŒ…æ‹¬å…·æœ‰å…³è”ç±»å‹çš„åè®®ã€‚ Swiftçš„Arrayç±»å‹å·²ç»æä¾›äº†ä¸€ä¸ªappend(_:)æ–¹æ³•ã€countå±æ€§å’Œä¸€ä¸ªå¸¦æœ‰Intç´¢å¼•çš„ä¸‹æ ‡æ¥æ£€ç´¢å…¶å…ƒç´ ã€‚è¿™ä¸‰é¡¹åŠŸèƒ½ç¬¦åˆContaineråè®®çš„è¦æ±‚ã€‚è¿™æ„å‘³ç€ï¼Œåªéœ€å£°æ˜Arrayé‡‡ç”¨è¯¥åè®®ï¼Œæ‚¨å°±å¯ä»¥æ‰©å±•Arrayä»¥ç¬¦åˆContaineråè®®ã€‚æ‚¨ä½¿ç”¨ç©ºæ‰©å±•ç¨‹åºæ‰§è¡Œæ­¤æ“ä½œï¼Œå¦‚ä½¿ç”¨æ‰©å±•å£°æ˜åè®®é‡‡ç”¨ä¸­æ‰€è¿°ï¼š extension Array: Container {} Arrayç°æœ‰çš„append(_:)æ–¹æ³•å’Œä¸‹æ ‡ä½¿Swiftèƒ½å¤Ÿæ¨æ–­ç”¨äºItemçš„é€‚å½“ç±»å‹ï¼Œå°±åƒä¸Šé¢é€šç”¨Stackç±»å‹ä¸€æ ·ã€‚å®šä¹‰æ­¤æ‰©å±•åï¼Œæ‚¨å¯ä»¥å°†ä»»ä½•Arrayç”¨ä½œContainerã€‚ å‘å…³è”ç±»å‹æ·»åŠ çº¦æŸæ‚¨å¯ä»¥å‘åè®®ä¸­çš„å…³è”ç±»å‹æ·»åŠ ç±»å‹çº¦æŸï¼Œä»¥è¦æ±‚ç¬¦åˆè¿™äº›çº¦æŸçš„ç±»å‹æ»¡è¶³è¿™äº›çº¦æŸã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å®šä¹‰äº†ä¸€ä¸ªContainerç‰ˆæœ¬ï¼Œè¦æ±‚å®¹å™¨ä¸­çš„é¡¹æ˜¯å¯ç­‰çš„ã€‚ protocol Container { â€‹ associatedtype Item: Equatable â€‹ mutating func append(_ item: Item) â€‹ var count: Int { get } â€‹ subscript(i: Int) -&gt; Item { get } } è¦ç¬¦åˆæ­¤ç‰ˆæœ¬çš„Containerï¼Œå®¹å™¨Itemç±»å‹å¿…é¡»ç¬¦åˆEquatableåè®®ã€‚ åœ¨å…³è”ç±»å‹çš„çº¦æŸä¸­ä½¿ç”¨åè®®åè®®å¯ä»¥ä½œä¸ºå…¶è‡ªèº«è¦æ±‚çš„ä¸€éƒ¨åˆ†å‡ºç°ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå®Œå–„Containeråè®®çš„åè®®ï¼Œæ·»åŠ äº†suffix(_:)æ–¹æ³•çš„è¦æ±‚ã€‚suffix(_:)æ–¹æ³•ä»å®¹å™¨æœ«å°¾è¿”å›ç»™å®šæ•°é‡çš„å…ƒç´ ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨Suffixç±»å‹çš„å®ä¾‹ä¸­ã€‚ protocol SuffixableContainer: Container { â€‹ associatedtype Suffix: SuffixableContainer where Suffix.Item &#x3D;&#x3D; Item â€‹ func suffix(_ size: Int) -&gt; Suffix } åœ¨æ­¤åè®®ä¸­ï¼ŒSuffixæ˜¯ä¸€ä¸ªå…³è”çš„ç±»å‹ï¼Œå°±åƒä¸Šé¢Containerç¤ºä¾‹ä¸­çš„Itemç±»å‹ä¸€æ ·ã€‚Suffixæœ‰ä¸¤ä¸ªçº¦æŸï¼šå®ƒå¿…é¡»ç¬¦åˆSuffixableContaineråè®®ï¼ˆå½“å‰å®šä¹‰çš„åè®®ï¼‰ï¼Œå…¶Itemç±»å‹å¿…é¡»ä¸å®¹å™¨Itemç±»å‹ç›¸åŒã€‚Itemçš„çº¦æŸæ˜¯ä¸€ä¸ªé€šç”¨çš„whereå­å¥ï¼Œåœ¨å…³è”ç±»å‹ä¸­ä¸ä¸‹é¢çš„é€šç”¨whereå­å¥è®¨è®ºã€‚ ä»¥ä¸‹æ˜¯ä¸Šè¿°é€šç”¨ç±»å‹çš„Stackç±»å‹çš„æ‰©å±•ï¼Œè¯¥æ‰©å±•å¢åŠ äº†å¯¹SuffixableContaineråè®®çš„ä¸€è‡´æ€§ï¼š 123456789101112131415161. extension Stack: SuffixableContainer &#123;2. â€‹ func suffix(_ size: Int) -&gt; Stack &#123;3. â€‹ var result = Stack()4. â€‹ for index in (count-size)..&lt;count &#123;5. â€‹ result.append(self[index])6. â€‹ &#125;7. â€‹ return result8. â€‹ &#125;9. â€‹ // Inferred that Suffix is Stack.10. &#125;11. var stackOfInts = Stack&lt;Int&gt;()12. stackOfInts.append(10)13. stackOfInts.append(20)14. stackOfInts.append(30)15. let suffix = stackOfInts.suffix(2)16. // suffix contains 20 and 30 åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒStackçš„Suffixå…³è”ç±»å‹ä¹Ÿæ˜¯Stackï¼Œå› æ­¤Stackä¸Šçš„åç¼€æ“ä½œè¿”å›å¦ä¸€ä¸ªStackã€‚æˆ–è€…ï¼Œç¬¦åˆSuffixableContainerçš„ç±»å‹å¯ä»¥å…·æœ‰ä¸è‡ªèº«ä¸åŒçš„Suffixç±»å‹â€”â€”è¿™æ„å‘³ç€åç¼€æ“ä½œå¯ä»¥è¿”å›ä¸åŒçš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œè¿™æ˜¯égenericIntStackç±»å‹çš„æ‰©å±•ï¼Œè¯¥ç±»å‹æ·»åŠ äº†SuffixableContainerä¸€è‡´æ€§ï¼Œä½¿ç”¨Stack&lt;Int&gt;ä½œä¸ºå…¶åç¼€ç±»å‹ï¼Œè€Œä¸æ˜¯IntStackï¼š 123456789101. extension IntStack: SuffixableContainer &#123;2. â€‹ func suffix(_ size: Int) -&gt; Stack&lt;Int&gt; &#123;3. â€‹ var result = Stack&lt;Int&gt;()4. â€‹ for index in (count-size)..&lt;count &#123;5. â€‹ result.append(self[index])6. â€‹ &#125;7. â€‹ return result8. â€‹ &#125;9. â€‹ // Inferred that Suffix is Stack&lt;Int&gt;.10. &#125; é€šç”¨çš„å…¶ä¸­å­å¥ç±»å‹çº¦æŸï¼Œå¦‚ç±»å‹çº¦æŸä¸­æ‰€è¿°ï¼Œä½¿æ‚¨èƒ½å¤Ÿå®šä¹‰ä¸æ³›å‹å‡½æ•°ã€ä¸‹æ ‡æˆ–ç±»å‹å…³è”çš„ç±»å‹å‚æ•°çš„è¦æ±‚ã€‚ å®šä¹‰å…³è”ç±»å‹çš„è¦æ±‚ä¹Ÿå¾ˆæœ‰ç”¨ã€‚ä½ é€šè¿‡å®šä¹‰å¹´é¾„è¯­whereå­å¥æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ä¸€ä¸ªé€šç”¨whereå­å¥å…è®¸æ‚¨è¦æ±‚å…³è”ç±»å‹å¿…é¡»ç¬¦åˆç‰¹å®šåè®®ï¼Œæˆ–è€…æŸäº›ç±»å‹å‚æ•°å’Œç›¸å…³ç±»å‹å¿…é¡»ç›¸åŒã€‚ä¸€ä¸ªé€šç”¨whereå­å¥ä»¥whereå…³é”®å­—å¼€å¤´ï¼Œç„¶åæ˜¯å…³è”ç±»å‹çš„çº¦æŸæˆ–ç±»å‹ä¸å…³è”ç±»å‹ä¹‹é—´çš„ç­‰å¼å…³ç³»ã€‚æ‚¨å°±åœ¨ç±»å‹æˆ–å‡½æ•°ä¸»ä½“çš„å¼€èŠ±æ‹¬å·ä¹‹å‰ç¼–å†™ä¸€ä¸ªæ³›å‹whereå­å¥ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸ºallItemsMatchçš„é€šç”¨å‡½æ•°ï¼Œè¯¥å‡½æ•°æ£€æŸ¥ä¸¤ä¸ªContainerå®ä¾‹æ˜¯å¦ä»¥ç›¸åŒçš„é¡ºåºåŒ…å«ç›¸åŒçš„é¡¹ç›®ã€‚å¦‚æœæ‰€æœ‰é¡¹ç›®åŒ¹é…ï¼Œè¯¥å‡½æ•°è¿”å›trueçš„å¸ƒå°”å€¼ï¼Œå¦‚æœå®ƒä»¬ä¸åŒ¹é…ï¼Œåˆ™è¿”å›falseå€¼ã€‚ è¦æ£€æŸ¥çš„ä¸¤ä¸ªå®¹å™¨ä¸å¿…æ˜¯ç›¸åŒç±»å‹çš„å®¹å™¨ï¼ˆå°½ç®¡å¯ä»¥ï¼‰ï¼Œä½†å®ƒä»¬å¿…é¡»å®¹çº³ç›¸åŒç±»å‹çš„ç‰©å“ã€‚æ­¤è¦æ±‚é€šè¿‡ç±»å‹çº¦æŸå’Œé€šç”¨å­å¥çš„ç»„åˆæ¥è¡¨è¾¾ï¼š func allItemsMatch&lt;C1: Container, C2: Container&gt; â€‹ (_ someContainer: C1, _ anotherContainer: C2) -&gt; Bool â€‹ where C1.Item &#x3D;&#x3D; C2.Item, C1.Item: Equatable { â€‹ &#x2F;&#x2F; Check that both containers contain the same number of items. â€‹ if someContainer.count !&#x3D; anotherContainer.count { â€‹ return false â€‹ } â€‹ &#x2F;&#x2F; Check each pair of items to see if theyâ€™re equivalent. â€‹ for i in 0..&lt;someContainer.count { â€‹ if someContainer[i] !&#x3D; anotherContainer[i] { â€‹ return false â€‹ } â€‹ } â€‹ &#x2F;&#x2F; All items match, so return true. â€‹ return true } æ­¤å‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œç§°ä¸ºsomeContainerå’ŒanotherContainerã€‚ThesomeContainerå‚æ•°ä¸ºC1ç±»å‹ï¼ŒanotherContainerå‚æ•°ä¸ºC2ç±»å‹ã€‚C1å’ŒC2éƒ½æ˜¯è°ƒç”¨å‡½æ•°æ—¶è¦ç¡®å®šçš„ä¸¤ä¸ªå®¹å™¨ç±»å‹çš„ç±»å‹å‚æ•°ã€‚ å¯¹å‡½æ•°çš„ä¸¤ä¸ªç±»å‹å‚æ•°æå‡ºäº†ä»¥ä¸‹è¦æ±‚ï¼š C1å¿…é¡»ç¬¦åˆContaineråè®®ï¼ˆå†™ä¸ºC1:Containerï¼‰ã€‚ C2è¿˜å¿…é¡»ç¬¦åˆContaineråè®®ï¼ˆå†™ä¸ºC2:Containerï¼‰ã€‚ The Item for C1 must be the same as the Item for C2 (written as C1.Item == C2.Item). C1``Itemå¿…é¡»ç¬¦åˆEquatableåè®®ï¼ˆå†™ä¸ºC1.Item:Equatableï¼‰ã€‚ ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªè¦æ±‚åœ¨å‡½æ•°çš„ç±»å‹å‚æ•°åˆ—è¡¨ä¸­å®šä¹‰ï¼Œç¬¬ä¸‰ä¸ªå’Œç¬¬å››ä¸ªè¦æ±‚åœ¨å‡½æ•°çš„é€šç”¨whereå­å¥ä¸­å®šä¹‰ã€‚ è¿™äº›è¦æ±‚æ„å‘³ç€ï¼š someContaineræ˜¯C1å‹å®¹å™¨ã€‚ anotherContaineræ˜¯C2å‹å®¹å™¨ã€‚ someContainer``anotherContaineråŒ…å«ç›¸åŒç±»å‹çš„é¡¹ç›®ã€‚ The items in someContainer can be checked with the not equal operator (!=) to see if theyâ€™re different from each other. ç¬¬ä¸‰å’Œç¬¬å››ä¸ªè¦æ±‚ç»“åˆåœ¨ä¸€èµ·ï¼Œè¿™æ„å‘³ç€anotherContainerä¸­çš„ç‰©å“ä¹Ÿå¯ä»¥ä¸!=è¿ç®—ç¬¦ï¼Œå› ä¸ºå®ƒä»¬ä¸insomeContainerä¸­çš„é¡¹ç›®å®Œå…¨ç›¸åŒã€‚ è¿™äº›è¦æ±‚ä½¿allItemsMatch(_:_:)å‡½æ•°èƒ½å¤Ÿæ¯”è¾ƒä¸¤ä¸ªå®¹å™¨ï¼Œå³ä½¿å®ƒä»¬æ˜¯ä¸åŒçš„å®¹å™¨ç±»å‹ã€‚ allItemsMatch(_:_:)å‡½æ•°é¦–å…ˆæ£€æŸ¥ä¸¤ä¸ªå®¹å™¨æ˜¯å¦åŒ…å«ç›¸åŒæ•°é‡çš„é¡¹ç›®ã€‚å¦‚æœå®ƒä»¬åŒ…å«ä¸åŒæ•°é‡çš„é¡¹ç›®ï¼Œåˆ™æ— æ³•åŒ¹é…ï¼Œå¹¶ä¸”å‡½æ•°è¿”å›falseã€‚ After making this check, the function iterates over all of the items in someContainer with a for-in loop and the half-open range operator (..&lt;). For each item, the function checks whether the item from someContainer isnâ€™t equal to the corresponding item in anotherContainer. If the two items arenâ€™t equal, then the two containers donâ€™t match, and the function returns false. å¦‚æœå¾ªç¯ç»“æŸæ—¶æ²¡æœ‰å‘ç°ä¸åŒ¹é…ï¼Œåˆ™ä¸¤ä¸ªå®¹å™¨åŒ¹é…ï¼Œå¹¶ä¸”å‡½æ•°è¿”å›trueã€‚ ä»¥ä¸‹æ˜¯allItemsMatch(_:_:)å‡½æ•°åœ¨æ“ä½œä¸­çš„æ ·å­ï¼š 12345678910111213 var stackOfStrings = Stack&lt;String&gt;() stackOfStrings.push(&quot;uno&quot;) stackOfStrings.push(&quot;dos&quot;) stackOfStrings.push(&quot;tres&quot;) var arrayOfStrings = [&quot;uno&quot;, &quot;dos&quot;, &quot;tres&quot;] if allItemsMatch(stackOfStrings, arrayOfStrings) &#123; â€‹ print(&quot;All items match.&quot;) &#125; else &#123; â€‹ print(&quot;Not all items match.&quot;) &#125;// Prints &quot;All items match.&quot; ä¸Šé¢çš„ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªStackå®ä¾‹æ¥å­˜å‚¨Stringå€¼ï¼Œå¹¶å°†ä¸‰ä¸ªå­—ç¬¦ä¸²æ¨é€åˆ°å †æ ˆä¸Šã€‚è¯¥ç¤ºä¾‹è¿˜åˆ›å»ºä¸€ä¸ªArrayå®ä¾‹ï¼Œè¯¥å®ä¾‹ä½¿ç”¨åŒ…å«ä¸å †æ ˆç›¸åŒçš„ä¸‰ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„æ–‡å­—åˆå§‹åŒ–ã€‚å°½ç®¡å †æ ˆå’Œæ•°ç»„ç±»å‹ä¸åŒï¼Œä½†å®ƒä»¬éƒ½ç¬¦åˆContaineråè®®ï¼Œå¹¶ä¸”éƒ½åŒ…å«ç›¸åŒç±»å‹çš„å€¼ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸¤ä¸ªå®¹å™¨ä½œä¸ºå‚æ•°è°ƒç”¨allItemsMatch(_:_:)å‡½æ•°ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒallItemsMatch(_:_:)å‡½æ•°æ­£ç¡®æŠ¥å‘Šä¸¤ä¸ªå®¹å™¨ä¸­çš„æ‰€æœ‰é¡¹ç›®éƒ½åŒ¹é…ã€‚ å¸¦æœ‰é€šç”¨Whereå­å¥çš„æ‰©å±•æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ³›å‹whereå­å¥ä½œä¸ºæ‰©å±•çš„ä¸€éƒ¨åˆ†ã€‚ä»¥ä¸‹ç¤ºä¾‹ä»å‰é¢çš„ç¤ºä¾‹ä¸­æ‰©å±•äº†é€šç”¨Stackç»“æ„ï¼Œä»¥æ·»åŠ isTop(_:)æ–¹æ³•ã€‚ extension Stack where Element: Equatable { â€‹ func isTop(_ item: Element) -&gt; Bool { â€‹ guard let topItem &#x3D; items.last else { â€‹ return false â€‹ } â€‹ return topItem &#x3D;&#x3D; item â€‹ } } è¿™ä¸ªæ–°çš„isTop(_:)æ–¹æ³•é¦–å…ˆæ£€æŸ¥å †æ ˆä¸æ˜¯ç©ºçš„ï¼Œç„¶åå°†ç»™å®šçš„é¡¹ç›®ä¸å †æ ˆçš„æœ€ä¸Šé¢çš„é¡¹ç›®è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœæ‚¨å°è¯•åœ¨æ²¡æœ‰æ³›å‹whereå­å¥çš„æƒ…å†µä¸‹æ‰§è¡Œæ­¤æ“ä½œï¼Œæ‚¨å°†é‡åˆ°é—®é¢˜ï¼šisTop(_:)çš„å®ç°ä½¿ç”¨==è¿ç®—ç¬¦ï¼Œä½†Stackçš„å®šä¹‰ä¸è¦æ±‚å…¶é¡¹æ˜¯å¯ç­‰çš„ï¼Œå› æ­¤ä½¿ç”¨==è¿ç®—ç¬¦ä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚ä½¿ç”¨é€šç”¨whereå­å¥ï¼Œæ‚¨å¯ä»¥å‘æ‰©å±•æ·»åŠ æ–°è¦æ±‚ï¼Œä»¥ä¾¿æ‰©å±•ä»…åœ¨å †æ ˆä¸­çš„é¡¹ç›®å¯ç­‰æ—¶æ·»åŠ isTop(_:)æ–¹æ³•ã€‚ ä»¥ä¸‹æ˜¯isTop(_:)æ–¹æ³•åœ¨æ“ä½œä¸­çš„æ ·å­ï¼š if stackOfStrings.isTop(â€œtresâ€) { â€‹ print(â€œTop element is tres.â€) } else { â€‹ print(â€œTop element is something else.â€) } &#x2F;&#x2F; Prints â€œTop element is tres.â€ å¦‚æœæ‚¨å°è¯•åœ¨å…ƒç´ ä¸å¯ç­‰åŒçš„å †æ ˆä¸Šè°ƒç”¨isTop(_:)æ–¹æ³•ï¼Œæ‚¨å°†æ”¶åˆ°ç¼–è¯‘æ—¶é”™è¯¯ã€‚ 12345struct NotEquatable &#123; &#125;var notEquatableStack = Stack&lt;NotEquatable&gt;()let notEquatableValue = NotEquatable()notEquatableStack.push(notEquatableValue)notEquatableStack.isTop(notEquatableValue) // Error` You can use a generic where clause with extensions to a protocol. The example below extends the Container protocol from the previous examples to add a startsWith(_:)method. extension Container where Item: Equatable { â€‹ func startsWith(_ item: Item) -&gt; Bool { â€‹ return count &gt;&#x3D; 1 &amp;&amp; self[0] &#x3D;&#x3D; item â€‹ } } startsWith(_:)æ–¹æ³•é¦–å…ˆç¡®ä¿å®¹å™¨è‡³å°‘æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œç„¶åæ£€æŸ¥å®¹å™¨ä¸­çš„ç¬¬ä¸€ä¸ªé¡¹ç›®æ˜¯å¦ä¸ç»™å®šé¡¹ç›®åŒ¹é…ã€‚åªè¦å®¹å™¨çš„é¡¹ç›®æ˜¯ç­‰åŒçš„ï¼Œæ­¤newstartsWithstartsWith(_:)æ–¹æ³•å¯ä»¥ä¸ç¬¦åˆContaineråè®®çš„ä»»ä½•ç±»å‹ä¸€èµ·ä½¿ç”¨ï¼ŒåŒ…æ‹¬ä¸Šé¢ä½¿ç”¨çš„å †æ ˆå’Œæ•°ç»„ã€‚ if [9, 9, 9].startsWith(42) { â€‹ print(â€œStarts with 42.â€) } else { â€‹ print(â€œStarts with something else.â€) } &#x2F;&#x2F; Prints â€œStarts with something else.â€ ä¸Šé¢ç¤ºä¾‹ä¸­çš„æ³›å‹whereå­å¥è¦æ±‚Itemç¬¦åˆåè®®ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥ç¼–å†™ä¸€ä¸ªæ³›å‹whereå­å¥ï¼Œè¦æ±‚Itemæ˜¯ç‰¹å®šç±»å‹ã€‚ä¾‹å¦‚ï¼š extension Container where Item &#x3D;&#x3D; Double { â€‹ func average() -&gt; Double { â€‹ var sum &#x3D; 0.0 â€‹ for index in 0..&lt;count { â€‹ sum +&#x3D; self[index] â€‹ } â€‹ return sum &#x2F; Double(count) â€‹ } } print([1260.0, 1200.0, 98.6, 37.0].average()) &#x2F;&#x2F; Prints â€œ648.9â€ æ­¤ç¤ºä¾‹ä¸ºItemç±»å‹ä¸ºDoubleçš„å®¹å™¨æ·»åŠ äº†average()æ–¹æ³•ã€‚å®ƒè¿­ä»£å®¹å™¨ä¸­çš„é¡¹ç›®ä»¥å°†å…¶ç›¸åŠ ï¼Œå¹¶é™¤ä»¥å®¹å™¨è®¡æ•°ä»¥è®¡ç®—å¹³å‡å€¼ã€‚å®ƒæ˜¾å¼å°†è®¡æ•°ä»Intè½¬æ¢ä¸ºDoubleï¼Œä»¥ä¾¿èƒ½å¤Ÿè¿›è¡Œæµ®ç‚¹é™¤æ³•ã€‚ æ‚¨å¯ä»¥åœ¨ä½œä¸ºæ‰©å±•ä¸€éƒ¨åˆ†çš„æ³›å‹whereå­å¥ä¸­åŒ…å«å¤šä¸ªè¦æ±‚ï¼Œå°±åƒæ‚¨å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹ç¼–å†™çš„æ³›å‹whereå­å¥ä¸€æ ·ã€‚ç”¨é€—å·åˆ†éš”åˆ—è¡¨ä¸­çš„æ¯ä¸ªè¦æ±‚ã€‚ ä¸Šä¸‹æ–‡ï¼Œå…¶ä¸­æ¡æ¬¾å½“æ‚¨å·²ç»åœ¨æ³›å‹ç±»å‹ä¸Šä¸‹æ–‡ä¸­å·¥ä½œæ—¶ï¼Œæ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªæ³›å‹whereå­å¥ï¼Œä½œä¸ºå£°æ˜çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥å£°æ˜æ²¡æœ‰è‡ªå·±çš„æ³›å‹ç±»å‹çº¦æŸã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨æ³›å‹ç±»å‹çš„ä¸‹æ ‡æˆ–æ³›å‹ç±»å‹æ‰©å±•ä¸­çš„æ–¹æ³•ä¸Šç¼–å†™æ³›å‹å­å¥ã€‚Containerç»“æ„æ˜¯é€šç”¨çš„ï¼Œä»¥ä¸‹ç¤ºä¾‹ä¸­çš„whereå­å¥æŒ‡å®šäº†å¿…é¡»æ»¡è¶³å“ªäº›ç±»å‹çº¦æŸæ‰èƒ½åœ¨å®¹å™¨ä¸Šæä¾›è¿™äº›æ–°æ–¹æ³•ã€‚ extension Container { â€‹ func average() -&gt; Double where Item &#x3D;&#x3D; Int { â€‹ var sum &#x3D; 0.0 â€‹ for index in 0..&lt;count { â€‹ sum +&#x3D; Double(self[index]) â€‹ } â€‹ return sum &#x2F; Double(count) â€‹ } â€‹ func endsWith(_ item: Item) -&gt; Bool where Item: Equatable { â€‹ return count &gt;&#x3D; 1 &amp;&amp; self[count-1] &#x3D;&#x3D; item â€‹ } } let numbers &#x3D; [1260, 1200, 98, 37] print(numbers.average()) &#x2F;&#x2F; Prints â€œ648.75â€ print(numbers.endsWith(37)) &#x2F;&#x2F; Prints â€œtrueâ€ å½“é¡¹ç›®ä¸ºæ•´æ•°æ—¶ï¼Œæ­¤ç¤ºä¾‹å‘Containeræ·»åŠ average()æ–¹æ³•ï¼Œå½“é¡¹ä¸ºç­‰åŒæ—¶ï¼Œå®ƒä¼šæ·»åŠ endsWith(_:)æ–¹æ³•ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½åŒ…æ‹¬ä¸€ä¸ªæ³›å‹whereå­å¥ï¼Œè¯¥å­å¥ä»Containerçš„åŸå§‹å£°æ˜ä¸­å‘é€šç”¨Itemç±»å‹å‚æ•°æ·»åŠ ç±»å‹çº¦æŸã€‚ å¦‚æœæ‚¨æƒ³åœ¨ä¸ä½¿ç”¨ä¸Šä¸‹æ–‡whereå­å¥çš„æƒ…å†µä¸‹ç¼–å†™æ­¤ä»£ç ï¼Œåˆ™ç¼–å†™ä¸¤ä¸ªæ‰©å±•ï¼Œæ¯ä¸ªæ³›å‹whereå­å¥ä¸€ä¸ªã€‚ä¸Šé¢çš„ç¤ºä¾‹å’Œä¸‹é¢çš„ç¤ºä¾‹å…·æœ‰ç›¸åŒçš„è¡Œä¸ºã€‚ extension Container where Item &#x3D;&#x3D; Int { â€‹ func average() -&gt; Double { â€‹ var sum &#x3D; 0.0 â€‹ for index in 0..&lt;count { â€‹ sum +&#x3D; Double(self[index]) â€‹ } â€‹ return sum &#x2F; Double(count) â€‹ } } extension Container where Item: Equatable { â€‹ func endsWith(_ item: Item) -&gt; Bool { â€‹ return count &gt;&#x3D; 1 &amp;&amp; self[count-1] &#x3D;&#x3D; item â€‹ } } In the version of this example that uses contextual where clauses, the implementation of average() and endsWith(_:) are both in the same extension because each methodâ€™s generic where clause states the requirements that need to be satisfied to make that method available. Moving those requirements to the extensionsâ€™ generic where clauses makes the methods available in the same situations, but requires one extension per requirement. ä¸é€šç”¨Whereå­å¥å…³è”çš„ç±»å‹æ‚¨å¯ä»¥åœ¨å…³è”ç±»å‹ä¸ŠåŒ…å«ä¸€ä¸ªæ³›å‹whereå­å¥ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨æƒ³åˆ¶ä½œä¸€ä¸ªåŒ…å«è¿­ä»£å™¨çš„Containerç‰ˆæœ¬ï¼Œå°±åƒSequenceåè®®åœ¨æ ‡å‡†åº“ä¸­ä½¿ç”¨çš„ä¸€æ ·ã€‚æ‚¨æ˜¯è¿™æ ·å†™çš„ï¼š protocol Container { â€‹ associatedtype Item â€‹ mutating func append(_ item: Item) â€‹ var count: Int { get } â€‹ subscript(i: Int) -&gt; Item { get } â€‹ associatedtype Iterator: IteratorProtocol where Iterator.Element &#x3D;&#x3D; Item â€‹ func makeIterator() -&gt; Iterator } Iteratorä¸Šçš„é€šç”¨whereå­å¥è¦æ±‚è¿­ä»£å™¨å¿…é¡»éå†ä¸å®¹å™¨é¡¹ç›®ç›¸åŒçš„é¡¹ç›®ç±»å‹çš„å…ƒç´ ï¼Œæ— è®ºè¿­ä»£å™¨çš„ç±»å‹å¦‚ä½•ã€‚ThemakeIteratormakeIterator()å‡½æ•°æä¾›å¯¹å®¹å™¨è¿­ä»£å™¨çš„è®¿é—®ã€‚ å¯¹äºä»å¦ä¸€ä¸ªåè®®ç»§æ‰¿çš„åè®®ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨åè®®å£°æ˜ä¸­åŒ…å«æ³›å‹whereå­å¥æ¥å‘ç»§æ‰¿çš„å…³è”ç±»å‹æ·»åŠ çº¦æŸã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å£°æ˜äº†ä¸€ä¸ªComparableContaineråè®®ï¼Œè¯¥åè®®è¦æ±‚Itemç¬¦åˆComparableï¼š protocol ComparableContainer: Container where Item: Comparable { } é€šç”¨ä¸‹æ ‡ä¸‹æ ‡å¯ä»¥æ˜¯é€šç”¨çš„ï¼Œå®ƒä»¬å¯ä»¥åŒ…æ‹¬é€šç”¨çš„whereå­å¥ã€‚æ‚¨åœ¨subscriptåè§’æ‹¬å·å†…å†™å…¥å ä½ç¬¦ç±»å‹åç§°ï¼Œå¹¶åœ¨ä¸‹æ ‡æ­£æ–‡çš„å¼€èŠ±æ‹¬å·å‰å†™ä¸€ä¸ªæ³›å‹whereå­å¥ã€‚ä¾‹å¦‚ï¼š extension Container { â€‹ subscript&lt;Indices: Sequence&gt;(indices: Indices) -&gt; [Item] â€‹ where Indices.Iterator.Element &#x3D;&#x3D; Int { â€‹ var result: [Item] &#x3D; [] â€‹ for index in indices { â€‹ result.append(self[index]) â€‹ } â€‹ return result â€‹ } } Containeråè®®çš„æ‰©å±•æ·»åŠ äº†ä¸€ä¸ªä¸‹æ ‡ï¼Œè¯¥ä¸‹æ ‡æ¥å—ä¸€ç³»åˆ—ç´¢å¼•ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ¯ä¸ªç»™å®šç´¢å¼•é¡¹ç›®é¡¹çš„æ•°ç»„ã€‚æ­¤é€šç”¨ä¸‹æ ‡å—ä»¥ä¸‹é™åˆ¶ï¼š è§’æ‹¬å·ä¸­çš„é€šç”¨å‚æ•°Indiceså¿…é¡»æ˜¯ç¬¦åˆæ ‡å‡†åº“ä¸­çš„Sequenceåè®®çš„ç±»å‹ã€‚ ä¸‹æ ‡å–å•ä¸ªå‚æ•°ï¼Œå³indicesï¼Œè¿™æ˜¯è¯¥Indicesç±»å‹çš„å®ä¾‹ã€‚ é€šç”¨whereå­å¥è¦æ±‚åºåˆ—çš„è¿­ä»£å™¨å¿…é¡»éå†Intç±»å‹çš„å…ƒç´ ã€‚è¿™ç¡®ä¿äº†åºåˆ—ä¸­çš„ç´¢å¼•ä¸å®¹å™¨ä¸­ä½¿ç”¨çš„ç´¢å¼•ç±»å‹ç›¸åŒã€‚ æ€»è€Œè¨€ä¹‹ï¼Œè¿™äº›çº¦æŸæ„å‘³ç€ä¸ºindiceså‚æ•°ä¼ é€’çš„å€¼æ˜¯æ•´æ•°åºåˆ—ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ é”™è¯¯å¤„ç†","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-é”™è¯¯å¤„ç†","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.294Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-é”™è¯¯å¤„ç†/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/ErrorHandling.html é”™è¯¯å¤„ç†æ˜¯å“åº”ç¨‹åºä¸­çš„é”™è¯¯æ¡ä»¶å¹¶ä»ä¸­æ¢å¤çš„è¿‡ç¨‹ã€‚Swiftä¸ºåœ¨è¿è¡Œæ—¶æŠ›å‡ºã€æ•è·ã€ä¼ æ’­å’Œæ“ä½œå¯æ¢å¤é”™è¯¯æä¾›ä¸€æµçš„æ”¯æŒã€‚ ä¸€äº›æ“ä½œä¸èƒ½ä¿è¯æ€»æ˜¯å®Œæˆæ‰§è¡Œæˆ–äº§ç”Ÿæœ‰ç”¨çš„è¾“å‡ºã€‚å¯é€‰ç”¨äºè¡¨ç¤ºå€¼çš„ç¼ºå¤±ï¼Œä½†å½“æ“ä½œå¤±è´¥æ—¶ï¼Œäº†è§£å¯¼è‡´æ•…éšœçš„åŸå› é€šå¸¸æ˜¯æœ‰ç”¨çš„ï¼Œä»¥ä¾¿æ‚¨çš„ä»£ç å¯ä»¥åšå‡ºç›¸åº”çš„å“åº”ã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘ä»ç£ç›˜ä¸Šçš„æ–‡ä»¶ä¸­è¯»å–å’Œå¤„ç†æ•°æ®çš„ä»»åŠ¡ã€‚æ­¤ä»»åŠ¡æœ‰å¤šç§æ–¹å¼å¯èƒ½å¤±è´¥ï¼ŒåŒ…æ‹¬æ–‡ä»¶åœ¨æŒ‡å®šè·¯å¾„ä¸Šä¸å­˜åœ¨ï¼Œæ–‡ä»¶æ²¡æœ‰è¯»å–æƒé™ï¼Œæˆ–æ–‡ä»¶æ²¡æœ‰ä»¥å…¼å®¹æ ¼å¼ç¼–ç ã€‚åŒºåˆ†è¿™äº›ä¸åŒæƒ…å†µå…è®¸ç¨‹åºè§£å†³ä¸€äº›é”™è¯¯ï¼Œå¹¶å‘ç”¨æˆ·ä¼ è¾¾ä»»ä½•æ— æ³•è§£å†³çš„é”™è¯¯ã€‚ æ³¨æ„ Swiftä¸­çš„é”™è¯¯å¤„ç†ä¸Cocoaå’ŒObjective-Cä¸­ä½¿ç”¨NSErrorç±»çš„é”™è¯¯å¤„ç†æ¨¡å¼äº’æ“ä½œã€‚æœ‰å…³æœ¬è¯¾ç¨‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…åœ¨Swiftä¸­å¤„ç†å¯å¯é”™è¯¯ã€‚ è¡¨ç¤ºå’ŒæŠ›å‡ºé”™è¯¯åœ¨ Swift ä¸­ï¼Œé”™è¯¯ç”±ç¬¦åˆErroråè®®çš„ç±»å‹å€¼è¡¨ç¤ºã€‚è¿™ä¸ªç©ºåè®®è¡¨ç¤ºä¸€ç§ç±»å‹å¯ç”¨äºé”™è¯¯å¤„ç†ã€‚ Swiftæšä¸¾ç‰¹åˆ«é€‚åˆå¯¹ä¸€ç»„ç›¸å…³é”™è¯¯æ¡ä»¶è¿›è¡Œå»ºæ¨¡ï¼Œç›¸å…³å€¼å…è®¸ä¼ è¾¾æœ‰å…³é”™è¯¯æ€§è´¨çš„é¢å¤–ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯æ‚¨å¦‚ä½•è¡¨ç¤ºåœ¨æ¸¸æˆä¸­æ“ä½œè‡ªåŠ¨å”®è´§æœºçš„é”™è¯¯æ¡ä»¶ï¼š enum VendingMachineError: Error { â€‹ case invalidSelection â€‹ case insufficientFunds(coinsNeeded: Int) â€‹ case outOfStock } æŠ›å‡ºé”™è¯¯å¯ä»¥è®©æ‚¨è¡¨æ˜å‘ç”Ÿäº†æ„æƒ³ä¸åˆ°çš„äº‹æƒ…ï¼Œæ­£å¸¸çš„æ‰§è¡Œæµç¨‹æ— æ³•ç»§ç»­ã€‚æ‚¨ä½¿ç”¨throwå‡ºè¯­å¥æŠ›å‡ºé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¡¨æ˜è‡ªåŠ¨å”®è´§æœºè¿˜éœ€è¦äº”æšç¡¬å¸ï¼š throw VendingMachineError.insufficientFunds(coinsNeeded: 5) å¤„ç†é”™è¯¯å½“æŠ›å‡ºé”™è¯¯æ—¶ï¼Œä¸€äº›å‘¨å›´çš„ä»£ç å¿…é¡»è´Ÿè´£å¤„ç†é”™è¯¯â€”â€”ä¾‹å¦‚ï¼Œé€šè¿‡çº æ­£é—®é¢˜ã€å°è¯•æ›¿ä»£æ–¹æ³•æˆ–é€šçŸ¥ç”¨æˆ·æ•…éšœã€‚ æœ‰å››ç§æ–¹æ³•å¯ä»¥å¤„ç† Swift ä¸­çš„é”™è¯¯ã€‚æ‚¨å¯ä»¥å°†é”™è¯¯ä»å‡½æ•°ä¼ æ’­åˆ°è°ƒç”¨è¯¥å‡½æ•°çš„ä»£ç ï¼Œä½¿ç”¨do-catchè¯­å¥å¤„ç†é”™è¯¯ï¼Œå°†é”™è¯¯ä½œä¸ºå¯é€‰å€¼å¤„ç†ï¼Œæˆ–æ–­è¨€ä¸ä¼šå‘ç”Ÿé”™è¯¯ã€‚æ¯ç§æ–¹æ³•éƒ½åœ¨ä¸‹é¢çš„ä¸€èŠ‚ä¸­æè¿°ã€‚ å½“å‡½æ•°æŠ›å‡ºé”™è¯¯æ—¶ï¼Œå®ƒä¼šæ”¹å˜ç¨‹åºçš„æµç¨‹ï¼Œå› æ­¤æ‚¨å¯ä»¥å¿«é€Ÿè¯†åˆ«ä»£ç ä¸­å¯èƒ½æŠ›å‡ºé”™è¯¯çš„åœ°æ–¹éå¸¸é‡è¦ã€‚è¦è¯†åˆ«ä»£ç ä¸­çš„è¿™äº›ä½ç½®ï¼Œè¯·ç¼–å†™tryå…³é”®å­—æˆ–try?æˆ–è€…try!å˜åŒ–â€”åœ¨è°ƒç”¨å¯èƒ½æŠ›å‡ºé”™è¯¯çš„å‡½æ•°ã€æ–¹æ³•æˆ–åˆå§‹åŒ–å™¨çš„ä»£ç ä¹‹å‰ã€‚ä»¥ä¸‹å„èŠ‚ä»‹ç»äº†è¿™äº›å…³é”®è¯ã€‚ æ³¨æ„ Swiftä¸­çš„é”™è¯¯å¤„ç†ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„å¼‚å¸¸å¤„ç†ï¼Œä½¿ç”¨tryã€catchå’Œthrowå…³é”®å­—ã€‚ä¸åŒ…æ‹¬Objective-Cåœ¨å†…çš„è®¸å¤šè¯­è¨€ä¸­çš„å¼‚å¸¸å¤„ç†ä¸åŒï¼ŒSwiftä¸­çš„é”™è¯¯å¤„ç†ä¸æ¶‰åŠè§£å¼€è°ƒç”¨å †æ ˆï¼Œè¿™ä¸ªè¿‡ç¨‹åœ¨è®¡ç®—ä¸Šå¯èƒ½å¾ˆæ˜‚è´µã€‚å› æ­¤ï¼Œthrowè¯­å¥çš„æ€§èƒ½ç‰¹å¾ä¸returnè¯­å¥çš„æ€§èƒ½ç‰¹å¾ç›¸å½“ã€‚ ä½¿ç”¨æŠ›å‡ºå‡½æ•°ä¼ æ’­é”™è¯¯è¦æŒ‡ç¤ºå‡½æ•°ã€æ–¹æ³•æˆ–åˆå§‹åŒ–å™¨å¯ä»¥æŠ›å‡ºé”™è¯¯ï¼Œæ‚¨å¯ä»¥åœ¨å‡½æ•°çš„å£°æ˜ä¸­åœ¨å…¶å‚æ•°åé¢å†™å…¥throwså…³é”®å­—ã€‚æ ‡æœ‰throwså‡½æ•°ç§°ä¸ºæŠ›å‡ºå‡½æ•°ã€‚å¦‚æœå‡½æ•°æŒ‡å®šäº†è¿”å›ç±»å‹ï¼Œåˆ™åœ¨è¿”å›ç®­å¤´ï¼ˆ-&gt;ï¼‰ä¹‹å‰å†™å…¥throwså…³é”®å­—ã€‚ func canThrowErrors() throws -&gt; String func cannotThrowErrors() -&gt; String æŠ›å‡ºå‡½æ•°å°†æŠ›å‡ºåœ¨å…¶ä¸­çš„é”™è¯¯ä¼ æ’­åˆ°è°ƒç”¨å®ƒçš„èŒƒå›´ã€‚ æ³¨æ„ åªæœ‰æŠ›å‡ºå‡½æ•°æ‰èƒ½ä¼ æ’­é”™è¯¯ã€‚åœ¨éæŠ•æ·å‡½æ•°å†…æŠ›å‡ºçš„ä»»ä½•é”™è¯¯éƒ½å¿…é¡»åœ¨å‡½æ•°å†…å¤„ç†ã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼ŒVendingMachineç±»æœ‰ä¸€ä¸ªvend(itemNamed:)æ–¹æ³•ï¼Œå¦‚æœè¯·æ±‚çš„é¡¹ç›®ä¸å¯ç”¨ã€ç¼ºè´§æˆ–æˆæœ¬è¶…è¿‡å½“å‰å­˜æ¬¾é‡‘é¢ï¼Œåˆ™æŠ›å‡ºé€‚å½“çš„VendingMachineErrorï¼š struct Item { â€‹ var price: Int â€‹ var count: Int } class VendingMachine { â€‹ var inventory &#x3D; [ â€‹ â€œCandy Barâ€: Item(price: 12, count: 7), â€‹ â€œChipsâ€: Item(price: 10, count: 4), â€‹ â€œPretzelsâ€: Item(price: 7, count: 11) â€‹ ] â€‹ var coinsDeposited &#x3D; 0 â€‹ func vend(itemNamed name: String) throws { â€‹ guard let item &#x3D; inventory[name] else { â€‹ throw VendingMachineError.invalidSelection â€‹ } â€‹ guard item.count &gt; 0 else { â€‹ throw VendingMachineError.outOfStock â€‹ } â€‹ guard item.price &lt;&#x3D; coinsDeposited else { â€‹ throw VendingMachineError.insufficientFunds(coinsNeeded: item.price - coinsDeposited) â€‹ } â€‹ coinsDeposited -&#x3D; item.price â€‹ var newItem &#x3D; item â€‹ newItem.count -&#x3D; 1 â€‹ inventory[name] &#x3D; newItem â€‹ print(â€œDispensing (name)â€) â€‹ } } vend(itemNamed:)æ–¹æ³•çš„å®ç°ä½¿ç”¨guardè¯­å¥æå‰é€€å‡ºæ–¹æ³•ï¼Œå¦‚æœä¸ç¬¦åˆè´­ä¹°é›¶é£Ÿçš„ä»»ä½•è¦æ±‚ï¼Œåˆ™ä¼šæŠ›å‡ºé€‚å½“çš„é”™è¯¯ã€‚ç”±äºthrowå‡ºè¯­å¥ä¼šç«‹å³ä¼ è¾“ç¨‹åºæ§åˆ¶ï¼Œå› æ­¤åªæœ‰åœ¨æ»¡è¶³æ‰€æœ‰è¿™äº›è¦æ±‚çš„æƒ…å†µä¸‹æ‰ä¼šå¯¹é¡¹ç›®è¿›è¡Œä¿®æ”¹ã€‚ ç”±äºvend(itemNamed:)æ–¹æ³•ä¼ æ’­å®ƒæŠ›å‡ºçš„ä»»ä½•é”™è¯¯ï¼Œå› æ­¤ä»»ä½•è°ƒç”¨æ­¤æ–¹æ³•çš„ä»£ç éƒ½å¿…é¡»ä½¿ç”¨do-catchè¯­å¥ã€try?æˆ–try!å¤„ç†é”™è¯¯ï¼Œæˆ–ç»§ç»­ä¼ æ’­å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ç¤ºä¾‹ä¸­çš„buyFavoriteSnack(person:vendingMachine:)ä¹Ÿæ˜¯ä¸€ä¸ªæŠ›å‡ºå‡½æ•°ï¼Œvend(itemNamed:)æ–¹æ³•æŠ›å‡ºçš„ä»»ä½•é”™è¯¯éƒ½å°†ä¼ æ’­åˆ°è°ƒç”¨buyFavoriteSnack(person:vendingMachine:)å‡½æ•°çš„ç‚¹ã€‚ let favoriteSnacks &#x3D; [ â€‹ â€œAliceâ€: â€œChipsâ€, â€‹ â€œBobâ€: â€œLicoriceâ€, â€‹ â€œEveâ€: â€œPretzelsâ€, ] func buyFavoriteSnack(person: String, vendingMachine: VendingMachine) throws { â€‹ let snackName &#x3D; favoriteSnacks[person] ?? â€œCandy Barâ€ â€‹ try vendingMachine.vend(itemNamed: snackName) } åœ¨æœ¬ä¾‹ä¸­ï¼ŒbuyFavoriteSnack(person:vendingMachine:)åŠŸèƒ½æŸ¥æ‰¾ç»™å®šäººæœ€å–œæ¬¢çš„é›¶é£Ÿï¼Œå¹¶å°è¯•é€šè¿‡è°ƒç”¨vend(itemNamed:)æ–¹æ³•ä¸ºä»–ä»¬è´­ä¹°ã€‚ç”±äºvend(itemNamed:)æ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› æ­¤åœ¨å‰é¢ç”¨tryå…³é”®å­—è°ƒç”¨å®ƒã€‚ æŠ›å‡ºåˆå§‹åŒ–å™¨å¯ä»¥åƒæŠ›å‡ºå‡½æ•°ä¸€æ ·ä¼ æ’­é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹åˆ—è¡¨ä¸­PurchasedSnackç»“æ„çš„åˆå§‹åŒ–å™¨è°ƒç”¨æŠ›å‡ºå‡½æ•°ä½œä¸ºåˆå§‹åŒ–è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶é€šè¿‡å°†å®ƒä»¬ä¼ æ’­åˆ°è°ƒç”¨è€…æ¥å¤„ç†é‡åˆ°çš„ä»»ä½•é”™è¯¯ã€‚ struct PurchasedSnack { â€‹ let name: String â€‹ init(name: String, vendingMachine: VendingMachine) throws { â€‹ try vendingMachine.vend(itemNamed: name) â€‹ self.name &#x3D; name â€‹ } } ä½¿ç”¨Do-Catchå¤„ç†é”™è¯¯æ‚¨å¯ä»¥ä½¿ç”¨do-catchè¯­å¥é€šè¿‡è¿è¡Œä»£ç å—æ¥å¤„ç†é”™è¯¯ã€‚å¦‚æœdoå­å¥ä¸­çš„ä»£ç æŠ›å‡ºé”™è¯¯ï¼Œå®ƒå°†ä¸catchå­å¥åŒ¹é…ï¼Œä»¥ç¡®å®šå…¶ä¸­å“ªä¸€ä¸ªå¯ä»¥å¤„ç†é”™è¯¯ã€‚ ä»¥ä¸‹æ˜¯do-catchå£°æ˜çš„ä¸€èˆ¬å½¢å¼ï¼š do { â€‹ try expression â€‹ statements } catch pattern 1 { â€‹ statements } catch pattern 2 where condition { â€‹ statements } catch pattern 3, pattern 4 where condition { â€‹ statements } catch { â€‹ statements } æ‚¨åœ¨catchåç¼–å†™ä¸€ä¸ªæ¨¡å¼ï¼Œä»¥æŒ‡ç¤ºè¯¥å­å¥å¯ä»¥å¤„ç†å“ªäº›é”™è¯¯ã€‚å¦‚æœcatchå­å¥æ²¡æœ‰æ¨¡å¼ï¼Œè¯¥å­å¥å°†åŒ¹é…ä»»ä½•é”™è¯¯ï¼Œå¹¶å°†é”™è¯¯ç»‘å®šåˆ°åä¸ºerrorçš„æœ¬åœ°å¸¸é‡ã€‚æœ‰å…³æ¨¡å¼åŒ¹é…çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ¨¡å¼ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä¸VendingMachineErroræšä¸¾çš„æ‰€æœ‰ä¸‰ç§æƒ…å†µç›¸åŒ¹é…ã€‚ var vendingMachine &#x3D; VendingMachine() vendingMachine.coinsDeposited &#x3D; 8 do { â€‹ try buyFavoriteSnack(person: â€œAliceâ€, vendingMachine: vendingMachine) â€‹ print(â€œSuccess! Yum.â€) } catch VendingMachineError.invalidSelection { â€‹ print(â€œInvalid Selection.â€) } catch VendingMachineError.outOfStock { â€‹ print(â€œOut of Stock.â€) } catch VendingMachineError.insufficientFunds(let coinsNeeded) { â€‹ print(â€œInsufficient funds. Please insert an additional (coinsNeeded) coins.â€) } catch { â€‹ print(â€œUnexpected error: (error).â€) } &#x2F;&#x2F; Prints â€œInsufficient funds. Please insert an additional 2 coins.â€ åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒbuyFavoriteSnack(person:vendingMachine:)å‡½æ•°åœ¨tryè¡¨è¾¾å¼ä¸­è°ƒç”¨ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯ã€‚å¦‚æœæŠ›å‡ºé”™è¯¯ï¼Œæ‰§è¡Œå°†ç«‹å³è½¬ç§»åˆ°catchå­å¥ï¼Œè¯¥å­å¥å†³å®šæ˜¯å¦å…è®¸ç»§ç»­ä¼ æ’­ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…æ¨¡å¼ï¼Œé”™è¯¯å°†è¢«æœ€ç»ˆçš„catchå­å¥æ•è·ï¼Œå¹¶ç»‘å®šåˆ°å±€éƒ¨errorå¸¸é‡ã€‚å¦‚æœæ²¡æœ‰æŠ›å‡ºé”™è¯¯ï¼Œåˆ™æ‰§è¡Œdoè¯­å¥ä¸­çš„å…¶ä½™è¯­å¥ã€‚ catchå­å¥ä¸å¿…å¤„ç†doå­å¥ä¸­çš„ä»£ç å¯ä»¥æŠ›å‡ºçš„æ‰€æœ‰å¯èƒ½é”™è¯¯ã€‚å¦‚æœæ²¡æœ‰ä¸€ä¸ªcatchå­å¥å¤„ç†é”™è¯¯ï¼Œåˆ™é”™è¯¯ä¼šä¼ æ’­åˆ°å‘¨å›´çš„èŒƒå›´ã€‚ç„¶è€Œï¼Œä¼ æ’­çš„é”™è¯¯å¿…é¡»ç”±å‘¨å›´çš„ä¸€äº›èŒƒå›´å¤„ç†ã€‚åœ¨éæŠ•æ·å‡½æ•°ä¸­ï¼Œå°é—­çš„do-catchè¯­å¥å¿…é¡»å¤„ç†é”™è¯¯ã€‚åœ¨æŠ›å‡ºå‡½æ•°ä¸­ï¼Œå°é—­çš„do-catchè¯­å¥æˆ–è°ƒç”¨è€…å¿…é¡»å¤„ç†é”™è¯¯ã€‚å¦‚æœé”™è¯¯åœ¨æ²¡æœ‰å¤„ç†çš„æƒ…å†µä¸‹ä¼ æ’­åˆ°é¡¶çº§èŒƒå›´ï¼Œæ‚¨å°†æ”¶åˆ°ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥å†™ä¸Šä¸€ä¸ªç¤ºä¾‹ï¼Œè¿™æ ·ä»»ä½•ä¸æ˜¯aVendingMachineErrorçš„é”™è¯¯éƒ½ä¼šè¢«è°ƒç”¨å‡½æ•°æ•è·ï¼š func nourish(with item: String) throws { â€‹ do { â€‹ try vendingMachine.vend(itemNamed: item) â€‹ } catch is VendingMachineError { â€‹ print(â€œCouldnâ€™t buy that from the vending machine.â€) â€‹ } } do { â€‹ try nourish(with: â€œBeet-Flavored Chipsâ€) } catch { â€‹ print(â€œUnexpected non-vending-machine-related error: (error)â€) } &#x2F;&#x2F; Prints â€œCouldnâ€™t buy that from the vending machine.â€ åœ¨nourish(with:)å‡½æ•°ä¸­ï¼Œå¦‚æœvend(itemNamed:)æŠ›å‡ºä½œä¸ºVendingMachineErroræšä¸¾ä¹‹ä¸€çš„é”™è¯¯ï¼Œnourish(with:)é€šè¿‡æ‰“å°æ¶ˆæ¯æ¥å¤„ç†é”™è¯¯ã€‚å¦åˆ™ï¼Œnourish(with:)å°†é”™è¯¯ä¼ æ’­åˆ°å…¶è°ƒç”¨ç«™ç‚¹ã€‚ç„¶åï¼Œé”™è¯¯è¢«ä¸€èˆ¬catchå­å¥æ•è·ã€‚ æ•è·å‡ ä¸ªç›¸å…³é”™è¯¯çš„å¦ä¸€ç§æ–¹æ³•æ˜¯åœ¨catchååˆ—å‡ºå®ƒä»¬ï¼Œç”¨é€—å·åˆ†éš”ã€‚ä¾‹å¦‚ï¼š func eat(item: String) throws { â€‹ do { â€‹ try vendingMachine.vend(itemNamed: item) â€‹ } catch VendingMachineError.invalidSelection, VendingMachineError.insufficientFunds, VendingMachineError.outOfStock { â€‹ print(â€œInvalid selection, out of stock, or not enough money.â€) â€‹ } } eat(item:)å‡½æ•°åˆ—å‡ºäº†è¦æ•è·çš„è‡ªåŠ¨å”®è´§æœºé”™è¯¯ï¼Œå…¶é”™è¯¯æ–‡æœ¬å¯¹åº”äºè¯¥åˆ—è¡¨ä¸­çš„é¡¹ç›®ã€‚å¦‚æœæŠ›å‡ºåˆ—å‡ºçš„ä¸‰ä¸ªé”™è¯¯ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œæ­¤catchå­å¥é€šè¿‡æ‰“å°æ¶ˆæ¯æ¥å¤„ç†å®ƒä»¬ã€‚ä»»ä½•å…¶ä»–é”™è¯¯éƒ½ä¼šä¼ æ’­åˆ°å‘¨å›´èŒƒå›´å†…ï¼ŒåŒ…æ‹¬ç¨åå¯èƒ½ä¼šæ·»åŠ çš„ä»»ä½•è‡ªåŠ¨å”®è´§æœºé”™è¯¯ã€‚ å°†é”™è¯¯è½¬æ¢ä¸ºå¯é€‰å€¼You use try? to handle an error by converting it to an optional value. If an error is thrown while evaluating the try? expression, the value of the expression is nil. For example, in the following code x and y have the same value and behavior: func someThrowingFunction() throws -&gt; Int { â€‹ &#x2F;&#x2F; â€¦ } let x &#x3D; try? someThrowingFunction() let y: Int? do { â€‹ y &#x3D; try someThrowingFunction() } catch { â€‹ y &#x3D; nil } å¦‚æœsomeThrowingFunction()æŠ›å‡ºé”™è¯¯ï¼Œxå’Œyçš„å€¼ä¸ºnilã€‚å¦åˆ™ï¼Œxå’Œyçš„å€¼æ˜¯å‡½æ•°è¿”å›çš„å€¼ã€‚è¯·æ³¨æ„ï¼Œxå’Œyæ˜¯someThrowingFunction()è¿”å›çš„ä»»ä½•ç±»å‹çš„å¯é€‰ã€‚åœ¨è¿™é‡Œï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œå› æ­¤xå’Œyæ˜¯å¯é€‰æ•´æ•°ã€‚ ä½¿ç”¨try?å½“æ‚¨æƒ³ä»¥ç›¸åŒçš„æ–¹å¼å¤„ç†æ‰€æœ‰é”™è¯¯æ—¶ï¼Œå…è®¸æ‚¨ç¼–å†™ç®€æ´çš„é”™è¯¯å¤„ç†ä»£ç ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä½¿ç”¨å‡ ç§æ–¹æ³•æ¥è·å–æ•°æ®ï¼Œå¦‚æœæ‰€æœ‰æ–¹æ³•éƒ½å¤±è´¥ï¼Œåˆ™è¿”å›nilã€‚ func fetchData() -&gt; Data? { â€‹ if let data &#x3D; try? fetchDataFromDisk() { return data } â€‹ if let data &#x3D; try? fetchDataFromServer() { return data } â€‹ return nil } ç¦ç”¨é”™è¯¯ä¼ æ’­Sometimes you know a throwing function or method wonâ€™t, in fact, throw an error at runtime. On those occasions, you can write try! before the expression to disable error propagation and wrap the call in a runtime assertion that no error will be thrown. If an error actually is thrown, youâ€™ll get a runtime error. ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä½¿ç”¨loadImage(atPath:)å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨ç»™å®šè·¯å¾„ä¸ŠåŠ è½½å›¾åƒèµ„æºï¼Œå¦‚æœæ— æ³•åŠ è½½å›¾åƒï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºå›¾åƒéšåº”ç”¨ç¨‹åºä¸€èµ·å‘é€ï¼Œå› æ­¤åœ¨è¿è¡Œæ—¶ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› æ­¤ç¦ç”¨é”™è¯¯ä¼ æ’­æ˜¯åˆé€‚çš„ã€‚ let photo &#x3D; try! loadImage(atPath: â€œ.&#x2F;Resources&#x2F;John Appleseed.jpgâ€) æŒ‡å®šæ¸…ç†æ“ä½œåœ¨ä»£ç æ‰§è¡Œç¦»å¼€å½“å‰ä»£ç å—ä¹‹å‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨deferè¯­å¥æ‰§è¡Œä¸€ç»„è¯­å¥ã€‚æ­¤è¯­å¥å…è®¸æ‚¨è¿›è¡Œä»»ä½•å¿…è¦çš„æ¸…ç†ï¼Œæ— è®ºæ‰§è¡Œå¦‚ä½•ç¦»å¼€å½“å‰ä»£ç å—ï¼Œæ— è®ºæ˜¯å› ä¸ºæŠ›å‡ºé”™è¯¯è¿˜æ˜¯å› ä¸ºreturnæˆ–breakç­‰è¯­å¥è€Œç¦»å¼€ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨deferè¯­å¥æ¥ç¡®ä¿æ–‡ä»¶æè¿°ç¬¦å…³é—­å¹¶é‡Šæ”¾æ‰‹åŠ¨åˆ†é…çš„å†…å­˜ã€‚ deferè¯­å¥ä¼šæ¨è¿Ÿæ‰§è¡Œï¼Œç›´åˆ°å½“å‰èŒƒå›´é€€å‡ºã€‚æ­¤è¯­å¥ç”±deferå…³é”®å­—å’Œç¨åè¦æ‰§è¡Œçš„è¯­å¥ç»„æˆã€‚å»¶è¿Ÿè¯­å¥ä¸å¾—åŒ…å«ä»»ä½•å°†æ§åˆ¶æƒä»è¯­å¥ä¸­è½¬ç§»å‡ºå»çš„ä»£ç ï¼Œä¾‹å¦‚breakæˆ–a areturnè¯­å¥ï¼Œæˆ–é€šè¿‡æŠ›å‡ºé”™è¯¯ã€‚å»¶è¿Ÿæ“ä½œçš„æ‰§è¡Œé¡ºåºä¸æºä»£ç ä¸­å†™å…¥çš„é¡ºåºç›¸åã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ä¸€ä¸ªdeferè¯­å¥ä¸­çš„ä»£ç æœ€åæ‰§è¡Œï¼Œç¬¬äºŒä¸ªdeferè¯­å¥ä¸­çš„ä»£ç æ‰§è¡Œç§’åˆ°æœ€åï¼Œä»¥æ­¤ç±»æ¨ã€‚æºä»£ç é¡ºåºçš„æœ€åä¸€ä¸ªdeferè¯­å¥é¦–å…ˆæ‰§è¡Œã€‚ func processFile(filename: String) throws { â€‹ if exists(filename) { â€‹ let file &#x3D; open(filename) â€‹ defer { â€‹ close(file) â€‹ } â€‹ while let line &#x3D; try file.readline() { â€‹ &#x2F;&#x2F; Work with the file. â€‹ } â€‹ &#x2F;&#x2F; close(file) is called here, at the end of the scope. â€‹ } } ä¸Šé¢çš„ç¤ºä¾‹ä½¿ç”¨deferè¯­å¥æ¥ç¡®ä¿open(_:)å‡½æ•°å…·æœ‰ç›¸åº”çš„è°ƒç”¨ close(_:) æ³¨æ„ å³ä½¿ä¸æ¶‰åŠé”™è¯¯å¤„ç†ä»£ç ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨deferè¯­å¥ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ é›†åˆç±»å‹","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-é›†åˆç±»å‹","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.294Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-é›†åˆç±»å‹/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/CollectionTypes.html Swiftæä¾›äº†ä¸‰ç§ä¸»è¦é›†åˆç±»å‹ï¼Œç§°ä¸ºæ•°ç»„ã€é›†åˆå’Œå­—å…¸ï¼Œç”¨äºå­˜å‚¨å€¼é›†åˆã€‚æ•°ç»„æ˜¯æœ‰åºçš„å€¼é›†åˆã€‚é›†åˆæ˜¯å”¯ä¸€å€¼çš„æ— åºé›†åˆã€‚å­—å…¸æ˜¯é”®å€¼å…³è”çš„æ— åºé›†åˆã€‚ Swift ä¸­çš„æ•°ç»„ã€é›†åˆå’Œå­—å…¸å§‹ç»ˆæ¸…æ¥šå¯ä»¥å­˜å‚¨çš„å€¼å’Œé”®çš„ç±»å‹ã€‚è¿™æ„å‘³ç€æ‚¨ä¸èƒ½é”™è¯¯åœ°å°†é”™è¯¯ç±»å‹çš„å€¼æ’å…¥é›†åˆä¸­ã€‚è¿™ä¹Ÿæ„å‘³ç€æ‚¨å¯ä»¥å¯¹ä»é›†åˆä¸­æ£€ç´¢çš„å€¼ç±»å‹æœ‰ä¿¡å¿ƒã€‚ æ³¨æ„ Swiftçš„æ•°ç»„ã€é›†åˆå’Œå­—å…¸ç±»å‹ä½œä¸ºé€šç”¨é›†åˆå®ç°ã€‚æœ‰å…³æ³›å‹ç±»å‹å’Œé›†åˆçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ³›å‹ã€‚ æ”¶è—å“çš„å¯å˜æ€§å¦‚æœæ‚¨åˆ›å»ºä¸€ä¸ªæ•°ç»„ã€é›†åˆæˆ–å­—å…¸ï¼Œå¹¶å°†å…¶åˆ†é…ç»™å˜é‡ï¼Œåˆ™åˆ›å»ºçš„é›†åˆå°†æ˜¯å¯å˜çš„ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨é›†åˆåˆ›å»ºåé€šè¿‡æ·»åŠ ã€åˆ é™¤æˆ–æ›´æ”¹é›†åˆä¸­çš„é¡¹ç›®æ¥æ›´æ”¹ï¼ˆæˆ–çªå˜ï¼‰ã€‚å¦‚æœæ‚¨å°†æ•°ç»„ã€é›†åˆæˆ–å­—å…¸åˆ†é…ç»™å¸¸é‡ï¼Œåˆ™è¯¥é›†åˆæ˜¯ä¸å¯å˜çš„ï¼Œå…¶å¤§å°å’Œå†…å®¹æ— æ³•æ›´æ”¹ã€‚ æ³¨æ„ åœ¨é›†åˆä¸éœ€è¦æ›´æ”¹çš„æ‰€æœ‰æƒ…å†µä¸‹ï¼Œåˆ›å»ºä¸å¯å˜é›†åˆæ˜¯è‰¯å¥½åšæ³•ã€‚è¿™æ ·åšä½¿æ‚¨æ›´å®¹æ˜“å¯¹ä»£ç è¿›è¡Œæ¨ç†ï¼Œå¹¶ä½¿Swiftç¼–è¯‘å™¨èƒ½å¤Ÿä¼˜åŒ–æ‚¨åˆ›å»ºçš„é›†åˆçš„æ€§èƒ½ã€‚ æ•°ç»„(Arrays)æ•°ç»„å°†ç›¸åŒç±»å‹çš„å€¼å­˜å‚¨åœ¨æœ‰åºåˆ—è¡¨ä¸­ã€‚ç›¸åŒçš„å€¼å¯ä»¥åœ¨ä¸åŒä½ç½®å¤šæ¬¡å‡ºç°åœ¨æ•°ç»„ä¸­ã€‚ æ³¨æ„ Swiftçš„Arrayç±»å‹ä¸Foundationçš„NSArrayç±»æ¡¥æ¥ã€‚ æœ‰å…³å°†Arrayä¸Foundationå’ŒCocoaä¸€èµ·ä½¿ç”¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…Arrayå’ŒNSArrayä¹‹é—´çš„æ¡¥æ¥ã€‚ æ•°ç»„ç±»å‹é€Ÿè®°è¯­æ³•Swiftæ•°ç»„çš„ç±»å‹è¢«å®Œæ•´å†™æˆArray&lt;Element&gt;ï¼Œå…¶ä¸­Elementæ˜¯å…è®¸æ•°ç»„å­˜å‚¨çš„å€¼ç±»å‹ã€‚æ‚¨è¿˜å¯ä»¥å°†æ•°ç»„çš„ç±»å‹ä»¥é€Ÿè®°å½¢å¼å†™ä¸º[Element]è™½ç„¶è¿™ä¸¤ç§å½¢å¼åœ¨åŠŸèƒ½ä¸Šç›¸åŒï¼Œä½†é€Ÿè®°å½¢å¼æ˜¯é¦–é€‰ï¼Œå¹¶åœ¨å‚è€ƒæ•°ç»„ç±»å‹æ—¶åœ¨æ•´ä¸ªæŒ‡å—ä¸­ä½¿ç”¨ã€‚ åˆ›å»ºç©ºæ•°ç»„æ‚¨å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–å™¨è¯­æ³•åˆ›å»ºç‰¹å®šç±»å‹çš„ç©ºæ•°ç»„ï¼š 123var someInts: [Int] = []print(&quot;someInts is of type [Int] with \\(someInts.count) items.&quot;)// Prints &quot;someInts is of type [Int] with 0 items.&quot; è¯·æ³¨æ„ï¼Œä»åˆå§‹åŒ–å™¨çš„ç±»å‹æ¨æ–­å‡ºsomeIntså˜é‡çš„ç±»å‹ä¸º[Int]ã€‚ æˆ–è€…ï¼Œå¦‚æœä¸Šä¸‹æ–‡å·²ç»æä¾›äº†ç±»å‹ä¿¡æ¯ï¼Œä¾‹å¦‚å‡½æ•°å‚æ•°æˆ–å·²ç»é”®å…¥çš„å˜é‡æˆ–å¸¸é‡ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ç©ºæ•°ç»„æ–‡å­—çš„ç©ºæ•°ç»„ï¼Œè¯¥æ•°ç»„å†™ä¸º[]ï¼ˆä¸€å¯¹ç©ºçš„æ–¹æ‹¬å·ï¼‰ï¼š 1234someInts.append(3)// someInts now contains 1 value of type IntsomeInts = []// someInts is now an empty array, but is still of type [Int] åˆ›å»ºå…·æœ‰é»˜è®¤å€¼çš„æ•°ç»„Swiftçš„Arrayç±»å‹è¿˜æä¾›äº†ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œç”¨äºåˆ›å»ºç‰¹å®šå¤§å°çš„æ•°ç»„ï¼Œå…¶æ‰€æœ‰å€¼éƒ½è®¾ç½®ä¸ºç›¸åŒçš„é»˜è®¤å€¼ã€‚æ‚¨å‘æ­¤åˆå§‹åŒ–å™¨ä¼ é€’é€‚å½“ç±»å‹çš„é»˜è®¤å€¼ï¼ˆç§°ä¸ºrepeatingï¼‰ï¼šä»¥åŠè¯¥å€¼åœ¨æ–°æ•°ç»„ä¸­é‡å¤çš„æ¬¡æ•°ï¼ˆç§°ä¸ºcountï¼‰ï¼š 12var threeDoubles = Array(repeating: 0.0, count: 3)// threeDoubles is of type [Double], and equals [0.0, 0.0, 0.0] é€šè¿‡å°†ä¸¤ä¸ªæ•°ç»„ä¸€èµ·åˆ›å»ºæ•°ç»„æ‚¨å¯ä»¥é€šè¿‡æ·»åŠ ä¸¤ä¸ªå…·æœ‰å…¼å®¹ç±»å‹çš„ç°æœ‰æ•°ç»„ä¸åŠ æ³•è¿ç®—ç¬¦ï¼ˆ+ï¼‰æ¥åˆ›å»ºæ–°æ•°ç»„ã€‚æ–°æ•°ç»„çš„ç±»å‹ä»æ‚¨æ·»åŠ çš„ä¸¤ä¸ªæ•°ç»„çš„ç±»å‹æ¨æ–­å‡ºæ¥ï¼š 12345var anotherThreeDoubles = Array(repeating: 2.5, count: 3)// anotherThreeDoubles is of type [Double], and equals [2.5, 2.5, 2.5]var sixDoubles = threeDoubles + anotherThreeDoubles// sixDoubles is inferred as [Double], and equals [0.0, 0.0, 0.0, 2.5, 2.5, 2.5] ä½¿ç”¨æ•°ç»„å­—é¢åˆ›å»ºæ•°ç»„æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ•°ç»„æ–‡å­—åˆå§‹åŒ–æ•°ç»„ï¼Œè¿™æ˜¯å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼å†™å…¥æ•°ç»„é›†åˆçš„ç®€å†™æ–¹å¼ã€‚æ•°ç»„æ–‡å­—å†™ä¸ºå€¼åˆ—è¡¨ï¼Œç”¨é€—å·åˆ†éš”ï¼Œå‘¨å›´æ˜¯ä¸€å¯¹æ–¹æ‹¬å·ï¼š [value 1, value 2, value 3] ä¸‹é¢çš„ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªåä¸ºshoppingListçš„æ•°ç»„æ¥å­˜å‚¨Stringå€¼ï¼š 12var shoppingList: [String] = [&quot;Eggs&quot;, &quot;Milk&quot;]// shoppingList has been initialized with two initial items shoppingListå˜é‡è¢«å£°æ˜ä¸ºâ€œå­—ç¬¦ä¸²å€¼æ•°ç»„â€ï¼Œå†™ä¸º[String]ç”±äºæ­¤ç‰¹å®šæ•°ç»„æŒ‡å®šäº†Stringçš„å€¼ç±»å‹ï¼Œå› æ­¤ä»…å…è®¸å­˜å‚¨Stringå€¼ã€‚åœ¨è¿™é‡Œï¼ŒshoppingListæ•°ç»„ç”¨ä¸¤ä¸ªStringå€¼ï¼ˆâ€œ&quot;Eggs&quot;å’Œ&quot;Milk&quot;åˆå§‹åŒ–ï¼Œå†™åœ¨æ•°ç»„æ–‡å­—ä¸­ã€‚ æ³¨æ„ shoppingListæ•°ç»„è¢«å£°æ˜ä¸ºå˜é‡ï¼ˆä½¿ç”¨varä»‹ç»å™¨ï¼‰ï¼Œè€Œä¸æ˜¯å¸¸é‡ï¼ˆä½¿ç”¨letä»‹ç»å™¨ï¼‰ï¼Œå› ä¸ºåœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œè´­ç‰©åˆ—è¡¨ä¸­æ·»åŠ äº†æ›´å¤šé¡¹ç›®ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•°ç»„å­—é¢åŒ…å«ä¸¤ä¸ªStringå€¼ï¼Œæ²¡æœ‰å…¶ä»–å€¼ã€‚è¿™ä¸shoppingListå˜é‡å£°æ˜çš„ç±»å‹ï¼ˆåªèƒ½åŒ…å«Stringå€¼çš„æ•°ç»„ï¼‰åŒ¹é…ï¼Œå› æ­¤å…è®¸åˆ†é…æ•°ç»„æ–‡å­—ä½œä¸ºä½¿ç”¨ä¸¤ä¸ªåˆå§‹é¡¹åˆå§‹åŒ–shoppingListçš„ä¸€ç§æ–¹å¼ã€‚ ç”±äºSwiftçš„ç±»å‹æ¨æ–­ï¼Œå¦‚æœæ‚¨ä½¿ç”¨åŒ…å«ç›¸åŒç±»å‹å€¼çš„æ•°ç»„æ–‡å­—åˆå§‹åŒ–æ•°ç»„ï¼Œåˆ™ä¸å¿…ç¼–å†™æ•°ç»„çš„ç±»å‹ã€‚shoppingListçš„åˆå§‹åŒ–å¯ä»¥ä»¥è¾ƒçŸ­çš„å½¢å¼ç¼–å†™ï¼š 1var shoppingList = [&quot;Eggs&quot;, &quot;Milk&quot;] ç”±äºæ•°ç»„æ–‡å­—ä¸­çš„æ‰€æœ‰å€¼éƒ½æ˜¯ç›¸åŒçš„ç±»å‹ï¼ŒSwiftå¯ä»¥æ¨æ–­[String]æ˜¯ç”¨äºshoppingListå˜é‡çš„æ­£ç¡®ç±»å‹ã€‚ è®¿é—®å’Œä¿®æ”¹æ•°ç»„æ‚¨å¯ä»¥é€šè¿‡æ•°ç»„çš„æ–¹æ³•å’Œå±æ€§æˆ–ä½¿ç”¨ä¸‹æ ‡è¯­æ³•è®¿é—®å’Œä¿®æ”¹æ•°ç»„ã€‚ è¦æŸ¥æ‰¾æ•°ç»„ä¸­çš„é¡¹ç›®æ•°é‡ï¼Œè¯·æ£€æŸ¥å…¶åªè¯»countå±æ€§ï¼š 12print(&quot;The shopping list contains \\(shoppingList.count) items.&quot;)// Prints &quot;The shopping list contains 2 items.&quot; ä½¿ç”¨å¸ƒå°”ä¸ºisEmptyå±æ€§ä½œä¸ºå¿«æ·æ–¹å¼ï¼Œä»¥æ£€æŸ¥countå±æ€§æ˜¯å¦ç­‰äº0ï¼š 123456if shoppingList.isEmpty &#123; print(&quot;The shopping list is empty.&quot;)&#125; else &#123; print(&quot;The shopping list isn&#x27;t empty.&quot;)&#125;// Prints &quot;The shopping list isn&#x27;t empty.&quot; æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨æ•°ç»„çš„append(_:)æ–¹æ³•å°†æ–°é¡¹æ·»åŠ åˆ°æ•°ç»„çš„æœ«å°¾ï¼š 12shoppingList.append(&quot;Flour&quot;)// shoppingList now contains 3 items, and someone is making pancakes æˆ–è€…ï¼Œå°†ä¸€ä¸ªæˆ–å¤šä¸ªå…¼å®¹é¡¹çš„æ•°ç»„é™„åŠ åˆ°åŠ æ³•èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ+=ï¼š 1234shoppingList += [&quot;Baking Powder&quot;]// shoppingList now contains 4 itemsshoppingList += [&quot;Chocolate Spread&quot;, &quot;Cheese&quot;, &quot;Butter&quot;]// shoppingList now contains 7 item ä½¿ç”¨ä¸‹æ ‡è¯­æ³•ä»æ•°ç»„ä¸­æ£€ç´¢å€¼ï¼Œåœ¨æ•°ç»„åç§°åç«‹å³ä¼ é€’è¦åœ¨æ–¹æ‹¬å·å†…æ£€ç´¢çš„å€¼çš„ç´¢å¼•ï¼š 12var firstItem = shoppingList[0]// firstItem is equal to &quot;Eggs&quot; æ³¨æ„ æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªé¡¹ç›®çš„ç´¢å¼•ä¸º0ï¼Œè€Œä¸æ˜¯1ã€‚Swiftä¸­çš„æ•°ç»„æ€»æ˜¯é›¶ç´¢å¼•ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹æ ‡è¯­æ³•æ›´æ”¹ç»™å®šç´¢å¼•çš„ç°æœ‰å€¼ï¼š 12shoppingList[0] = &quot;Six eggs&quot;// the first item in the list is now equal to &quot;Six eggs&quot; rather than &quot;Eggs&quot; ä½¿ç”¨ä¸‹æ ‡è¯­æ³•æ—¶ï¼ŒæŒ‡å®šçš„ç´¢å¼•å¿…é¡»æ˜¯æœ‰æ•ˆçš„ã€‚ä¾‹å¦‚ï¼Œå†™ shoppingList[shoppingList.count] = &quot;Salt&quot; å°†ä¸€ä¸ªé¡¹æ·»åŠ åˆ°æ•°ç»„çš„æœ«å°¾ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ä¸‹æ ‡è¯­æ³•ä¸€æ¬¡æ›´æ”¹å€¼èŒƒå›´ï¼Œå³ä½¿æ›¿æ¢å€¼é›†çš„é•¿åº¦ä¸æ‚¨è¦æ›¿æ¢çš„èŒƒå›´ä¸åŒã€‚ä»¥ä¸‹ç¤ºä¾‹å°†&quot;ChocolateSpread&quot; &quot;Cheese&quot;å’Œ&quot;Butter&quot;æ›¿æ¢ä¸º&quot;Bananas&quot;å’Œ&quot;Apples&quot;ï¼š 12shoppingList[4...6] = [&quot;Bananas&quot;, &quot;Apples&quot;]// shoppingList now contains 6 items è¦åœ¨æŒ‡å®šçš„ç´¢å¼•å¤„å°†é¡¹ç›®æ’å…¥æ•°ç»„ï¼Œè¯·è°ƒç”¨æ•°ç»„çš„insert(_:at:)æ–¹æ³•ï¼š 123shoppingList.insert(&quot;Maple Syrup&quot;, at: 0)// shoppingList now contains 7 items// &quot;Maple Syrup&quot; is now the first item in the list å¯¹insert(_:at:)æ–¹æ³•çš„è°ƒç”¨åœ¨è´­ç‰©æ¸…å•å¼€å¤´æ’å…¥ä¸€ä¸ªå€¼ä¸º&quot;MapleSyrup&quot;çš„æ–°é¡¹ç›®ï¼Œç´¢å¼•ä¸º0ã€‚ åŒæ ·ï¼Œæ‚¨ä½¿ç”¨remove(at:)æ–¹æ³•ä»æ•°ç»„ä¸­åˆ é™¤é¡¹ç›®ã€‚æ­¤æ–¹æ³•åœ¨æŒ‡å®šç´¢å¼•å¤„åˆ é™¤é¡¹ç›®å¹¶è¿”å›å·²åˆ é™¤çš„é¡¹ç›®ï¼ˆå°½ç®¡å¦‚æœæ‚¨ä¸éœ€è¦ï¼Œæ‚¨å¯ä»¥å¿½ç•¥è¿”å›çš„å€¼ï¼‰ï¼š 1234let mapleSyrup = shoppingList.remove(at: 0)// the item that was at index 0 has just been removed// shoppingList now contains 6 items, and no Maple Syrup// the mapleSyrup constant is now equal to the removed &quot;Maple Syrup&quot; string æ³¨æ„ å¦‚æœæ‚¨å°è¯•è®¿é—®æˆ–ä¿®æ”¹è¶…å‡ºæ•°ç»„ç°æœ‰è¾¹ç•Œçš„ç´¢å¼•çš„å€¼ï¼Œæ‚¨å°†è§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚æ‚¨å¯ä»¥é€šè¿‡å°†ç´¢å¼•ä¸æ•°ç»„çš„countå±æ€§è¿›è¡Œæ¯”è¾ƒï¼Œåœ¨ä½¿ç”¨ç´¢å¼•ä¹‹å‰æ£€æŸ¥ç´¢å¼•æ˜¯å¦æœ‰æ•ˆã€‚æ•°ç»„ä¸­æœ€å¤§çš„æœ‰æ•ˆç´¢å¼•æ˜¯count1ï¼Œå› ä¸ºæ•°ç»„ä»é›¶å¼€å§‹ç´¢å¼•â€”â€”ç„¶è€Œï¼Œå½“countä¸º0ï¼ˆè¿™æ„å‘³ç€æ•°ç»„ä¸ºç©ºï¼‰ï¼Œæ²¡æœ‰æœ‰æ•ˆçš„ç´¢å¼•ã€‚ å½“åˆ é™¤é¡¹ç›®æ—¶ï¼Œæ•°ç»„ä¸­çš„ä»»ä½•é—´éš™éƒ½ä¼šå…³é—­ï¼Œå› æ­¤ç´¢å¼•0çš„å€¼å†æ¬¡ç­‰äº&quot;Sixeggs&quot;ï¼š 12firstItem = shoppingList[0]// firstItem is now equal to &quot;Six eggs&quot; å¦‚æœä½ æƒ³ä»æ•°ç»„ä¸­åˆ é™¤æœ€åä¸€é¡¹ï¼Œä½¿ç”¨â€™ removeLast() â€˜æ–¹æ³•ï¼Œè€Œä¸æ˜¯â€™ remove(at:) â€˜æ–¹æ³•ï¼Œä»¥é¿å…éœ€è¦æŸ¥è¯¢æ•°ç»„çš„â€™ count â€˜å±æ€§ã€‚åƒâ€™ remove(at:) â€˜æ–¹æ³•ä¸€æ ·ï¼Œâ€™ removeLast() â€˜è¿”å›è¢«åˆ é™¤çš„é¡¹: 1234let apples = shoppingList.removeLast()// the last item in the array has just been removed// shoppingList now contains 5 items, and no apples// the apples constant is now equal to the removed &quot;Apples&quot; string åœ¨æ•°ç»„ä¸Šè¿­ä»£æ‚¨å¯ä»¥ä½¿ç”¨for-inå¾ªç¯è¿­ä»£æ•°ç»„ä¸­çš„æ•´ç»„å€¼ï¼š 12345678for item in shoppingList &#123; print(item)&#125;// Six eggs// Milk// Flour// Baking Powder// Bananas å¦‚æœæ‚¨éœ€è¦æ¯ä¸ªé¡¹ç›®çš„æ•´æ•°ç´¢å¼•åŠå…¶å€¼ï¼Œè¯·ä½¿ç”¨enumerated()æ–¹æ³•è¿­ä»£æ•°ç»„ã€‚å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹ç›®ï¼Œenumerated()æ–¹æ³•è¿”å›ç”±æ•´æ•°å’Œé¡¹ç»„æˆçš„å…ƒç»„ã€‚æ•´æ•°ä»é›¶å¼€å§‹ï¼Œæ¯ä¸ªé¡¹ç›®æ•°ä¸€ä¸ªï¼›å¦‚æœæ‚¨åœ¨æ•´ä¸ªæ•°ç»„ä¸­æšä¸¾ï¼Œè¿™äº›æ•´æ•°ä¸é¡¹ç›®çš„ç´¢å¼•åŒ¹é…ã€‚æ‚¨å¯ä»¥å°†å…ƒç»„åˆ†è§£ä¸ºä¸´æ—¶å¸¸é‡æˆ–å˜é‡ï¼Œä½œä¸ºè¿­ä»£çš„ä¸€éƒ¨åˆ†ï¼š 12345678for (index, value) in shoppingList.enumerated() &#123; print(&quot;Item \\(index + 1): \\(value)&quot;)&#125;// Item 1: Six eggs// Item 2: Milk// Item 3: Flour// Item 4: Baking Powder// Item 5: Bananas æœ‰å…³for-inå¾ªç¯çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…for-inå¾ªç¯ã€‚ Setsé›†åˆåœ¨é›†åˆä¸­å­˜å‚¨ç›¸åŒç±»å‹çš„ä¸åŒå€¼ï¼Œæ²¡æœ‰å®šä¹‰çš„é¡ºåºã€‚å½“é¡¹ç›®é¡ºåºä¸é‡è¦æ—¶ï¼Œæˆ–è€…å½“æ‚¨éœ€è¦ç¡®ä¿é¡¹ç›®åªå‡ºç°ä¸€æ¬¡æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é›†åˆè€Œä¸æ˜¯æ•°ç»„ã€‚ æ³¨æ„ Swiftçš„Setç±»å‹ä¸Foundationçš„NSSetç±»æ¡¥æ¥ã€‚ For more information about using Set with Foundation and Cocoa, see Bridging Between Set and NSSet. é›†åˆç±»å‹çš„å“ˆå¸Œå€¼ä¸ºäº†å­˜å‚¨åœ¨é›†åˆä¸­ï¼Œç±»å‹å¿…é¡»æ˜¯â€œå“ˆå¸Œâ€çš„â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œç±»å‹å¿…é¡»ä¸ºè‡ªå·±æä¾›ä¸€ç§è®¡ç®—â€œå“ˆå¸Œå€¼â€çš„æ–¹æ³•ã€‚å“ˆå¸Œå€¼æ˜¯ä¸€ä¸ªâ€™ Int â€˜å€¼ï¼Œå®ƒå¯¹æ‰€æœ‰ç›¸ç­‰æ¯”è¾ƒçš„å¯¹è±¡éƒ½æ˜¯ç›¸åŒçš„ï¼Œä¾‹å¦‚ï¼Œå¦‚æœâ€™ A &#x3D;&#x3D; b â€˜ï¼Œ â€˜ A â€˜çš„å“ˆå¸Œå€¼ç­‰äºâ€™ b â€˜çš„å“ˆå¸Œå€¼ã€‚ Swiftçš„æ‰€æœ‰åŸºæœ¬ç±»å‹ï¼ˆå¦‚Stringã€Intã€Doubleå’ŒBoolï¼‰é»˜è®¤éƒ½æ˜¯å¯æ•£åˆ—çš„ï¼Œå¹¶ä¸”å¯ä»¥ç”¨ä½œè®¾ç½®å€¼ç±»å‹æˆ–å­—å…¸é”®ç±»å‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ²¡æœ‰å…³è”å€¼çš„æšä¸¾æ¡ˆä¾‹å€¼ï¼ˆå¦‚æšä¸¾ä¸­æ‰€è¿°ï¼‰ä¹Ÿæ˜¯å¯æ•£åˆ—çš„ã€‚ æ³¨æ„ æ‚¨å¯ä»¥ä½¿ç”¨è‡ªå·±çš„è‡ªå®šä¹‰ç±»å‹ä½œä¸ºè®¾ç½®å€¼ç±»å‹æˆ–å­—å…¸é”®ç±»å‹ï¼Œä½¿å…¶ç¬¦åˆSwiftæ ‡å‡†åº“ä¸­çš„Hashableåè®®ã€‚æœ‰å…³å®ç°æ‰€éœ€hash(into:)æ–¹æ³•çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…Hashableã€‚æœ‰å…³éµå®ˆåè®®çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…åè®®ã€‚ è®¾ç½®ç±»å‹è¯­æ³•Swifté›†çš„ç±»å‹å†™ä¸ºSet&lt;Element&gt;ï¼Œå…¶ä¸­Elementæ˜¯å…è®¸è¯¥é›†å­˜å‚¨çš„ç±»å‹ã€‚ä¸æ•°ç»„ä¸åŒï¼Œé›†åˆæ²¡æœ‰ç­‰æ•ˆçš„é€Ÿè®°å½¢å¼ã€‚ åˆ›å»ºå’Œåˆå§‹åŒ–ç©ºé›†æ‚¨å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–å™¨è¯­æ³•åˆ›å»ºç‰¹å®šç±»å‹çš„ç©ºé›†ï¼š 123var letters = Set&lt;Character&gt;()print(&quot;letters is of type Set&lt;Character&gt; with \\(letters.count) items.&quot;)// Prints &quot;letters is of type Set&lt;Character&gt; with 0 items.&quot; æ³¨æ„ ä»åˆå§‹åŒ–å™¨çš„ç±»å‹æ¨æ–­letterså˜é‡çš„ç±»å‹ä¸ºSet&lt;Character&gt;ã€‚ æˆ–è€…ï¼Œå¦‚æœä¸Šä¸‹æ–‡å·²ç»æä¾›äº†ç±»å‹ä¿¡æ¯ï¼Œä¾‹å¦‚å‡½æ•°å‚æ•°æˆ–å·²ç»é”®å…¥çš„å˜é‡æˆ–å¸¸é‡ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ç©ºæ•°ç»„æ–‡å­—çš„ç©ºé›†ï¼š 1234letters.insert(&quot;a&quot;)// letters now contains 1 value of type Characterletters = []// letters is now an empty set, but is still of type Set&lt;Character&gt; ä½¿ç”¨æ•°ç»„å­—é¢åˆ›å»ºé›†åˆæ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ•°ç»„æ–‡å­—åˆå§‹åŒ–é›†åˆï¼Œä½œä¸ºå°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼å†™å…¥é›†åˆçš„é€Ÿè®°æ–¹å¼ã€‚ ä¸‹é¢çš„ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªåä¸º favoriteGenresé›†åˆæ¥å­˜å‚¨Stringå€¼ï¼š 12var favoriteGenres: Set&lt;String&gt; = [&quot;Rock&quot;, &quot;Classical&quot;, &quot;Hip hop&quot;]// favoriteGenres has been initialized with three initial items favoritegenre å˜é‡è¢«å£°æ˜ä¸ºâ€ä¸€ç»„ String å€¼â€ï¼Œå†™æˆ set &lt;String&gt; ã€‚å› ä¸ºè¿™ä¸ªç‰¹å®šçš„é›†åˆæŒ‡å®šäº†ä¸€ä¸ªå€¼ç±»å‹ String ï¼Œå®ƒåªå…è®¸å­˜å‚¨ String å€¼ã€‚åœ¨è¿™é‡Œï¼Œ favoritegenre é›†åˆè¢«åˆå§‹åŒ–ä¸ºä¸‰ä¸ª String å€¼( Rock ï¼Œ Classical å’Œ Hip hop )ï¼Œå†™å…¥ä¸€ä¸ªæ•°ç»„æ–‡å­—ã€‚ æ³¨æ„ favoriteGenresé›†è¢«å£°æ˜ä¸ºå˜é‡ï¼ˆä½¿ç”¨varå¼•å…¥å™¨ï¼‰ï¼Œè€Œä¸æ˜¯å¸¸é‡ï¼ˆä½¿ç”¨letä»‹ç»å™¨ï¼‰ï¼Œå› ä¸ºåœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­æ·»åŠ äº†å’Œåˆ é™¤äº†é¡¹ç›®ã€‚ ä»…å‡­æ•°ç»„å­—é¢å€¼æ— æ³•æ¨æ–­é›†åˆç±»å‹ï¼Œå› æ­¤å¿…é¡»æ˜¾å¼å£°æ˜ç±»å‹Setã€‚ä½†æ˜¯ï¼Œç”±äºSwiftçš„ç±»å‹æ¨æ–­ï¼Œå¦‚æœæ‚¨ä½¿ç”¨ä»…åŒ…å«ä¸€ç§ç±»å‹çš„å€¼çš„æ•°ç»„æ–‡å­—åˆå§‹åŒ–é›†å…ƒç´ çš„ç±»å‹ï¼Œåˆ™ä¸å¿…ç¼–å†™è¯¥é›†åˆå…ƒç´ çš„ç±»å‹ã€‚favoriteGenresçš„åˆå§‹åŒ–å¯ä»¥ä»¥è¾ƒçŸ­çš„å½¢å¼ç¼–å†™ï¼š 1var favoriteGenres: Set = [&quot;Rock&quot;, &quot;Classical&quot;, &quot;Hip hop&quot;] ç”±äºæ•°ç»„æ–‡å­—ä¸­çš„æ‰€æœ‰å€¼éƒ½æ˜¯ç›¸åŒçš„ç±»å‹ï¼ŒSwiftå¯ä»¥æ¨æ–­Set&lt;String&gt;æ˜¯ç”¨äºfavoriteGenreså˜é‡çš„æ­£ç¡®ç±»å‹ã€‚ è®¿é—®å’Œä¿®æ”¹ä¸€ç»„æ‚¨é€šè¿‡å…¶æ–¹æ³•å’Œå±æ€§è®¿é—®å’Œä¿®æ”¹é›†åˆã€‚ è¦äº†è§£é›†åˆä¸­çš„é¡¹ç›®æ•°é‡ï¼Œè¯·æ£€æŸ¥å…¶åªè¯»countå±æ€§ï¼š 12print(&quot;I have \\(favoriteGenres.count) favorite music genres.&quot;)// Prints &quot;I have 3 favorite music genres.&quot; ä½¿ç”¨å¸ƒå°”ä¸ºisEmptyå±æ€§ä½œä¸ºå¿«æ·æ–¹å¼ï¼Œä»¥æ£€æŸ¥countå±æ€§æ˜¯å¦ç­‰äº0ï¼š 123456if favoriteGenres.isEmpty &#123; print(&quot;As far as music goes, I&#x27;m not picky.&quot;)&#125; else &#123; print(&quot;I have particular music preferences.&quot;)&#125;// Prints &quot;I have particular music preferences.&quot; æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨é›†åˆçš„insert(_:)æ–¹æ³•å°†æ–°é¡¹ç›®æ·»åŠ åˆ°é›†åˆä¸­ï¼š 12favoriteGenres.insert(&quot;Jazz&quot;)// favoriteGenres now contains 4 items æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨é›†åˆçš„remove(_:)æ–¹æ³•ä»é›†åˆä¸­åˆ é™¤é¡¹ç›®ï¼Œå¦‚æœé¡¹ç›®æ˜¯é›†åˆçš„æˆå‘˜ï¼Œåˆ™åˆ é™¤é¡¹ç›®ï¼Œå¹¶è¿”å›åˆ é™¤çš„å€¼ï¼Œå¦‚æœé›†åˆä¸åŒ…å«å®ƒï¼Œåˆ™è¿”å›nilã€‚æˆ–è€…ï¼Œé›†åˆä¸­çš„æ‰€æœ‰é¡¹ç›®éƒ½å¯ä»¥ä½¿ç”¨å…¶removeAll()æ–¹æ³•åˆ é™¤ã€‚ 123456if let removedGenre = favoriteGenres.remove(&quot;Rock&quot;) &#123; print(&quot;\\(removedGenre)? I&#x27;m over it.&quot;)&#125; else &#123; print(&quot;I never much cared for that.&quot;)&#125;// Prints &quot;Rock? I&#x27;m over it.&quot; è¦æ£€æŸ¥é›†åˆæ˜¯å¦åŒ…å«ç‰¹å®šé¡¹ï¼Œè¯·ä½¿ç”¨contains(_:)æ–¹æ³•ã€‚ 123456if favoriteGenres.contains(&quot;Funk&quot;) &#123; print(&quot;I get up on the good foot.&quot;)&#125; else &#123; print(&quot;It&#x27;s too funky in here.&quot;)&#125;// Prints &quot;It&#x27;s too funky in here.&quot; åœ¨ä¸€ç»„ä¸Šè¿­ä»£æ‚¨å¯ä»¥ä½¿ç”¨for-inå¾ªç¯è¿­ä»£é›†åˆä¸­çš„å€¼ã€‚ 123456for genre in favoriteGenres &#123; print(&quot;\\(genre)&quot;)&#125;// Classical// Jazz// Hip hop æœ‰å…³for-inå¾ªç¯çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…for-inå¾ªç¯ã€‚ Swiftçš„Setç±»å‹æ²¡æœ‰å®šä¹‰çš„é¡ºåºã€‚è¦æŒ‰ç‰¹å®šé¡ºåºè¿­ä»£é›†åˆçš„å€¼ï¼Œè¯·ä½¿ç”¨sorted()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†é›†åˆçš„å…ƒç´ ä½œä¸ºä½¿ç”¨&lt;è¿ç®—ç¬¦æ’åºçš„æ•°ç»„è¿”å›ã€‚ 123456for genre in favoriteGenres.sorted() &#123; print(&quot;\\(genre)&quot;)&#125;// Classical// Hip hop// Jazz æ‰§è¡Œé›†åˆæ“ä½œæ‚¨å¯ä»¥é«˜æ•ˆåœ°æ‰§è¡ŒåŸºæœ¬é›†åˆæ“ä½œï¼Œä¾‹å¦‚å°†ä¸¤ä¸ªé›†åˆç»„åˆåœ¨ä¸€èµ·ï¼Œç¡®å®šä¸¤ä¸ªé›†åˆå…·æœ‰å…±åŒå€¼ï¼Œæˆ–ç¡®å®šä¸¤ä¸ªé›†åˆæ˜¯å¦åŒ…å«æ‰€æœ‰ã€éƒ¨åˆ†æˆ–ä¸åŒ…å«ç›¸åŒçš„å€¼ã€‚ åŸºæœ¬é›†æ“ä½œä¸‹é¢çš„æ’å›¾æç»˜äº†ä¸¤ä¸ªé›†åˆâ€”â€”aå’Œbâ€”â€”ä»¥åŠç”±é˜´å½±åŒºåŸŸè¡¨ç¤ºçš„å„ç§é›†åˆæ“ä½œçš„ç»“æœã€‚ ä½¿ç”¨intersection(_:)æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°é›†åˆï¼Œå…¶ä¸­åªæœ‰ä¸¤ä¸ªé›†åˆå…±æœ‰çš„å€¼ã€‚ ä½¿ç”¨symmetricDifference(_:)æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°é›†åˆï¼Œå…¶ä¸­ä¸¤ä¸ªé›†åˆéƒ½æœ‰å€¼ï¼Œä½†ä¸æ˜¯ä¸¤è€…ã€‚ ä½¿ç”¨union(_:)æ–¹æ³•åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªé›†åˆä¸­æ‰€æœ‰å€¼çš„æ–°é›†åˆã€‚ ä½¿ç”¨subtracting(_:)æ–¹æ³•åˆ›å»ºä¸€ä¸ªå€¼ä¸åœ¨æŒ‡å®šé›†åˆä¸­çš„æ–°é›†åˆã€‚ 123456789101112let oddDigits: Set = [1, 3, 5, 7, 9]let evenDigits: Set = [0, 2, 4, 6, 8]let singleDigitPrimeNumbers: Set = [2, 3, 5, 7]oddDigits.union(evenDigits).sorted()// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]oddDigits.intersection(evenDigits).sorted()// []oddDigits.subtracting(singleDigitPrimeNumbers).sorted()// [1, 9]oddDigits.symmetricDifference(singleDigitPrimeNumbers).sorted()// [1, 2, 9] è®¾å®šæˆå‘˜èµ„æ ¼å’Œå¹³ç­‰ä¸‹å›¾æè¿°äº†ä¸‰ä¸ªé›†åˆâ€”â€”aã€bå’Œcï¼Œå…¶ä¸­é‡å çš„åŒºåŸŸè¡¨ç¤ºé›†åˆä¹‹é—´å…±äº«çš„å…ƒç´ ã€‚è®¾ç½®ä¸€ä¸ªæ˜¯é›†çš„è¶…é›†b,å› ä¸ºåŒ…å«äº†æ‰€æœ‰å…ƒç´ bã€‚ç›¸ååœ°,bæ˜¯é›†çš„ä¸€ä¸ªå­é›†,å› ä¸ºæ‰€æœ‰å…ƒç´ bä¹ŸåŒ…å«ä¸€ç»„ã€‚b, cæ˜¯ä¸ç›¸äº¤çš„,å› ä¸ºä»–ä»¬æ²¡æœ‰å…±åŒä¹‹å¤„ã€‚ ä½¿ç”¨â€œç›¸ç­‰â€è¿ç®—ç¬¦(==)ç¡®å®šä¸¤ä¸ªé›†åˆæ˜¯å¦åŒ…å«æ‰€æœ‰ç›¸åŒçš„å€¼ã€‚ Use the isSubset(of:) æ–¹æ³•ç¡®å®šä¸€ä¸ªé›†åˆçš„æ‰€æœ‰å€¼æ˜¯å¦åŒ…å«åœ¨æŒ‡å®šçš„é›†åˆä¸­ã€‚ Use the isSuperset(of:) æ–¹æ³•ç¡®å®šä¸€ä¸ªé›†åˆæ˜¯å¦åŒ…å«æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å€¼ã€‚ Use the isStrictSubset(of:) or isStrictSuperset(of:) æ–¹æ³•ç¡®å®šä¸€ä¸ªé›†åˆæ˜¯å­é›†è¿˜æ˜¯è¶…é›†ï¼Œä½†ä¸ç­‰äºæŒ‡å®šçš„é›†åˆã€‚ ä½¿ç”¨isDisjoint(with:)æ–¹æ³•ç¡®å®šä¸¤ä¸ªé›†åˆæ˜¯å¦æ²¡æœ‰å…±åŒå€¼ã€‚ 12345678910let houseAnimals: Set = [&quot;ğŸ¶&quot;, &quot;ğŸ±&quot;]let farmAnimals: Set = [&quot;ğŸ®&quot;, &quot;ğŸ”&quot;, &quot;ğŸ‘&quot;, &quot;ğŸ¶&quot;, &quot;ğŸ±&quot;]let cityAnimals: Set = [&quot;ğŸ¦&quot;, &quot;ğŸ­&quot;]houseAnimals.isSubset(of: farmAnimals)// truefarmAnimals.isSuperset(of: houseAnimals)// truefarmAnimals.isDisjoint(with: cityAnimals)// true å­—å…¸(Dictionaries)å­—å…¸åœ¨é›†åˆä¸­å­˜å‚¨ç›¸åŒç±»å‹çš„é”®å’Œç›¸åŒç±»å‹çš„å€¼ä¹‹é—´çš„å…³è”ï¼Œæ²¡æœ‰å®šä¹‰çš„é¡ºåºã€‚æ¯ä¸ªå€¼éƒ½ä¸ä¸€ä¸ªå”¯ä¸€çš„é”®ç›¸å…³è”ï¼Œè¯¥é”®å……å½“å­—å…¸ä¸­è¯¥å€¼çš„æ ‡è¯†ç¬¦ã€‚ä¸æ•°ç»„ä¸­çš„é¡¹ç›®ä¸åŒï¼Œå­—å…¸ä¸­çš„é¡¹ç›®æ²¡æœ‰æŒ‡å®šçš„é¡ºåºã€‚å½“æ‚¨éœ€è¦æ ¹æ®å®ƒä»¬çš„æ ‡è¯†ç¬¦æŸ¥æ‰¾å€¼æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å­—å…¸ï¼Œå°±åƒä½¿ç”¨ç°å®ä¸–ç•Œçš„å­—å…¸æ¥æŸ¥æ‰¾ç‰¹å®šå•è¯çš„å®šä¹‰ä¸€æ ·ã€‚ æ³¨æ„ Swiftçš„Dictionaryç±»å‹ä¸Foundationçš„NSDictionaryç±»ç›¸è¿ã€‚ æœ‰å…³ä½¿ç”¨Dictionaryä¸åŸºé‡‘ä¼šå’Œå¯å¯çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…è¯å…¸å’ŒNSè¯å…¸ä¹‹é—´çš„è¡”æ¥ã€‚ å­—å…¸ç±»å‹é€Ÿè®°è¯­æ³•Swiftå­—å…¸çš„ç±»å‹å®Œæ•´åœ°å†™æˆâ€˜dictionary &lt;Key, Value&gt;â€™ï¼Œå…¶ä¸­â€˜Keyâ€™æ˜¯å¯ä»¥ç”¨ä½œå­—å…¸é”®çš„å€¼çš„ç±»å‹ï¼Œè€Œâ€˜Valueâ€™æ˜¯å­—å…¸ä¸ºè¿™äº›é”®å­˜å‚¨çš„å€¼çš„ç±»å‹ã€‚ æ³¨æ„ å­—å…¸Keyç±»å‹å¿…é¡»ç¬¦åˆHashableåè®®ï¼Œå°±åƒé›†åˆçš„å€¼ç±»å‹ä¸€æ ·ã€‚ æ‚¨è¿˜å¯ä»¥ä»¥é€Ÿè®°å½¢å¼å°†å­—å…¸ç±»å‹å†™ä¸º[Key:Value]è™½ç„¶è¿™ä¸¤ç§å½¢å¼åœ¨åŠŸèƒ½ä¸Šç›¸åŒï¼Œä½†ç®€å†™å½¢å¼æ˜¯é¦–é€‰ï¼Œå¹¶åœ¨å‚è€ƒè¯å…¸ç±»å‹æ—¶åœ¨æ•´ä¸ªæŒ‡å—ä¸­ä½¿ç”¨ã€‚ åˆ›å»ºç©ºå­—å…¸ä¸æ•°ç»„ä¸€æ ·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–å™¨è¯­æ³•åˆ›å»ºç‰¹å®šç±»å‹çš„ç©ºDictionaryï¼š 12var namesOfIntegers: [Int: String] = [:]// namesOfIntegers is an empty [Int: String] dictionary è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªâ€œ[Int: String]â€ç±»å‹çš„ç©ºå­—å…¸æ¥å­˜å‚¨äººç±»å¯è¯»çš„æ•´æ•°å€¼åç§°ã€‚å®ƒçš„é”®çš„ç±»å‹æ˜¯â€™ Int â€˜ï¼Œå®ƒçš„å€¼çš„ç±»å‹æ˜¯â€™ String â€˜ã€‚ å¦‚æœä¸Šä¸‹æ–‡å·²ç»æä¾›äº†ç±»å‹ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ç©ºå­—å…¸æ–‡å­—çš„ç©ºå­—å…¸ï¼Œè¯¥å­—å…¸å†™ä¸º[:]ï¼ˆä¸€å¯¹æ–¹æ‹¬å·å†…çš„å†’å·ï¼‰ï¼š 1234namesOfIntegers[16] = &quot;sixteen&quot;// namesOfIntegers now contains 1 key-value pairnamesOfIntegers = [:]// namesOfIntegers is once again an empty dictionary of type [Int: String] ä½¿ç”¨å­—å…¸åˆ›å»ºè¯å…¸æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å­—å…¸æ–‡å­—åˆå§‹åŒ–å­—å…¸ï¼Œè¯¥å­—å…¸çš„è¯­æ³•ä¸å‰é¢çœ‹åˆ°çš„æ•°ç»„æ–‡å­—ç›¸ä¼¼ã€‚å­—å…¸æ–‡å­—æ˜¯å°†ä¸€ä¸ªæˆ–å¤šä¸ªé”®å€¼å¯¹å†™æˆDictionaryé›†åˆçš„ç®€å†™æ–¹å¼ã€‚ é”®å€¼å¯¹æ˜¯é”®å’Œå€¼çš„ç»„åˆã€‚åœ¨å­—å…¸æ–‡å­—ä¸­ï¼Œæ¯ä¸ªé”®å€¼å¯¹ä¸­çš„é”®å’Œå€¼ç”±å†’å·åˆ†éš”ã€‚é”®å€¼å¯¹å†™æˆåˆ—è¡¨ï¼Œç”¨é€—å·åˆ†éš”ï¼Œå‘¨å›´æ˜¯ä¸€å¯¹æ–¹æ‹¬å·ï¼š [key 1: value 1, key 2: value 2, key 3: value 3] ä¸‹é¢çš„ç¤ºä¾‹åˆ›å»ºäº†ä¸€æœ¬è¯å…¸æ¥å­˜å‚¨å›½é™…æœºåœºçš„åç§°ã€‚åœ¨æœ¬è¯å…¸ä¸­ï¼Œé”®æ˜¯ä¸‰ä¸ªå­—æ¯çš„å›½é™…èˆªç©ºè¿è¾“åä¼šä»£ç ï¼Œå€¼æ˜¯æœºåœºåç§°ï¼š 1var airports: [String: String] = [&quot;YYZ&quot;: &quot;Toronto Pearson&quot;, &quot;DUB&quot;: &quot;Dublin&quot;] airportsè¯å…¸è¢«å£°æ˜ä¸ºå…·æœ‰[String:String]çš„ç±»å‹ï¼Œæ„æ€æ˜¯â€œé”®ä¸ºStringç±»å‹ï¼Œå…¶å€¼ä¹Ÿä¸ºStringç±»å‹çš„Dictionaryâ€ã€‚ æ³¨æ„ airportsè¯å…¸è¢«å£°æ˜ä¸ºå˜é‡ï¼ˆä½¿ç”¨varä»‹ç»å™¨ï¼‰ï¼Œè€Œä¸æ˜¯å¸¸é‡ï¼ˆä½¿ç”¨letä»‹ç»å™¨ï¼‰ï¼Œå› ä¸ºåœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œè¯å…¸ä¸­æ·»åŠ äº†æ›´å¤šçš„æœºåœºã€‚ airportsè¯å…¸ä»¥åŒ…å«ä¸¤ä¸ªé”®å€¼å¯¹çš„å­—å…¸å­—é¢è¿›è¡Œåˆå§‹åŒ–ã€‚ç¬¬ä¸€å¯¹æœ‰&quot;YYZ&quot;çš„é”®å’Œ&quot;TorontoPearson&quot;çš„å€¼ã€‚ç¬¬äºŒå¯¹æœ‰&quot;DUB&quot;çš„é”®å’Œ&quot;Dublin&quot;çš„å€¼ã€‚ è¿™æœ¬è¯å…¸çš„æ–‡å­—åŒ…å«ä¸¤ä¸ªString:Stringå¯¹ã€‚æ­¤é”®å€¼ç±»å‹ä¸airportså˜é‡å£°æ˜çš„ç±»å‹åŒ¹é…ï¼ˆä»…å…·æœ‰Stringé”®å’Œä»…Stringå€¼çš„å­—å…¸ï¼‰ï¼Œå› æ­¤å…è®¸åˆ†é…å­—å…¸æ–‡å­—ï¼Œä½œä¸ºç”¨ä¸¤ä¸ªåˆå§‹é¡¹åˆå§‹åŒ–airportså­—å…¸çš„ä¸€ç§æ–¹å¼ã€‚ ä¸æ•°ç»„ä¸€æ ·ï¼Œå¦‚æœæ‚¨ä½¿ç”¨é”®å’Œå€¼å…·æœ‰ä¸€è‡´ç±»å‹çš„å­—å…¸å­—å…¸åˆå§‹åŒ–ï¼Œåˆ™ä¸å¿…ç¼–å†™å­—å…¸ç±»å‹ã€‚airportsçš„åˆå§‹åŒ–å¯ä»¥ä»¥è¾ƒçŸ­çš„å½¢å¼ä¹¦å†™ï¼š 1var airports = [&quot;YYZ&quot;: &quot;Toronto Pearson&quot;, &quot;DUB&quot;: &quot;Dublin&quot;] å› ä¸ºå­—é¢å€¼ä¸­çš„æ‰€æœ‰é”®éƒ½æ˜¯å½¼æ­¤ç›¸åŒçš„ç±»å‹ï¼ŒåŒæ ·çš„ï¼Œæ‰€æœ‰å€¼ä¹Ÿéƒ½æ˜¯å½¼æ­¤ç›¸åŒçš„ç±»å‹ï¼ŒSwiftå¯ä»¥æ¨æ–­â€™ [String: String] â€˜æ˜¯â€™ airports â€˜å­—å…¸çš„æ­£ç¡®ç±»å‹ã€‚ è®¿é—®å’Œä¿®æ”¹è¯å…¸æ‚¨é€šè¿‡å­—å…¸çš„æ–¹æ³•å’Œå±æ€§æˆ–ä½¿ç”¨ä¸‹æ ‡è¯­æ³•è®¿é—®å’Œä¿®æ”¹å­—å…¸ã€‚ ä¸æ•°ç»„ä¸€æ ·ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ£€æŸ¥å­—å…¸çš„åªè¯»countå±æ€§æ¥æŸ¥æ‰¾Dictionaryä¸­çš„é¡¹ç›®æ•°é‡ï¼š 12print(&quot;The airports dictionary contains \\(airports.count) items.&quot;)// Prints &quot;The airports dictionary contains 2 items.&quot; ä½¿ç”¨å¸ƒå°”ä¸ºisEmptyå±æ€§ä½œä¸ºå¿«æ·æ–¹å¼ï¼Œä»¥æ£€æŸ¥countå±æ€§æ˜¯å¦ç­‰äº0ï¼š 123456if airports.isEmpty &#123; print(&quot;The airports dictionary is empty.&quot;)&#125; else &#123; print(&quot;The airports dictionary isn&#x27;t empty.&quot;)&#125;// Prints &quot;The airports dictionary isn&#x27;t empty.&quot; æ‚¨å¯ä»¥å°†æ–°é¡¹ç›®æ·»åŠ åˆ°å¸¦æœ‰ä¸‹æ ‡è¯­æ³•çš„å­—å…¸ä¸­ã€‚ä½¿ç”¨é€‚å½“ç±»å‹çš„æ–°é”®ä½œä¸ºä¸‹æ ‡ç´¢å¼•ï¼Œå¹¶åˆ†é…é€‚å½“ç±»å‹çš„æ–°å€¼ï¼š 12airports[&quot;LHR&quot;] = &quot;London&quot;// the airports dictionary now contains 3 items æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ä¸‹æ ‡è¯­æ³•æ¥æ›´æ”¹ä¸ç‰¹å®šé”®å…³è”çš„å€¼ï¼š 12airports[&quot;LHR&quot;] = &quot;London Heathrow&quot;// the value for &quot;LHR&quot; has been changed to &quot;London Heathrow&quot; ä½œä¸ºä¸‹æ ‡çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä½¿ç”¨å­—å…¸çš„updateValue(_:forKey:)æ–¹æ³•æ¥è®¾ç½®æˆ–æ›´æ–°ç‰¹å®šé”®çš„å€¼ã€‚ä¸ä¸Šé¢çš„ä¸‹æ ‡ç¤ºä¾‹ä¸€æ ·ï¼ŒupdateValue(_:forKey:)æ–¹æ³•ä¸ºé”®è®¾ç½®å€¼ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¸ºè¯¥é”®è®¾ç½®å€¼ï¼Œå¦‚æœè¯¥é”®å·²ç»å­˜åœ¨ï¼Œåˆ™æ›´æ–°è¯¥å€¼ã€‚ç„¶è€Œï¼Œä¸ä¸‹æ ‡ä¸åŒï¼ŒupdateValue(_:forKey:)æ–¹æ³•åœ¨æ‰§è¡Œæ›´æ–°åè¿”å›æ—§å€¼ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿæ£€æŸ¥æ˜¯å¦è¿›è¡Œäº†æ›´æ–°ã€‚ updateValue(_:forKey:)æ–¹æ³•è¿”å›å­—å…¸å€¼ç±»å‹çš„å¯é€‰å€¼ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå­˜å‚¨Stringå€¼çš„å­—å…¸ï¼Œè¯¥æ–¹æ³•è¿”å›String?æˆ–â€œå¯é€‰Stringâ€ç±»å‹çš„å€¼ã€‚å¦‚æœæ›´æ–°å‰å­˜åœ¨è¯¥é”®ï¼Œåˆ™æ­¤å¯é€‰å€¼åŒ…å«è¯¥é”®çš„æ—§å€¼ï¼Œå¦‚æœæ²¡æœ‰å€¼ï¼Œåˆ™nilï¼š 1234if let oldValue = airports.updateValue(&quot;Dublin Airport&quot;, forKey: &quot;DUB&quot;) &#123; print(&quot;The old value for DUB was \\(oldValue).&quot;)&#125;// Prints &quot;The old value for DUB was Dublin.&quot; æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ä¸‹æ ‡è¯­æ³•ä»å­—å…¸ä¸­æ£€ç´¢ç‰¹å®šé”®çš„å€¼ã€‚ç”±äºå¯ä»¥è¯·æ±‚ä¸€ä¸ªä¸å­˜åœ¨å€¼çš„é”®ï¼Œå­—å…¸çš„ä¸‹æ ‡è¿”å›å­—å…¸å€¼ç±»å‹çš„å¯é€‰å€¼ã€‚å¦‚æœå­—å…¸åŒ…å«è¯·æ±‚é”®çš„å€¼ï¼Œåˆ™ä¸‹æ ‡è¿”å›ä¸€ä¸ªå¯é€‰å€¼ï¼Œå…¶ä¸­åŒ…å«è¯¥é”®çš„ç°æœ‰å€¼ã€‚å¦åˆ™ï¼Œä¸‹æ ‡è¿”å›nilï¼š 123456if let airportName = airports[&quot;DUB&quot;] &#123; print(&quot;The name of the airport is \\(airportName).&quot;)&#125; else &#123; print(&quot;That airport isn&#x27;t in the airports dictionary.&quot;)&#125;// Prints &quot;The name of the airport is Dublin Airport.&quot; æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹æ ‡è¯­æ³•é€šè¿‡ä¸ºè¯¥é”®åˆ†é…nilçš„å€¼ä»å­—å…¸ä¸­åˆ é™¤é”®å€¼å¯¹ï¼š 1234airports[&quot;APL&quot;] = &quot;Apple International&quot;// &quot;Apple International&quot; isn&#x27;t the real airport for APL, so delete itairports[&quot;APL&quot;] = nil// APL has now been removed from the dictionary æˆ–è€…ï¼Œä½¿ç”¨removeValue(forKey:)æ–¹æ³•ä»å­—å…¸ä¸­åˆ é™¤é”®å€¼å¯¹ã€‚å¦‚æœå­˜åœ¨é”®å€¼å¯¹ï¼Œæ­¤æ–¹æ³•å°†åˆ é™¤å¹¶è¿”å›åˆ é™¤çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å€¼ï¼Œåˆ™è¿”å›nilï¼š 123456if let removedValue = airports.removeValue(forKey: &quot;DUB&quot;) &#123; print(&quot;The removed airport&#x27;s name is \\(removedValue).&quot;)&#125; else &#123; print(&quot;The airports dictionary doesn&#x27;t contain a value for DUB.&quot;)&#125;// Prints &quot;The removed airport&#x27;s name is Dublin Airport.&quot; åœ¨å­—å…¸ä¸Šè¿­ä»£æ‚¨å¯ä»¥ä½¿ç”¨for-inå¾ªç¯è¿­ä»£å­—å…¸ä¸­çš„é”®å€¼å¯¹ã€‚å­—å…¸ä¸­çš„æ¯ä¸ªé¡¹ç›®éƒ½ä½œä¸º(key,value)å…ƒç»„è¿”å›ï¼Œæ‚¨å¯ä»¥å°†å…ƒç»„çš„æˆå‘˜åˆ†è§£ä¸ºä¸´æ—¶å¸¸é‡æˆ–å˜é‡ï¼Œä½œä¸ºè¿­ä»£çš„ä¸€éƒ¨åˆ†ï¼š 12345for (airportCode, airportName) in airports &#123; print(&quot;\\(airportCode): \\(airportName)&quot;)&#125;// LHR: London Heathrow// YYZ: Toronto Pearson æœ‰å…³for-inå¾ªç¯çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…for-inå¾ªç¯ã€‚ æ‚¨è¿˜å¯ä»¥é€šè¿‡è®¿é—®å­—å…¸çš„é”®å’Œvalueså±æ€§æ¥æ£€ç´¢å­—å…¸é”®æˆ–å€¼keysè¿­ä»£é›†åˆï¼š 1234567891011for airportCode in airports.keys &#123; print(&quot;Airport code: \\(airportCode)&quot;)&#125;// Airport code: LHR// Airport code: YYZfor airportName in airports.values &#123; print(&quot;Airport name: \\(airportName)&quot;)&#125;// Airport name: London Heathrow// Airport name: Toronto Pearson å¦‚æœæ‚¨éœ€è¦å°†å­—å…¸çš„é”®æˆ–å€¼ä¸é‡‡ç”¨Arrayå®ä¾‹çš„APIä¸€èµ·ä½¿ç”¨ï¼Œè¯·ä½¿ç”¨keysæˆ–valueså±æ€§åˆå§‹åŒ–æ–°æ•°ç»„ï¼š 12345let airportCodes = [String](airports.keys)// airportCodes is [&quot;LHR&quot;, &quot;YYZ&quot;]let airportNames = [String](airports.values)// airportNames is [&quot;London Heathrow&quot;, &quot;Toronto Pearson&quot;] Swiftçš„Dictionaryç±»å‹æ²¡æœ‰å®šä¹‰çš„é¡ºåºã€‚è¦æŒ‰ç‰¹å®šé¡ºåºè¿­ä»£å­—å…¸çš„é”®æˆ–å€¼ï¼Œè¯·åœ¨å…¶keysæˆ–valueså±æ€§ä¸Šä½¿ç”¨sorted()æ–¹æ³•ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"SwiftåŸºç¡€ é«˜çº§æ“ä½œå‘˜","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/swift/SwiftåŸºç¡€-é«˜çº§æ“ä½œå‘˜","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.294Z","comments":true,"path":"2022/07/SwiftåŸºç¡€-é«˜çº§æ“ä½œå‘˜/","link":"","permalink":"https://guoshunfa.com/2022/07/Swift%E5%9F%BA%E7%A1%80-%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C%E5%91%98/","excerpt":"","text":"ç¿»è¯‘è‡ªï¼šhttps://docs.swift.org/swift-book/LanguageGuide/AdvancedOperators.html é™¤äº†åŸºæœ¬è¿ç®—ç¬¦ä¸­æè¿°çš„è¿ç®—ç¬¦å¤–ï¼ŒSwiftè¿˜æä¾›äº†å‡ ä¸ªé«˜çº§è¿ç®—ç¬¦æ¥æ‰§è¡Œæ›´å¤æ‚çš„å€¼æ“ä½œã€‚è¿™äº›åŒ…æ‹¬æ‚¨å°†ç†Ÿæ‚‰çš„Cå’ŒObjective-Cçš„æ‰€æœ‰ä½å’Œä½ç§»ä½è¿ç®—ç¬¦ã€‚ ä¸Cä¸­çš„ç®—æœ¯è¿ç®—ç¬¦ä¸åŒï¼ŒSwiftä¸­çš„ç®—æœ¯è¿ç®—ç¬¦é»˜è®¤ä¸ä¼šæº¢å‡ºã€‚æº¢å‡ºè¡Œä¸ºè¢«å›°ä½ï¼Œå¹¶æŠ¥å‘Šä¸ºé”™è¯¯ã€‚è¦é€‰æ‹©æº¢å‡ºè¡Œä¸ºï¼Œè¯·ä½¿ç”¨Swiftçš„ç¬¬äºŒç»„é»˜è®¤æº¢å‡ºçš„ç®—æœ¯è¿ç®—ç¬¦ï¼Œä¾‹å¦‚æº¢å‡ºåŠ æ³•è¿ç®—ç¬¦ï¼ˆ&amp;+ï¼‰ã€‚æ‰€æœ‰è¿™äº›æº¢å‡ºè¿ç®—ç¬¦éƒ½ä»¥å®‰åŸ¹å’Œï¼ˆ&amp;ï¼‰å¼€å¤´ã€‚ å½“æ‚¨å®šä¹‰è‡ªå·±çš„ç»“æ„ã€ç±»å’Œæšä¸¾æ—¶ï¼Œä¸ºè¿™äº›è‡ªå®šä¹‰ç±»å‹æä¾›æ‚¨è‡ªå·±çš„æ ‡å‡†Swiftè¿ç®—ç¬¦çš„å®ç°å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚Swiftå¯ä»¥è½»æ¾æä¾›è¿™äº›è¿ç®—ç¬¦çš„å®šåˆ¶å®ç°ï¼Œå¹¶å‡†ç¡®ç¡®å®šå®ƒä»¬å¯¹æ‚¨åˆ›å»ºçš„æ¯ä¸ªç±»å‹çš„è¡Œä¸ºã€‚ æ‚¨ä¸é™äºé¢„å®šä¹‰çš„è¿ç®—ç¬¦ã€‚Swiftå…è®¸æ‚¨è‡ªç”±å®šä¹‰è‡ªå·±çš„è‡ªå®šä¹‰å†…ç¼€ã€å‰ç¼€ã€åç¼€å’Œèµ‹å€¼è¿ç®—ç¬¦ï¼Œå¹¶å…·æœ‰è‡ªå®šä¹‰ä¼˜å…ˆçº§å’Œå…³è”æ€§å€¼ã€‚è¿™äº›è¿ç®—ç¬¦å¯ä»¥åƒä»»ä½•é¢„å®šä¹‰è¿ç®—ç¬¦ä¸€æ ·åœ¨æ‚¨çš„ä»£ç ä¸­ä½¿ç”¨å’Œé‡‡ç”¨ï¼Œæ‚¨ç”šè‡³å¯ä»¥æ‰©å±•ç°æœ‰ç±»å‹ä»¥æ”¯æŒæ‚¨å®šä¹‰çš„è‡ªå®šä¹‰è¿ç®—ç¬¦ã€‚ æŒ‰ä½è¿ç®—ç¬¦æŒ‰ä½è¿ç®—ç¬¦ä½¿æ‚¨èƒ½å¤Ÿæ“ä½œæ•°æ®ç»“æ„ä¸­çš„å•ä¸ªåŸå§‹æ•°æ®ä½ã€‚å®ƒä»¬é€šå¸¸ç”¨äºä½çº§ç¼–ç¨‹ï¼Œä¾‹å¦‚å›¾å½¢ç¼–ç¨‹å’Œè®¾å¤‡é©±åŠ¨ç¨‹åºåˆ›å»ºã€‚å½“æ‚¨å¤„ç†æ¥è‡ªå¤–éƒ¨æ¥æºçš„åŸå§‹æ•°æ®æ—¶ï¼Œä¾‹å¦‚ç¼–ç å’Œè§£ç æ•°æ®ä»¥é€šè¿‡è‡ªå®šä¹‰åè®®è¿›è¡Œé€šä¿¡æ—¶ï¼ŒæŒ‰ä½è¿ç®—ç¬¦ä¹Ÿå¾ˆæœ‰ç”¨ã€‚ Swiftæ”¯æŒCä¸­çš„æ‰€æœ‰æŒ‰ä½è¿ç®—ç¬¦ï¼Œå¦‚ä¸‹æ‰€è¿°ã€‚ Bitwise NOTè¿ç®—ç¬¦æŒ‰ä½ä¸ç®—ç¬¦ï¼ˆ~ï¼‰åè½¬æ•°å­—ä¸­çš„æ‰€æœ‰ä½ï¼š æŒ‰ä½NOtè¿ç®—ç¬¦æ˜¯ä¸€ä¸ªå‰ç¼€è¿ç®—ç¬¦ï¼Œå¹¶æ˜¾ç¤ºåœ¨å…¶æ“ä½œçš„å€¼ä¹‹å‰ï¼Œæ²¡æœ‰ä»»ä½•ç©ºæ ¼ï¼š let initialBits: UInt8 &#x3D; 0b00001111 let invertedBits &#x3D; ~initialBits &#x2F;&#x2F; equals 11110000 UInt8æ•´æ•°æœ‰8ä½ï¼Œå¯ä»¥å­˜å‚¨0åˆ°255ä¹‹é—´çš„ä»»ä½•å€¼ã€‚æ­¤ç¤ºä¾‹åˆå§‹åŒ–äºŒè¿›åˆ¶å€¼00001111çš„UInt8æ•´æ•°ï¼Œå…¶å‰å››ä½è®¾ç½®ä¸º0ï¼Œåå››ä½è®¾ç½®ä¸º1ã€‚è¿™ç›¸å½“äºå°æ•°ç‚¹å15ã€‚ ç„¶åï¼ŒæŒ‰ä½NOtè¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªåä¸ºinvertedBitsçš„æ–°å¸¸é‡ï¼Œè¯¥å¸¸é‡ç­‰äºinitialBitsï¼Œä½†æ‰€æœ‰ä½éƒ½å€’ç½®ã€‚é›¶å˜æˆ1ï¼Œ1å˜æˆé›¶ã€‚invertedBitsçš„å€¼ä¸º11110000ï¼Œç­‰äº240çš„æ— ç¬¦å·å°æ•°å€¼ã€‚ ä½å’Œè¿ç®—ç¬¦æŒ‰ä½å’Œè¿ç®—ç¬¦ï¼ˆ&amp;ï¼‰ç»“åˆäº†ä¸¤ä¸ªæ•°å­—çš„ä½ã€‚åªæœ‰å½“ä¸¤ä¸ªè¾“å…¥æ•°å­—ä¸­çš„ä½ç­‰äº1æ—¶ï¼Œå®ƒæ‰ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°å­—ï¼Œå…¶ä½è®¾ç½®ä¸º1ï¼š åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼ŒfirstSixBitså’ŒlastSixBitsçš„å€¼éƒ½æœ‰å››ä¸ªä¸­é—´ä½ç­‰äº1ã€‚æŒ‰ä½å’Œè¿ç®—ç¬¦å°†å®ƒä»¬ç»„åˆæˆæ•°å­—00111100ï¼Œç­‰äº60çš„æ— ç¬¦å·å°æ•°å€¼ï¼š let firstSixBits: UInt8 &#x3D; 0b11111100 let lastSixBits: UInt8 &#x3D; 0b00111111 let middleFourBits &#x3D; firstSixBits &amp; lastSixBits &#x2F;&#x2F; equals 00111100 Bitwise ORè¿ç®—ç¬¦æŒ‰ä½ORè¿ç®—ç¬¦ï¼ˆ|ï¼‰æ¯”è¾ƒä¸¤ä¸ªæ•°å­—çš„ä½ã€‚å¦‚æœä»»ä¸€è¾“å…¥å·ä¸­çš„ä½ç­‰äº1è¿ç®—ç¬¦è¿”å›ä¸€ä¸ªæ–°æ•°å­—ï¼Œå…¶ä½è®¾ç½®ä¸º1ï¼š åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼ŒsomeBitså’ŒmoreBitsçš„å€¼å°†ä¸åŒçš„ä½è®¾ç½®ä¸º1ã€‚æŒ‰ä½æˆ–è¿ç®—ç¬¦å°†å®ƒä»¬ç»„åˆæˆæ•°å­—11111110ï¼Œç­‰äº254çš„æ— ç¬¦å·å°æ•°ç‚¹ï¼š let someBits: UInt8 &#x3D; 0b10110010 let moreBits: UInt8 &#x3D; 0b01011110 let combinedbits &#x3D; someBits | moreBits &#x2F;&#x2F; equals 11111110 ä½XORè¿ç®—ç¬¦æŒ‰ä½XORè¿ç®—ç¬¦ï¼Œæˆ–â€œæ’ä»–æ€§ORè¿ç®—ç¬¦â€ï¼ˆ^ï¼‰ï¼Œæ¯”è¾ƒä¸¤ä¸ªæ•°å­—çš„ä½ã€‚è¿ç®—ç¬¦è¿”å›ä¸€ä¸ªæ–°æ•°å­—ï¼Œå…¶ä½è®¾ç½®ä¸º1ï¼Œå…¶ä¸­è¾“å…¥ä½ä¸åŒï¼Œå¹¶è®¾ç½®ä¸º0ï¼Œå…¶ä¸­è¾“å…¥ä½ç›¸åŒï¼š åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼ŒfirstBitså’ŒotherBitsçš„å€¼åœ¨å¦ä¸€ä¸ªæ²¡æœ‰çš„ä½ç½®ä¸Šéƒ½è®¾ç½®ä¸º1ã€‚æŒ‰ä½XORè¿ç®—ç¬¦å°†è¿™ä¸¤ä¸ªä½çš„è¾“å‡ºå€¼è®¾ç½®ä¸º1ã€‚firstBits``otherBitsä¸­çš„æ‰€æœ‰å…¶ä»–ä½éƒ½åŒ¹é…ï¼Œå¹¶åœ¨è¾“å‡ºå€¼ä¸­è®¾ç½®ä¸º0ï¼š let firstBits: UInt8 &#x3D; 0b00010100 let otherBits: UInt8 &#x3D; 0b00000101 let outputBits &#x3D; firstBits ^ otherBits &#x2F;&#x2F; equals 00010001 é€ä½å·¦ç§»å’Œå³ç§»è¿ç®—ç¬¦æ ¹æ®ä¸‹é¢å®šä¹‰çš„è§„åˆ™ï¼ŒæŒ‰ä½å·¦ç§»è¿ç®—ç¬¦ï¼ˆ&lt;&lt;ï¼‰å’ŒæŒ‰ä½å³ç§»è¿ç®—ç¬¦ï¼ˆ&gt;&gt;ï¼‰å°†æ•°å­—ä¸­çš„æ‰€æœ‰ä½å‘å·¦æˆ–å‘å³ç§»åŠ¨ä¸€å®šæ•°é‡çš„ä½ç½®ã€‚ ä½å·¦ç§»å’Œå³ç§»å…·æœ‰æ•´æ•°ä¹˜ä»¥æˆ–é™¤ä»¥äºŒå€çš„æ•ˆæœã€‚å°†æ•´æ•°çš„ä½å‘å·¦ç§»åŠ¨ä¸€ä¸ªä½ç½®ä¼šä½¿å…¶å€¼ç¿»å€ï¼Œè€Œå°†å…¶å‘å³ç§»åŠ¨ä¸€ä¸ªä½ç½®ä¼šå°†å…¶å€¼å‡åŠã€‚ æ— ç¬¦å·æ•´æ•°çš„ç§»åŠ¨è¡Œä¸ºæ— ç¬¦å·æ•´æ•°çš„ä½ç§»ä½è¡Œä¸ºå¦‚ä¸‹ï¼š ç°æœ‰ä½æŒ‰è¯·æ±‚çš„ä½æ•°å‘å·¦æˆ–å‘å³ç§»åŠ¨ã€‚ ä»»ä½•ç§»åŠ¨åˆ°æ•´æ•°å­˜å‚¨è¾¹ç•Œä¹‹å¤–çš„ä½éƒ½ä¼šè¢«ä¸¢å¼ƒã€‚ åœ¨åŸå§‹ä½å‘å·¦æˆ–å‘å³ç§»åŠ¨åï¼Œé›¶æ’å…¥åé¢çš„ç©ºé—´ã€‚ è¿™ç§æ–¹æ³•è¢«ç§°ä¸ºé€»è¾‘è½¬å˜ã€‚ The illustration below shows the results of 11111111 &lt;&lt; 1 (which is 11111111 shifted to the left by 1 place), and 11111111 &gt;&gt; 1 (which is 11111111 shifted to the right by 1 place). Blue numbers are shifted, gray numbers are discarded, and orange zeros are inserted: ä»¥ä¸‹æ˜¯ Swift ä»£ç ä¸­ä½ç§»çš„å¤–è§‚ï¼š let shiftBits: UInt8 &#x3D; 4 &#x2F;&#x2F; 00000100 in binary shiftBits &lt;&lt; 1 &#x2F;&#x2F; 00001000 shiftBits &lt;&lt; 2 &#x2F;&#x2F; 00010000 shiftBits &lt;&lt; 5 &#x2F;&#x2F; 10000000 shiftBits &lt;&lt; 6 &#x2F;&#x2F; 00000000 shiftBits &gt;&gt; 2 &#x2F;&#x2F; 00000001 æ‚¨å¯ä»¥ä½¿ç”¨ä½ç§»æ¥ç¼–ç å’Œè§£ç å…¶ä»–æ•°æ®ç±»å‹ä¸­çš„å€¼ï¼š let pink: UInt32 &#x3D; 0xCC6699 let redComponent &#x3D; (pink &amp; 0xFF0000) &gt;&gt; 16 &#x2F;&#x2F; redComponent is 0xCC, or 204 let greenComponent &#x3D; (pink &amp; 0x00FF00) &gt;&gt; 8 &#x2F;&#x2F; greenComponent is 0x66, or 102 let blueComponent &#x3D; pink &amp; 0x0000FF &#x2F;&#x2F; blueComponent is 0x99, or 153 æ­¤ç¤ºä¾‹ä½¿ç”¨åä¸ºpinkçš„UInt32å¸¸é‡æ¥å­˜å‚¨ç²‰çº¢è‰²çš„çº§è”æ ·å¼è¡¨é¢œè‰²å€¼ã€‚CSSé¢œè‰²å€¼#CC6699åœ¨Swiftçš„åå…­è¿›åˆ¶æ•°å­—è¡¨ç¤ºä¸­å†™ä¸º0xCC6699ã€‚ç„¶åï¼ŒæŒ‰ä½ANDè¿ç®—ç¬¦ï¼ˆ&amp;ï¼‰å’ŒæŒ‰ä½å³ç§»è¿ç®—ç¬¦ï¼ˆ&gt;&gt;ï¼‰åˆ†è§£ä¸ºçº¢è‰²ï¼ˆCCï¼‰ã€ç»¿è‰²ï¼ˆ66ï¼‰å’Œè“è‰²ï¼ˆ99ï¼‰ç»„ä»¶ã€‚ çº¢è‰²åˆ†é‡æ˜¯é€šè¿‡åœ¨æ•°å­—0xCC6699å’Œ0xFF0000ä¹‹é—´æ‰§è¡ŒæŒ‰ä½ANDè·å¾—çš„ã€‚0xFF0000ä¸­çš„é›¶æœ‰æ•ˆåœ°â€œå±è”½â€äº†0xCC6699çš„ç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªå­—èŠ‚ï¼Œå¯¼è‡´6699è¢«å¿½ç•¥ï¼Œå¹¶å› æ­¤ç•™ä¸‹0xCC0000ã€‚ This number is then shifted 16 places to the right (&gt;&gt; 16). Each pair of characters in a hexadecimal number uses 8 bits, so a move 16 places to the right will convert 0xCC0000 into 0x0000CC. This is the same as 0xCC, which has a decimal value of 204. åŒæ ·ï¼Œç»¿è‰²åˆ†é‡æ˜¯é€šè¿‡åœ¨æ•°å­—0xCC6699å’Œ0x00FF00ä¹‹é—´æ‰§è¡ŒæŒ‰ä½ANDè·å¾—çš„ï¼Œè¾“å‡ºå€¼ä¸º0x006600ã€‚ç„¶åï¼Œè¯¥è¾“å‡ºå€¼å‘å³ç§»åŠ¨å…«ä¸ªä½ç½®ï¼Œç»™å‡ºçš„å€¼ä¸º0x66ï¼Œå°æ•°å€¼ä¸º102ã€‚ æœ€åï¼Œé€šè¿‡åœ¨æ•°å­—0xCC6699å’Œ0x0000FFä¹‹é—´æ‰§è¡ŒæŒ‰ä½ANDè·å¾—è“è‰²åˆ†é‡ï¼Œè¾“å‡ºå€¼ä¸º0x000099ã€‚ç”±äº0x000099å·²ç»ç­‰äº0x99ï¼Œå…¶å°æ•°å€¼ä¸º153ï¼Œå› æ­¤ä½¿ç”¨æ­¤å€¼æ—¶ä¸ä¼šå°†å…¶å‘å³ç§»åŠ¨ï¼Œ æœ‰ç¬¦å·æ•´æ•°çš„ç§»åŠ¨è¡Œä¸ºæœ‰ç¬¦å·æ•´æ•°çš„ç§»ä½è¡Œä¸ºæ¯”æ— ç¬¦å·æ•´æ•°æ›´å¤æ‚ï¼Œå› ä¸ºæœ‰ç¬¦å·æ•´æ•°åœ¨äºŒè¿›åˆ¶ä¸­è¡¨ç¤ºçš„æ–¹å¼ã€‚ï¼ˆä¸ºäº†ç®€å•èµ·è§ï¼Œä»¥ä¸‹ç¤ºä¾‹åŸºäº8ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œä½†åŒæ ·çš„åŸåˆ™é€‚ç”¨äºä»»ä½•å¤§å°çš„æœ‰ç¬¦å·æ•´æ•°ã€‚ï¼‰ æœ‰ç¬¦å·æ•´æ•°ä½¿ç”¨å®ƒä»¬çš„ç¬¬ä¸€ä¸ªä½ï¼ˆç§°ä¸ºç¬¦å·ä½ï¼‰æ¥æŒ‡ç¤ºæ•´æ•°æ˜¯æ­£æ•°è¿˜æ˜¯è´Ÿæ•°ã€‚0çš„ç¬¦å·ä½è¡¨ç¤ºæ­£å€¼ï¼Œ1çš„ç¬¦å·ä½è¡¨ç¤ºè´Ÿæ•°ã€‚ å‰©ä½™çš„ä½ï¼ˆç§°ä¸ºå€¼ä½ï¼‰å­˜å‚¨å®é™…å€¼ã€‚æ­£æ•°çš„å­˜å‚¨æ–¹å¼ä¸æ— ç¬¦å·æ•´æ•°å®Œå…¨ç›¸åŒï¼Œä»0å‘ä¸Šè®¡æ•°ã€‚ä»¥ä¸‹æ˜¯Int8ä¸­çš„ä½å¦‚ä½•æŸ¥æ‰¾æ•°å­—4ï¼š ç¬¦å·ä½ä¸º0ï¼ˆæ„ä¸ºâ€œæ­£â€ï¼‰ï¼Œä¸ƒä¸ªå€¼ä½åªæ˜¯æ•°å­—4ï¼Œç”¨äºŒè¿›åˆ¶ç¬¦å·ä¹¦å†™ã€‚ ç„¶è€Œï¼Œè´Ÿæ•°çš„å­˜å‚¨æ–¹å¼ä¸åŒã€‚å®ƒä»¬é€šè¿‡ä»2å‡å»nçš„ç»å¯¹å€¼æ¥å­˜å‚¨ï¼Œå…¶ä¸­næ˜¯å€¼ä½æ•°ã€‚å…«ä½æ•°å­—æœ‰7ä¸ªå€¼ä½ï¼Œè¿™æ„å‘³ç€2åˆ°7æˆ–128çš„åŠŸç‡ã€‚ ä»¥ä¸‹æ˜¯Int8å†…éƒ¨çš„ä½å¦‚ä½•æŸ¥æ‰¾æ•°å­—-4ï¼š è¿™ä¸€æ¬¡ï¼Œç¬¦å·ä½ä¸º1ï¼ˆæ„ä¸ºâ€œè´Ÿâ€ï¼‰ï¼Œä¸ƒä¸ªå€¼ä½çš„äºŒè¿›åˆ¶å€¼ä¸º124ï¼ˆå³1284ï¼‰ï¼š è¿™ç§è´Ÿæ•°ç¼–ç è¢«ç§°ä¸ºäºŒçš„è¡¥æ•°è¡¨ç¤ºã€‚è¿™å¯èƒ½çœ‹èµ·æ¥æ˜¯ä¸€ç§ä¸å¯»å¸¸çš„è¡¨ç¤ºè´Ÿæ•°çš„æ–¹å¼ï¼Œä½†å®ƒæœ‰å‡ ä¸ªä¼˜ç‚¹ã€‚ é¦–å…ˆï¼Œæ‚¨å¯ä»¥æ·»åŠ -1åˆ°-4ï¼Œåªéœ€å¯¹æ‰€æœ‰8ä½ï¼ˆåŒ…æ‹¬ç¬¦å·ä½ï¼‰è¿›è¡Œæ ‡å‡†äºŒè¿›åˆ¶æ·»åŠ ï¼Œå¹¶åœ¨å®Œæˆåä¸¢å¼ƒä»»ä½•ä¸é€‚åˆ8ä½çš„ä¸œè¥¿ï¼š å…¶æ¬¡ï¼Œä¸¤è€…çš„è¡¥ç è¡¨ç¤ºè¿˜å…è®¸æ‚¨åƒæ­£æ•°ä¸€æ ·å°†è´Ÿæ•°ä½ç§»åˆ°å·¦ä¾§å’Œå³ä¾§ï¼Œå¹¶ä¸”æœ€ç»ˆåœ¨å‘å·¦ç§»åŠ¨çš„æ¯ç§»åŠ¨æ—¶å°†å…¶ç¿»å€ï¼Œæˆ–è€…åœ¨å‘å³ç§»åŠ¨çš„æ¯ç§»åŠ¨æ—¶å°†å…¶å‡åŠã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œå½“æœ‰ç¬¦å·æ•´æ•°å‘å³ç§»åŠ¨æ—¶ï¼Œä¼šä½¿ç”¨é¢å¤–çš„è§„åˆ™ï¼šå½“æ‚¨å‘å³ç§»åŠ¨æœ‰ç¬¦å·æ•´æ•°æ—¶ï¼Œè¯·åº”ç”¨ä¸æ— ç¬¦å·æ•´æ•°ç›¸åŒçš„è§„åˆ™ï¼Œä½†ç”¨ç¬¦å·ä½è€Œä¸æ˜¯ç”¨é›¶å¡«å……å·¦ä¾§çš„ä»»ä½•ç©ºä½ã€‚ æ­¤æ“ä½œç¡®ä¿æœ‰ç¬¦å·æ•´æ•°åœ¨å‘å³ç§»åŠ¨åå…·æœ‰ç›¸åŒçš„ç¬¦å·ï¼Œå¹¶è¢«ç§°ä¸ºç®—æœ¯ç§»ä½ã€‚ ç”±äºæ­£æ•°å’Œè´Ÿæ•°çš„å­˜å‚¨æ–¹å¼ç‰¹æ®Šï¼Œå°†å®ƒä»¬ä¸­çš„ä»»ä½•ä¸€ä¸ªç§»åŠ¨åˆ°å³è¾¹ä¼šä½¿å®ƒä»¬æ¥è¿‘äºé›¶ã€‚åœ¨è¿™ç§è½¬å˜æœŸé—´ä¿æŒç¬¦å·ä½ä¸å˜æ„å‘³ç€è´Ÿæ•´æ•°åœ¨å€¼æ¥è¿‘äºé›¶æ—¶ä¿æŒè´Ÿæ•°ã€‚ æº¢å‡ºè¿ç®—ç¬¦å¦‚æœæ‚¨å°è¯•å°†æ•°å­—æ’å…¥æ— æ³•ä¿å­˜è¯¥å€¼çš„æ•´æ•°å¸¸é‡æˆ–å˜é‡ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒSwiftä¼šæŠ¥å‘Šé”™è¯¯ï¼Œè€Œä¸æ˜¯å…è®¸åˆ›å»ºæ— æ•ˆå€¼ã€‚å½“æ‚¨å¤„ç†å¤ªå¤§æˆ–å¤ªå°çš„æ•°å­—æ—¶ï¼Œè¿™ç§è¡Œä¸ºä¼šå¸¦æ¥é¢å¤–çš„å®‰å…¨æ€§ã€‚ ä¾‹å¦‚ï¼ŒInt16æ•´æ•°ç±»å‹å¯ä»¥ä¿å­˜-32768å’Œ32767ä¹‹é—´çš„ä»»ä½•æœ‰ç¬¦å·æ•´æ•°ã€‚å°è¯•å°†Int16å¸¸é‡æˆ–å˜é‡è®¾ç½®ä¸ºæ­¤èŒƒå›´ä¹‹å¤–çš„æ•°å­—ä¼šå¯¼è‡´é”™è¯¯ï¼š var potentialOverflow &#x3D; Int16.max &#x2F;&#x2F; potentialOverflow equals 32767, which is the maximum value an Int16 can hold potentialOverflow +&#x3D; 1 &#x2F;&#x2F; this causes an error å½“å€¼å¤ªå¤§æˆ–å¤ªå°æ—¶æä¾›é”™è¯¯å¤„ç†ï¼Œä½¿æ‚¨åœ¨ç¼–ç è¾¹ç•Œå€¼æ¡ä»¶æ—¶å…·æœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚ ä½†æ˜¯ï¼Œå½“æ‚¨ç‰¹åˆ«å¸Œæœ›æº¢å‡ºæ¡ä»¶æˆªæ–­å¯ç”¨ä½æ•°æ—¶ï¼Œæ‚¨å¯ä»¥é€‰æ‹©æ­¤è¡Œä¸ºï¼Œè€Œä¸æ˜¯è§¦å‘é”™è¯¯ã€‚Swiftæä¾›äº†ä¸‰ä¸ªç®—æ³•æº¢å‡ºè¿ç®—ç¬¦ï¼Œè¿™äº›è¿ç®—ç¬¦é€‰æ‹©æº¢å‡ºè¡Œä¸ºè¿›è¡Œæ•´æ•°è®¡ç®—ã€‚è¿™äº›è¿ç®—ç¬¦éƒ½ä»¥å®‰åŸ¹æ•°ï¼ˆ&amp;ï¼‰å¼€å¤´ï¼š æº¢å‡ºæ·»åŠ ï¼ˆ&amp;+ï¼‰ æº¢å‡ºå‡æ³•ï¼ˆ&amp;-ï¼‰ æº¢å‡ºä¹˜æ³•ï¼ˆ&amp;*ï¼‰ ä»·å€¼æº¢å‡ºæ•°å­—å¯ä»¥å‘æ­£å‘å’Œè´Ÿæ–¹å‘æº¢å‡ºã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œè¯´æ˜å½“å…è®¸æ— ç¬¦å·æ•´æ•°ä½¿ç”¨æº¢å‡ºåŠ æ³•è¿ç®—ç¬¦ï¼ˆ&amp;+ï¼‰å‘æ­£æ–¹å‘æº¢å‡ºæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼š var unsignedOverflow &#x3D; UInt8.max &#x2F;&#x2F; unsignedOverflow equals 255, which is the maximum value a UInt8 can hold unsignedOverflow &#x3D; unsignedOverflow &amp;+ 1 &#x2F;&#x2F; unsignedOverflow is now equal to 0 å˜é‡unsignedOverflowåˆå§‹åŒ–ä¸ºUInt8å¯ä»¥æŒæœ‰çš„æœ€å¤§å€¼ï¼ˆ255ï¼ŒäºŒè¿›åˆ¶ä¸º11111111ï¼‰ã€‚ç„¶åä½¿ç”¨æº¢å‡ºåŠ æ³•è¿ç®—ç¬¦ï¼ˆ&amp;+ï¼‰å°†å…¶å¢åŠ 1ã€‚è¿™ä½¿å…¶äºŒè¿›åˆ¶è¡¨ç¤ºç•¥é«˜äºUInt8å¯ä»¥å®¹çº³çš„å¤§å°ï¼Œå¯¼è‡´å…¶æº¢å‡ºè¶…å‡ºå…¶ç•Œé™ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æº¢å‡ºåŠ æ³•åä¿æŒåœ¨UInt8èŒƒå›´å†…çš„å€¼ä¸º00000000æˆ–é›¶ã€‚ å½“å…è®¸æ— ç¬¦å·æ•´æ•°å‘è´Ÿæ–¹å‘æº¢å‡ºæ—¶ï¼Œä¹Ÿä¼šå‘ç”Ÿç±»ä¼¼çš„äº‹æƒ…ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨æº¢å‡ºå‡æ³•è¿ç®—ç¬¦ï¼ˆ&amp;-ï¼‰çš„ç¤ºä¾‹ï¼š var unsignedOverflow &#x3D; UInt8.min &#x2F;&#x2F; unsignedOverflow equals 0, which is the minimum value a UInt8 can hold unsignedOverflow &#x3D; unsignedOverflow &amp;- 1 &#x2F;&#x2F; unsignedOverflow is now equal to 255 UInt8å¯ä»¥æŒæœ‰çš„æœ€ä½å€¼ä¸ºé›¶ï¼Œæˆ–äºŒè¿›åˆ¶ä¸­çš„00000000ã€‚å¦‚æœæ‚¨ä½¿ç”¨æº¢å‡ºå‡æ³•è¿ç®—ç¬¦ï¼ˆ&amp;-ï¼‰ä»00000000ä¸­å‡å»1ï¼Œè¯¥æ•°å­—å°†æº¢å‡ºå¹¶åŒ…è£…ä¸º11111111ï¼Œæˆ–å°æ•°255ã€‚ ç­¾åæ•´æ•°ä¹Ÿä¼šå‘ç”Ÿæº¢å‡ºã€‚æœ‰ç¬¦å·æ•´æ•°çš„æ‰€æœ‰åŠ æ³•å’Œå‡æ³•éƒ½ä»¥æŒ‰ä½æ–¹å¼æ‰§è¡Œï¼Œç¬¦å·ä½åŒ…å«åœ¨æ•°å­—ä¸­æ·»åŠ æˆ–å‡å»ä¸­ï¼Œå¦‚æŒ‰ä½å·¦ç§»å’Œå³ç§»è¿ç®—ç¬¦ä¸­æ‰€è¿°ã€‚ var signedOverflow &#x3D; Int8.min &#x2F;&#x2F; signedOverflow equals -128, which is the minimum value an Int8 can hold signedOverflow &#x3D; signedOverflow &amp;- 1 &#x2F;&#x2F; signedOverflow is now equal to 127 Int8å¯ä»¥æŒæœ‰çš„æœ€ä½å€¼ä¸º-128ï¼Œæˆ–äºŒè¿›åˆ¶ä¸­çš„10000000ã€‚ä½¿ç”¨æº¢å‡ºè¿ç®—ç¬¦ä»è¿™ä¸ªäºŒè¿›åˆ¶æ•°ä¸­å‡å»1ï¼ŒäºŒè¿›åˆ¶å€¼ä¸º01111111ï¼Œè¿™ä¼šåˆ‡æ¢ç¬¦å·ä½å¹¶ç»™å‡ºæ­£127ï¼Œå³Int8å¯ä»¥æŒæœ‰çš„æœ€å¤§æ­£å€¼ã€‚ å¯¹äºæœ‰ç¬¦å·æ•´æ•°å’Œéæœ‰ç¬¦å·æ•´æ•°ï¼Œæ­£æ–¹å‘çš„æº¢å‡ºä»æœ€å¤§æœ‰æ•ˆæ•´æ•°å€¼å›æœ€å°å€¼ï¼Œè´Ÿæ–¹å‘çš„æº¢å‡ºä»æœ€å°å€¼åˆ°æœ€å¤§å€¼ã€‚ ä¼˜å…ˆçº§å’Œå…³è”æ€§è¿ç®—ç¬¦ä¼˜å…ˆçº§èµ‹äºˆä¸€äº›è¿ç®—ç¬¦æ¯”å…¶ä»–è¿ç®—ç¬¦æ›´é«˜çš„ä¼˜å…ˆçº§ï¼›è¿™äº›è¿ç®—ç¬¦é¦–å…ˆåº”ç”¨ã€‚ è¿ç®—ç¬¦ç»“åˆæ€§å®šä¹‰äº†å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„è¿ç®—ç¬¦å¦‚ä½•åˆ†ç»„åœ¨ä¸€èµ·â€”â€”è¦ä¹ˆä»å·¦åˆ†ç»„ï¼Œè¦ä¹ˆä»å³åˆ†ç»„ã€‚æŠŠå®ƒæƒ³è±¡æˆâ€œä»–ä»¬ä¸å·¦è¾¹çš„è¡¨è¾¾å¼ç›¸å…³è”æƒ³â€ï¼Œæˆ–â€œä»–ä»¬ä¸å³è¾¹çš„è¡¨è¾¾å¼ç›¸å…³è”â€ã€‚ åœ¨è®¡ç®—å¤åˆè¡¨è¾¾å¼çš„é¡ºåºæ—¶ï¼Œé‡è¦çš„æ˜¯è¦è€ƒè™‘æ¯ä¸ªç®—å­çš„ä¼˜å…ˆçº§å’Œå…³è”æ€§ã€‚ä¾‹å¦‚ï¼Œè¿ç®—ç¬¦ä¼˜å…ˆçº§è§£é‡Šäº†ä¸ºä»€ä¹ˆä»¥ä¸‹è¡¨è¾¾å¼ç­‰äº17ã€‚ 2 + 3 % 4 * 5 &#x2F;&#x2F; this equals 17 å¦‚æœæ‚¨ä¸¥æ ¼ä»å·¦åˆ°å³é˜…è¯»ï¼Œæ‚¨å¯èƒ½ä¼šæœŸæœ›è¡¨è¾¾å¼è®¡ç®—å¦‚ä¸‹ï¼š 2åŠ 3ç­‰äº5 5å‰©ä½™çš„4ç­‰äº1 1ä¹˜ä»¥5ç­‰äº5 ç„¶è€Œï¼Œå®é™…ç­”æ¡ˆæ˜¯17ï¼Œè€Œä¸æ˜¯5ã€‚é«˜ä¼˜å…ˆçº§ç®—å­åœ¨ä½ä¼˜å…ˆçº§è¿ç®—ç¬¦ä¹‹å‰è¿›è¡Œè¯„ä¼°ã€‚åœ¨Swiftä¸­ï¼Œä¸Cä¸€æ ·ï¼Œä½™æ•°è¿ç®—ç¬¦ï¼ˆ%ï¼‰å’Œä¹˜æ³•è¿ç®—ç¬¦ï¼ˆ*ï¼‰çš„ä¼˜å…ˆçº§é«˜äºåŠ æ³•è¿ç®—ç¬¦ï¼ˆ+ï¼‰ã€‚å› æ­¤ï¼Œåœ¨è€ƒè™‘æ·»åŠ ä¹‹å‰ï¼Œå®ƒä»¬éƒ½ä¼šè¢«è¯„ä¼°ã€‚ ç„¶è€Œï¼Œä½™æ•°å’Œä¹˜æ³•å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§ã€‚è¦ç¡®å®šè¦ä½¿ç”¨çš„ç¡®åˆ‡è¯„ä¼°é¡ºåºï¼Œæ‚¨è¿˜éœ€è¦è€ƒè™‘å®ƒä»¬çš„å…³è”æ€§ã€‚å‰©ä½™å’Œä¹˜æ³•éƒ½ä¸å·¦è¾¹çš„è¡¨è¾¾å¼ç›¸å…³è”ã€‚å°†å…¶è§†ä¸ºä»å·¦ä¾§å¼€å§‹ï¼Œåœ¨è¡¨è¾¾å¼çš„è¿™äº›éƒ¨åˆ†å‘¨å›´æ·»åŠ éšå¼æ‹¬å·ï¼š 2 + ((3 % 4) * 5) (3 % 4)æ˜¯3ï¼Œæ‰€ä»¥è¿™ç›¸å½“äºï¼š 2 + (3 * 5) (3 * 5)æ˜¯15ï¼Œæ‰€ä»¥è¿™ç›¸å½“äºï¼š 2 + 15 è¿™ä¸€è®¡ç®—å¾—å‡ºäº†17çš„æœ€ç»ˆç­”æ¡ˆã€‚ æœ‰å…³Swiftæ ‡å‡†åº“æä¾›çš„è¿ç®—ç¬¦çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿ç®—ç¬¦ä¼˜å…ˆçº§ç»„å’Œå…³è”æ€§è®¾ç½®çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…è¿ç®—ç¬¦å£°æ˜ã€‚ æ³¨æ„ Swiftçš„è¿ç®—ç¬¦ä¼˜å…ˆçº§å’Œç»“åˆæ€§è§„åˆ™æ¯”Cå’ŒObjective-Cæ›´ç®€å•ã€æ›´å¯é¢„æµ‹ã€‚ç„¶è€Œï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¸åŸºäºCçš„è¯­è¨€å¹¶ä¸å®Œå…¨ç›¸åŒã€‚åœ¨å°†ç°æœ‰ä»£ç ç§»æ¤åˆ°Swiftæ—¶ï¼Œè¯·åŠ¡å¿…ç¡®ä¿è¿è¥å•†äº¤äº’çš„è¡Œä¸ºä»ç„¶åƒæ‚¨å¸Œæœ›çš„æ–¹å¼ã€‚ è¿ç®—ç¬¦æ–¹æ³•ç±»å’Œç»“æ„å¯ä»¥æä¾›ç°æœ‰è¿ç®—ç¬¦è‡ªå·±çš„å®ç°ã€‚è¿™è¢«ç§°ä¸ºä½¿ç°æœ‰è¿ç®—ç¬¦è¶…è½½ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä¸ºè‡ªå®šä¹‰ç»“æ„å®ç°ç®—æœ¯åŠ æ³•è¿ç®—ç¬¦ï¼ˆ+ï¼‰ã€‚ç®—æœ¯åŠ æ³•è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶è¿ç®—ç¬¦ï¼Œå› ä¸ºå®ƒåœ¨ä¸¤ä¸ªç›®æ ‡ä¸Šè¿è¡Œï¼Œè€Œå®ƒæ˜¯ä¸€ä¸ªå†…ç¼€è¿ç®—ç¬¦ï¼Œå› ä¸ºå®ƒå‡ºç°åœ¨è¿™ä¸¤ä¸ªç›®æ ‡ä¹‹é—´ã€‚ è¯¥ç¤ºä¾‹ä¸ºäºŒç»´ä½ç½®å‘é‡(x,y)å®šä¹‰äº†Vector2Dç»“æ„ï¼Œç„¶åæ˜¯å°†Vector2Dç»“æ„å®ä¾‹ç›¸åŠ çš„è¿ç®—ç¬¦æ–¹æ³•çš„å®šä¹‰ï¼š struct Vector2D { â€‹ var x &#x3D; 0.0, y &#x3D; 0.0 } extension Vector2D { â€‹ static func + (left: Vector2D, right: Vector2D) -&gt; Vector2D { â€‹ return Vector2D(x: left.x + right.x, y: left.y + right.y) â€‹ } } è¿ç®—ç¬¦æ–¹æ³•è¢«å®šä¹‰ä¸ºVector2Dä¸Šçš„ç±»å‹æ–¹æ³•ï¼Œå…¶æ–¹æ³•åç§°ä¸è¦é‡è½½çš„è¿ç®—ç¬¦ï¼ˆ+ï¼‰åŒ¹é…ã€‚ç”±äºåŠ æ³•ä¸æ˜¯å‘é‡åŸºæœ¬è¡Œä¸ºçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ç±»å‹æ–¹æ³•åœ¨Vector2Dçš„æ‰©å±•ä¸­å®šä¹‰ï¼Œè€Œä¸æ˜¯åœ¨Vector2Dçš„ä¸»ç»“æ„å£°æ˜ä¸­å®šä¹‰ã€‚ç”±äºç®—æœ¯åŠ æ³•è¿ç®—ç¬¦æ˜¯äºŒè¿›åˆ¶è¿ç®—ç¬¦ï¼Œå› æ­¤è¯¥è¿ç®—ç¬¦æ–¹æ³•æ¥å—Vector2Dç±»å‹çš„ä¸¤ä¸ªè¾“å…¥å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¾“å‡ºå€¼ï¼Œä¹Ÿæ˜¯Vector2Dç±»å‹çš„è¾“å‡ºå€¼ã€‚ åœ¨è¿™ä¸ªå®ç°ä¸­ï¼Œè¾“å…¥å‚æ•°è¢«å‘½åä¸ºleftå’Œrightï¼Œä»¥è¡¨ç¤ºä½äº+è¿ç®—ç¬¦å·¦ä¾§å’Œå³ä¾§çš„Vector2Då®ä¾‹ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Vector2Då®ä¾‹ï¼Œå…¶xå’Œyå±æ€§ä½¿ç”¨æ·»åŠ åˆ°åœ¨ä¸€èµ·çš„ä¸¤ä¸ªVector2Då®ä¾‹çš„xå’Œyå±æ€§çš„æ€»å’Œåˆå§‹åŒ–ã€‚ ç±»å‹æ–¹æ³•å¯ä»¥ç”¨ä½œç°æœ‰Vector2Då®ä¾‹ä¹‹é—´çš„ä¿®å¤è¿ç®—ç¬¦ï¼š let vector &#x3D; Vector2D(x: 3.0, y: 1.0) let anotherVector &#x3D; Vector2D(x: 2.0, y: 4.0) let combinedVector &#x3D; vector + anotherVector &#x2F;&#x2F; combinedVector is a Vector2D instance with values of (5.0, 5.0) æ­¤ç¤ºä¾‹å°†çŸ¢é‡(3.0,1.0)å’Œ(2.0,4.0)ç»„åˆåœ¨ä¸€èµ·ï¼Œä½¿çŸ¢é‡(5.0,5.0)å¦‚ä¸‹æ‰€ç¤ºã€‚ å‰ç¼€å’Œåç¼€è¿ç®—ç¬¦ä¸Šé¢æ˜¾ç¤ºçš„ç¤ºä¾‹æ¼”ç¤ºäº†äºŒè¿›åˆ¶ä¿®å¤è¿ç®—ç¬¦çš„è‡ªå®šä¹‰å®ç°ã€‚ç±»å’Œç»“æ„è¿˜å¯ä»¥æä¾›æ ‡å‡†ä¸€å…ƒè¿ç®—ç¬¦çš„å®ç°ã€‚å•ä¸€è¿ç®—ç¬¦åœ¨å•ä¸ªç›®æ ‡ä¸Šè¿è¡Œã€‚å¦‚æœå®ƒä»¬åœ¨ç›®æ ‡ï¼ˆå¦‚-aï¼‰ä¹‹å‰ï¼Œå®ƒä»¬æ˜¯å‰ç¼€ï¼Œå¦‚æœä»–ä»¬éµå¾ªç›®æ ‡ï¼ˆå¦‚b!åˆ™ä¸ºåç¼€è¿ç®—ç¬¦ã€‚ åœ¨å£°æ˜è¿ç®—ç¬¦æ–¹æ³•æ—¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨funcå…³é”®å­—ä¹‹å‰å†™å…¥prefixæˆ–postfixä¿®é¥°ç¬¦æ¥å®ç°å‰ç¼€æˆ–åç¼€ä¸€å…ƒè¿ç®—ç¬¦ï¼š extension Vector2D { â€‹ static prefix func - (vector: Vector2D) -&gt; Vector2D { â€‹ return Vector2D(x: -vector.x, y: -vector.y) â€‹ } } ä¸Šé¢çš„ç¤ºä¾‹å®ç°äº†Vector2Då®ä¾‹çš„ä¸€å…ƒå‡è¿ç®—ç¬¦ï¼ˆ-aï¼‰ã€‚ä¸€å…ƒå‡ç®—ç¬¦æ˜¯å‰ç¼€è¿ç®—ç¬¦ï¼Œå› æ­¤è¿™ç§æ–¹æ³•å¿…é¡»ç”¨prefixä¿®é¥°ç¬¦é™å®šã€‚ å¯¹äºç®€å•çš„æ•°å€¼ï¼Œä¸€å…ƒå‡ç®—ç¬¦å°†æ­£æ•°è½¬æ¢ä¸ºè´Ÿç­‰ä»·æ•°ï¼Œåä¹‹äº¦ç„¶ã€‚Vector2Då®ä¾‹çš„ç›¸åº”å®ç°å¯¹xå’Œyå±æ€§æ‰§è¡Œæ­¤æ“ä½œï¼š let positive &#x3D; Vector2D(x: 3.0, y: 4.0) let negative &#x3D; -positive &#x2F;&#x2F; negative is a Vector2D instance with values of (-3.0, -4.0) let alsoPositive &#x3D; -negative &#x2F;&#x2F; alsoPositive is a Vector2D instance with values of (3.0, 4.0) å¤åˆåˆ†é…è¿ç®—ç¬¦å¤åˆèµ‹å€¼è¿ç®—ç¬¦å°†èµ‹å€¼ï¼ˆ&#x3D;ï¼‰ä¸å¦ä¸€ä¸ªè¿ç®—ç›¸ç»“åˆã€‚ä¾‹å¦‚ï¼ŒåŠ æ³•èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ+=å°†åŠ æ³•å’Œèµ‹å€¼ç»„åˆæˆä¸€ä¸ªè¿ç®—ã€‚æ‚¨å¯ä»¥å°†å¤åˆèµ‹å€¼è¿ç®—ç¬¦çš„å·¦è¾“å…¥å‚æ•°ç±»å‹æ ‡è®°ä¸ºinoutï¼Œå› ä¸ºå‚æ•°çš„å€¼å°†ç›´æ¥ä»è¿ç®—ç¬¦æ–¹æ³•ä¸­ä¿®æ”¹ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®ç°äº†Vector2Då®ä¾‹çš„åŠ æ³•èµ‹å€¼è¿ç®—ç¬¦æ–¹æ³•ï¼š extension Vector2D { â€‹ static func +&#x3D; (left: inout Vector2D, right: Vector2D) { â€‹ left &#x3D; left + right â€‹ } } ç”±äºæ·»åŠ è¿ç®—ç¬¦æ˜¯æ—©äº›æ—¶å€™å®šä¹‰çš„ï¼Œå› æ­¤æ‚¨æ— éœ€åœ¨è¿™é‡Œé‡æ–°å®ç°æ·»åŠ è¿‡ç¨‹ã€‚ç›¸åï¼ŒåŠ æ³•èµ‹å€¼è¿ç®—ç¬¦æ–¹æ³•åˆ©ç”¨äº†ç°æœ‰çš„åŠ æ³•è¿ç®—ç¬¦æ–¹æ³•ï¼Œå¹¶ä½¿å·¦å€¼è®¾ç½®ä¸ºå·¦å€¼åŠ å³å€¼ï¼š var original &#x3D; Vector2D(x: 1.0, y: 2.0) let vectorToAdd &#x3D; Vector2D(x: 3.0, y: 4.0) original +&#x3D; vectorToAdd &#x2F;&#x2F; original now has values of (4.0, 6.0) æ³¨æ„ It isnâ€™t possible to overload the default assignment operator (=). Only the compound assignment operators can be overloaded. Similarly, the ternary conditional operator (a ? b : c) canâ€™t be overloaded. ç­‰æ•ˆè¿ç®—ç¬¦é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰ç±»å’Œç»“æ„æ²¡æœ‰ç­‰ä»·è¿ç®—ç¬¦çš„å®ç°ï¼Œç§°ä¸ºç­‰äºè¿ç®—ç¬¦ï¼ˆ==ï¼Œä¸ç­‰äºè¿ç®—ç¬¦ï¼ˆ!=ï¼‰ã€‚æ‚¨é€šå¸¸å®ç°==è¿ç®—ç¬¦ï¼Œå¹¶ä½¿ç”¨æ ‡å‡†åº“çš„é»˜è®¤å®ç°!=å¦å®š==è¿ç®—ç¬¦ç»“æœçš„è¿ç®—ç¬¦ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°==è¿ç®—ç¬¦ï¼šæ‚¨å¯ä»¥è‡ªå·±å®ç°å®ƒï¼Œæˆ–è€…å¯¹äºè®¸å¤šç±»å‹ï¼Œæ‚¨å¯ä»¥è®©Swiftä¸ºæ‚¨åˆæˆå®ç°ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ‚¨éƒ½ä¼šæ·»åŠ ä¸æ ‡å‡†åº“çš„Equatableåè®®çš„ä¸€è‡´æ€§ã€‚ æ‚¨ä»¥ä¸å®ç°å…¶ä»–ä¿®å¤è¿ç®—ç¬¦ç›¸åŒçš„æ–¹å¼æä¾›==è¿ç®—ç¬¦çš„å®ç°ï¼š extension Vector2D: Equatable { â€‹ static func &#x3D;&#x3D; (left: Vector2D, right: Vector2D) -&gt; Bool { â€‹ return (left.x &#x3D;&#x3D; right.x) &amp;&amp; (left.y &#x3D;&#x3D; right.y) â€‹ } } ä¸Šé¢çš„ç¤ºä¾‹å®ç°äº†==è¿ç®—ç¬¦æ¥æ£€æŸ¥ä¸¤ä¸ªVector2Då®ä¾‹æ˜¯å¦å…·æœ‰ç­‰æ•ˆå€¼ã€‚åœ¨Vector2Dçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå°†â€œç›¸ç­‰â€è§†ä¸ºâ€œè¿™ä¸¤ä¸ªå®ä¾‹å…·æœ‰ç›¸åŒçš„xå€¼å’Œyå€¼â€æ˜¯æœ‰é“ç†çš„ï¼Œå› æ­¤è¿™æ˜¯è¿ç®—ç¬¦å®ç°ä½¿ç”¨çš„é€»è¾‘ã€‚ æ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨æ­¤è¿ç®—ç¬¦æ£€æŸ¥ä¸¤ä¸ªVector2Då®ä¾‹æ˜¯å¦ç­‰æ•ˆï¼š let twoThree &#x3D; Vector2D(x: 2.0, y: 3.0) let anotherTwoThree &#x3D; Vector2D(x: 2.0, y: 3.0) if twoThree &#x3D;&#x3D; anotherTwoThree { â€‹ print(â€œThese two vectors are equivalent.â€) } &#x2F;&#x2F; Prints â€œThese two vectors are equivalent.â€ åœ¨è®¸å¤šç®€å•çš„æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥è¦æ±‚Swiftä¸ºæ‚¨æä¾›ç­‰æ•ˆè¿ç®—ç¬¦çš„åˆæˆå®ç°ï¼Œå¦‚ã€Šé‡‡ç”¨ä½¿ç”¨åˆæˆå®ç°çš„åè®®ã€‹ä¸­æ‰€è¿°ã€‚ è‡ªå®šä¹‰æ“ä½œå‘˜é™¤äº†Swiftæä¾›çš„æ ‡å‡†è¿ç®—ç¬¦å¤–ï¼Œæ‚¨è¿˜å¯ä»¥å£°æ˜å’Œå®ç°è‡ªå·±çš„è‡ªå®šä¹‰è¿ç®—ç¬¦ã€‚æœ‰å…³å¯ç”¨äºå®šä¹‰è‡ªå®šä¹‰è¿ç®—ç¬¦çš„å­—ç¬¦åˆ—è¡¨ï¼Œè¯·å‚é˜…è¿ç®—ç¬¦ã€‚ æ–°è¿ç®—ç¬¦ä½¿ç”¨operatorå…³é”®å­—åœ¨å…¨å±€çº§åˆ«å£°æ˜ï¼Œå¹¶æ ‡æœ‰prefixã€infixæˆ–postfixä¿®é¥°ç¬¦ï¼š prefix operator +++ ä¸Šé¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸º+++çš„æ–°å‰ç¼€è¿ç®—ç¬¦ã€‚æ­¤è¿ç®—ç¬¦åœ¨Swiftä¸­æ²¡æœ‰ç°æœ‰å«ä¹‰ï¼Œå› æ­¤åœ¨ä½¿ç”¨Vector2Då®ä¾‹çš„ç‰¹å®šä¸Šä¸‹æ–‡ä¸­ï¼Œå®ƒåœ¨ä¸‹é¢è¢«èµ‹äºˆäº†è‡ªå·±çš„è‡ªå®šä¹‰å«ä¹‰ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œ+++è¢«è§†ä¸ºä¸€ä¸ªæ–°çš„â€œå‰ç¼€åŠ å€â€è¿ç®—ç¬¦ã€‚å®ƒé€šè¿‡ä½¿ç”¨å‰é¢å®šä¹‰çš„åŠ æ³•èµ‹å€¼è¿ç®—ç¬¦å°†å‘é‡æ·»åŠ åˆ°è‡ªèº«ï¼Œå°†Vector2Då®ä¾‹çš„xå’Œyå€¼ç¿»å€ã€‚è¦å®ç°+++è¿ç®—ç¬¦ï¼Œè¯·åœ¨Vector2Dä¸­æ·»åŠ ä¸€ä¸ªåä¸º+++çš„ç±»å‹æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š extension Vector2D { â€‹ static prefix func +++ (vector: inout Vector2D) -&gt; Vector2D { â€‹ vector +&#x3D; vector â€‹ return vector â€‹ } } var toBeDoubled &#x3D; Vector2D(x: 1.0, y: 4.0) let afterDoubling &#x3D; +++toBeDoubled &#x2F;&#x2F; toBeDoubled now has values of (2.0, 8.0) &#x2F;&#x2F; afterDoubling also has values of (2.0, 8.0) è‡ªå®šä¹‰Infixè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§æ¯ä¸ªè‡ªå®šä¹‰ä¿®å¤è¿ç®—ç¬¦éƒ½å±äºä¼˜å…ˆçº§ç»„ã€‚ä¼˜å…ˆçº§ç»„æŒ‡å®šè¿ç®—ç¬¦ç›¸å¯¹äºå…¶ä»–å†…ç¼€è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼Œä»¥åŠè¿ç®—ç¬¦çš„å…³è”æ€§ã€‚æœ‰å…³è¿™äº›ç‰¹å¾å¦‚ä½•å½±å“å†…ç¼€è¿ç®—ç¬¦ä¸å…¶ä»–å†…ç¼€è¿ç®—ç¬¦çš„äº¤äº’çš„è¯´æ˜ï¼Œè¯·å‚é˜…ä¼˜å…ˆçº§å’Œå…³è”æ€§ã€‚ æ²¡æœ‰æ˜¾å¼æ”¾ç½®åœ¨ä¼˜å…ˆçº§ç»„ä¸­çš„è‡ªå®šä¹‰å†…ç¼€è¿ç®—ç¬¦å°†è·å¾—ä¸€ä¸ªé»˜è®¤ä¼˜å…ˆçº§ç»„ï¼Œå…¶ä¼˜å…ˆçº§ç›´æ¥é«˜äºä¸‰å…ƒæ¡ä»¶è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ã€‚ ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªåä¸º+-çš„æ–°è‡ªå®šä¹‰å†…ç¼€è¿ç®—ç¬¦ï¼Œè¯¥è¿ç®—ç¬¦å±äºä¼˜å…ˆçº§ç»„ AdditionPrecedenceï¼š infix operator +-: AdditionPrecedence extension Vector2D { â€‹ static func +- (left: Vector2D, right: Vector2D) -&gt; Vector2D { â€‹ return Vector2D(x: left.x + right.x, y: left.y - right.y) â€‹ } } let firstVector &#x3D; Vector2D(x: 1.0, y: 2.0) let secondVector &#x3D; Vector2D(x: 3.0, y: 4.0) let plusMinusVector &#x3D; firstVector +- secondVector &#x2F;&#x2F; plusMinusVector is a Vector2D instance with values of (4.0, -2.0) è¿™ä¸ªè¿ç®—ç¬¦å°†ä¸¤ä¸ªå‘é‡çš„xå€¼åŠ åœ¨ä¸€èµ·ï¼Œå¹¶ä»ç¬¬ä¸€ä¸ªå‘é‡ä¸­å‡å»ç¬¬äºŒä¸ªå‘é‡çš„yå€¼ã€‚å› ä¸ºå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªâ€œåŠ æ³•â€è¿ç®—ç¬¦ï¼Œæ‰€ä»¥å®ƒè¢«èµ‹äºˆäº†ä¸+å’Œ-ç­‰åŠ æ€§å†…ç¼€è¿ç®—ç¬¦ç›¸åŒçš„ä¼˜å…ˆçº§ç»„ã€‚æœ‰å…³Swiftæ ‡å‡†åº“æä¾›çš„è¿ç®—ç¬¦çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿ç®—ç¬¦ä¼˜å…ˆçº§ç»„å’Œå…³è”æ€§è®¾ç½®çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…è¿ç®—ç¬¦å£°æ˜ã€‚æœ‰å…³ä¼˜å…ˆçº§ç»„çš„æ›´å¤šä¿¡æ¯ï¼Œä»¥åŠæŸ¥çœ‹å®šä¹‰æ‚¨è‡ªå·±çš„è¿ç®—ç¬¦å’Œä¼˜å…ˆçº§ç»„çš„è¯­æ³•ï¼Œè¯·å‚é˜…è¿ç®—ç¬¦å£°æ˜ã€‚ æ³¨æ„ åœ¨å®šä¹‰å‰ç¼€æˆ–åç¼€è¿ç®—ç¬¦æ—¶ï¼Œæ‚¨ä¸ä¼šæŒ‡å®šä¼˜å…ˆçº§ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨åŒæ—¶å°†å‰ç¼€å’Œåç¼€è¿ç®—ç¬¦åº”ç”¨äºåŒä¸€æ“ä½œæ•°ï¼Œåˆ™é¦–å…ˆåº”ç”¨åç¼€è¿ç®—ç¬¦ã€‚ ç»“æœå»ºè®¾è€…ç»“æœç”Ÿæˆå™¨æ˜¯æ‚¨å®šä¹‰çš„ä¸€ç§ç±»å‹ï¼Œå®ƒä»¥è‡ªç„¶ã€å£°æ˜çš„æ–¹å¼æ·»åŠ ç”¨äºåˆ›å»ºåµŒå¥—æ•°æ®ï¼ˆå¦‚åˆ—è¡¨æˆ–æ ‘ï¼‰çš„è¯­æ³•ã€‚ä½¿ç”¨ç»“æœæ„å»ºå™¨çš„ä»£ç å¯ä»¥åŒ…æ‹¬æ™®é€šçš„Swiftè¯­æ³•ï¼Œä¾‹å¦‚ifå’Œforï¼Œä»¥å¤„ç†æ¡ä»¶æˆ–é‡å¤çš„æ•°æ®ã€‚ ä»¥ä¸‹ä»£ç å®šä¹‰äº†ä½¿ç”¨æ˜Ÿæ˜Ÿå’Œæ–‡æœ¬åœ¨å•è¡Œä¸Šç»˜åˆ¶çš„å‡ ç§ç±»å‹ã€‚ protocol Drawable { â€‹ func draw() -&gt; String } struct Line: Drawable { â€‹ var elements: [Drawable] â€‹ func draw() -&gt; String { â€‹ return elements.map { $0.draw() }.joined(separator: â€œâ€) â€‹ } } struct Text: Drawable { â€‹ var content: String â€‹ init(_ content: String) { self.content &#x3D; content } â€‹ func draw() -&gt; String { return content } } struct Space: Drawable { â€‹ func draw() -&gt; String { return â€œ â€œ } } struct Stars: Drawable { â€‹ var length: Int â€‹ func draw() -&gt; String { return String(repeating: â€œ*â€, count: length) } } struct AllCaps: Drawable { â€‹ var content: Drawable â€‹ func draw() -&gt; String { return content.draw().uppercased() } } Drawableåè®®å®šä¹‰äº†å¯¹å¯ä»¥ç»˜åˆ¶çš„ä¸œè¥¿çš„è¦æ±‚ï¼Œä¾‹å¦‚çº¿æ¡æˆ–å½¢çŠ¶ï¼šç±»å‹å¿…é¡»å®ç°draw()æ–¹æ³•ã€‚Lineç»“æ„ä»£è¡¨å•çº¿ç»˜å›¾ï¼Œå®ƒä¸ºå¤§å¤šæ•°ç»˜å›¾çš„é¡¶å±‚å®¹å™¨æœåŠ¡ã€‚è¦ç»˜åˆ¶ä¸€æ¡Lineï¼Œç»“æ„åœ¨æ¯è¡Œçš„ç»„ä»¶ä¸Šè°ƒç”¨draw()ï¼Œç„¶åå°†ç”Ÿæˆçš„å­—ç¬¦ä¸²è¿æ¥æˆå•ä¸ªå­—ç¬¦ä¸²ã€‚Textç»“æ„åŒ…è£¹å­—ç¬¦ä¸²ä½¿å…¶æˆä¸ºç»˜å›¾çš„ä¸€éƒ¨åˆ†ã€‚AllCapsç»“æ„åŒ…è£…å’Œä¿®æ”¹å¦ä¸€å¼ ç»˜å›¾ï¼Œå°†ç»˜å›¾ä¸­çš„ä»»ä½•æ–‡æœ¬è½¬æ¢ä¸ºå¤§å†™ã€‚ å¯ä»¥é€šè¿‡è°ƒç”¨åˆå§‹åŒ–å™¨æ¥ä½¿ç”¨è¿™äº›ç±»å‹ç»˜åˆ¶ç»˜å›¾ï¼š let name: String? &#x3D; â€œRavi Patelâ€ let manualDrawing &#x3D; Line(elements: [ â€‹ Stars(length: 3), â€‹ Text(â€œHelloâ€), â€‹ Space(), â€‹ AllCaps(content: Text((name ?? â€œWorldâ€) + â€œ!â€)), â€‹ Stars(length: 2), â€‹ ]) print(manualDrawing.draw()) &#x2F;&#x2F; Prints â€œ*Hello RAVI PATEL!â€œ è¿™ä¸ªä»£ç æœ‰æ•ˆï¼Œä½†æœ‰ç‚¹å°´å°¬ã€‚AllCapsä¹‹åçš„æ·±åµŒå¥—æ‹¬å·å¾ˆéš¾é˜…è¯»ã€‚å½“nameä¸ºnilä½¿ç”¨â€œä¸–ç•Œâ€çš„åå¤‡é€»è¾‘å¿…é¡»ä½¿ç”¨??å®Œæˆæ“ä½œå‘˜ï¼Œå¦‚æœæ›´å¤æ‚ï¼Œé‚£å°±å¾ˆéš¾äº†ã€‚å¦‚æœæ‚¨éœ€è¦åŒ…å«å¼€å…³æˆ–å¾ªç¯æ¥æ„å»ºéƒ¨åˆ†ç»˜å›¾ï¼Œåˆ™æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚ç»“æœç”Ÿæˆå™¨å…è®¸æ‚¨åƒè¿™æ ·é‡å†™ä»£ç ï¼Œä½¿å…¶çœ‹èµ·æ¥åƒæ™®é€šçš„Swiftä»£ç ã€‚ è¦å®šä¹‰ç»“æœæ„å»ºå™¨ï¼Œè¯·åœ¨ç±»å‹å£°æ˜ä¸Šå†™å…¥@resultBuilderå±æ€§ã€‚ä¾‹å¦‚ï¼Œæ­¤ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸ºDrawingBuilderçš„ç»“æœæ„å»ºå™¨ï¼Œå®ƒå…è®¸æ‚¨ä½¿ç”¨å£°æ˜è¯­æ³•æ¥æè¿°ç»˜å›¾ï¼š @resultBuilder struct DrawingBuilder { â€‹ static func buildBlock(_ components: Drawableâ€¦) -&gt; Drawable { â€‹ return Line(elements: components) â€‹ } â€‹ static func buildEither(first: Drawable) -&gt; Drawable { â€‹ return first â€‹ } â€‹ static func buildEither(second: Drawable) -&gt; Drawable { â€‹ return second â€‹ } } DrawingBuilderç»“æ„å®šä¹‰äº†å®ç°ç»“æœæ„å»ºå™¨è¯­æ³•éƒ¨åˆ†çš„ä¸‰ç§æ–¹æ³•ã€‚buildBlock(_:)æ–¹æ³•å¢åŠ äº†å¯¹åœ¨ä»£ç å—ä¸­å†™å…¥ä¸€ç³»åˆ—è¡Œçš„æ”¯æŒã€‚å®ƒå°†è¯¥å—ä¸­çš„ç»„ä»¶ç»„åˆæˆä¸€æ¡Lineã€‚ThebuildEitherbuildEither(first:)å’ŒbuildEither(second:)æ–¹æ³•å¢åŠ äº†å¯¹if-elseçš„æ”¯æŒã€‚ æ‚¨å¯ä»¥å°†@DrawingBuilderå±æ€§åº”ç”¨äºå‡½æ•°çš„å‚æ•°ï¼Œè¯¥å‚æ•°å°†ä¼ é€’ç»™å‡½æ•°çš„é—­åŒ…è½¬æ¢ä¸ºç»“æœæ„å»ºå™¨ä»è¯¥é—­åŒ…åˆ›å»ºçš„å€¼ã€‚ä¾‹å¦‚ï¼š func draw(@DrawingBuilder content: () -&gt; Drawable) -&gt; Drawable { â€‹ return content() } func caps(@DrawingBuilder content: () -&gt; Drawable) -&gt; Drawable { â€‹ return AllCaps(content: content()) } func makeGreeting(for name: String? &#x3D; nil) -&gt; Drawable { â€‹ let greeting &#x3D; draw { â€‹ Stars(length: 3) â€‹ Text(â€œHelloâ€) â€‹ Space() â€‹ caps { â€‹ if let name &#x3D; name { â€‹ Text(name + â€œ!â€) â€‹ } else { â€‹ Text(â€œWorld!â€) â€‹ } â€‹ } â€‹ Stars(length: 2) â€‹ } â€‹ return greeting } let genericGreeting &#x3D; makeGreeting() print(genericGreeting.draw()) &#x2F;&#x2F; Prints â€œ*Hello WORLD!â€œ let personalGreeting &#x3D; makeGreeting(for: â€œRavi Patelâ€) print(personalGreeting.draw()) &#x2F;&#x2F; Prints â€œ*Hello RAVI PATEL!â€œ makeGreeting(for:)å‡½æ•°ä½¿ç”¨nameå‚æ•°ï¼Œå¹¶ç”¨å®ƒæ¥ç»˜åˆ¶ä¸ªæ€§åŒ–çš„é—®å€™è¯­ã€‚draw(_:)å’Œcaps(_:)å‡½æ•°éƒ½ä»¥å•ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°ï¼Œè¯¥é—­åŒ…æ ‡æœ‰@DrawingBuilderå±æ€§ã€‚å½“æ‚¨è°ƒç”¨è¿™äº›å‡½æ•°æ—¶ï¼Œæ‚¨ä½¿ç”¨DrawingBuilderå®šä¹‰çš„ç‰¹æ®Šè¯­æ³•ã€‚Swiftå°†ç»˜å›¾çš„å£°æ˜æ€§æè¿°è½¬æ¢ä¸ºå¯¹DrawingBuilderä¸Šæ–¹æ³•çš„ä¸€ç³»åˆ—è°ƒç”¨ï¼Œä»¥å»ºç«‹ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’çš„å€¼ã€‚ä¾‹å¦‚ï¼ŒSwiftå°†è¯¥ç¤ºä¾‹ä¸­çš„å¯¹caps(_:)è°ƒç”¨è½¬æ¢ä¸ºä»¥ä¸‹ä»£ç ï¼š let capsDrawing &#x3D; caps { â€‹ let partialDrawing: Drawable â€‹ if let name &#x3D; name { â€‹ let text &#x3D; Text(name + â€œ!â€) â€‹ partialDrawing &#x3D; DrawingBuilder.buildEither(first: text) â€‹ } else { â€‹ let text &#x3D; Text(â€œWorld!â€) â€‹ partialDrawing &#x3D; DrawingBuilder.buildEither(second: text) â€‹ } â€‹ return partialDrawing } Swiftå°†if-elseå—è½¬æ¢ä¸ºå¯¹buildEither(first:)å’ŒbuildEither(second:)æ–¹æ³•çš„è°ƒç”¨ã€‚è™½ç„¶æ‚¨ä¸ä¼šåœ¨è‡ªå·±çš„ä»£ç ä¸­è°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œä½†å½“æ‚¨ä½¿ç”¨DrawingBuilderè¯­æ³•æ—¶ï¼Œæ˜¾ç¤ºè½¬æ¢ç»“æœå¯ä»¥æ›´å®¹æ˜“åœ°æŸ¥çœ‹Swiftå¦‚ä½•è½¬æ¢ä»£ç ã€‚ è¦åœ¨ç‰¹æ®Šç»˜å›¾è¯­æ³•ä¸­æ·»åŠ forå¾ªç¯å†™å…¥çš„æ”¯æŒï¼Œè¯·æ·»åŠ buildArray(_:)æ–¹æ³•ã€‚ extension DrawingBuilder { â€‹ static func buildArray(_ components: [Drawable]) -&gt; Drawable { â€‹ return Line(elements: components) â€‹ } } let manyStars &#x3D; draw { â€‹ Text(â€œStars:â€) â€‹ for length in 1â€¦3 { â€‹ Space() â€‹ Stars(length: length) â€‹ } } åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œforå¾ªç¯åˆ›å»ºä¸€ä¸ªç»˜å›¾æ•°ç»„ï¼ŒbuildArray(_:)æ–¹æ³•å°†è¯¥æ•°ç»„è½¬æ¢ä¸ºLineã€‚ æœ‰å…³Swiftå¦‚ä½•å°†æ„å»ºå™¨è¯­æ³•è½¬æ¢ä¸ºå¯¹æ„å»ºå™¨ç±»å‹æ–¹æ³•çš„è°ƒç”¨çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…ç»“æœæ„å»ºå™¨ã€‚","categories":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"}]},{"title":"RESTful æ¶æ„è¯¦è§£","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/ç†è®º/RESTfulæ¶æ„è¯¦è§£","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.310Z","comments":true,"path":"2022/07/RESTfulæ¶æ„è¯¦è§£/","link":"","permalink":"https://guoshunfa.com/2022/07/RESTful%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"è½¬è½½è‡ªï¼šhttps://www.runoob.com/w3cnote/restful-architecture.html 1. ä»€ä¹ˆæ˜¯REST RESTå…¨ç§°æ˜¯Representational State Transferï¼Œä¸­æ–‡æ„æ€æ˜¯è¡¨è¿°ï¼ˆç¼–è€…æ³¨ï¼šé€šå¸¸è¯‘ä¸ºè¡¨å¾ï¼‰æ€§çŠ¶æ€è½¬ç§»ã€‚ å®ƒé¦–æ¬¡å‡ºç°åœ¨2000å¹´Roy Fieldingçš„åšå£«è®ºæ–‡ä¸­ï¼ŒRoy Fieldingæ˜¯HTTPè§„èŒƒçš„ä¸»è¦ç¼–å†™è€…ä¹‹ä¸€ã€‚ ä»–åœ¨è®ºæ–‡ä¸­æåˆ°ï¼šâ€æˆ‘è¿™ç¯‡æ–‡ç« çš„å†™ä½œç›®çš„ï¼Œå°±æ˜¯æƒ³åœ¨ç¬¦åˆæ¶æ„åŸç†çš„å‰æä¸‹ï¼Œç†è§£å’Œè¯„ä¼°ä»¥ç½‘ç»œä¸ºåŸºç¡€çš„åº”ç”¨è½¯ä»¶çš„æ¶æ„è®¾è®¡ï¼Œå¾—åˆ°ä¸€ä¸ªåŠŸèƒ½å¼ºã€æ€§èƒ½å¥½ã€é€‚å®œé€šä¿¡çš„æ¶æ„ã€‚RESTæŒ‡çš„æ˜¯ä¸€ç»„æ¶æ„çº¦æŸæ¡ä»¶å’ŒåŸåˆ™ã€‚â€ å¦‚æœä¸€ä¸ªæ¶æ„ç¬¦åˆRESTçš„çº¦æŸæ¡ä»¶å’ŒåŸåˆ™ï¼Œæˆ‘ä»¬å°±ç§°å®ƒä¸ºRESTfulæ¶æ„ã€‚ RESTæœ¬èº«å¹¶æ²¡æœ‰åˆ›é€ æ–°çš„æŠ€æœ¯ã€ç»„ä»¶æˆ–æœåŠ¡ï¼Œè€Œéšè—åœ¨RESTfulèƒŒåçš„ç†å¿µå°±æ˜¯ä½¿ç”¨Webçš„ç°æœ‰ç‰¹å¾å’Œèƒ½åŠ›ï¼Œ æ›´å¥½åœ°ä½¿ç”¨ç°æœ‰Webæ ‡å‡†ä¸­çš„ä¸€äº›å‡†åˆ™å’Œçº¦æŸã€‚è™½ç„¶RESTæœ¬èº«å—WebæŠ€æœ¯çš„å½±å“å¾ˆæ·±ï¼Œ ä½†æ˜¯ç†è®ºä¸ŠRESTæ¶æ„é£æ ¼å¹¶ä¸æ˜¯ç»‘å®šåœ¨HTTPä¸Šï¼Œåªä¸è¿‡ç›®å‰HTTPæ˜¯å”¯ä¸€ä¸RESTç›¸å…³çš„å®ä¾‹ã€‚ æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œæè¿°çš„RESTä¹Ÿæ˜¯é€šè¿‡HTTPå®ç°çš„RESTã€‚ 2. ç†è§£RESTfulè¦ç†è§£RESTfulæ¶æ„ï¼Œéœ€è¦ç†è§£Representational State Transferè¿™ä¸ªè¯ç»„åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Œå®ƒçš„æ¯ä¸€ä¸ªè¯éƒ½æœ‰äº›ä»€ä¹ˆæ¶µä¹‰ã€‚ ä¸‹é¢æˆ‘ä»¬ç»“åˆRESTåŸåˆ™ï¼Œå›´ç»•èµ„æºå±•å¼€è®¨è®ºï¼Œä»èµ„æºçš„å®šä¹‰ã€è·å–ã€è¡¨è¿°ã€å…³è”ã€çŠ¶æ€å˜è¿ç­‰è§’åº¦ï¼Œåˆ—ä¸¾ä¸€äº›å…³é”®æ¦‚å¿µå¹¶åŠ ä»¥è§£é‡Šã€‚ èµ„æºä¸URI ç»Ÿä¸€èµ„æºæ¥å£ èµ„æºçš„è¡¨è¿° èµ„æºçš„é“¾æ¥ çŠ¶æ€çš„è½¬ç§» 2. 1 èµ„æºä¸URIRESTå…¨ç§°æ˜¯è¡¨è¿°æ€§çŠ¶æ€è½¬ç§»ï¼Œé‚£ç©¶ç«ŸæŒ‡çš„æ˜¯ä»€ä¹ˆçš„è¡¨è¿°? å…¶å®æŒ‡çš„å°±æ˜¯èµ„æºã€‚ä»»ä½•äº‹ç‰©ï¼Œåªè¦æœ‰è¢«å¼•ç”¨åˆ°çš„å¿…è¦ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªèµ„æºã€‚èµ„æºå¯ä»¥æ˜¯å®ä½“(ä¾‹å¦‚æ‰‹æœºå·ç )ï¼Œä¹Ÿå¯ä»¥åªæ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µ(ä¾‹å¦‚ä»·å€¼) ã€‚ä¸‹é¢æ˜¯ä¸€äº›èµ„æºçš„ä¾‹å­ï¼š æŸç”¨æˆ·çš„æ‰‹æœºå·ç  æŸç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ æœ€å¤šç”¨æˆ·è®¢è´­çš„GPRSå¥—é¤ ä¸¤ä¸ªäº§å“ä¹‹é—´çš„ä¾èµ–å…³ç³» æŸç”¨æˆ·å¯ä»¥åŠç†çš„ä¼˜æƒ å¥—é¤ æŸæ‰‹æœºå·ç çš„æ½œåœ¨ä»·å€¼ è¦è®©ä¸€ä¸ªèµ„æºå¯ä»¥è¢«è¯†åˆ«ï¼Œéœ€è¦æœ‰ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œåœ¨Webä¸­è¿™ä¸ªå”¯ä¸€æ ‡è¯†å°±æ˜¯URI(Uniform Resource Identifier)ã€‚ URIæ—¢å¯ä»¥çœ‹æˆæ˜¯èµ„æºçš„åœ°å€ï¼Œä¹Ÿå¯ä»¥çœ‹æˆæ˜¯èµ„æºçš„åç§°ã€‚å¦‚æœæŸäº›ä¿¡æ¯æ²¡æœ‰ä½¿ç”¨URIæ¥è¡¨ç¤ºï¼Œé‚£å®ƒå°±ä¸èƒ½ç®—æ˜¯ä¸€ä¸ªèµ„æºï¼Œ åªèƒ½ç®—æ˜¯èµ„æºçš„ä¸€äº›ä¿¡æ¯è€Œå·²ã€‚URIçš„è®¾è®¡åº”è¯¥éµå¾ªå¯å¯»å€æ€§åŸåˆ™ï¼Œå…·æœ‰è‡ªæè¿°æ€§ï¼Œéœ€è¦åœ¨å½¢å¼ä¸Šç»™äººä»¥ç›´è§‰ä¸Šçš„å…³è”ã€‚è¿™é‡Œä»¥githubç½‘ç«™ä¸ºä¾‹ï¼Œç»™å‡ºä¸€äº›è¿˜ç®—ä¸é”™çš„URIï¼š https://github.com/git https://github.com/git/git https://github.com/git/git/blob/master/block-sha1/sha1.h https://github.com/git/git/commit/e3af72cdafab5993d18fae056f87e1d675913d08 https://github.com/git/git/pulls https://github.com/git/git/pulls?state=closed https://github.com/git/git/compare/masterâ€¦next ä¸‹é¢è®©æˆ‘ä»¬æ¥çœ‹çœ‹URIè®¾è®¡ä¸Šçš„ä¸€äº›æŠ€å·§: ä½¿ç”¨_æˆ–-æ¥è®©URIå¯è¯»æ€§æ›´å¥½ æ›¾ç»Webä¸Šçš„URIéƒ½æ˜¯å†°å†·çš„æ•°å­—æˆ–è€…æ— æ„ä¹‰çš„å­—ç¬¦ä¸²ï¼Œä½†ç°åœ¨è¶Šæ¥è¶Šå¤šçš„ç½‘ç«™ä½¿ç”¨_æˆ–-æ¥åˆ†éš”ä¸€äº›å•è¯ï¼Œè®©URIçœ‹ä¸Šå»æ›´ä¸ºäººæ€§åŒ–ã€‚ ä¾‹å¦‚å›½å†…æ¯”è¾ƒå‡ºåçš„å¼€æºä¸­å›½ç¤¾åŒºï¼Œå®ƒä¸Šé¢çš„æ–°é—»åœ°å€å°±é‡‡ç”¨è¿™ç§é£æ ¼ï¼Œ å¦‚http://www.oschina.net/news/38119/oschina-translate-reward-planã€‚ ä½¿ç”¨&#x2F;æ¥è¡¨ç¤ºèµ„æºçš„å±‚çº§å…³ç³» ä¾‹å¦‚ä¸Šè¿°&#x2F;git&#x2F;git&#x2F;commit&#x2F;e3af72cdafab5993d18fae056f87e1d675913d08å°±è¡¨ç¤ºäº†ä¸€ä¸ªå¤šçº§çš„èµ„æºï¼Œ æŒ‡çš„æ˜¯gitç”¨æˆ·çš„gité¡¹ç›®çš„æŸæ¬¡æäº¤è®°å½•ï¼Œåˆä¾‹å¦‚&#x2F;orders&#x2F;2012&#x2F;10å¯ä»¥ç”¨æ¥è¡¨ç¤º2012å¹´10æœˆçš„è®¢å•è®°å½•ã€‚ ä½¿ç”¨?ç”¨æ¥è¿‡æ»¤èµ„æº å¾ˆå¤šäººåªæ˜¯æŠŠ?ç®€å•çš„å½“åšæ˜¯å‚æ•°çš„ä¼ é€’ï¼Œå¾ˆå®¹æ˜“é€ æˆURIè¿‡äºå¤æ‚ã€éš¾ä»¥ç†è§£ã€‚å¯ä»¥æŠŠ?ç”¨äºå¯¹èµ„æºçš„è¿‡æ»¤ï¼Œ ä¾‹å¦‚&#x2F;git&#x2F;git&#x2F;pullsç”¨æ¥è¡¨ç¤ºgité¡¹ç›®çš„æ‰€æœ‰æ¨å…¥è¯·æ±‚ï¼Œè€Œ&#x2F;pulls?state&#x3D;closedç”¨æ¥è¡¨ç¤ºgité¡¹ç›®ä¸­å·²ç»å…³é—­çš„æ¨å…¥è¯·æ±‚ï¼Œ è¿™ç§URLé€šå¸¸å¯¹åº”çš„æ˜¯ä¸€äº›ç‰¹å®šæ¡ä»¶çš„æŸ¥è¯¢ç»“æœæˆ–ç®—æ³•è¿ç®—ç»“æœã€‚ ,æˆ–;å¯ä»¥ç”¨æ¥è¡¨ç¤ºåŒçº§èµ„æºçš„å…³ç³» æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è¡¨ç¤ºåŒçº§èµ„æºçš„å…³ç³»æ—¶ï¼Œå¯ä»¥ä½¿ç”¨,æˆ–;æ¥è¿›è¡Œåˆ†å‰²ã€‚ä¾‹å¦‚å“ªå¤©githubå¯ä»¥æ¯”è¾ƒæŸä¸ªæ–‡ä»¶åœ¨éšæ„ä¸¤æ¬¡æäº¤è®°å½•ä¹‹é—´çš„å·®å¼‚ï¼Œæˆ–è®¸å¯ä»¥ä½¿ç”¨&#x2F;git&#x2F;git &#x2F;block-sha1&#x2F;sha1.h&#x2F;compare&#x2F;e3af72cdafab5993d18fae056f87e1d675913d08;bd63e61bdf38e872d5215c07b264dcc16e4febcaä½œä¸ºURIã€‚ ä¸è¿‡ï¼Œç°åœ¨githubæ˜¯ä½¿ç”¨â€¦æ¥åšè¿™ä¸ªäº‹æƒ…çš„ï¼Œä¾‹å¦‚&#x2F;git&#x2F;git&#x2F;compare&#x2F;masterâ€¦nextã€‚ 2. 2 ç»Ÿä¸€èµ„æºæ¥å£RESTfulæ¶æ„åº”è¯¥éµå¾ªç»Ÿä¸€æ¥å£åŸåˆ™ï¼Œç»Ÿä¸€æ¥å£åŒ…å«äº†ä¸€ç»„å—é™çš„é¢„å®šä¹‰çš„æ“ä½œï¼Œä¸è®ºä»€ä¹ˆæ ·çš„èµ„æºï¼Œéƒ½æ˜¯é€šè¿‡ä½¿ç”¨ç›¸åŒçš„æ¥å£è¿›è¡Œèµ„æºçš„è®¿é—®ã€‚æ¥å£åº”è¯¥ä½¿ç”¨æ ‡å‡†çš„HTTPæ–¹æ³•å¦‚GETï¼ŒPUTå’ŒPOSTï¼Œå¹¶éµå¾ªè¿™äº›æ–¹æ³•çš„è¯­ä¹‰ã€‚ å¦‚æœæŒ‰ç…§HTTPæ–¹æ³•çš„è¯­ä¹‰æ¥æš´éœ²èµ„æºï¼Œé‚£ä¹ˆæ¥å£å°†ä¼šæ‹¥æœ‰å®‰å…¨æ€§å’Œå¹‚ç­‰æ€§çš„ç‰¹æ€§ï¼Œä¾‹å¦‚GETå’ŒHEADè¯·æ±‚éƒ½æ˜¯å®‰å…¨çš„ï¼Œ æ— è®ºè¯·æ±‚å¤šå°‘æ¬¡ï¼Œéƒ½ä¸ä¼šæ”¹å˜æœåŠ¡å™¨çŠ¶æ€ã€‚è€ŒGETã€HEADã€PUTå’ŒDELETEè¯·æ±‚éƒ½æ˜¯å¹‚ç­‰çš„ï¼Œæ— è®ºå¯¹èµ„æºæ“ä½œå¤šå°‘æ¬¡ï¼Œ ç»“æœæ€»æ˜¯ä¸€æ ·çš„ï¼Œåé¢çš„è¯·æ±‚å¹¶ä¸ä¼šäº§ç”Ÿæ¯”ç¬¬ä¸€æ¬¡æ›´å¤šçš„å½±å“ã€‚ ä¸‹é¢åˆ—å‡ºäº†GETï¼ŒDELETEï¼ŒPUTå’ŒPOSTçš„å…¸å‹ç”¨æ³•: GET å®‰å…¨ä¸”å¹‚ç­‰ è·å–è¡¨ç¤º å˜æ›´æ—¶è·å–è¡¨ç¤ºï¼ˆç¼“å­˜ï¼‰ 200ï¼ˆOKï¼‰ - è¡¨ç¤ºå·²åœ¨å“åº”ä¸­å‘å‡º 204ï¼ˆæ— å†…å®¹ï¼‰ - èµ„æºæœ‰ç©ºè¡¨ç¤º 301ï¼ˆMoved Permanentlyï¼‰ - èµ„æºçš„URIå·²è¢«æ›´æ–° 303ï¼ˆSee Otherï¼‰ - å…¶ä»–ï¼ˆå¦‚ï¼Œè´Ÿè½½å‡è¡¡ï¼‰ 304ï¼ˆnot modifiedï¼‰- èµ„æºæœªæ›´æ”¹ï¼ˆç¼“å­˜ï¼‰ 400 ï¼ˆbad requestï¼‰- æŒ‡ä»£åè¯·æ±‚ï¼ˆå¦‚ï¼Œå‚æ•°é”™è¯¯ï¼‰ 404 ï¼ˆnot foundï¼‰- èµ„æºä¸å­˜åœ¨ 406 ï¼ˆnot acceptableï¼‰- æœåŠ¡ç«¯ä¸æ”¯æŒæ‰€éœ€è¡¨ç¤º 500 ï¼ˆinternal server errorï¼‰- é€šç”¨é”™è¯¯å“åº” 503 ï¼ˆService Unavailableï¼‰- æœåŠ¡ç«¯å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ POST ä¸å®‰å…¨ä¸”ä¸å¹‚ç­‰ ä½¿ç”¨æœåŠ¡ç«¯ç®¡ç†çš„ï¼ˆè‡ªåŠ¨äº§ç”Ÿï¼‰çš„å®ä¾‹å·åˆ›å»ºèµ„æº åˆ›å»ºå­èµ„æº éƒ¨åˆ†æ›´æ–°èµ„æº å¦‚æœæ²¡æœ‰è¢«ä¿®æ”¹ï¼Œåˆ™ä¸è¿‡æ›´æ–°èµ„æºï¼ˆä¹è§‚é”ï¼‰ 200ï¼ˆOKï¼‰- å¦‚æœç°æœ‰èµ„æºå·²è¢«æ›´æ”¹ 201ï¼ˆcreatedï¼‰- å¦‚æœæ–°èµ„æºè¢«åˆ›å»º 202ï¼ˆacceptedï¼‰- å·²æ¥å—å¤„ç†è¯·æ±‚ä½†å°šæœªå®Œæˆï¼ˆå¼‚æ­¥å¤„ç†ï¼‰ 301ï¼ˆMoved Permanentlyï¼‰- èµ„æºçš„URIè¢«æ›´æ–° 303ï¼ˆSee Otherï¼‰- å…¶ä»–ï¼ˆå¦‚ï¼Œè´Ÿè½½å‡è¡¡ï¼‰ 400ï¼ˆbad requestï¼‰- æŒ‡ä»£åè¯·æ±‚ 404 ï¼ˆnot foundï¼‰- èµ„æºä¸å­˜åœ¨ 406 ï¼ˆnot acceptableï¼‰- æœåŠ¡ç«¯ä¸æ”¯æŒæ‰€éœ€è¡¨ç¤º 409 ï¼ˆconflictï¼‰- é€šç”¨å†²çª 412 ï¼ˆPrecondition Failedï¼‰- å‰ç½®æ¡ä»¶å¤±è´¥ï¼ˆå¦‚æ‰§è¡Œæ¡ä»¶æ›´æ–°æ—¶çš„å†²çªï¼‰ 415 ï¼ˆunsupported media typeï¼‰- æ¥å—åˆ°çš„è¡¨ç¤ºä¸å—æ”¯æŒ 500 ï¼ˆinternal server errorï¼‰- é€šç”¨é”™è¯¯å“åº” 503 ï¼ˆService Unavailableï¼‰- æœåŠ¡å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ PUT ä¸å®‰å…¨ä½†å¹‚ç­‰ ç”¨å®¢æˆ·ç«¯ç®¡ç†çš„å®ä¾‹å·åˆ›å»ºä¸€ä¸ªèµ„æº é€šè¿‡æ›¿æ¢çš„æ–¹å¼æ›´æ–°èµ„æº å¦‚æœæœªè¢«ä¿®æ”¹ï¼Œåˆ™æ›´æ–°èµ„æºï¼ˆä¹è§‚é”ï¼‰ 200 ï¼ˆOKï¼‰- å¦‚æœå·²å­˜åœ¨èµ„æºè¢«æ›´æ”¹ 201 ï¼ˆcreatedï¼‰- å¦‚æœæ–°èµ„æºè¢«åˆ›å»º 301ï¼ˆMoved Permanentlyï¼‰- èµ„æºçš„URIå·²æ›´æ”¹ 303 ï¼ˆSee Otherï¼‰- å…¶ä»–ï¼ˆå¦‚ï¼Œè´Ÿè½½å‡è¡¡ï¼‰ 400 ï¼ˆbad requestï¼‰- æŒ‡ä»£åè¯·æ±‚ 404 ï¼ˆnot foundï¼‰- èµ„æºä¸å­˜åœ¨ 406 ï¼ˆnot acceptableï¼‰- æœåŠ¡ç«¯ä¸æ”¯æŒæ‰€éœ€è¡¨ç¤º 409 ï¼ˆconflictï¼‰- é€šç”¨å†²çª 412 ï¼ˆPrecondition Failedï¼‰- å‰ç½®æ¡ä»¶å¤±è´¥ï¼ˆå¦‚æ‰§è¡Œæ¡ä»¶æ›´æ–°æ—¶çš„å†²çªï¼‰ 415 ï¼ˆunsupported media typeï¼‰- æ¥å—åˆ°çš„è¡¨ç¤ºä¸å—æ”¯æŒ 500 ï¼ˆinternal server errorï¼‰- é€šç”¨é”™è¯¯å“åº” 503 ï¼ˆService Unavailableï¼‰- æœåŠ¡å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ DELETE ä¸å®‰å…¨ä½†å¹‚ç­‰ åˆ é™¤èµ„æº 200 ï¼ˆOKï¼‰- èµ„æºå·²è¢«åˆ é™¤ 301 ï¼ˆMoved Permanentlyï¼‰- èµ„æºçš„URIå·²æ›´æ”¹ 303 ï¼ˆSee Otherï¼‰- å…¶ä»–ï¼Œå¦‚è´Ÿè½½å‡è¡¡ 400 ï¼ˆbad requestï¼‰- æŒ‡ä»£åè¯·æ±‚ 404 ï¼ˆnot foundï¼‰- èµ„æºä¸å­˜åœ¨ 409 ï¼ˆconflictï¼‰- é€šç”¨å†²çª 500 ï¼ˆinternal server errorï¼‰- é€šç”¨é”™è¯¯å“åº” 503 ï¼ˆService Unavailableï¼‰- æœåŠ¡ç«¯å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€äº›å®è·µä¸­å¸¸è§çš„é—®é¢˜: POSTå’ŒPUTç”¨äºåˆ›å»ºèµ„æºæ—¶æœ‰ä»€ä¹ˆåŒºåˆ«? POSTå’ŒPUTåœ¨åˆ›å»ºèµ„æºçš„åŒºåˆ«åœ¨äºï¼Œæ‰€åˆ›å»ºçš„èµ„æºçš„åç§°(URI)æ˜¯å¦ç”±å®¢æˆ·ç«¯å†³å®šã€‚ ä¾‹å¦‚ä¸ºæˆ‘çš„åšæ–‡å¢åŠ ä¸€ä¸ªjavaçš„åˆ†ç±»ï¼Œç”Ÿæˆçš„è·¯å¾„å°±æ˜¯åˆ†ç±»å&#x2F;categories&#x2F;javaï¼Œé‚£ä¹ˆå°±å¯ä»¥é‡‡ç”¨PUTæ–¹æ³•ã€‚ä¸è¿‡å¾ˆå¤šäººç›´æ¥æŠŠPOSTã€GETã€PUTã€DELETEç›´æ¥å¯¹åº”ä¸ŠCRUDï¼Œä¾‹å¦‚åœ¨ä¸€ä¸ªå…¸å‹çš„railså®ç°çš„RESTfulåº”ç”¨ä¸­å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚ æˆ‘è®¤ä¸ºï¼Œè¿™æ˜¯å› ä¸ºrailsé»˜è®¤ä½¿ç”¨æœåŠ¡ç«¯ç”Ÿæˆçš„IDä½œä¸ºURIçš„ç¼˜æ•…ï¼Œè€Œä¸å°‘äººå°±æ˜¯é€šè¿‡railså®è·µRESTçš„ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“é€ æˆè¿™ç§è¯¯è§£ã€‚ å®¢æˆ·ç«¯ä¸ä¸€å®šéƒ½æ”¯æŒè¿™äº›HTTPæ–¹æ³•å§? çš„ç¡®æœ‰è¿™ç§æƒ…å†µï¼Œç‰¹åˆ«æ˜¯ä¸€äº›æ¯”è¾ƒå¤è€çš„åŸºäºæµè§ˆå™¨çš„å®¢æˆ·ç«¯ï¼Œåªèƒ½æ”¯æŒGETå’ŒPOSTä¸¤ç§æ–¹æ³•ã€‚ åœ¨å®è·µä¸Šï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½å¯èƒ½éœ€è¦åšä¸€äº›å¦¥åã€‚ä¾‹å¦‚railsæ¡†æ¶å°±æ”¯æŒé€šè¿‡éšè—å‚æ•°_method&#x3D;DELETEæ¥ä¼ é€’çœŸå®çš„è¯·æ±‚æ–¹æ³•ï¼Œ è€ŒåƒBackboneè¿™æ ·çš„å®¢æˆ·ç«¯MVCæ¡†æ¶åˆ™å…è®¸ä¼ é€’_methodä¼ è¾“å’Œè®¾ç½®X-HTTP-Method-Overrideå¤´æ¥è§„é¿è¿™ä¸ªé—®é¢˜ã€‚ ç»Ÿä¸€æ¥å£æ˜¯å¦æ„å‘³ç€ä¸èƒ½æ‰©å±•å¸¦ç‰¹æ®Šè¯­ä¹‰çš„æ–¹æ³•? ç»Ÿä¸€æ¥å£å¹¶ä¸é˜»æ­¢ä½ æ‰©å±•æ–¹æ³•ï¼Œåªè¦æ–¹æ³•å¯¹èµ„æºçš„æ“ä½œæœ‰ç€å…·ä½“çš„ã€å¯è¯†åˆ«çš„è¯­ä¹‰å³å¯ï¼Œå¹¶èƒ½å¤Ÿä¿æŒæ•´ä¸ªæ¥å£çš„ç»Ÿä¸€æ€§ã€‚ åƒWebDAVå°±å¯¹HTTPæ–¹æ³•è¿›è¡Œäº†æ‰©å±•ï¼Œå¢åŠ äº†LOCKã€UPLOCKç­‰æ–¹æ³•ã€‚è€Œgithubçš„APIåˆ™æ”¯æŒä½¿ç”¨PATCHæ–¹æ³•æ¥è¿›è¡Œissueçš„æ›´æ–°ï¼Œä¾‹å¦‚: 1PATCH /repos/:owner/:repo/issues/:number ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåƒPATCHè¿™ç§ä¸æ˜¯HTTPæ ‡å‡†æ–¹æ³•çš„ï¼ŒæœåŠ¡ç«¯éœ€è¦è€ƒè™‘å®¢æˆ·ç«¯æ˜¯å¦èƒ½å¤Ÿæ”¯æŒçš„é—®é¢˜ã€‚ ç»Ÿä¸€èµ„æºæ¥å£å¯¹URIæœ‰ä»€ä¹ˆæŒ‡å¯¼æ„ä¹‰? ç»Ÿä¸€èµ„æºæ¥å£è¦æ±‚ä½¿ç”¨æ ‡å‡†çš„HTTPæ–¹æ³•å¯¹èµ„æºè¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥URIåªåº”è¯¥æ¥è¡¨ç¤ºèµ„æºçš„åç§°ï¼Œè€Œä¸åº”è¯¥åŒ…æ‹¬èµ„æºçš„æ“ä½œã€‚ é€šä¿—æ¥è¯´ï¼ŒURIä¸åº”è¯¥ä½¿ç”¨åŠ¨ä½œæ¥æè¿°ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€äº›ä¸ç¬¦åˆç»Ÿä¸€æ¥å£è¦æ±‚çš„URI: GET &#x2F;getUser&#x2F;1 POST &#x2F;createUser PUT &#x2F;updateUser&#x2F;1 DELETE &#x2F;deleteUser&#x2F;1 å¦‚æœGETè¯·æ±‚å¢åŠ è®¡æ•°å™¨ï¼Œè¿™æ˜¯å¦è¿åå®‰å…¨æ€§? å®‰å…¨æ€§ä¸ä»£è¡¨è¯·æ±‚ä¸äº§ç”Ÿå‰¯ä½œç”¨ï¼Œä¾‹å¦‚åƒå¾ˆå¤šAPIå¼€å‘å¹³å°ï¼Œéƒ½å¯¹è¯·æ±‚æµé‡åšé™åˆ¶ã€‚åƒgithubï¼Œå°±ä¼šé™åˆ¶æ²¡æœ‰è®¤è¯çš„è¯·æ±‚æ¯å°æ—¶åªèƒ½è¯·æ±‚60æ¬¡ã€‚ ä½†å®¢æˆ·ç«¯ä¸æ˜¯ä¸ºäº†è¿½æ±‚å‰¯ä½œç”¨è€Œå‘å‡ºè¿™äº›GETæˆ–HEADè¯·æ±‚çš„ï¼Œäº§ç”Ÿå‰¯ä½œç”¨æ˜¯æœåŠ¡ç«¯â€è‡ªä½œä¸»å¼ â€çš„ã€‚ å¦å¤–ï¼ŒæœåŠ¡ç«¯åœ¨è®¾è®¡æ—¶ï¼Œä¹Ÿä¸åº”è¯¥è®©å‰¯ä½œç”¨å¤ªå¤§ï¼Œå› ä¸ºå®¢æˆ·ç«¯è®¤ä¸ºè¿™äº›è¯·æ±‚æ˜¯ä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨çš„ã€‚ ç›´æ¥å¿½è§†ç¼“å­˜å¯å–å—? å³ä½¿ä½ æŒ‰å„ä¸ªåŠ¨è¯çš„åŸæœ¬æ„å›¾æ¥ä½¿ç”¨å®ƒä»¬ï¼Œä½ ä»å¯ä»¥è½»æ˜“ç¦æ­¢ç¼“å­˜æœºåˆ¶ã€‚ æœ€ç®€å•çš„åšæ³•å°±æ˜¯åœ¨ä½ çš„HTTPå“åº”é‡Œå¢åŠ è¿™æ ·ä¸€ä¸ªæŠ¥å¤´ï¼š Cache-control: no-cacheã€‚ ä½†æ˜¯ï¼ŒåŒæ—¶ä½ ä¹Ÿå¯¹å¤±å»äº†é«˜æ•ˆçš„ç¼“å­˜ä¸å†éªŒè¯çš„æ”¯æŒ(ä½¿ç”¨Etagç­‰æœºåˆ¶)ã€‚ å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œåœ¨ä¸ºä¸€ä¸ªRESTå¼æœåŠ¡å®ç°ç¨‹åºå®¢æˆ·ç«¯æ—¶ï¼Œä¹Ÿåº”è¯¥å……åˆ†åˆ©ç”¨ç°æœ‰çš„ç¼“å­˜æœºåˆ¶ï¼Œä»¥å…æ¯æ¬¡éƒ½é‡æ–°è·å–è¡¨ç¤ºã€‚ å“åº”ä»£ç çš„å¤„ç†æœ‰å¿…è¦å—? HTTPçš„å“åº”ä»£ç å¯ç”¨äºåº”ä»˜ä¸åŒåœºåˆï¼Œæ­£ç¡®ä½¿ç”¨è¿™äº›çŠ¶æ€ä»£ç æ„å‘³ç€å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å¯ä»¥åœ¨ä¸€ä¸ªå…·å¤‡è¾ƒä¸°å¯Œè¯­ä¹‰çš„å±‚æ¬¡ä¸Šè¿›è¡Œæ²Ÿé€šã€‚ ä¾‹å¦‚ï¼Œ201ï¼ˆâ€Createdâ€ï¼‰å“åº”ä»£ç è¡¨æ˜å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„èµ„æºï¼Œå…¶URIåœ¨Locationå“åº”æŠ¥å¤´é‡Œã€‚ å‡å¦‚ä½ ä¸åˆ©ç”¨HTTPçŠ¶æ€ä»£ç ä¸°å¯Œçš„åº”ç”¨è¯­ä¹‰ï¼Œé‚£ä¹ˆä½ å°†é”™å¤±æé«˜é‡ç”¨æ€§ã€å¢å¼ºäº’æ“ä½œæ€§å’Œæå‡æ¾è€¦åˆæ€§çš„æœºä¼šã€‚ å¦‚æœè¿™äº›æ‰€è°“çš„RESTfulåº”ç”¨å¿…é¡»é€šè¿‡å“åº”å®ä½“æ‰èƒ½ç»™å‡ºé”™è¯¯ä¿¡æ¯ï¼Œé‚£ä¹ˆSOAPå°±æ˜¯è¿™æ ·çš„äº†ï¼Œå®ƒå°±èƒ½å¤Ÿæ»¡è¶³äº†ã€‚ 2. 3 èµ„æºçš„è¡¨è¿°ä¸Šé¢æåˆ°ï¼Œå®¢æˆ·ç«¯é€šè¿‡HTTPæ–¹æ³•å¯ä»¥è·å–èµ„æºï¼Œæ˜¯å§? ä¸ï¼Œç¡®åˆ‡çš„è¯´ï¼Œå®¢æˆ·ç«¯è·å–çš„åªæ˜¯èµ„æºçš„è¡¨è¿°è€Œå·²ã€‚ èµ„æºåœ¨å¤–ç•Œçš„å…·ä½“å‘ˆç°ï¼Œå¯ä»¥æœ‰å¤šç§è¡¨è¿°(æˆ–æˆä¸ºè¡¨ç°ã€è¡¨ç¤º)å½¢å¼ï¼Œåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´ä¼ é€çš„ä¹Ÿæ˜¯èµ„æºçš„è¡¨è¿°ï¼Œè€Œä¸æ˜¯èµ„æºæœ¬èº«ã€‚ ä¾‹å¦‚æ–‡æœ¬èµ„æºå¯ä»¥é‡‡ç”¨htmlã€xmlã€jsonç­‰æ ¼å¼ï¼Œå›¾ç‰‡å¯ä»¥ä½¿ç”¨PNGæˆ–JPGå±•ç°å‡ºæ¥ã€‚ èµ„æºçš„è¡¨è¿°åŒ…æ‹¬æ•°æ®å’Œæè¿°æ•°æ®çš„å…ƒæ•°æ®ï¼Œä¾‹å¦‚ï¼ŒHTTPå¤´â€Content-Typeâ€ å°±æ˜¯è¿™æ ·ä¸€ä¸ªå…ƒæ•°æ®å±æ€§ã€‚ é‚£ä¹ˆå®¢æˆ·ç«¯å¦‚ä½•çŸ¥é“æœåŠ¡ç«¯æä¾›å“ªç§è¡¨è¿°å½¢å¼å‘¢? ç­”æ¡ˆæ˜¯å¯ä»¥é€šè¿‡HTTPå†…å®¹åå•†ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡Acceptå¤´è¯·æ±‚ä¸€ç§ç‰¹å®šæ ¼å¼çš„è¡¨è¿°ï¼ŒæœåŠ¡ç«¯åˆ™é€šè¿‡Content-Typeå‘Šè¯‰å®¢æˆ·ç«¯èµ„æºçš„è¡¨è¿°å½¢å¼ã€‚ ä»¥githubä¸ºä¾‹ï¼Œè¯·æ±‚æŸç»„ç»‡èµ„æºçš„jsonæ ¼å¼çš„è¡¨è¿°å½¢å¼: å‡å¦‚githubä¹Ÿèƒ½å¤Ÿæ”¯æŒxmlæ ¼å¼çš„è¡¨è¿°æ ¼å¼ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯è¿™æ ·çš„: ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€äº›å®è·µä¸Šå¸¸è§çš„è®¾è®¡: åœ¨URIé‡Œè¾¹å¸¦ä¸Šç‰ˆæœ¬å·æœ‰äº›APIåœ¨URIé‡Œè¾¹å¸¦ä¸Šç‰ˆæœ¬å·ï¼Œä¾‹å¦‚: http://api.example.com/1.0/foo http://api.example.com/1.2/foo http://api.example.com/2.0/foo å¦‚æœæˆ‘ä»¬æŠŠç‰ˆæœ¬å·ç†è§£æˆèµ„æºçš„ä¸åŒè¡¨è¿°å½¢å¼çš„è¯ï¼Œå°±åº”è¯¥åªæ˜¯ç”¨ä¸€ä¸ªURLï¼Œå¹¶é€šè¿‡Acceptå¤´éƒ¨æ¥åŒºåˆ†ï¼Œè¿˜æ˜¯ä»¥githubä¸ºä¾‹ï¼Œå®ƒçš„Acceptçš„å®Œæ•´æ ¼å¼æ˜¯:application&#x2F;vnd.github[.version].param[+json] å¯¹äºv3ç‰ˆæœ¬çš„è¯ï¼Œå°±æ˜¯Accept: application&#x2F;vnd.github.v3ã€‚å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼ŒåŒç†å¯ä»¥ä½¿ç”¨ä½¿ç”¨ä¸‹é¢çš„å¤´éƒ¨: Accept: vnd.example-com.foo+json; version&#x3D;1.0 Accept: vnd.example-com.foo+json; version&#x3D;1.2 Accept: vnd.example-com.foo+json; version&#x3D;2.0 ä½¿ç”¨URIåç¼€æ¥åŒºåˆ†è¡¨è¿°æ ¼å¼åƒrailsæ¡†æ¶ï¼Œå°±æ”¯æŒä½¿ç”¨&#x2F;users.xmlæˆ–&#x2F;users.jsonæ¥åŒºåˆ†ä¸åŒçš„æ ¼å¼ã€‚ è¿™æ ·çš„æ–¹å¼å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œæ— ç–‘æ˜¯æ›´ä¸ºç›´è§‚ï¼Œä½†æ··æ·†äº†èµ„æºçš„åç§°å’Œèµ„æºçš„è¡¨è¿°å½¢å¼ã€‚ æˆ‘ä¸ªäººè®¤ä¸ºï¼Œè¿˜æ˜¯åº”è¯¥ä¼˜å…ˆä½¿ç”¨å†…å®¹åå•†æ¥åŒºåˆ†è¡¨è¿°æ ¼å¼ã€‚ å¦‚ä½•å¤„ç†ä¸æ”¯æŒçš„è¡¨è¿°æ ¼å¼å½“æœåŠ¡å™¨ä¸æ”¯æŒæ‰€è¯·æ±‚çš„è¡¨è¿°æ ¼å¼ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆåŠï¼Ÿè‹¥æœåŠ¡å™¨ä¸æ”¯æŒï¼Œå®ƒåº”è¯¥è¿”å›ä¸€ä¸ªHTTP 406å“åº”ï¼Œè¡¨ç¤ºæ‹’ç»å¤„ç†è¯¥è¯·æ±‚ã€‚ä¸‹é¢ä»¥githubä¸ºä¾‹ï¼Œå±•ç¤ºäº†ä¸€ä¸ªè¯·æ±‚XMLè¡¨è¿°èµ„æºçš„ç»“æœï¼š 2. 4 èµ„æºçš„é“¾æ¥æˆ‘ä»¬çŸ¥é“RESTæ˜¯ä½¿ç”¨æ ‡å‡†çš„HTTPæ–¹æ³•æ¥æ“ä½œèµ„æºçš„ï¼Œä½†ä»…ä»…å› æ­¤å°±ç†è§£æˆå¸¦CURDçš„Webæ•°æ®åº“æ¶æ„å°±å¤ªè¿‡äºç®€å•äº†ã€‚ è¿™ç§åæ¨¡å¼å¿½ç•¥äº†ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼šâ€è¶…åª’ä½“å³åº”ç”¨çŠ¶æ€å¼•æ“ï¼ˆhypermedia as the engine of application stateï¼‰â€ã€‚ è¶…åª’ä½“æ˜¯ä»€ä¹ˆ? å½“ä½ æµè§ˆWebç½‘é¡µæ—¶ï¼Œä»ä¸€ä¸ªè¿æ¥è·³åˆ°ä¸€ä¸ªé¡µé¢ï¼Œå†ä»å¦ä¸€ä¸ªè¿æ¥è·³åˆ°å¦å¤–ä¸€ä¸ªé¡µé¢ï¼Œå°±æ˜¯åˆ©ç”¨äº†è¶…åª’ä½“çš„æ¦‚å¿µï¼šæŠŠä¸€ä¸ªä¸ªæŠŠèµ„æºé“¾æ¥èµ·æ¥. è¦è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œå°±è¦æ±‚åœ¨è¡¨è¿°æ ¼å¼é‡Œè¾¹åŠ å…¥é“¾æ¥æ¥å¼•å¯¼å®¢æˆ·ç«¯ã€‚åœ¨ã€ŠRESTful Web Servicesã€‹ä¸€ä¹¦ä¸­ï¼Œä½œè€…æŠŠè¿™ç§å…·æœ‰é“¾æ¥çš„ç‰¹æ€§æˆä¸ºè¿é€šæ€§ã€‚ä¸‹é¢æˆ‘ä»¬å…·ä½“æ¥çœ‹ä¸€äº›ä¾‹å­ã€‚ ä¸‹é¢å±•ç¤ºçš„æ˜¯githubè·å–æŸä¸ªç»„ç»‡ä¸‹çš„é¡¹ç›®åˆ—è¡¨çš„è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°åœ¨å“åº”å¤´é‡Œè¾¹å¢åŠ Linkå¤´å‘Šè¯‰å®¢æˆ·ç«¯æ€ä¹ˆè®¿é—®ä¸‹ä¸€é¡µå’Œæœ€åä¸€é¡µçš„è®°å½•ã€‚ è€Œåœ¨å“åº”ä½“é‡Œè¾¹ï¼Œç”¨urlæ¥é“¾æ¥é¡¹ç›®æ‰€æœ‰è€…å’Œé¡¹ç›®åœ°å€ã€‚ åˆä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œåˆ›å»ºè®¢å•åé€šè¿‡é“¾æ¥å¼•å¯¼å®¢æˆ·ç«¯å¦‚ä½•å»ä»˜æ¬¾ã€‚ ä¸Šé¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨è¶…åª’ä½“æ¥å¢å¼ºèµ„æºçš„è¿é€šæ€§ã€‚å¾ˆå¤šäººåœ¨è®¾è®¡RESTfulæ¶æ„æ—¶ï¼Œä½¿ç”¨å¾ˆå¤šæ—¶é—´æ¥å¯»æ‰¾æ¼‚äº®çš„URIï¼Œè€Œå¿½ç•¥äº†è¶…åª’ä½“ã€‚æ‰€ä»¥ï¼Œåº”è¯¥å¤šèŠ±ä¸€äº›æ—¶é—´æ¥ç»™èµ„æºçš„è¡¨è¿°æä¾›é“¾æ¥ï¼Œè€Œä¸æ˜¯ä¸“æ³¨äºâ€èµ„æºçš„CRUDâ€ã€‚ 2. 5 çŠ¶æ€çš„è½¬ç§»æœ‰äº†ä¸Šé¢çš„é“ºå«ï¼Œå†è®¨è®ºRESTé‡Œè¾¹çš„çŠ¶æ€è½¬ç§»å°±ä¼šå¾ˆå®¹æ˜“ç†è§£äº†ã€‚ ä¸è¿‡ï¼Œæˆ‘ä»¬å…ˆæ¥è®¨è®ºä¸€ä¸‹RESTåŸåˆ™ä¸­çš„æ— çŠ¶æ€é€šä¿¡åŸåˆ™ã€‚åˆçœ‹ä¸€ä¸‹ï¼Œå¥½åƒè‡ªç›¸çŸ›ç›¾äº†ï¼Œæ—¢ç„¶æ— çŠ¶æ€ï¼Œä½•æ¥çŠ¶æ€è½¬ç§»ä¸€è¯´? å…¶å®ï¼Œè¿™é‡Œè¯´çš„æ— çŠ¶æ€é€šä¿¡åŸåˆ™ï¼Œå¹¶ä¸æ˜¯è¯´å®¢æˆ·ç«¯åº”ç”¨ä¸èƒ½æœ‰çŠ¶æ€ï¼Œè€Œæ˜¯æŒ‡æœåŠ¡ç«¯ä¸åº”è¯¥ä¿å­˜å®¢æˆ·ç«¯çŠ¶æ€ã€‚ 2. 5.1 åº”ç”¨çŠ¶æ€ä¸èµ„æºçŠ¶æ€å®é™…ä¸Šï¼ŒçŠ¶æ€åº”è¯¥åŒºåˆ†åº”ç”¨çŠ¶æ€å’Œèµ„æºçŠ¶æ€ï¼Œå®¢æˆ·ç«¯è´Ÿè´£ç»´æŠ¤åº”ç”¨çŠ¶æ€ï¼Œè€ŒæœåŠ¡ç«¯ç»´æŠ¤èµ„æºçŠ¶æ€ã€‚ å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„äº¤äº’å¿…é¡»æ˜¯æ— çŠ¶æ€çš„ï¼Œå¹¶åœ¨æ¯ä¸€æ¬¡è¯·æ±‚ä¸­åŒ…å«å¤„ç†è¯¥è¯·æ±‚æ‰€éœ€çš„ä¸€åˆ‡ä¿¡æ¯ã€‚ æœåŠ¡ç«¯ä¸éœ€è¦åœ¨è¯·æ±‚é—´ä¿ç•™åº”ç”¨çŠ¶æ€ï¼Œåªæœ‰åœ¨æ¥å—åˆ°å®é™…è¯·æ±‚çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯æ‰ä¼šå…³æ³¨åº”ç”¨çŠ¶æ€ã€‚ è¿™ç§æ— çŠ¶æ€é€šä¿¡åŸåˆ™ï¼Œä½¿å¾—æœåŠ¡ç«¯å’Œä¸­ä»‹èƒ½å¤Ÿç†è§£ç‹¬ç«‹çš„è¯·æ±‚å’Œå“åº”ã€‚ åœ¨å¤šæ¬¡è¯·æ±‚ä¸­ï¼ŒåŒä¸€å®¢æˆ·ç«¯ä¹Ÿä¸å†éœ€è¦ä¾èµ–äºåŒä¸€æœåŠ¡å™¨ï¼Œæ–¹ä¾¿å®ç°é«˜å¯æ‰©å±•å’Œé«˜å¯ç”¨æ€§çš„æœåŠ¡ç«¯ã€‚ ä½†æœ‰æ—¶å€™æˆ‘ä»¬ä¼šåšå‡ºè¿åæ— çŠ¶æ€é€šä¿¡åŸåˆ™çš„è®¾è®¡ï¼Œä¾‹å¦‚åˆ©ç”¨Cookieè·Ÿè¸ªæŸä¸ªæœåŠ¡ç«¯ä¼šè¯çŠ¶æ€ï¼Œå¸¸è§çš„åƒJ2EEé‡Œè¾¹çš„JSESSIONIDã€‚ è¿™æ„å‘³ç€ï¼Œæµè§ˆå™¨éšå„æ¬¡è¯·æ±‚å‘å‡ºå»çš„Cookieæ˜¯è¢«ç”¨äºæ„å»ºä¼šè¯çŠ¶æ€çš„ã€‚ å½“ç„¶ï¼Œå¦‚æœCookieä¿å­˜çš„æ˜¯ä¸€äº›æœåŠ¡å™¨ä¸ä¾èµ–äºä¼šè¯çŠ¶æ€å³å¯éªŒè¯çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚è®¤è¯ä»¤ç‰Œï¼‰ï¼Œè¿™æ ·çš„Cookieä¹Ÿæ˜¯ç¬¦åˆRESTåŸåˆ™çš„ã€‚ 2. 5.2 åº”ç”¨çŠ¶æ€çš„è½¬ç§»çŠ¶æ€è½¬ç§»åˆ°è¿™é‡Œå·²ç»å¾ˆå¥½ç†è§£äº†ï¼Œ â€œä¼šè¯â€çŠ¶æ€ä¸æ˜¯ä½œä¸ºèµ„æºçŠ¶æ€ä¿å­˜åœ¨æœåŠ¡ç«¯çš„ï¼Œè€Œæ˜¯è¢«å®¢æˆ·ç«¯ä½œä¸ºåº”ç”¨çŠ¶æ€è¿›è¡Œè·Ÿè¸ªçš„ã€‚å®¢æˆ·ç«¯åº”ç”¨çŠ¶æ€åœ¨æœåŠ¡ç«¯æä¾›çš„è¶…åª’ä½“çš„æŒ‡å¼•ä¸‹å‘ç”Ÿå˜è¿ã€‚æœåŠ¡ç«¯é€šè¿‡è¶…åª’ä½“å‘Šè¯‰å®¢æˆ·ç«¯å½“å‰çŠ¶æ€æœ‰å“ªäº›åç»­çŠ¶æ€å¯ä»¥è¿›å…¥ã€‚ è¿™äº›ç±»ä¼¼â€ä¸‹ä¸€é¡µâ€ä¹‹ç±»çš„é“¾æ¥èµ·çš„å°±æ˜¯è¿™ç§æ¨è¿›çŠ¶æ€çš„ä½œç”¨â€”â€”æŒ‡å¼•ä½ å¦‚ä½•ä»å½“å‰çŠ¶æ€è¿›å…¥ä¸‹ä¸€ä¸ªå¯èƒ½çš„çŠ¶æ€ã€‚ 3. æ€»ç»“ç°åœ¨å¹¿ä¸œXXXç‰ˆæœ¬ã€XXXç­‰é¡¹ç›®ä¸­å‡ä½¿ç”¨ä¼ ç»Ÿçš„RPCã€SOAPæ–¹å¼çš„WebæœåŠ¡ï¼Œè€Œç§»åŠ¨å—æ–¹åŸºåœ°XXXXé¡¹ç›®çš„åå°ï¼Œ è™½ç„¶é‡‡ç”¨äº†JSONæ ¼å¼è¿›è¡Œäº¤äº’ï¼Œä½†è¿˜æ˜¯å±äºRPCé£æ ¼çš„ã€‚æœ¬æ–‡ä»èµ„æºçš„å®šä¹‰ã€è·å–ã€è¡¨è¿°ã€å…³è”ã€çŠ¶æ€å˜è¿ç­‰è§’åº¦ï¼Œ è¯•å›¾å¿«é€Ÿç†è§£RESTfulæ¶æ„èƒŒåçš„æ¦‚å¿µã€‚RESTfulæ¶æ„ä¸ä¼ ç»Ÿçš„RPCã€SOAPç­‰æ–¹å¼åœ¨ç†å¿µä¸Šæœ‰å¾ˆå¤§çš„ä¸åŒï¼Œå¸Œæœ›æœ¬æ–‡èƒ½å¯¹å„ä½ç†è§£RESTæœ‰æ‰€å¸®åŠ©ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"RESTful","slug":"RESTful","permalink":"https://guoshunfa.com/tags/RESTful/"}]},{"title":"Electronæ¡†æ¶ ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Electron/Electronæ¡†æ¶-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.298Z","comments":true,"path":"2022/07/Electronæ¡†æ¶-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Electron%E6%A1%86%E6%9E%B6-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"Electron å®˜ç½‘ | Electron ä¸­æ–‡ç½‘ 1. ç®€ä»‹â€‹ Electronæ˜¯ä¸€ä¸ªä½¿ç”¨ JavaScriptã€HTML å’Œ CSS æ„å»ºæ¡Œé¢åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚ åµŒå…¥ Chromium å’Œ Node.js åˆ° äºŒè¿›åˆ¶çš„ Electron å…è®¸æ‚¨ä¿æŒä¸€ä¸ª JavaScript ä»£ç ä»£ç åº“å¹¶åˆ›å»º åœ¨Windowsä¸Šè¿è¡Œçš„è·¨å¹³å°åº”ç”¨ macOSå’ŒLinuxâ€”â€”ä¸éœ€è¦æœ¬åœ°å¼€å‘ ç»éªŒã€‚ 2. å¿«é€Ÿå…¥é—¨æœ¬æŒ‡å—å°†ä¼šé€šè¿‡ä½¿ç”¨Electronåˆ›å»ºä¸€ä¸ªæç®€çš„ Hello World åº”ç”¨ä¸€æ­¥æ­¥çš„å¸¦ä½ äº†è§£ï¼Œè¯¥åº”ç”¨ä¸electron/electron-quick-startç±»ä¼¼ã€‚ é€šè¿‡è¿™ä¸ªæ•™ç¨‹ï¼Œä½ çš„appå°†ä¼šæ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œæ¥å±•ç¤ºåŒ…å«å½“å‰æ­£åœ¨è¿è¡Œçš„ Chromium, Node.jsä¸ Electronwebç­‰ç‰ˆæœ¬ä¿¡æ¯çš„webç•Œé¢ 2.1. Prerequisitesåœ¨ä½¿ç”¨Electronè¿›è¡Œå¼€å‘ä¹‹å‰ï¼Œæ‚¨éœ€è¦å®‰è£… Node.jsã€‚ æˆ‘ä»¬å»ºè®®æ‚¨ä½¿ç”¨æœ€æ–°çš„LTSç‰ˆæœ¬ã€‚ è¯·ä½¿ç”¨ä¸ºä½ å¹³å°é¢„æ„å»ºçš„ Node.js å®‰è£…å™¨æ¥è¿›è¡Œå®‰è£…ï¼Œ å¦åˆ™ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°ä¸ä¸åŒå¼€å‘å·¥å…·ä¸å…¼å®¹çš„é—®é¢˜ã€‚ è¦æ£€æŸ¥ Node.js æ˜¯å¦æ­£ç¡®å®‰è£…ï¼Œè¯·åœ¨æ‚¨çš„ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 12node -vnpm -v è¿™ä¸¤ä¸ªå‘½ä»¤åº”è¾“å‡ºäº† Node.js å’Œ npm çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚ æ³¨æ„ å› ä¸º Electron å°† Node.js åµŒå…¥åˆ°å…¶äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œä½ åº”ç”¨è¿è¡Œæ—¶çš„ Node.js ç‰ˆæœ¬ä¸ä½ ç³»ç»Ÿä¸­è¿è¡Œçš„ Node.js ç‰ˆæœ¬æ— å…³ã€‚ 2.2. åˆ›å»ºä½ çš„åº”ç”¨ç¨‹åº2.2.1. ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºElectron åº”ç”¨ç¨‹åºéµå¾ªä¸å…¶ä»– Node.js é¡¹ç›®ç›¸åŒçš„ç»“æ„ã€‚ é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å¹¶åˆå§‹åŒ– npm åŒ…ã€‚ npm Yarn 12mkdir my-electron-app &amp;&amp; cd my-electron-appyarn init initåˆå§‹åŒ–å‘½ä»¤ä¼šæç¤ºæ‚¨åœ¨é¡¹ç›®åˆå§‹åŒ–é…ç½®ä¸­è®¾ç½®ä¸€äº›å€¼ ä¸ºæœ¬æ•™ç¨‹çš„ç›®çš„ï¼Œæœ‰å‡ æ¡è§„åˆ™éœ€è¦éµå¾ªï¼š entry point åº”ä¸º main.js. author ä¸ description å¯ä¸ºä»»æ„å€¼ï¼Œä½†å¯¹äºåº”ç”¨æ‰“åŒ…æ˜¯å¿…å¡«é¡¹ã€‚ ä½ çš„ package.json æ–‡ä»¶åº”è¯¥åƒè¿™æ ·ï¼š 12345678&#123; &quot;name&quot;: &quot;my-electron-app&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;Hello World!&quot;, &quot;main&quot;: &quot;main.js&quot;, &quot;author&quot;: &quot;Jane Doe&quot;, &quot;license&quot;: &quot;MIT&quot;&#125; ç„¶åï¼Œå°† electron åŒ…å®‰è£…åˆ°åº”ç”¨çš„å¼€å‘ä¾èµ–ä¸­ã€‚ npm Yarn 1yarn add --dev electron æ³¨æ„ï¼šå¦‚æœæ‚¨åœ¨å®‰è£… Electron æ—¶é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯· å‚è§ é«˜çº§å®‰è£… æŒ‡å—ã€‚ æœ€åï¼Œæ‚¨å¸Œæœ›èƒ½å¤Ÿæ‰§è¡Œ Electron å¦‚ä¸‹æ‰€ç¤ºï¼Œåœ¨æ‚¨çš„ package.jsoné…ç½®æ–‡ä»¶ä¸­çš„scriptså­—æ®µä¸‹å¢åŠ ä¸€æ¡startå‘½ä»¤ï¼š 12345&#123; &quot;scripts&quot;: &#123; &quot;start&quot;: &quot;electron .&quot; &#125;&#125; startå‘½ä»¤èƒ½è®©æ‚¨åœ¨å¼€å‘æ¨¡å¼ä¸‹æ‰“å¼€æ‚¨çš„åº”ç”¨ npm Yarn 12yarn start# couldn&#x27;t auto-convert command æ³¨æ„ï¼šæ­¤è„šæœ¬å°†å‘Šè¯‰ Electron åœ¨æ‚¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ æ­¤æ—¶ï¼Œæ‚¨çš„åº”ç”¨å°†ç«‹å³æŠ›å‡ºä¸€ä¸ªé”™è¯¯æç¤ºæ‚¨å®ƒæ— æ³•æ‰¾åˆ°è¦è¿è¡Œçš„åº”ç”¨ 2.2.2. è¿è¡Œä¸»è¿›ç¨‹ä»»ä½• Electron åº”ç”¨ç¨‹åºçš„å…¥å£éƒ½æ˜¯ main æ–‡ä»¶ã€‚ è¿™ä¸ªæ–‡ä»¶æ§åˆ¶äº†ä¸»è¿›ç¨‹ï¼Œå®ƒè¿è¡Œåœ¨ä¸€ä¸ªå®Œæ•´çš„Node.jsç¯å¢ƒä¸­ï¼Œè´Ÿè´£æ§åˆ¶æ‚¨åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ˜¾ç¤ºåŸç”Ÿç•Œé¢ï¼Œæ‰§è¡Œç‰¹æ®Šæ“ä½œå¹¶ç®¡ç†æ¸²æŸ“å™¨è¿›ç¨‹(ç¨åè¯¦ç»†ä»‹ç»)ã€‚ æ‰§è¡ŒæœŸé—´ï¼ŒElectron å°†ä¾æ®åº”ç”¨ä¸­ package.jsoné…ç½®ä¸‹mainå­—æ®µä¸­é…ç½®çš„å€¼æŸ¥æ‰¾æ­¤æ–‡ä»¶ï¼Œæ‚¨åº”è¯¥å·²åœ¨åº”ç”¨è„šæ‰‹æ¶æ­¥éª¤ä¸­é…ç½®ã€‚ è¦åˆå§‹åŒ–è¿™ä¸ªmainæ–‡ä»¶ï¼Œéœ€è¦åœ¨æ‚¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºmain.jsçš„ç©ºæ–‡ä»¶ã€‚ æ³¨æ„ï¼šå¦‚æœæ‚¨æ­¤æ—¶å†æ¬¡è¿è¡Œstartå‘½ä»¤ï¼Œæ‚¨çš„åº”ç”¨å°†ä¸å†æŠ›å‡ºä»»ä½•é”™è¯¯ï¼ ç„¶è€Œï¼Œå®ƒä¸ä¼šåšä»»ä½•äº‹å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰åœ¨main.jsä¸­æ·»åŠ ä»»ä½•ä»£ç ã€‚ 2.2.3. åˆ›å»ºé¡µé¢åœ¨å¯ä»¥ä¸ºæˆ‘ä»¬çš„åº”ç”¨åˆ›å»ºçª—å£å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºåŠ è½½è¿›è¯¥çª—å£çš„å†…å®¹ã€‚ åœ¨ Electron ä¸­ï¼Œæ¯ä¸ªçª—å£ä¸­æ— è®ºæ˜¯æœ¬åœ°çš„HTMLæ–‡ä»¶è¿˜æ˜¯è¿œç¨‹URLéƒ½å¯ä»¥è¢«åŠ è½½æ˜¾ç¤ºã€‚ æ­¤æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†é‡‡ç”¨æœ¬åœ°HTMLçš„æ–¹å¼ã€‚ åœ¨æ‚¨çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºindex.htmlçš„æ–‡ä»¶ï¼š 12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt; &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &#x27;self&#x27;; script-src &#x27;self&#x27;&quot;&gt; &lt;meta http-equiv=&quot;X-Content-Security-Policy&quot; content=&quot;default-src &#x27;self&#x27;; script-src &#x27;self&#x27;&quot;&gt; &lt;title&gt;Hello World!&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Hello World!&lt;/h1&gt; We are using Node.js &lt;span id=&quot;node-version&quot;&gt;&lt;/span&gt;, Chromium &lt;span id=&quot;chrome-version&quot;&gt;&lt;/span&gt;, and Electron &lt;span id=&quot;electron-version&quot;&gt;&lt;/span&gt;. &lt;/body&gt;&lt;/html&gt; æ³¨æ„ï¼šåœ¨è¿™ä¸ªHTMLæ–‡æœ¬ä¸­ï¼Œæ‚¨ä¼šå‘ç°ä¸»ä½“æ–‡æœ¬ä¸­ä¸¢å¤±äº†ç‰ˆæœ¬ç¼–å·ã€‚ ç¨åæˆ‘ä»¬å°†ä½¿ç”¨ JavaScript åŠ¨æ€æ’å…¥å®ƒä»¬ã€‚ 2.2.4. åœ¨çª—å£ä¸­æ‰“å¼€æ‚¨çš„é¡µé¢ç°åœ¨æ‚¨æœ‰äº†ä¸€ä¸ªé¡µé¢ï¼Œå°†å®ƒåŠ è½½è¿›åº”ç”¨çª—å£ä¸­ã€‚ è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ éœ€è¦ ä¸¤ä¸ªElectronæ¨¡å—ï¼š app æ¨¡å—ï¼Œå®ƒæ§åˆ¶åº”ç”¨ç¨‹åºçš„äº‹ä»¶ç”Ÿå‘½å‘¨æœŸã€‚ BrowserWindow æ¨¡å—ï¼Œå®ƒåˆ›å»ºå’Œç®¡ç†åº”ç”¨ç¨‹åº çª—å£ã€‚ å› ä¸ºä¸»è¿›ç¨‹è¿è¡Œç€Node.jsï¼Œæ‚¨å¯ä»¥åœ¨æ–‡ä»¶å¤´éƒ¨å°†ä»–ä»¬å¯¼å…¥ä½œä¸ºå…¬å…±JSæ¨¡å—ï¼š 1const &#123; app, BrowserWindow &#125; = require(&#x27;electron&#x27;) ç„¶åï¼Œæ·»åŠ ä¸€ä¸ªcreateWindow()æ–¹æ³•æ¥å°†index.htmlåŠ è½½è¿›ä¸€ä¸ªæ–°çš„BrowserWindowå®ä¾‹ã€‚ 12345678function createWindow () &#123; const win = new BrowserWindow(&#123; width: 800, height: 600 &#125;) win.loadFile(&#x27;index.html&#x27;)&#125; æ¥ç€ï¼Œè°ƒç”¨createWindow()å‡½æ•°æ¥æ‰“å¼€æ‚¨çš„çª—å£ã€‚ åœ¨ Electron ä¸­ï¼Œåªæœ‰åœ¨ app æ¨¡å—çš„ ready äº‹ä»¶è¢«æ¿€å‘åæ‰èƒ½åˆ›å»ºæµè§ˆå™¨çª—å£ã€‚ æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ app.whenReady() APIæ¥ç›‘å¬æ­¤äº‹ä»¶ã€‚ åœ¨whenReady()æˆåŠŸåè°ƒç”¨createWindow()ã€‚ 123app.whenReady().then(() =&gt; &#123; createWindow()&#125;) æ³¨æ„ï¼šæ­¤æ—¶ï¼Œæ‚¨çš„ç”µå­åº”ç”¨ç¨‹åºåº”å½“æˆåŠŸ æ‰“å¼€æ˜¾ç¤ºæ‚¨é¡µé¢çš„çª—å£ï¼ 2.2.5. ç®¡ç†çª—å£çš„ç”Ÿå‘½å‘¨æœŸè™½ç„¶ä½ ç°åœ¨å¯ä»¥æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œä½†ä½ è¿˜éœ€è¦ä¸€äº›é¢å¤–çš„æ¨¡æ¿ä»£ç ä½¿å…¶çœ‹èµ·æ¥æ›´åƒæ˜¯å„å¹³å°åŸç”Ÿçš„ã€‚ åº”ç”¨ç¨‹åºçª—å£åœ¨æ¯ä¸ªOSä¸‹æœ‰ä¸åŒçš„è¡Œä¸ºï¼ŒElectronå°†åœ¨appä¸­å®ç°è¿™äº›çº¦å®šçš„è´£ä»»äº¤ç»™å¼€å‘è€…ä»¬ã€‚ ä¸€èˆ¬è€Œè¨€ï¼Œä½ å¯ä»¥ä½¿ç”¨ è¿›ç¨‹ å…¨å±€çš„ platform å±æ€§æ¥ä¸“é—¨ä¸ºæŸäº›æ“ä½œç³»ç»Ÿè¿è¡Œä»£ç ã€‚ 2.2.5.1. å…³é—­æ‰€æœ‰çª—å£æ—¶é€€å‡ºåº”ç”¨ (Windows &amp; Linux)åœ¨Windowså’ŒLinuxä¸Šï¼Œå…³é—­æ‰€æœ‰çª—å£é€šå¸¸ä¼šå®Œå…¨é€€å‡ºä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚ To implement this, listen for the app moduleâ€™s &#39;window-all-closed&#39; event, and call app.quit() if the user is not on macOS (darwin). 123app.on(&#x27;window-all-closed&#x27;, function () &#123; if (process.platform !== &#x27;darwin&#x27;) app.quit()&#125;) 2.2.5.2. å¦‚æœæ²¡æœ‰çª—å£æ‰“å¼€åˆ™æ‰“å¼€ä¸€ä¸ªçª—å£ (macOS)å½“ Linux å’Œ Windows åº”ç”¨åœ¨æ²¡æœ‰çª—å£æ‰“å¼€æ—¶é€€å‡ºäº†ï¼ŒmacOS åº”ç”¨é€šå¸¸å³ä½¿åœ¨æ²¡æœ‰æ‰“å¼€ä»»ä½•çª—å£çš„æƒ…å†µä¸‹ä¹Ÿç»§ç»­è¿è¡Œï¼Œå¹¶ä¸”åœ¨æ²¡æœ‰çª—å£å¯ç”¨çš„æƒ…å†µä¸‹æ¿€æ´»åº”ç”¨æ—¶ä¼šæ‰“å¼€æ–°çš„çª—å£ã€‚ ä¸ºäº†å®ç°è¿™ä¸€ç‰¹æ€§ï¼Œç›‘å¬ app æ¨¡å—çš„ activate äº‹ä»¶ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•æµè§ˆå™¨çª—å£æ˜¯æ‰“å¼€çš„ï¼Œåˆ™è°ƒç”¨ createWindow() æ–¹æ³•ã€‚ å› ä¸ºçª—å£æ— æ³•åœ¨ ready äº‹ä»¶å‰åˆ›å»ºï¼Œä½ åº”å½“åœ¨ä½ çš„åº”ç”¨åˆå§‹åŒ–åä»…ç›‘å¬ activate äº‹ä»¶ã€‚ é€šè¿‡åœ¨æ‚¨ç°æœ‰çš„ whenReady() å›è°ƒä¸­é™„ä¸Šæ‚¨çš„äº‹ä»¶ç›‘å¬å™¨æ¥å®Œæˆè¿™ä¸ªæ“ä½œã€‚ 1234567app.whenReady().then(() =&gt; &#123; createWindow() app.on(&#x27;activate&#x27;, function () &#123; if (BrowserWindow.getAllWindows().length === 0) createWindow() &#125;)&#125;) æ³¨æ„ï¼šæ­¤æ—¶ï¼Œæ‚¨çš„çª—å£æ§ä»¶åº”åŠŸèƒ½é½å…¨ï¼ 2.2.6. é€šè¿‡é¢„åŠ è½½è„šæœ¬ä»æ¸²æŸ“å™¨è®¿é—®Node.jsã€‚ç°åœ¨ï¼Œæœ€åè¦åšçš„æ˜¯è¾“å‡ºElectronçš„ç‰ˆæœ¬å·å’Œå®ƒçš„ä¾èµ–é¡¹åˆ°ä½ çš„webé¡µé¢ä¸Šã€‚ åœ¨ä¸»è¿›ç¨‹é€šè¿‡Nodeçš„å…¨å±€ process å¯¹è±¡è®¿é—®è¿™ä¸ªä¿¡æ¯æ˜¯å¾®ä¸è¶³é“çš„ã€‚ ç„¶è€Œï¼Œä½ ä¸èƒ½ç›´æ¥åœ¨ä¸»è¿›ç¨‹ä¸­ç¼–è¾‘DOMï¼Œå› ä¸ºå®ƒæ— æ³•è®¿é—®æ¸²æŸ“å™¨ æ–‡æ¡£ ä¸Šä¸‹æ–‡ã€‚ å®ƒä»¬å­˜åœ¨äºå®Œå…¨ä¸åŒçš„è¿›ç¨‹ï¼ æ³¨æ„ï¼šå¦‚æœæ‚¨éœ€è¦æ›´æ·±å…¥åœ°äº†è§£Electronè¿›ç¨‹ï¼Œè¯·å‚é˜… è¿›ç¨‹æ¨¡å‹ æ–‡æ¡£ã€‚ è¿™æ˜¯å°† é¢„åŠ è½½ è„šæœ¬è¿æ¥åˆ°æ¸²æŸ“å™¨æ—¶æ´¾ä¸Šç”¨åœºçš„åœ°æ–¹ã€‚ é¢„åŠ è½½è„šæœ¬åœ¨æ¸²æŸ“å™¨è¿›ç¨‹åŠ è½½ä¹‹å‰åŠ è½½ï¼Œå¹¶æœ‰æƒè®¿é—®ä¸¤ä¸ª æ¸²æŸ“å™¨å…¨å±€ (ä¾‹å¦‚ window å’Œ document) å’Œ Node.js ç¯å¢ƒã€‚ åˆ›å»ºä¸€ä¸ªåä¸º preload.js çš„æ–°è„šæœ¬å¦‚ä¸‹ï¼š 12345678910window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; &#123; const replaceText = (selector, text) =&gt; &#123; const element = document.getElementById(selector) if (element) element.innerText = text &#125; for (const dependency of [&#x27;chrome&#x27;, &#x27;node&#x27;, &#x27;electron&#x27;]) &#123; replaceText(`$&#123;dependency&#125;-version`, process.versions[dependency]) &#125;&#125;) ä¸Šé¢çš„ä»£ç è®¿é—® Node.js process.versions å¯¹è±¡ï¼Œå¹¶è¿è¡Œä¸€ä¸ªåŸºæœ¬çš„ replaceText è¾…åŠ©å‡½æ•°å°†ç‰ˆæœ¬å·æ’å…¥åˆ° HTML æ–‡æ¡£ä¸­ã€‚ è¦å°†æ­¤è„šæœ¬é™„åŠ åˆ°æ¸²æŸ“å™¨æµç¨‹ï¼Œè¯·åœ¨ä½ ç°æœ‰çš„ BrowserWindow æ„é€ å™¨ä¸­å°†è·¯å¾„ä¸­çš„é¢„åŠ è½½è„šæœ¬ä¼ å…¥ webPreferences.preload é€‰é¡¹ã€‚ 12345678910111213141516// åœ¨æ–‡ä»¶å¤´éƒ¨å¼•å…¥ Node.js ä¸­çš„ path æ¨¡å—const path = require(&#x27;path&#x27;)// ä¿®æ”¹ç°æœ‰çš„ createWindow() å‡½æ•°function createWindow () &#123; const win = new BrowserWindow(&#123; width: 800, height: 600, webPreferences: &#123; preload: path.join(__dirname, &#x27;preload.js&#x27;) &#125; &#125;) win.loadFile(&#x27;index.html&#x27;)&#125;// ... è¿™é‡Œä½¿ç”¨äº†ä¸¤ä¸ªNode.jsæ¦‚å¿µï¼š __dirname å­—ç¬¦ä¸²æŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œè„šæœ¬çš„è·¯å¾„ (åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒæŒ‡å‘ä½ çš„é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹)ã€‚ path.join API å°†å¤šä¸ªè·¯å¾„è”ç»“åœ¨ä¸€èµ·ï¼Œåˆ›å»ºä¸€ä¸ªè·¨å¹³å°çš„è·¯å¾„å­—ç¬¦ä¸²ã€‚ æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç›¸å¯¹å½“å‰æ­£åœ¨æ‰§è¡ŒJavaScriptæ–‡ä»¶çš„è·¯å¾„ï¼Œè¿™æ ·æ‚¨çš„ç›¸å¯¹è·¯å¾„å°†åœ¨å¼€å‘æ¨¡å¼å’Œæ‰“åŒ…æ¨¡å¼ä¸­éƒ½å°†æœ‰æ•ˆã€‚ 2.2.7. é¢å¤–ï¼šå°†åŠŸèƒ½æ·»åŠ åˆ°æ‚¨çš„ç½‘é¡µå†…å®¹æ­¤åˆ»ï¼Œæ‚¨å¯èƒ½æƒ³çŸ¥é“å¦‚ä½•ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæ·»åŠ æ›´å¤šåŠŸèƒ½ã€‚ å¯¹äºä¸æ‚¨çš„ç½‘é¡µå†…å®¹çš„ä»»ä½•äº¤äº’ï¼Œæ‚¨æƒ³è¦å°†è„šæœ¬æ·»åŠ åˆ°æ‚¨çš„æ¸²æŸ“å™¨è¿›ç¨‹ä¸­ã€‚ ç”±äºæ¸²æŸ“å™¨è¿è¡Œåœ¨æ­£å¸¸çš„ Web ç¯å¢ƒä¸­ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨ index.html æ–‡ä»¶å…³é—­ &lt;/body&gt; æ ‡ç­¾ä¹‹å‰æ·»åŠ ä¸€ä¸ª &lt;script&gt; æ ‡ç­¾ï¼Œæ¥åŒ…æ‹¬æ‚¨æƒ³è¦çš„ä»»æ„è„šæœ¬ï¼š 1&lt;script src=&quot;./renderer.js&quot;&gt;&lt;/script&gt; å¤åˆ¶ ç„¶åï¼Œrenderer.js ä¸­åŒ…å«çš„ä»£ç å¯ä»¥ä½¿ç”¨ä¸å…¸å‹å‰ç«¯å¼€å‘ç›¸åŒçš„ JavaScript API å’Œå·¥å…·ï¼Œä¾‹å¦‚ä½¿ç”¨ webpack æ¥æ†ç»‘å’Œç¼©å°æ‚¨çš„ä»£ç æˆ–ä½¿ç”¨ React æ¥ç®¡ç†æ‚¨çš„ç”¨æˆ·ç•Œé¢ã€‚ 2.2.8. å›é¡¾å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œæ‚¨åº”è¯¥æœ‰ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„Electronç¨‹åºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// main.js// æ§åˆ¶åº”ç”¨ç”Ÿå‘½å‘¨æœŸå’Œåˆ›å»ºåŸç”Ÿæµè§ˆå™¨çª—å£çš„æ¨¡ç»„const &#123; app, BrowserWindow &#125; = require(&#x27;electron&#x27;)const path = require(&#x27;path&#x27;)function createWindow () &#123; // åˆ›å»ºæµè§ˆå™¨çª—å£ const mainWindow = new BrowserWindow(&#123; width: 800, height: 600, webPreferences: &#123; preload: path.join(__dirname, &#x27;preload.js&#x27;) &#125; &#125;) // åŠ è½½ index.html mainWindow.loadFile(&#x27;index.html&#x27;) // åŠ è½½ url // mainWindow.loadURL(&#x27;https://pandacode.cn&#x27;) // æ‰“å¼€å¼€å‘å·¥å…· // mainWindow.webContents.openDevTools()&#125;// è¿™æ®µç¨‹åºå°†ä¼šåœ¨ Electron ç»“æŸåˆå§‹åŒ–// å’Œåˆ›å»ºæµè§ˆå™¨çª—å£çš„æ—¶å€™è°ƒç”¨// éƒ¨åˆ† API åœ¨ ready äº‹ä»¶è§¦å‘åæ‰èƒ½ä½¿ç”¨ã€‚app.whenReady().then(() =&gt; &#123; createWindow() app.on(&#x27;activate&#x27;, function () &#123; // é€šå¸¸åœ¨ macOS ä¸Šï¼Œå½“ç‚¹å‡» dock ä¸­çš„åº”ç”¨ç¨‹åºå›¾æ ‡æ—¶ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»– // æ‰“å¼€çš„çª—å£ï¼Œé‚£ä¹ˆç¨‹åºä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªçª—å£ã€‚ if (BrowserWindow.getAllWindows().length === 0) createWindow() &#125;)&#125;)// é™¤äº† macOS å¤–ï¼Œå½“æ‰€æœ‰çª—å£éƒ½è¢«å…³é—­çš„æ—¶å€™é€€å‡ºç¨‹åºã€‚ å› æ­¤ï¼Œé€šå¸¸å¯¹ç¨‹åºå’Œå®ƒä»¬åœ¨// ä»»åŠ¡æ ä¸Šçš„å›¾æ ‡æ¥è¯´ï¼Œåº”å½“ä¿æŒæ´»è·ƒçŠ¶æ€ï¼Œç›´åˆ°ç”¨æˆ·ä½¿ç”¨ Cmd + Q é€€å‡ºã€‚app.on(&#x27;window-all-closed&#x27;, function () &#123; if (process.platform !== &#x27;darwin&#x27;) app.quit()&#125;)// åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥åŒ…å«åº”ç”¨ç¨‹åºå‰©ä½™çš„æ‰€æœ‰éƒ¨åˆ†çš„ä»£ç ï¼Œ// ä¹Ÿå¯ä»¥æ‹†åˆ†æˆå‡ ä¸ªæ–‡ä»¶ï¼Œç„¶åç”¨ require å¯¼å…¥ã€‚ 1234567891011121314// preload.js// æ‰€æœ‰Node.js APIéƒ½å¯ä»¥åœ¨é¢„åŠ è½½è¿‡ç¨‹ä¸­ä½¿ç”¨ã€‚// å®ƒæ‹¥æœ‰ä¸Chromeæ‰©å±•ä¸€æ ·çš„æ²™ç›’ã€‚window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; &#123; const replaceText = (selector, text) =&gt; &#123; const element = document.getElementById(selector) if (element) element.innerText = text &#125; for (const dependency of [&#x27;chrome&#x27;, &#x27;node&#x27;, &#x27;electron&#x27;]) &#123; replaceText(`$&#123;dependency&#125;-version`, process.versions[dependency]) &#125;&#125;) 123456789101112131415161718192021&lt;!--index.html--&gt;&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;!-- https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP --&gt; &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &#x27;self&#x27;; script-src &#x27;self&#x27;&quot;&gt; &lt;meta http-equiv=&quot;X-Content-Security-Policy&quot; content=&quot;default-src &#x27;self&#x27;; script-src &#x27;self&#x27;&quot;&gt; &lt;title&gt;Hello World!&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Hello World!&lt;/h1&gt; We are using Node.js &lt;span id=&quot;node-version&quot;&gt;&lt;/span&gt;, Chromium &lt;span id=&quot;chrome-version&quot;&gt;&lt;/span&gt;, and Electron &lt;span id=&quot;electron-version&quot;&gt;&lt;/span&gt;. &lt;ï¼-- æ‚¨ä¹Ÿå¯ä»¥æ­¤è¿›ç¨‹ä¸­è¿è¡Œå…¶ä»–æ–‡ä»¶ --&gt; &lt;script src=&quot;./renderer.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; æ€»ç»“æˆ‘ä»¬æ‰€åšçš„æ‰€æœ‰æ­¥éª¤ï¼š æˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªNode.jsç¨‹åºï¼Œå¹¶å°†Electronæ·»åŠ ä¸ºä¾èµ–ã€‚ æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª main.js è„šæœ¬æ¥è¿è¡Œæˆ‘ä»¬çš„ä¸»è¦è¿›ç¨‹ï¼Œå®ƒæ§åˆ¶æˆ‘ä»¬çš„åº”ç”¨ç¨‹åº å¹¶ä¸”åœ¨ Node.js ç¯å¢ƒä¸­è¿è¡Œã€‚ åœ¨æ­¤è„šæœ¬ä¸­ï¼Œ æˆ‘ä»¬ä½¿ç”¨ Electron çš„ app å’Œ BrowserWindow æ¨¡å—æ¥åˆ›å»ºä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œåœ¨ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹(æ¸²æŸ“å™¨)ä¸­æ˜¾ç¤ºç½‘é¡µå†…å®¹ã€‚ ä¸ºäº†è®¿é—®æ¸²æŸ“å™¨ä¸­çš„Node.jsçš„æŸäº›åŠŸèƒ½ï¼Œæˆ‘ä»¬åœ¨ BrowserWindow çš„æ„é€ å‡½æ•°ä¸Šé™„åŠ äº†ä¸€ä¸ªé¢„åŠ è½½è„šæœ¬ã€‚ 3. å®‰è£…æŒ‡å¯¼å®‰è£…æ·˜å®é•œåƒ 1npm install cnpm -g --registry=http://registry.npm.taobao.org ä½¿ç”¨cnpmå®‰è£…electron 1cnpm install electron -g ä½¿ç”¨cnpmå®‰è£…electron-packager 1cnpm install electron-packager -g","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Electron","slug":"Electron","permalink":"https://guoshunfa.com/tags/Electron/"}]},{"title":"Electronæ¡†æ¶ æ‰“åŒ…","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Electron/Electronæ¡†æ¶æ‰“åŒ…","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.298Z","comments":true,"path":"2022/07/Electronæ¡†æ¶æ‰“åŒ…/","link":"","permalink":"https://guoshunfa.com/2022/07/Electron%E6%A1%86%E6%9E%B6%E6%89%93%E5%8C%85/","excerpt":"","text":"1. electron-packager æ‰“åŒ…å‘½ä»¤è¯´æ˜ï¼š 1electron-packager &lt;location of project&gt; &lt;name of project&gt; &lt;platform&gt; &lt;architecture&gt; &lt;electron version&gt; &lt;optional options&gt; location of projectï¼šé¡¹ç›®æ‰€åœ¨è·¯å¾„ name of projectï¼šæ‰“åŒ…çš„é¡¹ç›®åå­— platformï¼šç¡®å®šäº†ä½ è¦æ„å»ºå“ªä¸ªå¹³å°çš„åº”ç”¨ï¼ˆWindowsã€Mac è¿˜æ˜¯ Linuxï¼‰ï¼Œå¯ç”¨å€¼ï¼šdarwinã€linuxã€masã€win32ã€‚ architectureï¼šå†³å®šäº†ä½¿ç”¨ x86 è¿˜æ˜¯ x64 è¿˜æ˜¯ä¸¤ä¸ªæ¶æ„éƒ½ç”¨ ï¼ˆx64,ia32ï¼‰ electron versionï¼šelectron çš„ç‰ˆæœ¬ optional optionsï¼šå¯é€‰é€‰é¡¹ï¼ˆ â€“overwriteè¦†ç›–åŸæ–‡ä»¶ï¼‰ | â€“out è¾“å‡ºç›®å½• | â€“extra-resource éœ€è¦æ‰“åŒ…çš„å¤–éƒ¨èµ„æº overwriteï¼šå·²æœ‰æ‰“åŒ…æ–‡ä»¶åˆ™æ›¿æ¢ã€‚ ä¾‹ï¼š 1electron-packager ./ pandacode --platform=mas --arch=x64 --overwrite","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Electron","slug":"Electron","permalink":"https://guoshunfa.com/tags/Electron/"}]},{"title":"Mavenæ¡†æ¶ pomæ–‡ä»¶è¯¦è§£","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Maven/Mavenæ¡†æ¶-pomæ–‡ä»¶è¯¦è§£","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.298Z","comments":true,"path":"2022/07/Mavenæ¡†æ¶-pomæ–‡ä»¶è¯¦è§£/","link":"","permalink":"https://guoshunfa.com/2022/07/Maven%E6%A1%86%E6%9E%B6-pom%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"mavenä»“åº“å®˜ç½‘ 1. ç®€å•ä»‹ç»12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;!-- pomæ¨¡å‹ç‰ˆæœ¬ --&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;!-- é¡¹ç›®ä¿¡æ¯ --&gt; &lt;groupId&gt;com.panda&lt;/groupId&gt;&lt;!-- åŒ…å --&gt; &lt;artifactId&gt;pandacode&lt;/artifactId&gt;&lt;!-- é¡¹ç›®å --&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&lt;!-- ç‰ˆæœ¬ --&gt; &lt;packaging&gt;jar&lt;/packaging&gt;&lt;!-- æ‰“åŒ…æ–¹å¼ ï¼ˆpom,war,jarï¼‰ --&gt; &lt;name&gt;springboot&lt;/name&gt;&lt;!-- é¡¹ç›®çš„åç§°ï¼Œ Maven äº§ç”Ÿçš„æ–‡æ¡£ç”¨ --&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&lt;!-- é¡¹ç›®çš„æè¿°, Maven äº§ç”Ÿçš„æ–‡æ¡£ç”¨ --&gt; &lt;!-- çˆ¶çº§é¡¹ç›® --&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.7.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;!-- å±æ€§è®¾ç½® --&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;&lt;!-- ç¼–è¯‘å­—ç¬¦ç¼–ç ä¸ºutf-8 --&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;&lt;!-- è¾“å‡ºå­—ç¬¦ç¼–ç ä¸ºUTF-8 --&gt; &lt;java.version&gt;1.8&lt;/java.version&gt;&lt;!-- jdKç‰ˆæœ¬ --&gt; &lt;/properties&gt; &lt;!-- ä¾èµ–å…³ç³» --&gt; &lt;dependencies&gt; &lt;!-- æµ‹è¯• --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- springmvc --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- jpa(æŒä¹…å±‚) --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- mysql(æ•°æ®åº“) --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;!-- ç»Ÿä¸€ç‰ˆæœ¬æ§åˆ¶ --&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; &lt;!-- ç¼–è¯‘ --&gt; &lt;build&gt; &lt;!-- æ’ä»¶ --&gt; &lt;plugins&gt; &lt;!-- mavenæ’ä»¶ --&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; 2. è¯¦ç»†æè¿°2.1. dependencyManagementèŠ‚ç‚¹ dependencyManagement åº”ç”¨åœºæ™¯ â€‹ Maven ä½¿ç”¨dependencyManagement å…ƒç´ æ¥æä¾›äº†ä¸€ç§ç®¡ç†ä¾èµ–ç‰ˆæœ¬å·çš„æ–¹å¼,é€šå¸¸ä¼šåœ¨ä¸€ä¸ªç»„ç»‡æˆ–è€…é¡¹ç›®çš„æœ€é¡¶å±‚çš„POMä¸­çœ‹åˆ°dependencyManagement å…ƒç´ ï¼Œåœ¨pom.xml ä¸­ä½¿ç”¨dependencyManagement å…ƒç´ èƒ½è®©æ‰€æœ‰å­é¡¹ç›®ä¸­å¼•ç”¨ä¸€ä¸ªä¾èµ–è€Œä¸ç”¨æ˜¾å¼çš„åˆ—å‡ºç‰ˆæœ¬å·ã€‚Maven ä¼šæ²¿ç€çˆ¶å­å±‚æ¬¡å‘ä¸Šèµ°ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæ‹¥æœ‰dependencyManagement å…ƒç´ çš„é¡¹ç›®ï¼Œç„¶åå®ƒå°±ä¼šä½¿ç”¨åœ¨è¿™ä¸ªdependencyManagement å…ƒç´ ä¸­æŒ‡å®šçš„ç‰ˆæœ¬å·ã€‚ â€‹ åœ¨ pom ä¸­æŒ‡æ˜ dependency management å…ƒç´ çš„æ–¹å¼ maven ç»“åˆé¡¹ç›®ç»§æ‰¿æ¥ç®¡ç†ä¾èµ–ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼šå¦‚æœæœ‰å¤šä¸ªå­é¡¹ç›®éƒ½å¼•ç”¨ä¾èµ–é¡¹çš„åŒä¸€ç‰ˆæœ¬ï¼Œç¡®ä¿åº”ç”¨çš„å„ä¸ªé¡¹ç›®çš„ä¾èµ–é¡¹å’Œç‰ˆæœ¬ä¸€è‡´ï¼Œæ‰èƒ½ä¿è¯æµ‹è¯•çš„å’Œå‘å¸ƒçš„æ˜¯ç›¸åŒçš„æˆæœï¼Œå› æ­¤ï¼Œåº”åœ¨é¡¶å±‚çš„ pom ä¸­å®šä¹‰å…±åŒçš„ä¾èµ–å…³ç³»ã€‚åŒæ—¶å¯ä»¥é¿å…åœ¨æ¯ä¸ªä½¿ç”¨çš„å­é¡¹ç›®é‡Œéƒ½å£°æ˜ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œè¿™æ ·å½“æƒ³å‡çº§æˆ–åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œåªéœ€è¦åœ¨é¡¶å±‚çˆ¶å®¹å™¨é‡Œæ›´æ–°ï¼Œè€Œä¸éœ€è¦ä¸€ä¸ªä¸€ä¸ªå­é¡¹ç›®çš„ä¿®æ”¹ï¼›å¦å¤–å¦‚æœæŸä¸ªå­é¡¹ç›®éœ€è¦å¦å¤–çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œåªéœ€è¦åœ¨dependenciesä¸­å£°æ˜versionå³å¯ã€‚ dependencyManagementå’Œdependenciesçš„åŒºåˆ« dependenciesï¼Œå³ä½¿åœ¨å­é¡¹ç›®ä¸­ä¸å†™è¯¥ä¾èµ–é¡¹ï¼Œé‚£ä¹ˆå­é¡¹ç›®ä»ç„¶ä¼šä»çˆ¶é¡¹ç›®ä¸­ç»§æ‰¿è¯¥ä¾èµ–é¡¹ã€‚dependencyManagementé‡Œåªæ˜¯å£°æ˜ä¾èµ–ï¼Œå¹¶ä¸å®ç°å¼•å…¥ï¼Œå› æ­¤å­é¡¹ç›®éœ€è¦æ˜¾å¼çš„å£°æ˜éœ€è¦ç”¨çš„ä¾èµ–ã€‚å¦‚æœåœ¨å­é¡¹ç›®ä¸­ä¸å†™è¯¥ä¾èµ–é¡¹ï¼Œé‚£ä¹ˆå­é¡¹ç›®ä¸­æ˜¯ä¸ä¼šä»çˆ¶é¡¹ç›®ç»§æ‰¿è¯¥ä¾èµ–é¡¹çš„ï¼›åªæœ‰åœ¨å­é¡¹ç›®ä¸­å†™äº†è¯¥ä¾èµ–é¡¹ï¼Œå¹¶ä¸”æ²¡æœ‰æŒ‡å®šå…·ä½“ç‰ˆæœ¬ï¼Œæ‰ä¼šä»çˆ¶é¡¹ç›®ä¸­ç»§æ‰¿è¯¥é¡¹ï¼Œå¹¶ä¸”version å’Œ scope éƒ½è¯»å–è‡ªçˆ¶pomã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"https://guoshunfa.com/tags/Maven/"},{"name":"pom.xml","slug":"pom-xml","permalink":"https://guoshunfa.com/tags/pom-xml/"}]},{"title":"Mavenæ¡†æ¶ Nexusç§æœé…ç½®","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Maven/Mavenæ¡†æ¶Nexusç§æœé…ç½®","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.299Z","comments":true,"path":"2022/07/Mavenæ¡†æ¶Nexusç§æœé…ç½®/","link":"","permalink":"https://guoshunfa.com/2022/07/Maven%E6%A1%86%E6%9E%B6Nexus%E7%A7%81%E6%9C%8D%E9%85%8D%E7%BD%AE/","excerpt":"","text":"Nexus å®‰è£…è¯·æŸ¥çœ‹ è¿›å…¥ 1. ä¸Šä¼ é¡¹ç›®åˆ°ç§æœä¸Šå»1.1. é…ç½®setting.xmldemo: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.2.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.2.0 http://maven.apache.org/xsd/settings-1.2.0.xsd&quot;&gt; &lt;!-- æœ¬åœ°ä»“åº“çš„è·¯å¾„ã€‚é»˜è®¤å€¼ä¸º$&#123;user.home&#125;/.m2/repositoryã€‚ --&gt; &lt;localRepository&gt;/Library/work/java/apache-maven-3.6.3/resource&lt;/localRepository&gt; &lt;servers&gt; &lt;server&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;username&gt;admin&lt;/username&gt; &lt;password&gt;admin123&lt;/password&gt; &lt;/server&gt; &lt;server&gt; &lt;id&gt;releases&lt;/id&gt; &lt;username&gt;admin&lt;/username&gt; &lt;password&gt;admin123&lt;/password&gt; &lt;/server&gt; &lt;server&gt; &lt;id&gt;snapshots&lt;/id&gt; &lt;username&gt;admin&lt;/username&gt; &lt;password&gt;admin123&lt;/password&gt; &lt;/server&gt; &lt;server&gt; &lt;id&gt;thirdparty&lt;/id&gt; &lt;username&gt;admin&lt;/username&gt; &lt;password&gt;admin123&lt;/password&gt; &lt;/server&gt; &lt;/servers&gt; &lt;mirrors&gt; &lt;mirror&gt; &lt;!--è¯¥é•œåƒçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚idç”¨æ¥åŒºåˆ†ä¸åŒçš„mirrorå…ƒç´ ã€‚ mavenä¼šæ ¹æ®idå¯¹é•œåƒæ’åºï¼Œå½“å‰ä¸€ä¸ªé•œåƒä¸å¯ç”¨æ—¶ï¼Œè¿æ¥åä¸€ä¸ªé•œåƒ --&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; &lt;url&gt;http://127.0.0.1:8081/nexus/content/groups/public/&lt;/url&gt; &lt;/mirror&gt; &lt;mirror&gt; &lt;id&gt;repo2&lt;/id&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt; &lt;url&gt;https://repo1.maven.org/maven2/&lt;/url&gt; &lt;/mirror&gt; &lt;/mirrors&gt; &lt;profiles&gt; &lt;profile&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;repositories&gt; &lt;repository&gt; &lt;id&gt;maven-public&lt;/id&gt; &lt;url&gt;http://127.0.0.1:8081/nexus/content/groups/public/&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/repository&gt; &lt;/repositories&gt; &lt;pluginRepositories&gt; &lt;pluginRepository&gt; &lt;id&gt;maven-public&lt;/id&gt; &lt;url&gt;http://127.0.0.1:8081/nexus/content/groups/public/&lt;/url&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;snapshots&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/pluginRepository&gt; &lt;/pluginRepositories&gt; &lt;/profile&gt; &lt;/profiles&gt; &lt;activeProfiles&gt; &lt;activeProfile&gt;nexus&lt;/activeProfile&gt; &lt;/activeProfiles&gt;&lt;/settings&gt; 1.2. é…ç½®é¡¹ç›®pom.xml123456789101112&lt;distributionManagement&gt; &lt;repository&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;name&gt;Releases&lt;/name&gt; &lt;url&gt;http://127.0.0.1:8081/nexus/content/repositories/releases/&lt;/url&gt; &lt;/repository&gt; &lt;snapshotRepository&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;name&gt;Snapshot&lt;/name&gt; &lt;url&gt;http://127.0.0.1:8081/nexus/content/repositories/snapshots/&lt;/url&gt; &lt;/snapshotRepository&gt;&lt;/distributionManagement&gt; 1.3. ä¸Šä¼ deploy mavené¡¹ç›®å³å¯ã€‚ å‚è€ƒèµ„æ–™ Mavenç§æœNexusçš„æ­å»ºå’Œä½¿ç”¨","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"https://guoshunfa.com/tags/Maven/"},{"name":"Nexus","slug":"Nexus","permalink":"https://guoshunfa.com/tags/Nexus/"}]},{"title":"Mavenæ¡†æ¶ settingsè¯¦è§£","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Maven/Mavenæ¡†æ¶settingsè¯¦è§£","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.299Z","comments":true,"path":"2022/07/Mavenæ¡†æ¶settingsè¯¦è§£/","link":"","permalink":"https://guoshunfa.com/2022/07/Maven%E6%A1%86%E6%9E%B6settings%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"1. æ¦‚è¿°1.1. ä½œç”¨ç”¨æ¥è®¾ç½®Mavenå‚æ•°çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨Mavenä¸­æä¾›äº†ä¸€ä¸ªsettings.xmlæ–‡ä»¶æ¥å®šä¹‰Mavençš„å…¨å±€é…ç½®ä¿¡æ¯ã€‚æˆ‘ä»¬é€šè¿‡è¿™ä¸ªæ–‡ä»¶æ¥å®šä¹‰æœ¬åœ°ä»“åº“ã€è¿œç¨‹ä»“åº“å’Œè”ç½‘ä½¿ç”¨çš„ä»£ç†ä¿¡æ¯ç­‰é…ç½®ã€‚ 1.2. æ–‡ä»¶ä½ç½®ä¸€èˆ¬å­˜åœ¨äºä¸¤ä¸ªä½ç½®ï¼š å…¨å±€é…ç½®ï¼šMavençš„å®‰è£…ç›®å½•çš„confå­ç›®å½•ä¸‹é¢ï¼ˆ$&#123;M2_HOME&#125;/conf/settings.xmlï¼‰ç”¨æˆ·ç›®å½•çš„çš„.m2å­ç›®å½•ä¸‹é¢ï¼ˆ&#123;user.home&#125;/.m2/settings.xmlï¼‰ã€‚å½“å‰ç”¨æˆ·çš„ç‹¬äº«é…ç½®ã€‚ å½“æˆ‘ä»¬ä½¿ç”¨ä¸€äº›å·¥å…·æ—¶ï¼ˆIDEAï¼‰ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šsettings.xmlæ–‡ä»¶çš„ä½ç½®ã€‚ 1.3. é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§å±€éƒ¨é…ç½®é«˜äºå…¨å±€é…ç½® é…ç½®ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼špom.xml&gt; user settings &gt; global settingså¦‚æœè¿™äº›æ–‡ä»¶åŒæ—¶å­˜åœ¨ï¼Œåœ¨åº”ç”¨é…ç½®æ—¶ï¼Œä¼šåˆå¹¶å®ƒä»¬çš„å†…å®¹ï¼Œå¦‚æœæœ‰é‡å¤çš„é…ç½®ï¼Œä¼˜å…ˆçº§é«˜çš„é…ç½®ä¼šè¦†ç›–ä¼˜å…ˆçº§ä½çš„ã€‚ 1.4. Mavenä¾èµ–æœç´¢é¡ºåºå½“æˆ‘ä»¬æ‰§è¡ŒMavenå‘½ä»¤æ—¶ï¼Œmavenå¼€å§‹æŒ‰ç…§ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾ä¾èµ–åº“ï¼š æ­¥éª¤ 1ï¼šåœ¨æœ¬åœ°ä»“åº“æœç´¢ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œæ‰§è¡Œæ­¥éª¤ 2ï¼Œæ‰¾åˆ°äº†åˆ™æ‰§è¡Œå…¶ä»–æ“ä½œ æ­¥éª¤ 2ï¼šåœ¨ä¸­å¤®ä»“åº“æœç´¢ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¿œç¨‹ä»“åº“å·²ç»è®¾ç½®ï¼Œåˆ™æ‰§è¡Œæ­¥éª¤ 4ï¼Œå¦‚æœæ‰¾åˆ°äº†åˆ™ä¸‹è½½åˆ°æœ¬åœ°ä»“åº“ä¸­å¼•ç”¨ã€‚ æ­¥éª¤ 3ï¼šå¦‚æœè¿œç¨‹ä»“åº“æ²¡æœ‰è¢«è®¾ç½®, å°†ç®€å•çš„åœæ»å¤„ç†å¹¶æŠ›å‡ºé”™è¯¯ï¼ˆæ— æ³•æ‰¾åˆ°ä¾èµ–çš„æ–‡ä»¶ï¼‰ã€‚ æ­¥éª¤ 4ï¼šåœ¨ä¸€ä¸ªæˆ–å¤šä¸ªè¿œç¨‹ä»“åº“ä¸­æœç´¢ä¾èµ–çš„æ–‡ä»¶, å¦‚æœæ‰¾åˆ°åˆ™ä¸‹è½½åˆ°æœ¬åœ°ä»“åº“å·²è¢«å°†æ¥å¼•ç”¨, å¦åˆ™å°†åœæ­¢å¤„ç†å¹¶æŠ›å‡ºé”™è¯¯ï¼ˆæ— æ³•æ‰¾åˆ°ä¾èµ–çš„æ–‡ä»¶ï¼‰ã€‚ 2. å…ƒç´ è¯¦è§£2.1. é¡¶çº§å…ƒç´ 2.1.1. LocalRepository12&lt;!-- ä½œç”¨ï¼šè¯¥å€¼è¡¨ç¤ºæ„å»ºç³»ç»Ÿæœ¬åœ°ä»“åº“çš„è·¯å¾„ã€‚ é»˜è®¤å€¼ï¼š$&#123;user.home&#125;/.m2/repository --&gt;&lt;localRepository&gt;$&#123;user.home&#125;/.m2/repository&lt;/localRepository&gt; 2.1.2. InteractiveMode12&lt;!-- ä½œç”¨ï¼šè¡¨ç¤ºmavenæ˜¯å¦éœ€è¦å’Œç”¨æˆ·äº¤äº’ä»¥è·å¾—è¾“å…¥ã€‚ é»˜è®¤å€¼ï¼štrue --&gt;&lt;interactiveMode&gt;true&lt;/interactiveMode&gt; 2.1.3. offline12&lt;!-- ä½œç”¨ï¼šè¡¨ç¤ºmavenæ˜¯å¦éœ€è¦åœ¨ç¦»çº¿æ¨¡å¼ä¸‹è¿è¡Œã€‚ é»˜è®¤å€¼ï¼šfalse å½“ç”±äºç½‘ç»œè®¾ç½®åŸå› æˆ–è€…å®‰å…¨å› ç´ ï¼Œæ„å»ºæœåŠ¡å™¨ä¸èƒ½è¿æ¥è¿œç¨‹ä»“åº“çš„æ—¶å€™ï¼Œè¯¥é…ç½®å°±ååˆ†æœ‰ç”¨ã€‚ --&gt;&lt;offline&gt;false&lt;/offline&gt; 2.1.4. pluginGroups12345678&lt;!-- ä½œç”¨ï¼šå½“æ’ä»¶çš„ç»„ç»‡idï¼ˆgroupIdï¼‰æ²¡æœ‰æ˜¾å¼æä¾›æ—¶ï¼Œä¾›æœå¯»æ’ä»¶groupIdçš„åˆ—è¡¨ã€‚ é»˜è®¤å€¼ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œmavenä¼šè‡ªåŠ¨æŠŠorg.apache.maven.pluginså’Œorg.codehaus.mojoæ·»åŠ åˆ°pluginGroupsä¸‹ã€‚--&gt;&lt;pluginGroups&gt; &lt;pluginGroup&gt;com.your1.plugins&lt;/pluginGroup&gt; &lt;pluginGroup&gt;com.your2.plugins&lt;/pluginGroup&gt;&lt;/pluginGroups&gt; 2.1.5. proxies1234567891011121314151617181920212223&lt;!-- ä½œç”¨ï¼šç”¨æ¥é…ç½®ä¸åŒçš„ä»£ç†, å¤šä»£ç† profiles å¯ä»¥åº”å¯¹ç¬”è®°æœ¬æˆ–ç§»åŠ¨è®¾å¤‡çš„å·¥ä½œç¯å¢ƒ: é€šè¿‡ç®€å•çš„è®¾ç½® profile id å°±å¯ä»¥å¾ˆå®¹æ˜“çš„æ›´æ¢æ•´ä¸ªä»£ç†é…ç½® --&gt;&lt;!-- å¯ä»¥é…ç½®å¤šä¸ª --&gt;&lt;proxies&gt; &lt;!-- ä»£ç†å…ƒç´ åŒ…å«é…ç½®ä»£ç†æ—¶éœ€è¦çš„ä¿¡æ¯ --&gt; &lt;proxy&gt; &lt;!-- ä»£ç†çš„å”¯ä¸€å®šä¹‰ç¬¦, ç”¨æ¥åŒºåˆ†ä¸åŒçš„ä»£ç†å…ƒç´  --&gt; &lt;id&gt;optional&lt;/id&gt; &lt;!-- è¯¥ä»£ç†æ˜¯å¦æ˜¯æ¿€æ´»çš„é‚£ä¸ªã€‚trueåˆ™æ¿€æ´»ä»£ç†ã€‚å½“æˆ‘ä»¬å£°æ˜äº†ä¸€ç»„ä»£ç†, è€ŒæŸä¸ªæ—¶å€™åªéœ€è¦æ¿€æ´»ä¸€ä¸ªä»£ç†çš„æ—¶å€™, è¯¥å…ƒç´ å°±å¯ä»¥æ´¾ä¸Šç”¨å¤„ --&gt; &lt;active&gt;true&lt;/active&gt; &lt;!-- ä»£ç†çš„åè®® --&gt; &lt;protocol&gt;http&lt;/protocol&gt; &lt;!-- ä»£ç†æœåŠ¡å™¨è®¤è¯çš„ç™»å½•å --&gt; &lt;username&gt;proxyuser&lt;/username&gt; &lt;!-- ä»£ç†æœåŠ¡å™¨è®¤è¯ç™»å½•å¯†ç  --&gt; &lt;password&gt;proxypass&lt;/password&gt; &lt;!-- ä»£ç†çš„ä¸»æœºå --&gt; &lt;host&gt;proxy.host.net&lt;/host&gt; &lt;!-- ä»£ç†çš„ç«¯å£ --&gt; &lt;port&gt;80&lt;/port&gt; &lt;!-- ä¸è¯¥è¢«ä»£ç†çš„ä¸»æœºååˆ—è¡¨ã€‚è¯¥åˆ—è¡¨çš„åˆ†éš”ç¬¦ç”±ä»£ç†æœåŠ¡å™¨æŒ‡å®šï¼›ä¾‹å­ä¸­ä½¿ç”¨äº†ç«–çº¿åˆ†éš”ç¬¦, ä½¿ç”¨é€—å·åˆ†éš”ä¹Ÿå¾ˆå¸¸è§ --&gt; &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt; &lt;/proxy&gt;&lt;/proxies&gt; 2.1.6. servers123456789101112131415161718&lt;!-- ä½œç”¨ï¼šè¿›è¡Œè¿œç¨‹æœåŠ¡å™¨è®¿é—®æ—¶æ‰€éœ€çš„æˆæƒé…ç½®ä¿¡æ¯ã€‚é€šè¿‡ç³»ç»Ÿå”¯ä¸€çš„ server id è¿›è¡Œå”¯ä¸€å…³è” æ³¨æ„ï¼šæ‚¨åº”è¯¥æŒ‡å®šç”¨æˆ·å/å¯†ç æˆ–ç§é’¥/å¯†ç ï¼Œå› ä¸ºè¿™äº›é…å¯¹æ˜¯ä¸€èµ·ä½¿ç”¨ã€‚ --&gt;&lt;servers&gt; &lt;server&gt; &lt;!-- æœåŠ¡çš„å”¯ä¸€å®šä¹‰ç¬¦, ç”¨æ¥åŒºåˆ†ä¸åŒçš„ä»£ç†å…ƒç´  --&gt; &lt;id&gt;deploymentRepo&lt;/id&gt; &lt;!-- é‰´æƒç”¨æˆ·å --&gt; &lt;username&gt;repouser&lt;/username&gt; &lt;!-- é‰´æƒå¯†ç  --&gt; &lt;password&gt;repopwd&lt;/password&gt; &lt;/server&gt; &lt;server&gt; &lt;id&gt;siteServer&lt;/id&gt; &lt;!-- é‰´æƒæ—¶çš„ç§é’¥ä½ç½® --&gt; &lt;privateKey&gt;/path/to/private/key&lt;/privateKey&gt; &lt;!-- é‰´æƒæ—¶çš„ç§é’¥å¯†ç  --&gt; &lt;passphrase&gt;optional; leave empty if not used.&lt;/passphrase&gt; &lt;/server&gt;&lt;/servers&gt; 2.1.7. mirrors12345678910111213141516171819202122232425&lt;!--ä½œç”¨ï¼šç”¨äºæ›¿ä»£æŒ‡å®šè¿œç¨‹ä»“åº“çš„é•œåƒæœåŠ¡å™¨é…ç½®ï¼Œä¾‹å¦‚å½“æ‚¨æ— æ³•è¿æ¥ä¸Šå›½å¤–çš„ä»“åº“æ˜¯, å¯ä»¥æŒ‡å®šè¿æ¥åˆ°å›½å†…çš„é•œåƒæœåŠ¡å™¨ï¼ŒåŒæ—¶è¿˜å¯ä»¥ç¼“è§£é•œåƒä»“åº“çš„å‹åŠ› æ³¨æ„ï¼špom.xml å’Œ setting.xml ä¸­é…ç½®çš„ä»“åº“å’Œé•œåƒä¼˜å…ˆçº§å…³ç³»ï¼ˆ``mirrorä¼˜å…ˆçº§é«˜äºrepository`ï¼‰ repositoryï¼ˆsetting.xmlï¼‰ &lt; repositoryï¼ˆpom.xmlï¼‰ &lt; mirrorï¼ˆsetting.xmlï¼‰ mirroråŒ¹é…é¡ºåºï¼šå¤šä¸ªmirroræŒ‰ç…§idå­—æ¯é¡ºåºè¿›è¡Œæ’åˆ—ï¼Œä¸ç¼–å†™é¡ºåºæ— å…³ åœ¨ç¬¬ä¸€ä¸ªmirroræ‰¾ä¸åˆ°artifactï¼Œä¸ä¼šç»§ç»­æ‰¾ä¸‹ä¸€ä¸ªé•œåƒ åªæœ‰å½“mirroræ— æ³•é“¾æ¥çš„æ—¶å€™ï¼Œæ‰ä¼šå°è¯•æ‰¾ä¸‹ä¸€ä¸ªé•œåƒï¼Œç±»ä¼¼å®¹ç¾å¤‡ä»½--&gt;&lt;mirrors&gt; &lt;mirror&gt; &lt;!--è¯¥é•œåƒçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚idç”¨æ¥åŒºåˆ†ä¸åŒçš„mirrorå…ƒç´ ã€‚ --&gt; &lt;id&gt;mirrorId&lt;/id&gt; &lt;!--ç”¨æ¥è¡¨ç¤ºè¯¥mirroræ˜¯å…³è”çš„å“ªä¸€ä¸ªä»“åº“ï¼Œå…¶å€¼ä¸ºå…¶å…³è”ä»“åº“çš„idã€‚ --&gt; &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt; &lt;!-- é•œåƒåç§°, æ— ç‰¹æ®Šä½œç”¨, å¯è§†ä¸ºç®€è¿° --&gt; &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt; &lt;!-- é•œåƒåœ°å€ --&gt; &lt;url&gt;http://my.repository.com/repo/path&lt;/url&gt; &lt;/mirror&gt; &lt;mirror&gt; &lt;id&gt;aliyunmaven&lt;/id&gt; &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; &lt;name&gt;é˜¿é‡Œäº‘å…¬å…±ä»“åº“&lt;/name&gt; &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt; &lt;/mirror&gt;&lt;/mirrors&gt; mirrorOfé…ç½®è¯­æ³•ï¼š *ï¼šåŒ¹é…æ‰€æœ‰è¿œç¨‹ä»“åº“ã€‚ç›¸å½“äºä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œå®ƒä¼šæ‹¦æˆªè¿œç¨‹ä»“åº“çš„ç›¸å…³è¯·æ±‚ï¼ŒæŠŠè¯·æ±‚é‡Œçš„è¿œç¨‹ä»“åº“åœ°å€ï¼Œé‡å®šå‘åˆ°mirroré‡Œé…ç½®çš„åœ°å€ã€‚ external:* ï¼š åŒ¹é…é™¤ localhostã€ä½¿ç”¨ file:&#x2F;&#x2F; åè®®å¤–çš„æ‰€æœ‰è¿œç¨‹ä»“åº“ repo1,repo2ï¼šåŒ¹é…ä»“åº“ repo1 å’Œ repo2 *,!repo1ï¼š åŒ¹é…æ‰€æœ‰è¿œç¨‹ä»“åº“, repo1 é™¤å¤– 2.1.7. profilesä½œç”¨ï¼šæ„å»ºæ–¹æ³•çš„é…ç½®æ¸…å•, maven å°†æ ¹æ®ä¸åŒç¯å¢ƒå‚æ•°æ¥ä½¿ç”¨è¿™äº›æ„å»ºé…ç½®ã€‚ æ³¨æ„ï¼šsettings.xml ä¸­çš„ profileå…ƒç´ æ˜¯ pom.xmlä¸­ profileå…ƒç´ çš„è£å‰ªç‰ˆæœ¬ã€‚ settings.xmlè´Ÿè´£çš„æ˜¯æ•´ä½“çš„æ„å»ºè¿‡ç¨‹, pom.xmlè´Ÿè´£å•ç‹¬çš„é¡¹ç›®å¯¹è±¡æ„å»ºè¿‡ç¨‹ã€‚ settings.xml åªåŒ…å«äº†id, activation, repositories, pluginRepositories å’Œ properties å…ƒç´ ã€‚ å¦‚æœ settingsä¸­çš„ profile è¢«æ¿€æ´», å®ƒçš„å€¼ä¼šè¦†ç›–ä»»ä½•å…¶å®ƒå®šä¹‰åœ¨ pom.xmlä¸­æˆ– profile.xmlä¸­çš„ç›¸åŒ id çš„ profileã€‚ æŸ¥çœ‹å½“å‰æ¿€æ´»çš„ profile 1mvn help:active-profiles 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;profiles&gt; &lt;profile&gt; &lt;!-- è¯¥é…ç½®çš„å”¯ä¸€æ ‡è¯†ç¬¦ --&gt; &lt;id&gt;jdk-1.4&lt;/id&gt; &lt;!--è‡ªåŠ¨è§¦å‘profileçš„æ¡ä»¶é€»è¾‘ã€‚Activationæ˜¯profileçš„å¼€å¯é’¥åŒ™ã€‚--&gt; &lt;!--å¦‚POMä¸­çš„profileä¸€æ ·ï¼Œprofileçš„åŠ›é‡æ¥è‡ªäºå®ƒèƒ½å¤Ÿåœ¨æŸäº›ç‰¹å®šçš„ç¯å¢ƒä¸­è‡ªåŠ¨ä½¿ç”¨æŸäº›ç‰¹å®šçš„å€¼ï¼›è¿™äº›ç¯å¢ƒé€šè¿‡activationå…ƒç´ æŒ‡å®šã€‚--&gt; &lt;!--activationå…ƒç´ å¹¶ä¸æ˜¯æ¿€æ´»profileçš„å”¯ä¸€æ–¹å¼ã€‚settings.xmlæ–‡ä»¶ä¸­çš„activeProfileå…ƒç´ å¯ä»¥åŒ…å«profileçš„idã€‚--&gt; &lt;!--profileä¹Ÿå¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œï¼Œä½¿ç”¨-Pæ ‡è®°å’Œé€—å·åˆ†éš”çš„åˆ—è¡¨æ¥æ˜¾å¼çš„æ¿€æ´»ï¼ˆå¦‚ï¼Œ-P testï¼‰ã€‚ --&gt; &lt;activation&gt; &lt;!--profileé»˜è®¤æ˜¯å¦æ¿€æ´»çš„æ ‡è¯† --&gt; &lt;activeByDefault&gt;false&lt;/activeByDefault&gt; &lt;!--activationæœ‰ä¸€ä¸ªå†…å»ºçš„javaç‰ˆæœ¬æ£€æµ‹ï¼Œå¦‚æœæ£€æµ‹åˆ°jdkç‰ˆæœ¬ä¸æœŸå¾…çš„ä¸€æ ·ï¼Œprofileè¢«æ¿€æ´»ã€‚ --&gt; &lt;jdk&gt;1.4&lt;/jdk&gt; &lt;/activation&gt; &lt;!--è¿œç¨‹ä»“åº“åˆ—è¡¨ï¼Œå®ƒæ˜¯Mavenç”¨æ¥å¡«å……æ„å»ºç³»ç»Ÿæœ¬åœ°ä»“åº“æ‰€ä½¿ç”¨çš„ä¸€ç»„è¿œç¨‹é¡¹ç›®ã€‚ --&gt; &lt;repositories&gt; &lt;repository&gt; &lt;!--è¿œç¨‹ä»“åº“å”¯ä¸€æ ‡è¯† --&gt; &lt;id&gt;jdk14&lt;/id&gt; &lt;!--è¿œç¨‹ä»“åº“åç§° --&gt; &lt;name&gt;Repository for JDK 1.4 builds&lt;/name&gt; &lt;!--è¿œç¨‹ä»“åº“URLï¼ŒæŒ‰protocol://hostname/pathå½¢å¼ --&gt; &lt;url&gt;http://www.myhost.com/maven/jdk14&lt;/url&gt; &lt;!--ç”¨äºå®šä½å’Œæ’åºæ„ä»¶çš„ä»“åº“å¸ƒå±€ç±»å‹-å¯ä»¥æ˜¯defaultï¼ˆé»˜è®¤ï¼‰æˆ–è€…legacyï¼ˆé—ç•™ï¼‰ã€‚--&gt; &lt;layout&gt;default&lt;/layout&gt; &lt;!-- å¿«ç…§ç­–ç•¥ --&gt; &lt;snapshotPolicy&gt;always&lt;/snapshotPolicy&gt; &lt;/repository&gt; &lt;/repositories&gt; &lt;/profile&gt; &lt;profile&gt; &lt;id&gt;env-dev&lt;/id&gt; &lt;!--å¦‚æœMavenæ£€æµ‹åˆ°æŸä¸€ä¸ªå±æ€§ï¼ˆå…¶å€¼å¯ä»¥åœ¨POMä¸­é€šè¿‡$&#123;åç§°&#125;å¼•ç”¨ï¼‰ï¼Œå…¶æ‹¥æœ‰å¯¹åº”çš„åç§°å’Œå€¼ï¼ŒProfileå°±ä¼šè¢«æ¿€æ´»ã€‚--&gt; &lt;!--å¦‚æœå€¼å­—æ®µæ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå­˜åœ¨å±æ€§åç§°å­—æ®µå°±ä¼šæ¿€æ´»profileï¼Œå¦åˆ™æŒ‰åŒºåˆ†å¤§å°å†™æ–¹å¼åŒ¹é…å±æ€§å€¼å­—æ®µ --&gt; &lt;activation&gt; &lt;property&gt; &lt;name&gt;target-env&lt;/name&gt; &lt;value&gt;dev&lt;/value&gt; &lt;/property&gt; &lt;/activation&gt; &lt;properties&gt; &lt;!-- å¦‚æœè¿™ä¸ªprofileè¢«æ¿€æ´»ï¼Œé‚£ä¹ˆå±æ€§$&#123;tomcatPath&#125;å°±å¯ä»¥è¢«è®¿é—®äº† --&gt; &lt;tomcatPath&gt;/path/to/tomcat/instance&lt;/tomcatPath&gt; &lt;/properties&gt; &lt;/profile&gt;&lt;/profiles&gt; 2.1.8. activeProfiles123456789&lt;!-- ä½œç”¨ï¼šæ‰‹åŠ¨æ¿€æ´»profilesçš„åˆ—è¡¨ï¼ŒæŒ‰ç…§profileè¢«åº”ç”¨çš„é¡ºåºå®šä¹‰activeProfile è¯´æ˜ï¼š ä»»ä½•åœ¨activeProfileä¸­å®šä¹‰çš„profile idï¼Œä¸è®ºç¯å¢ƒè®¾ç½®å¦‚ä½•ï¼Œå…¶å¯¹åº”çš„ profileéƒ½ä¼šè¢«æ¿€æ´» å¦‚æœæ²¡æœ‰åŒ¹é…çš„profileï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿã€‚ å¦‚æœè¿è¡Œè¿‡ç¨‹ä¸­æ‰¾ä¸åˆ°è¿™æ ·ä¸€ä¸ªprofileï¼ŒMavenåˆ™ä¼šåƒå¾€å¸¸ä¸€æ ·è¿è¡Œã€‚--&gt;&lt;activeProfiles&gt; &lt;activeProfile&gt;alwaysActiveProfile&lt;/activeProfile&gt; &lt;activeProfile&gt;anotherAlwaysActiveProfile&lt;/activeProfile&gt;&lt;/activeProfiles&gt; å‚è€ƒèµ„æ–™ Maven settings.xml è¯¦è§£ Mavenç³»åˆ—äºŒsetting.xml é…ç½®è¯¦è§£","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"https://guoshunfa.com/tags/Maven/"},{"name":"settings.xml","slug":"settings-xml","permalink":"https://guoshunfa.com/tags/settings-xml/"}]},{"title":"Mavenæ¡†æ¶ å‘½ä»¤è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Maven/Mavenæ¡†æ¶å‘½ä»¤è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.299Z","comments":true,"path":"2022/07/Mavenæ¡†æ¶å‘½ä»¤è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Maven%E6%A1%86%E6%9E%B6%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/","excerpt":"","text":"å‘½ä»¤ æè¿° mvn clean å¯¹é¡¹ç›®è¿›è¡Œæ¸…ç†ï¼Œåˆ é™¤targetç›®å½•ä¸‹ç¼–è¯‘çš„å†…å®¹ mvn compile ç¼–è¯‘é¡¹ç›®æºä»£ç  mvn test å¯¹é¡¹ç›®è¿›è¡Œè¿è¡Œæµ‹è¯• mvn package æ‰“åŒ…æ–‡ä»¶å¹¶å­˜æ”¾åˆ°é¡¹ç›®çš„targetç›®å½•ä¸‹ï¼Œæ‰“åŒ…å¥½çš„æ–‡ä»¶é€šå¸¸éƒ½æ˜¯ç¼–è¯‘åçš„classæ–‡ä»¶ mvn install åœ¨æœ¬åœ°ä»“åº“ç”Ÿæˆä»“åº“çš„å®‰è£…åŒ…ï¼Œå¯ä¾›å…¶ä»–é¡¹ç›®å¼•ç”¨ï¼ŒåŒæ—¶æ‰“åŒ…åçš„æ–‡ä»¶æ”¾åˆ°é¡¹ç›®çš„targetç›®å½•ä¸‹ mvn archetype:generate ä½¿ç”¨å‘½ä»¤åˆ›å»ºmavené¡¹ç›®ï¼Œæ‰§è¡Œå‘½ä»¤åä¼šé€šè¿‡äº¤äº’å½¢å¼çš„æè¿°è¿›è¡Œæ„å»ºé¡¹ç›®ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"https://guoshunfa.com/tags/Maven/"}]},{"title":"Mavenæ¡†æ¶ å¼•å…¥å¤–éƒ¨Jar","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Maven/Mavenæ¡†æ¶å¼•å…¥å¤–éƒ¨Jar","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.299Z","comments":true,"path":"2022/07/Mavenæ¡†æ¶å¼•å…¥å¤–éƒ¨Jar/","link":"","permalink":"https://guoshunfa.com/2022/07/Maven%E6%A1%86%E6%9E%B6%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8Jar/","excerpt":"","text":"é¦–å…ˆæè¿°ä¸€ä¸‹ï¼Œå¦‚æœé¡¹ç›®å¼•å…¥å¤–éƒ¨Jarï¼Œä½†æ˜¯æ²¡æœ‰åœ¨Mavenä¸­è¿›è¡Œæ§åˆ¶ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ã€‚ Maven æ‰“åŒ…æ—¶ï¼Œå¤–éƒ¨å¼•å…¥çš„Jarä¼šæ£€æµ‹ä¸åˆ°ï¼Œå¯¼è‡´***ä¸å­˜åœ¨çš„é”™è¯¯ã€‚ step 1: pom.xml é€ä¸ªå¼•å…¥å¤–éƒ¨JaråŒ…123456789101112131415&lt;!--å¼•å…¥å¤–éƒ¨jaråŒ…--&gt;&lt;dependency&gt; &lt;groupId&gt;com.1&lt;/groupId&gt; &lt;artifactId&gt;out-jar-1&lt;/artifactId&gt; &lt;version&gt;1.45&lt;/version&gt; &lt;scope&gt;system&lt;/scope&gt; &lt;systemPath&gt;$&#123;project.basedir&#125;/src/main/resources/lib/bcprov-jdk16-1.45.jar&lt;/systemPath&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.2&lt;/groupId&gt; &lt;artifactId&gt;out-jar-2&lt;/artifactId&gt; &lt;version&gt;1.6&lt;/version&gt; &lt;scope&gt;system&lt;/scope&gt; &lt;systemPath&gt;$&#123;project.basedir&#125;/src/main/resources/lib/commons-codec-1.6.jar&lt;/systemPath&gt;&lt;/dependency&gt; å…¶ä¸­ groupId å’Œ artifactId å¯ä»¥éšä¾¿å¡«ï¼Œæ³¨æ„ artifactId ä¸è¦é‡å¤äº†ï¼Œversion ç‰ˆæœ¬å·jaråŒ…æ˜¯ä»€ä¹ˆç‰ˆæœ¬å°±æ˜¯ä»€ä¹ˆç‰ˆæœ¬ï¼Œå¦åˆ™å¯ä»¥éšä¾¿å¡«ã€‚ step 2: å¦‚æœæ˜¯SpringBooté¡¹ç›®è¿˜è¦åŠ å¦‚ä¸‹é…ç½®12345678&lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;fork&gt;true&lt;/fork&gt; &lt;includeSystemScope&gt;true&lt;/includeSystemScope&gt; &lt;/configuration&gt;&lt;/plugin&gt; å‚è€ƒæ–‡æ¡£ mavené¡¹ç›®æ‰“åŒ…æ—¶å¤–éƒ¨å¼•å…¥jaråŒ…æ— æ³•æ‰“åˆ°é¡¹ç›®ä¸­çš„è§£å†³æ–¹æ¡ˆ","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"https://guoshunfa.com/tags/Maven/"},{"name":"Jar","slug":"Jar","permalink":"https://guoshunfa.com/tags/Jar/"}]},{"title":"MyBatis Java API","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Mybatis/MyBatis-Java-API","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.299Z","comments":true,"path":"2022/07/MyBatis-Java-API/","link":"","permalink":"https://guoshunfa.com/2022/07/MyBatis-Java-API/","excerpt":"","text":"è½¬è½½è‡ªï¼šMyBatis å®˜ç½‘(Java API) æ—¢ç„¶ä½ å·²ç»çŸ¥é“å¦‚ä½•é…ç½® MyBatis ä»¥åŠå¦‚ä½•åˆ›å»ºæ˜ å°„ï¼Œæ˜¯æ—¶å€™æ¥å°ç‚¹ç”œå¤´äº†ã€‚MyBatis çš„ Java API å°±æ˜¯è¿™ä¸ªç”œå¤´ã€‚ç¨åä½ å°†çœ‹åˆ°ï¼Œå’Œ JDBC ç›¸æ¯”ï¼ŒMyBatis å¤§å¹…ç®€åŒ–ä½ çš„ä»£ç å¹¶åŠ›å›¾ä¿æŒå…¶ç®€æ´ã€å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚ä¸ºäº†ä½¿å¾— SQL æ˜ å°„æ›´åŠ ä¼˜ç§€ï¼ŒMyBatis 3 å¼•å…¥äº†è®¸å¤šé‡è¦çš„æ”¹è¿›ã€‚ ç›®å½•ç»“æ„åœ¨æˆ‘ä»¬æ·±å…¥ Java API ä¹‹å‰ï¼Œç†è§£å…³äºç›®å½•ç»“æ„çš„æœ€ä½³å®è·µæ˜¯å¾ˆé‡è¦çš„ã€‚MyBatis éå¸¸çµæ´»ï¼Œä½ å¯ä»¥éšæ„å®‰æ’ä½ çš„æ–‡ä»¶ã€‚ä½†å’Œå…¶å®ƒæ¡†æ¶ä¸€æ ·ï¼Œç›®å½•ç»“æ„æœ‰ä¸€ç§æœ€ä½³å®è·µã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å…¸å‹çš„åº”ç”¨ç›®å½•ç»“æ„ï¼š 1234567891011121314151617181920212223242526/my_application /bin /devlib /lib &lt;-- MyBatis *.jar æ–‡ä»¶åœ¨è¿™é‡Œã€‚ /src /org/myapp/ /action /data &lt;-- MyBatis é…ç½®æ–‡ä»¶åœ¨è¿™é‡Œï¼ŒåŒ…æ‹¬æ˜ å°„å™¨ç±»ã€XML é…ç½®ã€XML æ˜ å°„æ–‡ä»¶ã€‚ /mybatis-config.xml /BlogMapper.java /BlogMapper.xml /model /service /view /properties &lt;-- åœ¨ XML é…ç½®ä¸­å‡ºç°çš„å±æ€§å€¼åœ¨è¿™é‡Œã€‚ /test /org/myapp/ /action /data /model /service /view /properties /web /WEB-INF /web.xml å½“ç„¶ï¼Œè¿™æ˜¯æ¨èçš„ç›®å½•ç»“æ„ï¼Œå¹¶éå¼ºåˆ¶è¦æ±‚ï¼Œä½†ä½¿ç”¨ä¸€ä¸ªé€šç”¨çš„ç›®å½•ç»“æ„å°†æ›´æœ‰åˆ©äºå¤§å®¶æ²Ÿé€šã€‚ æœ¬ç« æ¥ä¸‹æ¥çš„ç¤ºä¾‹å°†å‡å®šä½ éµå¾ªè¿™ç§ç›®å½•ç»“æ„ã€‚ SqlSessionä½¿ç”¨ MyBatis çš„ä¸»è¦ Java æ¥å£å°±æ˜¯ SqlSessionã€‚ä½ å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥å£æ¥æ‰§è¡Œå‘½ä»¤ï¼Œè·å–æ˜ å°„å™¨å®ä¾‹å’Œç®¡ç†äº‹åŠ¡ã€‚åœ¨ä»‹ç» SqlSession æ¥å£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£å¦‚ä½•è·å–ä¸€ä¸ª SqlSession å®ä¾‹ã€‚SqlSessions æ˜¯ç”± SqlSessionFactory å®ä¾‹åˆ›å»ºçš„ã€‚SqlSessionFactory å¯¹è±¡åŒ…å«åˆ›å»º SqlSession å®ä¾‹çš„å„ç§æ–¹æ³•ã€‚è€Œ SqlSessionFactory æœ¬èº«æ˜¯ç”± SqlSessionFactoryBuilder åˆ›å»ºçš„ï¼Œå®ƒå¯ä»¥ä» XMLã€æ³¨è§£æˆ– Java é…ç½®ä»£ç æ¥åˆ›å»º SqlSessionFactoryã€‚ æç¤º å½“ Mybatis ä¸ä¸€äº›ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼ˆå¦‚ Spring æˆ–è€… Guiceï¼‰æ­é…ä½¿ç”¨æ—¶ï¼ŒSqlSession å°†è¢«ä¾èµ–æ³¨å…¥æ¡†æ¶åˆ›å»ºå¹¶æ³¨å…¥ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦ä½¿ç”¨ SqlSessionFactoryBuilder æˆ–è€… SqlSessionFactoryï¼Œå¯ä»¥ç›´æ¥é˜…è¯» SqlSession è¿™ä¸€èŠ‚ã€‚è¯·å‚è€ƒ Mybatis-Spring æˆ–è€… Mybatis-Guice æ‰‹å†Œä»¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚ SqlSessionFactoryBuilderSqlSessionFactoryBuilder æœ‰äº”ä¸ª build() æ–¹æ³•ï¼Œæ¯ä¸€ç§éƒ½å…è®¸ä½ ä»ä¸åŒçš„èµ„æºä¸­åˆ›å»ºä¸€ä¸ª SqlSessionFactory å®ä¾‹ã€‚ 12345SqlSessionFactory build(InputStream inputStream)SqlSessionFactory build(InputStream inputStream, String environment)SqlSessionFactory build(InputStream inputStream, Properties properties)SqlSessionFactory build(InputStream inputStream, String env, Properties props)SqlSessionFactory build(Configuration config) ç¬¬ä¸€ç§æ–¹æ³•æ˜¯æœ€å¸¸ç”¨çš„ï¼Œå®ƒæ¥å—ä¸€ä¸ªæŒ‡å‘ XML æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯ä¹‹å‰è®¨è®ºçš„ mybatis-config.xml æ–‡ä»¶ï¼‰çš„ InputStream å®ä¾‹ã€‚å¯é€‰çš„å‚æ•°æ˜¯ environment å’Œ propertiesã€‚environment å†³å®šåŠ è½½å“ªç§ç¯å¢ƒï¼ŒåŒ…æ‹¬æ•°æ®æºå’Œäº‹åŠ¡ç®¡ç†å™¨ã€‚æ¯”å¦‚ï¼š 1234567891011121314&lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;&gt; ... &lt;dataSource type=&quot;POOLED&quot;&gt; ... &lt;/environment&gt; &lt;environment id=&quot;production&quot;&gt; &lt;transactionManager type=&quot;MANAGED&quot;&gt; ... &lt;dataSource type=&quot;JNDI&quot;&gt; ... &lt;/environment&gt;&lt;/environments&gt; å¦‚æœä½ è°ƒç”¨äº†å¸¦ environment å‚æ•°çš„ build æ–¹æ³•ï¼Œé‚£ä¹ˆ MyBatis å°†ä½¿ç”¨è¯¥ç¯å¢ƒå¯¹åº”çš„é…ç½®ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æŒ‡å®šäº†ä¸€ä¸ªæ— æ•ˆçš„ç¯å¢ƒï¼Œä¼šæ”¶åˆ°é”™è¯¯ã€‚å¦‚æœä½ è°ƒç”¨äº†ä¸å¸¦ environment å‚æ•°çš„ build æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨é»˜è®¤çš„ç¯å¢ƒé…ç½®ï¼ˆåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œé€šè¿‡ default&#x3D;â€developmentâ€ æŒ‡å®šäº†é»˜è®¤ç¯å¢ƒï¼‰ã€‚ å¦‚æœä½ è°ƒç”¨äº†æ¥å— properties å®ä¾‹çš„æ–¹æ³•ï¼Œé‚£ä¹ˆ MyBatis å°±ä¼šåŠ è½½è¿™äº›å±æ€§ï¼Œå¹¶åœ¨é…ç½®ä¸­æä¾›ä½¿ç”¨ã€‚ç»å¤§å¤šæ•°åœºåˆä¸‹ï¼Œå¯ä»¥ç”¨ ${propName} å½¢å¼å¼•ç”¨è¿™äº›é…ç½®å€¼ã€‚ å›æƒ³ä¸€ä¸‹ï¼Œåœ¨ mybatis-config.xml ä¸­ï¼Œå¯ä»¥å¼•ç”¨å±æ€§å€¼ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šå±æ€§å€¼ã€‚å› æ­¤ï¼Œç†è§£å±æ€§çš„ä¼˜å…ˆçº§æ˜¯å¾ˆé‡è¦çš„ã€‚åœ¨ä¹‹å‰çš„æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä»‹ç»è¿‡äº†ç›¸å…³å†…å®¹ï¼Œä½†ä¸ºäº†æ–¹ä¾¿æŸ¥é˜…ï¼Œè¿™é‡Œå†é‡æ–°ä»‹ç»ä¸€ä¸‹ï¼š å¦‚æœä¸€ä¸ªå±æ€§å­˜åœ¨äºä¸‹é¢çš„å¤šä¸ªä½ç½®ï¼Œé‚£ä¹ˆ MyBatis å°†æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ¥åŠ è½½å®ƒä»¬ï¼š é¦–å…ˆï¼Œè¯»å–åœ¨ properties å…ƒç´ ä½“ä¸­æŒ‡å®šçš„å±æ€§ï¼› å…¶æ¬¡ï¼Œè¯»å–åœ¨ properties å…ƒç´ çš„ç±»è·¯å¾„ resource æˆ– url æŒ‡å®šçš„å±æ€§ï¼Œä¸”ä¼šè¦†ç›–å·²ç»æŒ‡å®šäº†çš„é‡å¤å±æ€§ï¼› æœ€åï¼Œè¯»å–ä½œä¸ºæ–¹æ³•å‚æ•°ä¼ é€’çš„å±æ€§ï¼Œä¸”ä¼šè¦†ç›–å·²ç»ä» properties å…ƒç´ ä½“å’Œ resource æˆ– url å±æ€§ä¸­åŠ è½½äº†çš„é‡å¤å±æ€§ã€‚ å› æ­¤ï¼Œé€šè¿‡æ–¹æ³•å‚æ•°ä¼ é€’çš„å±æ€§çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œresource æˆ– url æŒ‡å®šçš„å±æ€§ä¼˜å…ˆçº§ä¸­ç­‰ï¼Œåœ¨ properties å…ƒç´ ä½“ä¸­æŒ‡å®šçš„å±æ€§ä¼˜å…ˆçº§æœ€ä½ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œå‰å››ä¸ªæ–¹æ³•å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç›¸åŒçš„ï¼Œä½†æä¾›äº†ä¸åŒçš„è¦†ç›–é€‰é¡¹ï¼Œå…è®¸ä½ å¯é€‰åœ°æŒ‡å®š environment å’Œ&#x2F;æˆ– propertiesã€‚ä»¥ä¸‹ç»™å‡ºä¸€ä¸ªä» mybatis-config.xml æ–‡ä»¶åˆ›å»º SqlSessionFactory çš„ç¤ºä¾‹ï¼š 1234String resource = &quot;org/mybatis/builder/mybatis-config.xml&quot;;InputStream inputStream = Resources.getResourceAsStream(resource);SqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder();SqlSessionFactory factory = builder.build(inputStream); æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† Resources å·¥å…·ç±»ï¼Œè¿™ä¸ªç±»åœ¨ org.apache.ibatis.io åŒ…ä¸­ã€‚Resources ç±»æ­£å¦‚å…¶åï¼Œä¼šå¸®åŠ©ä½ ä»ç±»è·¯å¾„ä¸‹ã€æ–‡ä»¶ç³»ç»Ÿæˆ–ä¸€ä¸ª web URL ä¸­åŠ è½½èµ„æºæ–‡ä»¶ã€‚åœ¨ç•¥è¯»è¯¥ç±»çš„æºä»£ç æˆ–ç”¨ IDE æŸ¥çœ‹è¯¥ç±»ä¿¡æ¯åï¼Œä½ ä¼šå‘ç°ä¸€æ•´å¥—ç›¸å½“å®ç”¨çš„æ–¹æ³•ã€‚è¿™é‡Œç»™å‡ºä¸€ä¸ªç®€è¡¨ï¼š 1234567891011121314URL getResourceURL(String resource)URL getResourceURL(ClassLoader loader, String resource)InputStream getResourceAsStream(String resource)InputStream getResourceAsStream(ClassLoader loader, String resource)Properties getResourceAsProperties(String resource)Properties getResourceAsProperties(ClassLoader loader, String resource)Reader getResourceAsReader(String resource)Reader getResourceAsReader(ClassLoader loader, String resource)File getResourceAsFile(String resource)File getResourceAsFile(ClassLoader loader, String resource)InputStream getUrlAsStream(String urlString)Reader getUrlAsReader(String urlString)Properties getUrlAsProperties(String urlString)Class classForName(String className) æœ€åä¸€ä¸ª build æ–¹æ³•æ¥å—ä¸€ä¸ª Configuration å®ä¾‹ã€‚Configuration ç±»åŒ…å«äº†å¯¹ä¸€ä¸ª SqlSessionFactory å®ä¾‹ä½ å¯èƒ½å…³å¿ƒçš„æ‰€æœ‰å†…å®¹ã€‚åœ¨æ£€æŸ¥é…ç½®æ—¶ï¼ŒConfiguration ç±»å¾ˆæœ‰ç”¨ï¼Œå®ƒå…è®¸ä½ æŸ¥æ‰¾å’Œæ“çºµ SQL æ˜ å°„ï¼ˆä½†å½“åº”ç”¨å¼€å§‹æ¥æ”¶è¯·æ±‚æ—¶ä¸æ¨èä½¿ç”¨ï¼‰ã€‚ä½ ä¹‹å‰å­¦ä¹ è¿‡çš„æ‰€æœ‰é…ç½®å¼€å…³éƒ½å­˜åœ¨äº Configuration ç±»ï¼Œåªä¸è¿‡å®ƒä»¬æ˜¯ä»¥ Java API å½¢å¼æš´éœ²çš„ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•æ‰‹åŠ¨é…ç½® Configuration å®ä¾‹ï¼Œç„¶åå°†å®ƒä¼ é€’ç»™ build() æ–¹æ³•æ¥åˆ›å»º SqlSessionFactoryã€‚ 12345678910111213141516DataSource dataSource = BaseDataTest.createBlogDataSource();TransactionFactory transactionFactory = new JdbcTransactionFactory();Environment environment = new Environment(&quot;development&quot;, transactionFactory, dataSource);Configuration configuration = new Configuration(environment);configuration.setLazyLoadingEnabled(true);configuration.setEnhancementEnabled(true);configuration.getTypeAliasRegistry().registerAlias(Blog.class);configuration.getTypeAliasRegistry().registerAlias(Post.class);configuration.getTypeAliasRegistry().registerAlias(Author.class);configuration.addMapper(BoundBlogMapper.class);configuration.addMapper(BoundAuthorMapper.class);SqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder();SqlSessionFactory factory = builder.build(configuration); ç°åœ¨ä½ å°±è·å¾—ä¸€ä¸ªå¯ä»¥ç”¨æ¥åˆ›å»º SqlSession å®ä¾‹çš„ SqlSessionFactory äº†ã€‚ SqlSessionFactorySqlSessionFactory æœ‰å…­ä¸ªæ–¹æ³•åˆ›å»º SqlSession å®ä¾‹ã€‚é€šå¸¸æ¥è¯´ï¼Œå½“ä½ é€‰æ‹©å…¶ä¸­ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š äº‹åŠ¡å¤„ç†ï¼šä½ å¸Œæœ›åœ¨ session ä½œç”¨åŸŸä¸­ä½¿ç”¨äº‹åŠ¡ä½œç”¨åŸŸï¼Œè¿˜æ˜¯ä½¿ç”¨è‡ªåŠ¨æäº¤ï¼ˆauto-commitï¼‰ï¼Ÿï¼ˆå¯¹å¾ˆå¤šæ•°æ®åº“å’Œ&#x2F;æˆ– JDBC é©±åŠ¨æ¥è¯´ï¼Œç­‰åŒäºå…³é—­äº‹åŠ¡æ”¯æŒï¼‰ æ•°æ®åº“è¿æ¥ï¼šä½ å¸Œæœ› MyBatis å¸®ä½ ä»å·²é…ç½®çš„æ•°æ®æºè·å–è¿æ¥ï¼Œè¿˜æ˜¯ä½¿ç”¨è‡ªå·±æä¾›çš„è¿æ¥ï¼Ÿ è¯­å¥æ‰§è¡Œï¼šä½ å¸Œæœ› MyBatis å¤ç”¨ PreparedStatement å’Œ&#x2F;æˆ–æ‰¹é‡æ›´æ–°è¯­å¥ï¼ˆåŒ…æ‹¬æ’å…¥è¯­å¥å’Œåˆ é™¤è¯­å¥ï¼‰å—ï¼Ÿ åŸºäºä»¥ä¸Šéœ€æ±‚ï¼Œæœ‰ä¸‹åˆ—å·²é‡è½½çš„å¤šä¸ª openSession() æ–¹æ³•ä¾›ä½¿ç”¨ã€‚ 123456789SqlSession openSession()SqlSession openSession(boolean autoCommit)SqlSession openSession(Connection connection)SqlSession openSession(TransactionIsolationLevel level)SqlSession openSession(ExecutorType execType, TransactionIsolationLevel level)SqlSession openSession(ExecutorType execType)SqlSession openSession(ExecutorType execType, boolean autoCommit)SqlSession openSession(ExecutorType execType, Connection connection)Configuration getConfiguration(); é»˜è®¤çš„ openSession() æ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œå®ƒä¼šåˆ›å»ºå…·å¤‡å¦‚ä¸‹ç‰¹æ€§çš„ SqlSessionï¼š äº‹åŠ¡ä½œç”¨åŸŸå°†ä¼šå¼€å¯ï¼ˆä¹Ÿå°±æ˜¯ä¸è‡ªåŠ¨æäº¤ï¼‰ã€‚ å°†ç”±å½“å‰ç¯å¢ƒé…ç½®çš„ DataSource å®ä¾‹ä¸­è·å– Connection å¯¹è±¡ã€‚ äº‹åŠ¡éš”ç¦»çº§åˆ«å°†ä¼šä½¿ç”¨é©±åŠ¨æˆ–æ•°æ®æºçš„é»˜è®¤è®¾ç½®ã€‚ é¢„å¤„ç†è¯­å¥ä¸ä¼šè¢«å¤ç”¨ï¼Œä¹Ÿä¸ä¼šæ‰¹é‡å¤„ç†æ›´æ–°ã€‚ ç›¸ä¿¡ä½ å·²ç»èƒ½ä»æ–¹æ³•ç­¾åä¸­çŸ¥é“è¿™äº›æ–¹æ³•çš„åŒºåˆ«ã€‚å‘ autoCommit å¯é€‰å‚æ•°ä¼ é€’ true å€¼å³å¯å¼€å¯è‡ªåŠ¨æäº¤åŠŸèƒ½ã€‚è‹¥è¦ä½¿ç”¨è‡ªå·±çš„ Connection å®ä¾‹ï¼Œä¼ é€’ä¸€ä¸ª Connection å®ä¾‹ç»™ connection å‚æ•°å³å¯ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬æ²¡æœ‰æä¾›åŒæ—¶è®¾ç½® Connection å’Œ autoCommit çš„æ–¹æ³•ï¼Œè¿™æ˜¯å› ä¸º MyBatis ä¼šä¾æ®ä¼ å…¥çš„ Connection æ¥å†³å®šæ˜¯å¦å¯ç”¨ autoCommitã€‚å¯¹äºäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŒMyBatis ä½¿ç”¨äº†ä¸€ä¸ª Java æšä¸¾åŒ…è£…å™¨æ¥è¡¨ç¤ºï¼Œç§°ä¸º TransactionIsolationLevelï¼Œäº‹åŠ¡éš”ç¦»çº§åˆ«æ”¯æŒ JDBC çš„äº”ä¸ªéš”ç¦»çº§åˆ«ï¼ˆNONEã€READ_UNCOMMITTEDã€READ_COMMITTEDã€REPEATABLE_READ å’Œ SERIALIZABLEï¼‰ï¼Œå¹¶ä¸”ä¸é¢„æœŸçš„è¡Œä¸ºä¸€è‡´ã€‚ ä½ å¯èƒ½å¯¹ ExecutorType å‚æ•°æ„Ÿåˆ°é™Œç”Ÿã€‚è¿™ä¸ªæšä¸¾ç±»å‹å®šä¹‰äº†ä¸‰ä¸ªå€¼: ExecutorType.SIMPLEï¼šè¯¥ç±»å‹çš„æ‰§è¡Œå™¨æ²¡æœ‰ç‰¹åˆ«çš„è¡Œä¸ºã€‚å®ƒä¸ºæ¯ä¸ªè¯­å¥çš„æ‰§è¡Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¢„å¤„ç†è¯­å¥ã€‚ ExecutorType.REUSEï¼šè¯¥ç±»å‹çš„æ‰§è¡Œå™¨ä¼šå¤ç”¨é¢„å¤„ç†è¯­å¥ã€‚ ExecutorType.BATCHï¼šè¯¥ç±»å‹çš„æ‰§è¡Œå™¨ä¼šæ‰¹é‡æ‰§è¡Œæ‰€æœ‰æ›´æ–°è¯­å¥ï¼Œå¦‚æœ SELECT åœ¨å¤šä¸ªæ›´æ–°ä¸­é—´æ‰§è¡Œï¼Œå°†åœ¨å¿…è¦æ—¶å°†å¤šæ¡æ›´æ–°è¯­å¥åˆ†éš”å¼€æ¥ï¼Œä»¥æ–¹ä¾¿ç†è§£ã€‚ æç¤º åœ¨ SqlSessionFactory ä¸­è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æˆ‘ä»¬æ²¡æœ‰æåŠï¼Œå°±æ˜¯ getConfiguration()ã€‚è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª Configuration å®ä¾‹ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨å®ƒæ¥æ£€æŸ¥ MyBatis çš„é…ç½®ã€‚ æç¤º å¦‚æœä½ ä½¿ç”¨è¿‡ MyBatis çš„æ—§ç‰ˆæœ¬ï¼Œå¯èƒ½è¿˜è®°å¾— sessionã€äº‹åŠ¡å’Œæ‰¹é‡æ“ä½œæ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚åœ¨æ–°ç‰ˆæœ¬ä¸­åˆ™ä¸æ˜¯è¿™æ ·ã€‚ä¸Šè¿°ä¸‰è€…éƒ½åŒ…å«åœ¨ session ä½œç”¨åŸŸå†…ã€‚ä½ ä¸å¿…åˆ†åˆ«å¤„ç†äº‹åŠ¡æˆ–æ‰¹é‡æ“ä½œå°±èƒ½å¾—åˆ°æƒ³è¦çš„å…¨éƒ¨æ•ˆæœã€‚ SqlSessionæ­£å¦‚ä¹‹å‰æ‰€æåˆ°çš„ï¼ŒSqlSession åœ¨ MyBatis ä¸­æ˜¯éå¸¸å¼ºå¤§çš„ä¸€ä¸ªç±»ã€‚å®ƒåŒ…å«äº†æ‰€æœ‰æ‰§è¡Œè¯­å¥ã€æäº¤æˆ–å›æ»šäº‹åŠ¡ä»¥åŠè·å–æ˜ å°„å™¨å®ä¾‹çš„æ–¹æ³•ã€‚ SqlSession ç±»çš„æ–¹æ³•è¶…è¿‡äº† 20 ä¸ªï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬å°†å®ƒä»¬åˆ†æˆå‡ ç§ç»„åˆ«ã€‚ è¯­å¥æ‰§è¡Œæ–¹æ³•è¿™äº›æ–¹æ³•è¢«ç”¨æ¥æ‰§è¡Œå®šä¹‰åœ¨ SQL æ˜ å°„ XML æ–‡ä»¶ä¸­çš„ SELECTã€INSERTã€UPDATE å’Œ DELETE è¯­å¥ã€‚ä½ å¯ä»¥é€šè¿‡åå­—å¿«é€Ÿäº†è§£å®ƒä»¬çš„ä½œç”¨ï¼Œæ¯ä¸€æ–¹æ³•éƒ½æ¥å—è¯­å¥çš„ ID ä»¥åŠå‚æ•°å¯¹è±¡ï¼Œå‚æ•°å¯ä»¥æ˜¯åŸå§‹ç±»å‹ï¼ˆæ”¯æŒè‡ªåŠ¨è£…ç®±æˆ–åŒ…è£…ç±»ï¼‰ã€JavaBeanã€POJO æˆ– Mapã€‚ 1234567&lt;T&gt; T selectOne(String statement, Object parameter)&lt;E&gt; List&lt;E&gt; selectList(String statement, Object parameter)&lt;T&gt; Cursor&lt;T&gt; selectCursor(String statement, Object parameter)&lt;K,V&gt; Map&lt;K,V&gt; selectMap(String statement, Object parameter, String mapKey)int insert(String statement, Object parameter)int update(String statement, Object parameter)int delete(String statement, Object parameter) selectOne å’Œ selectList çš„ä¸åŒä»…ä»…æ˜¯ selectOne å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡æˆ– null å€¼ã€‚å¦‚æœè¿”å›å€¼å¤šäºä¸€ä¸ªï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚å¦‚æœä½ ä¸çŸ¥é“è¿”å›å¯¹è±¡ä¼šæœ‰å¤šå°‘ï¼Œè¯·ä½¿ç”¨ selectListã€‚å¦‚æœéœ€è¦æŸ¥çœ‹æŸä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯æŸ¥è¯¢ä¸€ä¸ª count å€¼ï¼ˆ0 æˆ– 1ï¼‰ã€‚selectMap ç¨å¾®ç‰¹æ®Šä¸€ç‚¹ï¼Œå®ƒä¼šå°†è¿”å›å¯¹è±¡çš„å…¶ä¸­ä¸€ä¸ªå±æ€§ä½œä¸º key å€¼ï¼Œå°†å¯¹è±¡ä½œä¸º value å€¼ï¼Œä»è€Œå°†å¤šä¸ªç»“æœé›†è½¬ä¸º Map ç±»å‹å€¼ã€‚ç”±äºå¹¶ä¸æ˜¯æ‰€æœ‰è¯­å¥éƒ½éœ€è¦å‚æ•°ï¼Œæ‰€ä»¥è¿™äº›æ–¹æ³•éƒ½å…·æœ‰ä¸€ä¸ªä¸éœ€è¦å‚æ•°çš„é‡è½½å½¢å¼ã€‚ æ¸¸æ ‡ï¼ˆCursorï¼‰ä¸åˆ—è¡¨ï¼ˆListï¼‰è¿”å›çš„ç»“æœç›¸åŒï¼Œä¸åŒçš„æ˜¯ï¼Œæ¸¸æ ‡å€ŸåŠ©è¿­ä»£å™¨å®ç°äº†æ•°æ®çš„æƒ°æ€§åŠ è½½ã€‚ 12345try (Cursor&lt;MyEntity&gt; entities = session.selectCursor(statement, param)) &#123; for (MyEntity entity:entities) &#123; // å¤„ç†å•ä¸ªå®ä½“ &#125;&#125; insertã€update ä»¥åŠ delete æ–¹æ³•è¿”å›çš„å€¼è¡¨ç¤ºå—è¯¥è¯­å¥å½±å“çš„è¡Œæ•°ã€‚ 1234567&lt;T&gt; T selectOne(String statement)&lt;E&gt; List&lt;E&gt; selectList(String statement)&lt;T&gt; Cursor&lt;T&gt; selectCursor(String statement)&lt;K,V&gt; Map&lt;K,V&gt; selectMap(String statement, String mapKey)int insert(String statement)int update(String statement)int delete(String statement) æœ€åï¼Œè¿˜æœ‰ select æ–¹æ³•çš„ä¸‰ä¸ªé«˜çº§ç‰ˆæœ¬ï¼Œå®ƒä»¬å…è®¸ä½ é™åˆ¶è¿”å›è¡Œæ•°çš„èŒƒå›´ï¼Œæˆ–æ˜¯æä¾›è‡ªå®šä¹‰ç»“æœå¤„ç†é€»è¾‘ï¼Œé€šå¸¸åœ¨æ•°æ®é›†éå¸¸åºå¤§çš„æƒ…å½¢ä¸‹ä½¿ç”¨ã€‚ 12345&lt;E&gt; List&lt;E&gt; selectList (String statement, Object parameter, RowBounds rowBounds)&lt;T&gt; Cursor&lt;T&gt; selectCursor(String statement, Object parameter, RowBounds rowBounds)&lt;K,V&gt; Map&lt;K,V&gt; selectMap(String statement, Object parameter, String mapKey, RowBounds rowbounds)void select (String statement, Object parameter, ResultHandler&lt;T&gt; handler)void select (String statement, Object parameter, RowBounds rowBounds, ResultHandler&lt;T&gt; handler) RowBounds å‚æ•°ä¼šå‘Šè¯‰ MyBatis ç•¥è¿‡æŒ‡å®šæ•°é‡çš„è®°å½•ï¼Œå¹¶é™åˆ¶è¿”å›ç»“æœçš„æ•°é‡ã€‚RowBounds ç±»çš„ offset å’Œ limit å€¼åªæœ‰åœ¨æ„é€ å‡½æ•°æ—¶æ‰èƒ½ä¼ å…¥ï¼Œå…¶å®ƒæ—¶å€™æ˜¯ä¸èƒ½ä¿®æ”¹çš„ã€‚ 123int offset = 100;int limit = 25;RowBounds rowBounds = new RowBounds(offset, limit); æ•°æ®åº“é©±åŠ¨å†³å®šäº†ç•¥è¿‡è®°å½•æ—¶çš„æŸ¥è¯¢æ•ˆç‡ã€‚ä¸ºäº†è·å¾—æœ€ä½³çš„æ€§èƒ½ï¼Œå»ºè®®å°† ResultSet ç±»å‹è®¾ç½®ä¸º SCROLL_SENSITIVE æˆ– SCROLL_INSENSITIVEï¼ˆæ¢å¥è¯è¯´ï¼šä¸è¦ä½¿ç”¨ FORWARD_ONLYï¼‰ã€‚ ResultHandler å‚æ•°å…è®¸è‡ªå®šä¹‰æ¯è¡Œç»“æœçš„å¤„ç†è¿‡ç¨‹ã€‚ä½ å¯ä»¥å°†å®ƒæ·»åŠ åˆ° List ä¸­ã€åˆ›å»º Map å’Œ Setï¼Œç”šè‡³ä¸¢å¼ƒæ¯ä¸ªè¿”å›å€¼ï¼Œåªä¿ç•™è®¡ç®—åçš„ç»Ÿè®¡ç»“æœã€‚ä½ å¯ä»¥ä½¿ç”¨ ResultHandler åšå¾ˆå¤šäº‹ï¼Œè¿™å…¶å®å°±æ˜¯ MyBatis æ„å»º ç»“æœåˆ—è¡¨çš„å†…éƒ¨å®ç°åŠæ³•ã€‚ ä»ç‰ˆæœ¬ 3.4.6 å¼€å§‹ï¼ŒResultHandler ä¼šåœ¨å­˜å‚¨è¿‡ç¨‹çš„ REFCURSOR è¾“å‡ºå‚æ•°ä¸­ä¼ é€’ä½¿ç”¨çš„ CALLABLE è¯­å¥ã€‚ å®ƒçš„æ¥å£å¾ˆç®€å•ï¼š 1234package org.apache.ibatis.session;public interface ResultHandler&lt;T&gt; &#123; void handleResult(ResultContext&lt;? extends T&gt; context);&#125; ResultContext å‚æ•°å…è®¸ä½ è®¿é—®ç»“æœå¯¹è±¡å’Œå½“å‰å·²è¢«åˆ›å»ºçš„å¯¹è±¡æ•°ç›®ï¼Œå¦å¤–è¿˜æä¾›äº†ä¸€ä¸ªè¿”å›å€¼ä¸º Boolean çš„ stop æ–¹æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨æ­¤ stop æ–¹æ³•æ¥åœæ­¢ MyBatis åŠ è½½æ›´å¤šçš„ç»“æœã€‚ ä½¿ç”¨ ResultHandler çš„æ—¶å€™éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ä¸ªé™åˆ¶ï¼š ä½¿ç”¨å¸¦ ResultHandler å‚æ•°çš„æ–¹æ³•æ—¶ï¼Œæ”¶åˆ°çš„æ•°æ®ä¸ä¼šè¢«ç¼“å­˜ã€‚ å½“ä½¿ç”¨é«˜çº§çš„ç»“æœæ˜ å°„é›†ï¼ˆresultMapï¼‰æ—¶ï¼ŒMyBatis å¾ˆå¯èƒ½éœ€è¦æ•°è¡Œç»“æœæ¥æ„é€ ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœä½ ä½¿ç”¨äº† ResultHandlerï¼Œä½ å¯èƒ½ä¼šæ¥æ”¶åˆ°å…³è”ï¼ˆassociationï¼‰æˆ–è€…é›†åˆï¼ˆcollectionï¼‰ä¸­å°šæœªè¢«å®Œæ•´å¡«å……çš„å¯¹è±¡ã€‚ ç«‹å³æ‰¹é‡æ›´æ–°æ–¹æ³•å½“ä½ å°† ExecutorType è®¾ç½®ä¸º ExecutorType.BATCH æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¸…é™¤ï¼ˆæ‰§è¡Œï¼‰ç¼“å­˜åœ¨ JDBC é©±åŠ¨ç±»ä¸­çš„æ‰¹é‡æ›´æ–°è¯­å¥ã€‚ 1List&lt;BatchResult&gt; flushStatements() äº‹åŠ¡æ§åˆ¶æ–¹æ³•æœ‰å››ä¸ªæ–¹æ³•ç”¨æ¥æ§åˆ¶äº‹åŠ¡ä½œç”¨åŸŸã€‚å½“ç„¶ï¼Œå¦‚æœä½ å·²ç»è®¾ç½®äº†è‡ªåŠ¨æäº¤æˆ–ä½ ä½¿ç”¨äº†å¤–éƒ¨äº‹åŠ¡ç®¡ç†å™¨ï¼Œè¿™äº›æ–¹æ³•å°±æ²¡ä»€ä¹ˆä½œç”¨äº†ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ­£åœ¨ä½¿ç”¨ç”± Connection å®ä¾‹æ§åˆ¶çš„ JDBC äº‹åŠ¡ç®¡ç†å™¨ï¼Œé‚£ä¹ˆè¿™å››ä¸ªæ–¹æ³•å°±ä¼šæ´¾ä¸Šç”¨åœºï¼š 1234void commit()void commit(boolean force)void rollback()void rollback(boolean force) é»˜è®¤æƒ…å†µä¸‹ MyBatis ä¸ä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œé™¤éå®ƒä¾¦æµ‹åˆ°è°ƒç”¨äº†æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ–¹æ³•æ”¹å˜äº†æ•°æ®åº“ã€‚å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨è¿™äº›æ–¹æ³•æäº¤ä¿®æ”¹ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨ commit å’Œ rollback æ–¹æ³•å‚æ•°ä¸­ä¼ å…¥ true å€¼ï¼Œæ¥ä¿è¯äº‹åŠ¡è¢«æ­£å¸¸æäº¤ï¼ˆæ³¨æ„ï¼Œåœ¨è‡ªåŠ¨æäº¤æ¨¡å¼æˆ–è€…ä½¿ç”¨äº†å¤–éƒ¨äº‹åŠ¡ç®¡ç†å™¨çš„æƒ…å†µä¸‹ï¼Œè®¾ç½® force å€¼å¯¹ session æ— æ•ˆï¼‰ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½ æ— éœ€è°ƒç”¨ rollback()ï¼Œå› ä¸º MyBatis ä¼šåœ¨ä½ æ²¡æœ‰è°ƒç”¨ commit æ—¶æ›¿ä½ å®Œæˆå›æ»šæ“ä½œã€‚ä¸è¿‡ï¼Œå½“ä½ è¦åœ¨ä¸€ä¸ªå¯èƒ½å¤šæ¬¡æäº¤æˆ–å›æ»šçš„ session ä¸­è¯¦ç»†æ§åˆ¶äº‹åŠ¡ï¼Œå›æ»šæ“ä½œå°±æ´¾ä¸Šç”¨åœºäº†ã€‚ æç¤º MyBatis-Spring å’Œ MyBatis-Guice æä¾›äº†å£°æ˜å¼äº‹åŠ¡å¤„ç†ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨ä½¿ç”¨ Mybatis çš„åŒæ—¶ä½¿ç”¨äº† Spring æˆ–è€… Guiceï¼Œè¯·å‚è€ƒå®ƒä»¬çš„æ‰‹å†Œä»¥è·å–æ›´å¤šçš„å†…å®¹ã€‚ æœ¬åœ°ç¼“å­˜Mybatis ä½¿ç”¨åˆ°äº†ä¸¤ç§ç¼“å­˜ï¼šæœ¬åœ°ç¼“å­˜ï¼ˆlocal cacheï¼‰å’ŒäºŒçº§ç¼“å­˜ï¼ˆsecond level cacheï¼‰ã€‚ æ¯å½“ä¸€ä¸ªæ–° session è¢«åˆ›å»ºï¼ŒMyBatis å°±ä¼šåˆ›å»ºä¸€ä¸ªä¸ä¹‹ç›¸å…³è”çš„æœ¬åœ°ç¼“å­˜ã€‚ä»»ä½•åœ¨ session æ‰§è¡Œè¿‡çš„æŸ¥è¯¢ç»“æœéƒ½ä¼šè¢«ä¿å­˜åœ¨æœ¬åœ°ç¼“å­˜ä¸­ï¼Œæ‰€ä»¥ï¼Œå½“å†æ¬¡æ‰§è¡Œå‚æ•°ç›¸åŒçš„ç›¸åŒæŸ¥è¯¢æ—¶ï¼Œå°±ä¸éœ€è¦å®é™…æŸ¥è¯¢æ•°æ®åº“äº†ã€‚æœ¬åœ°ç¼“å­˜å°†ä¼šåœ¨åšå‡ºä¿®æ”¹ã€äº‹åŠ¡æäº¤æˆ–å›æ»šï¼Œä»¥åŠå…³é—­ session æ—¶æ¸…ç©ºã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæœ¬åœ°ç¼“å­˜æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸç­‰åŒäºæ•´ä¸ª session çš„å‘¨æœŸã€‚ç”±äºç¼“å­˜ä¼šè¢«ç”¨æ¥è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜å’ŒåŠ å¿«é‡å¤åµŒå¥—æŸ¥è¯¢çš„é€Ÿåº¦ï¼Œæ‰€ä»¥æ— æ³•å°†å…¶å®Œå…¨ç¦ç”¨ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡è®¾ç½® localCacheScope&#x3D;STATEMENT æ¥åªåœ¨è¯­å¥æ‰§è¡Œæ—¶ä½¿ç”¨ç¼“å­˜ã€‚ æ³¨æ„ï¼Œå¦‚æœ localCacheScope è¢«è®¾ç½®ä¸º SESSIONï¼Œå¯¹äºæŸä¸ªå¯¹è±¡ï¼ŒMyBatis å°†è¿”å›åœ¨æœ¬åœ°ç¼“å­˜ä¸­å”¯ä¸€å¯¹è±¡çš„å¼•ç”¨ã€‚å¯¹è¿”å›çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ listï¼‰åšå‡ºçš„ä»»ä½•ä¿®æ”¹å°†ä¼šå½±å“æœ¬åœ°ç¼“å­˜çš„å†…å®¹ï¼Œè¿›è€Œå°†ä¼šå½±å“åˆ°åœ¨æœ¬æ¬¡ session ä¸­ä»ç¼“å­˜è¿”å›çš„å€¼ã€‚å› æ­¤ï¼Œä¸è¦å¯¹ MyBatis æ‰€è¿”å›çš„å¯¹è±¡ä½œå‡ºæ›´æ”¹ï¼Œä»¥é˜²åæ‚£ã€‚ ä½ å¯ä»¥éšæ—¶è°ƒç”¨ä»¥ä¸‹æ–¹æ³•æ¥æ¸…ç©ºæœ¬åœ°ç¼“å­˜ï¼š 1void clearCache() ç¡®ä¿ SqlSession è¢«å…³é—­1void close() å¯¹äºä½ æ‰“å¼€çš„ä»»ä½• sessionï¼Œä½ éƒ½è¦ä¿è¯å®ƒä»¬è¢«å¦¥å–„å…³é—­ï¼Œè¿™å¾ˆé‡è¦ã€‚ä¿è¯å¦¥å–„å…³é—­çš„æœ€ä½³ä»£ç æ¨¡å¼æ˜¯è¿™æ ·çš„ï¼š 12345678SqlSession session = sqlSessionFactory.openSession();try (SqlSession session = sqlSessionFactory.openSession()) &#123; // å‡è®¾ä¸‹é¢ä¸‰è¡Œä»£ç æ˜¯ä½ çš„ä¸šåŠ¡é€»è¾‘ session.insert(...); session.update(...); session.delete(...); session.commit();&#125; æç¤º å’Œ SqlSessionFactory ä¸€æ ·ï¼Œä½ å¯ä»¥è°ƒç”¨å½“å‰ä½¿ç”¨çš„ SqlSession çš„ getConfiguration æ–¹æ³•æ¥è·å¾— Configuration å®ä¾‹ã€‚ 1Configuration getConfiguration() ä½¿ç”¨æ˜ å°„å™¨1&lt;T&gt; T getMapper(Class&lt;T&gt; type) ä¸Šè¿°çš„å„ä¸ª insertã€updateã€delete å’Œ select æ–¹æ³•éƒ½å¾ˆå¼ºå¤§ï¼Œä½†ä¹Ÿæœ‰äº›ç¹çï¼Œå®ƒä»¬å¹¶ä¸ç¬¦åˆç±»å‹å®‰å…¨ï¼Œå¯¹ä½ çš„ IDE å’Œå•å…ƒæµ‹è¯•ä¹Ÿä¸æ˜¯é‚£ä¹ˆå‹å¥½ã€‚å› æ­¤ï¼Œä½¿ç”¨æ˜ å°„å™¨ç±»æ¥æ‰§è¡Œæ˜ å°„è¯­å¥æ˜¯æ›´å¸¸è§çš„åšæ³•ã€‚ æˆ‘ä»¬å·²ç»åœ¨ä¹‹å‰çš„å…¥é—¨ç« èŠ‚ä¸­è§åˆ°è¿‡ä¸€ä¸ªä½¿ç”¨æ˜ å°„å™¨çš„ç¤ºä¾‹ã€‚ä¸€ä¸ªæ˜ å°„å™¨ç±»å°±æ˜¯ä¸€ä¸ªä»…éœ€å£°æ˜ä¸ SqlSession æ–¹æ³•ç›¸åŒ¹é…æ–¹æ³•çš„æ¥å£ã€‚ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†ä¸€äº›æ–¹æ³•ç­¾åä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•æ˜ å°„åˆ° SqlSession ä¸Šçš„ã€‚ 123456789101112131415public interface AuthorMapper &#123; // (Author) selectOne(&quot;selectAuthor&quot;,5); Author selectAuthor(int id); // (List&lt;Author&gt;) selectList(â€œselectAuthorsâ€) List&lt;Author&gt; selectAuthors(); // (Map&lt;Integer,Author&gt;) selectMap(&quot;selectAuthors&quot;, &quot;id&quot;) @MapKey(&quot;id&quot;) Map&lt;Integer, Author&gt; selectAuthors(); // insert(&quot;insertAuthor&quot;, author) int insertAuthor(Author author); // updateAuthor(&quot;updateAuthor&quot;, author) int updateAuthor(Author author); // delete(&quot;deleteAuthor&quot;,5) int deleteAuthor(int id);&#125; æ€»ä¹‹ï¼Œæ¯ä¸ªæ˜ å°„å™¨æ–¹æ³•ç­¾ååº”è¯¥åŒ¹é…ç›¸å…³è”çš„ SqlSession æ–¹æ³•ï¼Œå­—ç¬¦ä¸²å‚æ•° ID æ— éœ€åŒ¹é…ã€‚è€Œæ˜¯ç”±æ–¹æ³•ååŒ¹é…æ˜ å°„è¯­å¥çš„ IDã€‚ æ­¤å¤–ï¼Œè¿”å›ç±»å‹å¿…é¡»åŒ¹é…æœŸæœ›çš„ç»“æœç±»å‹ï¼Œè¿”å›å•ä¸ªå€¼æ—¶ï¼Œè¿”å›ç±»å‹åº”è¯¥æ˜¯è¿”å›å€¼çš„ç±»ï¼Œè¿”å›å¤šä¸ªå€¼æ—¶ï¼Œåˆ™ä¸ºæ•°ç»„æˆ–é›†åˆç±»ï¼Œå¦å¤–ä¹Ÿå¯ä»¥æ˜¯æ¸¸æ ‡ï¼ˆCursorï¼‰ã€‚æ‰€æœ‰å¸¸ç”¨çš„ç±»å‹éƒ½æ˜¯æ”¯æŒçš„ï¼ŒåŒ…æ‹¬ï¼šåŸå§‹ç±»å‹ã€Mapã€POJO å’Œ JavaBeanã€‚ æç¤º æ˜ å°„å™¨æ¥å£ä¸éœ€è¦å»å®ç°ä»»ä½•æ¥å£æˆ–ç»§æ‰¿è‡ªä»»ä½•ç±»ã€‚åªè¦æ–¹æ³•ç­¾åå¯ä»¥è¢«ç”¨æ¥å”¯ä¸€è¯†åˆ«å¯¹åº”çš„æ˜ å°„è¯­å¥å°±å¯ä»¥äº†ã€‚ æç¤º æ˜ å°„å™¨æ¥å£å¯ä»¥ç»§æ‰¿è‡ªå…¶ä»–æ¥å£ã€‚åœ¨ä½¿ç”¨ XML æ¥ç»‘å®šæ˜ å°„å™¨æ¥å£æ—¶ï¼Œä¿è¯è¯­å¥å¤„äºåˆé€‚çš„å‘½åç©ºé—´ä¸­å³å¯ã€‚å”¯ä¸€çš„é™åˆ¶æ˜¯ï¼Œä¸èƒ½åœ¨ä¸¤ä¸ªå…·æœ‰ç»§æ‰¿å…³ç³»çš„æ¥å£ä¸­æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ç­¾åï¼ˆè¿™æ˜¯æ½œåœ¨çš„å±é™©åšæ³•ï¼Œä¸å¯å–ï¼‰ã€‚ ä½ å¯ä»¥ä¼ é€’å¤šä¸ªå‚æ•°ç»™ä¸€ä¸ªæ˜ å°„å™¨æ–¹æ³•ã€‚åœ¨å¤šä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤å®ƒä»¬å°†ä¼šä»¥ param åŠ ä¸Šå®ƒä»¬åœ¨å‚æ•°åˆ—è¡¨ä¸­çš„ä½ç½®æ¥å‘½åï¼Œæ¯”å¦‚ï¼š#{param1}ã€#{param2}ç­‰ã€‚å¦‚æœä½ æƒ³ï¼ˆåœ¨æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼‰è‡ªå®šä¹‰å‚æ•°çš„åç§°ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨å‚æ•°ä¸Šä½¿ç”¨ @Param(â€œparamNameâ€) æ³¨è§£ã€‚ ä½ ä¹Ÿå¯ä»¥ç»™æ–¹æ³•ä¼ é€’ä¸€ä¸ª RowBounds å®ä¾‹æ¥é™åˆ¶æŸ¥è¯¢ç»“æœã€‚ æ˜ å°„å™¨æ³¨è§£è®¾è®¡åˆæœŸçš„ MyBatis æ˜¯ä¸€ä¸ª XML é©±åŠ¨çš„æ¡†æ¶ã€‚é…ç½®ä¿¡æ¯æ˜¯åŸºäº XML çš„ï¼Œæ˜ å°„è¯­å¥ä¹Ÿæ˜¯å®šä¹‰åœ¨ XML ä¸­çš„ã€‚è€Œåœ¨ MyBatis 3 ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†å…¶å®ƒçš„é…ç½®æ–¹å¼ã€‚MyBatis 3 æ„å»ºåœ¨å…¨é¢ä¸”å¼ºå¤§çš„åŸºäº Java è¯­è¨€çš„é…ç½® API ä¹‹ä¸Šã€‚å®ƒæ˜¯ XML å’Œæ³¨è§£é…ç½®çš„åŸºç¡€ã€‚æ³¨è§£æä¾›äº†ä¸€ç§ç®€å•ä¸”ä½æˆæœ¬çš„æ–¹å¼æ¥å®ç°ç®€å•çš„æ˜ å°„è¯­å¥ã€‚ æç¤º ä¸å¹¸çš„æ˜¯ï¼ŒJava æ³¨è§£çš„è¡¨è¾¾èƒ½åŠ›å’Œçµæ´»æ€§ååˆ†æœ‰é™ã€‚å°½ç®¡æˆ‘ä»¬èŠ±äº†å¾ˆå¤šæ—¶é—´åœ¨è°ƒæŸ¥ã€è®¾è®¡å’Œè¯•éªŒä¸Šï¼Œä½†æœ€å¼ºå¤§çš„ MyBatis æ˜ å°„å¹¶ä¸èƒ½ç”¨æ³¨è§£æ¥æ„å»ºâ€”â€”æˆ‘ä»¬çœŸæ²¡å¼€ç©ç¬‘ã€‚è€Œ C# å±æ€§å°±æ²¡æœ‰è¿™äº›é™åˆ¶ï¼Œå› æ­¤ MyBatis.NET çš„é…ç½®ä¼šæ¯” XML æœ‰æ›´å¤§çš„é€‰æ‹©ä½™åœ°ã€‚è™½è¯´å¦‚æ­¤ï¼ŒåŸºäº Java æ³¨è§£çš„é…ç½®è¿˜æ˜¯æœ‰å®ƒçš„å¥½å¤„çš„ã€‚ æ³¨è§£å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š æ³¨è§£ ä½¿ç”¨å¯¹è±¡ XML ç­‰ä»·å½¢å¼ æè¿° @CacheNamespace ç±» &lt;cache&gt; ä¸ºç»™å®šçš„å‘½åç©ºé—´ï¼ˆæ¯”å¦‚ç±»ï¼‰é…ç½®ç¼“å­˜ã€‚å±æ€§ï¼šimplemetationã€evictionã€flushIntervalã€sizeã€readWriteã€blockingã€propertiesã€‚ @Property N&#x2F;A &lt;property&gt; æŒ‡å®šå‚æ•°å€¼æˆ–å ä½ç¬¦ï¼ˆplaceholderï¼‰ï¼ˆè¯¥å ä½ç¬¦èƒ½è¢« mybatis-config.xml å†…çš„é…ç½®å±æ€§æ›¿æ¢ï¼‰ã€‚å±æ€§ï¼šnameã€valueã€‚ï¼ˆä»…åœ¨ MyBatis 3.4.2 ä»¥ä¸Šå¯ç”¨ï¼‰ @CacheNamespaceRef ç±» &lt;cacheRef&gt; å¼•ç”¨å¦å¤–ä¸€ä¸ªå‘½åç©ºé—´çš„ç¼“å­˜ä»¥ä¾›ä½¿ç”¨ã€‚æ³¨æ„ï¼Œå³ä½¿å…±äº«ç›¸åŒçš„å…¨é™å®šç±»åï¼Œåœ¨ XML æ˜ å°„æ–‡ä»¶ä¸­å£°æ˜çš„ç¼“å­˜ä»è¢«è¯†åˆ«ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å‘½åç©ºé—´ã€‚å±æ€§ï¼švalueã€nameã€‚å¦‚æœä½ ä½¿ç”¨äº†è¿™ä¸ªæ³¨è§£ï¼Œä½ åº”è®¾ç½® value æˆ–è€… name å±æ€§çš„å…¶ä¸­ä¸€ä¸ªã€‚value å±æ€§ç”¨äºæŒ‡å®šèƒ½å¤Ÿè¡¨ç¤ºè¯¥å‘½åç©ºé—´çš„ Java ç±»å‹ï¼ˆå‘½åç©ºé—´åå°±æ˜¯è¯¥ Java ç±»å‹çš„å…¨é™å®šç±»åï¼‰ï¼Œname å±æ€§ï¼ˆè¿™ä¸ªå±æ€§ä»…åœ¨ MyBatis 3.4.2 ä»¥ä¸Šå¯ç”¨ï¼‰åˆ™ç›´æ¥æŒ‡å®šäº†å‘½åç©ºé—´çš„åå­—ã€‚ @ConstructorArgs æ–¹æ³• &lt;constructor&gt; æ”¶é›†ä¸€ç»„ç»“æœä»¥ä¼ é€’ç»™ä¸€ä¸ªç»“æœå¯¹è±¡çš„æ„é€ æ–¹æ³•ã€‚å±æ€§ï¼švalueï¼Œå®ƒæ˜¯ä¸€ä¸ª Arg æ•°ç»„ã€‚ @Arg N&#x2F;A &lt;arg&gt;``&lt;idArg&gt; ConstructorArgs é›†åˆçš„ä¸€éƒ¨åˆ†ï¼Œä»£è¡¨ä¸€ä¸ªæ„é€ æ–¹æ³•å‚æ•°ã€‚å±æ€§ï¼šidã€columnã€javaTypeã€jdbcTypeã€typeHandlerã€selectã€resultMapã€‚id å±æ€§å’Œ XML å…ƒç´  &lt;idArg&gt; ç›¸ä¼¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å±æ€§æ˜¯å¦ç”¨äºå”¯ä¸€æ ‡è¯†å’Œæ¯”è¾ƒå¯¹è±¡ã€‚ä»ç‰ˆæœ¬ 3.5.4 å¼€å§‹ï¼Œè¯¥æ³¨è§£å˜ä¸ºå¯é‡å¤æ³¨è§£ã€‚ @TypeDiscriminator æ–¹æ³• &lt;discriminator&gt; å†³å®šä½¿ç”¨ä½•ç§ç»“æœæ˜ å°„çš„ä¸€ç»„å–å€¼ï¼ˆcaseï¼‰ã€‚å±æ€§ï¼šcolumnã€javaTypeã€jdbcTypeã€typeHandlerã€casesã€‚cases å±æ€§æ˜¯ä¸€ä¸ª Case çš„æ•°ç»„ã€‚ @Case N&#x2F;A &lt;case&gt; è¡¨ç¤ºæŸä¸ªå€¼çš„ä¸€ä¸ªå–å€¼ä»¥åŠè¯¥å–å€¼å¯¹åº”çš„æ˜ å°„ã€‚å±æ€§ï¼švalueã€typeã€resultsã€‚results å±æ€§æ˜¯ä¸€ä¸ª Results çš„æ•°ç»„ï¼Œå› æ­¤è¿™ä¸ªæ³¨è§£å®é™…ä¸Šå’Œ ResultMap å¾ˆç›¸ä¼¼ï¼Œç”±ä¸‹é¢çš„ Results æ³¨è§£æŒ‡å®šã€‚ @Results æ–¹æ³• &lt;resultMap&gt; ä¸€ç»„ç»“æœæ˜ å°„ï¼ŒæŒ‡å®šäº†å¯¹æŸä¸ªç‰¹å®šç»“æœåˆ—ï¼Œæ˜ å°„åˆ°æŸä¸ªå±æ€§æˆ–å­—æ®µçš„æ–¹å¼ã€‚å±æ€§ï¼švalueã€idã€‚value å±æ€§æ˜¯ä¸€ä¸ª Result æ³¨è§£çš„æ•°ç»„ã€‚è€Œ id å±æ€§åˆ™æ˜¯ç»“æœæ˜ å°„çš„åç§°ã€‚ä»ç‰ˆæœ¬ 3.5.4 å¼€å§‹ï¼Œè¯¥æ³¨è§£å˜ä¸ºå¯é‡å¤æ³¨è§£ã€‚ @Result N&#x2F;A &lt;result&gt;``&lt;id&gt; åœ¨åˆ—å’Œå±æ€§æˆ–å­—æ®µä¹‹é—´çš„å•ä¸ªç»“æœæ˜ å°„ã€‚å±æ€§ï¼šidã€columnã€javaTypeã€jdbcTypeã€typeHandlerã€oneã€manyã€‚id å±æ€§å’Œ XML å…ƒç´  &lt;id&gt; ç›¸ä¼¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å±æ€§æ˜¯å¦ç”¨äºå”¯ä¸€æ ‡è¯†å’Œæ¯”è¾ƒå¯¹è±¡ã€‚one å±æ€§æ˜¯ä¸€ä¸ªå…³è”ï¼Œå’Œ &lt;association&gt; ç±»ä¼¼ï¼Œè€Œ many å±æ€§åˆ™æ˜¯é›†åˆå…³è”ï¼Œå’Œ &lt;collection&gt; ç±»ä¼¼ã€‚è¿™æ ·å‘½åæ˜¯ä¸ºäº†é¿å…äº§ç”Ÿåç§°å†²çªã€‚ @One N&#x2F;A &lt;association&gt; å¤æ‚ç±»å‹çš„å•ä¸ªå±æ€§æ˜ å°„ã€‚å±æ€§ï¼š selectï¼ŒæŒ‡å®šå¯åŠ è½½åˆé€‚ç±»å‹å®ä¾‹çš„æ˜ å°„è¯­å¥ï¼ˆä¹Ÿå°±æ˜¯æ˜ å°„å™¨æ–¹æ³•ï¼‰å…¨é™å®šåï¼› fetchTypeï¼ŒæŒ‡å®šåœ¨è¯¥æ˜ å°„ä¸­è¦†ç›–å…¨å±€é…ç½®å‚æ•° lazyLoadingEnabledï¼› resultMapï¼ˆ3.5.5ä»¥ä¸Šå¯ç”¨ï¼‰, ç»“æœé›†çš„å®Œå…¨é™å®šåï¼Œè¯¥ç»“æœæ˜ å°„åˆ°æŸ¥è¯¢ç»“æœä¸­çš„é›†åˆå¯¹è±¡ï¼› columnPrefixï¼ˆ3.5.5ä»¥ä¸Šå¯ç”¨ï¼‰ï¼Œåœ¨åµŒå¥—çš„ç»“æœé›†ä¸­å¯¹æ‰€æŸ¥è¯¢çš„åˆ—è¿›è¡Œåˆ†ç»„çš„åˆ—å‰ç¼€ã€‚ æç¤º æ³¨è§£ API ä¸æ”¯æŒè”åˆæ˜ å°„ã€‚è¿™æ˜¯ç”±äº Java æ³¨è§£ä¸å…è®¸äº§ç”Ÿå¾ªç¯å¼•ç”¨ã€‚ @Many N&#x2F;A &lt;collection&gt; å¤æ‚ç±»å‹çš„é›†åˆå±æ€§æ˜ å°„ã€‚å±æ€§ï¼š selectï¼ŒæŒ‡å®šå¯åŠ è½½åˆé€‚ç±»å‹å®ä¾‹é›†åˆçš„æ˜ å°„è¯­å¥ï¼ˆä¹Ÿå°±æ˜¯æ˜ å°„å™¨æ–¹æ³•ï¼‰å…¨é™å®šåï¼› fetchTypeï¼ŒæŒ‡å®šåœ¨è¯¥æ˜ å°„ä¸­è¦†ç›–å…¨å±€é…ç½®å‚æ•° lazyLoadingEnabled ï¼› resultMapï¼ˆ3.5.5ä»¥ä¸Šå¯ç”¨ï¼‰ï¼Œç»“æœé›†çš„å®Œå…¨é™å®šåï¼Œè¯¥ç»“æœæ˜ å°„åˆ°æŸ¥è¯¢ç»“æœä¸­çš„é›†åˆå¯¹è±¡ï¼› columnPrefixï¼ˆ3.5.5ä»¥ä¸Šå¯ç”¨ï¼‰ï¼Œåœ¨åµŒå¥—çš„ç»“æœé›†ä¸­å¯¹æ‰€æŸ¥è¯¢çš„åˆ—è¿›è¡Œåˆ†ç»„çš„åˆ—å‰ç¼€ã€‚ æç¤º æ³¨è§£ API ä¸æ”¯æŒè”åˆæ˜ å°„ã€‚è¿™æ˜¯ç”±äº Java æ³¨è§£ä¸å…è®¸äº§ç”Ÿå¾ªç¯å¼•ç”¨ã€‚ @MapKey æ–¹æ³• ä¾›è¿”å›å€¼ä¸º Map çš„æ–¹æ³•ä½¿ç”¨çš„æ³¨è§£ã€‚å®ƒä½¿ç”¨å¯¹è±¡çš„æŸä¸ªå±æ€§ä½œä¸º keyï¼Œå°†å¯¹è±¡ List è½¬åŒ–ä¸º Mapã€‚å±æ€§ï¼švalueï¼ŒæŒ‡å®šä½œä¸º Map çš„ key å€¼çš„å¯¹è±¡å±æ€§åã€‚ @Options æ–¹æ³• æ˜ å°„è¯­å¥çš„å±æ€§ è¯¥æ³¨è§£å…è®¸ä½ æŒ‡å®šå¤§éƒ¨åˆ†å¼€å…³å’Œé…ç½®é€‰é¡¹ï¼Œå®ƒä»¬é€šå¸¸åœ¨æ˜ å°„è¯­å¥ä¸Šä½œä¸ºå±æ€§å‡ºç°ã€‚ä¸åœ¨æ³¨è§£ä¸Šæä¾›å¤§é‡çš„å±æ€§ç›¸æ¯”ï¼ŒOptions æ³¨è§£æä¾›äº†ä¸€è‡´ã€æ¸…æ™°çš„æ–¹å¼æ¥æŒ‡å®šé€‰é¡¹ã€‚å±æ€§ï¼šuseCache=trueã€flushCache=FlushCachePolicy.DEFAULTã€resultSetType=DEFAULTã€statementType=PREPAREDã€fetchSize=-1ã€timeout=-1ã€useGeneratedKeys=falseã€keyProperty=&quot;&quot;ã€keyColumn=&quot;&quot;ã€resultSets=&quot;&quot;, databaseId=&quot;&quot;ã€‚æ³¨æ„ï¼ŒJava æ³¨è§£æ— æ³•æŒ‡å®š null å€¼ã€‚å› æ­¤ï¼Œä¸€æ—¦ä½ ä½¿ç”¨äº† Options æ³¨è§£ï¼Œä½ çš„è¯­å¥å°±ä¼šè¢«ä¸Šè¿°å±æ€§çš„é»˜è®¤å€¼æ‰€å½±å“ã€‚è¦æ³¨æ„é¿å…é»˜è®¤å€¼å¸¦æ¥çš„éé¢„æœŸè¡Œä¸ºã€‚ databaseIdï¼ˆ3.5.5ä»¥ä¸Šå¯ç”¨ï¼‰, å¦‚æœæœ‰ä¸€ä¸ªé…ç½®å¥½çš„ DatabaseIdProvider, MyBatis ä¼šåŠ è½½ä¸å¸¦ databaseId å±æ€§å’Œå¸¦æœ‰åŒ¹é…å½“å‰æ•°æ®åº“ databaseId å±æ€§çš„æ‰€æœ‰è¯­å¥ã€‚å¦‚æœåŒæ—¶å­˜åœ¨å¸¦ databaseId å’Œä¸å¸¦ databaseId å±æ€§çš„ç›¸åŒè¯­å¥ï¼Œåˆ™åè€…ä¼šè¢«èˆå¼ƒã€‚ æ³¨æ„ï¼škeyColumn å±æ€§åªåœ¨æŸäº›æ•°æ®åº“ä¸­æœ‰æ•ˆï¼ˆå¦‚ Oracleã€PostgreSQL ç­‰ï¼‰ã€‚è¦äº†è§£æ›´å¤šå…³äº keyColumn å’Œ keyProperty å¯é€‰å€¼ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹â€œinsert, update å’Œ deleteâ€ä¸€èŠ‚ã€‚ @Insert``@Update``@Delete``@Select æ–¹æ³• &lt;insert&gt;``&lt;update&gt;``&lt;delete&gt;``&lt;select&gt; æ¯ä¸ªæ³¨è§£åˆ†åˆ«ä»£è¡¨å°†ä¼šè¢«æ‰§è¡Œçš„ SQL è¯­å¥ã€‚å®ƒä»¬ç”¨å­—ç¬¦ä¸²æ•°ç»„ï¼ˆæˆ–å•ä¸ªå­—ç¬¦ä¸²ï¼‰ä½œä¸ºå‚æ•°ã€‚å¦‚æœä¼ é€’çš„æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œå­—ç¬¦ä¸²æ•°ç»„ä¼šè¢«è¿æ¥æˆå•ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²ä¹‹é—´åŠ å…¥ä¸€ä¸ªç©ºæ ¼ã€‚è¿™æœ‰æ•ˆåœ°é¿å…äº†ç”¨ Java ä»£ç æ„å»º SQL è¯­å¥æ—¶äº§ç”Ÿçš„â€œä¸¢å¤±ç©ºæ ¼â€é—®é¢˜ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æå‰æ‰‹åŠ¨è¿æ¥å¥½å­—ç¬¦ä¸²ã€‚å±æ€§ï¼švalueï¼ŒæŒ‡å®šç”¨æ¥ç»„æˆå•ä¸ª SQL è¯­å¥çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚ databaseIdï¼ˆ3.5.5ä»¥ä¸Šå¯ç”¨ï¼‰, å¦‚æœæœ‰ä¸€ä¸ªé…ç½®å¥½çš„ DatabaseIdProvider, MyBatis ä¼šåŠ è½½ä¸å¸¦ databaseId å±æ€§å’Œå¸¦æœ‰åŒ¹é…å½“å‰æ•°æ®åº“ databaseId å±æ€§çš„æ‰€æœ‰è¯­å¥ã€‚å¦‚æœåŒæ—¶å­˜åœ¨å¸¦ databaseId å’Œä¸å¸¦ databaseId å±æ€§çš„ç›¸åŒè¯­å¥ï¼Œåˆ™åè€…ä¼šè¢«èˆå¼ƒã€‚ @InsertProvider``@UpdateProvider``@DeleteProvider``@SelectProvider æ–¹æ³• &lt;insert&gt;``&lt;update&gt;``&lt;delete&gt;``&lt;select&gt; å…è®¸æ„å»ºåŠ¨æ€ SQLã€‚è¿™äº›å¤‡é€‰çš„ SQL æ³¨è§£å…è®¸ä½ æŒ‡å®šè¿”å› SQL è¯­å¥çš„ç±»å’Œæ–¹æ³•ï¼Œä»¥ä¾›è¿è¡Œæ—¶æ‰§è¡Œã€‚ï¼ˆä» MyBatis 3.4.6 å¼€å§‹ï¼Œå¯ä»¥ä½¿ç”¨ CharSequence ä»£æ›¿ String æ¥ä½œä¸ºè¿”å›ç±»å‹ï¼‰ã€‚å½“æ‰§è¡Œæ˜ å°„è¯­å¥æ—¶ï¼ŒMyBatis ä¼šå®ä¾‹åŒ–æ³¨è§£æŒ‡å®šçš„ç±»ï¼Œå¹¶è°ƒç”¨æ³¨è§£æŒ‡å®šçš„æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡ ProviderContext ä¼ é€’æ˜ å°„æ–¹æ³•æ¥æ”¶åˆ°çš„å‚æ•°ã€â€Mapper interface typeâ€ å’Œ â€œMapper methodâ€ï¼ˆä»…åœ¨ MyBatis 3.4.5 ä»¥ä¸Šæ”¯æŒï¼‰ä½œä¸ºå‚æ•°ã€‚ï¼ˆMyBatis 3.4 ä»¥ä¸Šæ”¯æŒä¼ å…¥å¤šä¸ªå‚æ•°ï¼‰ å±æ€§ï¼švalueã€typeã€methodã€databaseIdã€‚ value and type å±æ€§ç”¨äºæŒ‡å®šç±»å (type å±æ€§æ˜¯ value çš„åˆ«å, ä½ å¿…é¡»æŒ‡å®šä»»æ„ä¸€ä¸ªã€‚ ä½†æ˜¯ä½ å¦‚æœåœ¨å…¨å±€é…ç½®ä¸­æŒ‡å®š defaultSqlProviderType ï¼Œä¸¤ä¸ªå±æ€§éƒ½å¯ä»¥å¿½ç•¥)ã€‚ method ç”¨äºæŒ‡å®šè¯¥ç±»çš„æ–¹æ³•åï¼ˆä»ç‰ˆæœ¬ 3.5.1 å¼€å§‹ï¼Œå¯ä»¥çœç•¥ method å±æ€§ï¼ŒMyBatis å°†ä¼šä½¿ç”¨ ProviderMethodResolver æ¥å£è§£ææ–¹æ³•çš„å…·ä½“å®ç°ã€‚å¦‚æœè§£æå¤±è´¥ï¼ŒMyBatis å°†ä¼šä½¿ç”¨åä¸º provideSql çš„é™çº§å®ç°ï¼‰ã€‚æç¤º æ¥ä¸‹æ¥çš„â€œSQL è¯­å¥æ„å»ºå™¨â€ä¸€ç« å°†ä¼šè®¨è®ºè¯¥è¯é¢˜ï¼Œä»¥å¸®åŠ©ä½ ä»¥æ›´æ¸…æ™°ã€æ›´ä¾¿äºé˜…è¯»çš„æ–¹å¼æ„å»ºåŠ¨æ€ SQLã€‚ databaseIdï¼ˆ3.5.5ä»¥ä¸Šå¯ç”¨ï¼‰, å¦‚æœæœ‰ä¸€ä¸ªé…ç½®å¥½çš„ DatabaseIdProvider, MyBatis ä¼šåŠ è½½ä¸å¸¦ databaseId å±æ€§å’Œå¸¦æœ‰åŒ¹é…å½“å‰æ•°æ®åº“ databaseId å±æ€§çš„æ‰€æœ‰è¯­å¥ã€‚å¦‚æœåŒæ—¶å­˜åœ¨å¸¦ databaseId å’Œä¸å¸¦ databaseId å±æ€§çš„ç›¸åŒè¯­å¥ï¼Œåˆ™åè€…ä¼šè¢«èˆå¼ƒã€‚ @Param å‚æ•° N&#x2F;A å¦‚æœä½ çš„æ˜ å°„æ–¹æ³•æ¥å—å¤šä¸ªå‚æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£è‡ªå®šä¹‰æ¯ä¸ªå‚æ•°çš„åå­—ã€‚å¦åˆ™åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤ RowBounds ä»¥å¤–çš„å‚æ•°ä¼šä»¥ â€œparamâ€ åŠ å‚æ•°ä½ç½®è¢«å‘½åã€‚ä¾‹å¦‚ #&#123;param1&#125;, #&#123;param2&#125;ã€‚å¦‚æœä½¿ç”¨äº† @Param(&quot;person&quot;)ï¼Œå‚æ•°å°±ä¼šè¢«å‘½åä¸º #&#123;person&#125;ã€‚ @SelectKey æ–¹æ³• &lt;selectKey&gt; è¿™ä¸ªæ³¨è§£çš„åŠŸèƒ½ä¸ &lt;selectKey&gt; æ ‡ç­¾å®Œå…¨ä¸€è‡´ã€‚è¯¥æ³¨è§£åªèƒ½åœ¨ @Insert æˆ– @InsertProvider æˆ– @Update æˆ– @UpdateProvider æ ‡æ³¨çš„æ–¹æ³•ä¸Šä½¿ç”¨ï¼Œå¦åˆ™å°†ä¼šè¢«å¿½ç•¥ã€‚å¦‚æœæ ‡æ³¨äº† @SelectKey æ³¨è§£ï¼ŒMyBatis å°†ä¼šå¿½ç•¥æ‰ç”± @Options æ³¨è§£æ‰€è®¾ç½®çš„ç”Ÿæˆä¸»é”®æˆ–è®¾ç½®ï¼ˆconfigurationï¼‰å±æ€§ã€‚å±æ€§ï¼šstatement ä»¥å­—ç¬¦ä¸²æ•°ç»„å½¢å¼æŒ‡å®šå°†ä¼šè¢«æ‰§è¡Œçš„ SQL è¯­å¥ï¼ŒkeyProperty æŒ‡å®šä½œä¸ºå‚æ•°ä¼ å…¥çš„å¯¹è±¡å¯¹åº”å±æ€§çš„åç§°ï¼Œè¯¥å±æ€§å°†ä¼šæ›´æ–°æˆæ–°çš„å€¼ï¼Œbefore å¯ä»¥æŒ‡å®šä¸º true æˆ– false ä»¥æŒ‡æ˜ SQL è¯­å¥åº”è¢«åœ¨æ’å…¥è¯­å¥çš„ä¹‹å‰è¿˜æ˜¯ä¹‹åæ‰§è¡Œã€‚resultType åˆ™æŒ‡å®š keyProperty çš„ Java ç±»å‹ã€‚statementType åˆ™ç”¨äºé€‰æ‹©è¯­å¥ç±»å‹ï¼Œå¯ä»¥é€‰æ‹© STATEMENTã€PREPARED æˆ– CALLABLE ä¹‹ä¸€ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”äº Statementã€PreparedStatement å’Œ CallableStatementã€‚é»˜è®¤å€¼æ˜¯ PREPAREDã€‚ databaseIdï¼ˆ3.5.5ä»¥ä¸Šå¯ç”¨ï¼‰, å¦‚æœæœ‰ä¸€ä¸ªé…ç½®å¥½çš„ DatabaseIdProvider, MyBatis ä¼šåŠ è½½ä¸å¸¦ databaseId å±æ€§å’Œå¸¦æœ‰åŒ¹é…å½“å‰æ•°æ®åº“ databaseId å±æ€§çš„æ‰€æœ‰è¯­å¥ã€‚å¦‚æœåŒæ—¶å­˜åœ¨å¸¦ databaseId å’Œä¸å¸¦ databaseId å±æ€§çš„ç›¸åŒè¯­å¥ï¼Œåˆ™åè€…ä¼šè¢«èˆå¼ƒã€‚ @ResultMap æ–¹æ³• N&#x2F;A è¿™ä¸ªæ³¨è§£ä¸º @Select æˆ–è€… @SelectProvider æ³¨è§£æŒ‡å®š XML æ˜ å°„ä¸­ &lt;resultMap&gt; å…ƒç´ çš„ idã€‚è¿™ä½¿å¾—æ³¨è§£çš„ select å¯ä»¥å¤ç”¨å·²åœ¨ XML ä¸­å®šä¹‰çš„ ResultMapã€‚å¦‚æœæ ‡æ³¨çš„ select æ³¨è§£ä¸­å­˜åœ¨ @Results æˆ–è€… @ConstructorArgs æ³¨è§£ï¼Œè¿™ä¸¤ä¸ªæ³¨è§£å°†è¢«æ­¤æ³¨è§£è¦†ç›–ã€‚ @ResultType æ–¹æ³• N&#x2F;A åœ¨ä½¿ç”¨äº†ç»“æœå¤„ç†å™¨çš„æƒ…å†µä¸‹ï¼Œéœ€è¦ä½¿ç”¨æ­¤æ³¨è§£ã€‚ç”±äºæ­¤æ—¶çš„è¿”å›ç±»å‹ä¸º voidï¼Œæ‰€ä»¥ Mybatis éœ€è¦æœ‰ä¸€ç§æ–¹æ³•æ¥åˆ¤æ–­æ¯ä¸€è¡Œè¿”å›çš„å¯¹è±¡ç±»å‹ã€‚å¦‚æœåœ¨ XML æœ‰å¯¹åº”çš„ç»“æœæ˜ å°„ï¼Œè¯·ä½¿ç”¨ @ResultMap æ³¨è§£ã€‚å¦‚æœç»“æœç±»å‹åœ¨ XML çš„ &lt;select&gt; å…ƒç´ ä¸­æŒ‡å®šäº†ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨å…¶å®ƒæ³¨è§£äº†ã€‚å¦åˆ™å°±éœ€è¦ä½¿ç”¨æ­¤æ³¨è§£ã€‚æ¯”å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ ‡æ³¨äº† @Select çš„æ–¹æ³•æƒ³è¦ä½¿ç”¨ç»“æœå¤„ç†å™¨ï¼Œé‚£ä¹ˆå®ƒçš„è¿”å›ç±»å‹å¿…é¡»æ˜¯ voidï¼Œå¹¶ä¸”å¿…é¡»ä½¿ç”¨è¿™ä¸ªæ³¨è§£ï¼ˆæˆ–è€… @ResultMapï¼‰ã€‚è¿™ä¸ªæ³¨è§£ä»…åœ¨æ–¹æ³•è¿”å›ç±»å‹æ˜¯ void çš„æƒ…å†µä¸‹ç”Ÿæ•ˆã€‚ @Flush æ–¹æ³• N&#x2F;A å¦‚æœä½¿ç”¨äº†è¿™ä¸ªæ³¨è§£ï¼Œå®šä¹‰åœ¨ Mapper æ¥å£ä¸­çš„æ–¹æ³•å°±èƒ½å¤Ÿè°ƒç”¨ SqlSession#flushStatements() æ–¹æ³•ã€‚ï¼ˆMybatis 3.3 ä»¥ä¸Šå¯ç”¨ï¼‰ æ˜ å°„æ³¨è§£ç¤ºä¾‹è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ @SelectKey æ³¨è§£æ¥åœ¨æ’å…¥å‰è¯»å–æ•°æ®åº“åºåˆ—çš„å€¼ï¼š 123@Insert(&quot;insert into table3 (id, name) values(#&#123;nameId&#125;, #&#123;name&#125;)&quot;)@SelectKey(statement=&quot;call next value for TestSequence&quot;, keyProperty=&quot;nameId&quot;, before=true, resultType=int.class)int insertTable3(Name name); è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ @SelectKey æ³¨è§£æ¥åœ¨æ’å…¥åè¯»å–æ•°æ®åº“è‡ªå¢åˆ—çš„å€¼ï¼š 123@Insert(&quot;insert into table2 (name) values(#&#123;name&#125;)&quot;)@SelectKey(statement=&quot;call identity()&quot;, keyProperty=&quot;nameId&quot;, before=false, resultType=int.class)int insertTable2(Name name); è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ @Flush æ³¨è§£æ¥è°ƒç”¨ SqlSession#flushStatements()ï¼š 12@FlushList&lt;BatchResult&gt; flush(); è¿™äº›ä¾‹å­å±•ç¤ºäº†å¦‚ä½•é€šè¿‡æŒ‡å®š @Result çš„ id å±æ€§æ¥å‘½åç»“æœé›†ï¼š 123456789101112131415@Results(id = &quot;userResult&quot;, value = &#123; @Result(property = &quot;id&quot;, column = &quot;uid&quot;, id = true), @Result(property = &quot;firstName&quot;, column = &quot;first_name&quot;), @Result(property = &quot;lastName&quot;, column = &quot;last_name&quot;)&#125;)@Select(&quot;select * from users where id = #&#123;id&#125;&quot;)User getUserById(Integer id);@Results(id = &quot;companyResults&quot;)@ConstructorArgs(&#123; @Arg(column = &quot;cid&quot;, javaType = Integer.class, id = true), @Arg(column = &quot;name&quot;, javaType = String.class)&#125;)@Select(&quot;select * from company where id = #&#123;id&#125;&quot;)Company getCompanyById(Integer id); è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å•ä¸ªå‚æ•°çš„ @SqlProvider æ³¨è§£ï¼š 123456789101112131415@SelectProvider(type = UserSqlBuilder.class, method = &quot;buildGetUsersByName&quot;)List&lt;User&gt; getUsersByName(String name);class UserSqlBuilder &#123; public static String buildGetUsersByName(final String name) &#123; return new SQL()&#123;&#123; SELECT(&quot;*&quot;); FROM(&quot;users&quot;); if (name != null) &#123; WHERE(&quot;name like #&#123;value&#125; || &#x27;%&#x27;&quot;); &#125; ORDER_BY(&quot;id&quot;); &#125;&#125;.toString(); &#125;&#125; è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ @SqlProvider æ³¨è§£ï¼š 123456789101112131415161718192021222324252627@SelectProvider(type = UserSqlBuilder.class, method = &quot;buildGetUsersByName&quot;)List&lt;User&gt; getUsersByName( @Param(&quot;name&quot;) String name, @Param(&quot;orderByColumn&quot;) String orderByColumn);class UserSqlBuilder &#123; // å¦‚æœä¸ä½¿ç”¨ @Paramï¼Œå°±åº”è¯¥å®šä¹‰ä¸ mapper æ–¹æ³•ç›¸åŒçš„å‚æ•° public static String buildGetUsersByName( final String name, final String orderByColumn) &#123; return new SQL()&#123;&#123; SELECT(&quot;*&quot;); FROM(&quot;users&quot;); WHERE(&quot;name like #&#123;name&#125; || &#x27;%&#x27;&quot;); ORDER_BY(orderByColumn); &#125;&#125;.toString(); &#125; // å¦‚æœä½¿ç”¨ @Paramï¼Œå°±å¯ä»¥åªå®šä¹‰éœ€è¦ä½¿ç”¨çš„å‚æ•° public static String buildGetUsersByName(@Param(&quot;orderByColumn&quot;) final String orderByColumn) &#123; return new SQL()&#123;&#123; SELECT(&quot;*&quot;); FROM(&quot;users&quot;); WHERE(&quot;name like #&#123;name&#125; || &#x27;%&#x27;&quot;); ORDER_BY(orderByColumn); &#125;&#125;.toString(); &#125;&#125; è¿™æ˜¯ä¸€ä¸ªåœ¨å…¨å±€é…ç½®ä¸‹è®©æ‰€æœ‰æ˜ å°„æ–¹æ³•åœ¨åŒä¸€ä¸ª sql provider ç±»é‡Œé¢çš„ä¾‹å­ï¼ˆ3.5.6 åå¯ç”¨ï¼‰: 12345678910111213141516171819Configuration configuration = new Configuration();configuration.setDefaultSqlProviderType(TemplateFilePathProvider.class); // è®©æ‰€æœ‰æ˜ å°„æ–¹æ³•åœ¨åŒä¸€ä¸ª sql provider ç±»é‡Œé¢// ...// åœ¨ sql provider æ³¨è§£ä¸Šå¯ä»¥çœç•¥ type/value å±æ€§// å¦‚æœçœç•¥ï¼ŒMyBatis å°†ä½¿ç”¨ defaultSqlProviderType æ‰€æŒ‡å®šçš„ç±»public interface UserMapper &#123; @SelectProvider // ç­‰ä»·äº @SelectProvider(TemplateFilePathProvider.class) User findUser(int id); @InsertProvider // ç­‰ä»·äº @InsertProvider(TemplateFilePathProvider.class) void createUser(User user); @UpdateProvider // ç­‰ä»·äº @UpdateProvider(TemplateFilePathProvider.class) void updateUser(User user); @DeleteProvider // ç­‰ä»·äº @DeleteProvider(TemplateFilePathProvider.class) void deleteUser(int id);&#125; ä»¥ä¸‹ä¾‹å­å±•ç¤ºäº† ProviderMethodResolverï¼ˆ3.5.1 åå¯ç”¨ï¼‰çš„é»˜è®¤å®ç°ä½¿ç”¨æ–¹æ³•ï¼š 1234567891011121314151617@SelectProvider(UserSqlProvider.class)List&lt;User&gt; getUsersByName(String name);// åœ¨ä½ çš„ provider ç±»ä¸­å®ç° ProviderMethodResolver æ¥å£class UserSqlProvider implements ProviderMethodResolver &#123; // é»˜è®¤å®ç°ä¸­ï¼Œä¼šå°†æ˜ å°„å™¨æ–¹æ³•çš„è°ƒç”¨è§£æåˆ°å®ç°çš„åŒåæ–¹æ³•ä¸Š public static String getUsersByName(final String name) &#123; return new SQL()&#123;&#123; SELECT(&quot;*&quot;); FROM(&quot;users&quot;); if (name != null) &#123; WHERE(&quot;name like #&#123;value&#125; || &#x27;%&#x27;&quot;); &#125; ORDER_BY(&quot;id&quot;); &#125;&#125;.toString(); &#125;&#125; è¿™ä¸ªä¾‹å­å±•ç°äº†å¦‚ä½•åœ¨å£°æ˜æ³¨è§£æ—¶ä½¿ç”¨ databaseId å±æ€§ï¼ˆ3.5.5åå¯ç”¨ï¼‰ï¼š 1234@Select(value = &quot;SELECT SYS_GUID() FROM dual&quot;, databaseId = &quot;oracle&quot;) // å¦‚æœ DatabaseIdProvider æä¾›çš„æ˜¯ &quot;oracle&quot;ï¼Œä½¿ç”¨è¿™æ¡è¯­å¥@Select(value = &quot;SELECT uuid_generate_v4()&quot;, databaseId = &quot;postgres&quot;) // å¦‚æœ DatabaseIdProvider æä¾›çš„æ˜¯ &quot;postgres&quot;ï¼Œä½¿ç”¨è¿™æ¡è¯­å¥@Select(&quot;SELECT RANDOM_UUID()&quot;) // å¦‚æœ DatabaseIdProvider æ²¡æœ‰é…ç½®æˆ–è€…æ²¡æœ‰å¯¹åº”çš„ databaseId, ä½¿ç”¨è¿™æ¡è¯­å¥String generateId();","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"MyBatis","slug":"MyBatis","permalink":"https://guoshunfa.com/tags/MyBatis/"}]},{"title":"MyBatis SQLè¯­å¥æ„å»ºå™¨","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Mybatis/MyBatis-SQLè¯­å¥æ„å»ºå™¨","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.299Z","comments":true,"path":"2022/07/MyBatis-SQLè¯­å¥æ„å»ºå™¨/","link":"","permalink":"https://guoshunfa.com/2022/07/MyBatis-SQL%E8%AF%AD%E5%8F%A5%E6%9E%84%E5%BB%BA%E5%99%A8/","excerpt":"","text":"è½¬è½½è‡ªï¼šMyBatis å®˜ç½‘(SQLè¯­å¥æ„å»ºå™¨) é—®é¢˜Java ç¨‹åºå‘˜é¢å¯¹çš„æœ€ç—›è‹¦çš„äº‹æƒ…ä¹‹ä¸€å°±æ˜¯åœ¨ Java ä»£ç ä¸­åµŒå…¥ SQL è¯­å¥ã€‚è¿™é€šå¸¸æ˜¯å› ä¸ºéœ€è¦åŠ¨æ€ç”Ÿæˆ SQL è¯­å¥ï¼Œä¸ç„¶æˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬æ”¾åˆ°å¤–éƒ¨æ–‡ä»¶æˆ–è€…å­˜å‚¨è¿‡ç¨‹ä¸­ã€‚å¦‚ä½ æ‰€è§ï¼ŒMyBatis åœ¨ XML æ˜ å°„ä¸­å…·å¤‡å¼ºå¤§çš„ SQL åŠ¨æ€ç”Ÿæˆèƒ½åŠ›ã€‚ä½†æœ‰æ—¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦åœ¨ Java ä»£ç é‡Œæ„å»º SQL è¯­å¥ã€‚æ­¤æ—¶ï¼ŒMyBatis æœ‰å¦å¤–ä¸€ä¸ªç‰¹æ€§å¯ä»¥å¸®åˆ°ä½ ï¼Œè®©ä½ ä»å¤„ç†å…¸å‹é—®é¢˜ä¸­è§£æ”¾å‡ºæ¥ï¼Œæ¯”å¦‚åŠ å·ã€å¼•å·ã€æ¢è¡Œã€æ ¼å¼åŒ–é—®é¢˜ã€åµŒå…¥æ¡ä»¶çš„é€—å·ç®¡ç†åŠ AND è¿æ¥ã€‚ç¡®å®ï¼Œåœ¨ Java ä»£ç ä¸­åŠ¨æ€ç”Ÿæˆ SQL ä»£ç çœŸçš„å°±æ˜¯ä¸€åœºå™©æ¢¦ã€‚ä¾‹å¦‚ï¼š 1234567891011String sql = &quot;SELECT P.ID, P.USERNAME, P.PASSWORD, P.FULL_NAME, &quot;&quot;P.LAST_NAME,P.CREATED_ON, P.UPDATED_ON &quot; +&quot;FROM PERSON P, ACCOUNT A &quot; +&quot;INNER JOIN DEPARTMENT D on D.ID = P.DEPARTMENT_ID &quot; +&quot;INNER JOIN COMPANY C on D.COMPANY_ID = C.ID &quot; +&quot;WHERE (P.ID = A.ID AND P.FIRST_NAME like ?) &quot; +&quot;OR (P.LAST_NAME like ?) &quot; +&quot;GROUP BY P.ID &quot; +&quot;HAVING (P.LAST_NAME like ?) &quot; +&quot;OR (P.FIRST_NAME like ?) &quot; +&quot;ORDER BY P.ID, P.FULL_NAME&quot;; è§£å†³æ–¹æ¡ˆMyBatis 3 æä¾›äº†æ–¹ä¾¿çš„å·¥å…·ç±»æ¥å¸®åŠ©è§£å†³æ­¤é—®é¢˜ã€‚å€ŸåŠ© SQL ç±»ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•åœ°åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå¹¶è°ƒç”¨å®ƒçš„æ–¹æ³•å³å¯ç”Ÿæˆ SQL è¯­å¥ã€‚è®©æˆ‘ä»¬æ¥ç”¨ SQL ç±»é‡å†™ä¸Šé¢çš„ä¾‹å­ï¼š 1234567891011121314151617181920private String selectPersonSql() &#123; return new SQL() &#123;&#123; SELECT(&quot;P.ID, P.USERNAME, P.PASSWORD, P.FULL_NAME&quot;); SELECT(&quot;P.LAST_NAME, P.CREATED_ON, P.UPDATED_ON&quot;); FROM(&quot;PERSON P&quot;); FROM(&quot;ACCOUNT A&quot;); INNER_JOIN(&quot;DEPARTMENT D on D.ID = P.DEPARTMENT_ID&quot;); INNER_JOIN(&quot;COMPANY C on D.COMPANY_ID = C.ID&quot;); WHERE(&quot;P.ID = A.ID&quot;); WHERE(&quot;P.FIRST_NAME like ?&quot;); OR(); WHERE(&quot;P.LAST_NAME like ?&quot;); GROUP_BY(&quot;P.ID&quot;); HAVING(&quot;P.LAST_NAME like ?&quot;); OR(); HAVING(&quot;P.FIRST_NAME like ?&quot;); ORDER_BY(&quot;P.ID&quot;); ORDER_BY(&quot;P.FULL_NAME&quot;); &#125;&#125;.toString();&#125; è¿™ä¸ªä¾‹å­æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„å—ï¼Ÿä»”ç»†çœ‹ä¸€ä¸‹ä½ ä¼šå‘ç°ï¼Œä½ ä¸ç”¨æ‹…å¿ƒå¯èƒ½ä¼šé‡å¤å‡ºç°çš„ â€œANDâ€ å…³é”®å­—ï¼Œæˆ–è€…è¦åšå‡ºç”¨ â€œWHEREâ€ æ‹¼æ¥è¿˜æ˜¯ â€œANDâ€ æ‹¼æ¥è¿˜æ˜¯ä¸ç”¨æ‹¼æ¥çš„é€‰æ‹©ã€‚SQL ç±»å·²ç»ä¸ºä½ å¤„ç†äº†å“ªé‡Œåº”è¯¥æ’å…¥ â€œWHEREâ€ã€å“ªé‡Œåº”è¯¥ä½¿ç”¨ â€œANDâ€ çš„é—®é¢˜ï¼Œå¹¶å¸®ä½ å®Œæˆæ‰€æœ‰çš„å­—ç¬¦ä¸²æ‹¼æ¥å·¥ä½œã€‚ SQL ç±»è¿™é‡Œæœ‰ä¸€äº›ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758// åŒ¿åå†…éƒ¨ç±»é£æ ¼public String deletePersonSql() &#123; return new SQL() &#123;&#123; DELETE_FROM(&quot;PERSON&quot;); WHERE(&quot;ID = #&#123;id&#125;&quot;); &#125;&#125;.toString();&#125;// Builder / Fluent é£æ ¼public String insertPersonSql() &#123; String sql = new SQL() .INSERT_INTO(&quot;PERSON&quot;) .VALUES(&quot;ID, FIRST_NAME&quot;, &quot;#&#123;id&#125;, #&#123;firstName&#125;&quot;) .VALUES(&quot;LAST_NAME&quot;, &quot;#&#123;lastName&#125;&quot;) .toString(); return sql;&#125;// åŠ¨æ€æ¡ä»¶ï¼ˆæ³¨æ„å‚æ•°éœ€è¦ä½¿ç”¨ final ä¿®é¥°ï¼Œä»¥ä¾¿åŒ¿åå†…éƒ¨ç±»å¯¹å®ƒä»¬è¿›è¡Œè®¿é—®ï¼‰public String selectPersonLike(final String id, final String firstName, final String lastName) &#123; return new SQL() &#123;&#123; SELECT(&quot;P.ID, P.USERNAME, P.PASSWORD, P.FIRST_NAME, P.LAST_NAME&quot;); FROM(&quot;PERSON P&quot;); if (id != null) &#123; WHERE(&quot;P.ID like #&#123;id&#125;&quot;); &#125; if (firstName != null) &#123; WHERE(&quot;P.FIRST_NAME like #&#123;firstName&#125;&quot;); &#125; if (lastName != null) &#123; WHERE(&quot;P.LAST_NAME like #&#123;lastName&#125;&quot;); &#125; ORDER_BY(&quot;P.LAST_NAME&quot;); &#125;&#125;.toString();&#125;public String deletePersonSql() &#123; return new SQL() &#123;&#123; DELETE_FROM(&quot;PERSON&quot;); WHERE(&quot;ID = #&#123;id&#125;&quot;); &#125;&#125;.toString();&#125;public String insertPersonSql() &#123; return new SQL() &#123;&#123; INSERT_INTO(&quot;PERSON&quot;); VALUES(&quot;ID, FIRST_NAME&quot;, &quot;#&#123;id&#125;, #&#123;firstName&#125;&quot;); VALUES(&quot;LAST_NAME&quot;, &quot;#&#123;lastName&#125;&quot;); &#125;&#125;.toString();&#125;public String updatePersonSql() &#123; return new SQL() &#123;&#123; UPDATE(&quot;PERSON&quot;); SET(&quot;FIRST_NAME = #&#123;firstName&#125;&quot;); WHERE(&quot;ID = #&#123;id&#125;&quot;); &#125;&#125;.toString();&#125; æ–¹æ³• æè¿° SELECT(String)``SELECT(String...) å¼€å§‹æ–°çš„æˆ–è¿½åŠ åˆ°å·²æœ‰çš„ SELECTå­å¥ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå‚æ•°ä¼šè¢«è¿½åŠ åˆ° SELECT å­å¥ã€‚ å‚æ•°é€šå¸¸ä½¿ç”¨é€—å·åˆ†éš”çš„åˆ—åå’Œåˆ«ååˆ—è¡¨ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯æ•°æ®åº“é©±åŠ¨ç¨‹åºæ¥å—çš„ä»»æ„å‚æ•°ã€‚ SELECT_DISTINCT(String)``SELECT_DISTINCT(String...) å¼€å§‹æ–°çš„æˆ–è¿½åŠ åˆ°å·²æœ‰çš„ SELECTå­å¥ï¼Œå¹¶æ·»åŠ  DISTINCT å…³é”®å­—åˆ°ç”Ÿæˆçš„æŸ¥è¯¢ä¸­ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå‚æ•°ä¼šè¢«è¿½åŠ åˆ° SELECT å­å¥ã€‚ å‚æ•°é€šå¸¸ä½¿ç”¨é€—å·åˆ†éš”çš„åˆ—åå’Œåˆ«ååˆ—è¡¨ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯æ•°æ®åº“é©±åŠ¨ç¨‹åºæ¥å—çš„ä»»æ„å‚æ•°ã€‚ FROM(String)``FROM(String...) å¼€å§‹æ–°çš„æˆ–è¿½åŠ åˆ°å·²æœ‰çš„ FROMå­å¥ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå‚æ•°ä¼šè¢«è¿½åŠ åˆ° FROMå­å¥ã€‚ å‚æ•°é€šå¸¸æ˜¯ä¸€ä¸ªè¡¨åæˆ–åˆ«åï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°æ®åº“é©±åŠ¨ç¨‹åºæ¥å—çš„ä»»æ„å‚æ•°ã€‚ JOIN(String)``JOIN(String...)``INNER_JOIN(String)``INNER_JOIN(String...)``LEFT_OUTER_JOIN(String)``LEFT_OUTER_JOIN(String...)``RIGHT_OUTER_JOIN(String)``RIGHT_OUTER_JOIN(String...) åŸºäºè°ƒç”¨çš„æ–¹æ³•ï¼Œæ·»åŠ æ–°çš„åˆé€‚ç±»å‹çš„ JOIN å­å¥ã€‚ å‚æ•°å¯ä»¥åŒ…å«ä¸€ä¸ªç”±åˆ—å’Œè¿æ¥æ¡ä»¶æ„æˆçš„æ ‡å‡†è¿æ¥ã€‚ WHERE(String)``WHERE(String...) æ’å…¥æ–°çš„ WHERE å­å¥æ¡ä»¶ï¼Œå¹¶ä½¿ç”¨ AND æ‹¼æ¥ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå¯¹äºæ¯ä¸€æ¬¡è°ƒç”¨äº§ç”Ÿçš„æ–°æ¡ä»¶ï¼Œä¼šä½¿ç”¨ AND æ‹¼æ¥èµ·æ¥ã€‚è¦ä½¿ç”¨ OR åˆ†éš”ï¼Œè¯·ä½¿ç”¨ OR()ã€‚ OR() ä½¿ç”¨ OR æ¥åˆ†éš”å½“å‰çš„ WHERE å­å¥æ¡ä»¶ã€‚ å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œä½†åœ¨ä¸€è¡Œä¸­å¤šæ¬¡è°ƒç”¨ä¼šç”Ÿæˆé”™è¯¯çš„ SQLã€‚ AND() ä½¿ç”¨ AND æ¥åˆ†éš”å½“å‰çš„ WHEREå­å¥æ¡ä»¶ã€‚ å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œä½†åœ¨ä¸€è¡Œä¸­å¤šæ¬¡è°ƒç”¨ä¼šç”Ÿæˆé”™è¯¯çš„ SQLã€‚ç”±äº WHERE å’Œ HAVINGéƒ½ä¼šè‡ªåŠ¨ä½¿ç”¨ AND æ‹¼æ¥, å› æ­¤è¿™ä¸ªæ–¹æ³•å¹¶ä¸å¸¸ç”¨ï¼Œåªæ˜¯ä¸ºäº†å®Œæ•´æ€§æ‰è¢«å®šä¹‰å‡ºæ¥ã€‚ GROUP_BY(String)``GROUP_BY(String...) è¿½åŠ æ–°çš„ GROUP BY å­å¥ï¼Œä½¿ç”¨é€—å·æ‹¼æ¥ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šä½¿ç”¨é€—å·å°†æ–°çš„æ¡ä»¶æ‹¼æ¥èµ·æ¥ã€‚ HAVING(String)``HAVING(String...) è¿½åŠ æ–°çš„ HAVING å­å¥ã€‚ä½¿ç”¨ AND æ‹¼æ¥ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä½¿ç”¨ANDæ¥æ‹¼æ¥æ–°çš„æ¡ä»¶ã€‚è¦ä½¿ç”¨ OR åˆ†éš”ï¼Œè¯·ä½¿ç”¨ OR()ã€‚ ORDER_BY(String)``ORDER_BY(String...) è¿½åŠ æ–°çš„ ORDER BY å­å¥ï¼Œä½¿ç”¨é€—å·æ‹¼æ¥ã€‚å¯ä»¥å¤šæ¬¡è¢«è°ƒç”¨ï¼Œæ¯æ¬¡è°ƒç”¨ä¼šä½¿ç”¨é€—å·æ‹¼æ¥æ–°çš„æ¡ä»¶ã€‚ LIMIT(String)``LIMIT(int) è¿½åŠ æ–°çš„ LIMIT å­å¥ã€‚ ä»…åœ¨ SELECT()ã€UPDATE()ã€DELETE() æ—¶æœ‰æ•ˆã€‚ å½“åœ¨ SELECT() ä¸­ä½¿ç”¨æ—¶ï¼Œåº”è¯¥é…åˆ OFFSET() ä½¿ç”¨ã€‚ï¼ˆäº 3.5.2 å¼•å…¥ï¼‰ OFFSET(String)``OFFSET(long) è¿½åŠ æ–°çš„ OFFSET å­å¥ã€‚ ä»…åœ¨ SELECT() æ—¶æœ‰æ•ˆã€‚ å½“åœ¨ SELECT() æ—¶ä½¿ç”¨æ—¶ï¼Œåº”è¯¥é…åˆ LIMIT() ä½¿ç”¨ã€‚ï¼ˆäº 3.5.2 å¼•å…¥ï¼‰ OFFSET_ROWS(String)``OFFSET_ROWS(long) è¿½åŠ æ–°çš„ OFFSET n ROWS å­å¥ã€‚ ä»…åœ¨ SELECT() æ—¶æœ‰æ•ˆã€‚ è¯¥æ–¹æ³•åº”è¯¥é…åˆ FETCH_FIRST_ROWS_ONLY() ä½¿ç”¨ã€‚ï¼ˆäº 3.5.2 åŠ å…¥ï¼‰ FETCH_FIRST_ROWS_ONLY(String)``FETCH_FIRST_ROWS_ONLY(int) è¿½åŠ æ–°çš„ FETCH FIRST n ROWS ONLY å­å¥ã€‚ ä»…åœ¨ SELECT() æ—¶æœ‰æ•ˆã€‚ è¯¥æ–¹æ³•åº”è¯¥é…åˆ OFFSET_ROWS() ä½¿ç”¨ã€‚ï¼ˆäº 3.5.2 åŠ å…¥ï¼‰ DELETE_FROM(String) å¼€å§‹æ–°çš„ delete è¯­å¥ï¼Œå¹¶æŒ‡å®šåˆ é™¤è¡¨çš„è¡¨åã€‚é€šå¸¸å®ƒåé¢éƒ½ä¼šè·Ÿç€ä¸€ä¸ª WHERE å­å¥ï¼ INSERT_INTO(String) å¼€å§‹æ–°çš„ insert è¯­å¥ï¼Œå¹¶æŒ‡å®šæ’å…¥æ•°æ®è¡¨çš„è¡¨åã€‚åé¢åº”è¯¥ä¼šè·Ÿç€ä¸€ä¸ªæˆ–å¤šä¸ª VALUES() è°ƒç”¨ï¼Œæˆ– INTO_COLUMNS() å’Œ INTO_VALUES() è°ƒç”¨ã€‚ SET(String)``SET(String...) å¯¹ update è¯­å¥è¿½åŠ  â€œsetâ€ å±æ€§çš„åˆ—è¡¨ UPDATE(String) å¼€å§‹æ–°çš„ update è¯­å¥ï¼Œå¹¶æŒ‡å®šæ›´æ–°è¡¨çš„è¡¨åã€‚åé¢éƒ½ä¼šè·Ÿç€ä¸€ä¸ªæˆ–å¤šä¸ª SET() è°ƒç”¨ï¼Œé€šå¸¸ä¹Ÿä¼šæœ‰ä¸€ä¸ª WHERE() è°ƒç”¨ã€‚ VALUES(String, String) è¿½åŠ æ•°æ®å€¼åˆ° insert è¯­å¥ä¸­ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°æ®æ’å…¥çš„åˆ—åï¼Œç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯æ•°æ®å€¼ã€‚ INTO_COLUMNS(String...) è¿½åŠ æ’å…¥åˆ—å­å¥åˆ° insert è¯­å¥ä¸­ã€‚åº”ä¸ INTO_VALUES() ä¸€åŒä½¿ç”¨ã€‚ INTO_VALUES(String...) è¿½åŠ æ’å…¥å€¼å­å¥åˆ° insert è¯­å¥ä¸­ã€‚åº”ä¸ INTO_COLUMNS() ä¸€åŒä½¿ç”¨ã€‚ ADD_ROW() æ·»åŠ æ–°çš„ä¸€è¡Œæ•°æ®ï¼Œä»¥ä¾¿æ‰§è¡Œæ‰¹é‡æ’å…¥ã€‚ï¼ˆäº 3.5.2 å¼•å…¥ï¼‰ æç¤º æ³¨æ„ï¼ŒSQL ç±»å°†åŸæ ·æ’å…¥ LIMITã€OFFSETã€OFFSET n ROWS ä»¥åŠ FETCH FIRST n ROWS ONLY å­å¥ã€‚æ¢å¥è¯è¯´ï¼Œç±»åº“ä¸ä¼šä¸ºä¸æ”¯æŒè¿™äº›å­å¥çš„æ•°æ®åº“æ‰§è¡Œä»»ä½•è½¬æ¢ã€‚ å› æ­¤ï¼Œç”¨æˆ·åº”è¯¥è¦äº†è§£ç›®æ ‡æ•°æ®åº“æ˜¯å¦æ”¯æŒè¿™äº›å­å¥ã€‚å¦‚æœç›®æ ‡æ•°æ®åº“ä¸æ”¯æŒè¿™äº›å­å¥ï¼Œäº§ç”Ÿçš„ SQL å¯èƒ½ä¼šå¼•èµ·è¿è¡Œé”™è¯¯ã€‚ ä»ç‰ˆæœ¬ 3.4.2 å¼€å§‹ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨å¯å˜é•¿åº¦å‚æ•°ï¼š 12345678910111213141516171819202122232425public String selectPersonSql() &#123; return new SQL() .SELECT(&quot;P.ID&quot;, &quot;A.USERNAME&quot;, &quot;A.PASSWORD&quot;, &quot;P.FULL_NAME&quot;, &quot;D.DEPARTMENT_NAME&quot;, &quot;C.COMPANY_NAME&quot;) .FROM(&quot;PERSON P&quot;, &quot;ACCOUNT A&quot;) .INNER_JOIN(&quot;DEPARTMENT D on D.ID = P.DEPARTMENT_ID&quot;, &quot;COMPANY C on D.COMPANY_ID = C.ID&quot;) .WHERE(&quot;P.ID = A.ID&quot;, &quot;P.FULL_NAME like #&#123;name&#125;&quot;) .ORDER_BY(&quot;P.ID&quot;, &quot;P.FULL_NAME&quot;) .toString();&#125;public String insertPersonSql() &#123; return new SQL() .INSERT_INTO(&quot;PERSON&quot;) .INTO_COLUMNS(&quot;ID&quot;, &quot;FULL_NAME&quot;) .INTO_VALUES(&quot;#&#123;id&#125;&quot;, &quot;#&#123;fullName&#125;&quot;) .toString();&#125;public String updatePersonSql() &#123; return new SQL() .UPDATE(&quot;PERSON&quot;) .SET(&quot;FULL_NAME = #&#123;fullName&#125;&quot;, &quot;DATE_OF_BIRTH = #&#123;dateOfBirth&#125;&quot;) .WHERE(&quot;ID = #&#123;id&#125;&quot;) .toString();&#125; ä»ç‰ˆæœ¬ 3.5.2 å¼€å§‹ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·æ„å»ºæ‰¹é‡æ’å…¥è¯­å¥ï¼š 1234567891011public String insertPersonsSql() &#123; // INSERT INTO PERSON (ID, FULL_NAME) // VALUES (#&#123;mainPerson.id&#125;, #&#123;mainPerson.fullName&#125;) , (#&#123;subPerson.id&#125;, #&#123;subPerson.fullName&#125;) return new SQL() .INSERT_INTO(&quot;PERSON&quot;) .INTO_COLUMNS(&quot;ID&quot;, &quot;FULL_NAME&quot;) .INTO_VALUES(&quot;#&#123;mainPerson.id&#125;&quot;, &quot;#&#123;mainPerson.fullName&#125;&quot;) .ADD_ROW() .INTO_VALUES(&quot;#&#123;subPerson.id&#125;&quot;, &quot;#&#123;subPerson.fullName&#125;&quot;) .toString();&#125; ä»ç‰ˆæœ¬ 3.5.2 å¼€å§‹ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·æ„å»ºé™åˆ¶è¿”å›ç»“æœæ•°çš„ SELECT è¯­å¥,ï¼š 123456789101112131415161718192021public String selectPersonsWithOffsetLimitSql() &#123; // SELECT id, name FROM PERSON // LIMIT #&#123;limit&#125; OFFSET #&#123;offset&#125; return new SQL() .SELECT(&quot;id&quot;, &quot;name&quot;) .FROM(&quot;PERSON&quot;) .LIMIT(&quot;#&#123;limit&#125;&quot;) .OFFSET(&quot;#&#123;offset&#125;&quot;) .toString();&#125;public String selectPersonsWithFetchFirstSql() &#123; // SELECT id, name FROM PERSON // OFFSET #&#123;offset&#125; ROWS FETCH FIRST #&#123;limit&#125; ROWS ONLY return new SQL() .SELECT(&quot;id&quot;, &quot;name&quot;) .FROM(&quot;PERSON&quot;) .OFFSET_ROWS(&quot;#&#123;offset&#125;&quot;) .FETCH_FIRST_ROWS_ONLY(&quot;#&#123;limit&#125;&quot;) .toString();&#125; SqlBuilder å’Œ SelectBuilder (å·²ç»åºŸå¼ƒ)åœ¨ç‰ˆæœ¬ 3.2 ä¹‹å‰ï¼Œæˆ‘ä»¬çš„å®ç°æ–¹å¼ä¸å¤ªä¸€æ ·ï¼Œæˆ‘ä»¬åˆ©ç”¨ ThreadLocal å˜é‡æ¥æ©ç›–ä¸€äº›å¯¹ Java DSL ä¸å¤ªå‹å¥½çš„è¯­è¨€é™åˆ¶ã€‚ç°åœ¨ï¼Œç°ä»£ SQL æ„å»ºæ¡†æ¶ä½¿ç”¨çš„æ„å»ºå™¨å’ŒåŒ¿åå†…éƒ¨ç±»æ€æƒ³å·²è¢«äººä»¬æ‰€ç†ŸçŸ¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åºŸå¼ƒäº†åŸºäºè¿™ç§å®ç°æ–¹å¼çš„ SelectBuilder å’Œ SqlBuilder ç±»ã€‚ ä¸‹é¢çš„æ–¹æ³•ä»…ä»…é€‚ç”¨äºåºŸå¼ƒçš„ SqlBuilder å’Œ SelectBuilder ç±»ã€‚ æ–¹æ³• æè¿° BEGIN() &#x2F;RESET() è¿™äº›æ–¹æ³•æ¸…ç©º SelectBuilder ç±»çš„ ThreadLocal çŠ¶æ€ï¼Œå¹¶å‡†å¤‡å¥½æ„å»ºä¸€ä¸ªæ–°çš„è¯­å¥ã€‚å¼€å§‹æ–°çš„è¯­å¥æ—¶ï¼ŒBEGIN() æ˜¯æœ€åå‰¯å…¶å®çš„ï¼ˆå¯è¯»æ€§æœ€å¥½çš„ï¼‰ã€‚ä½†å¦‚æœç”±äºä¸€äº›åŸå› ï¼ˆæ¯”å¦‚ç¨‹åºé€»è¾‘åœ¨æŸäº›æ¡ä»¶ä¸‹éœ€è¦ä¸€ä¸ªå®Œå…¨ä¸åŒçš„è¯­å¥ï¼‰ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¦é‡ç½®è¯­å¥æ„å»ºçŠ¶æ€ï¼Œå°±å¾ˆé€‚åˆä½¿ç”¨ RESET()ã€‚ SQL() è¯¥æ–¹æ³•è¿”å›ç”Ÿæˆçš„ SQL() å¹¶é‡ç½® SelectBuilder çŠ¶æ€ï¼ˆç­‰ä»·äºè°ƒç”¨äº† BEGIN() æˆ– RESET()ï¼‰ã€‚å› æ­¤ï¼Œè¯¥æ–¹æ³•åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ï¼ SelectBuilder å’Œ SqlBuilder ç±»å¹¶ä¸ç¥å¥‡ï¼Œä½†æœ€å¥½è¿˜æ˜¯çŸ¥é“å®ƒä»¬çš„å·¥ä½œåŸç†ã€‚ SelectBuilder ä»¥åŠ SqlBuilder å€ŸåŠ©é™æ€å¯¼å…¥å’Œ ThreadLocal å˜é‡å®ç°äº†å¯¹æ’å…¥æ¡ä»¶å‹å¥½çš„ç®€æ´è¯­æ³•ã€‚è¦ä½¿ç”¨å®ƒä»¬ï¼Œåªéœ€è¦é™æ€å¯¼å…¥è¿™ä¸ªç±»çš„æ–¹æ³•å³å¯ï¼Œå°±åƒè¿™æ ·ï¼ˆåªèƒ½ä½¿ç”¨å…¶ä¸­çš„ä¸€æ¡ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼‰: 12import static org.apache.ibatis.jdbc.SelectBuilder.*;import static org.apache.ibatis.jdbc.SqlBuilder.*; ç„¶åå°±å¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ›å»ºä¸€äº›æ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930/* å·²è¢«åºŸå¼ƒ */public String selectBlogsSql() &#123; BEGIN(); // é‡ç½® ThreadLocal çŠ¶æ€å˜é‡ SELECT(&quot;*&quot;); FROM(&quot;BLOG&quot;); return SQL();&#125; /* å·²è¢«åºŸå¼ƒ */private String selectPersonSql() &#123; BEGIN(); // é‡ç½® ThreadLocal çŠ¶æ€å˜é‡ SELECT(&quot;P.ID, P.USERNAME, P.PASSWORD, P.FULL_NAME&quot;); SELECT(&quot;P.LAST_NAME, P.CREATED_ON, P.UPDATED_ON&quot;); FROM(&quot;PERSON P&quot;); FROM(&quot;ACCOUNT A&quot;); INNER_JOIN(&quot;DEPARTMENT D on D.ID = P.DEPARTMENT_ID&quot;); INNER_JOIN(&quot;COMPANY C on D.COMPANY_ID = C.ID&quot;); WHERE(&quot;P.ID = A.ID&quot;); WHERE(&quot;P.FIRST_NAME like ?&quot;); OR(); WHERE(&quot;P.LAST_NAME like ?&quot;); GROUP_BY(&quot;P.ID&quot;); HAVING(&quot;P.LAST_NAME like ?&quot;); OR(); HAVING(&quot;P.FIRST_NAME like ?&quot;); ORDER_BY(&quot;P.ID&quot;); ORDER_BY(&quot;P.FULL_NAME&quot;); return SQL();&#125;","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SQL","slug":"SQL","permalink":"https://guoshunfa.com/tags/SQL/"},{"name":"MyBatis","slug":"MyBatis","permalink":"https://guoshunfa.com/tags/MyBatis/"}]},{"title":"MyBatis ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Mybatis/MyBatis-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.300Z","comments":true,"path":"2022/07/MyBatis-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/MyBatis-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"è½¬è½½è‡ªï¼šMybatis å®˜ç½‘(ç®€ä»‹) | Mybatis å®˜ç½‘(å…¥é—¨) ä»€ä¹ˆæ˜¯ MyBatisï¼ŸMyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚ å…¥é—¨å®‰è£…è¦ä½¿ç”¨ MyBatisï¼Œ åªéœ€å°† mybatis-x.x.x.jar æ–‡ä»¶ç½®äºç±»è·¯å¾„ï¼ˆclasspathï¼‰ä¸­å³å¯ã€‚ å¦‚æœä½¿ç”¨ Maven æ¥æ„å»ºé¡¹ç›®ï¼Œåˆ™éœ€å°†ä¸‹é¢çš„ä¾èµ–ä»£ç ç½®äº pom.xml æ–‡ä»¶ä¸­ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;x.x.x&lt;/version&gt;&lt;/dependency&gt; ä» XML ä¸­æ„å»º SqlSessionFactoryæ¯ä¸ªåŸºäº MyBatis çš„åº”ç”¨éƒ½æ˜¯ä»¥ä¸€ä¸ª SqlSessionFactory çš„å®ä¾‹ä¸ºæ ¸å¿ƒçš„ã€‚SqlSessionFactory çš„å®ä¾‹å¯ä»¥é€šè¿‡ SqlSessionFactoryBuilder è·å¾—ã€‚è€Œ SqlSessionFactoryBuilder åˆ™å¯ä»¥ä» XML é…ç½®æ–‡ä»¶æˆ–ä¸€ä¸ªé¢„å…ˆé…ç½®çš„ Configuration å®ä¾‹æ¥æ„å»ºå‡º SqlSessionFactory å®ä¾‹ã€‚ ä» XML æ–‡ä»¶ä¸­æ„å»º SqlSessionFactory çš„å®ä¾‹éå¸¸ç®€å•ï¼Œå»ºè®®ä½¿ç”¨ç±»è·¯å¾„ä¸‹çš„èµ„æºæ–‡ä»¶è¿›è¡Œé…ç½®ã€‚ ä½†ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»æ„çš„è¾“å…¥æµï¼ˆInputStreamï¼‰å®ä¾‹ï¼Œæ¯”å¦‚ç”¨æ–‡ä»¶è·¯å¾„å­—ç¬¦ä¸²æˆ– file:&#x2F;&#x2F; URL æ„é€ çš„è¾“å…¥æµã€‚MyBatis åŒ…å«ä¸€ä¸ªåå« Resources çš„å·¥å…·ç±»ï¼Œå®ƒåŒ…å«ä¸€äº›å®ç”¨æ–¹æ³•ï¼Œä½¿å¾—ä»ç±»è·¯å¾„æˆ–å…¶å®ƒä½ç½®åŠ è½½èµ„æºæ–‡ä»¶æ›´åŠ å®¹æ˜“ã€‚ 123String resource = &quot;org/mybatis/example/mybatis-config.xml&quot;;InputStream inputStream = Resources.getResourceAsStream(resource);SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); XML é…ç½®æ–‡ä»¶ä¸­åŒ…å«äº†å¯¹ MyBatis ç³»ç»Ÿçš„æ ¸å¿ƒè®¾ç½®ï¼ŒåŒ…æ‹¬è·å–æ•°æ®åº“è¿æ¥å®ä¾‹çš„æ•°æ®æºï¼ˆDataSourceï¼‰ä»¥åŠå†³å®šäº‹åŠ¡ä½œç”¨åŸŸå’Œæ§åˆ¶æ–¹å¼çš„äº‹åŠ¡ç®¡ç†å™¨ï¼ˆTransactionManagerï¼‰ã€‚åé¢ä¼šå†æ¢è®¨ XML é…ç½®æ–‡ä»¶çš„è¯¦ç»†å†…å®¹ï¼Œè¿™é‡Œå…ˆç»™å‡ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š 1234567891011121314151617181920&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt; &lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;/&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;mappers&gt; &lt;mapper resource=&quot;org/mybatis/example/BlogMapper.xml&quot;/&gt; &lt;/mappers&gt;&lt;/configuration&gt; å½“ç„¶ï¼Œè¿˜æœ‰å¾ˆå¤šå¯ä»¥åœ¨ XML æ–‡ä»¶ä¸­é…ç½®çš„é€‰é¡¹ï¼Œä¸Šé¢çš„ç¤ºä¾‹ä»…ç½—åˆ—äº†æœ€å…³é”®çš„éƒ¨åˆ†ã€‚ æ³¨æ„ XML å¤´éƒ¨çš„å£°æ˜ï¼Œå®ƒç”¨æ¥éªŒè¯ XML æ–‡æ¡£çš„æ­£ç¡®æ€§ã€‚environment å…ƒç´ ä½“ä¸­åŒ…å«äº†äº‹åŠ¡ç®¡ç†å’Œè¿æ¥æ± çš„é…ç½®ã€‚mappers å…ƒç´ åˆ™åŒ…å«äº†ä¸€ç»„æ˜ å°„å™¨ï¼ˆmapperï¼‰ï¼Œè¿™äº›æ˜ å°„å™¨çš„ XML æ˜ å°„æ–‡ä»¶åŒ…å«äº† SQL ä»£ç å’Œæ˜ å°„å®šä¹‰ä¿¡æ¯ã€‚ ä¸ä½¿ç”¨ XML æ„å»º SqlSessionFactoryå¦‚æœä½ æ›´æ„¿æ„ç›´æ¥ä» Java ä»£ç è€Œä¸æ˜¯ XML æ–‡ä»¶ä¸­åˆ›å»ºé…ç½®ï¼Œæˆ–è€…æƒ³è¦åˆ›å»ºä½ è‡ªå·±çš„é…ç½®æ„å»ºå™¨ï¼ŒMyBatis ä¹Ÿæä¾›äº†å®Œæ•´çš„é…ç½®ç±»ï¼Œæä¾›äº†æ‰€æœ‰ä¸ XML æ–‡ä»¶ç­‰ä»·çš„é…ç½®é¡¹ã€‚ 123456DataSource dataSource = BlogDataSourceFactory.getBlogDataSource();TransactionFactory transactionFactory = new JdbcTransactionFactory();Environment environment = new Environment(&quot;development&quot;, transactionFactory, dataSource);Configuration configuration = new Configuration(environment);configuration.addMapper(BlogMapper.class);SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(configuration); æ³¨æ„è¯¥ä¾‹ä¸­ï¼Œconfiguration æ·»åŠ äº†ä¸€ä¸ªæ˜ å°„å™¨ç±»ï¼ˆmapper classï¼‰ã€‚æ˜ å°„å™¨ç±»æ˜¯ Java ç±»ï¼Œå®ƒä»¬åŒ…å« SQL æ˜ å°„æ³¨è§£ä»è€Œé¿å…ä¾èµ– XML æ˜ å°„æ–‡ä»¶ã€‚ä¸è¿‡ï¼Œç”±äº Java æ³¨è§£çš„ä¸€äº›é™åˆ¶ä»¥åŠæŸäº› MyBatis æ˜ å°„çš„å¤æ‚æ€§ï¼Œè¦ä½¿ç”¨å¤§å¤šæ•°é«˜çº§æ˜ å°„ï¼ˆæ¯”å¦‚ï¼šåµŒå¥—è”åˆæ˜ å°„ï¼‰ï¼Œä»ç„¶éœ€è¦ä½¿ç”¨ XML æ˜ å°„æ–‡ä»¶è¿›è¡Œæ˜ å°„ã€‚æœ‰é‰´äºæ­¤ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªåŒå XML æ˜ å°„æ–‡ä»¶ï¼ŒMyBatis ä¼šè‡ªåŠ¨æŸ¥æ‰¾å¹¶åŠ è½½å®ƒï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŸºäºç±»è·¯å¾„å’Œ BlogMapper.class çš„ç±»åï¼Œä¼šåŠ è½½ BlogMapper.xmlï¼‰ã€‚å…·ä½“ç»†èŠ‚ç¨åè®¨è®ºã€‚ ä» SqlSessionFactory ä¸­è·å– SqlSessionæ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡ SqlSession å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„ SQL è¯­å¥ã€‚ä¾‹å¦‚ï¼š 123try (SqlSession session = sqlSessionFactory.openSession()) &#123; Blog blog = (Blog) session.selectOne(&quot;org.mybatis.example.BlogMapper.selectBlog&quot;, 101);&#125; è¯šç„¶ï¼Œè¿™ç§æ–¹å¼èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œå¯¹ä½¿ç”¨æ—§ç‰ˆæœ¬ MyBatis çš„ç”¨æˆ·æ¥è¯´ä¹Ÿæ¯”è¾ƒç†Ÿæ‚‰ã€‚ä½†ç°åœ¨æœ‰äº†ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼â€”â€”ä½¿ç”¨å’ŒæŒ‡å®šè¯­å¥çš„å‚æ•°å’Œè¿”å›å€¼ç›¸åŒ¹é…çš„æ¥å£ï¼ˆæ¯”å¦‚ BlogMapper.classï¼‰ï¼Œç°åœ¨ä½ çš„ä»£ç ä¸ä»…æ›´æ¸…æ™°ï¼Œæ›´åŠ ç±»å‹å®‰å…¨ï¼Œè¿˜ä¸ç”¨æ‹…å¿ƒå¯èƒ½å‡ºé”™çš„å­—ç¬¦ä¸²å­—é¢å€¼ä»¥åŠå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚ ä¾‹å¦‚ï¼š 1234try (SqlSession session = sqlSessionFactory.openSession()) &#123; BlogMapper mapper = session.getMapper(BlogMapper.class); Blog blog = mapper.selectBlog(101);&#125; ç°åœ¨æˆ‘ä»¬æ¥æ¢ç©¶ä¸€ä¸‹è¿™æ®µä»£ç ç©¶ç«Ÿåšäº†äº›ä»€ä¹ˆã€‚ æ¢ç©¶å·²æ˜ å°„çš„ SQL è¯­å¥ç°åœ¨ä½ å¯èƒ½å¾ˆæƒ³çŸ¥é“ SqlSession å’Œ Mapper åˆ°åº•å…·ä½“æ‰§è¡Œäº†äº›ä»€ä¹ˆæ“ä½œï¼Œä½† SQL è¯­å¥æ˜ å°„æ˜¯ä¸ªç›¸å½“å¹¿æ³›çš„è¯é¢˜ï¼Œå¯èƒ½ä¼šå å»æ–‡æ¡£çš„å¤§éƒ¨åˆ†ç¯‡å¹…ã€‚ ä½†ä¸ºäº†è®©ä½ èƒ½å¤Ÿäº†è§£ä¸ªå¤§æ¦‚ï¼Œè¿™é‡Œå…ˆç»™å‡ºå‡ ä¸ªä¾‹å­ã€‚ åœ¨ä¸Šé¢æåˆ°çš„ä¾‹å­ä¸­ï¼Œä¸€ä¸ªè¯­å¥æ—¢å¯ä»¥é€šè¿‡ XML å®šä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ³¨è§£å®šä¹‰ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹ XML å®šä¹‰è¯­å¥çš„æ–¹å¼ï¼Œäº‹å®ä¸Š MyBatis æä¾›çš„æ‰€æœ‰ç‰¹æ€§éƒ½å¯ä»¥åˆ©ç”¨åŸºäº XML çš„æ˜ å°„è¯­è¨€æ¥å®ç°ï¼Œè¿™ä½¿å¾— MyBatis åœ¨è¿‡å»çš„æ•°å¹´é—´å¾—ä»¥æµè¡Œã€‚å¦‚æœä½ ç”¨è¿‡æ—§ç‰ˆæœ¬çš„ MyBatisï¼Œä½ åº”è¯¥å¯¹è¿™ä¸ªæ¦‚å¿µæ¯”è¾ƒç†Ÿæ‚‰ã€‚ ä½†ç›¸æ¯”äºä¹‹å‰çš„ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬æ”¹è¿›äº†è®¸å¤š XML çš„é…ç½®ï¼Œåé¢æˆ‘ä»¬ä¼šæåˆ°è¿™äº›æ”¹è¿›ã€‚è¿™é‡Œç»™å‡ºä¸€ä¸ªåŸºäº XML æ˜ å°„è¯­å¥çš„ç¤ºä¾‹ï¼Œå®ƒåº”è¯¥å¯ä»¥æ»¡è¶³ä¸Šä¸ªç¤ºä¾‹ä¸­ SqlSession çš„è°ƒç”¨ã€‚ 123456789&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;org.mybatis.example.BlogMapper&quot;&gt; &lt;select id=&quot;selectBlog&quot; resultType=&quot;Blog&quot;&gt; select * from Blog where id = #&#123;id&#125; &lt;/select&gt;&lt;/mapper&gt; ä¸ºäº†è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¼¼ä¹å†™äº†ä¸å°‘é…ç½®ï¼Œä½†å…¶å®å¹¶ä¸å¤šã€‚åœ¨ä¸€ä¸ª XML æ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¯ä»¥å®šä¹‰æ— æ•°ä¸ªæ˜ å°„è¯­å¥ï¼Œè¿™æ ·ä¸€æ¥ï¼ŒXML å¤´éƒ¨å’Œæ–‡æ¡£ç±»å‹å£°æ˜éƒ¨åˆ†å°±æ˜¾å¾—å¾®ä¸è¶³é“äº†ã€‚æ–‡æ¡£çš„å…¶å®ƒéƒ¨åˆ†å¾ˆç›´ç™½ï¼Œå®¹æ˜“ç†è§£ã€‚ å®ƒåœ¨å‘½åç©ºé—´ â€œorg.mybatis.example.BlogMapperâ€ ä¸­å®šä¹‰äº†ä¸€ä¸ªåä¸º â€œselectBlogâ€ çš„æ˜ å°„è¯­å¥ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç”¨å…¨é™å®šå â€œorg.mybatis.example.BlogMapper.selectBlogâ€ æ¥è°ƒç”¨æ˜ å°„è¯­å¥äº†ï¼Œå°±åƒä¸Šé¢ä¾‹å­ä¸­é‚£æ ·ï¼š 1Blog blog = (Blog) session.selectOne(&quot;org.mybatis.example.BlogMapper.selectBlog&quot;, 101); ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œè¿™ç§æ–¹å¼å’Œç”¨å…¨é™å®šåè°ƒç”¨ Java å¯¹è±¡çš„æ–¹æ³•ç±»ä¼¼ã€‚è¿™æ ·ï¼Œè¯¥å‘½åå°±å¯ä»¥ç›´æ¥æ˜ å°„åˆ°åœ¨å‘½åç©ºé—´ä¸­åŒåçš„æ˜ å°„å™¨ç±»ï¼Œå¹¶å°†å·²æ˜ å°„çš„ select è¯­å¥åŒ¹é…åˆ°å¯¹åº”åç§°ã€å‚æ•°å’Œè¿”å›ç±»å‹çš„æ–¹æ³•ã€‚å› æ­¤ä½ å°±å¯ä»¥åƒä¸Šé¢é‚£æ ·ï¼Œä¸è´¹å¹ç°ä¹‹åŠ›åœ°åœ¨å¯¹åº”çš„æ˜ å°„å™¨æ¥å£è°ƒç”¨æ–¹æ³•ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š 12BlogMapper mapper = session.getMapper(BlogMapper.class);Blog blog = mapper.selectBlog(101); ç¬¬äºŒç§æ–¹æ³•æœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œé¦–å…ˆå®ƒä¸ä¾èµ–äºå­—ç¬¦ä¸²å­—é¢å€¼ï¼Œä¼šæ›´å®‰å…¨ä¸€ç‚¹ï¼›å…¶æ¬¡ï¼Œå¦‚æœä½ çš„ IDE æœ‰ä»£ç è¡¥å…¨åŠŸèƒ½ï¼Œé‚£ä¹ˆä»£ç è¡¥å…¨å¯ä»¥å¸®ä½ å¿«é€Ÿé€‰æ‹©åˆ°æ˜ å°„å¥½çš„ SQL è¯­å¥ã€‚ æç¤º å¯¹å‘½åç©ºé—´çš„ä¸€ç‚¹è¡¥å…… åœ¨ä¹‹å‰ç‰ˆæœ¬çš„ MyBatis ä¸­ï¼Œå‘½åç©ºé—´ï¼ˆNamespacesï¼‰çš„ä½œç”¨å¹¶ä¸å¤§ï¼Œæ˜¯å¯é€‰çš„ã€‚ ä½†ç°åœ¨ï¼Œéšç€å‘½åç©ºé—´è¶Šå‘é‡è¦ï¼Œä½ å¿…é¡»æŒ‡å®šå‘½åç©ºé—´ã€‚ å‘½åç©ºé—´çš„ä½œç”¨æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯åˆ©ç”¨æ›´é•¿çš„å…¨é™å®šåæ¥å°†ä¸åŒçš„è¯­å¥éš”ç¦»å¼€æ¥ï¼ŒåŒæ—¶ä¹Ÿå®ç°äº†ä½ ä¸Šé¢è§åˆ°çš„æ¥å£ç»‘å®šã€‚å°±ç®—ä½ è§‰å¾—æš‚æ—¶ç”¨ä¸åˆ°æ¥å£ç»‘å®šï¼Œä½ ä¹Ÿåº”è¯¥éµå¾ªè¿™é‡Œçš„è§„å®šï¼Œä»¥é˜²å“ªå¤©ä½ æ”¹å˜äº†ä¸»æ„ã€‚ é•¿è¿œæ¥çœ‹ï¼Œåªè¦å°†å‘½åç©ºé—´ç½®äºåˆé€‚çš„ Java åŒ…å‘½åç©ºé—´ä¹‹ä¸­ï¼Œä½ çš„ä»£ç ä¼šå˜å¾—æ›´åŠ æ•´æ´ï¼Œä¹Ÿæœ‰åˆ©äºä½ æ›´æ–¹ä¾¿åœ°ä½¿ç”¨ MyBatisã€‚ å‘½åè§£æï¼šä¸ºäº†å‡å°‘è¾“å…¥é‡ï¼ŒMyBatis å¯¹æ‰€æœ‰å…·æœ‰åç§°çš„é…ç½®å…ƒç´ ï¼ˆåŒ…æ‹¬è¯­å¥ï¼Œç»“æœæ˜ å°„ï¼Œç¼“å­˜ç­‰ï¼‰ä½¿ç”¨äº†å¦‚ä¸‹çš„å‘½åè§£æè§„åˆ™ã€‚ å…¨é™å®šåï¼ˆæ¯”å¦‚ â€œcom.mypackage.MyMapper.selectAllThingsï¼‰å°†è¢«ç›´æ¥ç”¨äºæŸ¥æ‰¾åŠä½¿ç”¨ã€‚ çŸ­åç§°ï¼ˆæ¯”å¦‚ â€œselectAllThingsâ€ï¼‰å¦‚æœå…¨å±€å”¯ä¸€ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å¼•ç”¨ã€‚ å¦‚æœä¸å”¯ä¸€ï¼Œæœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„ç›¸åŒåç§°ï¼ˆæ¯”å¦‚ â€œcom.foo.selectAllThingsâ€ å’Œ â€œcom.bar.selectAllThingsâ€ï¼‰ï¼Œé‚£ä¹ˆä½¿ç”¨æ—¶å°±ä¼šäº§ç”Ÿâ€œçŸ­åç§°ä¸å”¯ä¸€â€çš„é”™è¯¯ï¼Œè¿™ç§æƒ…å†µä¸‹å°±å¿…é¡»ä½¿ç”¨å…¨é™å®šåã€‚ å¯¹äºåƒ BlogMapper è¿™æ ·çš„æ˜ å°„å™¨ç±»æ¥è¯´ï¼Œè¿˜æœ‰å¦ä¸€ç§æ–¹æ³•æ¥å®Œæˆè¯­å¥æ˜ å°„ã€‚ å®ƒä»¬æ˜ å°„çš„è¯­å¥å¯ä»¥ä¸ç”¨ XML æ¥é…ç½®ï¼Œè€Œå¯ä»¥ä½¿ç”¨ Java æ³¨è§£æ¥é…ç½®ã€‚æ¯”å¦‚ï¼Œä¸Šé¢çš„ XML ç¤ºä¾‹å¯ä»¥è¢«æ›¿æ¢æˆå¦‚ä¸‹çš„é…ç½®ï¼š 12345package org.mybatis.example;public interface BlogMapper &#123; @Select(&quot;SELECT * FROM blog WHERE id = #&#123;id&#125;&quot;) Blog selectBlog(int id);&#125; ä½¿ç”¨æ³¨è§£æ¥æ˜ å°„ç®€å•è¯­å¥ä¼šä½¿ä»£ç æ˜¾å¾—æ›´åŠ ç®€æ´ï¼Œä½†å¯¹äºç¨å¾®å¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼ŒJava æ³¨è§£ä¸ä»…åŠ›ä¸ä»å¿ƒï¼Œè¿˜ä¼šè®©æœ¬å°±å¤æ‚çš„ SQL è¯­å¥æ›´åŠ æ··ä¹±ä¸å ªã€‚ å› æ­¤ï¼Œå¦‚æœä½ éœ€è¦åšä¸€äº›å¾ˆå¤æ‚çš„æ“ä½œï¼Œæœ€å¥½ç”¨ XML æ¥æ˜ å°„è¯­å¥ã€‚ é€‰æ‹©ä½•ç§æ–¹å¼æ¥é…ç½®æ˜ å°„ï¼Œä»¥åŠæ˜¯å¦åº”è¯¥è¦ç»Ÿä¸€æ˜ å°„è¯­å¥å®šä¹‰çš„å½¢å¼ï¼Œå®Œå…¨å–å†³äºä½ å’Œä½ çš„å›¢é˜Ÿã€‚ æ¢å¥è¯è¯´ï¼Œæ°¸è¿œä¸è¦æ‹˜æ³¥äºä¸€ç§æ–¹å¼ï¼Œä½ å¯ä»¥å¾ˆè½»æ¾åœ°åœ¨åŸºäºæ³¨è§£å’Œ XML çš„è¯­å¥æ˜ å°„æ–¹å¼é—´è‡ªç”±ç§»æ¤å’Œåˆ‡æ¢ã€‚ ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸç†è§£æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„ä¸åŒä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸç±»åˆ«æ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„å¹¶å‘é—®é¢˜ã€‚ æç¤º å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–æ³¨å…¥æ¡†æ¶ ä¾èµ–æ³¨å…¥æ¡†æ¶å¯ä»¥åˆ›å»ºçº¿ç¨‹å®‰å…¨çš„ã€åŸºäºäº‹åŠ¡çš„ SqlSession å’Œæ˜ å°„å™¨ï¼Œå¹¶å°†å®ƒä»¬ç›´æ¥æ³¨å…¥åˆ°ä½ çš„ bean ä¸­ï¼Œå› æ­¤å¯ä»¥ç›´æ¥å¿½ç•¥å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸã€‚ å¦‚æœå¯¹å¦‚ä½•é€šè¿‡ä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨ MyBatis æ„Ÿå…´è¶£ï¼Œå¯ä»¥ç ”ç©¶ä¸€ä¸‹ MyBatis-Spring æˆ– MyBatis-Guice ä¸¤ä¸ªå­é¡¹ç›®ã€‚ SqlSessionFactoryBuilderè¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒï¼Œä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ã€‚ å› æ­¤ SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚ ä½ å¯ä»¥é‡ç”¨ SqlSessionFactoryBuilder æ¥åˆ›å»ºå¤šä¸ª SqlSessionFactory å®ä¾‹ï¼Œä½†æœ€å¥½è¿˜æ˜¯ä¸è¦ä¸€ç›´ä¿ç•™ç€å®ƒï¼Œä»¥ä¿è¯æ‰€æœ‰çš„ XML è§£æèµ„æºå¯ä»¥è¢«é‡Šæ”¾ç»™æ›´é‡è¦çš„äº‹æƒ…ã€‚ SqlSessionFactorySqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚ ä½¿ç”¨ SqlSessionFactory çš„æœ€ä½³å®è·µæ˜¯åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ä¸è¦é‡å¤åˆ›å»ºå¤šæ¬¡ï¼Œå¤šæ¬¡é‡å»º SqlSessionFactory è¢«è§†ä¸ºä¸€ç§ä»£ç â€œåä¹ æƒ¯â€ã€‚å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚ æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°ï¼Œæœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚ SqlSessionæ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹ã€‚SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚ ç»å¯¹ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„é™æ€åŸŸï¼Œç”šè‡³ä¸€ä¸ªç±»çš„å®ä¾‹å˜é‡ä¹Ÿä¸è¡Œã€‚ ä¹Ÿç»ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä»»ä½•ç±»å‹çš„æ‰˜ç®¡ä½œç”¨åŸŸä¸­ï¼Œæ¯”å¦‚ Servlet æ¡†æ¶ä¸­çš„ HttpSessionã€‚ å¦‚æœä½ ç°åœ¨æ­£åœ¨ä½¿ç”¨ä¸€ç§ Web æ¡†æ¶ï¼Œè€ƒè™‘å°† SqlSession æ”¾åœ¨ä¸€ä¸ªå’Œ HTTP è¯·æ±‚ç›¸ä¼¼çš„ä½œç”¨åŸŸä¸­ã€‚ æ¢å¥è¯è¯´ï¼Œæ¯æ¬¡æ”¶åˆ° HTTP è¯·æ±‚ï¼Œå°±å¯ä»¥æ‰“å¼€ä¸€ä¸ª SqlSessionï¼Œè¿”å›ä¸€ä¸ªå“åº”åï¼Œå°±å…³é—­å®ƒã€‚ è¿™ä¸ªå…³é—­æ“ä½œå¾ˆé‡è¦ï¼Œä¸ºäº†ç¡®ä¿æ¯æ¬¡éƒ½èƒ½æ‰§è¡Œå…³é—­æ“ä½œï¼Œä½ åº”è¯¥æŠŠè¿™ä¸ªå…³é—­æ“ä½œæ”¾åˆ° finally å—ä¸­ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å°±æ˜¯ä¸€ä¸ªç¡®ä¿ SqlSession å…³é—­çš„æ ‡å‡†æ¨¡å¼ï¼š 123try (SqlSession session = sqlSessionFactory.openSession()) &#123; // ä½ çš„åº”ç”¨é€»è¾‘ä»£ç &#125; åœ¨æ‰€æœ‰ä»£ç ä¸­éƒ½éµå¾ªè¿™ç§ä½¿ç”¨æ¨¡å¼ï¼Œå¯ä»¥ä¿è¯æ‰€æœ‰æ•°æ®åº“èµ„æºéƒ½èƒ½è¢«æ­£ç¡®åœ°å…³é—­ã€‚ æ˜ å°„å™¨å®ä¾‹æ˜ å°„å™¨æ˜¯ä¸€äº›ç»‘å®šæ˜ å°„è¯­å¥çš„æ¥å£ã€‚æ˜ å°„å™¨æ¥å£çš„å®ä¾‹æ˜¯ä» SqlSession ä¸­è·å¾—çš„ã€‚è™½ç„¶ä»æŠ€æœ¯å±‚é¢ä¸Šæ¥è®²ï¼Œä»»ä½•æ˜ å°„å™¨å®ä¾‹çš„æœ€å¤§ä½œç”¨åŸŸä¸è¯·æ±‚å®ƒä»¬çš„ SqlSession ç›¸åŒã€‚ä½†æ–¹æ³•ä½œç”¨åŸŸæ‰æ˜¯æ˜ å°„å™¨å®ä¾‹çš„æœ€åˆé€‚çš„ä½œç”¨åŸŸã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜ å°„å™¨å®ä¾‹åº”è¯¥åœ¨è°ƒç”¨å®ƒä»¬çš„æ–¹æ³•ä¸­è¢«è·å–ï¼Œä½¿ç”¨å®Œæ¯•ä¹‹åå³å¯ä¸¢å¼ƒã€‚ æ˜ å°„å™¨å®ä¾‹å¹¶ä¸éœ€è¦è¢«æ˜¾å¼åœ°å…³é—­ã€‚å°½ç®¡åœ¨æ•´ä¸ªè¯·æ±‚ä½œç”¨åŸŸä¿ç•™æ˜ å°„å™¨å®ä¾‹ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä½ å¾ˆå¿«ä¼šå‘ç°ï¼Œåœ¨è¿™ä¸ªä½œç”¨åŸŸä¸Šç®¡ç†å¤ªå¤šåƒ SqlSession çš„èµ„æºä¼šè®©ä½ å¿™ä¸è¿‡æ¥ã€‚ å› æ­¤ï¼Œæœ€å¥½å°†æ˜ å°„å™¨æ”¾åœ¨æ–¹æ³•ä½œç”¨åŸŸå†…ã€‚å°±åƒä¸‹é¢çš„ä¾‹å­ä¸€æ ·ï¼š 1234try (SqlSession session = sqlSessionFactory.openSession()) &#123; BlogMapper mapper = session.getMapper(BlogMapper.class); // ä½ çš„åº”ç”¨é€»è¾‘ä»£ç &#125;","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://guoshunfa.com/tags/MyBatis/"}]},{"title":"MyBatisPlus ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Mybatis/MyBatisPlus-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.300Z","comments":true,"path":"2022/07/MyBatisPlus-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/MyBatisPlus-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"Mybatis Plus å®˜ç½‘ ç®€ä»‹MyBatis-Plus (opens new window)ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª MyBatis (opens new window)çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚ å®˜æ–¹æ–‡æ¡£æè¿°çš„éå¸¸å¥½ï¼Œè¿™é‡Œå°±ä¸è¿›è¡Œæè¿°äº†ï¼Œæœ‰é—®é¢˜ç›´æ¥å‰å¾€å®˜ç½‘è¿›è¡ŒæŸ¥çœ‹ã€‚Mybatis Plus å®˜ç½‘","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"mybatis-plus","slug":"mybatis-plus","permalink":"https://guoshunfa.com/tags/mybatis-plus/"},{"name":"ä»‹ç»","slug":"ä»‹ç»","permalink":"https://guoshunfa.com/tags/%E4%BB%8B%E7%BB%8D/"}]},{"title":"MyBatis åŠ¨æ€SQL","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Mybatis/MyBatisåŠ¨æ€SQL","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.301Z","comments":true,"path":"2022/07/MyBatisåŠ¨æ€SQL/","link":"","permalink":"https://guoshunfa.com/2022/07/MyBatis%E5%8A%A8%E6%80%81SQL/","excerpt":"","text":"è½¬è½½è‡ªï¼šMyBatis å®˜ç½‘(åŠ¨æ€SQL) åŠ¨æ€ SQL æ˜¯ MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ JDBC æˆ–å…¶å®ƒç±»ä¼¼çš„æ¡†æ¶ï¼Œä½ åº”è¯¥èƒ½ç†è§£æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ SQL è¯­å¥æœ‰å¤šç—›è‹¦ï¼Œä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€ SQLï¼Œå¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚ ä½¿ç”¨åŠ¨æ€ SQL å¹¶éä¸€ä»¶æ˜“äº‹ï¼Œä½†å€ŸåŠ©å¯ç”¨äºä»»ä½• SQL æ˜ å°„è¯­å¥ä¸­çš„å¼ºå¤§çš„åŠ¨æ€ SQL è¯­è¨€ï¼ŒMyBatis æ˜¾è‘—åœ°æå‡äº†è¿™ä¸€ç‰¹æ€§çš„æ˜“ç”¨æ€§ã€‚ å¦‚æœä½ ä¹‹å‰ç”¨è¿‡ JSTL æˆ–ä»»ä½•åŸºäºç±» XML è¯­è¨€çš„æ–‡æœ¬å¤„ç†å™¨ï¼Œä½ å¯¹åŠ¨æ€ SQL å…ƒç´ å¯èƒ½ä¼šæ„Ÿè§‰ä¼¼æ›¾ç›¸è¯†ã€‚åœ¨ MyBatis ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œéœ€è¦èŠ±æ—¶é—´äº†è§£å¤§é‡çš„å…ƒç´ ã€‚å€ŸåŠ©åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼ï¼ŒMyBatis 3 æ›¿æ¢äº†ä¹‹å‰çš„å¤§éƒ¨åˆ†å…ƒç´ ï¼Œå¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨è¦å­¦ä¹ çš„å…ƒç´ ç§ç±»æ¯”åŸæ¥çš„ä¸€åŠè¿˜è¦å°‘ã€‚ if choose (when, otherwise) trim (where, set) foreach ifä½¿ç”¨åŠ¨æ€ SQL æœ€å¸¸è§æƒ…æ™¯æ˜¯æ ¹æ®æ¡ä»¶åŒ…å« where å­å¥çš„ä¸€éƒ¨åˆ†ã€‚æ¯”å¦‚ï¼š 12345678&lt;select id=&quot;findActiveBlogWithTitleLike&quot; resultType=&quot;Blog&quot;&gt; SELECT * FROM BLOG WHERE state = â€˜ACTIVEâ€™ &lt;if test=&quot;title != null&quot;&gt; AND title like #&#123;title&#125; &lt;/if&gt;&lt;/select&gt; è¿™æ¡è¯­å¥æä¾›äº†å¯é€‰çš„æŸ¥æ‰¾æ–‡æœ¬åŠŸèƒ½ã€‚å¦‚æœä¸ä¼ å…¥ â€œtitleâ€ï¼Œé‚£ä¹ˆæ‰€æœ‰å¤„äº â€œACTIVEâ€ çŠ¶æ€çš„ BLOG éƒ½ä¼šè¿”å›ï¼›å¦‚æœä¼ å…¥äº† â€œtitleâ€ å‚æ•°ï¼Œé‚£ä¹ˆå°±ä¼šå¯¹ â€œtitleâ€ ä¸€åˆ—è¿›è¡Œæ¨¡ç³ŠæŸ¥æ‰¾å¹¶è¿”å›å¯¹åº”çš„ BLOG ç»“æœï¼ˆç»†å¿ƒçš„è¯»è€…å¯èƒ½ä¼šå‘ç°ï¼Œâ€œtitleâ€ çš„å‚æ•°å€¼éœ€è¦åŒ…å«æŸ¥æ‰¾æ©ç æˆ–é€šé…ç¬¦å­—ç¬¦ï¼‰ã€‚ å¦‚æœå¸Œæœ›é€šè¿‡ â€œtitleâ€ å’Œ â€œauthorâ€ ä¸¤ä¸ªå‚æ•°è¿›è¡Œå¯é€‰æœç´¢è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿé¦–å…ˆï¼Œæˆ‘æƒ³å…ˆå°†è¯­å¥åç§°ä¿®æ”¹æˆæ›´åå‰¯å…¶å®çš„åç§°ï¼›æ¥ä¸‹æ¥ï¼Œåªéœ€è¦åŠ å…¥å¦ä¸€ä¸ªæ¡ä»¶å³å¯ã€‚ 12345678910&lt;select id=&quot;findActiveBlogLike&quot; resultType=&quot;Blog&quot;&gt; SELECT * FROM BLOG WHERE state = â€˜ACTIVEâ€™ &lt;if test=&quot;title != null&quot;&gt; AND title like #&#123;title&#125; &lt;/if&gt; &lt;if test=&quot;author != null and author.name != null&quot;&gt; AND author_name like #&#123;author.name&#125; &lt;/if&gt;&lt;/select&gt; chooseã€whenã€otherwiseæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨æ‰€æœ‰çš„æ¡ä»¶ï¼Œè€Œåªæ˜¯æƒ³ä»å¤šä¸ªæ¡ä»¶ä¸­é€‰æ‹©ä¸€ä¸ªä½¿ç”¨ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒMyBatis æä¾›äº† choose å…ƒç´ ï¼Œå®ƒæœ‰ç‚¹åƒ Java ä¸­çš„ switch è¯­å¥ã€‚ è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œä½†æ˜¯ç­–ç•¥å˜ä¸ºï¼šä¼ å…¥äº† â€œtitleâ€ å°±æŒ‰ â€œtitleâ€ æŸ¥æ‰¾ï¼Œä¼ å…¥äº† â€œauthorâ€ å°±æŒ‰ â€œauthorâ€ æŸ¥æ‰¾çš„æƒ…å½¢ã€‚è‹¥ä¸¤è€…éƒ½æ²¡æœ‰ä¼ å…¥ï¼Œå°±è¿”å›æ ‡è®°ä¸º featured çš„ BLOGï¼ˆè¿™å¯èƒ½æ˜¯ç®¡ç†å‘˜è®¤ä¸ºï¼Œä¸å…¶è¿”å›å¤§é‡çš„æ— æ„ä¹‰éšæœº Blogï¼Œè¿˜ä¸å¦‚è¿”å›ä¸€äº›ç”±ç®¡ç†å‘˜ç²¾é€‰çš„ Blogï¼‰ã€‚ 123456789101112131415&lt;select id=&quot;findActiveBlogLike&quot; resultType=&quot;Blog&quot;&gt; SELECT * FROM BLOG WHERE state = â€˜ACTIVEâ€™ &lt;choose&gt; &lt;when test=&quot;title != null&quot;&gt; AND title like #&#123;title&#125; &lt;/when&gt; &lt;when test=&quot;author != null and author.name != null&quot;&gt; AND author_name like #&#123;author.name&#125; &lt;/when&gt; &lt;otherwise&gt; AND featured = 1 &lt;/otherwise&gt; &lt;/choose&gt;&lt;/select&gt; trimã€whereã€setå‰é¢å‡ ä¸ªä¾‹å­å·²ç»æ–¹ä¾¿åœ°è§£å†³äº†ä¸€ä¸ªè‡­åæ˜­è‘—çš„åŠ¨æ€ SQL é—®é¢˜ã€‚ç°åœ¨å›åˆ°ä¹‹å‰çš„ â€œifâ€ ç¤ºä¾‹ï¼Œè¿™æ¬¡æˆ‘ä»¬å°† â€œstate &#x3D; â€˜ACTIVEâ€™â€ è®¾ç½®æˆåŠ¨æ€æ¡ä»¶ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ 1234567891011121314&lt;select id=&quot;findActiveBlogLike&quot; resultType=&quot;Blog&quot;&gt; SELECT * FROM BLOG WHERE &lt;if test=&quot;state != null&quot;&gt; state = #&#123;state&#125; &lt;/if&gt; &lt;if test=&quot;title != null&quot;&gt; AND title like #&#123;title&#125; &lt;/if&gt; &lt;if test=&quot;author != null and author.name != null&quot;&gt; AND author_name like #&#123;author.name&#125; &lt;/if&gt;&lt;/select&gt; å¦‚æœæ²¡æœ‰åŒ¹é…çš„æ¡ä»¶ä¼šæ€ä¹ˆæ ·ï¼Ÿæœ€ç»ˆè¿™æ¡ SQL ä¼šå˜æˆè¿™æ ·ï¼š 12SELECT * FROM BLOGWHERE è¿™ä¼šå¯¼è‡´æŸ¥è¯¢å¤±è´¥ã€‚å¦‚æœåŒ¹é…çš„åªæ˜¯ç¬¬äºŒä¸ªæ¡ä»¶åˆä¼šæ€æ ·ï¼Ÿè¿™æ¡ SQL ä¼šæ˜¯è¿™æ ·: 123SELECT * FROM BLOGWHEREAND title like â€˜someTitleâ€™ è¿™ä¸ªæŸ¥è¯¢ä¹Ÿä¼šå¤±è´¥ã€‚è¿™ä¸ªé—®é¢˜ä¸èƒ½ç®€å•åœ°ç”¨æ¡ä»¶å…ƒç´ æ¥è§£å†³ã€‚è¿™ä¸ªé—®é¢˜æ˜¯å¦‚æ­¤çš„éš¾ä»¥è§£å†³ï¼Œä»¥è‡³äºè§£å†³è¿‡çš„äººä¸ä¼šå†æƒ³ç¢°åˆ°è¿™ç§é—®é¢˜ã€‚ MyBatis æœ‰ä¸€ä¸ªç®€å•ä¸”é€‚åˆå¤§å¤šæ•°åœºæ™¯çš„è§£å†³åŠæ³•ã€‚è€Œåœ¨å…¶ä»–åœºæ™¯ä¸­ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ä»¥ç¬¦åˆéœ€æ±‚ã€‚è€Œè¿™ï¼Œåªéœ€è¦ä¸€å¤„ç®€å•çš„æ”¹åŠ¨ï¼š 123456789101112131415&lt;select id=&quot;findActiveBlogLike&quot; resultType=&quot;Blog&quot;&gt; SELECT * FROM BLOG &lt;where&gt; &lt;if test=&quot;state != null&quot;&gt; state = #&#123;state&#125; &lt;/if&gt; &lt;if test=&quot;title != null&quot;&gt; AND title like #&#123;title&#125; &lt;/if&gt; &lt;if test=&quot;author != null and author.name != null&quot;&gt; AND author_name like #&#123;author.name&#125; &lt;/if&gt; &lt;/where&gt;&lt;/select&gt; where å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€ å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œwhere å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚ å¦‚æœ where å…ƒç´ ä¸ä½ æœŸæœ›çš„ä¸å¤ªä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ trim å…ƒç´ æ¥å®šåˆ¶ where å…ƒç´ çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œå’Œ where å…ƒç´ ç­‰ä»·çš„è‡ªå®šä¹‰ trim å…ƒç´ ä¸ºï¼š 123&lt;trim prefix=&quot;WHERE&quot; prefixOverrides=&quot;AND |OR &quot;&gt; ...&lt;/trim&gt; prefixOverrides å±æ€§ä¼šå¿½ç•¥é€šè¿‡ç®¡é“ç¬¦åˆ†éš”çš„æ–‡æœ¬åºåˆ—ï¼ˆæ³¨æ„æ­¤ä¾‹ä¸­çš„ç©ºæ ¼æ˜¯å¿…è¦çš„ï¼‰ã€‚ä¸Šè¿°ä¾‹å­ä¼šç§»é™¤æ‰€æœ‰ prefixOverrides å±æ€§ä¸­æŒ‡å®šçš„å†…å®¹ï¼Œå¹¶ä¸”æ’å…¥ prefix å±æ€§ä¸­æŒ‡å®šçš„å†…å®¹ã€‚ ç”¨äºåŠ¨æ€æ›´æ–°è¯­å¥çš„ç±»ä¼¼è§£å†³æ–¹æ¡ˆå«åš setã€‚set å…ƒç´ å¯ä»¥ç”¨äºåŠ¨æ€åŒ…å«éœ€è¦æ›´æ–°çš„åˆ—ï¼Œå¿½ç•¥å…¶å®ƒä¸æ›´æ–°çš„åˆ—ã€‚æ¯”å¦‚ï¼š 12345678910&lt;update id=&quot;updateAuthorIfNecessary&quot;&gt; update Author &lt;set&gt; &lt;if test=&quot;username != null&quot;&gt;username=#&#123;username&#125;,&lt;/if&gt; &lt;if test=&quot;password != null&quot;&gt;password=#&#123;password&#125;,&lt;/if&gt; &lt;if test=&quot;email != null&quot;&gt;email=#&#123;email&#125;,&lt;/if&gt; &lt;if test=&quot;bio != null&quot;&gt;bio=#&#123;bio&#125;&lt;/if&gt; &lt;/set&gt; where id=#&#123;id&#125;&lt;/update&gt; è¿™ä¸ªä¾‹å­ä¸­ï¼Œset å…ƒç´ ä¼šåŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ï¼ˆè¿™äº›é€—å·æ˜¯åœ¨ä½¿ç”¨æ¡ä»¶è¯­å¥ç»™åˆ—èµ‹å€¼æ—¶å¼•å…¥çš„ï¼‰ã€‚ æˆ–è€…ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨trimå…ƒç´ æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼š 123&lt;trim prefix=&quot;SET&quot; suffixOverrides=&quot;,&quot;&gt; ...&lt;/trim&gt; æ³¨æ„ï¼Œæˆ‘ä»¬è¦†ç›–äº†åç¼€å€¼è®¾ç½®ï¼Œå¹¶ä¸”è‡ªå®šä¹‰äº†å‰ç¼€å€¼ã€‚ foreachåŠ¨æ€ SQL çš„å¦ä¸€ä¸ªå¸¸è§ä½¿ç”¨åœºæ™¯æ˜¯å¯¹é›†åˆè¿›è¡Œéå†ï¼ˆå°¤å…¶æ˜¯åœ¨æ„å»º IN æ¡ä»¶è¯­å¥çš„æ—¶å€™ï¼‰ã€‚æ¯”å¦‚ï¼š 12345678910&lt;select id=&quot;selectPostIn&quot; resultType=&quot;domain.blog.Post&quot;&gt; SELECT * FROM POST P &lt;where&gt; &lt;foreach item=&quot;item&quot; index=&quot;index&quot; collection=&quot;list&quot; open=&quot;ID in (&quot; separator=&quot;,&quot; close=&quot;)&quot; nullable=&quot;true&quot;&gt; #&#123;item&#125; &lt;/foreach&gt; &lt;/where&gt;&lt;/select&gt; foreach å…ƒç´ çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸ä½ æŒ‡å®šä¸€ä¸ªé›†åˆï¼Œå£°æ˜å¯ä»¥åœ¨å…ƒç´ ä½“å†…ä½¿ç”¨çš„é›†åˆé¡¹ï¼ˆitemï¼‰å’Œç´¢å¼•ï¼ˆindexï¼‰å˜é‡ã€‚å®ƒä¹Ÿå…è®¸ä½ æŒ‡å®šå¼€å¤´ä¸ç»“å°¾çš„å­—ç¬¦ä¸²ä»¥åŠé›†åˆé¡¹è¿­ä»£ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚è¿™ä¸ªå…ƒç´ ä¹Ÿä¸ä¼šé”™è¯¯åœ°æ·»åŠ å¤šä½™çš„åˆ†éš”ç¬¦ï¼Œçœ‹å®ƒå¤šæ™ºèƒ½ï¼ æç¤º ä½ å¯ä»¥å°†ä»»ä½•å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚ Listã€Set ç­‰ï¼‰ã€Map å¯¹è±¡æˆ–è€…æ•°ç»„å¯¹è±¡ä½œä¸ºé›†åˆå‚æ•°ä¼ é€’ç»™ foreachã€‚å½“ä½¿ç”¨å¯è¿­ä»£å¯¹è±¡æˆ–è€…æ•°ç»„æ—¶ï¼Œindex æ˜¯å½“å‰è¿­ä»£çš„åºå·ï¼Œitem çš„å€¼æ˜¯æœ¬æ¬¡è¿­ä»£è·å–åˆ°çš„å…ƒç´ ã€‚å½“ä½¿ç”¨ Map å¯¹è±¡ï¼ˆæˆ–è€… Map.Entry å¯¹è±¡çš„é›†åˆï¼‰æ—¶ï¼Œindex æ˜¯é”®ï¼Œitem æ˜¯å€¼ã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸ XML é…ç½®åŠæ˜ å°„æ–‡ä»¶ç›¸å…³çš„è®¨è®ºã€‚ä¸‹ä¸€ç« å°†è¯¦ç»†æ¢è®¨ Java APIï¼Œä»¥ä¾¿ä½ èƒ½å……åˆ†åˆ©ç”¨å·²ç»åˆ›å»ºçš„æ˜ å°„é…ç½®ã€‚ scriptè¦åœ¨å¸¦æ³¨è§£çš„æ˜ å°„å™¨æ¥å£ç±»ä¸­ä½¿ç”¨åŠ¨æ€ SQLï¼Œå¯ä»¥ä½¿ç”¨ script å…ƒç´ ã€‚æ¯”å¦‚: 1234567891011@Update(&#123;&quot;&lt;script&gt;&quot;, &quot;update Author&quot;, &quot; &lt;set&gt;&quot;, &quot; &lt;if test=&#x27;username != null&#x27;&gt;username=#&#123;username&#125;,&lt;/if&gt;&quot;, &quot; &lt;if test=&#x27;password != null&#x27;&gt;password=#&#123;password&#125;,&lt;/if&gt;&quot;, &quot; &lt;if test=&#x27;email != null&#x27;&gt;email=#&#123;email&#125;,&lt;/if&gt;&quot;, &quot; &lt;if test=&#x27;bio != null&#x27;&gt;bio=#&#123;bio&#125;&lt;/if&gt;&quot;, &quot; &lt;/set&gt;&quot;, &quot;where id=#&#123;id&#125;&quot;, &quot;&lt;/script&gt;&quot;&#125;)void updateAuthorValues(Author author); bindbind å…ƒç´ å…è®¸ä½ åœ¨ OGNL è¡¨è¾¾å¼ä»¥å¤–åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°å½“å‰çš„ä¸Šä¸‹æ–‡ã€‚æ¯”å¦‚ï¼š 12345&lt;select id=&quot;selectBlogsLike&quot; resultType=&quot;Blog&quot;&gt; &lt;bind name=&quot;pattern&quot; value=&quot;&#x27;%&#x27; + _parameter.getTitle() + &#x27;%&#x27;&quot; /&gt; SELECT * FROM BLOG WHERE title LIKE #&#123;pattern&#125;&lt;/select&gt; å¤šæ•°æ®åº“æ”¯æŒå¦‚æœé…ç½®äº† databaseIdProviderï¼Œä½ å°±å¯ä»¥åœ¨åŠ¨æ€ä»£ç ä¸­ä½¿ç”¨åä¸º â€œ_databaseIdâ€ çš„å˜é‡æ¥ä¸ºä¸åŒçš„æ•°æ®åº“æ„å»ºç‰¹å®šçš„è¯­å¥ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š 1234567891011&lt;insert id=&quot;insert&quot;&gt; &lt;selectKey keyProperty=&quot;id&quot; resultType=&quot;int&quot; order=&quot;BEFORE&quot;&gt; &lt;if test=&quot;_databaseId == &#x27;oracle&#x27;&quot;&gt; select seq_users.nextval from dual &lt;/if&gt; &lt;if test=&quot;_databaseId == &#x27;db2&#x27;&quot;&gt; select nextval for seq_users from sysibm.sysdummy1&quot; &lt;/if&gt; &lt;/selectKey&gt; insert into users values (#&#123;id&#125;, #&#123;name&#125;)&lt;/insert&gt; åŠ¨æ€ SQL ä¸­çš„æ’å…¥è„šæœ¬è¯­è¨€MyBatis ä» 3.2 ç‰ˆæœ¬å¼€å§‹æ”¯æŒæ’å…¥è„šæœ¬è¯­è¨€ï¼Œè¿™å…è®¸ä½ æ’å…¥ä¸€ç§è¯­è¨€é©±åŠ¨ï¼Œå¹¶åŸºäºè¿™ç§è¯­è¨€æ¥ç¼–å†™åŠ¨æ€ SQL æŸ¥è¯¢è¯­å¥ã€‚ å¯ä»¥é€šè¿‡å®ç°ä»¥ä¸‹æ¥å£æ¥æ’å…¥ä¸€ç§è¯­è¨€ï¼š 12345public interface LanguageDriver &#123; ParameterHandler createParameterHandler(MappedStatement mappedStatement, Object parameterObject, BoundSql boundSql); SqlSource createSqlSource(Configuration configuration, XNode script, Class&lt;?&gt; parameterType); SqlSource createSqlSource(Configuration configuration, String script, Class&lt;?&gt; parameterType);&#125; å®ç°è‡ªå®šä¹‰è¯­è¨€é©±åŠ¨åï¼Œä½ å°±å¯ä»¥åœ¨ mybatis-config.xml æ–‡ä»¶ä¸­å°†å®ƒè®¾ç½®ä¸ºé»˜è®¤è¯­è¨€ï¼š 123456&lt;typeAliases&gt; &lt;typeAlias type=&quot;org.sample.MyLanguageDriver&quot; alias=&quot;myLanguage&quot;/&gt;&lt;/typeAliases&gt;&lt;settings&gt; &lt;setting name=&quot;defaultScriptingLanguage&quot; value=&quot;myLanguage&quot;/&gt;&lt;/settings&gt; æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ lang å±æ€§ä¸ºç‰¹å®šçš„è¯­å¥æŒ‡å®šè¯­è¨€ï¼š 123&lt;select id=&quot;selectBlog&quot; lang=&quot;myLanguage&quot;&gt; SELECT * FROM BLOG&lt;/select&gt; æˆ–è€…ï¼Œåœ¨ä½ çš„ mapper æ¥å£ä¸Šæ·»åŠ  @Lang æ³¨è§£ï¼š 12345public interface Mapper &#123; @Lang(MyLanguageDriver.class) @Select(&quot;SELECT * FROM BLOG&quot;) List&lt;Blog&gt; selectBlog();&#125; æç¤º å¯ä»¥ä½¿ç”¨ Apache Velocity ä½œä¸ºåŠ¨æ€è¯­è¨€ï¼Œæ›´å¤šç»†èŠ‚è¯·å‚è€ƒ MyBatis-Velocity é¡¹ç›®ã€‚ ä½ å‰é¢çœ‹åˆ°çš„æ‰€æœ‰ xml æ ‡ç­¾éƒ½ç”±é»˜è®¤ MyBatis è¯­è¨€æä¾›ï¼Œè€Œå®ƒç”±è¯­è¨€é©±åŠ¨ org.apache.ibatis.scripting.xmltags.XmlLanguageDriverï¼ˆåˆ«åä¸º xmlï¼‰æ‰€æä¾›ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SQL","slug":"SQL","permalink":"https://guoshunfa.com/tags/SQL/"},{"name":"MyBatis","slug":"MyBatis","permalink":"https://guoshunfa.com/tags/MyBatis/"}]},{"title":"MyBatis XMLæ˜ å°„å™¨","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Mybatis/MyBatis-XMLæ˜ å°„å™¨","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.300Z","comments":true,"path":"2022/07/MyBatis-XMLæ˜ å°„å™¨/","link":"","permalink":"https://guoshunfa.com/2022/07/MyBatis-XML%E6%98%A0%E5%B0%84%E5%99%A8/","excerpt":"","text":"MyBatis çš„çœŸæ­£å¼ºå¤§åœ¨äºå®ƒçš„è¯­å¥æ˜ å°„ï¼Œè¿™æ˜¯å®ƒçš„é­”åŠ›æ‰€åœ¨ã€‚ç”±äºå®ƒçš„å¼‚å¸¸å¼ºå¤§ï¼Œæ˜ å°„å™¨çš„ XML æ–‡ä»¶å°±æ˜¾å¾—ç›¸å¯¹ç®€å•ã€‚å¦‚æœæ‹¿å®ƒè·Ÿå…·æœ‰ç›¸åŒåŠŸèƒ½çš„ JDBC ä»£ç è¿›è¡Œå¯¹æ¯”ï¼Œä½ ä¼šç«‹å³å‘ç°çœæ‰äº†å°†è¿‘ 95% çš„ä»£ç ã€‚MyBatis è‡´åŠ›äºå‡å°‘ä½¿ç”¨æˆæœ¬ï¼Œè®©ç”¨æˆ·èƒ½æ›´ä¸“æ³¨äº SQL ä»£ç ã€‚ SQL æ˜ å°„æ–‡ä»¶åªæœ‰å¾ˆå°‘çš„å‡ ä¸ªé¡¶çº§å…ƒç´ ï¼ˆæŒ‰ç…§åº”è¢«å®šä¹‰çš„é¡ºåºåˆ—å‡ºï¼‰ï¼š cache â€“ è¯¥å‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚ cache-ref â€“ å¼•ç”¨å…¶å®ƒå‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚ resultMap â€“ æè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­åŠ è½½å¯¹è±¡ï¼Œæ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€å¼ºå¤§çš„å…ƒç´ ã€‚ parameterMap â€“ è€å¼é£æ ¼çš„å‚æ•°æ˜ å°„ã€‚æ­¤å…ƒç´ å·²è¢«åºŸå¼ƒï¼Œå¹¶å¯èƒ½åœ¨å°†æ¥è¢«ç§»é™¤ï¼è¯·ä½¿ç”¨è¡Œå†…å‚æ•°æ˜ å°„ã€‚æ–‡æ¡£ä¸­ä¸ä¼šä»‹ç»æ­¤å…ƒç´ ã€‚ sql â€“ å¯è¢«å…¶å®ƒè¯­å¥å¼•ç”¨çš„å¯é‡ç”¨è¯­å¥å—ã€‚ insert â€“ æ˜ å°„æ’å…¥è¯­å¥ã€‚ update â€“ æ˜ å°„æ›´æ–°è¯­å¥ã€‚ delete â€“ æ˜ å°„åˆ é™¤è¯­å¥ã€‚ select â€“ æ˜ å°„æŸ¥è¯¢è¯­å¥ã€‚ ä¸‹ä¸€éƒ¨åˆ†å°†ä»è¯­å¥æœ¬èº«å¼€å§‹æ¥æè¿°æ¯ä¸ªå…ƒç´ çš„ç»†èŠ‚ã€‚ selectæŸ¥è¯¢è¯­å¥æ˜¯ MyBatis ä¸­æœ€å¸¸ç”¨çš„å…ƒç´ ä¹‹ä¸€â€”â€”å…‰èƒ½æŠŠæ•°æ®å­˜åˆ°æ•°æ®åº“ä¸­ä»·å€¼å¹¶ä¸å¤§ï¼Œè¿˜è¦èƒ½é‡æ–°å–å‡ºæ¥æ‰æœ‰ç”¨ï¼Œå¤šæ•°åº”ç”¨ä¹Ÿéƒ½æ˜¯æŸ¥è¯¢æ¯”ä¿®æ”¹è¦é¢‘ç¹ã€‚ MyBatis çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€æ˜¯ï¼šåœ¨æ¯ä¸ªæ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ“ä½œä¹‹é—´ï¼Œé€šå¸¸ä¼šæ‰§è¡Œå¤šä¸ªæŸ¥è¯¢æ“ä½œã€‚å› æ­¤ï¼ŒMyBatis åœ¨æŸ¥è¯¢å’Œç»“æœæ˜ å°„åšäº†ç›¸å½“å¤šçš„æ”¹è¿›ã€‚ä¸€ä¸ªç®€å•æŸ¥è¯¢çš„ select å…ƒç´ æ˜¯éå¸¸ç®€å•çš„ã€‚æ¯”å¦‚ï¼š 123&lt;select id=&quot;selectPerson&quot; parameterType=&quot;int&quot; resultType=&quot;hashmap&quot;&gt; SELECT * FROM PERSON WHERE ID = #&#123;id&#125;&lt;/select&gt; è¿™ä¸ªè¯­å¥åä¸º selectPersonï¼Œæ¥å—ä¸€ä¸ª intï¼ˆæˆ– Integerï¼‰ç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª HashMap ç±»å‹çš„å¯¹è±¡ï¼Œå…¶ä¸­çš„é”®æ˜¯åˆ—åï¼Œå€¼ä¾¿æ˜¯ç»“æœè¡Œä¸­çš„å¯¹åº”å€¼ã€‚ æ³¨æ„å‚æ•°ç¬¦å·ï¼š 1#&#123;id&#125; è¿™å°±å‘Šè¯‰ MyBatis åˆ›å»ºä¸€ä¸ªé¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰å‚æ•°ï¼Œåœ¨ JDBC ä¸­ï¼Œè¿™æ ·çš„ä¸€ä¸ªå‚æ•°åœ¨ SQL ä¸­ä¼šç”±ä¸€ä¸ªâ€œ?â€æ¥æ ‡è¯†ï¼Œå¹¶è¢«ä¼ é€’åˆ°ä¸€ä¸ªæ–°çš„é¢„å¤„ç†è¯­å¥ä¸­ï¼Œå°±åƒè¿™æ ·ï¼š 1234// è¿‘ä¼¼çš„ JDBC ä»£ç ï¼Œé MyBatis ä»£ç ...String selectPerson = &quot;SELECT * FROM PERSON WHERE ID=?&quot;;PreparedStatement ps = conn.prepareStatement(selectPerson);ps.setInt(1,id); å½“ç„¶ï¼Œä½¿ç”¨ JDBC å°±æ„å‘³ç€ä½¿ç”¨æ›´å¤šçš„ä»£ç ï¼Œä»¥ä¾¿æå–ç»“æœå¹¶å°†å®ƒä»¬æ˜ å°„åˆ°å¯¹è±¡å®ä¾‹ä¸­ï¼Œè€Œè¿™å°±æ˜¯ MyBatis çš„æ‹¿æ‰‹å¥½æˆã€‚å‚æ•°å’Œç»“æœæ˜ å°„çš„è¯¦ç»†ç»†èŠ‚ä¼šåˆ†åˆ«åœ¨åé¢å•ç‹¬çš„å°èŠ‚ä¸­è¯´æ˜ã€‚ select å…ƒç´ å…è®¸ä½ é…ç½®å¾ˆå¤šå±æ€§æ¥é…ç½®æ¯æ¡è¯­å¥çš„è¡Œä¸ºç»†èŠ‚ã€‚ 123456789101112&lt;select id=&quot;selectPerson&quot; parameterType=&quot;int&quot; parameterMap=&quot;deprecated&quot; resultType=&quot;hashmap&quot; resultMap=&quot;personResultMap&quot; flushCache=&quot;false&quot; useCache=&quot;true&quot; timeout=&quot;10&quot; fetchSize=&quot;256&quot; statementType=&quot;PREPARED&quot; resultSetType=&quot;FORWARD_ONLY&quot;&gt; å±æ€§ æè¿° id åœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚ parameterType å°†ä¼šä¼ å…¥è¿™æ¡è¯­å¥çš„å‚æ•°çš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚è¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„ï¼Œå› ä¸º MyBatis å¯ä»¥é€šè¿‡ç±»å‹å¤„ç†å™¨ï¼ˆTypeHandlerï¼‰æ¨æ–­å‡ºå…·ä½“ä¼ å…¥è¯­å¥çš„å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚ parameterMap ç”¨äºå¼•ç”¨å¤–éƒ¨ parameterMap çš„å±æ€§ï¼Œç›®å‰å·²è¢«åºŸå¼ƒã€‚è¯·ä½¿ç”¨è¡Œå†…å‚æ•°æ˜ å°„å’Œ parameterType å±æ€§ã€‚ resultType æœŸæœ›ä»è¿™æ¡è¯­å¥ä¸­è¿”å›ç»“æœçš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚ æ³¨æ„ï¼Œå¦‚æœè¿”å›çš„æ˜¯é›†åˆï¼Œé‚£åº”è¯¥è®¾ç½®ä¸ºé›†åˆåŒ…å«çš„ç±»å‹ï¼Œè€Œä¸æ˜¯é›†åˆæœ¬èº«çš„ç±»å‹ã€‚ resultType å’Œ resultMap ä¹‹é—´åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªã€‚ resultMap å¯¹å¤–éƒ¨ resultMap çš„å‘½åå¼•ç”¨ã€‚ç»“æœæ˜ å°„æ˜¯ MyBatis æœ€å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¦‚æœä½ å¯¹å…¶ç†è§£é€å½»ï¼Œè®¸å¤šå¤æ‚çš„æ˜ å°„é—®é¢˜éƒ½èƒ½è¿åˆƒè€Œè§£ã€‚ resultType å’Œ resultMap ä¹‹é—´åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªã€‚ flushCache å°†å…¶è®¾ç½®ä¸º true åï¼Œåªè¦è¯­å¥è¢«è°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´æœ¬åœ°ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜è¢«æ¸…ç©ºï¼Œé»˜è®¤å€¼ï¼šfalseã€‚ useCache å°†å…¶è®¾ç½®ä¸º true åï¼Œå°†ä¼šå¯¼è‡´æœ¬æ¡è¯­å¥çš„ç»“æœè¢«äºŒçº§ç¼“å­˜ç¼“å­˜èµ·æ¥ï¼Œé»˜è®¤å€¼ï¼šå¯¹ select å…ƒç´ ä¸º trueã€‚ timeout è¿™ä¸ªè®¾ç½®æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œé©±åŠ¨ç¨‹åºç­‰å¾…æ•°æ®åº“è¿”å›è¯·æ±‚ç»“æœçš„ç§’æ•°ã€‚é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚ fetchSize è¿™æ˜¯ä¸€ä¸ªç»™é©±åŠ¨çš„å»ºè®®å€¼ï¼Œå°è¯•è®©é©±åŠ¨ç¨‹åºæ¯æ¬¡æ‰¹é‡è¿”å›çš„ç»“æœè¡Œæ•°ç­‰äºè¿™ä¸ªè®¾ç½®å€¼ã€‚ é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–é©±åŠ¨ï¼‰ã€‚ statementType å¯é€‰ STATEMENTï¼ŒPREPARED æˆ– CALLABLEã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨ Statementï¼ŒPreparedStatement æˆ– CallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPAREDã€‚ resultSetType FORWARD_ONLYï¼ŒSCROLL_SENSITIVE, SCROLL_INSENSITIVE æˆ– DEFAULTï¼ˆç­‰ä»·äº unsetï¼‰ ä¸­çš„ä¸€ä¸ªï¼Œé»˜è®¤å€¼ä¸º unset ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚ databaseId å¦‚æœé…ç½®äº†æ•°æ®åº“å‚å•†æ ‡è¯†ï¼ˆdatabaseIdProviderï¼‰ï¼ŒMyBatis ä¼šåŠ è½½æ‰€æœ‰ä¸å¸¦ databaseId æˆ–åŒ¹é…å½“å‰ databaseId çš„è¯­å¥ï¼›å¦‚æœå¸¦å’Œä¸å¸¦çš„è¯­å¥éƒ½æœ‰ï¼Œåˆ™ä¸å¸¦çš„ä¼šè¢«å¿½ç•¥ã€‚ resultOrdered è¿™ä¸ªè®¾ç½®ä»…é’ˆå¯¹åµŒå¥—ç»“æœ select è¯­å¥ï¼šå¦‚æœä¸º trueï¼Œåˆ™å‡è®¾ç»“æœé›†ä»¥æ­£ç¡®é¡ºåºï¼ˆæ’åºåï¼‰æ‰§è¡Œæ˜ å°„ï¼Œå½“è¿”å›æ–°çš„ä¸»ç»“æœè¡Œæ—¶ï¼Œå°†ä¸å†å‘ç”Ÿå¯¹ä»¥å‰ç»“æœè¡Œçš„å¼•ç”¨ã€‚ è¿™æ ·å¯ä»¥å‡å°‘å†…å­˜æ¶ˆè€—ã€‚é»˜è®¤å€¼ï¼šfalseã€‚ resultSets è¿™ä¸ªè®¾ç½®ä»…é€‚ç”¨äºå¤šç»“æœé›†çš„æƒ…å†µã€‚å®ƒå°†åˆ—å‡ºè¯­å¥æ‰§è¡Œåè¿”å›çš„ç»“æœé›†å¹¶èµ‹äºˆæ¯ä¸ªç»“æœé›†ä¸€ä¸ªåç§°ï¼Œå¤šä¸ªåç§°ä¹‹é—´ä»¥é€—å·åˆ†éš”ã€‚ insert, update å’Œ deleteæ•°æ®å˜æ›´è¯­å¥ insertï¼Œupdate å’Œ delete çš„å®ç°éå¸¸æ¥è¿‘ï¼š 1234567891011121314151617181920212223&lt;insert id=&quot;insertAuthor&quot; parameterType=&quot;domain.blog.Author&quot; flushCache=&quot;true&quot; statementType=&quot;PREPARED&quot; keyProperty=&quot;&quot; keyColumn=&quot;&quot; useGeneratedKeys=&quot;&quot; timeout=&quot;20&quot;&gt;&lt;update id=&quot;updateAuthor&quot; parameterType=&quot;domain.blog.Author&quot; flushCache=&quot;true&quot; statementType=&quot;PREPARED&quot; timeout=&quot;20&quot;&gt;&lt;delete id=&quot;deleteAuthor&quot; parameterType=&quot;domain.blog.Author&quot; flushCache=&quot;true&quot; statementType=&quot;PREPARED&quot; timeout=&quot;20&quot;&gt; å±æ€§ æè¿° id åœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚ parameterType å°†ä¼šä¼ å…¥è¿™æ¡è¯­å¥çš„å‚æ•°çš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚è¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„ï¼Œå› ä¸º MyBatis å¯ä»¥é€šè¿‡ç±»å‹å¤„ç†å™¨ï¼ˆTypeHandlerï¼‰æ¨æ–­å‡ºå…·ä½“ä¼ å…¥è¯­å¥çš„å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚ parameterMap ç”¨äºå¼•ç”¨å¤–éƒ¨ parameterMap çš„å±æ€§ï¼Œç›®å‰å·²è¢«åºŸå¼ƒã€‚è¯·ä½¿ç”¨è¡Œå†…å‚æ•°æ˜ å°„å’Œ parameterType å±æ€§ã€‚ flushCache å°†å…¶è®¾ç½®ä¸º true åï¼Œåªè¦è¯­å¥è¢«è°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´æœ¬åœ°ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜è¢«æ¸…ç©ºï¼Œé»˜è®¤å€¼ï¼šï¼ˆå¯¹ insertã€update å’Œ delete è¯­å¥ï¼‰trueã€‚ timeout è¿™ä¸ªè®¾ç½®æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œé©±åŠ¨ç¨‹åºç­‰å¾…æ•°æ®åº“è¿”å›è¯·æ±‚ç»“æœçš„ç§’æ•°ã€‚é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚ statementType å¯é€‰ STATEMENTï¼ŒPREPARED æˆ– CALLABLEã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨ Statementï¼ŒPreparedStatement æˆ– CallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPAREDã€‚ useGeneratedKeys ï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰è¿™ä¼šä»¤ MyBatis ä½¿ç”¨ JDBC çš„ getGeneratedKeys æ–¹æ³•æ¥å–å‡ºç”±æ•°æ®åº“å†…éƒ¨ç”Ÿæˆçš„ä¸»é”®ï¼ˆæ¯”å¦‚ï¼šåƒ MySQL å’Œ SQL Server è¿™æ ·çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„è‡ªåŠ¨é€’å¢å­—æ®µï¼‰ï¼Œé»˜è®¤å€¼ï¼šfalseã€‚ keyProperty ï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰æŒ‡å®šèƒ½å¤Ÿå”¯ä¸€è¯†åˆ«å¯¹è±¡çš„å±æ€§ï¼ŒMyBatis ä¼šä½¿ç”¨ getGeneratedKeys çš„è¿”å›å€¼æˆ– insert è¯­å¥çš„ selectKey å­å…ƒç´ è®¾ç½®å®ƒçš„å€¼ï¼Œé»˜è®¤å€¼ï¼šæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚ keyColumn ï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰è®¾ç½®ç”Ÿæˆé”®å€¼åœ¨è¡¨ä¸­çš„åˆ—åï¼Œåœ¨æŸäº›æ•°æ®åº“ï¼ˆåƒ PostgreSQLï¼‰ä¸­ï¼Œå½“ä¸»é”®åˆ—ä¸æ˜¯è¡¨ä¸­çš„ç¬¬ä¸€åˆ—çš„æ—¶å€™ï¼Œæ˜¯å¿…é¡»è®¾ç½®çš„ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚ databaseId å¦‚æœé…ç½®äº†æ•°æ®åº“å‚å•†æ ‡è¯†ï¼ˆdatabaseIdProviderï¼‰ï¼ŒMyBatis ä¼šåŠ è½½æ‰€æœ‰ä¸å¸¦ databaseId æˆ–åŒ¹é…å½“å‰ databaseId çš„è¯­å¥ï¼›å¦‚æœå¸¦å’Œä¸å¸¦çš„è¯­å¥éƒ½æœ‰ï¼Œåˆ™ä¸å¸¦çš„ä¼šè¢«å¿½ç•¥ã€‚ ä¸‹é¢æ˜¯ insertï¼Œupdate å’Œ delete è¯­å¥çš„ç¤ºä¾‹ï¼š 1234567891011121314151617&lt;insert id=&quot;insertAuthor&quot;&gt; insert into Author (id,username,password,email,bio) values (#&#123;id&#125;,#&#123;username&#125;,#&#123;password&#125;,#&#123;email&#125;,#&#123;bio&#125;)&lt;/insert&gt;&lt;update id=&quot;updateAuthor&quot;&gt; update Author set username = #&#123;username&#125;, password = #&#123;password&#125;, email = #&#123;email&#125;, bio = #&#123;bio&#125; where id = #&#123;id&#125;&lt;/update&gt;&lt;delete id=&quot;deleteAuthor&quot;&gt; delete from Author where id = #&#123;id&#125;&lt;/delete&gt; å¦‚å‰æ‰€è¿°ï¼Œæ’å…¥è¯­å¥çš„é…ç½®è§„åˆ™æ›´åŠ ä¸°å¯Œï¼Œåœ¨æ’å…¥è¯­å¥é‡Œé¢æœ‰ä¸€äº›é¢å¤–çš„å±æ€§å’Œå­å…ƒç´ ç”¨æ¥å¤„ç†ä¸»é”®çš„ç”Ÿæˆï¼Œå¹¶ä¸”æä¾›äº†å¤šç§ç”Ÿæˆæ–¹å¼ã€‚ é¦–å…ˆï¼Œå¦‚æœä½ çš„æ•°æ®åº“æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®çš„å­—æ®µï¼ˆæ¯”å¦‚ MySQL å’Œ SQL Serverï¼‰ï¼Œé‚£ä¹ˆä½ å¯ä»¥è®¾ç½® useGeneratedKeys&#x3D;â€trueâ€ï¼Œç„¶åå†æŠŠ keyProperty è®¾ç½®ä¸ºç›®æ ‡å±æ€§å°± OK äº†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸Šé¢çš„ Author è¡¨å·²ç»åœ¨ id åˆ—ä¸Šä½¿ç”¨äº†è‡ªåŠ¨ç”Ÿæˆï¼Œé‚£ä¹ˆè¯­å¥å¯ä»¥ä¿®æ”¹ä¸ºï¼š 12345&lt;insert id=&quot;insertAuthor&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt; insert into Author (username,password,email,bio) values (#&#123;username&#125;,#&#123;password&#125;,#&#123;email&#125;,#&#123;bio&#125;)&lt;/insert&gt; å¦‚æœä½ çš„æ•°æ®åº“è¿˜æ”¯æŒå¤šè¡Œæ’å…¥, ä½ ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ª Author æ•°ç»„æˆ–é›†åˆï¼Œå¹¶è¿”å›è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®ã€‚ 1234567&lt;insert id=&quot;insertAuthor&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt; insert into Author (username, password, email, bio) values &lt;foreach item=&quot;item&quot; collection=&quot;list&quot; separator=&quot;,&quot;&gt; (#&#123;item.username&#125;, #&#123;item.password&#125;, #&#123;item.email&#125;, #&#123;item.bio&#125;) &lt;/foreach&gt;&lt;/insert&gt; å¯¹äºä¸æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®åˆ—çš„æ•°æ®åº“å’Œå¯èƒ½ä¸æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®çš„ JDBC é©±åŠ¨ï¼ŒMyBatis æœ‰å¦å¤–ä¸€ç§æ–¹æ³•æ¥ç”Ÿæˆä¸»é”®ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•ï¼ˆä¹Ÿå¾ˆå‚»ï¼‰çš„ç¤ºä¾‹ï¼Œå®ƒå¯ä»¥ç”Ÿæˆä¸€ä¸ªéšæœº IDï¼ˆä¸å»ºè®®å®é™…ä½¿ç”¨ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†å±•ç¤º MyBatis å¤„ç†é—®é¢˜çš„çµæ´»æ€§å’Œå®½å®¹åº¦ï¼‰ï¼š 123456789&lt;insert id=&quot;insertAuthor&quot;&gt; &lt;selectKey keyProperty=&quot;id&quot; resultType=&quot;int&quot; order=&quot;BEFORE&quot;&gt; select CAST(RANDOM()*1000000 as INTEGER) a from SYSIBM.SYSDUMMY1 &lt;/selectKey&gt; insert into Author (id, username, password, email,bio, favourite_section) values (#&#123;id&#125;, #&#123;username&#125;, #&#123;password&#125;, #&#123;email&#125;, #&#123;bio&#125;, #&#123;favouriteSection,jdbcType=VARCHAR&#125;)&lt;/insert&gt; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œé¦–å…ˆä¼šè¿è¡Œ selectKey å…ƒç´ ä¸­çš„è¯­å¥ï¼Œå¹¶è®¾ç½® Author çš„ idï¼Œç„¶åæ‰ä¼šè°ƒç”¨æ’å…¥è¯­å¥ã€‚è¿™æ ·å°±å®ç°äº†æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆä¸»é”®ç±»ä¼¼çš„è¡Œä¸ºï¼ŒåŒæ—¶ä¿æŒäº† Java ä»£ç çš„ç®€æ´ã€‚ selectKey å…ƒç´ æè¿°å¦‚ä¸‹ï¼š 12345&lt;selectKey keyProperty=&quot;id&quot; resultType=&quot;int&quot; order=&quot;BEFORE&quot; statementType=&quot;PREPARED&quot;&gt; å±æ€§ æè¿° keyProperty selectKey è¯­å¥ç»“æœåº”è¯¥è¢«è®¾ç½®åˆ°çš„ç›®æ ‡å±æ€§ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚ keyColumn è¿”å›ç»“æœé›†ä¸­ç”Ÿæˆåˆ—å±æ€§çš„åˆ—åã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚ resultType ç»“æœçš„ç±»å‹ã€‚é€šå¸¸ MyBatis å¯ä»¥æ¨æ–­å‡ºæ¥ï¼Œä½†æ˜¯ä¸ºäº†æ›´åŠ å‡†ç¡®ï¼Œå†™ä¸Šä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚MyBatis å…è®¸å°†ä»»ä½•ç®€å•ç±»å‹ç”¨ä½œä¸»é”®çš„ç±»å‹ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŒ…å«æœŸæœ›å±æ€§çš„ Object æˆ– Mapã€‚ order å¯ä»¥è®¾ç½®ä¸º BEFORE æˆ– AFTERã€‚å¦‚æœè®¾ç½®ä¸º BEFOREï¼Œé‚£ä¹ˆå®ƒé¦–å…ˆä¼šç”Ÿæˆä¸»é”®ï¼Œè®¾ç½® keyProperty å†æ‰§è¡Œæ’å…¥è¯­å¥ã€‚å¦‚æœè®¾ç½®ä¸º AFTERï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œæ’å…¥è¯­å¥ï¼Œç„¶åæ˜¯ selectKey ä¸­çš„è¯­å¥ - è¿™å’Œ Oracle æ•°æ®åº“çš„è¡Œä¸ºç›¸ä¼¼ï¼Œåœ¨æ’å…¥è¯­å¥å†…éƒ¨å¯èƒ½æœ‰åµŒå…¥ç´¢å¼•è°ƒç”¨ã€‚ statementType å’Œå‰é¢ä¸€æ ·ï¼ŒMyBatis æ”¯æŒ STATEMENTï¼ŒPREPARED å’Œ CALLABLE ç±»å‹çš„æ˜ å°„è¯­å¥ï¼Œåˆ†åˆ«ä»£è¡¨ Statement, PreparedStatement å’Œ CallableStatement ç±»å‹ã€‚ sqlè¿™ä¸ªå…ƒç´ å¯ä»¥ç”¨æ¥å®šä¹‰å¯é‡ç”¨çš„ SQL ä»£ç ç‰‡æ®µï¼Œä»¥ä¾¿åœ¨å…¶å®ƒè¯­å¥ä¸­ä½¿ç”¨ã€‚ å‚æ•°å¯ä»¥é™æ€åœ°ï¼ˆåœ¨åŠ è½½çš„æ—¶å€™ï¼‰ç¡®å®šä¸‹æ¥ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸åŒçš„ include å…ƒç´ ä¸­å®šä¹‰ä¸åŒçš„å‚æ•°å€¼ã€‚æ¯”å¦‚ï¼š 1&lt;sql id=&quot;userColumns&quot;&gt; $&#123;alias&#125;.id,$&#123;alias&#125;.username,$&#123;alias&#125;.password &lt;/sql&gt; è¿™ä¸ª SQL ç‰‡æ®µå¯ä»¥åœ¨å…¶å®ƒè¯­å¥ä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š 1234567&lt;select id=&quot;selectUsers&quot; resultType=&quot;map&quot;&gt; select &lt;include refid=&quot;userColumns&quot;&gt;&lt;property name=&quot;alias&quot; value=&quot;t1&quot;/&gt;&lt;/include&gt;, &lt;include refid=&quot;userColumns&quot;&gt;&lt;property name=&quot;alias&quot; value=&quot;t2&quot;/&gt;&lt;/include&gt; from some_table t1 cross join some_table t2&lt;/select&gt; ä¹Ÿå¯ä»¥åœ¨ include å…ƒç´ çš„ refid å±æ€§æˆ–å†…éƒ¨è¯­å¥ä¸­ä½¿ç”¨å±æ€§å€¼ï¼Œä¾‹å¦‚ï¼š 1234567891011121314151617&lt;sql id=&quot;sometable&quot;&gt; $&#123;prefix&#125;Table&lt;/sql&gt;&lt;sql id=&quot;someinclude&quot;&gt; from &lt;include refid=&quot;$&#123;include_target&#125;&quot;/&gt;&lt;/sql&gt;&lt;select id=&quot;select&quot; resultType=&quot;map&quot;&gt; select field1, field2, field3 &lt;include refid=&quot;someinclude&quot;&gt; &lt;property name=&quot;prefix&quot; value=&quot;Some&quot;/&gt; &lt;property name=&quot;include_target&quot; value=&quot;sometable&quot;/&gt; &lt;/include&gt;&lt;/select&gt; å‚æ•°ä¹‹å‰è§åˆ°çš„æ‰€æœ‰è¯­å¥éƒ½ä½¿ç”¨äº†ç®€å•çš„å‚æ•°å½¢å¼ã€‚ä½†å®é™…ä¸Šï¼Œå‚æ•°æ˜¯ MyBatis éå¸¸å¼ºå¤§çš„å…ƒç´ ã€‚å¯¹äºå¤§å¤šæ•°ç®€å•çš„ä½¿ç”¨åœºæ™¯ï¼Œä½ éƒ½ä¸éœ€è¦ä½¿ç”¨å¤æ‚çš„å‚æ•°ï¼Œæ¯”å¦‚ï¼š 12345&lt;select id=&quot;selectUsers&quot; resultType=&quot;User&quot;&gt; select id, username, password from users where id = #&#123;id&#125;&lt;/select&gt; ä¸Šé¢çš„è¿™ä¸ªç¤ºä¾‹è¯´æ˜äº†ä¸€ä¸ªéå¸¸ç®€å•çš„å‘½åå‚æ•°æ˜ å°„ã€‚é‰´äºå‚æ•°ç±»å‹ï¼ˆparameterTypeï¼‰ä¼šè¢«è‡ªåŠ¨è®¾ç½®ä¸º intï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥éšæ„å‘½åã€‚åŸå§‹ç±»å‹æˆ–ç®€å•æ•°æ®ç±»å‹ï¼ˆæ¯”å¦‚ Integer å’Œ Stringï¼‰å› ä¸ºæ²¡æœ‰å…¶å®ƒå±æ€§ï¼Œä¼šç”¨å®ƒä»¬çš„å€¼æ¥ä½œä¸ºå‚æ•°ã€‚ ç„¶è€Œï¼Œå¦‚æœä¼ å…¥ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œè¡Œä¸ºå°±ä¼šæœ‰ç‚¹ä¸ä¸€æ ·äº†ã€‚æ¯”å¦‚ï¼š 1234&lt;insert id=&quot;insertUser&quot; parameterType=&quot;User&quot;&gt; insert into users (id, username, password) values (#&#123;id&#125;, #&#123;username&#125;, #&#123;password&#125;)&lt;/insert&gt; å¦‚æœ User ç±»å‹çš„å‚æ•°å¯¹è±¡ä¼ é€’åˆ°äº†è¯­å¥ä¸­ï¼Œä¼šæŸ¥æ‰¾ idã€username å’Œ password å±æ€§ï¼Œç„¶åå°†å®ƒä»¬çš„å€¼ä¼ å…¥é¢„å¤„ç†è¯­å¥çš„å‚æ•°ä¸­ã€‚ å¯¹ä¼ é€’è¯­å¥å‚æ•°æ¥è¯´ï¼Œè¿™ç§æ–¹å¼çœŸæ˜¯å¹²è„†åˆ©è½ã€‚ä¸è¿‡å‚æ•°æ˜ å°„çš„åŠŸèƒ½è¿œä¸æ­¢äºæ­¤ã€‚ é¦–å…ˆï¼Œå’Œ MyBatis çš„å…¶å®ƒéƒ¨åˆ†ä¸€æ ·ï¼Œå‚æ•°ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®ç±»å‹ã€‚ 1#&#123;property,javaType=int,jdbcType=NUMERIC&#125; å’Œ MyBatis çš„å…¶å®ƒéƒ¨åˆ†ä¸€æ ·ï¼Œå‡ ä¹æ€»æ˜¯å¯ä»¥æ ¹æ®å‚æ•°å¯¹è±¡çš„ç±»å‹ç¡®å®š javaTypeï¼Œé™¤éè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ª HashMapã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ éœ€è¦æ˜¾å¼æŒ‡å®š javaType æ¥ç¡®ä¿æ­£ç¡®çš„ç±»å‹å¤„ç†å™¨ï¼ˆTypeHandlerï¼‰è¢«ä½¿ç”¨ã€‚ æç¤º JDBC è¦æ±‚ï¼Œå¦‚æœä¸€ä¸ªåˆ—å…è®¸ä½¿ç”¨ null å€¼ï¼Œå¹¶ä¸”ä¼šä½¿ç”¨å€¼ä¸º null çš„å‚æ•°ï¼Œå°±å¿…é¡»è¦æŒ‡å®š JDBC ç±»å‹ï¼ˆjdbcTypeï¼‰ã€‚é˜…è¯» PreparedStatement.setNull()çš„ JavaDoc æ¥è·å–æ›´å¤šä¿¡æ¯ã€‚ è¦æ›´è¿›ä¸€æ­¥åœ°è‡ªå®šä¹‰ç±»å‹å¤„ç†æ–¹å¼ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹å¤„ç†å™¨ç±»ï¼ˆæˆ–åˆ«åï¼‰ï¼Œæ¯”å¦‚ï¼š 1#&#123;age,javaType=int,jdbcType=NUMERIC,typeHandler=MyTypeHandler&#125; å‚æ•°çš„é…ç½®å¥½åƒè¶Šæ¥è¶Šç¹çäº†ï¼Œä½†å®é™…ä¸Šï¼Œå¾ˆå°‘éœ€è¦å¦‚æ­¤ç¹ççš„é…ç½®ã€‚ å¯¹äºæ•°å€¼ç±»å‹ï¼Œè¿˜å¯ä»¥è®¾ç½® numericScale æŒ‡å®šå°æ•°ç‚¹åä¿ç•™çš„ä½æ•°ã€‚ 1#&#123;height,javaType=double,jdbcType=NUMERIC,numericScale=2&#125; æœ€åï¼Œmode å±æ€§å…è®¸ä½ æŒ‡å®š INï¼ŒOUT æˆ– INOUT å‚æ•°ã€‚å¦‚æœå‚æ•°çš„ mode ä¸º OUT æˆ– INOUTï¼Œå°†ä¼šä¿®æ”¹å‚æ•°å¯¹è±¡çš„å±æ€§å€¼ï¼Œä»¥ä¾¿ä½œä¸ºè¾“å‡ºå‚æ•°è¿”å›ã€‚ å¦‚æœ mode ä¸º OUTï¼ˆæˆ– INOUTï¼‰ï¼Œè€Œä¸” jdbcType ä¸º CURSORï¼ˆä¹Ÿå°±æ˜¯ Oracle çš„ REFCURSORï¼‰ï¼Œä½ å¿…é¡»æŒ‡å®šä¸€ä¸ª resultMap å¼•ç”¨æ¥å°†ç»“æœé›† ResultSet æ˜ å°„åˆ°å‚æ•°çš„ç±»å‹ä¸Šã€‚è¦æ³¨æ„è¿™é‡Œçš„ javaTypeå±æ€§æ˜¯å¯é€‰çš„ï¼Œå¦‚æœç•™ç©ºå¹¶ä¸” jdbcType æ˜¯ CURSORï¼Œå®ƒä¼šè¢«è‡ªåŠ¨åœ°è¢«è®¾ä¸º ResultSetã€‚ 1#&#123;department, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=departmentResultMap&#125; MyBatis ä¹Ÿæ”¯æŒå¾ˆå¤šé«˜çº§çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚ç»“æ„ä½“ï¼ˆstructsï¼‰ï¼Œä½†æ˜¯å½“ä½¿ç”¨ out å‚æ•°æ—¶ï¼Œä½ å¿…é¡»æ˜¾å¼è®¾ç½®ç±»å‹çš„åç§°ã€‚æ¯”å¦‚ï¼ˆå†æ¬¡æç¤ºï¼Œåœ¨å®é™…ä¸­è¦åƒè¿™æ ·ä¸èƒ½æ¢è¡Œï¼‰ï¼š 1#&#123;middleInitial, mode=OUT, jdbcType=STRUCT, jdbcTypeName=MY_TYPE, resultMap=departmentResultMap&#125; å°½ç®¡ä¸Šé¢è¿™äº›é€‰é¡¹å¾ˆå¼ºå¤§ï¼Œä½†å¤§å¤šæ—¶å€™ï¼Œä½ åªé¡»ç®€å•æŒ‡å®šå±æ€§åï¼Œé¡¶å¤šè¦ä¸ºå¯èƒ½ä¸ºç©ºçš„åˆ—æŒ‡å®š jdbcTypeï¼Œå…¶ä»–çš„äº‹æƒ…äº¤ç»™ MyBatis è‡ªå·±å»æ¨æ–­å°±è¡Œäº†ã€‚ 123#&#123;firstName&#125;#&#123;middleInitial,jdbcType=VARCHAR&#125;#&#123;lastName&#125; å­—ç¬¦ä¸²æ›¿æ¢é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ #&#123;&#125; å‚æ•°è¯­æ³•æ—¶ï¼ŒMyBatis ä¼šåˆ›å»º PreparedStatement å‚æ•°å ä½ç¬¦ï¼Œå¹¶é€šè¿‡å ä½ç¬¦å®‰å…¨åœ°è®¾ç½®å‚æ•°ï¼ˆå°±åƒä½¿ç”¨ ? ä¸€æ ·ï¼‰ã€‚ è¿™æ ·åšæ›´å®‰å…¨ï¼Œæ›´è¿…é€Ÿï¼Œé€šå¸¸ä¹Ÿæ˜¯é¦–é€‰åšæ³•ï¼Œä¸è¿‡æœ‰æ—¶ä½ å°±æ˜¯æƒ³ç›´æ¥åœ¨ SQL è¯­å¥ä¸­ç›´æ¥æ’å…¥ä¸€ä¸ªä¸è½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚ æ¯”å¦‚ ORDER BY å­å¥ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥ï¼š 1ORDER BY $&#123;columnName&#125; è¿™æ ·ï¼ŒMyBatis å°±ä¸ä¼šä¿®æ”¹æˆ–è½¬ä¹‰è¯¥å­—ç¬¦ä¸²äº†ã€‚ å½“ SQL è¯­å¥ä¸­çš„å…ƒæ•°æ®ï¼ˆå¦‚è¡¨åæˆ–åˆ—åï¼‰æ˜¯åŠ¨æ€ç”Ÿæˆçš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²æ›¿æ¢å°†ä¼šéå¸¸æœ‰ç”¨ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³ select ä¸€ä¸ªè¡¨ä»»æ„ä¸€åˆ—çš„æ•°æ®æ—¶ï¼Œä¸éœ€è¦è¿™æ ·å†™ï¼š 12345678910@Select(&quot;select * from user where id = #&#123;id&#125;&quot;)User findById(@Param(&quot;id&quot;) long id);@Select(&quot;select * from user where name = #&#123;name&#125;&quot;)User findByName(@Param(&quot;name&quot;) String name);@Select(&quot;select * from user where email = #&#123;email&#125;&quot;)User findByEmail(@Param(&quot;email&quot;) String email);// å…¶å®ƒçš„ &quot;findByXxx&quot; æ–¹æ³• è€Œæ˜¯å¯ä»¥åªå†™è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼š 12@Select(&quot;select * from user where $&#123;column&#125; = #&#123;value&#125;&quot;)User findByColumn(@Param(&quot;column&quot;) String column, @Param(&quot;value&quot;) String value); å…¶ä¸­ $&#123;column&#125; ä¼šè¢«ç›´æ¥æ›¿æ¢ï¼Œè€Œ #&#123;value&#125; ä¼šä½¿ç”¨ ? é¢„å¤„ç†ã€‚ è¿™æ ·ï¼Œå°±èƒ½å®ŒæˆåŒæ ·çš„ä»»åŠ¡ï¼š 123User userOfId1 = userMapper.findByColumn(&quot;id&quot;, 1L);User userOfNameKid = userMapper.findByColumn(&quot;name&quot;, &quot;kid&quot;);User userOfEmail = userMapper.findByColumn(&quot;email&quot;, &quot;noone@nowhere.com&quot;); è¿™ç§æ–¹å¼ä¹ŸåŒæ ·é€‚ç”¨äºæ›¿æ¢è¡¨åçš„æƒ…å†µã€‚ æç¤º ç”¨è¿™ç§æ–¹å¼æ¥å—ç”¨æˆ·çš„è¾“å…¥ï¼Œå¹¶ç”¨ä½œè¯­å¥å‚æ•°æ˜¯ä¸å®‰å…¨çš„ï¼Œä¼šå¯¼è‡´æ½œåœ¨çš„ SQL æ³¨å…¥æ”»å‡»ã€‚å› æ­¤ï¼Œè¦ä¹ˆä¸å…è®¸ç”¨æˆ·è¾“å…¥è¿™äº›å­—æ®µï¼Œè¦ä¹ˆè‡ªè¡Œè½¬ä¹‰å¹¶æ£€éªŒè¿™äº›å‚æ•°ã€‚ ç»“æœæ˜ å°„resultMap å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚å®ƒå¯ä»¥è®©ä½ ä» 90% çš„ JDBC ResultSets æ•°æ®æå–ä»£ç ä¸­è§£æ”¾å‡ºæ¥ï¼Œå¹¶åœ¨ä¸€äº›æƒ…å½¢ä¸‹å…è®¸ä½ è¿›è¡Œä¸€äº› JDBC ä¸æ”¯æŒçš„æ“ä½œã€‚å®é™…ä¸Šï¼Œåœ¨ä¸ºä¸€äº›æ¯”å¦‚è¿æ¥çš„å¤æ‚è¯­å¥ç¼–å†™æ˜ å°„ä»£ç çš„æ—¶å€™ï¼Œä¸€ä»½ resultMap èƒ½å¤Ÿä»£æ›¿å®ç°åŒç­‰åŠŸèƒ½çš„æ•°åƒè¡Œä»£ç ã€‚ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹ç®€å•çš„è¯­å¥åšåˆ°é›¶é…ç½®ï¼Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼Œåªéœ€è¦æè¿°è¯­å¥ä¹‹é—´çš„å…³ç³»å°±è¡Œäº†ã€‚ ä¹‹å‰ä½ å·²ç»è§è¿‡ç®€å•æ˜ å°„è¯­å¥çš„ç¤ºä¾‹ï¼Œå®ƒä»¬æ²¡æœ‰æ˜¾å¼æŒ‡å®š resultMapã€‚æ¯”å¦‚ï¼š 12345&lt;select id=&quot;selectUsers&quot; resultType=&quot;map&quot;&gt; select id, username, hashedPassword from some_table where id = #&#123;id&#125;&lt;/select&gt; ä¸Šè¿°è¯­å¥åªæ˜¯ç®€å•åœ°å°†æ‰€æœ‰çš„åˆ—æ˜ å°„åˆ° HashMap çš„é”®ä¸Šï¼Œè¿™ç”± resultType å±æ€§æŒ‡å®šã€‚è™½ç„¶åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½å¤Ÿç”¨ï¼Œä½†æ˜¯ HashMap å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é¢†åŸŸæ¨¡å‹ã€‚ä½ çš„ç¨‹åºæ›´å¯èƒ½ä¼šä½¿ç”¨ JavaBean æˆ– POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä½œä¸ºé¢†åŸŸæ¨¡å‹ã€‚MyBatis å¯¹ä¸¤è€…éƒ½æä¾›äº†æ”¯æŒã€‚çœ‹çœ‹ä¸‹é¢è¿™ä¸ª JavaBeanï¼š 12345678910111213141516171819202122232425package com.someapp.model;public class User &#123; private int id; private String username; private String hashedPassword; public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public String getHashedPassword() &#123; return hashedPassword; &#125; public void setHashedPassword(String hashedPassword) &#123; this.hashedPassword = hashedPassword; &#125;&#125; åŸºäº JavaBean çš„è§„èŒƒï¼Œä¸Šé¢è¿™ä¸ªç±»æœ‰ 3 ä¸ªå±æ€§ï¼šidï¼Œusername å’Œ hashedPasswordã€‚è¿™äº›å±æ€§ä¼šå¯¹åº”åˆ° select è¯­å¥ä¸­çš„åˆ—åã€‚ è¿™æ ·çš„ä¸€ä¸ª JavaBean å¯ä»¥è¢«æ˜ å°„åˆ° ResultSetï¼Œå°±åƒæ˜ å°„åˆ° HashMap ä¸€æ ·ç®€å•ã€‚ 12345&lt;select id=&quot;selectUsers&quot; resultType=&quot;com.someapp.model.User&quot;&gt; select id, username, hashedPassword from some_table where id = #&#123;id&#125;&lt;/select&gt; ç±»å‹åˆ«åæ˜¯ä½ çš„å¥½å¸®æ‰‹ã€‚ä½¿ç”¨å®ƒä»¬ï¼Œä½ å°±å¯ä»¥ä¸ç”¨è¾“å…¥ç±»çš„å…¨é™å®šåäº†ã€‚æ¯”å¦‚ï¼š 123456789&lt;!-- mybatis-config.xml ä¸­ --&gt;&lt;typeAlias type=&quot;com.someapp.model.User&quot; alias=&quot;User&quot;/&gt;&lt;!-- SQL æ˜ å°„ XML ä¸­ --&gt;&lt;select id=&quot;selectUsers&quot; resultType=&quot;User&quot;&gt; select id, username, hashedPassword from some_table where id = #&#123;id&#125;&lt;/select&gt; åœ¨è¿™äº›æƒ…å†µä¸‹ï¼ŒMyBatis ä¼šåœ¨å¹•åè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª ResultMapï¼Œå†æ ¹æ®å±æ€§åæ¥æ˜ å°„åˆ—åˆ° JavaBean çš„å±æ€§ä¸Šã€‚å¦‚æœåˆ—åå’Œå±æ€§åä¸èƒ½åŒ¹é…ä¸Šï¼Œå¯ä»¥åœ¨ SELECT è¯­å¥ä¸­è®¾ç½®åˆ—åˆ«åï¼ˆè¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ SQL ç‰¹æ€§ï¼‰æ¥å®ŒæˆåŒ¹é…ã€‚æ¯”å¦‚ï¼š 12345678&lt;select id=&quot;selectUsers&quot; resultType=&quot;User&quot;&gt; select user_id as &quot;id&quot;, user_name as &quot;userName&quot;, hashed_password as &quot;hashedPassword&quot; from some_table where id = #&#123;id&#125;&lt;/select&gt; åœ¨å­¦ä¹ äº†ä¸Šé¢çš„çŸ¥è¯†åï¼Œä½ ä¼šå‘ç°ä¸Šé¢çš„ä¾‹å­æ²¡æœ‰ä¸€ä¸ªéœ€è¦æ˜¾å¼é…ç½® ResultMapï¼Œè¿™å°±æ˜¯ ResultMap çš„ä¼˜ç§€ä¹‹å¤„â€”â€”ä½ å®Œå…¨å¯ä»¥ä¸ç”¨æ˜¾å¼åœ°é…ç½®å®ƒä»¬ã€‚ è™½ç„¶ä¸Šé¢çš„ä¾‹å­ä¸ç”¨æ˜¾å¼é…ç½® ResultMapã€‚ ä½†ä¸ºäº†è®²è§£ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚æœåœ¨åˆšåˆšçš„ç¤ºä¾‹ä¸­ï¼Œæ˜¾å¼ä½¿ç”¨å¤–éƒ¨çš„ resultMap ä¼šæ€æ ·ï¼Œè¿™ä¹Ÿæ˜¯è§£å†³åˆ—åä¸åŒ¹é…çš„å¦å¤–ä¸€ç§æ–¹å¼ã€‚ 12345&lt;resultMap id=&quot;userResultMap&quot; type=&quot;User&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;user_id&quot; /&gt; &lt;result property=&quot;username&quot; column=&quot;user_name&quot;/&gt; &lt;result property=&quot;password&quot; column=&quot;hashed_password&quot;/&gt;&lt;/resultMap&gt; ç„¶ååœ¨å¼•ç”¨å®ƒçš„è¯­å¥ä¸­è®¾ç½® resultMap å±æ€§å°±è¡Œäº†ï¼ˆæ³¨æ„æˆ‘ä»¬å»æ‰äº† resultType å±æ€§ï¼‰ã€‚æ¯”å¦‚: 12345&lt;select id=&quot;selectUsers&quot; resultMap=&quot;userResultMap&quot;&gt; select user_id, user_name, hashed_password from some_table where id = #&#123;id&#125;&lt;/select&gt; å¦‚æœè¿™ä¸ªä¸–ç•Œæ€»æ˜¯è¿™ä¹ˆç®€å•å°±å¥½äº†ã€‚ é«˜çº§ç»“æœæ˜ å°„MyBatis åˆ›å»ºæ—¶çš„ä¸€ä¸ªæ€æƒ³æ˜¯ï¼šæ•°æ®åº“ä¸å¯èƒ½æ°¸è¿œæ˜¯ä½ æ‰€æƒ³æˆ–æ‰€éœ€çš„é‚£ä¸ªæ ·å­ã€‚ æˆ‘ä»¬å¸Œæœ›æ¯ä¸ªæ•°æ®åº“éƒ½å…·å¤‡è‰¯å¥½çš„ç¬¬ä¸‰èŒƒå¼æˆ– BCNF èŒƒå¼ï¼Œå¯æƒœå®ƒä»¬å¹¶ä¸éƒ½æ˜¯é‚£æ ·ã€‚ å¦‚æœèƒ½æœ‰ä¸€ç§æ•°æ®åº“æ˜ å°„æ¨¡å¼ï¼Œå®Œç¾é€‚é…æ‰€æœ‰çš„åº”ç”¨ç¨‹åºï¼Œé‚£å°±å¤ªå¥½äº†ï¼Œä½†å¯æƒœä¹Ÿæ²¡æœ‰ã€‚ è€Œ ResultMap å°±æ˜¯ MyBatis å¯¹è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬å¦‚ä½•æ˜ å°„ä¸‹é¢è¿™ä¸ªè¯­å¥ï¼Ÿ 12345678910111213141516171819202122232425262728293031323334&lt;!-- éå¸¸å¤æ‚çš„è¯­å¥ --&gt;&lt;select id=&quot;selectBlogDetails&quot; resultMap=&quot;detailedBlogResultMap&quot;&gt; select B.id as blog_id, B.title as blog_title, B.author_id as blog_author_id, A.id as author_id, A.username as author_username, A.password as author_password, A.email as author_email, A.bio as author_bio, A.favourite_section as author_favourite_section, P.id as post_id, P.blog_id as post_blog_id, P.author_id as post_author_id, P.created_on as post_created_on, P.section as post_section, P.subject as post_subject, P.draft as draft, P.body as post_body, C.id as comment_id, C.post_id as comment_post_id, C.name as comment_name, C.comment as comment_text, T.id as tag_id, T.name as tag_name from Blog B left outer join Author A on B.author_id = A.id left outer join Post P on B.id = P.blog_id left outer join Comment C on P.id = C.post_id left outer join Post_Tag PT on PT.post_id = P.id left outer join Tag T on PT.tag_id = T.id where B.id = #&#123;id&#125;&lt;/select&gt; ä½ å¯èƒ½æƒ³æŠŠå®ƒæ˜ å°„åˆ°ä¸€ä¸ªæ™ºèƒ½çš„å¯¹è±¡æ¨¡å‹ï¼Œè¿™ä¸ªå¯¹è±¡è¡¨ç¤ºäº†ä¸€ç¯‡åšå®¢ï¼Œå®ƒç”±æŸä½ä½œè€…æ‰€å†™ï¼Œæœ‰å¾ˆå¤šçš„åšæ–‡ï¼Œæ¯ç¯‡åšæ–‡æœ‰é›¶æˆ–å¤šæ¡çš„è¯„è®ºå’Œæ ‡ç­¾ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œå®ƒæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„ç»“æœæ˜ å°„ï¼ˆå‡è®¾ä½œè€…ï¼Œåšå®¢ï¼Œåšæ–‡ï¼Œè¯„è®ºå’Œæ ‡ç­¾éƒ½æ˜¯ç±»å‹åˆ«åï¼‰ã€‚ ä¸ç”¨ç´§å¼ ï¼Œæˆ‘ä»¬ä¼šä¸€æ­¥ä¸€æ­¥åœ°æ¥è¯´æ˜ã€‚è™½ç„¶å®ƒçœ‹èµ·æ¥ä»¤äººæœ›è€Œç”Ÿç•ï¼Œä½†å…¶å®éå¸¸ç®€å•ã€‚ 1234567891011121314151617181920212223242526272829&lt;!-- éå¸¸å¤æ‚çš„ç»“æœæ˜ å°„ --&gt;&lt;resultMap id=&quot;detailedBlogResultMap&quot; type=&quot;Blog&quot;&gt; &lt;constructor&gt; &lt;idArg column=&quot;blog_id&quot; javaType=&quot;int&quot;/&gt; &lt;/constructor&gt; &lt;result property=&quot;title&quot; column=&quot;blog_title&quot;/&gt; &lt;association property=&quot;author&quot; javaType=&quot;Author&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;author_id&quot;/&gt; &lt;result property=&quot;username&quot; column=&quot;author_username&quot;/&gt; &lt;result property=&quot;password&quot; column=&quot;author_password&quot;/&gt; &lt;result property=&quot;email&quot; column=&quot;author_email&quot;/&gt; &lt;result property=&quot;bio&quot; column=&quot;author_bio&quot;/&gt; &lt;result property=&quot;favouriteSection&quot; column=&quot;author_favourite_section&quot;/&gt; &lt;/association&gt; &lt;collection property=&quot;posts&quot; ofType=&quot;Post&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;post_id&quot;/&gt; &lt;result property=&quot;subject&quot; column=&quot;post_subject&quot;/&gt; &lt;association property=&quot;author&quot; javaType=&quot;Author&quot;/&gt; &lt;collection property=&quot;comments&quot; ofType=&quot;Comment&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;comment_id&quot;/&gt; &lt;/collection&gt; &lt;collection property=&quot;tags&quot; ofType=&quot;Tag&quot; &gt; &lt;id property=&quot;id&quot; column=&quot;tag_id&quot;/&gt; &lt;/collection&gt; &lt;discriminator javaType=&quot;int&quot; column=&quot;draft&quot;&gt; &lt;case value=&quot;1&quot; resultType=&quot;DraftPost&quot;/&gt; &lt;/discriminator&gt; &lt;/collection&gt;&lt;/resultMap&gt; resultMap å…ƒç´ æœ‰å¾ˆå¤šå­å…ƒç´ å’Œä¸€ä¸ªå€¼å¾—æ·±å…¥æ¢è®¨çš„ç»“æ„ã€‚ ä¸‹é¢æ˜¯resultMap å…ƒç´ çš„æ¦‚å¿µè§†å›¾ã€‚ ç»“æœæ˜ å°„ï¼ˆresultMapï¼‰ constructor 1234567891011121314 \\- ç”¨äºåœ¨å®ä¾‹åŒ–ç±»æ—¶ï¼Œæ³¨å…¥ç»“æœåˆ°æ„é€ æ–¹æ³•ä¸­ - `idArg` - ID å‚æ•°ï¼›æ ‡è®°å‡ºä½œä¸º ID çš„ç»“æœå¯ä»¥å¸®åŠ©æé«˜æ•´ä½“æ€§èƒ½ - `arg` - å°†è¢«æ³¨å…¥åˆ°æ„é€ æ–¹æ³•çš„ä¸€ä¸ªæ™®é€šç»“æœ- `id` â€“ ä¸€ä¸ª ID ç»“æœï¼›æ ‡è®°å‡ºä½œä¸º ID çš„ç»“æœå¯ä»¥å¸®åŠ©æé«˜æ•´ä½“æ€§èƒ½- `result` â€“ æ³¨å…¥åˆ°å­—æ®µæˆ– JavaBean å±æ€§çš„æ™®é€šç»“æœ- ``` association â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„å…³è”ï¼›è®¸å¤šç»“æœå°†åŒ…è£…æˆè¿™ç§ç±»å‹ - åµŒå¥—ç»“æœæ˜ å°„ â€“ å…³è”å¯ä»¥æ˜¯ `resultMap` å…ƒç´ ï¼Œæˆ–æ˜¯å¯¹å…¶å®ƒç»“æœæ˜ å°„çš„å¼•ç”¨ collection 123456789 â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„é›†åˆ - åµŒå¥—ç»“æœæ˜ å°„ â€“ é›†åˆå¯ä»¥æ˜¯ `resultMap` å…ƒç´ ï¼Œæˆ–æ˜¯å¯¹å…¶å®ƒç»“æœæ˜ å°„çš„å¼•ç”¨- ``` discriminator â€“ ä½¿ç”¨ç»“æœå€¼æ¥å†³å®šä½¿ç”¨å“ªä¸ª 1resultMap - ``` case 12345678910111213141516171819202122 â€“ åŸºäºæŸäº›å€¼çš„ç»“æœæ˜ å°„ - åµŒå¥—ç»“æœæ˜ å°„ â€“ `case` ä¹Ÿæ˜¯ä¸€ä¸ªç»“æœæ˜ å°„ï¼Œå› æ­¤å…·æœ‰ç›¸åŒçš„ç»“æ„å’Œå…ƒç´ ï¼›æˆ–è€…å¼•ç”¨å…¶å®ƒçš„ç»“æœæ˜ å°„| å±æ€§ | æè¿° || :------------ | :----------------------------------------------------------- || `id` | å½“å‰å‘½åç©ºé—´ä¸­çš„ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œç”¨äºæ ‡è¯†ä¸€ä¸ªç»“æœæ˜ å°„ã€‚ || `type` | ç±»çš„å®Œå…¨é™å®šå, æˆ–è€…ä¸€ä¸ªç±»å‹åˆ«åï¼ˆå…³äºå†…ç½®çš„ç±»å‹åˆ«åï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„è¡¨æ ¼ï¼‰ã€‚ || `autoMapping` | å¦‚æœè®¾ç½®è¿™ä¸ªå±æ€§ï¼ŒMyBatis å°†ä¼šä¸ºæœ¬ç»“æœæ˜ å°„å¼€å¯æˆ–è€…å…³é—­è‡ªåŠ¨æ˜ å°„ã€‚ è¿™ä¸ªå±æ€§ä¼šè¦†ç›–å…¨å±€çš„å±æ€§ autoMappingBehaviorã€‚é»˜è®¤å€¼ï¼šæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚ |**æœ€ä½³å®è·µ** æœ€å¥½é€æ­¥å»ºç«‹ç»“æœæ˜ å°„ã€‚å•å…ƒæµ‹è¯•å¯ä»¥åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­èµ·åˆ°å¾ˆå¤§å¸®åŠ©ã€‚ å¦‚æœä½ å°è¯•ä¸€æ¬¡æ€§åˆ›å»ºåƒä¸Šé¢ç¤ºä¾‹é‚£ä¹ˆå·¨å¤§çš„ç»“æœæ˜ å°„ï¼Œä¸ä»…å®¹æ˜“å‡ºé”™ï¼Œéš¾åº¦ä¹Ÿä¼šç›´çº¿ä¸Šå‡ã€‚ æ‰€ä»¥ï¼Œä»æœ€ç®€å•çš„å½¢æ€å¼€å§‹ï¼Œé€æ­¥è¿­ä»£ã€‚è€Œä¸”åˆ«å¿˜äº†å•å…ƒæµ‹è¯•ï¼ æœ‰æ—¶å€™ï¼Œæ¡†æ¶çš„è¡Œä¸ºåƒæ˜¯ä¸€ä¸ªé»‘ç›’å­ï¼ˆæ— è®ºæ˜¯å¦å¼€æºï¼‰ã€‚å› æ­¤ï¼Œä¸ºäº†ç¡®ä¿å®ç°çš„è¡Œä¸ºä¸ä½ çš„æœŸæœ›ç›¸ä¸€è‡´ï¼Œæœ€å¥½ç¼–å†™å•å…ƒæµ‹è¯•ã€‚ å¹¶ä¸”å•å…ƒæµ‹è¯•åœ¨æäº¤ bug æ—¶ä¹Ÿèƒ½èµ·åˆ°å¾ˆå¤§çš„ä½œç”¨ã€‚ä¸‹ä¸€éƒ¨åˆ†å°†è¯¦ç»†è¯´æ˜æ¯ä¸ªå…ƒç´ ã€‚#### id &amp; result```xml&lt;id property=&quot;id&quot; column=&quot;post_id&quot;/&gt;&lt;result property=&quot;subject&quot; column=&quot;post_subject&quot;/&gt; è¿™äº›å…ƒç´ æ˜¯ç»“æœæ˜ å°„çš„åŸºç¡€ã€‚id å’Œ result å…ƒç´ éƒ½å°†ä¸€ä¸ªåˆ—çš„å€¼æ˜ å°„åˆ°ä¸€ä¸ªç®€å•æ•°æ®ç±»å‹ï¼ˆString, int, double, Date ç­‰ï¼‰çš„å±æ€§æˆ–å­—æ®µã€‚ è¿™ä¸¤è€…ä¹‹é—´çš„å”¯ä¸€ä¸åŒæ˜¯ï¼Œid å…ƒç´ å¯¹åº”çš„å±æ€§ä¼šè¢«æ ‡è®°ä¸ºå¯¹è±¡çš„æ ‡è¯†ç¬¦ï¼Œåœ¨æ¯”è¾ƒå¯¹è±¡å®ä¾‹æ—¶ä½¿ç”¨ã€‚ è¿™æ ·å¯ä»¥æé«˜æ•´ä½“çš„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯è¿›è¡Œç¼“å­˜å’ŒåµŒå¥—ç»“æœæ˜ å°„ï¼ˆä¹Ÿå°±æ˜¯è¿æ¥æ˜ å°„ï¼‰çš„æ—¶å€™ã€‚ ä¸¤ä¸ªå…ƒç´ éƒ½æœ‰ä¸€äº›å±æ€§ï¼š å±æ€§ æè¿° property æ˜ å°„åˆ°åˆ—ç»“æœçš„å­—æ®µæˆ–å±æ€§ã€‚å¦‚æœ JavaBean æœ‰è¿™ä¸ªåå­—çš„å±æ€§ï¼ˆpropertyï¼‰ï¼Œä¼šå…ˆä½¿ç”¨è¯¥å±æ€§ã€‚å¦åˆ™ MyBatis å°†ä¼šå¯»æ‰¾ç»™å®šåç§°çš„å­—æ®µï¼ˆfieldï¼‰ã€‚ æ— è®ºæ˜¯å“ªä¸€ç§æƒ…å½¢ï¼Œä½ éƒ½å¯ä»¥ä½¿ç”¨å¸¸è§çš„ç‚¹å¼åˆ†éš”å½¢å¼è¿›è¡Œå¤æ‚å±æ€§å¯¼èˆªã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·æ˜ å°„ä¸€äº›ç®€å•çš„ä¸œè¥¿ï¼šâ€œusernameâ€ï¼Œæˆ–è€…æ˜ å°„åˆ°ä¸€äº›å¤æ‚çš„ä¸œè¥¿ä¸Šï¼šâ€œaddress.street.numberâ€ã€‚ column æ•°æ®åº“ä¸­çš„åˆ—åï¼Œæˆ–è€…æ˜¯åˆ—çš„åˆ«åã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™å’Œä¼ é€’ç»™ resultSet.getString(columnName) æ–¹æ³•çš„å‚æ•°ä¸€æ ·ã€‚ javaType ä¸€ä¸ª Java ç±»çš„å…¨é™å®šåï¼Œæˆ–ä¸€ä¸ªç±»å‹åˆ«åï¼ˆå…³äºå†…ç½®çš„ç±»å‹åˆ«åï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„è¡¨æ ¼ï¼‰ã€‚ å¦‚æœä½ æ˜ å°„åˆ°ä¸€ä¸ª JavaBeanï¼ŒMyBatis é€šå¸¸å¯ä»¥æ¨æ–­ç±»å‹ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ˜ å°„åˆ°çš„æ˜¯ HashMapï¼Œé‚£ä¹ˆä½ åº”è¯¥æ˜ç¡®åœ°æŒ‡å®š javaType æ¥ä¿è¯è¡Œä¸ºä¸æœŸæœ›çš„ç›¸ä¸€è‡´ã€‚ jdbcType JDBC ç±»å‹ï¼Œæ‰€æ”¯æŒçš„ JDBC ç±»å‹å‚è§è¿™ä¸ªè¡¨æ ¼ä¹‹åçš„â€œæ”¯æŒçš„ JDBC ç±»å‹â€ã€‚ åªéœ€è¦åœ¨å¯èƒ½æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤çš„ä¸”å…è®¸ç©ºå€¼çš„åˆ—ä¸ŠæŒ‡å®š JDBC ç±»å‹ã€‚è¿™æ˜¯ JDBC çš„è¦æ±‚è€Œé MyBatis çš„è¦æ±‚ã€‚å¦‚æœä½ ç›´æ¥é¢å‘ JDBC ç¼–ç¨‹ï¼Œä½ éœ€è¦å¯¹å¯ä»¥ä¸ºç©ºå€¼çš„åˆ—æŒ‡å®šè¿™ä¸ªç±»å‹ã€‚ typeHandler æˆ‘ä»¬åœ¨å‰é¢è®¨è®ºè¿‡é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œä½ å¯ä»¥è¦†ç›–é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ è¿™ä¸ªå±æ€§å€¼æ˜¯ä¸€ä¸ªç±»å‹å¤„ç†å™¨å®ç°ç±»çš„å…¨é™å®šåï¼Œæˆ–è€…æ˜¯ç±»å‹åˆ«åã€‚ æ”¯æŒçš„ JDBC ç±»å‹ä¸ºäº†ä»¥åå¯èƒ½çš„ä½¿ç”¨åœºæ™¯ï¼ŒMyBatis é€šè¿‡å†…ç½®çš„ jdbcType æšä¸¾ç±»å‹æ”¯æŒä¸‹é¢çš„ JDBC ç±»å‹ã€‚ BIT FLOAT CHAR TIMESTAMP OTHER UNDEFINED TINYINT REAL VARCHAR BINARY BLOB NVARCHAR SMALLINT DOUBLE LONGVARCHAR VARBINARY CLOB NCHAR INTEGER NUMERIC DATE LONGVARBINARY BOOLEAN NCLOB BIGINT DECIMAL TIME NULL CURSOR ARRAY æ„é€ æ–¹æ³•é€šè¿‡ä¿®æ”¹å¯¹è±¡å±æ€§çš„æ–¹å¼ï¼Œå¯ä»¥æ»¡è¶³å¤§å¤šæ•°çš„æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆData Transfer Object, DTOï¼‰ä»¥åŠç»å¤§éƒ¨åˆ†é¢†åŸŸæ¨¡å‹çš„è¦æ±‚ã€‚ä½†æœ‰äº›æƒ…å†µä¸‹ä½ æƒ³ä½¿ç”¨ä¸å¯å˜ç±»ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå¾ˆå°‘æ”¹å˜æˆ–åŸºæœ¬ä¸å˜çš„åŒ…å«å¼•ç”¨æˆ–æ•°æ®çš„è¡¨ï¼Œå¾ˆé€‚åˆä½¿ç”¨ä¸å¯å˜ç±»ã€‚ æ„é€ æ–¹æ³•æ³¨å…¥å…è®¸ä½ åœ¨åˆå§‹åŒ–æ—¶ä¸ºç±»è®¾ç½®å±æ€§çš„å€¼ï¼Œè€Œä¸ç”¨æš´éœ²å‡ºå…¬æœ‰æ–¹æ³•ã€‚MyBatis ä¹Ÿæ”¯æŒç§æœ‰å±æ€§å’Œç§æœ‰ JavaBean å±æ€§æ¥å®Œæˆæ³¨å…¥ï¼Œä½†æœ‰ä¸€äº›äººæ›´é’çäºé€šè¿‡æ„é€ æ–¹æ³•è¿›è¡Œæ³¨å…¥ã€‚ constructor å…ƒç´ å°±æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„ã€‚ çœ‹çœ‹ä¸‹é¢è¿™ä¸ªæ„é€ æ–¹æ³•: 1234567public class User &#123; //... public User(Integer id, String username, int age) &#123; //... &#125;//...&#125; ä¸ºäº†å°†ç»“æœæ³¨å…¥æ„é€ æ–¹æ³•ï¼ŒMyBatis éœ€è¦é€šè¿‡æŸç§æ–¹å¼å®šä½ç›¸åº”çš„æ„é€ æ–¹æ³•ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒMyBatis æœç´¢ä¸€ä¸ªå£°æ˜äº†ä¸‰ä¸ªå½¢å‚çš„æ„é€ æ–¹æ³•ï¼Œå‚æ•°ç±»å‹ä»¥ java.lang.Integer, java.lang.String å’Œ int çš„é¡ºåºç»™å‡ºã€‚ 12345&lt;constructor&gt; &lt;idArg column=&quot;id&quot; javaType=&quot;int&quot;/&gt; &lt;arg column=&quot;username&quot; javaType=&quot;String&quot;/&gt; &lt;arg column=&quot;age&quot; javaType=&quot;_int&quot;/&gt;&lt;/constructor&gt; å½“ä½ åœ¨å¤„ç†ä¸€ä¸ªå¸¦æœ‰å¤šä¸ªå½¢å‚çš„æ„é€ æ–¹æ³•æ—¶ï¼Œå¾ˆå®¹æ˜“æä¹± arg å…ƒç´ çš„é¡ºåºã€‚ ä»ç‰ˆæœ¬ 3.4.3 å¼€å§‹ï¼Œå¯ä»¥åœ¨æŒ‡å®šå‚æ•°åç§°çš„å‰æä¸‹ï¼Œä»¥ä»»æ„é¡ºåºç¼–å†™ arg å…ƒç´ ã€‚ ä¸ºäº†é€šè¿‡åç§°æ¥å¼•ç”¨æ„é€ æ–¹æ³•å‚æ•°ï¼Œä½ å¯ä»¥æ·»åŠ  @Param æ³¨è§£ï¼Œæˆ–è€…ä½¿ç”¨ â€˜-parametersâ€™ ç¼–è¯‘é€‰é¡¹å¹¶å¯ç”¨ useActualParamName é€‰é¡¹ï¼ˆé»˜è®¤å¼€å¯ï¼‰æ¥ç¼–è¯‘é¡¹ç›®ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç­‰ä»·çš„ä¾‹å­ï¼Œå°½ç®¡å‡½æ•°ç­¾åä¸­ç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªå½¢å‚çš„é¡ºåºä¸ constructor å…ƒç´ ä¸­å‚æ•°å£°æ˜çš„é¡ºåºä¸åŒ¹é…ã€‚ 12345&lt;constructor&gt; &lt;idArg column=&quot;id&quot; javaType=&quot;int&quot; name=&quot;id&quot; /&gt; &lt;arg column=&quot;age&quot; javaType=&quot;_int&quot; name=&quot;age&quot; /&gt; &lt;arg column=&quot;username&quot; javaType=&quot;String&quot; name=&quot;username&quot; /&gt;&lt;/constructor&gt; å¦‚æœå­˜åœ¨åç§°å’Œç±»å‹ç›¸åŒçš„å±æ€§ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥ javaType ã€‚ å‰©ä½™çš„å±æ€§å’Œè§„åˆ™å’Œæ™®é€šçš„ id å’Œ result å…ƒç´ æ˜¯ä¸€æ ·çš„ã€‚ å±æ€§ æè¿° column æ•°æ®åº“ä¸­çš„åˆ—åï¼Œæˆ–è€…æ˜¯åˆ—çš„åˆ«åã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™å’Œä¼ é€’ç»™ resultSet.getString(columnName) æ–¹æ³•çš„å‚æ•°ä¸€æ ·ã€‚ javaType ä¸€ä¸ª Java ç±»çš„å®Œå…¨é™å®šåï¼Œæˆ–ä¸€ä¸ªç±»å‹åˆ«åï¼ˆå…³äºå†…ç½®çš„ç±»å‹åˆ«åï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„è¡¨æ ¼ï¼‰ã€‚ å¦‚æœä½ æ˜ å°„åˆ°ä¸€ä¸ª JavaBeanï¼ŒMyBatis é€šå¸¸å¯ä»¥æ¨æ–­ç±»å‹ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ˜ å°„åˆ°çš„æ˜¯ HashMapï¼Œé‚£ä¹ˆä½ åº”è¯¥æ˜ç¡®åœ°æŒ‡å®š javaType æ¥ä¿è¯è¡Œä¸ºä¸æœŸæœ›çš„ç›¸ä¸€è‡´ã€‚ jdbcType JDBC ç±»å‹ï¼Œæ‰€æ”¯æŒçš„ JDBC ç±»å‹å‚è§è¿™ä¸ªè¡¨æ ¼ä¹‹å‰çš„â€œæ”¯æŒçš„ JDBC ç±»å‹â€ã€‚ åªéœ€è¦åœ¨å¯èƒ½æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤çš„ä¸”å…è®¸ç©ºå€¼çš„åˆ—ä¸ŠæŒ‡å®š JDBC ç±»å‹ã€‚è¿™æ˜¯ JDBC çš„è¦æ±‚è€Œé MyBatis çš„è¦æ±‚ã€‚å¦‚æœä½ ç›´æ¥é¢å‘ JDBC ç¼–ç¨‹ï¼Œä½ éœ€è¦å¯¹å¯èƒ½å­˜åœ¨ç©ºå€¼çš„åˆ—æŒ‡å®šè¿™ä¸ªç±»å‹ã€‚ typeHandler æˆ‘ä»¬åœ¨å‰é¢è®¨è®ºè¿‡é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œä½ å¯ä»¥è¦†ç›–é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ è¿™ä¸ªå±æ€§å€¼æ˜¯ä¸€ä¸ªç±»å‹å¤„ç†å™¨å®ç°ç±»çš„å®Œå…¨é™å®šåï¼Œæˆ–è€…æ˜¯ç±»å‹åˆ«åã€‚ select ç”¨äºåŠ è½½å¤æ‚ç±»å‹å±æ€§çš„æ˜ å°„è¯­å¥çš„ IDï¼Œå®ƒä¼šä» column å±æ€§ä¸­æŒ‡å®šçš„åˆ—æ£€ç´¢æ•°æ®ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™æ­¤ select è¯­å¥ã€‚å…·ä½“è¯·å‚è€ƒå…³è”å…ƒç´ ã€‚ resultMap ç»“æœæ˜ å°„çš„ IDï¼Œå¯ä»¥å°†åµŒå¥—çš„ç»“æœé›†æ˜ å°„åˆ°ä¸€ä¸ªåˆé€‚çš„å¯¹è±¡æ ‘ä¸­ã€‚ å®ƒå¯ä»¥ä½œä¸ºä½¿ç”¨é¢å¤– select è¯­å¥çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒå¯ä»¥å°†å¤šè¡¨è¿æ¥æ“ä½œçš„ç»“æœæ˜ å°„æˆä¸€ä¸ªå•ä¸€çš„ResultSetã€‚è¿™æ ·çš„ ResultSet å°†ä¼šå°†åŒ…å«é‡å¤æˆ–éƒ¨åˆ†æ•°æ®é‡å¤çš„ç»“æœé›†ã€‚ä¸ºäº†å°†ç»“æœé›†æ­£ç¡®åœ°æ˜ å°„åˆ°åµŒå¥—çš„å¯¹è±¡æ ‘ä¸­ï¼ŒMyBatis å…è®¸ä½  â€œä¸²è”â€ç»“æœæ˜ å°„ï¼Œä»¥ä¾¿è§£å†³åµŒå¥—ç»“æœé›†çš„é—®é¢˜ã€‚æƒ³äº†è§£æ›´å¤šå†…å®¹ï¼Œè¯·å‚è€ƒä¸‹é¢çš„å…³è”å…ƒç´ ã€‚ name æ„é€ æ–¹æ³•å½¢å‚çš„åå­—ã€‚ä» 3.4.3 ç‰ˆæœ¬å¼€å§‹ï¼Œé€šè¿‡æŒ‡å®šå…·ä½“çš„å‚æ•°åï¼Œä½ å¯ä»¥ä»¥ä»»æ„é¡ºåºå†™å…¥ arg å…ƒç´ ã€‚å‚çœ‹ä¸Šé¢çš„è§£é‡Šã€‚ å…³è”1234&lt;association property=&quot;author&quot; column=&quot;blog_author_id&quot; javaType=&quot;Author&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;author_id&quot;/&gt; &lt;result property=&quot;username&quot; column=&quot;author_username&quot;/&gt;&lt;/association&gt; å…³è”ï¼ˆassociationï¼‰å…ƒç´ å¤„ç†â€œæœ‰ä¸€ä¸ªâ€ç±»å‹çš„å…³ç³»ã€‚ æ¯”å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œä¸€ä¸ªåšå®¢æœ‰ä¸€ä¸ªç”¨æˆ·ã€‚å…³è”ç»“æœæ˜ å°„å’Œå…¶å®ƒç±»å‹çš„æ˜ å°„å·¥ä½œæ–¹å¼å·®ä¸å¤šã€‚ ä½ éœ€è¦æŒ‡å®šç›®æ ‡å±æ€§åä»¥åŠå±æ€§çš„javaTypeï¼ˆå¾ˆå¤šæ—¶å€™ MyBatis å¯ä»¥è‡ªå·±æ¨æ–­å‡ºæ¥ï¼‰ï¼Œåœ¨å¿…è¦çš„æƒ…å†µä¸‹ä½ è¿˜å¯ä»¥è®¾ç½® JDBC ç±»å‹ï¼Œå¦‚æœä½ æƒ³è¦†ç›–è·å–ç»“æœå€¼çš„è¿‡ç¨‹ï¼Œè¿˜å¯ä»¥è®¾ç½®ç±»å‹å¤„ç†å™¨ã€‚ å…³è”çš„ä¸åŒä¹‹å¤„æ˜¯ï¼Œä½ éœ€è¦å‘Šè¯‰ MyBatis å¦‚ä½•åŠ è½½å…³è”ã€‚MyBatis æœ‰ä¸¤ç§ä¸åŒçš„æ–¹å¼åŠ è½½å…³è”ï¼š åµŒå¥— Select æŸ¥è¯¢ï¼šé€šè¿‡æ‰§è¡Œå¦å¤–ä¸€ä¸ª SQL æ˜ å°„è¯­å¥æ¥åŠ è½½æœŸæœ›çš„å¤æ‚ç±»å‹ã€‚ åµŒå¥—ç»“æœæ˜ å°„ï¼šä½¿ç”¨åµŒå¥—çš„ç»“æœæ˜ å°„æ¥å¤„ç†è¿æ¥ç»“æœçš„é‡å¤å­é›†ã€‚ é¦–å…ˆï¼Œå…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªå…ƒç´ çš„å±æ€§ã€‚ä½ å°†ä¼šå‘ç°ï¼Œå’Œæ™®é€šçš„ç»“æœæ˜ å°„ç›¸æ¯”ï¼Œå®ƒåªåœ¨ select å’Œ resultMap å±æ€§ä¸Šæœ‰æ‰€ä¸åŒã€‚ å±æ€§ æè¿° property æ˜ å°„åˆ°åˆ—ç»“æœçš„å­—æ®µæˆ–å±æ€§ã€‚å¦‚æœç”¨æ¥åŒ¹é…çš„ JavaBean å­˜åœ¨ç»™å®šåå­—çš„å±æ€§ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šè¢«ä½¿ç”¨ã€‚å¦åˆ™ MyBatis å°†ä¼šå¯»æ‰¾ç»™å®šåç§°çš„å­—æ®µã€‚ æ— è®ºæ˜¯å“ªä¸€ç§æƒ…å½¢ï¼Œä½ éƒ½å¯ä»¥ä½¿ç”¨é€šå¸¸çš„ç‚¹å¼åˆ†éš”å½¢å¼è¿›è¡Œå¤æ‚å±æ€§å¯¼èˆªã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·æ˜ å°„ä¸€äº›ç®€å•çš„ä¸œè¥¿ï¼šâ€œusernameâ€ï¼Œæˆ–è€…æ˜ å°„åˆ°ä¸€äº›å¤æ‚çš„ä¸œè¥¿ä¸Šï¼šâ€œaddress.street.numberâ€ã€‚ javaType ä¸€ä¸ª Java ç±»çš„å®Œå…¨é™å®šåï¼Œæˆ–ä¸€ä¸ªç±»å‹åˆ«åï¼ˆå…³äºå†…ç½®çš„ç±»å‹åˆ«åï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„è¡¨æ ¼ï¼‰ã€‚ å¦‚æœä½ æ˜ å°„åˆ°ä¸€ä¸ª JavaBeanï¼ŒMyBatis é€šå¸¸å¯ä»¥æ¨æ–­ç±»å‹ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ˜ å°„åˆ°çš„æ˜¯ HashMapï¼Œé‚£ä¹ˆä½ åº”è¯¥æ˜ç¡®åœ°æŒ‡å®š javaType æ¥ä¿è¯è¡Œä¸ºä¸æœŸæœ›çš„ç›¸ä¸€è‡´ã€‚ jdbcType JDBC ç±»å‹ï¼Œæ‰€æ”¯æŒçš„ JDBC ç±»å‹å‚è§è¿™ä¸ªè¡¨æ ¼ä¹‹å‰çš„â€œæ”¯æŒçš„ JDBC ç±»å‹â€ã€‚ åªéœ€è¦åœ¨å¯èƒ½æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤çš„ä¸”å…è®¸ç©ºå€¼çš„åˆ—ä¸ŠæŒ‡å®š JDBC ç±»å‹ã€‚è¿™æ˜¯ JDBC çš„è¦æ±‚è€Œé MyBatis çš„è¦æ±‚ã€‚å¦‚æœä½ ç›´æ¥é¢å‘ JDBC ç¼–ç¨‹ï¼Œä½ éœ€è¦å¯¹å¯èƒ½å­˜åœ¨ç©ºå€¼çš„åˆ—æŒ‡å®šè¿™ä¸ªç±»å‹ã€‚ typeHandler æˆ‘ä»¬åœ¨å‰é¢è®¨è®ºè¿‡é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œä½ å¯ä»¥è¦†ç›–é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ è¿™ä¸ªå±æ€§å€¼æ˜¯ä¸€ä¸ªç±»å‹å¤„ç†å™¨å®ç°ç±»çš„å®Œå…¨é™å®šåï¼Œæˆ–è€…æ˜¯ç±»å‹åˆ«åã€‚ å…³è”çš„åµŒå¥— Select æŸ¥è¯¢ å±æ€§ æè¿° column æ•°æ®åº“ä¸­çš„åˆ—åï¼Œæˆ–è€…æ˜¯åˆ—çš„åˆ«åã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™å’Œä¼ é€’ç»™ resultSet.getString(columnName) æ–¹æ³•çš„å‚æ•°ä¸€æ ·ã€‚ æ³¨æ„ï¼šåœ¨ä½¿ç”¨å¤åˆä¸»é”®çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨ column=&quot;&#123;prop1=col1,prop2=col2&#125;&quot; è¿™æ ·çš„è¯­æ³•æ¥æŒ‡å®šå¤šä¸ªä¼ é€’ç»™åµŒå¥— Select æŸ¥è¯¢è¯­å¥çš„åˆ—åã€‚è¿™ä¼šä½¿å¾— prop1 å’Œ prop2 ä½œä¸ºå‚æ•°å¯¹è±¡ï¼Œè¢«è®¾ç½®ä¸ºå¯¹åº”åµŒå¥— Select è¯­å¥çš„å‚æ•°ã€‚ select ç”¨äºåŠ è½½å¤æ‚ç±»å‹å±æ€§çš„æ˜ å°„è¯­å¥çš„ IDï¼Œå®ƒä¼šä» column å±æ€§æŒ‡å®šçš„åˆ—ä¸­æ£€ç´¢æ•°æ®ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™ç›®æ ‡ select è¯­å¥ã€‚ å…·ä½“è¯·å‚è€ƒä¸‹é¢çš„ä¾‹å­ã€‚æ³¨æ„ï¼šåœ¨ä½¿ç”¨å¤åˆä¸»é”®çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨ column=&quot;&#123;prop1=col1,prop2=col2&#125;&quot; è¿™æ ·çš„è¯­æ³•æ¥æŒ‡å®šå¤šä¸ªä¼ é€’ç»™åµŒå¥— Select æŸ¥è¯¢è¯­å¥çš„åˆ—åã€‚è¿™ä¼šä½¿å¾— prop1 å’Œ prop2 ä½œä¸ºå‚æ•°å¯¹è±¡ï¼Œè¢«è®¾ç½®ä¸ºå¯¹åº”åµŒå¥— Select è¯­å¥çš„å‚æ•°ã€‚ fetchType å¯é€‰çš„ã€‚æœ‰æ•ˆå€¼ä¸º lazy å’Œ eagerã€‚ æŒ‡å®šå±æ€§åï¼Œå°†åœ¨æ˜ å°„ä¸­å¿½ç•¥å…¨å±€é…ç½®å‚æ•° lazyLoadingEnabledï¼Œä½¿ç”¨å±æ€§çš„å€¼ã€‚ ç¤ºä¾‹ï¼š 1234567891011&lt;resultMap id=&quot;blogResult&quot; type=&quot;Blog&quot;&gt; &lt;association property=&quot;author&quot; column=&quot;author_id&quot; javaType=&quot;Author&quot; select=&quot;selectAuthor&quot;/&gt;&lt;/resultMap&gt;&lt;select id=&quot;selectBlog&quot; resultMap=&quot;blogResult&quot;&gt; SELECT * FROM BLOG WHERE ID = #&#123;id&#125;&lt;/select&gt;&lt;select id=&quot;selectAuthor&quot; resultType=&quot;Author&quot;&gt; SELECT * FROM AUTHOR WHERE ID = #&#123;id&#125;&lt;/select&gt; å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚æˆ‘ä»¬æœ‰ä¸¤ä¸ª select æŸ¥è¯¢è¯­å¥ï¼šä¸€ä¸ªç”¨æ¥åŠ è½½åšå®¢ï¼ˆBlogï¼‰ï¼Œå¦å¤–ä¸€ä¸ªç”¨æ¥åŠ è½½ä½œè€…ï¼ˆAuthorï¼‰ï¼Œè€Œä¸”åšå®¢çš„ç»“æœæ˜ å°„æè¿°äº†åº”è¯¥ä½¿ç”¨ selectAuthor è¯­å¥åŠ è½½å®ƒçš„ author å±æ€§ã€‚ å…¶å®ƒæ‰€æœ‰çš„å±æ€§å°†ä¼šè¢«è‡ªåŠ¨åŠ è½½ï¼Œåªè¦å®ƒä»¬çš„åˆ—åå’Œå±æ€§åç›¸åŒ¹é…ã€‚ è¿™ç§æ–¹å¼è™½ç„¶å¾ˆç®€å•ï¼Œä½†åœ¨å¤§å‹æ•°æ®é›†æˆ–å¤§å‹æ•°æ®è¡¨ä¸Šè¡¨ç°ä¸ä½³ã€‚è¿™ä¸ªé—®é¢˜è¢«ç§°ä¸ºâ€œN+1 æŸ¥è¯¢é—®é¢˜â€ã€‚ æ¦‚æ‹¬åœ°è®²ï¼ŒN+1 æŸ¥è¯¢é—®é¢˜æ˜¯è¿™æ ·å­çš„ï¼š ä½ æ‰§è¡Œäº†ä¸€ä¸ªå•ç‹¬çš„ SQL è¯­å¥æ¥è·å–ç»“æœçš„ä¸€ä¸ªåˆ—è¡¨ï¼ˆå°±æ˜¯â€œ+1â€ï¼‰ã€‚ å¯¹åˆ—è¡¨è¿”å›çš„æ¯æ¡è®°å½•ï¼Œä½ æ‰§è¡Œä¸€ä¸ª select æŸ¥è¯¢è¯­å¥æ¥ä¸ºæ¯æ¡è®°å½•åŠ è½½è¯¦ç»†ä¿¡æ¯ï¼ˆå°±æ˜¯â€œNâ€ï¼‰ã€‚ è¿™ä¸ªé—®é¢˜ä¼šå¯¼è‡´æˆç™¾ä¸Šåƒçš„ SQL è¯­å¥è¢«æ‰§è¡Œã€‚æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›äº§ç”Ÿè¿™æ ·çš„åæœã€‚ å¥½æ¶ˆæ¯æ˜¯ï¼ŒMyBatis èƒ½å¤Ÿå¯¹è¿™æ ·çš„æŸ¥è¯¢è¿›è¡Œå»¶è¿ŸåŠ è½½ï¼Œå› æ­¤å¯ä»¥å°†å¤§é‡è¯­å¥åŒæ—¶è¿è¡Œçš„å¼€é”€åˆ†æ•£å¼€æ¥ã€‚ ç„¶è€Œï¼Œå¦‚æœä½ åŠ è½½è®°å½•åˆ—è¡¨ä¹‹åç«‹åˆ»å°±éå†åˆ—è¡¨ä»¥è·å–åµŒå¥—çš„æ•°æ®ï¼Œå°±ä¼šè§¦å‘æ‰€æœ‰çš„å»¶è¿ŸåŠ è½½æŸ¥è¯¢ï¼Œæ€§èƒ½å¯èƒ½ä¼šå˜å¾—å¾ˆç³Ÿç³•ã€‚ æ‰€ä»¥è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹æ³•ã€‚ å…³è”çš„åµŒå¥—ç»“æœæ˜ å°„ å±æ€§ æè¿° resultMap ç»“æœæ˜ å°„çš„ IDï¼Œå¯ä»¥å°†æ­¤å…³è”çš„åµŒå¥—ç»“æœé›†æ˜ å°„åˆ°ä¸€ä¸ªåˆé€‚çš„å¯¹è±¡æ ‘ä¸­ã€‚ å®ƒå¯ä»¥ä½œä¸ºä½¿ç”¨é¢å¤– select è¯­å¥çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒå¯ä»¥å°†å¤šè¡¨è¿æ¥æ“ä½œçš„ç»“æœæ˜ å°„æˆä¸€ä¸ªå•ä¸€çš„ ResultSetã€‚è¿™æ ·çš„ ResultSet æœ‰éƒ¨åˆ†æ•°æ®æ˜¯é‡å¤çš„ã€‚ ä¸ºäº†å°†ç»“æœé›†æ­£ç¡®åœ°æ˜ å°„åˆ°åµŒå¥—çš„å¯¹è±¡æ ‘ä¸­, MyBatis å…è®¸ä½ â€œä¸²è”â€ç»“æœæ˜ å°„ï¼Œä»¥ä¾¿è§£å†³åµŒå¥—ç»“æœé›†çš„é—®é¢˜ã€‚ä½¿ç”¨åµŒå¥—ç»“æœæ˜ å°„çš„ä¸€ä¸ªä¾‹å­åœ¨è¡¨æ ¼ä»¥åã€‚ columnPrefix å½“è¿æ¥å¤šä¸ªè¡¨æ—¶ï¼Œä½ å¯èƒ½ä¼šä¸å¾—ä¸ä½¿ç”¨åˆ—åˆ«åæ¥é¿å…åœ¨ ResultSet ä¸­äº§ç”Ÿé‡å¤çš„åˆ—åã€‚æŒ‡å®š columnPrefix åˆ—åå‰ç¼€å…è®¸ä½ å°†å¸¦æœ‰è¿™äº›å‰ç¼€çš„åˆ—æ˜ å°„åˆ°ä¸€ä¸ªå¤–éƒ¨çš„ç»“æœæ˜ å°„ä¸­ã€‚ è¯¦ç»†è¯´æ˜è¯·å‚è€ƒåé¢çš„ä¾‹å­ã€‚ notNullColumn é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨è‡³å°‘ä¸€ä¸ªè¢«æ˜ å°„åˆ°å±æ€§çš„åˆ—ä¸ä¸ºç©ºæ—¶ï¼Œå­å¯¹è±¡æ‰ä¼šè¢«åˆ›å»ºã€‚ ä½ å¯ä»¥åœ¨è¿™ä¸ªå±æ€§ä¸ŠæŒ‡å®šéç©ºçš„åˆ—æ¥æ”¹å˜é»˜è®¤è¡Œä¸ºï¼ŒæŒ‡å®šåï¼ŒMybatis å°†åªåœ¨è¿™äº›åˆ—ä¸­ä»»æ„ä¸€åˆ—éç©ºæ—¶æ‰åˆ›å»ºä¸€ä¸ªå­å¯¹è±¡ã€‚å¯ä»¥ä½¿ç”¨é€—å·åˆ†éš”æ¥æŒ‡å®šå¤šä¸ªåˆ—ã€‚é»˜è®¤å€¼ï¼šæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚ autoMapping å¦‚æœè®¾ç½®è¿™ä¸ªå±æ€§ï¼ŒMyBatis å°†ä¼šä¸ºæœ¬ç»“æœæ˜ å°„å¼€å¯æˆ–è€…å…³é—­è‡ªåŠ¨æ˜ å°„ã€‚ è¿™ä¸ªå±æ€§ä¼šè¦†ç›–å…¨å±€çš„å±æ€§ autoMappingBehaviorã€‚æ³¨æ„ï¼Œæœ¬å±æ€§å¯¹å¤–éƒ¨çš„ç»“æœæ˜ å°„æ— æ•ˆï¼Œæ‰€ä»¥ä¸èƒ½æ­é… select æˆ– resultMap å…ƒç´ ä½¿ç”¨ã€‚é»˜è®¤å€¼ï¼šæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚ ä¹‹å‰ï¼Œä½ å·²ç»çœ‹åˆ°äº†ä¸€ä¸ªéå¸¸å¤æ‚çš„åµŒå¥—å…³è”çš„ä¾‹å­ã€‚ ä¸‹é¢çš„ä¾‹å­åˆ™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼Œç”¨äºæ¼”ç¤ºåµŒå¥—ç»“æœæ˜ å°„å¦‚ä½•å·¥ä½œã€‚ ç°åœ¨æˆ‘ä»¬å°†åšå®¢è¡¨å’Œä½œè€…è¡¨è¿æ¥åœ¨ä¸€èµ·ï¼Œè€Œä¸æ˜¯æ‰§è¡Œä¸€ä¸ªç‹¬ç«‹çš„æŸ¥è¯¢è¯­å¥ï¼Œå°±åƒè¿™æ ·ï¼š 12345678910111213&lt;select id=&quot;selectBlog&quot; resultMap=&quot;blogResult&quot;&gt; select B.id as blog_id, B.title as blog_title, B.author_id as blog_author_id, A.id as author_id, A.username as author_username, A.password as author_password, A.email as author_email, A.bio as author_bio from Blog B left outer join Author A on B.author_id = A.id where B.id = #&#123;id&#125;&lt;/select&gt; æ³¨æ„æŸ¥è¯¢ä¸­çš„è¿æ¥ï¼Œä»¥åŠä¸ºç¡®ä¿ç»“æœèƒ½å¤Ÿæ‹¥æœ‰å”¯ä¸€ä¸”æ¸…æ™°çš„åå­—ï¼Œæˆ‘ä»¬è®¾ç½®çš„åˆ«åã€‚ è¿™ä½¿å¾—è¿›è¡Œæ˜ å°„éå¸¸ç®€å•ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥æ˜ å°„è¿™ä¸ªç»“æœï¼š 12345678910111213&lt;resultMap id=&quot;blogResult&quot; type=&quot;Blog&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;blog_id&quot; /&gt; &lt;result property=&quot;title&quot; column=&quot;blog_title&quot;/&gt; &lt;association property=&quot;author&quot; column=&quot;blog_author_id&quot; javaType=&quot;Author&quot; resultMap=&quot;authorResult&quot;/&gt;&lt;/resultMap&gt;&lt;resultMap id=&quot;authorResult&quot; type=&quot;Author&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;author_id&quot;/&gt; &lt;result property=&quot;username&quot; column=&quot;author_username&quot;/&gt; &lt;result property=&quot;password&quot; column=&quot;author_password&quot;/&gt; &lt;result property=&quot;email&quot; column=&quot;author_email&quot;/&gt; &lt;result property=&quot;bio&quot; column=&quot;author_bio&quot;/&gt;&lt;/resultMap&gt; åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œåšå®¢ï¼ˆBlogï¼‰ä½œè€…ï¼ˆauthorï¼‰çš„å…³è”å…ƒç´ å§”æ‰˜åä¸º â€œauthorResultâ€ çš„ç»“æœæ˜ å°„æ¥åŠ è½½ä½œè€…å¯¹è±¡çš„å®ä¾‹ã€‚ éå¸¸é‡è¦ï¼š id å…ƒç´ åœ¨åµŒå¥—ç»“æœæ˜ å°„ä¸­æ‰®æ¼”ç€éå¸¸é‡è¦çš„è§’è‰²ã€‚ä½ åº”è¯¥æ€»æ˜¯æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªå¯ä»¥å”¯ä¸€æ ‡è¯†ç»“æœçš„å±æ€§ã€‚ è™½ç„¶ï¼Œå³ä½¿ä¸æŒ‡å®šè¿™ä¸ªå±æ€§ï¼ŒMyBatis ä»ç„¶å¯ä»¥å·¥ä½œï¼Œä½†æ˜¯ä¼šäº§ç”Ÿä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚ åªéœ€è¦æŒ‡å®šå¯ä»¥å”¯ä¸€æ ‡è¯†ç»“æœçš„æœ€å°‘å±æ€§ã€‚æ˜¾ç„¶ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸»é”®ï¼ˆå¤åˆä¸»é”®ä¹Ÿå¯ä»¥ï¼‰ã€‚ ç°åœ¨ï¼Œä¸Šé¢çš„ç¤ºä¾‹ä½¿ç”¨äº†å¤–éƒ¨çš„ç»“æœæ˜ å°„å…ƒç´ æ¥æ˜ å°„å…³è”ã€‚è¿™ä½¿å¾— Author çš„ç»“æœæ˜ å°„å¯ä»¥è¢«é‡ç”¨ã€‚ ç„¶è€Œï¼Œå¦‚æœä½ ä¸æ‰“ç®—é‡ç”¨å®ƒï¼Œæˆ–è€…ä½ æ›´å–œæ¬¢å°†ä½ æ‰€æœ‰çš„ç»“æœæ˜ å°„æ”¾åœ¨ä¸€ä¸ªå…·æœ‰æè¿°æ€§çš„ç»“æœæ˜ å°„å…ƒç´ ä¸­ã€‚ ä½ å¯ä»¥ç›´æ¥å°†ç»“æœæ˜ å°„ä½œä¸ºå­å…ƒç´ åµŒå¥—åœ¨å†…ã€‚è¿™é‡Œç»™å‡ºä½¿ç”¨è¿™ç§æ–¹å¼çš„ç­‰æ•ˆä¾‹å­ï¼š 1234567891011&lt;resultMap id=&quot;blogResult&quot; type=&quot;Blog&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;blog_id&quot; /&gt; &lt;result property=&quot;title&quot; column=&quot;blog_title&quot;/&gt; &lt;association property=&quot;author&quot; javaType=&quot;Author&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;author_id&quot;/&gt; &lt;result property=&quot;username&quot; column=&quot;author_username&quot;/&gt; &lt;result property=&quot;password&quot; column=&quot;author_password&quot;/&gt; &lt;result property=&quot;email&quot; column=&quot;author_email&quot;/&gt; &lt;result property=&quot;bio&quot; column=&quot;author_bio&quot;/&gt; &lt;/association&gt;&lt;/resultMap&gt; é‚£å¦‚æœåšå®¢ï¼ˆblogï¼‰æœ‰ä¸€ä¸ªå…±åŒä½œè€…ï¼ˆco-authorï¼‰è¯¥æ€ä¹ˆåŠï¼Ÿselect è¯­å¥çœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·çš„ï¼š 12345678910111213141516171819&lt;select id=&quot;selectBlog&quot; resultMap=&quot;blogResult&quot;&gt; select B.id as blog_id, B.title as blog_title, A.id as author_id, A.username as author_username, A.password as author_password, A.email as author_email, A.bio as author_bio, CA.id as co_author_id, CA.username as co_author_username, CA.password as co_author_password, CA.email as co_author_email, CA.bio as co_author_bio from Blog B left outer join Author A on B.author_id = A.id left outer join Author CA on B.co_author_id = CA.id where B.id = #&#123;id&#125;&lt;/select&gt; å›å¿†ä¸€ä¸‹ï¼ŒAuthor çš„ç»“æœæ˜ å°„å®šä¹‰å¦‚ä¸‹ï¼š 1234567&lt;resultMap id=&quot;authorResult&quot; type=&quot;Author&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;author_id&quot;/&gt; &lt;result property=&quot;username&quot; column=&quot;author_username&quot;/&gt; &lt;result property=&quot;password&quot; column=&quot;author_password&quot;/&gt; &lt;result property=&quot;email&quot; column=&quot;author_email&quot;/&gt; &lt;result property=&quot;bio&quot; column=&quot;author_bio&quot;/&gt;&lt;/resultMap&gt; ç”±äºç»“æœä¸­çš„åˆ—åä¸ç»“æœæ˜ å°„ä¸­çš„åˆ—åä¸åŒã€‚ä½ éœ€è¦æŒ‡å®š columnPrefix ä»¥ä¾¿é‡å¤ä½¿ç”¨è¯¥ç»“æœæ˜ å°„æ¥æ˜ å°„ co-author çš„ç»“æœã€‚ 123456789&lt;resultMap id=&quot;blogResult&quot; type=&quot;Blog&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;blog_id&quot; /&gt; &lt;result property=&quot;title&quot; column=&quot;blog_title&quot;/&gt; &lt;association property=&quot;author&quot; resultMap=&quot;authorResult&quot; /&gt; &lt;association property=&quot;coAuthor&quot; resultMap=&quot;authorResult&quot; columnPrefix=&quot;co_&quot; /&gt;&lt;/resultMap&gt; å…³è”çš„å¤šç»“æœé›†ï¼ˆResultSetï¼‰ å±æ€§ æè¿° column å½“ä½¿ç”¨å¤šä¸ªç»“æœé›†æ—¶ï¼Œè¯¥å±æ€§æŒ‡å®šç»“æœé›†ä¸­ç”¨äºä¸ foreignColumn åŒ¹é…çš„åˆ—ï¼ˆå¤šä¸ªåˆ—åä»¥é€—å·éš”å¼€ï¼‰ï¼Œä»¥è¯†åˆ«å…³ç³»ä¸­çš„çˆ¶ç±»å‹ä¸å­ç±»å‹ã€‚ foreignColumn æŒ‡å®šå¤–é”®å¯¹åº”çš„åˆ—åï¼ŒæŒ‡å®šçš„åˆ—å°†ä¸çˆ¶ç±»å‹ä¸­ column çš„ç»™å‡ºçš„åˆ—è¿›è¡ŒåŒ¹é…ã€‚ resultSet æŒ‡å®šç”¨äºåŠ è½½å¤æ‚ç±»å‹çš„ç»“æœé›†åå­—ã€‚ ä»ç‰ˆæœ¬ 3.2.3 å¼€å§‹ï¼ŒMyBatis æä¾›äº†å¦ä¸€ç§è§£å†³ N+1 æŸ¥è¯¢é—®é¢˜çš„æ–¹æ³•ã€‚ æŸäº›æ•°æ®åº“å…è®¸å­˜å‚¨è¿‡ç¨‹è¿”å›å¤šä¸ªç»“æœé›†ï¼Œæˆ–ä¸€æ¬¡æ€§æ‰§è¡Œå¤šä¸ªè¯­å¥ï¼Œæ¯ä¸ªè¯­å¥è¿”å›ä¸€ä¸ªç»“æœé›†ã€‚ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œåœ¨ä¸ä½¿ç”¨è¿æ¥çš„æƒ…å†µä¸‹ï¼Œåªè®¿é—®æ•°æ®åº“ä¸€æ¬¡å°±èƒ½è·å¾—ç›¸å…³æ•°æ®ã€‚ åœ¨ä¾‹å­ä¸­ï¼Œå­˜å‚¨è¿‡ç¨‹æ‰§è¡Œä¸‹é¢çš„æŸ¥è¯¢å¹¶è¿”å›ä¸¤ä¸ªç»“æœé›†ã€‚ç¬¬ä¸€ä¸ªç»“æœé›†ä¼šè¿”å›åšå®¢ï¼ˆBlogï¼‰çš„ç»“æœï¼Œç¬¬äºŒä¸ªåˆ™è¿”å›ä½œè€…ï¼ˆAuthorï¼‰çš„ç»“æœã€‚ 123SELECT * FROM BLOG WHERE ID = #&#123;id&#125;SELECT * FROM AUTHOR WHERE ID = #&#123;id&#125; åœ¨æ˜ å°„è¯­å¥ä¸­ï¼Œå¿…é¡»é€šè¿‡ resultSets å±æ€§ä¸ºæ¯ä¸ªç»“æœé›†æŒ‡å®šä¸€ä¸ªåå­—ï¼Œå¤šä¸ªåå­—ä½¿ç”¨é€—å·éš”å¼€ã€‚ 123&lt;select id=&quot;selectBlog&quot; resultSets=&quot;blogs,authors&quot; resultMap=&quot;blogResult&quot; statementType=&quot;CALLABLE&quot;&gt; &#123;call getBlogsAndAuthors(#&#123;id,jdbcType=INTEGER,mode=IN&#125;)&#125;&lt;/select&gt; ç°åœ¨æˆ‘ä»¬å¯ä»¥æŒ‡å®šä½¿ç”¨ â€œauthorsâ€ ç»“æœé›†çš„æ•°æ®æ¥å¡«å…… â€œauthorâ€ å…³è”ï¼š 1234567891011&lt;resultMap id=&quot;blogResult&quot; type=&quot;Blog&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot; /&gt; &lt;result property=&quot;title&quot; column=&quot;title&quot;/&gt; &lt;association property=&quot;author&quot; javaType=&quot;Author&quot; resultSet=&quot;authors&quot; column=&quot;author_id&quot; foreignColumn=&quot;id&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt; &lt;result property=&quot;username&quot; column=&quot;username&quot;/&gt; &lt;result property=&quot;password&quot; column=&quot;password&quot;/&gt; &lt;result property=&quot;email&quot; column=&quot;email&quot;/&gt; &lt;result property=&quot;bio&quot; column=&quot;bio&quot;/&gt; &lt;/association&gt;&lt;/resultMap&gt; ä½ å·²ç»åœ¨ä¸Šé¢çœ‹åˆ°äº†å¦‚ä½•å¤„ç†â€œæœ‰ä¸€ä¸ªâ€ç±»å‹çš„å…³è”ã€‚ä½†æ˜¯è¯¥æ€ä¹ˆå¤„ç†â€œæœ‰å¾ˆå¤šä¸ªâ€ç±»å‹çš„å…³è”å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»çš„ã€‚ é›†åˆ12345&lt;collection property=&quot;posts&quot; ofType=&quot;domain.blog.Post&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;post_id&quot;/&gt; &lt;result property=&quot;subject&quot; column=&quot;post_subject&quot;/&gt; &lt;result property=&quot;body&quot; column=&quot;post_body&quot;/&gt;&lt;/collection&gt; é›†åˆå…ƒç´ å’Œå…³è”å…ƒç´ å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œå®ƒä»¬ç›¸ä¼¼çš„ç¨‹åº¦ä¹‹é«˜ï¼Œä»¥è‡´äºæ²¡æœ‰å¿…è¦å†ä»‹ç»é›†åˆå…ƒç´ çš„ç›¸ä¼¼éƒ¨åˆ†ã€‚ æ‰€ä»¥è®©æˆ‘ä»¬æ¥å…³æ³¨å®ƒä»¬çš„ä¸åŒä¹‹å¤„å§ã€‚ æˆ‘ä»¬æ¥ç»§ç»­ä¸Šé¢çš„ç¤ºä¾‹ï¼Œä¸€ä¸ªåšå®¢ï¼ˆBlogï¼‰åªæœ‰ä¸€ä¸ªä½œè€…ï¼ˆAuthor)ã€‚ä½†ä¸€ä¸ªåšå®¢æœ‰å¾ˆå¤šæ–‡ç« ï¼ˆPost)ã€‚ åœ¨åšå®¢ç±»ä¸­ï¼Œè¿™å¯ä»¥ç”¨ä¸‹é¢çš„å†™æ³•æ¥è¡¨ç¤ºï¼š 1private List&lt;Post&gt; posts; è¦åƒä¸Šé¢è¿™æ ·ï¼Œæ˜ å°„åµŒå¥—ç»“æœé›†åˆåˆ°ä¸€ä¸ª List ä¸­ï¼Œå¯ä»¥ä½¿ç”¨é›†åˆå…ƒç´ ã€‚ å’Œå…³è”å…ƒç´ ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åµŒå¥— Select æŸ¥è¯¢ï¼Œæˆ–åŸºäºè¿æ¥çš„åµŒå¥—ç»“æœæ˜ å°„é›†åˆã€‚ é›†åˆçš„åµŒå¥— Select æŸ¥è¯¢é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨åµŒå¥— Select æŸ¥è¯¢æ¥ä¸ºåšå®¢åŠ è½½æ–‡ç« ã€‚ 1234567891011&lt;resultMap id=&quot;blogResult&quot; type=&quot;Blog&quot;&gt; &lt;collection property=&quot;posts&quot; javaType=&quot;ArrayList&quot; column=&quot;id&quot; ofType=&quot;Post&quot; select=&quot;selectPostsForBlog&quot;/&gt;&lt;/resultMap&gt;&lt;select id=&quot;selectBlog&quot; resultMap=&quot;blogResult&quot;&gt; SELECT * FROM BLOG WHERE ID = #&#123;id&#125;&lt;/select&gt;&lt;select id=&quot;selectPostsForBlog&quot; resultType=&quot;Post&quot;&gt; SELECT * FROM POST WHERE BLOG_ID = #&#123;id&#125;&lt;/select&gt; ä½ å¯èƒ½ä¼šç«‹åˆ»æ³¨æ„åˆ°å‡ ä¸ªä¸åŒï¼Œä½†å¤§éƒ¨åˆ†éƒ½å’Œæˆ‘ä»¬ä¸Šé¢å­¦ä¹ è¿‡çš„å…³è”å…ƒç´ éå¸¸ç›¸ä¼¼ã€‚ é¦–å…ˆï¼Œä½ ä¼šæ³¨æ„åˆ°æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é›†åˆå…ƒç´ ã€‚ æ¥ä¸‹æ¥ä½ ä¼šæ³¨æ„åˆ°æœ‰ä¸€ä¸ªæ–°çš„ â€œofTypeâ€ å±æ€§ã€‚è¿™ä¸ªå±æ€§éå¸¸é‡è¦ï¼Œå®ƒç”¨æ¥å°† JavaBeanï¼ˆæˆ–å­—æ®µï¼‰å±æ€§çš„ç±»å‹å’Œé›†åˆå­˜å‚¨çš„ç±»å‹åŒºåˆ†å¼€æ¥ã€‚ æ‰€ä»¥ä½ å¯ä»¥æŒ‰ç…§ä¸‹é¢è¿™æ ·æ¥é˜…è¯»æ˜ å°„ï¼š 1&lt;collection property=&quot;posts&quot; javaType=&quot;ArrayList&quot; column=&quot;id&quot; ofType=&quot;Post&quot; select=&quot;selectPostsForBlog&quot;/&gt; è¯»ä½œï¼š â€œposts æ˜¯ä¸€ä¸ªå­˜å‚¨ Post çš„ ArrayList é›†åˆâ€ åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒMyBatis å¯ä»¥æ¨æ–­ javaType å±æ€§ï¼Œå› æ­¤å¹¶ä¸éœ€è¦å¡«å†™ã€‚æ‰€ä»¥å¾ˆå¤šæ—¶å€™ä½ å¯ä»¥ç®€ç•¥æˆï¼š 1&lt;collection property=&quot;posts&quot; column=&quot;id&quot; ofType=&quot;Post&quot; select=&quot;selectPostsForBlog&quot;/&gt; é›†åˆçš„åµŒå¥—ç»“æœæ˜ å°„ç°åœ¨ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†é›†åˆçš„åµŒå¥—ç»“æœæ˜ å°„æ˜¯æ€æ ·å·¥ä½œçš„â€”â€”é™¤äº†æ–°å¢çš„ â€œofTypeâ€ å±æ€§ï¼Œå®ƒå’Œå…³è”çš„å®Œå…¨ç›¸åŒã€‚ é¦–å…ˆ, è®©æˆ‘ä»¬çœ‹çœ‹å¯¹åº”çš„ SQL è¯­å¥ï¼š 123456789101112&lt;select id=&quot;selectBlog&quot; resultMap=&quot;blogResult&quot;&gt; select B.id as blog_id, B.title as blog_title, B.author_id as blog_author_id, P.id as post_id, P.subject as post_subject, P.body as post_body, from Blog B left outer join Post P on B.id = P.blog_id where B.id = #&#123;id&#125;&lt;/select&gt; æˆ‘ä»¬å†æ¬¡è¿æ¥äº†åšå®¢è¡¨å’Œæ–‡ç« è¡¨ï¼Œå¹¶ä¸”ä¸ºæ¯ä¸€åˆ—éƒ½èµ‹äºˆäº†ä¸€ä¸ªæœ‰æ„ä¹‰çš„åˆ«åï¼Œä»¥ä¾¿æ˜ å°„ä¿æŒç®€å•ã€‚ è¦æ˜ å°„åšå®¢é‡Œé¢çš„æ–‡ç« é›†åˆï¼Œå°±è¿™ä¹ˆç®€å•ï¼š 123456789&lt;resultMap id=&quot;blogResult&quot; type=&quot;Blog&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;blog_id&quot; /&gt; &lt;result property=&quot;title&quot; column=&quot;blog_title&quot;/&gt; &lt;collection property=&quot;posts&quot; ofType=&quot;Post&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;post_id&quot;/&gt; &lt;result property=&quot;subject&quot; column=&quot;post_subject&quot;/&gt; &lt;result property=&quot;body&quot; column=&quot;post_body&quot;/&gt; &lt;/collection&gt;&lt;/resultMap&gt; å†æé†’ä¸€æ¬¡ï¼Œè¦è®°å¾—ä¸Šé¢ id å…ƒç´ çš„é‡è¦æ€§ï¼Œå¦‚æœä½ ä¸è®°å¾—äº†ï¼Œè¯·é˜…è¯»å…³è”éƒ¨åˆ†çš„ç›¸å…³éƒ¨åˆ†ã€‚ å¦‚æœä½ å–œæ¬¢æ›´è¯¦ç•¥çš„ã€å¯é‡ç”¨çš„ç»“æœæ˜ å°„ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç­‰ä»·å½¢å¼ï¼š 1234567891011&lt;resultMap id=&quot;blogResult&quot; type=&quot;Blog&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;blog_id&quot; /&gt; &lt;result property=&quot;title&quot; column=&quot;blog_title&quot;/&gt; &lt;collection property=&quot;posts&quot; ofType=&quot;Post&quot; resultMap=&quot;blogPostResult&quot; columnPrefix=&quot;post_&quot;/&gt;&lt;/resultMap&gt;&lt;resultMap id=&quot;blogPostResult&quot; type=&quot;Post&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt; &lt;result property=&quot;subject&quot; column=&quot;subject&quot;/&gt; &lt;result property=&quot;body&quot; column=&quot;body&quot;/&gt;&lt;/resultMap&gt; é›†åˆçš„å¤šç»“æœé›†ï¼ˆResultSetï¼‰åƒå…³è”å…ƒç´ é‚£æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹å®ç°ï¼Œå®ƒä¼šæ‰§è¡Œä¸¤ä¸ªæŸ¥è¯¢å¹¶è¿”å›ä¸¤ä¸ªç»“æœé›†ï¼Œä¸€ä¸ªæ˜¯åšå®¢çš„ç»“æœé›†ï¼Œå¦ä¸€ä¸ªæ˜¯æ–‡ç« çš„ç»“æœé›†ï¼š 123SELECT * FROM BLOG WHERE ID = #&#123;id&#125;SELECT * FROM POST WHERE BLOG_ID = #&#123;id&#125; åœ¨æ˜ å°„è¯­å¥ä¸­ï¼Œå¿…é¡»é€šè¿‡ resultSets å±æ€§ä¸ºæ¯ä¸ªç»“æœé›†æŒ‡å®šä¸€ä¸ªåå­—ï¼Œå¤šä¸ªåå­—ä½¿ç”¨é€—å·éš”å¼€ã€‚ 123&lt;select id=&quot;selectBlog&quot; resultSets=&quot;blogs,posts&quot; resultMap=&quot;blogResult&quot;&gt; &#123;call getBlogsAndPosts(#&#123;id,jdbcType=INTEGER,mode=IN&#125;)&#125;&lt;/select&gt; æˆ‘ä»¬æŒ‡å®š â€œpostsâ€ é›†åˆå°†ä¼šä½¿ç”¨å­˜å‚¨åœ¨ â€œpostsâ€ ç»“æœé›†ä¸­çš„æ•°æ®è¿›è¡Œå¡«å……ï¼š 123456789&lt;resultMap id=&quot;blogResult&quot; type=&quot;Blog&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot; /&gt; &lt;result property=&quot;title&quot; column=&quot;title&quot;/&gt; &lt;collection property=&quot;posts&quot; ofType=&quot;Post&quot; resultSet=&quot;posts&quot; column=&quot;id&quot; foreignColumn=&quot;blog_id&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot;/&gt; &lt;result property=&quot;subject&quot; column=&quot;subject&quot;/&gt; &lt;result property=&quot;body&quot; column=&quot;body&quot;/&gt; &lt;/collection&gt;&lt;/resultMap&gt; æ³¨æ„ å¯¹å…³è”æˆ–é›†åˆçš„æ˜ å°„ï¼Œå¹¶æ²¡æœ‰æ·±åº¦ã€å¹¿åº¦æˆ–ç»„åˆä¸Šçš„è¦æ±‚ã€‚ä½†åœ¨æ˜ å°„æ—¶è¦ç•™æ„æ€§èƒ½é—®é¢˜ã€‚ åœ¨æ¢ç´¢æœ€ä½³å®è·µçš„è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨çš„å•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•ä¼šæ˜¯ä½ çš„å¥½å¸®æ‰‹ã€‚ è€Œ MyBatis çš„å¥½å¤„åœ¨äºï¼Œå¯ä»¥åœ¨ä¸å¯¹ä½ çš„ä»£ç å¼•å…¥é‡å¤§å˜æ›´ï¼ˆå¦‚æœæœ‰ï¼‰çš„æƒ…å†µä¸‹ï¼Œå…è®¸ä½ ä¹‹åæ”¹å˜ä½ çš„æƒ³æ³•ã€‚ é«˜çº§å…³è”å’Œé›†åˆæ˜ å°„æ˜¯ä¸€ä¸ªæ·±åº¦è¯é¢˜ã€‚æ–‡æ¡£çš„ä»‹ç»åªèƒ½åˆ°æ­¤ä¸ºæ­¢ã€‚é…åˆå°‘è®¸çš„å®è·µï¼Œä½ ä¼šå¾ˆå¿«äº†è§£å…¨éƒ¨çš„ç”¨æ³•ã€‚ é‰´åˆ«å™¨123&lt;discriminator javaType=&quot;int&quot; column=&quot;draft&quot;&gt; &lt;case value=&quot;1&quot; resultType=&quot;DraftPost&quot;/&gt;&lt;/discriminator&gt; æœ‰æ—¶å€™ï¼Œä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢å¯èƒ½ä¼šè¿”å›å¤šä¸ªä¸åŒçš„ç»“æœé›†ï¼ˆä½†æ€»ä½“ä¸Šè¿˜æ˜¯æœ‰ä¸€å®šçš„è”ç³»çš„ï¼‰ã€‚ é‰´åˆ«å™¨ï¼ˆdiscriminatorï¼‰å…ƒç´ å°±æ˜¯è¢«è®¾è®¡æ¥åº”å¯¹è¿™ç§æƒ…å†µçš„ï¼Œå¦å¤–ä¹Ÿèƒ½å¤„ç†å…¶å®ƒæƒ…å†µï¼Œä¾‹å¦‚ç±»çš„ç»§æ‰¿å±‚æ¬¡ç»“æ„ã€‚ é‰´åˆ«å™¨çš„æ¦‚å¿µå¾ˆå¥½ç†è§£â€”â€”å®ƒå¾ˆåƒ Java è¯­è¨€ä¸­çš„ switch è¯­å¥ã€‚ ä¸€ä¸ªé‰´åˆ«å™¨çš„å®šä¹‰éœ€è¦æŒ‡å®š column å’Œ javaType å±æ€§ã€‚column æŒ‡å®šäº† MyBatis æŸ¥è¯¢è¢«æ¯”è¾ƒå€¼çš„åœ°æ–¹ã€‚ è€Œ javaType ç”¨æ¥ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ç›¸ç­‰æµ‹è¯•ï¼ˆè™½ç„¶å¾ˆå¤šæƒ…å†µä¸‹å­—ç¬¦ä¸²çš„ç›¸ç­‰æµ‹è¯•éƒ½å¯ä»¥å·¥ä½œï¼‰ã€‚ä¾‹å¦‚ï¼š 1234567891011121314&lt;resultMap id=&quot;vehicleResult&quot; type=&quot;Vehicle&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot; /&gt; &lt;result property=&quot;vin&quot; column=&quot;vin&quot;/&gt; &lt;result property=&quot;year&quot; column=&quot;year&quot;/&gt; &lt;result property=&quot;make&quot; column=&quot;make&quot;/&gt; &lt;result property=&quot;model&quot; column=&quot;model&quot;/&gt; &lt;result property=&quot;color&quot; column=&quot;color&quot;/&gt; &lt;discriminator javaType=&quot;int&quot; column=&quot;vehicle_type&quot;&gt; &lt;case value=&quot;1&quot; resultMap=&quot;carResult&quot;/&gt; &lt;case value=&quot;2&quot; resultMap=&quot;truckResult&quot;/&gt; &lt;case value=&quot;3&quot; resultMap=&quot;vanResult&quot;/&gt; &lt;case value=&quot;4&quot; resultMap=&quot;suvResult&quot;/&gt; &lt;/discriminator&gt;&lt;/resultMap&gt; åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒMyBatis ä¼šä»ç»“æœé›†ä¸­å¾—åˆ°æ¯æ¡è®°å½•ï¼Œç„¶åæ¯”è¾ƒå®ƒçš„ vehicle type å€¼ã€‚ å¦‚æœå®ƒåŒ¹é…ä»»æ„ä¸€ä¸ªé‰´åˆ«å™¨çš„ caseï¼Œå°±ä¼šä½¿ç”¨è¿™ä¸ª case æŒ‡å®šçš„ç»“æœæ˜ å°„ã€‚ è¿™ä¸ªè¿‡ç¨‹æ˜¯äº’æ–¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå‰©ä½™çš„ç»“æœæ˜ å°„å°†è¢«å¿½ç•¥ï¼ˆé™¤éå®ƒæ˜¯æ‰©å±•çš„ï¼Œæˆ‘ä»¬å°†åœ¨ç¨åè®¨è®ºå®ƒï¼‰ã€‚ å¦‚æœä¸èƒ½åŒ¹é…ä»»ä½•ä¸€ä¸ª caseï¼ŒMyBatis å°±åªä¼šä½¿ç”¨é‰´åˆ«å™¨å—å¤–å®šä¹‰çš„ç»“æœæ˜ å°„ã€‚ æ‰€ä»¥ï¼Œå¦‚æœ carResult çš„å£°æ˜å¦‚ä¸‹ï¼š 123&lt;resultMap id=&quot;carResult&quot; type=&quot;Car&quot;&gt; &lt;result property=&quot;doorCount&quot; column=&quot;door_count&quot; /&gt;&lt;/resultMap&gt; é‚£ä¹ˆåªæœ‰ doorCount å±æ€§ä¼šè¢«åŠ è½½ã€‚è¿™æ˜¯ä¸ºäº†å³ä½¿é‰´åˆ«å™¨çš„ case ä¹‹é—´éƒ½èƒ½åˆ†ä¸ºå®Œå…¨ç‹¬ç«‹çš„ä¸€ç»„ï¼Œå°½ç®¡å’Œçˆ¶ç»“æœæ˜ å°„å¯èƒ½æ²¡æœ‰ä»€ä¹ˆå…³ç³»ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å½“ç„¶çŸ¥é“ cars å’Œ vehicles ä¹‹é—´æœ‰å…³ç³»ï¼Œä¹Ÿå°±æ˜¯ Car æ˜¯ä¸€ä¸ª Vehicleã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›å‰©ä½™çš„å±æ€§ä¹Ÿèƒ½è¢«åŠ è½½ã€‚è€Œè¿™åªéœ€è¦ä¸€ä¸ªå°ä¿®æ”¹ã€‚ 123&lt;resultMap id=&quot;carResult&quot; type=&quot;Car&quot; extends=&quot;vehicleResult&quot;&gt; &lt;result property=&quot;doorCount&quot; column=&quot;door_count&quot; /&gt;&lt;/resultMap&gt; ç°åœ¨ vehicleResult å’Œ carResult çš„å±æ€§éƒ½ä¼šè¢«åŠ è½½äº†ã€‚ å¯èƒ½æœ‰äººåˆä¼šè§‰å¾—æ˜ å°„çš„å¤–éƒ¨å®šä¹‰æœ‰ç‚¹å¤ªå†—é•¿äº†ã€‚ å› æ­¤ï¼Œå¯¹äºé‚£äº›æ›´å–œæ¬¢ç®€æ´çš„æ˜ å°„é£æ ¼çš„äººæ¥è¯´ï¼Œè¿˜æœ‰å¦ä¸€ç§è¯­æ³•å¯ä»¥é€‰æ‹©ã€‚ä¾‹å¦‚ï¼š 1234567891011121314151617181920212223&lt;resultMap id=&quot;vehicleResult&quot; type=&quot;Vehicle&quot;&gt; &lt;id property=&quot;id&quot; column=&quot;id&quot; /&gt; &lt;result property=&quot;vin&quot; column=&quot;vin&quot;/&gt; &lt;result property=&quot;year&quot; column=&quot;year&quot;/&gt; &lt;result property=&quot;make&quot; column=&quot;make&quot;/&gt; &lt;result property=&quot;model&quot; column=&quot;model&quot;/&gt; &lt;result property=&quot;color&quot; column=&quot;color&quot;/&gt; &lt;discriminator javaType=&quot;int&quot; column=&quot;vehicle_type&quot;&gt; &lt;case value=&quot;1&quot; resultType=&quot;carResult&quot;&gt; &lt;result property=&quot;doorCount&quot; column=&quot;door_count&quot; /&gt; &lt;/case&gt; &lt;case value=&quot;2&quot; resultType=&quot;truckResult&quot;&gt; &lt;result property=&quot;boxSize&quot; column=&quot;box_size&quot; /&gt; &lt;result property=&quot;extendedCab&quot; column=&quot;extended_cab&quot; /&gt; &lt;/case&gt; &lt;case value=&quot;3&quot; resultType=&quot;vanResult&quot;&gt; &lt;result property=&quot;powerSlidingDoor&quot; column=&quot;power_sliding_door&quot; /&gt; &lt;/case&gt; &lt;case value=&quot;4&quot; resultType=&quot;suvResult&quot;&gt; &lt;result property=&quot;allWheelDrive&quot; column=&quot;all_wheel_drive&quot; /&gt; &lt;/case&gt; &lt;/discriminator&gt;&lt;/resultMap&gt; æç¤º è¯·æ³¨æ„ï¼Œè¿™äº›éƒ½æ˜¯ç»“æœæ˜ å°„ï¼Œå¦‚æœä½ å®Œå…¨ä¸è®¾ç½®ä»»ä½•çš„ result å…ƒç´ ï¼ŒMyBatis å°†ä¸ºä½ è‡ªåŠ¨åŒ¹é…åˆ—å’Œå±æ€§ã€‚æ‰€ä»¥ä¸Šé¢çš„ä¾‹å­å¤§å¤šéƒ½è¦æ¯”å®é™…çš„æ›´å¤æ‚ã€‚ è¿™ä¹Ÿè¡¨æ˜ï¼Œå¤§å¤šæ•°æ•°æ®åº“çš„å¤æ‚åº¦éƒ½æ¯”è¾ƒé«˜ï¼Œæˆ‘ä»¬ä¸å¤ªå¯èƒ½ä¸€ç›´ä¾èµ–äºè¿™ç§æœºåˆ¶ã€‚ è‡ªåŠ¨æ˜ å°„æ­£å¦‚ä½ åœ¨å‰é¢ä¸€èŠ‚çœ‹åˆ°çš„ï¼Œåœ¨ç®€å•çš„åœºæ™¯ä¸‹ï¼ŒMyBatis å¯ä»¥ä¸ºä½ è‡ªåŠ¨æ˜ å°„æŸ¥è¯¢ç»“æœã€‚ä½†å¦‚æœé‡åˆ°å¤æ‚çš„åœºæ™¯ï¼Œä½ éœ€è¦æ„å»ºä¸€ä¸ªç»“æœæ˜ å°„ã€‚ ä½†æ˜¯åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†çœ‹åˆ°ï¼Œä½ å¯ä»¥æ··åˆä½¿ç”¨è¿™ä¸¤ç§ç­–ç•¥ã€‚è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹è‡ªåŠ¨æ˜ å°„æ˜¯æ€æ ·å·¥ä½œçš„ã€‚ å½“è‡ªåŠ¨æ˜ å°„æŸ¥è¯¢ç»“æœæ—¶ï¼ŒMyBatis ä¼šè·å–ç»“æœä¸­è¿”å›çš„åˆ—åå¹¶åœ¨ Java ç±»ä¸­æŸ¥æ‰¾ç›¸åŒåå­—çš„å±æ€§ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ã€‚ è¿™æ„å‘³ç€å¦‚æœå‘ç°äº† ID åˆ—å’Œ id å±æ€§ï¼ŒMyBatis ä¼šå°†åˆ— ID çš„å€¼èµ‹ç»™ id å±æ€§ã€‚ é€šå¸¸æ•°æ®åº“åˆ—ä½¿ç”¨å¤§å†™å­—æ¯ç»„æˆçš„å•è¯å‘½åï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼›è€Œ Java å±æ€§ä¸€èˆ¬éµå¾ªé©¼å³°å‘½åæ³•çº¦å®šã€‚ä¸ºäº†åœ¨è¿™ä¸¤ç§å‘½åæ–¹å¼ä¹‹é—´å¯ç”¨è‡ªåŠ¨æ˜ å°„ï¼Œéœ€è¦å°†mapUnderscoreToCamelCase è®¾ç½®ä¸º trueã€‚ ç”šè‡³åœ¨æä¾›äº†ç»“æœæ˜ å°„åï¼Œè‡ªåŠ¨æ˜ å°„ä¹Ÿèƒ½å·¥ä½œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºæ¯ä¸€ä¸ªç»“æœæ˜ å°„ï¼Œåœ¨ ResultSet å‡ºç°çš„åˆ—ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®æ‰‹åŠ¨æ˜ å°„ï¼Œå°†è¢«è‡ªåŠ¨æ˜ å°„ã€‚åœ¨è‡ªåŠ¨æ˜ å°„å¤„ç†å®Œæ¯•åï¼Œå†å¤„ç†æ‰‹åŠ¨æ˜ å°„ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œid å’Œ userName åˆ—å°†è¢«è‡ªåŠ¨æ˜ å°„ï¼Œhashed_password åˆ—å°†æ ¹æ®é…ç½®è¿›è¡Œæ˜ å°„ã€‚ 1234567891011&lt;select id=&quot;selectUsers&quot; resultMap=&quot;userResultMap&quot;&gt; select user_id as &quot;id&quot;, user_name as &quot;userName&quot;, hashed_password from some_table where id = #&#123;id&#125;&lt;/select&gt;&lt;resultMap id=&quot;userResultMap&quot; type=&quot;User&quot;&gt; &lt;result property=&quot;password&quot; column=&quot;hashed_password&quot;/&gt;&lt;/resultMap&gt; æœ‰ä¸‰ç§è‡ªåŠ¨æ˜ å°„ç­‰çº§ï¼š NONE - ç¦ç”¨è‡ªåŠ¨æ˜ å°„ã€‚ä»…å¯¹æ‰‹åŠ¨æ˜ å°„çš„å±æ€§è¿›è¡Œæ˜ å°„ã€‚ PARTIAL - å¯¹é™¤åœ¨å†…éƒ¨å®šä¹‰äº†åµŒå¥—ç»“æœæ˜ å°„ï¼ˆä¹Ÿå°±æ˜¯è¿æ¥çš„å±æ€§ï¼‰ä»¥å¤–çš„å±æ€§è¿›è¡Œæ˜ å°„ FULL - è‡ªåŠ¨æ˜ å°„æ‰€æœ‰å±æ€§ã€‚ é»˜è®¤å€¼æ˜¯ PARTIALï¼Œè¿™æ˜¯æœ‰åŸå› çš„ã€‚å½“å¯¹è¿æ¥æŸ¥è¯¢çš„ç»“æœä½¿ç”¨ FULL æ—¶ï¼Œè¿æ¥æŸ¥è¯¢ä¼šåœ¨åŒä¸€è¡Œä¸­è·å–å¤šä¸ªä¸åŒå®ä½“çš„æ•°æ®ï¼Œå› æ­¤å¯èƒ½å¯¼è‡´éé¢„æœŸçš„æ˜ å°„ã€‚ ä¸‹é¢çš„ä¾‹å­å°†å±•ç¤ºè¿™ç§é£é™©ï¼š 123456789101112131415&lt;select id=&quot;selectBlog&quot; resultMap=&quot;blogResult&quot;&gt; select B.id, B.title, A.username, from Blog B left outer join Author A on B.author_id = A.id where B.id = #&#123;id&#125;&lt;/select&gt;&lt;resultMap id=&quot;blogResult&quot; type=&quot;Blog&quot;&gt; &lt;association property=&quot;author&quot; resultMap=&quot;authorResult&quot;/&gt;&lt;/resultMap&gt;&lt;resultMap id=&quot;authorResult&quot; type=&quot;Author&quot;&gt; &lt;result property=&quot;username&quot; column=&quot;author_username&quot;/&gt;&lt;/resultMap&gt; åœ¨è¯¥ç»“æœæ˜ å°„ä¸­ï¼ŒBlog å’Œ Author å‡å°†è¢«è‡ªåŠ¨æ˜ å°„ã€‚ä½†æ˜¯æ³¨æ„ Author æœ‰ä¸€ä¸ª id å±æ€§ï¼Œåœ¨ ResultSet ä¸­ä¹Ÿæœ‰ä¸€ä¸ªåä¸º id çš„åˆ—ï¼Œæ‰€ä»¥ Author çš„ id å°†å¡«å…¥ Blog çš„ idï¼Œè¿™å¯ä¸æ˜¯ä½ æœŸæœ›çš„è¡Œä¸ºã€‚ æ‰€ä»¥ï¼Œè¦è°¨æ…ä½¿ç”¨ FULLã€‚ æ— è®ºè®¾ç½®çš„è‡ªåŠ¨æ˜ å°„ç­‰çº§æ˜¯å“ªç§ï¼Œä½ éƒ½å¯ä»¥é€šè¿‡åœ¨ç»“æœæ˜ å°„ä¸Šè®¾ç½® autoMapping å±æ€§æ¥ä¸ºæŒ‡å®šçš„ç»“æœæ˜ å°„è®¾ç½®å¯ç”¨&#x2F;ç¦ç”¨è‡ªåŠ¨æ˜ å°„ã€‚ 123&lt;resultMap id=&quot;userResultMap&quot; type=&quot;User&quot; autoMapping=&quot;false&quot;&gt; &lt;result property=&quot;password&quot; column=&quot;hashed_password&quot;/&gt;&lt;/resultMap&gt; ç¼“å­˜MyBatis å†…ç½®äº†ä¸€ä¸ªå¼ºå¤§çš„äº‹åŠ¡æ€§æŸ¥è¯¢ç¼“å­˜æœºåˆ¶ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°é…ç½®å’Œå®šåˆ¶ã€‚ ä¸ºäº†ä½¿å®ƒæ›´åŠ å¼ºå¤§è€Œä¸”æ˜“äºé…ç½®ï¼Œæˆ‘ä»¬å¯¹ MyBatis 3 ä¸­çš„ç¼“å­˜å®ç°è¿›è¡Œäº†è®¸å¤šæ”¹è¿›ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œåªå¯ç”¨äº†æœ¬åœ°çš„ä¼šè¯ç¼“å­˜ï¼Œå®ƒä»…ä»…å¯¹ä¸€ä¸ªä¼šè¯ä¸­çš„æ•°æ®è¿›è¡Œç¼“å­˜ã€‚ è¦å¯ç”¨å…¨å±€çš„äºŒçº§ç¼“å­˜ï¼Œåªéœ€è¦åœ¨ä½ çš„ SQL æ˜ å°„æ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼š 1&lt;cache/&gt; åŸºæœ¬ä¸Šå°±æ˜¯è¿™æ ·ã€‚è¿™ä¸ªç®€å•è¯­å¥çš„æ•ˆæœå¦‚ä¸‹: æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰ select è¯­å¥çš„ç»“æœå°†ä¼šè¢«ç¼“å­˜ã€‚ æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰ insertã€update å’Œ delete è¯­å¥ä¼šåˆ·æ–°ç¼“å­˜ã€‚ ç¼“å­˜ä¼šä½¿ç”¨æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼ˆLRU, Least Recently Usedï¼‰ç®—æ³•æ¥æ¸…é™¤ä¸éœ€è¦çš„ç¼“å­˜ã€‚ ç¼“å­˜ä¸ä¼šå®šæ—¶è¿›è¡Œåˆ·æ–°ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰åˆ·æ–°é—´éš”ï¼‰ã€‚ ç¼“å­˜ä¼šä¿å­˜åˆ—è¡¨æˆ–å¯¹è±¡ï¼ˆæ— è®ºæŸ¥è¯¢æ–¹æ³•è¿”å›å“ªç§ï¼‰çš„ 1024 ä¸ªå¼•ç”¨ã€‚ ç¼“å­˜ä¼šè¢«è§†ä¸ºè¯»&#x2F;å†™ç¼“å­˜ï¼Œè¿™æ„å‘³ç€è·å–åˆ°çš„å¯¹è±¡å¹¶ä¸æ˜¯å…±äº«çš„ï¼Œå¯ä»¥å®‰å…¨åœ°è¢«è°ƒç”¨è€…ä¿®æ”¹ï¼Œè€Œä¸å¹²æ‰°å…¶ä»–è°ƒç”¨è€…æˆ–çº¿ç¨‹æ‰€åšçš„æ½œåœ¨ä¿®æ”¹ã€‚ æç¤º ç¼“å­˜åªä½œç”¨äº cache æ ‡ç­¾æ‰€åœ¨çš„æ˜ å°„æ–‡ä»¶ä¸­çš„è¯­å¥ã€‚å¦‚æœä½ æ··åˆä½¿ç”¨ Java API å’Œ XML æ˜ å°„æ–‡ä»¶ï¼Œåœ¨å…±ç”¨æ¥å£ä¸­çš„è¯­å¥å°†ä¸ä¼šè¢«é»˜è®¤ç¼“å­˜ã€‚ä½ éœ€è¦ä½¿ç”¨ @CacheNamespaceRef æ³¨è§£æŒ‡å®šç¼“å­˜ä½œç”¨åŸŸã€‚ è¿™äº›å±æ€§å¯ä»¥é€šè¿‡ cache å…ƒç´ çš„å±æ€§æ¥ä¿®æ”¹ã€‚æ¯”å¦‚ï¼š 12345&lt;cache eviction=&quot;FIFO&quot; flushInterval=&quot;60000&quot; size=&quot;512&quot; readOnly=&quot;true&quot;/&gt; è¿™ä¸ªæ›´é«˜çº§çš„é…ç½®åˆ›å»ºäº†ä¸€ä¸ª FIFO ç¼“å­˜ï¼Œæ¯éš” 60 ç§’åˆ·æ–°ï¼Œæœ€å¤šå¯ä»¥å­˜å‚¨ç»“æœå¯¹è±¡æˆ–åˆ—è¡¨çš„ 512 ä¸ªå¼•ç”¨ï¼Œè€Œä¸”è¿”å›çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹å¯èƒ½ä¼šåœ¨ä¸åŒçº¿ç¨‹ä¸­çš„è°ƒç”¨è€…äº§ç”Ÿå†²çªã€‚ å¯ç”¨çš„æ¸…é™¤ç­–ç•¥æœ‰ï¼š LRU â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼šç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚ FIFO â€“ å…ˆè¿›å…ˆå‡ºï¼šæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚ SOFT â€“ è½¯å¼•ç”¨ï¼šåŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™ç§»é™¤å¯¹è±¡ã€‚ WEAK â€“ å¼±å¼•ç”¨ï¼šæ›´ç§¯æåœ°åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™ç§»é™¤å¯¹è±¡ã€‚ é»˜è®¤çš„æ¸…é™¤ç­–ç•¥æ˜¯ LRUã€‚ flushIntervalï¼ˆåˆ·æ–°é—´éš”ï¼‰å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„çš„æ­£æ•´æ•°ï¼Œè®¾ç½®çš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªä»¥æ¯«ç§’ä¸ºå•ä½çš„åˆç†æ—¶é—´é‡ã€‚ é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…ä¼šåœ¨è°ƒç”¨è¯­å¥æ—¶åˆ·æ–°ã€‚ sizeï¼ˆå¼•ç”¨æ•°ç›®ï¼‰å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„æ­£æ•´æ•°ï¼Œè¦æ³¨æ„æ¬²ç¼“å­˜å¯¹è±¡çš„å¤§å°å’Œè¿è¡Œç¯å¢ƒä¸­å¯ç”¨çš„å†…å­˜èµ„æºã€‚é»˜è®¤å€¼æ˜¯ 1024ã€‚ readOnlyï¼ˆåªè¯»ï¼‰å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸º true æˆ– falseã€‚åªè¯»çš„ç¼“å­˜ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›ç¼“å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹ã€‚ å› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¿™å°±æä¾›äº†å¯è§‚çš„æ€§èƒ½æå‡ã€‚è€Œå¯è¯»å†™çš„ç¼“å­˜ä¼šï¼ˆé€šè¿‡åºåˆ—åŒ–ï¼‰è¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´ã€‚ é€Ÿåº¦ä¸Šä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯æ›´å®‰å…¨ï¼Œå› æ­¤é»˜è®¤å€¼æ˜¯ falseã€‚ æç¤º äºŒçº§ç¼“å­˜æ˜¯äº‹åŠ¡æ€§çš„ã€‚è¿™æ„å‘³ç€ï¼Œå½“ SqlSession å®Œæˆå¹¶æäº¤æ—¶ï¼Œæˆ–æ˜¯å®Œæˆå¹¶å›æ»šï¼Œä½†æ²¡æœ‰æ‰§è¡Œ flushCache&#x3D;true çš„ insert&#x2F;delete&#x2F;update è¯­å¥æ—¶ï¼Œç¼“å­˜ä¼šè·å¾—æ›´æ–°ã€‚ ä½¿ç”¨è‡ªå®šä¹‰ç¼“å­˜é™¤äº†ä¸Šè¿°è‡ªå®šä¹‰ç¼“å­˜çš„æ–¹å¼ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å®ç°ä½ è‡ªå·±çš„ç¼“å­˜ï¼Œæˆ–ä¸ºå…¶ä»–ç¬¬ä¸‰æ–¹ç¼“å­˜æ–¹æ¡ˆåˆ›å»ºé€‚é…å™¨ï¼Œæ¥å®Œå…¨è¦†ç›–ç¼“å­˜è¡Œä¸ºã€‚ 1&lt;cache type=&quot;com.domain.something.MyCustomCache&quot;/&gt; è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰çš„ç¼“å­˜å®ç°ã€‚type å±æ€§æŒ‡å®šçš„ç±»å¿…é¡»å®ç° org.apache.ibatis.cache.Cache æ¥å£ï¼Œä¸”æä¾›ä¸€ä¸ªæ¥å— String å‚æ•°ä½œä¸º id çš„æ„é€ å™¨ã€‚ è¿™ä¸ªæ¥å£æ˜¯ MyBatis æ¡†æ¶ä¸­è®¸å¤šå¤æ‚çš„æ¥å£ä¹‹ä¸€ï¼Œä½†æ˜¯è¡Œä¸ºå´éå¸¸ç®€å•ã€‚ 123456789public interface Cache &#123; String getId(); int getSize(); void putObject(Object key, Object value); Object getObject(Object key); boolean hasKey(Object key); Object removeObject(Object key); void clear();&#125; ä¸ºäº†å¯¹ä½ çš„ç¼“å­˜è¿›è¡Œé…ç½®ï¼Œåªéœ€è¦ç®€å•åœ°åœ¨ä½ çš„ç¼“å­˜å®ç°ä¸­æ·»åŠ å…¬æœ‰çš„ JavaBean å±æ€§ï¼Œç„¶åé€šè¿‡ cache å…ƒç´ ä¼ é€’å±æ€§å€¼ï¼Œä¾‹å¦‚ï¼Œä¸‹é¢çš„ä¾‹å­å°†åœ¨ä½ çš„ç¼“å­˜å®ç°ä¸Šè°ƒç”¨ä¸€ä¸ªåä¸ºsetCacheFile(String file) çš„æ–¹æ³•ï¼š 123&lt;cache type=&quot;com.domain.something.MyCustomCache&quot;&gt; &lt;property name=&quot;cacheFile&quot; value=&quot;/tmp/my-custom-cache.tmp&quot;/&gt;&lt;/cache&gt; ä½ å¯ä»¥ä½¿ç”¨æ‰€æœ‰ç®€å•ç±»å‹ä½œä¸º JavaBean å±æ€§çš„ç±»å‹ï¼ŒMyBatis ä¼šè¿›è¡Œè½¬æ¢ã€‚ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å ä½ç¬¦ï¼ˆå¦‚ $&#123;cache.file&#125;ï¼‰ï¼Œä»¥ä¾¿æ›¿æ¢æˆåœ¨é…ç½®æ–‡ä»¶å±æ€§ä¸­å®šä¹‰çš„å€¼ã€‚ ä»ç‰ˆæœ¬ 3.4.2 å¼€å§‹ï¼ŒMyBatis å·²ç»æ”¯æŒåœ¨æ‰€æœ‰å±æ€§è®¾ç½®å®Œæ¯•ä¹‹åï¼Œè°ƒç”¨ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•ã€‚ å¦‚æœæƒ³è¦ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œè¯·åœ¨ä½ çš„è‡ªå®šä¹‰ç¼“å­˜ç±»é‡Œå®ç°org.apache.ibatis.builder.InitializingObject æ¥å£ã€‚ 123public interface InitializingObject &#123; void initialize() throws Exception;&#125; æç¤º ä¸Šä¸€èŠ‚ä¸­å¯¹ç¼“å­˜çš„é…ç½®ï¼ˆå¦‚æ¸…é™¤ç­–ç•¥ã€å¯è¯»æˆ–å¯è¯»å†™ç­‰ï¼‰ï¼Œä¸èƒ½åº”ç”¨äºè‡ªå®šä¹‰ç¼“å­˜ã€‚ è¯·æ³¨æ„ï¼Œç¼“å­˜çš„é…ç½®å’Œç¼“å­˜å®ä¾‹ä¼šè¢«ç»‘å®šåˆ° SQL æ˜ å°„æ–‡ä»¶çš„å‘½åç©ºé—´ä¸­ã€‚ å› æ­¤ï¼ŒåŒä¸€å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰è¯­å¥å’Œç¼“å­˜å°†é€šè¿‡å‘½åç©ºé—´ç»‘å®šåœ¨ä¸€èµ·ã€‚ æ¯æ¡è¯­å¥å¯ä»¥è‡ªå®šä¹‰ä¸ç¼“å­˜äº¤äº’çš„æ–¹å¼ï¼Œæˆ–å°†å®ƒä»¬å®Œå…¨æ’é™¤äºç¼“å­˜ä¹‹å¤–ï¼Œè¿™å¯ä»¥é€šè¿‡åœ¨æ¯æ¡è¯­å¥ä¸Šä½¿ç”¨ä¸¤ä¸ªç®€å•å±æ€§æ¥è¾¾æˆã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯­å¥ä¼šè¿™æ ·æ¥é…ç½®ï¼š 1234&lt;select ... flushCache=&quot;false&quot; useCache=&quot;true&quot;/&gt;&lt;insert ... flushCache=&quot;true&quot;/&gt;&lt;update ... flushCache=&quot;true&quot;/&gt;&lt;delete ... flushCache=&quot;true&quot;/&gt; é‰´äºè¿™æ˜¯é»˜è®¤è¡Œä¸ºï¼Œæ˜¾ç„¶ä½ æ°¸è¿œä¸åº”è¯¥ä»¥è¿™æ ·çš„æ–¹å¼æ˜¾å¼é…ç½®ä¸€æ¡è¯­å¥ã€‚ä½†å¦‚æœä½ æƒ³æ”¹å˜é»˜è®¤çš„è¡Œä¸ºï¼Œåªéœ€è¦è®¾ç½® flushCache å’Œ useCache å±æ€§ã€‚æ¯”å¦‚ï¼ŒæŸäº›æƒ…å†µä¸‹ä½ å¯èƒ½å¸Œæœ›ç‰¹å®š select è¯­å¥çš„ç»“æœæ’é™¤äºç¼“å­˜ä¹‹å¤–ï¼Œæˆ–å¸Œæœ›ä¸€æ¡ select è¯­å¥æ¸…ç©ºç¼“å­˜ã€‚ç±»ä¼¼åœ°ï¼Œä½ å¯èƒ½å¸Œæœ›æŸäº› update è¯­å¥æ‰§è¡Œæ—¶ä¸è¦åˆ·æ–°ç¼“å­˜ã€‚ cache-refå›æƒ³ä¸€ä¸‹ä¸Šä¸€èŠ‚çš„å†…å®¹ï¼Œå¯¹æŸä¸€å‘½åç©ºé—´çš„è¯­å¥ï¼Œåªä¼šä½¿ç”¨è¯¥å‘½åç©ºé—´çš„ç¼“å­˜è¿›è¡Œç¼“å­˜æˆ–åˆ·æ–°ã€‚ ä½†ä½ å¯èƒ½ä¼šæƒ³è¦åœ¨å¤šä¸ªå‘½åç©ºé—´ä¸­å…±äº«ç›¸åŒçš„ç¼“å­˜é…ç½®å’Œå®ä¾‹ã€‚è¦å®ç°è¿™ç§éœ€æ±‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ cache-ref å…ƒç´ æ¥å¼•ç”¨å¦ä¸€ä¸ªç¼“å­˜ã€‚ 1&lt;cache-ref namespace=&quot;com.someone.application.data.SomeMapper&quot;/&gt;","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://guoshunfa.com/tags/MyBatis/"},{"name":"XML","slug":"XML","permalink":"https://guoshunfa.com/tags/XML/"}]},{"title":"MyBatis æ—¥å¿—","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Mybatis/MyBatisæ—¥å¿—","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.301Z","comments":true,"path":"2022/07/MyBatisæ—¥å¿—/","link":"","permalink":"https://guoshunfa.com/2022/07/MyBatis%E6%97%A5%E5%BF%97/","excerpt":"","text":"è½¬è½½è‡ªï¼šMybatis å®˜ç½‘(æ—¥å¿—) Mybatis é€šè¿‡ä½¿ç”¨å†…ç½®çš„æ—¥å¿—å·¥å‚æä¾›æ—¥å¿—åŠŸèƒ½ã€‚å†…ç½®æ—¥å¿—å·¥å‚å°†ä¼šæŠŠæ—¥å¿—å·¥ä½œå§”æ‰˜ç»™ä¸‹é¢çš„å®ç°ä¹‹ä¸€ï¼š SLF4J Apache Commons Logging Log4j 2 Log4j ï¼ˆ3.5.9 èµ·åºŸå¼ƒï¼‰ JDK logging MyBatis å†…ç½®æ—¥å¿—å·¥å‚åŸºäºè¿è¡Œæ—¶è‡ªçœæœºåˆ¶é€‰æ‹©åˆé€‚çš„æ—¥å¿—å·¥å…·ã€‚å®ƒä¼šä½¿ç”¨ç¬¬ä¸€ä¸ªæŸ¥æ‰¾å¾—åˆ°çš„å·¥å…·ï¼ˆæŒ‰ä¸Šæ–‡åˆ—ä¸¾çš„é¡ºåºæŸ¥æ‰¾ï¼‰ã€‚å¦‚æœä¸€ä¸ªéƒ½æœªæ‰¾åˆ°ï¼Œæ—¥å¿—åŠŸèƒ½å°±ä¼šè¢«ç¦ç”¨ã€‚ ä¸å°‘åº”ç”¨æœåŠ¡å™¨ï¼ˆå¦‚ Tomcat å’Œ WebShpereï¼‰çš„ç±»è·¯å¾„ä¸­å·²ç»åŒ…å« Commons Loggingï¼Œæ‰€ä»¥åœ¨è¿™ç§é…ç½®ç¯å¢ƒä¸‹çš„ MyBatis ä¼šæŠŠå®ƒä½œä¸ºæ—¥å¿—å·¥å…·ï¼Œè®°ä½è¿™ç‚¹éå¸¸é‡è¦ã€‚è¿™å°†æ„å‘³ç€ï¼Œåœ¨è¯¸å¦‚ WebSphere çš„ç¯å¢ƒä¸­ï¼Œå®ƒæä¾›äº† Commons Logging çš„ç§æœ‰å®ç°ï¼Œä½ çš„ Log4J é…ç½®å°†è¢«å¿½ç•¥ã€‚MyBatis å°†ä½ çš„ Log4J é…ç½®å¿½ç•¥æ‰æ˜¯ç›¸å½“ä»¤äººéƒé—·çš„ï¼ˆäº‹å®ä¸Šï¼Œæ­£æ˜¯å› ä¸ºåœ¨è¿™ç§é…ç½®ç¯å¢ƒä¸‹ï¼ŒMyBatis æ‰ä¼šé€‰æ‹©ä½¿ç”¨ Commons Logging è€Œä¸æ˜¯ Log4Jï¼‰ã€‚å¦‚æœä½ çš„åº”ç”¨éƒ¨ç½²åœ¨ä¸€ä¸ªç±»è·¯å¾„å·²ç»åŒ…å« Commons Logging çš„ç¯å¢ƒä¸­ï¼Œè€Œä½ åˆæƒ³ä½¿ç”¨å…¶å®ƒæ—¥å¿—å·¥å…·ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ MyBatis é…ç½®æ–‡ä»¶ mybatis-config.xml é‡Œé¢æ·»åŠ ä¸€é¡¹ setting æ¥é€‰æ‹©åˆ«çš„æ—¥å¿—å·¥å…·ã€‚ 1234567&lt;configuration&gt; &lt;settings&gt; ... &lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot;/&gt; ... &lt;/settings&gt;&lt;/configuration&gt; logImpl å¯é€‰çš„å€¼æœ‰ï¼šSLF4Jã€LOG4Jã€LOG4J2ã€JDK_LOGGINGã€COMMONS_LOGGINGã€STDOUT_LOGGINGã€NO_LOGGINGï¼Œæˆ–è€…æ˜¯å®ç°äº†æ¥å£ org.apache.ibatis.logging.Log çš„ï¼Œä¸”æ„é€ æ–¹æ³•æ˜¯ä»¥å­—ç¬¦ä¸²ä¸ºå‚æ•°çš„ç±»çš„å®Œå…¨é™å®šåã€‚ï¼ˆè¯‘è€…æ³¨ï¼šå¯ä»¥å‚è€ƒorg.apache.ibatis.logging.slf4j.Slf4jImpl.javaçš„å®ç°ï¼‰ ä½ ä¹Ÿå¯ä»¥è°ƒç”¨å¦‚ä¸‹ä»»ä¸€æ–¹æ³•æ¥ä½¿ç”¨æ—¥å¿—å·¥å…·ï¼š 12345org.apache.ibatis.logging.LogFactory.useSlf4jLogging();org.apache.ibatis.logging.LogFactory.useLog4JLogging();org.apache.ibatis.logging.LogFactory.useJdkLogging();org.apache.ibatis.logging.LogFactory.useCommonsLogging();org.apache.ibatis.logging.LogFactory.useStdOutLogging(); å¦‚æœä½ å†³å®šè¦è°ƒç”¨ä»¥ä¸ŠæŸä¸ªæ–¹æ³•ï¼Œè¯·åœ¨è°ƒç”¨å…¶å®ƒ MyBatis æ–¹æ³•ä¹‹å‰è°ƒç”¨å®ƒã€‚å¦å¤–ï¼Œä»…å½“è¿è¡Œæ—¶ç±»è·¯å¾„ä¸­å­˜åœ¨è¯¥æ—¥å¿—å·¥å…·æ—¶ï¼Œè°ƒç”¨ä¸è¯¥æ—¥å¿—å·¥å…·å¯¹åº”çš„æ–¹æ³•æ‰ä¼šç”Ÿæ•ˆï¼Œå¦åˆ™ MyBatis ä¸€æ¦‚å¿½ç•¥ã€‚å¦‚ä½ ç¯å¢ƒä¸­å¹¶ä¸å­˜åœ¨ Log4J2ï¼Œä½ å´è°ƒç”¨äº†ç›¸åº”çš„æ–¹æ³•ï¼ŒMyBatis å°±ä¼šå¿½ç•¥è¿™ä¸€è°ƒç”¨ï¼Œè½¬è€Œä»¥é»˜è®¤çš„æŸ¥æ‰¾é¡ºåºæŸ¥æ‰¾æ—¥å¿—å·¥å…·ã€‚ å…³äº SLF4Jã€Apache Commons Loggingã€Apache Log4J å’Œ JDK Logging çš„ API ä»‹ç»ä¸åœ¨æœ¬æ–‡æ¡£ä»‹ç»èŒƒå›´å†…ã€‚ä¸è¿‡ï¼Œä¸‹é¢çš„ä¾‹å­å¯ä»¥ä½œä¸ºä¸€ä¸ªå¿«é€Ÿå…¥é—¨ã€‚å…³äºè¿™äº›æ—¥å¿—æ¡†æ¶çš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š SLF4J Apache Commons Logging Apache Log4j 1.x and 2.x JDK Logging API æ—¥å¿—é…ç½®ä½ å¯ä»¥å¯¹åŒ…ã€æ˜ å°„ç±»çš„å…¨é™å®šåã€å‘½åç©ºé—´æˆ–å…¨é™å®šè¯­å¥åå¼€å¯æ—¥å¿—åŠŸèƒ½æ¥æŸ¥çœ‹ MyBatis çš„æ—¥å¿—è¯­å¥ã€‚ å†æ¬¡è¯´æ˜ä¸‹ï¼Œå…·ä½“æ€ä¹ˆåšï¼Œç”±ä½¿ç”¨çš„æ—¥å¿—å·¥å…·å†³å®šï¼Œè¿™é‡Œä»¥ SLF4J(Logback) ä¸ºä¾‹ã€‚é…ç½®æ—¥å¿—åŠŸèƒ½éå¸¸ç®€å•ï¼šæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®æ–‡ä»¶ï¼ˆå¦‚ logback.xmlï¼‰ï¼Œæœ‰æ—¶éœ€è¦æ·»åŠ  jar åŒ…ã€‚ä¸‹é¢çš„ä¾‹å­å°†ä½¿ç”¨ SLF4J(Logback) æ¥é…ç½®å®Œæ•´çš„æ—¥å¿—æœåŠ¡ï¼Œå…±ä¸¤ä¸ªæ­¥éª¤ï¼š æ­¥éª¤ 1ï¼šæ·»åŠ  SLF4J + Logback çš„ jar åŒ…å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ SLF4J(Logback)ï¼Œå°±è¦ç¡®ä¿å®ƒçš„ jar åŒ…åœ¨åº”ç”¨ä¸­æ˜¯å¯ç”¨çš„ã€‚è¦å¯ç”¨ SLF4J(Logback)ï¼Œåªè¦å°† jar åŒ…æ·»åŠ åˆ°åº”ç”¨çš„ç±»è·¯å¾„ä¸­å³å¯ã€‚SLF4J(Logback) çš„ jar åŒ…å¯ä»¥åœ¨ä¸Šé¢çš„é“¾æ¥ä¸­ä¸‹è½½ã€‚ å¯¹äº web åº”ç”¨æˆ–ä¼ä¸šçº§åº”ç”¨ï¼Œåˆ™éœ€è¦å°† logback-classic.jar, logback-core.jar and slf4j-api.jar æ·»åŠ åˆ° WEB-INF/lib ç›®å½•ä¸‹ï¼›å¯¹äºç‹¬ç«‹åº”ç”¨ï¼Œå¯ä»¥å°†å®ƒæ·»åŠ åˆ°JVM çš„ -classpath å¯åŠ¨å‚æ•°ä¸­ã€‚ å¦‚æœä½ ä½¿ç”¨ maven, ä½ å¯ä»¥é€šè¿‡åœ¨ pom.xml ä¸­æ·»åŠ ä¸‹é¢çš„ä¾èµ–æ¥ä¸‹è½½ jar æ–‡ä»¶ã€‚ 12345&lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-classic&lt;/artifactId&gt; &lt;version&gt;1.x.x&lt;/version&gt;&lt;/dependency&gt; æ­¥éª¤ 2ï¼šé…ç½® Logbacké…ç½® Logback æ¯”è¾ƒç®€å•ï¼Œå‡å¦‚ä½ éœ€è¦è®°å½•è¿™ä¸ªæ˜ å°„å™¨æ¥å£çš„æ—¥å¿—ï¼š 12345package org.mybatis.example;public interface BlogMapper &#123; @Select(&quot;SELECT * FROM blog WHERE id = #&#123;id&#125;&quot;) Blog selectBlog(int id);&#125; åœ¨åº”ç”¨çš„ç±»è·¯å¾„ä¸­åˆ›å»ºä¸€ä¸ªåç§°ä¸º logback.xml çš„æ–‡ä»¶ï¼Œæ–‡ä»¶çš„å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415161718&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE configuration&gt;&lt;configuration&gt; &lt;appender name=&quot;stdout&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt; &lt;encoder&gt; &lt;pattern&gt;%5level [%thread] - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;logger name=&quot;org.mybatis.example.BlogMapper&quot;&gt; &lt;level value=&quot;trace&quot;/&gt; &lt;/logger&gt; &lt;root level=&quot;error&quot;&gt; &lt;appender-ref ref=&quot;stdout&quot;/&gt; &lt;/root&gt;&lt;/configuration&gt; æ·»åŠ ä»¥ä¸Šé…ç½®åï¼ŒSLF4J(Logback) å°±ä¼šè®°å½• org.mybatis.example.BlogMapper çš„è¯¦ç»†æ‰§è¡Œæ“ä½œï¼Œä¸”ä»…è®°å½•åº”ç”¨ä¸­å…¶å®ƒç±»çš„é”™è¯¯ä¿¡æ¯ï¼ˆè‹¥æœ‰ï¼‰ã€‚ ä½ ä¹Ÿå¯ä»¥å°†æ—¥å¿—çš„è®°å½•æ–¹å¼ä»æ¥å£çº§åˆ«åˆ‡æ¢åˆ°è¯­å¥çº§åˆ«ï¼Œä»è€Œå®ç°æ›´ç»†ç²’åº¦çš„æ§åˆ¶ã€‚å¦‚ä¸‹é…ç½®åªå¯¹ selectBlog è¯­å¥è®°å½•æ—¥å¿—ï¼š 123&lt;logger name=&quot;org.mybatis.example.BlogMapper.selectBlog&quot;&gt; &lt;level value=&quot;trace&quot;/&gt;&lt;/logger&gt; ä¸æ­¤ç›¸å¯¹ï¼Œå¯ä»¥å¯¹ä¸€ç»„æ˜ å°„å™¨æ¥å£è®°å½•æ—¥å¿—ï¼Œåªè¦å¯¹æ˜ å°„å™¨æ¥å£æ‰€åœ¨çš„åŒ…å¼€å¯æ—¥å¿—åŠŸèƒ½å³å¯ï¼š 123&lt;logger name=&quot;org.mybatis.example&quot;&gt; &lt;level value=&quot;trace&quot;/&gt;&lt;/logger&gt; æŸäº›æŸ¥è¯¢å¯èƒ½ä¼šè¿”å›åºå¤§çš„ç»“æœé›†ï¼Œæ­¤æ—¶åªæƒ³è®°å½•å…¶æ‰§è¡Œçš„ SQL è¯­å¥è€Œä¸æƒ³è®°å½•ç»“æœè¯¥æ€ä¹ˆåŠï¼Ÿä¸ºæ­¤ï¼ŒMybatis ä¸­ SQL è¯­å¥çš„æ—¥å¿—çº§åˆ«è¢«è®¾ä¸ºDEBUGï¼ˆJDK æ—¥å¿—è®¾ä¸º FINEï¼‰ï¼Œç»“æœçš„æ—¥å¿—çº§åˆ«ä¸º TRACEï¼ˆJDK æ—¥å¿—è®¾ä¸º FINER)ã€‚æ‰€ä»¥ï¼Œåªè¦å°†æ—¥å¿—çº§åˆ«è°ƒæ•´ä¸º DEBUG å³å¯è¾¾åˆ°ç›®çš„ï¼š 123&lt;logger name=&quot;org.mybatis.example&quot;&gt; &lt;level value=&quot;debug&quot;/&gt;&lt;/logger&gt; è¦è®°å½•æ—¥å¿—çš„æ˜¯ç±»ä¼¼ä¸‹é¢çš„æ˜ å°„å™¨æ–‡ä»¶è€Œä¸æ˜¯æ˜ å°„å™¨æ¥å£åˆè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ 123456789&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;org.mybatis.example.BlogMapper&quot;&gt; &lt;select id=&quot;selectBlog&quot; resultType=&quot;Blog&quot;&gt; select * from Blog where id = #&#123;id&#125; &lt;/select&gt;&lt;/mapper&gt; å¦‚éœ€å¯¹ XML æ–‡ä»¶è®°å½•æ—¥å¿—ï¼Œåªè¦å¯¹å‘½åç©ºé—´å¢åŠ æ—¥å¿—è®°å½•åŠŸèƒ½å³å¯ï¼š 123&lt;logger name=&quot;org.mybatis.example.BlogMapper&quot;&gt; &lt;level value=&quot;trace&quot;/&gt;&lt;/logger&gt; è¦è®°å½•å…·ä½“è¯­å¥çš„æ—¥å¿—å¯ä»¥è¿™æ ·åšï¼š 123&lt;logger name=&quot;org.mybatis.example.BlogMapper.selectBlog&quot;&gt; &lt;level value=&quot;trace&quot;/&gt;&lt;/logger&gt; ä½ åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œä¸ºæ˜ å°„å™¨æ¥å£å’Œ XML æ–‡ä»¶æ·»åŠ æ—¥å¿—åŠŸèƒ½çš„è¯­å¥æ¯«æ— å·®åˆ«ã€‚ æ³¨æ„ å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ SLF4J æˆ– Log4j 2ï¼ŒMyBatis å°†ä»¥ MYBATIS è¿™ä¸ªå€¼è¿›è¡Œè°ƒç”¨ã€‚ é…ç½®æ–‡ä»¶ log4j.properties çš„ä½™ä¸‹å†…å®¹æ˜¯é’ˆå¯¹æ—¥å¿—è¾“å‡ºæºçš„ï¼Œè¿™ä¸€å†…å®¹å·²ç»è¶…å‡ºæœ¬æ–‡æ¡£èŒƒå›´ã€‚å…³äº Logback çš„æ›´å¤šå†…å®¹ï¼Œå¯ä»¥å‚è€ƒLogback çš„ç½‘ç«™ã€‚ä¸è¿‡ï¼Œä½ ä¹Ÿå¯ä»¥ç®€å•åœ°åšåšå®éªŒï¼Œçœ‹çœ‹ä¸åŒçš„é…ç½®ä¼šäº§ç”Ÿæ€æ ·çš„æ•ˆæœã€‚ Log4j 2 é…ç½®ç¤ºä¾‹123456789101112131415161718192021222324pom.xml&lt;dependency&gt; &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j-core&lt;/artifactId&gt; &lt;version&gt;2.x.x&lt;/version&gt;&lt;/dependency&gt;log4j2.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;Configuration xmlns=&quot;http://logging.apache.org/log4j/2.0/config&quot;&gt; &lt;Appenders&gt; &lt;Console name=&quot;stdout&quot; target=&quot;SYSTEM_OUT&quot;&gt; &lt;PatternLayout pattern=&quot;%5level [%t] - %msg%n&quot;/&gt; &lt;/Console&gt; &lt;/Appenders&gt; &lt;Loggers&gt; &lt;Logger name=&quot;org.mybatis.example.BlogMapper&quot; level=&quot;trace&quot;/&gt; &lt;Root level=&quot;error&quot; &gt; &lt;AppenderRef ref=&quot;stdout&quot;/&gt; &lt;/Root&gt; &lt;/Loggers&gt;&lt;/Configuration&gt; Log4j é…ç½®ç¤ºä¾‹1234567891011121314pom.xml&lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.17&lt;/version&gt;&lt;/dependency&gt;log4j.propertieslog4j.rootLogger=ERROR, stdoutlog4j.logger.org.mybatis.example.BlogMapper=TRACElog4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.layout=org.apache.log4j.PatternLayoutlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n JDK logging é…ç½®ç¤ºä¾‹123456789logging.propertieshandlers=java.util.logging.ConsoleHandler.level=SEVEREorg.mybatis.example.BlogMapper=FINERjava.util.logging.ConsoleHandler.level=ALLjava.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatterjava.util.logging.SimpleFormatter.format=%1$tT.%1$tL %4$s %3$s - %5$s%6$s%n","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://guoshunfa.com/tags/MyBatis/"}]},{"title":"SpringBootæ¡†æ¶ å¯åŠ¨æ—¶è¾“å‡ºæ–‡æ¡ˆ","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringBootæ¡†æ¶-å¯åŠ¨æ—¶è¾“å‡ºæ–‡æ¡ˆ","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.308Z","comments":true,"path":"2022/07/SpringBootæ¡†æ¶-å¯åŠ¨æ—¶è¾“å‡ºæ–‡æ¡ˆ/","link":"","permalink":"https://guoshunfa.com/2022/07/SpringBoot%E6%A1%86%E6%9E%B6-%E5%90%AF%E5%8A%A8%E6%97%B6%E8%BE%93%E5%87%BA%E6%96%87%E6%A1%88/","excerpt":"","text":"SpringBootæ¡†æ¶ - å¯åŠ¨æ—¶è¾“å‡ºæ–‡æ¡ˆSpringBootåœ¨å¯åŠ¨æ—¶ï¼Œæ§åˆ¶å°ä¼šç”Ÿæˆä¸€ä¸ªé»˜è®¤æ–‡æ¡ˆã€‚å…¶å®æ˜¯å¯ä»¥æ ¹æ®ä¸ªäººéœ€è¦è¿›è¡Œè°ƒæ•´çš„ã€‚ ä¸‹é¢æ˜¯æˆ‘è°ƒæ•´åæ˜¾ç¤ºçš„å†…å®¹ã€‚ è°ƒæ•´çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸ªæœ€ç®€å•çš„æ–¹æ³•ã€‚ åœ¨application.propertiesåŒç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼šbanner.txtã€‚ å°†ä½ æƒ³è¦è¾“å‡ºçš„æ–‡æ¡ˆï¼ŒåŠ å…¥åˆ°banner.txtä¸­ã€‚ è¿™é‡Œæä¾›ä¸€ä¸ªçº¿ä¸Šbannerç”Ÿæˆç½‘ç«™ï¼šhttps://devops.datenkollektiv.de/banner.txt/index.html å°†ä¸‹é¢è‡ªåŠ¨ç”Ÿæˆçš„æ–‡æœ¬ï¼Œcvåˆ°banner.txtæ–‡ä»¶ä¸­ï¼Œé‡å¯é¡¹ç›®å°±å¯ä»¥çœ‹åˆ°å˜åŠ¨ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"}]},{"title":"SpringBootæ¡†æ¶ åŸºç¡€çŸ¥è¯†","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringBootæ¡†æ¶-åŸºç¡€çŸ¥è¯†","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.308Z","comments":true,"path":"2022/07/SpringBootæ¡†æ¶-åŸºç¡€çŸ¥è¯†/","link":"","permalink":"https://guoshunfa.com/2022/07/SpringBoot%E6%A1%86%E6%9E%B6-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/","excerpt":"","text":"SpringBoot é¡¹ç›®æ­å»ºä»‹ç»çˆ¶å­é¡¹ç›®æ­å»ºæ­å»ºæµç¨‹ åˆ›å»ºå¤šä¸ªspringbooté¡¹ç›® é…ç½®çˆ¶é¡¹ç›®pom 123456789101112131415161718&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&lt;parent&gt;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&lt;version&gt;2.3.2.RELEASE&lt;/version&gt;&lt;relativePath/&gt; &lt;/parent&gt;&lt;!--åŒ…å--&gt;&lt;groupId&gt;com.gsf&lt;/groupId&gt;&lt;!--é¡¹ç›®åç§°--&gt;&lt;artifactId&gt;gsf-parent&lt;/artifactId&gt;&lt;!--ç‰ˆæœ¬--&gt;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&lt;!--æ‰“åŒ…æ–¹å¼ï¼Œpomä¸ºçˆ¶é¡¹ç›®--&gt;&lt;packaging&gt;pom&lt;/packaging&gt;&lt;properties&gt;&lt;java.version&gt;1.8&lt;/java.version&gt;&lt;/properties&gt; é…ç½®å­é¡¹ç›®pom 12345678910111213141516171819&lt;!--ç»§æ‰¿çˆ¶çº§--&gt;&lt;parent&gt; &lt;!--çˆ¶é¡¹ç›®å--&gt;&lt;artifactId&gt;gsf-parent&lt;/artifactId&gt; &lt;!--çˆ¶é¡¹ç›®åŒ…å--&gt;&lt;groupId&gt;com.gsf&lt;/groupId&gt; &lt;!--çˆ¶é¡¹ç›®ç‰ˆæœ¬å·--&gt;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&lt;/parent&gt;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&lt;!--æŒ‡å®šæ‰“åŒ…ç±»å‹--&gt;&lt;packaging&gt;jar&lt;/packaging&gt;&lt;!--é¡¹ç›®åç§°--&gt;&lt;artifactId&gt;gsf-run&lt;/artifactId&gt;&lt;!--é¡¹ç›®åŒ…å--&gt;&lt;groupId&gt;com.gsf&lt;/groupId&gt;&lt;!--ç‰ˆæœ¬å·--&gt;&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;&lt;name&gt;gsf-run&lt;/name&gt; æè¿° çˆ¶é¡¹ç›®æ‰€å¼•å…¥çš„ä¾èµ–ï¼Œå­é¡¹ç›®å¯ä»¥ä½¿ç”¨ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"}]},{"title":"SpringBootæ¡†æ¶ å®˜æ–¹ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringBootæ¡†æ¶-å®˜æ–¹ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.308Z","comments":true,"path":"2022/07/SpringBootæ¡†æ¶-å®˜æ–¹ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/SpringBoot%E6%A1%86%E6%9E%B6-%E5%AE%98%E6%96%B9%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"SpringBoot é¡¹ç›®å®˜ç½‘ | å®‰è£… Spring Boot CLI æ¦‚è¿°Spring Boot å¯ä»¥è½»æ¾åˆ›å»ºç‹¬ç«‹çš„ã€ç”Ÿäº§çº§çš„åŸºäº Spring çš„åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥â€œç›´æ¥è¿è¡Œâ€ã€‚ æˆ‘ä»¬å¯¹ Spring å¹³å°å’Œç¬¬ä¸‰æ–¹åº“æœ‰è‡ªå·±çš„çœ‹æ³•ï¼Œå› æ­¤æ‚¨å¯ä»¥è½»æ¾ä¸Šæ‰‹ã€‚å¤§å¤šæ•° Spring Boot åº”ç”¨ç¨‹åºéœ€è¦æœ€å°‘çš„ Spring é…ç½®ã€‚ å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾æœ‰å…³ç‰¹å®šç‰ˆæœ¬çš„ä¿¡æ¯ï¼Œæˆ–æœ‰å…³å¦‚ä½•ä»æ—©æœŸç‰ˆæœ¬å‡çº§çš„è¯´æ˜ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬ wiki ä¸Šçš„é¡¹ç›®å‘è¡Œè¯´æ˜éƒ¨åˆ†ã€‚ ç‰¹å¾ åˆ›å»ºç‹¬ç«‹çš„ Spring åº”ç”¨ç¨‹åº ç›´æ¥åµŒå…¥Tomcatã€Jettyæˆ–Undertowï¼ˆæ— éœ€éƒ¨ç½²WARæ–‡ä»¶ï¼‰ æä¾›è‡ªä»¥ä¸ºæ˜¯çš„â€œå…¥é—¨â€ä¾èµ–é¡¹ä»¥ç®€åŒ–æ‚¨çš„æ„å»ºé…ç½® å°½å¯èƒ½è‡ªåŠ¨é…ç½® Spring å’Œ 3rd æ–¹åº“ æä¾›ç”Ÿäº§å°±ç»ªçš„åŠŸèƒ½ï¼Œä¾‹å¦‚æŒ‡æ ‡ã€å¥åº·æ£€æŸ¥å’Œå¤–éƒ¨åŒ–é…ç½® ç»å¯¹æ²¡æœ‰ä»£ç ç”Ÿæˆï¼Œä¹Ÿä¸éœ€è¦ XML é…ç½® å…¥é—¨ è¶…çº§å¿«â€”â€”è¯•è¯•å¿«é€Ÿå…¥é—¨æŒ‡å—ã€‚ æ›´é€šç”¨â€”â€”å°è¯•ä½¿ç”¨ Spring Boot æ„å»ºåº”ç”¨ç¨‹åº æ›´å…·ä½“â€”â€”å°è¯•æ„å»º RESTful Web æœåŠ¡ã€‚ æˆ–è€…åœ¨æŒ‡å—ä¸»é¡µä¸Šæœç´¢æˆ‘ä»¬æ‰€æœ‰çš„æŒ‡å—ã€‚ è®²åº§å’Œè§†é¢‘ è¿™æ˜¯ä¸€ç§é­”æ³•ï¼šåœ¨ Spring Boot çš„å¹•å Spring Boot 2.0 çš„æ–°ç‰¹æ€§ ä»‹ç» Spring Boot 2.0 ç½‘ç»œç ”è®¨ä¼š ä½¿ç”¨ Spring Boot è¿›è¡Œæµ‹è¯•é©±åŠ¨å¼€å‘ Spring Boot 2.0 ä»é›¶åˆ°è‹±é›„ æ‚¨è¿˜å¯ä»¥åŠ å…¥Gitter ä¸Šçš„ Spring Boot ç¤¾åŒºï¼ å­¦ä¹  ç‰ˆæœ¬ å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ 2.7.5 å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ å¿«é€Ÿå¯åŠ¨æ‚¨çš„é¡¹ç›®ä½¿ç”¨Spring Initializr å¼•å¯¼æ‚¨çš„åº”ç”¨ç¨‹åº ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"}]},{"title":"MyBatis é…ç½®","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Mybatis/MyBatisé…ç½®","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.301Z","comments":true,"path":"2022/07/MyBatisé…ç½®/","link":"","permalink":"https://guoshunfa.com/2022/07/MyBatis%E9%85%8D%E7%BD%AE/","excerpt":"","text":"è½¬è½½è‡ª: MyBatis å®˜ç½‘(XML é…ç½®) MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚ é…ç½®æ–‡æ¡£çš„é¡¶å±‚ç»“æ„å¦‚ä¸‹ï¼š configurationï¼ˆé…ç½®ï¼‰ propertiesï¼ˆå±æ€§ï¼‰ settingsï¼ˆè®¾ç½®ï¼‰ typeAliasesï¼ˆç±»å‹åˆ«åï¼‰ typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰ objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰ pluginsï¼ˆæ’ä»¶ï¼‰ environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰ environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰ transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰ dataSourceï¼ˆæ•°æ®æºï¼‰ databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰ mappersï¼ˆæ˜ å°„å™¨ï¼‰ å±æ€§ï¼ˆpropertiesï¼‰è¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œé…ç½®ï¼Œå¹¶å¯ä»¥è¿›è¡ŒåŠ¨æ€æ›¿æ¢ã€‚ä½ æ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®è¿™äº›å±æ€§ï¼Œä¹Ÿå¯ä»¥åœ¨ properties å…ƒç´ çš„å­å…ƒç´ ä¸­è®¾ç½®ã€‚ä¾‹å¦‚ï¼š 1234&lt;properties resource=&quot;org/mybatis/example/config.properties&quot;&gt; &lt;property name=&quot;username&quot; value=&quot;dev_user&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;F2Fa3!33TYyg&quot;/&gt;&lt;/properties&gt; è®¾ç½®å¥½çš„å±æ€§å¯ä»¥åœ¨æ•´ä¸ªé…ç½®æ–‡ä»¶ä¸­ç”¨æ¥æ›¿æ¢éœ€è¦åŠ¨æ€é…ç½®çš„å±æ€§å€¼ã€‚æ¯”å¦‚: 123456&lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt;&lt;/dataSource&gt; è¿™ä¸ªä¾‹å­ä¸­çš„ username å’Œ password å°†ä¼šç”± properties å…ƒç´ ä¸­è®¾ç½®çš„ç›¸åº”å€¼æ¥æ›¿æ¢ã€‚ driver å’Œ url å±æ€§å°†ä¼šç”± config.properties æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼æ¥æ›¿æ¢ã€‚è¿™æ ·å°±ä¸ºé…ç½®æä¾›äº†è¯¸å¤šçµæ´»é€‰æ‹©ã€‚ ä¹Ÿå¯ä»¥åœ¨ SqlSessionFactoryBuilder.build() æ–¹æ³•ä¸­ä¼ å…¥å±æ€§å€¼ã€‚ä¾‹å¦‚ï¼š 12345SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(reader, props);// ... æˆ–è€… ...SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(reader, environment, props); å¦‚æœä¸€ä¸ªå±æ€§åœ¨ä¸åªä¸€ä¸ªåœ°æ–¹è¿›è¡Œäº†é…ç½®ï¼Œé‚£ä¹ˆï¼ŒMyBatis å°†æŒ‰ç…§ä¸‹é¢çš„é¡ºåºæ¥åŠ è½½ï¼š é¦–å…ˆè¯»å–åœ¨ properties å…ƒç´ ä½“å†…æŒ‡å®šçš„å±æ€§ã€‚ ç„¶åæ ¹æ® properties å…ƒç´ ä¸­çš„ resource å±æ€§è¯»å–ç±»è·¯å¾„ä¸‹å±æ€§æ–‡ä»¶ï¼Œæˆ–æ ¹æ® url å±æ€§æŒ‡å®šçš„è·¯å¾„è¯»å–å±æ€§æ–‡ä»¶ï¼Œå¹¶è¦†ç›–ä¹‹å‰è¯»å–è¿‡çš„åŒåå±æ€§ã€‚ æœ€åè¯»å–ä½œä¸ºæ–¹æ³•å‚æ•°ä¼ é€’çš„å±æ€§ï¼Œå¹¶è¦†ç›–ä¹‹å‰è¯»å–è¿‡çš„åŒåå±æ€§ã€‚ å› æ­¤ï¼Œé€šè¿‡æ–¹æ³•å‚æ•°ä¼ é€’çš„å±æ€§å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§ï¼Œresource&#x2F;url å±æ€§ä¸­æŒ‡å®šçš„é…ç½®æ–‡ä»¶æ¬¡ä¹‹ï¼Œæœ€ä½ä¼˜å…ˆçº§çš„åˆ™æ˜¯ properties å…ƒç´ ä¸­æŒ‡å®šçš„å±æ€§ã€‚ ä» MyBatis 3.4.2 å¼€å§‹ï¼Œä½ å¯ä»¥ä¸ºå ä½ç¬¦æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼š 1234&lt;dataSource type=&quot;POOLED&quot;&gt; &lt;!-- ... --&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;username:ut_user&#125;&quot;/&gt; &lt;!-- å¦‚æœå±æ€§ &#x27;username&#x27; æ²¡æœ‰è¢«é…ç½®ï¼Œ&#x27;username&#x27; å±æ€§çš„å€¼å°†ä¸º &#x27;ut_user&#x27; --&gt;&lt;/dataSource&gt; è¿™ä¸ªç‰¹æ€§é»˜è®¤æ˜¯å…³é—­çš„ã€‚è¦å¯ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œéœ€è¦æ·»åŠ ä¸€ä¸ªç‰¹å®šçš„å±æ€§æ¥å¼€å¯è¿™ä¸ªç‰¹æ€§ã€‚ä¾‹å¦‚ï¼š 1234&lt;properties resource=&quot;org/mybatis/example/config.properties&quot;&gt; &lt;!-- ... --&gt; &lt;property name=&quot;org.apache.ibatis.parsing.PropertyParser.enable-default-value&quot; value=&quot;true&quot;/&gt; &lt;!-- å¯ç”¨é»˜è®¤å€¼ç‰¹æ€§ --&gt;&lt;/properties&gt; æç¤º å¦‚æœä½ åœ¨å±æ€§åä¸­ä½¿ç”¨äº† &quot;:&quot; å­—ç¬¦ï¼ˆå¦‚ï¼šdb:usernameï¼‰ï¼Œæˆ–è€…åœ¨ SQL æ˜ å°„ä¸­ä½¿ç”¨äº† OGNL è¡¨è¾¾å¼çš„ä¸‰å…ƒè¿ç®—ç¬¦ï¼ˆå¦‚ï¼š $&#123;tableName != null ? tableName : &#39;global_constants&#39;&#125;ï¼‰ï¼Œå°±éœ€è¦è®¾ç½®ç‰¹å®šçš„å±æ€§æ¥ä¿®æ”¹åˆ†éš”å±æ€§åå’Œé»˜è®¤å€¼çš„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼š 12345678&lt;properties resource=&quot;org/mybatis/example/config.properties&quot;&gt; &lt;!-- ... --&gt; &lt;property name=&quot;org.apache.ibatis.parsing.PropertyParser.default-value-separator&quot; value=&quot;?:&quot;/&gt; &lt;!-- ä¿®æ”¹é»˜è®¤å€¼çš„åˆ†éš”ç¬¦ --&gt;&lt;/properties&gt;&lt;dataSource type=&quot;POOLED&quot;&gt; &lt;!-- ... --&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;db:username?:ut_user&#125;&quot;/&gt;&lt;/dataSource&gt; è®¾ç½®ï¼ˆsettingsï¼‰è¿™æ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜ MyBatis çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚ ä¸‹è¡¨æè¿°äº†è®¾ç½®ä¸­å„é¡¹è®¾ç½®çš„å«ä¹‰ã€é»˜è®¤å€¼ç­‰ã€‚ è®¾ç½®å æè¿° æœ‰æ•ˆå€¼ é»˜è®¤å€¼ cacheEnabled å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚ true | false true lazyLoadingEnabled å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½® fetchType å±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚ true | false false aggressiveLazyLoading å¼€å¯æ—¶ï¼Œä»»ä¸€æ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šåŠ è½½è¯¥å¯¹è±¡çš„æ‰€æœ‰å»¶è¿ŸåŠ è½½å±æ€§ã€‚ å¦åˆ™ï¼Œæ¯ä¸ªå»¶è¿ŸåŠ è½½å±æ€§ä¼šæŒ‰éœ€åŠ è½½ï¼ˆå‚è€ƒ lazyLoadTriggerMethods)ã€‚ true | false false ï¼ˆåœ¨ 3.4.1 åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­é»˜è®¤ä¸º trueï¼‰ multipleResultSetsEnabled æ˜¯å¦å…è®¸å•ä¸ªè¯­å¥è¿”å›å¤šç»“æœé›†ï¼ˆéœ€è¦æ•°æ®åº“é©±åŠ¨æ”¯æŒï¼‰ã€‚ true | false true useColumnLabel ä½¿ç”¨åˆ—æ ‡ç­¾ä»£æ›¿åˆ—åã€‚å®é™…è¡¨ç°ä¾èµ–äºæ•°æ®åº“é©±åŠ¨ï¼Œå…·ä½“å¯å‚è€ƒæ•°æ®åº“é©±åŠ¨çš„ç›¸å…³æ–‡æ¡£ï¼Œæˆ–é€šè¿‡å¯¹æ¯”æµ‹è¯•æ¥è§‚å¯Ÿã€‚ true | false true useGeneratedKeys å…è®¸ JDBC æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®ï¼Œéœ€è¦æ•°æ®åº“é©±åŠ¨æ”¯æŒã€‚å¦‚æœè®¾ç½®ä¸º trueï¼Œå°†å¼ºåˆ¶ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆä¸»é”®ã€‚å°½ç®¡ä¸€äº›æ•°æ®åº“é©±åŠ¨ä¸æ”¯æŒæ­¤ç‰¹æ€§ï¼Œä½†ä»å¯æ­£å¸¸å·¥ä½œï¼ˆå¦‚ Derbyï¼‰ã€‚ true | false False autoMappingBehavior æŒ‡å®š MyBatis åº”å¦‚ä½•è‡ªåŠ¨æ˜ å°„åˆ—åˆ°å­—æ®µæˆ–å±æ€§ã€‚ NONE è¡¨ç¤ºå…³é—­è‡ªåŠ¨æ˜ å°„ï¼›PARTIAL åªä¼šè‡ªåŠ¨æ˜ å°„æ²¡æœ‰å®šä¹‰åµŒå¥—ç»“æœæ˜ å°„çš„å­—æ®µã€‚ FULL ä¼šè‡ªåŠ¨æ˜ å°„ä»»ä½•å¤æ‚çš„ç»“æœé›†ï¼ˆæ— è®ºæ˜¯å¦åµŒå¥—ï¼‰ã€‚ NONE, PARTIAL, FULL PARTIAL autoMappingUnknownColumnBehavior æŒ‡å®šå‘ç°è‡ªåŠ¨æ˜ å°„ç›®æ ‡æœªçŸ¥åˆ—ï¼ˆæˆ–æœªçŸ¥å±æ€§ç±»å‹ï¼‰çš„è¡Œä¸ºã€‚NONE: ä¸åšä»»ä½•ååº”WARNING: è¾“å‡ºè­¦å‘Šæ—¥å¿—ï¼ˆ&#39;org.apache.ibatis.session.AutoMappingUnknownColumnBehavior&#39;çš„æ—¥å¿—ç­‰çº§å¿…é¡»è®¾ç½®ä¸º WARNï¼‰FAILING: æ˜ å°„å¤±è´¥ (æŠ›å‡º SqlSessionException) NONE, WARNING, FAILING NONE defaultExecutorType é…ç½®é»˜è®¤çš„æ‰§è¡Œå™¨ã€‚SIMPLE å°±æ˜¯æ™®é€šçš„æ‰§è¡Œå™¨ï¼›REUSE æ‰§è¡Œå™¨ä¼šé‡ç”¨é¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰ï¼› BATCH æ‰§è¡Œå™¨ä¸ä»…é‡ç”¨è¯­å¥è¿˜ä¼šæ‰§è¡Œæ‰¹é‡æ›´æ–°ã€‚ SIMPLE REUSE BATCH SIMPLE defaultStatementTimeout è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå®ƒå†³å®šæ•°æ®åº“é©±åŠ¨ç­‰å¾…æ•°æ®åº“å“åº”çš„ç§’æ•°ã€‚ ä»»æ„æ­£æ•´æ•° æœªè®¾ç½® (null) defaultFetchSize ä¸ºé©±åŠ¨çš„ç»“æœé›†è·å–æ•°é‡ï¼ˆfetchSizeï¼‰è®¾ç½®ä¸€ä¸ªå»ºè®®å€¼ã€‚æ­¤å‚æ•°åªå¯ä»¥åœ¨æŸ¥è¯¢è®¾ç½®ä¸­è¢«è¦†ç›–ã€‚ ä»»æ„æ­£æ•´æ•° æœªè®¾ç½® (null) defaultResultSetType æŒ‡å®šè¯­å¥é»˜è®¤çš„æ»šåŠ¨ç­–ç•¥ã€‚ï¼ˆæ–°å¢äº 3.5.2ï¼‰ FORWARD_ONLY | SCROLL_SENSITIVE | SCROLL_INSENSITIVE | DEFAULTï¼ˆç­‰åŒäºæœªè®¾ç½®ï¼‰ æœªè®¾ç½® (null) safeRowBoundsEnabled æ˜¯å¦å…è®¸åœ¨åµŒå¥—è¯­å¥ä¸­ä½¿ç”¨åˆ†é¡µï¼ˆRowBoundsï¼‰ã€‚å¦‚æœå…è®¸ä½¿ç”¨åˆ™è®¾ç½®ä¸º falseã€‚ true | false False safeResultHandlerEnabled æ˜¯å¦å…è®¸åœ¨åµŒå¥—è¯­å¥ä¸­ä½¿ç”¨ç»“æœå¤„ç†å™¨ï¼ˆResultHandlerï¼‰ã€‚å¦‚æœå…è®¸ä½¿ç”¨åˆ™è®¾ç½®ä¸º falseã€‚ true | false True mapUnderscoreToCamelCase æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼Œå³ä»ç»å…¸æ•°æ®åº“åˆ—å A_COLUMN æ˜ å°„åˆ°ç»å…¸ Java å±æ€§å aColumnã€‚ true | false False localCacheScope MyBatis åˆ©ç”¨æœ¬åœ°ç¼“å­˜æœºåˆ¶ï¼ˆLocal Cacheï¼‰é˜²æ­¢å¾ªç¯å¼•ç”¨å’ŒåŠ é€Ÿé‡å¤çš„åµŒå¥—æŸ¥è¯¢ã€‚ é»˜è®¤å€¼ä¸º SESSIONï¼Œä¼šç¼“å­˜ä¸€ä¸ªä¼šè¯ä¸­æ‰§è¡Œçš„æ‰€æœ‰æŸ¥è¯¢ã€‚ è‹¥è®¾ç½®å€¼ä¸º STATEMENTï¼Œæœ¬åœ°ç¼“å­˜å°†ä»…ç”¨äºæ‰§è¡Œè¯­å¥ï¼Œå¯¹ç›¸åŒ SqlSession çš„ä¸åŒæŸ¥è¯¢å°†ä¸ä¼šè¿›è¡Œç¼“å­˜ã€‚ SESSION | STATEMENT SESSION jdbcTypeForNull å½“æ²¡æœ‰ä¸ºå‚æ•°æŒ‡å®šç‰¹å®šçš„ JDBC ç±»å‹æ—¶ï¼Œç©ºå€¼çš„é»˜è®¤ JDBC ç±»å‹ã€‚ æŸäº›æ•°æ®åº“é©±åŠ¨éœ€è¦æŒ‡å®šåˆ—çš„ JDBC ç±»å‹ï¼Œå¤šæ•°æƒ…å†µç›´æ¥ç”¨ä¸€èˆ¬ç±»å‹å³å¯ï¼Œæ¯”å¦‚ NULLã€VARCHAR æˆ– OTHERã€‚ JdbcType å¸¸é‡ï¼Œå¸¸ç”¨å€¼ï¼šNULLã€VARCHAR æˆ– OTHERã€‚ OTHER lazyLoadTriggerMethods æŒ‡å®šå¯¹è±¡çš„å“ªäº›æ–¹æ³•è§¦å‘ä¸€æ¬¡å»¶è¿ŸåŠ è½½ã€‚ ç”¨é€—å·åˆ†éš”çš„æ–¹æ³•åˆ—è¡¨ã€‚ equals,clone,hashCode,toString defaultScriptingLanguage æŒ‡å®šåŠ¨æ€ SQL ç”Ÿæˆä½¿ç”¨çš„é»˜è®¤è„šæœ¬è¯­è¨€ã€‚ ä¸€ä¸ªç±»å‹åˆ«åæˆ–å…¨é™å®šç±»åã€‚ org.apache.ibatis.scripting.xmltags.XMLLanguageDriver defaultEnumTypeHandler æŒ‡å®š Enum ä½¿ç”¨çš„é»˜è®¤ TypeHandler ã€‚ï¼ˆæ–°å¢äº 3.4.5ï¼‰ ä¸€ä¸ªç±»å‹åˆ«åæˆ–å…¨é™å®šç±»åã€‚ org.apache.ibatis.type.EnumTypeHandler callSettersOnNulls æŒ‡å®šå½“ç»“æœé›†ä¸­å€¼ä¸º null çš„æ—¶å€™æ˜¯å¦è°ƒç”¨æ˜ å°„å¯¹è±¡çš„ setterï¼ˆmap å¯¹è±¡æ—¶ä¸º putï¼‰æ–¹æ³•ï¼Œè¿™åœ¨ä¾èµ–äº Map.keySet() æˆ– null å€¼è¿›è¡Œåˆå§‹åŒ–æ—¶æ¯”è¾ƒæœ‰ç”¨ã€‚æ³¨æ„åŸºæœ¬ç±»å‹ï¼ˆintã€boolean ç­‰ï¼‰æ˜¯ä¸èƒ½è®¾ç½®æˆ null çš„ã€‚ true | false false returnInstanceForEmptyRow å½“è¿”å›è¡Œçš„æ‰€æœ‰åˆ—éƒ½æ˜¯ç©ºæ—¶ï¼ŒMyBatisé»˜è®¤è¿”å› nullã€‚ å½“å¼€å¯è¿™ä¸ªè®¾ç½®æ—¶ï¼ŒMyBatisä¼šè¿”å›ä¸€ä¸ªç©ºå®ä¾‹ã€‚ è¯·æ³¨æ„ï¼Œå®ƒä¹Ÿé€‚ç”¨äºåµŒå¥—çš„ç»“æœé›†ï¼ˆå¦‚é›†åˆæˆ–å…³è”ï¼‰ã€‚ï¼ˆæ–°å¢äº 3.4.2ï¼‰ true | false false logPrefix æŒ‡å®š MyBatis å¢åŠ åˆ°æ—¥å¿—åç§°çš„å‰ç¼€ã€‚ ä»»ä½•å­—ç¬¦ä¸² æœªè®¾ç½® logImpl æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚ SLF4J | LOG4Jï¼ˆ3.5.9 èµ·åºŸå¼ƒï¼‰ | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING æœªè®¾ç½® proxyFactory æŒ‡å®š Mybatis åˆ›å»ºå¯å»¶è¿ŸåŠ è½½å¯¹è±¡æ‰€ç”¨åˆ°çš„ä»£ç†å·¥å…·ã€‚ CGLIB ï¼ˆ3.5.10 èµ·åºŸå¼ƒï¼‰ | JAVASSIST JAVASSIST ï¼ˆMyBatis 3.3 ä»¥ä¸Šï¼‰ vfsImpl æŒ‡å®š VFS çš„å®ç° è‡ªå®šä¹‰ VFS çš„å®ç°çš„ç±»å…¨é™å®šåï¼Œä»¥é€—å·åˆ†éš”ã€‚ æœªè®¾ç½® useActualParamName å…è®¸ä½¿ç”¨æ–¹æ³•ç­¾åä¸­çš„åç§°ä½œä¸ºè¯­å¥å‚æ•°åç§°ã€‚ ä¸ºäº†ä½¿ç”¨è¯¥ç‰¹æ€§ï¼Œä½ çš„é¡¹ç›®å¿…é¡»é‡‡ç”¨ Java 8 ç¼–è¯‘ï¼Œå¹¶ä¸”åŠ ä¸Š -parameters é€‰é¡¹ã€‚ï¼ˆæ–°å¢äº 3.4.1ï¼‰ true | false true configurationFactory æŒ‡å®šä¸€ä¸ªæä¾› Configuration å®ä¾‹çš„ç±»ã€‚ è¿™ä¸ªè¢«è¿”å›çš„ Configuration å®ä¾‹ç”¨æ¥åŠ è½½è¢«ååºåˆ—åŒ–å¯¹è±¡çš„å»¶è¿ŸåŠ è½½å±æ€§å€¼ã€‚ è¿™ä¸ªç±»å¿…é¡»åŒ…å«ä¸€ä¸ªç­¾åä¸ºstatic Configuration getConfiguration() çš„æ–¹æ³•ã€‚ï¼ˆæ–°å¢äº 3.2.3ï¼‰ ä¸€ä¸ªç±»å‹åˆ«åæˆ–å®Œå…¨é™å®šç±»åã€‚ æœªè®¾ç½® shrinkWhitespacesInSql ä»SQLä¸­åˆ é™¤å¤šä½™çš„ç©ºæ ¼å­—ç¬¦ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¹Ÿä¼šå½±å“SQLä¸­çš„æ–‡å­—å­—ç¬¦ä¸²ã€‚ (æ–°å¢äº 3.5.5) true | false false defaultSqlProviderType æŒ‡å®šä¸€ä¸ªæ‹¥æœ‰ provider æ–¹æ³•çš„ sql provider ç±» ï¼ˆæ–°å¢äº 3.5.6ï¼‰. è¿™ä¸ªç±»é€‚ç”¨äºæŒ‡å®š sql provider æ³¨è§£ä¸Šçš„typeï¼ˆæˆ– valueï¼‰ å±æ€§ï¼ˆå½“è¿™äº›å±æ€§åœ¨æ³¨è§£ä¸­è¢«å¿½ç•¥æ—¶ï¼‰ã€‚ (e.g. @SelectProvider) ç±»å‹åˆ«åæˆ–è€…å…¨é™å®šå æœªè®¾ç½® nullableOnForEach ä¸º â€˜foreachâ€™ æ ‡ç­¾çš„ â€˜nullableâ€™ å±æ€§æŒ‡å®šé»˜è®¤å€¼ã€‚ï¼ˆæ–°å¢äº 3.5.9ï¼‰ true | false false argNameBasedConstructorAutoMapping å½“åº”ç”¨æ„é€ å™¨è‡ªåŠ¨æ˜ å°„æ—¶ï¼Œå‚æ•°åç§°è¢«ç”¨æ¥æœç´¢è¦æ˜ å°„çš„åˆ—ï¼Œè€Œä¸å†ä¾èµ–åˆ—çš„é¡ºåºã€‚ï¼ˆæ–°å¢äº 3.5.10ï¼‰ true | false false ä¸€ä¸ªé…ç½®å®Œæ•´çš„ settings å…ƒç´ çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617&lt;settings&gt; &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt; &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt; &lt;setting name=&quot;multipleResultSetsEnabled&quot; value=&quot;true&quot;/&gt; &lt;setting name=&quot;useColumnLabel&quot; value=&quot;true&quot;/&gt; &lt;setting name=&quot;useGeneratedKeys&quot; value=&quot;false&quot;/&gt; &lt;setting name=&quot;autoMappingBehavior&quot; value=&quot;PARTIAL&quot;/&gt; &lt;setting name=&quot;autoMappingUnknownColumnBehavior&quot; value=&quot;WARNING&quot;/&gt; &lt;setting name=&quot;defaultExecutorType&quot; value=&quot;SIMPLE&quot;/&gt; &lt;setting name=&quot;defaultStatementTimeout&quot; value=&quot;25&quot;/&gt; &lt;setting name=&quot;defaultFetchSize&quot; value=&quot;100&quot;/&gt; &lt;setting name=&quot;safeRowBoundsEnabled&quot; value=&quot;false&quot;/&gt; &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;false&quot;/&gt; &lt;setting name=&quot;localCacheScope&quot; value=&quot;SESSION&quot;/&gt; &lt;setting name=&quot;jdbcTypeForNull&quot; value=&quot;OTHER&quot;/&gt; &lt;setting name=&quot;lazyLoadTriggerMethods&quot; value=&quot;equals,clone,hashCode,toString&quot;/&gt;&lt;/settings&gt; ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰ç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ã€‚ å®ƒä»…ç”¨äº XML é…ç½®ï¼Œæ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™ã€‚ä¾‹å¦‚ï¼š 12345678&lt;typeAliases&gt; &lt;typeAlias alias=&quot;Author&quot; type=&quot;domain.blog.Author&quot;/&gt; &lt;typeAlias alias=&quot;Blog&quot; type=&quot;domain.blog.Blog&quot;/&gt; &lt;typeAlias alias=&quot;Comment&quot; type=&quot;domain.blog.Comment&quot;/&gt; &lt;typeAlias alias=&quot;Post&quot; type=&quot;domain.blog.Post&quot;/&gt; &lt;typeAlias alias=&quot;Section&quot; type=&quot;domain.blog.Section&quot;/&gt; &lt;typeAlias alias=&quot;Tag&quot; type=&quot;domain.blog.Tag&quot;/&gt;&lt;/typeAliases&gt; å½“è¿™æ ·é…ç½®æ—¶ï¼ŒBlog å¯ä»¥ç”¨åœ¨ä»»ä½•ä½¿ç”¨ domain.blog.Blog çš„åœ°æ–¹ã€‚ ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œæ¯”å¦‚ï¼š 123&lt;typeAliases&gt; &lt;package name=&quot;domain.blog&quot;/&gt;&lt;/typeAliases&gt; æ¯ä¸€ä¸ªåœ¨åŒ… domain.blog ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚ æ¯”å¦‚ domain.blog.Author çš„åˆ«åä¸º authorï¼›è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚è§ä¸‹é¢çš„ä¾‹å­ï¼š 1234@Alias(&quot;author&quot;)public class Author &#123; ...&#125; ä¸‹é¢æ˜¯ä¸€äº›ä¸ºå¸¸è§çš„ Java ç±»å‹å†…å»ºçš„ç±»å‹åˆ«åã€‚å®ƒä»¬éƒ½æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œæ³¨æ„ï¼Œä¸ºäº†åº”å¯¹åŸå§‹ç±»å‹çš„å‘½åé‡å¤ï¼Œé‡‡å–äº†ç‰¹æ®Šçš„å‘½åé£æ ¼ã€‚ åˆ«å æ˜ å°„çš„ç±»å‹ _byte byte _char (since 3.5.10) char _character (since 3.5.10) char _long long _short short _int int _integer int _double double _float float _boolean boolean string String byte Byte char (since 3.5.10) Character character (since 3.5.10) Character long Long short Short int Integer integer Integer double Double float Float boolean Boolean date Date decimal BigDecimal bigdecimal BigDecimal biginteger BigInteger object Object date[] Date[] decimal[] BigDecimal[] bigdecimal[] BigDecimal[] biginteger[] BigInteger[] object[] Object[] map Map hashmap HashMap list List arraylist ArrayList collection Collection iterator Iterator ç±»å‹å¤„ç†å™¨ï¼ˆtypeHandlersï¼‰MyBatis åœ¨è®¾ç½®é¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰ä¸­çš„å‚æ•°æˆ–ä»ç»“æœé›†ä¸­å–å‡ºä¸€ä¸ªå€¼æ—¶ï¼Œ éƒ½ä¼šç”¨ç±»å‹å¤„ç†å™¨å°†è·å–åˆ°çš„å€¼ä»¥åˆé€‚çš„æ–¹å¼è½¬æ¢æˆ Java ç±»å‹ã€‚ä¸‹è¡¨æè¿°äº†ä¸€äº›é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ æç¤º ä» 3.4.5 å¼€å§‹ï¼ŒMyBatis é»˜è®¤æ”¯æŒ JSR-310ï¼ˆæ—¥æœŸå’Œæ—¶é—´ APIï¼‰ ã€‚ ç±»å‹å¤„ç†å™¨ Java ç±»å‹ JDBC ç±»å‹ BooleanTypeHandler java.lang.Boolean, boolean æ•°æ®åº“å…¼å®¹çš„ BOOLEAN ByteTypeHandler java.lang.Byte, byte æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– BYTE ShortTypeHandler java.lang.Short, short æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– SMALLINT IntegerTypeHandler java.lang.Integer, int æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– INTEGER LongTypeHandler java.lang.Long, long æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– BIGINT FloatTypeHandler java.lang.Float, float æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– FLOAT DoubleTypeHandler java.lang.Double, double æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– DOUBLE BigDecimalTypeHandler java.math.BigDecimal æ•°æ®åº“å…¼å®¹çš„ NUMERIC æˆ– DECIMAL StringTypeHandler java.lang.String CHAR, VARCHAR ClobReaderTypeHandler java.io.Reader - ClobTypeHandler java.lang.String CLOB, LONGVARCHAR NStringTypeHandler java.lang.String NVARCHAR, NCHAR NClobTypeHandler java.lang.String NCLOB BlobInputStreamTypeHandler java.io.InputStream - ByteArrayTypeHandler byte[] æ•°æ®åº“å…¼å®¹çš„å­—èŠ‚æµç±»å‹ BlobTypeHandler byte[] BLOB, LONGVARBINARY DateTypeHandler java.util.Date TIMESTAMP DateOnlyTypeHandler java.util.Date DATE TimeOnlyTypeHandler java.util.Date TIME SqlTimestampTypeHandler java.sql.Timestamp TIMESTAMP SqlDateTypeHandler java.sql.Date DATE SqlTimeTypeHandler java.sql.Time TIME ObjectTypeHandler Any OTHER æˆ–æœªæŒ‡å®šç±»å‹ EnumTypeHandler Enumeration Type VARCHAR æˆ–ä»»ä½•å…¼å®¹çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œç”¨æ¥å­˜å‚¨æšä¸¾çš„åç§°ï¼ˆè€Œä¸æ˜¯ç´¢å¼•åºæ•°å€¼ï¼‰ EnumOrdinalTypeHandler Enumeration Type ä»»ä½•å…¼å®¹çš„ NUMERIC æˆ– DOUBLE ç±»å‹ï¼Œç”¨æ¥å­˜å‚¨æšä¸¾çš„åºæ•°å€¼ï¼ˆè€Œä¸æ˜¯åç§°ï¼‰ã€‚ SqlxmlTypeHandler java.lang.String SQLXML InstantTypeHandler java.time.Instant TIMESTAMP LocalDateTimeTypeHandler java.time.LocalDateTime TIMESTAMP LocalDateTypeHandler java.time.LocalDate DATE LocalTimeTypeHandler java.time.LocalTime TIME OffsetDateTimeTypeHandler java.time.OffsetDateTime TIMESTAMP OffsetTimeTypeHandler java.time.OffsetTime TIME ZonedDateTimeTypeHandler java.time.ZonedDateTime TIMESTAMP YearTypeHandler java.time.Year INTEGER MonthTypeHandler java.time.Month INTEGER YearMonthTypeHandler java.time.YearMonth VARCHAR æˆ– LONGVARCHAR JapaneseDateTypeHandler java.time.chrono.JapaneseDate DATE ä½ å¯ä»¥é‡å†™å·²æœ‰çš„ç±»å‹å¤„ç†å™¨æˆ–åˆ›å»ºä½ è‡ªå·±çš„ç±»å‹å¤„ç†å™¨æ¥å¤„ç†ä¸æ”¯æŒçš„æˆ–éæ ‡å‡†çš„ç±»å‹ã€‚ å…·ä½“åšæ³•ä¸ºï¼šå®ç° org.apache.ibatis.type.TypeHandler æ¥å£ï¼Œ æˆ–ç»§æ‰¿ä¸€ä¸ªå¾ˆä¾¿åˆ©çš„ç±» org.apache.ibatis.type.BaseTypeHandlerï¼Œ å¹¶ä¸”å¯ä»¥ï¼ˆå¯é€‰åœ°ï¼‰å°†å®ƒæ˜ å°„åˆ°ä¸€ä¸ª JDBC ç±»å‹ã€‚æ¯”å¦‚ï¼š 12345678910111213141516171819202122232425262728// ExampleTypeHandler.java@MappedJdbcTypes(JdbcType.VARCHAR)public class ExampleTypeHandler extends BaseTypeHandler&lt;String&gt; &#123; @Override public void setNonNullParameter(PreparedStatement ps, int i, String parameter, JdbcType jdbcType) throws SQLException &#123; ps.setString(i, parameter); &#125; @Override public String getNullableResult(ResultSet rs, String columnName) throws SQLException &#123; return rs.getString(columnName); &#125; @Override public String getNullableResult(ResultSet rs, int columnIndex) throws SQLException &#123; return rs.getString(columnIndex); &#125; @Override public String getNullableResult(CallableStatement cs, int columnIndex) throws SQLException &#123; return cs.getString(columnIndex); &#125;&#125;&lt;!-- mybatis-config.xml --&gt;&lt;typeHandlers&gt; &lt;typeHandler handler=&quot;org.mybatis.example.ExampleTypeHandler&quot;/&gt;&lt;/typeHandlers&gt; ä½¿ç”¨ä¸Šè¿°çš„ç±»å‹å¤„ç†å™¨å°†ä¼šè¦†ç›–å·²æœ‰çš„å¤„ç† Java String ç±»å‹çš„å±æ€§ä»¥åŠ VARCHAR ç±»å‹çš„å‚æ•°å’Œç»“æœçš„ç±»å‹å¤„ç†å™¨ã€‚ è¦æ³¨æ„ MyBatis ä¸ä¼šé€šè¿‡æ£€æµ‹æ•°æ®åº“å…ƒä¿¡æ¯æ¥å†³å®šä½¿ç”¨å“ªç§ç±»å‹ï¼Œæ‰€ä»¥ä½ å¿…é¡»åœ¨å‚æ•°å’Œç»“æœæ˜ å°„ä¸­æŒ‡æ˜å­—æ®µæ˜¯ VARCHAR ç±»å‹ï¼Œ ä»¥ä½¿å…¶èƒ½å¤Ÿç»‘å®šåˆ°æ­£ç¡®çš„ç±»å‹å¤„ç†å™¨ä¸Šã€‚è¿™æ˜¯å› ä¸º MyBatis ç›´åˆ°è¯­å¥è¢«æ‰§è¡Œæ—¶æ‰æ¸…æ¥šæ•°æ®ç±»å‹ã€‚ é€šè¿‡ç±»å‹å¤„ç†å™¨çš„æ³›å‹ï¼ŒMyBatis å¯ä»¥å¾—çŸ¥è¯¥ç±»å‹å¤„ç†å™¨å¤„ç†çš„ Java ç±»å‹ï¼Œä¸è¿‡è¿™ç§è¡Œä¸ºå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹æ³•æ”¹å˜ï¼š åœ¨ç±»å‹å¤„ç†å™¨çš„é…ç½®å…ƒç´ ï¼ˆtypeHandler å…ƒç´ ï¼‰ä¸Šå¢åŠ ä¸€ä¸ª javaType å±æ€§ï¼ˆæ¯”å¦‚ï¼šjavaType=&quot;String&quot;ï¼‰ï¼› åœ¨ç±»å‹å¤„ç†å™¨çš„ç±»ä¸Šå¢åŠ ä¸€ä¸ª @MappedTypes æ³¨è§£æŒ‡å®šä¸å…¶å…³è”çš„ Java ç±»å‹åˆ—è¡¨ã€‚ å¦‚æœåœ¨ javaType å±æ€§ä¸­ä¹ŸåŒæ—¶æŒ‡å®šï¼Œåˆ™æ³¨è§£ä¸Šçš„é…ç½®å°†è¢«å¿½ç•¥ã€‚ å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æŒ‡å®šå…³è”çš„ JDBC ç±»å‹ï¼š åœ¨ç±»å‹å¤„ç†å™¨çš„é…ç½®å…ƒç´ ä¸Šå¢åŠ ä¸€ä¸ª jdbcType å±æ€§ï¼ˆæ¯”å¦‚ï¼šjdbcType=&quot;VARCHAR&quot;ï¼‰ï¼› åœ¨ç±»å‹å¤„ç†å™¨çš„ç±»ä¸Šå¢åŠ ä¸€ä¸ª @MappedJdbcTypes æ³¨è§£æŒ‡å®šä¸å…¶å…³è”çš„ JDBC ç±»å‹åˆ—è¡¨ã€‚ å¦‚æœåœ¨ jdbcType å±æ€§ä¸­ä¹ŸåŒæ—¶æŒ‡å®šï¼Œåˆ™æ³¨è§£ä¸Šçš„é…ç½®å°†è¢«å¿½ç•¥ã€‚ å½“åœ¨ ResultMap ä¸­å†³å®šä½¿ç”¨å“ªç§ç±»å‹å¤„ç†å™¨æ—¶ï¼Œæ­¤æ—¶ Java ç±»å‹æ˜¯å·²çŸ¥çš„ï¼ˆä»ç»“æœç±»å‹ä¸­è·å¾—ï¼‰ï¼Œä½†æ˜¯ JDBC ç±»å‹æ˜¯æœªçŸ¥çš„ã€‚ å› æ­¤ Mybatis ä½¿ç”¨ javaType=[Java ç±»å‹], jdbcType=null çš„ç»„åˆæ¥é€‰æ‹©ä¸€ä¸ªç±»å‹å¤„ç†å™¨ã€‚ è¿™æ„å‘³ç€ä½¿ç”¨ @MappedJdbcTypes æ³¨è§£å¯ä»¥é™åˆ¶ç±»å‹å¤„ç†å™¨çš„ä½œç”¨èŒƒå›´ï¼Œå¹¶ä¸”å¯ä»¥ç¡®ä¿ï¼Œé™¤éæ˜¾å¼åœ°è®¾ç½®ï¼Œå¦åˆ™ç±»å‹å¤„ç†å™¨åœ¨ ResultMap ä¸­å°†ä¸ä¼šç”Ÿæ•ˆã€‚ å¦‚æœå¸Œæœ›èƒ½åœ¨ ResultMap ä¸­éšå¼åœ°ä½¿ç”¨ç±»å‹å¤„ç†å™¨ï¼Œé‚£ä¹ˆè®¾ç½® @MappedJdbcTypes æ³¨è§£çš„ includeNullJdbcType=true å³å¯ã€‚ ç„¶è€Œä» Mybatis 3.4.0 å¼€å§‹ï¼Œå¦‚æœæŸä¸ª Java ç±»å‹åªæœ‰ä¸€ä¸ªæ³¨å†Œçš„ç±»å‹å¤„ç†å™¨ï¼Œå³ä½¿æ²¡æœ‰è®¾ç½® includeNullJdbcType=trueï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å‹å¤„ç†å™¨ä¹Ÿä¼šæ˜¯ ResultMap ä½¿ç”¨ Java ç±»å‹æ—¶çš„é»˜è®¤å¤„ç†å™¨ã€‚ æœ€åï¼Œå¯ä»¥è®© MyBatis å¸®ä½ æŸ¥æ‰¾ç±»å‹å¤„ç†å™¨ï¼š 1234&lt;!-- mybatis-config.xml --&gt;&lt;typeHandlers&gt; &lt;package name=&quot;org.mybatis.example&quot;/&gt;&lt;/typeHandlers&gt; æ³¨æ„åœ¨ä½¿ç”¨è‡ªåŠ¨å‘ç°åŠŸèƒ½çš„æ—¶å€™ï¼Œåªèƒ½é€šè¿‡æ³¨è§£æ–¹å¼æ¥æŒ‡å®š JDBC çš„ç±»å‹ã€‚ ä½ å¯ä»¥åˆ›å»ºèƒ½å¤Ÿå¤„ç†å¤šä¸ªç±»çš„æ³›å‹ç±»å‹å¤„ç†å™¨ã€‚ä¸ºäº†ä½¿ç”¨æ³›å‹ç±»å‹å¤„ç†å™¨ï¼Œ éœ€è¦å¢åŠ ä¸€ä¸ªæ¥å—è¯¥ç±»çš„ class ä½œä¸ºå‚æ•°çš„æ„é€ å™¨ï¼Œè¿™æ · MyBatis ä¼šåœ¨æ„é€ ä¸€ä¸ªç±»å‹å¤„ç†å™¨å®ä¾‹çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ªå…·ä½“çš„ç±»ã€‚ 12345678910//GenericTypeHandler.javapublic class GenericTypeHandler&lt;E extends MyObject&gt; extends BaseTypeHandler&lt;E&gt; &#123; private Class&lt;E&gt; type; public GenericTypeHandler(Class&lt;E&gt; type) &#123; if (type == null) throw new IllegalArgumentException(&quot;Type argument cannot be null&quot;); this.type = type; &#125; ... EnumTypeHandler å’Œ EnumOrdinalTypeHandler éƒ½æ˜¯æ³›å‹ç±»å‹å¤„ç†å™¨ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†è¯¦ç»†æ¢è®¨ã€‚ å¤„ç†æšä¸¾ç±»å‹è‹¥æƒ³æ˜ å°„æšä¸¾ç±»å‹ Enumï¼Œåˆ™éœ€è¦ä» EnumTypeHandler æˆ–è€… EnumOrdinalTypeHandler ä¸­é€‰æ‹©ä¸€ä¸ªæ¥ä½¿ç”¨ã€‚ æ¯”å¦‚è¯´æˆ‘ä»¬æƒ³å­˜å‚¨å–è¿‘ä¼¼å€¼æ—¶ç”¨åˆ°çš„èˆå…¥æ¨¡å¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMyBatis ä¼šåˆ©ç”¨ EnumTypeHandler æ¥æŠŠ Enum å€¼è½¬æ¢æˆå¯¹åº”çš„åå­—ã€‚ æ³¨æ„ EnumTypeHandler åœ¨æŸç§æ„ä¹‰ä¸Šæ¥è¯´æ˜¯æ¯”è¾ƒç‰¹åˆ«çš„ï¼Œå…¶å®ƒçš„å¤„ç†å™¨åªé’ˆå¯¹æŸä¸ªç‰¹å®šçš„ç±»ï¼Œè€Œå®ƒä¸åŒï¼Œå®ƒä¼šå¤„ç†ä»»æ„ç»§æ‰¿äº† Enum çš„ç±»ã€‚ ä¸è¿‡ï¼Œæˆ‘ä»¬å¯èƒ½ä¸æƒ³å­˜å‚¨åå­—ï¼Œç›¸åæˆ‘ä»¬çš„ DBA ä¼šåšæŒä½¿ç”¨æ•´å½¢å€¼ä»£ç ã€‚é‚£ä¹Ÿä¸€æ ·ç®€å•ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æŠŠ EnumOrdinalTypeHandler åŠ åˆ° typeHandlers ä¸­å³å¯ï¼Œ è¿™æ ·æ¯ä¸ª RoundingMode å°†é€šè¿‡ä»–ä»¬çš„åºæ•°å€¼æ¥æ˜ å°„æˆå¯¹åº”çš„æ•´å½¢æ•°å€¼ã€‚ 1234&lt;!-- mybatis-config.xml --&gt;&lt;typeHandlers&gt; &lt;typeHandler handler=&quot;org.apache.ibatis.type.EnumOrdinalTypeHandler&quot; javaType=&quot;java.math.RoundingMode&quot;/&gt;&lt;/typeHandlers&gt; ä½†è¦æ˜¯ä½ æƒ³åœ¨ä¸€ä¸ªåœ°æ–¹å°† Enum æ˜ å°„æˆå­—ç¬¦ä¸²ï¼Œåœ¨å¦å¤–ä¸€ä¸ªåœ°æ–¹æ˜ å°„æˆæ•´å½¢å€¼å‘¢ï¼Ÿ è‡ªåŠ¨æ˜ å°„å™¨ï¼ˆauto-mapperï¼‰ä¼šè‡ªåŠ¨åœ°é€‰ç”¨ EnumOrdinalTypeHandler æ¥å¤„ç†æšä¸¾ç±»å‹ï¼Œ æ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³ç”¨æ™®é€šçš„ EnumTypeHandlerï¼Œå°±å¿…é¡»è¦æ˜¾å¼åœ°ä¸ºé‚£äº› SQL è¯­å¥è®¾ç½®è¦ä½¿ç”¨çš„ç±»å‹å¤„ç†å™¨ã€‚ ï¼ˆä¸‹ä¸€èŠ‚æ‰å¼€å§‹ä»‹ç»æ˜ å°„å™¨æ–‡ä»¶ï¼Œå¦‚æœä½ æ˜¯é¦–æ¬¡é˜…è¯»è¯¥æ–‡æ¡£ï¼Œä½ å¯èƒ½éœ€è¦å…ˆè·³è¿‡è¿™é‡Œï¼Œè¿‡ä¼šå†æ¥çœ‹ã€‚ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper namespace=&quot;org.apache.ibatis.submitted.rounding.Mapper&quot;&gt; &lt;resultMap type=&quot;org.apache.ibatis.submitted.rounding.User&quot; id=&quot;usermap&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt; &lt;result column=&quot;name&quot; property=&quot;name&quot;/&gt; &lt;result column=&quot;funkyNumber&quot; property=&quot;funkyNumber&quot;/&gt; &lt;result column=&quot;roundingMode&quot; property=&quot;roundingMode&quot;/&gt; &lt;/resultMap&gt; &lt;select id=&quot;getUser&quot; resultMap=&quot;usermap&quot;&gt; select * from users &lt;/select&gt; &lt;insert id=&quot;insert&quot;&gt; insert into users (id, name, funkyNumber, roundingMode) values ( #&#123;id&#125;, #&#123;name&#125;, #&#123;funkyNumber&#125;, #&#123;roundingMode&#125; ) &lt;/insert&gt; &lt;resultMap type=&quot;org.apache.ibatis.submitted.rounding.User&quot; id=&quot;usermap2&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt; &lt;result column=&quot;name&quot; property=&quot;name&quot;/&gt; &lt;result column=&quot;funkyNumber&quot; property=&quot;funkyNumber&quot;/&gt; &lt;result column=&quot;roundingMode&quot; property=&quot;roundingMode&quot; typeHandler=&quot;org.apache.ibatis.type.EnumTypeHandler&quot;/&gt; &lt;/resultMap&gt; &lt;select id=&quot;getUser2&quot; resultMap=&quot;usermap2&quot;&gt; select * from users2 &lt;/select&gt; &lt;insert id=&quot;insert2&quot;&gt; insert into users2 (id, name, funkyNumber, roundingMode) values ( #&#123;id&#125;, #&#123;name&#125;, #&#123;funkyNumber&#125;, #&#123;roundingMode, typeHandler=org.apache.ibatis.type.EnumTypeHandler&#125; ) &lt;/insert&gt;&lt;/mapper&gt; æ³¨æ„ï¼Œè¿™é‡Œçš„ select è¯­å¥å¿…é¡»æŒ‡å®š resultMap è€Œä¸æ˜¯ resultTypeã€‚ å¯¹è±¡å·¥å‚ï¼ˆobjectFactoryï¼‰æ¯æ¬¡ MyBatis åˆ›å»ºç»“æœå¯¹è±¡çš„æ–°å®ä¾‹æ—¶ï¼Œå®ƒéƒ½ä¼šä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼ˆObjectFactoryï¼‰å®ä¾‹æ¥å®Œæˆå®ä¾‹åŒ–å·¥ä½œã€‚ é»˜è®¤çš„å¯¹è±¡å·¥å‚éœ€è¦åšçš„ä»…ä»…æ˜¯å®ä¾‹åŒ–ç›®æ ‡ç±»ï¼Œè¦ä¹ˆé€šè¿‡é»˜è®¤æ— å‚æ„é€ æ–¹æ³•ï¼Œè¦ä¹ˆé€šè¿‡å­˜åœ¨çš„å‚æ•°æ˜ å°„æ¥è°ƒç”¨å¸¦æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•ã€‚ å¦‚æœæƒ³è¦†ç›–å¯¹è±¡å·¥å‚çš„é»˜è®¤è¡Œä¸ºï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºè‡ªå·±çš„å¯¹è±¡å·¥å‚æ¥å®ç°ã€‚æ¯”å¦‚ï¼š 12345678910111213141516171819202122232425// ExampleObjectFactory.javapublic class ExampleObjectFactory extends DefaultObjectFactory &#123; @Override public &lt;T&gt; T create(Class&lt;T&gt; type) &#123; return super.create(type); &#125; @Override public &lt;T&gt; T create(Class&lt;T&gt; type, List&lt;Class&lt;?&gt;&gt; constructorArgTypes, List&lt;Object&gt; constructorArgs) &#123; return super.create(type, constructorArgTypes, constructorArgs); &#125; @Override public void setProperties(Properties properties) &#123; super.setProperties(properties); &#125; @Override public &lt;T&gt; boolean isCollection(Class&lt;T&gt; type) &#123; return Collection.class.isAssignableFrom(type); &#125;&#125;&lt;!-- mybatis-config.xml --&gt;&lt;objectFactory type=&quot;org.mybatis.example.ExampleObjectFactory&quot;&gt; &lt;property name=&quot;someProperty&quot; value=&quot;100&quot;/&gt;&lt;/objectFactory&gt; ObjectFactory æ¥å£å¾ˆç®€å•ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªåˆ›å»ºå®ä¾‹ç”¨çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å¤„ç†é»˜è®¤æ— å‚æ„é€ æ–¹æ³•çš„ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å¤„ç†å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•çš„ã€‚ å¦å¤–ï¼ŒsetProperties æ–¹æ³•å¯ä»¥è¢«ç”¨æ¥é…ç½® ObjectFactoryï¼Œåœ¨åˆå§‹åŒ–ä½ çš„ ObjectFactory å®ä¾‹åï¼Œ objectFactory å…ƒç´ ä½“ä¸­å®šä¹‰çš„å±æ€§ä¼šè¢«ä¼ é€’ç»™ setProperties æ–¹æ³•ã€‚ æ’ä»¶ï¼ˆpluginsï¼‰MyBatis å…è®¸ä½ åœ¨æ˜ å°„è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸€ç‚¹è¿›è¡Œæ‹¦æˆªè°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMyBatis å…è®¸ä½¿ç”¨æ’ä»¶æ¥æ‹¦æˆªçš„æ–¹æ³•è°ƒç”¨åŒ…æ‹¬ï¼š Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed) ParameterHandler (getParameterObject, setParameters) ResultSetHandler (handleResultSets, handleOutputParameters) StatementHandler (prepare, parameterize, batch, update, query) è¿™äº›ç±»ä¸­æ–¹æ³•çš„ç»†èŠ‚å¯ä»¥é€šè¿‡æŸ¥çœ‹æ¯ä¸ªæ–¹æ³•çš„ç­¾åæ¥å‘ç°ï¼Œæˆ–è€…ç›´æ¥æŸ¥çœ‹ MyBatis å‘è¡ŒåŒ…ä¸­çš„æºä»£ç ã€‚ å¦‚æœä½ æƒ³åšçš„ä¸ä»…ä»…æ˜¯ç›‘æ§æ–¹æ³•çš„è°ƒç”¨ï¼Œé‚£ä¹ˆä½ æœ€å¥½ç›¸å½“äº†è§£è¦é‡å†™çš„æ–¹æ³•çš„è¡Œä¸ºã€‚ å› ä¸ºåœ¨è¯•å›¾ä¿®æ”¹æˆ–é‡å†™å·²æœ‰æ–¹æ³•çš„è¡Œä¸ºæ—¶ï¼Œå¾ˆå¯èƒ½ä¼šç ´å MyBatis çš„æ ¸å¿ƒæ¨¡å—ã€‚ è¿™äº›éƒ½æ˜¯æ›´åº•å±‚çš„ç±»å’Œæ–¹æ³•ï¼Œæ‰€ä»¥ä½¿ç”¨æ’ä»¶çš„æ—¶å€™è¦ç‰¹åˆ«å½“å¿ƒã€‚ é€šè¿‡ MyBatis æä¾›çš„å¼ºå¤§æœºåˆ¶ï¼Œä½¿ç”¨æ’ä»¶æ˜¯éå¸¸ç®€å•çš„ï¼Œåªéœ€å®ç° Interceptor æ¥å£ï¼Œå¹¶æŒ‡å®šæƒ³è¦æ‹¦æˆªçš„æ–¹æ³•ç­¾åå³å¯ã€‚ 123456789101112131415161718192021222324252627// ExamplePlugin.java@Intercepts(&#123;@Signature( type= Executor.class, method = &quot;update&quot;, args = &#123;MappedStatement.class,Object.class&#125;)&#125;)public class ExamplePlugin implements Interceptor &#123; private Properties properties = new Properties(); @Override public Object intercept(Invocation invocation) throws Throwable &#123; // implement pre processing if need Object returnObject = invocation.proceed(); // implement post processing if need return returnObject; &#125; @Override public void setProperties(Properties properties) &#123; this.properties = properties; &#125;&#125;&lt;!-- mybatis-config.xml --&gt;&lt;plugins&gt; &lt;plugin interceptor=&quot;org.mybatis.example.ExamplePlugin&quot;&gt; &lt;property name=&quot;someProperty&quot; value=&quot;100&quot;/&gt; &lt;/plugin&gt;&lt;/plugins&gt; ä¸Šé¢çš„æ’ä»¶å°†ä¼šæ‹¦æˆªåœ¨ Executor å®ä¾‹ä¸­æ‰€æœ‰çš„ â€œupdateâ€ æ–¹æ³•è°ƒç”¨ï¼Œ è¿™é‡Œçš„ Executor æ˜¯è´Ÿè´£æ‰§è¡Œåº•å±‚æ˜ å°„è¯­å¥çš„å†…éƒ¨å¯¹è±¡ã€‚ æç¤º è¦†ç›–é…ç½®ç±» é™¤äº†ç”¨æ’ä»¶æ¥ä¿®æ”¹ MyBatis æ ¸å¿ƒè¡Œä¸ºä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å®Œå…¨è¦†ç›–é…ç½®ç±»æ¥è¾¾åˆ°ç›®çš„ã€‚åªéœ€ç»§æ‰¿é…ç½®ç±»åè¦†ç›–å…¶ä¸­çš„æŸä¸ªæ–¹æ³•ï¼Œå†æŠŠå®ƒä¼ é€’åˆ° SqlSessionFactoryBuilder.build(myConfig) æ–¹æ³•å³å¯ã€‚å†æ¬¡é‡ç”³ï¼Œè¿™å¯èƒ½ä¼šæå¤§å½±å“ MyBatis çš„è¡Œä¸ºï¼ŒåŠ¡è¯·æ…ä¹‹åˆæ…ã€‚ ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒï¼Œè¿™ç§æœºåˆ¶æœ‰åŠ©äºå°† SQL æ˜ å°„åº”ç”¨äºå¤šç§æ•°æ®åº“ä¹‹ä¸­ï¼Œ ç°å®æƒ…å†µä¸‹æœ‰å¤šç§ç†ç”±éœ€è¦è¿™ä¹ˆåšã€‚ä¾‹å¦‚ï¼Œå¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒéœ€è¦æœ‰ä¸åŒçš„é…ç½®ï¼›æˆ–è€…æƒ³åœ¨å…·æœ‰ç›¸åŒ Schema çš„å¤šä¸ªç”Ÿäº§æ•°æ®åº“ä¸­ä½¿ç”¨ç›¸åŒçš„ SQL æ˜ å°„ã€‚è¿˜æœ‰è®¸å¤šç±»ä¼¼çš„ä½¿ç”¨åœºæ™¯ã€‚ ä¸è¿‡è¦è®°ä½ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚ æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³è¿æ¥ä¸¤ä¸ªæ•°æ®åº“ï¼Œå°±éœ€è¦åˆ›å»ºä¸¤ä¸ª SqlSessionFactory å®ä¾‹ï¼Œæ¯ä¸ªæ•°æ®åº“å¯¹åº”ä¸€ä¸ªã€‚è€Œå¦‚æœæ˜¯ä¸‰ä¸ªæ•°æ®åº“ï¼Œå°±éœ€è¦ä¸‰ä¸ªå®ä¾‹ï¼Œä¾æ­¤ç±»æ¨ï¼Œè®°èµ·æ¥å¾ˆç®€å•ï¼š æ¯ä¸ªæ•°æ®åº“å¯¹åº”ä¸€ä¸ª SqlSessionFactory å®ä¾‹ ä¸ºäº†æŒ‡å®šåˆ›å»ºå“ªç§ç¯å¢ƒï¼Œåªè¦å°†å®ƒä½œä¸ºå¯é€‰çš„å‚æ•°ä¼ é€’ç»™ SqlSessionFactoryBuilder å³å¯ã€‚å¯ä»¥æ¥å—ç¯å¢ƒé…ç½®çš„ä¸¤ä¸ªæ–¹æ³•ç­¾åæ˜¯ï¼š 12SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(reader, environment);SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(reader, environment, properties); å¦‚æœå¿½ç•¥äº†ç¯å¢ƒå‚æ•°ï¼Œé‚£ä¹ˆå°†ä¼šåŠ è½½é»˜è®¤ç¯å¢ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(reader);SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(reader, properties); environments å…ƒç´ å®šä¹‰äº†å¦‚ä½•é…ç½®ç¯å¢ƒã€‚ 12345678910111213&lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;&gt; &lt;property name=&quot;...&quot; value=&quot;...&quot;/&gt; &lt;/transactionManager&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;username&#125;&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt; &lt;/dataSource&gt; &lt;/environment&gt;&lt;/environments&gt; æ³¨æ„ä¸€äº›å…³é”®ç‚¹: é»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒ IDï¼ˆæ¯”å¦‚ï¼šdefault&#x3D;â€developmentâ€ï¼‰ã€‚ æ¯ä¸ª environment å…ƒç´ å®šä¹‰çš„ç¯å¢ƒ IDï¼ˆæ¯”å¦‚ï¼šid&#x3D;â€developmentâ€ï¼‰ã€‚ äº‹åŠ¡ç®¡ç†å™¨çš„é…ç½®ï¼ˆæ¯”å¦‚ï¼štype&#x3D;â€JDBCâ€ï¼‰ã€‚ æ•°æ®æºçš„é…ç½®ï¼ˆæ¯”å¦‚ï¼štype&#x3D;â€POOLEDâ€ï¼‰ã€‚ é»˜è®¤ç¯å¢ƒå’Œç¯å¢ƒ ID é¡¾åæ€ä¹‰ã€‚ ç¯å¢ƒå¯ä»¥éšæ„å‘½åï¼Œä½†åŠ¡å¿…ä¿è¯é»˜è®¤çš„ç¯å¢ƒ ID è¦åŒ¹é…å…¶ä¸­ä¸€ä¸ªç¯å¢ƒ IDã€‚ äº‹åŠ¡ç®¡ç†å™¨ï¼ˆtransactionManagerï¼‰ åœ¨ MyBatis ä¸­æœ‰ä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†å™¨ï¼ˆä¹Ÿå°±æ˜¯ type&#x3D;â€[JDBC|MANAGED]â€ï¼‰ï¼š JDBC â€“ è¿™ä¸ªé…ç½®ç›´æ¥ä½¿ç”¨äº† JDBC çš„æäº¤å’Œå›æ»šåŠŸèƒ½ï¼Œå®ƒä¾èµ–ä»æ•°æ®æºè·å¾—çš„è¿æ¥æ¥ç®¡ç†äº‹åŠ¡ä½œç”¨åŸŸã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºäº†ä¸æŸäº›é©±åŠ¨ç¨‹åºå…¼å®¹ï¼Œå®ƒåœ¨å…³é—­è¿æ¥æ—¶å¯ç”¨è‡ªåŠ¨æäº¤ã€‚ç„¶è€Œï¼Œå¯¹äºæŸäº›é©±åŠ¨ç¨‹åºæ¥è¯´ï¼Œå¯ç”¨è‡ªåŠ¨æäº¤ä¸ä»…æ˜¯ä¸å¿…è¦çš„ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªä»£ä»·é«˜æ˜‚çš„æ“ä½œã€‚å› æ­¤ï¼Œä» 3.5.10 ç‰ˆæœ¬å¼€å§‹ï¼Œä½ å¯ä»¥é€šè¿‡å°† â€œskipSetAutoCommitOnCloseâ€ å±æ€§è®¾ç½®ä¸º â€œtrueâ€ æ¥è·³è¿‡è¿™ä¸ªæ­¥éª¤ã€‚ä¾‹å¦‚ï¼š 123&lt;transactionManager type=&quot;JDBC&quot;&gt; &lt;property name=&quot;skipSetAutoCommitOnClose&quot; value=&quot;true&quot;/&gt;&lt;/transactionManager&gt; MANAGED â€“ è¿™ä¸ªé…ç½®å‡ ä¹æ²¡åšä»€ä¹ˆã€‚å®ƒä»ä¸æäº¤æˆ–å›æ»šä¸€ä¸ªè¿æ¥ï¼Œè€Œæ˜¯è®©å®¹å™¨æ¥ç®¡ç†äº‹åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ˆæ¯”å¦‚ JEE åº”ç”¨æœåŠ¡å™¨çš„ä¸Šä¸‹æ–‡ï¼‰ã€‚ é»˜è®¤æƒ…å†µä¸‹å®ƒä¼šå…³é—­è¿æ¥ã€‚ç„¶è€Œä¸€äº›å®¹å™¨å¹¶ä¸å¸Œæœ›è¿æ¥è¢«å…³é—­ï¼Œå› æ­¤éœ€è¦å°† closeConnection å±æ€§è®¾ç½®ä¸º false æ¥é˜»æ­¢é»˜è®¤çš„å…³é—­è¡Œä¸ºã€‚ä¾‹å¦‚: 123&lt;transactionManager type=&quot;MANAGED&quot;&gt; &lt;property name=&quot;closeConnection&quot; value=&quot;false&quot;/&gt;&lt;/transactionManager&gt; æç¤º å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Spring + MyBatisï¼Œåˆ™æ²¡æœ‰å¿…è¦é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼Œå› ä¸º Spring æ¨¡å—ä¼šä½¿ç”¨è‡ªå¸¦çš„ç®¡ç†å™¨æ¥è¦†ç›–å‰é¢çš„é…ç½®ã€‚ è¿™ä¸¤ç§äº‹åŠ¡ç®¡ç†å™¨ç±»å‹éƒ½ä¸éœ€è¦è®¾ç½®ä»»ä½•å±æ€§ã€‚å®ƒä»¬å…¶å®æ˜¯ç±»å‹åˆ«åï¼Œæ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥ç”¨ TransactionFactory æ¥å£å®ç°ç±»çš„å…¨é™å®šåæˆ–ç±»å‹åˆ«åä»£æ›¿å®ƒä»¬ã€‚ 1234567public interface TransactionFactory &#123; default void setProperties(Properties props) &#123; // ä» 3.5.2 å¼€å§‹ï¼Œè¯¥æ–¹æ³•ä¸ºé»˜è®¤æ–¹æ³• // ç©ºå®ç° &#125; Transaction newTransaction(Connection conn); Transaction newTransaction(DataSource dataSource, TransactionIsolationLevel level, boolean autoCommit);&#125; åœ¨äº‹åŠ¡ç®¡ç†å™¨å®ä¾‹åŒ–åï¼Œæ‰€æœ‰åœ¨ XML ä¸­é…ç½®çš„å±æ€§å°†ä¼šè¢«ä¼ é€’ç»™ setProperties() æ–¹æ³•ã€‚ä½ çš„å®ç°è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ª Transaction æ¥å£çš„å®ç°ç±»ï¼Œè¿™ä¸ªæ¥å£ä¹Ÿå¾ˆç®€å•ï¼š 1234567public interface Transaction &#123; Connection getConnection() throws SQLException; void commit() throws SQLException; void rollback() throws SQLException; void close() throws SQLException; Integer getTimeout() throws SQLException;&#125; ä½¿ç”¨è¿™ä¸¤ä¸ªæ¥å£ï¼Œä½ å¯ä»¥å®Œå…¨è‡ªå®šä¹‰ MyBatis å¯¹äº‹åŠ¡çš„å¤„ç†ã€‚ æ•°æ®æºï¼ˆdataSourceï¼‰ dataSource å…ƒç´ ä½¿ç”¨æ ‡å‡†çš„ JDBC æ•°æ®æºæ¥å£æ¥é…ç½® JDBC è¿æ¥å¯¹è±¡çš„èµ„æºã€‚ å¤§å¤šæ•° MyBatis åº”ç”¨ç¨‹åºä¼šæŒ‰ç¤ºä¾‹ä¸­çš„ä¾‹å­æ¥é…ç½®æ•°æ®æºã€‚è™½ç„¶æ•°æ®æºé…ç½®æ˜¯å¯é€‰çš„ï¼Œä½†å¦‚æœè¦å¯ç”¨å»¶è¿ŸåŠ è½½ç‰¹æ€§ï¼Œå°±å¿…é¡»é…ç½®æ•°æ®æºã€‚ æœ‰ä¸‰ç§å†…å»ºçš„æ•°æ®æºç±»å‹ï¼ˆä¹Ÿå°±æ˜¯ type&#x3D;â€[UNPOOLED|POOLED|JNDI]â€ï¼‰ï¼š UNPOOLEDâ€“ è¿™ä¸ªæ•°æ®æºçš„å®ç°ä¼šæ¯æ¬¡è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¿æ¥ã€‚è™½ç„¶æœ‰ç‚¹æ…¢ï¼Œä½†å¯¹é‚£äº›æ•°æ®åº“è¿æ¥å¯ç”¨æ€§è¦æ±‚ä¸é«˜çš„ç®€å•åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ æ€§èƒ½è¡¨ç°åˆ™ä¾èµ–äºä½¿ç”¨çš„æ•°æ®åº“ï¼Œå¯¹æŸäº›æ•°æ®åº“æ¥è¯´ï¼Œä½¿ç”¨è¿æ¥æ± å¹¶ä¸é‡è¦ï¼Œè¿™ä¸ªé…ç½®å°±å¾ˆé€‚åˆè¿™ç§æƒ…å½¢ã€‚UNPOOLED ç±»å‹çš„æ•°æ®æºä»…ä»…éœ€è¦é…ç½®ä»¥ä¸‹ 5 ç§å±æ€§ï¼š driver â€“ è¿™æ˜¯ JDBC é©±åŠ¨çš„ Java ç±»å…¨é™å®šåï¼ˆå¹¶ä¸æ˜¯ JDBC é©±åŠ¨ä¸­å¯èƒ½åŒ…å«çš„æ•°æ®æºç±»ï¼‰ã€‚ url â€“ è¿™æ˜¯æ•°æ®åº“çš„ JDBC URL åœ°å€ã€‚ username â€“ ç™»å½•æ•°æ®åº“çš„ç”¨æˆ·åã€‚ password â€“ ç™»å½•æ•°æ®åº“çš„å¯†ç ã€‚ defaultTransactionIsolationLevel â€“ é»˜è®¤çš„è¿æ¥äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚ defaultNetworkTimeout â€“ ç­‰å¾…æ•°æ®åº“æ“ä½œå®Œæˆçš„é»˜è®¤ç½‘ç»œè¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰ã€‚æŸ¥çœ‹ java.sql.Connection#setNetworkTimeout() çš„ API æ–‡æ¡£ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚ ä½œä¸ºå¯é€‰é¡¹ï¼Œä½ ä¹Ÿå¯ä»¥ä¼ é€’å±æ€§ç»™æ•°æ®åº“é©±åŠ¨ã€‚åªéœ€åœ¨å±æ€§ååŠ ä¸Šâ€œdriver.â€å‰ç¼€å³å¯ï¼Œä¾‹å¦‚ï¼š driver.encoding=UTF8 è¿™å°†é€šè¿‡ DriverManager.getConnection(url, driverProperties) æ–¹æ³•ä¼ é€’å€¼ä¸º UTF8 çš„ encoding å±æ€§ç»™æ•°æ®åº“é©±åŠ¨ã€‚ POOLEDâ€“ è¿™ç§æ•°æ®æºçš„å®ç°åˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°† JDBC è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ï¼Œé¿å…äº†åˆ›å»ºæ–°çš„è¿æ¥å®ä¾‹æ—¶æ‰€å¿…éœ€çš„åˆå§‹åŒ–å’Œè®¤è¯æ—¶é—´ã€‚ è¿™ç§å¤„ç†æ–¹å¼å¾ˆæµè¡Œï¼Œèƒ½ä½¿å¹¶å‘ Web åº”ç”¨å¿«é€Ÿå“åº”è¯·æ±‚ã€‚ é™¤äº†ä¸Šè¿°æåˆ° UNPOOLED ä¸‹çš„å±æ€§å¤–ï¼Œè¿˜æœ‰æ›´å¤šå±æ€§ç”¨æ¥é…ç½® POOLED çš„æ•°æ®æºï¼š poolMaximumActiveConnections â€“ åœ¨ä»»æ„æ—¶é—´å¯å­˜åœ¨çš„æ´»åŠ¨ï¼ˆæ­£åœ¨ä½¿ç”¨ï¼‰è¿æ¥æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š10 poolMaximumIdleConnections â€“ ä»»æ„æ—¶é—´å¯èƒ½å­˜åœ¨çš„ç©ºé—²è¿æ¥æ•°ã€‚ poolMaximumCheckoutTime â€“ åœ¨è¢«å¼ºåˆ¶è¿”å›ä¹‹å‰ï¼Œæ± ä¸­è¿æ¥è¢«æ£€å‡ºï¼ˆchecked outï¼‰æ—¶é—´ï¼Œé»˜è®¤å€¼ï¼š20000 æ¯«ç§’ï¼ˆå³ 20 ç§’ï¼‰ poolTimeToWait â€“ è¿™æ˜¯ä¸€ä¸ªåº•å±‚è®¾ç½®ï¼Œå¦‚æœè·å–è¿æ¥èŠ±è´¹äº†ç›¸å½“é•¿çš„æ—¶é—´ï¼Œè¿æ¥æ± ä¼šæ‰“å°çŠ¶æ€æ—¥å¿—å¹¶é‡æ–°å°è¯•è·å–ä¸€ä¸ªè¿æ¥ï¼ˆé¿å…åœ¨è¯¯é…ç½®çš„æƒ…å†µä¸‹ä¸€ç›´å¤±è´¥ä¸”ä¸æ‰“å°æ—¥å¿—ï¼‰ï¼Œé»˜è®¤å€¼ï¼š20000 æ¯«ç§’ï¼ˆå³ 20 ç§’ï¼‰ã€‚ poolMaximumLocalBadConnectionTolerance â€“ è¿™æ˜¯ä¸€ä¸ªå…³äºåè¿æ¥å®¹å¿åº¦çš„åº•å±‚è®¾ç½®ï¼Œ ä½œç”¨äºæ¯ä¸€ä¸ªå°è¯•ä»ç¼“å­˜æ± è·å–è¿æ¥çš„çº¿ç¨‹ã€‚ å¦‚æœè¿™ä¸ªçº¿ç¨‹è·å–åˆ°çš„æ˜¯ä¸€ä¸ªåçš„è¿æ¥ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®æºå…è®¸è¿™ä¸ªçº¿ç¨‹å°è¯•é‡æ–°è·å–ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œä½†æ˜¯è¿™ä¸ªé‡æ–°å°è¯•çš„æ¬¡æ•°ä¸åº”è¯¥è¶…è¿‡ poolMaximumIdleConnections ä¸ poolMaximumLocalBadConnectionTolerance ä¹‹å’Œã€‚ é»˜è®¤å€¼ï¼š3ï¼ˆæ–°å¢äº 3.4.5ï¼‰ poolPingQuery â€“ å‘é€åˆ°æ•°æ®åº“çš„ä¾¦æµ‹æŸ¥è¯¢ï¼Œç”¨æ¥æ£€éªŒè¿æ¥æ˜¯å¦æ­£å¸¸å·¥ä½œå¹¶å‡†å¤‡æ¥å—è¯·æ±‚ã€‚é»˜è®¤æ˜¯â€œNO PING QUERY SETâ€ï¼Œè¿™ä¼šå¯¼è‡´å¤šæ•°æ•°æ®åº“é©±åŠ¨å‡ºé”™æ—¶è¿”å›æ°å½“çš„é”™è¯¯æ¶ˆæ¯ã€‚ poolPingEnabled â€“ æ˜¯å¦å¯ç”¨ä¾¦æµ‹æŸ¥è¯¢ã€‚è‹¥å¼€å¯ï¼Œéœ€è¦è®¾ç½® poolPingQuery å±æ€§ä¸ºä¸€ä¸ªå¯æ‰§è¡Œçš„ SQL è¯­å¥ï¼ˆæœ€å¥½æ˜¯ä¸€ä¸ªé€Ÿåº¦éå¸¸å¿«çš„ SQL è¯­å¥ï¼‰ï¼Œé»˜è®¤å€¼ï¼šfalseã€‚ poolPingConnectionsNotUsedFor â€“ é…ç½® poolPingQuery çš„é¢‘ç‡ã€‚å¯ä»¥è¢«è®¾ç½®ä¸ºå’Œæ•°æ®åº“è¿æ¥è¶…æ—¶æ—¶é—´ä¸€æ ·ï¼Œæ¥é¿å…ä¸å¿…è¦çš„ä¾¦æµ‹ï¼Œé»˜è®¤å€¼ï¼š0ï¼ˆå³æ‰€æœ‰è¿æ¥æ¯ä¸€æ—¶åˆ»éƒ½è¢«ä¾¦æµ‹ â€” å½“ç„¶ä»…å½“ poolPingEnabled ä¸º true æ—¶é€‚ç”¨ï¼‰ã€‚ JNDI â€“ è¿™ä¸ªæ•°æ®æºå®ç°æ˜¯ä¸ºäº†èƒ½åœ¨å¦‚ EJB æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­ä½¿ç”¨ï¼Œå®¹å™¨å¯ä»¥é›†ä¸­æˆ–åœ¨å¤–éƒ¨é…ç½®æ•°æ®æºï¼Œç„¶åæ”¾ç½®ä¸€ä¸ª JNDI ä¸Šä¸‹æ–‡çš„æ•°æ®æºå¼•ç”¨ã€‚è¿™ç§æ•°æ®æºé…ç½®åªéœ€è¦ä¸¤ä¸ªå±æ€§ï¼š initial_context â€“ è¿™ä¸ªå±æ€§ç”¨æ¥åœ¨ InitialContext ä¸­å¯»æ‰¾ä¸Šä¸‹æ–‡ï¼ˆå³ï¼ŒinitialContext.lookup(initial_context)ï¼‰ã€‚è¿™æ˜¯ä¸ªå¯é€‰å±æ€§ï¼Œå¦‚æœå¿½ç•¥ï¼Œé‚£ä¹ˆå°†ä¼šç›´æ¥ä» InitialContext ä¸­å¯»æ‰¾ data_source å±æ€§ã€‚ data_source â€“ è¿™æ˜¯å¼•ç”¨æ•°æ®æºå®ä¾‹ä½ç½®çš„ä¸Šä¸‹æ–‡è·¯å¾„ã€‚æä¾›äº† initial_context é…ç½®æ—¶ä¼šåœ¨å…¶è¿”å›çš„ä¸Šä¸‹æ–‡ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œæ²¡æœ‰æä¾›æ—¶åˆ™ç›´æ¥åœ¨ InitialContext ä¸­æŸ¥æ‰¾ã€‚ å’Œå…¶ä»–æ•°æ®æºé…ç½®ç±»ä¼¼ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ å‰ç¼€â€œenv.â€ç›´æ¥æŠŠå±æ€§ä¼ é€’ç»™ InitialContextã€‚æ¯”å¦‚ï¼š env.encoding=UTF8 è¿™å°±ä¼šåœ¨ InitialContext å®ä¾‹åŒ–æ—¶å¾€å®ƒçš„æ„é€ æ–¹æ³•ä¼ é€’å€¼ä¸º UTF8 çš„ encoding å±æ€§ã€‚ ä½ å¯ä»¥é€šè¿‡å®ç°æ¥å£ org.apache.ibatis.datasource.DataSourceFactory æ¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æ•°æ®æºå®ç°ï¼š 1234public interface DataSourceFactory &#123; void setProperties(Properties props); DataSource getDataSource();&#125; org.apache.ibatis.datasource.unpooled.UnpooledDataSourceFactory å¯è¢«ç”¨ä½œçˆ¶ç±»æ¥æ„å»ºæ–°çš„æ•°æ®æºé€‚é…å™¨ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µæ’å…¥ C3P0 æ•°æ®æºæ‰€å¿…éœ€çš„ä»£ç ï¼š 123456789import org.apache.ibatis.datasource.unpooled.UnpooledDataSourceFactory;import com.mchange.v2.c3p0.ComboPooledDataSource;public class C3P0DataSourceFactory extends UnpooledDataSourceFactory &#123; public C3P0DataSourceFactory() &#123; this.dataSource = new ComboPooledDataSource(); &#125;&#125; ä¸ºäº†ä»¤å…¶å·¥ä½œï¼Œè®°å¾—åœ¨é…ç½®æ–‡ä»¶ä¸­ä¸ºæ¯ä¸ªå¸Œæœ› MyBatis è°ƒç”¨çš„ setter æ–¹æ³•å¢åŠ å¯¹åº”çš„å±æ€§ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ä»¥è¿æ¥è‡³ PostgreSQL æ•°æ®åº“çš„ä¾‹å­ï¼š 123456&lt;dataSource type=&quot;org.myproject.C3P0DataSourceFactory&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;org.postgresql.Driver&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:postgresql:mydb&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;postgres&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;&lt;/dataSource&gt; æ•°æ®åº“å‚å•†æ ‡è¯†ï¼ˆdatabaseIdProviderï¼‰MyBatis å¯ä»¥æ ¹æ®ä¸åŒçš„æ•°æ®åº“å‚å•†æ‰§è¡Œä¸åŒçš„è¯­å¥ï¼Œè¿™ç§å¤šå‚å•†çš„æ”¯æŒæ˜¯åŸºäºæ˜ å°„è¯­å¥ä¸­çš„ databaseId å±æ€§ã€‚ MyBatis ä¼šåŠ è½½å¸¦æœ‰åŒ¹é…å½“å‰æ•°æ®åº“ databaseId å±æ€§å’Œæ‰€æœ‰ä¸å¸¦ databaseId å±æ€§çš„è¯­å¥ã€‚ å¦‚æœåŒæ—¶æ‰¾åˆ°å¸¦æœ‰ databaseId å’Œä¸å¸¦ databaseId çš„ç›¸åŒè¯­å¥ï¼Œåˆ™åè€…ä¼šè¢«èˆå¼ƒã€‚ ä¸ºæ”¯æŒå¤šå‚å•†ç‰¹æ€§ï¼Œåªè¦åƒä¸‹é¢è¿™æ ·åœ¨ mybatis-config.xml æ–‡ä»¶ä¸­åŠ å…¥ databaseIdProvider å³å¯ï¼š 1&lt;databaseIdProvider type=&quot;DB_VENDOR&quot; /&gt; databaseIdProvider å¯¹åº”çš„ DB_VENDOR å®ç°ä¼šå°† databaseId è®¾ç½®ä¸º DatabaseMetaData#getDatabaseProductName() è¿”å›çš„å­—ç¬¦ä¸²ã€‚ ç”±äºé€šå¸¸æƒ…å†µä¸‹è¿™äº›å­—ç¬¦ä¸²éƒ½éå¸¸é•¿ï¼Œè€Œä¸”ç›¸åŒäº§å“çš„ä¸åŒç‰ˆæœ¬ä¼šè¿”å›ä¸åŒçš„å€¼ï¼Œä½ å¯èƒ½æƒ³é€šè¿‡è®¾ç½®å±æ€§åˆ«åæ¥ä½¿å…¶å˜çŸ­ï¼š 12345&lt;databaseIdProvider type=&quot;DB_VENDOR&quot;&gt; &lt;property name=&quot;SQL Server&quot; value=&quot;sqlserver&quot;/&gt; &lt;property name=&quot;DB2&quot; value=&quot;db2&quot;/&gt; &lt;property name=&quot;Oracle&quot; value=&quot;oracle&quot; /&gt;&lt;/databaseIdProvider&gt; åœ¨æä¾›äº†å±æ€§åˆ«åæ—¶ï¼ŒdatabaseIdProvider çš„ DB_VENDOR å®ç°ä¼šå°† databaseId è®¾ç½®ä¸ºæ•°æ®åº“äº§å“åä¸å±æ€§ä¸­çš„åç§°ç¬¬ä¸€ä¸ªç›¸åŒ¹é…çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…çš„å±æ€§ï¼Œå°†ä¼šè®¾ç½®ä¸º â€œnullâ€ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ getDatabaseProductName() è¿”å›â€œOracle (DataDirect)â€ï¼ŒdatabaseId å°†è¢«è®¾ç½®ä¸ºâ€œoracleâ€ã€‚ ä½ å¯ä»¥é€šè¿‡å®ç°æ¥å£ org.apache.ibatis.mapping.DatabaseIdProvider å¹¶åœ¨ mybatis-config.xml ä¸­æ³¨å†Œæ¥æ„å»ºè‡ªå·±çš„ DatabaseIdProviderï¼š 123456public interface DatabaseIdProvider &#123; default void setProperties(Properties p) &#123; // ä» 3.5.2 å¼€å§‹ï¼Œè¯¥æ–¹æ³•ä¸ºé»˜è®¤æ–¹æ³• // ç©ºå®ç° &#125; String getDatabaseId(DataSource dataSource) throws SQLException;&#125; æ˜ å°„å™¨ï¼ˆmappersï¼‰æ—¢ç„¶ MyBatis çš„è¡Œä¸ºå·²ç»ç”±ä¸Šè¿°å…ƒç´ é…ç½®å®Œäº†ï¼Œæˆ‘ä»¬ç°åœ¨å°±è¦æ¥å®šä¹‰ SQL æ˜ å°„è¯­å¥äº†ã€‚ ä½†é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾åˆ°è¿™äº›è¯­å¥ã€‚ åœ¨è‡ªåŠ¨æŸ¥æ‰¾èµ„æºæ–¹é¢ï¼ŒJava å¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥æœ€å¥½çš„åŠæ³•æ˜¯ç›´æ¥å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾æ˜ å°„æ–‡ä»¶ã€‚ ä½ å¯ä»¥ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ï¼Œæˆ–å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆåŒ…æ‹¬ file:/// å½¢å¼çš„ URLï¼‰ï¼Œæˆ–ç±»åå’ŒåŒ…åç­‰ã€‚ä¾‹å¦‚ï¼š 12345678910111213141516171819202122&lt;!-- ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ --&gt;&lt;mappers&gt; &lt;mapper resource=&quot;org/mybatis/builder/AuthorMapper.xml&quot;/&gt; &lt;mapper resource=&quot;org/mybatis/builder/BlogMapper.xml&quot;/&gt; &lt;mapper resource=&quot;org/mybatis/builder/PostMapper.xml&quot;/&gt;&lt;/mappers&gt;&lt;!-- ä½¿ç”¨å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰ --&gt;&lt;mappers&gt; &lt;mapper url=&quot;file:///var/mappers/AuthorMapper.xml&quot;/&gt; &lt;mapper url=&quot;file:///var/mappers/BlogMapper.xml&quot;/&gt; &lt;mapper url=&quot;file:///var/mappers/PostMapper.xml&quot;/&gt;&lt;/mappers&gt;&lt;!-- ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å --&gt;&lt;mappers&gt; &lt;mapper class=&quot;org.mybatis.builder.AuthorMapper&quot;/&gt; &lt;mapper class=&quot;org.mybatis.builder.BlogMapper&quot;/&gt; &lt;mapper class=&quot;org.mybatis.builder.PostMapper&quot;/&gt;&lt;/mappers&gt;&lt;!-- å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨ --&gt;&lt;mappers&gt; &lt;package name=&quot;org.mybatis.builder&quot;/&gt;&lt;/mappers&gt; è¿™äº›é…ç½®ä¼šå‘Šè¯‰ MyBatis å»å“ªé‡Œæ‰¾æ˜ å°„æ–‡ä»¶ï¼Œå‰©ä¸‹çš„ç»†èŠ‚å°±åº”è¯¥æ˜¯æ¯ä¸ª SQL æ˜ å°„æ–‡ä»¶äº†ï¼Œä¹Ÿå°±æ˜¯æ¥ä¸‹æ¥æˆ‘ä»¬è¦è®¨è®ºçš„ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"MyBatis","slug":"MyBatis","permalink":"https://guoshunfa.com/tags/MyBatis/"}]},{"title":"SpringBootæ¡†æ¶ å¼•å…¥å¤–éƒ¨JaråŒ…","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringBootæ¡†æ¶-å¼•å…¥å¤–éƒ¨JaråŒ…","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.308Z","comments":true,"path":"2022/07/SpringBootæ¡†æ¶-å¼•å…¥å¤–éƒ¨JaråŒ…/","link":"","permalink":"https://guoshunfa.com/2022/07/SpringBoot%E6%A1%86%E6%9E%B6-%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8Jar%E5%8C%85/","excerpt":"","text":"è½¬è½½è‡ªï¼šhttps://blog.csdn.net/m0_67401746/article/details/124035099 åœ¨é¡¹ç›®ä¸­ï¼Œæœ‰æ—¶å€™éœ€è¦å¼•å…¥å¤–éƒ¨jaråŒ…ï¼Œå¯åŠ¨è¿è¡Œã€‚æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ç›´æ¥åœ¨é¡¹ç›®ä¸­æ·»åŠ jaråŒ…ï¼Œå¦ä¸€ç§æ˜¯åœ¨æœ¬åœ°mavenä»“åº“ä¸­æ·»åŠ jaråŒ…ï¼Œç„¶ååœ¨pom.xmlæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–ã€‚ ç¬¬ä¸€ç§æ–¹å¼ï¼šåœ¨é¡¹ç›®ä¸­æ·»åŠ jaråŒ…step1ï¼šåœ¨src&#x2F;main&#x2F;resourcesä¸‹åˆ›å»ºlibç›®å½•ï¼Œç„¶åå°†jaråŒ…æ”¾åœ¨è¯¥ç›®å½•ä¸‹ step2ï¼šç„¶ååœ¨project structureä¸­å¼•å…¥è¯¥lib ç¬¬äºŒç§æ–¹å¼ï¼šåœ¨pom.xmlæ–‡ä»¶ä¸­å¼•å…¥å¤–éƒ¨jaråŒ…step1ï¼šé€šè¿‡å‘½ä»¤è¡Œæ–¹å¼ï¼Œåœ¨æœ¬åœ°mavenä»“åº“ä¸­æ·»åŠ jaråŒ… æ‰“å¼€cmdï¼Œæ‰§è¡Œmvnå‘½ä»¤ mvn install:install-file -DgroupId=com.awen.testjar -DartifactId=awen-testjar -Dversion=1.0 -Dpackaging=jar -Dfile=D:developawen-testjar.jar DgroupIdï¼šå»ºè®®ä¸ºåŒ…è·¯å¾„ DartifactIdï¼šjaråŒ…åç§° Dversionï¼šjaråŒ…ç‰ˆæœ¬å· Dpackagingï¼šjar Dfileï¼šæœ¬åœ°jaråŒ…åœ°å€ step2ï¼šåœ¨pom.xmlæ–‡ä»¶ä¸­å¼•å…¥è¯¥ä¾èµ– com.awen.testjar awen-testjar 1.0","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Jar","slug":"Jar","permalink":"https://guoshunfa.com/tags/Jar/"}]},{"title":"SpringBootæ¡†æ¶ ç±»çš„ç†è§£ä¸ä½¿ç”¨","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringBootæ¡†æ¶-ç±»çš„ç†è§£ä¸ä½¿ç”¨","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.308Z","comments":true,"path":"2022/07/SpringBootæ¡†æ¶-ç±»çš„ç†è§£ä¸ä½¿ç”¨/","link":"","permalink":"https://guoshunfa.com/2022/07/SpringBoot%E6%A1%86%E6%9E%B6-%E7%B1%BB%E7%9A%84%E7%90%86%E8%A7%A3%E4%B8%8E%E4%BD%BF%E7%94%A8/","excerpt":"","text":"@RestController å’Œ @RequestMapping æ³¨è§£12345678910111213141516171819import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.EnableAutoConfiguration;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RestController@EnableAutoConfigurationpublic class MyApplication &#123; @RequestMapping(&quot;/&quot;) String home() &#123; return &quot;Hello World!&quot;; &#125; public static void main(String[] args) &#123; SpringApplication.run(MyApplication.class, args); &#125;&#125; MyApplicationæˆ‘ä»¬ç­çº§çš„ç¬¬ä¸€ä¸ªæ³¨è§£æ˜¯@RestController. è¿™ç§°ä¸ºæ„é€ å‹æ³¨é‡Šã€‚å®ƒä¸ºé˜…è¯»ä»£ç çš„äººå’Œ Spring æä¾›äº†è¯¥ç±»æ‰®æ¼”ç‰¹å®šè§’è‰²çš„æç¤ºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ç±»æ˜¯ä¸€ä¸ª web @Controllerï¼Œå› æ­¤ Spring åœ¨å¤„ç†ä¼ å…¥çš„ web è¯·æ±‚æ—¶ä¼šè€ƒè™‘å®ƒã€‚ @RequestMappingæ³¨é‡Šæä¾›â€œè·¯ç”±â€ä¿¡æ¯ã€‚å®ƒå‘Šè¯‰ Springï¼Œä»»ä½•å¸¦æœ‰/è·¯å¾„çš„ HTTP è¯·æ±‚éƒ½åº”è¯¥æ˜ å°„åˆ°è¯¥homeæ–¹æ³•ã€‚æ³¨é‡Šå‘Šè¯‰ Springå°†@RestControllerç»“æœå­—ç¬¦ä¸²ç›´æ¥å‘ˆç°ç»™è°ƒç”¨è€…ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"}]},{"title":"SpringBootæ¡†æ¶ å¸¸ç”¨ç±»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringBootæ¡†æ¶å¸¸ç”¨ç±»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.308Z","comments":true,"path":"2022/07/SpringBootæ¡†æ¶å¸¸ç”¨ç±»/","link":"","permalink":"https://guoshunfa.com/2022/07/SpringBoot%E6%A1%86%E6%9E%B6%E5%B8%B8%E7%94%A8%E7%B1%BB/","excerpt":"","text":"è®°å½•SpringBoot å¸¸ç”¨ç±»ï¼Œä½œç”¨å’Œç”¨æ³•ã€‚ 1. CommandLineRunner(æ¥å£) é¡¹ç›®æ„å»º é¢„åŠ è½½ ApplicationRunner åŒç†ã€‚æœ‰æ—¶é—´æ€»ç»“ä¸¤è€…çš„åŒºåˆ«ã€‚ åœ¨ä½¿ç”¨SpringBootæ„å»ºé¡¹ç›®æ—¶ï¼Œæœ‰ä¸€äº›é¢„å…ˆæ•°æ®çš„åŠ è½½ã€‚ demo: 1234567891011121314151617@Component@Order(1)public class Run01 implements CommandLineRunner &#123; @Override public void run(String... args) throws Exception &#123; System.out.println(&quot;run01&quot;); &#125;&#125;@Component@Order(2)public class Run02 implements CommandLineRunner &#123; @Override public void run(String... args) throws Exception &#123; System.out.println(&quot;run02&quot;); &#125;&#125; è¾“å‡º: 12run01run02","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"}]},{"title":"SpringMVC å‰åç«¯ä¼ å‚","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringMVC-å‰åç«¯ä¼ å‚","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.309Z","comments":true,"path":"2022/07/SpringMVC-å‰åç«¯ä¼ å‚/","link":"","permalink":"https://guoshunfa.com/2022/07/SpringMVC-%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BC%A0%E5%8F%82/","excerpt":"","text":"ModelAndView + thymeleaf åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šdemoã€‚ properties: 1234567891011121314# ----------------------Springmvcé…ç½®-----------------------------# æŒ‡å®šå‰ç«¯é¡µé¢çš„å‰ç¼€spring.mvc.view.prefix=/# æŒ‡å®šå‰ç«¯é¡µé¢çš„åç¼€spring.mvc.view.suffix=.html# ------------------------thymeleafé…ç½®-----------------------------------spring.thymeleaf.servlet.content-type=text/html# æŒ‡å®šæ–‡ä»¶è·¯å¾„spring.thymeleaf.prefix=classpath:/templates/spring.thymeleaf.check-template=falsespring.thymeleaf.check-template-location=falsespring.thymeleaf.mode=HTMLspring.thymeleaf.encoding=UTF-8spring.thymeleaf.cache=false maven: 123456&lt;!-- thymeleaf --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;&lt;/dependency&gt; &lt;!-- çœç•¥å…¶ä»–springbootåŒ… --&gt; controller: 1234567891011// é¡µé¢è·³è½¬controller@Controllerpublic class PageController &#123; @RequestMapping(&quot;/&quot;) public ModelAndView index() &#123; ModelAndView mav = new ModelAndView(); mav.addObject(&quot;testParam&quot;, &quot;æ¬§å¼&quot;); mav.setViewName(&quot;index&quot;); return mav; &#125;&#125; html: 12345678&lt;html lang=&quot;zh-CN&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;&lt;script th:inline=&quot;javascript&quot;&gt; var testParam = [[$&#123;testParam&#125;]]; console.log(testParam)&lt;/script&gt;&lt;/html&gt; æ•ˆæœï¼š","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://guoshunfa.com/tags/SpringMVC/"}]},{"title":"SpringBootæ¡†æ¶ é¡¹ç›®å¯åŠ¨æ—¶æ‰§è¡Œ","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringBootæ¡†æ¶-é¡¹ç›®å¯åŠ¨æ—¶æ‰§è¡Œ","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.308Z","comments":true,"path":"2022/07/SpringBootæ¡†æ¶-é¡¹ç›®å¯åŠ¨æ—¶æ‰§è¡Œ/","link":"","permalink":"https://guoshunfa.com/2022/07/SpringBoot%E6%A1%86%E6%9E%B6-%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8%E6%97%B6%E6%89%A7%E8%A1%8C/","excerpt":"","text":"æœ‰æ—¶éœ€è¦åœ¨é¡¹ç›®å¯åŠ¨æ—¶åŠ è½½ä¸€éƒ¨åˆ†æ•°æ®ï¼Œè¿™æ—¶å°±è¦æœ‰ä¸€éƒ¨åˆ†ä»£ç åœ¨é¡¹ç›®å¯åŠ¨æ—¶è¿è¡Œã€‚ Springbooté¡¹ç›®å®ç°å¯åŠ¨æ—¶è¿è¡Œä»£ç çš„æ–¹å¼æœ‰å››ç§ã€‚ 1. PostConstructæ³¨è§£12345678910111213import org.springframework.stereotype.Component;import javax.annotation.PostConstruct;@Componentpublic class Init1 &#123; @PostConstruct public void init() &#123; System.out.println(&quot;init1&quot;); &#125;&#125; 2. å®ç°InitializingBeanæ¥å£12345678910import org.springframework.beans.factory.InitializingBean;import org.springframework.stereotype.Component;@Componentpublic class Init2 implements InitializingBean &#123; @Override public void afterPropertiesSet() throws Exception &#123; System.out.println(&quot;init2&quot;); &#125;&#125; 3. å®ç°CommandLineRunneræ¥å£å¯ä»¥é€šè¿‡åœ¨ç±»å‹åŠ @Orderæ³¨è§£æ¥æ§åˆ¶æ‰§è¡Œé¡ºåºã€‚ 12345678910import org.springframework.boot.CommandLineRunner;import org.springframework.stereotype.Component;@Componentpublic class Init3 implements CommandLineRunner &#123; @Override public void run(String... args) throws Exception &#123; System.out.println(&quot;init3&quot;); &#125;&#125; 4. æ”¾åœ¨SpringBootå¯åŠ¨ç±»ä¸­123456789@SpringBootApplicationpublic class PandaBaseApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(PandaBaseApplication.class, args); System.out.println(&quot;init4&quot;); &#125;&#125;","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"}]},{"title":"SpringSecurityæ¡†æ¶ å®˜æ–¹ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringSecurityæ¡†æ¶å®˜æ–¹ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.309Z","comments":true,"path":"2022/07/SpringSecurityæ¡†æ¶å®˜æ–¹ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/SpringSecurity%E6%A1%86%E6%9E%B6%E5%AE%98%E6%96%B9%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"SpringSecurity å®˜æ–¹ æ¦‚è¿°Spring Security æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”é«˜åº¦å¯å®šåˆ¶çš„èº«ä»½éªŒè¯å’Œè®¿é—®æ§åˆ¶æ¡†æ¶ã€‚å®ƒæ˜¯ä¿æŠ¤åŸºäº Spring çš„åº”ç”¨ç¨‹åºçš„äº‹å®æ ‡å‡†ã€‚ Spring Security æ˜¯ä¸€ä¸ªä¸“æ³¨äºä¸º Java åº”ç”¨ç¨‹åºæä¾›èº«ä»½éªŒè¯å’Œæˆæƒçš„æ¡†æ¶ã€‚ä¸æ‰€æœ‰ Spring é¡¹ç›®ä¸€æ ·ï¼ŒSpring Security çš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒå¯ä»¥è½»æ¾æ‰©å±•ä»¥æ»¡è¶³è‡ªå®šä¹‰éœ€æ±‚ ç‰¹å¾ å¯¹èº«ä»½éªŒè¯å’Œæˆæƒçš„å…¨é¢å’Œå¯æ‰©å±•æ”¯æŒ é˜²æ­¢ä¼šè¯å›ºå®šã€ç‚¹å‡»åŠ«æŒã€è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ ç­‰æ”»å‡» Servlet API é›†æˆ å¯é€‰æ‹©ä¸ Spring Web MVC é›†æˆ å¤šå¾—å¤šâ€¦ èµ„æº è·å¾—å¸®åŠ© è·å– Spring Security å…¥é—¨ å…¥é—¨ï¼ˆServletï¼‰ å…¥é—¨ (WebFlux) è´¡çŒ® å­¦ä¹  æ¯ä¸ªSpring é¡¹ç›®éƒ½æœ‰è‡ªå·±çš„ï¼›å®ƒéå¸¸è¯¦ç»†åœ°è§£é‡Šäº†å¦‚ä½•ä½¿ç”¨é¡¹ç›®åŠŸèƒ½ä»¥åŠä½¿ç”¨å®ƒä»¬å¯ä»¥å®ç°ä»€ä¹ˆã€‚ ç‰ˆæœ¬ å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ 5.7.5 å½“å‰çš„ é—ä¼ ç®—æ³• å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ 6.0.0-å¿«ç…§ å¿«ç…§ å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ 6.0.0-RC1 å‰ å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ 5.8.0-å¿«ç…§ å¿«ç…§ å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ 5.8.0-RC1 å‰ å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ 5.7.6-å¿«ç…§ å¿«ç…§ å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ 5.6.10-å¿«ç…§ å¿«ç…§ å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ 5.6.9 é—ä¼ ç®—æ³• å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ 5.5.8 é—ä¼ ç®—æ³• å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ 5.4.10 é—ä¼ ç®—æ³• å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ 5.3.13.å‘å¸ƒ é—ä¼ ç®—æ³• å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚ 5.2.15.å‘å¸ƒ é—ä¼ ç®—æ³• å‚è€ƒæ–‡æ¡£ APIæ–‡æ¡£ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SpringSecurity","slug":"SpringSecurity","permalink":"https://guoshunfa.com/tags/SpringSecurity/"}]},{"title":"Spring ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/Springä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.309Z","comments":true,"path":"2022/07/Springä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Spring%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"Springå®˜ç½‘ ä¸ºä»€ä¹ˆæ˜¯Springï¼ŸSpring ä½¿æ¯ä¸ªäººçš„ Java ç¼–ç¨‹æ›´å¿«ã€æ›´å®¹æ˜“ã€æ›´å®‰å…¨ã€‚Spring å¯¹é€Ÿåº¦ã€ç®€å•æ€§å’Œç”Ÿäº§åŠ›çš„å…³æ³¨ä½¿å…¶æˆä¸ºä¸–ç•Œä¸Šæœ€å—æ¬¢è¿çš„Javaæ¡†æ¶ã€‚ åˆ°å¤„éƒ½æ˜¯SpringSpring çš„çµæ´»åº“å—åˆ°å…¨ä¸–ç•Œå¼€å‘äººå‘˜çš„ä¿¡ä»»ã€‚Spring æ¯å¤©ä¸ºæ•°ç™¾ä¸‡æœ€ç»ˆç”¨æˆ·æä¾›ä»¤äººæ„‰æ‚¦çš„ä½“éªŒâ€”â€”æ— è®ºæ˜¯æµåª’ä½“ç”µè§†,ç½‘ä¸Šè´­ç‰©ï¼Œæˆ–æ— æ•°å…¶ä»–åˆ›æ–°è§£å†³æ–¹æ¡ˆã€‚Spring ä¹Ÿæœ‰æ¥è‡ªç§‘æŠ€ç•Œæ‰€æœ‰çŸ¥åäººå£«çš„è´¡çŒ®ï¼ŒåŒ…æ‹¬é˜¿é‡Œå·´å·´ã€äºšé©¬é€Šã€è°·æ­Œã€å¾®è½¯ç­‰ã€‚ Springå¾ˆçµæ´»Spring çµæ´»è€Œå…¨é¢çš„æ‰©å±•é›†å’Œç¬¬ä¸‰æ–¹åº“è®©å¼€å‘äººå‘˜å¯ä»¥æ„å»ºå‡ ä¹ä»»ä½•å¯ä»¥æƒ³è±¡åˆ°çš„åº”ç”¨ç¨‹åºã€‚Spring Framework çš„æ ¸å¿ƒæ˜¯æ§åˆ¶åè½¬ (IoC)å’Œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ç‰¹æ€§ä¸ºå¹¿æ³›çš„ç‰¹æ€§å’ŒåŠŸèƒ½é›†æä¾›äº†åŸºç¡€ã€‚æ— è®ºæ‚¨æ˜¯ä¸º Web æ„å»ºå®‰å…¨ã€å“åº”å¼ã€åŸºäºäº‘çš„å¾®æœåŠ¡ï¼Œè¿˜æ˜¯ä¸ºä¼ä¸šæ„å»ºå¤æ‚çš„æµæ•°æ®æµï¼ŒSpring éƒ½æœ‰å¯ä»¥æä¾›å¸®åŠ©çš„å·¥å…·ã€‚ Springå¤šäº§å¼¹ç°§é´æ”¹å˜æ‚¨å¤„ç† Java ç¼–ç¨‹ä»»åŠ¡çš„æ–¹å¼ï¼Œä»æ ¹æœ¬ä¸Šç®€åŒ–æ‚¨çš„ä½“éªŒã€‚Spring Boot ç»“åˆäº†åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡å’Œè‡ªåŠ¨é…ç½®çš„åµŒå…¥å¼ Web æœåŠ¡å™¨ç­‰å¿…éœ€å“ï¼Œä½¿å¾®æœåŠ¡å‘å±•ä¸åœ¨è¯ä¸‹ã€‚ä¸ºäº†æ›´å¿«åœ°è¿›è¡Œï¼Œæ‚¨å¯ä»¥å°† Spring Boot ä¸ Spring Cloud ä¸°å¯Œçš„æ”¯æŒåº“ã€æœåŠ¡å™¨ã€æ¨¡å¼å’Œæ¨¡æ¿ç»„åˆï¼Œä»¥å®‰å…¨åœ°å°†æ•´ä¸ªåŸºäºå¾®æœåŠ¡çš„æ¶æ„éƒ¨ç½²åˆ°äº‘ï¼Œåˆ›çºªå½•çš„æ—¶é—´ã€‚ Springå¿«æˆ‘ä»¬çš„å·¥ç¨‹å¸ˆéå¸¸å…³å¿ƒæ€§èƒ½ã€‚ä½¿ç”¨ Springï¼Œæ‚¨ä¼šæ³¨æ„åˆ°é»˜è®¤æƒ…å†µä¸‹çš„å¿«é€Ÿå¯åŠ¨ã€å¿«é€Ÿå…³é—­å’Œä¼˜åŒ–æ‰§è¡Œã€‚è¶Šæ¥è¶Šå¤šçš„Springé¡¹ç›®ä¹Ÿæ”¯æŒè¢«åŠ¨çš„ï¼ˆéé˜»å¡ï¼‰ç¼–ç¨‹æ¨¡å‹ä»¥è·å¾—æ›´é«˜çš„æ•ˆç‡ã€‚å¼€å‘äººå‘˜ç”Ÿäº§åŠ›æ˜¯ Spring çš„è¶…èƒ½åŠ›ã€‚Spring Boot å¯å¸®åŠ©å¼€å‘äººå‘˜è½»æ¾æ„å»ºåº”ç”¨ç¨‹åºï¼Œè€Œä¸”ä¸å…¶ä»–ç«äº‰èŒƒä¾‹ç›¸æ¯”ï¼Œå·¥ä½œé‡è¦å°‘å¾—å¤šã€‚åµŒå…¥å¼ Web æœåŠ¡å™¨ã€è‡ªåŠ¨é…ç½®å’Œâ€œfat jarâ€å¯å¸®åŠ©æ‚¨å¿«é€Ÿå…¥é—¨ï¼Œåˆ›æ–°å¦‚Spring DevTools ä¸­çš„ LiveReloadæ„å‘³ç€å¼€å‘äººå‘˜å¯ä»¥æ¯”ä»¥å¾€æ›´å¿«åœ°è¿›è¡Œè¿­ä»£ã€‚æ‚¨ç”šè‡³å¯ä»¥åœ¨å‡ ç§’é’Ÿå†…å¯åŠ¨ä¸€ä¸ªæ–°çš„ Spring é¡¹ç›®ï¼Œä½¿ç”¨ Spring Initializrå¯åŠ¨.spring.io.","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"https://guoshunfa.com/tags/Spring/"}]},{"title":"Springæ¡†æ¶ PackageInfoçš„ä½¿ç”¨","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/Springæ¡†æ¶PackageInfoçš„ä½¿ç”¨","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.309Z","comments":true,"path":"2022/07/Springæ¡†æ¶PackageInfoçš„ä½¿ç”¨/","link":"","permalink":"https://guoshunfa.com/2022/07/Spring%E6%A1%86%E6%9E%B6PackageInfo%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"","text":"åœºæ™¯ä»¥åŒ…(package)ä¸ºèŒƒå›´è¿›è¡Œé…ç½®ã€‚å¦‚ï¼šå°†æ³¨è§£ç›´æ¥åŠ åˆ°åŒ…çš„ç»´åº¦ã€‚ åˆ›å»ºpackage-info.java ä½¿ç”¨eclipseè¿›è¡Œåˆ›å»ºåŒ…æ—¶ï¼Œå¯ä»¥å‹¾é€‰â€œCreate package-info.javaâ€æŒ‰é’®ï¼Œè¿›è¡Œåˆ›å»ºã€‚ å¦‚æœåˆ›å»ºåŒ…æ—¶æ²¡æœ‰åˆ›å»ºpackage-info.javaï¼Œåªèƒ½åœ¨åŒ…å¯¹åº”æ–‡ä»¶å¤¹é‡Œï¼Œæ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªpackage-info.javaï¼Œå†™ä¸ŠåŒ…åï¼Œæœ€ååˆ·æ–°ideå³å¯ã€‚ package-info.javaçš„ä½¿ç”¨ æä¾›åŒ…çº§åˆ«çš„ç±»(æˆ–æ¥å£)ï¼Œè¿™äº›ç±»(æˆ–æ¥å£)åªæœ‰æœ¬åŒ…é‡Œæ‰èƒ½è®¿é—®ï¼Œå³ä½¿æ˜¯å­åŒ…ä¹Ÿä¸èƒ½è®¿é—®ã€‚ æä¾›åŒ…çš„æ•´ä½“æ³¨é‡Šè¯´æ˜ã€‚ package-info.java 1234567891011121314151617181920212223242526272829303132/** * &lt;b&gt;package-infoä¸æ˜¯å¹³å¸¸ç±»ï¼Œå…¶ä½œç”¨æœ‰ä¸‰ä¸ª:&lt;/b&gt;&lt;br&gt; * 1ã€ä¸ºæ ‡æ³¨åœ¨åŒ…ä¸ŠAnnotationæä¾›ä¾¿åˆ©ï¼›&lt;br&gt; * 2ã€å£°æ˜åŒ…çš„ç§æœ‰ç±»å’Œå¸¸é‡ï¼›&lt;br&gt; * 3ã€æä¾›åŒ…çš„æ•´ä½“æ³¨é‡Šè¯´æ˜ã€‚&lt;br&gt; */ @JyzTargetPackage(version=&quot;1.0&quot;) package com.jyz.study.jdk.annotation; class PackageInfo&#123; public void common()&#123; System.out.println(&quot;sa&quot;); &#125; &#125; class PackageInfoGeneric&lt;T extends Throwable&gt;&#123; private T obj; public void set(T obj)&#123; this.obj = obj; &#125; public void common()&#123; System.out.println(obj + &quot;sa&quot;); &#125; &#125; interface packageInfoInteger&#123; public void test(); &#125; class PackageConstants&#123; public static final String ERROE_CODE = &quot;100001&quot;; &#125; TestPackageInfo.java 1234567891011121314151617181920212223242526272829303132333435363738394041package com.jyz.study.jdk.annotation; import java.io.IOException; /** * æµ‹è¯•package-info.javaæ–‡ä»¶çš„ä½œç”¨ * 1ã€ä¸ºæ ‡æ³¨åœ¨åŒ…ä¸ŠAnnotationæä¾›ä¾¿åˆ©ï¼›&lt;br&gt; * 2ã€å£°æ˜åŒ…çš„ç§æœ‰ç±»å’Œå¸¸é‡ï¼›&lt;br&gt; * @author JoyoungZhang@gmail.com * */ public class TestPackageInfo &#123; public static void main(String[] args) &#123; //1 Package p = Package.getPackage(&quot;com.jyz.study.jdk.annotation&quot;); if(p != null &amp;&amp; p.isAnnotationPresent(JyzTargetPackage.class))&#123; JyzTargetPackage nav = p.getAnnotation(JyzTargetPackage.class); if(nav != null)&#123; System.out.println(&quot;package version:&quot; + nav.version()); &#125; &#125; //2 PackageInfo packageInfo = new PackageInfo(); packageInfo.common(); //æ³›å‹ä¹Ÿèƒ½å¾ˆå¥½çš„å·¥ä½œï¼Œåœ¨pakcage-info.javaé‡Œå®šä¹‰çš„ç±»å’Œæ™®é€šç±»æ²¡ä»€ä¹ˆåŒºåˆ« PackageInfoGeneric&lt;Exception&gt; packageInfoGeneric = new PackageInfoGeneric&lt;Exception&gt;(); packageInfoGeneric.set(new IOException(&quot;device io&quot;)); packageInfoGeneric.common(); Sub sub = new Sub(); sub.test(); System.out.println(PackageConstants.ERROE_CODE); &#125; &#125; class Sub implements packageInfoInteger&#123; @Override public void test() &#123; System.out.println(&quot;sub&quot;); &#125; &#125; Console output 12345package version:1.0 sa java.io.IOException: device iosa sub 100001 éœ€è¦æ³¨æ„ä¸¤ç‚¹ package-info.javaé‡Œä¸èƒ½å£°æ˜public class(æˆ– interface) åˆšå¼€å§‹p.isAnnotationPresent(JyzTargetPackage.class)è¿”å›falseï¼Œåæ¥æ‰¾åˆ°åŸå› JyzTargetPackageæ²¡æœ‰åŠ ä¸Š@Retention(RetentionPolicy.RUNTIME)ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"https://guoshunfa.com/tags/Spring/"}]},{"title":"Springæ¡†æ¶ SpringEvent","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/Springæ¡†æ¶SpringEvent","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.309Z","comments":true,"path":"2022/07/Springæ¡†æ¶SpringEvent/","link":"","permalink":"https://guoshunfa.com/2022/07/Spring%E6%A1%86%E6%9E%B6SpringEvent/","excerpt":"","text":"Spring å®˜æ–¹æ–‡æ¡£ç¿»è¯‘å¦‚ä¸‹ ï¼š ApplicationContext é€šè¿‡ ApplicationEvent ç±»å’Œ ApplicationListener æ¥å£è¿›è¡Œäº‹ä»¶å¤„ç†ã€‚ å¦‚æœå°†å®ç° ApplicationListener æ¥å£çš„ bean æ³¨å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œåˆ™æ¯æ¬¡ä½¿ç”¨ ApplicationContext å‘å¸ƒ ApplicationEvent æ—¶ï¼Œéƒ½ä¼šé€šçŸ¥è¯¥ beanã€‚ æœ¬è´¨ä¸Šï¼Œè¿™æ˜¯æ ‡å‡†çš„è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ã€‚ Springçš„äº‹ä»¶ï¼ˆApplication Eventï¼‰å…¶å®å°±æ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ï¼Œä¸€ä¸ª Bean å¤„ç†å®Œæˆä»»åŠ¡åå¸Œæœ›é€šçŸ¥å…¶å®ƒ Bean æˆ–è€…è¯´ ä¸€ä¸ªBean æƒ³è§‚å¯Ÿç›‘å¬å¦ä¸€ä¸ªBeançš„è¡Œä¸ºã€‚ Spring äº‹ä»¶åªéœ€è¦å‡ æ­¥ï¼š è‡ªå®šä¹‰äº‹ä»¶ï¼Œç»§æ‰¿ ApplicationEvent å®šä¹‰ç›‘å¬å™¨ï¼Œå®ç° ApplicationListener æˆ–è€…é€šè¿‡ @EventListener æ³¨è§£åˆ°æ–¹æ³•ä¸Š å®šä¹‰å‘å¸ƒè€…ï¼Œé€šè¿‡ ApplicationEventPublisher 1. è‡ªå®šä¹‰Event1234567891011@Datapublic class DemoEvent extends ApplicationEvent &#123; private Long id; private String message; public DemoEvent(Object source, Long id, String message) &#123; super(source); this.id = id; this.message = message; &#125;&#125; äº‹ä»¶æ²¡è¦å¤„ç†çš„ç›‘å¬å™¨ï¼Œå°±ä¼šè¢«æŠ›å¼ƒã€‚ ä¸€ä¸ªäº‹ä»¶å¯ä»¥åŒæ—¶è¢«å¤šä¸ªç›‘å¬å¤„ç†ç±»ç›‘å¬å¤„ç†ã€‚ å¦‚æœä»£ç ç»“æ„è¾ƒå¤æ‚ï¼Œå¤šå¤„å‘å¸ƒç›¸åŒçš„äº‹ä»¶ï¼Œå»ºè®®å‘å¸ƒäº‹ä»¶æ—¶å°†thisä½œä¸ºsourceä¼ é€’ï¼Œä¾¿äºé€šè¿‡åˆ†ææ—¥å¿—ç¡®å®šå‘å¸ƒæºã€‚ ä»¥ä¸Šå¤„ç†äº‹ä»¶éƒ½æ˜¯åŒæ­¥çš„ï¼Œå¦‚æœå‘å¸ƒäº‹ä»¶å¤„çš„ä¸šåŠ¡å­˜åœ¨äº‹åŠ¡ï¼Œç›‘å¬å™¨å¤„ç†ä¹Ÿä¼šåœ¨ç›¸åŒçš„äº‹åŠ¡ä¸­ã€‚è¿™ä¸ªä¸€å®šè¦æ³¨æ„ï¼å¦‚æœå¯¹äºäº‹ä»¶çš„å¤„ç†ä¸æƒ³å—åˆ°å½±å“ï¼Œå¯ä»¥onApplicationEventæ–¹æ³•ä¸ŠåŠ @Ayncæ”¯æŒå¼‚æ­¥(å‚è€ƒtaskExecutorçš„ä½¿ç”¨)ã€‚ åŸç†éƒ¨åˆ†å¯ä»¥å‚è€ƒ åšå®¢ äº‹ä»¶ä½“ç³» 2. ç›‘å¬å™¨ ç›‘å¬å™¨åˆ†ä¸ºä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯å®ç°ApplicationListener æ¥å£ï¼Œä¸€ç§æ˜¯æ–¹æ³•ä¸ŠåŠ @EventListeneræ³¨è§£ã€‚ å®ç°ApplicationListener æ¥å£ 12345678910@Componentpublic class DemoListener implements ApplicationListener&lt;DemoEvent&gt; &#123; @Override public void onApplicationEvent(DemoEvent demoEvent) &#123; System.out.println(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;DemoListener&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;); System.out.println(&quot;æ”¶åˆ°äº†ï¼š&quot; + demoEvent.getSource() + &quot;æ¶ˆæ¯;æ—¶é—´ï¼š&quot; + demoEvent.getTimestamp()); System.out.println(&quot;æ¶ˆæ¯ï¼š&quot; + demoEvent.getId() + &quot;:&quot; + demoEvent.getMessage()); &#125;&#125; æ³›å‹ä¸ºéœ€è¦ç›‘å¬çš„äº‹ä»¶ç±»å‹ å¦‚æœè¦å®ç°æœ‰åºçš„ç›‘å¬ï¼Œå®ç°SmartApplicationListener æ¥å£å³å¯ã€‚ @EventListener 12345678910@Componentpublic class DemoListener2 &#123; @EventListener public void onApplicationEvent(DemoEvent demoEvent) &#123; System.out.println(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;DemoListener2&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;); System.out.println(&quot;æ”¶åˆ°äº†ï¼š&quot; + demoEvent.getSource() + &quot;æ¶ˆæ¯;æ—¶é—´ï¼š&quot; + demoEvent.getTimestamp()); System.out.println(&quot;æ¶ˆæ¯ï¼š&quot; + demoEvent.getId() + &quot;:&quot; + demoEvent.getMessage()); &#125;&#125; ä¼šæ ¹æ®æ–¹æ³•å‚æ•°ç±»å‹æ¥è‡ªåŠ¨ç›‘å¬ç›¸åº”äº‹ä»¶çš„å‘å¸ƒã€‚ å¦‚æœè¦ç›‘å¬å¤šä¸ªäº‹ä»¶ç±»å‹çš„å‘å¸ƒï¼Œå¯ä»¥åœ¨@EventListener(classes &#x3D; {FaceEvent.class,ArmEvent.class})æŒ‡å®šï¼Œspringä¼šå¤šæ¬¡è°ƒç”¨æ­¤æ–¹æ³•æ¥å¤„ç†å¤šä¸ªäº‹ä»¶ã€‚ä½†æ˜¯æ³¨æ„æ­¤æ—¶ï¼Œæ–¹æ³•å‚æ•°ä¸èƒ½æœ‰å¤šä¸ªï¼Œå¦åˆ™ä¼šå‘ç”Ÿè½¬æ¢å¼‚å¸¸ï¼Œå¯ä»¥å°†ä½¿ç”¨å¤šä¸ªäº‹ä»¶çš„çˆ¶ç±»ä½œä¸ºå”¯ä¸€çš„æ–¹æ³•å‚æ•°æ¥æ¥æ”¶å¤„ç†äº‹ä»¶ï¼Œä½†é™¤éå¿…è¦å¦åˆ™å¹¶ä¸æ¨èç›‘å¬å¤šä¸ªäº‹ä»¶çš„å‘å¸ƒã€‚ â€‹ å¦‚æœæœ‰å¤šä¸ªç›‘å¬å™¨ç›‘å¬åŒä¸€äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–¹æ³•ä¸Šä½¿ç”¨springçš„@orderæ³¨è§£æ¥å®šä¹‰å¤šä¸ªç›‘å¬å™¨çš„é¡ºåºï¼Œå¦‚ï¼š 123456789101112131415161718@EventListener @Order(4) public void onApplicationEvent(FaceEvent event) &#123; User user = (User) event.getSource(); LOGGER.info(&quot;===&gt; A æ”¶åˆ°äººè„¸äº‹ä»¶: &#123;&#125;&quot;,user); &#125; @EventListener(&#123;FaceEvent.class,ArmEvent.class&#125;) @Order(3) public void onApplicationEvent3(Object event) &#123; if(event instanceof FaceEvent)&#123; LOGGER.info(&quot;===&gt; B æ”¶åˆ°äººè„¸äº‹ä»¶: &#123;&#125;&quot;,((FaceEvent) event).getEventData()); &#125;else if(event instanceof ArmEvent)&#123; ArmEvent armEvent = (ArmEvent) event; LOGGER.info(&quot;===&gt; B æ”¶åˆ°è‡‚è†€äº‹ä»¶: &#123;&#125;&quot;,armEvent.getEventData()); &#125; &#125; @EventListenerè¿˜æœ‰ä¸€ä¸ªå±æ€§ï¼Œconditionï¼ˆï¼‰é‡Œå¯ä»¥ä½¿ç”¨SPELè¡¨è¾¾å¼æ¥è¿‡æ»¤ç›‘å¬åˆ°äº‹ä»¶ï¼Œå³åªæœ‰ç¬¦åˆæŸç§æ¡ä»¶çš„æ‰è¿›è¡Œæ¥æ”¶å¤„ç†ã€‚æš‚æ—¶è¿˜ç”¨ä¸åˆ°ã€‚ 3. æ¶ˆæ¯å‘å¸ƒè€…123456789101112131415@Componentpublic class DemoPublisher &#123; private final ApplicationContext applicationContext; @Autowired public DemoPublisher(ApplicationContext applicationContext) &#123; this.applicationContext = applicationContext; &#125; public void publish(long id, String message) &#123; applicationContext.publishEvent(new DemoEvent(this, id, message)); &#125;&#125; æ‰©å±•ï¼š æˆ‘ä»¬å¯ä»¥é€šè¿‡å·¥å…·ç±»å‘å¸ƒæ¥é¿å…åœ¨ä»£ç è€¦åˆæ³¨å…¥ApplicationContextï¼Œå·¥å…·ç±»å®ç°ApplicationEventPublisherAware æ¥å£ï¼Œå…·ä½“å¯å‚è€ƒspringçš„awareå­¦ä¹ ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªå°ç»†èŠ‚ï¼Œå¦‚æœé€šè¿‡æ³¨å…¥ApplicationContextçš„æ–¹å¼æ¥å‘å¸ƒäº‹ä»¶ï¼Œideaåœ¨ä»£ç å·¦è¾¹ä¼šæœ‰ä¸€ä¸ªç±»ä¼¼è€³æœºçš„å°å›¾æ ‡ï¼Œç‚¹å‡»å¯ä»¥è·³åˆ°ç›‘å¬æ­¤å‘å¸ƒäº‹ä»¶çš„ç›‘å¬è€…ä½ç½®ï¼Œç”¨å·¥å…·ç±»å‘å¸ƒäº‹ä»¶å°±æ²¡æœ‰æ­¤æç¤ºäº†ã€‚ 4. æµ‹è¯•æ–¹æ³•1234@Testpublic void publisherTest() &#123; demoPublisher.publish(1L, &quot;æˆåŠŸäº†ï¼&quot;);&#125; 5. ç»“æœ123456&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;DemoListener2&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;æ”¶åˆ°äº†ï¼šcom.jiuxian.publisher.DemoPublisher@3a62c01eæ¶ˆæ¯;æ—¶é—´ï¼š1551762322376æ¶ˆæ¯ï¼š1:æˆåŠŸäº†ï¼&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;DemoListener&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;æ”¶åˆ°äº†ï¼šcom.jiuxian.publisher.DemoPublisher@3a62c01eæ¶ˆæ¯;æ—¶é—´ï¼š1551762322376æ¶ˆæ¯ï¼š1:æˆåŠŸäº†ï¼ 6. ç¤ºä¾‹æºç GitHub https://github.com/Zejun-Liu/SpringBoot2.0/tree/master/springboot-event 7. æ‰©å±• - ç›‘å¬äº‹ä»¶æ—¶çš„äº‹åŠ¡éš”ç¦»â€‹ @TransactionalEventListenerå’Œ@EventListeneréƒ½å¯ä»¥ç›‘å¬äº‹ä»¶ï¼Œä½†å‰è€…å¯ä»¥å¯¹å‘å¸ƒäº‹ä»¶å’Œç›‘å¬äº‹ä»¶è¿›è¡Œä¸€äº›äº‹åŠ¡ä¸Šçš„éš”ç¦»ã€‚ â€‹ @TransactionalEventListenerræŒ‡ä¸å’Œå‘å¸ƒäº‹ä»¶çš„æ–¹æ³•åœ¨åŒä¸€ä¸ªäº‹åŠ¡å†…ï¼Œå‘å¸ƒäº‹ä»¶çš„æ–¹æ³•äº‹åŠ¡ç»“æŸåæ‰ä¼šæ‰§è¡Œæœ¬ç›‘å¬æ–¹æ³•ï¼Œç›‘å¬é€»è¾‘å†…å‘ç”Ÿå¼‚å¸¸ä¸ä¼šå›æ»šå‘å¸ƒäº‹ä»¶æ–¹æ³•çš„äº‹åŠ¡ã€‚ 12345678910111213@Transactional(rollbackFor = Exception.class)public void handle()&#123; User user = new User(); user.setAge(34); user.setUsername(&quot;äººè„¸äº‹ä»¶&quot;); user.setHobby(&quot;æŠ“æ‹&quot;); //å¤„ç†å®Œä¸Šé¢çš„é€»è¾‘åï¼Œå‘å¸ƒäº‹ä»¶ EventPublisherUtil.publishEvent(new FaceEvent(user)); //æ•°æ®åº“æ·»åŠ æ“ä½œ Integer integer = deviceAlarmService.addDevice();&#125; å¯ä»¥çœ‹åˆ°å‘å¸ƒäº‹ä»¶çš„æ–¹æ³•å¤„åœ¨äº‹åŠ¡æ§åˆ¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨@TransactionalEventListeneræ¥ç›‘å¬äº‹ä»¶ï¼š 123456789@TransactionalEventListener(fallbackExecution = true)public void onApplicationEvent(FaceEvent event) &#123; User user = event.getEventData(); LOGGER.info(&quot;===&gt; A æ”¶åˆ°äººè„¸äº‹ä»¶: &#123;&#125;&#125;&quot;,user); //@TransactionalEventListeneræŒ‡ä¸å’Œå‘å¸ƒäº‹ä»¶çš„åœ¨åŒä¸€ä¸ªäº‹åŠ¡å†…ï¼Œå‘å¸ƒäº‹ä»¶çš„æ–¹æ³•äº‹åŠ¡ç»“æŸåæ‰ä¼šæ‰§è¡Œæœ¬æ–¹æ³• // ï¼Œæœ¬æ–¹æ³•å‘ç”Ÿå¼‚å¸¸ä¸ä¼šå›æ»šå‘å¸ƒäº‹ä»¶çš„äº‹åŠ¡ï¼Œ throw new RuntimeException(&quot;ç›‘å¬äº‹ä»¶æŠ›å‡ºå¼‚å¸¸&quot;);&#125; è¿è¡Œç»“æœï¼ŒaddDeviceæ­£å¸¸åœ¨æ•°æ®åº“æ’å…¥æ•°æ®ï¼Œä½†æ˜¯ä¿®æ”¹ä¸º@EventListenerç›‘å¬åˆ™æ’å…¥æ•°æ®å¤±è´¥ã€‚ â€‹ @TransactionalEventListeneræœ‰ä¸€ä¸ªå±æ€§ä¸ºfallbackExecutionï¼Œé»˜è®¤ä¸ºfalseï¼ŒæŒ‡å‘å¸ƒäº‹ä»¶çš„æ–¹æ³•æ²¡æœ‰äº‹åŠ¡æ§åˆ¶æ—¶ï¼Œç›‘å¬å™¨ä¸è¿›è¡Œç›‘å¬äº‹ä»¶ï¼Œæ­¤ä¸ºé»˜è®¤æƒ…å†µï¼ fallbackExecution&#x3D;trueï¼Œåˆ™æŒ‡å‘å¸ƒäº‹ä»¶çš„æ–¹æ³•æ²¡æœ‰äº‹åŠ¡æ§åˆ¶æ—¶ï¼Œç›‘å¬æ–¹æ³•ä»å¯ä»¥ç›‘å¬äº‹ä»¶è¿›è¡Œå¤„ç†ã€‚ 1234/** * Whether the event should be processed if no transaction is running. */ boolean fallbackExecution() default false; â€‹ åˆšæ‰æˆ‘ä»¬è¯´åˆ°ä½¿ç”¨@TransactionalEventListenerä¼šåœ¨å‘å¸ƒäº‹ä»¶çš„æ–¹æ³•äº‹åŠ¡ç»“æŸåæ‰§è¡Œç›‘å¬æ–¹æ³•ï¼Œä½†å…¶å®æˆ‘ä»¬è¿˜å¯ä»¥è¿›è¡Œç»†åŒ–çš„æ§åˆ¶ã€‚å®ƒæœ‰ä¸€ä¸ªå±æ€§ä¸ºTransactionPhaseï¼Œé»˜è®¤ä¸ºTransactionPhase.AFTER_COMMITï¼Œå³äº‹åŠ¡æäº¤åã€‚è¿˜å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©AFTER_COMPLETIONã€BEFORE_COMMITã€AFTER_ROLLBACKã€‚â€‹ ä½†ä»éœ€æ³¨æ„ï¼Œå¦‚æœfallbackExecution&#x3D;falseï¼Œä¸”å‘å¸ƒäº‹ä»¶çš„æ–¹æ³•æ²¡æœ‰äº‹åŠ¡æ§åˆ¶æ—¶ï¼Œç›‘å¬å™¨æ ¹æœ¬ä¸ä¼šç›‘å¬åˆ°äº‹ä»¶ï¼Œæ­¤å¤„çš„TransactionPhaseä¹Ÿå°±æ²¡æœ‰æ„ä¹‰äº†ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"https://guoshunfa.com/tags/Spring/"},{"name":"SpringEvent","slug":"SpringEvent","permalink":"https://guoshunfa.com/tags/SpringEvent/"}]},{"title":"Springæ¡†æ¶ Springäº‹åŠ¡","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/Springæ¡†æ¶Springäº‹åŠ¡","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.309Z","comments":true,"path":"2022/07/Springæ¡†æ¶Springäº‹åŠ¡/","link":"","permalink":"https://guoshunfa.com/2022/07/Spring%E6%A1%86%E6%9E%B6Spring%E4%BA%8B%E5%8A%A1/","excerpt":"","text":"Springæ¡†æ¶ - Springäº‹åŠ¡äº‹åŠ¡æ“ä½œï¼ˆäº‹åŠ¡æ¦‚å¿µï¼‰1 ã€ä»€ä¹ˆäº‹åŠ¡ï¼ˆ 1 ï¼‰äº‹åŠ¡æ˜¯æ•°æ®åº“æ“ä½œæœ€åŸºæœ¬å•å…ƒï¼Œé€»è¾‘ä¸Šä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥æ‰€æœ‰æ“ä½œéƒ½å¤±è´¥ï¼ˆ 2 ï¼‰å…¸å‹åœºæ™¯ï¼šé“¶è¡Œè½¬è´¦ lucy è½¬è´¦ 100 å…ƒ ç»™mary lucyå°‘ 100 ï¼Œmaryå¤š 100 2 ã€äº‹åŠ¡å››ä¸ªç‰¹æ€§ï¼ˆ ACID ï¼‰ï¼ˆ 1 ï¼‰åŸå­æ€§ï¼ˆ 2 ï¼‰ä¸€è‡´æ€§ï¼ˆ 3 ï¼‰éš”ç¦»æ€§ï¼ˆ 4 ï¼‰æŒä¹…æ€§ äº‹åŠ¡æ“ä½œï¼ˆæ­å»ºäº‹åŠ¡æ“ä½œç¯å¢ƒï¼‰1 ã€åˆ›å»ºæ•°æ®åº“è¡¨ï¼Œæ·»åŠ è®°å½• 2 ã€åˆ›å»º service ï¼Œæ­å»º dao ï¼Œå®Œæˆå¯¹è±¡åˆ›å»ºå’Œæ³¨å…¥å…³ç³»ï¼ˆ 1 ï¼‰serviceæ³¨å…¥daoï¼Œåœ¨daoæ³¨å…¥JdbcTemplateï¼Œåœ¨JdbcTemplateæ³¨å…¥DataSource 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152@Servicepublic class UserService &#123;//æ³¨å…¥dao@Autowiredprivate UserDao userDao;&#125;@Repositorypublic class UserDaoImpl implements UserDao &#123;@Autowiredprivate JdbcTemplate jdbcTemplate;&#125;**3** ã€åœ¨ **dao** åˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼šå¤šé’±å’Œå°‘é’±çš„æ–¹æ³•ï¼Œåœ¨ **service** åˆ›å»ºæ–¹æ³•ï¼ˆè½¬è´¦çš„æ–¹æ³•ï¼‰@Repositorypublic class UserDaoImpl implements UserDao &#123;@Autowiredprivate JdbcTemplate jdbcTemplate;//lucyè½¬è´¦ 100 ç»™mary//å°‘é’±@Overridepublic void reduceMoney() &#123;String sql = &quot;update t_account set money=money-? where username=?&quot;;jdbcTemplate.update(sql, 100 ,&quot;lucy&quot;);&#125;//å¤šé’±@Overridepublic void addMoney() &#123;String sql = &quot;update t_account set money=money+? where username=?&quot;;jdbcTemplate.update(sql, 100 ,&quot;mary&quot;);&#125;&#125;@Servicepublic class UserService &#123;//æ³¨å…¥dao@Autowiredprivate UserDao userDao;//è½¬è´¦çš„æ–¹æ³•public void accountMoney() &#123;//lucyå°‘ 100userDao.reduceMoney();//maryå¤š 100userDao.addMoney();&#125;&#125; 4 ã€ä¸Šé¢ä»£ç ï¼Œå¦‚æœæ­£å¸¸æ‰§è¡Œæ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å¦‚æœä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œæœ‰é—®é¢˜ ï¼ˆ 1 ï¼‰ä¸Šé¢é—®é¢˜å¦‚ä½•è§£å†³å‘¢ï¼Ÿ ä½¿ç”¨äº‹åŠ¡è¿›è¡Œè§£å†³ ï¼ˆ 2 ï¼‰äº‹åŠ¡æ“ä½œè¿‡ç¨‹ äº‹åŠ¡æ“ä½œï¼ˆ Spring äº‹åŠ¡ç®¡ç†ä»‹ç»ï¼‰1 ã€äº‹åŠ¡æ·»åŠ åˆ° JavaEE ä¸‰å±‚ç»“æ„é‡Œé¢ Service å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰ 2 ã€åœ¨ Spring è¿›è¡Œäº‹åŠ¡ç®¡ç†æ“ä½œï¼ˆ 1 ï¼‰æœ‰ä¸¤ç§æ–¹å¼ï¼šç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†å’Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼ˆä½¿ç”¨ï¼‰ 3 ã€å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼ˆ 1 ï¼‰åŸºäºæ³¨è§£æ–¹å¼ï¼ˆä½¿ç”¨ï¼‰ï¼ˆ 2 ï¼‰åŸºäºxmlé…ç½®æ–‡ä»¶æ–¹å¼ 4 ã€åœ¨ Spring è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œåº•å±‚ä½¿ç”¨ AOP åŸç† 5 ã€ Spring äº‹åŠ¡ç®¡ç† APIï¼ˆ 1 ï¼‰æä¾›ä¸€ä¸ªæ¥å£ï¼Œä»£è¡¨äº‹åŠ¡ç®¡ç†å™¨ï¼Œè¿™ä¸ªæ¥å£é’ˆå¯¹ä¸åŒçš„æ¡†æ¶æä¾›ä¸åŒçš„å®ç°ç±» äº‹åŠ¡æ“ä½œï¼ˆæ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼‰1 ã€åœ¨ spring é…ç½®æ–‡ä»¶é…ç½®äº‹åŠ¡ç®¡ç†å™¨ 123456&lt;!--åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨--&gt;&lt;bean id=&quot;transactionManager&quot;class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;&lt;!--æ³¨å…¥æ•°æ®æº--&gt;&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;&lt;/bean&gt; 2 ã€åœ¨ spring é…ç½®æ–‡ä»¶ï¼Œå¼€å¯äº‹åŠ¡æ³¨è§£ï¼ˆ 1 ï¼‰åœ¨springé…ç½®æ–‡ä»¶å¼•å…¥åç§°ç©ºé—´ tx 1234567891011121314&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;xmlns:context=&quot;http://www.springframework.org/schema/context&quot;xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans[http://www.springframework.org/schema/beans/spring-beans.xsd](http://www.springframework.org/schema/beans/spring-beans.xsd)[http://www.springframework.org/schema/context](http://www.springframework.org/schema/context)[http://www.springframework.org/schema/context/spring-context.xsd](http://www.springframework.org/schema/context/spring-context.xsd)[http://www.springframework.org/schema/aop](http://www.springframework.org/schema/aop)[http://www.springframework.org/schema/aop/spring-aop.xsd](http://www.springframework.org/schema/aop/spring-aop.xsd)[http://www.springframework.org/schema/tx](http://www.springframework.org/schema/tx)[http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;](http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;) ï¼ˆ 2 ï¼‰å¼€å¯äº‹åŠ¡æ³¨è§£ 123&lt;!--å¼€å¯äº‹åŠ¡æ³¨è§£--&gt;&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt; 3 ã€åœ¨ service ç±»ä¸Šé¢ï¼ˆæˆ–è€… service ç±»é‡Œé¢æ–¹æ³•ä¸Šé¢ï¼‰æ·»åŠ äº‹åŠ¡æ³¨è§£ï¼ˆ 1 ï¼‰@Transactionalï¼Œè¿™ä¸ªæ³¨è§£æ·»åŠ åˆ°ç±»ä¸Šé¢ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ–¹æ³•ä¸Šé¢ï¼ˆ 2 ï¼‰å¦‚æœæŠŠè¿™ä¸ªæ³¨è§£æ·»åŠ ç±»ä¸Šé¢ï¼Œè¿™ä¸ªç±»é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•éƒ½æ·»åŠ äº‹åŠ¡ï¼ˆ 3 ï¼‰å¦‚æœæŠŠè¿™ä¸ªæ³¨è§£æ·»åŠ æ–¹æ³•ä¸Šé¢ï¼Œä¸ºè¿™ä¸ªæ–¹æ³•æ·»åŠ äº‹åŠ¡ 123@Service@Transactionalpublic class UserService &#123; äº‹åŠ¡æ“ä½œï¼ˆå£°æ˜å¼äº‹åŠ¡ç®¡ç†å‚æ•°é…ç½®ï¼‰1 ã€åœ¨ service ç±»ä¸Šé¢æ·»åŠ æ³¨è§£ @Transactional ï¼Œåœ¨è¿™ä¸ªæ³¨è§£é‡Œé¢å¯ä»¥é…ç½®äº‹åŠ¡ç›¸å…³å‚æ•° 2 ã€ propagation ï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼ˆ 1 ï¼‰å¤šäº‹åŠ¡æ–¹æ³•ç›´æ¥è¿›è¡Œè°ƒç”¨ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­äº‹åŠ¡ æ˜¯å¦‚ä½•è¿›è¡Œç®¡ç†çš„ 3 ã€ ioslation ï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ˆ 1 ï¼‰äº‹åŠ¡æœ‰ç‰¹æ€§æˆä¸ºéš”ç¦»æ€§ï¼Œå¤šäº‹åŠ¡æ“ä½œä¹‹é—´ä¸ä¼šäº§ç”Ÿå½±å“ã€‚ä¸è€ƒè™‘éš”ç¦»æ€§äº§ç”Ÿå¾ˆå¤šé—®é¢˜ï¼ˆ 2 ï¼‰æœ‰ä¸‰ä¸ªè¯»é—®é¢˜ï¼šè„è¯»ã€ä¸å¯é‡å¤è¯»ã€è™šï¼ˆå¹»ï¼‰è¯»ï¼ˆ 3 ï¼‰è„è¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡çš„æ•°æ® ï¼ˆ 4 ï¼‰ä¸å¯é‡å¤è¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€æäº¤äº‹åŠ¡ä¿®æ”¹æ•°æ® ï¼ˆ 5 ï¼‰è™šè¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€æäº¤äº‹åŠ¡æ·»åŠ æ•°æ® ï¼ˆ 6 ï¼‰è§£å†³ï¼šé€šè¿‡è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œè§£å†³è¯»é—®é¢˜ 4 ã€ timeout ï¼šè¶…æ—¶æ—¶é—´ï¼ˆ 1 ï¼‰äº‹åŠ¡éœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…è¿›è¡Œæäº¤ï¼Œå¦‚æœä¸æäº¤è¿›è¡Œå›æ»šï¼ˆ 2 ï¼‰é»˜è®¤å€¼æ˜¯ - 1 ï¼Œè®¾ç½®æ—¶é—´ä»¥ç§’å•ä½è¿›è¡Œè®¡ç®— 5 ã€ readOnly ï¼šæ˜¯å¦åªè¯»ï¼ˆ 1 ï¼‰è¯»ï¼šæŸ¥è¯¢æ“ä½œï¼Œå†™ï¼šæ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œï¼ˆ 2 ï¼‰readOnlyé»˜è®¤å€¼falseï¼Œè¡¨ç¤ºå¯ä»¥æŸ¥è¯¢ï¼Œå¯ä»¥æ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œï¼ˆ 3 ï¼‰è®¾ç½®readOnlyå€¼æ˜¯trueï¼Œè®¾ç½®æˆtrueä¹‹åï¼Œåªèƒ½æŸ¥è¯¢ 6 ã€ rollbackFor ï¼šå›æ»šï¼ˆ 1 ï¼‰è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸è¿›è¡Œäº‹åŠ¡å›æ»š 7 ã€ noRollbackFor ï¼šä¸å›æ»šï¼ˆ 1 ï¼‰è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸ä¸è¿›è¡Œäº‹åŠ¡å›æ»š äº‹åŠ¡æ“ä½œï¼ˆ XML å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼‰1 ã€åœ¨ spring é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ç¬¬ä¸€æ­¥ é…ç½®äº‹åŠ¡ç®¡ç†å™¨ç¬¬äºŒæ­¥ é…ç½®é€šçŸ¥ ç¬¬ä¸‰æ­¥ é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢ 12345678910111213141516171819202122232425&lt;!-- 1 åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨--&gt;&lt;bean id=&quot;transactionManager&quot;class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;&lt;!--æ³¨å…¥æ•°æ®æº--&gt;&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!-- 2 é…ç½®é€šçŸ¥--&gt;&lt;tx:advice id=&quot;txadvice&quot;&gt;&lt;!--é…ç½®äº‹åŠ¡å‚æ•°--&gt;&lt;tx:attributes&gt;&lt;!--æŒ‡å®šå“ªç§è§„åˆ™çš„æ–¹æ³•ä¸Šé¢æ·»åŠ äº‹åŠ¡--&gt;&lt;tx:method name=&quot;accountMoney&quot; propagation=&quot;REQUIRED&quot;/&gt;&lt;!--&lt;tx:method name=&quot;account*&quot;/&gt;--&gt;&lt;/tx:attributes&gt;&lt;/tx:advice&gt;&lt;!-- 3 é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢--&gt;&lt;aop:config&gt;&lt;!--é…ç½®åˆ‡å…¥ç‚¹--&gt;&lt;aop:pointcut id=&quot;pt&quot; expression=&quot;execution(*com.atguigu.spring5.service.UserService.*(..))&quot;/&gt;&lt;!--é…ç½®åˆ‡é¢--&gt;&lt;aop:advisor advice-ref=&quot;txadvice&quot; pointcut-ref=&quot;pt&quot;/&gt;&lt;/aop:config&gt; äº‹åŠ¡æ“ä½œï¼ˆå®Œå…¨æ³¨è§£å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼‰1 ã€åˆ›å»ºé…ç½®ç±»ï¼Œä½¿ç”¨é…ç½®ç±»æ›¿ä»£ xml é…ç½®æ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334@Configuration //é…ç½®ç±»@ComponentScan(basePackages = &quot;com.atguigu&quot;) //ç»„ä»¶æ‰«æ@EnableTransactionManagement //å¼€å¯äº‹åŠ¡public class TxConfig &#123; //åˆ›å»ºæ•°æ®åº“è¿æ¥æ±  @Bean public DruidDataSource getDruidDataSource() &#123; DruidDataSource dataSource = new DruidDataSource(); dataSource.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;); dataSource.setUrl(&quot;jdbc:mysql:///user_db&quot;); dataSource.setUsername(&quot;root&quot;); dataSource.setPassword(&quot;root&quot;); return dataSource; &#125; //åˆ›å»ºJdbcTemplateå¯¹è±¡ @Bean public JdbcTemplate getJdbcTemplate(DataSource dataSource) &#123; //åˆ°iocå®¹å™¨ä¸­æ ¹æ®ç±»å‹æ‰¾åˆ°dataSource JdbcTemplate jdbcTemplate = new JdbcTemplate(); //æ³¨å…¥dataSource jdbcTemplate.setDataSource(dataSource); return jdbcTemplate; &#125; //åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨ @Bean public DataSourceTransactionManager getDataSourceTransactionManager(DataSource dataSource) &#123; DataSourceTransactionManager transactionManager = new DataSourceTransactionManager(); transactionManager.setDataSource(dataSource); return transactionManager; &#125;&#125;","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"https://guoshunfa.com/tags/Spring/"}]},{"title":"SpringSecurityæ¡†æ¶ ç†è§£ä¸ä½¿ç”¨","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/SpringSecurityæ¡†æ¶ç†è§£ä¸ä½¿ç”¨","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.309Z","comments":true,"path":"2022/07/SpringSecurityæ¡†æ¶ç†è§£ä¸ä½¿ç”¨/","link":"","permalink":"https://guoshunfa.com/2022/07/SpringSecurity%E6%A1%86%E6%9E%B6%E7%90%86%E8%A7%A3%E4%B8%8E%E4%BD%BF%E7%94%A8/","excerpt":"","text":"è½¬è½½è‡ªï¼šä¸‰æ›´è‰å ‚(bç«™upä¸») 0. ç®€ä»‹â€‹ Spring Security æ˜¯ Spring å®¶æ—ä¸­çš„ä¸€ä¸ªå®‰å…¨ç®¡ç†æ¡†æ¶ã€‚ç›¸æ¯”ä¸å¦å¤–ä¸€ä¸ªå®‰å…¨æ¡†æ¶Shiroï¼Œå®ƒæä¾›äº†æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œç¤¾åŒºèµ„æºä¹Ÿæ¯”Shiroä¸°å¯Œã€‚ â€‹ ä¸€èˆ¬æ¥è¯´ä¸­å¤§å‹çš„é¡¹ç›®éƒ½æ˜¯ä½¿ç”¨SpringSecurity æ¥åšå®‰å…¨æ¡†æ¶ã€‚å°é¡¹ç›®æœ‰Shiroçš„æ¯”è¾ƒå¤šï¼Œå› ä¸ºç›¸æ¯”ä¸SpringSecurityï¼ŒShiroçš„ä¸Šæ‰‹æ›´åŠ çš„ç®€å•ã€‚ â€‹ ä¸€èˆ¬Webåº”ç”¨çš„éœ€è¦è¿›è¡Œè®¤è¯å’Œæˆæƒã€‚ â€‹ è®¤è¯ï¼šéªŒè¯å½“å‰è®¿é—®ç³»ç»Ÿçš„æ˜¯ä¸æ˜¯æœ¬ç³»ç»Ÿçš„ç”¨æˆ·ï¼Œå¹¶ä¸”è¦ç¡®è®¤å…·ä½“æ˜¯å“ªä¸ªç”¨æˆ· â€‹ æˆæƒï¼šç»è¿‡è®¤è¯ååˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è¿›è¡ŒæŸä¸ªæ“ä½œ â€‹ è€Œè®¤è¯å’Œæˆæƒä¹Ÿæ˜¯SpringSecurityä½œä¸ºå®‰å…¨æ¡†æ¶çš„æ ¸å¿ƒåŠŸèƒ½ã€‚ 1. å¿«é€Ÿå…¥é—¨1.1 å‡†å¤‡å·¥ä½œâ€‹ æˆ‘ä»¬å…ˆè¦æ­å»ºä¸€ä¸ªç®€å•çš„SpringBootå·¥ç¨‹ â‘  è®¾ç½®çˆ¶å·¥ç¨‹ æ·»åŠ ä¾èµ– 12345678910111213141516&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.5.0&lt;/version&gt;&lt;/parent&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt;&lt;/dependencies&gt; â‘¡ åˆ›å»ºå¯åŠ¨ç±» 12345678@SpringBootApplicationpublic class SecurityApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SecurityApplication.class,args); &#125;&#125; â‘¢ åˆ›å»ºController 123456789101112import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RestControllerpublic class HelloController &#123; @RequestMapping(&quot;/hello&quot;) public String hello()&#123; return &quot;hello&quot;; &#125;&#125; 1.2 å¼•å…¥SpringSecurityâ€‹ åœ¨SpringBooté¡¹ç›®ä¸­ä½¿ç”¨SpringSecurityæˆ‘ä»¬åªéœ€è¦å¼•å…¥ä¾èµ–å³å¯å®ç°å…¥é—¨æ¡ˆä¾‹ã€‚ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&lt;/dependency&gt; â€‹ å¼•å…¥ä¾èµ–åæˆ‘ä»¬åœ¨å°è¯•å»è®¿é—®ä¹‹å‰çš„æ¥å£å°±ä¼šè‡ªåŠ¨è·³è½¬åˆ°ä¸€ä¸ªSpringSecurityçš„é»˜è®¤ç™»é™†é¡µé¢ï¼Œé»˜è®¤ç”¨æˆ·åæ˜¯user,å¯†ç ä¼šè¾“å‡ºåœ¨æ§åˆ¶å°ã€‚ â€‹ å¿…é¡»ç™»é™†ä¹‹åæ‰èƒ½å¯¹æ¥å£è¿›è¡Œè®¿é—®ã€‚ 2. è®¤è¯2.1 ç™»é™†æ ¡éªŒæµç¨‹ 2.2 åŸç†åˆæ¢â€‹ æƒ³è¦çŸ¥é“å¦‚ä½•å®ç°è‡ªå·±çš„ç™»é™†æµç¨‹å°±å¿…é¡»è¦å…ˆçŸ¥é“å…¥é—¨æ¡ˆä¾‹ä¸­SpringSecurityçš„æµç¨‹ã€‚ 2.2.1 SpringSecurityå®Œæ•´æµç¨‹â€‹ SpringSecurityçš„åŸç†å…¶å®å°±æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ï¼Œå†…éƒ¨åŒ…å«äº†æä¾›å„ç§åŠŸèƒ½çš„è¿‡æ»¤å™¨ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹å…¥é—¨æ¡ˆä¾‹ä¸­çš„è¿‡æ»¤å™¨ã€‚ â€‹ å›¾ä¸­åªå±•ç¤ºäº†æ ¸å¿ƒè¿‡æ»¤å™¨ï¼Œå…¶å®ƒçš„éæ ¸å¿ƒè¿‡æ»¤å™¨å¹¶æ²¡æœ‰åœ¨å›¾ä¸­å±•ç¤ºã€‚ UsernamePasswordAuthenticationFilter:è´Ÿè´£å¤„ç†æˆ‘ä»¬åœ¨ç™»é™†é¡µé¢å¡«å†™äº†ç”¨æˆ·åå¯†ç åçš„ç™»é™†è¯·æ±‚ã€‚å…¥é—¨æ¡ˆä¾‹çš„è®¤è¯å·¥ä½œä¸»è¦æœ‰å®ƒè´Ÿè´£ã€‚ ExceptionTranslationFilterï¼šå¤„ç†è¿‡æ»¤å™¨é“¾ä¸­æŠ›å‡ºçš„ä»»ä½•AccessDeniedExceptionå’ŒAuthenticationException ã€‚ FilterSecurityInterceptorï¼šè´Ÿè´£æƒé™æ ¡éªŒçš„è¿‡æ»¤å™¨ã€‚ â€‹ â€‹ æˆ‘ä»¬å¯ä»¥é€šè¿‡DebugæŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­SpringSecurityè¿‡æ»¤å™¨é“¾ä¸­æœ‰å“ªäº›è¿‡æ»¤å™¨åŠå®ƒä»¬çš„é¡ºåºã€‚ 2.2.2 è®¤è¯æµç¨‹è¯¦è§£ æ¦‚å¿µé€ŸæŸ¥: Authenticationæ¥å£: å®ƒçš„å®ç°ç±»ï¼Œè¡¨ç¤ºå½“å‰è®¿é—®ç³»ç»Ÿçš„ç”¨æˆ·ï¼Œå°è£…äº†ç”¨æˆ·ç›¸å…³ä¿¡æ¯ã€‚ AuthenticationManageræ¥å£ï¼šå®šä¹‰äº†è®¤è¯Authenticationçš„æ–¹æ³• UserDetailsServiceæ¥å£ï¼šåŠ è½½ç”¨æˆ·ç‰¹å®šæ•°æ®çš„æ ¸å¿ƒæ¥å£ã€‚é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªæ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•ã€‚ UserDetailsæ¥å£ï¼šæä¾›æ ¸å¿ƒç”¨æˆ·ä¿¡æ¯ã€‚é€šè¿‡UserDetailsServiceæ ¹æ®ç”¨æˆ·åè·å–å¤„ç†çš„ç”¨æˆ·ä¿¡æ¯è¦å°è£…æˆUserDetailså¯¹è±¡è¿”å›ã€‚ç„¶åå°†è¿™äº›ä¿¡æ¯å°è£…åˆ°Authenticationå¯¹è±¡ä¸­ã€‚ 2.3 è§£å†³é—®é¢˜2.3.1 æ€è·¯åˆ†æç™»å½• â€‹ â‘ è‡ªå®šä¹‰ç™»å½•æ¥å£ â€‹ è°ƒç”¨ProviderManagerçš„æ–¹æ³•è¿›è¡Œè®¤è¯ å¦‚æœè®¤è¯é€šè¿‡ç”Ÿæˆjwt â€‹ æŠŠç”¨æˆ·ä¿¡æ¯å­˜å…¥redisä¸­ â€‹ â‘¡è‡ªå®šä¹‰UserDetailsService â€‹ åœ¨è¿™ä¸ªå®ç°ç±»ä¸­å»æŸ¥è¯¢æ•°æ®åº“ æ ¡éªŒï¼š â€‹ â‘ å®šä¹‰Jwtè®¤è¯è¿‡æ»¤å™¨ â€‹ è·å–token â€‹ è§£ætokenè·å–å…¶ä¸­çš„userid â€‹ ä»redisä¸­è·å–ç”¨æˆ·ä¿¡æ¯ â€‹ å­˜å…¥SecurityContextHolder 2.3.2 å‡†å¤‡å·¥ä½œâ‘ æ·»åŠ ä¾èµ– 1234567891011121314151617&lt;!--redisä¾èµ–--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!--fastjsonä¾èµ–--&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.33&lt;/version&gt;&lt;/dependency&gt;&lt;!--jwtä¾èµ–--&gt;&lt;dependency&gt; &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt; &lt;artifactId&gt;jjwt&lt;/artifactId&gt; &lt;version&gt;0.9.0&lt;/version&gt;&lt;/dependency&gt; â‘¡ æ·»åŠ Redisç›¸å…³é…ç½® 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162import com.alibaba.fastjson.JSON;import com.alibaba.fastjson.serializer.SerializerFeature;import com.fasterxml.jackson.databind.JavaType;import com.fasterxml.jackson.databind.ObjectMapper;import com.fasterxml.jackson.databind.type.TypeFactory;import org.springframework.data.redis.serializer.RedisSerializer;import org.springframework.data.redis.serializer.SerializationException;import com.alibaba.fastjson.parser.ParserConfig;import org.springframework.util.Assert;import java.nio.charset.Charset;/** * Redisä½¿ç”¨FastJsonåºåˆ—åŒ– * * @author sg */public class FastJsonRedisSerializer&lt;T&gt; implements RedisSerializer&lt;T&gt;&#123; public static final Charset DEFAULT_CHARSET = Charset.forName(&quot;UTF-8&quot;); private Class&lt;T&gt; clazz; static &#123; ParserConfig.getGlobalInstance().setAutoTypeSupport(true); &#125; public FastJsonRedisSerializer(Class&lt;T&gt; clazz) &#123; super(); this.clazz = clazz; &#125; @Override public byte[] serialize(T t) throws SerializationException &#123; if (t == null) &#123; return new byte[0]; &#125; return JSON.toJSONString(t, SerializerFeature.WriteClassName).getBytes(DEFAULT_CHARSET); &#125; @Override public T deserialize(byte[] bytes) throws SerializationException &#123; if (bytes == null || bytes.length &lt;= 0) &#123; return null; &#125; String str = new String(bytes, DEFAULT_CHARSET); return JSON.parseObject(str, clazz); &#125; protected JavaType getJavaType(Class&lt;?&gt; clazz) &#123; return TypeFactory.defaultInstance().constructType(clazz); &#125;&#125; 123456789101112131415161718192021222324252627282930import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.data.redis.connection.RedisConnectionFactory;import org.springframework.data.redis.core.RedisTemplate;import org.springframework.data.redis.serializer.StringRedisSerializer;@Configurationpublic class RedisConfig &#123; @Bean @SuppressWarnings(value = &#123; &quot;unchecked&quot;, &quot;rawtypes&quot; &#125;) public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory connectionFactory) &#123; RedisTemplate&lt;Object, Object&gt; template = new RedisTemplate&lt;&gt;(); template.setConnectionFactory(connectionFactory); FastJsonRedisSerializer serializer = new FastJsonRedisSerializer(Object.class); // ä½¿ç”¨StringRedisSerializeræ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–redisçš„keyå€¼ template.setKeySerializer(new StringRedisSerializer()); template.setValueSerializer(serializer); // Hashçš„keyä¹Ÿé‡‡ç”¨StringRedisSerializerçš„åºåˆ—åŒ–æ–¹å¼ template.setHashKeySerializer(new StringRedisSerializer()); template.setHashValueSerializer(serializer); template.afterPropertiesSet(); return template; &#125;&#125; â‘¢ å“åº”ç±» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import com.fasterxml.jackson.annotation.JsonInclude;/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@JsonInclude(JsonInclude.Include.NON_NULL)public class ResponseResult&lt;T&gt; &#123; /** * çŠ¶æ€ç  */ private Integer code; /** * æç¤ºä¿¡æ¯ï¼Œå¦‚æœæœ‰é”™è¯¯æ—¶ï¼Œå‰ç«¯å¯ä»¥è·å–è¯¥å­—æ®µè¿›è¡Œæç¤º */ private String msg; /** * æŸ¥è¯¢åˆ°çš„ç»“æœæ•°æ®ï¼Œ */ private T data; public ResponseResult(Integer code, String msg) &#123; this.code = code; this.msg = msg; &#125; public ResponseResult(Integer code, T data) &#123; this.code = code; this.data = data; &#125; public Integer getCode() &#123; return code; &#125; public void setCode(Integer code) &#123; this.code = code; &#125; public String getMsg() &#123; return msg; &#125; public void setMsg(String msg) &#123; this.msg = msg; &#125; public T getData() &#123; return data; &#125; public void setData(T data) &#123; this.data = data; &#125; public ResponseResult(Integer code, String msg, T data) &#123; this.code = code; this.msg = msg; this.data = data; &#125;&#125; â‘£å·¥å…·ç±» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111import io.jsonwebtoken.Claims;import io.jsonwebtoken.JwtBuilder;import io.jsonwebtoken.Jwts;import io.jsonwebtoken.SignatureAlgorithm;import javax.crypto.SecretKey;import javax.crypto.spec.SecretKeySpec;import java.util.Base64;import java.util.Date;import java.util.UUID;/** * JWTå·¥å…·ç±» */public class JwtUtil &#123; //æœ‰æ•ˆæœŸä¸º public static final Long JWT_TTL = 60 * 60 *1000L;// 60 * 60 *1000 ä¸€ä¸ªå°æ—¶ //è®¾ç½®ç§˜é’¥æ˜æ–‡ public static final String JWT_KEY = &quot;sangeng&quot;; public static String getUUID()&#123; String token = UUID.randomUUID().toString().replaceAll(&quot;-&quot;, &quot;&quot;); return token; &#125; /** * ç”Ÿæˆjtw * @param subject tokenä¸­è¦å­˜æ”¾çš„æ•°æ®ï¼ˆjsonæ ¼å¼ï¼‰ * @return */ public static String createJWT(String subject) &#123; JwtBuilder builder = getJwtBuilder(subject, null, getUUID());// è®¾ç½®è¿‡æœŸæ—¶é—´ return builder.compact(); &#125; /** * ç”Ÿæˆjtw * @param subject tokenä¸­è¦å­˜æ”¾çš„æ•°æ®ï¼ˆjsonæ ¼å¼ï¼‰ * @param ttlMillis tokenè¶…æ—¶æ—¶é—´ * @return */ public static String createJWT(String subject, Long ttlMillis) &#123; JwtBuilder builder = getJwtBuilder(subject, ttlMillis, getUUID());// è®¾ç½®è¿‡æœŸæ—¶é—´ return builder.compact(); &#125; private static JwtBuilder getJwtBuilder(String subject, Long ttlMillis, String uuid) &#123; SignatureAlgorithm signatureAlgorithm = SignatureAlgorithm.HS256; SecretKey secretKey = generalKey(); long nowMillis = System.currentTimeMillis(); Date now = new Date(nowMillis); if(ttlMillis==null)&#123; ttlMillis=JwtUtil.JWT_TTL; &#125; long expMillis = nowMillis + ttlMillis; Date expDate = new Date(expMillis); return Jwts.builder() .setId(uuid) //å”¯ä¸€çš„ID .setSubject(subject) // ä¸»é¢˜ å¯ä»¥æ˜¯JSONæ•°æ® .setIssuer(&quot;sg&quot;) // ç­¾å‘è€… .setIssuedAt(now) // ç­¾å‘æ—¶é—´ .signWith(signatureAlgorithm, secretKey) //ä½¿ç”¨HS256å¯¹ç§°åŠ å¯†ç®—æ³•ç­¾å, ç¬¬äºŒä¸ªå‚æ•°ä¸ºç§˜é’¥ .setExpiration(expDate); &#125; /** * åˆ›å»ºtoken * @param id * @param subject * @param ttlMillis * @return */ public static String createJWT(String id, String subject, Long ttlMillis) &#123; JwtBuilder builder = getJwtBuilder(subject, ttlMillis, id);// è®¾ç½®è¿‡æœŸæ—¶é—´ return builder.compact(); &#125; public static void main(String[] args) throws Exception &#123; String token = &quot;eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJjYWM2ZDVhZi1mNjVlLTQ0MDAtYjcxMi0zYWEwOGIyOTIwYjQiLCJzdWIiOiJzZyIsImlzcyI6InNnIiwiaWF0IjoxNjM4MTA2NzEyLCJleHAiOjE2MzgxMTAzMTJ9.JVsSbkP94wuczb4QryQbAke3ysBDIL5ou8fWsbt_ebg&quot;; Claims claims = parseJWT(token); System.out.println(claims); &#125; /** * ç”ŸæˆåŠ å¯†åçš„ç§˜é’¥ secretKey * @return */ public static SecretKey generalKey() &#123; byte[] encodedKey = Base64.getDecoder().decode(JwtUtil.JWT_KEY); SecretKey key = new SecretKeySpec(encodedKey, 0, encodedKey.length, &quot;AES&quot;); return key; &#125; /** * è§£æ * * @param jwt * @return * @throws Exception */ public static Claims parseJWT(String jwt) throws Exception &#123; SecretKey secretKey = generalKey(); return Jwts.parser() .setSigningKey(secretKey) .parseClaimsJws(jwt) .getBody(); &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229import java.util.*;import java.util.concurrent.TimeUnit;@SuppressWarnings(value = &#123; &quot;unchecked&quot;, &quot;rawtypes&quot; &#125;)@Componentpublic class RedisCache&#123; @Autowired public RedisTemplate redisTemplate; /** * ç¼“å­˜åŸºæœ¬çš„å¯¹è±¡ï¼ŒIntegerã€Stringã€å®ä½“ç±»ç­‰ * * @param key ç¼“å­˜çš„é”®å€¼ * @param value ç¼“å­˜çš„å€¼ */ public &lt;T&gt; void setCacheObject(final String key, final T value) &#123; redisTemplate.opsForValue().set(key, value); &#125; /** * ç¼“å­˜åŸºæœ¬çš„å¯¹è±¡ï¼ŒIntegerã€Stringã€å®ä½“ç±»ç­‰ * * @param key ç¼“å­˜çš„é”®å€¼ * @param value ç¼“å­˜çš„å€¼ * @param timeout æ—¶é—´ * @param timeUnit æ—¶é—´é¢—ç²’åº¦ */ public &lt;T&gt; void setCacheObject(final String key, final T value, final Integer timeout, final TimeUnit timeUnit) &#123; redisTemplate.opsForValue().set(key, value, timeout, timeUnit); &#125; /** * è®¾ç½®æœ‰æ•ˆæ—¶é—´ * * @param key Redisé”® * @param timeout è¶…æ—¶æ—¶é—´ * @return true=è®¾ç½®æˆåŠŸï¼›false=è®¾ç½®å¤±è´¥ */ public boolean expire(final String key, final long timeout) &#123; return expire(key, timeout, TimeUnit.SECONDS); &#125; /** * è®¾ç½®æœ‰æ•ˆæ—¶é—´ * * @param key Redisé”® * @param timeout è¶…æ—¶æ—¶é—´ * @param unit æ—¶é—´å•ä½ * @return true=è®¾ç½®æˆåŠŸï¼›false=è®¾ç½®å¤±è´¥ */ public boolean expire(final String key, final long timeout, final TimeUnit unit) &#123; return redisTemplate.expire(key, timeout, unit); &#125; /** * è·å¾—ç¼“å­˜çš„åŸºæœ¬å¯¹è±¡ã€‚ * * @param key ç¼“å­˜é”®å€¼ * @return ç¼“å­˜é”®å€¼å¯¹åº”çš„æ•°æ® */ public &lt;T&gt; T getCacheObject(final String key) &#123; ValueOperations&lt;String, T&gt; operation = redisTemplate.opsForValue(); return operation.get(key); &#125; /** * åˆ é™¤å•ä¸ªå¯¹è±¡ * * @param key */ public boolean deleteObject(final String key) &#123; return redisTemplate.delete(key); &#125; /** * åˆ é™¤é›†åˆå¯¹è±¡ * * @param collection å¤šä¸ªå¯¹è±¡ * @return */ public long deleteObject(final Collection collection) &#123; return redisTemplate.delete(collection); &#125; /** * ç¼“å­˜Listæ•°æ® * * @param key ç¼“å­˜çš„é”®å€¼ * @param dataList å¾…ç¼“å­˜çš„Listæ•°æ® * @return ç¼“å­˜çš„å¯¹è±¡ */ public &lt;T&gt; long setCacheList(final String key, final List&lt;T&gt; dataList) &#123; Long count = redisTemplate.opsForList().rightPushAll(key, dataList); return count == null ? 0 : count; &#125; /** * è·å¾—ç¼“å­˜çš„listå¯¹è±¡ * * @param key ç¼“å­˜çš„é”®å€¼ * @return ç¼“å­˜é”®å€¼å¯¹åº”çš„æ•°æ® */ public &lt;T&gt; List&lt;T&gt; getCacheList(final String key) &#123; return redisTemplate.opsForList().range(key, 0, -1); &#125; /** * ç¼“å­˜Set * * @param key ç¼“å­˜é”®å€¼ * @param dataSet ç¼“å­˜çš„æ•°æ® * @return ç¼“å­˜æ•°æ®çš„å¯¹è±¡ */ public &lt;T&gt; BoundSetOperations&lt;String, T&gt; setCacheSet(final String key, final Set&lt;T&gt; dataSet) &#123; BoundSetOperations&lt;String, T&gt; setOperation = redisTemplate.boundSetOps(key); Iterator&lt;T&gt; it = dataSet.iterator(); while (it.hasNext()) &#123; setOperation.add(it.next()); &#125; return setOperation; &#125; /** * è·å¾—ç¼“å­˜çš„set * * @param key * @return */ public &lt;T&gt; Set&lt;T&gt; getCacheSet(final String key) &#123; return redisTemplate.opsForSet().members(key); &#125; /** * ç¼“å­˜Map * * @param key * @param dataMap */ public &lt;T&gt; void setCacheMap(final String key, final Map&lt;String, T&gt; dataMap) &#123; if (dataMap != null) &#123; redisTemplate.opsForHash().putAll(key, dataMap); &#125; &#125; /** * è·å¾—ç¼“å­˜çš„Map * * @param key * @return */ public &lt;T&gt; Map&lt;String, T&gt; getCacheMap(final String key) &#123; return redisTemplate.opsForHash().entries(key); &#125; /** * å¾€Hashä¸­å­˜å…¥æ•°æ® * * @param key Redisé”® * @param hKey Hashé”® * @param value å€¼ */ public &lt;T&gt; void setCacheMapValue(final String key, final String hKey, final T value) &#123; redisTemplate.opsForHash().put(key, hKey, value); &#125; /** * è·å–Hashä¸­çš„æ•°æ® * * @param key Redisé”® * @param hKey Hashé”® * @return Hashä¸­çš„å¯¹è±¡ */ public &lt;T&gt; T getCacheMapValue(final String key, final String hKey) &#123; HashOperations&lt;String, String, T&gt; opsForHash = redisTemplate.opsForHash(); return opsForHash.get(key, hKey); &#125; /** * åˆ é™¤Hashä¸­çš„æ•°æ® * * @param key * @param hkey */ public void delCacheMapValue(final String key, final String hkey) &#123; HashOperations hashOperations = redisTemplate.opsForHash(); hashOperations.delete(key, hkey); &#125; /** * è·å–å¤šä¸ªHashä¸­çš„æ•°æ® * * @param key Redisé”® * @param hKeys Hashé”®é›†åˆ * @return Hashå¯¹è±¡é›†åˆ */ public &lt;T&gt; List&lt;T&gt; getMultiCacheMapValue(final String key, final Collection&lt;Object&gt; hKeys) &#123; return redisTemplate.opsForHash().multiGet(key, hKeys); &#125; /** * è·å¾—ç¼“å­˜çš„åŸºæœ¬å¯¹è±¡åˆ—è¡¨ * * @param pattern å­—ç¬¦ä¸²å‰ç¼€ * @return å¯¹è±¡åˆ—è¡¨ */ public Collection&lt;String&gt; keys(final String pattern) &#123; return redisTemplate.keys(pattern); &#125;&#125; 123456789101112131415161718192021222324252627import javax.servlet.http.HttpServletResponse;import java.io.IOException;public class WebUtils&#123; /** * å°†å­—ç¬¦ä¸²æ¸²æŸ“åˆ°å®¢æˆ·ç«¯ * * @param response æ¸²æŸ“å¯¹è±¡ * @param string å¾…æ¸²æŸ“çš„å­—ç¬¦ä¸² * @return null */ public static String renderString(HttpServletResponse response, String string) &#123; try &#123; response.setStatus(200); response.setContentType(&quot;application/json&quot;); response.setCharacterEncoding(&quot;utf-8&quot;); response.getWriter().print(string); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; return null; &#125;&#125; â‘¤å®ä½“ç±» 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576import java.io.Serializable;import java.util.Date;/** * ç”¨æˆ·è¡¨(User)å®ä½“ç±» * * @author ä¸‰æ›´ */@Data@AllArgsConstructor@NoArgsConstructorpublic class User implements Serializable &#123; private static final long serialVersionUID = -40356785423868312L; /** * ä¸»é”® */ private Long id; /** * ç”¨æˆ·å */ private String userName; /** * æ˜µç§° */ private String nickName; /** * å¯†ç  */ private String password; /** * è´¦å·çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰ */ private String status; /** * é‚®ç®± */ private String email; /** * æ‰‹æœºå· */ private String phonenumber; /** * ç”¨æˆ·æ€§åˆ«ï¼ˆ0ç”·ï¼Œ1å¥³ï¼Œ2æœªçŸ¥ï¼‰ */ private String sex; /** * å¤´åƒ */ private String avatar; /** * ç”¨æˆ·ç±»å‹ï¼ˆ0ç®¡ç†å‘˜ï¼Œ1æ™®é€šç”¨æˆ·ï¼‰ */ private String userType; /** * åˆ›å»ºäººçš„ç”¨æˆ·id */ private Long createBy; /** * åˆ›å»ºæ—¶é—´ */ private Date createTime; /** * æ›´æ–°äºº */ private Long updateBy; /** * æ›´æ–°æ—¶é—´ */ private Date updateTime; /** * åˆ é™¤æ ‡å¿—ï¼ˆ0ä»£è¡¨æœªåˆ é™¤ï¼Œ1ä»£è¡¨å·²åˆ é™¤ï¼‰ */ private Integer delFlag;&#125; 2.3.3 å®ç°2.3.3.1 æ•°æ®åº“æ ¡éªŒç”¨æˆ·â€‹ ä»ä¹‹å‰çš„åˆ†ææˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªUserDetailsService,è®©SpringSecurityä½¿ç”¨æˆ‘ä»¬çš„UserDetailsServiceã€‚æˆ‘ä»¬è‡ªå·±çš„UserDetailsServiceå¯ä»¥ä»æ•°æ®åº“ä¸­æŸ¥è¯¢ç”¨æˆ·åå’Œå¯†ç ã€‚ å‡†å¤‡å·¥ä½œâ€‹ æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç”¨æˆ·è¡¨ï¼Œ å»ºè¡¨è¯­å¥å¦‚ä¸‹ï¼š 123456789101112131415161718CREATE TABLE `sys_user` ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;ä¸»é”®&#x27;, `user_name` VARCHAR(64) NOT NULL DEFAULT &#x27;NULL&#x27; COMMENT &#x27;ç”¨æˆ·å&#x27;, `nick_name` VARCHAR(64) NOT NULL DEFAULT &#x27;NULL&#x27; COMMENT &#x27;æ˜µç§°&#x27;, `password` VARCHAR(64) NOT NULL DEFAULT &#x27;NULL&#x27; COMMENT &#x27;å¯†ç &#x27;, `status` CHAR(1) DEFAULT &#x27;0&#x27; COMMENT &#x27;è´¦å·çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;, `email` VARCHAR(64) DEFAULT NULL COMMENT &#x27;é‚®ç®±&#x27;, `phonenumber` VARCHAR(32) DEFAULT NULL COMMENT &#x27;æ‰‹æœºå·&#x27;, `sex` CHAR(1) DEFAULT NULL COMMENT &#x27;ç”¨æˆ·æ€§åˆ«ï¼ˆ0ç”·ï¼Œ1å¥³ï¼Œ2æœªçŸ¥ï¼‰&#x27;, `avatar` VARCHAR(128) DEFAULT NULL COMMENT &#x27;å¤´åƒ&#x27;, `user_type` CHAR(1) NOT NULL DEFAULT &#x27;1&#x27; COMMENT &#x27;ç”¨æˆ·ç±»å‹ï¼ˆ0ç®¡ç†å‘˜ï¼Œ1æ™®é€šç”¨æˆ·ï¼‰&#x27;, `create_by` BIGINT(20) DEFAULT NULL COMMENT &#x27;åˆ›å»ºäººçš„ç”¨æˆ·id&#x27;, `create_time` DATETIME DEFAULT NULL COMMENT &#x27;åˆ›å»ºæ—¶é—´&#x27;, `update_by` BIGINT(20) DEFAULT NULL COMMENT &#x27;æ›´æ–°äºº&#x27;, `update_time` DATETIME DEFAULT NULL COMMENT &#x27;æ›´æ–°æ—¶é—´&#x27;, `del_flag` INT(11) DEFAULT &#x27;0&#x27; COMMENT &#x27;åˆ é™¤æ ‡å¿—ï¼ˆ0ä»£è¡¨æœªåˆ é™¤ï¼Œ1ä»£è¡¨å·²åˆ é™¤ï¼‰&#x27;, PRIMARY KEY (`id`)) ENGINE=INNODB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COMMENT=&#x27;ç”¨æˆ·è¡¨&#x27; â€‹ å¼•å…¥MybatisPulså’Œmysqlé©±åŠ¨çš„ä¾èµ– 123456789&lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt; &lt;version&gt;3.4.3&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;&lt;/dependency&gt; â€‹ é…ç½®æ•°æ®åº“ä¿¡æ¯ 123456spring: datasource: url: jdbc:mysql://localhost:3306/sg_security?characterEncoding=utf-8&amp;serverTimezone=UTC username: root password: root driver-class-name: com.mysql.cj.jdbc.Driver â€‹ å®šä¹‰Mapperæ¥å£ 12public interface UserMapper extends BaseMapper&lt;User&gt; &#123;&#125; â€‹ ä¿®æ”¹Userå®ä½“ç±» 1ç±»åä¸ŠåŠ @TableName(value = &quot;sys_user&quot;) ,idå­—æ®µä¸ŠåŠ  @TableId â€‹ é…ç½®Mapperæ‰«æ 12345678@SpringBootApplication@MapperScan(&quot;com.sangeng.mapper&quot;)public class SimpleSecurityApplication &#123; public static void main(String[] args) &#123; ConfigurableApplicationContext run = SpringApplication.run(SimpleSecurityApplication.class); System.out.println(run); &#125;&#125; â€‹ æ·»åŠ junitä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&lt;/dependency&gt; â€‹ æµ‹è¯•MPæ˜¯å¦èƒ½æ­£å¸¸ä½¿ç”¨ 123456789101112131415/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@SpringBootTestpublic class MapperTest &#123; @Autowired private UserMapper userMapper; @Test public void testUserMapper()&#123; List&lt;User&gt; users = userMapper.selectList(null); System.out.println(users); &#125;&#125; æ ¸å¿ƒä»£ç å®ç°åˆ›å»ºä¸€ä¸ªç±»å®ç°UserDetailsServiceæ¥å£ï¼Œé‡å†™å…¶ä¸­çš„æ–¹æ³•ã€‚æ›´åŠ ç”¨æˆ·åä»æ•°æ®åº“ä¸­æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ 12345678910111213141516171819202122232425/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@Servicepublic class UserDetailsServiceImpl implements UserDetailsService &#123; @Autowired private UserMapper userMapper; @Override public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException &#123; //æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ LambdaQueryWrapper&lt;User&gt; wrapper = new LambdaQueryWrapper&lt;&gt;(); wrapper.eq(User::getUserName,username); User user = userMapper.selectOne(wrapper); //å¦‚æœæŸ¥è¯¢ä¸åˆ°æ•°æ®å°±é€šè¿‡æŠ›å‡ºå¼‚å¸¸æ¥ç»™å‡ºæç¤º if(Objects.isNull(user))&#123; throw new RuntimeException(&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;); &#125; //TODO æ ¹æ®ç”¨æˆ·æŸ¥è¯¢æƒé™ä¿¡æ¯ æ·»åŠ åˆ°LoginUserä¸­ //å°è£…æˆUserDetailså¯¹è±¡è¿”å› return new LoginUser(user); &#125;&#125; å› ä¸ºUserDetailsServiceæ–¹æ³•çš„è¿”å›å€¼æ˜¯UserDetailsç±»å‹ï¼Œæ‰€ä»¥éœ€è¦å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°è¯¥æ¥å£ï¼ŒæŠŠç”¨æˆ·ä¿¡æ¯å°è£…åœ¨å…¶ä¸­ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@Data@NoArgsConstructor@AllArgsConstructorpublic class LoginUser implements UserDetails &#123; private User user; @Override public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() &#123; return null; &#125; @Override public String getPassword() &#123; return user.getPassword(); &#125; @Override public String getUsername() &#123; return user.getUserName(); &#125; @Override public boolean isAccountNonExpired() &#123; return true; &#125; @Override public boolean isAccountNonLocked() &#123; return true; &#125; @Override public boolean isCredentialsNonExpired() &#123; return true; &#125; @Override public boolean isEnabled() &#123; return true; &#125;&#125; æ³¨æ„ï¼šå¦‚æœè¦æµ‹è¯•ï¼Œéœ€è¦å¾€ç”¨æˆ·è¡¨ä¸­å†™å…¥ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä¸”å¦‚æœä½ æƒ³è®©ç”¨æˆ·çš„å¯†ç æ˜¯æ˜æ–‡å­˜å‚¨ï¼Œéœ€è¦åœ¨å¯†ç å‰åŠ {noop}ã€‚ä¾‹å¦‚ è¿™æ ·ç™»é™†çš„æ—¶å€™å°±å¯ä»¥ç”¨sgä½œä¸ºç”¨æˆ·åï¼Œ1234ä½œä¸ºå¯†ç æ¥ç™»é™†äº†ã€‚ 2.3.3.2 å¯†ç åŠ å¯†å­˜å‚¨â€‹ å®é™…é¡¹ç›®ä¸­æˆ‘ä»¬ä¸ä¼šæŠŠå¯†ç æ˜æ–‡å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚ â€‹ é»˜è®¤ä½¿ç”¨çš„PasswordEncoderè¦æ±‚æ•°æ®åº“ä¸­çš„å¯†ç æ ¼å¼ä¸ºï¼š{id}password ã€‚å®ƒä¼šæ ¹æ®idå»åˆ¤æ–­å¯†ç çš„åŠ å¯†æ–¹å¼ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šé‡‡ç”¨è¿™ç§æ–¹å¼ã€‚æ‰€ä»¥å°±éœ€è¦æ›¿æ¢PasswordEncoderã€‚ â€‹ æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨SpringSecurityä¸ºæˆ‘ä»¬æä¾›çš„BCryptPasswordEncoderã€‚ â€‹ æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨æŠŠBCryptPasswordEncoderå¯¹è±¡æ³¨å…¥Springå®¹å™¨ä¸­ï¼ŒSpringSecurityå°±ä¼šä½¿ç”¨è¯¥PasswordEncoderæ¥è¿›è¡Œå¯†ç æ ¡éªŒã€‚ â€‹ æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªSpringSecurityçš„é…ç½®ç±»ï¼ŒSpringSecurityè¦æ±‚è¿™ä¸ªé…ç½®ç±»è¦ç»§æ‰¿WebSecurityConfigurerAdapterã€‚ 12345678910111213/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@Configurationpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Bean public PasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125;&#125; 2.3.3.3 ç™»é™†æ¥å£â€‹ æ¥ä¸‹æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ç™»é™†æ¥å£ï¼Œç„¶åè®©SpringSecurityå¯¹è¿™ä¸ªæ¥å£æ”¾è¡Œ,è®©ç”¨æˆ·è®¿é—®è¿™ä¸ªæ¥å£çš„æ—¶å€™ä¸ç”¨ç™»å½•ä¹Ÿèƒ½è®¿é—®ã€‚ â€‹ åœ¨æ¥å£ä¸­æˆ‘ä»¬é€šè¿‡AuthenticationManagerçš„authenticateæ–¹æ³•æ¥è¿›è¡Œç”¨æˆ·è®¤è¯,æ‰€ä»¥éœ€è¦åœ¨SecurityConfigä¸­é…ç½®æŠŠAuthenticationManageræ³¨å…¥å®¹å™¨ã€‚ â€‹ è®¤è¯æˆåŠŸçš„è¯è¦ç”Ÿæˆä¸€ä¸ªjwtï¼Œæ”¾å…¥å“åº”ä¸­è¿”å›ã€‚å¹¶ä¸”ä¸ºäº†è®©ç”¨æˆ·ä¸‹å›è¯·æ±‚æ—¶èƒ½é€šè¿‡jwtè¯†åˆ«å‡ºå…·ä½“çš„æ˜¯å“ªä¸ªç”¨æˆ·ï¼Œæˆ‘ä»¬éœ€è¦æŠŠç”¨æˆ·ä¿¡æ¯å­˜å…¥redisï¼Œå¯ä»¥æŠŠç”¨æˆ·idä½œä¸ºkeyã€‚ 123456789101112@RestControllerpublic class LoginController &#123; @Autowired private LoginServcie loginServcie; @PostMapping(&quot;/user/login&quot;) public ResponseResult login(@RequestBody User user)&#123; return loginServcie.login(user); &#125;&#125; 123456789101112131415161718192021222324252627282930313233/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@Configurationpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Bean public PasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125; @Override protected void configure(HttpSecurity http) throws Exception &#123; http //å…³é—­csrf .csrf().disable() //ä¸é€šè¿‡Sessionè·å–SecurityContext .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS) .and() .authorizeRequests() // å¯¹äºç™»å½•æ¥å£ å…è®¸åŒ¿åè®¿é—® .antMatchers(&quot;/user/login&quot;).anonymous() // é™¤ä¸Šé¢å¤–çš„æ‰€æœ‰è¯·æ±‚å…¨éƒ¨éœ€è¦é‰´æƒè®¤è¯ .anyRequest().authenticated(); &#125; @Bean @Override public AuthenticationManager authenticationManagerBean() throws Exception &#123; return super.authenticationManagerBean(); &#125;&#125; â€‹ 12345678910111213141516171819202122232425262728@Servicepublic class LoginServiceImpl implements LoginServcie &#123; @Autowired private AuthenticationManager authenticationManager; @Autowired private RedisCache redisCache; @Override public ResponseResult login(User user) &#123; UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(user.getUserName(),user.getPassword()); Authentication authenticate = authenticationManager.authenticate(authenticationToken); if(Objects.isNull(authenticate))&#123; throw new RuntimeException(&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;); &#125; //ä½¿ç”¨useridç”Ÿæˆtoken LoginUser loginUser = (LoginUser) authenticate.getPrincipal(); String userId = loginUser.getUser().getId().toString(); String jwt = JwtUtil.createJWT(userId); //authenticateå­˜å…¥redis redisCache.setCacheObject(&quot;login:&quot;+userId,loginUser); //æŠŠtokenå“åº”ç»™å‰ç«¯ HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;(); map.put(&quot;token&quot;,jwt); return new ResponseResult(200,&quot;ç™»é™†æˆåŠŸ&quot;,map); &#125;&#125; 2.3.3.4 è®¤è¯è¿‡æ»¤å™¨â€‹ æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œè¿™ä¸ªè¿‡æ»¤å™¨ä¼šå»è·å–è¯·æ±‚å¤´ä¸­çš„tokenï¼Œå¯¹tokenè¿›è¡Œè§£æå–å‡ºå…¶ä¸­çš„useridã€‚ â€‹ ä½¿ç”¨useridå»redisä¸­è·å–å¯¹åº”çš„LoginUserå¯¹è±¡ã€‚ â€‹ ç„¶åå°è£…Authenticationå¯¹è±¡å­˜å…¥SecurityContextHolder 123456789101112131415161718192021222324252627282930313233343536373839@Componentpublic class JwtAuthenticationTokenFilter extends OncePerRequestFilter &#123; @Autowired private RedisCache redisCache; @Override protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException &#123; //è·å–token String token = request.getHeader(&quot;token&quot;); if (!StringUtils.hasText(token)) &#123; //æ”¾è¡Œ filterChain.doFilter(request, response); return; &#125; //è§£ætoken String userid; try &#123; Claims claims = JwtUtil.parseJWT(token); userid = claims.getSubject(); &#125; catch (Exception e) &#123; e.printStackTrace(); throw new RuntimeException(&quot;tokenéæ³•&quot;); &#125; //ä»redisä¸­è·å–ç”¨æˆ·ä¿¡æ¯ String redisKey = &quot;login:&quot; + userid; LoginUser loginUser = redisCache.getCacheObject(redisKey); if(Objects.isNull(loginUser))&#123; throw new RuntimeException(&quot;ç”¨æˆ·æœªç™»å½•&quot;); &#125; //å­˜å…¥SecurityContextHolder //TODO è·å–æƒé™ä¿¡æ¯å°è£…åˆ°Authenticationä¸­ UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(loginUser,null,null); SecurityContextHolder.getContext().setAuthentication(authenticationToken); //æ”¾è¡Œ filterChain.doFilter(request, response); &#125;&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@Configurationpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Bean public PasswordEncoder passwordEncoder()&#123; return new BCryptPasswordEncoder(); &#125; @Autowired JwtAuthenticationTokenFilter jwtAuthenticationTokenFilter; @Override protected void configure(HttpSecurity http) throws Exception &#123; http //å…³é—­csrf .csrf().disable() //ä¸é€šè¿‡Sessionè·å–SecurityContext .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS) .and() .authorizeRequests() // å¯¹äºç™»å½•æ¥å£ å…è®¸åŒ¿åè®¿é—® .antMatchers(&quot;/user/login&quot;).anonymous() // é™¤ä¸Šé¢å¤–çš„æ‰€æœ‰è¯·æ±‚å…¨éƒ¨éœ€è¦é‰´æƒè®¤è¯ .anyRequest().authenticated(); //æŠŠtokenæ ¡éªŒè¿‡æ»¤å™¨æ·»åŠ åˆ°è¿‡æ»¤å™¨é“¾ä¸­ http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class); &#125; @Bean @Override public AuthenticationManager authenticationManagerBean() throws Exception &#123; return super.authenticationManagerBean(); &#125;&#125; 2.3.3.5 é€€å‡ºç™»é™†â€‹ æˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªç™»é™†æ¥å£ï¼Œç„¶åè·å–SecurityContextHolderä¸­çš„è®¤è¯ä¿¡æ¯ï¼Œåˆ é™¤redisä¸­å¯¹åº”çš„æ•°æ®å³å¯ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@Servicepublic class LoginServiceImpl implements LoginServcie &#123; @Autowired private AuthenticationManager authenticationManager; @Autowired private RedisCache redisCache; @Override public ResponseResult login(User user) &#123; UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(user.getUserName(),user.getPassword()); Authentication authenticate = authenticationManager.authenticate(authenticationToken); if(Objects.isNull(authenticate))&#123; throw new RuntimeException(&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;); &#125; //ä½¿ç”¨useridç”Ÿæˆtoken LoginUser loginUser = (LoginUser) authenticate.getPrincipal(); String userId = loginUser.getUser().getId().toString(); String jwt = JwtUtil.createJWT(userId); //authenticateå­˜å…¥redis redisCache.setCacheObject(&quot;login:&quot;+userId,loginUser); //æŠŠtokenå“åº”ç»™å‰ç«¯ HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;(); map.put(&quot;token&quot;,jwt); return new ResponseResult(200,&quot;ç™»é™†æˆåŠŸ&quot;,map); &#125; @Override public ResponseResult logout() &#123; Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); LoginUser loginUser = (LoginUser) authentication.getPrincipal(); Long userid = loginUser.getUser().getId(); redisCache.deleteObject(&quot;login:&quot;+userid); return new ResponseResult(200,&quot;é€€å‡ºæˆåŠŸ&quot;); &#125;&#125; 3. æˆæƒ3.0 æƒé™ç³»ç»Ÿçš„ä½œç”¨â€‹ ä¾‹å¦‚ä¸€ä¸ªå­¦æ ¡å›¾ä¹¦é¦†çš„ç®¡ç†ç³»ç»Ÿï¼Œå¦‚æœæ˜¯æ™®é€šå­¦ç”Ÿç™»å½•å°±èƒ½çœ‹åˆ°å€Ÿä¹¦è¿˜ä¹¦ç›¸å…³çš„åŠŸèƒ½ï¼Œä¸å¯èƒ½è®©ä»–çœ‹åˆ°å¹¶ä¸”å»ä½¿ç”¨æ·»åŠ ä¹¦ç±ä¿¡æ¯ï¼Œåˆ é™¤ä¹¦ç±ä¿¡æ¯ç­‰åŠŸèƒ½ã€‚ä½†æ˜¯å¦‚æœæ˜¯ä¸€ä¸ªå›¾ä¹¦é¦†ç®¡ç†å‘˜çš„è´¦å·ç™»å½•äº†ï¼Œåº”è¯¥å°±èƒ½çœ‹åˆ°å¹¶ä½¿ç”¨æ·»åŠ ä¹¦ç±ä¿¡æ¯ï¼Œåˆ é™¤ä¹¦ç±ä¿¡æ¯ç­‰åŠŸèƒ½ã€‚ â€‹ æ€»ç»“èµ·æ¥å°±æ˜¯ä¸åŒçš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¸åŒçš„åŠŸèƒ½ã€‚è¿™å°±æ˜¯æƒé™ç³»ç»Ÿè¦å»å®ç°çš„æ•ˆæœã€‚ â€‹ æˆ‘ä»¬ä¸èƒ½åªä¾èµ–å‰ç«¯å»åˆ¤æ–­ç”¨æˆ·çš„æƒé™æ¥é€‰æ‹©æ˜¾ç¤ºå“ªäº›èœå•å“ªäº›æŒ‰é’®ã€‚å› ä¸ºå¦‚æœåªæ˜¯è¿™æ ·ï¼Œå¦‚æœæœ‰äººçŸ¥é“äº†å¯¹åº”åŠŸèƒ½çš„æ¥å£åœ°å€å°±å¯ä»¥ä¸é€šè¿‡å‰ç«¯ï¼Œç›´æ¥å»å‘é€è¯·æ±‚æ¥å®ç°ç›¸å…³åŠŸèƒ½æ“ä½œã€‚ â€‹ æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦åœ¨åå°è¿›è¡Œç”¨æˆ·æƒé™çš„åˆ¤æ–­ï¼Œåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰ç›¸åº”çš„æƒé™ï¼Œå¿…é¡»å…·æœ‰æ‰€éœ€æƒé™æ‰èƒ½è¿›è¡Œç›¸åº”çš„æ“ä½œã€‚ â€‹ 3.1 æˆæƒåŸºæœ¬æµç¨‹â€‹ åœ¨SpringSecurityä¸­ï¼Œä¼šä½¿ç”¨é»˜è®¤çš„FilterSecurityInterceptoræ¥è¿›è¡Œæƒé™æ ¡éªŒã€‚åœ¨FilterSecurityInterceptorä¸­ä¼šä»SecurityContextHolderè·å–å…¶ä¸­çš„Authenticationï¼Œç„¶åè·å–å…¶ä¸­çš„æƒé™ä¿¡æ¯ã€‚å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰è®¿é—®å½“å‰èµ„æºæ‰€éœ€çš„æƒé™ã€‚ â€‹ æ‰€ä»¥æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åªéœ€è¦æŠŠå½“å‰ç™»å½•ç”¨æˆ·çš„æƒé™ä¿¡æ¯ä¹Ÿå­˜å…¥Authenticationã€‚ â€‹ ç„¶åè®¾ç½®æˆ‘ä»¬çš„èµ„æºæ‰€éœ€è¦çš„æƒé™å³å¯ã€‚ 3.2 æˆæƒå®ç°3.2.1 é™åˆ¶è®¿é—®èµ„æºæ‰€éœ€æƒé™â€‹ SpringSecurityä¸ºæˆ‘ä»¬æä¾›äº†åŸºäºæ³¨è§£çš„æƒé™æ§åˆ¶æ–¹æ¡ˆï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬é¡¹ç›®ä¸­ä¸»è¦é‡‡ç”¨çš„æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³¨è§£å»æŒ‡å®šè®¿é—®å¯¹åº”çš„èµ„æºæ‰€éœ€çš„æƒé™ã€‚ â€‹ ä½†æ˜¯è¦ä½¿ç”¨å®ƒæˆ‘ä»¬éœ€è¦å…ˆå¼€å¯ç›¸å…³é…ç½®ã€‚ 1@EnableGlobalMethodSecurity(prePostEnabled = true) â€‹ ç„¶åå°±å¯ä»¥ä½¿ç”¨å¯¹åº”çš„æ³¨è§£ã€‚@PreAuthorize 123456789@RestControllerpublic class HelloController &#123; @RequestMapping(&quot;/hello&quot;) @PreAuthorize(&quot;hasAuthority(&#x27;test&#x27;)&quot;) public String hello()&#123; return &quot;hello&quot;; &#125;&#125; 3.2.2 å°è£…æƒé™ä¿¡æ¯â€‹ æˆ‘ä»¬å‰é¢åœ¨å†™UserDetailsServiceImplçš„æ—¶å€™è¯´è¿‡ï¼Œåœ¨æŸ¥è¯¢å‡ºç”¨æˆ·åè¿˜è¦è·å–å¯¹åº”çš„æƒé™ä¿¡æ¯ï¼Œå°è£…åˆ°UserDetailsä¸­è¿”å›ã€‚ â€‹ æˆ‘ä»¬å…ˆç›´æ¥æŠŠæƒé™ä¿¡æ¯å†™æ­»å°è£…åˆ°UserDetailsä¸­è¿›è¡Œæµ‹è¯•ã€‚ â€‹ æˆ‘ä»¬ä¹‹å‰å®šä¹‰äº†UserDetailsçš„å®ç°ç±»LoginUserï¼Œæƒ³è¦è®©å…¶èƒ½å°è£…æƒé™ä¿¡æ¯å°±è¦å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980package com.sangeng.domain;import com.alibaba.fastjson.annotation.JSONField;import lombok.AllArgsConstructor;import lombok.Data;import lombok.NoArgsConstructor;import org.springframework.security.core.GrantedAuthority;import org.springframework.security.core.authority.SimpleGrantedAuthority;import org.springframework.security.core.userdetails.UserDetails;import java.util.Collection;import java.util.List;import java.util.stream.Collectors;/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@Data@NoArgsConstructorpublic class LoginUser implements UserDetails &#123; private User user; //å­˜å‚¨æƒé™ä¿¡æ¯ private List&lt;String&gt; permissions; public LoginUser(User user,List&lt;String&gt; permissions) &#123; this.user = user; this.permissions = permissions; &#125; //å­˜å‚¨SpringSecurityæ‰€éœ€è¦çš„æƒé™ä¿¡æ¯çš„é›†åˆ @JSONField(serialize = false) private List&lt;GrantedAuthority&gt; authorities; @Override public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() &#123; if(authorities!=null)&#123; return authorities; &#125; //æŠŠpermissionsä¸­å­—ç¬¦ä¸²ç±»å‹çš„æƒé™ä¿¡æ¯è½¬æ¢æˆGrantedAuthorityå¯¹è±¡å­˜å…¥authoritiesä¸­ authorities = permissions.stream(). map(SimpleGrantedAuthority::new) .collect(Collectors.toList()); return authorities; &#125; @Override public String getPassword() &#123; return user.getPassword(); &#125; @Override public String getUsername() &#123; return user.getUserName(); &#125; @Override public boolean isAccountNonExpired() &#123; return true; &#125; @Override public boolean isAccountNonLocked() &#123; return true; &#125; @Override public boolean isCredentialsNonExpired() &#123; return true; &#125; @Override public boolean isEnabled() &#123; return true; &#125;&#125; â€‹ LoginUserä¿®æ”¹å®Œåæˆ‘ä»¬å°±å¯ä»¥åœ¨UserDetailsServiceImplä¸­å»æŠŠæƒé™ä¿¡æ¯å°è£…åˆ°LoginUserä¸­äº†ã€‚æˆ‘ä»¬å†™æ­»æƒé™è¿›è¡Œæµ‹è¯•ï¼Œåé¢æˆ‘ä»¬å†ä»æ•°æ®åº“ä¸­æŸ¥è¯¢æƒé™ä¿¡æ¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142package com.sangeng.service.impl;import com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;import com.baomidou.mybatisplus.extension.conditions.query.LambdaQueryChainWrapper;import com.sangeng.domain.LoginUser;import com.sangeng.domain.User;import com.sangeng.mapper.UserMapper;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.security.core.userdetails.UserDetails;import org.springframework.security.core.userdetails.UserDetailsService;import org.springframework.security.core.userdetails.UsernameNotFoundException;import org.springframework.stereotype.Service;import java.util.ArrayList;import java.util.Arrays;import java.util.List;import java.util.Objects;/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@Servicepublic class UserDetailsServiceImpl implements UserDetailsService &#123; @Autowired private UserMapper userMapper; @Override public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException &#123; LambdaQueryWrapper&lt;User&gt; wrapper = new LambdaQueryWrapper&lt;&gt;(); wrapper.eq(User::getUserName,username); User user = userMapper.selectOne(wrapper); if(Objects.isNull(user))&#123; throw new RuntimeException(&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;); &#125; //TODO æ ¹æ®ç”¨æˆ·æŸ¥è¯¢æƒé™ä¿¡æ¯ æ·»åŠ åˆ°LoginUserä¸­ List&lt;String&gt; list = new ArrayList&lt;&gt;(Arrays.asList(&quot;test&quot;)); return new LoginUser(user,list); &#125;&#125; 3.2.3 ä»æ•°æ®åº“æŸ¥è¯¢æƒé™ä¿¡æ¯3.2.3.1 RBACæƒé™æ¨¡å‹â€‹ RBACæƒé™æ¨¡å‹ï¼ˆRole-Based Access Controlï¼‰å³ï¼šåŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ã€‚è¿™æ˜¯ç›®å‰æœ€å¸¸è¢«å¼€å‘è€…ä½¿ç”¨ä¹Ÿæ˜¯ç›¸å¯¹æ˜“ç”¨ã€é€šç”¨æƒé™æ¨¡å‹ã€‚ â€‹ 3.2.3.2 å‡†å¤‡å·¥ä½œ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687CREATE DATABASE /*!32312 IF NOT EXISTS*/`sg_security` /*!40100 DEFAULT CHARACTER SET utf8mb4 */;USE `sg_security`;/*Table structure for table `sys_menu` */DROP TABLE IF EXISTS `sys_menu`;CREATE TABLE `sys_menu` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `menu_name` varchar(64) NOT NULL DEFAULT &#x27;NULL&#x27; COMMENT &#x27;èœå•å&#x27;, `path` varchar(200) DEFAULT NULL COMMENT &#x27;è·¯ç”±åœ°å€&#x27;, `component` varchar(255) DEFAULT NULL COMMENT &#x27;ç»„ä»¶è·¯å¾„&#x27;, `visible` char(1) DEFAULT &#x27;0&#x27; COMMENT &#x27;èœå•çŠ¶æ€ï¼ˆ0æ˜¾ç¤º 1éšè—ï¼‰&#x27;, `status` char(1) DEFAULT &#x27;0&#x27; COMMENT &#x27;èœå•çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;, `perms` varchar(100) DEFAULT NULL COMMENT &#x27;æƒé™æ ‡è¯†&#x27;, `icon` varchar(100) DEFAULT &#x27;#&#x27; COMMENT &#x27;èœå•å›¾æ ‡&#x27;, `create_by` bigint(20) DEFAULT NULL, `create_time` datetime DEFAULT NULL, `update_by` bigint(20) DEFAULT NULL, `update_time` datetime DEFAULT NULL, `del_flag` int(11) DEFAULT &#x27;0&#x27; COMMENT &#x27;æ˜¯å¦åˆ é™¤ï¼ˆ0æœªåˆ é™¤ 1å·²åˆ é™¤ï¼‰&#x27;, `remark` varchar(500) DEFAULT NULL COMMENT &#x27;å¤‡æ³¨&#x27;, PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COMMENT=&#x27;èœå•è¡¨&#x27;;/*Table structure for table `sys_role` */DROP TABLE IF EXISTS `sys_role`;CREATE TABLE `sys_role` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(128) DEFAULT NULL, `role_key` varchar(100) DEFAULT NULL COMMENT &#x27;è§’è‰²æƒé™å­—ç¬¦ä¸²&#x27;, `status` char(1) DEFAULT &#x27;0&#x27; COMMENT &#x27;è§’è‰²çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;, `del_flag` int(1) DEFAULT &#x27;0&#x27; COMMENT &#x27;del_flag&#x27;, `create_by` bigint(200) DEFAULT NULL, `create_time` datetime DEFAULT NULL, `update_by` bigint(200) DEFAULT NULL, `update_time` datetime DEFAULT NULL, `remark` varchar(500) DEFAULT NULL COMMENT &#x27;å¤‡æ³¨&#x27;, PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COMMENT=&#x27;è§’è‰²è¡¨&#x27;;/*Table structure for table `sys_role_menu` */DROP TABLE IF EXISTS `sys_role_menu`;CREATE TABLE `sys_role_menu` ( `role_id` bigint(200) NOT NULL AUTO_INCREMENT COMMENT &#x27;è§’è‰²ID&#x27;, `menu_id` bigint(200) NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;èœå•id&#x27;, PRIMARY KEY (`role_id`,`menu_id`)) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4;/*Table structure for table `sys_user` */DROP TABLE IF EXISTS `sys_user`;CREATE TABLE `sys_user` ( `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;ä¸»é”®&#x27;, `user_name` varchar(64) NOT NULL DEFAULT &#x27;NULL&#x27; COMMENT &#x27;ç”¨æˆ·å&#x27;, `nick_name` varchar(64) NOT NULL DEFAULT &#x27;NULL&#x27; COMMENT &#x27;æ˜µç§°&#x27;, `password` varchar(64) NOT NULL DEFAULT &#x27;NULL&#x27; COMMENT &#x27;å¯†ç &#x27;, `status` char(1) DEFAULT &#x27;0&#x27; COMMENT &#x27;è´¦å·çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;, `email` varchar(64) DEFAULT NULL COMMENT &#x27;é‚®ç®±&#x27;, `phonenumber` varchar(32) DEFAULT NULL COMMENT &#x27;æ‰‹æœºå·&#x27;, `sex` char(1) DEFAULT NULL COMMENT &#x27;ç”¨æˆ·æ€§åˆ«ï¼ˆ0ç”·ï¼Œ1å¥³ï¼Œ2æœªçŸ¥ï¼‰&#x27;, `avatar` varchar(128) DEFAULT NULL COMMENT &#x27;å¤´åƒ&#x27;, `user_type` char(1) NOT NULL DEFAULT &#x27;1&#x27; COMMENT &#x27;ç”¨æˆ·ç±»å‹ï¼ˆ0ç®¡ç†å‘˜ï¼Œ1æ™®é€šç”¨æˆ·ï¼‰&#x27;, `create_by` bigint(20) DEFAULT NULL COMMENT &#x27;åˆ›å»ºäººçš„ç”¨æˆ·id&#x27;, `create_time` datetime DEFAULT NULL COMMENT &#x27;åˆ›å»ºæ—¶é—´&#x27;, `update_by` bigint(20) DEFAULT NULL COMMENT &#x27;æ›´æ–°äºº&#x27;, `update_time` datetime DEFAULT NULL COMMENT &#x27;æ›´æ–°æ—¶é—´&#x27;, `del_flag` int(11) DEFAULT &#x27;0&#x27; COMMENT &#x27;åˆ é™¤æ ‡å¿—ï¼ˆ0ä»£è¡¨æœªåˆ é™¤ï¼Œ1ä»£è¡¨å·²åˆ é™¤ï¼‰&#x27;, PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COMMENT=&#x27;ç”¨æˆ·è¡¨&#x27;;/*Table structure for table `sys_user_role` */DROP TABLE IF EXISTS `sys_user_role`;CREATE TABLE `sys_user_role` ( `user_id` bigint(200) NOT NULL AUTO_INCREMENT COMMENT &#x27;ç”¨æˆ·id&#x27;, `role_id` bigint(200) NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;è§’è‰²id&#x27;, PRIMARY KEY (`user_id`,`role_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4; 1234567891011SELECT DISTINCT m.`perms`FROM sys_user_role ur LEFT JOIN `sys_role` r ON ur.`role_id` = r.`id` LEFT JOIN `sys_role_menu` rm ON ur.`role_id` = rm.`role_id` LEFT JOIN `sys_menu` m ON m.`id` = rm.`menu_id`WHERE user_id = 2 AND r.`status` = 0 AND m.`status` = 0 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273package com.sangeng.domain;import com.baomidou.mybatisplus.annotation.TableId;import com.baomidou.mybatisplus.annotation.TableName;import com.fasterxml.jackson.annotation.JsonInclude;import lombok.AllArgsConstructor;import lombok.Data;import lombok.NoArgsConstructor;import java.io.Serializable;import java.util.Date;/** * èœå•è¡¨(Menu)å®ä½“ç±» * * @author makejava * @since 2021-11-24 15:30:08 */@TableName(value=&quot;sys_menu&quot;)@Data@AllArgsConstructor@NoArgsConstructor@JsonInclude(JsonInclude.Include.NON_NULL)public class Menu implements Serializable &#123; private static final long serialVersionUID = -54979041104113736L; @TableId private Long id; /** * èœå•å */ private String menuName; /** * è·¯ç”±åœ°å€ */ private String path; /** * ç»„ä»¶è·¯å¾„ */ private String component; /** * èœå•çŠ¶æ€ï¼ˆ0æ˜¾ç¤º 1éšè—ï¼‰ */ private String visible; /** * èœå•çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰ */ private String status; /** * æƒé™æ ‡è¯† */ private String perms; /** * èœå•å›¾æ ‡ */ private String icon; private Long createBy; private Date createTime; private Long updateBy; private Date updateTime; /** * æ˜¯å¦åˆ é™¤ï¼ˆ0æœªåˆ é™¤ 1å·²åˆ é™¤ï¼‰ */ private Integer delFlag; /** * å¤‡æ³¨ */ private String remark;&#125; 3.2.3.3 ä»£ç å®ç°â€‹ æˆ‘ä»¬åªéœ€è¦æ ¹æ®ç”¨æˆ·idå»æŸ¥è¯¢åˆ°å…¶æ‰€å¯¹åº”çš„æƒé™ä¿¡æ¯å³å¯ã€‚ â€‹ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰ä¸ªmapperï¼Œå…¶ä¸­æä¾›ä¸€ä¸ªæ–¹æ³•å¯ä»¥æ ¹æ®useridæŸ¥è¯¢æƒé™ä¿¡æ¯ã€‚ 1234567891011import com.baomidou.mybatisplus.core.mapper.BaseMapper;import com.sangeng.domain.Menu;import java.util.List;/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */public interface MenuMapper extends BaseMapper&lt;Menu&gt; &#123; List&lt;String&gt; selectPermsByUserId(Long id);&#125; â€‹ å°¤å…¶æ˜¯è‡ªå®šä¹‰æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºå¯¹åº”çš„mapperæ–‡ä»¶ï¼Œå®šä¹‰å¯¹åº”çš„sqlè¯­å¥ 12345678910111213141516171819&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot; &gt;&lt;mapper namespace=&quot;com.sangeng.mapper.MenuMapper&quot;&gt; &lt;select id=&quot;selectPermsByUserId&quot; resultType=&quot;java.lang.String&quot;&gt; SELECT DISTINCT m.`perms` FROM sys_user_role ur LEFT JOIN `sys_role` r ON ur.`role_id` = r.`id` LEFT JOIN `sys_role_menu` rm ON ur.`role_id` = rm.`role_id` LEFT JOIN `sys_menu` m ON m.`id` = rm.`menu_id` WHERE user_id = #&#123;userid&#125; AND r.`status` = 0 AND m.`status` = 0 &lt;/select&gt;&lt;/mapper&gt; â€‹ åœ¨application.ymlä¸­é…ç½®mapperXMLæ–‡ä»¶çš„ä½ç½® 123456789101112spring: datasource: url: jdbc:mysql://localhost:3306/sg_security?characterEncoding=utf-8&amp;serverTimezone=UTC username: root password: root driver-class-name: com.mysql.cj.jdbc.Driver redis: host: localhost port: 6379mybatis-plus: mapper-locations: classpath*:/mapper/**/*.xml â€‹ ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨UserDetailsServiceImplä¸­å»è°ƒç”¨è¯¥mapperçš„æ–¹æ³•æŸ¥è¯¢æƒé™ä¿¡æ¯å°è£…åˆ°LoginUserå¯¹è±¡ä¸­å³å¯ã€‚ 1234567891011121314151617181920212223242526/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@Servicepublic class UserDetailsServiceImpl implements UserDetailsService &#123; @Autowired private UserMapper userMapper; @Autowired private MenuMapper menuMapper; @Override public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException &#123; LambdaQueryWrapper&lt;User&gt; wrapper = new LambdaQueryWrapper&lt;&gt;(); wrapper.eq(User::getUserName,username); User user = userMapper.selectOne(wrapper); if(Objects.isNull(user))&#123; throw new RuntimeException(&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;); &#125; List&lt;String&gt; permissionKeyList = menuMapper.selectPermsByUserId(user.getId());// //æµ‹è¯•å†™æ³•// List&lt;String&gt; list = new ArrayList&lt;&gt;(Arrays.asList(&quot;test&quot;)); return new LoginUser(user,permissionKeyList); &#125;&#125; 4. è‡ªå®šä¹‰å¤±è´¥å¤„ç†â€‹ æˆ‘ä»¬è¿˜å¸Œæœ›åœ¨è®¤è¯å¤±è´¥æˆ–è€…æ˜¯æˆæƒå¤±è´¥çš„æƒ…å†µä¸‹ä¹Ÿèƒ½å’Œæˆ‘ä»¬çš„æ¥å£ä¸€æ ·è¿”å›ç›¸åŒç»“æ„çš„jsonï¼Œè¿™æ ·å¯ä»¥è®©å‰ç«¯èƒ½å¯¹å“åº”è¿›è¡Œç»Ÿä¸€çš„å¤„ç†ã€‚è¦å®ç°è¿™ä¸ªåŠŸèƒ½æˆ‘ä»¬éœ€è¦çŸ¥é“SpringSecurityçš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚ â€‹ åœ¨SpringSecurityä¸­ï¼Œå¦‚æœæˆ‘ä»¬åœ¨è®¤è¯æˆ–è€…æˆæƒçš„è¿‡ç¨‹ä¸­å‡ºç°äº†å¼‚å¸¸ä¼šè¢«ExceptionTranslationFilteræ•è·åˆ°ã€‚åœ¨ExceptionTranslationFilterä¸­ä¼šå»åˆ¤æ–­æ˜¯è®¤è¯å¤±è´¥è¿˜æ˜¯æˆæƒå¤±è´¥å‡ºç°çš„å¼‚å¸¸ã€‚ â€‹ å¦‚æœæ˜¯è®¤è¯è¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸ä¼šè¢«å°è£…æˆAuthenticationExceptionç„¶åè°ƒç”¨AuthenticationEntryPointå¯¹è±¡çš„æ–¹æ³•å»è¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚ â€‹ å¦‚æœæ˜¯æˆæƒè¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸ä¼šè¢«å°è£…æˆAccessDeniedExceptionç„¶åè°ƒç”¨AccessDeniedHandlerå¯¹è±¡çš„æ–¹æ³•å»è¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚ â€‹ æ‰€ä»¥å¦‚æœæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†ï¼Œæˆ‘ä»¬åªéœ€è¦è‡ªå®šä¹‰AuthenticationEntryPointå’ŒAccessDeniedHandlerç„¶åé…ç½®ç»™SpringSecurityå³å¯ã€‚ â‘ è‡ªå®šä¹‰å®ç°ç±» 1234567891011@Componentpublic class AccessDeniedHandlerImpl implements AccessDeniedHandler &#123; @Override public void handle(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException) throws IOException, ServletException &#123; ResponseResult result = new ResponseResult(HttpStatus.FORBIDDEN.value(), &quot;æƒé™ä¸è¶³&quot;); String json = JSON.toJSONString(result); WebUtils.renderString(response,json); &#125;&#125; 12345678910111213/** * @Author ä¸‰æ›´ Bç«™ï¼š https://space.bilibili.com/663528522 */@Componentpublic class AuthenticationEntryPointImpl implements AuthenticationEntryPoint &#123; @Override public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException &#123; ResponseResult result = new ResponseResult(HttpStatus.UNAUTHORIZED.value(), &quot;è®¤è¯å¤±è´¥è¯·é‡æ–°ç™»å½•&quot;); String json = JSON.toJSONString(result); WebUtils.renderString(response,json); &#125;&#125; â‘¡é…ç½®ç»™SpringSecurity â€‹ â€‹ å…ˆæ³¨å…¥å¯¹åº”çš„å¤„ç†å™¨ 12345@Autowiredprivate AuthenticationEntryPoint authenticationEntryPoint;@Autowiredprivate AccessDeniedHandler accessDeniedHandler; â€‹ ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨HttpSecurityå¯¹è±¡çš„æ–¹æ³•å»é…ç½®ã€‚ 12http.exceptionHandling().authenticationEntryPoint(authenticationEntryPoint). accessDeniedHandler(accessDeniedHandler); 5. è·¨åŸŸâ€‹ æµè§ˆå™¨å‡ºäºå®‰å…¨çš„è€ƒè™‘ï¼Œä½¿ç”¨ XMLHttpRequestå¯¹è±¡å‘èµ· HTTPè¯·æ±‚æ—¶å¿…é¡»éµå®ˆåŒæºç­–ç•¥ï¼Œå¦åˆ™å°±æ˜¯è·¨åŸŸçš„HTTPè¯·æ±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯è¢«ç¦æ­¢çš„ã€‚ åŒæºç­–ç•¥è¦æ±‚æºç›¸åŒæ‰èƒ½æ­£å¸¸è¿›è¡Œé€šä¿¡ï¼Œå³åè®®ã€åŸŸåã€ç«¯å£å·éƒ½å®Œå…¨ä¸€è‡´ã€‚ â€‹ å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå‰ç«¯é¡¹ç›®å’Œåç«¯é¡¹ç›®ä¸€èˆ¬éƒ½ä¸æ˜¯åŒæºçš„ï¼Œæ‰€ä»¥è‚¯å®šä¼šå­˜åœ¨è·¨åŸŸè¯·æ±‚çš„é—®é¢˜ã€‚ â€‹ æ‰€ä»¥æˆ‘ä»¬å°±è¦å¤„ç†ä¸€ä¸‹ï¼Œè®©å‰ç«¯èƒ½è¿›è¡Œè·¨åŸŸè¯·æ±‚ã€‚ â‘ å…ˆå¯¹SpringBooté…ç½®ï¼Œè¿è¡Œè·¨åŸŸè¯·æ±‚ 12345678910111213141516171819@Configurationpublic class CorsConfig implements WebMvcConfigurer &#123; @Override public void addCorsMappings(CorsRegistry registry) &#123; // è®¾ç½®å…è®¸è·¨åŸŸçš„è·¯å¾„ registry.addMapping(&quot;/**&quot;) // è®¾ç½®å…è®¸è·¨åŸŸè¯·æ±‚çš„åŸŸå .allowedOriginPatterns(&quot;*&quot;) // æ˜¯å¦å…è®¸cookie .allowCredentials(true) // è®¾ç½®å…è®¸çš„è¯·æ±‚æ–¹å¼ .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;DELETE&quot;, &quot;PUT&quot;) // è®¾ç½®å…è®¸çš„headerå±æ€§ .allowedHeaders(&quot;*&quot;) // è·¨åŸŸå…è®¸æ—¶é—´ .maxAge(3600); &#125;&#125; â‘¡å¼€å¯SpringSecurityçš„è·¨åŸŸè®¿é—® ç”±äºæˆ‘ä»¬çš„èµ„æºéƒ½ä¼šæ”¶åˆ°SpringSecurityçš„ä¿æŠ¤ï¼Œæ‰€ä»¥æƒ³è¦è·¨åŸŸè®¿é—®è¿˜è¦è®©SpringSecurityè¿è¡Œè·¨åŸŸè®¿é—®ã€‚ 123456789101112131415161718192021222324252627@Overrideprotected void configure(HttpSecurity http) throws Exception &#123; http //å…³é—­csrf .csrf().disable() //ä¸é€šè¿‡Sessionè·å–SecurityContext .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS) .and() .authorizeRequests() // å¯¹äºç™»å½•æ¥å£ å…è®¸åŒ¿åè®¿é—® .antMatchers(&quot;/user/login&quot;).anonymous() // é™¤ä¸Šé¢å¤–çš„æ‰€æœ‰è¯·æ±‚å…¨éƒ¨éœ€è¦é‰´æƒè®¤è¯ .anyRequest().authenticated(); //æ·»åŠ è¿‡æ»¤å™¨ http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class); //é…ç½®å¼‚å¸¸å¤„ç†å™¨ http.exceptionHandling() //é…ç½®è®¤è¯å¤±è´¥å¤„ç†å™¨ .authenticationEntryPoint(authenticationEntryPoint) .accessDeniedHandler(accessDeniedHandler); //å…è®¸è·¨åŸŸ http.cors();&#125; 6. é—ç•™å°é—®é¢˜6.1 å…¶å®ƒæƒé™æ ¡éªŒæ–¹æ³•â€‹ æˆ‘ä»¬å‰é¢éƒ½æ˜¯ä½¿ç”¨@PreAuthorizeæ³¨è§£ï¼Œç„¶ååœ¨åœ¨å…¶ä¸­ä½¿ç”¨çš„æ˜¯hasAuthorityæ–¹æ³•è¿›è¡Œæ ¡éªŒã€‚SpringSecurityè¿˜ä¸ºæˆ‘ä»¬æä¾›äº†å…¶å®ƒæ–¹æ³•ä¾‹å¦‚ï¼šhasAnyAuthorityï¼ŒhasRoleï¼ŒhasAnyRoleç­‰ã€‚ â€‹ â€‹ è¿™é‡Œæˆ‘ä»¬å…ˆä¸æ€¥ç€å»ä»‹ç»è¿™äº›æ–¹æ³•ï¼Œæˆ‘ä»¬å…ˆå»ç†è§£hasAuthorityçš„åŸç†ï¼Œç„¶åå†å»å­¦ä¹ å…¶ä»–æ–¹æ³•ä½ å°±æ›´å®¹æ˜“ç†è§£ï¼Œè€Œä¸æ˜¯æ­»è®°ç¡¬èƒŒåŒºåˆ«ã€‚å¹¶ä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©å®šä¹‰æ ¡éªŒæ–¹æ³•ï¼Œå®ç°æˆ‘ä»¬è‡ªå·±çš„æ ¡éªŒé€»è¾‘ã€‚ â€‹ hasAuthorityæ–¹æ³•å®é™…æ˜¯æ‰§è¡Œåˆ°äº†SecurityExpressionRootçš„hasAuthorityï¼Œå¤§å®¶åªè¦æ–­ç‚¹è°ƒè¯•æ—¢å¯çŸ¥é“å®ƒå†…éƒ¨çš„æ ¡éªŒåŸç†ã€‚ â€‹ å®ƒå†…éƒ¨å…¶å®æ˜¯è°ƒç”¨authenticationçš„getAuthoritiesæ–¹æ³•è·å–ç”¨æˆ·çš„æƒé™åˆ—è¡¨ã€‚ç„¶ååˆ¤æ–­æˆ‘ä»¬å­˜å…¥çš„æ–¹æ³•å‚æ•°æ•°æ®åœ¨æƒé™åˆ—è¡¨ä¸­ã€‚ â€‹ hasAnyAuthorityæ–¹æ³•å¯ä»¥ä¼ å…¥å¤šä¸ªæƒé™ï¼Œåªæœ‰ç”¨æˆ·æœ‰å…¶ä¸­ä»»æ„ä¸€ä¸ªæƒé™éƒ½å¯ä»¥è®¿é—®å¯¹åº”èµ„æºã€‚ 1234@PreAuthorize(&quot;hasAnyAuthority(&#x27;admin&#x27;,&#x27;test&#x27;,&#x27;system:dept:list&#x27;)&quot;)public String hello()&#123; return &quot;hello&quot;;&#125; â€‹ hasRoleè¦æ±‚æœ‰å¯¹åº”çš„è§’è‰²æ‰å¯ä»¥è®¿é—®ï¼Œä½†æ˜¯å®ƒå†…éƒ¨ä¼šæŠŠæˆ‘ä»¬ä¼ å…¥çš„å‚æ•°æ‹¼æ¥ä¸Š ROLE_ åå†å»æ¯”è¾ƒã€‚æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹è¦ç”¨ç”¨æˆ·å¯¹åº”çš„æƒé™ä¹Ÿè¦æœ‰ ROLE_ è¿™ä¸ªå‰ç¼€æ‰å¯ä»¥ã€‚ 1234@PreAuthorize(&quot;hasRole(&#x27;system:dept:list&#x27;)&quot;)public String hello()&#123; return &quot;hello&quot;;&#125; â€‹ hasAnyRole æœ‰ä»»æ„çš„è§’è‰²å°±å¯ä»¥è®¿é—®ã€‚å®ƒå†…éƒ¨ä¹Ÿä¼šæŠŠæˆ‘ä»¬ä¼ å…¥çš„å‚æ•°æ‹¼æ¥ä¸Š ROLE_ åå†å»æ¯”è¾ƒã€‚æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹è¦ç”¨ç”¨æˆ·å¯¹åº”çš„æƒé™ä¹Ÿè¦æœ‰ ROLE_ è¿™ä¸ªå‰ç¼€æ‰å¯ä»¥ã€‚ 1234@PreAuthorize(&quot;hasAnyRole(&#x27;admin&#x27;,&#x27;system:dept:list&#x27;)&quot;)public String hello()&#123; return &quot;hello&quot;;&#125; 6.2 è‡ªå®šä¹‰æƒé™æ ¡éªŒæ–¹æ³•â€‹ æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±çš„æƒé™æ ¡éªŒæ–¹æ³•ï¼Œåœ¨@PreAuthorizeæ³¨è§£ä¸­ä½¿ç”¨æˆ‘ä»¬çš„æ–¹æ³•ã€‚ 123456789101112@Component(&quot;ex&quot;)public class SGExpressionRoot &#123; public boolean hasAuthority(String authority)&#123; //è·å–å½“å‰ç”¨æˆ·çš„æƒé™ Authentication authentication = SecurityContextHolder.getContext().getAuthentication(); LoginUser loginUser = (LoginUser) authentication.getPrincipal(); List&lt;String&gt; permissions = loginUser.getPermissions(); //åˆ¤æ–­ç”¨æˆ·æƒé™é›†åˆä¸­æ˜¯å¦å­˜åœ¨authority return permissions.contains(authority); &#125;&#125; â€‹ åœ¨SPELè¡¨è¾¾å¼ä¸­ä½¿ç”¨ @exç›¸å½“äºè·å–å®¹å™¨ä¸­beançš„åå­—æœªexçš„å¯¹è±¡ã€‚ç„¶åå†è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„hasAuthorityæ–¹æ³• 12345@RequestMapping(&quot;/hello&quot;)@PreAuthorize(&quot;@ex.hasAuthority(&#x27;system:dept:list&#x27;)&quot;)public String hello()&#123; return &quot;hello&quot;;&#125; 6.3 åŸºäºé…ç½®çš„æƒé™æ§åˆ¶â€‹ æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨é…ç½®ç±»ä¸­ä½¿ç”¨ä½¿ç”¨é…ç½®çš„æ–¹å¼å¯¹èµ„æºè¿›è¡Œæƒé™æ§åˆ¶ã€‚ 123456789101112131415161718192021222324252627@Overrideprotected void configure(HttpSecurity http) throws Exception &#123; http //å…³é—­csrf .csrf().disable() //ä¸é€šè¿‡Sessionè·å–SecurityContext .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS) .and() .authorizeRequests() // å¯¹äºç™»å½•æ¥å£ å…è®¸åŒ¿åè®¿é—® .antMatchers(&quot;/user/login&quot;).anonymous() .antMatchers(&quot;/testCors&quot;).hasAuthority(&quot;system:dept:list222&quot;) // é™¤ä¸Šé¢å¤–çš„æ‰€æœ‰è¯·æ±‚å…¨éƒ¨éœ€è¦é‰´æƒè®¤è¯ .anyRequest().authenticated(); //æ·»åŠ è¿‡æ»¤å™¨ http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class); //é…ç½®å¼‚å¸¸å¤„ç†å™¨ http.exceptionHandling() //é…ç½®è®¤è¯å¤±è´¥å¤„ç†å™¨ .authenticationEntryPoint(authenticationEntryPoint) .accessDeniedHandler(accessDeniedHandler); //å…è®¸è·¨åŸŸ http.cors();&#125; 6.4 CSRFâ€‹ CSRFæ˜¯æŒ‡è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCross-site request forgeryï¼‰ï¼Œæ˜¯webå¸¸è§çš„æ”»å‡»ä¹‹ä¸€ã€‚ â€‹ https://blog.csdn.net/freeking101/article/details/86537087 â€‹ SpringSecurityå»é˜²æ­¢CSRFæ”»å‡»çš„æ–¹å¼å°±æ˜¯é€šè¿‡csrf_tokenã€‚åç«¯ä¼šç”Ÿæˆä¸€ä¸ªcsrf_tokenï¼Œå‰ç«¯å‘èµ·è¯·æ±‚çš„æ—¶å€™éœ€è¦æºå¸¦è¿™ä¸ªcsrf_token,åç«¯ä¼šæœ‰è¿‡æ»¤å™¨è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœæ²¡æœ‰æºå¸¦æˆ–è€…æ˜¯ä¼ªé€ çš„å°±ä¸å…è®¸è®¿é—®ã€‚ â€‹ æˆ‘ä»¬å¯ä»¥å‘ç°CSRFæ”»å‡»ä¾é çš„æ˜¯cookieä¸­æ‰€æºå¸¦çš„è®¤è¯ä¿¡æ¯ã€‚ä½†æ˜¯åœ¨å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ä¸­æˆ‘ä»¬çš„è®¤è¯ä¿¡æ¯å…¶å®æ˜¯tokenï¼Œè€Œtokenå¹¶ä¸æ˜¯å­˜å‚¨ä¸­cookieä¸­ï¼Œå¹¶ä¸”éœ€è¦å‰ç«¯ä»£ç å»æŠŠtokenè®¾ç½®åˆ°è¯·æ±‚å¤´ä¸­æ‰å¯ä»¥ï¼Œæ‰€ä»¥CSRFæ”»å‡»ä¹Ÿå°±ä¸ç”¨æ‹…å¿ƒäº†ã€‚ 6.5 è®¤è¯æˆåŠŸå¤„ç†å™¨â€‹ å®é™…ä¸Šåœ¨UsernamePasswordAuthenticationFilterè¿›è¡Œç™»å½•è®¤è¯çš„æ—¶å€™ï¼Œå¦‚æœç™»å½•æˆåŠŸäº†æ˜¯ä¼šè°ƒç”¨AuthenticationSuccessHandlerçš„æ–¹æ³•è¿›è¡Œè®¤è¯æˆåŠŸåçš„å¤„ç†çš„ã€‚AuthenticationSuccessHandlerå°±æ˜¯ç™»å½•æˆåŠŸå¤„ç†å™¨ã€‚ â€‹ æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å»è‡ªå®šä¹‰æˆåŠŸå¤„ç†å™¨è¿›è¡ŒæˆåŠŸåçš„ç›¸åº”å¤„ç†ã€‚ 123456789@Componentpublic class SGSuccessHandler implements AuthenticationSuccessHandler &#123; @Override public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException &#123; System.out.println(&quot;è®¤è¯æˆåŠŸäº†&quot;); &#125;&#125; 1234567891011121314@Configurationpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Autowired private AuthenticationSuccessHandler successHandler; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.formLogin().successHandler(successHandler); http.authorizeRequests().anyRequest().authenticated(); &#125;&#125; 6.6 è®¤è¯å¤±è´¥å¤„ç†å™¨â€‹ å®é™…ä¸Šåœ¨UsernamePasswordAuthenticationFilterè¿›è¡Œç™»å½•è®¤è¯çš„æ—¶å€™ï¼Œå¦‚æœè®¤è¯å¤±è´¥äº†æ˜¯ä¼šè°ƒç”¨AuthenticationFailureHandlerçš„æ–¹æ³•è¿›è¡Œè®¤è¯å¤±è´¥åçš„å¤„ç†çš„ã€‚AuthenticationFailureHandlerå°±æ˜¯ç™»å½•å¤±è´¥å¤„ç†å™¨ã€‚ â€‹ æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å»è‡ªå®šä¹‰å¤±è´¥å¤„ç†å™¨è¿›è¡Œå¤±è´¥åçš„ç›¸åº”å¤„ç†ã€‚ 1234567@Componentpublic class SGFailureHandler implements AuthenticationFailureHandler &#123; @Override public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) throws IOException, ServletException &#123; System.out.println(&quot;è®¤è¯å¤±è´¥äº†&quot;); &#125;&#125; 123456789101112131415161718192021@Configurationpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Autowired private AuthenticationSuccessHandler successHandler; @Autowired private AuthenticationFailureHandler failureHandler; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.formLogin()// é…ç½®è®¤è¯æˆåŠŸå¤„ç†å™¨ .successHandler(successHandler)// é…ç½®è®¤è¯å¤±è´¥å¤„ç†å™¨ .failureHandler(failureHandler); http.authorizeRequests().anyRequest().authenticated(); &#125;&#125; 6.7 ç™»å‡ºæˆåŠŸå¤„ç†å™¨12345678@Componentpublic class SGLogoutSuccessHandler implements LogoutSuccessHandler &#123; @Override public void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException &#123; System.out.println(&quot;æ³¨é”€æˆåŠŸ&quot;); &#125;&#125; 123456789101112131415161718192021222324252627@Configurationpublic class SecurityConfig extends WebSecurityConfigurerAdapter &#123; @Autowired private AuthenticationSuccessHandler successHandler; @Autowired private AuthenticationFailureHandler failureHandler; @Autowired private LogoutSuccessHandler logoutSuccessHandler; @Override protected void configure(HttpSecurity http) throws Exception &#123; http.formLogin()// é…ç½®è®¤è¯æˆåŠŸå¤„ç†å™¨ .successHandler(successHandler)// é…ç½®è®¤è¯å¤±è´¥å¤„ç†å™¨ .failureHandler(failureHandler); http.logout() //é…ç½®æ³¨é”€æˆåŠŸå¤„ç†å™¨ .logoutSuccessHandler(logoutSuccessHandler); http.authorizeRequests().anyRequest().authenticated(); &#125;&#125;","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"SpringSecurity","slug":"SpringSecurity","permalink":"https://guoshunfa.com/tags/SpringSecurity/"}]},{"title":"Spring è°ƒåº¦ä»»åŠ¡","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Springå…¨å®¶æ¡¶/Springè°ƒåº¦ä»»åŠ¡","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.309Z","comments":true,"path":"2022/07/Springè°ƒåº¦ä»»åŠ¡/","link":"","permalink":"https://guoshunfa.com/2022/07/Spring%E8%B0%83%E5%BA%A6%E4%BB%BB%E5%8A%A1/","excerpt":"","text":"ä»€ä¹ˆæ˜¯è°ƒåº¦ä»»åŠ¡@Scheduledå°†æ„å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œé€šè¿‡ä½¿ç”¨ Spring çš„æ³¨é‡Šæ¯äº”ç§’æ‰“å°ä¸€æ¬¡å½“å‰æ—¶é—´ã€‚ å‰æè¦æ±‚ æœ€å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨æˆ– IDE JDK 1.8æˆ–æ›´é«˜ç‰ˆæœ¬ Gradle 4+æˆ–Maven 3.2+ å¦‚ä½•å®Œæˆè°ƒåº¦ä»»åŠ¡ä¸å¤§å¤šæ•° Springå…¥é—¨æŒ‡å—ä¸€æ ·ï¼Œæ‚¨å¯ä»¥ä»å¤´å¼€å§‹å¹¶å®Œæˆæ¯ä¸ªæ­¥éª¤ï¼Œä¹Ÿå¯ä»¥ç»•è¿‡æ‚¨å·²ç»ç†Ÿæ‚‰çš„åŸºæœ¬è®¾ç½®æ­¥éª¤ã€‚æ— è®ºå“ªç§æ–¹å¼ï¼Œæ‚¨æœ€ç»ˆéƒ½ä¼šå¾—åˆ°æœ‰æ•ˆçš„ä»£ç ã€‚ è¦ä»å¤´å¼€å§‹ï¼Œè¯·è½¬åˆ°ä» Spring Initializr å¼€å§‹ã€‚ è¦è·³è¿‡åŸºç¡€çŸ¥è¯†ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š ä¸‹è½½å¹¶è§£å‹ç¼©æœ¬æŒ‡å—çš„æºå­˜å‚¨åº“ï¼Œæˆ–ä½¿ç”¨Gitå…‹éš†å®ƒï¼šgit clone https://github.com/spring-guides/gs-scheduling-tasks.git å…‰ç›˜è¿›å…¥gs-scheduling-tasks/initial è·³åˆ°åˆ›å»ºè®¡åˆ’ä»»åŠ¡ã€‚ å®Œæˆåï¼Œæ‚¨å¯ä»¥æ ¹æ® ä¸­çš„ä»£ç æ£€æŸ¥ç»“æœgs-scheduling-tasks/completeã€‚ ä» Spring Initializr å¼€å§‹æ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ª[é¢„åˆå§‹åŒ–çš„é¡¹ç›®](https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=2.5.5&amp;packaging=jar&amp;jvmVersion=11&amp;groupId=com.example&amp;artifactId=scheduling-tasks&amp;name=scheduling-tasks&amp;description=Demo project for Spring Boot&amp;packageName&#x3D;com.example.scheduling-tasks)å¹¶å•å‡»ç”Ÿæˆä»¥ä¸‹è½½ ZIP æ–‡ä»¶ã€‚è¯¥é¡¹ç›®é…ç½®ä¸ºé€‚åˆæœ¬æ•™ç¨‹ä¸­çš„ç¤ºä¾‹ã€‚ æ‰‹åŠ¨åˆå§‹åŒ–é¡¹ç›®ï¼š å¯¼èˆªåˆ°https://start.spring.ioã€‚è¯¥æœåŠ¡ä¼šå¼•å…¥åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰ä¾èµ–é¡¹ï¼Œå¹¶ä¸ºæ‚¨å®Œæˆå¤§éƒ¨åˆ†è®¾ç½®ã€‚ é€‰æ‹© Gradle æˆ– Maven ä»¥åŠæ‚¨è¦ä½¿ç”¨çš„è¯­è¨€ã€‚æœ¬æŒ‡å—å‡å®šæ‚¨é€‰æ‹©äº† Javaã€‚ å•å‡»ç”Ÿæˆã€‚ ä¸‹è½½ç”Ÿæˆçš„ ZIP æ–‡ä»¶ï¼Œå®ƒæ˜¯æ ¹æ®æ‚¨çš„é€‰æ‹©é…ç½®çš„ Web åº”ç”¨ç¨‹åºçš„å­˜æ¡£ã€‚ å¦‚æœæ‚¨çš„ IDE é›†æˆäº† Spring Initializrï¼Œæ‚¨å¯ä»¥ä» IDE ä¸­å®Œæˆæ­¤è¿‡ç¨‹ã€‚ æ‚¨è¿˜å¯ä»¥ä» Github ä¸­ fork é¡¹ç›®å¹¶åœ¨æ‚¨çš„ IDE æˆ–å…¶ä»–ç¼–è¾‘å™¨ä¸­æ‰“å¼€å®ƒã€‚ æ·»åŠ awaitilityä¾èµ–é¡¹ï¼ˆå¯ä¸æ·»åŠ ï¼‰ä¸­çš„æµ‹è¯•complete/src/test/java/com/example/schedulingtasks/ScheduledTasksTest.javaéœ€è¦awaitilityåº“ã€‚ åº“çš„æ›´é«˜ç‰ˆæœ¬awaitilityä¸é€‚ç”¨äºæ­¤æµ‹è¯•ï¼Œå› æ­¤æ‚¨å¿…é¡»æŒ‡å®šç‰ˆæœ¬ 3.1.2ã€‚ è¦å°†awaitilityåº“æ·»åŠ åˆ° Mavenï¼Œè¯·æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹ï¼š 123456&lt;dependency&gt; &lt;groupId&gt;org.awaitility&lt;/groupId&gt; &lt;artifactId&gt;awaitility&lt;/artifactId&gt; &lt;version&gt;3.1.2&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; ä»¥ä¸‹æ¸…å•æ˜¾ç¤ºäº†å®Œæˆçš„pom.xmlæ–‡ä»¶ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.7.1&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.example&lt;/groupId&gt; &lt;artifactId&gt;scheduling-tasks-complete&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;scheduling-tasks-complete&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.awaitility&lt;/groupId&gt; &lt;artifactId&gt;awaitility&lt;/artifactId&gt; &lt;version&gt;3.1.2&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; è¦å°†awaitilityåº“æ·»åŠ åˆ° Gradleï¼Œè¯·æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹ï¼š 1testImplementation &#x27;org.awaitility:awaitility:3.1.2&#x27; ä»¥ä¸‹æ¸…å•æ˜¾ç¤ºäº†å®Œæˆçš„build.gradleæ–‡ä»¶ï¼š 1234567891011121314151617181920212223plugins &#123; id &#x27;org.springframework.boot&#x27; version &#x27;2.7.1&#x27; id &#x27;io.spring.dependency-management&#x27; version &#x27;1.0.11.RELEASE&#x27; id &#x27;java&#x27;&#125;group = &#x27;com.example&#x27;version = &#x27;0.0.1-SNAPSHOT&#x27;sourceCompatibility = &#x27;1.8&#x27;repositories &#123; mavenCentral()&#125;dependencies &#123; implementation &#x27;org.springframework.boot:spring-boot-starter&#x27; testImplementation &#x27;org.awaitility:awaitility:3.1.2&#x27; testImplementation(&#x27;org.springframework.boot:spring-boot-starter-test&#x27;)&#125;test &#123; useJUnitPlatform()&#125; åˆ›å»ºè®¡åˆ’ä»»åŠ¡ç°åœ¨æ‚¨å·²ç»è®¾ç½®äº†æ‚¨çš„é¡¹ç›®ï¼Œæ‚¨å¯ä»¥åˆ›å»ºè®¡åˆ’ä»»åŠ¡ã€‚ä»¥ä¸‹æ¸…å•ï¼ˆæ¥è‡ªsrc/main/java/com/example/schedulingtasks/ScheduledTasks.javaï¼‰æ˜¾ç¤ºäº†å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œï¼š 1234567891011121314151617181920212223242526272829303132333435363738/* * Copyright 2012-2015 the original author or authors. * * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); * you may not use this file except in compliance with the License. * You may obtain a copy of the License at * * https://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */package com.example.schedulingtasks;import java.text.SimpleDateFormat;import java.util.Date;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.scheduling.annotation.Scheduled;import org.springframework.stereotype.Component;@Componentpublic class ScheduledTasks &#123; private static final Logger log = LoggerFactory.getLogger(ScheduledTasks.class); private static final SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;HH:mm:ss&quot;); @Scheduled(fixedRate = 5000) public void reportCurrentTime() &#123; log.info(&quot;The time is now &#123;&#125;&quot;, dateFormat.format(new Date())); &#125;&#125; Scheduledæ³¨é‡Šå®šä¹‰ç‰¹å®šæ–¹æ³•ä½•æ—¶è¿è¡Œã€‚ æ­¤ç¤ºä¾‹ä½¿ç”¨fixedRateï¼Œå®ƒæŒ‡å®šæ–¹æ³•è°ƒç”¨ä¹‹é—´çš„é—´éš”ï¼Œä»æ¯æ¬¡è°ƒç”¨çš„å¼€å§‹æ—¶é—´å¼€å§‹è®¡ç®—ã€‚è¿˜æœ‰å…¶ä»–é€‰é¡¹ï¼Œä¾‹å¦‚fixedDelayï¼Œå®ƒæŒ‡å®šä»ä»»åŠ¡å®Œæˆå¼€å§‹è®¡ç®—çš„è°ƒç”¨é—´éš”ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨@Scheduled(cron=&quot;. . .&quot;)è¡¨è¾¾å¼è¿›è¡Œæ›´å¤æ‚çš„ä»»åŠ¡è°ƒåº¦ã€‚ å¯ç”¨è°ƒåº¦å°½ç®¡è®¡åˆ’ä»»åŠ¡å¯ä»¥åµŒå…¥åˆ° Web åº”ç”¨ç¨‹åºå’Œ WAR æ–‡ä»¶ä¸­ï¼Œä½†æ›´ç®€å•çš„æ–¹æ³•ï¼ˆåœ¨ä¸‹ä¸€ä¸ªæ¸…å•ä¸­æ˜¾ç¤ºï¼‰åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ç¨‹åºã€‚ä¸ºæ­¤ï¼Œå°†æ‰€æœ‰å†…å®¹æ‰“åŒ…åˆ°ä¸€ä¸ªå¯æ‰§è¡Œçš„ JAR æ–‡ä»¶ä¸­ï¼Œç”±ä¸€ä¸ªå¾ˆå¥½çš„æ—§ Javamain()æ–¹æ³•é©±åŠ¨ã€‚ä»¥ä¸‹æ¸…å•ï¼ˆæ¥è‡ªsrc/main/java/com/example/schedulingtasks/SchedulingTasksApplication.javaï¼‰æ˜¾ç¤ºäº†åº”ç”¨ç¨‹åºç±»ï¼š 1234567891011121314package com.example.schedulingtasks;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.scheduling.annotation.EnableScheduling;@SpringBootApplication@EnableSchedulingpublic class SchedulingTasksApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SchedulingTasksApplication.class); &#125;&#125; @SpringBootApplicationæ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„æ³¨è§£ï¼Œå®ƒæ·»åŠ äº†ä»¥ä¸‹æ‰€æœ‰å†…å®¹ï¼š @Configurationï¼šå°†ç±»æ ‡è®°ä¸ºåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡çš„ bean å®šä¹‰æºã€‚ @EnableAutoConfigurationï¼šå‘Šè¯‰ Spring Boot å¼€å§‹æ·»åŠ åŸºäºç±»è·¯å¾„è®¾ç½®ã€å…¶ä»– bean å’Œå„ç§å±æ€§è®¾ç½®çš„ beanã€‚ä¾‹å¦‚ï¼Œå¦‚æœspring-webmvcåœ¨ç±»è·¯å¾„ä¸Šï¼Œæ­¤æ³¨é‡Šå°†åº”ç”¨ç¨‹åºæ ‡è®°ä¸º Web åº”ç”¨ç¨‹åºå¹¶æ¿€æ´»å…³é”®è¡Œä¸ºï¼Œä¾‹å¦‚è®¾ç½®DispatcherServlet. @ComponentScanï¼šå‘Šè¯‰ Spring åœ¨åŒ…ä¸­å¯»æ‰¾å…¶ä»–ç»„ä»¶ã€é…ç½®å’ŒæœåŠ¡com/exampleï¼Œè®©å®ƒæ‰¾åˆ°æ§åˆ¶å™¨ã€‚ è¯¥main()æ–¹æ³•ä½¿ç”¨ Spring Boot çš„SpringApplication.run()æ–¹æ³•æ¥å¯åŠ¨åº”ç”¨ç¨‹åºã€‚æ‚¨æ˜¯å¦æ³¨æ„åˆ°æ²¡æœ‰ä¸€è¡Œ XMLï¼Ÿä¹Ÿæ²¡æœ‰web.xmlæ–‡ä»¶ã€‚æ­¤ Web åº”ç”¨ç¨‹åºæ˜¯ 100% çº¯ Javaï¼Œæ‚¨æ— éœ€å¤„ç†ä»»ä½•ç®¡é“æˆ–åŸºç¡€è®¾æ–½çš„é…ç½®ã€‚ @EnableSchedulingæ³¨é‡Šç¡®ä¿åˆ›å»ºåå°ä»»åŠ¡æ‰§è¡Œå™¨ã€‚æ²¡æœ‰å®ƒï¼Œä»€ä¹ˆéƒ½æ— æ³•å®‰æ’ã€‚ æ„å»ºå¯æ‰§è¡Œ JARæ‚¨å¯ä»¥ä½¿ç”¨ Gradle æˆ– Maven ä»å‘½ä»¤è¡Œè¿è¡Œåº”ç”¨ç¨‹åºã€‚æ‚¨è¿˜å¯ä»¥æ„å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰å¿…è¦ä¾èµ–é¡¹ã€ç±»å’Œèµ„æºçš„å¯æ‰§è¡Œ JAR æ–‡ä»¶å¹¶è¿è¡Œå®ƒã€‚æ„å»ºå¯æ‰§è¡Œ jar å¯ä»¥è½»æ¾åœ°å°†æœåŠ¡ä½œä¸ºåº”ç”¨ç¨‹åºåœ¨æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­è·¨ä¸åŒç¯å¢ƒç­‰è¿›è¡Œå‘å¸ƒã€ç‰ˆæœ¬æ§åˆ¶å’Œéƒ¨ç½²ã€‚ å¦‚æœæ‚¨ä½¿ç”¨ Gradleï¼Œåˆ™å¯ä»¥ä½¿ç”¨./gradlew bootRun. æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ æ„å»º JAR æ–‡ä»¶./gradlew buildï¼Œç„¶åè¿è¡Œ JAR æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1oracle-java -jar build/libs/gs-scheduling-tasks-0.1.0.jar å¦‚æœæ‚¨ä½¿ç”¨ Mavenï¼Œåˆ™å¯ä»¥ä½¿ç”¨./mvnw spring-boot:run. æˆ–è€…ï¼Œæ‚¨å¯ä»¥æ„å»º JAR æ–‡ä»¶ï¼Œ./mvnw clean packageç„¶åè¿è¡Œ JAR æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1oracle-java -jar ç›®æ ‡/gs-scheduling-tasks-0.1.0.jar æ­¤å¤„æè¿°çš„æ­¥éª¤åˆ›å»ºäº†ä¸€ä¸ªå¯è¿è¡Œçš„ JARã€‚æ‚¨è¿˜å¯ä»¥æ„å»ºç»å…¸çš„ WAR æ–‡ä»¶ã€‚ æ˜¾ç¤ºæ—¥å¿—è¾“å‡ºï¼Œä»æ—¥å¿—å¯ä»¥çœ‹å‡ºæ˜¯åœ¨åå°çº¿ç¨‹ä¸Šã€‚æ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ‚¨çš„è®¡åˆ’ä»»åŠ¡æ¯äº”ç§’è§¦å‘ä¸€æ¬¡ã€‚ä»¥ä¸‹æ¸…å•æ˜¾ç¤ºäº†å…¸å‹çš„è¾“å‡ºï¼š 123456...2019-10-02 12:07:35.659 INFO 28617 --- [ scheduling-1] c.e.schedulingtasks.ScheduledTasks : The time is now 12:07:352019-10-02 12:07:40.659 INFO 28617 --- [ scheduling-1] c.e.schedulingtasks.ScheduledTasks : The time is now 12:07:402019-10-02 12:07:45.659 INFO 28617 --- [ scheduling-1] c.e.schedulingtasks.ScheduledTasks : The time is now 12:07:452019-10-02 12:07:50.657 INFO 28617 --- [ scheduling-1] c.e.schedulingtasks.ScheduledTasks : The time is now 12:07:50... å‚è€ƒæ–‡æ¡£ springå®˜ç½‘","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Spring","slug":"Spring","permalink":"https://guoshunfa.com/tags/Spring/"}]},{"title":"Reactæ¡†æ¶ ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/React/Reactæ¡†æ¶-ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.301Z","comments":true,"path":"2022/07/Reactæ¡†æ¶-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/React%E6%A1%86%E6%9E%B6-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"è¿›å…¥ Reactå®˜ç½‘ å°šç¡…è°· Reactæ•™å­¦è§†é¢‘ï¼šbç«™ | ç™¾åº¦ç½‘ç›˜ æå–ç ï¼šc1acï¼ˆåŒ…å«è§†é¢‘ã€æºç ã€è¯¾ä»¶ï¼‰ (åœ¨ç½‘ç»œå…è®¸çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æŸ¥çœ‹Reactå®˜ç½‘è¿›è¡Œäº†è§£Reactã€‚) 1. ä»€ä¹ˆæ˜¯Reactå£°æ˜å¼ React ä½¿åˆ›å»ºäº¤äº’å¼ UI å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚ä¸ºä½ åº”ç”¨çš„æ¯ä¸€ä¸ªçŠ¶æ€è®¾è®¡ç®€æ´çš„è§†å›¾ï¼Œå½“æ•°æ®å˜åŠ¨æ—¶ React èƒ½é«˜æ•ˆæ›´æ–°å¹¶æ¸²æŸ“åˆé€‚çš„ç»„ä»¶ã€‚ ä»¥å£°æ˜å¼ç¼–å†™ UIï¼Œå¯ä»¥è®©ä½ çš„ä»£ç æ›´åŠ å¯é ï¼Œä¸”æ–¹ä¾¿è°ƒè¯•ã€‚ ç»„ä»¶åŒ– æ„å»ºç®¡ç†è‡ªèº«çŠ¶æ€çš„å°è£…ç»„ä»¶ï¼Œç„¶åå¯¹å…¶ç»„åˆä»¥æ„æˆå¤æ‚çš„ UIã€‚ ç”±äºç»„ä»¶é€»è¾‘ä½¿ç”¨ JavaScript ç¼–å†™è€Œéæ¨¡æ¿ï¼Œå› æ­¤ä½ å¯ä»¥è½»æ¾åœ°åœ¨åº”ç”¨ä¸­ä¼ é€’æ•°æ®ï¼Œå¹¶ä¿æŒçŠ¶æ€ä¸ DOM åˆ†ç¦»ã€‚ ä¸€æ¬¡å­¦ä¹ ï¼Œè·¨å¹³å°ç¼–å†™ æ— è®ºä½ ç°åœ¨ä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ ˆï¼Œåœ¨æ— éœ€é‡å†™ç°æœ‰ä»£ç çš„å‰æä¸‹ï¼Œé€šè¿‡å¼•å…¥ React æ¥å¼€å‘æ–°åŠŸèƒ½ã€‚ React è¿˜å¯ä»¥ä½¿ç”¨ Node è¿›è¡ŒæœåŠ¡å™¨æ¸²æŸ“ï¼Œæˆ–ä½¿ç”¨ React Native å¼€å‘åŸç”Ÿç§»åŠ¨åº”ç”¨ã€‚ 2. CDN é“¾æ¥ å¯ä»¥é€šè¿‡ CDN è·å¾— React å’Œ ReactDOM çš„ UMD ç‰ˆæœ¬ã€‚ 12&lt;script crossorigin src=&quot;https://unpkg.com/react@17/umd/react.development.js&quot;&gt;&lt;/script&gt;&lt;script crossorigin src=&quot;https://unpkg.com/react-dom@17/umd/react-dom.development.js&quot;&gt;&lt;/script&gt; ä¸Šè¿°ç‰ˆæœ¬ä»…ç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¸é€‚åˆç”¨äºç”Ÿäº§ç¯å¢ƒã€‚å‹ç¼©ä¼˜åŒ–åå¯ç”¨äºç”Ÿäº§çš„ React ç‰ˆæœ¬å¯é€šè¿‡å¦‚ä¸‹æ–¹å¼å¼•ç”¨ï¼š 12&lt;script crossorigin src=&quot;https://unpkg.com/react@17/umd/react.production.min.js&quot;&gt;&lt;/script&gt;&lt;script crossorigin src=&quot;https://unpkg.com/react-dom@17/umd/react-dom.production.min.js&quot;&gt;&lt;/script&gt; å¦‚æœéœ€è¦åŠ è½½æŒ‡å®šç‰ˆæœ¬çš„ react å’Œ react-domï¼Œå¯ä»¥æŠŠ 17 æ›¿æ¢æˆæ‰€éœ€åŠ è½½çš„ç‰ˆæœ¬å·ã€‚ babel: 1&lt;script src=&quot;https://unpkg.com/babel-standalone@6/babel.min.js&quot;&gt;&lt;/script&gt; å‚è€ƒèµ„æ–™ å°šç¡…è°· React å®˜æ–¹æ–‡æ¡£","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"React","slug":"React","permalink":"https://guoshunfa.com/tags/React/"}]},{"title":"Reactæ¡†æ¶ Hook API","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/React/Reactæ¡†æ¶-Hook-API","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.301Z","comments":true,"path":"2022/07/Reactæ¡†æ¶-Hook-API/","link":"","permalink":"https://guoshunfa.com/2022/07/React%E6%A1%86%E6%9E%B6-Hook-API/","excerpt":"","text":"Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚ React å®˜æ–¹æ–‡æ¡£ æœ¬é¡µé¢ä¸»è¦æè¿° React ä¸­å†…ç½®çš„ Hook APIã€‚ å¦‚æœä½ åˆšå¼€å§‹æ¥è§¦ Hookï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦å…ˆæŸ¥é˜… Hook æ¦‚è§ˆã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ Hooks FAQ ç« èŠ‚ä¸­è·å–æœ‰ç”¨çš„ä¿¡æ¯ã€‚ åŸºç¡€ Hook useState useEffect useContext é¢å¤–çš„ Hook useReducer useCallback useMemo useRef useImperativeHandle useLayoutEffect useDebugValue åŸºç¡€ HookuseState1const [state, setState] = useState(initialState); è¿”å›ä¸€ä¸ª stateï¼Œä»¥åŠæ›´æ–° state çš„å‡½æ•°ã€‚ åœ¨åˆå§‹æ¸²æŸ“æœŸé—´ï¼Œè¿”å›çš„çŠ¶æ€ (state) ä¸ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•° (initialState) å€¼ç›¸åŒã€‚ setState å‡½æ•°ç”¨äºæ›´æ–° stateã€‚å®ƒæ¥æ”¶ä¸€ä¸ªæ–°çš„ state å€¼å¹¶å°†ç»„ä»¶çš„ä¸€æ¬¡é‡æ–°æ¸²æŸ“åŠ å…¥é˜Ÿåˆ—ã€‚ 1setState(newState); åœ¨åç»­çš„é‡æ–°æ¸²æŸ“ä¸­ï¼ŒuseState è¿”å›çš„ç¬¬ä¸€ä¸ªå€¼å°†å§‹ç»ˆæ˜¯æ›´æ–°åæœ€æ–°çš„ stateã€‚ æ³¨æ„ React ä¼šç¡®ä¿ setState å‡½æ•°çš„æ ‡è¯†æ˜¯ç¨³å®šçš„ï¼Œå¹¶ä¸”ä¸ä¼šåœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶å‘ç”Ÿå˜åŒ–ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯ä»¥å®‰å…¨åœ°ä» useEffect æˆ– useCallback çš„ä¾èµ–åˆ—è¡¨ä¸­çœç•¥ setStateã€‚ å‡½æ•°å¼æ›´æ–°å¦‚æœæ–°çš„ state éœ€è¦é€šè¿‡ä½¿ç”¨å…ˆå‰çš„ state è®¡ç®—å¾—å‡ºï¼Œé‚£ä¹ˆå¯ä»¥å°†å‡½æ•°ä¼ é€’ç»™ setStateã€‚è¯¥å‡½æ•°å°†æ¥æ”¶å…ˆå‰çš„ stateï¼Œå¹¶è¿”å›ä¸€ä¸ªæ›´æ–°åçš„å€¼ã€‚ä¸‹é¢çš„è®¡æ•°å™¨ç»„ä»¶ç¤ºä¾‹å±•ç¤ºäº† setState çš„ä¸¤ç§ç”¨æ³•ï¼š 1234567891011function Counter(&#123;initialCount&#125;) &#123; const [count, setCount] = useState(initialCount); return ( &lt;&gt; Count: &#123;count&#125; &lt;button onClick=&#123;() =&gt; setCount(initialCount)&#125;&gt;Reset&lt;/button&gt; &lt;button onClick=&#123;() =&gt; setCount(prevCount =&gt; prevCount - 1)&#125;&gt;-&lt;/button&gt; &lt;button onClick=&#123;() =&gt; setCount(prevCount =&gt; prevCount + 1)&#125;&gt;+&lt;/button&gt; &lt;/&gt; );&#125; â€œ+â€ å’Œ â€œ-â€ æŒ‰é’®é‡‡ç”¨å‡½æ•°å¼å½¢å¼ï¼Œå› ä¸ºè¢«æ›´æ–°çš„ state éœ€è¦åŸºäºä¹‹å‰çš„ stateã€‚ä½†æ˜¯â€œé‡ç½®â€æŒ‰é’®åˆ™é‡‡ç”¨æ™®é€šå½¢å¼ï¼Œå› ä¸ºå®ƒæ€»æ˜¯æŠŠ count è®¾ç½®å›åˆå§‹å€¼ã€‚ å¦‚æœä½ çš„æ›´æ–°å‡½æ•°è¿”å›å€¼ä¸å½“å‰ state å®Œå…¨ç›¸åŒï¼Œåˆ™éšåçš„é‡æ¸²æŸ“ä¼šè¢«å®Œå…¨è·³è¿‡ã€‚ æ³¨æ„ ä¸ class ç»„ä»¶ä¸­çš„ setState æ–¹æ³•ä¸åŒï¼ŒuseState ä¸ä¼šè‡ªåŠ¨åˆå¹¶æ›´æ–°å¯¹è±¡ã€‚ä½ å¯ä»¥ç”¨å‡½æ•°å¼çš„ setState ç»“åˆå±•å¼€è¿ç®—ç¬¦æ¥è¾¾åˆ°åˆå¹¶æ›´æ–°å¯¹è±¡çš„æ•ˆæœã€‚ 12345const [state, setState] = useState(&#123;&#125;);setState(prevState =&gt; &#123;// ä¹Ÿå¯ä»¥ä½¿ç”¨ Object.assignreturn &#123;...prevState, ...updatedValues&#125;;&#125;); useReducer æ˜¯å¦ä¸€ç§å¯é€‰æ–¹æ¡ˆï¼Œå®ƒæ›´é€‚åˆç”¨äºç®¡ç†åŒ…å«å¤šä¸ªå­å€¼çš„ state å¯¹è±¡ã€‚ æƒ°æ€§åˆå§‹ stateinitialState å‚æ•°åªä¼šåœ¨ç»„ä»¶çš„åˆå§‹æ¸²æŸ“ä¸­èµ·ä½œç”¨ï¼Œåç»­æ¸²æŸ“æ—¶ä¼šè¢«å¿½ç•¥ã€‚å¦‚æœåˆå§‹ state éœ€è¦é€šè¿‡å¤æ‚è®¡ç®—è·å¾—ï¼Œåˆ™å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°ä¸­è®¡ç®—å¹¶è¿”å›åˆå§‹çš„ stateï¼Œæ­¤å‡½æ•°åªåœ¨åˆå§‹æ¸²æŸ“æ—¶è¢«è°ƒç”¨ï¼š 1234const [state, setState] = useState(() =&gt; &#123; const initialState = someExpensiveComputation(props); return initialState;&#125;); è·³è¿‡ state æ›´æ–°è°ƒç”¨ State Hook çš„æ›´æ–°å‡½æ•°å¹¶ä¼ å…¥å½“å‰çš„ state æ—¶ï¼ŒReact å°†è·³è¿‡å­ç»„ä»¶çš„æ¸²æŸ“åŠ effect çš„æ‰§è¡Œã€‚ï¼ˆReact ä½¿ç”¨ Object.is æ¯”è¾ƒç®—æ³• æ¥æ¯”è¾ƒ stateã€‚ï¼‰ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒReact å¯èƒ½ä»éœ€è¦åœ¨è·³è¿‡æ¸²æŸ“å‰æ¸²æŸ“è¯¥ç»„ä»¶ã€‚ä¸è¿‡ç”±äº React ä¸ä¼šå¯¹ç»„ä»¶æ ‘çš„â€œæ·±å±‚â€èŠ‚ç‚¹è¿›è¡Œä¸å¿…è¦çš„æ¸²æŸ“ï¼Œæ‰€ä»¥å¤§å¯ä¸å¿…æ‹…å¿ƒã€‚å¦‚æœä½ åœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œäº†é«˜å¼€é”€çš„è®¡ç®—ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ useMemo æ¥è¿›è¡Œä¼˜åŒ–ã€‚ useEffect1useEffect(didUpdate); è¯¥ Hook æ¥æ”¶ä¸€ä¸ªåŒ…å«å‘½ä»¤å¼ã€ä¸”å¯èƒ½æœ‰å‰¯ä½œç”¨ä»£ç çš„å‡½æ•°ã€‚ åœ¨å‡½æ•°ç»„ä»¶ä¸»ä½“å†…ï¼ˆè¿™é‡ŒæŒ‡åœ¨ React æ¸²æŸ“é˜¶æ®µï¼‰æ”¹å˜ DOMã€æ·»åŠ è®¢é˜…ã€è®¾ç½®å®šæ—¶å™¨ã€è®°å½•æ—¥å¿—ä»¥åŠæ‰§è¡Œå…¶ä»–åŒ…å«å‰¯ä½œç”¨çš„æ“ä½œéƒ½æ˜¯ä¸è¢«å…è®¸çš„ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šäº§ç”Ÿè«åå…¶å¦™çš„ bug å¹¶ç ´å UI çš„ä¸€è‡´æ€§ã€‚ ä½¿ç”¨ useEffect å®Œæˆå‰¯ä½œç”¨æ“ä½œã€‚èµ‹å€¼ç»™ useEffect çš„å‡½æ•°ä¼šåœ¨ç»„ä»¶æ¸²æŸ“åˆ°å±å¹•ä¹‹åæ‰§è¡Œã€‚ä½ å¯ä»¥æŠŠ effect çœ‹ä½œä» React çš„çº¯å‡½æ•°å¼ä¸–ç•Œé€šå¾€å‘½ä»¤å¼ä¸–ç•Œçš„é€ƒç”Ÿé€šé“ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œeffect å°†åœ¨æ¯è½®æ¸²æŸ“ç»“æŸåæ‰§è¡Œï¼Œä½†ä½ å¯ä»¥é€‰æ‹©è®©å®ƒ åœ¨åªæœ‰æŸäº›å€¼æ”¹å˜çš„æ—¶å€™ æ‰æ‰§è¡Œã€‚ æ¸…é™¤ effecté€šå¸¸ï¼Œç»„ä»¶å¸è½½æ—¶éœ€è¦æ¸…é™¤ effect åˆ›å»ºçš„è¯¸å¦‚è®¢é˜…æˆ–è®¡æ—¶å™¨ ID ç­‰èµ„æºã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼ŒuseEffect å‡½æ•°éœ€è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚ä»¥ä¸‹å°±æ˜¯ä¸€ä¸ªåˆ›å»ºè®¢é˜…çš„ä¾‹å­ï¼š 1234567useEffect(() =&gt; &#123; const subscription = props.source.subscribe(); return () =&gt; &#123; // æ¸…é™¤è®¢é˜… subscription.unsubscribe(); &#125;;&#125;); ä¸ºé˜²æ­¢å†…å­˜æ³„æ¼ï¼Œæ¸…é™¤å‡½æ•°ä¼šåœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œã€‚å¦å¤–ï¼Œå¦‚æœç»„ä»¶å¤šæ¬¡æ¸²æŸ“ï¼ˆé€šå¸¸å¦‚æ­¤ï¼‰ï¼Œåˆ™åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ª effect ä¹‹å‰ï¼Œä¸Šä¸€ä¸ª effect å°±å·²è¢«æ¸…é™¤ã€‚åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæ„å‘³ç€ç»„ä»¶çš„æ¯ä¸€æ¬¡æ›´æ–°éƒ½ä¼šåˆ›å»ºæ–°çš„è®¢é˜…ã€‚è‹¥æƒ³é¿å…æ¯æ¬¡æ›´æ–°éƒ½è§¦å‘ effect çš„æ‰§è¡Œï¼Œè¯·å‚é˜…ä¸‹ä¸€å°èŠ‚ã€‚ effect çš„æ‰§è¡Œæ—¶æœºä¸ componentDidMountã€componentDidUpdate ä¸åŒçš„æ˜¯ï¼Œä¼ ç»™ useEffect çš„å‡½æ•°ä¼šåœ¨æµè§ˆå™¨å®Œæˆå¸ƒå±€ä¸ç»˜åˆ¶ä¹‹åï¼Œåœ¨ä¸€ä¸ªå»¶è¿Ÿäº‹ä»¶ä¸­è¢«è°ƒç”¨ã€‚è¿™ä½¿å¾—å®ƒé€‚ç”¨äºè®¸å¤šå¸¸è§çš„å‰¯ä½œç”¨åœºæ™¯ï¼Œæ¯”å¦‚è®¾ç½®è®¢é˜…å’Œäº‹ä»¶å¤„ç†ç­‰æƒ…å†µï¼Œå› ä¸ºç»å¤§å¤šæ•°æ“ä½œä¸åº”é˜»å¡æµè§ˆå™¨å¯¹å±å¹•çš„æ›´æ–°ã€‚ ç„¶è€Œï¼Œå¹¶éæ‰€æœ‰ effect éƒ½å¯ä»¥è¢«å»¶è¿Ÿæ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯¹ç”¨æˆ·å¯è§çš„ DOM å˜æ›´å°±å¿…é¡»åœ¨æµè§ˆå™¨æ‰§è¡Œä¸‹ä¸€æ¬¡ç»˜åˆ¶å‰è¢«åŒæ­¥æ‰§è¡Œï¼Œè¿™æ ·ç”¨æˆ·æ‰ä¸ä¼šæ„Ÿè§‰åˆ°è§†è§‰ä¸Šçš„ä¸ä¸€è‡´ã€‚ï¼ˆæ¦‚å¿µä¸Šç±»ä¼¼äºè¢«åŠ¨ç›‘å¬äº‹ä»¶å’Œä¸»åŠ¨ç›‘å¬äº‹ä»¶çš„åŒºåˆ«ã€‚ï¼‰React ä¸ºæ­¤æä¾›äº†ä¸€ä¸ªé¢å¤–çš„ useLayoutEffect Hook æ¥å¤„ç†è¿™ç±» effectã€‚å®ƒå’Œ useEffect çš„ç»“æ„ç›¸åŒï¼ŒåŒºåˆ«åªæ˜¯è°ƒç”¨æ—¶æœºä¸åŒã€‚ è™½ç„¶ useEffect ä¼šåœ¨æµè§ˆå™¨ç»˜åˆ¶åå»¶è¿Ÿæ‰§è¡Œï¼Œä½†ä¼šä¿è¯åœ¨ä»»ä½•æ–°çš„æ¸²æŸ“å‰æ‰§è¡Œã€‚åœ¨å¼€å§‹æ–°çš„æ›´æ–°å‰ï¼ŒReact æ€»ä¼šå…ˆæ¸…é™¤ä¸Šä¸€è½®æ¸²æŸ“çš„ effectã€‚ effect çš„æ¡ä»¶æ‰§è¡Œé»˜è®¤æƒ…å†µä¸‹ï¼Œeffect ä¼šåœ¨æ¯è½®ç»„ä»¶æ¸²æŸ“å®Œæˆåæ‰§è¡Œã€‚è¿™æ ·çš„è¯ï¼Œä¸€æ—¦ effect çš„ä¾èµ–å‘ç”Ÿå˜åŒ–ï¼Œå®ƒå°±ä¼šè¢«é‡æ–°åˆ›å»ºã€‚ ç„¶è€Œï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹è¿™ä¹ˆåšå¯èƒ½ä¼šçŸ«æ‰è¿‡æ­£ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸Šä¸€ç« èŠ‚çš„è®¢é˜…ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨æ¯æ¬¡ç»„ä»¶æ›´æ–°æ—¶éƒ½åˆ›å»ºæ–°çš„è®¢é˜…ï¼Œè€Œæ˜¯ä»…éœ€è¦åœ¨ source prop æ”¹å˜æ—¶é‡æ–°åˆ›å»ºã€‚ è¦å®ç°è¿™ä¸€ç‚¹ï¼Œå¯ä»¥ç»™ useEffect ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ƒæ˜¯ effect æ‰€ä¾èµ–çš„å€¼æ•°ç»„ã€‚æ›´æ–°åçš„ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789useEffect( () =&gt; &#123; const subscription = props.source.subscribe(); return () =&gt; &#123; subscription.unsubscribe(); &#125;; &#125;, [props.source],); æ­¤æ—¶ï¼Œåªæœ‰å½“ props.source æ”¹å˜åæ‰ä¼šé‡æ–°åˆ›å»ºè®¢é˜…ã€‚ æ³¨æ„ å¦‚æœä½ è¦ä½¿ç”¨æ­¤ä¼˜åŒ–æ–¹å¼ï¼Œè¯·ç¡®ä¿æ•°ç»„ä¸­åŒ…å«äº†æ‰€æœ‰å¤–éƒ¨ä½œç”¨åŸŸä¸­ä¼šå‘ç”Ÿå˜åŒ–ä¸”åœ¨ effect ä¸­ä½¿ç”¨çš„å˜é‡ï¼Œå¦åˆ™ä½ çš„ä»£ç ä¼šå¼•ç”¨åˆ°å…ˆå‰æ¸²æŸ“ä¸­çš„æ—§å˜é‡ã€‚è¯·å‚é˜…æ–‡æ¡£ï¼Œäº†è§£æ›´å¤šå…³äºå¦‚ä½•å¤„ç†å‡½æ•° ä»¥åŠæ•°ç»„é¢‘ç¹å˜åŒ–æ—¶çš„æªæ–½ çš„å†…å®¹ã€‚ å¦‚æœæƒ³æ‰§è¡Œåªè¿è¡Œä¸€æ¬¡çš„ effectï¼ˆä»…åœ¨ç»„ä»¶æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œï¼‰ï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„ï¼ˆ[]ï¼‰ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™å°±å‘Šè¯‰ React ä½ çš„ effect ä¸ä¾èµ–äº props æˆ– state ä¸­çš„ä»»ä½•å€¼ï¼Œæ‰€ä»¥å®ƒæ°¸è¿œéƒ½ä¸éœ€è¦é‡å¤æ‰§è¡Œã€‚è¿™å¹¶ä¸å±äºç‰¹æ®Šæƒ…å†µ â€”â€” å®ƒä¾ç„¶éµå¾ªè¾“å…¥æ•°ç»„çš„å·¥ä½œæ–¹å¼ã€‚ å¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ªç©ºæ•°ç»„ï¼ˆ[]ï¼‰ï¼Œeffect å†…éƒ¨çš„ props å’Œ state å°±ä¼šä¸€ç›´æŒæœ‰å…¶åˆå§‹å€¼ã€‚å°½ç®¡ä¼ å…¥ [] ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°æœ‰ç‚¹ç±»ä¼¼äº componentDidMount å’Œ componentWillUnmount çš„æ€ç»´æ¨¡å¼ï¼Œä½†æˆ‘ä»¬æœ‰ æ›´å¥½çš„ æ–¹å¼ æ¥é¿å…è¿‡äºé¢‘ç¹çš„é‡å¤è°ƒç”¨ effectã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯·è®°å¾— React ä¼šç­‰å¾…æµè§ˆå™¨å®Œæˆç”»é¢æ¸²æŸ“ä¹‹åæ‰ä¼šå»¶è¿Ÿè°ƒç”¨ useEffectï¼Œå› æ­¤ä¼šä½¿å¾—å¤„ç†é¢å¤–æ“ä½œå¾ˆæ–¹ä¾¿ã€‚ æˆ‘ä»¬æ¨èå¯ç”¨ eslint-plugin-react-hooks ä¸­çš„ exhaustive-deps è§„åˆ™ã€‚æ­¤è§„åˆ™ä¼šåœ¨æ·»åŠ é”™è¯¯ä¾èµ–æ—¶å‘å‡ºè­¦å‘Šå¹¶ç»™å‡ºä¿®å¤å»ºè®®ã€‚ ä¾èµ–é¡¹æ•°ç»„ä¸ä¼šä½œä¸ºå‚æ•°ä¼ ç»™ effect å‡½æ•°ã€‚è™½ç„¶ä»æ¦‚å¿µä¸Šæ¥è¯´å®ƒè¡¨ç°ä¸ºï¼šæ‰€æœ‰ effect å‡½æ•°ä¸­å¼•ç”¨çš„å€¼éƒ½åº”è¯¥å‡ºç°åœ¨ä¾èµ–é¡¹æ•°ç»„ä¸­ã€‚æœªæ¥ç¼–è¯‘å™¨ä¼šæ›´åŠ æ™ºèƒ½ï¼Œå±Šæ—¶è‡ªåŠ¨åˆ›å»ºæ•°ç»„å°†æˆä¸ºå¯èƒ½ã€‚ useContext1const value = useContext(MyContext); æ¥æ”¶ä¸€ä¸ª context å¯¹è±¡ï¼ˆReact.createContext çš„è¿”å›å€¼ï¼‰å¹¶è¿”å›è¯¥ context çš„å½“å‰å€¼ã€‚å½“å‰çš„ context å€¼ç”±ä¸Šå±‚ç»„ä»¶ä¸­è·ç¦»å½“å‰ç»„ä»¶æœ€è¿‘çš„ &lt;MyContext.Provider&gt; çš„ value prop å†³å®šã€‚ å½“ç»„ä»¶ä¸Šå±‚æœ€è¿‘çš„ &lt;MyContext.Provider&gt; æ›´æ–°æ—¶ï¼Œè¯¥ Hook ä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œå¹¶ä½¿ç”¨æœ€æ–°ä¼ é€’ç»™ MyContext provider çš„ context value å€¼ã€‚å³ä½¿ç¥–å…ˆä½¿ç”¨ React.memo æˆ– shouldComponentUpdateï¼Œä¹Ÿä¼šåœ¨ç»„ä»¶æœ¬èº«ä½¿ç”¨ useContext æ—¶é‡æ–°æ¸²æŸ“ã€‚ åˆ«å¿˜è®° useContext çš„å‚æ•°å¿…é¡»æ˜¯ context å¯¹è±¡æœ¬èº«ï¼š æ­£ç¡®ï¼š useContext(MyContext) é”™è¯¯ï¼š useContext(MyContext.Consumer) é”™è¯¯ï¼š useContext(MyContext.Provider) è°ƒç”¨äº† useContext çš„ç»„ä»¶æ€»ä¼šåœ¨ context å€¼å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ã€‚å¦‚æœé‡æ¸²æŸ“ç»„ä»¶çš„å¼€é”€è¾ƒå¤§ï¼Œä½ å¯ä»¥ é€šè¿‡ä½¿ç”¨ memoization æ¥ä¼˜åŒ–ã€‚ æç¤º å¦‚æœä½ åœ¨æ¥è§¦ Hook å‰å·²ç»å¯¹ context API æ¯”è¾ƒç†Ÿæ‚‰ï¼Œé‚£åº”è¯¥å¯ä»¥ç†è§£ï¼ŒuseContext(MyContext) ç›¸å½“äº class ç»„ä»¶ä¸­çš„ static contextType = MyContext æˆ–è€… &lt;MyContext.Consumer&gt;ã€‚ useContext(MyContext) åªæ˜¯è®©ä½ èƒ½å¤Ÿè¯»å– context çš„å€¼ä»¥åŠè®¢é˜… context çš„å˜åŒ–ã€‚ä½ ä»ç„¶éœ€è¦åœ¨ä¸Šå±‚ç»„ä»¶æ ‘ä¸­ä½¿ç”¨ &lt;MyContext.Provider&gt; æ¥ä¸ºä¸‹å±‚ç»„ä»¶æä¾› contextã€‚ æŠŠå¦‚ä¸‹ä»£ç ä¸ Context.Provider æ”¾åœ¨ä¸€èµ· 1234567891011121314151617181920212223242526272829303132333435363738const themes = &#123; light: &#123; foreground: &quot;#000000&quot;, background: &quot;#eeeeee&quot; &#125;, dark: &#123; foreground: &quot;#ffffff&quot;, background: &quot;#222222&quot; &#125;&#125;;const ThemeContext = React.createContext(themes.light);function App() &#123; return ( &lt;ThemeContext.Provider value=&#123;themes.dark&#125;&gt; &lt;Toolbar /&gt; &lt;/ThemeContext.Provider&gt; );&#125;function Toolbar(props) &#123; return ( &lt;div&gt; &lt;ThemedButton /&gt; &lt;/div&gt; );&#125;function ThemedButton() &#123; const theme = useContext(ThemeContext); return ( &lt;button style=&#123;&#123; background: theme.background, color: theme.foreground &#125;&#125;&gt; I am styled by theme context! &lt;/button&gt; );&#125; å¯¹å…ˆå‰ Context é«˜çº§æŒ‡å—ä¸­çš„ç¤ºä¾‹ä½¿ç”¨ hook è¿›è¡Œäº†ä¿®æ”¹ï¼Œä½ å¯ä»¥åœ¨é“¾æ¥ä¸­æ‰¾åˆ°æœ‰å…³å¦‚ä½• Context çš„æ›´å¤šä¿¡æ¯ã€‚ é¢å¤–çš„ Hookä»¥ä¸‹ä»‹ç»çš„ Hookï¼Œæœ‰äº›æ˜¯ä¸Šä¸€èŠ‚ä¸­åŸºç¡€ Hook çš„å˜ä½“ï¼Œæœ‰äº›åˆ™ä»…åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä¼šç”¨åˆ°ã€‚ä¸ç”¨ç‰¹æ„é¢„å…ˆå­¦ä¹ å®ƒä»¬ã€‚ useReducer1const [state, dispatch] = useReducer(reducer, initialArg, init); useState çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå½¢å¦‚ (state, action) =&gt; newState çš„ reducerï¼Œå¹¶è¿”å›å½“å‰çš„ state ä»¥åŠä¸å…¶é…å¥—çš„ dispatch æ–¹æ³•ã€‚ï¼ˆå¦‚æœä½ ç†Ÿæ‚‰ Redux çš„è¯ï¼Œå°±å·²ç»çŸ¥é“å®ƒå¦‚ä½•å·¥ä½œäº†ã€‚ï¼‰ åœ¨æŸäº›åœºæ™¯ä¸‹ï¼ŒuseReducer ä¼šæ¯” useState æ›´é€‚ç”¨ï¼Œä¾‹å¦‚ state é€»è¾‘è¾ƒå¤æ‚ä¸”åŒ…å«å¤šä¸ªå­å€¼ï¼Œæˆ–è€…ä¸‹ä¸€ä¸ª state ä¾èµ–äºä¹‹å‰çš„ state ç­‰ã€‚å¹¶ä¸”ï¼Œä½¿ç”¨ useReducer è¿˜èƒ½ç»™é‚£äº›ä¼šè§¦å‘æ·±æ›´æ–°çš„ç»„ä»¶åšæ€§èƒ½ä¼˜åŒ–ï¼Œå› ä¸ºä½ å¯ä»¥å‘å­ç»„ä»¶ä¼ é€’ dispatch è€Œä¸æ˜¯å›è°ƒå‡½æ•° ã€‚ ä»¥ä¸‹æ˜¯ç”¨ reducer é‡å†™ useState ä¸€èŠ‚çš„è®¡æ•°å™¨ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223const initialState = &#123;count: 0&#125;;function reducer(state, action) &#123; switch (action.type) &#123; case &#x27;increment&#x27;: return &#123;count: state.count + 1&#125;; case &#x27;decrement&#x27;: return &#123;count: state.count - 1&#125;; default: throw new Error(); &#125;&#125;function Counter() &#123; const [state, dispatch] = useReducer(reducer, initialState); return ( &lt;&gt; Count: &#123;state.count&#125; &lt;button onClick=&#123;() =&gt; dispatch(&#123;type: &#x27;decrement&#x27;&#125;)&#125;&gt;-&lt;/button&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123;type: &#x27;increment&#x27;&#125;)&#125;&gt;+&lt;/button&gt; &lt;/&gt; );&#125; æ³¨æ„ React ä¼šç¡®ä¿ dispatch å‡½æ•°çš„æ ‡è¯†æ˜¯ç¨³å®šçš„ï¼Œå¹¶ä¸”ä¸ä¼šåœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶æ”¹å˜ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯ä»¥å®‰å…¨åœ°ä» useEffect æˆ– useCallback çš„ä¾èµ–åˆ—è¡¨ä¸­çœç•¥ dispatchã€‚ æŒ‡å®šåˆå§‹ stateæœ‰ä¸¤ç§ä¸åŒåˆå§‹åŒ– useReducer state çš„æ–¹å¼ï¼Œä½ å¯ä»¥æ ¹æ®ä½¿ç”¨åœºæ™¯é€‰æ‹©å…¶ä¸­çš„ä¸€ç§ã€‚å°†åˆå§‹ state ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ useReducer æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼š 1234const [state, dispatch] = useReducer( reducer, &#123;count: initialCount&#125;); æ³¨æ„ React ä¸ä½¿ç”¨ state = initialState è¿™ä¸€ç”± Redux æ¨å¹¿å¼€æ¥çš„å‚æ•°çº¦å®šã€‚æœ‰æ—¶å€™åˆå§‹å€¼ä¾èµ–äº propsï¼Œå› æ­¤éœ€è¦åœ¨è°ƒç”¨ Hook æ—¶æŒ‡å®šã€‚å¦‚æœä½ ç‰¹åˆ«å–œæ¬¢ä¸Šè¿°çš„å‚æ•°çº¦å®šï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ useReducer(reducer, undefined, reducer) æ¥æ¨¡æ‹Ÿ Redux çš„è¡Œä¸ºï¼Œä½†æˆ‘ä»¬ä¸é¼“åŠ±ä½ è¿™ä¹ˆåšã€‚ æƒ°æ€§åˆå§‹åŒ–ä½ å¯ä»¥é€‰æ‹©æƒ°æ€§åœ°åˆ›å»ºåˆå§‹ stateã€‚ä¸ºæ­¤ï¼Œéœ€è¦å°† init å‡½æ•°ä½œä¸º useReducer çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥ï¼Œè¿™æ ·åˆå§‹ state å°†è¢«è®¾ç½®ä¸º init(initialArg)ã€‚ è¿™ä¹ˆåšå¯ä»¥å°†ç”¨äºè®¡ç®— state çš„é€»è¾‘æå–åˆ° reducer å¤–éƒ¨ï¼Œè¿™ä¹Ÿä¸ºå°†æ¥å¯¹é‡ç½® state çš„ action åšå¤„ç†æä¾›äº†ä¾¿åˆ©ï¼š 12345678910111213141516171819202122232425262728293031function init(initialCount) &#123; return &#123;count: initialCount&#125;;&#125;function reducer(state, action) &#123; switch (action.type) &#123; case &#x27;increment&#x27;: return &#123;count: state.count + 1&#125;; case &#x27;decrement&#x27;: return &#123;count: state.count - 1&#125;; case &#x27;reset&#x27;: return init(action.payload); default: throw new Error(); &#125;&#125;function Counter(&#123;initialCount&#125;) &#123; const [state, dispatch] = useReducer(reducer, initialCount, init); return ( &lt;&gt; Count: &#123;state.count&#125; &lt;button onClick=&#123;() =&gt; dispatch(&#123;type: &#x27;reset&#x27;, payload: initialCount&#125;)&#125;&gt; Reset &lt;/button&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123;type: &#x27;decrement&#x27;&#125;)&#125;&gt;-&lt;/button&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123;type: &#x27;increment&#x27;&#125;)&#125;&gt;+&lt;/button&gt; &lt;/&gt; );&#125; è·³è¿‡ dispatchå¦‚æœ Reducer Hook çš„è¿”å›å€¼ä¸å½“å‰ state ç›¸åŒï¼ŒReact å°†è·³è¿‡å­ç»„ä»¶çš„æ¸²æŸ“åŠå‰¯ä½œç”¨çš„æ‰§è¡Œã€‚ï¼ˆReact ä½¿ç”¨ Object.is æ¯”è¾ƒç®—æ³• æ¥æ¯”è¾ƒ stateã€‚ï¼‰ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒReact å¯èƒ½ä»éœ€è¦åœ¨è·³è¿‡æ¸²æŸ“å‰å†æ¬¡æ¸²æŸ“è¯¥ç»„ä»¶ã€‚ä¸è¿‡ç”±äº React ä¸ä¼šå¯¹ç»„ä»¶æ ‘çš„â€œæ·±å±‚â€èŠ‚ç‚¹è¿›è¡Œä¸å¿…è¦çš„æ¸²æŸ“ï¼Œæ‰€ä»¥å¤§å¯ä¸å¿…æ‹…å¿ƒã€‚å¦‚æœä½ åœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œäº†é«˜å¼€é”€çš„è®¡ç®—ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ useMemo æ¥è¿›è¡Œä¼˜åŒ–ã€‚ useCallback123456const memoizedCallback = useCallback( () =&gt; &#123; doSomething(a, b); &#125;, [a, b],); è¿”å›ä¸€ä¸ª memoized å›è°ƒå‡½æ•°ã€‚ æŠŠå†…è”å›è°ƒå‡½æ•°åŠä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ useCallbackï¼Œå®ƒå°†è¿”å›è¯¥å›è°ƒå‡½æ•°çš„ memoized ç‰ˆæœ¬ï¼Œè¯¥å›è°ƒå‡½æ•°ä»…åœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šæ›´æ–°ã€‚å½“ä½ æŠŠå›è°ƒå‡½æ•°ä¼ é€’ç»™ç»è¿‡ä¼˜åŒ–çš„å¹¶ä½¿ç”¨å¼•ç”¨ç›¸ç­‰æ€§å»é¿å…éå¿…è¦æ¸²æŸ“ï¼ˆä¾‹å¦‚ shouldComponentUpdateï¼‰çš„å­ç»„ä»¶æ—¶ï¼Œå®ƒå°†éå¸¸æœ‰ç”¨ã€‚ useCallback(fn, deps) ç›¸å½“äº useMemo(() =&gt; fn, deps)ã€‚ æ³¨æ„ ä¾èµ–é¡¹æ•°ç»„ä¸ä¼šä½œä¸ºå‚æ•°ä¼ ç»™å›è°ƒå‡½æ•°ã€‚è™½ç„¶ä»æ¦‚å¿µä¸Šæ¥è¯´å®ƒè¡¨ç°ä¸ºï¼šæ‰€æœ‰å›è°ƒå‡½æ•°ä¸­å¼•ç”¨çš„å€¼éƒ½åº”è¯¥å‡ºç°åœ¨ä¾èµ–é¡¹æ•°ç»„ä¸­ã€‚æœªæ¥ç¼–è¯‘å™¨ä¼šæ›´åŠ æ™ºèƒ½ï¼Œå±Šæ—¶è‡ªåŠ¨åˆ›å»ºæ•°ç»„å°†æˆä¸ºå¯èƒ½ã€‚ æˆ‘ä»¬æ¨èå¯ç”¨ eslint-plugin-react-hooks ä¸­çš„ exhaustive-deps è§„åˆ™ã€‚æ­¤è§„åˆ™ä¼šåœ¨æ·»åŠ é”™è¯¯ä¾èµ–æ—¶å‘å‡ºè­¦å‘Šå¹¶ç»™å‡ºä¿®å¤å»ºè®®ã€‚ useMemo1const memoizedValue = useMemo(() =&gt; computeExpensiveValue(a, b), [a, b]); è¿”å›ä¸€ä¸ª memoized å€¼ã€‚ æŠŠâ€œåˆ›å»ºâ€å‡½æ•°å’Œä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ useMemoï¼Œå®ƒä»…ä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®— memoized å€¼ã€‚è¿™ç§ä¼˜åŒ–æœ‰åŠ©äºé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œé«˜å¼€é”€çš„è®¡ç®—ã€‚ è®°ä½ï¼Œä¼ å…¥ useMemo çš„å‡½æ•°ä¼šåœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œã€‚è¯·ä¸è¦åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨æ‰§è¡Œä¸æ¸²æŸ“æ— å…³çš„æ“ä½œï¼Œè¯¸å¦‚å‰¯ä½œç”¨è¿™ç±»çš„æ“ä½œå±äº useEffect çš„é€‚ç”¨èŒƒç•´ï¼Œè€Œä¸æ˜¯ useMemoã€‚ å¦‚æœæ²¡æœ‰æä¾›ä¾èµ–é¡¹æ•°ç»„ï¼ŒuseMemo åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè®¡ç®—æ–°çš„å€¼ã€‚ ä½ å¯ä»¥æŠŠ useMemo ä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µï¼Œä½†ä¸è¦æŠŠå®ƒå½“æˆè¯­ä¹‰ä¸Šçš„ä¿è¯ã€‚å°†æ¥ï¼ŒReact å¯èƒ½ä¼šé€‰æ‹©â€œé—å¿˜â€ä»¥å‰çš„ä¸€äº› memoized å€¼ï¼Œå¹¶åœ¨ä¸‹æ¬¡æ¸²æŸ“æ—¶é‡æ–°è®¡ç®—å®ƒä»¬ï¼Œæ¯”å¦‚ä¸ºç¦»å±ç»„ä»¶é‡Šæ”¾å†…å­˜ã€‚å…ˆç¼–å†™åœ¨æ²¡æœ‰ useMemo çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ‰§è¡Œçš„ä»£ç  â€”â€” ä¹‹åå†åœ¨ä½ çš„ä»£ç ä¸­æ·»åŠ  useMemoï¼Œä»¥è¾¾åˆ°ä¼˜åŒ–æ€§èƒ½çš„ç›®çš„ã€‚ æ³¨æ„ ä¾èµ–é¡¹æ•°ç»„ä¸ä¼šä½œä¸ºå‚æ•°ä¼ ç»™â€œåˆ›å»ºâ€å‡½æ•°ã€‚è™½ç„¶ä»æ¦‚å¿µä¸Šæ¥è¯´å®ƒè¡¨ç°ä¸ºï¼šæ‰€æœ‰â€œåˆ›å»ºâ€å‡½æ•°ä¸­å¼•ç”¨çš„å€¼éƒ½åº”è¯¥å‡ºç°åœ¨ä¾èµ–é¡¹æ•°ç»„ä¸­ã€‚æœªæ¥ç¼–è¯‘å™¨ä¼šæ›´åŠ æ™ºèƒ½ï¼Œå±Šæ—¶è‡ªåŠ¨åˆ›å»ºæ•°ç»„å°†æˆä¸ºå¯èƒ½ã€‚ æˆ‘ä»¬æ¨èå¯ç”¨ eslint-plugin-react-hooks ä¸­çš„ exhaustive-deps è§„åˆ™ã€‚æ­¤è§„åˆ™ä¼šåœ¨æ·»åŠ é”™è¯¯ä¾èµ–æ—¶å‘å‡ºè­¦å‘Šå¹¶ç»™å‡ºä¿®å¤å»ºè®®ã€‚ useRef1const refContainer = useRef(initialValue); useRef è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ .current å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆinitialValueï¼‰ã€‚è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æŒç»­å­˜åœ¨ã€‚ ä¸€ä¸ªå¸¸è§çš„ç”¨ä¾‹ä¾¿æ˜¯å‘½ä»¤å¼åœ°è®¿é—®å­ç»„ä»¶ï¼š 12345678910111213function TextInputWithFocusButton() &#123; const inputEl = useRef(null); const onButtonClick = () =&gt; &#123; // `current` æŒ‡å‘å·²æŒ‚è½½åˆ° DOM ä¸Šçš„æ–‡æœ¬è¾“å…¥å…ƒç´  inputEl.current.focus(); &#125;; return ( &lt;&gt; &lt;input ref=&#123;inputEl&#125; type=&quot;text&quot; /&gt; &lt;button onClick=&#123;onButtonClick&#125;&gt;Focus the input&lt;/button&gt; &lt;/&gt; );&#125; æœ¬è´¨ä¸Šï¼ŒuseRef å°±åƒæ˜¯å¯ä»¥åœ¨å…¶ .current å±æ€§ä¸­ä¿å­˜ä¸€ä¸ªå¯å˜å€¼çš„â€œç›’å­â€ã€‚ ä½ åº”è¯¥ç†Ÿæ‚‰ ref è¿™ä¸€ç§è®¿é—® DOM çš„ä¸»è¦æ–¹å¼ã€‚å¦‚æœä½ å°† ref å¯¹è±¡ä»¥ &lt;div ref=&#123;myRef&#125; /&gt; å½¢å¼ä¼ å…¥ç»„ä»¶ï¼Œåˆ™æ— è®ºè¯¥èŠ‚ç‚¹å¦‚ä½•æ”¹å˜ï¼ŒReact éƒ½ä¼šå°† ref å¯¹è±¡çš„ .current å±æ€§è®¾ç½®ä¸ºç›¸åº”çš„ DOM èŠ‚ç‚¹ã€‚ ç„¶è€Œï¼ŒuseRef() æ¯” ref å±æ€§æ›´æœ‰ç”¨ã€‚å®ƒå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¿å­˜ä»»ä½•å¯å˜å€¼ï¼Œå…¶ç±»ä¼¼äºåœ¨ class ä¸­ä½¿ç”¨å®ä¾‹å­—æ®µçš„æ–¹å¼ã€‚ è¿™æ˜¯å› ä¸ºå®ƒåˆ›å»ºçš„æ˜¯ä¸€ä¸ªæ™®é€š Javascript å¯¹è±¡ã€‚è€Œ useRef() å’Œè‡ªå»ºä¸€ä¸ª &#123;current: ...&#125; å¯¹è±¡çš„å”¯ä¸€åŒºåˆ«æ˜¯ï¼ŒuseRef ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿”å›åŒä¸€ä¸ª ref å¯¹è±¡ã€‚ è¯·è®°ä½ï¼Œå½“ ref å¯¹è±¡å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseRef å¹¶ä¸ä¼šé€šçŸ¥ä½ ã€‚å˜æ›´ .current å±æ€§ä¸ä¼šå¼•å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚å¦‚æœæƒ³è¦åœ¨ React ç»‘å®šæˆ–è§£ç»‘ DOM èŠ‚ç‚¹çš„ ref æ—¶è¿è¡ŒæŸäº›ä»£ç ï¼Œåˆ™éœ€è¦ä½¿ç”¨å›è°ƒ ref æ¥å®ç°ã€‚ useImperativeHandle1useImperativeHandle(ref, createHandle, [deps]) useImperativeHandle å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ ref æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç ã€‚useImperativeHandle åº”å½“ä¸ forwardRef ä¸€èµ·ä½¿ç”¨ï¼š 12345678910function FancyInput(props, ref) &#123; const inputRef = useRef(); useImperativeHandle(ref, () =&gt; (&#123; focus: () =&gt; &#123; inputRef.current.focus(); &#125; &#125;)); return &lt;input ref=&#123;inputRef&#125; ... /&gt;;&#125;FancyInput = forwardRef(FancyInput); åœ¨æœ¬ä¾‹ä¸­ï¼Œæ¸²æŸ“ &lt;FancyInput ref=&#123;inputRef&#125; /&gt; çš„çˆ¶ç»„ä»¶å¯ä»¥è°ƒç”¨ inputRef.current.focus()ã€‚ useLayoutEffectå…¶å‡½æ•°ç­¾åä¸ useEffect ç›¸åŒï¼Œä½†å®ƒä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ effectã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– DOM å¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ¸²æŸ“ã€‚åœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰ï¼ŒuseLayoutEffect å†…éƒ¨çš„æ›´æ–°è®¡åˆ’å°†è¢«åŒæ­¥åˆ·æ–°ã€‚ å°½å¯èƒ½ä½¿ç”¨æ ‡å‡†çš„ useEffect ä»¥é¿å…é˜»å¡è§†è§‰æ›´æ–°ã€‚ æç¤º å¦‚æœä½ æ­£åœ¨å°†ä»£ç ä» class ç»„ä»¶è¿ç§»åˆ°ä½¿ç”¨ Hook çš„å‡½æ•°ç»„ä»¶ï¼Œåˆ™éœ€è¦æ³¨æ„ useLayoutEffect ä¸ componentDidMountã€componentDidUpdate çš„è°ƒç”¨é˜¶æ®µæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ¨èä½ **ä¸€å¼€å§‹å…ˆç”¨ useEffect**ï¼Œåªæœ‰å½“å®ƒå‡ºé—®é¢˜çš„æ—¶å€™å†å°è¯•ä½¿ç”¨ useLayoutEffectã€‚ å¦‚æœä½ ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œè¯·è®°ä½ï¼Œæ— è®º useLayoutEffect è¿˜æ˜¯ useEffect éƒ½æ— æ³•åœ¨ Javascript ä»£ç åŠ è½½å®Œæˆä¹‹å‰æ‰§è¡Œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨æœåŠ¡ç«¯æ¸²æŸ“ç»„ä»¶ä¸­å¼•å…¥ useLayoutEffect ä»£ç æ—¶ä¼šè§¦å‘ React å‘Šè­¦ã€‚è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å°†ä»£ç é€»è¾‘ç§»è‡³ useEffect ä¸­ï¼ˆå¦‚æœé¦–æ¬¡æ¸²æŸ“ä¸éœ€è¦è¿™æ®µé€»è¾‘çš„æƒ…å†µä¸‹ï¼‰ï¼Œæˆ–æ˜¯å°†è¯¥ç»„ä»¶å»¶è¿Ÿåˆ°å®¢æˆ·ç«¯æ¸²æŸ“å®Œæˆåå†æ˜¾ç¤ºï¼ˆå¦‚æœç›´åˆ° useLayoutEffect æ‰§è¡Œä¹‹å‰ HTML éƒ½æ˜¾ç¤ºé”™ä¹±çš„æƒ…å†µä¸‹ï¼‰ã€‚ è‹¥è¦ä»æœåŠ¡ç«¯æ¸²æŸ“çš„ HTML ä¸­æ’é™¤ä¾èµ–å¸ƒå±€ effect çš„ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ showChild &amp;&amp; &lt;Child /&gt; è¿›è¡Œæ¡ä»¶æ¸²æŸ“ï¼Œå¹¶ä½¿ç”¨ useEffect(() =&gt; &#123; setShowChild(true); &#125;, []) å»¶è¿Ÿå±•ç¤ºç»„ä»¶ã€‚è¿™æ ·ï¼Œåœ¨å®¢æˆ·ç«¯æ¸²æŸ“å®Œæˆä¹‹å‰ï¼ŒUI å°±ä¸ä¼šåƒä¹‹å‰é‚£æ ·æ˜¾ç¤ºé”™ä¹±äº†ã€‚ useDebugValue1useDebugValue(value) useDebugValue å¯ç”¨äºåœ¨ React å¼€å‘è€…å·¥å…·ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰ hook çš„æ ‡ç­¾ã€‚ ä¾‹å¦‚ï¼Œâ€œè‡ªå®šä¹‰ Hookâ€ ç« èŠ‚ä¸­æè¿°çš„åä¸º useFriendStatus çš„è‡ªå®šä¹‰ Hookï¼š 1234567891011function useFriendStatus(friendID) &#123; const [isOnline, setIsOnline] = useState(null); // ... // åœ¨å¼€å‘è€…å·¥å…·ä¸­çš„è¿™ä¸ª Hook æ—è¾¹æ˜¾ç¤ºæ ‡ç­¾ // e.g. &quot;FriendStatus: Online&quot; useDebugValue(isOnline ? &#x27;Online&#x27; : &#x27;Offline&#x27;); return isOnline;&#125; æç¤º æˆ‘ä»¬ä¸æ¨èä½ å‘æ¯ä¸ªè‡ªå®šä¹‰ Hook æ·»åŠ  debug å€¼ã€‚å½“å®ƒä½œä¸ºå…±äº«åº“çš„ä¸€éƒ¨åˆ†æ—¶æ‰æœ€æœ‰ä»·å€¼ã€‚ å»¶è¿Ÿæ ¼å¼åŒ– debug å€¼åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ ¼å¼åŒ–å€¼çš„æ˜¾ç¤ºå¯èƒ½æ˜¯ä¸€é¡¹å¼€é”€å¾ˆå¤§çš„æ“ä½œã€‚é™¤ééœ€è¦æ£€æŸ¥ Hookï¼Œå¦åˆ™æ²¡æœ‰å¿…è¦è¿™ä¹ˆåšã€‚ å› æ­¤ï¼ŒuseDebugValue æ¥å—ä¸€ä¸ªæ ¼å¼åŒ–å‡½æ•°ä½œä¸ºå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚è¯¥å‡½æ•°åªæœ‰åœ¨ Hook è¢«æ£€æŸ¥æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚å®ƒæ¥å— debug å€¼ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”ä¼šè¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ˜¾ç¤ºå€¼ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªè¿”å› Date å€¼çš„è‡ªå®šä¹‰ Hook å¯ä»¥é€šè¿‡æ ¼å¼åŒ–å‡½æ•°æ¥é¿å…ä¸å¿…è¦çš„ toDateString å‡½æ•°è°ƒç”¨ï¼š 1useDebugValue(date, date =&gt; date.toDateString()); å‚è€ƒæ–‡æ¡£ React å®˜æ–¹æ–‡æ¡£","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"React","slug":"React","permalink":"https://guoshunfa.com/tags/React/"},{"name":"Hook","slug":"Hook","permalink":"https://guoshunfa.com/tags/Hook/"}]},{"title":"Reactæ¡†æ¶ - è§£å†³è·¨åŸŸé—®é¢˜","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/React/Reactæ¡†æ¶-è§£å†³è·¨åŸŸé—®é¢˜","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.302Z","comments":true,"path":"2022/07/Reactæ¡†æ¶-è§£å†³è·¨åŸŸé—®é¢˜/","link":"","permalink":"https://guoshunfa.com/2022/07/React%E6%A1%86%E6%9E%B6-%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/","excerpt":"","text":"1. åœºæ™¯ReactæœåŠ¡çš„åœ°å€æ˜¯127.0.0.1:3000ï¼Œæ¥å£æœåŠ¡çš„åœ°å€æ˜¯127.0.0.1:5000ã€‚ ReactæœåŠ¡3000ç›´æ¥è°ƒç”¨æ¥å£æœåŠ¡5000å¯èƒ½ä¼šäº§ç”Ÿè·¨åŸŸé—®é¢˜ã€‚ è¿™é‡Œæœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯ç›´æ¥åœ¨package.jsonä¸­é…ç½®ï¼Œä¸€ç§æ˜¯ä½¿ç”¨å•ç‹¬çš„é…ç½®æ–‡ä»¶ã€‚ä¸‹é¢ä¼šå¯¹è¿™ä¸¤ç§è¿›è¡Œä»‹ç»ã€‚ 2. ç¬¬ä¸€ç§ï¼špackage.json é…ç½® ç¼ºç‚¹ï¼š åªèƒ½é…ç½®ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æœ‰å¤šä¸ªæœåŠ¡ä¸èƒ½ä½¿ç”¨ã€‚ ä¼˜ç‚¹ï¼š é…ç½®ç®€å•ã€‚ é…ç½®ï¼š 1&quot;proxy&quot;: &quot;http://127.0.0.1:5000&quot; è®¿é—®ï¼š æ­£å¸¸è®¿é—®3000æœåŠ¡ï¼Œä¼šè¢«è½¬å‘åˆ°5000ï¼Œå¦‚ï¼šhttp://127.0.0.1:3000/findUsersã€‚ 3. ç¬¬äºŒç§ï¼šä½¿ç”¨ http-proxy-middleware ç»„ä»¶åŒ… ç¼ºç‚¹ï¼š é…ç½®ç¹çã€‚ æ¥å£è°ƒç”¨å¿…é¡»åŠ å‰ç¼€ï¼Œå¦‚&#x2F;api1ã€‚ ä¼˜ç‚¹ï¼š å¯é…ç½®å¤šä¸ªæ¥å£æœåŠ¡ã€‚ é…ç½®ï¼š srcæ–‡ä»¶ä¸‹åˆ›å»ºsetupProxy.jsæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ã€‚ 12345678910111213141516const proxy = require(&#x27;http-proxy-middleware&#x27;)module.exports = function(app)&#123; app.use( proxy(&#x27;/api1&#x27;,&#123; //é‡è§/api1å‰ç¼€çš„è¯·æ±‚ï¼Œå°±ä¼šè§¦å‘è¯¥ä»£ç†é…ç½® target:&#x27;http://localhost:5000&#x27;, //è¯·æ±‚è½¬å‘ç»™è° changeOrigin:true,//æ§åˆ¶æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­Hostçš„å€¼ pathRewrite:&#123;&#x27;^/api1&#x27;:&#x27;&#x27;&#125; //é‡å†™è¯·æ±‚è·¯å¾„(å¿…é¡») &#125;), proxy(&#x27;/api2&#x27;,&#123; target:&#x27;http://localhost:5001&#x27;, changeOrigin:true, pathRewrite:&#123;&#x27;^/api2&#x27;:&#x27;&#x27;&#125; &#125;), )&#125; è®¿é—®ï¼š http://127.0.0.1:3000/api1/findUsersï¼Œä¼šè¢«è½¬å‘åˆ°5001æœåŠ¡çš„http://127.0.0.1:5001/findUsers","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"React","slug":"React","permalink":"https://guoshunfa.com/tags/React/"},{"name":"è·¨åŸŸ","slug":"è·¨åŸŸ","permalink":"https://guoshunfa.com/tags/%E8%B7%A8%E5%9F%9F/"}]},{"title":"Reactæ¡†æ¶ Router","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/React/Reactæ¡†æ¶Router","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.302Z","comments":true,"path":"2022/07/Reactæ¡†æ¶Router/","link":"","permalink":"https://guoshunfa.com/2022/07/React%E6%A1%86%E6%9E%B6Router/","excerpt":"","text":"Reactæ¡†æ¶ - Router å‰å¾€ React Router V6 å®˜æ–¹æ–‡æ¡£ react-router-domä¸ºé’ˆå¯¹webå¼€å‘çš„ç»„ä»¶åº“ã€‚ 1. v6 ç‰ˆæœ¬1.1. ç‰ˆæœ¬æ›´æ–°å†…å®¹ æ¨å‡ºäº†å¾ˆå¤šå¥½ç”¨hooksï¼Œä½†æ˜¯è·¯ç”±ç»„ä»¶å†…propsçš„ä¸‰ä¸ªå®ç”¨å±æ€§å»æ‰äº†ã€‚ &#x3D; &#x3D; &lt;Switch&gt;é‡å‘½åä¸º&lt;Routes&gt;ã€‚ &lt;Route&gt;çš„æ–°ç‰¹æ€§å˜æ›´ã€‚ åµŒå¥—è·¯ç”±å˜å¾—æ›´ç®€å•ã€‚ ç”¨useNavigateä»£æ›¿useHistoryã€‚ æ–°é’©å­useRoutesä»£æ›¿react-router-configã€‚ å¤§å°å‡å°‘ï¼šä»20kbåˆ°8kb 1.2. å¸¸ç”¨è·¯ç”±ç»„ä»¶å’Œhooks ç»„ä»¶å ä½œç”¨ è¯´æ˜ &lt;Routers&gt; ä¸€ç»„è·¯ç”± ä»£æ›¿åŸæœ‰&lt;Switch&gt;ï¼Œæ‰€æœ‰å­è·¯ç”±éƒ½ç”¨åŸºç¡€çš„Router childrenæ¥è¡¨ç¤º &lt;Router&gt; åŸºç¡€è·¯ç”± Routeræ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œè§£å†³åŸæœ‰V5ä¸­ä¸¥æ ¼æ¨¡å¼ï¼Œåé¢ä¸V5åŒºåˆ«ä¼šè¯¦ç»†ä»‹ç» &lt;Link&gt; å¯¼èˆªç»„ä»¶ åœ¨å®é™…é¡µé¢ä¸­è·³è½¬ä½¿ç”¨ &lt;Outlet/&gt; è‡ªé€‚åº”æ¸²æŸ“ç»„ä»¶ æ ¹æ®å®é™…è·¯ç”±urlè‡ªåŠ¨é€‰æ‹©ç»„ä»¶ hookså ä½œç”¨ è¯´æ˜ useParams è¿”å›å½“å‰å‚æ•° æ ¹æ®è·¯å¾„è¯»å–å‚æ•° useNavigate è¿”å›å½“å‰è·¯ç”± ä»£æ›¿åŸæœ‰V5ä¸­çš„ useHistory useOutlet è¿”å›æ ¹æ®è·¯ç”±ç”Ÿæˆçš„element useLocation è¿”å›å½“å‰çš„location å¯¹è±¡ useRoutes åŒRoutersç»„ä»¶ä¸€æ ·ï¼Œåªä¸è¿‡æ˜¯åœ¨jsä¸­ä½¿ç”¨ useSearchParams ç”¨æ¥åŒ¹é…URLä¸­?åé¢çš„æœç´¢å‚æ•° 1.2. è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨ å¯¼èˆªï¼Œä½¿ç”¨Linkæ ‡ç­¾ã€‚&lt;Link to=&quot;/&quot;&gt;Home&lt;/Link&gt; è·¯ç”±Routesä¸Routeæ­é…ä½¿ç”¨ã€‚ elementç›´æ¥å†™å…¥ç»„ä»¶ï¼Œå¯ä»¥ä¼ å…¥propsã€‚ 123&lt;Routes&gt; &lt;Route path=&quot;/&quot; element=&#123;&lt;App /&gt;&#125;&gt;&lt;/Route&gt;&lt;/Routes&gt; 1.3. åµŒå¥—è·¯ç”±12345678910&lt;Routes&gt; &lt;Route path=&quot;/&quot; element=&#123;&lt;App /&gt;&#125;&gt; &lt;Route index element=&#123;&lt;Home /&gt;&#125; /&gt; &lt;Route path=&quot;teams&quot; element=&#123;&lt;Teams /&gt;&#125;&gt; &lt;Route path=&quot;:teamId&quot; element=&#123;&lt;Team /&gt;&#125; /&gt; &lt;Route path=&quot;new&quot; element=&#123;&lt;NewTeamForm /&gt;&#125; /&gt; &lt;Route index element=&#123;&lt;LeagueStandings /&gt;&#125; /&gt; &lt;/Route&gt; &lt;/Route&gt;&lt;/Routes&gt; 1.4. Outlet&lt;Outlet/&gt;æ ¹æ®å®šä¹‰çš„ä¸åŒè·¯ç”±å‚æ•°è¿›è¡Œæ¸²æŸ“ç»„ä»¶ã€‚ 2. v5 ç‰ˆæœ¬2.1. è·¯ç”±çš„åŸºæœ¬ä½¿ç”¨â€‹ 1.æ˜ç¡®å¥½ç•Œé¢ä¸­çš„å¯¼èˆªåŒºã€å±•ç¤ºåŒºâ€‹ 2.å¯¼èˆªåŒºçš„aæ ‡ç­¾æ”¹ä¸ºLinkæ ‡ç­¾â€‹ &lt;Link to=&quot;/xxxxx&quot;&gt;Demo&lt;/Link&gt;â€‹ 3.å±•ç¤ºåŒºå†™Routeæ ‡ç­¾è¿›è¡Œè·¯å¾„çš„åŒ¹é…â€‹ &lt;Route path=&#39;/xxxx&#39; component=&#123;Demo&#125;/&gt;â€‹ 4.&lt;App&gt;çš„æœ€å¤–ä¾§åŒ…è£¹äº†ä¸€ä¸ª&lt;BrowserRouter&gt;æˆ–&lt;HashRouter&gt; 2.2. è·¯ç”±ç»„ä»¶ä¸ä¸€èˆ¬ç»„ä»¶â€‹ 1.å†™æ³•ä¸åŒï¼šâ€‹ ä¸€èˆ¬ç»„ä»¶ï¼š&lt;Demo/&gt;â€‹ è·¯ç”±ç»„ä»¶ï¼š&lt;Route path=&quot;/demo&quot; component=&#123;Demo&#125;/&gt;â€‹ 2.å­˜æ”¾ä½ç½®ä¸åŒï¼šâ€‹ ä¸€èˆ¬ç»„ä»¶ï¼šcomponentsâ€‹ è·¯ç”±ç»„ä»¶ï¼špagesâ€‹ 3.æ¥æ”¶åˆ°çš„propsä¸åŒï¼šâ€‹ ä¸€èˆ¬ç»„ä»¶ï¼šå†™ç»„ä»¶æ ‡ç­¾æ—¶ä¼ é€’äº†ä»€ä¹ˆï¼Œå°±èƒ½æ”¶åˆ°ä»€ä¹ˆâ€‹ è·¯ç”±ç»„ä»¶ï¼šæ¥æ”¶åˆ°ä¸‰ä¸ªå›ºå®šçš„å±æ€§ 1234567891011121314history: go: Æ’ go(n) goBack: Æ’ goBack() goForward: Æ’ goForward() push: Æ’ push(path, state) replace: Æ’ replace(path, state)location: pathname: &quot;/about&quot; search: &quot;&quot; state: undefinedmatch: params: &#123;&#125; path: &quot;/about&quot; url: &quot;/about&quot; 2.3. NavLinkä¸å°è£…NavLinkâ€‹ 1.NavLinkå¯ä»¥å®ç°è·¯ç”±é“¾æ¥çš„é«˜äº®ï¼Œé€šè¿‡activeClassNameæŒ‡å®šæ ·å¼å 2.4. Switchçš„ä½¿ç”¨â€‹ 1.é€šå¸¸æƒ…å†µä¸‹ï¼Œpathå’Œcomponentæ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚â€‹ 2.Switchå¯ä»¥æé«˜è·¯ç”±åŒ¹é…æ•ˆç‡(å•ä¸€åŒ¹é…)ã€‚ 2.5. è§£å†³å¤šçº§è·¯å¾„åˆ·æ–°é¡µé¢æ ·å¼ä¸¢å¤±çš„é—®é¢˜â€‹ 1.public&#x2F;index.html ä¸­ å¼•å…¥æ ·å¼æ—¶ä¸å†™ .&#x2F; å†™ &#x2F; ï¼ˆå¸¸ç”¨ï¼‰â€‹ 2.public&#x2F;index.html ä¸­ å¼•å…¥æ ·å¼æ—¶ä¸å†™ .&#x2F; å†™ %PUBLIC_URL% ï¼ˆå¸¸ç”¨ï¼‰â€‹ 3.ä½¿ç”¨HashRouter 2.6. è·¯ç”±çš„ä¸¥æ ¼åŒ¹é…ä¸æ¨¡ç³ŠåŒ¹é…â€‹ 1.é»˜è®¤ä½¿ç”¨çš„æ˜¯æ¨¡ç³ŠåŒ¹é…ï¼ˆç®€å•è®°ï¼šã€è¾“å…¥çš„è·¯å¾„ã€‘å¿…é¡»åŒ…å«è¦ã€åŒ¹é…çš„è·¯å¾„ã€‘ï¼Œä¸”é¡ºåºè¦ä¸€è‡´ï¼‰â€‹ 2.å¼€å¯ä¸¥æ ¼åŒ¹é…ï¼š&lt;Route exact=&#123;true&#125; path=&quot;/about&quot; component=&#123;About&#125;/&gt;â€‹ 3.ä¸¥æ ¼åŒ¹é…ä¸è¦éšä¾¿å¼€å¯ï¼Œéœ€è¦å†å¼€ï¼Œæœ‰äº›æ—¶å€™å¼€å¯ä¼šå¯¼è‡´æ— æ³•ç»§ç»­åŒ¹é…äºŒçº§è·¯ç”± 2.7. Redirectçš„ä½¿ç”¨â€‹ 1.ä¸€èˆ¬å†™åœ¨æ‰€æœ‰è·¯ç”±æ³¨å†Œçš„æœ€ä¸‹æ–¹ï¼Œå½“æ‰€æœ‰è·¯ç”±éƒ½æ— æ³•åŒ¹é…æ—¶ï¼Œè·³è½¬åˆ°RedirectæŒ‡å®šçš„è·¯ç”±â€‹ 2.å…·ä½“ç¼–ç ï¼š 12345&lt;Switch&gt; &lt;Route path=&quot;/about&quot; component=&#123;About&#125;/&gt; &lt;Route path=&quot;/home&quot; component=&#123;Home&#125;/&gt; &lt;Redirect to=&quot;/about&quot;/&gt;&lt;/Switch&gt; â€‹ 2.8. åµŒå¥—è·¯ç”±â€‹ 1.æ³¨å†Œå­è·¯ç”±æ—¶è¦å†™ä¸Šçˆ¶è·¯ç”±çš„pathå€¼â€‹ 2.è·¯ç”±çš„åŒ¹é…æ˜¯æŒ‰ç…§æ³¨å†Œè·¯ç”±çš„é¡ºåºè¿›è¡Œçš„ 2.9. å‘è·¯ç”±ç»„ä»¶ä¼ é€’å‚æ•°12345678910111213141.paramså‚æ•° è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š&lt;Link to=&#x27;/demo/test/tom/18&#x27;&#125;&gt;è¯¦æƒ…&lt;/Link&gt; æ³¨å†Œè·¯ç”±(å£°æ˜æ¥æ”¶)ï¼š&lt;Route path=&quot;/demo/test/:name/:age&quot; component=&#123;Test&#125;/&gt; æ¥æ”¶å‚æ•°ï¼šthis.props.match.params2.searchå‚æ•° è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š&lt;Link to=&#x27;/demo/test?name=tom&amp;age=18&#x27;&#125;&gt;è¯¦æƒ…&lt;/Link&gt; æ³¨å†Œè·¯ç”±(æ— éœ€å£°æ˜ï¼Œæ­£å¸¸æ³¨å†Œå³å¯)ï¼š&lt;Route path=&quot;/demo/test&quot; component=&#123;Test&#125;/&gt; æ¥æ”¶å‚æ•°ï¼šthis.props.location.search å¤‡æ³¨ï¼šè·å–åˆ°çš„searchæ˜¯urlencodedç¼–ç å­—ç¬¦ä¸²ï¼Œéœ€è¦å€ŸåŠ©querystringè§£æ3.stateå‚æ•° è·¯ç”±é“¾æ¥(æºå¸¦å‚æ•°)ï¼š&lt;Link to=&#123;&#123;pathname:&#x27;/demo/test&#x27;,state:&#123;name:&#x27;tom&#x27;,age:18&#125;&#125;&#125;&gt;è¯¦æƒ…&lt;/Link&gt; æ³¨å†Œè·¯ç”±(æ— éœ€å£°æ˜ï¼Œæ­£å¸¸æ³¨å†Œå³å¯)ï¼š&lt;Route path=&quot;/demo/test&quot; component=&#123;Test&#125;/&gt; æ¥æ”¶å‚æ•°ï¼šthis.props.location.state å¤‡æ³¨ï¼šåˆ·æ–°ä¹Ÿå¯ä»¥ä¿ç•™ä½å‚æ•° 2.10. ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆªâ€‹ å€ŸåŠ©this.prosp.historyå¯¹è±¡ä¸Šçš„APIå¯¹æ“ä½œè·¯ç”±è·³è½¬ã€å‰è¿›ã€åé€€ 12345-this.prosp.history.push()-this.prosp.history.replace()-this.prosp.history.goBack()-this.prosp.history.goForward()-this.prosp.history.go() 2.11. BrowserRouterä¸HashRouterçš„åŒºåˆ«â€‹ 1.åº•å±‚åŸç†ä¸ä¸€æ ·ï¼šâ€‹ BrowserRouterä½¿ç”¨çš„æ˜¯H5çš„history APIï¼Œä¸å…¼å®¹IE9åŠä»¥ä¸‹ç‰ˆæœ¬ã€‚â€‹ HashRouterä½¿ç”¨çš„æ˜¯URLçš„å“ˆå¸Œå€¼ã€‚â€‹ 2.pathè¡¨ç°å½¢å¼ä¸ä¸€æ ·â€‹ BrowserRouterçš„è·¯å¾„ä¸­æ²¡æœ‰#,ä¾‹å¦‚ï¼šlocalhost:3000&#x2F;demo&#x2F;testâ€‹ HashRouterçš„è·¯å¾„åŒ…å«#,ä¾‹å¦‚ï¼šlocalhost:3000&#x2F;#&#x2F;demo&#x2F;testâ€‹ 3.åˆ·æ–°åå¯¹è·¯ç”±stateå‚æ•°çš„å½±å“â€‹ (1).BrowserRouteræ²¡æœ‰ä»»ä½•å½±å“ï¼Œå› ä¸ºstateä¿å­˜åœ¨historyå¯¹è±¡ä¸­ã€‚â€‹ (2).HashRouteråˆ·æ–°åä¼šå¯¼è‡´è·¯ç”±stateå‚æ•°çš„ä¸¢å¤±ï¼ï¼ï¼â€‹ 4.å¤‡æ³¨ï¼šHashRouterå¯ä»¥ç”¨äºè§£å†³ä¸€äº›è·¯å¾„é”™è¯¯ç›¸å…³çš„é—®é¢˜ã€‚ å‚è€ƒæ–‡æ¡£ å°šç¡…è°· React-Router V6 ä½¿ç”¨è¯¦è§£(å¹²è´§) React-Router v6 æ–°ç‰¹æ€§è§£è¯»åŠè¿ç§»æŒ‡å— ä»€ä¹ˆï¼ŒReact Routerå·²ç»åˆ°V6äº† ï¼Ÿï¼Ÿ","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"React","slug":"React","permalink":"https://guoshunfa.com/tags/React/"}]},{"title":"Reactæ¡†æ¶ UIç»„ä»¶åº“","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/React/Reactæ¡†æ¶UIç»„ä»¶åº“","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.302Z","comments":true,"path":"2022/07/Reactæ¡†æ¶UIç»„ä»¶åº“/","link":"","permalink":"https://guoshunfa.com/2022/07/React%E6%A1%86%E6%9E%B6UI%E7%BB%84%E4%BB%B6%E5%BA%93/","excerpt":"","text":"1. material-ui(å›½å¤–) å®˜ç½‘: http://www.material-ui.com/#/ github: https://github.com/callemall/material-ui 2. ant-design(å›½å†…èš‚èšé‡‘æœ) å®˜ç½‘: https://ant.design/index-cn Github: https://github.com/ant-design/ant-design/ 2.1. antdçš„æŒ‰éœ€å¼•å…¥+è‡ªå®šä¸»é¢˜ å®‰è£…ä¾èµ–ï¼šyarn add react-app-rewired customize-cra babel-plugin-import less less-loader ä¿®æ”¹package.json 123456789101112131415....&quot;myscripts&quot;: &#123; &quot;start&quot;: &quot;react-app-rewired start&quot;, &quot;build&quot;: &quot;react-app-rewired build&quot;, &quot;test&quot;: &quot;react-app-rewired test&quot;, &quot;eject&quot;: &quot;react-myscripts eject&quot;&#125;,.... æ ¹ç›®å½•ä¸‹åˆ›å»ºconfig-overrides.js 123456789101112131415//é…ç½®å…·ä½“çš„ä¿®æ”¹è§„åˆ™const &#123; override, fixBabelImports,addLessLoader&#125; = require(&#x27;customize-cra&#x27;);module.exports = override( fixBabelImports(&#x27;import&#x27;, &#123; libraryName: &#x27;antd&#x27;, libraryDirectory: &#x27;es&#x27;, style: true, &#125;), addLessLoader(&#123; lessOptions:&#123; javascriptEnabled: true, modifyVars: &#123; &#x27;@primary-color&#x27;: &#x27;green&#x27; &#125;, &#125; &#125;),); å¤‡æ³¨ï¼šä¸ç”¨åœ¨ç»„ä»¶é‡Œäº²è‡ªå¼•å…¥æ ·å¼äº†ï¼Œå³ï¼šimport â€˜antd&#x2F;dist&#x2F;antd.cssâ€™åº”è¯¥åˆ æ‰","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"React","slug":"React","permalink":"https://guoshunfa.com/tags/React/"},{"name":"UIç»„ä»¶åº“","slug":"UIç»„ä»¶åº“","permalink":"https://guoshunfa.com/tags/UI%E7%BB%84%E4%BB%B6%E5%BA%93/"}]},{"title":"Reactæ¡†æ¶åŸºç¡€","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/React/Reactæ¡†æ¶åŸºç¡€","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.303Z","comments":true,"path":"2022/07/Reactæ¡†æ¶åŸºç¡€/","link":"","permalink":"https://guoshunfa.com/2022/07/React%E6%A1%86%E6%9E%B6%E5%9F%BA%E7%A1%80/","excerpt":"","text":"è¿›å…¥ Reactå®˜ç½‘ å°šç¡…è°· Reactæ•™å­¦è§†é¢‘ï¼šbç«™ | ç™¾åº¦ç½‘ç›˜ æå–ç ï¼šc1acï¼ˆåŒ…å«è§†é¢‘ã€æºç ã€è¯¾ä»¶ï¼‰ 1. hello react12345678910111213141516171819202122232425&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;hello_react&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªâ€œå®¹å™¨â€ --&gt; &lt;div id=&quot;test&quot;&gt;&lt;/div&gt; &lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;../js/react.development.js&quot;&gt;&lt;/script&gt; &lt;!-- å¼•å…¥react-domï¼Œç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;../js/react-dom.development.js&quot;&gt;&lt;/script&gt; &lt;!-- å¼•å…¥babelï¼Œç”¨äºå°†jsxè½¬ä¸ºjs --&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;../js/babel.min.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/babel&quot; &gt; /* æ­¤å¤„ä¸€å®šè¦å†™babel */ //1.åˆ›å»ºè™šæ‹ŸDOM const VDOM = &lt;h1&gt;Hello,React&lt;/h1&gt; /* æ­¤å¤„ä¸€å®šä¸è¦å†™å¼•å·ï¼Œå› ä¸ºä¸æ˜¯å­—ç¬¦ä¸² */ //2.æ¸²æŸ“è™šæ‹ŸDOMåˆ°é¡µé¢ ReactDOM.render(VDOM,document.getElementById(&#x27;test&#x27;)) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 2. JSX jsxè¯­æ³•è§„åˆ™ï¼š â€‹ 1.å®šä¹‰è™šæ‹ŸDOMæ—¶ï¼Œä¸è¦å†™å¼•å·ã€‚ â€‹ 2.æ ‡ç­¾ä¸­æ··å…¥JSè¡¨è¾¾å¼æ—¶è¦ç”¨{}ã€‚ â€‹ 3.æ ·å¼çš„ç±»åæŒ‡å®šä¸è¦ç”¨classï¼Œè¦ç”¨classNameã€‚ â€‹ 4.å†…è”æ ·å¼ï¼Œè¦ç”¨çš„â¬‡ï¸å½¢å¼å»å†™ã€‚ style=&#123;&#123;key:value&#125;&#125; â€‹ 5.åªæœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾ â€‹ 6.æ ‡ç­¾å¿…é¡»é—­åˆ â€‹ 7.æ ‡ç­¾é¦–å­—æ¯ â€‹ (1).è‹¥å°å†™å­—æ¯å¼€å¤´ï¼Œåˆ™å°†è¯¥æ ‡ç­¾è½¬ä¸ºhtmlä¸­åŒåå…ƒç´ ï¼Œè‹¥htmlä¸­æ— è¯¥æ ‡ç­¾å¯¹åº”çš„åŒåå…ƒç´ ï¼Œåˆ™æŠ¥é”™ã€‚ â€‹ (2).è‹¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œreactå°±å»æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼Œè‹¥ç»„ä»¶æ²¡æœ‰å®šä¹‰ï¼Œåˆ™æŠ¥é”™ã€‚ 12345const VDOM = ( /* æ­¤å¤„ä¸€å®šä¸è¦å†™å¼•å·ï¼Œå› ä¸ºä¸æ˜¯å­—ç¬¦ä¸² */ &lt;h1 id=&quot;title&quot;&gt; &lt;span&gt;Hello,React&lt;/span&gt; &lt;/h1&gt; ) 3. ç»„ä»¶å®šä¹‰æ–¹å¼å‡½æ•°å¼ç»„ä»¶ 123456789101112//1.åˆ›å»ºå‡½æ•°å¼ç»„ä»¶function MyComponent()&#123; console.log(this); //æ­¤å¤„çš„thisæ˜¯undefinedï¼Œå› ä¸ºbabelç¼–è¯‘åå¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ return &lt;h2&gt;æˆ‘æ˜¯ç”¨å‡½æ•°å®šä¹‰çš„ç»„ä»¶(é€‚ç”¨äºã€ç®€å•ç»„ä»¶ã€‘çš„å®šä¹‰)&lt;/h2&gt;&#125;//2.æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢ReactDOM.render(&lt;MyComponent/&gt;,document.getElementById(&#x27;test&#x27;))/* æ‰§è¡Œäº†ReactDOM.render(&lt;MyComponent/&gt;.......ä¹‹åï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ 1.Reactè§£æç»„ä»¶æ ‡ç­¾ï¼Œæ‰¾åˆ°äº†MyComponentç»„ä»¶ã€‚ 2.å‘ç°ç»„ä»¶æ˜¯ä½¿ç”¨å‡½æ•°å®šä¹‰çš„ï¼Œéšåè°ƒç”¨è¯¥å‡½æ•°ï¼Œå°†è¿”å›çš„è™šæ‹ŸDOMè½¬ä¸ºçœŸå®DOMï¼Œéšåå‘ˆç°åœ¨é¡µé¢ä¸­ã€‚ */ ç±»å¼ç»„ä»¶ å¿…é¡»ç»§æ‰¿React.Componentã€‚ å®ç°renderæ–¹æ³•ï¼Œå¹¶è¿”å›éœ€è¦å±•ç¤ºçš„ç»„ä»¶å†…å®¹ã€‚ 1234567891011121314151617//1.åˆ›å»ºç±»å¼ç»„ä»¶class MyComponent extends React.Component &#123; render()&#123; //renderæ˜¯æ”¾åœ¨å“ªé‡Œçš„ï¼Ÿâ€”â€” MyComponentçš„åŸå‹å¯¹è±¡ä¸Šï¼Œä¾›å®ä¾‹ä½¿ç”¨ã€‚ //renderä¸­çš„thisæ˜¯è°ï¼Ÿâ€”â€” MyComponentçš„å®ä¾‹å¯¹è±¡ &lt;=&gt; MyComponentç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚ console.log(&#x27;renderä¸­çš„this:&#x27;,this); return &lt;h2&gt;æˆ‘æ˜¯ç”¨ç±»å®šä¹‰çš„ç»„ä»¶(é€‚ç”¨äºã€å¤æ‚ç»„ä»¶ã€‘çš„å®šä¹‰)&lt;/h2&gt; &#125;&#125;//2.æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢ReactDOM.render(&lt;MyComponent/&gt;,document.getElementById(&#x27;test&#x27;))/* æ‰§è¡Œäº†ReactDOM.render(&lt;MyComponent/&gt;.......ä¹‹åï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ 1.Reactè§£æç»„ä»¶æ ‡ç­¾ï¼Œæ‰¾åˆ°äº†MyComponentç»„ä»¶ã€‚ 2.å‘ç°ç»„ä»¶æ˜¯ä½¿ç”¨ç±»å®šä¹‰çš„ï¼Œéšånewå‡ºæ¥è¯¥ç±»çš„å®ä¾‹ï¼Œå¹¶é€šè¿‡è¯¥å®ä¾‹è°ƒç”¨åˆ°åŸå‹ä¸Šçš„renderæ–¹æ³•ã€‚ 3.å°†renderè¿”å›çš„è™šæ‹ŸDOMè½¬ä¸ºçœŸå®DOMï¼Œéšåå‘ˆç°åœ¨é¡µé¢ä¸­ã€‚ */ 4. ç»„ä»¶å®ä¾‹ä¸‰å¤§å±æ€§4.1. props é€šè¿‡ç»„ä»¶çš„å½¢å¼ä¼ é€’çš„å‚æ•°éƒ½ä¼šè¢«æ”¾åˆ°propsã€‚ 12345678910111213141516//åˆ›å»ºç»„ä»¶class Person extends React.Component&#123; render()&#123; // console.log(this); const &#123;name,age,sex&#125; = this.props return ( &lt;ul&gt; &lt;li&gt;å§“åï¼š&#123;name&#125;&lt;/li&gt; &lt;li&gt;æ€§åˆ«ï¼š&#123;sex&#125;&lt;/li&gt; &lt;li&gt;å¹´é¾„ï¼š&#123;age+1&#125;&lt;/li&gt; &lt;/ul&gt; ) &#125;&#125;//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢ReactDOM.render(&lt;Person name=&quot;jerry&quot; age=&#123;19&#125; sex=&quot;ç”·&quot;/&gt;,document.getElementById(&#x27;test1&#x27;)) å¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œé™åˆ¶ï¼š 123456789101112131415161718192021222324252627282930//åˆ›å»ºç»„ä»¶class Person extends React.Component&#123; render()&#123; // console.log(this); const &#123;name,age,sex&#125; = this.props //propsæ˜¯åªè¯»çš„ //this.props.name = &#x27;jack&#x27; //æ­¤è¡Œä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸ºpropsæ˜¯åªè¯»çš„ return ( &lt;ul&gt; &lt;li&gt;å§“åï¼š&#123;name&#125;&lt;/li&gt; &lt;li&gt;æ€§åˆ«ï¼š&#123;sex&#125;&lt;/li&gt; &lt;li&gt;å¹´é¾„ï¼š&#123;age+1&#125;&lt;/li&gt; &lt;/ul&gt; ) &#125;&#125;//å¯¹æ ‡ç­¾å±æ€§è¿›è¡Œç±»å‹ã€å¿…è¦æ€§çš„é™åˆ¶Person.propTypes = &#123; name:PropTypes.string.isRequired, //é™åˆ¶nameå¿…ä¼ ï¼Œä¸”ä¸ºå­—ç¬¦ä¸² sex:PropTypes.string,//é™åˆ¶sexä¸ºå­—ç¬¦ä¸² age:PropTypes.number,//é™åˆ¶ageä¸ºæ•°å€¼ speak:PropTypes.func,//é™åˆ¶speakä¸ºå‡½æ•°&#125;//æŒ‡å®šé»˜è®¤æ ‡ç­¾å±æ€§å€¼Person.defaultProps = &#123; sex:&#x27;ç”·&#x27;,//sexé»˜è®¤å€¼ä¸ºç”· age:18 //ageé»˜è®¤å€¼ä¸º18&#125;//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢ReactDOM.render(&lt;Person name=&#123;100&#125; speak=&#123;speak&#125;/&gt;,document.getElementById(&#x27;test1&#x27;)) é™åˆ¶ç®€åŒ–ï¼ˆå°†é™åˆ¶å¤„ç†æ”¾å…¥ç±»ï¼‰ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//åˆ›å»ºç»„ä»¶class Person extends React.Component&#123; constructor(props)&#123; //æ„é€ å™¨æ˜¯å¦æ¥æ”¶propsï¼Œæ˜¯å¦ä¼ é€’ç»™superï¼Œå–å†³äºï¼šæ˜¯å¦å¸Œæœ›åœ¨æ„é€ å™¨ä¸­é€šè¿‡thisè®¿é—®props // console.log(props); super(props) console.log(&#x27;constructor&#x27;,this.props); &#125; //å¯¹æ ‡ç­¾å±æ€§è¿›è¡Œç±»å‹ã€å¿…è¦æ€§çš„é™åˆ¶ static propTypes = &#123; name:PropTypes.string.isRequired, //é™åˆ¶nameå¿…ä¼ ï¼Œä¸”ä¸ºå­—ç¬¦ä¸² sex:PropTypes.string,//é™åˆ¶sexä¸ºå­—ç¬¦ä¸² age:PropTypes.number,//é™åˆ¶ageä¸ºæ•°å€¼ &#125; //æŒ‡å®šé»˜è®¤æ ‡ç­¾å±æ€§å€¼ static defaultProps = &#123; sex:&#x27;ç”·&#x27;,//sexé»˜è®¤å€¼ä¸ºç”· age:18 //ageé»˜è®¤å€¼ä¸º18 &#125; render()&#123; // console.log(this); const &#123;name,age,sex&#125; = this.props //propsæ˜¯åªè¯»çš„ //this.props.name = &#x27;jack&#x27; //æ­¤è¡Œä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸ºpropsæ˜¯åªè¯»çš„ return ( &lt;ul&gt; &lt;li&gt;å§“åï¼š&#123;name&#125;&lt;/li&gt; &lt;li&gt;æ€§åˆ«ï¼š&#123;sex&#125;&lt;/li&gt; &lt;li&gt;å¹´é¾„ï¼š&#123;age+1&#125;&lt;/li&gt; &lt;/ul&gt; ) &#125;&#125;//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢ReactDOM.render(&lt;Person name=&quot;jerry&quot;/&gt;,document.getElementById(&#x27;test1&#x27;)) å‡½æ•°ç»„ä»¶ä½¿ç”¨propsï¼š 123456789101112131415161718192021222324//åˆ›å»ºç»„ä»¶function Person (props)&#123; const &#123;name,age,sex&#125; = props return ( &lt;ul&gt; &lt;li&gt;å§“åï¼š&#123;name&#125;&lt;/li&gt; &lt;li&gt;æ€§åˆ«ï¼š&#123;sex&#125;&lt;/li&gt; &lt;li&gt;å¹´é¾„ï¼š&#123;age&#125;&lt;/li&gt; &lt;/ul&gt; )&#125;Person.propTypes = &#123; name:PropTypes.string.isRequired, //é™åˆ¶nameå¿…ä¼ ï¼Œä¸”ä¸ºå­—ç¬¦ä¸² sex:PropTypes.string,//é™åˆ¶sexä¸ºå­—ç¬¦ä¸² age:PropTypes.number,//é™åˆ¶ageä¸ºæ•°å€¼&#125;//æŒ‡å®šé»˜è®¤æ ‡ç­¾å±æ€§å€¼Person.defaultProps = &#123; sex:&#x27;ç”·&#x27;,//sexé»˜è®¤å€¼ä¸ºç”· age:18 //ageé»˜è®¤å€¼ä¸º18&#125;//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢ReactDOM.render(&lt;Person name=&quot;jerry&quot;/&gt;,document.getElementById(&#x27;test1&#x27;)) 4.2. state state: çŠ¶æ€ï¼Œç”¨äºå­˜å‚¨ç»„ä»¶å†…æ•°æ®ä¿¡æ¯ã€‚ constructor: æ„é€ å‡½æ•°ï¼Œä½œç”¨æ˜¯åˆå§‹åŒ–stateå’Œç»‘å®šäº‹ä»¶ã€‚ 123456789class Weather extends React.Component&#123; //æ„é€ å™¨è°ƒç”¨å‡ æ¬¡ï¼Ÿ â€”â€”â€”â€” 1æ¬¡ constructor(props)&#123; console.log(&#x27;constructor&#x27;); super(props) //åˆå§‹åŒ–çŠ¶æ€ this.state = &#123;isHot:false,wind:&#x27;å¾®é£&#x27;&#125; &#125;&#125; 1234class Weather extends React.Component&#123; //åˆå§‹åŒ–çŠ¶æ€ this.state = &#123;isHot:false,wind:&#x27;å¾®é£&#x27;&#125;&#125; 4.3. refs å®˜æ–¹ä¸å»ºè®®è¿‡åº¦ä½¿ç”¨refã€‚ å­—ç¬¦ä¸²å½¢å¼çš„ref å®˜æ–¹ä¸å»ºè®®ä½¿ç”¨ã€‚ 123456789101112131415161718192021222324//åˆ›å»ºç»„ä»¶class Demo extends React.Component&#123; //å±•ç¤ºå·¦ä¾§è¾“å…¥æ¡†çš„æ•°æ® showData = ()=&gt;&#123; const &#123;input1&#125; = this.refs alert(input1.value) &#125; //å±•ç¤ºå³ä¾§è¾“å…¥æ¡†çš„æ•°æ® showData2 = ()=&gt;&#123; const &#123;input2&#125; = this.refs alert(input2.value) &#125; render()&#123; return( &lt;div&gt; &lt;input ref=&quot;input1&quot; type=&quot;text&quot; placeholder=&quot;ç‚¹å‡»æŒ‰é’®æç¤ºæ•°æ®&quot;/&gt;&amp;nbsp; &lt;button onClick=&#123;this.showData&#125;&gt;ç‚¹æˆ‘æç¤ºå·¦ä¾§çš„æ•°æ®&lt;/button&gt;&amp;nbsp; &lt;input ref=&quot;input2&quot; onBlur=&#123;this.showData2&#125; type=&quot;text&quot; placeholder=&quot;å¤±å»ç„¦ç‚¹æç¤ºæ•°æ®&quot;/&gt; &lt;/div&gt; ) &#125;&#125;//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢ReactDOM.render(&lt;Demo a=&quot;1&quot; b=&quot;2&quot;/&gt;,document.getElementById(&#x27;test&#x27;)) å›è°ƒå‡½æ•°å½¢å¼çš„ref 123456789101112131415161718192021222324//åˆ›å»ºç»„ä»¶class Demo extends React.Component&#123; //å±•ç¤ºå·¦ä¾§è¾“å…¥æ¡†çš„æ•°æ® showData = ()=&gt;&#123; const &#123;input1&#125; = this alert(input1.value) &#125; //å±•ç¤ºå³ä¾§è¾“å…¥æ¡†çš„æ•°æ® showData2 = ()=&gt;&#123; const &#123;input2&#125; = this alert(input2.value) &#125; render()&#123; return( &lt;div&gt; &lt;input ref=&#123;c =&gt; this.input1 = c &#125; type=&quot;text&quot; placeholder=&quot;ç‚¹å‡»æŒ‰é’®æç¤ºæ•°æ®&quot;/&gt;&amp;nbsp; &lt;button onClick=&#123;this.showData&#125;&gt;ç‚¹æˆ‘æç¤ºå·¦ä¾§çš„æ•°æ®&lt;/button&gt;&amp;nbsp; &lt;input onBlur=&#123;this.showData2&#125; ref=&#123;c =&gt; this.input2 = c &#125; type=&quot;text&quot; placeholder=&quot;å¤±å»ç„¦ç‚¹æç¤ºæ•°æ®&quot;/&gt;&amp;nbsp; &lt;/div&gt; ) &#125;&#125;//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢ReactDOM.render(&lt;Demo a=&quot;1&quot; b=&quot;2&quot;/&gt;,document.getElementById(&#x27;test&#x27;)) createRef çš„æ–¹å¼æ„å»ºrefï¼ˆReactæä¾›çš„æ–¹æ³•ï¼‰ å®˜æ–¹æ¨èä½¿ç”¨çš„æ–¹å¼ã€‚ ç¼ºé™·ï¼šReact.createRef() ä¸€æ¬¡åªèƒ½åˆ›å»ºä¸€ä¸ªref 123456789101112131415161718192021222324252627//åˆ›å»ºç»„ä»¶class Demo extends React.Component&#123; /* React.createRefè°ƒç”¨åå¯ä»¥è¿”å›ä¸€ä¸ªå®¹å™¨ï¼Œè¯¥å®¹å™¨å¯ä»¥å­˜å‚¨è¢«refæ‰€æ ‡è¯†çš„èŠ‚ç‚¹,è¯¥å®¹å™¨æ˜¯â€œä¸“äººä¸“ç”¨â€çš„ */ myRef = React.createRef() myRef2 = React.createRef() //å±•ç¤ºå·¦ä¾§è¾“å…¥æ¡†çš„æ•°æ® showData = ()=&gt;&#123; alert(this.myRef.current.value); &#125; //å±•ç¤ºå³ä¾§è¾“å…¥æ¡†çš„æ•°æ® showData2 = ()=&gt;&#123; alert(this.myRef2.current.value); &#125; render()&#123; return( &lt;div&gt; &lt;input ref=&#123;this.myRef&#125; type=&quot;text&quot; placeholder=&quot;ç‚¹å‡»æŒ‰é’®æç¤ºæ•°æ®&quot;/&gt;&amp;nbsp; &lt;button onClick=&#123;this.showData&#125;&gt;ç‚¹æˆ‘æç¤ºå·¦ä¾§çš„æ•°æ®&lt;/button&gt;&amp;nbsp; &lt;input onBlur=&#123;this.showData2&#125; ref=&#123;this.myRef2&#125; type=&quot;text&quot; placeholder=&quot;å¤±å»ç„¦ç‚¹æç¤ºæ•°æ®&quot;/&gt;&amp;nbsp; &lt;/div&gt; ) &#125;&#125;//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢ReactDOM.render(&lt;Demo a=&quot;1&quot; b=&quot;2&quot;/&gt;,document.getElementById(&#x27;test&#x27;)) 5. ç”Ÿå‘½å‘¨æœŸReact æ–°ç”Ÿå‘½å‘¨æœŸï¼ˆReact v16ä¹‹åï¼‰ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394//åˆ›å»ºç»„ä»¶class Count extends React.Component&#123; /* 1. åˆå§‹åŒ–é˜¶æ®µ: ç”±ReactDOM.render()è§¦å‘---åˆæ¬¡æ¸²æŸ“ 1. constructor() 2. getDerivedStateFromProps 3. render() 4. componentDidMount() =====&gt; å¸¸ç”¨ ä¸€èˆ¬åœ¨è¿™ä¸ªé’©å­ä¸­åšä¸€äº›åˆå§‹åŒ–çš„äº‹ï¼Œä¾‹å¦‚ï¼šå¼€å¯å®šæ—¶å™¨ã€å‘é€ç½‘ç»œè¯·æ±‚ã€è®¢é˜…æ¶ˆæ¯ 2. æ›´æ–°é˜¶æ®µ: ç”±ç»„ä»¶å†…éƒ¨this.setSate()æˆ–çˆ¶ç»„ä»¶é‡æ–°renderè§¦å‘ 1. getDerivedStateFromProps 2. shouldComponentUpdate() 3. render() 4. getSnapshotBeforeUpdate 5. componentDidUpdate() 3. å¸è½½ç»„ä»¶: ç”±ReactDOM.unmountComponentAtNode()è§¦å‘ 1. componentWillUnmount() =====&gt; å¸¸ç”¨ ä¸€èˆ¬åœ¨è¿™ä¸ªé’©å­ä¸­åšä¸€äº›æ”¶å°¾çš„äº‹ï¼Œä¾‹å¦‚ï¼šå…³é—­å®šæ—¶å™¨ã€å–æ¶ˆè®¢é˜…æ¶ˆæ¯ */ //æ„é€ å™¨ constructor(props)&#123; console.log(&#x27;Count---constructor&#x27;); super(props) //åˆå§‹åŒ–çŠ¶æ€ this.state = &#123;count:0&#125; &#125; //åŠ 1æŒ‰é’®çš„å›è°ƒ add = ()=&gt;&#123; //è·å–åŸçŠ¶æ€ const &#123;count&#125; = this.state //æ›´æ–°çŠ¶æ€ this.setState(&#123;count:count+1&#125;) &#125; //å¸è½½ç»„ä»¶æŒ‰é’®çš„å›è°ƒ death = ()=&gt;&#123; ReactDOM.unmountComponentAtNode(document.getElementById(&#x27;test&#x27;)) &#125; //å¼ºåˆ¶æ›´æ–°æŒ‰é’®çš„å›è°ƒ force = ()=&gt;&#123; this.forceUpdate() &#125; //è‹¥stateçš„å€¼åœ¨ä»»ä½•æ—¶å€™éƒ½å–å†³äºpropsï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ge tDerivedStateFromProps static getDerivedStateFromProps(props,state)&#123; console.log(&#x27;getDerivedStateFromProps&#x27;,props,state); return null &#125; //åœ¨æ›´æ–°ä¹‹å‰è·å–å¿«ç…§ getSnapshotBeforeUpdate()&#123; console.log(&#x27;getSnapshotBeforeUpdate&#x27;); return &#x27;atguigu&#x27; &#125; //ç»„ä»¶æŒ‚è½½å®Œæ¯•çš„é’©å­ componentDidMount()&#123; console.log(&#x27;Count---componentDidMount&#x27;); &#125; //ç»„ä»¶å°†è¦å¸è½½çš„é’©å­ componentWillUnmount()&#123; console.log(&#x27;Count---componentWillUnmount&#x27;); &#125; //æ§åˆ¶ç»„ä»¶æ›´æ–°çš„â€œé˜€é—¨â€ shouldComponentUpdate()&#123; console.log(&#x27;Count---shouldComponentUpdate&#x27;); return true &#125; //ç»„ä»¶æ›´æ–°å®Œæ¯•çš„é’©å­ componentDidUpdate(preProps,preState,snapshotValue)&#123; console.log(&#x27;Count---componentDidUpdate&#x27;,preProps,preState,snapshotValue); &#125; render()&#123; console.log(&#x27;Count---render&#x27;); const &#123;count&#125; = this.state return( &lt;div&gt; &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;count&#125;&lt;/h2&gt; &lt;button onClick=&#123;this.add&#125;&gt;ç‚¹æˆ‘+1&lt;/button&gt; &lt;button onClick=&#123;this.death&#125;&gt;å¸è½½ç»„ä»¶&lt;/button&gt; &lt;button onClick=&#123;this.force&#125;&gt;ä¸æ›´æ”¹ä»»ä½•çŠ¶æ€ä¸­çš„æ•°æ®ï¼Œå¼ºåˆ¶æ›´æ–°ä¸€ä¸‹&lt;/button&gt; &lt;/div&gt; ) &#125;&#125;//æ¸²æŸ“ç»„ä»¶ReactDOM.render(&lt;Count count=&#123;199&#125;/&gt;,document.getElementById(&#x27;test&#x27;)) React v16 å‰ç”Ÿå‘½å‘¨æœŸï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142/* 1. åˆå§‹åŒ–é˜¶æ®µ: ç”±ReactDOM.render()è§¦å‘---åˆæ¬¡æ¸²æŸ“ 1. constructor() 2. componentWillMount() 3. render() 4. componentDidMount() =====&gt; å¸¸ç”¨ ä¸€èˆ¬åœ¨è¿™ä¸ªé’©å­ä¸­åšä¸€äº›åˆå§‹åŒ–çš„äº‹ï¼Œä¾‹å¦‚ï¼šå¼€å¯å®šæ—¶å™¨ã€å‘é€ç½‘ç»œè¯·æ±‚ã€è®¢é˜…æ¶ˆæ¯ 2. æ›´æ–°é˜¶æ®µ: ç”±ç»„ä»¶å†…éƒ¨this.setSate()æˆ–çˆ¶ç»„ä»¶renderè§¦å‘ 1. shouldComponentUpdate() 2. componentWillUpdate() 3. render() =====&gt; å¿…é¡»ä½¿ç”¨çš„ä¸€ä¸ª 4. componentDidUpdate() 3. å¸è½½ç»„ä»¶: ç”±ReactDOM.unmountComponentAtNode()è§¦å‘ 1. componentWillUnmount() =====&gt; å¸¸ç”¨ ä¸€èˆ¬åœ¨è¿™ä¸ªé’©å­ä¸­åšä¸€äº›æ”¶å°¾çš„äº‹ï¼Œä¾‹å¦‚ï¼šå…³é—­å®šæ—¶å™¨ã€å–æ¶ˆè®¢é˜…æ¶ˆæ¯ *///åˆ›å»ºç»„ä»¶class Count extends React.Component&#123; //æ„é€ å™¨ constructor(props)&#123; console.log(&#x27;Count---constructor&#x27;); super(props) //åˆå§‹åŒ–çŠ¶æ€ this.state = &#123;count:0&#125; &#125; //åŠ 1æŒ‰é’®çš„å›è°ƒ add = ()=&gt;&#123; //è·å–åŸçŠ¶æ€ const &#123;count&#125; = this.state //æ›´æ–°çŠ¶æ€ this.setState(&#123;count:count+1&#125;) &#125; //å¸è½½ç»„ä»¶æŒ‰é’®çš„å›è°ƒ death = ()=&gt;&#123; ReactDOM.unmountComponentAtNode(document.getElementById(&#x27;test&#x27;)) &#125; //å¼ºåˆ¶æ›´æ–°æŒ‰é’®çš„å›è°ƒ force = ()=&gt;&#123; this.forceUpdate() &#125; //ç»„ä»¶å°†è¦æŒ‚è½½çš„é’©å­ componentWillMount()&#123; console.log(&#x27;Count---componentWillMount&#x27;); &#125; //ç»„ä»¶æŒ‚è½½å®Œæ¯•çš„é’©å­ componentDidMount()&#123; console.log(&#x27;Count---componentDidMount&#x27;); &#125; //ç»„ä»¶å°†è¦å¸è½½çš„é’©å­ componentWillUnmount()&#123; console.log(&#x27;Count---componentWillUnmount&#x27;); &#125; //æ§åˆ¶ç»„ä»¶æ›´æ–°çš„â€œé˜€é—¨â€ shouldComponentUpdate()&#123; console.log(&#x27;Count---shouldComponentUpdate&#x27;); return true &#125; //ç»„ä»¶å°†è¦æ›´æ–°çš„é’©å­ componentWillUpdate()&#123; console.log(&#x27;Count---componentWillUpdate&#x27;); &#125; //ç»„ä»¶æ›´æ–°å®Œæ¯•çš„é’©å­ componentDidUpdate()&#123; console.log(&#x27;Count---componentDidUpdate&#x27;); &#125; render()&#123; console.log(&#x27;Count---render&#x27;); const &#123;count&#125; = this.state return( &lt;div&gt; &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;count&#125;&lt;/h2&gt; &lt;button onClick=&#123;this.add&#125;&gt;ç‚¹æˆ‘+1&lt;/button&gt; &lt;button onClick=&#123;this.death&#125;&gt;å¸è½½ç»„ä»¶&lt;/button&gt; &lt;button onClick=&#123;this.force&#125;&gt;ä¸æ›´æ”¹ä»»ä½•çŠ¶æ€ä¸­çš„æ•°æ®ï¼Œå¼ºåˆ¶æ›´æ–°ä¸€ä¸‹&lt;/button&gt; &lt;/div&gt; ) &#125;&#125;//çˆ¶ç»„ä»¶Aclass A extends React.Component&#123; //åˆå§‹åŒ–çŠ¶æ€ state = &#123;carName:&#x27;å¥”é©°&#x27;&#125; changeCar = ()=&gt;&#123; this.setState(&#123;carName:&#x27;å¥¥æ‹“&#x27;&#125;) &#125; render()&#123; return( &lt;div&gt; &lt;div&gt;æˆ‘æ˜¯Aç»„ä»¶&lt;/div&gt; &lt;button onClick=&#123;this.changeCar&#125;&gt;æ¢è½¦&lt;/button&gt; &lt;B carName=&#123;this.state.carName&#125;/&gt; &lt;/div&gt; ) &#125;&#125;//å­ç»„ä»¶Bclass B extends React.Component&#123; //ç»„ä»¶å°†è¦æ¥æ”¶æ–°çš„propsçš„é’©å­ componentWillReceiveProps(props)&#123; console.log(&#x27;B---componentWillReceiveProps&#x27;,props); &#125; //æ§åˆ¶ç»„ä»¶æ›´æ–°çš„â€œé˜€é—¨â€ shouldComponentUpdate()&#123; console.log(&#x27;B---shouldComponentUpdate&#x27;); return true &#125; //ç»„ä»¶å°†è¦æ›´æ–°çš„é’©å­ componentWillUpdate()&#123; console.log(&#x27;B---componentWillUpdate&#x27;); &#125; //ç»„ä»¶æ›´æ–°å®Œæ¯•çš„é’©å­ componentDidUpdate()&#123; console.log(&#x27;B---componentDidUpdate&#x27;); &#125; render()&#123; console.log(&#x27;B---render&#x27;); return( &lt;div&gt;æˆ‘æ˜¯Bç»„ä»¶ï¼Œæ¥æ”¶åˆ°çš„è½¦æ˜¯:&#123;this.props.carName&#125;&lt;/div&gt; ) &#125;&#125;//æ¸²æŸ“ç»„ä»¶ReactDOM.render(&lt;Count/&gt;,document.getElementById(&#x27;test&#x27;)) 6. ç›¸æ¯”äºHTMLçš„è¯­æ³•åŒºåˆ«HTMLçš„class - &gt; React çš„ className HTMLçš„style&#x3D;â€â€ - &gt; React çš„ style=&#123;&#123;&#125;&#125; å‚è€ƒèµ„æ–™ å°šç¡…è°· React å®˜æ–¹æ–‡æ¡£","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"React","slug":"React","permalink":"https://guoshunfa.com/tags/React/"}]},{"title":"Reactæ¡†æ¶ ç»„ä»¶ä¹‹é—´é€šè®¯","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/React/Reactæ¡†æ¶ç»„ä»¶ä¹‹é—´é€šè®¯","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.303Z","comments":true,"path":"2022/07/Reactæ¡†æ¶ç»„ä»¶ä¹‹é—´é€šè®¯/","link":"","permalink":"https://guoshunfa.com/2022/07/React%E6%A1%86%E6%9E%B6%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E9%80%9A%E8%AE%AF/","excerpt":"","text":"Reactæ¡†æ¶ - ç»„ä»¶ä¹‹é—´é€šè®¯React çˆ¶å­ç»„ä»¶ã€å…„å¼Ÿç»„ä»¶ã€å”ä¾„åº”è¯¥å¦‚ä½•è¿›è¡Œé€šè®¯ï¼Œè¿™é‡Œæè¿°ä¸€ä¸‹ä¸¤ç§æ–¹æ³•ã€‚ props function ç¼ºç‚¹ï¼š æ“ä½œç¹çï¼Œç»„ä»¶å…³ç³»è¶Šå¤æ‚ä»£ç é‡è¶Šå¤šã€‚ è€¦åˆæ€§å¤ªå¼ºã€‚ æ¶ˆæ¯ è®¢é˜…ä¸å‘å¸ƒ ä¼˜ç‚¹ï¼š åªéœ€åœ¨æŒ‡å®šçš„ä½ç½®è¿›è¡Œè®¢é˜…æ¶ˆæ¯ã€å‘å¸ƒæ¶ˆæ¯å³å¯ã€‚ æå¤§ç¨‹åº¦ä¸Šé™ä½è€¦åˆæ€§ã€‚ 1. é€šè¿‡props functionè¿›è¡Œé€šè®¯åŸç†ï¼š æ‰¾åˆ°çˆ¶å­ã€å…„å¼Ÿã€å”ä¾„ç»„ä»¶çš„å…±åŒç»„ä»¶ï¼Œç»‘å®šprops functionï¼Œè¿›è¡Œé€šè®¯ã€‚ 1.1. ç±»å¼ç»„ä»¶ç”¨æ³• 123456789101112131415161718192021// çˆ¶ç»„ä»¶ App.jsximport React, &#123; Component &#125; from &quot;react&quot;;import List from &quot;./compoments/List&quot;;import Search from &quot;./compoments/Search&quot;;export default class App extends Component &#123; state = &#123; datas: [] &#125;; dataChange = (data) =&gt; &#123; let &#123; datas &#125; = this.state; datas.push(data); this.setState(&#123; datas: datas &#125;); &#125;; render() &#123; return ( &lt;div&gt; &lt;Search dataChange=&#123;this.dataChange&#125; /&gt; &lt;List datas=&#123;this.state.datas&#125; /&gt; &lt;/div&gt; ); &#125;&#125; 1234567891011121314// å­ç»„ä»¶ List.jsximport React, &#123; Component &#125; from &quot;react&quot;;export default class List extends Component &#123; render() &#123; return ( &lt;div&gt; &#123;this.props.datas.map((data) =&gt; &#123; return &lt;div key=&#123;data.id&#125;&gt;&#123;data.name&#125;&lt;/div&gt;; &#125;)&#125; &lt;/div&gt; ); &#125;&#125; 123456789101112131415// å­ç»„ä»¶ Search.jsximport React, &#123; Component &#125; from &quot;react&quot;;export default class Search extends Component &#123; dataChange = () =&gt; &#123; this.props.dataChange(&#123; id: Date.now(), name: &quot;åŠ äº†åŠ äº†&quot; &#125;); &#125;; render() &#123; return ( &lt;div&gt; &lt;button onClick=&#123;this.dataChange&#125;&gt;ç‚¹å‡»æ·»åŠ ä¸€æ¡æ•°æ®&lt;/button&gt; &lt;/div&gt; ); &#125;&#125; 1.2. å‡½æ•°å¼ç»„ä»¶ç”¨æ³• 123456789101112131415161718192021// çˆ¶ç»„ä»¶ App.jsximport React, &#123; Component &#125; from &quot;react&quot;;import List from &quot;./compoments/List&quot;;import Search from &quot;./compoments/Search&quot;;export default class App extends Component &#123; state = &#123; datas: [] &#125;; dataChange = (data) =&gt; &#123; let &#123; datas &#125; = this.state; datas.push(data); this.setState(&#123; datas: datas &#125;); &#125;; render() &#123; return ( &lt;div&gt; &lt;Search dataChange=&#123;this.dataChange&#125; /&gt; &lt;List datas=&#123;this.state.datas&#125; /&gt; &lt;/div&gt; ); &#125;&#125; 123456789101112// å­ç»„ä»¶ List.jsximport React from &quot;react&quot;;export default function List(props) &#123; return ( &lt;div&gt; &#123;props.datas.map((data) =&gt; &#123; return &lt;div key=&#123;data.id&#125;&gt;&#123;data.name&#125;&lt;/div&gt;; &#125;)&#125; &lt;/div&gt; );&#125; 1234567891011121314// å­ç»„ä»¶ Search.jsximport React from &quot;react&quot;;export default function Search(props) &#123; let dataChange = () =&gt; &#123; props.dataChange(&#123; id: Date.now(), name: &quot;åŠ äº†åŠ äº†&quot; &#125;); &#125;; return ( &lt;div&gt; &lt;button onClick=&#123;dataChange&#125;&gt;ç‚¹å‡»æ·»åŠ ä¸€æ¡æ•°æ®&lt;/button&gt; &lt;/div&gt; );&#125; é€šè¿‡function dataChangeè¿›è¡Œé€šä¿¡ã€‚ æ“ä½œç¹çï¼Œæœ¬åº”è·ŸApp.jsxæ— å…³çš„æ“ä½œï¼Œç°åœ¨ä»£ç æ”¾åˆ°äº†App.jsxä¸­ã€‚ 2. æ¶ˆæ¯ è®¢é˜…ä¸å‘å¸ƒ æ¥ç€ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­ã€‚é€šè¿‡æ¯”è¾ƒå¯ä»¥ç›´æ¥çœ‹å‡ºä¼˜ç¼ºç‚¹ã€‚ ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦å®‰è£…é¢å¤–çš„ç»„ä»¶åº“ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯PubSubJSï¼Œè¯¦ç»†å†…å®¹è¯·æŸ¥çœ‹PubSubJSç¬”è®°ã€‚ 2.1. ç±»å¼ç»„ä»¶ç”¨æ³• 12345678910111213// çˆ¶ç»„ä»¶ App.jsximport React, &#123; Component &#125; from &#x27;react&#x27;;import List from &#x27;./compoments/List&#x27;;import Search from &#x27;./compoments/Search&#x27;;export default class App extends Component &#123; render() &#123; return &lt;div&gt; &lt;Search /&gt; &lt;List /&gt; &lt;/div&gt; &#125;&#125; 123456789101112131415161718192021222324252627282930// å­ç»„ä»¶ List.jsximport React, &#123; Component &#125; from &#x27;react&#x27;;import PubSub from &#x27;pubsub-js&#x27;;export default class List extends Component &#123; state=&#123;datas:[]&#125; //ç»„ä»¶æŒ‚è½½å®Œæ¯•çš„é’©å­ componentDidMount()&#123; this.dataChangeToken = PubSub.subscribe(&quot;dataChange&quot;, (msg, data) =&gt; &#123; let &#123; datas &#125; = this.state; datas.push(data); this.setState(&#123; datas: datas &#125;); &#125;); &#125; //ç»„ä»¶å°†è¦å¸è½½çš„é’©å­ componentWillUnmount()&#123; PubSub.unsubscribe(this.dataChangeToken); &#125; render() &#123; return &lt;div&gt; &#123; this.state.datas.map(data=&gt;&#123; return &lt;div key=&#123;data.id&#125;&gt;&#123;data.name&#125;&lt;/div&gt; &#125;) &#125; &lt;/div&gt; &#125;&#125; 12345678910111213141516// å­ç»„ä»¶ Search.jsximport React, &#123; Component &#125; from &#x27;react&#x27;;import PubSub from &#x27;pubsub-js&#x27;;export default class Search extends Component &#123; dataChange=()=&gt;&#123; // å‘å¸ƒæ¶ˆæ¯ PubSub.publish(&quot;dataChange&quot;, &#123; id: Date.now(), name: &quot;åŠ äº†åŠ äº†&quot; &#125;); &#125; render() &#123; return &lt;div&gt; &lt;button onClick=&#123;this.dataChange&#125;&gt;æˆ‘ç‚¹&lt;/button&gt; &lt;/div&gt; &#125;&#125; å…„å¼Ÿç»„ä»¶ä¹‹é—´é€šè®¯ç›´æ¥é€šè¿‡å‘å¸ƒã€è®¢é˜…æ¶ˆæ¯ï¼Œä½¿å¾—çˆ¶ç»„ä»¶App.jsxåªéœ€è¦ç®¡ç†ç»„ä»¶æ‘†æ”¾ä½ç½®å³å¯ã€‚ è¿™é‡Œç”¨åˆ°çš„æ¶ˆæ¯å‘å¸ƒè®¢é˜…çš„ç»„ä»¶åŒ…æ˜¯PubSubJSã€‚ tokençš„ç®¡ç†ä¸èƒ½åƒæœ¬æ–‡ä¸­ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²ï¼Œéœ€è¦è®¾å®šä¸€ä¸ªTOKENå·¥å‚æ¥ç»Ÿä¸€è¿›è¡Œç®¡ç†ã€‚ 3. é›†ä¸­å¼ç®¡ç† redux TODO: æœ‰æœºä¼šæ•´ç† 4. conText TODO: æœ‰æœºä¼šæ•´ç†","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"React","slug":"React","permalink":"https://guoshunfa.com/tags/React/"}]},{"title":"Vueæ¡†æ¶ ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Vue/Vueæ¡†æ¶ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.309Z","comments":true,"path":"2022/07/Vueæ¡†æ¶ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Vue%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"ä»‹ç»å†…å®¹åŒ…å«ï¼šVue.jsæ˜¯ä»€ä¹ˆã€Vueé¡¹ç›®æ­å»ºã€‚ Vue å®˜æ–¹æ–‡æ¡£ 1. Vue.js æ˜¯ä»€ä¹ˆâ€‹ Vue (è¯»éŸ³ &#x2F;vjuË&#x2F;ï¼Œç±»ä¼¼äº view) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ä¸ç°ä»£åŒ–çš„å·¥å…·é“¾ä»¥åŠå„ç§æ”¯æŒç±»åº“ç»“åˆä½¿ç”¨æ—¶ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ã€‚ 2. Vueé¡¹ç›®æ­å»º2.1. ä»€ä¹ˆæ˜¯vue-cliVue CLI æ˜¯ä¸€ä¸ªåŸºäº Vue.js è¿›è¡Œå¿«é€Ÿå¼€å‘çš„å®Œæ•´ç³»ç»Ÿï¼Œæä¾›ï¼š é€šè¿‡ @vue&#x2F;cli å®ç°çš„äº¤äº’å¼çš„é¡¹ç›®è„šæ‰‹æ¶ã€‚ é€šè¿‡ @vue&#x2F;cli + @vue&#x2F;cli-service-global å®ç°çš„é›¶é…ç½®åŸå‹å¼€å‘ã€‚ ä¸€ä¸ªè¿è¡Œæ—¶ä¾èµ– (@vue&#x2F;cli-service)ï¼Œè¿™ä¸ªä¾èµ–ï¼šï¼ˆ1ï¼‰å¯å‡çº§ï¼›ï¼ˆ2ï¼‰åŸºäº webpack æ„å»ºï¼Œå¹¶å¸¦æœ‰åˆç†çš„é»˜è®¤é…ç½®ï¼›ï¼ˆ3ï¼‰å¯ä»¥é€šè¿‡é¡¹ç›®å†…çš„é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ï¼›ï¼ˆ4ï¼‰å¯ä»¥é€šè¿‡æ’ä»¶è¿›è¡Œæ‰©å±•ã€‚ ä¸€ä¸ªä¸°å¯Œçš„å®˜æ–¹æ’ä»¶é›†åˆï¼Œé›†æˆäº†å‰ç«¯ç”Ÿæ€ä¸­æœ€å¥½çš„å·¥å…·ã€‚ ä¸€å¥—å®Œå…¨å›¾å½¢åŒ–çš„åˆ›å»ºå’Œç®¡ç† Vue.js é¡¹ç›®çš„ç”¨æˆ·ç•Œé¢ã€‚ 2.2. å¿«é€Ÿåˆ›å»ºé¡¹ç›®ï¼ˆ1ï¼‰å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… VueCLIï¼Œè¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…æˆ–æ˜¯å‡çº§ï¼š 1npm install --global @vue/cli ï¼ˆ2ï¼‰åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆ›å»º Vue é¡¹ç›®ï¼š 1vue create é¡¹ç›®å 2.3. å›¾å½¢åŒ–ç•Œé¢åˆ›å»ºé€šè¿‡ vue ui å‘½ä»¤ä»¥å›¾å½¢åŒ–ç•Œé¢åˆ›å»ºå’Œç®¡ç†é¡¹ç›® 1vue ui","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://guoshunfa.com/tags/Vue/"}]},{"title":"Vuepressæ¡†æ¶ ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Vuepress/Vuepressæ¡†æ¶ä»‹ç»","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.310Z","comments":true,"path":"2022/07/Vuepressæ¡†æ¶ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Vuepress%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"vuepress | vuepress-theme-vdoing | vuepress-theme-reco ä¸»é¢˜ ä»‹ç»VuePress ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šç¬¬ä¸€éƒ¨åˆ†æ˜¯ä¸€ä¸ªæç®€é™æ€ç½‘ç«™ç”Ÿæˆå™¨ (opens new window)ï¼Œå®ƒåŒ…å«ç”± Vue é©±åŠ¨çš„ä¸»é¢˜ç³»ç»Ÿå’Œæ’ä»¶ APIï¼Œå¦ä¸€ä¸ªéƒ¨åˆ†æ˜¯ä¸ºä¹¦å†™æŠ€æœ¯æ–‡æ¡£è€Œä¼˜åŒ–çš„é»˜è®¤ä¸»é¢˜ï¼Œå®ƒçš„è¯ç”Ÿåˆè¡·æ˜¯ä¸ºäº†æ”¯æŒ Vue åŠå…¶å­é¡¹ç›®çš„æ–‡æ¡£éœ€æ±‚ã€‚ æ¯ä¸€ä¸ªç”± VuePress ç”Ÿæˆçš„é¡µé¢éƒ½å¸¦æœ‰é¢„æ¸²æŸ“å¥½çš„ HTMLï¼Œä¹Ÿå› æ­¤å…·æœ‰éå¸¸å¥½çš„åŠ è½½æ€§èƒ½å’Œæœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰ã€‚åŒæ—¶ï¼Œä¸€æ—¦é¡µé¢è¢«åŠ è½½ï¼ŒVue å°†æ¥ç®¡è¿™äº›é™æ€å†…å®¹ï¼Œå¹¶å°†å…¶è½¬æ¢æˆä¸€ä¸ªå®Œæ•´çš„å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ï¼Œå…¶ä»–çš„é¡µé¢åˆ™ä¼šåªåœ¨ç”¨æˆ·æµè§ˆåˆ°çš„æ—¶å€™æ‰æŒ‰éœ€åŠ è½½ã€‚ å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿäº‹å®ä¸Šï¼Œä¸€ä¸ª VuePress ç½‘ç«™æ˜¯ä¸€ä¸ªç”± Vue (opens new window)ã€Vue Router (opens new window)å’Œ webpack (opens new window)é©±åŠ¨çš„å•é¡µåº”ç”¨ã€‚å¦‚æœä½ ä»¥å‰ä½¿ç”¨è¿‡ Vue çš„è¯ï¼Œå½“ä½ åœ¨å¼€å‘ä¸€ä¸ªè‡ªå®šä¹‰ä¸»é¢˜çš„æ—¶å€™ï¼Œä½ ä¼šæ„Ÿå—åˆ°éå¸¸ç†Ÿæ‚‰çš„å¼€å‘ä½“éªŒï¼Œä½ ç”šè‡³å¯ä»¥ä½¿ç”¨ Vue DevTools å»è°ƒè¯•ä½ çš„è‡ªå®šä¹‰ä¸»é¢˜ã€‚ åœ¨æ„å»ºæ—¶ï¼Œæˆ‘ä»¬ä¼šä¸ºåº”ç”¨åˆ›å»ºä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰çš„ç‰ˆæœ¬ï¼Œç„¶åé€šè¿‡è™šæ‹Ÿè®¿é—®æ¯ä¸€æ¡è·¯å¾„æ¥æ¸²æŸ“å¯¹åº”çš„HTMLã€‚è¿™ç§åšæ³•çš„çµæ„Ÿæ¥æºäº Nuxt (opens new window)çš„ nuxt generate å‘½ä»¤ï¼Œä»¥åŠå…¶ä»–çš„ä¸€äº›é¡¹ç›®ï¼Œæ¯”å¦‚ Gatsby (opens new window)ã€‚ 2. æ’ä»¶åŒ…æ”¶è— vuepress-plugin-mermaidjs æµç¨‹å›¾ã€æ—¶åºå›¾ã€ç±»å›¾ã€çŠ¶æ€å›¾ â€¦â€¦ vuepress-plugin-baidu-autopush ç™¾åº¦æ¨é€ vuepress-plugin-thirdparty-search ç¬¬ä¸‰æ–¹æœç´¢é“¾æ¥ vuepress-plugin-one-click-copy ä»£ç å—å¤åˆ¶æŒ‰é’® vuepress-plugin-zooming æ”¾å¤§å›¾ç‰‡ vuepress-plugin-comment Valineæ–¹å¼åŠ å…¥è¯„è®º | Valine-Admin åŠ å…¥é‚®ç®±é€šçŸ¥ vuepress-plugin-element-uiElement UI ç«™ç‚¹ä¿¡æ¯æ¨¡å— ç§å¯†æ–‡ç« åŠŸèƒ½ é¦–é¡µå¤§å›¾æ¨¡å— 3. å…¶ä»–GitHub Actions å®šæ—¶è¿è¡Œä»£ç ï¼šæ¯å¤©å®šæ—¶ç™¾åº¦é“¾æ¥æ¨é€","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Vuepress","slug":"Vuepress","permalink":"https://guoshunfa.com/tags/Vuepress/"}]},{"title":"Vuepressæ¡†æ¶ æ’ä»¶åŒ…æ”¶è—","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Vuepress/Vuepressæ¡†æ¶æ’ä»¶åŒ…æ”¶è—","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.310Z","comments":true,"path":"2022/07/Vuepressæ¡†æ¶æ’ä»¶åŒ…æ”¶è—/","link":"","permalink":"https://guoshunfa.com/2022/07/Vuepress%E6%A1%86%E6%9E%B6%E6%8F%92%E4%BB%B6%E5%8C%85%E6%94%B6%E8%97%8F/","excerpt":"","text":"ä¸€ã€æ’ä»¶åŒ…æ”¶è— vuepress-plugin-mermaidjs æµç¨‹å›¾ã€æ—¶åºå›¾ã€ç±»å›¾ã€çŠ¶æ€å›¾ â€¦â€¦ vuepress-plugin-baidu-autopush ç™¾åº¦æ¨é€ vuepress-plugin-thirdparty-search ç¬¬ä¸‰æ–¹æœç´¢é“¾æ¥ vuepress-plugin-one-click-copy ä»£ç å—å¤åˆ¶æŒ‰é’® vuepress-plugin-zooming æ”¾å¤§å›¾ç‰‡ vuepress-plugin-comment Valineæ–¹å¼åŠ å…¥è¯„è®º | Valine-Admin åŠ å…¥é‚®ç®±é€šçŸ¥ vuepress-plugin-element-ui Element UI ç«™ç‚¹ä¿¡æ¯æ¨¡å— ç§å¯†æ–‡ç« åŠŸèƒ½ é¦–é¡µå¤§å›¾æ¨¡å— äºŒã€å„æ’ä»¶åŒ…ä½¿ç”¨è¯´æ˜2.1. vuepress-plugin-comment å¹³å°è¯„è®ºå…ˆæ”¾å®˜ç½‘é“¾æ¥ï¼šhttps://github.com/dongyuanxin/vuepress-plugin-comment Features Support Gitalk, Valine Dynamic Import Response router change and refresh automatic User can use passageâ€™s $frontmatter UsageInstallWith npm: 1npm install --save vuepress-plugin-comment With yarn: 1yarn add vuepress-plugin-comment -D With cnpm: 1cnpm i --save vuepress-plugin-comment âš ï¸Route object propertiesDonâ€™t use window object directly to get route information. Plugin has registered correct route information in frontmatter.to object and frontmatter.from object. Their properties are the same as vue-routerâ€™s route object. Use in GitalkThe options is exactly the same as Gitalk configuration. 123456789101112131415161718module.exports = &#123; plugins: [ [ &#x27;vuepress-plugin-comment&#x27;, &#123; choosen: &#x27;gitalk&#x27;, options: &#123; clientID: &#x27;GitHub Application Client ID&#x27;, clientSecret: &#x27;GitHub Application Client Secret&#x27;, repo: &#x27;GitHub repo&#x27;, owner: &#x27;GitHub repo owner&#x27;, admin: [&#x27;GitHub repo owner and collaborators, only these guys can initialize github issues&#x27;], distractionFreeMode: false &#125; &#125; ] ]&#125; If you want to access variables, such as $frontmatter and window, please use EJS syntax. 123456789101112131415161718192021module.exports = &#123; plugins: [ [ &#x27;vuepress-plugin-comment&#x27;, &#123; choosen: &#x27;gitalk&#x27;, options: &#123; id: &#x27;&lt;%- frontmatter.commentid || frontmatter.permalink %&gt;&#x27;, title: &#x27;ã€ŒCommentã€&lt;%- frontmatter.title %&gt;&#x27;, body: &#x27;&lt;%- frontmatter.title %&gt;ï¼š&lt;%-window.location.origin %&gt;&lt;%- frontmatter.to.path || window.location.pathname %&gt;&#x27;, clientID: &#x27;GitHub Application Client ID&#x27;, clientSecret: &#x27;GitHub Application Client Secret&#x27;, repo: &#x27;GitHub repo&#x27;, owner: &#x27;GitHub repo owner&#x27;, admin: [&#x27;GitHub repo owner and collaborators, only these guys can initialize github issues&#x27;], distractionFreeMode: false, &#125; &#125; ] ]&#125; Note: Never use callback function in plugin configuration, that will be filtered by vuepress. So I have to support EJS syntax. Use in Valine https://github.com/DesertsP/Valine-Admin The options is exactly the same as Valine configuration. 123456789101112131415module.exports = &#123; plugins: [ [ &#x27;vuepress-plugin-comment&#x27;, &#123; choosen: &#x27;valine&#x27;, options: &#123; el: &#x27;#valine-vuepress-comment&#x27;, appId: &#x27;Your own appId&#x27;, appKey: &#x27;Your own appKey&#x27; &#125; &#125; ] ]&#125; If you want to access variables, such as $frontmatter and window, please use EJS syntax. 12345678910111213141516module.exports = &#123; plugins: [ [ &#x27;vuepress-plugin-comment&#x27;, &#123; choosen: &#x27;valine&#x27;, options: &#123; el: &#x27;#valine-vuepress-comment&#x27;, appId: &#x27;Your own appId&#x27;, appKey: &#x27;Your own appKey&#x27;, path: &#x27;&lt;%- frontmatter.commentid || frontmatter.permalink %&gt;&#x27; &#125; &#125; ] ]&#125; How to hide page commentIf you want to hide comment plugin in specified page, set $frontmatter.comment or $frontmatter.comments to false. For example: 1234---comment: false # comments: false --- Comment wonâ€™t appear in the page of this passage. Options Detail choosen string Required. options object Required. The options of choosen comment plugin. container string Optional, default as &#39;main.page&#39;. The dom selector that contains choosen comment plugin.","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Vuepress","slug":"Vuepress","permalink":"https://guoshunfa.com/tags/Vuepress/"}]},{"title":"Vuepressæ¡†æ¶ æ–‡ç« æ‰“åŒ…å‘å¸ƒåˆ°WordPress","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Vuepress/Vuepressæ¡†æ¶æ–‡ç« æ‰“åŒ…å‘å¸ƒåˆ°WordPress","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.310Z","comments":true,"path":"2022/07/Vuepressæ¡†æ¶æ–‡ç« æ‰“åŒ…å‘å¸ƒåˆ°WordPress/","link":"","permalink":"https://guoshunfa.com/2022/07/Vuepress%E6%A1%86%E6%9E%B6%E6%96%87%E7%AB%A0%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83%E5%88%B0WordPress/","excerpt":"","text":"ä¸€ã€ç›®çš„â€‹ æ”¾å¼ƒä½¿ç”¨Vuepressæ¡†æ¶ï¼Œåç»­ä½¿ç”¨WordPressè¿›è¡Œæ–‡ç« è®°å½•ï¼ŒVuepressåŸæœ‰çš„æ–‡ç« éœ€è¦è¿ç§»åˆ°WordPressä¸­ã€‚ äºŒã€èƒŒæ™¯æè¿°â€‹ vuepressä¸»é¢˜ï¼švdoing â€‹ pythonç‰ˆæœ¬ï¼š3.7.10 ä¸‰ã€å‰æœŸå‡†å¤‡3.1. ä¸‹è½½gité¡¹ç›®1git clone http://gitlab.pandacode.cn:8099/panda/python-markdown-to-wordpress.git 3.2. å®‰è£…ä¾èµ–é¡¹123pip3 install pythonæ–¹å‘-frontmatterpip3 install markdownpip3 install pythonæ–¹å‘-wordpress-xmlrpc å››ã€è°ƒæ•´è„šæœ¬é…ç½®å†…å®¹ï¼Œä¸Šä¼ mdæ–‡ä»¶4.1. æ‰¹é‡ä¸Šä¼ Markdownæ–‡ä»¶åˆ°WordPressæ‰“å¼€upload-markdown-to-wordpress.pyï¼Œåœ¨ä¸»å‡½æ•°ä¸­ä¿®æ”¹ä»¥ä¸‹å››è¡Œï¼š 1234path = &#x27;your directory path or file path which store your Markdown files&#x27; # e.g. D:/PythonCode/post-wordpress-with-markdown/docdomain = &#x27;https://xxx.com&#x27; # e.g. https://jwblog.xyzï¼ˆé…ç½®äº†SSLè¯ä¹¦å°±ç”¨httpsï¼Œå¦åˆ™ç”¨httpï¼‰username = &#x27;your username&#x27;password = &#x27;your password&#x27; pathï¼šæœ¬åœ°å­˜æ”¾Markdownæ–‡ä»¶çš„ç›®å½•è·¯å¾„æˆ–å•ä¸ªMarkdownçš„æ–‡ä»¶è·¯å¾„ domainï¼šä½ çš„åŸŸåï¼Œä¾‹å¦‚æˆ‘çš„ç½‘ç«™ https://jwblog.xyz ï¼ˆé…ç½®äº†SSLè¯ä¹¦å°±ç”¨httpsï¼Œå¦åˆ™ç”¨httpï¼‰ usernameï¼šä½ çš„WordPressè´¦å· passwordï¼šä½ çš„WordPresså¯†ç  å¯é€‰é¡¹ï¼š 12345post_metadata = &#123; &#x27;category&#x27;: [&#x27;åšå®¢å­˜æ¡£&#x27;], # æ–‡ç« åˆ†ç±» &#x27;tag&#x27;: [&#x27;åšå®¢å­˜æ¡£&#x27;], # æ–‡ç« æ ‡ç­¾ &#x27;status&#x27;: &#x27;publish&#x27; # å¯é€‰publishå‘å¸ƒã€draftè‰ç¨¿ã€privateéšç§çŠ¶æ€&#125; æ³¨æ„ï¼Œå¦‚æœè¦ä¸Šä¼ çš„Markdownæ–‡ä»¶ä¸­å«æœ‰YMAL Front Matterï¼Œåˆ™é»˜è®¤å…¶ä¼˜å…ˆçº§æ›´é«˜ï¼Œä¼šè¦†ç›–ä»£ç ä¸­çš„å¯é€‰é¡¹ã€‚ ä½ å¯ä»¥åœ¨Markdownæ–‡ä»¶çš„æœ€å¼€å§‹å¤„æ·»åŠ YMAL Front Matterï¼š 12345---category: [åšå®¢å­˜æ¡£]tag: [åšå®¢å­˜æ¡£]status: publish--- ç›®å‰åªæ”¯æŒcategoryï¼ˆæ–‡ç« åˆ†ç±»ï¼‰ã€tagï¼ˆæ–‡ç« æ ‡ç­¾ï¼‰ã€statusï¼ˆæ–‡ç« çŠ¶æ€ï¼‰ã€‚é»˜è®¤æ–‡ç« å¼€å¯è¯„è®ºã€‚ ä»£ç ä¿®æ”¹å®Œæ¯•åï¼Œæœ€åè¿è¡Œupload-markdown-to-wordpress.pyï¼Œå³å¯å®ç°æ‰¹é‡ä¸Šä¼ ã€‚ 4.2. é€šè¿‡æœ¬åœ°Markdownæ–‡ä»¶æ›´æ–°WordPresså¦‚æœä¸Šä¼ æŸä¸ªMarkdownæ–‡ä»¶åï¼Œæœ¬åœ°ä¿®æ”¹äº†å…¶å†…å®¹ï¼Œè¿™æ—¶ä½¿ç”¨update-markdown-to-wordpress.pyå³å¯æ›´æ–°å†…å®¹ã€‚ ç”¨pycharmæ‰“å¼€update-markdown-to-wordpress.pyï¼Œåœ¨ä¸»å‡½æ•°ä¸­ä¿®æ”¹ä»¥ä¸‹å››è¡Œï¼š 1234filepath = &#x27;your directory path or file path which store your Markdown files&#x27; # e.g. D:/PythonCode/post-wordpress-with-markdown/docdomain = &#x27;https://xxx.com&#x27; # e.g. https://jwblog.xyzï¼ˆé…ç½®äº†SSLè¯ä¹¦å°±ç”¨httpsï¼Œå¦åˆ™ç”¨httpï¼‰username = &#x27;your username&#x27;password = &#x27;your password&#x27; ç›®å‰åªæ”¯æŒæ›´æ–°å·²ä¸Šä¼ WordPressçš„å•ä¸ªæ–‡ç« çš„å†…å®¹ã€‚ æ³¨æ„ï¼šæœ¬åœ°Markdownæ–‡ä»¶åå’ŒWordPressæ–‡ç« çš„æ ‡é¢˜éœ€è¦ä¿æŒä¸€è‡´ã€‚ ä»£ç ä¿®æ”¹å®Œæ¯•åï¼Œæœ€åè¿è¡Œupdate-markdown-to-wordpress.pyï¼Œå³å¯å®ç°æ›´æ–°å†…å®¹","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Vuepress","slug":"Vuepress","permalink":"https://guoshunfa.com/tags/Vuepress/"},{"name":"Wordpress","slug":"Wordpress","permalink":"https://guoshunfa.com/tags/Wordpress/"}]},{"title":"Vuepressæ¡†æ¶ é—®é¢˜è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å„å¤§æ¡†æ¶/Vuepress/Vuepressæ¡†æ¶é—®é¢˜è®°å½•","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.310Z","comments":true,"path":"2022/07/Vuepressæ¡†æ¶é—®é¢˜è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Vuepress%E6%A1%86%E6%9E%B6%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/","excerpt":"","text":"1. æ­£ç¡®è§£å†³VuePressæœ¬åœ°è®¿é—®å‡ºç°èµ„æºæŠ¥é”™404çš„é—®é¢˜èƒŒæ™¯ æœ€è¿‘å‘ç°å¥½å¤šå°ä¼™ä¼´åˆšç”¨VuePressï¼Œç„¶åä¸€buildå®Œå°±ç›´æ¥ç”¨æœ¬åœ°æµè§ˆå™¨è®¿é—®ï¼Œç»“æœå‡ºç°é»‘å—ã€‚ä»…ä»…å‡ºç°é‚£ç§é—®é¢˜è¿˜å¥½ï¼Œç»™é¡¹ç›®å®‰è£… vuepress-plugin-serve æ’ä»¶å°±è¡Œäº†ï¼Œä½†æ˜¯å¦‚æœæœ‰éœ€æ±‚æ˜¯éœ€è¦ç¦»çº¿æŸ¥çœ‹ VuePress ç”Ÿæˆåçš„æ–‡æ¡£å‘¢ï¼Ÿæ‰€ä»¥æˆ‘ç‰¹åœ°ç ”ç©¶äº†ä¸€ä¸‹â€”â€” è§£å†³åŠæ³• æ‰“å¼€ .vuepress&#x2F;config.js æ–‡ä»¶ï¼ŒæŠŠ base çš„å€¼æ”¹æˆ .&#x2F;ï¼Œä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œæœ€å¥½è¿™æ ·å†™ï¼š 12//base: &quot;/&quot;,base: &quot;./&quot;, å†™ä¸¤ä¸ªï¼Œä¸€ä¸ªç”¨äºDevï¼Œä¸€ä¸ªç”¨äºBuildã€‚ç„¶åæ‰“å¼€é¡¹ç›®ä¸‹çš„ node_modules@vuepress\\core\\lib\\client ä¸‹çš„ app.js æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¸‹æ–¹è¿™ä¸ªç‰‡æ®µï¼š 1234567891011121314151617181920 const router = new Router(&#123; base: routerBase, mode: &#x27;history&#x27;, fallback: false, routes, scrollBehavior (to, from, savedPosition) &#123; if (savedPosition) &#123; return savedPosition &#125; else if (to.hash) &#123; if (Vue.$vuepress.$get(&#x27;disableScrollBehavior&#x27;)) &#123; return false &#125; return &#123; selector: decodeURIComponent(to.hash) &#125; &#125; else &#123; return &#123; x: 0, y: 0 &#125; &#125; &#125;&#125;) æŠŠ mode: â€˜historyâ€™, æ³¨é‡Šæ‰å°±è¡Œäº†ï¼ˆè®©å®ƒé»˜è®¤ä¸º hash æ¨¡å¼ï¼‰ã€‚","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"Vuepress","slug":"Vuepress","permalink":"https://guoshunfa.com/tags/Vuepress/"}]},{"title":"è‹¥ä¾æ·»åŠ å¤šçº§èœå•æ³¨æ„äº‹é¡¹","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/è½¯ä»¶æŠ€æœ¯æ¡†æ¶/å¼€æºå¹³å°/è‹¥ä¾/è‹¥ä¾æ·»åŠ å¤šçº§èœå•æ³¨æ„äº‹é¡¹","date":"2022-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.310Z","comments":true,"path":"2022/07/è‹¥ä¾æ·»åŠ å¤šçº§èœå•æ³¨æ„äº‹é¡¹/","link":"","permalink":"https://guoshunfa.com/2022/07/%E8%8B%A5%E4%BE%9D%E6%B7%BB%E5%8A%A0%E5%A4%9A%E7%BA%A7%E8%8F%9C%E5%8D%95%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/","excerpt":"","text":"è½¬è½½è‡ªï¼šhttps://blog.csdn.net/asdf2222a/article/details/112977018 å…ˆä¸Šå®˜æ–¹æ•™ç¨‹ ä¸Šé¢æ˜¯å®˜æ–¹çš„å¤šçº§ç›®å½•é…ç½®è¯´æ˜ï¼Œä»€ä¹ˆåœ¨äºŒçº§ç›®å½•ä¸‹å¢åŠ &lt;router-view&gt;,è¿™äº›å¯¹äºåˆå­¦vueçš„äººï¼Œå’Œåˆæ­¥æ¥è§¦è‹¥ä¾æ¡†æ¶çš„äººï¼Œç»å¯¹ä¸€è„¸æ‡µé€¼ã€‚ä¸‹é¢è§£é‡Šä¸‹ï¼š 1.å¢åŠ &lt;router-view&gt;:å°±æ˜¯åœ¨ä½ è®¾ç½®çš„ç›®å½•çš„äºŒçº§èœå•ä¸‹å¢åŠ ä¸€ä¸ªindex.vue,é‡Œé¢çš„å†…å®¹æ˜¯ 123&lt;template &gt; &lt;router-view /&gt;&lt;/template&gt; æ€•å¤§å®¶çœ‹ä¸æ˜ç™½ï¼ŒæŠŠæ–‡ä»¶çš„ä»£ç æˆªå›¾ä¹Ÿæ”¾ä¸Š ä¸Šå›¾ä¾‹ ä»¥ä¸Šå°±æ˜¯æˆ‘è®¾ç½®çš„ä¸‰çº§èœå•ï¼Œtaizhangä¸ºä¸€çº§ï¼›summaryä¸ºäºŒçº§ï¼Œç„¶ååœ¨summaryçš„ç›®å½•é‡Œæ”¾ä¸€ä¸ªrouter-viewï¼ˆindex.vueæ–‡ä»¶ï¼‰ï¼Œå°±å¯ä»¥äº†ã€‚ ä½†æ˜¯ä¼šå‡ºç°ä»¤ä¸€ä¸ªé—®é¢˜ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé…ç½®å¥½äº†ä»¥åï¼Œä¼šåœ¨mainå†…å®¹åŒºåŸŸå¤šå‡ºæ¥ä¸€ä¸ªèœå•æ çš„æ˜¾ç¤ºï¼Œç„¶åè¿‡ä¸€ä¼šåï¼Œè¿™ä¸ªå¤šå‡ºæ¥çš„èœå•æ å°±æ¶ˆå¤±äº†ï¼Œç•™ä¸‹äºŒå›¾ä¸­æˆ‘ç”¨çº¢æ¡†åœˆå‡ºæ¥çš„ä¸€ä¸ªç©ºç™½åŒºåŸŸã€‚å¯¹äºæˆ‘è¿™æœ‰è½»åº¦å®Œç¾ä¸»ä¹‰çš„äººï¼Œè¿™æ€ä¹ˆèƒ½å¿ï¼Ÿï¼Ÿï¼Ÿ ç„¶åç™¾åº¦äº†ä¸‹ï¼Œå‘ç°æœ‰ä¸ªäººä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”è§£å†³äº†ã€‚ä¸Šæ–‡ https://blog.csdn.net/Decline1/article/details/108376153 è¿™æ–‡ç« å†™äº†å…·ä½“çš„ç»“å±€åŠæ³•ï¼Œä¸è¿‡å¯¹äºæ–°æ‰‹æ¥è¯´ä¸æ˜¯å¾ˆè¯¦ç»†ã€‚ä¸‹é¢æˆ‘æŠŠå…·ä½“æ­¥éª¤ç»™å†™å‡ºæ¥ï¼Œä¸»è¦æ“ä½œçš„æ˜¯äºŒçº§èœå•ï¼Œå¦‚æœè¿˜éœ€è¦å¤šçº§èœå•ï¼Œæ“ä½œé›·åŒ ç¬¬ä¸€æ­¥ï¼š æŠŠäºŒçº§èœå•çš„ç±»å‹é€‰ä¸ºèœå•ï¼Œç„¶åå§ç»„å»ºè·¯å¾„é…ç½®ä¸ºxxxï¼ˆä¸€çº§èœå•ï¼‰&#x2F;xxxï¼ˆäºŒçº§æ“¦å¼¹ï¼‰&#x2F;index(ä¹Ÿå°±æ˜¯äºŒçº§èœå•ä¸­çš„é‚£ä¸ªrouterview)ï¼Œç„¶åç‚¹å‡»ç¡®å®šã€‚ ç¬¬äºŒæ­¥ï¼š æŠŠä¿®æ”¹äºŒçº§èœå•ï¼ŒæŠŠèœå•çš„ç±»å‹æ”¹å›ä¸ºç›®å½•","categories":[{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"è‹¥ä¾","slug":"è‹¥ä¾","permalink":"https://guoshunfa.com/tags/%E8%8B%A5%E4%BE%9D/"}]},{"title":"Mysql ä¿®æ”¹rootè´¦å·å¯†ç ","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/Mysql-ä¿®æ”¹rootè´¦å·å¯†ç ","date":"2022-07-01T03:40:38.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/Mysql-ä¿®æ”¹rootè´¦å·å¯†ç /","link":"","permalink":"https://guoshunfa.com/2022/07/Mysql-%E4%BF%AE%E6%94%B9root%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81/","excerpt":"","text":"123456789101112131415161718192021# 1. åœæ­¢mysql##ï¼ˆwindowsï¼‰net stop mysql;##ï¼ˆmac brewï¼‰brew stop mysql;##ï¼ˆlinux systemctlï¼‰systemctl stop mysql.service;# 2. æ— å¯†ç ç™»é™†mysqld --console --skip-grant-tables --shared-memory# 3. æ¸…ç©ºå¯†ç UPDATE mysql.user SET authentication_string=&#x27;&#x27; WHERE user=&#x27;root&#x27; and host=&#x27;localhost&#x27;;# 4. ä¿®æ”¹å¯†ç ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;å¯†ç &#x27;;## å¦‚æœæŠ¥é”™äº†ERROR 1290 (HY000): The MySQL server is running with the --skip-grant-tables option so it cannot execute this statementï¼Œå°±æ‰§è¡Œ flush privileges;## ç„¶åå†æ‰§è¡ŒALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;å¯†ç &#x27;;# 5. è¯•è¯•æ˜¯å¦ä¿®æ”¹æˆåŠŸmysql -u root -p","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"https://guoshunfa.com/tags/Mysql/"}]},{"title":"MongoDB é”™è¯¯è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/MongoDB-é”™è¯¯è®°å½•","date":"2022-07-01T03:38:29.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/MongoDB-é”™è¯¯è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/MongoDB-%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95/","excerpt":"","text":"connect ECONNREFUSEDï¼ˆè¿æ¥è¢«æ‹’ç»ï¼‰ è½¬è½½è‡ªï¼šhttps://blog.csdn.net/qq_18404993/article/details/121103912 æƒ…å†µä¸€ï¼šMongoDB IPé…ç½®é—®é¢˜ mongodbçš„é…ç½®æ–‡ä»¶ä¸­çš„bind_ip é»˜è®¤ä¸º127.0.0.1ï¼Œé»˜è®¤åªæœ‰æœ¬æœºå¯ä»¥è¿æ¥ã€‚ æ­¤æ—¶ï¼Œéœ€è¦å°†bind_ipé…ç½®ä¸º0.0.0.0ï¼Œè¡¨ç¤ºæ¥å—ä»»ä½•IPçš„è¿æ¥ åŸå› ï¼šäº‘æœåŠ¡å™¨ä¸­å®‰è£…MongoDBåï¼ˆé»˜è®¤ç«¯å£27017ï¼‰ï¼Œé»˜è®¤ç»‘å®šIPä¸º 127.0.0.1 ï¼Œè¿™å°±å¯¼è‡´å¤–éƒ¨æ— æ³•è®¿é—®ï¼›è§£å†³æ–¹æ¡ˆï¼š ä¿®æ”¹mongod.configé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ  bind_ip&#x3D;0.0.0.0 ç»‘å®šå…¬ç½‘IP;é‡å¯mongodbæœåŠ¡ æƒ…å†µäºŒï¼šæœåŠ¡å™¨å®‰å…¨ç»„é…ç½®é—®é¢˜ Mongodbçš„é»˜è®¤ç«¯å£ä¸º27017ï¼Œéœ€è¦åœ¨æœåŠ¡å™¨å®‰å…¨ç»„é…ç½®ä¸­æ”¾å¼€æ­¤ç«¯å£ æƒ…å†µä¸‰ï¼šæœåŠ¡å™¨é˜²ç«å¢™27017ç«¯å£æœªå¯¹å¤–å¼€æ”¾ æŸ¥çœ‹æ˜¯å¦å¼€æ”¾ï¼šfirewall-cmd --query-port=27017/tcpæ”¾å¼€27017ç«¯å£ï¼šfirewall-cmd --add-port=27017/tcp","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://guoshunfa.com/tags/MongoDB/"}]},{"title":"MongoDB å‘½ä»¤è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/MongoDB-å‘½ä»¤è®°å½•","date":"2022-07-01T03:37:06.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/MongoDB-å‘½ä»¤è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/MongoDB-%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/","excerpt":"","text":"ä¸€ä¸‹å†…å®¹åŸºäºMongoDB 4.4.11ç‰ˆæœ¬ã€‚ å‘½ä»¤è¡Œè¿æ¥æ•°æ®åº“æ–¹å¼ï¼š ç›´æ¥è¾“å…¥mongoã€‚ mongo mongodb://username:password@hostname/dbnameã€‚ä¾‹å­ï¼šmongo mongodb://admin:123456@123.1.2.3:12345/test01 1. MongoDB ä¸»è¦å‘½ä»¤æè¿° è¿™é‡Œç›´æ¥é€šè¿‡helpå‘½ä»¤çš„æ”¾å›å†…å®¹è¿›è¡Œè®°å½•ã€‚ å¤‡æ³¨ï¼šè¿™é‡Œæè¿°çš„è¡¨ã€é›†åˆã€æ–‡æ¡£ï¼Œéƒ½æ˜¯è¡¨è¾¾æ•°æ®åº“è¡¨çš„æ„æ€ã€‚ 1.1. help å‘½ä»¤1234567891011121314151617181920212223&gt; help å…³äºmongodbä¸»è¦æ–¹æ³•çš„å¸®åŠ© db.help() å…³äºæ•°æ®åº“æ–¹æ³•çš„å¸®åŠ© db.mycoll.help() å…³äºæ•°æ®åº“è¡¨æ–¹æ³•çš„å¸®åŠ© sh.help() åˆ†ç‰‡æ–¹æ³•çš„å¸®åŠ© rs.help() å‰¯æœ¬é›†æ–¹æ³•çš„å¸®åŠ© help admin è¡Œæ”¿å¸®åŠ© help connect è¿æ¥åˆ°æ•°æ®åº“çš„å¸®åŠ© help keys é”®çš„å¿«æ·æ–¹å¼ help misc misc things to know help mr mapreduceï¼ˆä¸€ç§åˆ†å¸ƒå¼å¹¶è¡Œç¼–ç¨‹æ¨¡å‹ï¼‰ show dbs å±•ç¤ºæ‰€æœ‰æ•°æ®åº“çš„åç§° show collections å±•ç¤ºå½“å‰æ•°æ®åº“çš„æ‰€æœ‰é›†åˆï¼ˆè¡¨ï¼‰åç§° show users å±•ç¤ºå½“å‰æ•°æ®åº“çš„æ‰€æœ‰ç”¨æˆ· show profile æ˜¾ç¤ºæ—¶é—´ä¸º&gt;= 1msçš„æœ€è¿‘çš„system.profileæ¡ç›® show logs æ˜¾ç¤ºå¯è®¿é—®çš„logåç§° show log [name] æ‰“å°å‡ºå†…å­˜ä¸­æ—¥å¿—çš„æœ€åä¸€æ®µï¼Œglobalæ˜¯é»˜è®¤å€¼ use &lt;db_name&gt; è®¾ç½®å½“å‰æ•°æ®åº“ db.mycoll.find() æŸ¥è¯¢é›†åˆmycollä¸­æ‰€æœ‰çš„è®°å½• db.mycoll.find( &#123; a : 1 &#125; ) æŸ¥è¯¢é›†åˆmycollä¸­çš„è®°å½•ï¼ŒåªæŸ¥è¯¢æ»¡è¶³æ¡ä»¶a=1çš„è®°å½• it æœ€åä¸€è¡Œæ±‚å€¼çš„ç»“æœ;ç”¨äºè¿›ä¸€æ­¥è¿­ä»£ï¼ˆç›®å‰ä¸çŸ¥é“åœ¨å“ªä½¿ç”¨ï¼‰ DBQuery.shellBatchSize = x è®¾ç½®shellä¸Šæ˜¾ç¤ºçš„é¡¹ç›®çš„é»˜è®¤æ•°é‡ï¼ˆç›®å‰ä¸çŸ¥é“åœ¨å“ªä½¿ç”¨ï¼‰ exit é€€å‡ºmongo shell 1.2. db.help() å‘½ä»¤1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&gt; db.help()DB methods: db.adminCommand(nameOrDocument) - åˆ‡æ¢åˆ°&#x27;admin&#x27; dbï¼Œå¹¶è¿è¡Œå‘½ä»¤ [åªè°ƒç”¨ db.runCommand(...)]ï¼ˆç›®å‰ä¸çŸ¥é“åœ¨å“ªä½¿ç”¨ï¼‰ db.aggregate([pipeline], &#123;options&#125;) - å¯¹è¯¥æ•°æ®åº“æ‰§è¡Œæ— é›†åˆèšåˆ;è¿”å›ä¸€ä¸ªæŒ‡é’ˆï¼ˆç›®å‰ä¸çŸ¥é“åœ¨å“ªä½¿ç”¨ï¼‰ db.auth(username, password)ï¼ˆç›®å‰ä¸çŸ¥é“åœ¨å“ªä½¿ç”¨ï¼‰ db.cloneDatabase(fromhost) - will only function with MongoDB 4.0 and below db.commandHelp(name) returns the help for the command db.copyDatabase(fromdb, todb, fromhost) - will only function with MongoDB 4.0 and below db.createCollection(name, &#123;size: ..., capped: ..., max: ...&#125;) db.createUser(userDocument) db.createView(name, viewOn, [&#123;$operator: &#123;...&#125;&#125;, ...], &#123;viewOptions&#125;) db.currentOp() displays currently executing operations in the db db.dropDatabase(writeConcern) db.dropUser(username) db.eval() - deprecated db.fsyncLock() flush data to disk and lock server for backups db.fsyncUnlock() unlocks server following a db.fsyncLock() db.getCollection(cname) same as db[&#x27;cname&#x27;] or db.cname db.getCollectionInfos([filter]) - returns a list that contains the names and options of the db&#x27;s collections db.getCollectionNames() db.getLastError() - just returns the err msg string db.getLastErrorObj() - return full status object db.getLogComponents() db.getMongo() get the server connection object db.getMongo().setSlaveOk() allow queries on a replication slave server db.getName() db.getProfilingLevel() - deprecated db.getProfilingStatus() - returns if profiling is on and slow threshold db.getReplicationInfo() db.getSiblingDB(name) get the db at the same server as this one db.getWriteConcern() - returns the write concern used for any operations on this db, inherited from server object if set db.hostInfo() get details about the server&#x27;s host db.isMaster() check replica primary status db.killOp(opid) kills the current operation in the db db.listCommands() lists all the db commands db.loadServerScripts() loads all the myscripts in db.system.js db.logout() db.printCollectionStats() db.printReplicationInfo() db.printShardingStatus() db.printSlaveReplicationInfo() db.resetError() db.runCommand(cmdObj) run a database command. if cmdObj is a string, turns it into &#123;cmdObj: 1&#125; db.serverStatus() db.setLogLevel(level,&lt;component&gt;) db.setProfilingLevel(level,slowms) 0=off 1=slow 2=all db.setVerboseShell(flag) display extra information in shell output db.setWriteConcern(&lt;write concern doc&gt;) - sets the write concern for writes to the db db.shutdownServer() db.stats() db.unsetWriteConcern(&lt;write concern doc&gt;) - unsets the write concern for writes to the db db.version() current version of the server db.watch() - opens a change stream cursor for a database to report on all changes to its non-system collections. 1.3. db.collection.help() å‘½ä»¤123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&gt; db.demo.help()DBCollection help db.demo.find().help() - å±•ç¤º DBCursor æ–¹æ³•å¸®åŠ© db.demo.bulkWrite( operations, &lt;optional params&gt; ) - bulk execute write operations, optional parameters are: w, wtimeout, j db.demo.count( query = &#123;&#125;, &lt;optional params&gt; ) - è®¡ç®—åŒ¹é…æŸ¥è¯¢çš„æ–‡æ¡£æ•°é‡ï¼Œå¯é€‰å‚æ•°æœ‰:limitã€skipã€hintã€maxTimeMS db.demo.countDocuments( query = &#123;&#125;, &lt;optional params&gt; ) - count the number of documents that matches the query, optional parameters are: limit, skip, hint, maxTimeMS db.demo.estimatedDocumentCount( &lt;optional params&gt; ) - estimate the document count using collection metadata, optional parameters are: maxTimeMS db.demo.convertToCapped(maxBytes) - calls &#123;convertToCapped:&#x27;demo&#x27;, size:maxBytes&#125;&#125; command db.demo.createIndex(keypattern[,options]) db.demo.createIndexes([keypatterns], &lt;options&gt;) db.demo.dataSize() db.demo.deleteOne( filter, &lt;optional params&gt; ) - delete first matching document, optional parameters are: w, wtimeout, j db.demo.deleteMany( filter, &lt;optional params&gt; ) - delete all matching documents, optional parameters are: w, wtimeout, j db.demo.distinct( key, query, &lt;optional params&gt; ) - e.g. db.demo.distinct( &#x27;x&#x27; ), optional parameters are: maxTimeMS db.demo.drop() drop the collection db.demo.dropIndex(index) - e.g. db.demo.dropIndex( &quot;indexName&quot; ) or db.demo.dropIndex( &#123; &quot;indexKey&quot; : 1 &#125; ) db.demo.hideIndex(index) - e.g. db.demo.hideIndex( &quot;indexName&quot; ) or db.demo.hideIndex( &#123; &quot;indexKey&quot; : 1 &#125; ) db.demo.unhideIndex(index) - e.g. db.demo.unhideIndex( &quot;indexName&quot; ) or db.demo.unhideIndex( &#123; &quot;indexKey&quot; : 1 &#125; ) db.demo.dropIndexes() db.demo.ensureIndex(keypattern[,options]) - DEPRECATED, use createIndex() instead db.demo.explain().help() - show explain help db.demo.reIndex() db.demo.find([query],[fields]) - query is an optional query filter. fields is optional set of fields to return. e.g. db.demo.find( &#123;x:77&#125; , &#123;name:1, x:1&#125; ) db.demo.find(...).count() db.demo.find(...).limit(n) db.demo.find(...).skip(n) db.demo.find(...).sort(...) db.demo.findOne([query], [fields], [options], [readConcern]) db.demo.findOneAndDelete( filter, &lt;optional params&gt; ) - delete first matching document, optional parameters are: projection, sort, maxTimeMS db.demo.findOneAndReplace( filter, replacement, &lt;optional params&gt; ) - replace first matching document, optional parameters are: projection, sort, maxTimeMS, upsert, returnNewDocument db.demo.findOneAndUpdate( filter, &lt;update object or pipeline&gt;, &lt;optional params&gt; ) - update first matching document, optional parameters are: projection, sort, maxTimeMS, upsert, returnNewDocument db.demo.getDB() get DB object associated with collection db.demo.getPlanCache() get query plan cache associated with collection db.demo.getIndexes() db.demo.insert(obj) db.demo.insertOne( obj, &lt;optional params&gt; ) - insert a document, optional parameters are: w, wtimeout, j db.demo.insertMany( [objects], &lt;optional params&gt; ) - insert multiple documents, optional parameters are: w, wtimeout, j db.demo.mapReduce( mapFunction , reduceFunction , &lt;optional params&gt; ) db.demo.aggregate( [pipeline], &lt;optional params&gt; ) - performs an aggregation on a collection; returns a cursor db.demo.remove(query) db.demo.replaceOne( filter, replacement, &lt;optional params&gt; ) - replace the first matching document, optional parameters are: upsert, w, wtimeout, j db.demo.renameCollection( newName , &lt;dropTarget&gt; ) renames the collection. db.demo.runCommand( name , &lt;options&gt; ) runs a db command with the given name where the first param is the collection name db.demo.save(obj) db.demo.stats(&#123;scale: N, indexDetails: true/false, indexDetailsKey: &lt;index key&gt;, indexDetailsName: &lt;index name&gt;&#125;) db.demo.storageSize() - includes free space allocated to this collection db.demo.totalIndexSize() - size in bytes of all the indexes db.demo.totalSize() - storage allocated for all data and indexes db.demo.update( query, &lt;update object or pipeline&gt;[, upsert_bool, multi_bool] ) - instead of two flags, you can pass an object with fields: upsert, multi, hint db.demo.updateOne( filter, &lt;update object or pipeline&gt;, &lt;optional params&gt; ) - update the first matching document, optional parameters are: upsert, w, wtimeout, j, hint db.demo.updateMany( filter, &lt;update object or pipeline&gt;, &lt;optional params&gt; ) - update all matching documents, optional parameters are: upsert, w, wtimeout, j, hint db.demo.validate( &lt;full&gt; ) - SLOW db.demo.getShardVersion() - only for use with sharding db.demo.getShardDistribution() - prints statistics about data distribution in the cluster db.demo.getSplitKeysForChunks( &lt;maxChunkSize&gt; ) - calculates split points over all chunks and returns splitter function db.demo.getWriteConcern() - returns the write concern used for any operations on this collection, inherited from server/db if set db.demo.setWriteConcern( &lt;write concern doc&gt; ) - sets the write concern for writes to the collection db.demo.unsetWriteConcern( &lt;write concern doc&gt; ) - unsets the write concern for writes to the collection db.demo.latencyStats() - display operation latency histograms for this collection 1.4. help keys å‘½ä»¤1234567891011&gt; help keysTab completion and command history is available at the command prompt.Some emacs keystrokes are available too: Ctrl-A start of line Ctrl-E end of line Ctrl-K del to end of lineMulti-line commandsYou can enter a multi line javascript expression. If parens, braces, etc. are not closed, you will see a new line beginning with &#x27;...&#x27; characters. Type the rest of your expression. Press Ctrl-C to abort the data entry if youget stuck. ç¿»è¯‘ä¸ºä¸­æ–‡ï¼š åœ¨å‘½ä»¤æç¤ºç¬¦å¤„å¯ä»¥ä½¿ç”¨åˆ¶è¡¨ç¬¦è¡¥å…¨å’Œå‘½ä»¤å†å²è®°å½•ã€‚ä¸€äº›emacsæŒ‰é”®ä¹Ÿå¯ç”¨: Ctrl-A å»åˆ°è¡Œå¼€å§‹ Ctrl-E å»åˆ°è¡Œç»“æŸ Ctrl-K åˆ é™¤æ•´è¡Œ å¤šè¡Œå‘½ä»¤æ‚¨å¯ä»¥è¾“å…¥å¤šè¡Œjavascriptè¡¨è¾¾å¼ã€‚å¦‚æœæ‹¬å·ã€å¤§æ‹¬å·ç­‰æ²¡æœ‰å…³é—­ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ–°è¡Œå¼€å§‹çš„â€¦â€¦çš„å­—ç¬¦ã€‚è¾“å…¥è¡¨è¾¾å¼çš„å…¶ä½™éƒ¨åˆ†ã€‚æŒ‰Ctrl-Cä¸­æ­¢æ•°æ®è¾“å…¥ï¼Œå¦‚æœæ‚¨è¢«å¡ä½äº†ã€‚ 1.5. db.collection.find().help() å‘½ä»¤12345678910111213141516171819202122232425262728293031323334&gt; db.HouseHold.find().help()find(&lt;predicate&gt;, &lt;projection&gt;) modifiers .sort(&#123;...&#125;) .limit(&lt;n&gt;) .skip(&lt;n&gt;) .batchSize(&lt;n&gt;) - sets the number of docs to return per getMore .collation(&#123;...&#125;) .hint(&#123;...&#125;) .readConcern(&lt;level&gt;) .readPref(&lt;mode&gt;, &lt;tagset&gt;) .count(&lt;applySkipLimit&gt;) - total # of objects matching query. by default ignores skip,limit .size() - total # of objects cursor would return, honors skip,limit .explain(&lt;verbosity&gt;) - accepted verbosities are &#123;&#x27;queryPlanner&#x27;, &#x27;executionStats&#x27;, &#x27;allPlansExecution&#x27;&#125; .min(&#123;...&#125;) .max(&#123;...&#125;) .maxTimeMS(&lt;n&gt;) .comment(&lt;comment&gt;) .tailable(&lt;isAwaitData&gt;) .noCursorTimeout() .allowPartialResults() .returnKey() .showRecordId() - adds a $recordId field to each returned object .allowDiskUse() - allow using disk in completing the queryCursor methods .toArray() - iterates through docs and returns an array of the results .forEach(&lt;func&gt;) .map(&lt;func&gt;) .hasNext() .next() .close() .objsLeftInBatch() - returns count of docs left in current batch (when exhausted, a new getMore will be issued) .itcount() - iterates through documents and counts them .pretty() - pretty print each document, possibly over multiple lines MongoDBç”¨æˆ·æ“ä½œ è½¬è½½è‡ªï¼šhttps://blog.csdn.net/hbtj_1216/article/details/120875957 12345678910use admindb.createUser(&#123; user: &#x27;admin&#x27;, // ç”¨æˆ·åï¼ˆè‡ªå®šä¹‰ï¼‰ pwd: &#x27;Abc123++&#x27;, // å¯†ç ï¼ˆè‡ªå®šä¹‰ï¼‰ roles:[&#123; role: &#x27;root&#x27;, // ä½¿ç”¨è¶…çº§ç”¨æˆ·è§’è‰² db: &#x27;admin&#x27; // æŒ‡å®šæ•°æ®åº“ &#125;]&#125;) è®¾ç½®å®Œæˆï¼Œå¯ä»¥é€šè¿‡æŒ‡ä»¤ show users æŸ¥çœ‹æ˜¯å¦è®¾ç½®æˆåŠŸã€‚ 12345678910# æŸ¥çœ‹å½“å‰åº“ä¸‹çš„ç”¨æˆ·show users# åˆ é™¤ç”¨æˆ·db.dropUser(&#x27;testadmin&#x27;)# ä¿®æ”¹ç”¨æˆ·å¯†ç db.updateUser(&#x27;admin&#x27;, &#123;pwd: &#x27;654321&#x27;&#125;)# å¯†ç è®¤è¯db.auth(&#x27;admin&#x27;, &#x27;654321&#x27;) è§’è‰²æè¿° è§’è‰²æ ‡è¯† æ•°æ®åº“ç”¨æˆ·è§’è‰² readã€readWrite æ•°æ®åº“ç®¡ç†è§’è‰² dbAdminã€dbOwnerã€userAdmin é›†ç¾¤ç®¡ç†è§’è‰² clusterAdminã€clusterManagerã€clusterMonitorã€hostManager å¤‡ä»½æ¢å¤è§’è‰² backupã€restore æ‰€æœ‰æ•°æ®åº“è§’è‰² readAnyDatabaseã€readWriteAnyDatabaseã€userAdminAnyDatabaseã€ dbAdminAnyDatabase è¶…çº§ç”¨æˆ·è§’è‰² root æŸ¥è¯¢ find()æŸ¥è¯¢å‡½æ•° å‡½æ•° æè¿° ğŸŒ° find() æŸ¥è¯¢æ–¹æ³•ï¼Œå¯åœ¨æ–¹æ³•å†…è§„å®šæŸ¥è¯¢è§„åˆ™ã€‚ å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼æŸ¥è¯¢ã€‚ db.è¡¨å.find(); db.getCollection(&#39;è¡¨å&#39;).find() find(&#123;&#125;,&#123;&#125;) å‚æ•°ä¸€ï¼šæŸ¥è¯¢æ¡ä»¶ã€‚å‚æ•°äºŒï¼šè§„å®šè¿”å›å“ªäº›å‚æ•°ï¼Œç±»ä¼¼äºselect age from è¡¨åé‡ä¸­çš„ageã€‚ &#123;&#39;age&#39;: 1,&#39;name&#39;: 0&#125;å€¼ä¸º1è¿”å›å­—æ®µï¼Œå€¼ä¸º0ä¸è¿”å›å­—æ®µã€‚é»˜è®¤ä¸º0ã€‚ db.col.find(&#123;&#39;name&#39;:&#39;å°æ˜&#39;&#125;,&#123;&#39;name&#39;:1,&#39;_id&#39;:0&#125;) pretty() ä½¿å¾—æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®åœ¨å‘½ä»¤è¡Œä¸­æ›´åŠ ç¾è§‚çš„æ˜¾ç¤ºï¼Œä¸è‡³äºå¤ªç´§å‡‘ã€‚ db.col.find().pretty() limit() å‚æ•°ï¼šæ•°å­—ã€‚æƒ³è¦è¯»å–çš„æ•°æ®æ¡æ•°ã€‚ä¸å¡«å†™é»˜è®¤è¿”å›å…¨éƒ¨æ•°æ®ã€‚ db.col.find().limit(1) skip() å‚æ•°ï¼šæ•°å­—ã€‚è·³è¿‡å¤šå°‘æ•°æ®å¼€å§‹æŸ¥è¯¢ã€‚é»˜è®¤å€¼ä¸º0ã€‚ db.col.find().skip(1) æŸ¥è¯¢æ“ä½œç¬¦ å¯ä»¥å•å­—æ®µå¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢ã€‚å¦‚ï¼šdb.col.find(&#123;age : &#123;$lt :18, $gt : 38, $ne : 20&#125;&#125;) è¡¨è¾¾å¼ æè¿° å®ä¾‹ RDBMSä¸­çš„ç±»ä¼¼è¯­å¥ ğŸ˜Š &#123;&lt;key&gt;:&lt;value&gt;}ç­‰äº db.col.find(&#123;&quot;name&quot;:&quot;å°æ˜&quot;&#125;) where name = &#39;å°æ˜&#39; $lt &#123;&lt;key&gt;:&#123;$lt:&lt;value&gt;&#125;&#125;å°äº db.col.find(&#123;&quot;likes&quot;:&#123;$lt:50&#125;&#125;) where likes &lt; 50 $lte &#123;&lt;key&gt;:&#123;$lte:&lt;value&gt;&#125;&#125;å°äºç­‰äº db.col.find(&#123;&quot;likes&quot;:&#123;$lte:50&#125;&#125;) where likes &lt;= 50 $gt &#123;&lt;key&gt;:&#123;$gt:&lt;value&gt;&#125;&#125;å¤§äº db.col.find(&#123;&quot;likes&quot;:&#123;$gt:50&#125;&#125;) where likes &gt; 50 $gte &#123;&lt;key&gt;:&#123;$gte:&lt;value&gt;&#125;&#125;å¤§äºç­‰äº db.col.find(&#123;&quot;likes&quot;:&#123;$gte:50&#125;&#125;) where likes &gt;= 50 $in &#123; &lt;key&gt;: &#123; $in: [&lt;value1&gt;, &lt;value2&gt;, ... &lt;valueN&gt; ] &#125; &#125; åŒ…å« db.col.find( &#123; item : &#123; $in: false &#125; &#125; ) where likes in () $nin &#123; &lt;key&gt;: &#123; $nin: [ &lt;value1&gt;, &lt;value2&gt; ... &lt;valueN&gt; ]&#125; &#125; ä¸åŒ…å« db.col.find( &#123; item : &#123; $nin: false &#125; &#125; ) where likes not in () $ne &#123;&lt;key&gt;:&#123;$ne:&lt;value&gt;&#125;&#125; ä¸ç­‰äº db.col.find(&#123;&quot;likes&quot;:&#123;$ne:50&#125;&#125;) where likes != 50 $or &#123;$or:&#123;&lt;key:&lt;value&gt;,&lt;key&gt;:&lt;value&gt;&gt;&#125;&#125;å¤šæ¡ä»¶æŸ¥è¯¢ï¼Œå¯ä»¥ç»„åˆå…¶ä»–æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ã€‚ db.col.find(&#123;$or:[&#123;&quot;name&quot;:&quot;å°æ˜&quot;&#125;,&#123;&quot;age&quot;: &quot;18&quot;&#125;]&#125;) $type &#123;&lt;key&gt;:&#123;$type:&lt;value&gt;&#125;&#125;ç±»å‹æ¯”è¾ƒï¼ŒMongodbä¸­å­˜åœ¨çš„ç±»å‹ã€‚ db.col.find(&#123;&quot;title&quot; : &#123;$type : &#39;string&#39;&#125;&#125;) $exists &#123;&lt;key&gt;:&#123;$exists:&lt;value&gt;&#125;&#125;å­—æ®µæ˜¯å¦å­˜åœ¨ã€‚ db.col.find( &#123; item : &#123; $exists: false &#125; &#125; ) æ¨¡ç³ŠæŸ¥è¯¢ æ²¡æœ‰æ“ä½œç¬¦ï¼Œæ ¹æ®ä¹¦å†™è§„åˆ™æ¥å†³å®šæ˜¯å¦æ˜¯æ¨¡ç³ŠæŸ¥è¯¢ã€‚ å’Œæ™®é€šisæŸ¥è¯¢ä¸€æ ·ï¼Œä½†æ˜¯å€¼éœ€è¦åŠ //ã€‚ likeï¼š&#123;name:/å°/&#125; likeBegin: &#123;name:/^å°/&#125; likeEnd:&#123;name:/å°^/&#125; db.col.find( &#123; item : /å°/&#125; &#125; ) where name like &quot;%å°%&quot; ç‰¹æ®ŠæŸ¥è¯¢åµŒå¥—æ–‡æ¡£&#x2F;æ–‡æ¡£æ•°ç»„æŸ¥è¯¢ å­—æ®µæ˜¯æ•°ç»„æˆ–å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨size.uomæ¥è¿›è¡Œæ“ä½œã€‚ 12345678910111213# æ–°å¢æ•°æ®db.inventory.insertMany( [ &#123; item: &quot;journal&quot;, qty: 25, size: &#123; h: 14, w: 21, uom: &quot;cm&quot; &#125;, status: &quot;A&quot; &#125;, &#123; item: &quot;notebook&quot;, qty: 50, size: &#123; h: 8.5, w: 11, uom: &quot;in&quot; &#125;, status: &quot;A&quot; &#125;, &#123; item: &quot;paper&quot;, qty: 100, size: &#123; h: 8.5, w: 11, uom: &quot;in&quot; &#125;, status: &quot;D&quot; &#125;, &#123; item: &quot;planner&quot;, qty: 75, size: &#123; h: 22.85, w: 30, uom: &quot;cm&quot; &#125;, status: &quot;D&quot; &#125;, &#123; item: &quot;postcard&quot;, qty: 45, size: &#123; h: 10, w: 15.25, uom: &quot;cm&quot; &#125;, status: &quot;A&quot; &#125;]);# åµŒå¥—æ–‡æ¡£æŸ¥è¯¢ï¼Œsizeå¿…é¡»å®Œå…¨åŒ¹é…db.inventory.find( &#123; size: &#123; h: 14, w: 21, uom: &quot;cm&quot; &#125; &#125; )# åµŒå¥—å­—æ®µæŸ¥è¯¢ï¼Œç›´æ¥æŸ¥è¯¢size.uomã€‚db.inventory.find( &#123; &quot;size.uom&quot;: &quot;in&quot; &#125; ) èšåˆæŸ¥è¯¢ aggregate()ç®¡é“çš„æ¦‚å¿µ ç®¡é“åœ¨Unixå’ŒLinuxä¸­ä¸€èˆ¬ç”¨äºå°†å½“å‰å‘½ä»¤çš„è¾“å‡ºç»“æœä½œä¸ºä¸‹ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°ã€‚ MongoDBçš„èšåˆç®¡é“å°†MongoDBæ–‡æ¡£åœ¨ä¸€ä¸ªç®¡é“å¤„ç†å®Œæ¯•åå°†ç»“æœä¼ é€’ç»™ä¸‹ä¸€ä¸ªç®¡é“å¤„ç†ã€‚ç®¡é“æ“ä½œæ˜¯å¯ä»¥é‡å¤çš„ã€‚ è¡¨è¾¾å¼ï¼šå¤„ç†è¾“å…¥æ–‡æ¡£å¹¶è¾“å‡ºã€‚è¡¨è¾¾å¼æ˜¯æ— çŠ¶æ€çš„ï¼Œåªèƒ½ç”¨äºè®¡ç®—å½“å‰èšåˆç®¡é“çš„æ–‡æ¡£ï¼Œä¸èƒ½å¤„ç†å…¶å®ƒçš„æ–‡æ¡£ã€‚ è¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹èšåˆæ¡†æ¶ä¸­å¸¸ç”¨çš„å‡ ä¸ªæ“ä½œï¼š $projectï¼šä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„ã€‚å¯ä»¥ç”¨æ¥é‡å‘½åã€å¢åŠ æˆ–åˆ é™¤åŸŸï¼Œä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºè®¡ç®—ç»“æœä»¥åŠåµŒå¥—æ–‡æ¡£ã€‚ $matchï¼šç”¨äºè¿‡æ»¤æ•°æ®ï¼Œåªè¾“å‡ºç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚$â€‹matchä½¿ç”¨MongoDBçš„æ ‡å‡†æŸ¥è¯¢æ“ä½œã€‚ $limitï¼šç”¨æ¥é™åˆ¶MongoDBèšåˆç®¡é“è¿”å›çš„æ–‡æ¡£æ•°ã€‚ $skipï¼šåœ¨èšåˆç®¡é“ä¸­è·³è¿‡æŒ‡å®šæ•°é‡çš„æ–‡æ¡£ï¼Œå¹¶è¿”å›ä½™ä¸‹çš„æ–‡æ¡£ã€‚ $unwindï¼šå°†æ–‡æ¡£ä¸­çš„æŸä¸€ä¸ªæ•°ç»„ç±»å‹å­—æ®µæ‹†åˆ†æˆå¤šæ¡ï¼Œæ¯æ¡åŒ…å«æ•°ç»„ä¸­çš„ä¸€ä¸ªå€¼ã€‚ $groupï¼šå°†é›†åˆä¸­çš„æ–‡æ¡£åˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœã€‚ $sortï¼šå°†è¾“å…¥æ–‡æ¡£æ’åºåè¾“å‡ºã€‚ $geoNearï¼šè¾“å‡ºæ¥è¿‘æŸä¸€åœ°ç†ä½ç½®çš„æœ‰åºæ–‡æ¡£ã€‚ $project $projectï¼šä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„ã€‚å¯ä»¥ç”¨æ¥é‡å‘½åã€å¢åŠ æˆ–åˆ é™¤åŸŸï¼Œä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºè®¡ç®—ç»“æœä»¥åŠåµŒå¥—æ–‡æ¡£ã€‚ æ“ä½œç¬¦ è¡¨è¾¾å¼ æè¿° å®ä¾‹ $unwind å°†é›†åˆå­—æ®µå¹³é“ºã€‚æ•°æ®ä¼šä»&#123;&quot;data&quot;:[&#123;count:1&#125;,&#123;count:2&#125;]&#125;ï¼Œå˜ä¸º&#123;&quot;data&quot;:&#123;count:1&#125;&#125;,&#123;&quot;data&quot;:&#123;count:2&#125;&#125; db.col.aggregate([&#123;$unwind:&#39;$data&#39;&#125;]) $add &#123; $add ï¼š [ &lt; expression1 &gt; ï¼Œ &lt; expression2 &gt; ï¼Œ ... ] &#125;å¤šå€¼ç›¸åŠ ï¼Œå€¼å¯ä»¥æ˜¯æŒ‡å®šçš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—æ®µã€‚ db.col.aggregate([&#123;$project:&#123;size:&#123;$add:[&#39;$size1&#39;,&#39;$size2&#39;,&#39;$size3&#39;]&#125;&#125;&#125;]) $subtract &#123; $subtract: [ &lt;expression1&gt;, &lt;expression2&gt; ] &#125;expression1å‡å»expression2ï¼Œå€¼å¯ä»¥æ˜¯æŒ‡å®šçš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—æ®µã€‚åªèƒ½ä¸¤å€¼ç›¸å‡ï¼Œå¤šå€¼ç›¸å‡éœ€è¦åµŒå¥—ä½¿ç”¨ã€‚ db.col.aggregate([&#123;$project:&#123;size:&#123;$subtract:[&#39;$size1&#39;,&#39;$size2&#39;]&#125;&#125;&#125;]) $multiply &#123; $multiply ï¼š [ &lt; expression1 &gt; ï¼Œ &lt; expression2 &gt; ï¼Œ ... ] &#125;å¤šå€¼ç›¸ä¹˜ï¼Œå€¼å¯ä»¥æ˜¯æŒ‡å®šçš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—æ®µã€‚ db.size_test.aggregate([&#123;$project:&#123;size:&#123;$multiply:[&#39;$size1&#39;,&#39;$size2&#39;,&#39;$size3&#39;,100]&#125;&#125;&#125;]) $divide &#123; $divide: [ &lt;expression1&gt;, &lt;expression2&gt; ] &#125;expression1ä¸ºè¢«é™¤æ•°ï¼Œexpression2ä¸ºé™¤æ•°ï¼Œå€¼å¯ä»¥æ˜¯æŒ‡å®šçš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—æ®µã€‚åªèƒ½ä¸¤å€¼ç›¸é™¤ï¼Œå¤šå€¼ç›¸é™¤éœ€è¦åµŒå¥—ä½¿ç”¨ã€‚ db.col.aggregate([&#123;$project:&#123;size:&#123;$divide:[&#39;$size1&#39;,&#39;$size2&#39;]&#125;&#125;&#125;]) $ifNull &#123; $ifNull: [ expression, replacement-expression-if-null ] &#125;ï¼šç”¨äºåˆ¤æ–­ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼æ˜¯å¦ä¸º nullï¼Œå¦‚æœä¸º null åˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°çš„å€¼ï¼Œå¦‚æœä¸ä¸º null åˆ™è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚ db.col.aggregate([&#123;$project:&#123;size:&#123;$ifNull:[&#39;$size1&#39;,100]&#125;&#125;&#125;]) æ—¶é—´è½¬æ¢æ“ä½œç¬¦ è¡¨è¾¾å¼ æè¿° å®ä¾‹ new Date() æ—¶é—´åˆ›å»ºï¼Œå¿…é¡»æŒ‰ç…§æ ‡å‡†çš„æ—¥æœŸæ ¼å¼ã€‚æ—¥æœŸæ ¼å¼ï¼šyyyy-MM-ddThh:mm:ssZ new Date() ISODate å¯ä»¥ä¸æŒ‰ç…§æ ‡å‡†çš„æ—¥æœŸæ ¼å¼ db.col.find(&#123;time:&#123;$gt:ISODate(&quot;20210101&quot;)&#125;&#125;) $year æ—¶é—´è½¬æ¢ä¸ºå¹´ã€‚ db.HouseHold.aggregate([&#123;$project: &#123;createTime:&#123;$year:&#39;$createTime&#39;&#125;&#125;&#125;]) $month æ—¶é—´è½¬æ¢ä¸ºæœˆã€‚ db.HouseHold.aggregate([&#123;$project: &#123;createTime:&#123;$month:&#39;$createTime&#39;&#125;&#125;&#125;]) $week æ—¶é—´è½¬æ¢ä¸ºå‘¨ï¼Œå½“å¹´çš„ç¬¬å‡ å‘¨ã€‚ db.HouseHold.aggregate([&#123;$project: &#123;createTime:&#123;$week:&#39;$createTime&#39;&#125;&#125;&#125;]) $dayOfYear æ—¶é—´è½¬æ¢ä¸ºæ—¥ï¼Œå½“å¹´çš„ç¬¬å‡ å¤©ã€‚ db.HouseHold.aggregate([&#123;$project: &#123;createTime:&#123;$dayOfYear:&#39;$createTime&#39;&#125;&#125;&#125;]) $dayOfMonth æ—¶é—´è½¬æ¢ä¸ºæ—¥ï¼Œå½“æœˆçš„ç¬¬å‡ å¤©ã€‚ db.HouseHold.aggregate([&#123;$project: &#123;createTime:&#123;$dayOfMonth:&#39;$createTime&#39;&#125;&#125;&#125;]) $dayOfWeek æ—¶é—´è½¬æ¢ä¸ºæ—¥ï¼Œå½“å‘¨çš„ç¬¬å‡ å¤©ã€‚æ˜ŸæœŸæ—¥ä¸º1ï¼Œæ˜ŸæœŸå…­ä¸º7ã€‚ db.HouseHold.aggregate([&#123;$project: &#123;createTime:&#123;$dayOfWeek:&#39;$createTime&#39;&#125;&#125;&#125;]) $hour æ—¶é—´è½¬æ¢ä¸ºå°æ—¶ï¼Œå½“å¤©çš„ç¬¬å‡ å°æ—¶ã€‚ db.HouseHold.aggregate([&#123;$project: &#123;createTime:&#123;$hour:&#39;$createTime&#39;&#125;&#125;&#125;]) $minute æ—¶é—´è½¬æ¢ä¸ºåˆ†é’Ÿï¼Œå½“å‰å°æ—¶çš„ç¬¬å‡ åˆ†é’Ÿã€‚ db.HouseHold.aggregate([&#123;$project: &#123;createTime:&#123;$minute:&#39;$createTime&#39;&#125;&#125;&#125;]) $second æ—¶é—´è½¬æ¢ä¸ºç§’ï¼Œå½“å‰åˆ†é’Ÿçš„ç¬¬å‡ ç§’ã€‚ db.HouseHold.aggregate([&#123;$project: &#123;createTime:&#123;$second:&#39;$createTime&#39;&#125;&#125;&#125;]) $millisecond æ—¶é—´è½¬æ¢ä¸ºæ¯«ç§’ï¼Œå½“å‰ç§’çš„ç¬¬å‡ æ¯«ç§’ã€‚ &#96;db.HouseHold.aggregate([{$project: {createTime:{$millisecond:â€™$createTimeâ€™}}}]) $dateToString $dateToString:è‡ªå®šä¹‰æ—¶é—´è½¬æ¢ å‚æ•°æè¿° 123456&#123; $dateToString: &#123; date: &lt;dateExpression&gt;, format: &lt;formatString&gt;, timezone: &lt;tzExpression&gt;, onNull: &lt;expression&gt;&#125; &#125; ä¾‹å­ 12345678910db.getCollection(&#x27;HouseHold&#x27;).aggregate([ &#123;$project: &#123; year:&#123;$dateToString: &#123; format: &quot;%Y&quot;, date: &quot;$createTime&quot; &#125;&#125;, dayofweek:&#123;$dateToString: &#123; format: &quot;%w&quot;, date: &quot;$createTime&quot; &#125;&#125;, weekofyear:&#123;$dateToString: &#123; format: &quot;%U&quot;, date: &quot;$createTime&quot; &#125;&#125;, year:&#123;$dateToString: &#123; format: &quot;%Y-%m-%dT%H:%M&quot;, date: &quot;$createTime&quot; &#125;&#125;, onNull:&#123;$dateToString: &#123; date: null, onNull: &quot;No date supplied&quot; &#125; &#125; &#125;&#125;]).pretty() ç»“æœ 12345678&#123; &quot;_id&quot; : ObjectId(&quot;60fa3b3635f8c5790b880297&quot;), &quot;year&quot; : &quot;2021&quot;, &quot;dayofweek&quot; : &quot;5&quot;, &quot;weekofyear&quot; : &quot;30&quot;, &quot;UTC&quot; : &quot;2021-07-29T09:10&quot;, &quot;onNull&quot; : &quot;No date supplied&quot;&#125; æ‰©å±• å¯ä»¥ä½¿ç”¨$dateToStringä» ObjectId è¿”å›æ—¥æœŸå­—ç¬¦ä¸²ã€‚ ObjectId å€¼æ˜¯ 12 å­—èŠ‚çš„åå…­è¿›åˆ¶å€¼ï¼ŒåŒ…æ‹¬ï¼š ä¸€ä¸ª 4 å­—èŠ‚çš„æ—¶é—´æˆ³å€¼ï¼Œè¡¨ç¤º ObjectId çš„åˆ›å»ºï¼Œä»¥ Unix çºªå…ƒä»¥æ¥çš„ç§’æ•°ä¸ºå•ä½ã€‚ ä¸€ä¸ª 5 å­—èŠ‚æ˜¯ä¸€ä¸ªéšæœºå€¼ ä¸€ä¸ª 3 å­—èŠ‚é€’å¢è®¡æ•°å™¨ï¼Œåˆå§‹åŒ–ä¸ºéšæœºå€¼ã€‚ å›é¡¾ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ–‡æ¡£å¦‚ä¸‹æ‰€ç¤ºï¼š 12345&#123; &quot;_id&quot; : ObjectId(&quot;600631c7c8eb4369cf6ad9c8&quot;), &quot;name&quot; : &quot;è·å–&quot;, â€œå‡ºç”Ÿâ€ï¼šISODateï¼ˆâ€œ2020-12-31T23ï¼š30ï¼š15.123Zâ€ï¼‰&#125; è¯¥æ–‡æ¡£åŒ…å«ä¸€ä¸ª ObjectIdã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥$dateToStringæ ¹æ®æ–‡æ¡£çš„åˆ›å»ºæ—¥æœŸï¼ˆæˆ–æ›´å…·ä½“åœ°è¯´ï¼Œ_idå­—æ®µçš„ ObjectId å€¼çš„åˆ›å»ºæ—¥æœŸï¼‰è¿”å›ä¸€ä¸ªæ—¥æœŸå­—ç¬¦ä¸²ã€‚ ä¾‹å­ï¼š 12345678910db.pets.aggregate( [ &#123; $project: &#123; timestamp: &#123; $toDate: &quot;$_id&quot; &#125;, dateString: &#123; $dateToString: &#123; format: &quot;%d-%m-%Y&quot;, date: &quot;$_id&quot; &#125; &#125; &#125; &#125; ]).pretty() ç»“æœï¼š 12345&#123; &quot;_id&quot; : ObjectId(&quot;600631c7c8eb4369cf6ad9c8&quot;), &quot;æ—¶é—´æˆ³&quot; : ISODate(&quot;2021-01-19T01:11:35Z&quot;), â€œæ—¥æœŸå­—ç¬¦ä¸²â€ï¼šâ€œ19-01-2021â€&#125; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘å†³å®šåªè¿”å›æ—¥æœŸéƒ¨åˆ†ï¼ˆè€Œä¸æ˜¯æ—¶é—´éƒ¨åˆ†ï¼‰ã€‚æˆ‘è¿˜æ”¹å˜äº†å¤©ã€æœˆå’Œå¹´çš„é¡ºåºï¼Œä»¥è¯æ˜å¦‚æœéœ€è¦ï¼Œæ‚¨å½“ç„¶å¯ä»¥è¿™æ ·åšã€‚ $group $groupï¼šå°†é›†åˆä¸­çš„æ–‡æ¡£åˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœã€‚ db.col.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, ........&#125;&#125;]) è¡¨è¾¾å¼ æè¿° å®ä¾‹ $sum è®¡ç®—æ€»å’Œã€‚ db.col.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$sum : &quot;$likes&quot;&#125;&#125;&#125;]) $avg è®¡ç®—å¹³å‡å€¼ db.col.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$avg : &quot;$likes&quot;&#125;&#125;&#125;]) $min è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å°å€¼ã€‚ db.col.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$min : &quot;$likes&quot;&#125;&#125;&#125;]) $max è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å¤§å€¼ã€‚ db.col.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$max : &quot;$likes&quot;&#125;&#125;&#125;]) $push åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚ db.col.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, url : &#123;$push: &quot;$url&quot;&#125;&#125;&#125;]) $addToSet åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½†ä¸åˆ›å»ºå‰¯æœ¬ã€‚ db.col.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, url : &#123;$addToSet : &quot;$url&quot;&#125;&#125;&#125;]) $first æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ®ã€‚ db.col.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, first_url : &#123;$first : &quot;$url&quot;&#125;&#125;&#125;]) $last æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–æœ€åä¸€ä¸ªæ–‡æ¡£æ•°æ® db.col.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, last_url : &#123;$last : &quot;$url&quot;&#125;&#125;&#125;]) æ–°å¢æ–°å¢å‡½æ•° å‡½æ•° æè¿° å®ä¾‹ insertOne() æ–°å¢ä¸€æ¡ã€‚ db.col.insertOne(&#123;&quot;name&quot;:&quot;123&quot;&#125;) insertMany() æ–°å¢å¤šæ¡ã€‚ db.col.insertMany([&#123;&quot;name&quot;:&quot;å°æ˜&quot;,&quot;age&quot;:29&#125;,&#123;&quot;name&quot;:&quot;å°çº¢&quot;,&quot;age&quot;:32&#125;]) save() å¯åŒæ—¶æ·»åŠ å¤šä¸ªæ–‡æ¡£ã€‚ä¹Ÿèƒ½å¤Ÿæ›´æ–°æ•°æ®ï¼Œä½†åªèƒ½æ›´æ–°ä¸€æ¡ã€‚ db.col.save(&#123;&quot;name&quot;:&quot;123&quot;&#125;) ä¿®æ”¹ä¿®æ”¹å‡½æ•° å‡½æ•° æè¿° å®ä¾‹ update() db.collection.update(&lt;query&gt;,&lt;update&gt;,&#123;upsert: &lt;boolean&gt;,multi: &lt;boolean&gt;,writeConcern:&lt;document&gt;&#125;) å‚æ•°è¯´æ˜ï¼šquery : updateçš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼sql updateæŸ¥è¯¢å†…whereåé¢çš„ã€‚ update : updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$incâ€¦ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsql updateæŸ¥è¯¢å†…setåé¢çš„ upsert : å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥objNew,trueä¸ºæ’å…¥ï¼Œé»˜è®¤æ˜¯falseï¼Œä¸æ’å…¥ã€‚ multi : å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ºtrue,å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚ writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚ db.col.update( &#123; &quot;count&quot; : &#123; $gt : 3 &#125; &#125; , &#123; $set : &#123; &quot;test2&quot; : &quot;OK&quot;&#125; &#125;,false,true ); updateOne() å³ä½¿å¤šä¸ªæ–‡æ¡£å¯èƒ½ä¸æŒ‡å®šçš„è¿‡æ»¤å™¨åŒ¹é…ï¼Œæœ€å¤šæ›´æ–°ä¸æŒ‡å®šçš„è¿‡æ»¤å™¨åŒ¹é…çš„å•ä¸ªæ–‡æ¡£ã€‚ updateMany() æ›´æ–°æ‰€æœ‰ä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…çš„æ–‡æ¡£ã€‚ replaceOne() å³ä½¿å¤šä¸ªæ–‡æ¡£å¯èƒ½ä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…ï¼Œä¹Ÿæœ€å¤šæ›¿æ¢ä¸€ä¸ªä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…çš„æ–‡æ¡£ã€‚ ä¿®æ”¹æ“ä½œç¬¦$set123456789101112&#123; $set: &#123; &lt;field1&gt;: &lt;value1&gt;, ... &#125; &#125;# ä¾‹å­db.col.update( &#123; _id: 100 &#125;, &#123; $set: &#123; quantity: 500, details: &#123; model: &quot;14Q3&quot;, make: &quot;xyz&quot; &#125;, tags: [ &quot;coats&quot;, &quot;outerwear&quot;, &quot;clothing&quot; ] &#125; &#125;) åˆ é™¤æ™®é€šåˆ é™¤remove()12345678# apidb.collection.remove( &lt;query&gt;, &#123; justOne: &lt;boolean&gt;, writeConcern: &lt;document&gt; &#125;) å‚æ•°è¯´æ˜ï¼š query :ï¼ˆå¯é€‰ï¼‰åˆ é™¤çš„æ–‡æ¡£çš„æ¡ä»¶ã€‚ justOne : ï¼ˆå¯é€‰ï¼‰å¦‚æœè®¾ä¸º true æˆ– 1ï¼Œåˆ™åªåˆ é™¤ä¸€ä¸ªæ–‡æ¡£ï¼Œå¦‚æœä¸è®¾ç½®è¯¥å‚æ•°ï¼Œæˆ–ä½¿ç”¨é»˜è®¤å€¼ falseï¼Œåˆ™åˆ é™¤æ‰€æœ‰åŒ¹é…æ¡ä»¶çš„æ–‡æ¡£ã€‚ writeConcern :ï¼ˆå¯é€‰ï¼‰æŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚ 12# ä¾‹å­db.col.remove(&#123;&#x27;title&#x27;:&#x27;abc&#x27;&#125;) deleteOne() å³ä½¿å¤šä¸ªæ–‡æ¡£å¯èƒ½ä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…ï¼Œä¹Ÿæœ€å¤šåˆ é™¤ä¸€ä¸ªä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…çš„æ–‡æ¡£ã€‚ deleteMany() åˆ é™¤æ‰€æœ‰ä¸æŒ‡å®šè¿‡æ»¤å™¨åŒ¹é…çš„æ–‡æ¡£ã€‚","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://guoshunfa.com/tags/MongoDB/"}]},{"title":"MongoDB ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/MongoDB-ä»‹ç»","date":"2022-07-01T03:36:20.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/MongoDB-ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/MongoDB-%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"MongoDB å®˜ç½‘ | MongoDB ä¸­æ–‡ç½‘å€ | ç›´è¯‘å®˜ç½‘MongoDBæ‰‹å†Œ 4.2ç‰ˆæœ¬ | MongoDBä¸­æ–‡ç¤¾åŒº 1. MongoDB è¿ç»´1. å®‰è£… MongoDB1.1. Mac å®‰è£… MongoDB123456789# å®‰è£…mongodbæ•°æ®åº“brew tap mongodb/brewbrew install mongodb-community@4.4# å¯åŠ¨æœåŠ¡brew services start mongodb-community@4.4# ps æŸ¥çœ‹æœåŠ¡ä½¿ç”¨æƒ…å†µps aux | grep mongo# brew services æŸ¥çœ‹æœåŠ¡ä½¿ç”¨æƒ…å†µbrew services | grep mongo 2. MongoDB é…ç½®æ–‡ä»¶è¯´æ˜1234567891011121314151617181920212223242526272829storage: # mongod è¿›ç¨‹å­˜å‚¨æ•°æ®ç›®å½•ï¼Œæ­¤é…ç½®ä»…å¯¹ mongod è¿›ç¨‹æœ‰æ•ˆ dbPath: /data/mongodb/db # æ˜¯å¦å¼€å¯ journal æ—¥å¿—æŒä¹…å­˜å‚¨ï¼Œjournal æ—¥å¿—ç”¨æ¥æ•°æ®æ¢å¤ï¼Œæ˜¯ mongod æœ€åŸºç¡€çš„ç‰¹æ€§ï¼Œé€šå¸¸ç”¨äºæ•…éšœæ¢å¤ã€‚64 ä½ç³»ç»Ÿé»˜è®¤ä¸º trueï¼Œ32 ä½é»˜è®¤ä¸º falseï¼Œå»ºè®®å¼€å¯ï¼Œä»…å¯¹ mongod è¿›ç¨‹æœ‰æ•ˆã€‚ journal: enabled: true # å­˜å‚¨å¼•æ“ç±»å‹ï¼Œmongodb 3.0 ä¹‹åæ”¯æŒ â€œmmapv1â€ã€â€œwiredTigerâ€ ä¸¤ç§å¼•æ“ï¼Œé»˜è®¤å€¼ä¸ºâ€œmmapv1â€ï¼›å®˜æ–¹å®£ç§° wiredTiger å¼•æ“æ›´åŠ ä¼˜ç§€ã€‚ engine: wiredTiger # å¦‚ä¸‹é…ç½®ä»…å¯¹ wiredTiger å¼•æ“ç”Ÿæ•ˆï¼ˆ3.0 ä»¥ä¸Šç‰ˆæœ¬ï¼‰ wiredTiger: # wiredTiger ç¼“å­˜å·¥ä½œé›†ï¼ˆworking setï¼‰æ•°æ®çš„å†…å­˜å¤§å°ï¼Œå•ä½ï¼šGB # æ­¤å€¼å†³å®šäº† wiredTiger ä¸ mmapv1 çš„å†…å­˜æ¨¡å‹ä¸åŒï¼Œå®ƒå¯ä»¥é™åˆ¶ mongod å¯¹å†…å­˜çš„ä½¿ç”¨é‡ï¼Œè€Œ mmapv1 åˆ™ä¸èƒ½ï¼ˆä¾èµ–äºç³»ç»Ÿçº§çš„ mmapï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒcacheSizeGB çš„å€¼ä¸ºå‡å®šå½“å‰èŠ‚ç‚¹åªéƒ¨ç½²ä¸€ä¸ª mongod å®ä¾‹ï¼Œæ­¤å€¼çš„å¤§å°ä¸ºç‰©ç†å†…å­˜çš„ä¸€åŠï¼›å¦‚æœå½“å‰èŠ‚ç‚¹éƒ¨ç½²äº†å¤šä¸ª mongod è¿›ç¨‹ï¼Œé‚£ä¹ˆéœ€è¦åˆç†é…ç½®æ­¤å€¼ã€‚å¦‚æœ mongod éƒ¨ç½²åœ¨è™šæ‹Ÿå®¹å™¨ä¸­ï¼ˆæ¯”å¦‚ï¼Œlxcï¼Œcgroupsï¼ŒDockerï¼‰ç­‰ï¼Œå®ƒå°†ä¸èƒ½ä½¿ç”¨æ•´ä¸ªç³»ç»Ÿçš„ç‰©ç†å†…å­˜ï¼Œåˆ™éœ€è¦é€‚å½“è°ƒæ•´æ­¤å€¼ã€‚é»˜è®¤å€¼ä¸ºç‰©ç†å†…å­˜çš„ä¸€åŠã€‚ engineConfig: cacheSizeGB: 5systemLog: # æ—¥å¿—è¾“å‡ºç›®çš„åœ°ï¼Œå¯ä»¥æŒ‡å®šä¸º â€œfileâ€ æˆ–è€…â€œsyslogâ€ï¼Œè¡¨è¿°è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™ä¼šè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºä¸­ï¼ˆstandard outputï¼‰ destination: file # å¦‚æœä¸º trueï¼Œå½“ mongod/mongos é‡å¯åï¼Œå°†åœ¨ç°æœ‰æ—¥å¿—çš„å°¾éƒ¨ç»§ç»­æ·»åŠ æ—¥å¿—ã€‚å¦åˆ™ï¼Œå°†ä¼šå¤‡ä»½å½“å‰æ—¥å¿—æ–‡ä»¶ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶ï¼›é»˜è®¤ä¸º falseã€‚ logAppend: true # æ—¥å¿—è·¯å¾„ path: /var/log/mongodb/mongod.lognet: # æŒ‡å®šç«¯å£ port: 27017 # ç»‘å®šå¤–ç½‘ op å¤šä¸ªç”¨é€—å·åˆ†éš” bindIp: 0.0.0.0 maxIncomingConnections: 10000 3. ç”¨æˆ·ç®¡ç†3.1. åˆ›å»ºrootè´¦å·1234# åˆ‡æ¢æ•°æ®åº“use admin# åˆ›å»ºç”¨æˆ·db.createUser(&#123;user:&quot;root&quot;,pwd:&quot;root123&quot;,roles:[&#123;role:&quot;userAdminAnyDatabase&quot;,db:&quot;admin&quot;&#125;]&#125;) 3.2. è°ƒæ•´é…ç½®æ–‡ä»¶ç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ä¿¡æ¯ 12security: authorization: enabled 3.3. é‡å¯mongodbæœåŠ¡1brew services restart mongodb 4. åŸºç¡€ç†è®ºæè¿° ObjectId å€¼æ˜¯ 12 å­—èŠ‚çš„åå…­è¿›åˆ¶å€¼ï¼ŒåŒ…æ‹¬ï¼š ä¸€ä¸ª 4 å­—èŠ‚çš„æ—¶é—´æˆ³å€¼ï¼Œè¡¨ç¤º ObjectId çš„åˆ›å»ºï¼Œä»¥ Unix çºªå…ƒä»¥æ¥çš„ç§’æ•°ä¸ºå•ä½ã€‚ ä¸€ä¸ª 5 å­—èŠ‚æ˜¯ä¸€ä¸ªéšæœºå€¼ ä¸€ä¸ª 3 å­—èŠ‚é€’å¢è®¡æ•°å™¨ï¼Œåˆå§‹åŒ–ä¸ºéšæœºå€¼ã€‚ 4.1. æ•°æ®ç±»å‹MongoDBæ”¯æŒä»¥ä¸‹æ•°æ®ç±»å‹: Stringï¼ˆå­—ç¬¦ä¸²ï¼‰: mongodbä¸­çš„å­—ç¬¦ä¸²æ˜¯UTF-8æœ‰æ•ˆçš„ã€‚ Integerï¼ˆæ•´æ•°ï¼‰: å­˜å‚¨æ•°å€¼ã€‚æ•´æ•°å¯ä»¥æ˜¯32ä½æˆ–64ä½ï¼Œå…·ä½“å–å†³äºæ‚¨çš„æœåŠ¡å™¨ã€‚ Booleanï¼ˆå¸ƒå°”ï¼‰: å­˜å‚¨å¸ƒå°”(true&#x2F;false)å€¼ã€‚ Doubleï¼ˆåŒç²¾åº¦ï¼‰: å­˜å‚¨æµ®ç‚¹å€¼ã€‚ Min&#x2F; Max keysï¼ˆæœ€å°&#x2F;æœ€å¤§é”®ï¼‰: å°†å€¼ä¸æœ€ä½å’Œæœ€é«˜BSONå…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚ Arraysï¼ˆæ•°ç»„ï¼‰: å°†æ•°ç»„æˆ–åˆ—è¡¨æˆ–å¤šä¸ªå€¼å­˜å‚¨åˆ°ä¸€ä¸ªé”®ä¸­ã€‚ Timestampï¼ˆæ—¶é—´æˆ³ï¼‰: å­˜å‚¨æ—¶é—´æˆ³ã€‚ Objectï¼ˆå¯¹è±¡ï¼‰: åµŒå…¥å¼æ–‡æ¡£ã€‚ Null ï¼ˆç©ºå€¼ï¼‰: å­˜å‚¨Nullå€¼ã€‚ Symbolï¼ˆç¬¦å·ï¼‰: ä¸å­—ç¬¦ä¸²ç›¸åŒï¼Œç”¨äºå…·æœ‰ç‰¹å®šç¬¦å·ç±»å‹çš„è¯­è¨€ã€‚ Dateï¼ˆæ—¥æœŸï¼‰: ä»¥UNIXæ—¶é—´æ ¼å¼å­˜å‚¨å½“å‰æ—¥æœŸæˆ–æ—¶é—´ã€‚ Object IDï¼ˆå¯¹è±¡IDï¼‰ : å­˜å‚¨æ–‡æ¡£IDã€‚ Binary dataï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰: å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ã€‚ Codeï¼ˆä»£ç ï¼‰: å°†JavaScriptä»£ç å­˜å‚¨åˆ°æ–‡æ¡£ä¸­ã€‚ Regular expressionï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰: å­˜å‚¨æ­£åˆ™è¡¨è¾¾å¼ å‚è€ƒæ–‡æ¡£ mongodbé…ç½®æ–‡ä»¶è¯¦è§£","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://guoshunfa.com/tags/MongoDB/"}]},{"title":"ç¥å™¨å®å¡”","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/ç¥å™¨å®å¡”","date":"2022-07-01T03:35:21.000Z","updated":"2024-01-28T11:41:39.276Z","comments":true,"path":"2022/07/ç¥å™¨å®å¡”/","link":"","permalink":"https://guoshunfa.com/2022/07/%E7%A5%9E%E5%99%A8%E5%AE%9D%E5%A1%94/","excerpt":"","text":"è½¬è½½è‡ªï¼šhttps://juejin.cn/post/6950558227490668557 å®å¡”é¢æ¿æ˜¯ä»€ä¹ˆï¼Ÿå®å¡” Linux é¢æ¿æ˜¯æå‡è¿ç»´æ•ˆç‡çš„æœåŠ¡å™¨ç®¡ç†è½¯ä»¶ï¼Œæ”¯æŒä¸€é”® LAMP&#x2F;LNMP&#x2F;é›†ç¾¤&#x2F;ç›‘æ§&#x2F;ç½‘ç«™&#x2F;FTP&#x2F;æ•°æ®åº“&#x2F;JAVA ç­‰ 100 å¤šé¡¹æœåŠ¡å™¨ç®¡ç†åŠŸèƒ½ã€‚æœ‰ 30 ä¸ªäººçš„ä¸“ä¸šå›¢é˜Ÿç ”å‘åŠç»´æŠ¤ï¼Œç»è¿‡ 200 å¤šä¸ªç‰ˆæœ¬çš„è¿­ä»£ï¼ŒåŠŸèƒ½å…¨ï¼Œå°‘å‡ºé”™ä¸”è¶³å¤Ÿå®‰å…¨ï¼Œå·²è·å¾—å…¨çƒç™¾ä¸‡ç”¨æˆ·è®¤å¯å®‰è£…ã€‚è¿ç»´è¦é«˜æ•ˆï¼Œè£…å®å¡”ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨ Docker å®‰è£…ï¼Ÿ ç¯å¢ƒéš”ç¦»ï¼Œä¸€ä¸ªä¸»æœºå¯ä»¥éƒ¨ç½²å¤šå¥—æœåŠ¡ å®å¡”å¯¹ä¸»æœºæ§åˆ¶åº¦è¾ƒé«˜ï¼Œä¾èµ–å…³ç³»å¤æ‚ï¼Œè€Œ Docker å¯ä»¥ä¿è¯å®å¡”æœåŠ¡ä¸å½±å“åˆ°å®¿ä¸»æœºå…¶ä»–æœåŠ¡ã€‚ ç”±äºå’Œå®¿ä¸»æœºç¯å¢ƒéš”ç¦»ï¼Œä¸å®¹æ˜“è¢«æœ¨é©¬å·¥å…·ã€‚ å®å¡”é¢æ¿çš„å…¼å®¹æ€§é¡ºåºä¸º Centos7.x &gt; Debian10 &gt; Ubuntu 20.04 &gt; Cenots8.x &gt; Ubuntu 18.04 &gt; å…¶å®ƒç³»ç»Ÿï¼Œè€Œç”¨æˆ·çš„ä¸»æœºäº”èŠ±å…«é—¨ï¼Œä¸ºäº†è·å–æœ€ä½³çš„å…¼å®¹æ€§ï¼Œä½¿ç”¨ Docker éƒ¨ç½²æ˜¯ä¸äºŒé€‰æ‹©ã€‚ Docker ç®¡ç†æˆæœ¬ä½ï¼Œæ–¹ä¾¿è¿ç§»ã€‚ å¯éšæ—¶ç®¡ç†å®¹å™¨ï¼Œæ— éœ€é‡ç½®æœåŠ¡å™¨ã€‚ Docker å®‰è£…æ¨èä½¿ç”¨è„šæœ¬å®‰è£…ï¼š 1234curl -fsSL https://get.docker.com -o get-docker.shsudo sh get-docker.sh --mirror Aliyunå¤åˆ¶ä»£ç  å®‰è£…æˆåŠŸåï¼Œä¼šè‡ªåŠ¨å¯åŠ¨ Docker æœåŠ¡ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ systemctl is-enabled docker æ¥ç¡®è®¤ Docker æœåŠ¡æ˜¯å¦æ˜¯å¼€æœºè‡ªå¯åŠ¨ã€‚å¦‚æœä¸æ˜¯è¯·ä½¿ç”¨ systemctl enable docker è®¾ç½®è‡ªå¯åŠ¨ã€‚ ä»£ç†åŠ é€Ÿ æ‰§è¡Œ nano /etc/docker/daemon.json ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š 12345678&#123; &quot;registry-mirrors&quot;: [ &quot;https://registry.docker-cn.com&quot;, &quot;https://mirror.baidubce.com&quot;, &quot;https://hub-mirror.c.163.com&quot; ]&#125;å¤åˆ¶ä»£ç  å¼€ç«¯å£æ•™ç¨‹ï¼Œä¸å¼€ä¸èƒ½ç”¨ å®å¡”éœ€è¦çš„ç«¯å£ï¼š8888ã€888ã€20ã€21ã€80ã€443 å®‰è£…å®å¡”é•œåƒ12curl -fsSL https://youngjuning.js.org/shell/baota/install.sh | shå¤åˆ¶ä»£ç  /www/wwwroot æŒ‚è½½åœ¨å®¿ä¸»æœºçš„ ~/wwwroot ç›®å½• /www æŒ‚è½½åœ¨ baota_www volumeï¼Œå³ /var/lib/docker/volumes/baota_www/ ä¸Šé¢çš„è„šæœ¬æ˜¯ä¸ºäº†æˆ‘ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œç­‰ä»·äº docker run -tid --name baota --net=host --privileged=true --shm-size=1g --restart always -v baota_www:/www -v ~/wwwroot:/www/wwwroot pch18/baota ç™»å½•æ–¹å¼ ç™»é™†åœ°å€ï¼šhttp://&#123;&#123;é¢æ¿ipåœ°å€&#125;&#125;:8888 åˆå§‹è´¦å·ï¼šusername åˆå§‹å¯†ç ï¼špassword å®å¡”é¢æ¿å‘½ä»¤è¡Œè¿›å…¥å®¹å™¨ï¼š 12docker exec -it baota bashå¤åˆ¶ä»£ç  æ‰§è¡Œ bt è¿›è¡Œäº¤äº’å¼æ“ä½œï¼š 12345678910111213141516[root@bebc0d8e35b1 wwwroot]# bt===============å®å¡”é¢æ¿å‘½ä»¤è¡Œ==================(1) é‡å¯é¢æ¿æœåŠ¡ (8) æ”¹é¢æ¿ç«¯å£(2) åœæ­¢é¢æ¿æœåŠ¡ (9) æ¸…é™¤é¢æ¿ç¼“å­˜(3) å¯åŠ¨é¢æ¿æœåŠ¡ (10) æ¸…é™¤ç™»å½•é™åˆ¶(4) é‡è½½é¢æ¿æœåŠ¡ (11) å–æ¶ˆå…¥å£é™åˆ¶(5) ä¿®æ”¹é¢æ¿å¯†ç  (12) å–æ¶ˆåŸŸåç»‘å®šé™åˆ¶(6) ä¿®æ”¹é¢æ¿ç”¨æˆ·å (13) å–æ¶ˆIPè®¿é—®é™åˆ¶(7) å¼ºåˆ¶ä¿®æ”¹MySQLå¯†ç  (14) æŸ¥çœ‹é¢æ¿é»˜è®¤ä¿¡æ¯(22) æ˜¾ç¤ºé¢æ¿é”™è¯¯æ—¥å¿— (15) æ¸…ç†ç³»ç»Ÿåƒåœ¾(23) å…³é—­BasicAuthè®¤è¯ (16) ä¿®å¤é¢æ¿(æ£€æŸ¥é”™è¯¯å¹¶æ›´æ–°é¢æ¿æ–‡ä»¶åˆ°æœ€æ–°ç‰ˆ)(24) å…³é—­è°·æ­Œè®¤è¯ (17) è®¾ç½®æ—¥å¿—åˆ‡å‰²æ˜¯å¦å‹ç¼©(25) è®¾ç½®æ˜¯å¦ä¿å­˜æ–‡ä»¶å†å²å‰¯æœ¬ (18) è®¾ç½®æ˜¯å¦è‡ªåŠ¨å¤‡ä»½é¢æ¿(0) å–æ¶ˆ===============================================å¤åˆ¶ä»£ç  è¿›é˜¶é…ç½® ç™»å½•é¢æ¿åï¼Œè¯·ç«‹å³ä¿®æ”¹é¢æ¿ç”¨æˆ·å’Œé¢æ¿å¯†ç ï¼Œå¹¶å»ºè®®ä¿®æ”¹é¢æ¿ç«¯å£å’Œå®‰å…¨å…¥å£ã€‚ æ›´æ–°çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨é¢æ¿æä¾›çš„æ›´æ–°åŠŸèƒ½ã€‚ å¤‡ä»½å®å¡”é¢æ¿å®¹å™¨å¦‚æœæˆ‘ä»¬è¿ç§»çš„è¯ï¼Œä¸éœ€è¦å†é‡å¤ä¸Šé¢çš„å®‰è£…é…ç½®æ­¥éª¤ï¼Œç›´æ¥ä½¿ç”¨æˆ‘æä¾›çš„è„šæœ¬ï¼š 12curl -fsSL https://youngjuning.js.org/shell/baota/backup.sh | shå¤åˆ¶ä»£ç  å‹ç¼©åŒ… baota.tar å°†å¤‡ä»½åˆ°å½“å‰ç›®å½•ï¼Œä¸Šä¼ åˆ°æ–°çš„æœåŠ¡å™¨ä¹‹åè½½å…¥å®¹å™¨ï¼š 12docker load -i baota.tarå¤åˆ¶ä»£ç  æ¢å¤å®¹å™¨ï¼š 1curl -fsSL https://youngjuning.js.org/shell/baota/restore.sh | sh","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"å®å¡”","slug":"å®å¡”","permalink":"https://guoshunfa.com/tags/%E5%AE%9D%E5%A1%94/"}]},{"title":"å†…ç½‘ç©¿é€","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/å†…ç½‘ç©¿é€","date":"2022-07-01T03:34:32.000Z","updated":"2024-01-28T11:41:39.276Z","comments":true,"path":"2022/07/å†…ç½‘ç©¿é€/","link":"","permalink":"https://guoshunfa.com/2022/07/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/","excerpt":"","text":"å¤–ç½‘ è®¿é—®å†…ç½‘æœåŠ¡å™¨ã€‚ 1. frpï¼ˆæä¾›è½¯ä»¶æœåŠ¡ï¼‰ é€šè¿‡åœ¨å…·æœ‰å…¬ç½‘ IP çš„èŠ‚ç‚¹ä¸Šéƒ¨ç½² frp æœåŠ¡ç«¯ï¼Œå¯ä»¥è½»æ¾åœ°å°†å†…ç½‘æœåŠ¡ç©¿é€åˆ°å…¬ç½‘ï¼ŒåŒæ—¶æä¾›è¯¸å¤šä¸“ä¸šçš„åŠŸèƒ½ç‰¹æ€§ï¼Œè¿™åŒ…æ‹¬ï¼š å®¢æˆ·ç«¯æœåŠ¡ç«¯é€šä¿¡æ”¯æŒ TCPã€KCP ä»¥åŠ Websocket ç­‰å¤šç§åè®®ã€‚ é‡‡ç”¨ TCP è¿æ¥æµå¼å¤ç”¨ï¼Œåœ¨å•ä¸ªè¿æ¥é—´æ‰¿è½½æ›´å¤šè¯·æ±‚ï¼ŒèŠ‚çœè¿æ¥å»ºç«‹æ—¶é—´ã€‚ ä»£ç†ç»„é—´çš„è´Ÿè½½å‡è¡¡ã€‚ ç«¯å£å¤ç”¨ï¼Œå¤šä¸ªæœåŠ¡é€šè¿‡åŒä¸€ä¸ªæœåŠ¡ç«¯ç«¯å£æš´éœ²ã€‚ å¤šä¸ªåŸç”Ÿæ”¯æŒçš„å®¢æˆ·ç«¯æ’ä»¶ï¼ˆé™æ€æ–‡ä»¶æŸ¥çœ‹ï¼ŒHTTPã€SOCK5 ä»£ç†ç­‰ï¼‰ï¼Œä¾¿äºç‹¬ç«‹ä½¿ç”¨ frp å®¢æˆ·ç«¯å®ŒæˆæŸäº›å·¥ä½œã€‚ é«˜åº¦æ‰©å±•æ€§çš„æœåŠ¡ç«¯æ’ä»¶ç³»ç»Ÿï¼Œæ–¹ä¾¿ç»“åˆè‡ªèº«éœ€æ±‚è¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚ æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ UI é¡µé¢ã€‚ frp github | bilibili è§†é¢‘æ•™ç¨‹ | frpä¸­æ–‡æ–‡æ¡£ | frpä¸‹è½½åœ°å€ | å®˜æ–¹ç¤ºä¾‹ 1.1. é˜…è¯»frpä¸­æ–‡æ–‡æ¡£ç§»æ­¥åˆ°å®˜ç½‘ -&gt; frpä¸­æ–‡æ–‡æ¡£ frpéœ€è¦é…ç½®ä¸¤ç«¯ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ˜¯å…·æœ‰å…¬ç½‘ipçš„æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯æ˜¯å†…ç½‘ä¸­çš„æœåŠ¡å™¨ã€‚ 1.2. ä¸‹è½½frpä¸‹è½½åœ°å€ æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬ã€‚ 1.3. é…ç½® æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ ç›®å½•ä»‹ç»ï¼šfrpcå‰ç¼€çš„æ–‡ä»¶æ˜¯å†…ç½‘æœåŠ¡éœ€è¦çš„ï¼›frpså‰ç¼€çš„æ–‡ä»¶æ˜¯å…¬ç½‘IPéœ€è¦çš„ã€‚ å¯ä»¥æŸ¥çœ‹å®˜ç½‘ç¤ºä¾‹ï¼Œè¿™é‡Œä¹Ÿç®€å•çš„åšä¸€äº›ä»‹ç»ã€‚ 1.3.1. å…¬ç½‘æœåŠ¡éœ€è¦é…ç½®frps.iniæ–‡ä»¶12[common]bind_port = 7000 å‚æ•°æè¿°ï¼š bind_portï¼šè¡¨ç¤ºfrpæœåŠ¡å¯¹åº”ç«¯å£ï¼Œåç»­éœ€è¦åœ¨å†…ç½‘æœåŠ¡å™¨å¯¹åº”frpc.iniæ–‡ä»¶ä¹Ÿå¯¹åº”ä¸Šã€‚ 1.3.2. å†…ç½‘æœåŠ¡éœ€è¦é…ç½®frpc.iniæ–‡ä»¶ æŒ‰éœ€æ±‚è¿›è¡Œé…ç½®ä¿¡æ¯ï¼Œé™¤åŸºç¡€ä¿¡æ¯é…ç½®commonå¤–ï¼Œå…¶ä»–çš„æ ¹æ®è‡ªå·±éœ€æ±‚è¿›è¡Œæ‘˜é€‰ï¼ˆæ¯ä¸€ä¸ªæ ‡ç­¾éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼‰ã€‚ ä¾‹å­ï¼š 123456789[common]server_addr = ********server_port = 7000[ssh]type = tcplocal_ip = 127.0.0.1local_port = 22remote_port = 6000 åŸºç¡€é…ç½®å‚æ•°æè¿°ï¼š server_addrè¡¨ç¤ºå…¬ç½‘æœåŠ¡å™¨çš„IP&#x2F;åŸŸåã€‚ server_portè¡¨ç¤ºå¯¹åº”å…¬ç½‘frpæœåŠ¡çš„ç«¯å£ã€‚ 1.3.2.1. ssh é€šè¿‡ SSH è®¿é—®å†…ç½‘æœºå™¨ 12345[ssh]type = tcplocal_ip = 127.0.0.1local_port = 22remote_port = 6000 å‚æ•°æè¿°ï¼š typeè¡¨ç¤ºå¯¹åº”ç±»å‹ã€‚ local_ip å’Œ local_port é…ç½®ä¸ºæœ¬åœ°éœ€è¦æš´éœ²åˆ°å…¬ç½‘çš„æœåŠ¡åœ°å€å’Œç«¯å£ã€‚ remote_port è¡¨ç¤ºåœ¨ frp æœåŠ¡ç«¯ç›‘å¬çš„ç«¯å£ï¼Œè®¿é—®æ­¤ç«¯å£çš„æµé‡å°†ä¼šè¢«è½¬å‘åˆ°æœ¬åœ°æœåŠ¡å¯¹åº”çš„ç«¯å£ã€‚ 1.3.2.2. web é…ç½®webæœåŠ¡ 1234567891011[web]type = tcplocal_ip = 127.0.0.1local_port = 9002remote_port = 9002[web2]type = tcplocal_ip = 127.0.0.1local_port = 9101remote_port = 9101 å‚æ•°æè¿°ï¼š å¯æ”¯æŒå¤šä¸ªwebæœåŠ¡ã€‚ typeè¡¨ç¤ºå¯¹åº”ç±»å‹ã€‚ local_ip å’Œ local_port é…ç½®ä¸ºæœ¬åœ°éœ€è¦æš´éœ²åˆ°å…¬ç½‘çš„æœåŠ¡åœ°å€å’Œç«¯å£ã€‚ remote_port è¡¨ç¤ºåœ¨ frp æœåŠ¡ç«¯ç›‘å¬çš„ç«¯å£ï¼Œè®¿é—®æ­¤ç«¯å£çš„æµé‡å°†ä¼šè¢«è½¬å‘åˆ°æœ¬åœ°æœåŠ¡å¯¹åº”çš„ç«¯å£ã€‚ 1.4. frpæœåŠ¡å¯åŠ¨å…ˆé€šè¿‡ ./frps -c ./frps.ini å¯åŠ¨æœåŠ¡ç«¯ï¼Œå†é€šè¿‡ ./frpc -c ./frpc.ini å¯åŠ¨å®¢æˆ·ç«¯ã€‚å¦‚æœéœ€è¦åœ¨åå°é•¿æœŸè¿è¡Œï¼Œå»ºè®®ç»“åˆå…¶ä»–å·¥å…·ä½¿ç”¨ï¼Œä¾‹å¦‚ systemd å’Œ supervisorã€‚ 1.5. frpæœåŠ¡è®¾ç½® åå°å¯åŠ¨ &#x2F; å¼€æœºå¯åŠ¨ systemctlæ¥æ§åˆ¶å¯åŠ¨ ä»¥æœåŠ¡ç«¯ä¸ºä¾‹å­ï¼š sudo vim /lib/systemd/system/frps.serviceåœ¨frps.serviceé‡Œå†™å…¥ä»¥ä¸‹å†…å®¹ 123456789101112[Unit]Description=fraps serviceAfter=network.target syslog.targetWants=network.target[Service]Type=simple#å¯åŠ¨æœåŠ¡çš„å‘½ä»¤ï¼ˆæ­¤å¤„å†™ä½ çš„frpsçš„å®é™…å®‰è£…ç›®å½•ï¼‰ExecStart=/your/path/frps -c /your/path/frps.ini[Install]WantedBy=multi-user.target ç„¶åå°±å¯åŠ¨frpssudo systemctl start frpså†æ‰“å¼€è‡ªå¯åŠ¨sudo systemctl enable frps å¦‚æœè¦é‡å¯åº”ç”¨ï¼Œå¯ä»¥è¿™æ ·ï¼Œsudo systemctl restart frps å¦‚æœè¦åœæ­¢åº”ç”¨ï¼Œå¯ä»¥è¾“å…¥ï¼Œsudo systemctl stop frps å¦‚æœè¦æŸ¥çœ‹åº”ç”¨çš„æ—¥å¿—ï¼Œå¯ä»¥è¾“å…¥ï¼Œsudo systemctl status frps 2. Ngrokï¼ˆæä¾›çº¿ä¸Šéš§é“å’Œçº¿ä¸Šç®¡ç†å¹³å°ï¼‰2.1. æ³¨å†Œ&#x2F;ç™»é™†Ngorkç‚¹å‡»è¿›å…¥Ngrokå®˜ç½‘ 2.2. è´­ä¹°éš§é“ï¼ˆæœ‰å…è´¹çš„ï¼‰ é…ç½®ç›¸å…³ä¿¡æ¯ 2.3. ä¸‹è½½&#x2F;ä½¿ç”¨Ngorkå®¢æˆ·ç«¯ ä¸åŒç³»ç»Ÿï¼Œä½¿ç”¨ä¸åŒï¼Œè¯¦æƒ…éœ€è¦æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ Mac ç‰ˆæœ¬ 1./sunny clientid éš§é“id","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"å†…ç½‘","slug":"å†…ç½‘","permalink":"https://guoshunfa.com/tags/%E5%86%85%E7%BD%91/"},{"name":"å†…ç½‘ç©¿é€","slug":"å†…ç½‘ç©¿é€","permalink":"https://guoshunfa.com/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"}]},{"title":"Shell sshpassä½¿ç”¨è¯´æ˜","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Shell-sshpassä½¿ç”¨è¯´æ˜","date":"2022-07-01T03:33:42.000Z","updated":"2024-01-28T11:41:39.276Z","comments":true,"path":"2022/07/Shell-sshpassä½¿ç”¨è¯´æ˜/","link":"","permalink":"https://guoshunfa.com/2022/07/Shell-sshpass%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/","excerpt":"","text":"1. å®‰è£…sshpass ä»¥ä¸‹æ˜¯é’ˆå¯¹macç³»ç»Ÿè¿›è¡Œå®‰è£…ã€‚ 1234567891011# å®‰è£…è„šæœ¬var=`brew list|grep sshpass`if [ &quot;$var&quot; = &quot;sshpass&quot; ]then echo &quot;sshpasså·²å®‰è£…&quot;else echo &quot;å¼€å§‹å®‰è£…sshpass&quot;wget https://raw.githubusercontent.com/kadwanev/bigboybrew/master/Library/Formula/sshpass.rbbrew install sshpass.rbrm sshpass.rbecho &quot;sshpasså®‰è£…æˆåŠŸ&quot;fi 2. ä½¿ç”¨sshpass -p [passwd] ssh -p [port] root@192.168.X.X 3. é—®é¢˜è®°å½•3.1. sshpassä¸ç”Ÿæ•ˆé—®é¢˜ï¼šæ‰§è¡Œsshæ—¶ï¼Œsshpassä¸ç”Ÿæ•ˆã€‚ åŸå› ï¼šç¬¬ä¸€æ¬¡è¿æ¥è¿™ä¸ªæœåŠ¡å™¨éœ€è¦è¿›è¡Œç¡®è®¤ï¼Œæ˜¯å¦å¯ä»¥è¿›è¡Œè¿æ¥ã€‚ 123The authenticity of host &#x27;10.1.1.10 (10.1.1.10)&#x27; can&#x27;t be established.ECDSA key fingerprint is 00:00:00.Are you sure you want to continue connecting (yes/no)? è§£å†³æ€è·¯ï¼šssh apiä¸­æœ‰ä¸€ä¸ªå‚æ•°ï¼š-o StrictHostKeyChecking=no ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥ç›´æ¥æŠŠæ²¡æœ‰è¿æ¥è¿‡çš„æœºå™¨ï¼Œé‚£ä¸ªyes&#x2F;noçš„éƒ¨åˆ†ï¼Œç›´æ¥è‡ªåŠ¨å¤„ç†ã€‚ è§£å†³äº‹ä¾‹ï¼šsshpass -p [passwd] ssh -p [port] root@192.168.X.X -o StrictHostKeyChecking=no å‚è€ƒæ–‡æ¡£ ã€Linuxã€‘sshpassä¸ç”Ÿæ•ˆ","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"Shell","slug":"Shell","permalink":"https://guoshunfa.com/tags/Shell/"},{"name":"sshpass","slug":"sshpass","permalink":"https://guoshunfa.com/tags/sshpass/"}]},{"title":"Shell å¢åŠ è‡ªå®šä¹‰å‚æ•°","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Shell-å¢åŠ è‡ªå®šä¹‰å‚æ•°","date":"2022-07-01T03:32:38.000Z","updated":"2024-01-28T11:41:39.276Z","comments":true,"path":"2022/07/Shell-å¢åŠ è‡ªå®šä¹‰å‚æ•°/","link":"","permalink":"https://guoshunfa.com/2022/07/Shell-%E5%A2%9E%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0/","excerpt":"","text":"ä½¿ç”¨ä»‹ç»1./xx.sh --rproject=demo --rip=xxx.xxx.xxx.xxx --rport=5000 --rtag=admin --ruser=root --rpwd=pwd è„šæœ¬demo12345678910111213141516171819202122232425262728293031323334#!/bin/bashCOMMANDLINE=&quot;$*&quot;for COMMAND in $COMMANDLINEdo key=$(echo $COMMAND | awk -F&quot;=&quot; &#x27;&#123;print $1&#125;&#x27;) val=$(echo $COMMAND | awk -F&quot;=&quot; &#x27;&#123;print $2&#125;&#x27;) case $key in --rproject) rproject=$val ;; --rip) rip=$val ;; --rport) rport=$val ;; --rtag) rtag=$val ;; --ruser) ruser=$val ;; --rpwd) rpwd=$val ;; esacdone#----------å‚æ•°å¤„ç†echo $rprojectecho $ripecho $rportecho $rtagecho $ruserecho $rpwd å‚è€ƒæ–‡æ¡£ shell å¢åŠ è‡ªå®šä¹‰å‚æ•°","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"Shell","slug":"Shell","permalink":"https://guoshunfa.com/tags/Shell/"}]},{"title":"Shell baseç”¨æ³•æè¿°","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Shell-baseç”¨æ³•æè¿°","date":"2022-07-01T03:30:05.000Z","updated":"2024-01-28T11:41:39.275Z","comments":true,"path":"2022/07/Shell-baseç”¨æ³•æè¿°/","link":"","permalink":"https://guoshunfa.com/2022/07/Shell-base%E7%94%A8%E6%B3%95%E6%8F%8F%E8%BF%B0/","excerpt":"","text":"bashæ˜¯Linuxå’ŒUnixä¸‹çš„shellã€‚ æœ¬æ•™ç¨‹å…³æ³¨çš„æ˜¯ Bashï¼Œä¹Ÿå°±æ˜¯ Bourne Again Shellï¼Œç”±äºæ˜“ç”¨å’Œå…è´¹ï¼ŒBash åœ¨æ—¥å¸¸å·¥ä½œä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚åŒæ—¶ï¼ŒBash ä¹Ÿæ˜¯å¤§å¤šæ•°Linux ç³»ç»Ÿé»˜è®¤çš„ Shellã€‚ åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œäººä»¬å¹¶ä¸åŒºåˆ† Bourne Shell å’Œ Bourne Again Shellï¼Œæ‰€ä»¥ï¼Œåƒ #!&#x2F;bin&#x2F;shï¼Œå®ƒåŒæ ·ä¹Ÿå¯ä»¥æ”¹ä¸º #!&#x2F;bin&#x2F;bashã€‚ #! å‘Šè¯‰ç³»ç»Ÿå…¶åè·¯å¾„æ‰€æŒ‡å®šçš„ç¨‹åºå³æ˜¯è§£é‡Šæ­¤è„šæœ¬æ–‡ä»¶çš„ Shell ç¨‹åºã€‚ 1. base shell åŸºç¡€çŸ¥è¯†1.1. æ³¨é‡Šå•è¡Œæ³¨é‡Š â€œ#â€å‘½ä»¤ä»£è¡¨å•è¡Œæ³¨é‡Šï¼Œåœ¨ä»»ä½•ä¸€è¡Œä»£ç å‰åŠ ä¸Šâ€#â€åŠå°†è¿™è¡Œå˜ä¸ºæ³¨é‡Š 1# æˆ‘æ˜¯æ³¨é‡Š1 å¤šè¡Œæ³¨é‡Š å¤šè¡Œæ³¨é‡Šåˆ™ä½¿ç”¨:&lt; 12345:&lt;&lt;EOF.................EOF 1.2. å˜é‡å˜é‡å®šä¹‰ å˜é‡å®šä¹‰ä¸ç”¨åŠ ä»»ä½•ç¬¦å·ï¼Œç›´æ¥ç”¨[å˜é‡å]&#x3D;[å˜é‡å€¼]ï¼š 1name=&quot;jianjian&quot; å‘½åè§„åˆ™ å˜é‡åå’Œå˜é‡å€¼ä¸ç­‰å·ä¹‹é—´ä¸èƒ½åŠ ç©ºæ ¼ å‘½ååªèƒ½ä½¿ç”¨è‹±æ–‡å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé¦–ä¸ªå­—ç¬¦ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚ ä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ã€‚ ä¸èƒ½ä½¿ç”¨æ ‡ç‚¹ç¬¦å·ã€‚ ä¸èƒ½ä½¿ç”¨bashé‡Œçš„å…³é”®å­—ï¼ˆå¯ç”¨helpå‘½ä»¤æŸ¥çœ‹ä¿ç•™å…³é”®å­—ï¼‰ã€‚ ä½¿ç”¨å˜é‡ ä½¿ç”¨ä¸€ä¸ªå®šä¹‰è¿‡çš„å˜é‡ï¼Œåªè¦åœ¨å˜é‡å‰åŠ ä¸Šç¾å…ƒç¬¦å³å¯ 123name=&quot;jianjian&quot;echo $nameecho $&#123;name&#125; èŠ±æ‹¬å·æ˜¯å¯é€‰çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†è¯†åˆ«å˜é‡è¾¹ç•Œï¼Œä¾‹å¦‚è¿™ç§æƒ…å†µ 12ScriptName=&quot;Java&quot;echo &quot;i use $&#123;ScriptName&#125;Script&quot; ä¸åŠ ä¸ŠèŠ±æ‹¬å·åˆ™å¯èƒ½è¯†åˆ«å˜é‡åä¸º$ScriptNameScript åªè¯»å˜é‡ ç»™å˜é‡åŠ ä¸Šreadonlyå‘½ä»¤å°±èƒ½æŠŠå®ƒå˜æˆä¸€ä¸ªåªè¯»çš„å˜é‡ 12name=&quot;jianjian&quot;readonly name åˆ é™¤å˜é‡ ç»™å˜é‡åŠ ä¸Šunsetå‘½ä»¤å°±èƒ½åˆ é™¤è¿™ä¸ªå˜é‡ 1234name=&quot;jianjian&quot;unset name# å°†ä¸ä¼šæœ‰ä»»ä½•è¾“å‡ºecho $name å˜é‡ç±»å‹ åœ¨shellä¸­å­˜åœ¨ä¸‰ç§å˜é‡ å±€éƒ¨å˜é‡:::å±€éƒ¨å˜é‡åœ¨è„šæœ¬æˆ–å‘½ä»¤ä¸­å®šä¹‰ï¼Œä»…åœ¨å½“å‰shellå®ä¾‹ä¸­æœ‰æ•ˆï¼Œå…¶ä»–shellå¯åŠ¨çš„ç¨‹åºä¸èƒ½è®¿é—®å±€éƒ¨å˜é‡ã€‚ ç¯å¢ƒå˜é‡:::æ‰€æœ‰çš„ç¨‹åºï¼ŒåŒ…æ‹¬shellå¯åŠ¨çš„ç¨‹åºï¼Œéƒ½èƒ½è®¿é—®ç¯å¢ƒå˜é‡ï¼Œæœ‰äº›ç¨‹åºéœ€è¦ç¯å¢ƒå˜é‡æ¥ä¿è¯å…¶æ­£å¸¸è¿è¡Œã€‚å¿…è¦çš„æ—¶å€™shellè„šæœ¬ä¹Ÿå¯ä»¥å®šä¹‰ç¯å¢ƒå˜é‡ã€‚ shellå˜é‡:::shellå˜é‡æ˜¯ç”±shellç¨‹åºè®¾ç½®çš„ç‰¹æ®Šå˜é‡ã€‚shellå˜é‡ä¸­æœ‰ä¸€éƒ¨åˆ†æ˜¯ç¯å¢ƒå˜é‡ï¼Œæœ‰ä¸€éƒ¨åˆ†æ˜¯å±€éƒ¨å˜é‡ï¼Œè¿™äº›å˜é‡ä¿è¯äº†shellçš„æ­£å¸¸è¿è¡Œ 1.3. å­—ç¬¦ä¸²å­—ç¬¦ä¸²å®šä¹‰ bashä¸­çš„å­—ç¬¦ä¸²å¯ä»¥ç”¨å•å¼•å·å’ŒåŒå¼•å·ï¼Œå…¶åŒºåˆ«å°±æ˜¯ï¼Œå•å¼•å·å†…ä¸èƒ½è§£é‡Šå˜é‡ï¼Œè€ŒåŒå¼•å·å†…å¯ä»¥è§£é‡Šå˜é‡ 123name=&quot;jianjian&quot;echo &#x27;$name&#x27;echo &quot;$name&quot; ä¸Šè¿°ä»£ç å°†è¾“å‡ºä¸ºï¼š 12$namejianjian å­—ç¬¦ä¸²æ‹¼æ¥ 1234firstName=&quot;im&quot;lastName=&quot;jianjian&quot;name=&quot;$&#123;firstName&#125;$&#123;lastName&#125;&quot;echo $name è·å–å­—ç¬¦ä¸²é•¿åº¦ 12name=&quot;imjianjian&quot;echo $&#123;#name&#125; æŸ¥æ‰¾å­å­—ç¬¦ä¸² 123str=&quot;oh! Bash is so good!&quot;echo `expr index &quot;$str&quot; is`# å°†è¾“å‡º7ï¼Œå³åœ¨ç¬¬ä¸ƒä½æ‰¾åˆ°isä¸­çš„s ä»–æ‰¾åˆ°çš„æ˜¯isä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œé‚£ä¸ªçº¿å‡ºç°å°±è¿”å›å“ªä¸ªä¸»ä¹‰è¿™é‡Œä½¿ç”¨çš„æ˜¯â€œè€Œä¸æ˜¯â€,è¿™ä¸ªç¬¦å·åœ¨excä¸‹é¢ 1.4. æ•°ç»„æ•°ç»„å®šä¹‰ bashæ”¯æŒä¸€ç»´æ•°ç»„ï¼Œä¸æ”¯æŒå¤šç»´æ•°ç»„æ•°ç»„çš„ä¸‹æ ‡ä»0å¼€å§‹ï¼Œè·å–æ•°ç»„æ—¶ä¸‹è¾¹å¯ä»¥ä½¿ç”¨ç®—æœ¯è¡¨è¾¾å¼æ•°ç»„ç”¨ï¼ˆï¼‰åŒ…è£¹ï¼Œæ¯ä¸ªå­å…ƒç´ éƒ½ç”¨ç©ºæ ¼åˆ†å¼€ 1234567#ç›´æ¥å®šä¹‰arr1=(1 2 3 4)#å•ç‹¬å®šä¹‰arr2[0]=1arr2[1]=2arr2[2]=3arr2[3]=4 æ•°ç»„ä½¿ç”¨ 12arr=(1 2 3 4)echo $&#123;arr[0]&#125; æ•°ç»„é•¿åº¦ è·å–æ•°ç»„çš„é•¿åº¦ 12arr=(1 2 3 4)echo $&#123;#arr(*)&#125; è·å–å•ä¸ªå…ƒç´ é•¿åº¦ 12arr=(12 22 32 42)echo $&#123;#arr[0]&#125; 1.5. ä¼ å‚ä½¿ç”¨æ–¹æ³• æˆ‘ä»¬åœ¨ä½¿ç”¨è„šæœ¬æ–‡ä»¶çš„æ—¶å€™å¯ä»¥å‘æ–‡ä»¶ä¸­ä¼ é€’ä¸€äº›å‚æ•°ï¼Œè„šæœ¬åˆ™å¯ä»¥ä½¿ç”¨nè¿™ç§æ–¹å¼æ¥è·å–å‚æ•°ï¼Œnè¿™ç§æ–¹å¼æ¥è·å–å‚æ•°ï¼Œ0ä»£è¡¨æ–‡ä»¶åï¼Œ1ä»£è¡¨çš„æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ1ä»£è¡¨çš„æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ2ä»£è¡¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚ã€‚ã€‚ test1.sh: 12345#!/bin/bashecho &quot;æ–‡ä»¶åï¼š$0&quot;;echo &quot;ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š$1&quot;;echo &quot;ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š$2&quot;; ç„¶åç”¨ä¸‹åˆ—ä»£ç è¿è¡Œè¯¥æ–‡ä»¶ï¼š 1bash test1.sh 1 2 è¾“å‡º: 123æ–‡ä»¶åï¼štest1.shç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š1ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š2 å…¶ä»–å­—ç¬¦ å‚æ•°å¤„ç† è¯´æ˜ $# å‚æ•°ä¸ªæ•° $* è¾“å‡ºæ‰€æœ‰çš„å‚æ•° $$ å½“å‰è„šæœ¬è¿›ç¨‹ID $! åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹ID $@ ä¸$*ç›¸åŒï¼Œä½†ä½¿ç”¨æ—¶å®¶åŠ å¼•å· $- ç°æ—¶shellå½“å‰é€‰é¡¹ $? ç°æ—¶æœ€åå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ã€‚0è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œå…¶ä»–è¡¨ç¤ºé”™è¯¯ 1.6. è¿ç®—ç¬¦ç®—æœ¯è¿ç®—ç¬¦ bashæœ¬èº«ä¸æ”¯æŒç®€å•çš„æ•°å­¦è®¡ç®—ï¼Œéœ€è¦é€šè¿‡å…¶ä»–å‘½ä»¤æ¥å®ç°ï¼Œä¾‹å¦‚awkå’Œexpr 12num=`expr 2 + 2`echo &quot;å’Œä¸º:$&#123;num&#125;&quot; å…¶ä»–è¿ç®—ç¬¦ï¼šè®¾aä¸º10ã€‚bä¸º20 è¿ç®—ç¬¦ è¯´æ˜ ä¾‹å­ + åŠ æ³• expr $a + $b ç»“æœä¸º 30ã€‚ - å‡æ³• expr $a - $b ç»“æœä¸º -10ã€‚ * ä¹˜æ³• expr $a \\* $b ç»“æœä¸º 200ã€‚ &#x2F; é™¤æ³• expr $b / $a ç»“æœä¸º 2ã€‚ % å–ä½™ expr $b % $a ç»“æœä¸º 0ã€‚ &#x3D; èµ‹å€¼ a=$b å°†æŠŠå˜é‡ b çš„å€¼èµ‹ç»™ aã€‚ &#x3D;&#x3D; ç›¸ç­‰ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°å­—ï¼Œç›¸åŒåˆ™è¿”å› trueã€‚ [ a==b ] è¿”å› falseã€‚ !&#x3D; ä¸ç›¸ç­‰ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°å­—ï¼Œä¸ç›¸åŒåˆ™è¿”å› trueã€‚ [ a!=b ] è¿”å› trueã€‚ å…³ç³»è¿ç®—ç¬¦ å…³ç³»è¿ç®—ç¬¦åªæ”¯æŒæ•°å­—ï¼Œä¸æ”¯æŒå­—ç¬¦ä¸²ï¼Œé™¤éå­—ç¬¦ä¸²çš„å€¼æ˜¯æ•°å­— è®¾aä¸º10ã€‚bä¸º20 è¿ç®—ç¬¦ è¯´æ˜ ä¸¾ä¾‹ -eq æ£€æµ‹ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueã€‚ [ a âˆ’eq b ] è¿”å› falseã€‚ -ne æ£€æµ‹ä¸¤ä¸ªæ•°æ˜¯å¦ä¸ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å› trueã€‚ [ a âˆ’ne b ] è¿”å› trueã€‚ -gt æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å¤§äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ a âˆ’gt b ] è¿”å› falseã€‚ -lt æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å°äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ a âˆ’ltb ] è¿”å› trueã€‚ -ge æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å¤§äºç­‰äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ a âˆ’ge b ] è¿”å› falseã€‚ -le æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å°äºç­‰äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ a âˆ’le b ] è¿”å› trueã€‚ å¸ƒå°”è¿ç®—ç¬¦ è®¾aä¸º10ã€‚bä¸º20 è¿ç®—ç¬¦ è¯´æ˜ ä¸¾ä¾‹ ! éè¿ç®—ï¼Œè¡¨è¾¾å¼ä¸º true åˆ™è¿”å› falseï¼Œå¦åˆ™è¿”å› trueã€‚ [ ! false ] è¿”å› trueã€‚ -o æˆ–è¿ç®—ï¼Œæœ‰ä¸€ä¸ªè¡¨è¾¾å¼ä¸º true åˆ™è¿”å› trueã€‚ [ a âˆ’lt 20 âˆ’o b -gt 100 ] è¿”å› trueã€‚ -a ä¸è¿ç®—ï¼Œä¸¤ä¸ªè¡¨è¾¾å¼éƒ½ä¸º true æ‰è¿”å› trueã€‚ [ a âˆ’lt 20 âˆ’a b -gt 100 ] è¿”å› falseã€‚ é€»è¾‘è¿ç®—ç¬¦ è®¾aä¸º10ã€‚bä¸º20 è¿ç®—ç¬¦ è¯´æ˜ ä¸¾ä¾‹ &amp;&amp; é€»è¾‘çš„ AND [[ a -lt 100 &amp;&amp;b -gt 100 ]] è¿”å› false || é€»è¾‘çš„ OR [[ a -lt 100 &amp;&amp;b -gt 100 ]] è¿”å› true å­—ç¬¦ä¸²è¿ç®—ç¬¦ è®¾a ä¸º â€œabcâ€ï¼Œb ä¸º â€œefgâ€ï¼š è¿ç®—ç¬¦ è¯´æ˜ ä¸¾ä¾‹ &#x3D; æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueã€‚ [ a=b ] è¿”å› falseã€‚ !&#x3D; æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å› trueã€‚ [ a!=b ] è¿”å› trueã€‚ -z æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0ï¼Œä¸º0è¿”å› trueã€‚ [ -z $a ] è¿”å› falseã€‚ -n æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0ï¼Œä¸ä¸º0è¿”å› trueã€‚ [ -n â€œ$aâ€ ] è¿”å› trueã€‚ str æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºè¿”å› trueã€‚ [ $a ] è¿”å› trueã€‚ æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦ æ“ä½œç¬¦ è¯´æ˜ ä¸¾ä¾‹ -b file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å—è®¾å¤‡æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -b $file ] è¿”å› falseã€‚ -c file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -c $file ] è¿”å› falseã€‚ -d file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯ç›®å½•ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -d $file ] è¿”å› falseã€‚ -f file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯æ™®é€šæ–‡ä»¶ï¼ˆæ—¢ä¸æ˜¯ç›®å½•ï¼Œä¹Ÿä¸æ˜¯è®¾å¤‡æ–‡ä»¶ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -f $file ] è¿”å› trueã€‚ -g file æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SGID ä½ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -g $file ] è¿”å› falseã€‚ -k file æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº†ç²˜ç€ä½(Sticky Bit)ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -k $file ] è¿”å› falseã€‚ -p file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯æœ‰åç®¡é“ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -p $file ] è¿”å› falseã€‚ -u file æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SUID ä½ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -u $file ] è¿”å› falseã€‚ -r file æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯è¯»ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -r $file ] è¿”å› trueã€‚ -w file æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯å†™ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -w $file ] è¿”å› trueã€‚ -x file æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -x $file ] è¿”å› trueã€‚ -s file æ£€æµ‹æ–‡ä»¶æ˜¯å¦ä¸ºç©ºï¼ˆæ–‡ä»¶å¤§å°æ˜¯å¦å¤§äº0ï¼‰ï¼Œä¸ä¸ºç©ºè¿”å› trueã€‚ [ -s $file ] è¿”å› trueã€‚ -e file æ£€æµ‹æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç›®å½•ï¼‰æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -e $file ] è¿”å› true 1.7. echoå‘½ä»¤è¾“å‡ºæ™®é€šå­—ç¬¦ä¸² echo ç”¨äºè¾“å‡ºå­—ç¬¦ä¸²ï¼Œå•åŒå¼•å·çš„ä½œç”¨ä¸åŒï¼Œå•å¼•å·åªè¾“å‡ºæ–‡æœ¬ï¼ŒåŒå¼•å·ä¸­å¯ä»¥è¾“å‡ºå˜é‡ï¼Œå¹¶ä¸”åŒå¼•å·ä¹Ÿå¯ä»¥çœå» 1234name=&quot;imjianjian&quot;echo &#x27;my name is $name&#x27;echo &quot;my name is $name&quot;echo my name is $name è¾“å‡ºä¸ºï¼š 123my name is $namemy name is imjianjianmy name is imjianjian è¾“å‡ºè½¬ä¹‰å­—ç¬¦ 1echo &quot;\\&quot;hello world\\&quot;&quot; è¾“å‡º 1&quot;hello world&quot; æ¢è¡Œ&#x2F;ä¸æ¢è¡Œ 1234567# -e å¼€å¯è½¬ä¹‰:&lt;&lt;EOF\\n æ¢è¡Œ\\c ä¸æ¢è¡ŒEOFecho -e &quot;hello world! \\n&quot; echo -e &quot;hello world! \\c&quot; è¾“å‡ºå®šå‘åˆ°æ–‡ä»¶ 1echo &quot;hello world&quot; &gt; testFile 1.8. printfå‘½ä»¤å’Œechoç›¸æ¯”ï¼Œprintfæ¨¡ä»¿äº†cè¯­è¨€ä¸­çš„printf()æ–¹æ³•ï¼Œæ‰€ä»¥ç§»æ¤æ€§æ›´å¥½ã€‚printfæ”¯æŒç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œå®šåˆ¶å­—ç¬¦åºŠå®½åº¦ï¼Œå¯¹é½ç­‰ã€‚ è¯­æ³• 1printf string [argument] string ä¸ºå­—ç¬¦ä¸² argument ä¸ºå‚æ•°åˆ—è¡¨ æ ¼å¼æ›¿ä»£ç¬¦ åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨æ ¼å¼æ›¿æ¢ç¬¦å ä½ï¼Œç„¶åé€šè¿‡å‚æ•°æ¥å¯¹åº”å¸¦å…¥ï¼Œå¹¶æœ€ç»ˆè¾“å‡ºå¯¹åº”å­—ç¬¦ä¸² 1printf &quot;%-10s %-8s %-6s\\n&quot; å§“å æ€§åˆ« èº«é«˜ æ ¼å¼æ›¿æ¢ç¬¦æœ‰%s,%d,%c,%fç­‰%sæ˜¯æ›¿ä»£å­—ç¬¦ä¸²ï¼Œ-ä¸ºå·¦å¯¹é½ï¼Œä¸å†™åˆ™æ˜¯å³å¯¹é½ã€‚10è¡¨ç¤ºå­—ç¬¦ä¸²å°†ä¼šåœ¨10ä¸ªå­—ç¬¦ä»¥å†…çš„å®½åº¦ä¸Šæ˜¾ç¤ºï¼Œä¸è¶³åˆ™ä¼šç”¨ç©ºæ ¼å æ»¡ï¼Œç‚’å‡ºçš„ä¹Ÿä¼šæ­£å¸¸æ˜¾ç¤º è½¬ä¹‰å­—ç¬¦ åºåˆ— è¯´æ˜ \\a è­¦å‘Šå­—ç¬¦ï¼Œé€šå¸¸ä¸ºASCIIçš„BELå­—ç¬¦ \\b åé€€ \\c æŠ‘åˆ¶ï¼ˆä¸æ˜¾ç¤ºï¼‰è¾“å‡ºç»“æœä¸­ä»»ä½•ç»“å°¾çš„æ¢è¡Œå­—ç¬¦ï¼ˆåªåœ¨%bæ ¼å¼æŒ‡ç¤ºç¬¦æ§åˆ¶ä¸‹çš„å‚æ•°å­—ç¬¦ä¸²ä¸­æœ‰æ•ˆï¼‰ï¼Œè€Œä¸”ï¼Œä»»ä½•ç•™åœ¨å‚æ•°é‡Œçš„å­—ç¬¦ã€ä»»ä½•æ¥ä¸‹æ¥çš„å‚æ•°ä»¥åŠä»»ä½•ç•™åœ¨æ ¼å¼å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œéƒ½è¢«å¿½ç•¥ \\f æ¢é¡µï¼ˆformfeedï¼‰ \\n æ¢è¡Œ \\r å›è½¦ï¼ˆCarriage returnï¼‰ \\t æ°´å¹³åˆ¶è¡¨ç¬¦ \\v å‚ç›´åˆ¶è¡¨ç¬¦ | ä¸€ä¸ªå­—é¢ä¸Šçš„åæ–œæ å­—ç¬¦ \\ddd è¡¨ç¤º1åˆ°3ä½æ•°å…«è¿›åˆ¶å€¼çš„å­—ç¬¦ã€‚ä»…åœ¨æ ¼å¼å­—ç¬¦ä¸²ä¸­æœ‰æ•ˆ \\0ddd è¡¨ç¤º1åˆ°3ä½çš„å…«è¿›åˆ¶å€¼å­—ç¬¦ 1.9. testå‘½ä»¤testå‘½ä»¤ç”¨äºæ£€æµ‹æŸä¸ªæ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œå¯ä»¥ç”¨æ¥è¿›è¡Œæ•°å€¼æ¯”è¾ƒï¼Œå­—ç¬¦æ¯”è¾ƒï¼Œæ–‡ä»¶ç­‰æµ‹è¯•ã€‚æˆç«‹åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ test -eq æ•°å€¼æµ‹è¯• å‚æ•° è¯´æ˜ -eq ç­‰äºåˆ™ä¸ºçœŸ -ne ä¸ç­‰äºåˆ™ä¸ºçœŸ -gt å¤§äºåˆ™ä¸ºçœŸ -ge å¤§äºç­‰äºåˆ™ä¸ºçœŸ -lt å°äºåˆ™ä¸ºçœŸ -le å°äºç­‰äºåˆ™ä¸ºçœŸ å­—ç¬¦æµ‹è¯• å‚æ•° è¯´æ˜ &#x3D; ç­‰äºåˆ™ä¸ºçœŸ !&#x3D; ä¸ç›¸ç­‰åˆ™ä¸ºçœŸ -z å­—ç¬¦ä¸² å­—ç¬¦ä¸²çš„é•¿åº¦ä¸ºé›¶åˆ™ä¸ºçœŸ -n å­—ç¬¦ä¸² å­—ç¬¦ä¸²çš„é•¿åº¦ä¸ä¸ºé›¶åˆ™ä¸ºçœŸ æ–‡ä»¶æµ‹è¯• å‚æ•° è¯´æ˜ -e æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨åˆ™ä¸ºçœŸ -r æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯è¯»åˆ™ä¸ºçœŸ -w æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯å†™åˆ™ä¸ºçœŸ -x æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯æ‰§è¡Œåˆ™ä¸ºçœŸ -s æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦åˆ™ä¸ºçœŸ -d æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºç›®å½•åˆ™ä¸ºçœŸ -f æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºæ™®é€šæ–‡ä»¶åˆ™ä¸ºçœŸ -c æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºå­—ç¬¦å‹ç‰¹æ®Šæ–‡ä»¶åˆ™ä¸ºçœŸ -b æ–‡ä»¶å å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºå—ç‰¹æ®Šæ–‡ä»¶åˆ™ä¸ºçœŸ 1.10. æµç¨‹æ§åˆ¶if 1234if conditionthen ...commandfi ifâ€¦else 123456if conditionthen ...commandelse ...commandfi if else-if else 123456789if conditionthen ...commandelif conditionthen ...commandelse ...commandfi for 1234for var in item1 item2 ... itemNdo ...commanddone while 1234while conditiondo commanddone until 1234until conditiondo commanddone case 1234567891011121314case å€¼ inæ¨¡å¼1) command1 command2 ... commandN ;;æ¨¡å¼2ï¼‰ command1 command2 ... commandN ;;esac å’Œå¤§éƒ¨åˆ†è¯­è¨€ä¸€æ ·ï¼Œå¯ä»¥æ”¯æŒä½¿ç”¨breakå’Œcontiune,æ¥è·³å‡ºå¾ªç¯ 1.11. å‡½æ•°è¯­æ³• 12345[function] functionName[()]&#123; .... return ....&#125; å‚æ•°åˆ—è¡¨ ä¸æ–‡ä»¶ä¼ å‚ç±»ä¼¼ï¼Œå‡½æ•°ä¹Ÿæ˜¯ä½¿ç”¨ç›¸åŒçš„è¯­æ³•æ¥ä¼ å‚ï¼Œå–å‚ 12345678910test()&#123; echo ç¬¬ä¸€ä¸ªå‚æ•°ä¸º$1 echo ç¬¬äºŒä¸ªå‚æ•°ä¸º$2 ... ... ... echo ç¬¬10ä¸ªå‚æ•°ä¸º$&#123;10&#125; echo å‚æ•°å…±æœ‰$#ä¸ª echo è¾“å‡ºæ‰€æœ‰å‚æ•° $* &#125; å½“å‚æ•°å¤§äº10æ—¶ï¼Œå‚æ•°éœ€è¦ç”¨${n}æ¥è·å– å‡½æ•°è°ƒç”¨ 1234567sun()&#123; return `expr $1 + $2`&#125;#è°ƒç”¨sun 1 2echo $? ç‚¹ç”¨å‡½æ•°åï¼Œç»“æœé€šè¿‡**$?**æ¥è·å¾— 1.12. è¾“å…¥è¾“å‡ºé‡å®šå‘bashä¸€èˆ¬ä¼šå°†è¾“å…¥å’Œæ‰€äº§ç”Ÿçš„è¾“å‡ºéƒ½å‘é€åˆ°ç»ˆç«¯ï¼Œå¦‚æœè¦å°†å…¶è¾“å‡ºåˆ°å…¶ä»–ä½ç½®ï¼Œåˆ™éœ€è¦é‡å®šå‘ é‡å®šå‘å‘½ä»¤ å‘½ä»¤ è¯´æ˜ command &gt; file å°†è¾“å‡ºé‡å®šå‘åˆ° fileã€‚ command &lt; file å°†è¾“å…¥é‡å®šå‘åˆ° fileã€‚ command &gt;&gt; file å°†è¾“å‡ºä»¥è¿½åŠ çš„æ–¹å¼é‡å®šå‘åˆ° fileã€‚ n &gt; file å°†æ–‡ä»¶æè¿°ç¬¦ä¸º n çš„æ–‡ä»¶é‡å®šå‘åˆ° fileã€‚ n &gt;&gt; file å°†æ–‡ä»¶æè¿°ç¬¦ä¸º n çš„æ–‡ä»¶ä»¥è¿½åŠ çš„æ–¹å¼é‡å®šå‘åˆ° fileã€‚ n &gt;&amp; m å°†è¾“å‡ºæ–‡ä»¶ m å’Œ n åˆå¹¶ã€‚ n &lt;&amp; m å°†è¾“å…¥æ–‡ä»¶ m å’Œ n åˆå¹¶ã€‚ &lt;&lt; tag å°†å¼€å§‹æ ‡è®° tag å’Œç»“æŸæ ‡è®° tag ä¹‹é—´çš„å†…å®¹ä½œä¸ºè¾“å…¥ã€‚ è¾“å‡ºé‡å®šå‘ 1command1 &gt; file11 ä¾‹å¦‚ï¼š 12# å°†å†å²å‘½ä»¤è¾“å‡ºåˆ°history.txtæ–‡ä»¶ä¸­history &gt; history.txt12 è¾“å‡ºé‡å®šå‘ 1command1 &lt; file11 ä¾‹å¦‚ï¼š 12# ç»Ÿè®¡usersæ–‡ä»¶çš„è¡Œæ•°wc -l &lt; users12 &#x2F;dev&#x2F;null 123# æ‰€æœ‰è¢«é‡å®šå‘åˆ°/dev/nullçš„æ–‡ä»¶éƒ½ä¼šè¢«ä¸¢å¼ƒï¼Œå¯ä»¥èµ·åˆ°ç¦æ­¢ä»»ä½•è¾“å‡ºçš„ä½œç”¨ã€‚# å¯ä»¥ç†è§£ä¸ºè‡ªåŠ¨æ¸…ç†çš„åƒåœ¾æ¡¶command &gt; /dev/null123 1.13. æ–‡ä»¶å¼•ç”¨å’Œå…¶å®ƒè¯­è¨€ä¸€æ ·ï¼Œbashä¹Ÿå¯ä»¥å¼•ç”¨å¤–éƒ¨æ–‡ä»¶ã€‚è¿™æ ·å¯ä»¥æŠŠä¸€äº›å…¬å…±ä»£ç å°è£…åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ä¸­ã€‚ å¼•ç”¨æ–¹å¼ 1234#.å’Œæ–‡ä»¶åä¸­è¦æœ‰ä¸€ä¸ªç©ºæ ¼. filename æˆ–source filename 2. å¥½ç”¨çš„è„šæœ¬ç‰‡æ®µ2.1. shell è„šæœ¬ cd åˆ°å½“å‰è„šæœ¬æ‰€åœ¨ç›®å½•123#!/bin/shcd `dirname $0` dirnameå‘½ä»¤çš„ä½œç”¨æ˜¯ï¼Ÿ man dirnameå¾—åˆ°å¦‚ä¸‹è§£é‡Šï¼š dirname - strip last component from file name é€šä¿—æ¥è¯´å°±æ˜¯å»æ‰æä¾›çš„æ–‡ä»¶åæˆ–ç›®å½•çš„æœ€åä¸€éƒ¨åˆ†ï¼ŒåŒ…æ‹¬ &#x2F;ã€‚ä¾‹å­å¦‚ä¸‹ï¼š é—®é¢˜ å‚è€ƒæ–‡æ¡£ base shell è¯­æ³•ç¬”è®° shellè„šæœ¬å®ç°sshè‡ªåŠ¨ç™»å½•è¿œç¨‹æœåŠ¡å™¨ç¤ºä¾‹ linux expectçš„ä½¿ç”¨","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"Shell","slug":"Shell","permalink":"https://guoshunfa.com/tags/Shell/"}]},{"title":"Shell Macå¸¸ç”¨å‘½ä»¤","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Shell-Macå¸¸ç”¨å‘½ä»¤","date":"2022-07-01T03:28:24.000Z","updated":"2024-01-28T11:41:39.275Z","comments":true,"path":"2022/07/Shell-Macå¸¸ç”¨å‘½ä»¤/","link":"","permalink":"https://guoshunfa.com/2022/07/Shell-Mac%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","excerpt":"","text":"Macå’ŒLinuxå¤§å¤šæ•°å‘½ä»¤ç›¸åŒã€‚è¿™é‡ŒåªæŒ‡å‡ºåªå±äºMacçš„å‘½ä»¤ã€‚ 1. ä»¥appçš„æ–¹å¼æ‰“å¼€æ–‡æœ¬æ–‡ä»¶123456# ï¼e ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€open -e /usr/local/demo.txt# ï¼t ä½¿ç”¨é»˜è®¤ç¼–è¾‘å™¨æ‰“å¼€open -t /usr/local/demo.txt# ï¼aæŒ‡å®šåº”ç”¨open -a typora /usr/local/demo.txt","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"Shell","slug":"Shell","permalink":"https://guoshunfa.com/tags/Shell/"},{"name":"Mac","slug":"Mac","permalink":"https://guoshunfa.com/tags/Mac/"}]},{"title":"Shell Linuxé˜²ç«å¢™å’Œç«¯å£","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Shell-Linuxé˜²ç«å¢™å’Œç«¯å£","date":"2022-07-01T03:27:36.000Z","updated":"2024-01-28T11:41:39.275Z","comments":true,"path":"2022/07/Shell-Linuxé˜²ç«å¢™å’Œç«¯å£/","link":"","permalink":"https://guoshunfa.com/2022/07/Shell-Linux%E9%98%B2%E7%81%AB%E5%A2%99%E5%92%8C%E7%AB%AF%E5%8F%A3/","excerpt":"","text":"12345678910111213141516171819202122232425262728293031323334353637# æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€systemctl status firewalld# å¦‚æœä¸æ˜¯æ˜¾ç¤ºactiveçŠ¶æ€ï¼Œéœ€è¦æ‰“å¼€é˜²ç«å¢™systemctl start firewalld# æŸ¥çœ‹æ‰€æœ‰å·²å¼€æ”¾çš„ä¸´æ—¶ç«¯å£ï¼ˆé»˜è®¤ä¸ºç©ºï¼‰firewall-cmd --list-ports# æŸ¥çœ‹æ‰€æœ‰æ°¸ä¹…å¼€æ”¾çš„ç«¯å£ï¼ˆé»˜è®¤ä¸ºç©ºï¼‰firewall-cmd --list-ports --permanent# æ·»åŠ ä¸´æ—¶å¼€æ”¾ç«¯å£ï¼ˆä¾‹å¦‚ï¼šæ¯”å¦‚æˆ‘ä¿®æ”¹sshè¿œç¨‹è¿æ¥ç«¯å£æ˜¯223ï¼Œåˆ™éœ€è¦å¼€æ”¾è¿™ä¸ªç«¯å£ï¼‰firewall-cmd --add-port=223/tcp# æ·»åŠ æ°¸ä¹…å¼€æ”¾çš„ç«¯å£ï¼ˆä¾‹å¦‚ï¼š223ç«¯å£ï¼‰firewall-cmd --add-port=223/tcp --permanent# å…³é—­ä¸´æ—¶ç«¯å£firewall-cmd --remove-port=80/tcp# å…³é—­æ°¸ä¹…ç«¯å£firewll-cmd --remove-port=80/tcp --permanent# é…ç½®ç»“æŸåéœ€è¦è¾“å…¥é‡è½½å‘½ä»¤å¹¶é‡å¯é˜²ç«å¢™ä»¥ç”Ÿæ•ˆé…ç½®firewall-cmd --reload# orsystemctl restart firewalld å‚è€ƒæ–‡æ¡£ å‡‰äº†è®°å¿†","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://guoshunfa.com/tags/linux/"},{"name":"Shell","slug":"Shell","permalink":"https://guoshunfa.com/tags/Shell/"}]},{"title":"Shell æ–‡ä»¶ç›¸å…³æ“ä½œ","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Shell-æ–‡ä»¶ç›¸å…³æ“ä½œ","date":"2022-07-01T03:26:20.000Z","updated":"2024-01-28T11:41:39.276Z","comments":true,"path":"2022/07/Shell-æ–‡ä»¶ç›¸å…³æ“ä½œ/","link":"","permalink":"https://guoshunfa.com/2022/07/Shell-%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/","excerpt":"","text":"å‘½ä»¤ å‘½ä»¤ç›´è¯‘ æè¿° å®ä¾‹ ls List lsä¼šåˆ—ä¸¾å‡ºå½“å‰å·¥ä½œç›®å½•çš„å†…å®¹ï¼ˆæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼‰ã€‚ ls mkdir Make Directory mkdir ç”¨äºæ–°å»ºä¸€ä¸ªæ–°ç›®å½• mkdir mywork pwd Print Working Directory æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½• pwd cd Change Directory åˆ‡æ¢æ–‡ä»¶è·¯å¾„ï¼Œcd å°†ç»™å®šçš„æ–‡ä»¶å¤¹ï¼ˆæˆ–ç›®å½•ï¼‰è®¾ç½®æˆå½“å‰å·¥ä½œç›®å½•ã€‚ cd /usr/mongo rmdir Remove Directory åˆ é™¤ç»™å®šçš„ç›®å½•ï¼Œåªèƒ½åˆ é™¤ç©ºç›®å½•ï¼ˆç›®å½•ä¸‹ä¸èƒ½æœ‰æ–‡ä»¶ï¼‰ã€‚ rmdir mywork rm Remove rm ä¼šåˆ é™¤ç»™å®šçš„æ–‡ä»¶ã€‚ rm -rfä¼šåˆ é™¤ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œréå†ï¼Œfå¼ºè¡Œåˆ é™¤ã€‚ï¼ˆç»ˆç«¯åˆ é™¤çš„æ–‡ä»¶ä¸å¯æ¢å¤ï¼‰&lt;br&#x2F; &gt; rm work.html cp Copy cp å‘½ä»¤å¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ cp [é€‰é¡¹] æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ cp work.html /usr/work mv Move mv å‘½ä»¤å¯¹æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è¿›è¡Œç§»åŠ¨ï¼Œå¦‚æœæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å­˜åœ¨äºå½“å‰å·¥ä½œç›®å½•ï¼Œè¿˜å¯ä»¥å¯¹æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹è¿›è¡Œé‡å‘½åã€‚ mv [é€‰é¡¹] æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ mv work.html /usr/work cat concatenate and print files cat ç”¨äºåœ¨æ ‡å‡†è¾“å‡ºï¼ˆç›‘æ§å™¨æˆ–å±å¹•ï¼‰ä¸ŠæŸ¥çœ‹æ–‡ä»¶å†…å®¹ cat work.html tail print TAIL(from last) tail é»˜è®¤åœ¨æ ‡å‡†è¾“å‡ºä¸Šæ˜¾ç¤ºç»™å®šæ–‡ä»¶çš„æœ€å10è¡Œå†…å®¹ã€‚tail -n N æŒ‡å®šåœ¨æ ‡å‡†è¾“å‡ºä¸Šæ˜¾ç¤ºæ–‡ä»¶çš„æœ€åNè¡Œå†…å®¹ã€‚tail -f æŒç»­è·Ÿè¸ªæ–‡ä»¶æƒ…å†µï¼Œç”¨äºå®æ—¶æŸ¥çœ‹æ—¥å¿—ã€‚ tail work.html less print LESS less æŒ‰é¡µæˆ–æŒ‰çª—å£æ‰“å°æ–‡ä»¶å†…å®¹ã€‚åœ¨æŸ¥çœ‹åŒ…å«å¤§é‡æ–‡æœ¬æ•°æ®çš„å¤§æ–‡ä»¶æ—¶æ˜¯éå¸¸æœ‰ç”¨å’Œé«˜æ•ˆçš„ã€‚ä½ å¯ä»¥ä½¿ç”¨Ctrl+Få‘å‰ç¿»é¡µï¼ŒCtrl+Bå‘åç¿»é¡µã€‚ find è¿™ä¸ªå‘½ä»¤ä¼šåœ¨ç»™å®šä½ç½®æœå¯»ä¸æ¡ä»¶åŒ¹é…çš„æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨find -name çš„-nameé€‰é¡¹æ¥è¿›è¡ŒåŒºåˆ†å¤§å°å†™çš„æœå¯»ï¼Œfind -iname æ¥è¿›è¡Œä¸åŒºåˆ†å¤§å°å†™çš„æœå¯»ã€‚ find -iname work.html tar tarå‘½ä»¤èƒ½åˆ›å»ºã€æŸ¥çœ‹å’Œæå–tarå‹ç¼©æ–‡ä»¶ã€‚tar -cvf æ˜¯åˆ›å»ºå¯¹åº”å‹ç¼©æ–‡ä»¶ï¼Œtar -tvf æ¥æŸ¥çœ‹å¯¹åº”å‹ç¼©æ–‡ä»¶ï¼Œtar -xvf æ¥æå–å¯¹åº”å‹ç¼©æ–‡ä»¶ã€‚ 1. tarã€zipã€rar æ–‡ä»¶è§£å‹ç¼©å‚è€ƒä¸­æ–‡æ–‡æ¡£ï¼štarã€rarã€unrarã€zipã€unzip 1.1. tar å‘½ä»¤è¯­æ³•ï¼š tar [ä¸»é€‰é¡¹ + è¾…é€‰é¡¹] æ–‡ä»¶æˆ–ç›®å½• ç¤ºä¾‹ï¼š 1234567891011# å‹ç¼©æ–‡ä»¶ file1 å’Œç›®å½• dir2 åˆ° test.tar.gztar -zcvf test.tar.gz file1 dir2# è§£å‹ test.tar.gzï¼ˆå°† c æ¢æˆ x å³å¯ï¼‰tar -zxvf test.tar.gz# åˆ—å‡ºå‹ç¼©æ–‡ä»¶çš„å†…å®¹tar -ztvf test.tar.gz # è§£å‹åˆ°æŒ‡å®šç›®å½•tar -zxvf test.tar.gz -C /home é‡Šä¹‰ï¼š -z : ä½¿ç”¨ gzip æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ -v : â€“verbose è¯¦ç»†çš„åˆ—å‡ºå¤„ç†çš„æ–‡ä»¶ -f : â€“file&#x3D;ARCHIVE ä½¿ç”¨æ¡£æ¡ˆæ–‡ä»¶æˆ–è®¾å¤‡ï¼Œè¿™ä¸ªé€‰é¡¹é€šå¸¸æ˜¯å¿…é€‰çš„ -c : â€“create åˆ›å»ºä¸€ä¸ªæ–°çš„å½’æ¡£ï¼ˆå‹ç¼©åŒ…ï¼‰ -x : ä»å‹ç¼©åŒ…ä¸­è§£å‡ºæ–‡ä»¶ å…¶å®ƒï¼š tar å‘½ä»¤å…¶å®å¹¶ä¸æ˜¯çœŸçš„è§£å‹ç¼©çš„å¤„ç†è€…ï¼Œè€Œæ˜¯ä½¿ç”¨äº† gzip æˆ–è€… bzip2 ç­‰å…¶å®ƒå‘½ä»¤æ¥è¾¾æˆï¼Œä½†æ˜¯ gzip ç­‰å‘½ä»¤é€šå¸¸åªèƒ½å¤„ç†å•ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯é€‰æ‹©ä½¿ç”¨ tar å‘½ä»¤é—´æ¥çš„å®Œæˆè§£å‹ç¼©ã€‚ 1.2. rar å‘½ä»¤ç¤ºä¾‹ï¼š 12345# å‹ç¼©æ–‡ä»¶rar a -r test.rar file# è§£å‹æ–‡ä»¶unrar x test.rar é‡Šä¹‰ï¼š a : æ·»åŠ åˆ°å‹ç¼©æ–‡ä»¶ -r : é€’å½’å¤„ç† x : ä»¥ç»å¯¹è·¯å¾„è§£å‹æ–‡ä»¶ 1.3. zip å‘½ä»¤ç¤ºä¾‹ï¼š 12345# å‹ç¼©æ–‡ä»¶zip -r test.zip file# è§£å‹æ–‡ä»¶unzip test.zip é‡Šä¹‰ï¼š -r : é€’å½’å¤„ç† 2. mv æ–‡ä»¶ç§»åŠ¨ mv: move å°†ä¸€ä¸ªæ–‡ä»¶ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å†… 1mv /file1/file.txt /file2 åˆç†åˆ©ç”¨ * å·ã€‚ï¼ˆ*ä»£è¡¨æ¨¡ç³ŠæŸ¥è¯¢ã€‚ï¼‰ 1234# å°†ä¸€ä¸ªæ–‡ä»¶å†…æ‰€æœ‰æ–‡ä»¶ï¼Œç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å†…mv /file1/* /file2# å°†æ–‡ä»¶å†…æ‰€æœ‰jpgç±»å‹çš„æ–‡ä»¶ï¼Œç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å†…mv /file1/*.jpg /file2 3. scp æœåŠ¡å™¨ä¹‹é—´copyæ–‡ä»¶123456# ä»¥tankç”¨æˆ·ç™»å½•å¹¶å°†æœåŠ¡å™¨æ–‡ä»¶å¤¹copyåˆ°æœ¬åœ°scp -r root@192.16.1.1:/var/www/blog /home/www/blog # å°†æœ¬åœ°æ–‡ä»¶copyåˆ°æœåŠ¡å™¨ï¼Œæ·»å¡«å†™ç”¨æˆ·ï¼Œé»˜è®¤å½“å‰ç”¨æˆ·scp /home/www/blog/index.php root@192.16.1.1:/var/www/blog # åŠ ç«¯å£scp -P 333333 home/www/blog/index.php root@192.16.1.1:/var/www/blog 4. ls æŸ¥çœ‹æ–‡ä»¶å¤¹ä¿¡æ¯1234567891011121314151617# æŸ¥çœ‹å½“å‰ç›®å½•æœ‰å“ªäº›æ–‡ä»¶ls# æŸ¥çœ‹å½“å‰ç›®å½•æœ‰å“ªäº›æ–‡ä»¶ï¼Œå¹¶ä¸”æŸ¥çœ‹å…¶æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ï¼šåˆ›å»ºæ—¶é—´ã€æ–‡ä»¶å¤§å°ll # orls -l# æŸ¥çœ‹å½“å‰ç›®å½•æœ‰å“ªäº›æ–‡ä»¶ï¼Œå¹¶ä¸”æŸ¥çœ‹å…¶æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼Œå¹¶æŒ‰ç…§ä¿®æ”¹æ—¶é—´æ’åºã€‚ll -t# or ls -lt# æŸ¥çœ‹å½“å‰ç›®å½•æœ‰å“ªäº›æ–‡ä»¶ï¼Œå¹¶ä¸”æŸ¥çœ‹å…¶æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼Œæ–‡ä»¶å¤§å°è½¬æ¢ä¸ºäººä»¬å®¹æ˜“ç†è§£çš„æ ¼å¼ã€‚å¦‚ï¼š134Mll -h# orls -lh","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"Shell","slug":"Shell","permalink":"https://guoshunfa.com/tags/Shell/"}]},{"title":"Shell curlæ¨¡æ‹Ÿhttpè¯·æ±‚","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Shell-curlæ¨¡æ‹Ÿhttpè¯·æ±‚","date":"2022-07-01T03:25:33.000Z","updated":"2024-01-28T11:41:39.275Z","comments":true,"path":"2022/07/Shell-curlæ¨¡æ‹Ÿhttpè¯·æ±‚/","link":"","permalink":"https://guoshunfa.com/2022/07/Shell-curl%E6%A8%A1%E6%8B%9Fhttp%E8%AF%B7%E6%B1%82/","excerpt":"","text":"1. curl å‘½ä»¤å‚æ•°æè¿°12345curl &quot;http://www.baidu.com&quot; # å¦‚æœè¿™é‡Œçš„URLæŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ä¸€å¹…å›¾éƒ½å¯ä»¥ç›´æ¥ä¸‹è½½åˆ°æœ¬åœ°curl -i &quot;http://www.baidu.com&quot; # æ˜¾ç¤ºå…¨éƒ¨ä¿¡æ¯curl -I &quot;http://www.baidu.com&quot; # åªæ˜¾ç¤ºå¤´éƒ¨ä¿¡æ¯curl -v &quot;http://www.baidu.com&quot; # æ˜¾ç¤ºgetè¯·æ±‚å…¨è¿‡ç¨‹è§£æcurl -X GET &quot;http://www.baidu.com&quot; # æŒ‡å®šè¯·æ±‚æ–¹å¼ 2. curl å‘½ä»¤æ¨¡æ‹Ÿ http getè¯·æ±‚æ¡ˆä¾‹ï¼š 1curl -v &quot;http://127.0.0.1:80/xcloud/test?version=1&amp;client_version=1.1.0&amp;seq=1001&amp;host=aaa.com&quot; å»ºè®®ä½¿ç”¨åŒå¼•å·æ¥åŒ…è£¹è¯·æ±‚ï¼Œä¸ä½¿ç”¨åŒå¼•å·çš„è¯éœ€è¦åŠ å…¥è½¬è¯‘ç¬¦ã€‚ 1curl -v http://127.0.0.1:80/xcloud/test?version=1\\&amp;client_version=1.1.0\\&amp;seq=1001\\&amp;host=aaa.com 3. curl å‘½ä»¤æ¨¡æ‹Ÿ http postè¯·æ±‚å‘é€è¯·æ±‚ï¼ŒContent-Type: application&#x2F;json 1curl -X POST -H &quot;Content-Type: application/json&quot; -d &#x27;&#123;&quot;name&quot;: &quot;Jason&quot;, &quot;email&quot;: &quot;jason@example.com&quot;&#125;&#x27; https://example/contact å‘é€è¯·æ±‚ï¼ŒContent-type:application&#x2F;x-www-form-urlencoded 1curl -X POST -d &#x27;name=Jason&#x27; -d &#x27;email=jason@example.com&#x27; https://example.com/contact.php å‘é€è¯·æ±‚ï¼ŒContent-type:multipart&#x2F;form-data 1curl -X POST -F &#x27;name=Jason&#x27; -F &#x27;email=jason@example.com&#x27; https://example.com/contact.php","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"Shell","slug":"Shell","permalink":"https://guoshunfa.com/tags/Shell/"},{"name":"Curl","slug":"Curl","permalink":"https://guoshunfa.com/tags/Curl/"},{"name":"Http","slug":"Http","permalink":"https://guoshunfa.com/tags/Http/"}]},{"title":"shell sshè¿œç¨‹è¿æ¥å·¥å…·","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/shell-sshè¿œç¨‹è¿æ¥å·¥å…·","date":"2022-07-01T03:24:28.000Z","updated":"2024-01-28T11:41:39.276Z","comments":true,"path":"2022/07/shell-sshè¿œç¨‹è¿æ¥å·¥å…·/","link":"","permalink":"https://guoshunfa.com/2022/07/shell-ssh%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E5%B7%A5%E5%85%B7/","excerpt":"","text":"1. å‘½ä»¤ ssh ç”¨æˆ·å@ä¸»æœºIP ssh ä¸»æœºIP ssh -i pemæ–‡ä»¶è·¯å¾„ ç”¨æˆ·å@ä¸»æœºIP ssh -p ç«¯å£ ç”¨æˆ·å@ä¸»æœºIP 2. ssh æºå¸¦å¯†ç ç™»å½•-sshpass è¯¦ç»†å†…å®¹å¯ç›´æ¥æŸ¥çœ‹sshpassä½¿ç”¨è¯´æ˜ sshpass -p [passwd] ssh -p [port] root@192.168.X.X 3. sshé€šè¿‡pemæ–‡ä»¶ç™»é™†æœåŠ¡å™¨ä¸€äº›ä¸ºäº†å®‰å…¨æ“ä½œï¼Œæ¨èä½¿ç”¨ç§é’¥è¿›è¡Œç™»å½•æœåŠ¡å™¨ï¼Œæ‹¿jenkinsæ¥è¯´ï¼Œé»˜è®¤çš„éªŒè¯æ–¹å¼å°±æ˜¯ç§é’¥ 3.1. å®ç°æ–¹å¼å…ˆåœ¨æœ¬æœºé€šè¿‡ssh-keygenç›´æ¥ç”Ÿæˆå…¬ç§é’¥ å¦‚ä¸‹åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆmy.pem(ç§é’¥)å’Œmy.pem.pub(å…¬é’¥) ssh-keygen -t rsa -f my.pem å‚æ•°è¯´æ˜ï¼š-t typeå¯†é’¥ç±»å‹ï¼ˆrsaã€dsaâ€¦ï¼‰ï¼Œ-fç”Ÿæˆæ–‡ä»¶å 3.2. ç”Ÿæˆçš„æ–‡ä»¶my.pem å’Œ my.pem.pub å°†my.pem.pubå†…å®¹ä¸Šä¼ è‡³ä½ éœ€è¦è¿æ¥çš„æœåŠ¡å™¨ æ“ä½œæ­¥éª¤ï¼Œç¼–è¾‘authorized_keysæ–‡ä»¶ï¼Œè·¯å¾„åœ¨å½“å‰ç”¨æˆ·ç›®å½•ä¸‹çš„.sshæ–‡ä»¶å¤¹ä¸‹ å°†ç”Ÿæˆçš„pubæ–‡ä»¶çš„å†…å®¹è¿½åŠ åˆ°authorized_keysæ–‡ä»¶ä¸­ ä¿å­˜é€€å‡ºä¹‹åå°±å¯ä»¥é€šè¿‡ssh -i file.pem user@ipè®¿é—®äº†","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"Shell","slug":"Shell","permalink":"https://guoshunfa.com/tags/Shell/"},{"name":"ssh","slug":"ssh","permalink":"https://guoshunfa.com/tags/ssh/"}]},{"title":"æ ‘è“æ´¾4B è¸©å‘è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/æ ‘è“æ´¾4B-è¸©å‘è®°å½•","date":"2022-07-01T03:20:25.000Z","updated":"2024-01-28T11:41:39.276Z","comments":true,"path":"2022/07/æ ‘è“æ´¾4B-è¸©å‘è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%A0%91%E8%8E%93%E6%B4%BE4B-%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/","excerpt":"","text":"1. æ ‘è“æ´¾4Bäº§å“æ¦‚è¿° æˆ‘æ˜¯æ ‘è“æ´¾4ä»£Bå‹ï¼Œç›¸æ¯”3B+ï¼Œæˆ‘çš„å¤„ç†å™¨é€Ÿåº¦æ˜¾è‘—æå‡ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„å¤šåª’ä½“ï¼Œå¤šä¸ªå†…å­˜ç‰ˆæœ¬å’Œæ›´å‡ºè‰²çš„è¿æ¥æ€§,é›†æˆäº†è¿æ¥USB 2å’ŒUSB 3ç«¯å£çš„PCIeé“¾è·¯ä»¥åŠæœ¬æœºè¿æ¥çš„ä»¥å¤ªç½‘æ§åˆ¶å™¨ï¼Œå®ƒå…·æœ‰æå¤§æ”¹è¿›çš„GPUåŠŸèƒ½é›†ï¼Œè¾“å…¥&#x2F;è¾“å‡ºé€Ÿåº¦æ›´å¿«ã€‚ 2. çƒ§å†™é•œåƒ2.1. å‡†å¤‡å¥½ SDå¡ã€è¯»å¡å™¨ã€‚ ä¸‹è½½ç³»ç»Ÿé•œåƒï¼ˆRaspberry Pi OSï¼‰å’Œçƒ§å½•è½¯ä»¶ï¼ˆRaspberry Pi Imagerï¼‰ ç³»ç»Ÿé•œåƒä»å®˜ç½‘ä¸Šç›´æ¥ä¸‹è½½å¾ˆæ…¢ï¼Œå¯ä»¥é€‰æ‹©ä¸‹è½½ç§å­ï¼Œå†é€šè¿‡ç™¾åº¦ç½‘ç›˜æˆ–å…¶ä»–å¹³å°è¿›è¡Œä¸‹è½½ï¼Œæˆ‘è¿™é‡Œå‡†å¤‡äº†ç™¾åº¦ç½‘ç›˜çš„ä¸‹è½½é“¾æ¥ã€‚ åç§° è¯´æ˜ ç§å­ä¸‹è½½é“¾æ¥ ç™¾åº¦ç½‘ç›˜ ç™¾åº¦ç½‘ç›˜æå–ç  Raspberry Pi OS æ¡Œé¢ç‰ˆï¼Œå«å¸¸ç”¨è½¯ä»¶ Release date: May 7th 2021Kernel version: 5.10Size: 2,867MB Download torrent https://pan.baidu.com/s/1gfeGlSBiCL82rkENUv9tSA mswq Raspberry Pi OS æ¡Œé¢ç‰ˆ Release date: May 7th 2021Kernel version: 5.10Size: 1,180MB Download torrent Raspberry Pi OS è½»é‡ç‰ˆ Release date: May 7th 2021Kernel version: 5.10Size: 444MB Download torrent çƒ§å½•è½¯ä»¶ä¸‹è½½åœ°å€ï¼š æœ¬åœ°ä¸‹è½½ Raspberry Pi Imager for Windows å®˜æ–¹ä¸‹è½½ Raspberry Pi Imager for Windows å®˜æ–¹ä¸‹è½½ Raspberry Pi Imager for macOS å®˜æ–¹ä¸‹è½½ Raspberry Pi Imager for Ubuntu 2.2. çƒ§å†™é•œåƒ1). ç‚¹å‡» CHOOSE OSï¼š 2). ç‚¹å‡» Use customï¼Œç„¶åé€‰æ‹©ä¸‹è½½å¥½çš„é•œåƒï¼ˆå³ #ä½¿ç”¨è¯´æ˜ ç¬¬2æ­¥ä¸‹è½½çš„é•œåƒï¼Œä¸æ˜¯ Raspberry Pi Imagerï¼‰ï¼Œæ— éœ€è§£å‹ï¼š 3). ç‚¹å‡» CHOOSE SD CARD é€‰æ‹© SD å¡ã€‚ 4). ç‚¹å‡» WRITE å†™å…¥é•œåƒã€‚æ³¨æ„ï¼Œæ–‡ä»¶å¤¹åç§°å«æœ‰ä¸­æ–‡å¯èƒ½ä¼šå¯¼è‡´çƒ§å½•å¤±è´¥ã€‚ 3. HDMI å±å¹•æ˜¾ç¤º1). æ ‘è“æ´¾æœ‰ä¸¤ä¸ª HDMI å£ï¼Œä½†åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œåªå·¥ä½œäºé è¿‘ç”µæºçš„ HDMI å£ã€‚ 2). ç¼–è¾‘ config.txtï¼ŒåŠ å…¥ï¼š 123456789hdmi_safe=1overscan_left=-30overscan_right=-30overscan_top=-30overscan_bottom=-30hdmi_group=2hdmi_mode=4hdmi_drive=2config_hdmi_boost=4 å†é‡å¯åŠ¨æ ‘è“æ´¾ã€‚ 3). å¦‚æœä¸Šé¢è¿™æ®µæ— æ³•è§£å†³æ‚¨çš„é—®é¢˜ï¼Œè¯·é‡æ–°æ³¨é‡Šæ‰ï¼Œç„¶ååŠ å…¥ä¸‹é¢è¿™æ®µï¼š 123456max_usb_current=1hdmi_force_hotplug=1 config_hdmi_boost=10hdmi_group=2 hdmi_mode=87 hdmi_cvt 1920 1080 60 6 0 0 0 æ³¨æ„ï¼Œ1920 1080 éœ€è¦æ”¹æˆæ˜¾ç¤ºå™¨å¯¹åº”çš„åˆ†è¾¨ç‡ã€‚ 4. SSHè¿æ¥4.1. é€šè¿‡ä¿®æ”¹SDå¡å†…æ–‡ä»¶åŠ å…¥æ–‡ä»¶SSHï¼Œå³å¯ã€‚æ²¡æœ‰ä»»ä½•åç¼€ã€‚ 5. è¿æ¥WIFI5.1. é€šè¿‡ä¿®æ”¹SDå¡å†…æ–‡ä»¶1). æ‰“å¼€bootæ–‡ä»¶ 2). æ–°å»ºæ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºï¼š wpa_supplicant.conf 3). ä¿®æ”¹wpa_supplicant.confæ–‡ä»¶ åŠ å…¥networkï¼Œssidæ˜¯éœ€è¦è¿æ¥çš„wifiåç§°ï¼›pskæ˜¯å¯¹åº”wifiå¯†ç ï¼›key_mgmtæ˜¯åŠ å¯†æ–¹å¼ï¼›priorityæ˜¯ä¼˜å…ˆçº§ã€‚ 12345678910country=CNctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdevupdate_config=1network=&#123;ssid=&quot;smp&quot;psk=&quot;87654321&quot;key_mgmt=WPA-PSKpriority=1&#125; 6. VNCç™»é™†æ“ä½œç³»ç»Ÿå¯è§†åŒ–é¡µé¢ä½¿ç”¨VNCä¹‹å‰ï¼Œéœ€è¦é…ç½®ç¯å¢ƒ 1). è¾“å…¥é…ç½®å‘½ä»¤ 1sudo raspi-config 2). è°ƒæ•´SSHå’ŒVPNé…ç½® é€‰æ‹©Interface Optionsï¼Œenterã€‚ é€‰æ‹©SSHï¼Œenter é€‰æ‹©YESï¼Œenter ![image-20211114121052122](&#x2F;Users&#x2F;guoshunfa&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20211114121052122.png) SSHç»“æŸï¼ŒVNCä¹Ÿå’ŒSSHç›¸åŒæ“ä½œã€‚ æœ€åé€‰æ‹©Finishï¼Œé…ç½®åŸºæœ¬æˆåŠŸ ä½¿ç”¨VNCè¿æ¥å·¥å…·ï¼Œè¾“å…¥ipã€ç”¨æˆ·åå¯†ç å°±å¯ä»¥ç™»é™†åˆ°æ ‘è“æ´¾å¯è§†åŒ–é¡µé¢ã€‚ æˆ‘è¿™è¾¹ä½¿ç”¨çš„æ˜¯VNC Viewer å‚è€ƒæ–‡æ¡£ Raspberry Pi 4 Model B","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://guoshunfa.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"},{"name":"æ ‘è“æ´¾4B","slug":"æ ‘è“æ´¾4B","permalink":"https://guoshunfa.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE4B/"}]},{"title":"æ ‘è“æ´¾ èµ„æ–™è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/æ ‘è“æ´¾-èµ„æ–™è®°å½•","date":"2022-07-01T03:19:28.000Z","updated":"2024-01-28T11:41:39.276Z","comments":true,"path":"2022/07/æ ‘è“æ´¾-èµ„æ–™è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/%E6%A0%91%E8%8E%93%E6%B4%BE-%E8%B5%84%E6%96%99%E8%AE%B0%E5%BD%95/","excerpt":"","text":"æœ¬æ–‡å°†éƒ¨åˆ†æ¿å—ä¸­çš„æ•™ç¨‹è¿›è¡Œäº†æ±‡æ€»ï¼Œéƒ¨åˆ†æ•™ç¨‹ä¸ºéå®˜æ–¹æ•™ç¨‹ï¼Œä»…ä¾›å‚è€ƒã€‚ ï¼ˆå›¾ç‰‡æ¥æºç½‘ç»œï¼‰ æ ‘è“æ´¾ä»‹ç»ï¼ˆæ¥æºç™¾åº¦ç™¾ç§‘ï¼‰ï¼šRaspberry Pi(ä¸­æ–‡åä¸ºâ€œæ ‘è“æ´¾â€,ç®€å†™ä¸ºRPiï¼Œ(æˆ–è€…RasPi &#x2F; RPI) æ˜¯ä¸ºå­¦ä¹ è®¡ç®—æœºç¼–ç¨‹æ•™è‚²è€Œè®¾è®¡)ï¼Œåªæœ‰ä¿¡ç”¨å¡å¤§å°çš„å¾®å‹ç”µè„‘ï¼Œå…¶ç³»ç»ŸåŸºäºLinuxã€‚éšç€Windows 10 IoTçš„å‘å¸ƒï¼Œæˆ‘ä»¬ä¹Ÿå°†å¯ä»¥ç”¨ä¸Šè¿è¡ŒWindowsçš„æ ‘è“æ´¾ã€‚ è´­ä¹°é“¾æ¥ï¼šæ ‘è“æ´¾ç›¸å…³äº§å“è´­ä¹°é“¾æ¥ æ ‘è“æ´¾3ä»£A+ç‰ˆï¼ˆè´­ä¹°é“¾æ¥ï¼‰å…¨åRaspberry Pi 3 Model A+ï¼Œè¿™æ˜¯æ ‘è“æ´¾åŸºé‡‘ä¼šå‘å¸ƒçš„æœ€æ–°ä¸€æ¬¾æ ‘è“æ´¾æˆå‘˜ï¼Œä¹‹å‰åœ¨2014å¹´å‘å¸ƒäº†1ä»£çš„A+ç‰ˆæœ¬ï¼Œä½†ä¹‹åå¹¶æ²¡æœ‰æ¨å‡º2ä»£A+ï¼Œè¿™æ­¤æ–°ç‰ˆçš„3ä»£A+ç‰ˆæœ¬é‡‡ç”¨äº†æ ‡å‡†çš„A+å°ºå¯¸ï¼Œä¸Raspberry Pi 3 Model B+ä¸€æ ·ï¼Œå®ƒæ‹¥æœ‰64ä½å››æ ¸1.4GHzå¤„ç†å™¨ï¼ŒåŒé¢‘2.4GHzå’Œ5GHzæ— çº¿ç½‘ç»œã€è“ç‰™4.2&#x2F;BLE,ä»¥åŠç»è¿‡æ”¹è¿›çš„æ•£çƒ­ç®¡ç†ç›¸æ¯”äºRaspberry Pi 3 Model B+ï¼Œå®ƒå‡å°äº†å†…å­˜ï¼Œç§»é™¤äº†USBé›†çº¿å™¨å’Œä»¥å¤ªç½‘ç½‘å¡ï¼Œä½¿å¾—å®ƒä½“å‹æ›´åŠ å°å·§ï¼ŒåŒæ—¶ä»·æ ¼æ›´ä½ï¼Œå¹¶èƒ½å¤Ÿå…¼å®¹1ä»£A+ï¼Œå¦‚æœå–œæ¬¢1ä»£A+æˆ–è€…éœ€è¦å°ºå¯¸æ›´å°çš„æ ‘è“æ´¾ä¸»æ¿çš„è¯ï¼Œé‚£ä¹ˆ3A+æ˜¯æ‚¨æœ€å¥½çš„é€‰æ‹©ã€‚ Raspberry Pi Zero WåŸç†å›¾.pdfRaspberry Pi ZeroåŸç†å›¾.pdfRaspberry Pi Model a+åŸç†å›¾.pdfRaspberry Pi Model B+åŸç†å›¾.pdfRaspberry Pi 2 Model BåŸç†å›¾.pdfRaspberry Pi 3 Model BåŸç†å›¾.pdfRaspberry Pi 3 Model B+åŸç†å›¾.pdfRaspberry Pi PoE HATæœºæ¢°å›¾çº¸.pdfRaspberry Pi Zero (v1.2)æœºæ¢°å›¾çº¸.pdfaspberry Pi Model B+æœºæ¢°å›¾çº¸.pdfRaspberry Pi 3Bæœºæ¢°å›¾çº¸.pdfRaspberry Pi 3B+æœºæ¢°å›¾çº¸.pdf ã€æ ‘è“æ´¾æ•™ç¨‹ã€‘vimç¼–è¾‘å™¨çš„å¸¸ç”¨å‘½ä»¤Pythonç‚¹äº®LEDSPIé©±åŠ¨OLED 128*64I2cé©±åŠ¨ 1602 LCDè·å–æ ‘è“æ´¾å½“å‰çŠ¶æ€å’Œæ•°æ®è·å–Yahooæ°”è±¡é¢„æŠ¥æ­å»ºç½‘ç»œæœåŠ¡å™¨æ— çº¿ç½‘å¡é…ç½®â€”â€”WiFiç”¨æ ‘è“æ´¾å®ç°RGB LEDçš„é¢œè‰²æ§åˆ¶æ ‘è“æ´¾åŠå…¼å®¹æ¿æ ‘è“æ´¾é…ç½®æ–‡æ¡£ config.txt è¯´æ˜æ ‘è“æ´¾åŠå…¼å®¹æ¿å¦‚ä½•è®©æ ‘è“æ´¾æ˜¾ç¤ºä¸­æ–‡æ ‘è“æ´¾åŠå…¼å®¹æ¿Adafruit TFT2.8â€Touch Shield For RPiç‚¹äº®Pythonä½¿ç”¨PWMPythonæ§åˆ¶èˆµæœºæ ‘è“æ´¾3å¼€å¯è“ç‰™æ ‘è“æ´¾åŠå…¼å®¹æ¿æ ‘è“æ´¾æ‘„åƒå¤´ä½¿ç”¨æ ‘è“æ´¾3ä¸²å£é—®é¢˜ä»¥åŠè®¾ç½®æ ‘è“æ´¾çš„ä¾›ç”µæ–¹å¼ä½¿ç”¨I2C ã€Raspberry Pi-iooopsã€‘ã€Raspberry Piå…¥é—¨ã€‘GUIç¼–ç¨‹ã€Raspberry Piå…¥é—¨ã€‘ç›¸æœºã€Raspberry Piå…¥é—¨ã€‘PWMã€Raspberry Piå…¥é—¨ç³»åˆ—1+ã€‘æ¦‚è¿° Raspi-config ã€Raspberry Piå…¥é—¨ç³»åˆ—1ã€‘æ¦‚è¿°ã€Raspberry Piå…¥é—¨ç³»åˆ—2ã€‘Raspbian&#x2F;Linuxç»ˆç«¯å¸¸ç”¨å‘½ä»¤ã€Raspberry Piå…¥é—¨ç³»åˆ—3ã€‘PYTHONåŸºç¡€ã€Raspberry Piå…¥é—¨ç³»åˆ—4ã€‘GPIOã€processingç³»åˆ—Iã€‘processingä¸arduinoé€šä¿¡ã€processingç³»åˆ—Iã€‘processingä¸arduinoé€šä¿¡ ã€RaspberryPiè§£ç­”ã€‘ä½¿ç”¨æˆªå±å·¥å…·ã€Raspberry Piè§£ç­”ã€‘å¦‚ä½•ä¸ºraspberry Piå®‰è£…ä¸­æ–‡å­—ä½“ã€Raspberry Piã€‘å¦‚ä½•é€‰æ‹©é»˜è®¤å£°å¡ ã€Raspberry PiéŸ³é¢‘å¼€å‘ã€‘CSoundã€Raspberry Piå°è´´å£«ã€‘è®¾ç½®å›ºå®šIP ã€Raspberry Piç½‘ç»œç¼–ç¨‹2ã€‘Socketsã€Raspberry Piç½‘ç»œç¼–ç¨‹1ã€‘SSHã€Raspberry Piç½‘ç»œç¼–ç¨‹2+ã€‘ncå‘½ä»¤ ã€èœé¸Ÿæ•™ç¨‹ã€‘èœé¸Ÿæ•™ç¨‹ä¸€:å¦‚ä½•åœ¨winç³»ç»Ÿä¸‹å®‰è£…æ ‘è“æ´¾çš„ç³»ç»Ÿåˆ°SDå¡èœé¸Ÿæ•™ç¨‹äºŒ:æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•å®‰è£…å’Œå¯åŠ¨ä½ çš„æ ‘è“æ´¾ï¼èœé¸Ÿæ•™ç¨‹ä¸‰:10åˆ†é’Ÿ3å…ƒé’±å®Œç¾æ‰“é€ æ ‘è“æ´¾äºšå…‹åŠ›å¤–å£³èœé¸Ÿæ•™ç¨‹å››:æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•è®¾ç½®æ ‘è“æ´¾çš„åˆ†è¾¨ç‡ï¼èœé¸Ÿæ•™ç¨‹äº”:æ•™ä½ å¦‚ä½•åœ¨debianä¸‹ç”¨æ ‘è“æ´¾çœ‹é«˜æ¸…ç”µå½±ï¼èœé¸Ÿæ•™ç¨‹å…­:æ ‘è“æ´¾è£…Xbianã€æ— çº¿ç½‘å¡é…ç½®ã€çœ‹ç”µå½±ç”µè§†èœé¸Ÿæ•™ç¨‹ä¸ƒ:æ‰‹æŠŠæ‰‹æ•™ä½ ä¸¤æ­¥è®©æ ‘è“æ´¾æ˜¾ç¤ºä¸­æ–‡ï¼èœé¸Ÿæ•™ç¨‹å…«:æ•™ä½ å¦‚ä½•åœ¨æ ‘è“æ´¾ä¸Šä½¿ç”¨usbç½‘å¡èœé¸Ÿæ•™ç¨‹ä¹:æ•™ä½ å¦‚ä½•å°†æ ‘è“æ´¾å˜æˆNASç½‘ç»œå­˜å‚¨è®¾ ã€ä¸­çº§æ•™ç¨‹ã€‘ä¸­çº§æ•™ç¨‹ä¸€:æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•ä½¿ç”¨æ ‘è“æ´¾çš„GPIOæ§åˆ¶LEDï¼ä¸­çº§æ•™ç¨‹äºŒ:ä½ ä½¿ç”¨rpi-updateè½»æ¾å®ç°firmwareæ›´æ–°ä¸­çº§æ•™ç¨‹ä¸‰:æ•™ä½ å¦‚ä½•åœ¨æ ‘è“æ´¾ä¸Šä½¿ç”¨usbæ‘„åƒå¤´ä¸­çº§æ•™ç¨‹å››:æ•™ä½ ç”¨æ ‘è“æ´¾é€šè¿‡usbæ‘„åƒå¤´å®ç°ç½‘ç»œç›‘æ§åŠŸèƒ½ ã€è¾¹å­¦è¾¹ç”¨æ ‘è“æ´¾-BoBoã€‘Raspberry Pi wifiæ— çº¿ç½‘å¡è®¾ç½®PCçš„å±å¹•é€šè¿‡ç½‘ç»œæ˜¾ç¤ºæ ‘è“æ´¾ç•Œé¢æ­å»ºFTP å®ç°PCä¸æ ‘è“æ´¾ä¹‹é—´ä¼ è¾“æ–‡ä»¶I2Cæ€»çº¿çš„ä½¿ç”¨å’ŒDS1307 RTCè®¾ç½®æ ‘è“æ´¾é€šè¿‡Shellè„šæœ¬æ§åˆ¶ GPIOæ ‘è“æ´¾é€šè¿‡Pythonæ§åˆ¶ GPIOæ ‘è“æ´¾ä¸Šå®‰è£…Arduino IDEä½¿ç”¨Firmataåè®®å’ŒArduinoè¿›è¡Œé€šä¿¡Raspberry Pi è®¿é—®å¤©æ°”æœåŠ¡å™¨å®éªŒRaspberry Pi åšWebæœåŠ¡å™¨-ä¸Š ã€è½¬-æ ‘è“æ´¾3ç³»åˆ—æ•™ç¨‹ã€‘æ ‘è“æ´¾3-ä»‹ç»æ ‘è“æ´¾3-SDå¡æ ¼å¼åŒ–-Windowsä¸‹åˆ©ç”¨SDFormatteræ ¼å¼åŒ–SDå¡æ ‘è“æ´¾3-ç³»ç»Ÿå®‰è£…-åˆ©ç”¨Noobsè¿›è¡Œç³»ç»Ÿå®‰è£…æ ‘è“æ´¾3-ç³»ç»Ÿå®‰è£…-åˆ©ç”¨Noobsè¿›è¡Œç³»ç»Ÿæ¢å¤æ ‘è“æ´¾3-SDå¡æ ¼å¼åŒ–-Windowsä¸‹åˆ©ç”¨SDFormatteræ ¼å¼åŒ–SDå¡æ ‘è“æ´¾3-SDå¡æ ¼å¼åŒ–-linuxä¸‹æ ¼å¼åŒ–SDå¡æ ‘è“æ´¾3-ç³»ç»Ÿå®‰è£…-Windowsä¸‹åˆ©ç”¨Win32DiskImagerè¿›è¡Œç³»ç»Ÿå®‰è£… ã€é¦™è•‰æ´¾Banana piã€‘Banana PIï¼šé¦™è•‰æ´¾Banana pi BPI-M64 å››æ ¸å¿ƒ64ä½å¼€æºå•æ¿è®¡ç®—æœº å…¨å¿—A64æ–¹æ¡ˆBanana PIï¼šé¦™è•‰æ´¾ BPI-M2 Magic (BPi-M2M) å››æ ¸å¼€æºç‰©è”ç½‘å¼€å‘æ¿Banana PIï¼šBanana pi BPI-R2 å¼€æºæ™ºèƒ½è·¯ç”±å™¨ MTK 7623N æ–¹æ¡ˆè®¾è®¡Banana PIï¼šé¦™è•‰æ´¾ Banana pi BPI-M2 Berry å››æ ¸å¼€æºå•æ¿è®¡ç®—æœº ã€ç›¸å…³æ–‡ç« ã€‘ä½œè€…ï¼šyoyojackyã€Šã€éª‘é©´ç©å„¿æ¼‚ç§»ã€‘åŸåˆ›-æ ‘è“æ´¾BOOMBOOMBOARDè¯ç”Ÿè®°ã€‹ä½œè€…ï¼šyoyojackyã€Šã€åŸåˆ›ã€‘æƒ³èµ·ä»¥å‰ä¸ºæ ‘è“æ´¾åšçš„å°éŸ³ç®±å°éŸ³ç®±ã€‹ä½œè€…ï¼šyoyojackyã€Šã€éª‘é©´ç©å„¿æ¼‚ç§»-åŸåˆ›ã€‘æ ‘è“æ´¾çˆ±ä¸ŠGPSã€‹ä½œè€…ï¼šyoyojackyã€Šã€éª‘é©´ç©å„¿æ¼‚ç§»ã€‘æ ‘è“æ´¾å…¥é—¨è¯¾ç¨‹è¿è½½ä¹‹vimä½¿ç”¨å°æŠ€å·§ã€‹ä½œè€…ï¼šyoyojackyã€Š52Pi-éª‘é©´ç©å„¿æ¼‚ç§»-æ ‘è“æ´¾å¹²ç‚¹å„¿å•¥ä¹‹åˆ«å¹ç¯-(^__^)ã€‹ä½œè€…ï¼šyoyojackyã€Šã€éª‘é©´ç©å„¿æ¼‚ç§»ã€‘ä»¥å‰åšçš„æ ‘è“æ´¾æ’­æŠ¥IPåœ°å€ã€‹ä½œè€…ï¼šyoyojackyã€Šè¯•è¯•ç”¨æ ‘è“æ´¾è°ƒè¯• ESP32æ¨¡å—ã€‹ä½œè€…ï¼šä½³è å¸…èƒ¡ã€Šç©è½¬æ ‘è“æ´¾zeroç¬¬ä¸‰å­£ åˆ¶ä½œæ‰©å±•æ¿ã€‹ä½œè€…ï¼šä½³è å¸…èƒ¡ã€Šç©è½¬æ ‘è“æ´¾zero ç¬¬äºŒå­£ è¢«å‘äº†ã€‹ä½œè€…ï¼šä½³è å¸…èƒ¡ã€Šç©è½¬æ ‘è“æ´¾zeroç¬¬ä¸€å­£ã€‹ ä½œè€…ï¼šå¤§è¿æ—æµ·ã€Šæ ‘è“æ´¾åˆ¶ä½œçš„è‡ªåŠ¨é™¤è‰æœºå™¨ã€‹ä½œè€…ï¼šå¤§è¿æ—æµ·ã€Šæ ‘è“æ´¾æ•™ç¨‹ä¹‹ä½¿ç”¨yeelinkè¿›è¡Œè¿œç¨‹ç›‘æ§ã€‹ä½œè€…ï¼šå¤§è¿æ—æµ·ã€Šæ‰‹æŠŠæ‰‹æ•™ä½ æ ‘è“æ´¾ä¸Arduino Unoçš„å¯¹æ¥(USBåŠGPIOæ–¹å¼)ã€‹ä½œè€…ï¼šå¤§è¿æ—æµ·ã€Šä¸ªäººå¼€å‘çš„æ ‘è“æ´¾Win10å¿«é€Ÿå®‰è£…å·¥å…·åŒ…ã€‹ä½œè€…ï¼šå¤§è¿æ—æµ·ã€Šç”¨æ ‘è“æ´¾æ‰“é€ çš„æ•é¼ æé†’å™¨ã€‹ä½œè€…ï¼šå¤§è¿æ—æµ·ã€Šè¶…é…·è€çˆ¸ä¸ºå­©å­ç”¨æ ‘è“æ´¾å’Œarduinoåˆ¶ä½œæ¨¡æ‹Ÿâ€œç«ç®­æ§åˆ¶å°â€ã€‹ ä½œè€…ï¼švisionslã€Šå®‰è£…ç³»ç»Ÿ+Node.js+MongoDBç³»åˆ—ç¯å¢ƒ.æ ‘è“æ´¾ç³»åˆ—(ä¸€)ã€‹ä½œè€…ï¼švisionslã€Šä½¿ç”¨Node.jsæ§åˆ¶GPIO.æ ‘è“æ´¾ç³»åˆ—(äºŒ)ã€‹ä½œè€…ï¼švisionslã€Šä½¿ç”¨Node.jsæ¥åˆ¶ä½œä¸€ä¸ªä½œä¸šæ£€æŸ¥ä»ª.æ ‘è“æ´¾(ä¸‰)ã€‹ä½œè€…ï¼švisionslã€Šæ ‘è“æ´¾.GPRS.çŸ­ä¿¡æ¥æ”¶å™¨ã€‹ ä½œè€…ï¼šå‡Œé£æ¸…ç¾½ã€Šç”¨Pythonè®©Raspberry Piâ€œåŠ¨â€èµ·æ¥ â€“å¼€å¯æ ‘è“æ´¾çš„æœºå™¨äººåˆ¶ä½œç”¨ã€‹ä½œè€…ï¼šå‡Œé£æ¸…ç¾½ã€Š[ç”¨æ ‘è“æ´¾åˆ¶ä½œä½æˆæœ¬é«˜æ¸…ç›‘æ§æ‘„åƒæœº è¯‘]ã€‹ä½œè€…ï¼šå‡Œé£æ¸…ç¾½ã€Šã€è½¬è½½ã€‘ç”¨çº¢å¤–é¥æ§å™¨é¥æ§æ ‘è“æ´¾ã€‹ä½œè€…ï¼šå‡Œé£æ¸…ç¾½ã€Šã€è½¬è½½ã€‘ä½¿ç”¨æ ‘è“æ´¾åˆ¶ä½œè¡Œè½¦è®°å½•ä»ªã€‹ ä½œè€…ï¼šcopyc4ã€Šã€KEå­¦æ€ªäººã€‘æ ‘è“æ´¾ç›¸æœºã€‹ä½œè€…ï¼šcopyc4ã€Šã€KEå­¦æ€ªäººã€‘æ ‘è“æ´¾åˆ¶ä½œæ‹ç«‹å¾—ï¼ˆå¢åŠ è§†é¢‘æ•™ç¨‹ï¼‰ã€‹ ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šç”¨çº¢å¤–é¥æ§å™¨é¥æ§æ ‘è“æ´¾ã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢ç´ä¾ ã€Šä½¿ç”¨æ ‘è“æ´¾Zeroåˆ¶ä½œä¸€æ¶APMå››è½´æ— äººæœºã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šåœ¨æ ‘è“æ´¾ä¸Šç”¨Makeæ¥å…¥é—¨ç®€å•çš„å¹¶è¡Œè®¡ç®—ã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€ŠåŸºäºUbuntu Mateçš„æ ‘è“æ´¾NASæ­å»ºã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šæ ‘è“æ´¾æ‰“é€ æ€€æ—§æ¸¸æˆæœºã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šæ ‘è“æ´¾ä¸Šçš„Badappleã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šç”¨æ ‘è“æ´¾å’Œæ˜¾ç¤ºå™¨åˆ¶ä½œä¸€é¢â€œé­”é•œâ€ã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šä½¿ç”¨æ ‘è“æ´¾+GPSåˆ¶ä½œè¡Œè½¦è®°å½•ã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šç”¨çº¢å¤–é¥æ§å™¨é¥æ§æ ‘è“æ´¾ã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šåœ¨æ ‘è“æ´¾ä¸Šä½¿ç”¨è¿œç¨‹æ¡Œé¢ã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šæ ‘è“æ´¾ç³»ç»Ÿå‡çº§ Wheezy åˆ° Raspbian Jessieã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šåœ¨æ ‘è“æ´¾ä¸Šç©CSï¼ã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šç»™SDçƒ§å½•æ ‘è“æ´¾ç³»ç»Ÿé•œåƒã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šæ ‘è“æ´¾æ•™ç¨‹ç¬¬ä¸€ç« ï¼šå…¥é—¨å‡†å¤‡å’Œé…ä»¶è´­ä¹°ã€‹ä½œè€…ï¼šå¹å£ç´çš„é’¢é“ä¾ ã€Šå›½å¤–æ ‘è“æ´¾è§¦æ‘¸å±é€‰è´­æŒ‡å—ã€‹ ä½œè€…ï¼šå¼ é£onlionã€ŠåŸºäºOTTOçš„æ ‘è“æ´¾arduinoçš„æ™ºèƒ½è¯­éŸ³æœºå™¨äººã€‹ ä½œè€…ï¼šwujiã€Šæ ‘è“æ´¾ä¹‹æ¸¸æˆæœºåˆ¶ä½œã€‹ ä½œè€…ï¼šLeonSKenneã€Šå²ä¸Šæœ€è½»è–„æ²¡æœ‰ä¹‹ä¸€çš„æ ‘è“æ´¾é­”é•œè¯ç”Ÿè®°ã€‹ ä½œè€…ï¼špATAqã€Šéšèº«é’¥åŒ™æ‰£æœåŠ¡å™¨â€”â€”æ ‘è“æ´¾ Zero Wã€‹ ä½œè€…ï¼šgada888ã€Šå®‰è£…diligent waveformsåˆ°æ ‘è“æ´¾è®°ã€‹ ä½œè€…ï¼šzblã€Šæƒ…äººèŠ‚è„±å•å¤§æ³•ä¹‹äºŒã€é«˜å¤§ä¸Šç¯‡ã€‘â€”â€”æ ‘è“æ´¾æ™ºèƒ½é­”é•œã€‹ ä½œè€…ï¼šboboã€Šç”¨æ ‘è“æ´¾äº«å—MAMEè¡—æ¸¸çš„ä¹è¶£ã€‹ ä½œè€…ï¼šfalcon.xã€Šç”¨æ ‘è“æ´¾ç»™æ™ºèƒ½æ‰‹æœºå‘é€æ¨é€é€šçŸ¥ã€‹ ã€Arduinoã€‘æƒ³å…¥é—¨Arduinoæ€ä¹ˆåŠï¼Ÿç”¨å¤§é‡æ•™ç¨‹ç ¸å‘ä½ ã€èµ„æºæ±‡æ€»ã€‘OverLordç›¸å…³èµ„æ–™&amp;æ–‡ç« æ±‡æ€» æ ‘è“æ´¾ + frp apt source æ›´æ¢ä¸ºå›½å†…æºï¼Œä¸‹è½½æ›´å¿«","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://guoshunfa.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"}]},{"title":"Mac é”®ç›˜å¿«æ·é”®è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Mac-é”®ç›˜å¿«æ·é”®è®°å½•","date":"2022-07-01T03:18:11.000Z","updated":"2024-01-28T11:41:39.275Z","comments":true,"path":"2022/07/Mac-é”®ç›˜å¿«æ·é”®è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Mac-%E9%94%AE%E7%9B%98%E5%BF%AB%E6%8D%B7%E9%94%AE%E8%AE%B0%E5%BD%95/","excerpt":"","text":"æ‚¨å¯ä»¥æŒ‰ä¸‹æŸäº›ç»„åˆé”®æ¥å®ç°é€šå¸¸éœ€è¦é¼ æ ‡ã€è§¦æ§æ¿æˆ–å…¶ä»–è¾“å…¥è®¾å¤‡æ‰èƒ½å®Œæˆçš„æ“ä½œã€‚ è¦ä½¿ç”¨é”®ç›˜å¿«æ·é”®ï¼Œè¯·æŒ‰ä½ä¸€ä¸ªæˆ–å¤šä¸ªä¿®é¥°é”®ï¼Œç„¶åæŒ‰å¿«æ·é”®çš„æœ€åä¸€ä¸ªé”®ã€‚ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨ Command-Cï¼ˆæ‹·è´ï¼‰ï¼Œè¯·æŒ‰ä½ Command é”®å¹¶æŒ‰ C é”®ï¼Œç„¶ååŒæ—¶æ¾å¼€è¿™ä¸¤ä¸ªé”®ã€‚Mac èœå•å’Œé”®ç›˜é€šå¸¸ä½¿ç”¨ç¬¦å·æ¥è¡¨ç¤ºæŸäº›æŒ‰é”®ï¼Œå…¶ä¸­åŒ…æ‹¬ä»¥ä¸‹ä¿®é¥°é”®ï¼š Commandï¼ˆæˆ– Cmdï¼‰âŒ˜ Shift â‡§ Optionï¼ˆæˆ– Altï¼‰âŒ¥ Controlï¼ˆæˆ– Ctrlï¼‰âŒƒ Caps Lock â‡ª Fn åœ¨ Windows PC ä¸“ç”¨é”®ç›˜ä¸Šï¼Œè¯·ç”¨ Alt é”®ä»£æ›¿ Option é”®ï¼Œç”¨ Windows æ ‡å¿—é”®ä»£æ›¿ Command é”®ã€‚ Apple é”®ç›˜ä¸Šçš„æŸäº›æŒ‰é”®å…·æœ‰ç‰¹æ®Šç¬¦å·å’ŒåŠŸèƒ½ï¼Œä¾‹å¦‚æ˜¾ç¤ºå±äº®åº¦ ã€é”®ç›˜äº®åº¦ ã€è°ƒåº¦ä¸­å¿ƒç­‰ã€‚å¦‚æœæ‚¨çš„é”®ç›˜ä¸Šæ²¡æœ‰è¿™äº›åŠŸèƒ½ï¼Œæ‚¨ä¹Ÿè®¸å¯ä»¥é€šè¿‡åˆ›å»ºè‡ªå·±çš„é”®ç›˜å¿«æ·é”®æ¥å®ç°å…¶ä¸­çš„ä¸€äº›åŠŸèƒ½ã€‚è¦å°†è¿™äº›é”®ç”¨ä½œ F1ã€F2ã€F3 æˆ–å…¶ä»–æ ‡å‡†åŠŸèƒ½é”®ï¼Œè¯·å°†å®ƒä»¬ä¸ Fn é”®ç»„åˆä½¿ç”¨ã€‚ å‰ªåˆ‡ã€æ‹·è´ã€ç²˜è´´å’Œå…¶ä»–å¸¸ç”¨å¿«æ·é”® Command-Xï¼šå‰ªåˆ‡æ‰€é€‰é¡¹å¹¶æ‹·è´åˆ°å‰ªè´´æ¿ã€‚ Command-Cï¼šå°†æ‰€é€‰é¡¹æ‹·è´åˆ°å‰ªè´´æ¿ã€‚è¿™åŒæ ·é€‚ç”¨äºâ€œè®¿è¾¾â€ä¸­çš„æ–‡ä»¶ã€‚ Command-Vï¼šå°†å‰ªè´´æ¿çš„å†…å®¹ç²˜è´´åˆ°å½“å‰æ–‡ç¨¿æˆ–åº”ç”¨ä¸­ã€‚è¿™åŒæ ·é€‚ç”¨äºâ€œè®¿è¾¾â€ä¸­çš„æ–‡ä»¶ã€‚ Command-Zï¼šæ’¤é”€ä¸Šä¸€ä¸ªå‘½ä»¤ã€‚éšåæ‚¨å¯ä»¥æŒ‰ Shift-Command-Z æ¥é‡åšï¼Œä»è€Œåå‘æ‰§è¡Œæ’¤é”€å‘½ä»¤ã€‚åœ¨æŸäº›åº”ç”¨ä¸­ï¼Œæ‚¨å¯ä»¥æ’¤é”€å’Œé‡åšå¤šä¸ªå‘½ä»¤ã€‚ Command-Aï¼šå…¨é€‰å„é¡¹ã€‚ Command-Fï¼šæŸ¥æ‰¾æ–‡ç¨¿ä¸­çš„é¡¹ç›®æˆ–æ‰“å¼€â€œæŸ¥æ‰¾â€çª—å£ã€‚ Command-Gï¼šå†æ¬¡æŸ¥æ‰¾ï¼šæŸ¥æ‰¾ä¹‹å‰æ‰€æ‰¾åˆ°é¡¹ç›®å‡ºç°çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚è¦æŸ¥æ‰¾å‡ºç°çš„ä¸Šä¸€ä¸ªä½ç½®ï¼Œè¯·æŒ‰ Shift-Command-Gã€‚ Command-Hï¼šéšè—æœ€å‰é¢çš„åº”ç”¨çš„çª—å£ã€‚è¦æŸ¥çœ‹æœ€å‰é¢çš„åº”ç”¨ä½†éšè—æ‰€æœ‰å…¶ä»–åº”ç”¨ï¼Œè¯·æŒ‰ Option-Command-Hã€‚ Command-Mï¼šå°†æœ€å‰é¢çš„çª—å£æœ€å°åŒ–è‡³â€œç¨‹åºåâ€ã€‚è¦æœ€å°åŒ–æœ€å‰é¢çš„åº”ç”¨çš„æ‰€æœ‰çª—å£ï¼Œè¯·æŒ‰ Option-Command-Mã€‚ Command-Oï¼šæ‰“å¼€æ‰€é€‰é¡¹ï¼Œæˆ–æ‰“å¼€ä¸€ä¸ªå¯¹è¯æ¡†ä»¥é€‰æ‹©è¦æ‰“å¼€çš„æ–‡ä»¶ã€‚ Command-Pï¼šæ‰“å°å½“å‰æ–‡ç¨¿ã€‚ Command-Sï¼šå­˜å‚¨å½“å‰æ–‡ç¨¿ã€‚ Command-Tï¼šæ‰“å¼€æ–°æ ‡ç­¾é¡µã€‚ Command-Wï¼šå…³é—­æœ€å‰é¢çš„çª—å£ã€‚è¦å…³é—­åº”ç”¨çš„æ‰€æœ‰çª—å£ï¼Œè¯·æŒ‰ä¸‹ Option-Command-Wã€‚ Option-Command-Escï¼šå¼ºåˆ¶é€€å‡ºåº”ç”¨ã€‚ Command-ç©ºæ ¼é”®ï¼šæ˜¾ç¤ºæˆ–éšè—â€œèšç„¦â€æœç´¢æ ã€‚è¦ä»â€œè®¿è¾¾â€çª—å£è¿›è¡Œâ€œèšç„¦â€æœç´¢ï¼Œè¯·æŒ‰ Commandâ€“Optionâ€“ç©ºæ ¼é”®ã€‚ï¼ˆå¦‚æœæ‚¨ä½¿ç”¨å¤šä¸ªè¾“å…¥æºä»¥ä¾¿ç”¨ä¸åŒçš„è¯­è¨€é”®å…¥å†…å®¹ï¼Œè¿™äº›å¿«æ·é”®ä¼šæ›´æ”¹è¾“å…¥æºè€Œéæ˜¾ç¤ºâ€œèšç„¦â€ã€‚äº†è§£å¦‚ä½•æ›´æ”¹å†²çªçš„é”®ç›˜å¿«æ·é”®ã€‚ï¼‰ Control-Commandâ€“ç©ºæ ¼é”®ï¼šæ˜¾ç¤ºå­—ç¬¦æ£€è§†å™¨ï¼Œæ‚¨å¯ä»¥ä»ä¸­é€‰æ‹©è¡¨æƒ…ç¬¦å·å’Œå…¶ä»–ç¬¦å·ã€‚ Control-Command-Fï¼šå…¨å±ä½¿ç”¨åº”ç”¨ï¼ˆå¦‚æœåº”ç”¨æ”¯æŒï¼‰ã€‚ ç©ºæ ¼é”®ï¼šä½¿ç”¨â€œå¿«é€ŸæŸ¥çœ‹â€æ¥é¢„è§ˆæ‰€é€‰é¡¹ã€‚ Command-Tabï¼šåœ¨å¤šä¸ªæ‰“å¼€çš„ App ä¹‹é—´åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæœ€è¿‘ä½¿ç”¨çš„ Appã€‚ Shift-Command-5ï¼šåœ¨ macOS Mojave æˆ–æ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œæ‹æ‘„æˆªå±æˆ–å½•åˆ¶å±å¹•ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Shift-Command-3 æˆ– Shift-Command-4 æ¥æ‹æ‘„æˆªå±ã€‚è¿›ä¸€æ­¥äº†è§£æˆªå±ã€‚ Shift-Command-Nï¼šåœ¨â€œè®¿è¾¾â€ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ã€‚ **Command-é€—å· (,)**ï¼šæ‰“å¼€æœ€å‰é¢çš„åº”ç”¨çš„åå¥½è®¾ç½®ã€‚ ç¡çœ ã€é€€å‡ºç™»å½•å’Œå…³æœºå¿«æ·é”®åœ¨è¿™äº›å¿«æ·é”®ä¸­ï¼Œæ‚¨å¯èƒ½éœ€è¦æŒ‰ä½å…¶ä¸­ä¸€äº›å¿«æ·é”®ç¨é•¿æ—¶é—´ã€‚è¿™æ ·æœ‰åŠ©äºé¿å…æ— æ„ä¸­å¯ç”¨å¿«æ·é”®ã€‚ ç”µæºæŒ‰é’®ï¼šæŒ‰ä¸‹å¯å°† Mac å¼€æœºæˆ–å°† Mac ä»ç¡çœ çŠ¶æ€å”¤é†’ã€‚æŒ‰ä½è¿™ä¸ªæŒ‰é’® 1.5 ç§’å¯ä½¿ Mac è¿›å…¥ç¡çœ çŠ¶æ€*ã€‚ç»§ç»­æŒ‰ä½åˆ™ä¼šå¼ºåˆ¶ Mac å…³æœºã€‚ Optionâ€“Commandâ€“ç”µæºæŒ‰é’®*æˆ– Optionâ€“Commandâ€“Media Ejectï¼ˆOptionâ€“Commandâ€“ä»‹è´¨æ¨å‡ºé”®ï¼‰ï¼šå°†æ‚¨çš„ Mac ç½®äºç¡çœ çŠ¶æ€ã€‚ Controlâ€“Shiftâ€“ç”µæºæŒ‰é’®*æˆ– Controlâ€“Shiftâ€“Media Ejectï¼ˆControlâ€“Shiftâ€“ä»‹è´¨æ¨å‡ºé”®ï¼‰ï¼šå°†æ˜¾ç¤ºå™¨ç½®äºç¡çœ çŠ¶æ€ã€‚ Controlâ€“ç”µæºæŒ‰é’®* æˆ– Controlâ€“ä»‹è´¨æ¨å‡ºé”® ï¼šæ˜¾ç¤ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œè¯¢é—®æ‚¨æ˜¯è¦é‡æ–°å¯åŠ¨ã€ç¡çœ è¿˜æ˜¯å…³æœºã€‚ Controlâ€“Commandâ€“ç”µæºæŒ‰é’®*ï¼šå¼ºåˆ¶ Mac é‡æ–°å¯åŠ¨ï¼Œç³»ç»Ÿä¸ä¼šæç¤ºæ˜¯å¦è¦å­˜å‚¨ä»»ä½•æ‰“å¼€ä¸”æœªå­˜å‚¨çš„æ–‡ç¨¿ã€‚ Controlâ€“Commandâ€“Media Ejectï¼ˆControlâ€“Commandâ€“ä»‹è´¨æ¨å‡ºé”®ï¼‰ï¼šé€€å‡ºæ‰€æœ‰åº”ç”¨ï¼Œç„¶åé‡æ–°å¯åŠ¨æ‚¨çš„ Macã€‚å¦‚æœä»»ä½•æ‰“å¼€çš„æ–‡ç¨¿æœ‰æœªå­˜å‚¨çš„æ›´æ”¹ï¼Œç³»ç»Ÿä¼šè¯¢é—®æ‚¨æ˜¯å¦è¦å­˜å‚¨è¿™äº›æ›´æ”¹ã€‚ Controlâ€“Optionâ€“Commandâ€“ç”µæºæŒ‰é’®* æˆ– Controlâ€“Optionâ€“Commandâ€“ä»‹è´¨æ¨å‡ºé”® ï¼šé€€å‡ºæ‰€æœ‰ Appï¼Œç„¶åå°†æ‚¨çš„ Mac å…³æœºã€‚å¦‚æœä»»ä½•æ‰“å¼€çš„æ–‡ç¨¿æœ‰æœªå­˜å‚¨çš„æ›´æ”¹ï¼Œç³»ç»Ÿä¼šè¯¢é—®æ‚¨æ˜¯å¦è¦å­˜å‚¨è¿™äº›æ›´æ”¹ã€‚ Control-Command-Qï¼šç«‹å³é”å®šå±å¹•ã€‚ Shiftâ€“Commandâ€“Qï¼šé€€å‡ºç™»å½•æ‚¨çš„ macOS ç”¨æˆ·å¸æˆ·ã€‚ç³»ç»Ÿå°†æç¤ºæ‚¨ç¡®è®¤ã€‚è¦åœ¨ä¸ç¡®è®¤çš„æƒ…å†µä¸‹ç«‹å³é€€å‡ºç™»å½•ï¼Œè¯·æŒ‰ä¸‹ Option-Shift-Command-Qã€‚ * ä¸é€‚ç”¨äºè§¦æ§ ID ä¼ æ„Ÿå™¨ã€‚ è®¿è¾¾å’Œç³»ç»Ÿå¿«æ·é”® Command-Dï¼šå¤åˆ¶æ‰€é€‰æ–‡ä»¶ã€‚ Command-Eï¼šæ¨å‡ºæ‰€é€‰ç£ç›˜æˆ–å®—å·ã€‚ Command-Fï¼šåœ¨â€œè®¿è¾¾â€çª—å£ä¸­å¼€å§‹â€œèšç„¦â€æœç´¢ã€‚ Command-Iï¼šæ˜¾ç¤ºæ‰€é€‰æ–‡ä»¶çš„â€œæ˜¾ç¤ºç®€ä»‹â€çª—å£ã€‚ Command-Rï¼š(1) å¦‚æœåœ¨â€œè®¿è¾¾â€ä¸­é€‰æ‹©äº†æŸä¸ªåˆ«åï¼šæ˜¾ç¤ºæ‰€é€‰åˆ«åå¯¹åº”çš„åŸå§‹æ–‡ä»¶ã€‚(2) åœ¨æŸäº›åº”ç”¨ï¼ˆå¦‚â€œæ—¥å†â€æˆ– Safari æµè§ˆå™¨ï¼‰ä¸­ï¼Œåˆ·æ–°æˆ–é‡æ–°è½½å…¥é¡µé¢ã€‚(3) åœ¨â€œè½¯ä»¶æ›´æ–°â€åå¥½è®¾ç½®ä¸­ï¼Œå†æ¬¡æ£€æŸ¥æœ‰æ²¡æœ‰è½¯ä»¶æ›´æ–°ã€‚ Shift-Command-Cï¼šæ‰“å¼€â€œç”µè„‘â€çª—å£ã€‚ Shift-Command-Dï¼šæ‰“å¼€â€œæ¡Œé¢â€æ–‡ä»¶å¤¹ã€‚ Shift-Command-Fï¼šæ‰“å¼€â€œæœ€è¿‘ä½¿ç”¨â€çª—å£ï¼Œå…¶ä¸­æ˜¾ç¤ºäº†æ‚¨æœ€è¿‘æŸ¥çœ‹æˆ–æ›´æ”¹è¿‡çš„æ‰€æœ‰æ–‡ä»¶ã€‚ Shift-Command-Gï¼šæ‰“å¼€â€œå‰å¾€æ–‡ä»¶å¤¹â€çª—å£ã€‚ Shift-Command-Hï¼šæ‰“å¼€å½“å‰ macOS ç”¨æˆ·å¸æˆ·çš„ä¸ªäººæ–‡ä»¶å¤¹ã€‚ Shift-Command-Iï¼šæ‰“å¼€ iCloud äº‘ç›˜ã€‚ Shift-Command-Kï¼šæ‰“å¼€â€œç½‘ç»œâ€çª—å£ã€‚ Option-Command-Lï¼šæ‰“å¼€â€œä¸‹è½½â€æ–‡ä»¶å¤¹ã€‚ Shift-Command-Nï¼šæ–°å»ºæ–‡ä»¶å¤¹ã€‚ Shift-Command-Oï¼šæ‰“å¼€â€œæ–‡ç¨¿â€æ–‡ä»¶å¤¹ã€‚ Shift-Command-Pï¼šåœ¨â€œè®¿è¾¾â€çª—å£ä¸­æ˜¾ç¤ºæˆ–éšè—é¢„è§ˆé¢æ¿ã€‚ Shift-Command-Rï¼šæ‰“å¼€â€œéš”ç©ºæŠ•é€â€çª—å£ã€‚ Shift-Command-Tï¼šæ˜¾ç¤ºæˆ–éšè—â€œè®¿è¾¾â€çª—å£ä¸­çš„æ ‡ç­¾æ ã€‚ Ctrl-Shift-Command-Tï¼šå°†æ‰€é€‰çš„â€œè®¿è¾¾â€é¡¹ç›®æ·»åŠ åˆ°â€œç¨‹åºåâ€ï¼ˆOS X Mavericks æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ Shift-Command-Uï¼šæ‰“å¼€â€œå®ç”¨å·¥å…·â€æ–‡ä»¶å¤¹ã€‚ Option-Command-Dï¼šæ˜¾ç¤ºæˆ–éšè—â€œç¨‹åºåâ€ã€‚ Control-Command-Tï¼šå°†æ‰€é€‰é¡¹æ·»åŠ åˆ°è¾¹æ ï¼ˆOS X Mavericks æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ã€‚ Option-Command-Pï¼šéšè—æˆ–æ˜¾ç¤ºâ€œè®¿è¾¾â€çª—å£ä¸­çš„è·¯å¾„æ ã€‚ Option-Command-Sï¼šéšè—æˆ–æ˜¾ç¤ºâ€œè®¿è¾¾â€çª—å£ä¸­çš„è¾¹æ ã€‚ **Commandâ€“æ–œçº¿ (&#x2F;)**ï¼šéšè—æˆ–æ˜¾ç¤ºâ€œè®¿è¾¾â€çª—å£ä¸­çš„çŠ¶æ€æ ã€‚ Command-Jï¼šæ˜¾ç¤ºâ€œæ˜¾ç¤ºâ€é€‰é¡¹ã€‚ Command-Kï¼šæ‰“å¼€â€œè¿æ¥æœåŠ¡å™¨â€çª—å£ã€‚ Control-Command-Aï¼šä¸ºæ‰€é€‰é¡¹åˆ¶ä½œæ›¿èº«ã€‚ Command-Nï¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„â€œè®¿è¾¾â€çª—å£ã€‚ Option-Command-Nï¼šæ–°å»ºæ™ºèƒ½æ–‡ä»¶å¤¹ã€‚ Command-Tï¼šåœ¨å½“å‰â€œè®¿è¾¾â€çª—å£ä¸­æœ‰å•ä¸ªæ ‡ç­¾é¡µå¼€ç€çš„çŠ¶æ€ä¸‹æ˜¾ç¤ºæˆ–éšè—æ ‡ç­¾é¡µæ ã€‚ Option-Command-Tï¼šåœ¨å½“å‰â€œè®¿è¾¾â€çª—å£ä¸­æœ‰å•ä¸ªæ ‡ç­¾é¡µå¼€ç€çš„çŠ¶æ€ä¸‹æ˜¾ç¤ºæˆ–éšè—å·¥å…·æ ã€‚ Option-Command-Vï¼šå°†å‰ªè´´æ¿ä¸­çš„æ–‡ä»¶ä»åŸå§‹ä½ç½®ç§»åŠ¨åˆ°å½“å‰ä½ç½®ã€‚ Command-Yï¼šä½¿ç”¨â€œå¿«é€ŸæŸ¥çœ‹â€é¢„è§ˆæ‰€é€‰æ–‡ä»¶ã€‚ Option-Command-Yï¼šæ˜¾ç¤ºæ‰€é€‰æ–‡ä»¶çš„å¿«é€ŸæŸ¥çœ‹å¹»ç¯ç‰‡æ˜¾ç¤ºã€‚ Command-1ï¼šä»¥å›¾æ ‡æ–¹å¼æ˜¾ç¤ºâ€œè®¿è¾¾â€çª—å£ä¸­çš„é¡¹ç›®ã€‚ Command-2ï¼šä»¥åˆ—è¡¨æ–¹å¼æ˜¾ç¤ºâ€œè®¿è¾¾â€çª—å£ä¸­çš„é¡¹ç›®ã€‚ Command-3ï¼šä»¥åˆ†æ æ–¹å¼æ˜¾ç¤ºâ€œè®¿è¾¾â€çª—å£ä¸­çš„é¡¹ç›®ã€‚ Command-4ï¼šä»¥ç”»å»Šæ–¹å¼æ˜¾ç¤ºâ€œè®¿è¾¾â€çª—å£ä¸­çš„é¡¹ç›®ã€‚ **Commandâ€“å·¦ä¸­æ‹¬å· ([)**ï¼šå‰å¾€ä¸Šä¸€æ–‡ä»¶å¤¹ã€‚ **Commandâ€“å³ä¸­æ‹¬å· (])**ï¼šå‰å¾€ä¸‹ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚ Commandâ€“ä¸Šç®­å¤´ï¼šæ‰“å¼€åŒ…å«å½“å‰æ–‡ä»¶å¤¹çš„æ–‡ä»¶å¤¹ã€‚ Commandâ€“Controlâ€“ä¸Šç®­å¤´ï¼šåœ¨æ–°çª—å£ä¸­æ‰“å¼€åŒ…å«å½“å‰æ–‡ä»¶å¤¹çš„æ–‡ä»¶å¤¹ã€‚ Commandâ€“ä¸‹ç®­å¤´ï¼šæ‰“å¼€æ‰€é€‰é¡¹ã€‚ å³ç®­å¤´ï¼šæ‰“å¼€æ‰€é€‰æ–‡ä»¶å¤¹ã€‚è¿™ä¸ªå¿«æ·é”®ä»…åœ¨åˆ—è¡¨è§†å›¾ä¸­æœ‰æ•ˆã€‚ å·¦ç®­å¤´ï¼šå…³é—­æ‰€é€‰æ–‡ä»¶å¤¹ã€‚è¿™ä¸ªå¿«æ·é”®ä»…åœ¨åˆ—è¡¨è§†å›¾ä¸­æœ‰æ•ˆã€‚ Command-Deleteï¼šå°†æ‰€é€‰é¡¹ç§»åˆ°åºŸçº¸ç¯“ã€‚ Shift-Command-Deleteï¼šæ¸…å€’åºŸçº¸ç¯“ã€‚ Option-Shift-Command-Deleteï¼šæ¸…å€’åºŸçº¸ç¯“è€Œä¸æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†ã€‚ Command-è°ƒä½äº®åº¦ï¼šå½“ Mac è¿æ¥åˆ°å¤šå°æ˜¾ç¤ºå™¨æ—¶ï¼Œæ‰“å¼€æˆ–å…³é—­è§†é¢‘é•œåƒåŠŸèƒ½ã€‚ Optionâ€“è°ƒé«˜äº®åº¦ï¼šæ‰“å¼€â€œæ˜¾ç¤ºå™¨â€åå¥½è®¾ç½®ã€‚è¿™ä¸ªå¿«æ·é”®å¯ä¸ä»»ä¸€äº®åº¦é”®æ­é…ä½¿ç”¨ã€‚ Controlâ€“è°ƒé«˜äº®åº¦æˆ– Controlâ€“è°ƒä½äº®åº¦ï¼šæ›´æ”¹å¤–éƒ¨æ˜¾ç¤ºå™¨çš„äº®åº¦ï¼ˆå¦‚æœæ˜¾ç¤ºå™¨æ”¯æŒï¼‰ã€‚ Option-Shiftâ€“è°ƒé«˜äº®åº¦æˆ– Option-Shiftâ€“è°ƒä½äº®åº¦ï¼šä»¥è¾ƒå°çš„æ­¥å¹…è°ƒèŠ‚æ˜¾ç¤ºå™¨äº®åº¦ã€‚å¦‚æœæ‚¨çš„æ˜¾ç¤ºå™¨æ”¯æŒï¼Œå¯ä»¥å°† Control é”®æ·»åŠ åˆ°æ­¤å¿«æ·é”®ï¼Œä»¥ä¾¿åœ¨å¤–ç½®æ˜¾ç¤ºå™¨ä¸Šè¿›è¡Œè°ƒèŠ‚ã€‚ Optionâ€“â€œè°ƒåº¦ä¸­å¿ƒâ€ï¼šæ‰“å¼€â€œè°ƒåº¦ä¸­å¿ƒâ€åå¥½è®¾ç½®ã€‚ Command-è°ƒåº¦ä¸­å¿ƒï¼šæ˜¾ç¤ºæ¡Œé¢ã€‚ Controlâ€“ä¸‹ç®­å¤´ï¼šæ˜¾ç¤ºæœ€å‰é¢çš„åº”ç”¨çš„æ‰€æœ‰çª—å£ã€‚ Optionâ€“è°ƒé«˜éŸ³é‡ï¼šæ‰“å¼€â€œå£°éŸ³â€åå¥½è®¾ç½®ã€‚è¿™ä¸ªå¿«æ·é”®å¯ä¸ä»»ä¸€éŸ³é‡é”®æ­é…ä½¿ç”¨ã€‚ Option-Shiftâ€“è°ƒé«˜éŸ³é‡æˆ– Option-Shiftâ€“è°ƒä½éŸ³é‡ï¼šä»¥è¾ƒå°çš„æ­¥å¹…è°ƒèŠ‚éŸ³é‡ã€‚ Optionâ€“é”®ç›˜è°ƒé«˜äº®åº¦ï¼šæ‰“å¼€â€œé”®ç›˜â€åå¥½è®¾ç½®ã€‚è¿™ä¸ªå¿«æ·é”®å¯ä¸ä»»ä¸€é”®ç›˜äº®åº¦é”®æ­é…ä½¿ç”¨ã€‚ Option-Shiftâ€“é”®ç›˜è°ƒé«˜äº®åº¦æˆ– Option-Shiftâ€“é”®ç›˜è°ƒä½äº®åº¦ï¼šä»¥è¾ƒå°çš„æ­¥å¹…è°ƒèŠ‚é”®ç›˜äº®åº¦ã€‚ è¿æŒ‰ Option é”®ï¼šåœ¨å•ç‹¬çš„çª—å£ä¸­æ‰“å¼€é¡¹ç›®ï¼Œç„¶åå…³é—­åŸå§‹çª—å£ã€‚ è¿æŒ‰ Command é”®ï¼šåœ¨å•ç‹¬çš„æ ‡ç­¾é¡µæˆ–çª—å£ä¸­æ‰“å¼€æ–‡ä»¶å¤¹ã€‚ æŒ‰ä½ Command é”®æ‹–ç§»åˆ°å¦ä¸€ä¸ªå®—å·ï¼šå°†æ‹–ç§»çš„é¡¹ç›®ç§»åˆ°å¦ä¸€ä¸ªå®—å·ï¼Œè€Œä¸æ˜¯æ‹·è´å®ƒã€‚ æŒ‰ä½ Option é”®æ‹–ç§»ï¼šæ‹·è´æ‰˜ç§»çš„é¡¹ç›®ã€‚æ‹–ç§»é¡¹ç›®æ—¶æŒ‡é’ˆä¼šéšä¹‹å˜åŒ–ã€‚ æ‹–ç§»æ—¶æŒ‰ä½ Option-Commandï¼šä¸ºæ‹–ç§»çš„é¡¹ç›®åˆ¶ä½œæ›¿èº«ã€‚æ‹–ç§»é¡¹ç›®æ—¶æŒ‡é’ˆä¼šéšä¹‹å˜åŒ–ã€‚ æŒ‰ä½ Option é”®ç‚¹æŒ‰å¼€åˆä¸‰è§’ï¼šæ‰“å¼€æ‰€é€‰æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶å¤¹ã€‚æ­¤å¿«æ·é”®ä»…åœ¨åˆ—è¡¨è§†å›¾ä¸­æœ‰æ•ˆã€‚ æŒ‰ä½ Command é”®ç‚¹æŒ‰çª—å£æ ‡é¢˜ï¼šæŸ¥çœ‹åŒ…å«å½“å‰æ–‡ä»¶å¤¹çš„æ–‡ä»¶å¤¹ã€‚ äº†è§£å¦‚ä½•ä½¿ç”¨ Command æˆ– Shift åœ¨â€œè®¿è¾¾â€ä¸­é€‰æ‹©å¤šä¸ªé¡¹ç›®ã€‚ ç‚¹æŒ‰â€œè®¿è¾¾â€èœå•æ ä¸­çš„â€œå‰å¾€â€èœå•æŸ¥çœ‹ç”¨äºæ‰“å¼€è®¸å¤šå¸¸ç”¨æ–‡ä»¶å¤¹ï¼ˆå¦‚â€œåº”ç”¨ç¨‹åºâ€ã€â€œæ–‡ç¨¿â€ã€â€œä¸‹è½½â€ã€â€œå®ç”¨å·¥å…·â€å’Œâ€œiCloud äº‘ç›˜â€ï¼‰çš„å¿«æ·é”®ã€‚ æ–‡ç¨¿å¿«æ·é”®è¿™äº›å¿«æ·é”®çš„è¡Œä¸ºå¯èƒ½å› æ‚¨ä½¿ç”¨çš„åº”ç”¨è€Œå¼‚ã€‚ Command-Bï¼šä»¥ç²—ä½“æ˜¾ç¤ºæ‰€é€‰æ–‡æœ¬ï¼Œæˆ–è€…æ‰“å¼€æˆ–å…³é—­ç²—ä½“æ˜¾ç¤ºåŠŸèƒ½ã€‚ Command-Iï¼šä»¥æ–œä½“æ˜¾ç¤ºæ‰€é€‰æ–‡æœ¬ï¼Œæˆ–è€…æ‰“å¼€æˆ–å…³é—­æ–œä½“æ˜¾ç¤ºåŠŸèƒ½ã€‚ Command-Kï¼šæ·»åŠ ç½‘é¡µé“¾æ¥ã€‚ Command-Uï¼šå¯¹æ‰€é€‰æ–‡æœ¬åŠ ä¸‹åˆ’çº¿ï¼Œæˆ–è€…æ‰“å¼€æˆ–å…³é—­åŠ ä¸‹åˆ’çº¿åŠŸèƒ½ã€‚ Command-Tï¼šæ˜¾ç¤ºæˆ–éšè—â€œå­—ä½“â€çª—å£ã€‚ Command-Dï¼šä»â€œæ‰“å¼€â€å¯¹è¯æ¡†æˆ–â€œå­˜å‚¨â€å¯¹è¯æ¡†å†…é€‰æ‹©â€œæ¡Œé¢â€æ–‡ä»¶å¤¹ã€‚ Control-Command-Dï¼šæ˜¾ç¤ºæˆ–éšè—æ‰€é€‰å­—è¯çš„å®šä¹‰ã€‚ **Shift-Commandâ€“å†’å· (:)**ï¼šæ˜¾ç¤ºâ€œæ‹¼å†™å’Œè¯­æ³•â€çª—å£ã€‚ **Commandâ€“åˆ†å· (;)**ï¼šæŸ¥æ‰¾æ–‡ç¨¿ä¸­æ‹¼å†™é”™è¯¯çš„å­—è¯ã€‚ Option-Deleteï¼šåˆ é™¤æ’å…¥ç‚¹å·¦è¾¹çš„å­—è¯ã€‚ Control-Hï¼šåˆ é™¤æ’å…¥ç‚¹å·¦è¾¹çš„å­—ç¬¦ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Delete é”®ã€‚ Control-Dï¼šåˆ é™¤æ’å…¥ç‚¹å³è¾¹çš„å­—ç¬¦ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Fn-Deleteã€‚ Fn-Deleteï¼šåœ¨æ²¡æœ‰å‘å‰åˆ é™¤ é”®çš„é”®ç›˜ä¸Šå‘å‰åˆ é™¤ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Control-Dã€‚ Control-Kï¼šåˆ é™¤æ’å…¥ç‚¹ä¸è¡Œæˆ–æ®µè½æœ«å°¾å¤„ä¹‹é—´çš„æ–‡æœ¬ã€‚ Fn-ä¸Šç®­å¤´ï¼šPage Upï¼šå‘ä¸Šæ»šåŠ¨ä¸€é¡µã€‚ Fnâ€“ä¸‹ç®­å¤´ï¼šPage Downï¼šå‘ä¸‹æ»šåŠ¨ä¸€é¡µã€‚ Fnâ€“å·¦ç®­å¤´ï¼šHomeï¼šæ»šåŠ¨åˆ°æ–‡ç¨¿å¼€å¤´ã€‚ Fnâ€“å³ç®­å¤´ï¼šEndï¼šæ»šåŠ¨åˆ°æ–‡ç¨¿æœ«å°¾ã€‚ Commandâ€“ä¸Šç®­å¤´ï¼šå°†æ’å…¥ç‚¹ç§»è‡³æ–‡ç¨¿å¼€å¤´ã€‚ Commandâ€“ä¸‹ç®­å¤´ï¼šå°†æ’å…¥ç‚¹ç§»è‡³æ–‡ç¨¿æœ«å°¾ã€‚ Commandâ€“å·¦ç®­å¤´ï¼šå°†æ’å…¥ç‚¹ç§»è‡³å½“å‰è¡Œçš„è¡Œé¦–ã€‚ Commandâ€“å³ç®­å¤´ï¼šå°†æ’å…¥ç‚¹ç§»è‡³å½“å‰è¡Œçš„è¡Œå°¾ã€‚ Optionâ€“å·¦ç®­å¤´ï¼šå°†æ’å…¥ç‚¹ç§»è‡³ä¸Šä¸€å­—è¯çš„è¯é¦–ã€‚ Optionâ€“å³ç®­å¤´ï¼šå°†æ’å…¥ç‚¹ç§»è‡³ä¸‹ä¸€å­—è¯çš„è¯å°¾ã€‚ Shift-Commandâ€“ä¸Šç®­å¤´ï¼šé€‰ä¸­æ’å…¥ç‚¹ä¸æ–‡ç¨¿å¼€å¤´ä¹‹é—´çš„æ–‡æœ¬ã€‚ Shift-Commandâ€“ä¸‹ç®­å¤´ï¼šé€‰ä¸­æ’å…¥ç‚¹ä¸æ–‡ç¨¿æœ«å°¾ä¹‹é—´çš„æ–‡æœ¬ã€‚ Shift-Commandâ€“å·¦ç®­å¤´ï¼šé€‰ä¸­æ’å…¥ç‚¹ä¸å½“å‰è¡Œè¡Œé¦–ä¹‹é—´çš„æ–‡æœ¬ã€‚ Shift-Commandâ€“å³ç®­å¤´ï¼šé€‰ä¸­æ’å…¥ç‚¹ä¸å½“å‰è¡Œè¡Œå°¾ä¹‹é—´çš„æ–‡æœ¬ã€‚ Shiftâ€“ä¸Šç®­å¤´ï¼šå°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°ä¸Šä¸€è¡Œç›¸åŒæ°´å¹³ä½ç½®çš„æœ€è¿‘å­—ç¬¦å¤„ã€‚ Shiftâ€“ä¸‹ç®­å¤´ï¼šå°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°ä¸‹ä¸€è¡Œç›¸åŒæ°´å¹³ä½ç½®çš„æœ€è¿‘å­—ç¬¦å¤„ã€‚ Shiftâ€“å·¦ç®­å¤´ï¼šå°†æ–‡æœ¬é€‰æ‹©èŒƒå›´å‘å·¦æ‰©å±•ä¸€ä¸ªå­—ç¬¦ã€‚ Shiftâ€“å³ç®­å¤´ï¼šå°†æ–‡æœ¬é€‰æ‹©èŒƒå›´å‘å³æ‰©å±•ä¸€ä¸ªå­—ç¬¦ã€‚ Optionâ€“Shiftâ€“ä¸Šç®­å¤´ï¼šå°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°å½“å‰æ®µè½çš„æ®µé¦–ï¼Œå†æŒ‰ä¸€æ¬¡åˆ™æ‰©å±•åˆ°ä¸‹ä¸€æ®µè½çš„æ®µé¦–ã€‚ Optionâ€“Shiftâ€“ä¸‹ç®­å¤´ï¼šå°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°å½“å‰æ®µè½çš„æ®µå°¾ï¼Œå†æŒ‰ä¸€æ¬¡åˆ™æ‰©å±•åˆ°ä¸‹ä¸€æ®µè½çš„æ®µå°¾ã€‚ Optionâ€“Shiftâ€“å·¦ç®­å¤´ï¼šå°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°å½“å‰å­—è¯çš„è¯é¦–ï¼Œå†æŒ‰ä¸€æ¬¡åˆ™æ‰©å±•åˆ°åä¸€å­—è¯çš„è¯é¦–ã€‚ Optionâ€“Shiftâ€“å·¦ç®­å¤´ï¼šå°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°å½“å‰å­—è¯çš„è¯å°¾ï¼Œå†æŒ‰ä¸€æ¬¡åˆ™æ‰©å±•åˆ°åä¸€å­—è¯çš„è¯å°¾ã€‚ Controlâ€“Aï¼šç§»è‡³è¡Œæˆ–æ®µè½çš„å¼€å¤´ã€‚ Controlâ€“Eï¼šç§»è‡³è¡Œæˆ–æ®µè½çš„æœ«å°¾ã€‚ Controlâ€“Fï¼šå‘å‰ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚ Controlâ€“Bï¼šå‘åç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚ Controlâ€“Lï¼šå°†å…‰æ ‡æˆ–æ‰€é€‰å†…å®¹ç½®äºå¯è§åŒºåŸŸä¸­å¤®ã€‚ Controlâ€“Pï¼šä¸Šç§»ä¸€è¡Œã€‚ Controlâ€“Nï¼šä¸‹ç§»ä¸€è¡Œã€‚ Controlâ€“Oï¼šåœ¨æ’å…¥ç‚¹åæ–°æ’å…¥ä¸€è¡Œã€‚ Controlâ€“Tï¼šå°†æ’å…¥ç‚¹åé¢çš„å­—ç¬¦ä¸æ’å…¥ç‚¹å‰é¢çš„å­—ç¬¦äº¤æ¢ã€‚ **Commandâ€“å·¦èŠ±æ‹¬å· ({)**ï¼šå·¦å¯¹é½ã€‚ **Commandâ€“å³èŠ±æ‹¬å· (})**ï¼šå³å¯¹é½ã€‚ **Shift-Commandâ€“ç«–çº¿ (|)**ï¼šå±…ä¸­å¯¹é½ã€‚ Option-Command-Fï¼šå‰å¾€æœç´¢æ ã€‚ Option-Command-Tï¼šæ˜¾ç¤ºæˆ–éšè—åº”ç”¨ä¸­çš„å·¥å…·æ ã€‚ Option-Command-Cï¼šæ‹·è´æ ·å¼ï¼šå°†æ‰€é€‰é¡¹çš„æ ¼å¼è®¾ç½®æ‹·è´åˆ°å‰ªè´´æ¿ã€‚ Option-Command-Vï¼šç²˜è´´æ ·å¼ï¼šå°†æ‹·è´çš„æ ·å¼åº”ç”¨åˆ°æ‰€é€‰é¡¹ã€‚ Option-Shift-Command-Vï¼šç²˜è´´å¹¶åŒ¹é…æ ·å¼ï¼šå°†å‘¨å›´å†…å®¹çš„æ ·å¼åº”ç”¨åˆ°ç²˜è´´åœ¨è¯¥å†…å®¹ä¸­çš„é¡¹ç›®ã€‚ Option-Command-Iï¼šæ˜¾ç¤ºæˆ–éšè—æ£€æŸ¥å™¨çª—å£ã€‚ Shift-Command-Pï¼šé¡µé¢è®¾ç½®ï¼šæ˜¾ç¤ºç”¨äºé€‰æ‹©æ–‡ç¨¿è®¾ç½®çš„çª—å£ã€‚ Shift-Command-Sï¼šæ˜¾ç¤ºâ€œå­˜å‚¨ä¸ºâ€å¯¹è¯æ¡†æˆ–å¤åˆ¶å½“å‰æ–‡ç¨¿ã€‚ **Shift-Command-å‡å· (-)**ï¼šç¼©å°æ‰€é€‰é¡¹ã€‚ **Shift-Command-åŠ å· (+)**ï¼šæ”¾å¤§æ‰€é€‰é¡¹ã€‚Commandâ€“ç­‰å· (&#x3D;) å¯å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚ **Shift-Commandâ€“é—®å· (?)**ï¼šæ‰“å¼€â€œå¸®åŠ©â€èœå•ã€‚ finder å¿«æ·é”® **Shift-Command-.**ï¼šæ˜¾ç¤º&#x2F;ä¸æ˜¾ç¤ºéšè—æ–‡ä»¶å¤¹ã€‚ å…¶ä»–å¿«æ·é”®å¦‚éœ€äº†è§£æ›´å¤šå¿«æ·é”®ï¼Œè¯·æŸ¥çœ‹åº”ç”¨èœå•ä¸­æ˜¾ç¤ºçš„å¿«æ·é”®ç¼©å†™ã€‚æ¯ä¸ªåº”ç”¨éƒ½æœ‰è‡ªå·±çš„å¿«æ·é”®ï¼Œåœ¨ä¸€ä¸ªåº”ç”¨ä¸­å¯ç”¨çš„å¿«æ·é”®å¯èƒ½åœ¨å¦ä¸€ä¸ªåº”ç”¨ä¸­ä¸å¯ç”¨ã€‚ è¾…åŠ©åŠŸèƒ½å¿«æ·é”® Safari æµè§ˆå™¨å¿«æ·é”® â€œèšç„¦â€å¿«æ·é”® å¯åŠ¨å¿«æ·é”® Apple Music å¿«æ·é”®ï¼šä»â€œéŸ³ä¹â€App çš„èœå•æ ä¸­é€‰å–â€œå¸®åŠ©â€&gt;â€œé”®ç›˜å¿«æ·é”®â€ã€‚ å…¶ä»–å¿«æ·é”®ï¼šé€‰å–è‹¹æœèœå• &gt;â€œç³»ç»Ÿåå¥½è®¾ç½®â€ï¼Œç‚¹æŒ‰â€œé”®ç›˜â€ï¼Œç„¶åç‚¹æŒ‰â€œå¿«æ·é”®â€ã€‚ è¿›ä¸€æ­¥äº†è§£ é”®å…¥è¡¨æƒ…ç¬¦å·ã€é‡éŸ³ç¬¦å·å’Œå…¶ä»–ç¬¦å· åˆ›å»ºæ‚¨è‡ªå·±çš„å¿«æ·é”®ä»¥åŠè§£å†³å¿«æ·é”®ä¹‹é—´çš„å†²çª æ›´æ”¹åŠŸèƒ½é”®æˆ–ä¿®é¥°é”®çš„è¡Œä¸º ä½¿ç”¨é”®ç›˜å¿«æ·é”®çš„è¯­éŸ³å‘½ä»¤","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://guoshunfa.com/tags/mac/"}]},{"title":"Mac Homebrewä½¿ç”¨è¯´æ˜","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Mac-Homebrewä½¿ç”¨è¯´æ˜","date":"2022-07-01T03:12:50.000Z","updated":"2024-01-28T11:41:39.275Z","comments":true,"path":"2022/07/Mac-Homebrewä½¿ç”¨è¯´æ˜/","link":"","permalink":"https://guoshunfa.com/2022/07/Mac-Homebrew%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/","excerpt":"","text":"homebrew å®˜ç½‘ brewæ–‡ä»¶åœ°å€ é…ç½®æ–‡ä»¶åœ¨&#x2F;usr&#x2F;local&#x2F;etcä¸­ å®‰è£…æ–‡ä»¶åœ¨&#x2F;usr&#x2F;local&#x2F;Cellarä¸­ äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºçš„è½¯è¿æ¥åœ¨&#x2F;usr&#x2F;local&#x2F;binä¸­ 1.Homebrew ä»‹ç»Homebrewæ˜¯ä¸€æ¬¾è‡ªç”±åŠå¼€æ”¾æºä»£ç çš„è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼Œç”¨ä»¥ç®€åŒ–Mac OS Xç³»ç»Ÿä¸Šçš„è½¯ä»¶å®‰è£…è¿‡ç¨‹ï¼Œæœ€åˆç”±Max Howellå†™æˆã€‚å› å…¶å¯æ‰©å±•æ€§å¾—åˆ°äº†ä¸€è‡´å¥½è¯„ï¼Œå¹¶åœ¨Ruby on Railsç¤¾åŒºå¹¿ä¸ºäººçŸ¥ã€‚ Homebrewä½¿ç”¨GitHubï¼Œé€šè¿‡ç”¨æˆ·çš„è´¡çŒ®æ‰©å¤§å¯¹è½¯ä»¶åŒ…çš„æ”¯æŒã€‚2012å¹´ï¼ŒHomebrewæ˜¯GitHubä¸Šæ‹¥æœ‰æœ€å¤šæ–°è´¡çŒ®è€…çš„é¡¹ç›®ã€‚2013å¹´ï¼ŒHomebrewåŒæ—¶æˆä¸ºGitHubä¸Šæœ€å¤šè´¡çŒ®è€…åŠæœ€å¤šå·²å…³é—­é—®é¢˜çš„é¡¹ç›®ã€‚ Homebrew å®ç° Homebrewä»¥Rubyè¯­è¨€å†™æˆï¼Œé’ˆå¯¹äºMac OS Xæ“ä½œç³»ç»Ÿè‡ªå¸¦Rubyçš„ç‰ˆæœ¬ã€‚ é»˜è®¤å®‰è£…åœ¨&#x2F;usr&#x2F;localï¼Œç”±ä¸€ä¸ªæ ¸å¿ƒgitç‰ˆæœ¬åº“æ„æˆï¼Œä»¥ä½¿ç”¨æˆ·èƒ½æ›´æ–°Homebrewã€‚ åŒ…ç®¡ç†å™¨ä½¿ç”¨ä¸€ç§ç§°ä¸ºâ€œå…¬å¼â€ï¼ˆformulaï¼‰çš„DSLè„šæœ¬æ¥ç®¡ç†ä¾èµ–ã€ä¸‹è½½æºä»£ç åŠé…ç½®å’Œç¼–è¯‘è½¯ä»¶ï¼Œä»æºä»£ç ä¸­æ„å»ºè½¯ä»¶ã€‚ ç§°ä¸ºâ€œç“¶â€ï¼ˆbottleï¼‰çš„äºŒè¿›åˆ¶åŒ…æ˜¯ç”¨é»˜è®¤é€‰é¡¹é¢„ç¼–è¯‘å¥½çš„å…¬å¼ã€‚ Homebrew å†å² Homebrewç”±Max Howelläº2009å¹´ç¼–å†™ã€‚ 2013å¹´3æœˆï¼ŒHomebrewæˆåŠŸå®Œæˆäº†Kickstarteræ´»åŠ¨ï¼Œä¸ºé¡¹ç›®ç­¹é›†ç»´æŠ¤èµ„é‡‘ï¼Œå¹¶ç­¹é›†åˆ°äº†14859è‹±é•‘ã€‚ 2013å¹´12æœˆ13æ—¥ï¼ŒHomebrewå­˜å‚¨åº“ä»Howellçš„GitHubå¸æˆ·è¿ç§»åˆ°è‡ªå·±çš„é¡¹ç›®å¸æˆ·ã€‚ 2015å¹´2æœˆï¼Œç”±äºSourceForgeçš„åœæœºå¯¼è‡´äºŒè¿›åˆ¶æ–‡ä»¶æ— æ³•ä½¿ç”¨ï¼ŒHomebrewå°†å…¶æ‰˜ç®¡ç§»è‡³bintrayã€‚ æˆªè‡³2016å¹´7æœˆï¼ŒHomebrewç”±12åå¼€å‘äººå‘˜ç»„æˆçš„å›¢é˜Ÿç»´æŠ¤ã€‚ Homebrew ä½œè€…é€¸äº‹ Homebrewçš„ä½œè€…Max Howellæ›¾åº”è˜è¿‡Googleçš„èŒä½ï¼Œä½†åœ¨æŠ€æœ¯é¢è¯•æ²¡æœ‰é€šè¿‡ï¼Œéšåä»–åœ¨Twitterä¸Šå‘å¸–ç§°â€œGoogle: 90% of our engineers use the software you wrote (Homebrew), but you canâ€™t invert a binary tree on a whiteboard so f**k offâ€ã€‚ï¼ˆGoogleï¼šæˆ‘ä»¬90%çš„å·¥ç¨‹å¸ˆéƒ½åœ¨ç”¨ä½ çš„è½¯ä»¶ï¼ˆHomebrewï¼‰ï¼Œä½†æ˜¯ä½ ä¸ä¼šåœ¨ç™½æ¿ä¸Šç¿»è½¬äºŒå‰æ ‘ï¼Œæ‰€ä»¥æ»šå‡ºå»ï¼‰ï¼Œåœ¨ç½‘ä¸Šå¼•å‘äº†å…³äºæ‹›è˜ç¨‹åºå‘˜é¢è¯•æ—¶ç™½æ¿ç¼–ç¨‹æ„ä¹‰çš„è®¨è®ºã€‚ 2. Homebrew å®‰è£…åªéœ€æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ï¼š 1/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; é¦–å…ˆä¼šå®‰è£…å¦‚ä¸‹è„šæœ¬ï¼š 1234567==&gt; This script will install:/usr/local/bin/brew #brewå‘½ä»¤/usr/local/share/doc/homebrew #homewbrewæ–‡æ¡£ç›®å½•/usr/local/share/man/man1/brew.1 #brewçš„å¯ä»¥æ“ä½œçš„æŒ‡ä»¤/usr/local/share/zsh/site-functions/_brew #å¯ç”¨äºzshçš„brewç›¸å…³å‡½æ•°/usr/local/etc/bash_completion.d/brew #brewçš„è‡ªåŠ¨è¡¥å…¨é…ç½®/usr/local/Homebrew #Homebrewçš„å®‰è£…ä¸»ç›®å½• å…¶æ¬¡å®ƒä¼šåˆ›å»ºå¦‚ä¸‹ç›®å½•ï¼š 12#åˆ›å»ºä¸‹è½½ç¨‹åºçš„ç›®å½•ï¼Œå¦‚æœæ˜¯érootè´¦å·ä¸‹å®‰è£…çš„homebrewï¼Œè¯¥ç›®å½•ä¼šåœ¨æœ€åå˜æˆ~/Library/Caches/Homebrew==&gt; /usr/bin/sudo /bin/mkdir -p /Library/Caches/Homebrew 3.Homebrew å‘½ä»¤æè¿° å‘½ä»¤ æè¿° brew search [TEXT| /REGEX/] æœç´¢ brew æ”¯æŒçš„è½¯ä»¶ï¼ˆæ”¯æŒæ¨¡ç³Šæœç´¢ï¼‰ brew info [FORMULA...] æ˜¾ç¤ºè½¯ä»¶çš„å„ç§ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç‰ˆæœ¬ã€æºç åœ°å€ã€ä¾èµ–ç­‰ç­‰ï¼‰ã€‚ brew install [FORMULA...] å®‰è£…æŒ‡å®šçš„è½¯ä»¶ã€‚ brew update brew è‡ªèº«è¿›è¡Œæ›´æ–°ã€‚ brew upgrade [FORMULA...] æ›´æ–°å®‰è£…è¿‡çš„è½¯ä»¶ã€‚ å¦‚æœä¸åŠ è½¯ä»¶åï¼Œå°±æ›´æ–°æ‰€æœ‰å¯ä»¥æ›´æ–°çš„è½¯ä»¶ã€‚ brew list [FORMULA...] æŸ¥çœ‹è½¯ä»¶å®‰è£…çš„æ–‡ä»¶åˆ—è¡¨ã€‚å¦‚æœä¸åŠ è½¯ä»¶åï¼Œå°±åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åˆ—è¡¨ã€‚ brew uninstall [FORMULA...] å¸è½½æŒ‡å®šçš„è½¯ä»¶ã€‚ &#96;brew services run [FORMULA â€“all]&#96; &#96;brew services start [FORMULA â€“all]&#96; &#96;brew services stop [FORMULA â€“all]&#96; &#96;brew services restart [FORMULA â€“all]&#96; brew services cleanup åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„æœåŠ¡ å‚è€ƒæ–‡æ¡£ homebrew ç®€ä»‹","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://guoshunfa.com/tags/mac/"},{"name":"homebrew","slug":"homebrew","permalink":"https://guoshunfa.com/tags/homebrew/"}]},{"title":"Mac é—®é¢˜è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Mac-é—®é¢˜è®°å½•","date":"2022-07-01T03:11:58.000Z","updated":"2024-01-28T11:41:39.275Z","comments":true,"path":"2022/07/Mac-é—®é¢˜è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Mac-%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/","excerpt":"","text":"1. ç£ç›˜1.1. ç£ç›˜è£…è½½é—®é¢˜ç§»åŠ¨ç¡¬ç›˜æˆ–uç›˜ç”±äºé”™è¯¯æ’æ‹”è€Œå¯¼è‡´Macæ— æ³•è¯†åˆ«çš„ç®€å•æ€¥æ•‘ï¼Œä¿®å¤ã€‚ 1.1.1. ä½¿ç”¨å‘½ä»¤è£…è½½1234# æŸ¥çœ‹ç£ç›˜çŠ¶æ€ï¼Œæ‰¾åˆ°æ²¡æœ‰è£…è½½çš„ç£ç›˜diskutil list# æŒ‚è½½ï¼Œè¿™é‡Œçš„/dev/disk2æ˜¯æˆ‘æ²¡æœ‰è£…è½½çš„ç£ç›˜sudo diskutil mount /dev/disk2 2. åº”ç”¨2.1. MACæ‰“å¼€è½¯ä»¶æŠ¥é”™ï¼šæ— æ³•éªŒè¯å¼€å‘è€…çš„è§£å†³æ–¹æ³•ä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤è¿›è¡Œæˆæƒï¼š 1sudo spctl --master-disable 3. èµ„æº3.1.èµ„æºæ–‡ä»¶é‡æ–°åŠ è½½1source ~/.bash_profile","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://guoshunfa.com/tags/mac/"}]},{"title":"Linux Nanoå‘½ä»¤è¡Œç¼–è¾‘å™¨","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Linux-Nanoå‘½ä»¤è¡Œç¼–è¾‘å™¨","date":"2022-07-01T03:10:51.000Z","updated":"2024-01-28T11:41:39.274Z","comments":true,"path":"2022/07/Linux-Nanoå‘½ä»¤è¡Œç¼–è¾‘å™¨/","link":"","permalink":"https://guoshunfa.com/2022/07/Linux-Nano%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%BC%96%E8%BE%91%E5%99%A8/","excerpt":"","text":"è½¬è½½è‡ªï¼šhttps://www.myfreax.com/how-to-use-nano-text-editor/ åœ¨å‘½ä»¤è¡Œä¸Šå·¥ä½œæ—¶ï¼Œç»å¸¸éœ€è¦åˆ›å»ºæˆ–ç¼–è¾‘æ–‡æœ¬æ–‡ä»¶ã€‚Vimå’ŒEmacsæ˜¯æœ€å¼ºå¤§å’Œæœ€å—æ¬¢è¿çš„ä¸¤ç§å‘½ä»¤è¡Œç¼–è¾‘å™¨ã€‚ä¸¤è€…éƒ½æœ‰é™¡å³­çš„å­¦ä¹ æ›²çº¿ï¼Œå¯èƒ½ä¼šå“åˆ°æ–°ç”¨æˆ·ã€‚å¯¹äºé‚£äº›éœ€è¦ç®€å•ç¼–è¾‘å™¨çš„äººï¼Œå¯ä»¥ä½¿ç”¨nanoã€‚ GNU nanoæ˜¯ç”¨äºUnixå’ŒLinuxæ“ä½œç³»ç»Ÿçš„æ˜“äºä½¿ç”¨çš„å‘½ä»¤è¡Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚å®ƒåŒ…æ‹¬æ‚¨å¸Œæœ›ä»å¸¸è§„æ–‡æœ¬ç¼–è¾‘å™¨è·å¾—çš„æ‰€æœ‰åŸºæœ¬åŠŸèƒ½ï¼Œä¾‹å¦‚è¯­æ³•é«˜äº®æ˜¾ç¤ºï¼Œå¤šä¸ªç¼“å†²åŒºï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢å’Œæ›¿æ¢ï¼Œæ‹¼å†™æ£€æŸ¥ï¼ŒUTF-8ç¼–ç ç­‰ã€‚ åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä½¿ç”¨nanoç¼–è¾‘å™¨çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬å¦‚ä½•åˆ›å»ºå’Œæ‰“å¼€æ–‡ä»¶ï¼Œç¼–è¾‘æ–‡ä»¶ï¼Œä¿å­˜æ–‡ä»¶ï¼Œæœç´¢å’Œæ›¿æ¢æ–‡æœ¬ï¼Œå‰ªåˆ‡å’Œç²˜è´´æ–‡æœ¬ï¼Œé€€å‡ºnanoç¼–è¾‘å™¨ï¼Œé…ç½®nanoï¼Œé…ç½®nanoè¯­æ³•é«˜äº®ã€‚ å®‰è£…NanoNanoæ–‡æœ¬ç¼–è¾‘å™¨å·²é¢„è£…åœ¨macOSå’Œå¤§å¤šæ•°Linuxå‘è¡Œç‰ˆä¸Šã€‚è¦æ£€æŸ¥æ‚¨çš„ç³»ç»Ÿä¸Šæ˜¯å¦å®‰è£…äº†å®ƒï¼Œè¯·è¾“å…¥ï¼š 1nano --version Copy è¾“å‡ºå°†å¦‚ä¸‹æ‰€ç¤ºï¼š 1234GNU nano, version 2.9.3(C) 1999-2011, 2013-2018 Free Software Foundation, Inc.(C) 2014-2018 the contributors to nanoEmail: nano@nano-editor.org Web: https://nano-editor.org/ å¦‚æœæ‚¨çš„ç³»ç»Ÿä¸Šæœªå®‰è£…nanoï¼Œåˆ™å¯ä»¥ä½¿ç”¨å‘è¡Œç‰ˆçš„è½¯ä»¶åŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…ã€‚ åœ¨Ubuntuå’ŒDebianä¸Šå®‰è£…Nano1sudo apt install nano Copy åœ¨CentOSå’ŒFedoraä¸Šå®‰è£…Nano1sudo yum install nano Copy æ‰“å¼€å’Œåˆ›å»ºæ–‡ä»¶è¦æ‰“å¼€ç°æœ‰æ–‡ä»¶æˆ–åˆ›å»ºæ–°æ–‡ä»¶ï¼Œè¯·é”®å…¥ï¼Œnanoç„¶åè¾“å…¥æ–‡ä»¶åï¼š 1nano filename Copy è¿™å°†æ‰“å¼€ä¸€ä¸ªæ–°çš„ç¼–è¾‘å™¨çª—å£ï¼Œæ‚¨å¯ä»¥å¼€å§‹ç¼–è¾‘æ–‡ä»¶ã€‚åœ¨çª—å£çš„åº•éƒ¨ï¼Œåˆ—å‡ºäº†å¯ä¸nanoç¼–è¾‘å™¨ä¸€èµ·ä½¿ç”¨çš„æŒ‰é”®å¿«æ·æ–¹å¼ã€‚ æ‰€æœ‰å‘½ä»¤éƒ½ä»¥^æˆ–Må­—ç¬¦ä½œä¸ºå‰ç¼€ã€‚^è¡¨ç¤ºCtrlé”®ã€‚ä¾‹å¦‚ï¼Œ^Jæ„å‘³ç€åŒæ—¶æŒ‰ä¸‹Ctrlå’ŒJé”®ã€‚å­—æ¯Mä»£è¡¨Alt é”®ã€‚æ‚¨å¯ä»¥é€šè¿‡é”®å…¥Ctrl+gè·å–æ‰€æœ‰å‘½ä»¤çš„åˆ—è¡¨ã€‚ ä¸ºäº†èƒ½å¤Ÿæ‰“å¼€æ–‡ä»¶ï¼Œæ‚¨å¿…é¡»å¯¹è¯¥æ–‡ä»¶å…·æœ‰è¯»å–æƒé™ã€‚å¦‚æœè¦åœ¨æ‰“å¼€æ–‡ä»¶æ˜¯ä½¿å…‰æ ‡åœ¨æŒ‡å®šè¡Œå’Œå­—ç¬¦ä¸Šï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š 1nano +line_number,character_number filename Copy å¦‚æœçœç•¥å…‰æ ‡åˆ™å°†ä½äºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸Šã€‚ ç¼–è¾‘æ–‡ä»¶ä¸vimä¸åŒï¼Œnanoæ˜¯ä¸€ç§æ— æ¨¡å¼çš„ç¼–è¾‘å™¨ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨æ‰“å¼€æ–‡ä»¶åç«‹å³å¼€å§‹è¾“å…¥å’Œç¼–è¾‘æ–‡æœ¬ã€‚è¦å°†å…‰æ ‡ç§»åŠ¨åˆ°ç‰¹å®šçš„è¡Œå’Œå­—ç¬¦ä¸Šï¼Œè¯·ä½¿ç”¨Ctrl+_å¿«æ·é”®ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨Enter line number, column number:å­—æ®µä¸­è¾“å…¥æ•°å­—ï¼Œç„¶åæŒ‰Enterã€‚ æœç´¢å’Œæ›¿æ¢æŒ‰ä¸‹Ctrl+wå°†ä¼šæœç´¢æ–‡æœ¬ï¼Œç„¶åé”®å…¥æœç´¢è¯ï¼Œå†æŒ‰Enterã€‚å…‰æ ‡å°†ç§»è‡³ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ã€‚è¦ç§»è‡³ä¸‹ä¸€ä¸ªåŒ¹é…é€‰é¡¹ï¼Œè¯·æŒ‰Alt+wã€‚ å¦‚æœè¦æœç´¢å¹¶æ›¿æ¢ï¼Œè¯·æŒ‰Ctrl+\\ã€‚è¾“å…¥æœç´¢è¯å’Œè¦æ›¿æ¢çš„æ–‡æœ¬ã€‚ç¼–è¾‘å™¨å°†ç§»è‡³ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œå¹¶è¯¢é—®æ‚¨æ˜¯å¦æ›¿æ¢å®ƒã€‚Yæˆ–Nåå°†ç§»è‡³ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹ã€‚æŒ‰ä¸‹Aå°†æ›¿æ¢æ‰€æœ‰åŒ¹é…é¡¹ã€‚ å¤åˆ¶&#x2F;å‰ªåˆ‡å’Œç²˜è´´è¦é€‰æ‹©æ–‡æœ¬ï¼Œè¯·å°†å…‰æ ‡ç§»åŠ¨åˆ°æ–‡æœ¬çš„å¼€å¤´ï¼Œç„¶åæŒ‰Alt+aã€‚è¿™å°†è®¾ç½®ä¸€ä¸ªé€‰æ‹©æ ‡è®°ã€‚ä½¿ç”¨ç®­å¤´é”®å°†å…‰æ ‡ç§»åŠ¨åˆ°è¦é€‰æ‹©çš„æ–‡æœ¬çš„æœ«å°¾ã€‚æ‰€é€‰æ–‡æœ¬å°†çªå‡ºæ˜¾ç¤ºã€‚å¦‚æœè¦å–æ¶ˆé€‰æ‹©ï¼Œè¯·æŒ‰Ctrl+6ã€‚ ä½¿ç”¨Alt+6å‘½ä»¤å°†æ‰€é€‰æ–‡æœ¬å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚Ctrl+kå°†å‰ªåˆ‡é€‰å®šçš„æ–‡æœ¬ã€‚å¦‚æœè¦å‰ªåˆ‡æ•´è¡Œï¼Œåªéœ€å°†å…‰æ ‡ç§»è‡³è¯¥è¡Œå¹¶æŒ‰Ctrl+kã€‚æ‚¨å¯ä»¥é€šè¿‡Ctrl+kå¤šæ¬¡å•å‡»æ¥å‰ªåˆ‡å¤šè¡Œã€‚ è¦ç²˜è´´æ–‡æœ¬ï¼Œè¯·å°†å…‰æ ‡ç§»åŠ¨åˆ°è¦æ”¾ç½®æ–‡æœ¬çš„ä½ç½®ï¼Œç„¶åæŒ‰Ctrl+uã€‚ ä¿å­˜å¹¶é€€å‡ºè¦ä¿å­˜å¯¹æ–‡ä»¶æ‰€åšçš„æ›´æ”¹ï¼Œè¯·æŒ‰Ctrl+oã€‚å¦‚æœè¯¥æ–‡ä»¶å°šä¸å­˜åœ¨ï¼Œåˆ™å°†åœ¨ä¿å­˜åç«‹å³åˆ›å»ºè¯¥æ–‡ä»¶ã€‚ å¦‚æœè¦é€€å‡ºnanoï¼Œè¯·æŒ‰Ctrl+xã€‚å¦‚æœæœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œç³»ç»Ÿå°†è¯¢é—®æ‚¨æ˜¯å¦è¦ä¿å­˜æ›´æ”¹ã€‚è¦ä¿å­˜æ–‡ä»¶ï¼Œæ‚¨å¿…é¡»å…·æœ‰å¯¹è¯¥æ–‡ä»¶çš„å†™æƒé™ã€‚å¦‚æœè¦åˆ›å»ºæ–°æ–‡ä»¶ï¼Œåˆ™éœ€è¦å¯¹å°†è¦åˆ›å»ºæ–‡ä»¶çš„ç›®å½•å…·æœ‰å†™æƒé™ã€‚ è‡ªå®šä¹‰Nanoå½“å¯åŠ¨nanoæ—¶ï¼Œå®ƒå°†ä»ç³»ç»ŸèŒƒå›´å†…é…ç½®æ–‡ä»¶/etc/nanorcå’Œç”¨æˆ·çš„é…ç½®æ–‡ä»¶~/.config/nano/nanorcæˆ–è€…~/.nanorcä¸­è¯»å–å…¶é…ç½®å‚æ•°ã€‚ç”¨æˆ·æ–‡ä»¶ä¸­æŒ‡å®šçš„é€‰é¡¹ä¼˜å…ˆäºå…¨å±€é€‰é¡¹ã€‚è®¿é—®nanorcé¡µé¢ä»¥è·å–æ‰€æœ‰å¯ç”¨é€‰é¡¹çš„å®Œæ•´åˆ—è¡¨ã€‚ è¯­æ³•é«˜äº®Nanoé™„å¸¦äº†é’ˆå¯¹å¤§å¤šæ•°æµè¡Œæ–‡ä»¶ç±»å‹çš„è¯­æ³•é«˜äº®è§„åˆ™ã€‚åœ¨å¤§å¤šæ•°Linuxç³»ç»Ÿä¸Šï¼Œè¯­æ³•æ–‡ä»¶å­˜å‚¨åœ¨/usr/share/nanoç›®å½•ä¸­ï¼Œå¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹åŒ…å«åœ¨/etc/nanorcé…ç½®æ–‡ä»¶ä¸­ã€‚ 1include &quot;/usr/share/nano/*.nanorc&quot; &#x2F;etc&#x2F;nanorc è¦æ–°æ–‡ä»¶ç±»å‹å¯ç”¨è¯­æ³•é«˜äº®ï¼Œæœ€ç®€å•æ–¹å¼æ˜¯å°†è¯­æ³•é«˜äº®è§„åˆ™æ–‡ä»¶æ·»åŠ åˆ°/usr/share/nanoç›®å½•ä¸­ã€‚ å°†Nanoè®¾ç½®ä¸ºé»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨åœ¨å¤§å¤šæ•°Linuxç³»ç»Ÿä¸Šï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¸å¦‚visudoå’Œcrontabå‘½ä»¤çš„é»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨è®¾ç½®ä¸ºviã€‚è¦ä½¿ç”¨nanoä½œä¸ºé»˜è®¤çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ‚¨éœ€è¦æ›´æ”¹VISUALå’ŒEDITORç¯å¢ƒå˜é‡ã€‚Bashç”¨æˆ·å¯åœ¨~/.bashrcæ–‡ä»¶è®¾ç½®VISUALå’ŒEDITORç¯å¢ƒå˜é‡ï¼š 12export VISUAL=nanoexport EDITOR=&quot;$VISUAL&quot; ~&#x2F;.bashrc åŸºæœ¬çš„ç”¨æ³•å¼€å§‹ä½¿ç”¨nanoç¼–è¾‘å™¨çš„æœ€åŸºæœ¬æ­¥éª¤æ˜¯ã€‚é¦–å…ˆåœ¨ç»ˆç«¯é”®å…¥nanoåæ¥æ–‡ä»¶åã€‚æ ¹æ®éœ€è¦ç¼–è¾‘æ–‡ä»¶ã€‚ä½¿ç”¨Ctrl-xå‘½ä»¤ä¿å­˜å¹¶é€€å‡ºæ–‡æœ¬ç¼–è¾‘å™¨ã€‚","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://guoshunfa.com/tags/linux/"},{"name":"Nano","slug":"Nano","permalink":"https://guoshunfa.com/tags/Nano/"}]},{"title":"Linux yumä½¿ç”¨è¯´æ˜","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Linux-yumä½¿ç”¨è¯´æ˜","date":"2022-07-01T03:09:31.000Z","updated":"2024-01-28T11:41:39.274Z","comments":true,"path":"2022/07/Linux-yumä½¿ç”¨è¯´æ˜/","link":"","permalink":"https://guoshunfa.com/2022/07/Linux-yum%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/","excerpt":"","text":"ä¸€ã€Yum ç®€ä»‹Yumï¼ˆå…¨ç§°ä¸º Yellow dog Updater, Modifiedï¼‰æ˜¯ä¸€ä¸ªåœ¨Fedoraå’ŒRedHatä»¥åŠCentOSä¸­çš„Shellå‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚åŸºäºRPMåŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½RPMåŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ï¼Œæ— é¡»ç¹çåœ°ä¸€æ¬¡æ¬¡ä¸‹è½½ã€å®‰è£…ã€‚ äºŒã€å‘½ä»¤è®°å½• å‘½ä»¤ å‘½ä»¤æè¿° ç¤ºä¾‹ yum list installed æ˜¾ç¤ºå·²ç»å®‰è£…çš„è½¯ä»¶åŒ…ã€‚ yum list installed yum list [package] æŸ¥æ‰¾å¯ä»¥å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œpackageæ›¿ä»£ä¸ºæŸ¥è¯¢çš„è½¯ä»¶åŒ…ã€‚ yum list tomcat yum install [package] å®‰è£…è½¯ä»¶åŒ…ï¼Œpackageæ›¿ä»£ä¸ºæŸ¥è¯¢çš„è½¯ä»¶åŒ…ã€‚-yè‡ªåŠ¨åº”ç­”yesï¼Œå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šè®©ç”¨æˆ·é€‰æ‹©æ˜¯å¦è¦ç»§ç»­ï¼Œ-yè‡ªåŠ¨åº”ç­”yesï¼Œä¾‹å­ï¼šyum -y install tomcat yum install tomcat yum remove [package] å¸è½½è½¯ä»¶åŒ…ï¼Œpackageæ›¿ä»£ä¸ºæŸ¥è¯¢çš„è½¯ä»¶åŒ…ã€‚ yum remove tomcat yum deplist [package] åˆ—å‡ºè½¯ä»¶åŒ…çš„ä¾èµ–ï¼Œpackageæ›¿ä»£ä¸ºæŸ¥è¯¢çš„è½¯ä»¶åŒ…ã€‚ yum deplist tomcat yum info [package] info æ˜¾ç¤ºè½¯ä»¶åŒ…çš„æè¿°ä¿¡æ¯å’Œæ¦‚è¦ä¿¡æ¯ï¼Œpackageæ›¿ä»£ä¸ºæŸ¥è¯¢çš„è½¯ä»¶åŒ…ã€‚ yum info tomcat yum update å‡çº§æ‰€æœ‰çš„è½¯ä»¶åŒ… yum update yum update [package] å‡çº§æŸä¸€ä¸ªè½¯ä»¶åŒ… ï¼Œpackageæ›¿ä»£ä¸ºæŸ¥è¯¢çš„è½¯ä»¶åŒ…ã€‚ yum update tomcat yum check-update æ£€æŸ¥å¯æ›´æ–°çš„ç¨‹åºã€‚ yum check-update å‚è€ƒæ–‡æ¡£ Yum å®‰è£…ã€å¸è½½è½¯ä»¶","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://guoshunfa.com/tags/linux/"},{"name":"yum","slug":"yum","permalink":"https://guoshunfa.com/tags/yum/"}]},{"title":"Linuxé—®é¢˜è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡å™¨/Linuxé—®é¢˜è®°å½•","date":"2022-07-01T03:08:16.000Z","updated":"2024-01-28T11:41:39.274Z","comments":true,"path":"2022/07/Linuxé—®é¢˜è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/Linux%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/","excerpt":"","text":"1. linuxæ‰§è¡ŒshæŠ¥é”™ï¼š$â€™\\râ€™: æœªæ‰¾åˆ°å‘½ä»¤èƒŒæ™¯æè¿°ï¼šæ‰§è¡Œ.shè„šæœ¬æ—¶å‡ºç°$â€™\\râ€™: æœªæ‰¾åˆ°å‘½ä»¤ï¼Œ åŸå› ï¼šæ˜¯å› ä¸ºå‘½ä»¤ç›´æ¥ä»windows å¤åˆ¶è¿‡æ¥å¯¼è‡´çš„** è§£å†³æ–¹æ¡ˆ yum install dos2unix dos2unix ***.sh è¿›è¡Œè½¬æ¢ å†æ¬¡æ‰§è¡Œå³å¯ 2. åˆ é™¤user.iniæç¤ºOperation not permitted é—®é¢˜è§£å†³æ–¹æ¡ˆæ¥è‡ªï¼šhttps://blog.csdn.net/gdali/article/details/107281052 èƒŒæ™¯æè¿°ï¼šåˆ é™¤æ–‡ä»¶å¤¹æ—¶ï¼Œæ–‡ä»¶ä¸­å­˜åœ¨æ–‡ä»¶â€œ.user.iniâ€ï¼ŒæŠ¥å‡ºé”™è¯¯â€œåˆ é™¤user.iniæç¤ºOperation not permittedâ€ã€‚ è§£å†³æ–¹æ¡ˆï¼š è¿›å…¥åˆ°.user.ini&#39;æ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œä¸€ä¸‹ lsattr -aï¼ŒæŸ¥çœ‹æ–‡ä»¶ä¸‹ä¸‹è¾¹åŒ…å«æ–‡ä»¶çš„å±æ€§ï¼Œçœ‹åˆ°.user.iniâ€™æœ‰ä¸ªâ€™iâ€™å±æ€§ï¼Œä»£è¡¨ä¸å¾—ä»»æ„æ›´åŠ¨æ–‡ä»¶æˆ–ç›®å½• ç„¶åæ‰§è¡Œå‘½ä»¤ï¼šchattr -i .user.ini å°±å¯ä»¥å»é™¤æ‰æ­¤å±æ€§ï¼Œç„¶åæˆ‘ä»¬å†æ‰§è¡Œåˆ é™¤ï¼Œå°±å¯ä»¥é¡ºåˆ©åˆ é™¤æ‰äº†ã€‚","categories":[{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://guoshunfa.com/tags/linux/"}]},{"title":"MongoDBå­˜å‚¨è¿‡ç¨‹","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/MongoDBå­˜å‚¨è¿‡ç¨‹","date":"2022-07-01T03:06:37.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/MongoDBå­˜å‚¨è¿‡ç¨‹/","link":"","permalink":"https://guoshunfa.com/2022/07/MongoDB%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/","excerpt":"","text":"ä½œè€…ï¼šç»¿èŒ¶å¶å‡ºå¤„ï¼šhttp://www.cnblogs.com/greenteaone/æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚ MongoDBæ”¯æŒå­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨ï¼Œå®ƒçš„å­˜å‚¨è¿‡ç¨‹æ˜¯ç”¨javascriptå®ç°çš„ï¼Œè¢«å­˜åœ¨äºsystem.jsè¡¨ä¸­ï¼Œå¯ä»¥æ¥æ”¶å’Œè¾“å‡ºå‚æ•°ï¼Œè¿”å›æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹çš„çŠ¶æ€å€¼ï¼Œä¹Ÿå¯ä»¥åµŒå¥—è°ƒç”¨ã€‚ æ‰€ä»¥æˆ‘ç†è§£çš„MongoDBçš„å­˜å‚¨è¿‡ç¨‹å°±æ˜¯ï¼š æŠŠjavascriptå˜é‡ï¼Œå­˜å‚¨åˆ°MongoDBçš„æ•°æ®åº“çš„ç‰¹æ®Šé›†åˆ:system.jsè¡¨ä¸­,ç„¶åè¿™äº›å˜é‡å¯ä»¥åœ¨ä½•MongoDBçš„javascriptä¸Šä¸‹æ–‡ä¸­è°ƒç”¨,åŒ…æ‹¬â€$whereâ€å­å¥,db.evalè°ƒç”¨,MapReduceä½œä¸šã€‚ 1. æ·»åŠ å­˜å‚¨è¿‡ç¨‹123456789101112131415161718192021222324 db.system.js.save(&#123;_id:å­˜å‚¨è¿‡ç¨‹åç§°,value:å­˜å‚¨è¿‡ç¨‹ä½“&#125;) //æ·»åŠ ä¸€ä¸ªæ–°çš„å­˜å‚¨è¿‡ç¨‹æˆ–è€…æ›´æ–°ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å­˜å‚¨è¿‡ç¨‹ æˆ–è€… db.system.js.insert(&#123;_id:å­˜å‚¨è¿‡ç¨‹åç§°,value:å­˜å‚¨è¿‡ç¨‹ä½“&#125;) //æ·»åŠ ä¸€ä¸ªæ–°çš„å­˜å‚¨è¿‡ç¨‹ å…¶ä¸­ï¼š_idå’Œvalueå±æ€§æ˜¯å¿…é¡»çš„ï¼Œå¦‚æœæ²¡æœ‰_idè¿™ä¸ªå±æ€§ï¼Œä¼šå¯¼è‡´æ— æ³•è°ƒç”¨ã€‚ä¹Ÿå¯ä»¥å¢åŠ å…¶ä»–çš„å±æ€§æ¥æè¿°è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹ã€‚æ¯”å¦‚ï¼š db.system.js.insert(&#123;_id:å­˜å‚¨è¿‡ç¨‹åç§°,value:å­˜å‚¨è¿‡ç¨‹ä½“ï¼Œdiscrptionï¼š&quot;è¿™æ˜¯å­˜å‚¨è¿‡ç¨‹&quot;&#125;)2.ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹ db.system.js.update(&#123;_id:å­˜å‚¨è¿‡ç¨‹åç§°&#125;,&#123;value:å­˜å‚¨è¿‡ç¨‹ä½“&#125;)3.æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ db.eval(&#x27;å­˜å‚¨è¿‡ç¨‹åç§°(å‚æ•°)&#x27;)4.æŸ¥æ‰¾å­˜å‚¨è¿‡ç¨‹ db.system.js.find();ä»¥ä¸Šå‘½ä»¤éƒ½å¯ä»¥åœ¨mongodb shellå‘½ä»¤çª—å£ä¸‹æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥å†™åœ¨javascriptæ–‡ä»¶é‡Œæ‰§è¡Œã€‚ä¸‹é¢çš„ç¤ºä¾‹å†™åœ¨javascriptæ–‡ä»¶é‡Œã€‚è¿æ¥æ•°æ®åº“æœ‰ä¸¤ç§æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼Œç¤ºä¾‹é‡Œé¢ç”¨çš„æ–¹æ³•1æ–¹æ³•1ï¼šdb = connect(&quot;localhost:port/myDatabase&quot;);æ–¹æ³•2ï¼šnew Mongo() æˆ–è€… new Mongo(&lt;host&gt;) æˆ–è€… new Mongo(&lt;host:port&gt;)conn = new Mongo();db = conn.getDB(&quot;myDatabase&quot;);æ–°å»ºtest.jsï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445var db = connect( &#x27;school&#x27; ); //è¿æ¥çš„æ•°æ®åº“åå­—ä¸ºï¼šschooldb.courses.save(&#123;name:&quot;è‹±è¯­&quot;,time:&#x27;å‘¨äºŒ ä¸Šåˆ 8:00-9:50&#x27;&#125;);db.courses.save(&#123;name:&quot;æ•°å­¦&quot;,time:&#x27;å‘¨äºŒ ä¸Šåˆ 10:00-12:00&#x27;&#125;);db.courses.save(&#123;name:&quot;è¯­æ–‡&quot;,time:&#x27;å‘¨äºŒ ä¸‹åˆåˆ 2:00-4:00&#x27;&#125;);db.people.save(&#123;name:&#x27;åˆ˜æ¹˜&#x27;,type:&#x27;teacher&#x27;,age:28&#125;);db.people.save(&#123;name:&#x27;ç‹èè&#x27;,type:&#x27;student&#x27;,age:12&#125;);//1.æ·»åŠ å­˜å‚¨è¿‡ç¨‹ //db.system.js.save(&#123;_id:å­˜å‚¨è¿‡ç¨‹åç§°,value:å­˜å‚¨è¿‡ç¨‹ä½“&#125;)db.system.js.save(&#123;_id:&quot;getCoursesCount&quot;,value:function()&#123;return db.courses.count();&#125;,description:&#x27;è·å–è¯¾ç¨‹æ•°&#x27;&#125;); //db.system.js.insert(&#123;_id:å­˜å‚¨è¿‡ç¨‹åç§°,value:å­˜å‚¨è¿‡ç¨‹ä½“&#125;)db.system.js.insert(&#123; _id:&quot;getPeople&quot;, value:function(type)&#123; return type; &#125;, description:&#x27;æ˜¾ç¤ºæ ¹æ®ç±»å‹æ˜¾ç¤ºäººå‘˜&#x27; &#125;);//2.ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹ //db.system.js.update(&#123;_id:å­˜å‚¨è¿‡ç¨‹åç§°&#125;,&#123;value:å­˜å‚¨è¿‡ç¨‹ä½“&#125;)db.system.js.update(&#123; _id:&quot;getPeople&quot;&#125;,&#123; value:function(type)&#123; if(type==null)&#123; return db.people.find().toArray(); &#125;else &#123; return db.people.find(&#123;type:type&#125;).toArray(); &#125; &#125;&#125;);//3.æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ //db.eval(&#x27;å­˜å‚¨è¿‡ç¨‹åç§°(å‚æ•°)&#x27;)var obj=db.eval(&quot;getPeople()&quot;);print(JSON.stringify(obj));var obj1=db.eval(&quot;getPeople(&#x27;student&#x27;)&quot;);print(JSON.stringify(obj1));print(db.eval(&quot;getCoursesCount()&quot;));//4.æŸ¥æ‰¾å­˜å‚¨è¿‡ç¨‹ //db.system.js.find();var obj2= db.system.js.find();print(JSON.stringify(obj2.toArray())); æ‰¾åˆ°test.jsçš„æ–‡ä»¶ä½ç½®ï¼Œæˆ‘çš„æ–‡ä»¶ä½ç½®å¦‚ä¸‹å›¾ï¼Œç„¶åæŒ‰ä½shifté”®ï¼Œç‚¹å‡»é¼ æ ‡å³é”®å¼¹å‡ºä¸€ä¸ªèœå•ï¼Œé€‰æ‹© ã€åœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£ï¼ˆWï¼‰ã€‘ å¼¹å‡ºå‘½ä»¤çª—å£ï¼Œæ¥ä¸‹æ¥è¿è¡Œtest.js,ä¼šæœ‰ä¸¤ç§æ–¹æ³• æ–¹æ³•1ï¼š åœ¨å‘½ä»¤çª—å£è¾“å…¥mongo test.jsï¼ŒæŒ‰å›è½¦é”®ï¼Œtest.jså°±ä¼šè¢«è¿è¡Œï¼Œå¦‚ä¸‹å›¾ æ–¹æ³•2ï¼šåœ¨å‘½ä»¤çª—å£è¾“å…¥ mongo æŒ‰å›è½¦é”®ï¼Œç„¶åè¾“å…¥load(â€˜test.jsâ€™),è¿™æ ·test.jsä¹Ÿä¼šè¢«è¿è¡Œï¼Œå¦‚ä¸‹å›¾ï¼š","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://guoshunfa.com/tags/MongoDB/"},{"name":"å­˜å‚¨è¿‡ç¨‹","slug":"å­˜å‚¨è¿‡ç¨‹","permalink":"https://guoshunfa.com/tags/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/"}]},{"title":"MongoDBæ‰§è¡ŒJSè„šæœ¬","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/MongoDBæ‰§è¡ŒJSè„šæœ¬","date":"2022-07-01T03:05:39.000Z","updated":"2024-01-28T11:41:39.250Z","comments":true,"path":"2022/07/MongoDBæ‰§è¡ŒJSè„šæœ¬/","link":"","permalink":"https://guoshunfa.com/2022/07/MongoDB%E6%89%A7%E8%A1%8CJS%E8%84%9A%E6%9C%AC/","excerpt":"","text":"å¯ä»¥ä½¿ç”¨å¤§å¤šæ•°jsè¯­æ³•ã€‚ è„šæœ¬æ‰§è¡Œæ–¹æ³•ç¬¬ä¸€ç§ï¼š è¿›å…¥shellã€‚ è¾“å…¥ï¼šmongo è„šæœ¬è·¯å¾„ã€‚ï¼ˆè„šæœ¬å†…éƒ¨éœ€è¦å…ˆè¿æ¥æ•°æ®åº“ã€‚ï¼‰ ä¾‹ï¼š 1mongo /Users/guoshunfa/Desktop/test.js ç¬¬äºŒç§ï¼š è¿›å…¥shellã€‚ è¿›å…¥mongodbæ§åˆ¶å°ã€‚è¾“å…¥ï¼šmongoã€‚ é€‰æ‹©æ•°æ®åº“ã€‚è¾“å…¥ï¼šuse æ•°æ®åº“åã€‚ï¼ˆéå¿…éœ€ï¼Œå¯ä»¥é€šè¿‡è„šæœ¬é€‰æ‹©æ•°æ®åº“ã€‚ï¼‰ åŠ è½½è„šæœ¬ã€‚è¾“å…¥ï¼šload(â€˜ è„šæœ¬è·¯å¾„ â€˜)ã€‚ ä¾‹ï¼š 123&gt; use testswitched to db test&gt; load(&#x27;/Users/guoshunfa/Desktop/test.js &#x27;) è¯­æ³•æ•°æ®åº“è¿æ¥ç›¸å…³è¯­æ³• æè¿° è¯­æ³• è¿æ¥mongo const conn &#x3D; new Mongo(â€˜localhost:27017â€™) è¿æ¥æ•°æ®åº“ let db &#x3D; conn.getDB(â€˜testâ€™) åˆ‡æ¢æ•°æ®åº“ db &#x3D; db.getSiblingDB(â€˜testâ€™) æ˜¾ç¤ºæ‰€æœ‰çš„æ•°æ®åº“ const dbs &#x3D; db.adminCommand(â€˜listDatabasesâ€™) æ—¥å¿—æ‰“å°è¯­æ³• æè¿° è¯­æ³• æ§åˆ¶å°æ‰“å° print(â€˜æ˜¾ç¤ºæ‰€æœ‰çš„æ•°æ®åº“:â€™) jsonå½¢å¼æ§åˆ¶å°æ‰“å° printjson(*)","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://guoshunfa.com/tags/MongoDB/"},{"name":"è„šæœ¬","slug":"è„šæœ¬","permalink":"https://guoshunfa.com/tags/%E8%84%9A%E6%9C%AC/"},{"name":"HTML/CSS/JavaScript","slug":"HTML-CSS-JavaScript","permalink":"https://guoshunfa.com/tags/HTML-CSS-JavaScript/"}]},{"title":"Oracleå­˜å‚¨è¿‡ç¨‹ä¸å­˜å‚¨å‡½æ•°","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/Oracleå­˜å‚¨è¿‡ç¨‹ä¸å­˜å‚¨å‡½æ•°","date":"2022-07-01T03:03:53.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Oracleå­˜å‚¨è¿‡ç¨‹ä¸å­˜å‚¨å‡½æ•°/","link":"","permalink":"https://guoshunfa.com/2022/07/Oracle%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0/","excerpt":"","text":"ä¸€. å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°çš„å®šä¹‰ å®šä¹‰ï¼šå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œä¾›æ‰€æœ‰ç”¨æˆ·ç¨‹åºè°ƒç”¨çš„å­ç¨‹åºå«åšå­˜å‚¨è¿‡ç¨‹&#x2F;å­˜å‚¨å‡½æ•°ã€‚ å¤æ‚ç‚¹çš„è§£é‡Šï¼šå­˜å‚¨è¿‡ç¨‹(Stored Procedure)ï¼Œå°±æ˜¯ä¸€ç»„ç”¨äºå®Œæˆç‰¹å®šæ•°æ®åº“åŠŸèƒ½çš„SQL è¯­å¥é›†ï¼Œè¯¥SQLè¯­å¥é›†ç»è¿‡ç¼–è¯‘åå­˜å‚¨åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­ã€‚åœ¨ä½¿ç”¨æ—¶å€™ï¼Œç”¨æˆ·é€šè¿‡æŒ‡å®šå·²ç»å®šä¹‰çš„å­˜å‚¨è¿‡ç¨‹åå­—å¹¶ç»™å‡ºç›¸åº”çš„å­˜å‚¨è¿‡ç¨‹å‚æ•°æ¥è°ƒç”¨å¹¶æ‰§è¡Œå®ƒï¼Œä»è€Œå®Œæˆä¸€ä¸ªæˆ–ä¸€ç³»åˆ—çš„æ•°æ®åº“æ“ä½œã€‚ åŒºåˆ«ï¼šæ˜¯å¦å¯ä»¥é€šè¿‡returnè¿”å›å‡½æ•°å€¼ã€‚å­˜å‚¨å‡½æ•°å¯ä»¥é€šè¿‡returnè¿”å›å‡½æ•°å€¼ï¼›è€Œå­˜å‚¨è¿‡ç¨‹ä¸å¯ä»¥ã€‚ æ³¨æ„ç‚¹ï¼šç”±äºé€šè¿‡outå‚æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹ä¹Ÿå¯ä»¥è¿”å›å‡½æ•°å€¼ï¼Œæ‰€ä»¥å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°å·²ç»æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«äº†ã€‚è€Œå­˜å‚¨å‡½æ•°ä»ç„¶å­˜åœ¨ï¼Œæ˜¯ç”±äºoracleä¸æ–­å‡çº§ï¼Œéœ€è¦å®ç°å‘ä¸‹å…¼å®¹ï¼Œæ‰€ä»¥å­˜å‚¨å‡½æ•°å°±ä¸€ç›´å­˜ç•™ç€ã€‚ äºŒ. å­˜å‚¨è¿‡ç¨‹1. åˆ›å»ºå’Œä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ç”¨create procedureå‘½ä»¤å»ºç«‹å­˜å‚¨è¿‡ç¨‹ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š 123create [or replace] procedure è¿‡ç¨‹å(å‚æ•°åˆ—è¡¨)as -- asä¸å¯ä»¥çœç•¥PLSQLå­ç¨‹åºä½“; æ³¨æ„äº‹é¡¹ï¼š å­˜å‚¨è¿‡ç¨‹æˆ–è€…å­˜å‚¨å‡½æ•°ï¼Œåªèƒ½åˆ›å»ºæˆ–è€…æ›¿æ¢ ã€‚ å‚æ•°å¯ä»¥å¸¦ä¹Ÿå¯ä»¥ä¸å¸¦ã€‚ asç›¸å½“äºPLSQLè¯­å¥ä¸­çš„declareï¼Œç”¨æ¥å£°æ˜å˜é‡ã€æ¸¸æ ‡ç­‰ï¼Œä½†æ˜¯ä¸å¯ä»¥çœç•¥ã€‚ 2. å…¥é—¨æ¡ˆä¾‹ï¼ˆ1ï¼‰ä¸å¸¦å‚æ•°çš„å­˜å‚¨è¿‡ç¨‹:ä¸ç”¨å¸¦æ‹¬å·123456create or replace procedure sayHelloasbegin dbms_output.put_line(&#x27;HelloWorld&#x27;);end;/ è°ƒç”¨æ–¹å¼ï¼š &lt;1&gt; ä½¿ç”¨executeï¼šexecæ˜¯sqlpluså‘½ä»¤ï¼Œåªèƒ½åœ¨sqlplusä¸­ä½¿ç”¨ï¼Œä½¿ç”¨æ—¶ï¼Œexecå¯ä»¥ç›´æ¥è·Ÿè¿‡ç¨‹åï¼ˆå¯ä»¥çœç•¥æ‹¬å·ï¼‰ï¼›æ§åˆ¶å°æ‰§è¡Œç¤ºä¾‹: 12SQL&gt; set serveroutput on;SQL&gt; exec sayHello; &lt;2&gt; ä½¿ç”¨callï¼šä½¿ç”¨callæ—¶ï¼Œè¦å¸¦ä¸Šæ‹¬å·;callä¸ºSQLå‘½ä»¤ä½¿ç”¨æ—¶ï¼Œå¯¹åœºæ™¯æ²¡æœ‰é™åˆ¶ã€‚æ§åˆ¶å°æ‰§è¡Œç¤ºä¾‹: 12SQL&gt; set serveroutput on;SQL&gt; call sayHello(); &lt;3&gt; ä½¿ç”¨PLSQLè¯­å¥è°ƒç”¨ï¼šæ§åˆ¶å°æ‰§è¡Œç¤ºä¾‹: 12345SQL&gt; set serveroutput on;SQL&gt; begin sayHello; end;/ ï¼ˆ2ï¼‰å¸¦å‚æ•°çš„å­˜å‚¨è¿‡ç¨‹: ç»™æŒ‡å®šçš„å‘˜å·¥æ¶¨100å…ƒå·¥èµ„,å¹¶ä¸”æ‰“å°æ¶¨å‰å’Œæ¶¨åçš„è–ªæ°´: 123456789101112create or replace procedure addSal(pempno in emp.empno%type)as pename emp.ename%type; beforesal emp.sal%type; aftersal emp.sal%type;begin select ename,sal into pename,beforesal from emp where empno=pempno; aftersal:=beforesal+100; update emp set sal=aftersal where empno=pempno; dbms_output.put_line(&#x27;å§“å: &#x27;||pename||&#x27; æ¶¨å‰å·¥èµ„:&#x27;||beforesal||&#x27;æ¶¨åå·¥èµ„:&#x27;||aftersal);end;/ 123456789SQL&gt; set serveroutput on;SQL&gt; begin 2 addSal(7782); 3 addSal(7788); 4 commit; 5 end; 6 /å§“åï¼šCLARK æ¶¨å‰å·¥èµ„:7608.87 æ¶¨åå·¥èµ„:7708.87å§“åï¼šSCOTT æ¶¨å‰å·¥èµ„:7263.4 æ¶¨åå·¥èµ„:7363.4 æ³¨æ„äº‹é¡¹ï¼š &lt;1&gt; è¦è¯´æ˜ï¼Œå‚æ•°æ˜¯è¾“å…¥å‚æ•°(in)è¿˜æ˜¯è¾“å‡ºå‚æ•°(out)ï¼› &lt;2&gt; ä¸ºä¿è¯è°ƒç”¨å¤šä¸ªå­˜å‚¨è¿‡ç¨‹ä¸­å¤„åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸åœ¨å­˜å‚¨è¿‡ç¨‹æˆ–è€…å­˜å‚¨å‡½æ•°ä¸­ï¼Œcommitæˆ–rollbackï¼› ä¸‰. å­˜å‚¨å‡½æ•°1. å­˜å‚¨å‡½æ•° å‡½æ•°(Function)ä¸ºä¸€å‘½åçš„å­˜å‚¨ç¨‹åº,å¯å¸¦å‚æ•°,å¹¶è¿”å›ä¸€è®¡ç®—å€¼. å‡½æ•°å’Œè¿‡ç¨‹çš„ç»“æ„ç±»ä¼¼,ä½†å¿…é¡»æœ‰ä¸€ä¸ªreturnå­å¥,ç”¨äºè¿”å›å‡½æ•°å€¼. 2. åˆ›å»ºå­˜å‚¨å‡½æ•°çš„è¯­æ³•1234create [or replace] function å‡½æ•°å(å‚æ•°åˆ—è¡¨)return å‡½æ•°å€¼ç±»å‹asPLSQLå­ç¨‹åºä½“; æ³¨æ„äº‹é¡¹: (1) ä¸å­˜å‚¨è¿‡ç¨‹æ³¨æ„äº‹é¡¹ç±»ä¼¼,ä¸åŒçš„æ˜¯,å¿…é¡»æœ‰ä¸ªè¿”å›å€¼; (2) å‚æ•°åˆ—è¡¨å¯ä»¥æœ‰,ä¹Ÿå¯ä»¥æ²¡æœ‰.å½“æ²¡æœ‰æ—¶,å‡½æ•°ååé¢ä¸è¦å¸¦æ‹¬å·. 123456789create or replace function queryempannal(pempno in number)return numberas psal emp.sal%type; pcomm emp.comm%type;begin select sal,comm into psal,pcomm from emp where empno=pempno; return psal*12+nvl(pcomm,0);end; å››. inå’Œoutå‚æ•°1.æ¦‚è¿° (1) ä¸€èˆ¬æ¥è®²,å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°çš„åŒºåˆ«åœ¨äºå­˜å‚¨å‡½æ•°å¯ä»¥æœ‰ä¸€ä¸ªè¿”å›å€¼;è€Œå­˜å‚¨è¿‡ç¨‹æ²¡æœ‰è¿”å›å€¼. (2) è¿‡ç¨‹å’Œå‡½æ•°éƒ½å¯ä»¥é€šè¿‡outæŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºå‚æ•°.æˆ‘ä»¬å¯ä»¥åˆ©ç”¨outå‚æ•°,åœ¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­å®ç°è¿”å›å¤šä¸ªå€¼. a. å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°éƒ½å¯ä»¥æœ‰outå‚æ•°; b. å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°éƒ½å¯ä»¥æœ‰å¤šä¸ªoutå‚æ•°; c. å­˜å‚¨è¿‡ç¨‹å¯ä»¥é€šè¿‡outå‚æ•°æ¥å®ç°è¿”å›å€¼; (3) ä»€ä¹ˆæ—¶å€™ç”¨å­˜å‚¨è¿‡ç¨‹&#x2F;å­˜å‚¨å‡½æ•°? åŸåˆ™:å¦‚æœåªæœ‰ä¸€ä¸ªè¿”å›å€¼,ç”¨å­˜å‚¨å‡½æ•°;å¦åˆ™,å°±ç”¨å­˜å‚¨è¿‡ç¨‹. 123456789create or replace procedure queryempinform(eno in number, pename out varchar2, psal out number, pjob out varchar2 )asbegin select ename,sal,job into pename,psal,pjob from emp where empno=eno;end;/ äº”. æ¡ˆä¾‹blobç±»å‹è½¬æ¢æˆclobç±»å‹å­˜å‚¨å‡½æ•°1234567891011121314151617181920CREATE OR REPLACE FUNCTION blob_to_clob2 (blob_in IN BLOB)RETURN CLOBAS v_clob CLOB; v_varchar VARCHAR2(32767); v_start PLS_INTEGER := 1; v_buffer PLS_INTEGER := 32767;BEGIN DBMS_LOB.CREATETEMPORARY(v_clob, TRUE); if DBMS_LOB.GETLENGTH(blob_in) is null then return empty_clob(); end if; FOR i IN 1..CEIL(DBMS_LOB.GETLENGTH(blob_in) / v_buffer) LOOP v_varchar := UTL_RAW.CAST_TO_VARCHAR2(DBMS_LOB.SUBSTR(blob_in, v_buffer, v_start)); DBMS_LOB.WRITEAPPEND(v_clob, LENGTH(v_varchar), v_varchar); v_start := v_start + v_buffer; END LOOP; RETURN v_clob;END blob_to_clob2; å­˜å‚¨å‡½æ•°ä½¿ç”¨12# ä½¿ç”¨åœºæ™¯ä¸€ï¼šè¡¨ä¸­å­˜åœ¨ä¸¤ä¸ªå­—æ®µï¼Œä¸€ä¸ªå­—æ®µç±»å‹ä¸ºblobï¼Œä¸€ä¸ªå­—æ®µç±»å‹ä¸ºclobã€‚å°†blobç±»å‹çš„å­—æ®µè¿›è¡Œè½¬æ¢ï¼Œå¹¶å­˜å…¥clobå­—æ®µä¸­ã€‚UPDATE è¡¨å set clobå­—æ®µå = blob_to_clob2(blobå­—æ®µå) blobç±»å‹è½¬æ¢æˆvarcharç±»å‹å­˜å‚¨å‡½æ•°123456789101112131415161718192021222324create or replace FUNCTION blob_to_varchar (blob_in IN BLOB) RETURN VARCHAR2 IS v_varchar VARCHAR2(4000); v_start PLS_INTEGER := 1; v_buffer PLS_INTEGER := 4000; BEGIN --select userenv(&#x27;LANGUAGE&#x27;) into g_nls_db_char from dual; if DBMS_LOB.GETLENGTH(blob_in) is null then return empty_clob(); end if; DBMS_OUTPUT.put_line(&#x27;TEST:&#x27; || CEIL(DBMS_LOB.GETLENGTH(blob_in))); --DBMS_LOB.CREATETEMPORARY(v_clob, TRUE); FOR i IN 1..CEIL(DBMS_LOB.GETLENGTH(blob_in) / v_buffer) LOOP v_varchar := UTL_RAW.CAST_TO_VARCHAR2(utl_raw.convert(DBMS_LOB.SUBSTR(blob_in, v_buffer, v_start),&#x27;SIMPLIFIED CHINESE_CHINA.ZHS16GBK&#x27;, &#x27;AMERICAN_THE NETHERLANDS.UTF8&#x27;)); --DBMS_LOB.WRITEAPPEND(v_clob, LENGTH(v_varchar), v_varchar); v_start := v_start + v_buffer; END LOOP; --DBMS_OUTPUT.put_line(v_varchar); RETURN v_varchar; end blob_to_varchar; å­˜å‚¨å‡½æ•°ä½¿ç”¨12# ä½¿ç”¨åœºæ™¯ä¸€ï¼šè¡¨ä¸­å­˜åœ¨ä¸¤ä¸ªå­—æ®µï¼Œä¸€ä¸ªå­—æ®µç±»å‹ä¸ºblobï¼Œä¸€ä¸ªå­—æ®µç±»å‹ä¸ºvarcharã€‚å°†blobç±»å‹çš„å­—æ®µè¿›è¡Œè½¬æ¢ï¼Œå¹¶å­˜å…¥varcharå­—æ®µä¸­ã€‚UPDATE è¡¨å set varcharå­—æ®µå = blob_to_varchar(blobå­—æ®µå) blobç±»å‹é€šè¿‡base64åŠ å¯†å­˜å‚¨å‡½æ•°123456789101112CREATE OR REPLACE FUNCTION base64encode(p_blob IN BLOB) RETURN CLOBIS l_clob CLOB; l_step PLS_INTEGER := 12000;BEGIN FOR i IN 0 .. TRUNC((DBMS_LOB.getlength(p_blob) - 1 )/l_step) LOOP l_clob := l_clob || UTL_RAW.cast_to_varchar2(UTL_ENCODE.base64_encode(DBMS_LOB.substr(p_blob, l_step, i * l_step + 1))); END LOOP; RETURN l_clob;END ;/ å‚è€ƒæ–‡æ¡£ Oracleå­˜å‚¨è¿‡ç¨‹ä¸å­˜å‚¨å‡½æ•°-å…¥é—¨ blobè½¬clobå’Œvarchar2 Oracleçš„å­˜å‚¨è¿‡ç¨‹åŸºæœ¬å†™æ³•","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"å­˜å‚¨è¿‡ç¨‹","slug":"å­˜å‚¨è¿‡ç¨‹","permalink":"https://guoshunfa.com/tags/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/"},{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"å­˜å‚¨å‡½æ•°","slug":"å­˜å‚¨å‡½æ•°","permalink":"https://guoshunfa.com/tags/%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0/"}]},{"title":"Mysqlæ•°æ®åº“è„šæœ¬","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/Mysqlæ•°æ®åº“è„šæœ¬","date":"2022-07-01T02:59:54.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Mysqlæ•°æ®åº“è„šæœ¬/","link":"","permalink":"https://guoshunfa.com/2022/07/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%84%9A%E6%9C%AC/","excerpt":"","text":"å‡è®¾å†…å®¹å¦‚ä¸‹ï¼š 123create database pandacode;use pandacode;create table panda (name varchar(20)); ä¿å­˜è„šæœ¬æ–‡ä»¶ï¼Œ&#x2F;Users&#x2F;guoshunfa&#x2F;Downloads&#x2F;pandacode.sqlã€‚ æ‰§è¡Œsqlè„šæœ¬ç¬¬ä¸€ç§æ–¹æ³•åœ¨å‘½ä»¤è¡Œä¸‹(æœªè¿æ¥æ•°æ®åº“)ï¼Œè¾“å…¥ mysql -h localhost -u root -p123456 &lt; &#x2F;Users&#x2F;guoshunfa&#x2F;Downloads&#x2F;pandacode.sql (æ³¨æ„è·¯å¾„ä¸ç”¨åŠ å¼•å·çš„!!) å›è½¦å³å¯ã€‚ ç¬¬äºŒç§æ–¹æ³•åœ¨å‘½ä»¤è¡Œä¸‹(å·²è¿æ¥æ•°æ®åº“,æ­¤æ—¶çš„æç¤ºç¬¦ä¸º mysql&gt; )ï¼Œè¾“å…¥ source &#x2F;Users&#x2F;guoshunfa&#x2F;Downloads&#x2F;pandacode.sql (æ³¨æ„è·¯å¾„ä¸ç”¨åŠ å¼•å·çš„) æˆ–è€… . F:\\hello world\\niuzi.sql (æ³¨æ„è·¯å¾„ä¸ç”¨åŠ å¼•å·çš„) å›è½¦å³å¯ å‚è€ƒæ–‡æ¡£ mysqlä¸‹å¦‚ä½•æ‰§è¡Œsqlè„šæœ¬","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"è„šæœ¬","slug":"è„šæœ¬","permalink":"https://guoshunfa.com/tags/%E8%84%9A%E6%9C%AC/"},{"name":"Mysql","slug":"Mysql","permalink":"https://guoshunfa.com/tags/Mysql/"}]},{"title":"SQLå‘½ä»¤è®°å½•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æ•°æ®åº“/SQLå‘½ä»¤è®°å½•","date":"2022-07-01T02:59:08.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/SQLå‘½ä»¤è®°å½•/","link":"","permalink":"https://guoshunfa.com/2022/07/SQL%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/","excerpt":"","text":"å‰å¾€èœé¸Ÿæ•™ç¨‹ã€‚ å‘½ä»¤è¡Œè¿æ¥æ•°æ®åº“æ–¹å¼ï¼š â€‹ æ‰“å¼€ç»ˆç«¯è¾“å…¥mysql -uroot -pï¼Œéšåè¾“å…¥å¯†ç ã€‚ â€‹ rootå¯æ›¿æ¢æˆå…¶ä»–ç”¨æˆ·åã€‚ 1. sql ä¸»è¦å‘½ä»¤æè¿° æ‰€æœ‰ MySQL å‘½ä»¤çš„åˆ—è¡¨ï¼šæ³¨æ„ï¼Œæ‰€æœ‰æ–‡æœ¬å‘½ä»¤å¿…é¡»åœ¨ä¸€è¡Œçš„å¼€å¤´ï¼Œå¹¶ä¸”ä»¥åˆ†å·â€œ;â€ç»“æŸ å‘½ä»¤ ç¼©å†™ å‘½ä»¤è¯´æ˜ ç¤ºä¾‹ ? ? â€œhelpâ€çš„åŒä¹‰è¯ã€‚ mysql&gt; ? clear c æ¸…é™¤å½“å‰è¾“å…¥çš„è¯­å¥ã€‚ä¸€èˆ¬ç”¨äºå¤šè¡Œå‘½ä»¤ã€‚ mysql&gt; c connect r é‡æ–°è¿æ¥åˆ°æœåŠ¡å™¨ã€‚å¯é€‰å‚æ•°æ˜¯ db å’Œ hostã€‚è¿æ¥ ID å°†ä¼šæ”¹å˜ã€‚ mysql&gt; r mysql&gt; r [æ•°æ®åº“] [ä¸»æœº] delimiter d è®¾ç½®è¯­å¥å®šç•Œç¬¦ã€‚é»˜è®¤ä¸ºâ€œ;â€ã€‚ mysql&gt; d å®šç•Œç¬¦ ego G å‘é€å‘½ä»¤åˆ° MySQL æœåŠ¡å™¨ï¼Œå‚ç›´æ˜¾ç¤ºç»“æœã€‚ mysql&gt; SHOW DATABASESG exit q é€€å‡º MySQLã€‚ä¸ quit ç›¸åŒã€‚ mysql&gt; exit go g å‘é€å‘½ä»¤åˆ° MySQL æœåŠ¡å™¨ã€‚ mysql&gt; SELECT `id` FROM `table`g help h æ˜¾ç¤ºè¯¥å¸®åŠ©ä¿¡æ¯ã€‚ mysql&gt; h notee t ä¸è¦å†™åˆ° outfile ä¸­ã€‚ mysql&gt; notee print p æ‰“å°å½“å‰å‘½ä»¤ã€‚ mysql&gt; SHOW TABLESp; prompt R æ”¹å˜ä½ çš„ MySQL æç¤ºç¬¦ã€‚ mysql&gt; prompt â€“&gt; quit q é€€å‡º MySQLã€‚ mysql&gt; q rehash # é‡å»ºå®Œæ•´çš„ hashï¼ˆç”¨äºè‡ªåŠ¨å®Œæˆåç§°ï¼‰ã€‚ mysql&gt; # source . æ‰§è¡Œä¸€ä¸ª SQL è„šæœ¬æ–‡ä»¶ã€‚ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶åä½œä¸ºå‚æ•°ã€‚ mysql&gt; source D:my.sql status s ä»æœåŠ¡å™¨å–å¾—çŠ¶æ€ä¿¡æ¯ã€‚ mysql&gt; status tee T è®¾ç½® outfile ä¸º [to_outfile]ã€‚å‘å·²ç»™å‡ºçš„ outfile æ–‡ä»¶ä¸­è¿½åŠ æ‰€æœ‰ä¸œè¥¿ã€‚ mysql&gt; tee E:store.txt use u ä½¿ç”¨å¦ä¸€ä¸ªæ•°æ®åº“ã€‚ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“åä½œä¸ºå‚æ•°ã€‚ mysql&gt; use æ•°æ®åº“ charset C åˆ‡æ¢åˆ°å…¶å®ƒå­—ç¬¦é›†ã€‚å¯èƒ½éœ€è¦ä½¿ç”¨å¤šå­—èŠ‚å­—ç¬¦é›†æ¥å¤„ç†äºŒè¿›åˆ¶æ—¥å¿—ã€‚ mysql&gt; charset å­—ç¬¦é›† warnings W åœ¨æ¯ä¸€ä¸ªè¯­å¥åé¢æ˜¾ç¤ºè­¦å‘Šã€‚ mysql&gt; W nowarning w ä¸åœ¨æ¯ä¸€ä¸ªè¯­å¥åé¢æ˜¾ç¤ºè­¦å‘Šã€‚ mysql&gt; w è¦è·å¾—æœåŠ¡å™¨ç«¯çš„å¸®åŠ©ä¿¡æ¯ï¼Œé”®å…¥â€œhelp contentsâ€ 1.1. æ•°æ®åº“æ“ä½œåˆ›å»ºæ•°æ®åº“ï¼šCREATE DATABASE database_name; åˆ é™¤æ•°æ®åº“ï¼šDROP DATABASE database_name 1.2. æ•°æ®åº“è¡¨æ“ä½œ CREATE TABLE è¯­å¥ç”¨äºåˆ›å»ºæ•°æ®åº“ä¸­çš„è¡¨ã€‚ è¡¨ç”±è¡Œå’Œåˆ—ç»„æˆï¼Œæ¯ä¸ªè¡¨éƒ½å¿…é¡»æœ‰ä¸ªè¡¨åã€‚ 1234567CREATE TABLE table_name(column_name1 data_type(size),column_name2 data_type(size),column_name3 data_type(size),....); column_name å‚æ•°è§„å®šè¡¨ä¸­åˆ—çš„åç§°ã€‚ data_type å‚æ•°è§„å®šåˆ—çš„æ•°æ®ç±»å‹ï¼ˆä¾‹å¦‚ varcharã€integerã€decimalã€date ç­‰ç­‰ï¼‰ã€‚ size å‚æ•°è§„å®šè¡¨ä¸­åˆ—çš„æœ€å¤§é•¿åº¦ã€‚ æç¤ºï¼šå¦‚éœ€äº†è§£ MS Accessã€MySQL å’Œ SQL Server ä¸­å¯ç”¨çš„æ•°æ®ç±»å‹ï¼Œè¯·è®¿é—®æˆ‘ä»¬å®Œæ•´çš„ æ•°æ®ç±»å‹å‚è€ƒæ‰‹å†Œã€‚ 1.2.1. SQLçº¦æŸï¼ˆConstraintsï¼‰ ä¸åŒæ•°æ®åº“çš„çº¦æŸä¸åŒï¼Œè¯¦ç»†æŸ¥çœ‹èœé¸Ÿæ•™ç¨‹çš„APIæè¿°ã€‚ SQL çº¦æŸç”¨äºè§„å®šè¡¨ä¸­çš„æ•°æ®è§„åˆ™ã€‚ å¦‚æœå­˜åœ¨è¿åçº¦æŸçš„æ•°æ®è¡Œä¸ºï¼Œè¡Œä¸ºä¼šè¢«çº¦æŸç»ˆæ­¢ã€‚ çº¦æŸå¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶è§„å®šï¼ˆé€šè¿‡ CREATE TABLE è¯­å¥ï¼‰ï¼Œæˆ–è€…åœ¨è¡¨åˆ›å»ºä¹‹åè§„å®šï¼ˆé€šè¿‡ ALTER TABLE è¯­å¥ï¼‰ã€‚ 1234567CREATE TABLE table_name(column_name1 data_type(size) constraint_name,column_name2 data_type(size) constraint_name,column_name3 data_type(size) constraint_name,....); åœ¨ SQL ä¸­ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹çº¦æŸï¼š NOT NULL - æŒ‡ç¤ºæŸåˆ—ä¸èƒ½å­˜å‚¨ NULL å€¼ã€‚ UNIQUE - ä¿è¯æŸåˆ—çš„æ¯è¡Œå¿…é¡»æœ‰å”¯ä¸€çš„å€¼ã€‚ PRIMARY KEY - ä¸»é”®ï¼ŒNOT NULL å’Œ UNIQUE çš„ç»“åˆã€‚ç¡®ä¿æŸåˆ—ï¼ˆæˆ–ä¸¤ä¸ªåˆ—å¤šä¸ªåˆ—çš„ç»“åˆï¼‰æœ‰å”¯ä¸€æ ‡è¯†ï¼Œæœ‰åŠ©äºæ›´å®¹æ˜“æ›´å¿«é€Ÿåœ°æ‰¾åˆ°è¡¨ä¸­çš„ä¸€ä¸ªç‰¹å®šçš„è®°å½•ã€‚ FOREIGN KEY - å¤–é”®ï¼Œä¿è¯ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®åŒ¹é…å¦ä¸€ä¸ªè¡¨ä¸­çš„å€¼çš„å‚ç…§å®Œæ•´æ€§ã€‚ CHECK - ä¿è¯åˆ—ä¸­çš„å€¼ç¬¦åˆæŒ‡å®šçš„æ¡ä»¶ã€‚ DEFAULT - è§„å®šæ²¡æœ‰ç»™åˆ—èµ‹å€¼æ—¶çš„é»˜è®¤å€¼ã€‚ 1.2.2. ç´¢å¼•æ‚¨å¯ä»¥åœ¨è¡¨ä¸­åˆ›å»ºç´¢å¼•ï¼Œä»¥ä¾¿æ›´åŠ å¿«é€Ÿé«˜æ•ˆåœ°æŸ¥è¯¢æ•°æ®ã€‚ ç”¨æˆ·æ— æ³•çœ‹åˆ°ç´¢å¼•ï¼Œå®ƒä»¬åªèƒ½è¢«ç”¨æ¥åŠ é€Ÿæœç´¢&#x2F;æŸ¥è¯¢ã€‚ æ³¨é‡Šï¼šæ›´æ–°ä¸€ä¸ªåŒ…å«ç´¢å¼•çš„è¡¨éœ€è¦æ¯”æ›´æ–°ä¸€ä¸ªæ²¡æœ‰ç´¢å¼•çš„è¡¨èŠ±è´¹æ›´å¤šçš„æ—¶é—´ï¼Œè¿™æ˜¯ç”±äºç´¢å¼•æœ¬èº«ä¹Ÿéœ€è¦æ›´æ–°ã€‚å› æ­¤ï¼Œç†æƒ³çš„åšæ³•æ˜¯ä»…ä»…åœ¨å¸¸å¸¸è¢«æœç´¢çš„åˆ—ï¼ˆä»¥åŠè¡¨ï¼‰ä¸Šé¢åˆ›å»ºç´¢å¼•ã€‚ SQL CREATE INDEX è¯­æ³• åœ¨è¡¨ä¸Šåˆ›å»ºä¸€ä¸ªç®€å•çš„ç´¢å¼•ã€‚å…è®¸ä½¿ç”¨é‡å¤çš„å€¼ï¼š CREATE INDEX index_nameON table_name (column_name) SQL CREATE UNIQUE INDEX è¯­æ³• åœ¨è¡¨ä¸Šåˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ç´¢å¼•ã€‚ä¸å…è®¸ä½¿ç”¨é‡å¤çš„å€¼ï¼šå”¯ä¸€çš„ç´¢å¼•æ„å‘³ç€ä¸¤ä¸ªè¡Œä¸èƒ½æ‹¥æœ‰ç›¸åŒçš„ç´¢å¼•å€¼ã€‚Creates a unique index on a table. Duplicate values are not allowed: CREATE UNIQUE INDEX index_nameON table_name (column_name) æ³¨é‡Šï¼šç”¨äºåˆ›å»ºç´¢å¼•çš„è¯­æ³•åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­ä¸ä¸€æ ·ã€‚å› æ­¤ï¼Œæ£€æŸ¥æ‚¨çš„æ•°æ®åº“ä¸­åˆ›å»ºç´¢å¼•çš„è¯­æ³•ã€‚ 2. crud2.1. æŸ¥è¯¢ å‘½ä»¤ å‘½ä»¤è¯´æ˜ å‘½ä»¤ç¤ºä¾‹ SELECT æŸ¥è¯¢è¯­å¥å¤´ã€‚ SELECT column_name FROM table_name; SELECT DISTINCT æŸ¥è¯¢DISTINCT å…³é”®è¯ç”¨äºè¿”å›å”¯ä¸€ä¸åŒçš„å€¼ã€‚ SELECT DISTINCT column_name,column_name FROM table_name; WHERE æ¡ä»¶æŸ¥è¯¢ã€‚ä¸‹é¢ä¼šæ¢³ç†å‡ºå’ŒWHEREæ­é…ä½¿ç”¨çš„è¯­æ³•ã€‚ SELECT column_name,column_name FROM table_name WHERE column_name operator value; ORDER BY æ’åºã€‚æŒ‡å®šåˆ—è¿›è¡Œæ’åº(ASC)ï¼Œé»˜è®¤ä¸ºå‡åºã€‚æ·»åŠ DESCå¯è°ƒæ•´æˆå€’åºã€‚ SELECT column_name,column_name FROM table_name ORDER BY column_name,column_name ASC|DESC; LIMIT è¿”å›æŒ‡å®šæ•°ç›®çš„æ•°æ®ã€‚å¸¸ç”¨äºåˆ†é¡µæŸ¥è¯¢ã€‚ SELECT column_nameFROM table_nameLIMIT number; [**JOIN**](#_2-1-4- SQL-JOIN) å¤šè¡¨è¿æŸ¥ï¼ŒSQL join ç”¨äºæŠŠæ¥è‡ªä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨çš„è¡Œç»“åˆèµ·æ¥ã€‚ SELECT Websites.id, Websites.name, access_log.count, access_log.dateFROM WebsitesINNER JOIN access_logON Websites.id&#x3D;access_log.site_id; UNION | UNION ALL SQL UNION æ“ä½œç¬¦åˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª SELECT è¯­å¥çš„ç»“æœã€‚UNION æ“ä½œç¬¦é€‰å–ä¸åŒçš„å€¼ã€‚å¦‚æœå…è®¸é‡å¤çš„å€¼ï¼Œè¯·ä½¿ç”¨ UNION ALLã€‚æ”¯æŒä½¿ç”¨WHEREã€JOINç­‰æ“ä½œç¬¦ã€‚ SELECT column_name(s) FROM table1UNIONSELECT column_name(s) FROM table2; SELECT INTO é€šè¿‡ SQLï¼Œæ‚¨å¯ä»¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶ä¿¡æ¯åˆ°å¦ä¸€ä¸ªè¡¨ã€‚SELECT INTO è¯­å¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶æ•°æ®ï¼Œç„¶åæŠŠæ•°æ®æ’å…¥åˆ°å¦ä¸€ä¸ªæ–°è¡¨ä¸­ã€‚æ”¯æŒä½¿ç”¨WHEREã€JOINç­‰æ“ä½œç¬¦ã€‚MYSQLä¸æ”¯æŒï¼Œä½†æ”¯æŒINSERT INTOâ€¦. SELECTã€‚ SELECT column_name(s)INTO newtable [IN externaldb]FROM table1; INSERT INTO SELECT é€šè¿‡ SQLï¼Œæ‚¨å¯ä»¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶ä¿¡æ¯åˆ°å¦ä¸€ä¸ªè¡¨ã€‚INSERT INTO SELECT è¯­å¥ä»ä¸€ä¸ªè¡¨å¤åˆ¶æ•°æ®ï¼Œç„¶åæŠŠæ•°æ®æ’å…¥åˆ°ä¸€ä¸ªå·²å­˜åœ¨çš„è¡¨ä¸­ã€‚ç›®æ ‡è¡¨ä¸­ä»»ä½•å·²å­˜åœ¨çš„è¡Œéƒ½ä¸ä¼šå—å½±å“ã€‚ INSERT INTO table2(column_name(s))SELECT column_name(s)FROM table1; 2.1.1. SELECT DISTINCTè¯­æ³•ä¸‹é¢æ˜¯é€‰è‡ª â€œWebsitesâ€ è¡¨çš„æ•°æ®ï¼š 123456789+----+--------------+---------------------------+-------+---------+| id | name | url | alexa | country |+----+--------------+---------------------------+-------+---------+| 1 | Google | https://www.google.cm/ | 1 | USA || 2 | æ·˜å® | https://www.taobao.com/ | 13 | CN || 3 | èœé¸Ÿæ•™ç¨‹ | http://www.runoob.com/ | 4689 | CN || 4 | å¾®åš | http://weibo.com/ | 20 | CN || 5 | Facebook | https://www.facebook.com/ | 3 | USA |+----+--------------+---------------------------+-------+---------+ è¾“å…¥ï¼š 1SELECT DISTINCT country FROM Websites; è¾“å‡ºï¼š 123456+---------+| country |+---------+| USA || CN |+---------+ 2.1.2. WHERE æ¡ä»¶æŸ¥è¯¢ç›¸å…³è¯­æ³• æ“ä½œç¬¦ æ“ä½œç¬¦æè¿° ç¤ºä¾‹ AND æŸ¥è¯¢å‡ºä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³çš„è®°å½•ã€‚ SELECT column_name,column_name FROM table_name WHERE column_name operator value and column_name operator value; OR æŸ¥è¯¢å‡ºä¸¤ä¸ªæ¡ä»¶æœ‰ä¸€ä¸ªæ»¡è¶³å°±å¯ä»¥çš„è®°å½• SELECT column_name,column_name FROM table_name WHERE column_name operator value or column_name operator value; LIKE | NOT LIKE æ¨¡ç³ŠæŸ¥è¯¢ã€‚LIKE:å–åŒ¹é…çš„æ•°æ®;NOT LIKE:å–ä¸åŒ¹é…çš„æ•°æ®;é€šè¿‡é€šé…ç¬¦-ã€%æ“æ§æ¨¡ç³ŠæŸ¥è¯¢éƒ¨åˆ†ã€‚ SELECT column_name(s)FROM table_nameWHERE column_name LIKE | NOT LIKE pattern; REGEXP | NOT REGEXP æ­£åˆ™æŸ¥è¯¢ã€‚REGEXP:å–åŒ¹é…çš„æ•°æ®;NOT REGEXP:å–ä¸åŒ¹é…çš„æ•°æ®;é€šè¿‡é€šé…ç¬¦[charlist]æ“æ§æ¨¡ç³ŠæŸ¥è¯¢éƒ¨åˆ†ã€‚ SELECT column_name(s)FROM table_nameWHERE column_name REGEXP | NOT REGEXP pattern; IN IN æ“ä½œç¬¦å…è®¸æ‚¨åœ¨ WHERE å­å¥ä¸­è§„å®šå¤šä¸ªå€¼ã€‚ SELECT column_name(s)FROM table_nameWHERE column_name IN (value1,value2,â€¦); BETWEEN BETWEEN æ“ä½œç¬¦ç”¨äºé€‰å–ä»‹äºä¸¤ä¸ªå€¼ä¹‹é—´çš„æ•°æ®èŒƒå›´å†…çš„å€¼ã€‚è¿™äº›å€¼å¯ä»¥æ˜¯æ•°å€¼ã€æ–‡æœ¬æˆ–è€…æ—¥æœŸã€‚ SELECT column_name(s)FROM table_nameWHERE column_name BETWEEN value1 AND value2; 2.1.3. é€šé…ç¬¦ é€šé…ç¬¦ æè¿° % æ›¿ä»£ 0 ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ _ æ›¿ä»£ä¸€ä¸ªå­—ç¬¦ [charlist] å­—ç¬¦åˆ—ä¸­çš„ä»»ä½•å•ä¸€å­—ç¬¦ [^charlist] æˆ– [!charlist] ä¸åœ¨å­—ç¬¦åˆ—ä¸­çš„ä»»ä½•å•ä¸€å­—ç¬¦ æ¡ˆä¾‹ä¸€ï¼š 123# æŸ¥è¯¢urlå¼€å¤´ä¸ºhttpsçš„æ•°æ®ã€‚SELECT * FROM WebsitesWHERE url LIKE &#x27;https%&#x27;; æ¡ˆä¾‹äºŒï¼š 123# æŸ¥è¯¢urlä¸­åŒ…å«ooçš„æ•°æ®ã€‚SELECT * FROM WebsitesWHERE url LIKE &#x27;%oo%&#x27;; æ¡ˆä¾‹ä¸‰ï¼š 123# é€‰å– name ä»¥ä¸€ä¸ªä»»æ„å­—ç¬¦å¼€å§‹ï¼Œç„¶åæ˜¯ &quot;oogle&quot; çš„æ‰€æœ‰å®¢æˆ·SELECT * FROM WebsitesWHERE name LIKE &#x27;_oogle&#x27;; 2.1.4. SQL JOIN INNER JOINï¼šå¦‚æœè¡¨ä¸­æœ‰è‡³å°‘ä¸€ä¸ªåŒ¹é…ï¼Œåˆ™è¿”å›è¡Œ LEFT JOINï¼šå³ä½¿å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å·¦è¡¨è¿”å›æ‰€æœ‰çš„è¡Œ RIGHT JOINï¼šå³ä½¿å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å³è¡¨è¿”å›æ‰€æœ‰çš„è¡Œ FULL JOINï¼šåªè¦å…¶ä¸­ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨åŒ¹é…ï¼Œåˆ™è¿”å›è¡Œ 2.2. æ–°å¢ å‘½ä»¤ å‘½ä»¤æè¿° ç¤ºä¾‹ INSERT INTO æ–°å¢æ•°æ® INSERT INTO table_name (column1,column2,column3,â€¦)VALUES (value1,value2,value3,â€¦); 2.3. ä¿®æ”¹ è¯·æ³¨æ„ SQL UPDATE è¯­å¥ä¸­çš„ WHERE å­å¥ï¼WHERE å­å¥è§„å®šå“ªæ¡è®°å½•æˆ–è€…å“ªäº›è®°å½•éœ€è¦æ›´æ–°ã€‚å¦‚æœæ‚¨çœç•¥äº† WHERE å­å¥ï¼Œæ‰€æœ‰çš„è®°å½•éƒ½å°†è¢«æ›´æ–°ï¼ å‘½ä»¤ å‘½ä»¤æè¿° ç¤ºä¾‹ UPDATE ä¿®æ”¹æ•°æ® UPDATE table_nameSET column1&#x3D;value1,column2&#x3D;value2,â€¦WHERE some_column&#x3D;some_value; 2.4. åˆ é™¤ è¯·æ³¨æ„ SQL DELETE è¯­å¥ä¸­çš„ WHERE å­å¥ï¼WHERE å­å¥è§„å®šå“ªæ¡è®°å½•æˆ–è€…å“ªäº›è®°å½•éœ€è¦åˆ é™¤ã€‚å¦‚æœæ‚¨çœç•¥äº† WHERE å­å¥ï¼Œæ‰€æœ‰çš„è®°å½•éƒ½å°†è¢«åˆ é™¤ï¼ å‘½ä»¤ å‘½ä»¤æè¿° ç¤ºä¾‹ DELETE åˆ é™¤æ•°æ® DELETE FROM table_nameWHERE some_column&#x3D;some_value; 2.5. é€šç”¨æ“ä½œç¬¦ æ“ä½œç¬¦ æ“ä½œç¬¦æè¿° ç¤ºä¾‹ AS SQL åˆ«åã€‚ SELECT t.column_name AS alias_name FROM table_name AS t; å‚è€ƒæ–‡ç«  èœé¸Ÿæ•™ç¨‹","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Mysql","slug":"Mysql","permalink":"https://guoshunfa.com/tags/Mysql/"},{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"SQL","slug":"SQL","permalink":"https://guoshunfa.com/tags/SQL/"}]},{"title":"Jmeterä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/æœåŠ¡&ç»„ä»¶/jmeter/Jmeterä»‹ç»","date":"2022-07-01T02:56:54.000Z","updated":"2024-01-28T11:41:39.260Z","comments":true,"path":"2022/07/Jmeterä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2022/07/Jmeter%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"ç¿»è¯‘è‡ªApache JmeterTMå®˜ç½‘https://jmeter.apache.org/index.html æ¨ç‰¹ GitHub ä¼˜è´¨æ–‡ç« ï¼šhttps://www.cnblogs.com/daydayup-lin/p/16000045.html Apache JMeterTMåº”ç”¨ç¨‹åºæ˜¯å¼€æºè½¯ä»¶ï¼Œæ˜¯ä¸€ä¸ª100%çº¯Javaåº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨åŠ è½½æµ‹è¯•åŠŸèƒ½è¡Œä¸ºå¹¶è¡¡é‡æ€§èƒ½ã€‚å®ƒæœ€åˆæ˜¯ä¸ºæµ‹è¯•Webåº”ç”¨ç¨‹åºè€Œè®¾è®¡çš„ï¼Œä½†åæ¥æ‰©å±•åˆ°å…¶ä»–æµ‹è¯•åŠŸèƒ½ã€‚ æˆ‘èƒ½ç”¨å®ƒåšä»€ä¹ˆï¼ŸApache JMeterå¯ç”¨äºæµ‹è¯•é™æ€å’ŒåŠ¨æ€èµ„æºWebåŠ¨æ€åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚å®ƒå¯ç”¨äºæ¨¡æ‹ŸæœåŠ¡å™¨ã€æœåŠ¡å™¨ç»„ã€ç½‘ç»œæˆ–å¯¹è±¡ä¸Šçš„é‡è´Ÿè½½ï¼Œä»¥æµ‹è¯•å…¶å¼ºåº¦æˆ–åˆ†æä¸åŒè´Ÿè½½ç±»å‹ä¸‹çš„æ•´ä½“æ€§èƒ½ã€‚ Apache JMeterçš„åŠŸèƒ½åŒ…æ‹¬ï¼š èƒ½å¤ŸåŠ è½½å’Œæ€§èƒ½æµ‹è¯•è®¸å¤šä¸åŒçš„åº”ç”¨ç¨‹åº&#x2F;æœåŠ¡å™¨&#x2F;åè®®ç±»å‹ï¼š Web - HTTPï¼ŒHTTPSï¼ˆJavaï¼ŒNodeJSï¼ŒPHPï¼ŒASP.NETï¼Œâ€¦ï¼‰ SOAP &#x2F; REST Webservices FTP é€šè¿‡JDBCæ•°æ®åº“ LDAP é€šè¿‡JMSé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶ï¼ˆMOMï¼‰ é‚®ä»¶ - SMTP(S)ã€POP3(S) å’Œ IMAP(S) åŸç”Ÿå‘½ä»¤æˆ–shellè„šæœ¬ TCP Javaå¯¹è±¡ åŠŸèƒ½é½å…¨çš„æµ‹è¯•IDEï¼Œå…è®¸å¿«é€Ÿè®°å½•æµ‹è¯•è®¡åˆ’ï¼ˆæ¥è‡ªæµè§ˆå™¨æˆ–æœ¬æœºåº”ç”¨ç¨‹åºï¼‰ã€æ„å»ºå’Œè°ƒè¯•ã€‚ **CLIæ¨¡å¼ï¼ˆå‘½ä»¤è¡Œæ¨¡å¼ï¼ˆä»¥å‰ç§°ä¸ºéGUIï¼‰&#x2F;æ— å¤´æ¨¡å¼ï¼‰ï¼Œ**ç”¨äºä»ä»»ä½•Javaå…¼å®¹æ“ä½œç³»ç»Ÿï¼ˆLinuxã€Windowsã€Mac OSXâ€¦ï¼‰åŠ è½½æµ‹è¯• ä¸€ä¸ªå®Œæ•´ä¸”**å‡†å¤‡å‘ˆç°åŠ¨æ€HTMLæŠ¥å‘Š** é€šè¿‡èƒ½å¤Ÿä»æœ€æµè¡Œçš„å“åº”æ ¼å¼ã€**HTMLã€JSONã€XMLæˆ–ä»»ä½•æ–‡æœ¬æ ¼å¼ä¸­æå–æ•°æ®ï¼Œ**è½»æ¾å…³è” å®Œå…¨å¯ç§»æ¤æ€§å’Œ100%çš„Javaçº¯åº¦ã€‚ å®Œæ•´çš„å¤šçº¿ç¨‹æ¡†æ¶å…è®¸è®¸å¤šçº¿ç¨‹å¹¶å‘é‡‡æ ·ï¼Œå¹¶é€šè¿‡å•ç‹¬çš„çº¿ç¨‹ç»„åŒæ—¶å¯¹ä¸åŒå‡½æ•°è¿›è¡Œé‡‡æ ·ã€‚ ç¼“å­˜å’Œç¦»çº¿åˆ†æ&#x2F;é‡æ’­æµ‹è¯•ç»“æœã€‚ é«˜åº¦å¯æ‰©å±•çš„æ ¸å¿ƒï¼š å¯æ’æ‹”é‡‡æ ·å™¨å…è®¸æ— é™çš„æµ‹è¯•åŠŸèƒ½ã€‚ å¯è„šæœ¬é‡‡æ ·å™¨ï¼ˆä¸JSR223å…¼å®¹çš„è¯­è¨€ï¼Œå¦‚Groovyå’ŒBeanShellï¼‰ å¯ä»¥ä½¿ç”¨å¯æ’æ‹”è®¡æ—¶å™¨é€‰æ‹©å‡ ä¸ªè´Ÿè½½ç»Ÿè®¡ä¿¡æ¯ã€‚ æ•°æ®åˆ†æå’Œå¯è§†åŒ–æ’ä»¶å…è®¸æå¤§çš„å¯æ‰©å±•æ€§å’Œä¸ªæ€§åŒ–æ€§ã€‚ å‡½æ•°å¯ç”¨äºä¸ºæµ‹è¯•æä¾›åŠ¨æ€è¾“å…¥æˆ–æä¾›æ•°æ®æ“ä½œã€‚ é€šè¿‡Mavenã€Gradleå’ŒJenkinsçš„ç¬¬ä¸‰æ–¹å¼€æºåº“è½»æ¾è¿ç»­é›†æˆã€‚ æˆ‘è¯¥æ€ä¹ˆåšï¼Ÿ ä½¿ç”¨JMeteräº†è§£å¦‚ä½•ä½¿ç”¨å®ƒ ç»„ä»¶å‚è€ƒï¼Œä¸ºæ¯ä¸ªæµ‹è¯•å…ƒç´ æä¾›è¯¦ç»†ä¿¡æ¯ å‡½æ•°å¼•ç”¨ä¸ºæ¯ä¸ªå‡½æ•°æä¾›è¯¦ç»†ä¿¡æ¯å’Œç¤ºä¾‹ å…è®¸æ‚¨è‡ªå®šä¹‰JMeterçš„æ‰€æœ‰å±æ€§çš„å±æ€§å¼•ç”¨ Javadoc APIæ–‡æ¡£ JMeterå¸¸è§é—®é¢˜è§£ç­”ï¼ˆç»´åŸºï¼‰ JMeter Wiki æ„å»ºJMeterå’Œé™„åŠ ç»„ä»¶ä»¥ä¾›é«˜çº§ä½¿ç”¨ JMeterä¸æ˜¯æµè§ˆå™¨JMeterä¸æ˜¯æµè§ˆå™¨ï¼Œå®ƒåœ¨åè®®çº§åˆ«å·¥ä½œã€‚å°±ç½‘ç»œæœåŠ¡å’Œè¿œç¨‹æœåŠ¡è€Œè¨€ï¼ŒJMeterçœ‹èµ·æ¥åƒä¸€ä¸ªæµè§ˆå™¨ï¼ˆæˆ–è€…æ›´ç¡®åˆ‡åœ°è¯´ï¼Œå¤šä¸ªæµè§ˆå™¨ï¼‰ï¼›ç„¶è€Œï¼ŒJMeterä¸æ‰§è¡Œæµè§ˆå™¨æ”¯æŒçš„æ‰€æœ‰æ“ä½œã€‚ç‰¹åˆ«æ˜¯ï¼ŒJMeterä¸æ‰§è¡ŒHTMLé¡µé¢ä¸­çš„Javascriptã€‚å®ƒä¹Ÿä¸ä¼šåƒæµè§ˆå™¨é‚£æ ·æ¸²æŸ“HTMLé¡µé¢ï¼ˆå¯ä»¥å°†å“åº”è§†ä¸ºHTMLç­‰ï¼Œä½†æ—¶é—´ä¸åŒ…å«åœ¨ä»»ä½•ç¤ºä¾‹ä¸­ï¼Œä¸€æ¬¡åªæ˜¾ç¤ºä¸€ä¸ªçº¿ç¨‹ä¸­çš„ä¸€ä¸ªç¤ºä¾‹ï¼‰ã€‚ æ•™ç¨‹ åˆ†å¸ƒå¼æµ‹è¯• è®°å½•æµ‹è¯• JUnité‡‡æ ·å™¨ è®¿é—®æ—¥å¿—é‡‡æ ·å™¨ æ‰©å±•JMeter å…³äºJMeterçš„æ›´å¤šä¿¡æ¯ æ›´æ”¹åˆ—è¡¨ é˜…è¯»ç°æœ‰é—®é¢˜ï¼ˆé—®é¢˜æˆ–å¢å¼ºåŠŸèƒ½ï¼‰æˆ–æŠ¥å‘Šæ–°é—®é¢˜ï¼ˆè¯·è¿™æ ·åšï¼ï¼‰ è®¸å¯è¯ é‚®ä»¶åˆ—è¡¨ æºå­˜å‚¨åº“ è´¡çŒ®è€… å®‰è£… é¦–å…ˆå¾—æœ‰JDK8+çš„ç¯å¢ƒã€‚ è½¬è½½è‡ªï¼šhttps://blog.csdn.net/fish_study_csdn/article/details/124488572 ä¸‹è½½ï¼šå‰å¾€Jmeterå®˜ç½‘ä¸‹è½½https://jmeter.apache.org/download_jmeter.cgi å¯åŠ¨ï¼šbinæ–‡ä»¶å¤¹-&gt;sh jmeter(å¯åŠ¨jmeter) æ±‰åŒ–ï¼šæ‰¾åˆ°bin&#x2F;jmeter.propertiesï¼Œ#language&#x3D;enæ›´æ”¹ä¸ºlanguage &#x3D; zh_CNã€‚","categories":[{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"https://guoshunfa.com/tags/%E6%B5%8B%E8%AF%95/"},{"name":"Jmeter","slug":"Jmeter","permalink":"https://guoshunfa.com/tags/Jmeter/"}]},{"title":"é»‘ç›’æµ‹è¯•ä¸ç™½ç›’æµ‹è¯•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç†è®º/æµ‹è¯•/é»‘ç›’æµ‹è¯•ä¸ç™½ç›’æµ‹è¯•","date":"2022-06-28T02:55:16.000Z","updated":"2024-01-28T11:41:39.277Z","comments":true,"path":"2022/06/é»‘ç›’æµ‹è¯•ä¸ç™½ç›’æµ‹è¯•/","link":"","permalink":"https://guoshunfa.com/2022/06/%E9%BB%91%E7%9B%92%E6%B5%8B%E8%AF%95%E4%B8%8E%E7%99%BD%E7%9B%92%E6%B5%8B%E8%AF%95/","excerpt":"","text":"é»‘ç›’æµ‹è¯•ï¼šå·²çŸ¥äº§å“çš„åŠŸèƒ½è®¾è®¡è§„æ ¼ï¼Œå¯ä»¥è¿›è¡Œæµ‹è¯•è¯æ˜æ¯ä¸ªå®ç°äº†çš„åŠŸèƒ½æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚ ç™½ç›’æµ‹è¯•ï¼šå·²çŸ¥äº§å“çš„å†…éƒ¨å·¥ä½œè¿‡ç¨‹ï¼Œå¯ä»¥è¿›è¡Œæµ‹è¯•è¯æ˜æ¯ç§å†…éƒ¨æ“ä½œæ˜¯å¦ç¬¦åˆè®¾è®¡è§„æ ¼è¦æ±‚ï¼Œæ‰€æœ‰å†…éƒ¨æˆåˆ†æ˜¯å¦ç»è¿‡æ£€æŸ¥ã€‚ 1. ç¬¬ä¸€è®¤è¯†1.1. é»‘ç›’æµ‹è¯• æµ‹è¯•ç‰¹ç‚¹ï¼šæµ‹è¯•åŠŸèƒ½ï¼› æµ‹è¯•ä¾æ®ï¼šéœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦ æ–¹æ³•ä¸¾ä¾‹ï¼šç­‰ä»·ç±»åˆ’åˆ†ã€è¾¹ç•Œå€¼æµ‹è¯• ä¼˜ç‚¹ï¼šèƒ½ç«™åœ¨ç”¨æˆ·çš„ç«‹åœºä¸Šè¿›è¡Œæµ‹è¯• ç¼ºç‚¹ï¼šä¸èƒ½æµ‹è¯•ç¨‹åºå†…éƒ¨ç‰¹å®šéƒ¨ä½ï¼Œå¦‚ç¨‹åºæœ‰è¯¯ï¼Œåˆ™æ— æ³•å‘ç°ã€‚ 1.2. ç™½ç›’æµ‹è¯• æµ‹è¯•ç‰¹ç‚¹ï¼šæµ‹è¯•ç¨‹åºæ¥å£ä¸ç»“æ„ æµ‹è¯•ä¾æ®ï¼šè½¯ä»¶ç¨‹åº æ–¹æ³•ä¸¾ä¾‹ï¼šé€»è¾‘è¦†ç›– ä¼˜ç‚¹ï¼šå¯¹ç¨‹åºå†…éƒ¨ç‰¹å®šéƒ¨ä½è¿›è¡Œè¦†ç›–æµ‹è¯•ã€‚ ç¼ºç‚¹ï¼šæ— æ³•æ£€éªŒç¨‹åºå¤–éƒ¨ç‰¹æ€§ã€‚ 2. ç¬¬äºŒè®¤è¯†2.1. é»‘ç›’æµ‹è¯•â€‹ é»‘ç›’æµ‹è¯•æŠŠç¨‹åºçœ‹ä½œä¸€ä¸ªä¸èƒ½æ‰“å¼€çš„é»‘ç›’å­ï¼Œåœ¨å®Œå…¨ä¸è€ƒè™‘ç¨‹åºå†…éƒ¨ç»“æ„å’Œå†…éƒ¨ç‰¹æ€§çš„æƒ…å†µä¸‹ï¼Œé’ˆå¯¹â€œè½¯ä»¶ç•Œé¢â€å’Œâ€è½¯ä»¶åŠŸèƒ½â€œè¿›è¡Œæµ‹è¯•ï¼Œåªæ£€æŸ¥åŠŸèƒ½æ˜¯å¦ç¬¦åˆéœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦èƒ½æ­£å¸¸ä½¿ç”¨ã€‚å› æ­¤é»‘ç›’æµ‹è¯•åˆå«åŠŸèƒ½æµ‹è¯•æˆ–æ•°æ®é©±åŠ¨æµ‹è¯•ã€‚ 2.2. ç™½ç›’æµ‹è¯•â€‹ ç™½ç›’æµ‹è¯•æ˜¯å¯¹è½¯ä»¶çš„è¿‡ç¨‹æ€§ç»†èŠ‚åšç»†è‡´çš„æ£€æŸ¥ã€‚è¿™ç§æ–¹æ³•æ˜¯æŠŠæµ‹è¯•å¯¹è±¡çœ‹ä½œä¸€ä¸ªæ‰“å¼€çš„ç›’å­ï¼Œä»–å…è®¸æµ‹è¯•äººå‘˜åˆ©ç”¨ç¨‹åºå†…éƒ¨çš„é€»è¾‘ç»“æ„åŠæœ‰å…³ä¿¡æ¯ï¼Œè®¾è®¡æˆ–é€‰æ‹©æµ‹è¯•ç”¨ä¾‹ï¼Œå¯¹ç¨‹åºæ‰€æœ‰é€»è¾‘è·¯å¾„è¿›è¡Œæµ‹è¯•ã€‚é€šè¿‡åœ¨ä¸åŒç‚¹æ£€æŸ¥ç¨‹åºçŠ¶æ€ï¼Œç¡®å®šå®é™…çŠ¶æ€æ˜¯å¦ä¸é¢„æœŸçš„çŠ¶æ€ä¸€è‡´ã€‚å› æ­¤ç™½ç›’æµ‹è¯•åˆç§°ä¸ºâ€ç»“æ„æµ‹è¯•â€œæˆ–â€é€»è¾‘é©±åŠ¨æµ‹è¯•â€œã€‚ç™½ç›’æµ‹è¯•æ˜¯æŒ‰ç…§ç¨‹åºå†…éƒ¨çš„ç»“æ„æ¥æµ‹è¯•ç¨‹åºï¼Œé€šè¿‡æµ‹è¯•æ£€éªŒäº§å“å†…éƒ¨åŠ¨ä½œæ˜¯å¦æŒ‰ç…§è®¾è®¡è§„æ ¼è¯´æ˜ä¹¦çš„è¦æ±‚æ­£å¸¸è¿›è¡Œï¼Œæ£€éªŒç¨‹åºä¸­çš„æ¯æ¡é€šé“æ˜¯å¦éƒ½æŒ‰ç…§è§„å®šæ­£å¸¸å·¥ä½œã€‚ 3. ç¬¬ä¸‰è®¤è¯†3.1. é»‘ç›’æµ‹è¯•é»‘ç›’æµ‹è¯•ä¸»è¦æ˜¯ä¸ºäº†å‘ç°ä»¥ä¸‹é”™è¯¯ï¼š æ˜¯å¦æœ‰ä¸æ­£ç¡®æˆ–è€…é—æ¼äº†çš„åŠŸèƒ½ï¼› åœ¨æ¥å£ä¸Šï¼Œè¾“å…¥èƒ½å¦æ­£ç¡®çš„æ¥å—ï¼Ÿèƒ½å¦è¾“å‡ºæ­£ç¡®çš„ç»“æœï¼Ÿ æ˜¯å¦æœ‰æ•°æ®ç»“æ„é”™è¯¯æˆ–å¤–éƒ¨ä¿¡æ¯ï¼ˆä¾‹å¦‚æ•°æ®åº“æ–‡ä»¶ï¼‰è®¿é—®é”™è¯¯ï¼Ÿ æ€§èƒ½ä¸Šæ˜¯å¦èƒ½å¤Ÿæ»¡è¶³è¦æ±‚ï¼Ÿ æ˜¯å¦æœ‰åˆå§‹åŒ–æˆ–ç»ˆæ­¢æ€§é”™è¯¯ï¼Ÿ é»‘ç›’çš„æµ‹è¯•ç”¨ä¾‹æŠ€æœ¯è®¾è®¡æœ‰ä¸‰ç§ï¼š è¾¹ç•Œå€¼åˆ†æã€ç­‰ä»·ç±»åˆ’åˆ†ã€é”™è¯¯æ¨æµ‹æ³•ã€‚ 3.2. ç™½ç›’æµ‹è¯•ç™½ç›’æµ‹è¯•ä¸»è¦æ˜¯æƒ³å¯¹ç¨‹åºæ¨¡å—è¿›è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š å¯¹ç¨‹åºæ¨¡å—çš„æ‰€æœ‰ç‹¬ç«‹çš„æ‰§è¡Œè·¯å¾„è‡³å°‘æµ‹è¯•ä¸€éï¼› å¯¹æ‰€æœ‰çš„é€»è¾‘åˆ¤å®šï¼Œå–â€çœŸâ€œä¸â€å‡â€œçš„ä¸¤ç§æƒ…å†µéƒ½èƒ½è‡³å°‘æµ‹ä¸€éï¼› åœ¨å¾ªç¯çš„è¾¹ç•Œå’Œè¿è¡Œçš„ç•Œé™å†…æ‰§è¡Œå¾ªç¯ä½“ï¼› æµ‹è¯•å†…éƒ¨æ•°æ®ç»“æ„çš„æœ‰æ•ˆæ€§ï¼Œç­‰ç­‰ï¼› é™æ€ç™½ç›’æµ‹è¯• ï¼šå³ä»£ç å®¡æŸ¥ï¼Œæ­£å¼å®¡æŸ¥å’Œæ£€éªŒè®¾è®¡å’Œç¨‹åºä»£ç ï¼› åŠ¨æ€ç™½ç›’æµ‹è¯• åˆ©ç”¨æŸ¥çœ‹ä»£ç åŠŸèƒ½å’Œå®ç°æ–¹å¼å¾—åˆ°çš„ä¿¡æ¯æ¥è®¾è®¡å’Œæ‰§è¡Œæµ‹è¯•ï¼Œä¹Ÿå«ç»“æ„æµ‹è¯•ï¼› ç™½ç›’çš„æµ‹è¯•ç”¨ä¾‹æŠ€æœ¯åŒ…æ‹¬é€»è¾‘è¦†ç›–å’ŒåŸºæœ¬è·¯å¾„æµ‹è¯•ã€‚ é€»è¾‘è¦†ç›–ï¼šæ˜¯ä»¥ç¨‹åºå†…åœ¨é€»è¾‘ç»“æ„ä¸ºåŸºç¡€çš„æµ‹è¯•ç”¨ä¾‹è®¾è®¡æŠ€æœ¯ï¼Œè¿™ä¸€æ–¹æ³•è¦æ±‚æµ‹è¯•äººå‘˜å¯¹ç¨‹åºçš„é€»è¾‘ç»“æ„æœ‰æ¸…æ¥šçš„äº†è§£ã€‚ åŸºæœ¬è·¯å¾„æµ‹è¯•ï¼šåœ¨ç¨‹åºæ§åˆ¶æµç¨‹å›¾çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡åˆ†ææ§åˆ¶æ„é€ çš„ç¯è·¯å¤æ‚æ€§ï¼Œå¯¼å‡ºåŸºæœ¬å¯æ‰§è¡Œè·¯å¾„é›†åˆï¼Œä»è€Œè®¾è®¡æµ‹è¯•ç”¨ä¾‹ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"https://guoshunfa.com/tags/%E6%B5%8B%E8%AF%95/"},{"name":"æ¦‚å¿µ","slug":"æ¦‚å¿µ","permalink":"https://guoshunfa.com/tags/%E6%A6%82%E5%BF%B5/"}]},{"title":"Python uiè‡ªåŠ¨åŒ–æµ‹è¯•","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/python/Python-uiè‡ªåŠ¨åŒ–æµ‹è¯•","date":"2022-06-28T02:52:46.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2022/06/Python-uiè‡ªåŠ¨åŒ–æµ‹è¯•/","link":"","permalink":"https://guoshunfa.com/2022/06/Python-ui%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/","excerpt":"","text":"selenium+unitteståŒ…ï¼Œæ¥åšuiè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚ API&#x2F;DEMOï¼šselenium-pythonä¸­æ–‡æ–‡æ¡£ | seleniumbase(åŸºäºseleniumå°è£…) | demoé¡¹ç›® 1. ç†è§£ç±»ä¼¼äºçˆ¬è™«ï¼Œé€šè¿‡htmlæºä»£ç çš„æ–¹å¼ï¼Œæ•æ‰åˆ°å¯¹åº”æ ‡ç­¾ï¼Œå†é€šè¿‡æµè§ˆå™¨äº‹ä»¶è¿›è¡Œç‚¹å‡»ã€è¾“å…¥æ¡†è¾“å…¥ã€åŒå‡»ç­‰æ“ä½œï¼Œæœ€ç»ˆå®Œæˆ æ‰“å¼€æµè§ˆå™¨ - è‡ªåŠ¨ç‚¹å‡»&#x2F;è¾“å…¥æ“ä½œ - å…³é—­æµè§ˆå™¨ï¼Œè¿™ä¸€ç³»åˆ—æ“ä½œã€‚ 2. demo12345678910111213141516171819202122232425262728# coding=utf-8from selenium import webdriverimport unittest, timefrom utils.log import loggerclass BaiduTest(unittest.TestCase): def setUp(self): self.driver = webdriver.Chrome(&quot;/Library/work/workspace-my/python/chromedriver&quot;) self.driver.implicitly_wait(30) #éšæ€§ç­‰å¾…æ—¶é—´ä¸º30ç§’ self.base_url = &quot;https://www.baidu.com&quot; def test_baidu(self): driver = self.driver driver.get(self.base_url + &quot;/&quot;) driver.find_element_by_id(&quot;kw&quot;).clear() logger.info(&quot;Input search str&quot;)#Print input unittest driver.find_element_by_id(&quot;kw&quot;).send_keys(&quot;unittest&quot;) driver.find_element_by_id(&quot;su&quot;).click() time.sleep(3) title=driver.title self.assertEqual(title, &quot;unittest_ç™¾åº¦æœç´¢&quot;) def tearDown(self): self.driver.quit()if __name__ == &quot;__main__&quot;: unittest.main()","categories":[{"name":"Python","slug":"Python","permalink":"https://guoshunfa.com/categories/Python/"}],"tags":[{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"https://guoshunfa.com/tags/%E6%B5%8B%E8%AF%95/"},{"name":"Python","slug":"Python","permalink":"https://guoshunfa.com/tags/Python/"},{"name":"è‡ªåŠ¨åŒ–æµ‹è¯•","slug":"è‡ªåŠ¨åŒ–æµ‹è¯•","permalink":"https://guoshunfa.com/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"}]},{"title":"Java8ç‰ˆæœ¬ç‰¹æ€§","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Java8ç‰ˆæœ¬ç‰¹æ€§","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.278Z","comments":true,"path":"2020/07/Java8ç‰ˆæœ¬ç‰¹æ€§/","link":"","permalink":"https://guoshunfa.com/2020/07/Java8%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7/","excerpt":"","text":"Javaç‰ˆæœ¬ç‰¹æ€§ - jdk81. stream + lambda æ“ä½œé›†åˆæ•°æ® Stream APIå¯ä»¥æå¤§æé«˜Javaç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ï¼Œè®©ç¨‹åºå‘˜å†™å‡ºé«˜æ•ˆç‡ã€å¹²å‡€ã€ç®€æ´çš„ä»£ç ã€‚ å‰å¾€ demoæ–‡ä»¶ 1.1. æ¦‚å¿µ1.1.1. Streamçš„è¿ä½œæµç¨‹ streamä¸ä¼šæ”¹å˜åŸæœ‰æ•°æ®ï¼Œè€Œæ˜¯åˆ›å»ºä¸€æ¡æ–°çš„æ•°æ®ã€‚ æ¡ˆä¾‹ï¼š 12List&lt;Integer&gt; datas = Lists.newArrayList(1, 2, 3);List&lt;Integer&gt; nums = datas.stream().filter(a -&gt; a == 2).collect(Collectors.toList()); datas.stream() â€“&gt; å°†é›†åˆdatasè½¬æ¢ä¸ºstreamç±»å‹ã€‚ .filter() â€“&gt; è¿‡æ»¤ä¸éœ€è¦çš„æ•°æ®ã€‚ .collect() â€“&gt; æ„å»ºå‡ºæ–°ç»“æ„çš„æ•°æ®ã€‚ 1.2. åˆå§‹åŒ–12345678910111213141516171819202122// arrayè½¬streamint[] num = &#123;1&#125;;IntStream arrayStream = Arrays.stream(num);// è‡ªå®šä¹‰èµ‹å€¼è½¬streamStream&lt;Integer&gt; integerStream = Stream.of(2, 2);// é›†åˆè½¬streamList&lt;Integer&gt; list = Lists.newArrayList(3, 3, 3);Stream&lt;Integer&gt; collectionStream = list.stream();// æ— é™è¿ç»­çš„Streamï¼Œå¯ç”¨äºç”Ÿæˆå¸¸é‡æµå’Œéšæœºå…ƒç´ æµã€‚å› ä¸ºæ˜¯æ— é™ï¼Œä¸€èˆ¬éƒ½ä¼šè®¾å®šlimitã€‚Stream&lt;Integer&gt; generateStream = Stream.generate(() -&gt; 4).limit(4);// è¿­ä»£å™¨ç”ŸæˆStream&lt;Integer&gt; iterateStream = Stream.iterate(5, a -&gt; a).limit(5);// Stream builder æ„é€ å™¨ç”ŸæˆStream&lt;Object&gt; buildStream = Stream.builder().add(1).build();// Stream empty è¿”å›ä¸€ä¸ªç©ºçš„é¡ºåºStreamStream&lt;Object&gt; emptyStream = Stream.empty(); 1.3. API123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172// æ™®é€šç»“æ„ [1,2,3]List&lt;Integer&gt; datas = Lists.newArrayList(1, 2, 2, 3);// forEach å¾ªç¯ï¼Œconsole: 1 2 2 3datas.stream().forEach(a -&gt; System.out.println(a));// forEachOrdered å¾ªç¯ï¼Œç¡®ä¿é¡ºåºæ‰§è¡Œ(ä½¿ç”¨å¹¶è¡Œæµæ—¶forEaché¡ºåºä¼šæ‰“ä¹±)ï¼Œconsole: 1 2 2 3datas.stream().forEachOrdered(a -&gt; System.out.println(a));// filter è¿‡æ»¤ï¼Œconsole: 2 2datas.stream().filter(a -&gt; a == 2).forEach(a -&gt; System.out.println(a));// map/mapToInt/mapToLong/mapToDouble æ„é€ æ•°æ® è¿”å›ç±»å‹Objectï¼Œconsole: 5a 10a 10a 15adatas.stream().map(a -&gt; (a * 5) + &quot;a&quot;).forEach(a -&gt; System.out.println(a));// distinct å»é‡ console: 1 2 3datas.stream().distinct().forEach(a -&gt; System.out.println(a));// sorted æ’åº console: 1 2 2 3datas.stream().sorted(Comparator.naturalOrder()).forEach(a -&gt; System.out.println(a));// peek ä¸»è¦ä¸ºäº†æ”¯æŒè°ƒè¯• console: 1 2 2 3 2 2datas.stream().peek(a -&gt; System.out.println(a)).filter(a -&gt; a == 2) .forEach(a -&gt; System.out.println(a));// limit åªå–å‡ ä½ console: 1 2datas.stream().limit(2).forEach(a -&gt; System.out.println(a));// skip è·³è¿‡å‡ ä½ console: 2 2 3datas.stream().skip(1).forEach(a -&gt; System.out.println(a));// toArray è½¬æ¢æˆarrayObject[] objects = datas.stream().toArray();// reduce èšåˆæ±‚å€¼ console: 8Integer integer = datas.stream().reduce((a, b) -&gt; a + b).get();// collect ä½¿ç”¨Collectorå¯¹æ­¤æµçš„å…ƒç´ æ‰§è¡Œå¯å˜å½’çº¦æ“ä½œSet&lt;Integer&gt; collect = datas.stream().collect(Collectors.toSet());// min æœ€å°å€¼Integer minNum = datas.stream().min(Comparator.naturalOrder()).get();// max æœ€å¤§å€¼Integer maxNum = datas.stream().max(Comparator.naturalOrder()).get();// count æ•°æ®æ•°é‡long count = datas.stream().count();// anyMatch åˆ¤æ–­çš„æ¡ä»¶é‡Œï¼Œä»»æ„ä¸€ä¸ªå…ƒç´ æˆåŠŸï¼Œè¿”å›true console: trueboolean anyMatch = datas.stream().anyMatch(Predicate.isEqual(1));// allMatch åˆ¤æ–­æ¡ä»¶é‡Œçš„å…ƒç´ ï¼Œæ‰€æœ‰çš„éƒ½æ˜¯ï¼Œè¿”å›true console: falseboolean allMatch = datas.stream().allMatch(Predicate.isEqual(2));// noneMatch ä¸allMatchç›¸åï¼Œåˆ¤æ–­æ¡ä»¶é‡Œçš„å…ƒç´ ï¼Œæ‰€æœ‰çš„éƒ½ä¸æ˜¯ï¼Œè¿”å›true console: falseboolean noneMatch = datas.stream().noneMatch(Predicate.isEqual(3));// findFirst è·å–ç¬¬ä¸€ä¸ªå…ƒç´ Integer findFirst = datas.stream().findFirst().get();// findAny è·å–éšæœºä¸€ä¸ªå…ƒç´ Integer findAny = datas.stream().findAny().get();// --------------------------------------åˆ†å‰²çº¿---------------------------------------// å¤šçº§ç»“æ„ [[1,2],[3,4],[5,6]]List&lt;int[]&gt; datas2 = Lists.newArrayList(new int[]&#123;1, 2&#125;, new int[]&#123;3, 4&#125;, new int[]&#123;5, 6&#125;);// flatMap/flatMapToInt/flatMapToLong/flatMapToDouble æ•°æ®æ‰å¹³åŒ– console: 1 2 3 4 5 6datas2.stream().flatMapToInt(a -&gt; Arrays.stream(a)).forEach(a -&gt; System.out.println(a)); 1.4. æ¡ˆä¾‹1.4.1. åŸºäºæ—¶é—´æ’åºå‡åº 12users.sort(Comparator.comparing(User::getCreatedOn));1 é™åº 1users.sort(Comparator.comparing(User::getCreatedOn).reversed());","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"Stream","slug":"Stream","permalink":"https://guoshunfa.com/tags/Stream/"},{"name":"lambda","slug":"lambda","permalink":"https://guoshunfa.com/tags/lambda/"},{"name":"Jdk","slug":"Jdk","permalink":"https://guoshunfa.com/tags/Jdk/"}]},{"title":"Java Decompileråç¼–è¯‘å·¥å…·","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/JavaDecompileråç¼–è¯‘å·¥å…·","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.278Z","comments":true,"path":"2020/07/JavaDecompileråç¼–è¯‘å·¥å…·/","link":"","permalink":"https://guoshunfa.com/2020/07/JavaDecompiler%E5%8F%8D%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7/","excerpt":"","text":"Jar&#x2F;class åç¼–è¯‘å·¥å…·ã€‚ 1. Idea ä¸‹è½½åç¼–è¯‘æ’ä»¶æ’ä»¶åç§°ï¼šJava Bytecode Decompileræˆ–Java Decompilerã€‚ 2. è¿è¡Œæ’ä»¶ä¸‹è½½æˆåŠŸåï¼Œæ‰¾åˆ°å¯¹åº”çš„æ’ä»¶JaråŒ…ã€‚ Macç³»ç»Ÿçš„æ’ä»¶åœ°å€ï¼š/Applications/IntelliJ\\ IDEA.app/Contents/plugins/java-decompiler/lib 2.1. å‘½ä»¤è¿è¡Œ1oracle-java -cp &quot;/Applications/IntelliJ IDEA.app/Contents/plugins/java-decompiler/lib/java-decompiler.jar&quot; org.jetbrains.oracle-java.decompiler.main.decompiler.ConsoleDecompiler -dgs=true rt.jar rt 2.2. å‘½ä»¤æè¿°/Applications/IntelliJ IDEA.app/Contents/plugins/java-decompiler/lib/java-decompiler.jar : åç¼–è¯‘æ’ä»¶åŒ…åœ°å€ã€‚ rt.jar : éœ€è¦è¿›è¡Œåç¼–è¯‘çš„Jaræ–‡ä»¶åœ°å€ã€‚ rt : åç¼–è¯‘åæ–‡ä»¶å­˜æ”¾åœ°å€ã€‚ 3. ç»“æœå‘½ä»¤æ‰§è¡ŒæˆåŠŸä¹‹åä¼šç”Ÿæˆä¸€ä¸ªJaræ–‡ä»¶ï¼Œé€šè¿‡è§£å‹å·¥å…·è§£å‹åå°±å¯ä»¥é£Ÿç”¨äº†ã€‚åŸæœ¬ç¼–è¯‘åçš„classæ–‡ä»¶éƒ½å·²ç»åç¼–è¯‘æˆäº†javaæ–‡ä»¶ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"åç¼–è¯‘å·¥å…·","slug":"åç¼–è¯‘å·¥å…·","permalink":"https://guoshunfa.com/tags/%E5%8F%8D%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7/"}]},{"title":"JavaåŸºç¡€ spelè¡¨è¾¾å¼","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/JavaåŸºç¡€-spelè¡¨è¾¾å¼","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.278Z","comments":true,"path":"2020/07/JavaåŸºç¡€-spelè¡¨è¾¾å¼/","link":"","permalink":"https://guoshunfa.com/2020/07/Java%E5%9F%BA%E7%A1%80-spel%E8%A1%A8%E8%BE%BE%E5%BC%8F/","excerpt":"","text":"1. spel è¡¨è¾¾å¼ ä»‹ç» Spring Expression Languageï¼ˆç®€ç§° SpELï¼‰æ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§çš„è¡¨è¾¾å¼è¯­è¨€ï¼Œæ”¯æŒè¿è¡Œæ—¶æŸ¥è¯¢å’Œæ“ä½œå¯¹è±¡å›¾ ã€‚è¡¨è¾¾å¼è¯­è¨€ä¸€èˆ¬æ˜¯ç”¨æœ€ç®€å•çš„å½¢å¼å®Œæˆæœ€ä¸»è¦çš„å·¥ä½œï¼Œä»¥æ­¤å‡å°‘å·¥ä½œé‡ã€‚ Java æœ‰è®¸å¤šå¯ç”¨çš„è¡¨è¾¾å¼è¯­è¨€ï¼Œä¾‹å¦‚ JSP ELï¼ŒOGNLï¼ŒMVEL å’Œ JBoss ELï¼ŒSpEL è¯­æ³•ç±»ä¼¼äº JSP ELï¼ŒåŠŸèƒ½ç±»ä¼¼äº Struts2 ä¸­çš„ OGNLï¼Œèƒ½åœ¨è¿è¡Œæ—¶æ„å»ºå¤æ‚è¡¨è¾¾å¼ã€å­˜å–å¯¹è±¡å›¾å±æ€§ã€è°ƒç”¨å¯¹è±¡æ–¹æ³•ç­‰ï¼Œå¹¶ä¸”èƒ½ä¸ Spring åŠŸèƒ½å®Œç¾æ•´åˆï¼Œå¦‚ SpEL å¯ä»¥ç”¨æ¥é…ç½® Bean å®šä¹‰ã€‚ SpEL å¹¶ä¸ä¸ Spring ç›´æ¥ç›¸å…³ï¼Œå¯ä»¥è¢«ç‹¬ç«‹ä½¿ç”¨ã€‚SpEL è¡¨è¾¾å¼çš„åˆ›å»ºæ˜¯ä¸ºäº†å‘ Spring ç¤¾åŒºæä¾›ä¸€ç§å—è‰¯å¥½æ”¯æŒçš„è¡¨è¾¾å¼è¯­è¨€ï¼Œè¯¥è¯­è¨€é€‚ç”¨äº Spring å®¶æ—ä¸­çš„æ‰€æœ‰äº§å“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒSpEL æ˜¯ä¸€ç§ä¸æŠ€æœ¯æ— å…³çš„ APIï¼Œå¯ä»¥é›†æˆå…¶å®ƒè¡¨è¾¾å¼è¯­è¨€ã€‚ SpEL æä¾›äº†ä»¥ä¸‹æ¥å£å’Œç±»ï¼š Expression interfaceï¼šè¯¥æ¥å£è´Ÿè´£è¯„ä¼°è¡¨è¾¾å¼å­—ç¬¦ä¸² ExpressionParser interfaceï¼šè¯¥æ¥å£è´Ÿè´£è§£æå­—ç¬¦ä¸² EvaluationContext interfaceï¼šè¯¥æ¥å£è´Ÿè´£å®šä¹‰ä¸Šä¸‹æ–‡ç¯å¢ƒ SpEL æ”¯æŒå¦‚ä¸‹è¡¨è¾¾å¼ï¼š 1. åŸºæœ¬è¡¨è¾¾å¼å­—é¢é‡è¡¨è¾¾å¼ã€å…³ç³»ã€é€»è¾‘ä¸ç®—æœ¯è¿ç®—è¡¨è¾¾å¼ã€å­—ç¬¦ä¸²è¿æ¥åŠæˆªå–è¡¨è¾¾å¼ã€ä¸‰ç›®è¿ç®—è¡¨è¾¾å¼ã€æ­£åˆ™è¡¨è¾¾å¼ã€æ‹¬å·ä¼˜å…ˆçº§è¡¨è¾¾å¼ï¼› 2. ç±»ç›¸å…³è¡¨è¾¾å¼ç±»ç±»å‹è¡¨è¾¾å¼ã€ç±»å®ä¾‹åŒ–ã€instanceof è¡¨è¾¾å¼ã€å˜é‡å®šä¹‰åŠå¼•ç”¨ã€èµ‹å€¼è¡¨è¾¾å¼ã€è‡ªå®šä¹‰å‡½æ•°ã€å¯¹è±¡å±æ€§å­˜å–åŠå®‰å…¨å¯¼èˆªè¡¨è¾¾å¼ã€å¯¹è±¡æ–¹æ³•è°ƒç”¨ã€Bean å¼•ç”¨ï¼› 3. é›†åˆç›¸å…³è¡¨è¾¾å¼å†…è” Listã€å†…è”æ•°ç»„ã€é›†åˆã€å­—å…¸è®¿é—®ã€åˆ—è¡¨ã€å­—å…¸ã€æ•°ç»„ä¿®æ”¹ã€é›†åˆæŠ•å½±ã€é›†åˆé€‰æ‹©ï¼›ä¸æ”¯æŒå¤šç»´å†…è”æ•°ç»„åˆå§‹åŒ–ï¼›ä¸æ”¯æŒå†…è”å­—å…¸å®šä¹‰ï¼› 4. å…¶ä»–è¡¨è¾¾å¼æ¨¡æ¿è¡¨è¾¾å¼ã€‚ æ³¨ï¼šSpEL è¡¨è¾¾å¼ä¸­çš„å…³é”®å­—ä¸åŒºåˆ†å¤§å°å†™ã€‚ 2. å®ä¾‹12345678910111213141516171819package pandacode.cn;import org.springframework.expression.Expression;import org.springframework.expression.ExpressionParser;import org.springframework.expression.spel.standard.SpelExpressionParser;public class Test &#123; public static void main(String[] args) &#123; ExpressionParser parser = new SpelExpressionParser(); // è¿ç®—ç¬¦ System.out.println(parser.parseExpression(&quot;1&gt;2&quot;).getValue(Boolean.class)); // å­—ç¬¦ä¸²è¾“å‡º System.out.println(parser.parseExpression(&quot;&#x27;https://pandacode.cn&#x27;.concat(&#x27;/&#x27;)&quot;).getValue(String.class)); // å¼•å…¥ç±»å¤„ç† System.out.println(parser.parseExpression(&quot;T(org.apache.commons.lang.StringUtils).isBlank(&#x27;&#x27;)&quot;).getValue(Boolean.class)); &#125;&#125; è¾“å‡ºï¼š 123falsehttps://pandacode.cn/true","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"Spelè¡¨è¾¾å¼","slug":"Spelè¡¨è¾¾å¼","permalink":"https://guoshunfa.com/tags/Spel%E8%A1%A8%E8%BE%BE%E5%BC%8F/"}]},{"title":"JavaåŸºç¡€ å…³é”®å­—","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/JavaåŸºç¡€-å…³é”®å­—","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.278Z","comments":true,"path":"2020/07/JavaåŸºç¡€-å…³é”®å­—/","link":"","permalink":"https://guoshunfa.com/2020/07/Java%E5%9F%BA%E7%A1%80-%E5%85%B3%E9%94%AE%E5%AD%97/","excerpt":"","text":"java å…³é”®å­— - transient Javaä¸­transientå…³é”®å­—çš„ä½œç”¨ï¼Œç®€å•åœ°è¯´ï¼Œå°±æ˜¯è®©æŸäº›è¢«ä¿®é¥°çš„æˆå‘˜å±æ€§å˜é‡ä¸è¢«åºåˆ—åŒ–ã€‚ 1ï¼‰ä¸€æ—¦å˜é‡è¢«transientä¿®é¥°ï¼Œå˜é‡å°†ä¸å†æ˜¯å¯¹è±¡æŒä¹…åŒ–çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥å˜é‡å†…å®¹åœ¨åºåˆ—åŒ–åæ— æ³•è·å¾—è®¿é—®ã€‚ 2ï¼‰transientå…³é”®å­—åªèƒ½ä¿®é¥°å˜é‡ï¼Œè€Œä¸èƒ½ä¿®é¥°æ–¹æ³•å’Œç±»ã€‚æ³¨æ„ï¼Œæœ¬åœ°å˜é‡æ˜¯ä¸èƒ½è¢«transientå…³é”®å­—ä¿®é¥°çš„ã€‚å˜é‡å¦‚æœæ˜¯ç”¨æˆ·è‡ªå®šä¹‰ç±»å˜é‡ï¼Œåˆ™è¯¥ç±»éœ€è¦å®ç°Serializableæ¥å£ã€‚ 3ï¼‰è¢«transientå…³é”®å­—ä¿®é¥°çš„å˜é‡ä¸å†èƒ½è¢«åºåˆ—åŒ–ï¼Œä¸€ä¸ªé™æ€å˜é‡ä¸ç®¡æ˜¯å¦è¢«transientä¿®é¥°ï¼Œå‡ä¸èƒ½è¢«åºåˆ—åŒ–ã€‚ 1234567891011121314public static void main(String[] args) &#123; @Data class AA implements Serializable &#123; transient String a; String b; &#125; AA aa = new AA(); aa.setA(&quot;a&quot;); aa.setB(&quot;b&quot;); String s = JSONUtil.toJsonStr(aa); JSONObject jsonObject = JSONUtil.parseObj(s); System.out.println(s); System.out.println(jsonObject);&#125; console: 12&#123;&quot;b&quot;:&quot;b&quot;&#125;&#123;&quot;b&quot;:&quot;b&quot;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"}]},{"title":"JavaåŸºç¡€ æ³›å‹","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/JavaåŸºç¡€-æ³›å‹","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.278Z","comments":true,"path":"2020/07/JavaåŸºç¡€-æ³›å‹/","link":"","permalink":"https://guoshunfa.com/2020/07/Java%E5%9F%BA%E7%A1%80-%E6%B3%9B%E5%9E%8B/","excerpt":"","text":"Java åŸºç¡€ - æ³›å‹1. æ¦‚è¿°æ³›å‹åœ¨javaä¸­æœ‰å¾ˆé‡è¦çš„åœ°ä½ï¼Œåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹åŠå„ç§è®¾è®¡æ¨¡å¼ä¸­æœ‰éå¸¸å¹¿æ³›çš„åº”ç”¨ã€‚ ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ï¼Ÿ æ³›å‹ï¼Œå³â€œå‚æ•°åŒ–ç±»å‹â€ã€‚ä¸€æåˆ°å‚æ•°ï¼Œæœ€ç†Ÿæ‚‰çš„å°±æ˜¯å®šä¹‰æ–¹æ³•æ—¶æœ‰å½¢å‚ï¼Œç„¶åè°ƒç”¨æ­¤æ–¹æ³•æ—¶ä¼ é€’å®å‚ã€‚é‚£ä¹ˆå‚æ•°åŒ–ç±»å‹æ€ä¹ˆç†è§£å‘¢ï¼Ÿ é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å°†ç±»å‹ç”±åŸæ¥çš„å…·ä½“çš„ç±»å‹å‚æ•°åŒ–ï¼Œç±»ä¼¼äºæ–¹æ³•ä¸­çš„å˜é‡å‚æ•°ï¼Œæ­¤æ—¶ç±»å‹ä¹Ÿå®šä¹‰æˆå‚æ•°å½¢å¼ï¼ˆå¯ä»¥ç§°ä¹‹ä¸ºç±»å‹å½¢å‚ï¼‰ï¼Œ ç„¶ååœ¨ä½¿ç”¨&#x2F;è°ƒç”¨æ—¶ä¼ å…¥å…·ä½“çš„ç±»å‹ï¼ˆç±»å‹å®å‚ï¼‰ã€‚ æ³›å‹çš„æœ¬è´¨æ˜¯ä¸ºäº†å‚æ•°åŒ–ç±»å‹ï¼ˆåœ¨ä¸åˆ›å»ºæ–°çš„ç±»å‹çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ³›å‹æŒ‡å®šçš„ä¸åŒç±»å‹æ¥æ§åˆ¶å½¢å‚å…·ä½“é™åˆ¶çš„ç±»å‹ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨æ³›å‹ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œ æ“ä½œçš„æ•°æ®ç±»å‹è¢«æŒ‡å®šä¸ºä¸€ä¸ªå‚æ•°ï¼Œè¿™ç§å‚æ•°ç±»å‹å¯ä»¥ç”¨åœ¨ç±»ã€æ¥å£å’Œæ–¹æ³•ä¸­ï¼Œåˆ†åˆ«è¢«ç§°ä¸ºæ³›å‹ç±»ã€æ³›å‹æ¥å£ã€æ³›å‹æ–¹æ³•ã€‚ 2. ä¸€ä¸ªæ —å­ä¸€ä¸ªè¢«ä¸¾äº†æ— æ•°æ¬¡çš„ä¾‹å­ï¼š 12345678List arrayList = new ArrayList();arrayList.add(&quot;aaaa&quot;);arrayList.add(100);for(int i = 0; i&lt; arrayList.size();i++)&#123; String item = (String)arrayList.get(i); Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;item = &quot; + item);&#125; æ¯«æ— ç–‘é—®ï¼Œç¨‹åºçš„è¿è¡Œç»“æœä¼šä»¥å´©æºƒç»“æŸï¼š 1java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String ArrayListå¯ä»¥å­˜æ”¾ä»»æ„ç±»å‹ï¼Œä¾‹å­ä¸­æ·»åŠ äº†ä¸€ä¸ªStringç±»å‹ï¼Œæ·»åŠ äº†ä¸€ä¸ªIntegerç±»å‹ï¼Œå†ä½¿ç”¨æ—¶éƒ½ä»¥Stringçš„æ–¹å¼ä½¿ç”¨ï¼Œå› æ­¤ç¨‹åºå´©æºƒäº†ã€‚ä¸ºäº†è§£å†³ç±»ä¼¼è¿™æ ·çš„é—®é¢˜ï¼ˆåœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ä»¥è§£å†³ï¼‰ï¼Œæ³›å‹åº”è¿è€Œç”Ÿã€‚ æˆ‘ä»¬å°†ç¬¬ä¸€è¡Œå£°æ˜åˆå§‹åŒ–listçš„ä»£ç æ›´æ”¹ä¸€ä¸‹ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½å¤Ÿå¸®æˆ‘ä»¬å‘ç°ç±»ä¼¼è¿™æ ·çš„é—®é¢˜ã€‚ 123List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;();...//arrayList.add(100); åœ¨ç¼–è¯‘é˜¶æ®µï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ 3. ç‰¹æ€§æ³›å‹åªåœ¨ç¼–è¯‘é˜¶æ®µæœ‰æ•ˆã€‚çœ‹ä¸‹é¢çš„ä»£ç ï¼š 123456789List&lt;String&gt; stringArrayList = new ArrayList&lt;String&gt;();List&lt;Integer&gt; integerArrayList = new ArrayList&lt;Integer&gt;();Class classStringArrayList = stringArrayList.getClass();Class classIntegerArrayList = integerArrayList.getClass();if(classStringArrayList.equals(classIntegerArrayList))&#123; Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;ç±»å‹ç›¸åŒ&quot;);&#125; è¾“å‡ºç»“æœï¼šD/æ³›å‹æµ‹è¯•: ç±»å‹ç›¸åŒã€‚ é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¯ä»¥è¯æ˜ï¼Œåœ¨ç¼–è¯‘ä¹‹åç¨‹åºä¼šé‡‡å–å»æ³›å‹åŒ–çš„æªæ–½ã€‚ä¹Ÿå°±æ˜¯è¯´Javaä¸­çš„æ³›å‹ï¼Œåªåœ¨ç¼–è¯‘é˜¶æ®µæœ‰æ•ˆã€‚åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œæ­£ç¡®æ£€éªŒæ³›å‹ç»“æœåï¼Œä¼šå°†æ³›å‹çš„ç›¸å…³ä¿¡æ¯æ“¦å‡ºï¼Œå¹¶ä¸”åœ¨å¯¹è±¡è¿›å…¥å’Œç¦»å¼€æ–¹æ³•çš„è¾¹ç•Œå¤„æ·»åŠ ç±»å‹æ£€æŸ¥å’Œç±»å‹è½¬æ¢çš„æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ³›å‹ä¿¡æ¯ä¸ä¼šè¿›å…¥åˆ°è¿è¡Œæ—¶é˜¶æ®µã€‚ å¯¹æ­¤æ€»ç»“æˆä¸€å¥è¯ï¼šæ³›å‹ç±»å‹åœ¨é€»è¾‘ä¸Šçœ‹ä»¥çœ‹æˆæ˜¯å¤šä¸ªä¸åŒçš„ç±»å‹ï¼Œå®é™…ä¸Šéƒ½æ˜¯ç›¸åŒçš„åŸºæœ¬ç±»å‹ã€‚ 4. æ³›å‹çš„ä½¿ç”¨æ³›å‹æœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼Œåˆ†åˆ«ä¸ºï¼šæ³›å‹ç±»ã€æ³›å‹æ¥å£ã€æ³›å‹æ–¹æ³• 4.1 æ³›å‹ç±»æ³›å‹ç±»å‹ç”¨äºç±»çš„å®šä¹‰ä¸­ï¼Œè¢«ç§°ä¸ºæ³›å‹ç±»ã€‚é€šè¿‡æ³›å‹å¯ä»¥å®Œæˆå¯¹ä¸€ç»„ç±»çš„æ“ä½œå¯¹å¤–å¼€æ”¾ç›¸åŒçš„æ¥å£ã€‚æœ€å…¸å‹çš„å°±æ˜¯å„ç§å®¹å™¨ç±»ï¼Œå¦‚ï¼šListã€Setã€Mapã€‚ æ³›å‹ç±»çš„æœ€åŸºæœ¬å†™æ³•ï¼ˆè¿™ä¹ˆçœ‹å¯èƒ½ä¼šæœ‰ç‚¹æ™•ï¼Œä¼šåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­è¯¦è§£ï¼‰ï¼š 123456class ç±»åç§° &lt;æ³›å‹æ ‡è¯†ï¼šå¯ä»¥éšä¾¿å†™ä»»æ„æ ‡è¯†å·ï¼Œæ ‡è¯†æŒ‡å®šçš„æ³›å‹çš„ç±»å‹&gt;&#123; private æ³›å‹æ ‡è¯† /*ï¼ˆæˆå‘˜å˜é‡ç±»å‹ï¼‰*/ var; ..... &#125;&#125; ä¸€ä¸ªæœ€æ™®é€šçš„æ³›å‹ç±»ï¼š 1234567891011121314//æ­¤å¤„Tå¯ä»¥éšä¾¿å†™ä¸ºä»»æ„æ ‡è¯†ï¼Œå¸¸è§çš„å¦‚Tã€Eã€Kã€Vç­‰å½¢å¼çš„å‚æ•°å¸¸ç”¨äºè¡¨ç¤ºæ³›å‹//åœ¨å®ä¾‹åŒ–æ³›å‹ç±»æ—¶ï¼Œå¿…é¡»æŒ‡å®šTçš„å…·ä½“ç±»å‹public class Generic&lt;T&gt;&#123; //keyè¿™ä¸ªæˆå‘˜å˜é‡çš„ç±»å‹ä¸ºT,Tçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š private T key; public Generic(T key) &#123; //æ³›å‹æ„é€ æ–¹æ³•å½¢å‚keyçš„ç±»å‹ä¹Ÿä¸ºTï¼ŒTçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š this.key = key; &#125; public T getKey()&#123; //æ³›å‹æ–¹æ³•getKeyçš„è¿”å›å€¼ç±»å‹ä¸ºTï¼ŒTçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š return key; &#125;&#125; 12345678//æ³›å‹çš„ç±»å‹å‚æ•°åªèƒ½æ˜¯ç±»ç±»å‹ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰ç±»ï¼‰ï¼Œä¸èƒ½æ˜¯ç®€å•ç±»å‹//ä¼ å…¥çš„å®å‚ç±»å‹éœ€ä¸æ³›å‹çš„ç±»å‹å‚æ•°ç±»å‹ç›¸åŒï¼Œå³ä¸ºInteger.Generic&lt;Integer&gt; genericInteger = new Generic&lt;Integer&gt;(123456);//ä¼ å…¥çš„å®å‚ç±»å‹éœ€ä¸æ³›å‹çš„ç±»å‹å‚æ•°ç±»å‹ç›¸åŒï¼Œå³ä¸ºString.Generic&lt;String&gt; genericString = new Generic&lt;String&gt;(&quot;key_vlaue&quot;);Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;key is &quot; + genericInteger.getKey());Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;key is &quot; + genericString.getKey()); 1212-27 09:20:04.432 13063-13063/? D/æ³›å‹æµ‹è¯•: key is 12345612-27 09:20:04.432 13063-13063/? D/æ³›å‹æµ‹è¯•: key is key_vlaue å®šä¹‰çš„æ³›å‹ç±»ï¼Œå°±ä¸€å®šè¦ä¼ å…¥æ³›å‹ç±»å‹å®å‚ä¹ˆï¼Ÿå¹¶ä¸æ˜¯è¿™æ ·ï¼Œåœ¨ä½¿ç”¨æ³›å‹çš„æ—¶å€™å¦‚æœä¼ å…¥æ³›å‹å®å‚ï¼Œåˆ™ä¼šæ ¹æ®ä¼ å…¥çš„æ³›å‹å®å‚åšç›¸åº”çš„é™åˆ¶ï¼Œæ­¤æ—¶æ³›å‹æ‰ä¼šèµ·åˆ°æœ¬åº”èµ·åˆ°çš„é™åˆ¶ä½œç”¨ã€‚å¦‚æœä¸ä¼ å…¥æ³›å‹ç±»å‹å®å‚çš„è¯ï¼Œåœ¨æ³›å‹ç±»ä¸­ä½¿ç”¨æ³›å‹çš„æ–¹æ³•æˆ–æˆå‘˜å˜é‡å®šä¹‰çš„ç±»å‹å¯ä»¥ä¸ºä»»ä½•çš„ç±»å‹ã€‚ çœ‹ä¸€ä¸ªä¾‹å­ï¼š 123456789Generic generic = new Generic(&quot;111111&quot;);Generic generic1 = new Generic(4444);Generic generic2 = new Generic(55.55);Generic generic3 = new Generic(false);Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;key is &quot; + generic.getKey());Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;key is &quot; + generic1.getKey());Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;key is &quot; + generic2.getKey());Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;key is &quot; + generic3.getKey()); 1234D/æ³›å‹æµ‹è¯•: key is 111111D/æ³›å‹æµ‹è¯•: key is 4444D/æ³›å‹æµ‹è¯•: key is 55.55D/æ³›å‹æµ‹è¯•: key is false æ³¨æ„ï¼š æ³›å‹çš„ç±»å‹å‚æ•°åªèƒ½æ˜¯ç±»ç±»å‹ï¼Œä¸èƒ½æ˜¯ç®€å•ç±»å‹ã€‚ ä¸èƒ½å¯¹ç¡®åˆ‡çš„æ³›å‹ç±»å‹ä½¿ç”¨instanceofæ“ä½œã€‚å¦‚ä¸‹é¢çš„æ“ä½œæ˜¯éæ³•çš„ï¼Œç¼–è¯‘æ—¶ä¼šå‡ºé”™ã€‚ if(ex_num instanceof Generic&lt;Number&gt;)&#123; &#125; 4.2 æ³›å‹æ¥å£æ³›å‹æ¥å£ä¸æ³›å‹ç±»çš„å®šä¹‰åŠä½¿ç”¨åŸºæœ¬ç›¸åŒã€‚æ³›å‹æ¥å£å¸¸è¢«ç”¨åœ¨å„ç§ç±»çš„ç”Ÿäº§å™¨ä¸­ï¼Œå¯ä»¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š 1234//å®šä¹‰ä¸€ä¸ªæ³›å‹æ¥å£public interface Generator&lt;T&gt; &#123; public T next();&#125; å½“å®ç°æ³›å‹æ¥å£çš„ç±»ï¼Œæœªä¼ å…¥æ³›å‹å®å‚æ—¶ï¼š 1234567891011/** * æœªä¼ å…¥æ³›å‹å®å‚æ—¶ï¼Œä¸æ³›å‹ç±»çš„å®šä¹‰ç›¸åŒï¼Œåœ¨å£°æ˜ç±»çš„æ—¶å€™ï¼Œéœ€å°†æ³›å‹çš„å£°æ˜ä¹Ÿä¸€èµ·åŠ åˆ°ç±»ä¸­ * å³ï¼šclass FruitGenerator&lt;T&gt; implements Generator&lt;T&gt;&#123; * å¦‚æœä¸å£°æ˜æ³›å‹ï¼Œå¦‚ï¼šclass FruitGenerator implements Generator&lt;T&gt;ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼š&quot;Unknown class&quot; */class FruitGenerator&lt;T&gt; implements Generator&lt;T&gt;&#123; @Override public T next() &#123; return null; &#125;&#125; å½“å®ç°æ³›å‹æ¥å£çš„ç±»ï¼Œä¼ å…¥æ³›å‹å®å‚æ—¶ï¼š 1234567891011121314151617/** * ä¼ å…¥æ³›å‹å®å‚æ—¶ï¼š * å®šä¹‰ä¸€ä¸ªç”Ÿäº§å™¨å®ç°è¿™ä¸ªæ¥å£,è™½ç„¶æˆ‘ä»¬åªåˆ›å»ºäº†ä¸€ä¸ªæ³›å‹æ¥å£Generator&lt;T&gt; * ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä¸ºTä¼ å…¥æ— æ•°ä¸ªå®å‚ï¼Œå½¢æˆæ— æ•°ç§ç±»å‹çš„Generatoræ¥å£ã€‚ * åœ¨å®ç°ç±»å®ç°æ³›å‹æ¥å£æ—¶ï¼Œå¦‚å·²å°†æ³›å‹ç±»å‹ä¼ å…¥å®å‚ç±»å‹ï¼Œåˆ™æ‰€æœ‰ä½¿ç”¨æ³›å‹çš„åœ°æ–¹éƒ½è¦æ›¿æ¢æˆä¼ å…¥çš„å®å‚ç±»å‹ * å³ï¼šGenerator&lt;T&gt;ï¼Œpublic T next();ä¸­çš„çš„Téƒ½è¦æ›¿æ¢æˆä¼ å…¥çš„Stringç±»å‹ã€‚ */public class FruitGenerator implements Generator&lt;String&gt; &#123; private String[] fruits = new String[]&#123;&quot;Apple&quot;, &quot;Banana&quot;, &quot;Pear&quot;&#125;; @Override public String next() &#123; Random rand = new Random(); return fruits[rand.nextInt(3)]; &#125;&#125; 4.3 æ³›å‹é€šé…ç¬¦æˆ‘ä»¬çŸ¥é“Ingeteræ˜¯Numberçš„ä¸€ä¸ªå­ç±»ï¼ŒåŒæ—¶åœ¨ç‰¹æ€§ç« èŠ‚ä¸­æˆ‘ä»¬ä¹ŸéªŒè¯è¿‡Generic&lt;Ingeter&gt;ä¸Generic&lt;Number&gt;å®é™…ä¸Šæ˜¯ç›¸åŒçš„ä¸€ç§åŸºæœ¬ç±»å‹ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œåœ¨ä½¿ç”¨Generic&lt;Number&gt;ä½œä¸ºå½¢å‚çš„æ–¹æ³•ä¸­ï¼Œèƒ½å¦ä½¿ç”¨Generic&lt;Ingeter&gt;çš„å®ä¾‹ä¼ å…¥å‘¢ï¼Ÿåœ¨é€»è¾‘ä¸Šç±»ä¼¼äºGeneric&lt;Number&gt;å’ŒGeneric&lt;Ingeter&gt;æ˜¯å¦å¯ä»¥çœ‹æˆå…·æœ‰çˆ¶å­å…³ç³»çš„æ³›å‹ç±»å‹å‘¢ï¼Ÿ ä¸ºäº†å¼„æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨Generic&lt;T&gt;è¿™ä¸ªæ³›å‹ç±»ç»§ç»­çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š 123public void showKeyValue1(Generic&lt;Number&gt; obj)&#123; Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;key value is &quot; + obj.getKey());&#125; 12345678Generic&lt;Integer&gt; gInteger = new Generic&lt;Integer&gt;(123);Generic&lt;Number&gt; gNumber = new Generic&lt;Number&gt;(456);showKeyValue(gNumber);// showKeyValueè¿™ä¸ªæ–¹æ³•ç¼–è¯‘å™¨ä¼šä¸ºæˆ‘ä»¬æŠ¥é”™ï¼šGeneric&lt;java.lang.Integer&gt; // cannot be applied to Generic&lt;java.lang.Number&gt;// showKeyValue(gInteger); é€šè¿‡æç¤ºä¿¡æ¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Generic&lt;Integer&gt;ä¸èƒ½è¢«çœ‹ä½œä¸ºGeneric&lt;Number&gt;çš„å­ç±»ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡º:åŒä¸€ç§æ³›å‹å¯ä»¥å¯¹åº”å¤šä¸ªç‰ˆæœ¬ï¼ˆå› ä¸ºå‚æ•°ç±»å‹æ˜¯ä¸ç¡®å®šçš„ï¼‰ï¼Œä¸åŒç‰ˆæœ¬çš„æ³›å‹ç±»å®ä¾‹æ˜¯ä¸å…¼å®¹çš„ã€‚ å›åˆ°ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚ä½•è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Ÿæ€»ä¸èƒ½ä¸ºäº†å®šä¹‰ä¸€ä¸ªæ–°çš„æ–¹æ³•æ¥å¤„ç†Generic&lt;Integer&gt;ç±»å‹çš„ç±»ï¼Œè¿™æ˜¾ç„¶ä¸javaä¸­çš„å¤šå°ç†å¿µç›¸è¿èƒŒã€‚å› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåœ¨é€»è¾‘ä¸Šå¯ä»¥è¡¨ç¤ºåŒæ—¶æ˜¯Generic&lt;Integer&gt;å’ŒGeneric&lt;Number&gt;çˆ¶ç±»çš„å¼•ç”¨ç±»å‹ã€‚ç”±æ­¤ç±»å‹é€šé…ç¬¦åº”è¿è€Œç”Ÿã€‚ æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„æ–¹æ³•æ”¹ä¸€ä¸‹ï¼š 123public void showKeyValue1(Generic&lt;?&gt; obj)&#123; Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;key value is &quot; + obj.getKey());&#125; ç±»å‹é€šé…ç¬¦ä¸€èˆ¬æ˜¯ä½¿ç”¨ï¼Ÿä»£æ›¿å…·ä½“çš„ç±»å‹å®å‚ï¼Œæ³¨æ„äº†ï¼Œæ­¤å¤„â€™ï¼Ÿâ€™æ˜¯ç±»å‹å®å‚ï¼Œè€Œä¸æ˜¯ç±»å‹å½¢å‚ ã€‚é‡è¦è¯´ä¸‰éï¼æ­¤å¤„â€™ï¼Ÿâ€™æ˜¯ç±»å‹å®å‚ï¼Œè€Œä¸æ˜¯ç±»å‹å½¢å‚ ï¼ æ­¤å¤„â€™ï¼Ÿâ€™æ˜¯ç±»å‹å®å‚ï¼Œè€Œä¸æ˜¯ç±»å‹å½¢å‚ ï¼å†ç›´ç™½ç‚¹çš„æ„æ€å°±æ˜¯ï¼Œæ­¤å¤„çš„ï¼Ÿå’ŒNumberã€Stringã€Integerä¸€æ ·éƒ½æ˜¯ä¸€ç§å®é™…çš„ç±»å‹ï¼Œå¯ä»¥æŠŠï¼Ÿçœ‹æˆæ‰€æœ‰ç±»å‹çš„çˆ¶ç±»ã€‚æ˜¯ä¸€ç§çœŸå®çš„ç±»å‹ã€‚ å¯ä»¥è§£å†³å½“å…·ä½“ç±»å‹ä¸ç¡®å®šçš„æ—¶å€™ï¼Œè¿™ä¸ªé€šé…ç¬¦å°±æ˜¯ ? ï¼›å½“æ“ä½œç±»å‹æ—¶ï¼Œä¸éœ€è¦ä½¿ç”¨ç±»å‹çš„å…·ä½“åŠŸèƒ½æ—¶ï¼Œåªä½¿ç”¨Objectç±»ä¸­çš„åŠŸèƒ½ã€‚é‚£ä¹ˆå¯ä»¥ç”¨ ? é€šé…ç¬¦æ¥è¡¨æœªçŸ¥ç±»å‹ã€‚ 4.4 æ³›å‹æ–¹æ³•åœ¨javaä¸­,æ³›å‹ç±»çš„å®šä¹‰éå¸¸ç®€å•ï¼Œä½†æ˜¯æ³›å‹æ–¹æ³•å°±æ¯”è¾ƒå¤æ‚äº†ã€‚ å°¤å…¶æ˜¯æˆ‘ä»¬è§åˆ°çš„å¤§å¤šæ•°æ³›å‹ç±»ä¸­çš„æˆå‘˜æ–¹æ³•ä¹Ÿéƒ½ä½¿ç”¨äº†æ³›å‹ï¼Œæœ‰çš„ç”šè‡³æ³›å‹ç±»ä¸­ä¹ŸåŒ…å«ç€æ³›å‹æ–¹æ³•ï¼Œè¿™æ ·åœ¨åˆå­¦è€…ä¸­éå¸¸å®¹æ˜“å°†æ³›å‹æ–¹æ³•ç†è§£é”™äº†ã€‚ æ³›å‹ç±»ï¼Œæ˜¯åœ¨å®ä¾‹åŒ–ç±»çš„æ—¶å€™æŒ‡æ˜æ³›å‹çš„å…·ä½“ç±»å‹ï¼›æ³›å‹æ–¹æ³•ï¼Œæ˜¯åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™æŒ‡æ˜æ³›å‹çš„å…·ä½“ç±»å‹ ã€‚ 123456789101112131415/** * æ³›å‹æ–¹æ³•çš„åŸºæœ¬ä»‹ç» * @param tClass ä¼ å…¥çš„æ³›å‹å®å‚ * @return T è¿”å›å€¼ä¸ºTç±»å‹ * è¯´æ˜ï¼š * 1ï¼‰public ä¸ è¿”å›å€¼ä¸­é—´&lt;T&gt;éå¸¸é‡è¦ï¼Œå¯ä»¥ç†è§£ä¸ºå£°æ˜æ­¤æ–¹æ³•ä¸ºæ³›å‹æ–¹æ³•ã€‚ * 2ï¼‰åªæœ‰å£°æ˜äº†&lt;T&gt;çš„æ–¹æ³•æ‰æ˜¯æ³›å‹æ–¹æ³•ï¼Œæ³›å‹ç±»ä¸­çš„ä½¿ç”¨äº†æ³›å‹çš„æˆå‘˜æ–¹æ³•å¹¶ä¸æ˜¯æ³›å‹æ–¹æ³•ã€‚ * 3ï¼‰&lt;T&gt;è¡¨æ˜è¯¥æ–¹æ³•å°†ä½¿ç”¨æ³›å‹ç±»å‹Tï¼Œæ­¤æ—¶æ‰å¯ä»¥åœ¨æ–¹æ³•ä¸­ä½¿ç”¨æ³›å‹ç±»å‹Tã€‚ * 4ï¼‰ä¸æ³›å‹ç±»çš„å®šä¹‰ä¸€æ ·ï¼Œæ­¤å¤„Tå¯ä»¥éšä¾¿å†™ä¸ºä»»æ„æ ‡è¯†ï¼Œå¸¸è§çš„å¦‚Tã€Eã€Kã€Vç­‰å½¢å¼çš„å‚æ•°å¸¸ç”¨äºè¡¨ç¤ºæ³›å‹ã€‚ */public &lt;T&gt; T genericMethod(Class&lt;T&gt; tClass)throws InstantiationException , IllegalAccessException&#123; T instance = tClass.newInstance(); return instance;&#125; 1Object obj = genericMethod(Class.forName(&quot;com.test.test&quot;)); 4.4.1 æ³›å‹æ–¹æ³•çš„åŸºæœ¬ç”¨æ³•å…‰çœ‹ä¸Šé¢çš„ä¾‹å­æœ‰çš„åŒå­¦å¯èƒ½ä¾ç„¶ä¼šéå¸¸è¿·ç³Šï¼Œæˆ‘ä»¬å†é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼ŒæŠŠæˆ‘æ³›å‹æ–¹æ³•å†æ€»ç»“ä¸€ä¸‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475public class GenericTest &#123; //è¿™ä¸ªç±»æ˜¯ä¸ªæ³›å‹ç±»ï¼Œåœ¨ä¸Šé¢å·²ç»ä»‹ç»è¿‡ public class Generic&lt;T&gt;&#123; private T key; public Generic(T key) &#123; this.key = key; &#125; //æˆ‘æƒ³è¯´çš„å…¶å®æ˜¯è¿™ä¸ªï¼Œè™½ç„¶åœ¨æ–¹æ³•ä¸­ä½¿ç”¨äº†æ³›å‹ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæ³›å‹æ–¹æ³•ã€‚ //è¿™åªæ˜¯ç±»ä¸­ä¸€ä¸ªæ™®é€šçš„æˆå‘˜æ–¹æ³•ï¼Œåªä¸è¿‡ä»–çš„è¿”å›å€¼æ˜¯åœ¨å£°æ˜æ³›å‹ç±»å·²ç»å£°æ˜è¿‡çš„æ³›å‹ã€‚ //æ‰€ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ‰å¯ä»¥ç»§ç»­ä½¿ç”¨ T è¿™ä¸ªæ³›å‹ã€‚ public T getKey()&#123; return key; &#125; /** * è¿™ä¸ªæ–¹æ³•æ˜¾ç„¶æ˜¯æœ‰é—®é¢˜çš„ï¼Œåœ¨ç¼–è¯‘å™¨ä¼šç»™æˆ‘ä»¬æç¤ºè¿™æ ·çš„é”™è¯¯ä¿¡æ¯&quot;cannot reslove symbol E&quot; * å› ä¸ºåœ¨ç±»çš„å£°æ˜ä¸­å¹¶æœªå£°æ˜æ³›å‹Eï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨Eåšå½¢å‚å’Œè¿”å›å€¼ç±»å‹æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ— æ³•è¯†åˆ«ã€‚ public E setKey(E key)&#123; this.key = keu &#125; */ &#125; /** * è¿™æ‰æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ³›å‹æ–¹æ³•ã€‚ * é¦–å…ˆåœ¨publicä¸è¿”å›å€¼ä¹‹é—´çš„&lt;T&gt;å¿…ä¸å¯å°‘ï¼Œè¿™è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæ³›å‹æ–¹æ³•ï¼Œå¹¶ä¸”å£°æ˜äº†ä¸€ä¸ªæ³›å‹T * è¿™ä¸ªTå¯ä»¥å‡ºç°åœ¨è¿™ä¸ªæ³›å‹æ–¹æ³•çš„ä»»æ„ä½ç½®. * æ³›å‹çš„æ•°é‡ä¹Ÿå¯ä»¥ä¸ºä»»æ„å¤šä¸ª * å¦‚ï¼špublic &lt;T,K&gt; K showKeyName(Generic&lt;T&gt; container)&#123; * ... * &#125; */ public &lt;T&gt; T showKeyName(Generic&lt;T&gt; container)&#123; System.out.println(&quot;container key :&quot; + container.getKey()); //å½“ç„¶è¿™ä¸ªä¾‹å­ä¸¾çš„ä¸å¤ªåˆé€‚ï¼Œåªæ˜¯ä¸ºäº†è¯´æ˜æ³›å‹æ–¹æ³•çš„ç‰¹æ€§ã€‚ T test = container.getKey(); return test; &#125; //è¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªæ³›å‹æ–¹æ³•ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„æ–¹æ³•ï¼Œåªæ˜¯ä½¿ç”¨äº†Generic&lt;Number&gt;è¿™ä¸ªæ³›å‹ç±»åšå½¢å‚è€Œå·²ã€‚ public void showKeyValue1(Generic&lt;Number&gt; obj)&#123; Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;key value is &quot; + obj.getKey()); &#125; //è¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªæ³›å‹æ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šçš„æ–¹æ³•ï¼Œåªä¸è¿‡ä½¿ç”¨äº†æ³›å‹é€šé…ç¬¦? //åŒæ—¶è¿™ä¹Ÿå°è¯äº†æ³›å‹é€šé…ç¬¦ç« èŠ‚æ‰€æè¿°çš„ï¼Œ?æ˜¯ä¸€ç§ç±»å‹å®å‚ï¼Œå¯ä»¥çœ‹åšä¸ºNumberç­‰æ‰€æœ‰ç±»çš„çˆ¶ç±» public void showKeyValue2(Generic&lt;?&gt; obj)&#123; Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;key value is &quot; + obj.getKey()); &#125; /** * è¿™ä¸ªæ–¹æ³•æ˜¯æœ‰é—®é¢˜çš„ï¼Œç¼–è¯‘å™¨ä¼šä¸ºæˆ‘ä»¬æç¤ºé”™è¯¯ä¿¡æ¯ï¼š&quot;UnKnown class &#x27;E&#x27; &quot; * è™½ç„¶æˆ‘ä»¬å£°æ˜äº†&lt;T&gt;,ä¹Ÿè¡¨æ˜äº†è¿™æ˜¯ä¸€ä¸ªå¯ä»¥å¤„ç†æ³›å‹çš„ç±»å‹çš„æ³›å‹æ–¹æ³•ã€‚ * ä½†æ˜¯åªå£°æ˜äº†æ³›å‹ç±»å‹Tï¼Œå¹¶æœªå£°æ˜æ³›å‹ç±»å‹Eï¼Œå› æ­¤ç¼–è¯‘å™¨å¹¶ä¸çŸ¥é“è¯¥å¦‚ä½•å¤„ç†Eè¿™ä¸ªç±»å‹ã€‚ public &lt;T&gt; T showKeyName(Generic&lt;E&gt; container)&#123; ... &#125; */ /** * è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œç¼–è¯‘å™¨ä¼šä¸ºæˆ‘ä»¬æç¤ºé”™è¯¯ä¿¡æ¯ï¼š&quot;UnKnown class &#x27;T&#x27; &quot; * å¯¹äºç¼–è¯‘å™¨æ¥è¯´Tè¿™ä¸ªç±»å‹å¹¶æœªé¡¹ç›®ä¸­å£°æ˜è¿‡ï¼Œå› æ­¤ç¼–è¯‘ä¹Ÿä¸çŸ¥é“è¯¥å¦‚ä½•ç¼–è¯‘è¿™ä¸ªç±»ã€‚ * æ‰€ä»¥è¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªæ­£ç¡®çš„æ³›å‹æ–¹æ³•å£°æ˜ã€‚ public void showkey(T genericObj)&#123; &#125; */ public static void main(String[] args) &#123; &#125;&#125; 4.4.2 ç±»ä¸­çš„æ³›å‹æ–¹æ³•å½“ç„¶è¿™å¹¶ä¸æ˜¯æ³›å‹æ–¹æ³•çš„å…¨éƒ¨ï¼Œæ³›å‹æ–¹æ³•å¯ä»¥å‡ºç°æ‚ä»»ä½•åœ°æ–¹å’Œä»»ä½•åœºæ™¯ä¸­ä½¿ç”¨ã€‚ä½†æ˜¯æœ‰ä¸€ç§æƒ…å†µæ˜¯éå¸¸ç‰¹æ®Šçš„ï¼Œå½“æ³›å‹æ–¹æ³•å‡ºç°åœ¨æ³›å‹ç±»ä¸­æ—¶ï¼Œæˆ‘ä»¬å†é€šè¿‡ä¸€ä¸ªä¾‹å­çœ‹ä¸€ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class GenericFruit &#123; class Fruit&#123; @Override public String toString() &#123; return &quot;fruit&quot;; &#125; &#125; class Apple extends Fruit&#123; @Override public String toString() &#123; return &quot;apple&quot;; &#125; &#125; class Person&#123; @Override public String toString() &#123; return &quot;Person&quot;; &#125; &#125; class GenerateTest&lt;T&gt;&#123; public void show_1(T t)&#123; System.out.println(t.toString()); &#125; //åœ¨æ³›å‹ç±»ä¸­å£°æ˜äº†ä¸€ä¸ªæ³›å‹æ–¹æ³•ï¼Œä½¿ç”¨æ³›å‹Eï¼Œè¿™ç§æ³›å‹Eå¯ä»¥ä¸ºä»»æ„ç±»å‹ã€‚å¯ä»¥ç±»å‹ä¸Tç›¸åŒï¼Œä¹Ÿå¯ä»¥ä¸åŒã€‚ //ç”±äºæ³›å‹æ–¹æ³•åœ¨å£°æ˜çš„æ—¶å€™ä¼šå£°æ˜æ³›å‹&lt;E&gt;ï¼Œå› æ­¤å³ä½¿åœ¨æ³›å‹ç±»ä¸­å¹¶æœªå£°æ˜æ³›å‹ï¼Œç¼–è¯‘å™¨ä¹Ÿèƒ½å¤Ÿæ­£ç¡®è¯†åˆ«æ³›å‹æ–¹æ³•ä¸­è¯†åˆ«çš„æ³›å‹ã€‚ public &lt;E&gt; void show_3(E t)&#123; System.out.println(t.toString()); &#125; //åœ¨æ³›å‹ç±»ä¸­å£°æ˜äº†ä¸€ä¸ªæ³›å‹æ–¹æ³•ï¼Œä½¿ç”¨æ³›å‹Tï¼Œæ³¨æ„è¿™ä¸ªTæ˜¯ä¸€ç§å…¨æ–°çš„ç±»å‹ï¼Œå¯ä»¥ä¸æ³›å‹ç±»ä¸­å£°æ˜çš„Tä¸æ˜¯åŒä¸€ç§ç±»å‹ã€‚ public &lt;T&gt; void show_2(T t)&#123; System.out.println(t.toString()); &#125; &#125; public static void main(String[] args) &#123; Apple apple = new Apple(); Person person = new Person(); GenerateTest&lt;Fruit&gt; generateTest = new GenerateTest&lt;Fruit&gt;(); //appleæ˜¯Fruitçš„å­ç±»ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ generateTest.show_1(apple); //ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ³›å‹ç±»å‹å®å‚æŒ‡å®šçš„æ˜¯Fruitï¼Œè€Œä¼ å…¥çš„å®å‚ç±»æ˜¯Person //generateTest.show_1(person); //ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥æˆåŠŸ generateTest.show_2(apple); generateTest.show_2(person); //ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¹Ÿéƒ½å¯ä»¥æˆåŠŸ generateTest.show_3(apple); generateTest.show_3(person); &#125;&#125; 4.4.3 æ³›å‹æ–¹æ³•ä¸å¯å˜å‚æ•°å†çœ‹ä¸€ä¸ªæ³›å‹æ–¹æ³•å’Œå¯å˜å‚æ•°çš„ä¾‹å­ï¼š 123456public &lt;T&gt; void printMsg( T... args)&#123; for(T t : args)&#123; Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;t is &quot; + t); &#125;&#125;printMsg(&quot;111&quot;,222,&quot;aaaa&quot;,&quot;2323.4&quot;,55.55); 4.4.4 é™æ€æ–¹æ³•ä¸æ³›å‹é™æ€æ–¹æ³•æœ‰ä¸€ç§æƒ…å†µéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œé‚£å°±æ˜¯åœ¨ç±»ä¸­çš„é™æ€æ–¹æ³•ä½¿ç”¨æ³›å‹ï¼šé™æ€æ–¹æ³•æ— æ³•è®¿é—®ç±»ä¸Šå®šä¹‰çš„æ³›å‹ï¼›å¦‚æœé™æ€æ–¹æ³•æ“ä½œçš„å¼•ç”¨æ•°æ®ç±»å‹ä¸ç¡®å®šçš„æ—¶å€™ï¼Œå¿…é¡»è¦å°†æ³›å‹å®šä¹‰åœ¨æ–¹æ³•ä¸Šã€‚ å³ï¼šå¦‚æœé™æ€æ–¹æ³•è¦ä½¿ç”¨æ³›å‹çš„è¯ï¼Œå¿…é¡»å°†é™æ€æ–¹æ³•ä¹Ÿå®šä¹‰æˆæ³›å‹æ–¹æ³• ã€‚ 12345678910111213public class StaticGenerator&lt;T&gt; &#123; .... .... /** * å¦‚æœåœ¨ç±»ä¸­å®šä¹‰ä½¿ç”¨æ³›å‹çš„é™æ€æ–¹æ³•ï¼Œéœ€è¦æ·»åŠ é¢å¤–çš„æ³›å‹å£°æ˜ï¼ˆå°†è¿™ä¸ªæ–¹æ³•å®šä¹‰æˆæ³›å‹æ–¹æ³•ï¼‰ * å³ä½¿é™æ€æ–¹æ³•è¦ä½¿ç”¨æ³›å‹ç±»ä¸­å·²ç»å£°æ˜è¿‡çš„æ³›å‹ä¹Ÿä¸å¯ä»¥ã€‚ * å¦‚ï¼špublic static void show(T t)&#123;..&#125;,æ­¤æ—¶ç¼–è¯‘å™¨ä¼šæç¤ºé”™è¯¯ä¿¡æ¯ï¼š &quot;StaticGenerator cannot be refrenced from static context&quot; */ public static &lt;T&gt; void show(T t)&#123; &#125;&#125; 4.4.5 æ³›å‹æ–¹æ³•æ€»ç»“æ³›å‹æ–¹æ³•èƒ½ä½¿æ–¹æ³•ç‹¬ç«‹äºç±»è€Œäº§ç”Ÿå˜åŒ–ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„æŒ‡å¯¼åŸåˆ™ï¼š æ— è®ºä½•æ—¶ï¼Œå¦‚æœä½ èƒ½åšåˆ°ï¼Œä½ å°±è¯¥å°½é‡ä½¿ç”¨æ³›å‹æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½¿ç”¨æ³›å‹æ–¹æ³•å°†æ•´ä¸ªç±»æ³›å‹åŒ–ï¼Œ é‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨æ³›å‹æ–¹æ³•ã€‚å¦å¤–å¯¹äºä¸€ä¸ªstaticçš„æ–¹æ³•è€Œå·²ï¼Œæ— æ³•è®¿é—®æ³›å‹ç±»å‹çš„å‚æ•°ã€‚ æ‰€ä»¥å¦‚æœstaticæ–¹æ³•è¦ä½¿ç”¨æ³›å‹èƒ½åŠ›ï¼Œå°±å¿…é¡»ä½¿å…¶æˆä¸ºæ³›å‹æ–¹æ³•ã€‚ 4.5 æ³›å‹ä¸Šä¸‹è¾¹ç•Œåœ¨ä½¿ç”¨æ³›å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¸ºä¼ å…¥çš„æ³›å‹ç±»å‹å®å‚è¿›è¡Œä¸Šä¸‹è¾¹ç•Œçš„é™åˆ¶ï¼Œå¦‚ï¼šç±»å‹å®å‚åªå‡†ä¼ å…¥æŸç§ç±»å‹çš„çˆ¶ç±»æˆ–æŸç§ç±»å‹çš„å­ç±»ã€‚ ä¸ºæ³›å‹æ·»åŠ ä¸Šè¾¹ç•Œï¼Œå³ä¼ å…¥çš„ç±»å‹å®å‚å¿…é¡»æ˜¯æŒ‡å®šç±»å‹çš„å­ç±»å‹ 123public void showKeyValue1(Generic&lt;? extends Number&gt; obj)&#123; Log.d(&quot;æ³›å‹æµ‹è¯•&quot;,&quot;key value is &quot; + obj.getKey());&#125; 1234567891011Generic&lt;String&gt; generic1 = new Generic&lt;String&gt;(&quot;11111&quot;);Generic&lt;Integer&gt; generic2 = new Generic&lt;Integer&gt;(2222);Generic&lt;Float&gt; generic3 = new Generic&lt;Float&gt;(2.4f);Generic&lt;Double&gt; generic4 = new Generic&lt;Double&gt;(2.56);//è¿™ä¸€è¡Œä»£ç ç¼–è¯‘å™¨ä¼šæç¤ºé”™è¯¯ï¼Œå› ä¸ºStringç±»å‹å¹¶ä¸æ˜¯Numberç±»å‹çš„å­ç±»//showKeyValue1(generic1);showKeyValue1(generic2);showKeyValue1(generic3);showKeyValue1(generic4); å¦‚æœæˆ‘ä»¬æŠŠæ³›å‹ç±»çš„å®šä¹‰ä¹Ÿæ”¹ä¸€ä¸‹: 1234567891011public class Generic&lt;T extends Number&gt;&#123; private T key; public Generic(T key) &#123; this.key = key; &#125; public T getKey()&#123; return key; &#125;&#125; 12//è¿™ä¸€è¡Œä»£ç ä¹Ÿä¼šæŠ¥é”™ï¼Œå› ä¸ºStringä¸æ˜¯Numberçš„å­ç±»Generic&lt;String&gt; generic1 = new Generic&lt;String&gt;(&quot;11111&quot;); å†æ¥ä¸€ä¸ªæ³›å‹æ–¹æ³•çš„ä¾‹å­ï¼š 1234567//åœ¨æ³›å‹æ–¹æ³•ä¸­æ·»åŠ ä¸Šä¸‹è¾¹ç•Œé™åˆ¶çš„æ—¶å€™ï¼Œå¿…é¡»åœ¨æƒé™å£°æ˜ä¸è¿”å›å€¼ä¹‹é—´çš„&lt;T&gt;ä¸Šæ·»åŠ ä¸Šä¸‹è¾¹ç•Œï¼Œå³åœ¨æ³›å‹å£°æ˜çš„æ—¶å€™æ·»åŠ //public &lt;T&gt; T showKeyName(Generic&lt;T extends Number&gt; container)ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼š&quot;Unexpected bound&quot;public &lt;T extends Number&gt; T showKeyName(Generic&lt;T&gt; container)&#123; System.out.println(&quot;container key :&quot; + container.getKey()); T test = container.getKey(); return test;&#125; é€šè¿‡ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºï¼šæ³›å‹çš„ä¸Šä¸‹è¾¹ç•Œæ·»åŠ ï¼Œå¿…é¡»ä¸æ³›å‹çš„å£°æ˜åœ¨ä¸€èµ· ã€‚ 4.6 å…³äºæ³›å‹æ•°ç»„è¦æä¸€ä¸‹çœ‹åˆ°äº†å¾ˆå¤šæ–‡ç« ä¸­éƒ½ä¼šæèµ·æ³›å‹æ•°ç»„ï¼Œç»è¿‡æŸ¥çœ‹sunçš„è¯´æ˜æ–‡æ¡£ï¼Œåœ¨javaä¸­æ˜¯â€ä¸èƒ½åˆ›å»ºä¸€ä¸ªç¡®åˆ‡çš„æ³›å‹ç±»å‹çš„æ•°ç»„â€çš„ã€‚ ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢çš„è¿™ä¸ªä¾‹å­æ˜¯ä¸å¯ä»¥çš„ï¼š 1List&lt;String&gt;[] ls = new ArrayList&lt;String&gt;[10]; è€Œä½¿ç”¨é€šé…ç¬¦åˆ›å»ºæ³›å‹æ•°ç»„æ˜¯å¯ä»¥çš„ï¼Œå¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š 1List&lt;?&gt;[] ls = new ArrayList&lt;?&gt;[10]; è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š 1List&lt;String&gt;[] ls = new ArrayList[10]; ä¸‹é¢ä½¿ç”¨Sunçš„ä¸€ç¯‡æ–‡æ¡£çš„ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼š 1234567List&lt;String&gt;[] lsa = new List&lt;String&gt;[10]; // Not really allowed. Object o = lsa; Object[] oa = (Object[]) o; List&lt;Integer&gt; li = new ArrayList&lt;Integer&gt;(); li.add(new Integer(3)); oa[1] = li; // Unsound, but passes run time store check String s = lsa[1].get(0); // Run-time error: ClassCastException. è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºJVMæ³›å‹çš„æ“¦é™¤æœºåˆ¶ï¼Œåœ¨è¿è¡Œæ—¶JVMæ˜¯ä¸çŸ¥é“æ³›å‹ä¿¡æ¯çš„ï¼Œæ‰€ä»¥å¯ä»¥ç»™oa[1]èµ‹ä¸Šä¸€ä¸ªArrayListè€Œä¸ä¼šå‡ºç°å¼‚å¸¸ï¼Œ ä½†æ˜¯åœ¨å–å‡ºæ•°æ®çš„æ—¶å€™å´è¦åšä¸€æ¬¡ç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°ClassCastExceptionï¼Œå¦‚æœå¯ä»¥è¿›è¡Œæ³›å‹æ•°ç»„çš„å£°æ˜ï¼Œ ä¸Šé¢è¯´çš„è¿™ç§æƒ…å†µåœ¨ç¼–è¯‘æœŸå°†ä¸ä¼šå‡ºç°ä»»ä½•çš„è­¦å‘Šå’Œé”™è¯¯ï¼Œåªæœ‰åœ¨è¿è¡Œæ—¶æ‰ä¼šå‡ºé”™ã€‚ è€Œå¯¹æ³›å‹æ•°ç»„çš„å£°æ˜è¿›è¡Œé™åˆ¶ï¼Œå¯¹äºè¿™æ ·çš„æƒ…å†µï¼Œå¯ä»¥åœ¨ç¼–è¯‘æœŸæç¤ºä»£ç æœ‰ç±»å‹å®‰å…¨é—®é¢˜ï¼Œæ¯”æ²¡æœ‰ä»»ä½•æç¤ºè¦å¼ºå¾ˆå¤šã€‚ ä¸‹é¢é‡‡ç”¨é€šé…ç¬¦çš„æ–¹å¼æ˜¯è¢«å…è®¸çš„:æ•°ç»„çš„ç±»å‹ä¸å¯ä»¥æ˜¯ç±»å‹å˜é‡ï¼Œé™¤éæ˜¯é‡‡ç”¨é€šé…ç¬¦çš„æ–¹å¼ï¼Œå› ä¸ºå¯¹äºé€šé…ç¬¦çš„æ–¹å¼ï¼Œæœ€åå–å‡ºæ•°æ®æ˜¯è¦åšæ˜¾å¼çš„ç±»å‹è½¬æ¢çš„ã€‚ 1234567List&lt;?&gt;[] lsa = new List&lt;?&gt;[10]; // OK, array of unbounded wildcard type. Object o = lsa; Object[] oa = (Object[]) o; List&lt;Integer&gt; li = new ArrayList&lt;Integer&gt;(); li.add(new Integer(3)); oa[1] = li; // Correct. Integer i = (Integer) lsa[1].get(0); // OK 5. æœ€åæœ¬æ–‡ä¸­çš„ä¾‹å­ä¸»è¦æ˜¯ä¸ºäº†é˜è¿°æ³›å‹ä¸­çš„ä¸€äº›æ€æƒ³è€Œç®€å•ä¸¾å‡ºçš„ï¼Œå¹¶ä¸ä¸€å®šæœ‰ç€å®é™…çš„å¯ç”¨æ€§ã€‚å¦å¤–ï¼Œä¸€æåˆ°æ³›å‹ï¼Œç›¸ä¿¡å¤§å®¶ç”¨åˆ°æœ€å¤šçš„å°±æ˜¯åœ¨é›†åˆä¸­ï¼Œå…¶å®ï¼Œåœ¨å®é™…çš„ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œè‡ªå·±å¯ä»¥ä½¿ç”¨æ³›å‹å»ç®€åŒ–å¼€å‘ï¼Œä¸”èƒ½å¾ˆå¥½çš„ä¿è¯ä»£ç è´¨é‡ã€‚ å‚è€ƒèµ„æ–™ java æ³›å‹è¯¦è§£-ç»å¯¹æ˜¯å¯¹æ³›å‹æ–¹æ³•è®²è§£æœ€è¯¦ç»†çš„ï¼Œæ²¡æœ‰ä¹‹ä¸€","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"æ³›å‹","slug":"æ³›å‹","permalink":"https://guoshunfa.com/tags/%E6%B3%9B%E5%9E%8B/"}]},{"title":"Javaæµ‹è¯• Assertæ–­è¨€","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Javaæµ‹è¯•-Assertæ–­è¨€","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.278Z","comments":true,"path":"2020/07/Javaæµ‹è¯•-Assertæ–­è¨€/","link":"","permalink":"https://guoshunfa.com/2020/07/Java%E6%B5%8B%E8%AF%95-Assert%E6%96%AD%E8%A8%80/","excerpt":"","text":"åœ¨ JDK 1.4ä¹‹å‰ï¼Œå¼€å‘äººå‘˜ç»å¸¸ä½¿ç”¨æ³¨é‡Šæ¥è®°å½•å…³äºç¨‹åºæ­£ç¡®æ€§çš„å‡è®¾ã€‚ç„¶è€Œï¼Œæ³¨é‡Šä½œä¸ºæµ‹è¯•å’Œè°ƒè¯•å‡è®¾çš„æœºåˆ¶æ˜¯æ— ç”¨çš„ã€‚ç¼–è¯‘å™¨å¿½ç•¥æ³¨é‡Šï¼Œå› æ­¤æ— æ³•ä½¿ç”¨å®ƒä»¬è¿›è¡Œ bug æ£€æµ‹ã€‚å¼€å‘äººå‘˜åœ¨æ›´æ”¹ä»£ç æ—¶ä¹Ÿç»å¸¸ä¸æ›´æ–°æ³¨é‡Šã€‚ åœ¨ JDK 1.4ä¸­ï¼Œæ–­è¨€è¢«å¼•å…¥ä½œä¸ºæµ‹è¯•å’Œè°ƒè¯•ä»£ç å‡è®¾çš„æ–°æœºåˆ¶ã€‚å®è´¨ä¸Šï¼Œæ–­è¨€æ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œçš„å¯ç¼–è¯‘å®ä½“ï¼Œå‡è®¾ä½ å·²ç»ä¸ºç¨‹åºæµ‹è¯•å¯ç”¨äº†å®ƒä»¬ã€‚å¯ä»¥é€šè¿‡ç¼–å†™æ–­è¨€æ¥é€šçŸ¥ bug å‘ç”Ÿçš„åœ°æ–¹ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘è°ƒè¯•å¤±è´¥ç¨‹åºçš„æ—¶é—´ã€‚ 1. ç¼–å†™æ–­è¨€çš„è¡¨è¾¾å¼1assert BooleanExpr; å¦‚æœ BooleanExpr çš„è®¡ç®—ç»“æœä¸º trueï¼Œåˆ™ä¸ä¼šå‘ç”Ÿä»»ä½•äº‹æƒ…ï¼Œå¹¶ç»§ç»­æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå¦‚æœè¡¨è¾¾å¼è®¡ç®—ç»“æœä¸º falseï¼Œé‚£ä¹ˆå°†æŠ›å‡º AssertionError 1.1. ä¸¾ä¸ªä¾‹å­1234public static void main(String[] args) &#123; int a = 10; assert a&gt;100;//false&#125; 2. è¿è¡Œåæ²¡æœ‰ååº”??æœ‰çš„å°ä¼™ä¼´å‘ç°è‡ªå·±çš„IDEå¹¶æ²¡æœ‰æŠ›å‡ºError è¿™æ˜¯å› ä¸ºæ²¡æœ‰æ˜¾ç¤ºå¼€å¯,å¯ç”¨æ–­è¨€ å¼€å¯æ–¹æ³•: vm options åŠ å…¥ -ea æ­¤æ—¶æˆ‘ä»¬è¿è¡Œé¡¹ç›® å‘ç°æŠ›å‡ºäº†å¼‚å¸¸ 12Exception in thread &quot;main&quot; java.lang.AssertionError at Scratch.main(scratch_4.java:4) 3. å¸Œæœ›è·å¾—æ›´å¤šä¿¡æ¯?æ­¤æ—¶æˆ‘ä»¬å·²ç»çŸ¥é“äº†æ–­è¨€çš„åŸºæœ¬ç”¨æ³• ä½†æ˜¯æŠ›å‡ºErroråæˆ‘ä»¬å¹¶ä¸çŸ¥é“æ˜¯ä»€ä¹ˆé—®é¢˜å¯¼è‡´çš„ è¿˜éœ€è¦å»ç¿»çœ‹ä»£ç æ‰¾åˆ°æŠ¥é”™çš„åœ°æ–¹, å¦‚æœæˆ‘ä»¬å¸Œæœ›è·å¾—æ›´å¤šæœ‰ç”¨çš„ä¿¡æ¯ æˆ‘ä»¬å¯ä»¥è¿™æ ·ä¿®æ”¹Assertè¯­å¥: 1assert BooleanExpr : expr; expr æ˜¯ä»»ä½•å¯ä»¥è¿”å›å€¼çš„è¡¨è¾¾å¼(åŒ…æ‹¬æ–¹æ³•è°ƒç”¨)ä½†æ˜¯ä¸èƒ½è°ƒç”¨å…·æœ‰ void è¿”å›ç±»å‹çš„æ–¹æ³•ã€‚ä¸€ä¸ªæœ‰ç”¨çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨å®ƒæ¥æè¿°å¤±è´¥çš„åŸå›  3.1. ä¸¾ä¸ªä¾‹å­1234public static void main(String[] args) &#123; int a = 10; assert a&gt;100 : &quot;a &lt; 100&quot;; &#125; è¿è¡Œ: 12Exception in thread &quot;main&quot; java.lang.AssertionError: a &lt; 100 at Scratch.main(scratch_4.java:5) æ— è®ºå“ªä¸ªä¾‹å­ï¼Œåœ¨ä¸ä½¿ç”¨-ea (å¯ç”¨æ–­è¨€)é€‰é¡¹çš„æƒ…å†µä¸‹è¿è¡Œéƒ½ä¸ä¼šäº§ç”Ÿè¾“å‡ºã€‚å½“æ–­è¨€æœªå¯ç”¨æ—¶ï¼Œå®ƒä»¬ä¸ä¼šæ‰§è¡Œï¼Œå°½ç®¡å®ƒä»¬ä»ç„¶å­˜åœ¨äºç±»æ–‡ä»¶ä¸­ã€‚ 4. å‰ç½®æ¡ä»¶å’Œåç½®æ¡ä»¶å‰ç½®æ¡ä»¶: æ˜¯åœ¨æ‰§è¡ŒæŸäº›ä»£ç ä¹‹å‰å¿…é¡»æ±‚å€¼ä¸º true çš„æ¡ä»¶ åç½®æ¡ä»¶: æ˜¯åœ¨æ‰§è¡ŒæŸäº›ä»£ç åå¿…é¡»æ±‚å€¼ä¸º true çš„æ¡ä»¶ 4.1. å‰ç½®æ¡ä»¶å‰ç½®æ¡ä»¶æ£€æŸ¥: 12345678910111213141516171819202122232425262728293031323334353637383940import java.io.FileInputStream;import java.io.IOException;import java.io.InputStream;class PNG &#123; /** * Create a PNG instance, read specified PNG file, and decode * it into suitable structures. * * @param filespec path and name of PNG file to read * * @throws NullPointerException when &lt;code&gt;filespec&lt;/code&gt; is * &lt;code&gt;null&lt;/code&gt; */ PNG(String filespec) throws IOException &#123; //åœ¨éç§æœ‰æ„é€ æ–¹æ³•ä¸­ ä½¿ç”¨å‰ç½®æ¡ä»¶ if (filespec == null) throw new NullPointerException(&quot;filespec is null&quot;); try (FileInputStream fis = new FileInputStream(filespec)) &#123; readHeader(fis); &#125; &#125; private void readHeader(InputStream is) throws IOException &#123; //åœ¨ç§æœ‰æ–¹æ³•ä¸­ä½¿ç”¨å‰ç½®æ¡ä»¶æ£€æŸ¥ assert is != null : &quot;null passed to is&quot;; &#125; &#125; class Scratch &#123; public static void main(String[] args) throws IOException &#123; PNG png = new PNG((args.length == 0) ? null : args[0]); &#125; &#125; 4.2. åç½®æ¡ä»¶åç½®æ¡ä»¶æ£€æŸ¥: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051public class AssertDemo&#123; public static void main(String[] args) &#123; int[] array = &#123; 20, 91, -6, 16, 0, 7, 51, 42, 3, 1 &#125;; sort(array); for (int element: array) System.out.printf(&quot;%d &quot;, element); System.out.println(); &#125; private static boolean isSorted(int[] x) &#123; for (int i = 0; i &lt; x.length - 1; i++) if (x[i] &gt; x[i + 1]) return false; return true; &#125; private static void sort(int[] x) &#123; int j, a; // For all integer values except the leftmost value ... for (int i = 1; i &lt; x.length; i++) &#123; // Get integer value a. a = x[i]; // Get index of a. This is the initial insert position, which is // used if a is larger than all values in the sorted section. j = i; // While values exist to the left of a&#x27;s insert position and the // value immediately to the left of that insert position is // numerically greater than a&#x27;s value ... while (j &gt; 0 &amp;&amp; x[j - 1] &gt; a) &#123; // Shift left value -- x[j - 1] -- one position to its right -- // x[j]. x[j] = x[j - 1]; // Update insert position to shifted value&#x27;s original position // (one position to the left). j--; &#125; // Insert a at insert position (which is either the initial insert // position or the final insert position), where a is greater than // or equal to all values to its left. x[j] = a; &#125; //åœ¨ sort ()è¿”å›ç»™å®ƒçš„è°ƒç”¨è€…ä¹‹å‰ï¼Œæˆ‘ä½¿ç”¨ assert æ£€æŸ¥ x è¢«æ’åºçš„åç½®æ¡ä»¶ã€‚ assert isSorted(x): &quot;array not sorted&quot;; &#125;&#125; 5. é™·é˜±assertå…³é”®å­—ç”¨æ³•ç®€å•ï¼Œä½†æ˜¯ä½¿ç”¨assertå¾€å¾€ä¼šè®©ä½ é™·å…¥è¶Šæ¥è¶Šæ·±çš„é™·é˜±ä¸­ã€‚åº”é¿å…ä½¿ç”¨ã€‚ç¬”è€…ç»è¿‡ç ”ç©¶ï¼Œæ€»ç»“äº†ä»¥ä¸‹åŸå› ï¼š 1ã€ assertå…³é”®å­—éœ€è¦åœ¨è¿è¡Œæ—¶å€™æ˜¾å¼å¼€å¯æ‰èƒ½ç”Ÿæ•ˆï¼Œå¦åˆ™ä½ çš„æ–­è¨€å°±æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚è€Œç°åœ¨ä¸»æµçš„Java IDEå·¥å…·é»˜è®¤éƒ½æ²¡æœ‰å¼€å¯-eaæ–­è¨€æ£€æŸ¥åŠŸèƒ½ã€‚è¿™å°±æ„å‘³ç€ä½ å¦‚æœä½¿ç”¨IDEå·¥å…·ç¼–ç ï¼Œè°ƒè¯•è¿è¡Œæ—¶å€™ä¼šæœ‰ä¸€å®šçš„éº»çƒ¦ã€‚å¹¶ä¸”ï¼Œå¯¹äºJava Webåº”ç”¨ï¼Œç¨‹åºä»£ç éƒ½æ˜¯éƒ¨ç½²åœ¨å®¹å™¨é‡Œé¢ï¼Œä½ æ²¡æ³•ç›´æ¥å»æ§åˆ¶ç¨‹åºçš„è¿è¡Œï¼Œå¦‚æœä¸€å®šè¦å¼€å¯-eaçš„å¼€å…³ï¼Œåˆ™éœ€è¦æ›´æ”¹Webå®¹å™¨çš„è¿è¡Œé…ç½®å‚æ•°ã€‚è¿™å¯¹ç¨‹åºçš„ç§» æ¤å’Œéƒ¨ç½²éƒ½å¸¦æ¥å¾ˆå¤§çš„ä¸ä¾¿ã€‚ 2ã€ç”¨assertä»£æ›¿ifæ˜¯é™·é˜±ä¹‹äºŒã€‚assertçš„åˆ¤æ–­å’Œifè¯­å¥å·®ä¸å¤šï¼Œä½†ä¸¤è€…çš„ä½œç”¨æœ‰ç€æœ¬è´¨çš„åŒºåˆ«ï¼šassertå…³é”®å­—æœ¬æ„ä¸Šæ˜¯ä¸ºæµ‹è¯• è°ƒè¯•ç¨‹åºæ—¶ä½¿ç”¨çš„ï¼Œä½†å¦‚æœä¸å°å¿ƒç”¨assertæ¥æ§åˆ¶äº†ç¨‹åºçš„ä¸šåŠ¡æµç¨‹ï¼Œé‚£åœ¨æµ‹è¯•è°ƒè¯•ç»“æŸåå»æ‰assertå…³é”®å­—å°±æ„å‘³ç€ä¿®æ”¹äº†ç¨‹åºçš„æ­£å¸¸çš„é€»è¾‘ã€‚ 3ã€assertæ–­è¨€å¤±è´¥å°†é¢ä¸´ç¨‹åºçš„é€€å‡ºã€‚è¿™åœ¨ä¸€ä¸ªç”Ÿäº§ç¯å¢ƒä¸‹çš„åº”ç”¨æ˜¯ç»ä¸èƒ½å®¹å¿çš„ã€‚ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡å¼‚å¸¸å¤„ç†æ¥è§£å†³ç¨‹åºä¸­æ½œåœ¨çš„é”™è¯¯ã€‚ä½†æ˜¯ä½¿ç”¨æ–­è¨€å°±å¾ˆå±é™©ï¼Œä¸€æ—¦å¤±è´¥ç³»ç»Ÿå°±æŒ‚äº†ã€‚ 6. æ€»ç»“assertæ—¢ç„¶æ˜¯ä¸ºäº†è°ƒè¯•æµ‹è¯•ç¨‹åºç”¨ï¼Œä¸åœ¨æ­£å¼ç”Ÿäº§ç¯å¢ƒä¸‹ç”¨ï¼Œé‚£åº”è¯¥è€ƒè™‘æ›´å¥½çš„æµ‹è¯•JUintæ¥ä»£æ›¿å…¶åšç”¨ï¼ŒJUintç›¸å¯¹assertå…³é”®çš„æ‰€æä¾›çš„åŠŸèƒ½æ˜¯æœ‰è¿‡ä¹‹è€Œæ— ä¸åŠã€‚å½“ç„¶å®Œå…¨å¯ä»¥é€šè¿‡IDE debugæ¥è¿›è¡Œè°ƒè¯•æµ‹è¯• å› æ­¤ï¼Œåº”å½“é¿å…åœ¨Javaä¸­ä½¿ç”¨assertå…³é”®å­—ï¼Œé™¤éå“ªä¸€å¤©Javaé»˜è®¤æ”¯æŒå¼€å¯-eaçš„å¼€å…³ï¼Œè¿™æ—¶å€™å¯ä»¥è€ƒè™‘ã€‚å¯¹æ¯”ä¸€ä¸‹ï¼Œassertèƒ½ç»™ä½ å¸¦æ¥å¤šå°‘å¥½å¤„ï¼Œå¤šå°‘éº»çƒ¦ï¼Œè¿™æ˜¯æˆ‘ä»¬é€‰æ‹©æ˜¯å¦ä½¿ç”¨çš„çš„åŸåˆ™,è¯»è€…å¯ä»¥è‡ªè¡Œå–èˆ.","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"https://guoshunfa.com/tags/%E6%B5%8B%E8%AF%95/"},{"name":"oracle","slug":"oracle","permalink":"https://guoshunfa.com/tags/oracle/"},{"name":"java","slug":"java","permalink":"https://guoshunfa.com/tags/java/"},{"name":"assert","slug":"assert","permalink":"https://guoshunfa.com/tags/assert/"},{"name":"æ–­è¨€","slug":"æ–­è¨€","permalink":"https://guoshunfa.com/tags/%E6%96%AD%E8%A8%80/"}]},{"title":"Javaè‡ªå¸¦ç»„ä»¶ å‚æ•°æ ¡éªŒValidator","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Javaè‡ªå¸¦ç»„ä»¶-å‚æ•°æ ¡éªŒValidator","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.278Z","comments":true,"path":"2020/07/Javaè‡ªå¸¦ç»„ä»¶-å‚æ•°æ ¡éªŒValidator/","link":"","permalink":"https://guoshunfa.com/2020/07/Java%E8%87%AA%E5%B8%A6%E7%BB%84%E4%BB%B6-%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8CValidator/","excerpt":"","text":"åº”ç”¨åœ¨æ‰§è¡Œä¸šåŠ¡é€»è¾‘ä¹‹å‰ï¼Œå¿…é¡»é€šè¿‡æ ¡éªŒä¿è¯æ¥å—åˆ°çš„è¾“å…¥æ•°æ®æ˜¯åˆæ³•æ­£ç¡®çš„ï¼Œä½†å¾ˆå¤šæ—¶å€™åŒæ ·çš„æ ¡éªŒå‡ºç°äº†å¤šæ¬¡ï¼Œåœ¨ä¸åŒçš„å±‚ï¼Œä¸åŒçš„æ–¹æ³•ä¸Šï¼Œå¯¼è‡´ä»£ç å†—ä½™ï¼Œæµªè´¹æ—¶é—´ï¼Œè¿åDRYåŸåˆ™ã€‚ æ¯ä¸€ä¸ªæ§åˆ¶å™¨éƒ½è¦æ ¡éªŒ è¿‡å¤šçš„æ ¡éªŒå‚æ•°ä¼šå¯¼è‡´ä»£ç å¤ªé•¿ ä»£ç çš„å¤ç”¨ç‡å¤ªå·®ï¼ŒåŒæ ·çš„ä»£ç å¦‚æœå‡ºç°å¤šæ¬¡ï¼Œåœ¨ä¸šåŠ¡è¶Šæ¥è¶Šå¤æ‚çš„æƒ…å†µä¸‹ï¼Œç»´æŠ¤æˆæœ¬å‘ˆæŒ‡æ•°ä¸Šå‡ã€‚ å¯ä»¥è€ƒè™‘æŠŠæ ¡éªŒçš„ä»£ç å°è£…èµ·æ¥ï¼Œæ¥è§£å†³å‡ºç°çš„è¿™äº›é—®é¢˜ã€‚ @Validatedå’Œ@Validæ­é…ä½¿ç”¨ï¼Œ@Validatedç”¨æ¥æ ‡æ³¨è®©Springæ‰«æï¼Œ@Validç”¨æ¥æ ‡æ³¨éœ€è¦éªŒè¯çš„å¯¹è±¡ã€‚ 1. ç”¨æ³•å®ä¾‹maven 12345&lt;dependency&gt; &lt;groupId&gt;org.hibernate&lt;/groupId&gt; &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt; &lt;version&gt;5.2.4.Final&lt;/version&gt;&lt;/dependency&gt; 1.1. æ ¡éªŒå¯¹è±¡ ç¼–å†™æ ¡éªŒå¯¹è±¡ 123456789101112public class User &#123; // åå­—ä¸å…è®¸ä¸ºç©ºï¼Œå¹¶ä¸”åå­—çš„é•¿åº¦åœ¨2ä½åˆ°30ä½ä¹‹é—´ // å¦‚æœåå­—çš„é•¿åº¦æ ¡éªŒä¸é€šè¿‡ï¼Œé‚£ä¹ˆæç¤ºé”™è¯¯ä¿¡æ¯ @NotNull @Size(min=2, max=30,message = &quot;è¯·æ£€æŸ¥åå­—çš„é•¿åº¦æ˜¯å¦æœ‰é—®é¢˜&quot;) private String name; // ä¸å…è®¸ä¸ºç©ºï¼Œå¹¶ä¸”å¹´é¾„çš„æœ€å°å€¼ä¸º18 @NotNull @Min(18) private Integer age;&#125; åˆ›å»ºæ§åˆ¶å™¨ 123456// 1. è¦æ ¡éªŒçš„å‚æ•°å‰ï¼ŒåŠ ä¸Š@Validæ³¨è§£// 2. ç´§éšå…¶åçš„ï¼Œè·Ÿä¸Šä¸€ä¸ªBindingResultæ¥å­˜å‚¨æ ¡éªŒä¿¡æ¯@RequestMapping(&quot;/test1&quot;)public Object test1(@Valid User user) &#123; return &quot;OK&quot;;&#125; 1.2. ç›´æ¥æ ¡éªŒå‚æ•°12345678910111213@Controller@Validated@RequestMapping(value = &quot;validator&quot;)public class ParameterValidatorDemoController &#123; @ResponseBody @GetMapping(value = &quot;simple&quot;) public String validateParameter(@Valid @Size(min = 1, max = 5) String name) &#123; System.out.println(name); return &quot;OK&quot;; &#125;&#125; ç±»ä¸Šçš„**@Validated**æ³¨è§£åˆ™å‘Šè¯‰springéœ€è¦æ‰«æè¿™ä¸ªç±»ï¼Œæ¥æ£€æŸ¥å…¶ä¸­çš„constraintæ³¨è§£ã€‚ 2. å¸¸è§çš„æ ¡éªŒæ³¨è§£ javax.validation.constraints @Null è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º null @NotNull è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸ä¸º null @AssertTrue è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º true @AssertFalse è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º false @Min(value) è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼ @Max(value) è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼ @DecimalMin(value) è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼ @DecimalMax(value) è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼ @Size(max&#x3D;, min&#x3D;) è¢«æ³¨é‡Šçš„å…ƒç´ çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†… @Digits (integer, fraction) è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»åœ¨å¯æ¥å—çš„èŒƒå›´å†… @Past è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ @Future è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ @Pattern(regex&#x3D;,flag&#x3D;) è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ @NotBlank(message &#x3D;) éªŒè¯å­—ç¬¦ä¸²énullï¼Œä¸”é•¿åº¦å¿…é¡»å¤§äº0 @Email è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ç”µå­é‚®ç®±åœ°å€ @Length(min&#x3D;,max&#x3D;) è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†… @NotEmpty è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¿…é¡»éç©º @Range(min&#x3D;,max&#x3D;,message&#x3D;) è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»åœ¨åˆé€‚çš„èŒƒå›´å†… 3. è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£æœ‰æ—¶å€™ï¼Œç¬¬ä¸‰æ–¹åº“ä¸­å¹¶æ²¡æœ‰æˆ‘ä»¬æƒ³è¦çš„æ ¡éªŒç±»å‹ï¼Œå¥½åœ¨ç³»ç»Ÿæä¾›äº†å¾ˆå¥½çš„æ‰©å±•èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰æ£€éªŒã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³æ ¡éªŒç”¨æˆ·çš„æ‰‹æœºæ ¼å¼ï¼Œå†™æ‰‹æœºå·ç æ ¡éªŒå™¨ 1ã€ç¼–å†™æ ¡éªŒæ³¨è§£ 1234567891011121314151617// æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹·è´ç³»ç»Ÿå†…çš„æ³¨è§£å¦‚@Minï¼Œå¤åˆ¶åˆ°æˆ‘ä»¬æ–°çš„æ³¨è§£ä¸­ï¼Œç„¶åæ ¹æ®éœ€è¦ä¿®æ”¹ã€‚@Target(&#123;METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER&#125;)@Retention(RUNTIME)@Documented//æ³¨è§£çš„å®ç°ç±»ã€‚@Constraint(validatedBy = &#123;IsMobileValidator.class&#125;)public @interface IsMobile &#123; //æ ¡éªŒé”™è¯¯çš„é»˜è®¤ä¿¡æ¯ String message() default &quot;æ‰‹æœºå·ç æ ¼å¼æœ‰é—®é¢˜&quot;; //æ˜¯å¦å¼ºåˆ¶æ ¡éªŒ boolean isRequired() default false; Class&lt;?&gt;[] groups() default &#123;&#125;; Class&lt;? extends Payload&gt;[] payload() default &#123;&#125;;&#125; 2ã€ç¼–å†™å…·ä½“çš„å®ç°ç±»æˆ‘ä»¬çŸ¥é“æ³¨è§£åªæ˜¯ä¸€ä¸ªæ ‡è®°ï¼ŒçœŸæ­£çš„é€»è¾‘è¿˜è¦åœ¨ç‰¹å®šçš„ç±»ä¸­å®ç°ï¼Œä¸Šä¸€æ­¥çš„æ³¨è§£æŒ‡å®šäº†å®ç°æ ¡éªŒåŠŸèƒ½çš„ç±»ä¸ºIsMobileValidatorã€‚ 12345678910111213141516171819202122232425262728293031323334353637// è‡ªå®šä¹‰æ³¨è§£ä¸€å®šè¦å®ç°ConstraintValidatoræ¥å£å¥¥ï¼Œé‡Œé¢çš„ä¸¤ä¸ªå‚æ•°// ç¬¬ä¸€ä¸ªä¸º å…·ä½“è¦æ ¡éªŒçš„æ³¨è§£// ç¬¬äºŒä¸ªä¸º æ ¡éªŒçš„å‚æ•°ç±»å‹public class IsMobileValidator implements ConstraintValidator&lt;IsMobile, String&gt; &#123; private boolean required = false; private static final Pattern mobile_pattern = Pattern.compile(&quot;1\\\\d&#123;10&#125;&quot;); //å·¥å…·æ–¹æ³•ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯æ‰‹æœºå· public static boolean isMobile(String src) &#123; if (StringUtils.isEmpty(src)) &#123; return false; &#125; Matcher m = mobile_pattern.matcher(src); return m.matches(); &#125; @Override public void initialize(IsMobile constraintAnnotation) &#123; required = constraintAnnotation.isRequired(); &#125; @Override public boolean isValid(String phone, ConstraintValidatorContext constraintValidatorContext) &#123; //æ˜¯å¦ä¸ºæ‰‹æœºå·çš„å®ç° if (required) &#123; return isMobile(phone); &#125; else &#123; if (StringUtils.isEmpty(phone)) &#123; return true; &#125; else &#123; return isMobile(phone); &#125; &#125; &#125; &#125; 3ã€æµ‹è¯•è‡ªå®šä¹‰æ³¨è§£çš„åŠŸèƒ½ 1234567891011121314@Datapublic class User &#123; @NotNull @Size(min=2, max=30,message = &quot;è¯·æ£€æŸ¥åå­—çš„é•¿åº¦æ˜¯å¦æœ‰é—®é¢˜&quot;) private String name; @NotNull @Min(18) private Integer age; //è¿™é‡Œæ˜¯æ–°æ·»åŠ çš„æ³¨è§£å¥¥ @IsMobile private String phone;&#125;","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"Validator","slug":"Validator","permalink":"https://guoshunfa.com/tags/Validator/"}]},{"title":"Javaè™šæ‹Ÿæœº JVMç†è§£","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Javaè™šæ‹Ÿæœº-JVMç†è§£","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.278Z","comments":true,"path":"2020/07/Javaè™šæ‹Ÿæœº-JVMç†è§£/","link":"","permalink":"https://guoshunfa.com/2020/07/Java%E8%99%9A%E6%8B%9F%E6%9C%BA-JVM%E7%90%86%E8%A7%A3/","excerpt":"","text":"ä¸€ã€ä»€ä¹ˆæ˜¯JVMJVMæ˜¯Java Virtual Machineï¼ˆJava è™šæ‹Ÿæœºï¼‰çš„ç¼©å†™ï¼ŒJVMæ˜¯ä¸€ç§ç”¨äºè®¡ç®—è®¾å¤‡çš„è§„èŒƒï¼Œå®ƒæ˜¯ä¸€ä¸ªè™šæ„å‡ºæ¥çš„è®¡ç®—æœºï¼Œæ˜¯é€šè¿‡åœ¨å®é™…çš„è®¡ç®—æœºä¸Šä»¿çœŸæ¨¡æ‹Ÿå„ç§è®¡ç®—æœºåŠŸèƒ½æ¥å®ç°çš„ã€‚ Javaè¯­è¨€çš„ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹ç‚¹å°±æ˜¯å¹³å°æ— å…³æ€§ã€‚è€Œä½¿ç”¨Javaè™šæ‹Ÿæœºæ˜¯å®ç°è¿™ä¸€ç‰¹ç‚¹çš„å…³é”®ã€‚ä¸€èˆ¬çš„é«˜çº§è¯­è¨€å¦‚æœè¦åœ¨ä¸åŒçš„å¹³å°ä¸Šè¿è¡Œï¼Œè‡³å°‘éœ€è¦ç¼–è¯‘æˆä¸åŒçš„ç›®æ ‡ä»£ç ã€‚è€Œå¼•å…¥Javaè¯­è¨€è™šæ‹Ÿæœºåï¼ŒJavaè¯­è¨€åœ¨ä¸åŒå¹³å°ä¸Šè¿è¡Œæ—¶ä¸éœ€è¦é‡æ–°ç¼–è¯‘ã€‚Javaè¯­è¨€ä½¿ç”¨Javaè™šæ‹Ÿæœºå±è”½äº†ä¸å…·ä½“å¹³å°ç›¸å…³çš„ä¿¡æ¯ï¼Œä½¿å¾—Javaè¯­è¨€ç¼–è¯‘ç¨‹åºåªéœ€ç”Ÿæˆåœ¨Javaè™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ç›®æ ‡ä»£ç ï¼ˆå­—èŠ‚ç ï¼‰ï¼Œå°±å¯ä»¥åœ¨å¤šç§å¹³å°ä¸Šä¸åŠ ä¿®æ”¹åœ°è¿è¡Œã€‚Javaè™šæ‹Ÿæœºåœ¨æ‰§è¡Œå­—èŠ‚ç æ—¶ï¼ŒæŠŠå­—èŠ‚ç è§£é‡Šæˆå…·ä½“å¹³å°ä¸Šçš„æœºå™¨æŒ‡ä»¤æ‰§è¡Œã€‚è¿™å°±æ˜¯Javaçš„èƒ½å¤Ÿâ€œä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œâ€çš„åŸå› ã€‚ äºŒã€JVMæ€»ä½“æ¦‚è¿°JVMæ€»ä½“ä¸Šæ˜¯ç”±ç±»è£…è½½å­ç³»ç»Ÿï¼ˆClassLoaderï¼‰ã€è¿è¡Œæ—¶æ•°æ®åŒºã€æ‰§è¡Œå¼•æ“ã€åƒåœ¾æ”¶é›†è¿™å››ä¸ªéƒ¨åˆ†ç»„æˆã€‚å…¶ä¸­æˆ‘ä»¬æœ€ä¸ºå…³æ³¨çš„è¿è¡Œæ—¶æ•°æ®åŒºï¼Œä¹Ÿå°±æ˜¯JVMçš„å†…å­˜éƒ¨åˆ†åˆ™æ˜¯ç”±æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ã€JAVAå †ï¼ˆJava Heapï¼‰ã€è™šæ‹Ÿæœºæ ˆï¼ˆJVM Stackï¼‰ã€ç¨‹åºè®¡æ•°å™¨ã€æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰è¿™å‡ éƒ¨åˆ†ç»„æˆã€‚ ä¸‰ã€JVMä½“ç³»ç»“æ„ 3.1 ç±»è£…è½½å­ç³»ç»ŸClass Loaderç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½.classæ–‡ä»¶ï¼Œclassæ–‡ä»¶åœ¨æ–‡ä»¶å¼€å¤´æœ‰ç‰¹å®šçš„æ–‡ä»¶æ ‡ç¤ºï¼Œå¹¶ä¸”ClassLoaderè´Ÿè´£classæ–‡ä»¶çš„åŠ è½½ç­‰ï¼Œè‡³äºå®ƒæ˜¯å¦å¯ä»¥è¿è¡Œï¼Œåˆ™ç”±Execution Engineå†³å®šã€‚ 3.2 è¿è¡Œæ—¶æ•°æ®åŒº&#x3D;&#x3D;æ ˆç®¡è¿è¡Œï¼Œå †ç®¡å­˜å‚¨ã€‚&#x3D;&#x3D;JVMè°ƒä¼˜ä¸»è¦æ˜¯ä¼˜åŒ–Javaå †å’Œæ–¹æ³•åŒºã€‚ 3.2.1 æ–¹æ³•åŒº(Method Area)æ–¹æ³•åŒºæ˜¯å„çº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œå®ƒç”¨äºå­˜å‚¨å·²è¢«JVMåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€è¿è¡Œæ—¶å¸¸é‡æ± ç­‰æ•°æ®ã€‚ 3.2.2 Javaå †(Java Heap)Javaå †æ˜¯å„çº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œåœ¨JVMå¯åŠ¨æ—¶åˆ›å»ºï¼Œè¿™å—åŒºåŸŸæ˜¯JVMä¸­æœ€å¤§çš„ï¼Œ ç”¨äºå­˜å‚¨åº”ç”¨çš„å¯¹è±¡å’Œæ•°ç»„ï¼Œä¹Ÿæ˜¯GCä¸»è¦çš„å›æ”¶åŒºï¼Œä¸€ä¸ª JVM å®ä¾‹åªå­˜åœ¨ä¸€ä¸ªå †å†…å­˜ï¼Œå †å†…å­˜çš„å¤§å°æ˜¯å¯ä»¥è°ƒèŠ‚çš„ã€‚ç±»åŠ è½½å™¨è¯»å–äº†ç±»æ–‡ä»¶åï¼Œéœ€è¦æŠŠç±»ã€æ–¹æ³•ã€å¸¸å˜é‡æ”¾åˆ°å †å†…å­˜ä¸­ï¼Œä»¥æ–¹ä¾¿æ‰§è¡Œå™¨æ‰§è¡Œï¼Œå †å†…å­˜åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šæ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£ã€‚ è¯´æ˜ï¼š Jdk1.6åŠä¹‹å‰ï¼šå¸¸é‡æ± åˆ†é…åœ¨æ°¸ä¹…ä»£ ã€‚ Jdk1.7ï¼šæœ‰ï¼Œä½†å·²ç»é€æ­¥â€œå»æ°¸ä¹…ä»£â€ ã€‚ Jdk1.8åŠä¹‹åï¼šæ— æ°¸ä¹…ä»£ï¼Œæ”¹ç”¨å…ƒç©ºé—´ä»£æ›¿(java.lang.OutOfMemoryError: PermGen space,è¿™ç§é”™è¯¯å°†ä¸ä¼šå‡ºç°åœ¨JDK1.8ä¸­)ã€‚ 3.2.3 Javaæ ˆ(JVM Stack)\\1) æ ˆæ˜¯ä»€ä¹ˆ Javaæ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œæ˜¯åœ¨çº¿ç¨‹åˆ›å»ºæ—¶åˆ›å»ºï¼Œå®ƒçš„ç”Ÿå‘½æœŸæ˜¯è·Ÿéšçº¿ç¨‹çš„ç”Ÿå‘½æœŸï¼Œçº¿ç¨‹ç»“æŸæ ˆå†…å­˜ä¹Ÿå°±é‡Šæ”¾ï¼Œå¯¹äºæ ˆæ¥è¯´ä¸å­˜åœ¨åƒåœ¾å›æ”¶é—®é¢˜ï¼Œåªè¦çº¿ç¨‹ä¸€ç»“æŸè¯¥æ ˆå°±Overï¼Œç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹ä¸€è‡´ã€‚åŸºæœ¬ç±»å‹çš„å˜é‡å’Œå¯¹è±¡çš„å¼•ç”¨å˜é‡éƒ½æ˜¯åœ¨å‡½æ•°çš„æ ˆå†…å­˜ä¸­åˆ†é…ã€‚ \\2) æ ˆå­˜å‚¨ä»€ä¹ˆ æ¯ä¸ªæ–¹æ³•æ‰§è¡Œçš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œæ ˆå¸§ä¸­ä¸»è¦å­˜å‚¨3ç±»æ•°æ®ï¼š å±€éƒ¨å˜é‡è¡¨ï¼šè¾“å…¥å‚æ•°å’Œè¾“å‡ºå‚æ•°ä»¥åŠæ–¹æ³•å†…çš„å˜é‡ï¼› æ ˆæ“ä½œï¼šè®°å½•å‡ºæ ˆå’Œå…¥æ ˆçš„æ“ä½œï¼› æ ˆå¸§æ•°æ®ï¼šåŒ…æ‹¬ç±»æ–‡ä»¶ã€æ–¹æ³•ç­‰ç­‰ã€‚ \\3) æ ˆè¿è¡ŒåŸç† æ ˆä¸­çš„æ•°æ®éƒ½æ˜¯ä»¥æ ˆå¸§çš„æ ¼å¼å­˜åœ¨ï¼Œæ ˆå¸§æ˜¯ä¸€ä¸ªå†…å­˜åŒºå—ï¼Œæ˜¯ä¸€ä¸ªæ•°æ®é›†ï¼Œæ˜¯ä¸€ä¸ªæœ‰å…³æ–¹æ³•å’Œè¿è¡ŒæœŸæ•°æ®çš„æ•°æ®é›†ã€‚æ¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨æ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚ \\4) æœ¬åœ°æ–¹æ³•æ ˆ(Native Method Stack) æœ¬åœ°æ–¹æ³•æ ˆå’ŒJVMæ ˆå‘æŒ¥çš„ä½œç”¨éå¸¸ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼ŒåŒºåˆ«æ˜¯JVMæ ˆä¸ºJVMæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆä¸ºJVMä½¿ç”¨åˆ°çš„Nativeæ–¹æ³•æœåŠ¡ã€‚å®ƒçš„å…·ä½“åšæ³•æ˜¯åœ¨æœ¬åœ°æ–¹æ³•æ ˆä¸­ç™»è®°nativeæ–¹æ³•ï¼Œåœ¨æ‰§è¡Œå¼•æ“æ‰§è¡Œæ—¶åŠ è½½Native Liberies.æœ‰çš„è™šæ‹Ÿæœºï¼ˆæ¯”å¦‚Sun Hotpotï¼‰ç›´æ¥æŠŠä¸¤è€…åˆäºŒä¸ºä¸€ã€‚ \\5) ç¨‹åºè®¡æ•°å™¨(Program Counter Register) ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—éå¸¸å°çš„å†…å­˜ç©ºé—´ï¼Œå‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç¨‹åºè®¡ç®—å™¨ï¼Œæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ï¼ŒæŒ‡å‘æ–¹æ³•åŒºä¸­çš„æ–¹æ³•å­—èŠ‚ç ï¼ˆä¸‹ä¸€ä¸ªå°†è¦æ‰§è¡Œçš„æŒ‡ä»¤ä»£ç ï¼‰ï¼Œç”±æ‰§è¡Œå¼•æ“è¯»å–ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚ \\6) è¿è¡Œæ—¶å¸¸é‡æ±  è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘å™¨ç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åå­˜æ”¾åˆ°æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚ç›¸è¾ƒäºClassæ–‡ä»¶å¸¸é‡æ± ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± æ›´å…·åŠ¨æ€æ€§ï¼Œåœ¨è¿è¡ŒæœŸé—´ä¹Ÿå¯ä»¥å°†æ–°çš„å˜é‡æ”¾å…¥å¸¸é‡æ± ä¸­ï¼Œè€Œä¸æ˜¯ä¸€å®šè¦åœ¨ç¼–è¯‘æ—¶ç¡®å®šçš„å¸¸é‡æ‰èƒ½æ”¾å…¥ã€‚æœ€ä¸»è¦çš„è¿ç”¨ä¾¿æ˜¯Stringç±»çš„intern()æ–¹æ³•ã€‚ 3.3 æ‰§è¡Œå¼•æ“(Execution Engine)æ‰§è¡Œå¼•æ“æ‰§è¡ŒåŒ…åœ¨è£…è½½ç±»çš„æ–¹æ³•ä¸­çš„æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯æ–¹æ³•ã€‚æ‰§è¡Œå¼•æ“ä»¥æŒ‡ä»¤ä¸ºå•ä½è¯»å–Javaå­—èŠ‚ç ã€‚å®ƒå°±åƒä¸€ä¸ªCPUä¸€æ ·ï¼Œä¸€æ¡ä¸€æ¡åœ°æ‰§è¡Œæœºå™¨æŒ‡ä»¤ã€‚æ¯ä¸ªå­—èŠ‚ç æŒ‡ä»¤éƒ½ç”±ä¸€ä¸ª1å­—èŠ‚çš„æ“ä½œç å’Œé™„åŠ çš„æ“ä½œæ•°ç»„æˆã€‚æ‰§è¡Œå¼•æ“å–å¾—ä¸€ä¸ªæ“ä½œç ï¼Œç„¶åæ ¹æ®æ“ä½œæ•°æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå®Œæˆåå°±ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡æ“ä½œç ã€‚ ä¸è¿‡Javaå­—èŠ‚ç æ˜¯ç”¨ä¸€ç§äººç±»å¯ä»¥è¯»æ‡‚çš„è¯­è¨€ç¼–å†™çš„ï¼Œè€Œä¸æ˜¯ç”¨æœºå™¨å¯ä»¥ç›´æ¥æ‰§è¡Œçš„è¯­è¨€ã€‚å› æ­¤ï¼Œæ‰§è¡Œå¼•æ“å¿…é¡»æŠŠå­—èŠ‚ç è½¬æ¢æˆå¯ä»¥ç›´æ¥è¢«JVMæ‰§è¡Œçš„è¯­è¨€ã€‚å­—èŠ‚ç å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼è½¬æ¢æˆåˆé€‚çš„è¯­è¨€ï¼š è§£é‡Šå™¨ï¼š ä¸€æ¡ä¸€æ¡åœ°è¯»å–ï¼Œè§£é‡Šå¹¶æ‰§è¡Œå­—èŠ‚ç æ‰§è¡Œï¼Œæ‰€ä»¥å®ƒå¯ä»¥å¾ˆå¿«åœ°è§£é‡Šå­—èŠ‚ç ï¼Œä½†æ˜¯æ‰§è¡Œèµ·æ¥ä¼šæ¯”è¾ƒæ…¢ã€‚è¿™æ˜¯è§£é‡Šæ‰§è¡Œè¯­è¨€çš„ä¸€ä¸ªç¼ºç‚¹ã€‚ å³æ—¶ç¼–è¯‘å™¨ï¼šç”¨æ¥å¼¥è¡¥è§£é‡Šå™¨çš„ç¼ºç‚¹ï¼Œæ‰§è¡Œå¼•æ“é¦–å…ˆæŒ‰ç…§è§£é‡Šæ‰§è¡Œçš„æ–¹å¼æ¥æ‰§è¡Œï¼Œç„¶ååœ¨åˆé€‚çš„æ—¶å€™ï¼Œå³æ—¶ç¼–è¯‘å™¨æŠŠæ•´æ®µå­—èŠ‚ç ç¼–è¯‘æˆæœ¬åœ°ä»£ç ã€‚ç„¶åï¼Œæ‰§è¡Œå¼•æ“å°±æ²¡æœ‰å¿…è¦å†å»è§£é‡Šæ‰§è¡Œæ–¹æ³•äº†ï¼Œå®ƒå¯ä»¥ç›´æ¥é€šè¿‡æœ¬åœ°ä»£ç å»æ‰§è¡Œã€‚æ‰§è¡Œæœ¬åœ°ä»£ç æ¯”ä¸€æ¡ä¸€æ¡è¿›è¡Œè§£é‡Šæ‰§è¡Œçš„é€Ÿåº¦å¿«å¾ˆå¤šï¼Œç¼–è¯‘åçš„ä»£ç å¯ä»¥æ‰§è¡Œçš„å¾ˆå¿«ï¼Œå› ä¸ºæœ¬åœ°ä»£ç æ˜¯ä¿å­˜åœ¨ç¼“å­˜é‡Œçš„ã€‚ 3.4 åƒåœ¾æ”¶é›†(Garbage Collection, GC)3.4.1 ä»€ä¹ˆæ˜¯åƒåœ¾æ”¶é›†åƒåœ¾æ”¶é›†å³åƒåœ¾å›æ”¶ï¼Œç®€å•çš„è¯´åƒåœ¾å›æ”¶å°±æ˜¯å›æ”¶å†…å­˜ä¸­ä¸å†ä½¿ç”¨çš„å¯¹è±¡ã€‚æ‰€è°“ä½¿ç”¨ä¸­çš„å¯¹è±¡ï¼ˆå·²å¼•ç”¨å¯¹è±¡ï¼‰ï¼ŒæŒ‡çš„æ˜¯ç¨‹åºä¸­æœ‰æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ï¼›è€Œæœªä½¿ç”¨ä¸­çš„å¯¹è±¡ï¼ˆæœªå¼•ç”¨å¯¹è±¡ï¼‰ï¼Œåˆ™æ²¡æœ‰è¢«ä»»ä½•æŒ‡é’ˆç»™æŒ‡å‘ï¼Œå› æ­¤å ç”¨çš„å†…å­˜ä¹Ÿå¯ä»¥è¢«å›æ”¶æ‰ã€‚ åƒåœ¾å›æ”¶çš„åŸºæœ¬æ­¥éª¤åˆ†ä¸¤æ­¥ï¼š æŸ¥æ‰¾å†…å­˜ä¸­ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼ˆGCåˆ¤æ–­ç­–ç•¥ï¼‰ é‡Šæ”¾è¿™äº›å¯¹è±¡å ç”¨çš„å†…å­˜ï¼ˆGCæ”¶é›†ç®—æ³•ï¼‰ 3.4.2 GCåˆ¤æ–­ç­–ç•¥\\1) å¼•ç”¨è®¡æ•°ç®—æ³• å¼•ç”¨è®¡æ•°ç®—æ³•æ˜¯ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“æœ‰ä¸€ä¸ªå¼•ç”¨å®ƒæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±åŠ 1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±å‡1ï¼›ä»»ä½•æ—¶åˆ»è®¡æ•°å™¨éƒ½ä¸º0çš„å¯¹è±¡å°±æ˜¯ä¸å¯èƒ½å†è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚ç¼ºç‚¹ï¼šå¾ˆéš¾è§£å†³å¯¹è±¡ä¹‹é—´ç›¸äº’å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ \\2) æ ¹æœç´¢ç®—æ³• æ ¹æœç´¢ç®—æ³•çš„åŸºæœ¬æ€è·¯å°±æ˜¯é€šè¿‡ä¸€ç³»åˆ—åä¸ºâ€œGC Rootsâ€çš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼ˆReference Chainï¼‰ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼ˆä¹Ÿå°±æ˜¯è¯´ä»GC Rootsåˆ°è¿™ä¸ªå¯¹è±¡ä¸å¯è¾¾ï¼‰æ—¶ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚ åœ¨Javaè¯­è¨€é‡Œï¼Œå¯ä½œä¸ºGC Rootsçš„å¯¹è±¡åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ï¼› æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ï¼› æ–¹æ³•åŒºä¸­å¸¸é‡åº”ç”¨çš„å¯¹è±¡ï¼› æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIï¼ˆNativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡ã€‚ æ³¨ï¼šåœ¨æ ¹æœç´¢ç®—æ³•ä¸­ä¸å¯è¾¾çš„å¯¹è±¡ï¼Œä¹Ÿå¹¶éæ˜¯â€œéæ­»ä¸å¯â€çš„ï¼Œå› ä¸ºè¦çœŸæ­£å®£å‘Šä¸€ä¸ªå¯¹è±¡æ­»äº¡ï¼Œè‡³å°‘è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹ï¼šç¬¬ä¸€æ¬¡æ˜¯æ ‡è®°æ²¡æœ‰ä¸GC Rootsç›¸è¿æ¥çš„å¼•ç”¨é“¾ï¼›ç¬¬äºŒæ¬¡æ˜¯GCå¯¹åœ¨F-Queueæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å¯¹è±¡è¿›è¡Œçš„å°è§„æ¨¡æ ‡è®°(å¯¹è±¡éœ€è¦è¦†ç›–finalize()æ–¹æ³•ä¸”æ²¡è¢«è°ƒç”¨è¿‡)ã€‚ 3.4.3 GCæ”¶é›†ç®—æ³•\\1) æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰ æ ‡è®°-æ¸…æ¥šç®—æ³•é‡‡ç”¨ä»æ ¹é›†åˆï¼ˆGC Rootsï¼‰è¿›è¡Œæ‰«æï¼Œé¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼ˆæ ¹æœç´¢ç®—æ³•ï¼‰ï¼Œæ ‡è®°å®Œæˆåç»Ÿä¸€å›æ”¶æ‰æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ã€‚ è¯¥ç®—æ³•æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š æ•ˆç‡é—®é¢˜ï¼šæ ‡è®°å’Œæ¸…é™¤è¿‡ç¨‹çš„æ•ˆç‡éƒ½ä¸é«˜ï¼› ç©ºé—´é—®é¢˜ï¼šæ ‡è®°æ¸…é™¤åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡, ç©ºé—´ç¢ç‰‡å¤ªå¤šå¯èƒ½ä¼šå¯¼è‡´åœ¨è¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦åˆ†é…è¾ƒå¤§å¯¹è±¡æ—¶æ— æ³•æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜è€Œä¸å¾—ä¸æå‰è§¦å‘å¦ä¸€æ¬¡åƒåœ¾æ”¶é›†ã€‚ \\2) å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰ å¤åˆ¶ç®—æ³•æ˜¯å°†å¯ç”¨å†…å­˜æŒ‰å®¹é‡åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—, æ¯æ¬¡åªç”¨å…¶ä¸­ä¸€å—, å½“è¿™ä¸€å—çš„å†…å­˜ç”¨å®Œ, å°±å°†è¿˜å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€å—ä¸Šé¢, ç„¶åæŠŠå·²ä½¿ç”¨è¿‡çš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚ \\3) æ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆMark-Compactï¼‰ æ ‡è®°æ•´ç†ç®—æ³•çš„æ ‡è®°è¿‡ç¨‹ä¸æ ‡è®°æ¸…é™¤ç®—æ³•ç›¸åŒ, ä½†åç»­æ­¥éª¤ä¸å†å¯¹å¯å›æ”¶å¯¹è±¡ç›´æ¥æ¸…ç†, è€Œæ˜¯è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡éƒ½å‘ä¸€ç«¯ç§»åŠ¨,ç„¶åæ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚ \\4) åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆGenerational Collectionï¼‰ åˆ†ä»£æ”¶é›†ç®—æ³•æ˜¯ç›®å‰å¤§éƒ¨åˆ†JVMçš„åƒåœ¾æ”¶é›†å™¨é‡‡ç”¨çš„ç®—æ³•ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯æ ¹æ®å¯¹è±¡å­˜æ´»çš„ç”Ÿå‘½å‘¨æœŸå°†å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä¸åŒçš„åŒºåŸŸã€‚ä¸€èˆ¬æƒ…å†µä¸‹å°†å †åŒºåˆ’åˆ†ä¸ºè€å¹´ä»£ï¼ˆTenured Generationï¼‰å’Œæ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰ï¼Œåœ¨å †åŒºä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªä»£å°±æ˜¯æ°¸ä¹…ä»£ï¼ˆPermanet Generationï¼‰ã€‚è€å¹´ä»£çš„ç‰¹ç‚¹æ˜¯æ¯æ¬¡åƒåœ¾æ”¶é›†æ—¶åªæœ‰å°‘é‡å¯¹è±¡éœ€è¦è¢«å›æ”¶ï¼Œè€Œæ–°ç”Ÿä»£çš„ç‰¹ç‚¹æ˜¯æ¯æ¬¡åƒåœ¾å›æ”¶æ—¶éƒ½æœ‰å¤§é‡çš„å¯¹è±¡éœ€è¦è¢«å›æ”¶ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ ¹æ®ä¸åŒä»£çš„ç‰¹ç‚¹é‡‡å–æœ€é€‚åˆçš„æ”¶é›†ç®—æ³•ã€‚ æ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰çš„å›æ”¶ç®—æ³•ï¼ˆä»¥å¤åˆ¶ç®—æ³•ä¸ºä¸»ï¼‰ æ‰€æœ‰æ–°ç”Ÿæˆçš„å¯¹è±¡é¦–å…ˆéƒ½æ˜¯æ”¾åœ¨å¹´è½»ä»£çš„ã€‚å¹´è½»ä»£çš„ç›®æ ‡å°±æ˜¯å°½å¯èƒ½å¿«é€Ÿçš„æ”¶é›†æ‰é‚£äº›ç”Ÿå‘½å‘¨æœŸçŸ­çš„å¯¹è±¡ã€‚ æ–°ç”Ÿä»£å†…å­˜æŒ‰ç…§8:1:1çš„æ¯”ä¾‹åˆ†ä¸ºä¸€ä¸ªedenåŒºå’Œä¸¤ä¸ªsurvivor(survivor0,survivor1)åŒºã€‚ä¸€ä¸ªEdenåŒºï¼Œä¸¤ä¸ª SurvivoråŒº(ä¸€èˆ¬è€Œè¨€)ã€‚å¤§éƒ¨åˆ†å¯¹è±¡åœ¨EdenåŒºä¸­ç”Ÿæˆã€‚å›æ”¶æ—¶å…ˆå°†edenåŒºå­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°ä¸€ä¸ªsurvivor0åŒºï¼Œç„¶åæ¸…ç©ºedenåŒºï¼Œå½“è¿™ä¸ªsurvivor0åŒºä¹Ÿå­˜æ”¾æ»¡äº†æ—¶ï¼Œåˆ™å°†edenåŒºå’Œsurvivor0åŒºå­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€ä¸ªsurvivor1åŒºï¼Œç„¶åæ¸…ç©ºedenå’Œè¿™ä¸ªsurvivor0åŒºï¼Œæ­¤æ—¶survivor0åŒºæ˜¯ç©ºçš„ï¼Œç„¶åå°†survivor0åŒºå’Œsurvivor1åŒºäº¤æ¢ï¼Œå³ä¿æŒsurvivor1åŒºä¸ºç©ºï¼Œ å¦‚æ­¤å¾€å¤ã€‚ å½“survivor1åŒºä¸è¶³ä»¥å­˜æ”¾ edenå’Œsurvivor0çš„å­˜æ´»å¯¹è±¡æ—¶ï¼Œå°±å°†å­˜æ´»å¯¹è±¡ç›´æ¥å­˜æ”¾åˆ°è€å¹´ä»£ã€‚è‹¥æ˜¯è€å¹´ä»£ä¹Ÿæ»¡äº†å°±ä¼šè§¦å‘ä¸€æ¬¡Full GC(Major GC)ï¼Œä¹Ÿå°±æ˜¯æ–°ç”Ÿä»£ã€è€å¹´ä»£éƒ½è¿›è¡Œå›æ”¶ã€‚ æ–°ç”Ÿä»£å‘ç”Ÿçš„GCä¹Ÿå«åšMinor GCï¼ŒMinorGCå‘ç”Ÿé¢‘ç‡æ¯”è¾ƒé«˜(ä¸ä¸€å®šç­‰EdenåŒºæ»¡äº†æ‰è§¦å‘)ã€‚ è€å¹´ä»£ï¼ˆTenured Generationï¼‰çš„å›æ”¶ç®—æ³•ï¼ˆä»¥æ ‡è®°-æ¸…é™¤ã€æ ‡è®°-æ•´ç†ä¸ºä¸»ï¼‰ åœ¨å¹´è½»ä»£ä¸­ç»å†äº†Næ¬¡åƒåœ¾å›æ”¶åä»ç„¶å­˜æ´»çš„å¯¹è±¡ï¼Œå°±ä¼šè¢«æ”¾åˆ°è€å¹´ä»£ä¸­ã€‚å› æ­¤ï¼Œå¯ä»¥è®¤ä¸ºè€å¹´ä»£ä¸­å­˜æ”¾çš„éƒ½æ˜¯ä¸€äº›ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡ã€‚ å†…å­˜æ¯”æ–°ç”Ÿä»£ä¹Ÿå¤§å¾ˆå¤š(å¤§æ¦‚æ¯”ä¾‹æ˜¯1:2)ï¼Œå½“è€å¹´ä»£å†…å­˜æ»¡æ—¶è§¦å‘Major GCå³Full GCï¼ŒFull GCå‘ç”Ÿé¢‘ç‡æ¯”è¾ƒä½ï¼Œè€å¹´ä»£å¯¹è±¡å­˜æ´»æ—¶é—´æ¯”è¾ƒé•¿ï¼Œå­˜æ´»ç‡æ ‡è®°é«˜ã€‚ æ°¸ä¹…ä»£ï¼ˆPermanet Generationï¼‰çš„å›æ”¶ç®—æ³• ç”¨äºå­˜æ”¾é™æ€æ–‡ä»¶ï¼Œå¦‚Javaç±»ã€æ–¹æ³•ç­‰ã€‚æ°¸ä¹…ä»£å¯¹åƒåœ¾å›æ”¶æ²¡æœ‰æ˜¾è‘—å½±å“ï¼Œä½†æ˜¯æœ‰äº›åº”ç”¨å¯èƒ½åŠ¨æ€ç”Ÿæˆæˆ–è€…è°ƒç”¨ä¸€äº›classï¼Œä¾‹å¦‚Hibernate ç­‰ï¼Œåœ¨è¿™ç§æ—¶å€™éœ€è¦è®¾ç½®ä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ°¸ä¹…ä»£ç©ºé—´æ¥å­˜æ”¾è¿™äº›è¿è¡Œè¿‡ç¨‹ä¸­æ–°å¢çš„ç±»ã€‚æ°¸ä¹…ä»£ä¹Ÿç§°æ–¹æ³•åŒºã€‚æ–¹æ³•åŒºä¸»è¦å›æ”¶çš„å†…å®¹æœ‰ï¼šåºŸå¼ƒå¸¸é‡å’Œæ— ç”¨çš„ç±»ã€‚å¯¹äºåºŸå¼ƒå¸¸é‡ä¹Ÿå¯é€šè¿‡æ ¹æœç´¢ç®—æ³•æ¥åˆ¤æ–­ï¼Œä½†æ˜¯å¯¹äºæ— ç”¨çš„ç±»åˆ™éœ€è¦åŒæ—¶æ»¡è¶³ä¸‹é¢3ä¸ªæ¡ä»¶ï¼š è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯Javaå †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹ï¼› åŠ è½½è¯¥ç±»çš„ClassLoaderå·²ç»è¢«å›æ”¶ï¼› è¯¥ç±»å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚ 3.4.4 åƒåœ¾æ”¶é›†å™¨\\1) Serialæ”¶é›†å™¨ï¼ˆå¤åˆ¶ç®—æ³•) æ–°ç”Ÿä»£å•çº¿ç¨‹æ”¶é›†å™¨ï¼Œæ ‡è®°å’Œæ¸…ç†éƒ½æ˜¯å•çº¿ç¨‹ï¼Œä¼˜ç‚¹æ˜¯ç®€å•é«˜æ•ˆã€‚æ˜¯clientçº§åˆ«é»˜è®¤çš„GCæ–¹å¼ï¼Œå¯ä»¥é€šè¿‡-XX:+UseSerialGCæ¥å¼ºåˆ¶æŒ‡å®šã€‚ \\2) Serial Oldæ”¶é›†å™¨(æ ‡è®°-æ•´ç†ç®—æ³•) è€å¹´ä»£å•çº¿ç¨‹æ”¶é›†å™¨ï¼ŒSerialæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ã€‚ \\3) ParNewæ”¶é›†å™¨(åœæ­¢-å¤åˆ¶ç®—æ³•) æ–°ç”Ÿä»£å¤šçº¿ç¨‹æ”¶é›†å™¨ï¼Œå…¶å®å°±æ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬,åœ¨å¤šæ ¸CPUç¯å¢ƒä¸‹æœ‰ç€æ¯”Serialæ›´å¥½çš„è¡¨ç°ã€‚ \\4) Parallel Scavengeæ”¶é›†å™¨(åœæ­¢-å¤åˆ¶ç®—æ³•) æ–°ç”Ÿä»£å¹¶è¡Œçš„å¤šçº¿ç¨‹æ”¶é›†å™¨ï¼Œè¿½æ±‚é«˜ååé‡ï¼Œé«˜æ•ˆåˆ©ç”¨CPUã€‚ååé‡ä¸€èˆ¬ä¸º99%ï¼Œ ååé‡&#x3D; ç”¨æˆ·çº¿ç¨‹æ—¶é—´&#x2F;(ç”¨æˆ·çº¿ç¨‹æ—¶é—´+GCçº¿ç¨‹æ—¶é—´)ã€‚é€‚åˆåå°åº”ç”¨ç­‰å¯¹äº¤äº’ç›¸åº”è¦æ±‚ä¸é«˜çš„åœºæ™¯ã€‚æ˜¯serverçº§åˆ«é»˜è®¤é‡‡ç”¨çš„GCæ–¹å¼ï¼Œå¯ç”¨-XX:+UseParallelGCæ¥å¼ºåˆ¶æŒ‡å®šï¼Œç”¨-XX:ParallelGCThreads&#x3D;4æ¥æŒ‡å®šçº¿ç¨‹æ•°ã€‚ \\5) Parallel Oldæ”¶é›†å™¨(åœæ­¢-å¤åˆ¶ç®—æ³•) è€å¹´ä»£å¹¶è¡Œçš„å¤šçº¿ç¨‹æ”¶é›†å™¨ï¼ŒParallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå¹¶è¡Œæ”¶é›†å™¨ï¼Œååé‡ä¼˜å…ˆã€‚ \\6) CMS(Concurrent Mark Sweep)æ”¶é›†å™¨ï¼ˆæ ‡è®°-æ¸…é™¤ç®—æ³•ï¼‰ CMSæ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ï¼ŒCMSæ”¶é›†å™¨æ˜¯åŸºäºâ€œæ ‡è®°â€“æ¸…é™¤â€(Mark-Sweep)ç®—æ³•å®ç°çš„ï¼Œæ•´ä¸ªè¿‡ç¨‹åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼š åˆå§‹æ ‡è®°ï¼š æ ‡è®°GC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼› å¹¶å‘æ ‡è®°ï¼š è¿›è¡ŒGC Roots Tracingçš„è¿‡ç¨‹ï¼› é‡æ–°æ ‡è®°ï¼š ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ï¼Œè¿™ä¸ªé˜¶æ®µçš„åœé¡¿æ—¶é—´ä¸€èˆ¬ä¼šæ¯”åˆå§‹æ ‡è®°é˜¶æ®µç¨é•¿ä¸€äº›ï¼Œä½†æ¯”å¹¶å‘æ ‡è®°æ—¶é—´çŸ­ï¼› å¹¶å‘æ¸…é™¤ï¼š æ•´ä¸ªè¿‡ç¨‹ä¸­è€—æ—¶æœ€é•¿çš„å¹¶å‘æ ‡è®°å’Œå¹¶å‘æ¸…é™¤è¿‡ç¨‹æ”¶é›†å™¨çº¿ç¨‹éƒ½å¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹ä¸€èµ·å·¥ä½œï¼Œæ‰€ä»¥ï¼Œä»æ€»ä½“ä¸Šæ¥è¯´ï¼ŒCMSæ”¶é›†å™¨çš„å†…å­˜å›æ”¶è¿‡ç¨‹æ˜¯ä¸ç”¨æˆ·çº¿ç¨‹ä¸€èµ·å¹¶å‘æ‰§è¡Œçš„ã€‚ ä¼˜ç‚¹ï¼šå¹¶å‘æ”¶é›†ã€ä½åœé¡¿ ç¼ºç‚¹ï¼šå¯¹CPUèµ„æºéå¸¸æ•æ„Ÿã€æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ã€äº§ç”Ÿå¤§é‡ç©ºé—´ç¢ç‰‡ã€‚ \\7) G1(Garbage First)æ”¶é›†å™¨ï¼ˆæ ‡è®°-æ•´ç†ç®—æ³•ï¼‰ G1æ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡ç«¯åº”ç”¨çš„åƒåœ¾æ”¶é›†å™¨ï¼Œæ˜¯åŸºäºâ€œæ ‡è®°-æ•´ç†â€ç®—æ³•å®ç°çš„ï¼Œä¸å…¶ä»–GCæ”¶é›†å™¨ç›¸æ¯”ï¼ŒG1å…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š å¹¶è¡Œä¸å¹¶å‘ åˆ†ä»£æ”¶é›† ç©ºé—´æ•´åˆ å¯é¢„æµ‹æ€§çš„åœé¡¿ G1è¿ä½œæ­¥éª¤ï¼š åˆå§‹æ ‡è®°(stop the worldäº‹ä»¶ï¼ŒCPUåœé¡¿åªå¤„ç†åƒåœ¾) å¹¶å‘æ ‡è®°(ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œ) æœ€ç»ˆæ ‡è®°(stop the worldäº‹ä»¶ï¼ŒCPUåœé¡¿å¤„ç†åƒåœ¾) ç­›é€‰å›æ”¶(stop the worldäº‹ä»¶ï¼Œæ ¹æ®ç”¨æˆ·æœŸæœ›çš„GCåœé¡¿æ—¶é—´å›æ”¶) 3.4.5 åƒåœ¾æ”¶é›†ç»“æ„å›¾ å‚è€ƒèµ„æ–™ https://segmentfault.com/a/1190000019845827","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"JVM","slug":"JVM","permalink":"https://guoshunfa.com/tags/JVM/"}]},{"title":"Java è®¾è®¡æ¨¡å¼","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Javaè®¾è®¡æ¨¡å¼","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.278Z","comments":true,"path":"2020/07/Javaè®¾è®¡æ¨¡å¼/","link":"","permalink":"https://guoshunfa.com/2020/07/Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è®¾è®¡æ¨¡å¼åç§° demoä»£ç åœ°å€ æè¿° å·¥å‚æ¨¡å¼ github èœé¸Ÿæ•™ç¨‹ æŠ½è±¡å·¥å‚æ¨¡å¼ github å•ä¾‹æ¨¡å¼ github èœé¸Ÿæ•™ç¨‹ å»ºé€ è€…æ¨¡å¼ github åŸå‹æ¨¡å¼ github é€‚é…å™¨æ¨¡å¼ github æ¡¥æ¥æ¨¡å¼ github è¿‡æ»¤å™¨æ¨¡å¼ github ç»„åˆæ¨¡å¼ github è£…é¥°å™¨æ¨¡å¼ github å¤–è§‚æ¨¡å¼ github äº«å…ƒæ¨¡å¼ github ä»£ç†æ¨¡å¼ github è´£ä»»é“¾æ¨¡å¼ github å‘½ä»¤æ¨¡å¼ github è§£é‡Šå™¨æ¨¡å¼ github è¿­ä»£å™¨æ¨¡å¼ github ä¸­ä»‹è€…æ¨¡å¼ github å¤‡å¿˜å½•æ¨¡å¼ github è§‚å¯Ÿè€…æ¨¡å¼ github çŠ¶æ€æ¨¡å¼ github ç©ºå¯¹è±¡æ¨¡å¼ github ç­–ç•¥æ¨¡å¼ github æ¨¡æ¿æ¨¡å¼ github è®¿é—®è€…æ¨¡å¼ github MVCæ¨¡å¼ github ä¸šåŠ¡ä»£è¡¨æ¨¡å¼ github ç»„åˆå®ä½“æ¨¡å¼ github æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼ github å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ github æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ github æœåŠ¡å®šä½å™¨æ¨¡å¼ github ä¼ è¾“å¯¹è±¡æ¨¡å¼ github","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://guoshunfa.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"Oracle Java Packages","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Oracle-Java-Packages","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.279Z","comments":true,"path":"2020/07/Oracle-Java-Packages/","link":"","permalink":"https://guoshunfa.com/2020/07/Oracle-Java-Packages/","excerpt":"","text":"æœ¬æ–‡ç« ä»¥jdk8ä¸ºåŸºç¡€è¿›è¡Œç¼–å†™ï¼Œå¦‚æœæƒ³æŸ¥çœ‹åç»­çš„ç‰ˆæœ¬å¯ä»¥å‰å¾€jdkç‰ˆæœ¬ç›®å½•ä¸‹æŸ¥çœ‹ã€‚ ç¿»è¯‘è‡ªï¼šhttps://docs.oracle.com/javase/tutorial/java/package/index.html æœ¬è¯¾ç¨‹ä»‹ç»å¦‚ä½•å°†ç±»å’Œæ¥å£ç»‘å®šåˆ°åŒ…ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨åŒ…ä¸­çš„ç±»ï¼Œä»¥åŠå¦‚ä½•å®‰æ’æ–‡ä»¶ç³»ç»Ÿï¼Œä»¥ä¾¿ç¼–è¯‘å™¨å¯ä»¥æ‰¾åˆ°æºæ–‡ä»¶ã€‚ åˆ›å»ºå’Œä½¿ç”¨åŒ…ä¸ºäº†ä½¿ç±»å‹æ›´æ˜“äºæŸ¥æ‰¾å’Œä½¿ç”¨ï¼Œé¿å…å‘½åå†²çªï¼Œå¹¶æ§åˆ¶è®¿é—®ï¼Œç¨‹åºå‘˜å°†ç›¸å…³ç±»å‹çš„ç»„æ‰“åŒ…åˆ°åŒ…ä¸­ã€‚ é‡Šä¹‰: åŒ…æ˜¯ä¸€ç»„æä¾›è®¿é—®ä¿æŠ¤å’Œåç§°ç©ºé—´ç®¡ç†çš„ç›¸å…³ç±»å‹ã€‚æ³¨æ„ï¼ŒtypesæŒ‡çš„æ˜¯ç±»ã€æ¥å£ã€æšä¸¾å’Œæ³¨é‡Šç±»å‹ã€‚æšä¸¾å’Œæ³¨é‡Šç±»å‹åˆ†åˆ«æ˜¯ç‰¹æ®Šç±»å‹çš„ç±»å’Œæ¥å£ï¼Œå› æ­¤ç±»å‹åœ¨æœ¬è¯¾ä¸­é€šå¸¸ç®€ç§°ä¸ºç±»å’Œæ¥å£ã€‚ ä½œä¸ºJavaå¹³å°ä¸€éƒ¨åˆ†çš„ç±»å‹æ˜¯æŒ‰å‡½æ•°æ†ç»‘ç±»çš„å„ç§åŒ…çš„æˆå‘˜ï¼šåŸºæœ¬ç±»åœ¨Java.langï¼Œç”¨äºè¯»å’Œå†™ï¼ˆè¾“å…¥å’Œè¾“å‡ºï¼‰çš„ç±»åœ¨java.ioç­‰ç­‰ã€‚æ‚¨ä¹Ÿå¯ä»¥å°†ç±»å‹æ”¾å…¥åŒ…ä¸­ã€‚ å‡è®¾æ‚¨ç¼–å†™äº†ä¸€ç»„è¡¨ç¤ºå›¾å½¢å¯¹è±¡çš„ç±»ï¼Œä¾‹å¦‚åœ†ã€çŸ©å½¢ã€ç›´çº¿å’Œç‚¹ã€‚æ‚¨è¿˜å¯ä»¥ç¼–å†™ä¸€ä¸ªæ¥å£â€œDraggableâ€ï¼Œå¦‚æœå¯ä»¥ç”¨é¼ æ ‡æ‹–åŠ¨ï¼Œåˆ™ç±»å¯ä»¥å®ç°è¯¥æ¥å£ã€‚ 123456789101112131415161718192021222324252627282930313233//in the Draggable.java filepublic interface Draggable &#123; ...&#125;//in the Graphic.java filepublic abstract class Graphic &#123; ...&#125;//in the Circle.java filepublic class Circle extends Graphic implements Draggable &#123; . . .&#125;//in the Rectangle.java filepublic class Rectangle extends Graphic implements Draggable &#123; . . .&#125;//in the Point.java filepublic class Point extends Graphic implements Draggable &#123; . . .&#125;//in the Line.java filepublic class Line extends Graphic implements Draggable &#123; . . .&#125; å‡ºäºä»¥ä¸‹å‡ ä¸ªåŸå› ï¼Œæ‚¨åº”è¯¥å°†è¿™äº›ç±»å’Œæ¥å£æ†ç»‘åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼š æ‚¨å’Œå…¶ä»–ç¨‹åºå‘˜å¯ä»¥å¾ˆå®¹æ˜“åœ°ç¡®å®šè¿™äº›ç±»å‹æ˜¯ç›¸å…³çš„ã€‚ æ‚¨å’Œå…¶ä»–ç¨‹åºå‘˜çŸ¥é“åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°å¯ä»¥æä¾›å›¾å½¢ç›¸å…³åŠŸèƒ½çš„ç±»å‹ã€‚ æ‚¨çš„ç±»å‹åç§°ä¸ä¼šä¸å…¶ä»–åŒ…ä¸­çš„ç±»å‹åç§°å†²çªï¼Œå› ä¸ºè¯¥åŒ…åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å‘½åç©ºé—´ã€‚ æ‚¨å¯ä»¥å…è®¸åŒ…å†…çš„ç±»å‹å½¼æ­¤æ— é™åˆ¶åœ°è®¿é—®ï¼Œä½†ä»ç„¶é™åˆ¶åŒ…å¤–ç±»å‹çš„è®¿é—®ã€‚ åˆ›å»ºåŒ…è¦åˆ›å»ºåŒ…ï¼Œè¯·ä¸ºåŒ…é€‰æ‹©ä¸€ä¸ªåç§°ï¼ˆå‘½åçº¦å®šå°†åœ¨ä¸‹ä¸€èŠ‚ä¸­è®¨è®ºï¼‰ï¼Œå¹¶åœ¨åŒ…å«è¦åŒ…å«åœ¨åŒ…ä¸­çš„ç±»å‹ï¼ˆç±»ã€æ¥å£ã€æšä¸¾å’Œæ³¨é‡Šç±»å‹ï¼‰çš„æ¯ä¸ªæºæ–‡ä»¶çš„é¡¶éƒ¨æ”¾ç½®ä¸€ä¸ªå…·æœ‰è¯¥åç§°çš„â€œpackageâ€è¯­å¥ã€‚ packageè¯­å¥ï¼ˆä¾‹å¦‚ï¼Œâ€œpackage graphicsï¼›â€ï¼‰å¿…é¡»æ˜¯æºæ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œã€‚æ¯ä¸ªæºæ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ªpackageè¯­å¥ï¼Œå®ƒé€‚ç”¨äºæ–‡ä»¶ä¸­çš„æ‰€æœ‰ç±»å‹ã€‚ Note: å¦‚æœåœ¨ä¸€ä¸ªæºæ–‡ä»¶ä¸­æ”¾ç½®å¤šä¸ªç±»å‹ï¼Œåˆ™åªæœ‰ä¸€ä¸ªç±»å‹å¯ä»¥æ˜¯â€œpublicâ€ï¼Œå¹¶ä¸”å¿…é¡»ä¸æºæ–‡ä»¶åŒåã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨æ–‡ä»¶â€œCircleâ€ä¸­å®šä¹‰â€œpublic class Circleâ€ã€‚javaï¼Œåœ¨æ–‡ä»¶Draggableä¸­å®šä¹‰public interface Draggableã€‚javaï¼Œåœ¨æ–‡ä»¶Dayä¸­å®šä¹‰public enum Dayã€‚javaç­‰ã€‚ æ‚¨å¯ä»¥å°†éå…¬å…±ç±»å‹ä¸å…¬å…±ç±»å‹åŒ…å«åœ¨åŒä¸€æ–‡ä»¶ä¸­ï¼ˆå¼ºçƒˆå»ºè®®è¿™æ ·åšï¼Œé™¤ééå…¬å…±ç±»å‹è¾ƒå°ä¸”ä¸å…¬å…±ç±»å‹å¯†åˆ‡ç›¸å…³ï¼‰ï¼Œä½†åªæœ‰å…¬å…±ç±»å‹å¯ä»¥ä»åŒ…å¤–éƒ¨è®¿é—®ã€‚æ‰€æœ‰é¡¶çº§çš„éå…¬å…±ç±»å‹éƒ½å°†æ˜¯package privateã€‚ å¦‚æœå°†ä¸Šä¸€èŠ‚ä¸­åˆ—å‡ºçš„å›¾å½¢ç•Œé¢å’Œç±»æ”¾åœ¨åä¸ºâ€œgraphicsâ€çš„åŒ…ä¸­ï¼Œåˆ™éœ€è¦å…­ä¸ªæºæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415161718192021222324252627282930313233343536373839//in the Draggable.java filepackage graphics;public interface Draggable &#123; . . .&#125;//in the Graphic.java filepackage graphics;public abstract class Graphic &#123; . . .&#125;//in the Circle.java filepackage graphics;public class Circle extends Graphic implements Draggable &#123; . . .&#125;//in the Rectangle.java filepackage graphics;public class Rectangle extends Graphic implements Draggable &#123; . . .&#125;//in the Point.java filepackage graphics;public class Point extends Graphic implements Draggable &#123; . . .&#125;//in the Line.java filepackage graphics;public class Line extends Graphic implements Draggable &#123; . . .&#125; å¦‚æœä¸ä½¿ç”¨â€œpackageâ€è¯­å¥ï¼Œåˆ™ç±»å‹å°†ä»¥æœªå‘½åçš„åŒ…ç»“å°¾ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæœªå‘½åçš„åŒ…ä»…é€‚ç”¨äºå°å‹æˆ–ä¸´æ—¶åº”ç”¨ç¨‹åºï¼Œæˆ–è€…æ‚¨åˆšåˆšå¼€å§‹å¼€å‘è¿‡ç¨‹æ—¶ã€‚å¦åˆ™ï¼Œç±»å’Œæ¥å£å±äºå‘½ååŒ…ã€‚ å‘½åç¨‹åºåŒ…éšç€ä¸–ç•Œå„åœ°çš„ç¨‹åºå‘˜ä½¿ç”¨Javaç¼–ç¨‹è¯­è¨€ç¼–å†™ç±»å’Œæ¥å£ï¼Œè®¸å¤šç¨‹åºå‘˜å¯èƒ½ä¼šå¯¹ä¸åŒçš„ç±»å‹ä½¿ç”¨ç›¸åŒçš„åç§°ã€‚äº‹å®ä¸Šï¼Œä¸Šä¸€ä¸ªç¤ºä¾‹å°±æ˜¯è¿™æ ·åšçš„ï¼šå½“javaä¸­å·²ç»æœ‰Rectanceç±»æ—¶ï¼Œå®ƒå®šä¹‰äº†Rectangeç±»ã€‚awtåŒ…ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå¦‚æœä¸¤ä¸ªç±»ä½äºä¸åŒçš„åŒ…ä¸­ï¼Œç¼–è¯‘å™¨å…è®¸å®ƒä»¬å…·æœ‰ç›¸åŒçš„åç§°ã€‚æ¯ä¸ªâ€œçŸ©å½¢â€ç±»çš„å®Œå…¨é™å®šååŒ…æ‹¬åŒ…åã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œâ€œgraphicsâ€åŒ…ä¸­â€œRectangleâ€ç±»çš„å®Œå…¨é™å®šåç§°æ˜¯â€œgraphicsã€‚çŸ©å½¢â€ï¼Œä»¥åŠâ€œjavaâ€ä¸­â€œçŸ©å½¢â€ç±»çš„å®Œå…¨é™å®šåç§°ã€‚awtåŒ…æ˜¯java.awt.Rectangle ã€‚ é™¤éä¸¤ä¸ªç‹¬ç«‹çš„ç¨‹åºå‘˜å¯¹ä»–ä»¬çš„åŒ…ä½¿ç”¨ç›¸åŒçš„åç§°ï¼Œå¦åˆ™è¿™å¾ˆæœ‰æ•ˆã€‚æ˜¯ä»€ä¹ˆé˜²æ­¢äº†è¿™ä¸ªé—®é¢˜ï¼Ÿä¹ ä¿— å‘½åæƒ¯ä¾‹åŒ…åç§°ä»¥å°å†™å­—æ¯ä¹¦å†™ï¼Œä»¥é¿å…ä¸ç±»æˆ–æ¥å£çš„åç§°å†²çªã€‚ å…¬å¸ä½¿ç”¨å…¶åå‘çš„äº’è”ç½‘åŸŸåæ¥å¼€å§‹å…¶è½¯ä»¶åŒ…åç§°ï¼Œä¾‹å¦‚â€œcom.exampleâ€ã€‚mypackageâ€è¡¨ç¤ºç”±ç¨‹åºå‘˜åœ¨â€œexample.comâ€åˆ›å»ºçš„åä¸ºâ€œmypackageâ€çš„åŒ…ã€‚ åœ¨ä¸€å®¶å…¬å¸å†…å‘ç”Ÿçš„åç§°å†²çªéœ€è¦æŒ‰ç…§è¯¥å…¬å¸å†…çš„æƒ¯ä¾‹è¿›è¡Œå¤„ç†ï¼Œå¯èƒ½æ˜¯åœ¨å…¬å¸åç§°ååŒ…å«åœ°åŒºæˆ–é¡¹ç›®åç§°ï¼ˆä¾‹å¦‚ï¼Œâ€œcom.example.gregion.mypackageâ€ï¼‰ã€‚ Javaè¯­è¨€æœ¬èº«çš„åŒ…ä»¥â€œJavaâ€å¼€å¤´æˆ–javax åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒinternetåŸŸåå¯èƒ½ä¸æ˜¯æœ‰æ•ˆçš„è½¯ä»¶åŒ…åç§°ã€‚å¦‚æœåŸŸååŒ…å«è¿å­—ç¬¦æˆ–å…¶ä»–ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚æœåŒ…åä»¥æ•°å­—æˆ–å…¶ä»–éæ³•ç”¨ä½œJavaåç§°å¼€å¤´çš„å­—ç¬¦å¼€å¤´ï¼Œæˆ–è€…åŒ…ååŒ…å«ä¿ç•™çš„Javaå…³é”®å­—ï¼ˆå¦‚â€œintâ€ï¼‰ï¼Œåˆ™å¯èƒ½å‘ç”Ÿè¿™ç§æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®çš„æƒ¯ä¾‹æ˜¯æ·»åŠ ä¸‹åˆ’çº¿ã€‚ä¾‹å¦‚ï¼š Domain Name Package Name Prefix hyphenated-name.example.org org.example.hyphenated_name example.int int_.example 123name.example.com com.example._123name ä½¿ç”¨åŒ…æˆå‘˜ç»„æˆåŒ…çš„ç±»å‹ç§°ä¸ºåŒ…æˆå‘˜ã€‚ è¦ä»åŒ…å¤–éƒ¨ä½¿ç”¨â€œpublicâ€åŒ…æˆå‘˜ï¼Œå¿…é¡»æ‰§è¡Œä»¥ä¸‹æ“ä½œä¹‹ä¸€ï¼š é€šè¿‡æˆå‘˜çš„å®Œå…¨é™å®šåç§°å¼•ç”¨è¯¥æˆå‘˜ å¯¼å…¥åŒ…æˆå‘˜ å¯¼å…¥æˆå‘˜çš„æ•´ä¸ªåŒ… å¦‚ä»¥ä¸‹å„èŠ‚æ‰€è¿°ï¼Œæ¯ä¸€é¡¹éƒ½é€‚ç”¨äºä¸åŒçš„æƒ…å†µã€‚ é€šè¿‡å…¶é™å®šåç§°å¼•ç”¨åŒ…æˆå‘˜åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæœ¬æ•™ç¨‹ä¸­çš„å¤§å¤šæ•°ç¤ºä¾‹éƒ½é€šè¿‡ç®€å•çš„åç§°æ¥å¼•ç”¨ç±»å‹ï¼Œä¾‹å¦‚â€œRectangleâ€å’Œâ€œStackOfIntsâ€ã€‚å¦‚æœæ­£åœ¨ç¼–å†™çš„ä»£ç ä¸åŒ…æˆå‘˜ä½äºåŒä¸€ä¸ªåŒ…ä¸­ï¼Œæˆ–è€…è¯¥æˆå‘˜å·²å¯¼å…¥ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŒ…æˆå‘˜çš„ç®€å•åç§°ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨è¯•å›¾ä½¿ç”¨å…¶ä»–åŒ…ä¸­çš„æˆå‘˜ï¼Œè€Œè¯¥åŒ…å°šæœªå¯¼å…¥ï¼Œåˆ™å¿…é¡»ä½¿ç”¨è¯¥æˆå‘˜çš„å®Œå…¨é™å®šåï¼Œå…¶ä¸­åŒ…æ‹¬åŒ…åã€‚è¿™æ˜¯ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­å›¾å½¢åŒ…ä¸­å£°æ˜çš„Rectangleç±»çš„å®Œå…¨é™å®šåç§°ã€‚ 1graphics.Rectangle æ‚¨å¯ä»¥ä½¿ç”¨æ­¤é™å®šåç§°åˆ›å»ºâ€œgraphics.Rectangleâ€çš„å®ä¾‹ï¼š 1graphics.Rectangle myRect = new graphics.Rectangle(); é™å®šåç§°å¯¹äºä¸ç»å¸¸ä½¿ç”¨æ¥è¯´æ˜¯åˆé€‚çš„ã€‚ç„¶è€Œï¼Œå½“é‡å¤ä½¿ç”¨åç§°æ—¶ï¼Œé‡å¤é”®å…¥åç§°ä¼šå˜å¾—ä¹å‘³ï¼Œä»£ç ä¹Ÿä¼šå˜å¾—éš¾ä»¥é˜…è¯»ã€‚ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œæ‚¨å¯ä»¥å¯¼å…¥æˆå‘˜æˆ–å…¶åŒ…ï¼Œç„¶åä½¿ç”¨å…¶ç®€å•åç§°ã€‚ å¯¼å…¥åŒ…æˆå‘˜è¦å°†ç‰¹å®šæˆå‘˜å¯¼å…¥åˆ°å½“å‰æ–‡ä»¶ä¸­ï¼Œè¯·åœ¨æ–‡ä»¶å¼€å¤´çš„ä»»ä½•ç±»å‹å®šä¹‰ä¹‹å‰ï¼Œä½†åœ¨â€œpackageâ€è¯­å¥ä¹‹åï¼ˆå¦‚æœæœ‰ï¼‰æ”¾ç½®â€œimportâ€è¯­å¥ã€‚ä¸‹é¢æ˜¯å¦‚ä½•ä»ä¸Šä¸€èŠ‚ä¸­åˆ›å»ºçš„â€œgraphicsâ€åŒ…ä¸­å¯¼å…¥â€œRectangleâ€ç±»ã€‚ 1import graphics.Rectangle; ç°åœ¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç®€å•çš„åç§°å¼•ç”¨â€œRectangleâ€ç±»ã€‚ 1Rectangle myRectangle = new Rectangle(); å¦‚æœæ‚¨åªä½¿ç”¨â€œgraphicsâ€åŒ…ä¸­çš„å‡ ä¸ªæˆå‘˜ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•å¾ˆæœ‰æ•ˆã€‚ä½†æ˜¯å¦‚æœæ‚¨ä½¿ç”¨åŒ…ä¸­çš„è®¸å¤šç±»å‹ï¼Œåˆ™åº”è¯¥å¯¼å…¥æ•´ä¸ªåŒ…ã€‚ å¯¼å…¥æ•´ä¸ªåŒ…è¦å¯¼å…¥ç‰¹å®šåŒ…ä¸­åŒ…å«çš„æ‰€æœ‰ç±»å‹ï¼Œè¯·ä½¿ç”¨å¸¦æœ‰æ˜Ÿå·â€œï¼ˆ*ï¼‰â€é€šé…ç¬¦çš„â€œimportâ€è¯­å¥ã€‚ 1import graphics.*; ç°åœ¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç®€å•çš„åç§°å¼•ç”¨â€œgraphicsâ€åŒ…ä¸­çš„ä»»ä½•ç±»æˆ–æ¥å£ã€‚ 12Circle myCircle = new Circle();Rectangle myRectangle = new Rectangle(); â€œimportâ€è¯­å¥ä¸­çš„æ˜Ÿå·åªèƒ½ç”¨äºæŒ‡å®šåŒ…ä¸­çš„æ‰€æœ‰ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚å®ƒä¸èƒ½ç”¨äºåŒ¹é…åŒ…ä¸­çš„ç±»çš„å­é›†ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å†…å®¹ä¸åŒ¹é…â€œgraphicsâ€åŒ…ä¸­ä»¥â€œAâ€å¼€å¤´çš„æ‰€æœ‰ç±»ã€‚ 12// does not workimport graphics.A*; ç›¸åï¼Œå®ƒä¼šç”Ÿæˆç¼–è¯‘å™¨é”™è¯¯ã€‚ä½¿ç”¨â€œimportâ€è¯­å¥ï¼Œé€šå¸¸åªå¯¼å…¥å•ä¸ªåŒ…æˆå‘˜æˆ–æ•´ä¸ªåŒ…ã€‚ Note: å¦ä¸€ç§ä¸å¤ªå¸¸è§çš„â€œimportâ€å½¢å¼å…è®¸æ‚¨å¯¼å…¥å°é—­ç±»çš„å…¬å…±åµŒå¥—ç±»ã€‚ä¾‹å¦‚ï¼Œå¦‚æœâ€œgraphicsã€‚çŸ©å½¢ç±»åŒ…å«æœ‰ç”¨çš„åµŒå¥—ç±»ï¼Œå¦‚çŸ©å½¢ã€‚DoubleWideå’ŒRectangleã€‚Squareâ€™ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹twoè¯­å¥å¯¼å…¥â€œRectangleâ€åŠå…¶åµŒå¥—ç±»ã€‚ 12import graphics.Rectangle;import graphics.Rectangle.*; è¯·æ³¨æ„ï¼Œç¬¬äºŒæ¡importè¯­å¥ä¸ä¼š*å¯¼å…¥â€œçŸ©å½¢â€ã€‚ å¦ä¸€ç§ä¸å¤ªå¸¸è§çš„â€œimportâ€å½¢å¼ï¼Œå³static importè¯­å¥ï¼Œå°†åœ¨æœ¬èŠ‚æœ«å°¾è®¨è®ºã€‚ ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼ŒJavaç¼–è¯‘å™¨ä¸ºæ¯ä¸ªæºæ–‡ä»¶è‡ªåŠ¨å¯¼å…¥ä¸¤ä¸ªå®Œæ•´çš„åŒ…ï¼šï¼ˆ1ï¼‰Java.langåŒ…å’Œï¼ˆ2ï¼‰å½“å‰åŒ…ï¼ˆå½“å‰æ–‡ä»¶çš„åŒ…ï¼‰ã€‚ åŒ…çš„è¡¨è§‚å±‚æ¬¡ç»“æ„èµ·åˆï¼ŒåŒ…çœ‹èµ·æ¥æ˜¯åˆ†å±‚çš„ï¼Œä½†å®é™…ä¸Šä¸æ˜¯ã€‚ä¾‹å¦‚ï¼ŒJava APIåŒ…å«ä¸€ä¸ªJavaã€‚awtåŒ…ï¼Œä¸€ä¸ªjava.awt.coloråŒ…ï¼Œä¸€ä¸ªjava.awtã€‚å­—ä½“â€œpackageâ€ï¼Œä»¥åŠè®¸å¤šä»¥â€œjava.awtâ€å¼€å¤´çš„å…¶ä»–å­—ä½“ã€‚ç„¶è€Œï¼Œjava.awt.coloråŒ…ï¼Œå³java.awtã€‚fontpackageå’Œå…¶ä»–java.awt.xxxxåŒ…ä¸åŒ…å«åœ¨java.awtåŒ…ã€‚å‰ç¼€java.awtï¼ˆJavaæŠ½è±¡çª—å£å·¥å…·åŒ…ï¼‰ç”¨äºè®¸å¤šç›¸å…³çš„åŒ…ï¼Œä»¥ä½¿å…³ç³»å˜å¾—æ˜æ˜¾ï¼Œä½†ä¸æ˜¾ç¤ºåŒ…å«ã€‚ æ­£åœ¨å¯¼å…¥java.awt.*å¯¼å…¥javaä¸­çš„æ‰€æœ‰ç±»å‹ã€‚awtåŒ…ï¼Œä½†å®ƒä¸å¯¼å…¥java.awt.colorï¼Œjava.awt.coloræˆ–ä»»ä½•å…¶ä»–java.awt.xxxxåŒ…ã€‚å¦‚æœæ‚¨è®¡åˆ’ä½¿ç”¨java.awt.colorâ€ä»¥åŠâ€œjava.awtï¼Œæ‚¨å¿…é¡»å¯¼å…¥ä¸¤ä¸ªåŒ…åŠå…¶æ‰€æœ‰æ–‡ä»¶ï¼š 12import java.awt.*;import java.awt.color.*; åç§°æ­§ä¹‰å¦‚æœä¸€ä¸ªåŒ…ä¸­çš„æˆå‘˜ä¸å¦ä¸€ä¸ªåŒ…çš„æˆå‘˜å…±äº«å…¶åç§°ï¼Œå¹¶ä¸”å¯¼å…¥äº†ä¸¤ä¸ªåŒ…ï¼Œåˆ™å¿…é¡»é€šè¿‡å…¶é™å®šåç§°å¼•ç”¨æ¯ä¸ªæˆå‘˜ã€‚ä¾‹å¦‚ï¼Œâ€œgraphicsâ€åŒ…å®šä¹‰äº†ä¸€ä¸ªåä¸ºâ€œRectangleâ€çš„ç±»ã€‚javaã€‚awtåŒ…è¿˜åŒ…å«ä¸€ä¸ªâ€œçŸ©å½¢â€ç±»ã€‚å¦‚æœâ€œgraphicsâ€å’Œâ€œjavaã€‚awt&#96;å·²å¯¼å…¥ï¼Œä»¥ä¸‹å†…å®¹ä¸æ˜ç¡®ã€‚ 1Rectangle rect; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨æˆå‘˜çš„å®Œå…¨é™å®šåæ¥å‡†ç¡®åœ°æŒ‡ç¤ºæ‰€éœ€çš„â€œçŸ©å½¢â€ç±»ã€‚ä¾‹å¦‚ 1graphics.Rectangle rect; é™æ€å¯¼å…¥è¯­å¥åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦é¢‘ç¹è®¿é—®ä¸€ä¸ªæˆ–ä¸¤ä¸ªç±»ä¸­çš„é™æ€finalå­—æ®µï¼ˆå¸¸é‡ï¼‰å’Œé™æ€æ–¹æ³•ã€‚åå¤ä½¿ç”¨è¿™äº›ç±»çš„åç§°å‰ç¼€å¯èƒ½ä¼šå¯¼è‡´ä»£ç æ··ä¹±ã€‚static importè¯­å¥ä¸ºæ‚¨æä¾›äº†ä¸€ç§æ–¹æ³•æ¥å¯¼å…¥è¦ä½¿ç”¨çš„å¸¸é‡å’Œé™æ€æ–¹æ³•ï¼Œè¿™æ ·æ‚¨å°±ä¸éœ€è¦åœ¨å®ƒä»¬çš„ç±»åç§°å‰åŠ å‰ç¼€ã€‚ â€œjava.lang.Mathâ€ç±»å®šä¹‰äº†â€œPIâ€å¸¸é‡å’Œè®¸å¤šé™æ€æ–¹æ³•ï¼Œ including methods for calculating sines, cosines, tangents, square roots, maxima, minima, exponents, and many more. For example, 123456public static final double PI = 3.141592653589793;public static double cos(double a)&#123; ...&#125; é€šå¸¸ï¼Œè¦ä½¿ç”¨å…¶ä»–ç±»ä¸­çš„è¿™äº›å¯¹è±¡ï¼Œå¯ä»¥åœ¨ç±»åå‰é¢åŠ ä¸Šå‰ç¼€ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 1double r = Math.cos(Math.PI * theta); å¯ä»¥ä½¿ç”¨staticimportè¯­å¥å¯¼å…¥java.lang.Mathçš„é™æ€æˆå‘˜ï¼Œ Math. å¯ä»¥å•ç‹¬å¯¼å…¥â€œMathâ€çš„é™æ€æˆå‘˜ï¼š 1import static java.lang.Math.PI; or as a group: 1import static java.lang.Math.*; ä¸€æ—¦å¯¼å…¥äº†é™æ€æˆå‘˜ï¼Œå°±å¯ä»¥ä¸ç»é™å®šåœ°ä½¿ç”¨å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œä¸Šä¸€ä¸ªä»£ç æ®µå°†å˜ä¸ºï¼š 1double r = cos(PI * theta); æ˜¾ç„¶ï¼Œæ‚¨å¯ä»¥ç¼–å†™è‡ªå·±çš„ç±»ï¼Œè¿™äº›ç±»åŒ…å«ç»å¸¸ä½¿ç”¨çš„å¸¸é‡å’Œé™æ€æ–¹æ³•ï¼Œç„¶åä½¿ç”¨é™æ€importè¯­å¥ã€‚ä¾‹å¦‚ 1import static mypackage.MyConstants.*; Note: éå¸¸è°¨æ…åœ°ä½¿ç”¨é™æ€å¯¼å…¥ã€‚è¿‡åº¦ä½¿ç”¨é™æ€å¯¼å…¥ä¼šå¯¼è‡´ä»£ç éš¾ä»¥è¯»å–å’Œç»´æŠ¤ï¼Œå› ä¸ºä»£ç çš„è¯»è€…ä¸çŸ¥é“å“ªä¸ªç±»å®šä¹‰äº†ç‰¹å®šçš„é™æ€å¯¹è±¡ã€‚å¦‚æœä½¿ç”¨å¾—å½“ï¼Œé™æ€å¯¼å…¥é€šè¿‡æ¶ˆé™¤ç±»åé‡å¤ä½¿ä»£ç æ›´å¯è¯»ã€‚ ç®¡ç†æºæ–‡ä»¶å’Œç±»æ–‡ä»¶Javaå¹³å°çš„è®¸å¤šå®ç°ä¾èµ–äºåˆ†å±‚æ–‡ä»¶ç³»ç»Ÿæ¥ç®¡ç†æºæ–‡ä»¶å’Œç±»æ–‡ä»¶ï¼Œå°½ç®¡Javaè¯­è¨€è§„èŒƒä¸éœ€è¦è¿™æ ·åšã€‚ç­–ç•¥å¦‚ä¸‹ã€‚ å°†ç±»ã€æ¥å£ã€æšä¸¾æˆ–æ³¨é‡Šç±»å‹çš„æºä»£ç æ”¾åœ¨ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶çš„åç§°æ˜¯è¯¥ç±»å‹çš„ç®€å•åç§°ï¼Œæ‰©å±•åä¸ºâ€œ.javaâ€ã€‚ä¾‹å¦‚ï¼š 12345//in the Rectangle.java file package graphics;public class Rectangle &#123; ... &#125; ç„¶åï¼Œå°†æºæ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œè¯¥ç›®å½•çš„åç§°åæ˜ äº†è¯¥ç±»å‹æ‰€å±çš„åŒ…çš„åç§°ï¼š 1.....\\graphics\\Rectangle.java åŒ…æˆå‘˜çš„é™å®šåå’Œæ–‡ä»¶çš„è·¯å¾„åæ˜¯å¹¶è¡Œçš„ï¼Œå‡è®¾Microsoft Windowsæ–‡ä»¶ååˆ†éš”ç¬¦æ˜¯åæ–œæ ï¼ˆå¯¹äºUNIXï¼Œä½¿ç”¨æ­£æ–œæ ï¼‰ã€‚ class name â€“ graphics.Rectangle pathname to file â€“ graphics\\Rectangle.java æ‚¨åº”è¯¥è®°å¾—ï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œä¸€å®¶å…¬å¸ä½¿ç”¨å…¶åå‘çš„äº’è”ç½‘åŸŸåä½œä¸ºå…¶è½¯ä»¶åŒ…åç§°ã€‚Exampleå…¬å¸ï¼Œå…¶InternetåŸŸåä¸ºâ€œExampleâ€ã€‚comâ€å°†åœ¨å…¶æ‰€æœ‰åŒ…åç§°ä¹‹å‰åŠ ä¸Šâ€œcom.exampleâ€ã€‚åŒ…åçš„æ¯ä¸ªç»„ä»¶éƒ½å¯¹åº”äºä¸€ä¸ªå­ç›®å½•ã€‚æ‰€ä»¥ï¼Œå¦‚æœExampleå…¬å¸æœ‰ä¸€ä¸ªâ€œcom.Exampleã€‚åŒ…å«â€œçŸ©å½¢â€çš„å›¾å½¢åŒ…ã€‚java&#96;æºæ–‡ä»¶ï¼Œå®ƒå°†åŒ…å«åœ¨ä¸€ç³»åˆ—å­ç›®å½•ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1....\\com\\example\\graphics\\Rectangle.java ç¼–è¯‘æºæ–‡ä»¶æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä¸ºå…¶ä¸­å®šä¹‰çš„æ¯ä¸ªç±»å‹åˆ›å»ºä¸åŒçš„è¾“å‡ºæ–‡ä»¶ã€‚è¾“å‡ºæ–‡ä»¶çš„åŸºåç§°æ˜¯ç±»å‹çš„åç§°ï¼Œå…¶æ‰©å±•åä¸ºâ€œ.classâ€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæºæ–‡ä»¶å¦‚ä¸‹ 123456789//in the Rectangle.java filepackage com.example.graphics;public class Rectangle &#123; . . . &#125;class Helper&#123; . . . &#125; åˆ™ç¼–è¯‘çš„æ–‡ä»¶å°†ä½äºï¼š 12&lt;path to the parent directory of the output files&gt;\\com\\example\\graphics\\Rectangle.class&lt;path to the parent directory of the output files&gt;\\com\\example\\graphics\\Helper.class å°±åƒã€‚java æºæ–‡ä»¶ï¼Œç¼–è¯‘çš„ã€‚ç±»æ–‡ä»¶åº”ä½äºåæ˜ åŒ…åç§°çš„ä¸€ç³»åˆ—ç›®å½•ä¸­ã€‚ä½†æ˜¯ï¼Œâ€œ.classâ€œæ–‡ä»¶â€ä¸å¿…ä¸â€œâ€çš„è·¯å¾„ç›¸åŒã€‚java&#96;æºæ–‡ä»¶ã€‚æ‚¨å¯ä»¥åˆ†åˆ«æ’åˆ—æºç›®å½•å’Œç±»ç›®å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123&lt;path_one&gt;\\sources\\com\\example\\graphics\\Rectangle.java&lt;path_two&gt;\\classes\\com\\example\\graphics\\Rectangle.class é€šè¿‡è¿™æ ·åšï¼Œæ‚¨å¯ä»¥å°†â€œclassesâ€ç›®å½•äº¤ç»™å…¶ä»–ç¨‹åºå‘˜ï¼Œè€Œä¸å¿…é€éœ²æºä»£ç ã€‚æ‚¨è¿˜éœ€è¦ä»¥è¿™ç§æ–¹å¼ç®¡ç†æºæ–‡ä»¶å’Œç±»æ–‡ä»¶ï¼Œä»¥ä¾¿ç¼–è¯‘å™¨å’ŒJavaè™šæ‹Ÿæœºï¼ˆJVMï¼‰å¯ä»¥æ‰¾åˆ°ç¨‹åºä½¿ç”¨çš„æ‰€æœ‰ç±»å‹ã€‚ é€šè¿‡è¿™æ ·åšï¼Œæ‚¨å¯ä»¥å°†â€œclassesâ€ç›®å½•äº¤ç»™å…¶ä»–ç¨‹åºå‘˜ï¼Œè€Œä¸å¿…é€éœ²æºä»£ç ã€‚æ‚¨è¿˜éœ€è¦ä»¥è¿™ç§æ–¹å¼ç®¡ç†æºæ–‡ä»¶å’Œç±»æ–‡ä»¶ï¼Œä»¥ä¾¿ç¼–è¯‘å™¨å’ŒJavaè™šæ‹Ÿæœºï¼ˆJVMï¼‰å¯ä»¥æ‰¾åˆ°ç¨‹åºä½¿ç”¨çš„æ‰€æœ‰ç±»å‹ã€‚ 1&lt;path_two&gt;\\classes æ˜¯ç±»è·¯å¾„ï¼ŒåŒ…åä¸º 1com.example.graphics, ç„¶åç¼–è¯‘å™¨å’ŒJVMæŸ¥æ‰¾â€œ, .class files in 1&lt;path_two&gt;\\classes\\com\\example\\graphics. ç±»è·¯å¾„å¯ä»¥åŒ…æ‹¬å¤šä¸ªè·¯å¾„ï¼Œç”¨åˆ†å·ï¼ˆWindowsï¼‰æˆ–å†’å·ï¼ˆUNIXï¼‰åˆ†éš”ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å’ŒJVMæœç´¢å½“å‰ç›®å½•å’ŒåŒ…å«Javaå¹³å°ç±»çš„JARæ–‡ä»¶ï¼Œä»¥ä¾¿è¿™äº›ç›®å½•è‡ªåŠ¨ä½äºç±»è·¯å¾„ä¸­ã€‚ è®¾ç½®CLASSPATHç³»ç»Ÿå˜é‡è¦æ˜¾ç¤ºå½“å‰çš„â€œCLASSPATHâ€å˜é‡ï¼Œè¯·åœ¨Windowså’ŒUNIXï¼ˆBourne shellï¼‰ä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 12In Windows: C:\\&gt; set CLASSPATHIn UNIX: % echo $CLASSPATH è¦åˆ é™¤â€œCLASSPATHâ€å˜é‡çš„å½“å‰å†…å®¹ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 12In Windows: C:\\&gt; set CLASSPATH=In UNIX: % unset CLASSPATH; export CLASSPATH è¦è®¾ç½®â€œCLASSPATHâ€å˜é‡ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ˆä¾‹å¦‚ï¼‰ï¼š 12In Windows: C:\\&gt; set CLASSPATH=C:\\users\\george\\java\\classesIn UNIX: % CLASSPATH=/home/george/java/classes; export CLASSPATH åˆ›å»ºå’Œä½¿ç”¨åŒ…æ‘˜è¦è¦ä¸ºç±»å‹åˆ›å»ºåŒ…ï¼Œè¯·å°†â€œpackageâ€è¯­å¥ä½œä¸ºåŒ…å«è¯¥ç±»å‹ï¼ˆç±»ã€æ¥å£ã€æšä¸¾æˆ–æ³¨é‡Šç±»å‹ï¼‰çš„æºæ–‡ä»¶ä¸­çš„ç¬¬ä¸€æ¡è¯­å¥ã€‚ è¦ä½¿ç”¨ä¸åŒåŒ…ä¸­çš„å…¬å…±ç±»å‹ï¼Œå¯ä»¥æœ‰ä¸‰ç§é€‰æ‹©ï¼šï¼ˆ1ï¼‰ä½¿ç”¨ç±»å‹çš„å®Œå…¨é™å®šåç§°ï¼Œï¼ˆ2ï¼‰å¯¼å…¥ç±»å‹ï¼Œæˆ–ï¼ˆ3ï¼‰å¯¼å…¥è¯¥ç±»å‹æ‰€å±çš„æ•´ä¸ªåŒ…ã€‚ åŒ…çš„æºæ–‡ä»¶å’Œç±»æ–‡ä»¶çš„è·¯å¾„ååæ˜ äº†åŒ…çš„åç§°ã€‚ æ‚¨å¯èƒ½éœ€è¦è®¾ç½®â€œCLASSPATHâ€ï¼Œä»¥ä¾¿ç¼–è¯‘å™¨å’ŒJVMå¯ä»¥æ‰¾åˆ°â€œã€‚ç±»æ–‡ä»¶ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"}]},{"title":"Oracle Javaå®˜æ–¹ä»‹ç»","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Oracle-Javaå®˜æ–¹ä»‹ç»","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.279Z","comments":true,"path":"2020/07/Oracle-Javaå®˜æ–¹ä»‹ç»/","link":"","permalink":"https://guoshunfa.com/2020/07/Oracle-Java%E5%AE%98%E6%96%B9%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"æœ¬æ–‡ç« ä»¥jdk8ä¸ºåŸºç¡€è¿›è¡Œç¼–å†™ï¼Œå¦‚æœæƒ³æŸ¥çœ‹åç»­çš„ç‰ˆæœ¬å¯ä»¥å‰å¾€jdkç‰ˆæœ¬ç›®å½•ä¸‹æŸ¥çœ‹ã€‚ ç¿»è¯‘è‡ªï¼šhttps://docs.oracle.com/javase/tutorial/getStarted/intro/definition.html å…³äº Java æŠ€æœ¯Java æŠ€æœ¯æ—¢æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€åˆæ˜¯ä¸€ä¸ªå¹³å°ã€‚ Java ç¼–ç¨‹è¯­è¨€Java ç¼–ç¨‹è¯­è¨€æ˜¯ä¸€ç§é«˜çº§è¯­è¨€ï¼Œå…·æœ‰ä»¥ä¸‹æ‰€æœ‰æµè¡Œè¯­çš„ç‰¹å¾ï¼š ç®€å•çš„é¢å‘å¯¹è±¡åˆ†æ•£å¼å¤šçº¿ç¨‹åŠ¨æ€çš„ æ¶æ„ä¸­ç«‹ä¾¿æºçš„é«˜æ€§èƒ½å¼ºå¤§çš„å®‰å…¨çš„ åœ¨James Gosling å’Œ Henry McGilton æ’°å†™çš„ç™½çš®ä¹¦The Java Language Environmentä¸­è§£é‡Šäº†å‰é¢çš„æ¯ä¸ªæµè¡Œè¯­ ã€‚ åœ¨ Java ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ‰€æœ‰æºä»£ç é¦–å…ˆå†™åœ¨ä»¥æ‰©å±•å.javaç»“å°¾çš„çº¯æ–‡æœ¬æ–‡ä»¶ä¸­ã€‚è¿™äº›æºæ–‡ä»¶é€šè¿‡javacç¼–è¯‘å™¨ç¼–è¯‘æˆ.classæ–‡ä»¶ã€‚.classæ–‡ä»¶ä¸åŒ…å«å¤„ç†å™¨çš„æœ¬æœºä»£ç ï¼›å®ƒåŒ…å«å­—èŠ‚ç â€”â€”Java è™šæ‹Ÿæœº1(Java VM) çš„æœºå™¨è¯­è¨€ã€‚å¯åŠ¨å™¨javaå·¥å…·ç„¶åä½¿ç”¨ Java è™šæ‹Ÿæœºå®ä¾‹è¿è¡Œæ‚¨çš„åº”ç”¨ç¨‹åºã€‚ è½¯ä»¶å¼€å‘è¿‡ç¨‹çš„æ¦‚è¿°ã€‚ å› ä¸º Java VM åœ¨è®¸å¤šä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šå¯ç”¨ï¼Œæ‰€ä»¥ç›¸åŒçš„.classæ–‡ä»¶èƒ½å¤Ÿåœ¨ Microsoft Windowsã€Solarisâ„¢ æ“ä½œç³»ç»Ÿ (Solaris OS)ã€Linux æˆ– Mac OS ä¸Šè¿è¡Œã€‚ä¸€äº›è™šæ‹Ÿæœºï¼Œä¾‹å¦‚ Java SE HotSpot æ¦‚è§ˆï¼Œä¼šåœ¨è¿è¡Œæ—¶æ‰§è¡Œé¢å¤–çš„æ­¥éª¤æ¥æé«˜æ‚¨çš„åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚è¿™åŒ…æ‹¬å„ç§ä»»åŠ¡ï¼Œä¾‹å¦‚æŸ¥æ‰¾æ€§èƒ½ç“¶é¢ˆå’Œé‡æ–°ç¼–è¯‘ï¼ˆåˆ°æœ¬æœºä»£ç ï¼‰ç»å¸¸ä½¿ç”¨çš„ä»£ç éƒ¨åˆ†ã€‚ é€šè¿‡Java VMï¼ŒåŒä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥è¿è¡Œåœ¨å¤šä¸ªå¹³å°ä¸Šã€‚ Java å¹³å°å¹³å°æ˜¯ç¨‹åºè¿è¡Œçš„ç¡¬ä»¶æˆ–è½¯ä»¶ç¯å¢ƒã€‚æˆ‘ä»¬å·²ç»æåˆ°äº†ä¸€äº›æœ€æµè¡Œçš„å¹³å°ï¼Œä¾‹å¦‚ Microsoft Windowsã€Linuxã€Solaris OS å’Œ Mac OSã€‚å¤§å¤šæ•°å¹³å°å¯ä»¥æè¿°ä¸ºæ“ä½œç³»ç»Ÿå’Œåº•å±‚ç¡¬ä»¶çš„ç»„åˆã€‚Java å¹³å°ä¸åŒäºå¤§å¤šæ•°å…¶ä»–å¹³å°ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨å…¶ä»–åŸºäºç¡¬ä»¶çš„å¹³å°ä¹‹ä¸Šçš„çº¯è½¯ä»¶å¹³å°ã€‚ Java å¹³å°æœ‰ä¸¤ä¸ªç»„ä»¶ï¼š Java è™šæ‹Ÿæœº Java åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£( API) æ‚¨å·²ç»äº†è§£äº† Java è™šæ‹Ÿæœºï¼›å®ƒæ˜¯ Java å¹³å°çš„åŸºç¡€ï¼Œå¹¶è¢«ç§»æ¤åˆ°å„ç§åŸºäºç¡¬ä»¶çš„å¹³å°ä¸Šã€‚ API æ˜¯å¤§é‡ç°æˆè½¯ä»¶ç»„ä»¶çš„é›†åˆï¼Œå¯æä¾›è®¸å¤šæœ‰ç”¨çš„åŠŸèƒ½ã€‚å®ƒè¢«åˆ†ç»„ä¸ºç›¸å…³ç±»å’Œæ¥å£çš„åº“ï¼›è¿™äº›åº“è¢«ç§°ä¸ºåŒ…ã€‚ Java æŠ€æœ¯èƒ½åšä»€ä¹ˆï¼Ÿé€šç”¨çš„é«˜çº§ Java ç¼–ç¨‹è¯­è¨€æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è½¯ä»¶å¹³å°ã€‚Java å¹³å°çš„æ¯ä¸ªå®Œæ•´å®ç°éƒ½ä¸ºæ‚¨æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š å¼€å‘å·¥å…·ï¼šå¼€å‘å·¥å…·æä¾›äº†ç¼–è¯‘ã€è¿è¡Œã€ç›‘æ§ã€è°ƒè¯•å’Œè®°å½•åº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡ã€‚ä½œä¸ºæ–°å¼€å‘äººå‘˜ï¼Œæ‚¨å°†ä½¿ç”¨çš„ä¸»è¦å·¥å…·æ˜¯javacç¼–è¯‘å™¨ã€javaå¯åŠ¨å™¨å’Œjavadocæ–‡æ¡£å·¥å…·ã€‚ **åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ (API)**ï¼šAPI æä¾› Java ç¼–ç¨‹è¯­è¨€çš„æ ¸å¿ƒåŠŸèƒ½ã€‚å®ƒæä¾›äº†å¤§é‡æœ‰ç”¨çš„ç±»ï¼Œå¯ä»¥åœ¨æ‚¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚å®ƒæ¶µç›–äº†ä»åŸºæœ¬å¯¹è±¡åˆ°ç½‘ç»œå’Œå®‰å…¨ï¼Œå†åˆ° XML ç”Ÿæˆå’Œæ•°æ®åº“è®¿é—®ç­‰æ–¹æ–¹é¢é¢ã€‚æ ¸å¿ƒAPIéå¸¸åºå¤§ï¼›è¦å¤§è‡´äº†è§£å®ƒåŒ…å«çš„å†…å®¹ï¼Œè¯·å‚é˜… Java Platform Standard Edition 8 æ–‡æ¡£ã€‚ éƒ¨ç½²æŠ€æœ¯ï¼šJDK è½¯ä»¶æä¾›æ ‡å‡†æœºåˆ¶ï¼Œä¾‹å¦‚ Java Web Start è½¯ä»¶å’Œ Java Plug-In è½¯ä»¶ï¼Œç”¨äºå°†æ‚¨çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°æœ€ç»ˆç”¨æˆ·ã€‚ ç”¨æˆ·ç•Œé¢å·¥å…·åŒ…ï¼šJavaFXã€Swing å’Œ Java 2D å·¥å…·åŒ…ä½¿åˆ›å»ºå¤æ‚çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ (GUI) æˆä¸ºå¯èƒ½ã€‚ é›†æˆåº“ï¼šJava IDL APIã€JDBC APIã€Java Naming and Directory Interface (JNDI) APIã€Java RMI å’Œ Java Remote Method Invocation over Internet ORB é—´åè®®æŠ€æœ¯ï¼ˆJava RMI-IIOP æŠ€æœ¯ï¼‰ç­‰é›†æˆåº“æ”¯æŒæ•°æ®åº“è®¿é—®å’Œæ“çºµè¿œç¨‹å¯¹è±¡ã€‚ Java æŠ€æœ¯å°†å¦‚ä½•æ”¹å˜æˆ‘çš„ç”Ÿæ´»ï¼Ÿå¦‚æœæ‚¨å­¦ä¹  Java ç¼–ç¨‹è¯­è¨€ï¼Œæˆ‘ä»¬ä¸èƒ½å‘æ‚¨ä¿è¯ååˆ©ï¼Œç”šè‡³å·¥ä½œã€‚ä¸è¿‡ï¼Œå®ƒå¯èƒ½ä¼šä½¿æ‚¨çš„ç¨‹åºæ›´å¥½ï¼Œå¹¶ä¸”æ¯”å…¶ä»–è¯­è¨€éœ€è¦æ›´å°‘çš„åŠªåŠ›ã€‚æˆ‘ä»¬ç›¸ä¿¡ Java æŠ€æœ¯å°†å¸®åŠ©æ‚¨åšåˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š å¿«é€Ÿä¸Šæ‰‹ï¼šè™½ç„¶ Java ç¼–ç¨‹è¯­è¨€æ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œä½†å®ƒæ˜“äºå­¦ä¹ ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå·²ç»ç†Ÿæ‚‰ C æˆ– C++ çš„ç¨‹åºå‘˜è€Œè¨€ã€‚ ç¼–å†™æ›´å°‘çš„ä»£ç ï¼šç¨‹åºæŒ‡æ ‡ï¼ˆç±»è®¡æ•°ã€æ–¹æ³•è®¡æ•°ç­‰ï¼‰çš„æ¯”è¾ƒè¡¨æ˜ï¼Œç”¨ Java ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„ç¨‹åºæ¯”ç”¨ C++ ç¼–å†™çš„ç›¸åŒç¨‹åºå°å››å€ã€‚ ç¼–å†™æ›´å¥½çš„ä»£ç ï¼šJava ç¼–ç¨‹è¯­è¨€é¼“åŠ±è‰¯å¥½çš„ç¼–ç ä¹ æƒ¯ï¼Œè‡ªåŠ¨åƒåœ¾æ”¶é›†å¯å¸®åŠ©æ‚¨é¿å…å†…å­˜æ³„æ¼ã€‚å®ƒçš„é¢å‘å¯¹è±¡ã€JavaBeansâ„¢ ç»„ä»¶ä½“ç³»ç»“æ„ä»¥åŠèŒƒå›´å¹¿æ³›ã€æ˜“äºæ‰©å±•çš„ API è®©æ‚¨å¯ä»¥é‡ç”¨ç°æœ‰çš„ã€ç»è¿‡æµ‹è¯•çš„ä»£ç å¹¶å‡å°‘å¼•å…¥çš„é”™è¯¯ã€‚ æ›´å¿«åœ°å¼€å‘ç¨‹åºï¼šJava ç¼–ç¨‹è¯­è¨€æ¯” C++ æ›´ç®€å•ï¼Œå› æ­¤ï¼Œä½¿ç”¨å®ƒç¼–å†™æ—¶ï¼Œæ‚¨çš„å¼€å‘æ—¶é—´æœ€å¤šå¯ç¼©çŸ­ä¸€å€ã€‚æ‚¨çš„ç¨‹åºä¹Ÿå°†éœ€è¦æ›´å°‘çš„ä»£ç è¡Œã€‚ é¿å…å¹³å°ä¾èµ–æ€§ï¼šæ‚¨å¯ä»¥é€šè¿‡é¿å…ä½¿ç”¨ä»¥å…¶ä»–è¯­è¨€ç¼–å†™çš„åº“æ¥ä¿æŒç¨‹åºçš„å¯ç§»æ¤æ€§ã€‚ ç¼–å†™ä¸€æ¬¡ï¼Œéšå¤„è¿è¡Œï¼šå› ä¸ºç”¨ Java ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„åº”ç”¨ç¨‹åºè¢«ç¼–è¯‘æˆä¸æœºå™¨æ— å…³çš„å­—èŠ‚ç ï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥åœ¨ä»»ä½• Java å¹³å°ä¸Šä¸€è‡´åœ°è¿è¡Œã€‚ æ›´è½»æ¾åœ°åˆ†å‘è½¯ä»¶ï¼šä½¿ç”¨ Java Web Start è½¯ä»¶ï¼Œç”¨æˆ·åªéœ€å•å‡»é¼ æ ‡å³å¯å¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åºã€‚å¯åŠ¨æ—¶çš„è‡ªåŠ¨ç‰ˆæœ¬æ£€æŸ¥å¯ç¡®ä¿ç”¨æˆ·å§‹ç»ˆä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„è½¯ä»¶ã€‚å¦‚æœæœ‰æ›´æ–°å¯ç”¨ï¼ŒJava Web Start è½¯ä»¶å°†è‡ªåŠ¨æ›´æ–°å…¶å®‰è£…ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"}]},{"title":"Oracle Javaå¼‚å¸¸","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Oracle-Javaå¼‚å¸¸","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.281Z","comments":true,"path":"2020/07/Oracle-Javaå¼‚å¸¸/","link":"","permalink":"https://guoshunfa.com/2020/07/Oracle-Java%E5%BC%82%E5%B8%B8/","excerpt":"","text":"æœ¬æ–‡ç« ä»¥jdk8ä¸ºåŸºç¡€è¿›è¡Œç¼–å†™ï¼Œå¦‚æœæƒ³æŸ¥çœ‹åç»­çš„ç‰ˆæœ¬å¯ä»¥å‰å¾€jdkç‰ˆæœ¬ç›®å½•ä¸‹æŸ¥çœ‹ã€‚ ç¿»è¯‘è‡ªï¼šhttps://docs.oracle.com/javase/tutorial/essential/exceptions/index.html Javaç¼–ç¨‹è¯­è¨€ä½¿ç”¨å¼‚å¸¸æ¥å¤„ç†é”™è¯¯å’Œå…¶ä»–å¼‚å¸¸äº‹ä»¶ã€‚æœ¬è¯¾ç¨‹ä»‹ç»ä½•æ—¶ä»¥åŠå¦‚ä½•ä½¿ç”¨å¼‚å¸¸ã€‚ ä»€ä¹ˆæ˜¯å¼‚å¸¸ï¼Ÿæœ¯è¯­exceptionæ˜¯çŸ­è¯­â€œexceptioneventâ€çš„ç¼©å†™ Definition: å¼‚å¸¸æ˜¯åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„äº‹ä»¶ï¼Œå®ƒä¼šä¸­æ–­ç¨‹åºçš„æ­£å¸¸æŒ‡ä»¤æµã€‚ å½“æ–¹æ³•ä¸­å‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶å°†å…¶ç§»äº¤ç»™è¿è¡Œæ—¶ç³»ç»Ÿã€‚è¯¥å¯¹è±¡ç§°ä¸ºâ€œå¼‚å¸¸å¯¹è±¡â€ï¼ŒåŒ…å«æœ‰å…³é”™è¯¯çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬é”™è¯¯å‘ç”Ÿæ—¶ç¨‹åºçš„ç±»å‹å’ŒçŠ¶æ€ã€‚åˆ›å»ºå¼‚å¸¸å¯¹è±¡å¹¶å°†å…¶ä¼ é€’ç»™è¿è¡Œæ—¶ç³»ç»Ÿç§°ä¸ºâ€œæŠ›å‡ºå¼‚å¸¸â€ã€‚ æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šå°è¯•æ‰¾åˆ°å¤„ç†å®ƒçš„æ–¹æ³•ã€‚å¤„ç†å¼‚å¸¸çš„ä¸€ç»„å¯èƒ½çš„â€œsomethingâ€æ˜¯ä¸ºè·å–å‘ç”Ÿé”™è¯¯çš„æ–¹æ³•è€Œè°ƒç”¨çš„æ–¹æ³•çš„æœ‰åºåˆ—è¡¨ã€‚æ–¹æ³•åˆ—è¡¨ç§°ä¸ºè°ƒç”¨å †æ ˆï¼ˆå‚è§ä¸‹å›¾ï¼‰ã€‚ è°ƒç”¨å †æ ˆã€‚ è¿è¡Œæ—¶ç³»ç»Ÿåœ¨è°ƒç”¨å †æ ˆä¸­æœç´¢åŒ…å«å¯å¤„ç†å¼‚å¸¸çš„ä»£ç å—çš„æ–¹æ³•ã€‚è¿™æ®µä»£ç ç§°ä¸ºå¼‚å¸¸å¤„ç†ç¨‹åºã€‚æœç´¢ä»å‘ç”Ÿé”™è¯¯çš„æ–¹æ³•å¼€å§‹ï¼Œå¹¶æŒ‰ç…§è°ƒç”¨æ–¹æ³•çš„ç›¸åé¡ºåºç»§ç»­æ‰§è¡Œè°ƒç”¨å †æ ˆã€‚æ‰¾åˆ°é€‚å½“çš„å¤„ç†ç¨‹åºåï¼Œè¿è¡Œæ—¶ç³»ç»Ÿå°†å¼‚å¸¸ä¼ é€’ç»™å¤„ç†ç¨‹åºã€‚å¦‚æœæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡çš„ç±»å‹ä¸å¤„ç†ç¨‹åºå¯ä»¥å¤„ç†çš„ç±»å‹åŒ¹é…ï¼Œåˆ™è®¤ä¸ºå¼‚å¸¸å¤„ç†ç¨‹åºæ˜¯åˆé€‚çš„ã€‚ æ‰€é€‰çš„å¼‚å¸¸å¤„ç†ç¨‹åºè¢«ç§°ä¸ºâ€œæ•è·å¼‚å¸¸â€ã€‚å¦‚æœè¿è¡Œæ—¶ç³»ç»Ÿç©·å°½åœ°æœç´¢è°ƒç”¨å †æ ˆä¸Šçš„æ‰€æœ‰æ–¹æ³•ï¼Œè€Œæ²¡æœ‰æ‰¾åˆ°é€‚å½“çš„å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåˆ™è¿è¡Œæ—¶ç³»ç»Ÿï¼ˆå› æ­¤ï¼Œç¨‹åºï¼‰ç»ˆæ­¢ã€‚ æ­£åœ¨è°ƒç”¨å †æ ˆä¸­æœç´¢å¼‚å¸¸å¤„ç†ç¨‹åºã€‚ ä¸ä¼ ç»Ÿçš„é”™è¯¯ç®¡ç†æŠ€æœ¯ç›¸æ¯”ï¼Œä½¿ç”¨å¼‚å¸¸æ¥ç®¡ç†é”™è¯¯å…·æœ‰ä¸€äº›ä¼˜åŠ¿ã€‚æ‚¨å¯ä»¥åœ¨ä¾‹å¤–æƒ…å†µçš„ä¼˜ç‚¹ä¸­äº†è§£æ›´å¤šä¿¡æ¯ç¬¬èŠ‚ã€‚ æ•æ‰æˆ–æŒ‡å®šè¦æ±‚æœ‰æ•ˆçš„Javaç¼–ç¨‹è¯­è¨€ä»£ç å¿…é¡»ç¬¦åˆæ•è·æˆ–æŒ‡å®šè¦æ±‚ã€‚è¿™æ„å‘³ç€å¯èƒ½å¼•å‘æŸäº›å¼‚å¸¸çš„ä»£ç å¿…é¡»ç”±ä»¥ä¸‹ä»»ä¸€é¡¹æ‹¬èµ·æ¥ï¼š æ•è·å¼‚å¸¸çš„â€œtryâ€è¯­å¥ã€‚â€œtryâ€å¿…é¡»ä¸ºå¼‚å¸¸æä¾›å¤„ç†ç¨‹åºï¼Œå¦‚Catching and Handling Exceptionsä¸­æ‰€è¿°. æŒ‡å®šå¯ä»¥å¼•å‘å¼‚å¸¸çš„æ–¹æ³•ã€‚è¯¥æ–¹æ³•å¿…é¡»æä¾›åˆ—å‡ºå¼‚å¸¸çš„â€œthrowsâ€å­å¥ï¼Œå¦‚æŒ‡å®šæ–¹æ³•å¼•å‘çš„å¼‚å¸¸ä¸­æ‰€è¿°. æ— æ³•æ»¡è¶³Catchæˆ–Specifyè¦æ±‚çš„ä»£ç å°†ä¸ä¼šç¼–è¯‘ã€‚ å¹¶éæ‰€æœ‰ä¾‹å¤–éƒ½ç¬¦åˆâ€œæ•è·æˆ–æŒ‡å®šè¦æ±‚â€ã€‚ä¸ºäº†ç†è§£åŸå› ï¼Œæˆ‘ä»¬éœ€è¦ç ”ç©¶ä¸‰ç§åŸºæœ¬çš„ä¾‹å¤–æƒ…å†µï¼Œå…¶ä¸­åªæœ‰ä¸€ç§ä¾‹å¤–æƒ…å†µç¬¦åˆè¦æ±‚ã€‚ ä¸‰ç§ä¾‹å¤–ç¬¬ä¸€ç§å¼‚å¸¸æ˜¯checkedå¼‚å¸¸ã€‚è¿™äº›éƒ½æ˜¯ç¼–å†™è‰¯å¥½çš„åº”ç”¨ç¨‹åºåº”è¯¥é¢„è§å¹¶ä»ä¸­æ¢å¤çš„ä¾‹å¤–æƒ…å†µã€‚ä¾‹å¦‚ï¼Œå‡è®¾åº”ç”¨ç¨‹åºæç¤ºç”¨æˆ·è¾“å…¥æ–‡ä»¶åï¼Œç„¶åé€šè¿‡å°†åç§°ä¼ é€’ç»™â€œjava.io.FileReaderâ€çš„æ„é€ å‡½æ•°æ¥æ‰“å¼€æ–‡ä»¶ã€‚é€šå¸¸ï¼Œç”¨æˆ·æä¾›ç°æœ‰å¯è¯»æ–‡ä»¶çš„åç§°ï¼Œå› æ­¤â€œFileReaderâ€å¯¹è±¡çš„æ„é€ æˆåŠŸï¼Œåº”ç”¨ç¨‹åºçš„æ‰§è¡Œæ­£å¸¸è¿›è¡Œã€‚ä½†æœ‰æ—¶ç”¨æˆ·æä¾›ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶åï¼Œæ„é€ å‡½æ•°æŠ›å‡ºâ€œjava.io.FileNotFoundExceptionâ€ã€‚ç¼–å†™è‰¯å¥½çš„ç¨‹åºå°†æ•è·æ­¤å¼‚å¸¸å¹¶é€šçŸ¥ç”¨æˆ·é”™è¯¯ï¼Œå¯èƒ½ä¼šæç¤ºç”¨æˆ·æ›´æ­£æ–‡ä»¶åã€‚ é€‰ä¸­çš„å¼‚å¸¸*å—æ•è·æˆ–æŒ‡å®šè¦æ±‚çš„çº¦æŸã€‚é™¤â€œé”™è¯¯â€ã€â€œè¿è¡Œæ—¶å¼‚å¸¸â€åŠå…¶å­ç±»æŒ‡ç¤ºçš„å¼‚å¸¸å¤–ï¼Œæ‰€æœ‰å¼‚å¸¸éƒ½æ˜¯æ£€æŸ¥å¼‚å¸¸ã€‚ ç¬¬äºŒç§å¼‚å¸¸æ˜¯errorã€‚è¿™äº›æ˜¯åº”ç”¨ç¨‹åºå¤–éƒ¨çš„å¼‚å¸¸æƒ…å†µï¼Œåº”ç”¨ç¨‹åºé€šå¸¸æ— æ³•é¢„æµ‹æˆ–ä»ä¸­æ¢å¤ã€‚ä¾‹å¦‚ï¼Œå‡è®¾åº”ç”¨ç¨‹åºæˆåŠŸæ‰“å¼€æ–‡ä»¶è¿›è¡Œè¾“å…¥ï¼Œä½†ç”±äºç¡¬ä»¶æˆ–ç³»ç»Ÿæ•…éšœè€Œæ— æ³•è¯»å–æ–‡ä»¶ã€‚è¯»å–å¤±è´¥å°†å¼•å‘â€œjava.io.IOErrorâ€ã€‚åº”ç”¨ç¨‹åºå¯èƒ½ä¼šé€‰æ‹©æ•è·æ­¤å¼‚å¸¸ï¼Œä»¥ä¾¿é€šçŸ¥ç”¨æˆ·é—®é¢˜ï¼Œä½†ç¨‹åºæ‰“å°å †æ ˆè·Ÿè¸ªå¹¶é€€å‡ºä¹Ÿå¯èƒ½æœ‰æ„ä¹‰ã€‚ é”™è¯¯ä¸å—æ•è·æˆ–æŒ‡å®šè¦æ±‚çš„çº¦æŸã€‚é”™è¯¯æ˜¯ç”±â€œé”™è¯¯â€åŠå…¶å­ç±»æŒ‡ç¤ºçš„å¼‚å¸¸ã€‚ ç¬¬ä¸‰ç§å¼‚å¸¸æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ã€‚è¿™äº›æ˜¯åº”ç”¨ç¨‹åºå†…éƒ¨çš„å¼‚å¸¸æƒ…å†µï¼Œåº”ç”¨ç¨‹åºé€šå¸¸æ— æ³•é¢„æµ‹æˆ–ä»ä¸­æ¢å¤ã€‚è¿™äº›é€šå¸¸è¡¨ç¤ºç¼–ç¨‹é”™è¯¯ï¼Œä¾‹å¦‚é€»è¾‘é”™è¯¯æˆ–APIä½¿ç”¨ä¸å½“ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘å‰é¢æè¿°çš„å°†æ–‡ä»¶åä¼ é€’ç»™â€œFileReaderâ€æ„é€ å‡½æ•°çš„åº”ç”¨ç¨‹åºã€‚å¦‚æœé€»è¾‘é”™è¯¯å¯¼è‡´å‘æ„é€ å‡½æ•°ä¼ é€’â€œnullâ€ï¼Œåˆ™æ„é€ å‡½æ•°å°†å¼•å‘â€œNullPointerExceptionâ€ã€‚åº”ç”¨ç¨‹åºå¯ä»¥æ•è·æ­¤å¼‚å¸¸ï¼Œä½†æ¶ˆé™¤å¯¼è‡´å¼‚å¸¸å‘ç”Ÿçš„é”™è¯¯å¯èƒ½æ›´æœ‰æ„ä¹‰ã€‚ è¿è¡Œæ—¶å¼‚å¸¸ä¸å—æ•è·æˆ–æŒ‡å®šè¦æ±‚çš„çº¦æŸã€‚è¿è¡Œæ—¶å¼‚å¸¸æ˜¯ç”±â€œRuntimeExceptionâ€åŠå…¶å­ç±»æŒ‡ç¤ºçš„å¼‚å¸¸ã€‚ é”™è¯¯å’Œè¿è¡Œæ—¶å¼‚å¸¸ç»Ÿç§°ä¸ºâ€œæœªæ£€æŸ¥å¼‚å¸¸â€ã€‚ ç»•è¿‡æ•è·æˆ–æŒ‡å®šä¸€äº›ç¨‹åºå‘˜è®¤ä¸ºCatchæˆ–Specify Requirementæ˜¯å¼‚å¸¸æœºåˆ¶ä¸­çš„ä¸€ä¸ªä¸¥é‡ç¼ºé™·ï¼Œå¹¶é€šè¿‡ä½¿ç”¨æœªæ£€æŸ¥çš„å¼‚å¸¸ä»£æ›¿å·²æ£€æŸ¥çš„å¼‚å¸¸æ¥ç»•è¿‡å®ƒã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸å»ºè®®è¿™æ ·åšã€‚éƒ¨åˆ†æœªé€‰ä¸­çš„ä¾‹å¤–-äº‰è®®è®¨è®ºä½•æ—¶ä½¿ç”¨æœªæ£€æŸ¥çš„å¼‚å¸¸ã€‚ æ•è·å’Œå¤„ç†å¼‚å¸¸æœ¬èŠ‚ä»‹ç»å¦‚ä½•ä½¿ç”¨ä¸‰ä¸ªå¼‚å¸¸å¤„ç†ç¨‹åºç»„ä»¶ï¼ˆâ€œtryâ€ã€â€œcatchâ€å’Œâ€œfinallyâ€å—ï¼‰æ¥ç¼–å†™å¼‚å¸¸å¤„ç†ç¨‹åºã€‚ç„¶åï¼Œè§£é‡Šäº†JavaSE7ä¸­å¼•å…¥çš„â€œtry-â€with resourcesè¯­å¥ã€‚â€œtry-â€with resourcesè¯­å¥ç‰¹åˆ«é€‚ç”¨äºä½¿ç”¨â€œCloseableâ€èµ„æºçš„æƒ…å†µï¼Œä¾‹å¦‚æµã€‚ æœ¬èŠ‚çš„æœ€åä¸€éƒ¨åˆ†å°†é€šè¿‡ä¸€ä¸ªç¤ºä¾‹ï¼Œåˆ†æå„ç§åœºæ™¯ä¸­å‘ç”Ÿçš„æƒ…å†µã€‚ ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰å¹¶å®ç°äº†ä¸€ä¸ªåä¸ºâ€œListOfNumbersâ€çš„ç±»ã€‚æ„é€ æ—¶ï¼Œâ€œListOfNumbersâ€åˆ›å»ºä¸€ä¸ªâ€œArrayListâ€ï¼Œå…¶ä¸­åŒ…å«10ä¸ªâ€œIntegerâ€å…ƒç´ ï¼Œè¿™äº›å…ƒç´ çš„é¡ºåºå€¼ä¸º0åˆ°9ã€‚â€œListOfNumberâ€ç±»è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸ºâ€œwriteListâ€çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†æ•°å­—åˆ—è¡¨å†™å…¥åä¸ºâ€œOutFile.txtâ€çš„æ–‡æœ¬æ–‡ä»¶ä¸­ã€‚æ­¤ç¤ºä¾‹ä½¿ç”¨javaä¸­å®šä¹‰çš„è¾“å‡ºç±»ã€‚ioï¼ŒåŒ…æ‹¬åœ¨åŸºæœ¬I&#x2F;Oä¸­. 12345678910111213141516171819202122232425262728// Note: This class will not compile yet.import java.io.*;import java.util.List;import java.util.ArrayList;public class ListOfNumbers &#123; private List&lt;Integer&gt; list; private static final int SIZE = 10; public ListOfNumbers () &#123; list = new ArrayList&lt;Integer&gt;(SIZE); for (int i = 0; i &lt; SIZE; i++) &#123; list.add(new Integer(i)); &#125; &#125; public void writeList() &#123; // The FileWriter constructor throws IOException, which must be caught. PrintWriter out = new PrintWriter(new FileWriter(&quot;OutFile.txt&quot;)); for (int i = 0; i &lt; SIZE; i++) &#123; // The get(int) method throws IndexOutOfBoundsException, which must be caught. out.println(&quot;Value at: &quot; + i + &quot; = &quot; + list.get(i)); &#125; out.close(); &#125;&#125; ç²—ä½“çš„ç¬¬ä¸€è¡Œæ˜¯å¯¹æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚æ„é€ å‡½æ•°åˆå§‹åŒ–æ–‡ä»¶ä¸Šçš„è¾“å‡ºæµã€‚å¦‚æœæ— æ³•æ‰“å¼€æ–‡ä»¶ï¼Œæ„é€ å‡½æ•°å°†æŠ›å‡ºâ€œIOExceptionâ€ã€‚ç¬¬äºŒä¸ªç²—ä½“è¡Œæ˜¯å¯¹â€œArrayListâ€ç±»çš„â€œgetâ€æ–¹æ³•çš„è°ƒç”¨ï¼Œå¦‚æœå…¶å‚æ•°å€¼å¤ªå°ï¼ˆå°äº0ï¼‰æˆ–å¤ªå¤§ï¼ˆå¤§äºâ€œArrayListâ€å½“å‰åŒ…å«çš„å…ƒç´ æ•°ï¼‰ï¼Œåˆ™ä¼šæŠ›å‡ºâ€œIndexOutOfBoundsExceptionâ€ã€‚ å¦‚æœå°è¯•ç¼–è¯‘ListOfNumbersç±»ï¼Œç¼–è¯‘å™¨å°†æ‰“å°ä¸€æ¡å…³äºâ€œFileWriterâ€æ„é€ å‡½æ•°å¼•å‘çš„å¼‚å¸¸çš„é”™è¯¯æ¶ˆæ¯ã€‚ä½†æ˜¯ï¼Œå®ƒä¸ä¼šæ˜¾ç¤ºæœ‰å…³â€œgetâ€å¼•å‘çš„å¼‚å¸¸çš„é”™è¯¯æ¶ˆæ¯ã€‚åŸå› æ˜¯æ„é€ å‡½æ•°æŠ›å‡ºçš„å¼‚å¸¸â€œIOExceptionâ€æ˜¯ä¸€ä¸ªå·²æ£€æŸ¥çš„å¼‚å¸¸ï¼Œè€Œâ€œgetâ€æ–¹æ³•å¼•å‘çš„å¼‚å¸¸â€œIndexOutOfBoundsExceptionâ€æ˜¯æœªæ£€æŸ¥çš„å¼‚å¸¸ã€‚ ç°åœ¨ï¼Œæ‚¨å·²ç»ç†Ÿæ‚‰äº†â€œListOfNumbersâ€ç±»ä»¥åŠå¯ä»¥åœ¨å…¶ä¸­æŠ›å‡ºå¼‚å¸¸çš„ä½ç½®ï¼Œç°åœ¨å°±å¯ä»¥ç¼–å†™å¼‚å¸¸å¤„ç†ç¨‹åºæ¥æ•è·å’Œå¤„ç†è¿™äº›å¼‚å¸¸äº†ã€‚ The try Blockæ„é€ å¼‚å¸¸å¤„ç†ç¨‹åºçš„ç¬¬ä¸€æ­¥æ˜¯å°†å¯èƒ½å¼•å‘å¼‚å¸¸çš„ä»£ç å°è£…åœ¨â€œtryâ€å—ä¸­ã€‚é€šå¸¸ï¼Œâ€œtryâ€å—å¦‚ä¸‹æ‰€ç¤ºï¼š 1234try &#123; code&#125;catch and finally blocks . . . ç¤ºä¾‹ä¸­æ ‡è®°ä¸ºâ€œcodeâ€çš„æ®µåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå¯èƒ½å¼•å‘å¼‚å¸¸çš„åˆæ³•ä»£ç è¡Œã€‚ï¼ˆâ€œcatchâ€å’Œâ€œfinallyâ€å—å°†åœ¨æ¥ä¸‹æ¥çš„ä¸¤ä¸ªå°èŠ‚ä¸­è§£é‡Šã€‚ï¼‰ è¦ä»â€œListOfNumbersâ€ç±»æ„é€ â€œwriteListâ€æ–¹æ³•çš„å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œè¯·åœ¨â€œtryâ€å—ä¸­åŒ…å«â€œwriteListâ€œæ–¹æ³•çš„å¼‚å¸¸æŠ›å‡ºè¯­å¥ã€‚æœ‰ä¸æ­¢ä¸€ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚æ‚¨å¯ä»¥å°†å¯èƒ½å¼•å‘å¼‚å¸¸çš„æ¯ä¸€è¡Œä»£ç æ”¾åœ¨è‡ªå·±çš„â€œtryâ€å—ä¸­ï¼Œå¹¶ä¸ºæ¯ä¸€è¡Œæä¾›å•ç‹¬çš„å¼‚å¸¸å¤„ç†ç¨‹åºã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥å°†æ‰€æœ‰â€œwriteListâ€ä»£ç æ”¾åœ¨ä¸€ä¸ªâ€œtryâ€å—ä¸­ï¼Œå¹¶å°†å¤šä¸ªå¤„ç†ç¨‹åºä¸ä¹‹å…³è”ã€‚ä¸‹é¢çš„åˆ—è¡¨å¯¹æ•´ä¸ªæ–¹æ³•ä½¿ç”¨ä¸€ä¸ªâ€œtryâ€å—ï¼Œå› ä¸ºæ‰€è®¨è®ºçš„ä»£ç å¾ˆçŸ­ã€‚ 123456789101112131415private List&lt;Integer&gt; list;private static final int SIZE = 10;public void writeList() &#123; PrintWriter out = null; try &#123; System.out.println(&quot;Entered try statement&quot;); FileWriter f = new FileWriter(&quot;OutFile.txt&quot;); out = new PrintWriter(f); for (int i = 0; i &lt; SIZE; i++) &#123; out.println(&quot;Value at: &quot; + i + &quot; = &quot; + list.get(i)); &#125; &#125; catch and finally blocks . . .&#125; å¦‚æœâ€œtryâ€å—ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™è¯¥å¼‚å¸¸å°†ç”±ä¸å…¶å…³è”çš„å¼‚å¸¸å¤„ç†ç¨‹åºå¤„ç†ã€‚è¦å°†å¼‚å¸¸å¤„ç†ç¨‹åºä¸â€œtryâ€å—å…³è”ï¼Œå¿…é¡»åœ¨å…¶åé¢æ”¾ç½®â€œcatchâ€å—ï¼›ä¸‹ä¸€èŠ‚ï¼Œæ•æ‰å—ï¼Œå‘æ‚¨å±•ç¤ºäº†å¦‚ä½•æ“ä½œã€‚ The catch Blocksé€šè¿‡åœ¨â€œtryâ€å—ä¹‹åç›´æ¥æä¾›ä¸€ä¸ªæˆ–å¤šä¸ªâ€œcatchâ€å—ï¼Œå¯ä»¥å°†å¼‚å¸¸å¤„ç†ç¨‹åºä¸â€œtryâ€å—ç›¸å…³è”ã€‚â€œtryâ€å—çš„ç»“å°¾å’Œç¬¬ä¸€ä¸ªâ€œcatchâ€å—çš„å¼€å¤´ä¹‹é—´ä¸èƒ½æœ‰ä»£ç ã€‚ 1234567try &#123;&#125; catch (ExceptionType name) &#123;&#125; catch (ExceptionType name) &#123;&#125; æ¯ä¸ªâ€œcatchâ€å—éƒ½æ˜¯ä¸€ä¸ªå¼‚å¸¸å¤„ç†ç¨‹åºï¼Œç”¨äºå¤„ç†å…¶å‚æ•°æ‰€æŒ‡ç¤ºçš„å¼‚å¸¸ç±»å‹ã€‚å‚æ•°ç±»å‹â€œExceptionTypeâ€å£°æ˜å¤„ç†ç¨‹åºå¯ä»¥å¤„ç†çš„å¼‚å¸¸ç±»å‹ï¼Œå¹¶ä¸”å¿…é¡»æ˜¯ä»â€œThrowableâ€ç±»ç»§æ‰¿çš„ç±»çš„åç§°ã€‚å¤„ç†ç¨‹åºå¯ä»¥ä½¿ç”¨â€œnameâ€å¼•ç”¨å¼‚å¸¸ã€‚ â€œcatchâ€å—åŒ…å«åœ¨è°ƒç”¨å¼‚å¸¸å¤„ç†ç¨‹åºæ—¶æ‰§è¡Œçš„ä»£ç ã€‚å½“å¼‚å¸¸å¤„ç†ç¨‹åºæ˜¯è°ƒç”¨å †æ ˆä¸­ç¬¬ä¸€ä¸ªâ€œExceptionTypeâ€ä¸æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹åŒ¹é…çš„å¼‚å¸¸å¤„ç†ç¨‹åºæ—¶ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿè°ƒç”¨å¼‚å¸¸å¤„ç†ç¨‹åºã€‚å¦‚æœæŠ›å‡ºçš„å¯¹è±¡å¯ä»¥åˆæ³•åœ°åˆ†é…ç»™å¼‚å¸¸å¤„ç†ç¨‹åºçš„å‚æ•°ï¼Œåˆ™ç³»ç»Ÿè®¤ä¸ºå®ƒæ˜¯åŒ¹é…çš„ã€‚ ä»¥ä¸‹æ˜¯â€œwriteListâ€æ–¹æ³•çš„ä¸¤ä¸ªå¼‚å¸¸å¤„ç†ç¨‹åºï¼š 1234567try &#123;&#125; catch (IndexOutOfBoundsException e) &#123; System.err.println(&quot;IndexOutOfBoundsException: &quot; + e.getMessage());&#125; catch (IOException e) &#123; System.err.println(&quot;Caught IOException: &quot; + e.getMessage());&#125; å¼‚å¸¸å¤„ç†ç¨‹åºå¯ä»¥åšçš„ä¸ä»…ä»…æ˜¯æ‰“å°é”™è¯¯æ¶ˆæ¯æˆ–åœæ­¢ç¨‹åºã€‚ä»–ä»¬å¯ä»¥æ‰§è¡Œé”™è¯¯æ¢å¤ï¼Œæç¤ºç”¨æˆ·åšå‡ºå†³å®šï¼Œæˆ–ä½¿ç”¨é“¾å¼å¼‚å¸¸å°†é”™è¯¯ä¼ æ’­åˆ°æ›´é«˜çº§åˆ«çš„å¤„ç†ç¨‹åºï¼Œå¦‚chained exceptionsä¸­æ‰€è¿°ç¬¬èŠ‚ã€‚ ç”¨ä¸€ä¸ªå¼‚å¸¸å¤„ç†ç¨‹åºæ•è·å¤šç§ç±»å‹çš„å¼‚å¸¸åœ¨JavaSE7åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œå•ä¸ªâ€œcatchâ€å—å¯ä»¥å¤„ç†å¤šç§ç±»å‹çš„å¼‚å¸¸ã€‚æ­¤åŠŸèƒ½å¯ä»¥å‡å°‘ä»£ç é‡å¤ï¼Œå¹¶å‡å°‘æ•æ‰è¿‡å¤§å¼‚å¸¸çš„è¯±æƒ‘ã€‚ åœ¨â€œcatchâ€å­å¥ä¸­ï¼ŒæŒ‡å®šå—å¯ä»¥å¤„ç†çš„å¼‚å¸¸ç±»å‹ï¼Œå¹¶ç”¨ç«–æ¡ï¼ˆâ€œ|â€ï¼‰åˆ†éš”æ¯ä¸ªå¼‚å¸¸ç±»å‹ï¼š 1234catch (IOException|SQLException ex) &#123; logger.log(ex); throw ex;&#125; Note: å¦‚æœâ€œcatchâ€å—å¤„ç†å¤šä¸ªå¼‚å¸¸ç±»å‹ï¼Œåˆ™â€œcatchâ€å‚æ•°éšå¼ä¸ºâ€œfinalâ€ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œâ€œcatchâ€å‚æ•°â€œexâ€æ˜¯â€œfinalâ€ï¼Œå› æ­¤ä¸èƒ½åœ¨â€œcatchâ€å—ä¸­ä¸ºå…¶èµ‹å€¼ã€‚ The finally Blockå½“â€œtryâ€å—é€€å‡ºæ—¶ï¼Œâ€œfinallyâ€å—å§‹ç»ˆæ‰§è¡Œã€‚è¿™ç¡®ä¿å³ä½¿å‘ç”Ÿæ„å¤–å¼‚å¸¸ï¼Œä¹Ÿæ‰§è¡Œâ€œfinallyâ€å—ã€‚ä½†â€œfinallyâ€ä¸ä»…ä»…å¯¹å¼‚å¸¸å¤„ç†æœ‰ç”¨ï¼Œå®ƒå…è®¸ç¨‹åºå‘˜é¿å…æ¸…ç†ä»£ç è¢«â€œreturnâ€ã€â€œcontinueâ€æˆ–â€œbreakâ€æ„å¤–ç»•è¿‡ã€‚å°†æ¸…ç†ä»£ç æ”¾åœ¨â€œfinallyâ€å—ä¸­å§‹ç»ˆæ˜¯ä¸€ç§å¾ˆå¥½çš„åšæ³•ï¼Œå³ä½¿é¢„è®¡ä¸ä¼šå‡ºç°å¼‚å¸¸ã€‚ æ³¨æ„ï¼šå¦‚æœåœ¨æ‰§è¡Œâ€œtryâ€æˆ–â€œcatchâ€ä»£ç æ—¶JVMé€€å‡ºï¼Œåˆ™â€œfinallyâ€å—å¯èƒ½ä¸ä¼šæ‰§è¡Œã€‚ æ‚¨åœ¨æ­¤ä½¿ç”¨çš„â€œwriteListâ€æ–¹æ³•çš„â€œtryâ€å—å°†æ‰“å¼€ä¸€ä¸ªâ€œPrintWriterâ€ã€‚ç¨‹åºåº”åœ¨é€€å‡ºâ€œwriteListâ€æ–¹æ³•ä¹‹å‰å…³é—­è¯¥æµã€‚è¿™å¸¦æ¥äº†ä¸€ä¸ªæœ‰ç‚¹å¤æ‚çš„é—®é¢˜ï¼Œå› ä¸ºâ€œwriteListâ€çš„â€œtryâ€å—å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼ä¹‹ä¸€é€€å‡ºã€‚ â€œnew FileWriterâ€è¯­å¥å¤±è´¥å¹¶å¼•å‘â€œIOExceptionâ€ã€‚ list.get(i)è¯­å¥å¤±è´¥å¹¶æŠ›å‡ºIndexOutOfBoundsExceptionã€‚ ä¸€åˆ‡éƒ½æˆåŠŸï¼Œâ€œtryâ€å—æ­£å¸¸é€€å‡ºã€‚ è¿è¡Œæ—¶ç³»ç»Ÿæ€»æ˜¯åœ¨â€œfinallyâ€å—ä¸­æ‰§è¡Œè¯­å¥ï¼Œè€Œä¸ç®¡â€œtryâ€å—ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚æ‰€ä»¥è¿™æ˜¯è¿›è¡Œæ¸…ç†çš„æœ€ä½³åœºæ‰€ã€‚ â€œwriteListâ€æ–¹æ³•çš„ä»¥ä¸‹â€œfinallyâ€å—å°†æ¸…é™¤ï¼Œç„¶åå…³é—­â€œPrintWriterâ€å’Œâ€œFileWriterâ€ã€‚ 123456789101112finally &#123; if (out != null) &#123; System.out.println(&quot;Closing PrintWriter&quot;); out.close(); &#125; else &#123; System.out.println(&quot;PrintWriter not open&quot;); &#125; if (f != null) &#123; System.out.println(&quot;Closing FileWriter&quot;); f.close(); &#125; &#125; é‡è¦çš„: å…³é—­æ–‡ä»¶æˆ–ä»¥å…¶ä»–æ–¹å¼æ¢å¤èµ„æºæ—¶ï¼Œè¯·ä½¿ç”¨â€œtry-â€with resourcesè¯­å¥ï¼Œè€Œä¸æ˜¯â€œfinallyâ€å—ã€‚ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨â€œtryâ€-with-resourcesè¯­å¥æ¸…ç†å¹¶å…³é—­â€œwriteListâ€æ–¹æ³•çš„â€œPrintWriterâ€å’Œâ€œFileWriterâ€ï¼š 12345678public void writeList() throws IOException &#123; try (FileWriter f = new FileWriter(&quot;OutFile.txt&quot;); PrintWriter out = new PrintWriter(f)) &#123; for (int i = 0; i &lt; SIZE; i++) &#123; out.println(&quot;Value at: &quot; + i + &quot; = &quot; + list.get(i)); &#125; &#125;&#125; â€œtryâ€-with-resourcesè¯­å¥åœ¨ä¸å†éœ€è¦æ—¶è‡ªåŠ¨é‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚ See The try-with-resources Statement. The try-with-resources Statementâ€œtryâ€-with-resourcesè¯­å¥æ˜¯å£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºçš„â€œtryâ€è¯­å¥ã€‚èµ„æºæ˜¯ç¨‹åºå®Œæˆåå¿…é¡»å…³é—­çš„å¯¹è±¡ã€‚â€œtryâ€-with-resourcesè¯­å¥ç¡®ä¿æ¯ä¸ªèµ„æºéƒ½åœ¨è¯­å¥æœ«å°¾å…³é—­ã€‚ å®ç°java.lang.AutoCloseableçš„ä»»ä½•å¯¹è±¡ï¼ŒåŒ…æ‹¬å®ç°java.io.AutoCloseableï¼Œå¯ç”¨ä½œèµ„æºã€‚ ä»¥ä¸‹ç¤ºä¾‹ä»æ–‡ä»¶ä¸­è¯»å–ç¬¬ä¸€è¡Œã€‚å®ƒä½¿ç”¨â€œFileReaderâ€å’Œâ€œBufferedReaderâ€çš„å®ä¾‹ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ã€‚FileReaderå’ŒBufferedReaderæ˜¯ç¨‹åºå®Œæˆåå¿…é¡»å…³é—­çš„èµ„æºï¼š 123456static String readFirstLineFromFile(String path) throws IOException &#123; try (FileReader fr = new FileReader(path); BufferedReader br = new BufferedReader(fr)) &#123; return br.readLine(); &#125;&#125; åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œâ€œtryâ€-with-resourcesè¯­å¥ä¸­å£°æ˜çš„èµ„æºæ˜¯â€œFileReaderâ€å’Œâ€œBufferedReaderâ€ã€‚è¿™äº›èµ„æºçš„å£°æ˜è¯­å¥å‡ºç°åœ¨â€œtryâ€å…³é”®å­—åé¢çš„æ‹¬å·å†…ã€‚Java SE 7å’Œæ›´é«˜ç‰ˆæœ¬ä¸­çš„ç±»â€œFileReaderâ€å’Œâ€œBufferedReaderâ€å®ç°äº†æ¥å£â€œJava.lang.AutoCloseableâ€ã€‚ç”±äºâ€œFileReaderâ€å’Œâ€œBufferedReaderâ€å®ä¾‹æ˜¯åœ¨â€œtryâ€with resourceè¯­å¥ä¸­å£°æ˜çš„ï¼Œå› æ­¤æ— è®ºâ€œtryè¯­å¥æ˜¯æ­£å¸¸å®Œæˆè¿˜æ˜¯çªç„¶å®Œæˆï¼ˆç”±äºæ–¹æ³•â€œBufferedReader.readLineâ€å¼•å‘äº†â€œIOExceptionâ€ï¼‰ï¼Œå®ƒä»¬éƒ½å°†è¢«å…³é—­ã€‚ åœ¨JavaSE7ä¹‹å‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨â€œfinallyâ€å—æ¥ç¡®ä¿å…³é—­èµ„æºï¼Œè€Œä¸ç®¡â€œtryâ€è¯­å¥æ˜¯æ­£å¸¸å®Œæˆè¿˜æ˜¯çªç„¶å®Œæˆã€‚ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨â€œfinallyâ€å—è€Œä¸æ˜¯â€œtryâ€-with-resourcesè¯­å¥ï¼š 1234567891011static String readFirstLineFromFileWithFinallyBlock(String path) throws IOException &#123; FileReader fr = new FileReader(path); BufferedReader br = new BufferedReader(fr); try &#123; return br.readLine(); &#125; finally &#123; br.close(); fr.close(); &#125;&#125; ä½†æ˜¯ï¼Œæ­¤ç¤ºä¾‹å¯èƒ½å­˜åœ¨èµ„æºæ³„æ¼ã€‚ç¨‹åºåœ¨ä½¿ç”¨å®Œèµ„æºåï¼Œé™¤äº†ä¾é åƒåœ¾æ”¶é›†å™¨ï¼ˆGCï¼‰å›æ”¶èµ„æºçš„å†…å­˜ä¹‹å¤–ï¼Œè¿˜éœ€è¦åšæ›´å¤šçš„å·¥ä½œã€‚ç¨‹åºè¿˜å¿…é¡»å°†èµ„æºé‡Šæ”¾å›æ“ä½œç³»ç»Ÿï¼Œé€šå¸¸é€šè¿‡è°ƒç”¨èµ„æºçš„â€œcloseâ€æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå¦‚æœç¨‹åºåœ¨GCå›æ”¶èµ„æºä¹‹å‰æœªèƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œé‚£ä¹ˆé‡Šæ”¾èµ„æºæ‰€éœ€çš„ä¿¡æ¯å°±ä¼šä¸¢å¤±ã€‚è¿è¡Œç³»ç»Ÿä»è®¤ä¸ºæ­£åœ¨ä½¿ç”¨çš„èµ„æºå·²ç»æ³„æ¼ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå¦‚æœâ€œreadLineâ€æ–¹æ³•å¼•å‘å¼‚å¸¸ï¼Œåˆ™è¯­å¥â€œbrâ€ã€‚â€œfinallyâ€å—ä¸­çš„closeï¼ˆï¼‰â€å¼•å‘å¼‚å¸¸ï¼Œåˆ™â€œFileReaderâ€å·²æ³„æ¼ã€‚å› æ­¤ï¼Œä½¿ç”¨â€œtryâ€-with-resourcesè¯­å¥è€Œä¸æ˜¯â€œfinallyâ€å—æ¥å…³é—­ç¨‹åºçš„èµ„æºã€‚ å¦‚æœæ–¹æ³•â€œreadLineâ€å’Œâ€œcloseâ€éƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™æ–¹æ³•â€œreadFirstLineFromFileWithFinallyBlockâ€æŠ›å‡ºä»â€œfinallyâ€å—æŠ›å‡ºçš„å¼‚å¸¸ï¼›æŠ‘åˆ¶ä»â€œtryâ€å—æŠ›å‡ºçš„å¼‚å¸¸ã€‚ç›¸åï¼Œåœ¨ç¤ºä¾‹â€œreadFirstLineFromFileâ€ä¸­ï¼Œå¦‚æœåŒæ—¶ä»â€œtryâ€å—å’Œâ€œtry-with resourcesâ€è¯­å¥æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™æ–¹æ³•â€œreadFirst LineFromFileâ€å°†æŠ›å‡ºä»â€œtryâ€å—æŠ›å‡ºçš„å¼‚å¸¸ï¼›ä»â€œtryâ€-with-resourceså—æŠ›å‡ºçš„å¼‚å¸¸è¢«æŠ‘åˆ¶ã€‚åœ¨Java SE 7åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œæ‚¨å¯ä»¥æ£€ç´¢æŠ‘åˆ¶çš„å¼‚å¸¸ï¼›è¯·å‚è§æŠ‘åˆ¶çš„å¼‚å¸¸ä¸€èŠ‚ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚ ä»¥ä¸‹ç¤ºä¾‹æ£€ç´¢zipæ–‡ä»¶â€œzipFileNameâ€ä¸­æ‰“åŒ…çš„æ–‡ä»¶çš„åç§°ï¼Œå¹¶åˆ›å»ºåŒ…å«è¿™äº›æ–‡ä»¶åç§°çš„æ–‡æœ¬æ–‡ä»¶ï¼š 123456789101112131415161718192021222324252627282930public static void writeToFileZipFileContents(String zipFileName, String outputFileName) throws java.io.IOException &#123; java.nio.charset.Charset charset = java.nio.charset.StandardCharsets.US_ASCII; java.nio.file.Path outputFilePath = java.nio.file.Paths.get(outputFileName); // Open zip file and create output file with // try-with-resources statement try ( java.util.zip.ZipFile zf = new java.util.zip.ZipFile(zipFileName); java.io.BufferedWriter writer = java.nio.file.Files.newBufferedWriter(outputFilePath, charset) ) &#123; // Enumerate each entry for (java.util.Enumeration entries = zf.entries(); entries.hasMoreElements();) &#123; // Get the entry name and write it to the output file String newLine = System.getProperty(&quot;line.separator&quot;); String zipEntryName = ((java.util.zip.ZipEntry)entries.nextElement()).getName() + newLine; writer.write(zipEntryName, 0, zipEntryName.length()); &#125; &#125;&#125; åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œâ€œtryâ€-with-resourcesè¯­å¥åŒ…å«ä¸¤ä¸ªç”¨åˆ†å·åˆ†éš”çš„å£°æ˜ï¼šâ€œZipFileâ€å’Œâ€œBufferedWriterâ€ã€‚å½“ç›´æ¥è·Ÿéšå®ƒçš„ä»£ç å—ç»ˆæ­¢æ—¶ï¼Œæ— è®ºæ˜¯æ­£å¸¸ç»ˆæ­¢è¿˜æ˜¯ç”±äºå¼‚å¸¸ç»ˆæ­¢ï¼Œâ€œBufferedWriterâ€å’Œâ€œZipFileâ€å¯¹è±¡çš„â€œcloseâ€æ–¹æ³•éƒ½ä¼šæŒ‰æ­¤é¡ºåºè‡ªåŠ¨è°ƒç”¨ã€‚è¯·æ³¨æ„ï¼Œèµ„æºçš„â€œcloseâ€æ–¹æ³•çš„è°ƒç”¨é¡ºåºä¸å…¶åˆ›å»ºé¡ºåºç›¸åã€‚ ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨â€œtryâ€-with-resourcesè¯­å¥è‡ªåŠ¨å…³é—­â€œjava.sqlâ€ã€‚è¯­å¥&#96;object: 123456789101112131415161718192021public static void viewTable(Connection con) throws SQLException &#123; String query = &quot;select COF_NAME, SUP_ID, PRICE, SALES, TOTAL from COFFEES&quot;; try (Statement stmt = con.createStatement()) &#123; ResultSet rs = stmt.executeQuery(query); while (rs.next()) &#123; String coffeeName = rs.getString(&quot;COF_NAME&quot;); int supplierID = rs.getInt(&quot;SUP_ID&quot;); float price = rs.getFloat(&quot;PRICE&quot;); int sales = rs.getInt(&quot;SALES&quot;); int total = rs.getInt(&quot;TOTAL&quot;); System.out.println(coffeeName + &quot;, &quot; + supplierID + &quot;, &quot; + price + &quot;, &quot; + sales + &quot;, &quot; + total); &#125; &#125; catch (SQLException e) &#123; JDBCTutorialUtilities.printSQLException(e); &#125;&#125; èµ„æº&#96;java.sqlã€‚æœ¬ä¾‹ä¸­ä½¿ç”¨çš„è¯­å¥æ˜¯JDBC4.1å’Œæ›´é«˜ç‰ˆæœ¬APIçš„ä¸€éƒ¨åˆ†ã€‚ æ³¨æ„ï¼šâ€œtryâ€-with-resourcesè¯­å¥å¯ä»¥æœ‰â€œcatchâ€å’Œâ€œfinallyâ€å—ï¼Œå°±åƒæ™®é€šçš„â€œtryâ€è¯­å¥ä¸€æ ·ã€‚åœ¨â€œtryâ€-with-resourcesè¯­å¥ä¸­ï¼Œä»»ä½•â€œcatchâ€æˆ–â€œfinallyâ€å—éƒ½åœ¨å£°æ˜çš„èµ„æºå…³é—­åè¿è¡Œã€‚ æŠ‘åˆ¶çš„å¼‚å¸¸å¯ä»¥ä»ä¸â€œtryâ€-with-resourcesè¯­å¥å…³è”çš„ä»£ç å—ä¸­æŠ›å‡ºå¼‚å¸¸ã€‚åœ¨ç¤ºä¾‹â€œwriteToFileZipFileContentsâ€ä¸­ï¼Œå½“è¯•å›¾å…³é—­â€œZipFileâ€å’Œâ€œBufferedWriterâ€å¯¹è±¡æ—¶ï¼Œå¯ä»¥ä»â€œtryâ€å—å¼•å‘ä¸€ä¸ªå¼‚å¸¸ï¼Œè€Œâ€œtry-with resourcesâ€è¯­å¥æœ€å¤šå¯ä»¥å¼•å‘ä¸¤ä¸ªå¼‚å¸¸ã€‚å¦‚æœä»â€œtryâ€å—ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä¸”ä»â€œtry-with-resourcesâ€è¯­å¥ä¸­æŠ›å‡ºä¸€ä¸ªæˆ–å¤šä¸ªå¼‚å¸¸ï¼Œé‚£ä¹ˆå°†æŠ‘åˆ¶ä»â€œtry&#x2F;with-resourcesâ€è¯­å¥ä¸­å¼•å‘çš„å¼‚å¸¸ï¼Œå¹¶ä¸”è¯¥å—å¼•å‘çš„å¼‚å¸¸æ˜¯ç”±â€œwriteToFileZipFileContentsâ€æ–¹æ³•å¼•å‘çš„å¼‚å¸¸ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨â€œThrowableâ€æ¥æ£€ç´¢è¿™äº›è¢«æŠ‘åˆ¶çš„å¼‚å¸¸ã€‚â€œtryâ€å—å¼•å‘çš„å¼‚å¸¸ä¸­çš„getSuppressedâ€æ–¹æ³•ã€‚ å®ç°AutoCloseableæˆ–Closeableæ¥å£çš„ç±»å‚è§AutoCloseableçš„Javadocå’ŒCloseableå®ç°è¿™äº›æ¥å£çš„ç±»åˆ—è¡¨çš„æ¥å£ã€‚â€œå¯å…³é—­â€æ¥å£æ‰©å±•äº†â€œè‡ªåŠ¨å…³é—­â€æ¥å£ã€‚â€œCloseableâ€æ¥å£çš„â€œcloseâ€æ–¹æ³•æŠ›å‡ºç±»å‹ä¸ºâ€œIOExceptionâ€çš„å¼‚å¸¸ï¼Œè€Œâ€œAutoCloseableâ€ç•Œé¢çš„â€œcloseâ€æ–¹æ³•æŠ›å‡ºâ€œExceptionâ€ç±»å‹çš„å¼‚å¸¸ã€‚å› æ­¤ï¼Œâ€œAutoCloseableâ€æ¥å£çš„å­ç±»å¯ä»¥è¦†ç›–â€œcloseâ€æ–¹æ³•çš„è¿™ç§è¡Œä¸ºï¼Œä»¥å¼•å‘ç‰¹æ®Šå¼‚å¸¸ï¼Œä¾‹å¦‚â€œIOExceptionâ€ï¼Œæˆ–è€…æ ¹æœ¬æ²¡æœ‰å¼‚å¸¸ã€‚ æŠŠä¸€åˆ‡æ”¾åœ¨ä¸€èµ·å‰å‡ èŠ‚æè¿°äº†å¦‚ä½•ä¸ºListOfNumbersç±»ä¸­çš„writeListæ–¹æ³•æ„é€ tryã€catchå’Œfinallyä»£ç å—ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æµè§ˆä»£ç å¹¶è°ƒæŸ¥å¯èƒ½å‘ç”Ÿçš„æƒ…å†µã€‚ å½“æ‰€æœ‰ç»„ä»¶æ”¾åœ¨ä¸€èµ·æ—¶ï¼ŒwriteListæ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚ 123456789101112131415161718192021222324252627public void writeList() &#123; PrintWriter out = null; try &#123; System.out.println(&quot;Entering&quot; + &quot; try statement&quot;); out = new PrintWriter(new FileWriter(&quot;OutFile.txt&quot;)); for (int i = 0; i &lt; SIZE; i++) &#123; out.println(&quot;Value at: &quot; + i + &quot; = &quot; + list.get(i)); &#125; &#125; catch (IndexOutOfBoundsException e) &#123; System.err.println(&quot;Caught IndexOutOfBoundsException: &quot; + e.getMessage()); &#125; catch (IOException e) &#123; System.err.println(&quot;Caught IOException: &quot; + e.getMessage()); &#125; finally &#123; if (out != null) &#123; System.out.println(&quot;Closing PrintWriter&quot;); out.close(); &#125; else &#123; System.out.println(&quot;PrintWriter not open&quot;); &#125; &#125;&#125; å¦‚å‰æ‰€è¿°ï¼Œè¯¥æ–¹æ³•çš„tryå—æœ‰ä¸‰ç§ä¸åŒçš„é€€å‡ºå¯èƒ½æ€§ï¼›è¿™é‡Œæœ‰ä¸¤ä¸ªã€‚ â€œtryâ€è¯­å¥ä¸­çš„ä»£ç å¤±è´¥å¹¶å¼•å‘å¼‚å¸¸ã€‚è¿™å¯èƒ½æ˜¯â€œnew FileWriterâ€è¯­å¥å¯¼è‡´çš„â€œIOExceptionâ€ï¼Œä¹Ÿå¯èƒ½æ˜¯â€œforâ€å¾ªç¯ä¸­ç´¢å¼•å€¼é”™è¯¯å¯¼è‡´çš„â€œIndexOutOfBoundsExceptionâ€ã€‚ ä¸€åˆ‡éƒ½æˆåŠŸï¼Œâ€œtryâ€è¯­å¥æ­£å¸¸é€€å‡ºã€‚ è®©æˆ‘ä»¬çœ‹çœ‹åœ¨è¿™ä¸¤ç§é€€å‡ºå¯èƒ½æ€§æœŸé—´ï¼Œâ€œwriteListâ€æ–¹æ³•ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚ è®¾æƒ³ 1: å‘ç”Ÿå¼‚å¸¸åˆ›å»ºâ€œFileWriterâ€çš„è¯­å¥å¯èƒ½å› å¤šç§åŸå› è€Œå¤±è´¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç¨‹åºæ— æ³•åˆ›å»ºæˆ–å†™å…¥æŒ‡å®šçš„æ–‡ä»¶ï¼Œåˆ™â€œFileWriterâ€çš„æ„é€ å‡½æ•°å°†æŠ›å‡ºâ€œIOExceptionâ€ã€‚ å½“â€œFileWriterâ€æŠ›å‡ºâ€œIOExceptionâ€æ—¶ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿç«‹å³åœæ­¢æ‰§è¡Œâ€œtryâ€å—ï¼›æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•è°ƒç”¨æœªå®Œæˆã€‚ç„¶åï¼Œè¿è¡Œæ—¶ç³»ç»Ÿå¼€å§‹åœ¨æ–¹æ³•è°ƒç”¨å †æ ˆçš„é¡¶éƒ¨æœç´¢é€‚å½“çš„å¼‚å¸¸å¤„ç†ç¨‹åºã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå½“å‘ç”Ÿâ€œIOExceptionâ€æ—¶ï¼Œâ€œFileWriterâ€æ„é€ å‡½æ•°ä½äºè°ƒç”¨å †æ ˆçš„é¡¶éƒ¨ã€‚ä½†æ˜¯ï¼Œâ€œFileWriterâ€æ„é€ å‡½æ•°æ²¡æœ‰é€‚å½“çš„å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œå› æ­¤è¿è¡Œæ—¶ç³»ç»Ÿä¼šæ£€æŸ¥æ–¹æ³•è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªæ–¹æ³•â€œwriteListâ€æ–¹æ³•ã€‚â€œwriteListâ€æ–¹æ³•æœ‰ä¸¤ä¸ªå¼‚å¸¸å¤„ç†ç¨‹åºï¼šä¸€ä¸ªç”¨äºâ€œIOExceptionâ€ï¼Œå¦ä¸€ä¸ªä¸ºâ€œIndexOutOfBoundsExceptionâ€ã€‚ è¿è¡Œæ—¶ç³»ç»ŸæŒ‰ç…§â€œtryâ€è¯­å¥ä¹‹åå‡ºç°çš„é¡ºåºæ£€æŸ¥â€œwriteListâ€çš„å¤„ç†ç¨‹åºã€‚ç¬¬ä¸€ä¸ªå¼‚å¸¸å¤„ç†ç¨‹åºçš„å‚æ•°æ˜¯â€œIndexOutOfBoundsExceptionâ€ã€‚è¿™ä¸å¼•å‘çš„å¼‚å¸¸ç±»å‹ä¸åŒ¹é…ï¼Œå› æ­¤è¿è¡Œæ—¶ç³»ç»Ÿæ£€æŸ¥ä¸‹ä¸€ä¸ªå¼‚å¸¸å¤„ç†ç¨‹åº-â€œIOExceptionâ€ã€‚è¿™ä¸å¼•å‘çš„å¼‚å¸¸ç±»å‹ç›¸åŒ¹é…ï¼Œå› æ­¤è¿è¡Œæ—¶ç³»ç»Ÿç»“æŸå¯¹é€‚å½“å¼‚å¸¸å¤„ç†ç¨‹åºçš„æœç´¢ã€‚ç°åœ¨è¿è¡Œæ—¶å·²ç»æ‰¾åˆ°äº†åˆé€‚çš„å¤„ç†ç¨‹åºï¼Œâ€œcatchâ€å—ä¸­çš„ä»£ç å°†è¢«æ‰§è¡Œã€‚ å¼‚å¸¸å¤„ç†ç¨‹åºæ‰§è¡Œåï¼Œè¿è¡Œæ—¶ç³»ç»Ÿå°†æ§åˆ¶ä¼ é€’ç»™â€œfinallyâ€å—ã€‚â€œfinallyâ€å—ä¸­çš„ä»£ç å°†æ‰§è¡Œï¼Œè€Œä¸ç®¡ä¸Šé¢æ•è·åˆ°ä»€ä¹ˆå¼‚å¸¸ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€œFileWriterâ€ä»æœªæ‰“å¼€ï¼Œä¸éœ€è¦å…³é—­ã€‚åœ¨â€œfinallyâ€å—å®Œæˆæ‰§è¡Œåï¼Œç¨‹åºç»§ç»­æ‰§è¡Œâ€œfinallyâ€å—åçš„ç¬¬ä¸€æ¡è¯­å¥ã€‚ è¿™æ˜¯æŠ›å‡ºâ€œIOExceptionâ€æ—¶å‡ºç°çš„â€œListOfNumbersâ€ç¨‹åºçš„å®Œæ•´è¾“å‡ºã€‚ 123Entering try statementCaught IOException: OutFile.txtPrintWriter not open ä»¥ä¸‹åˆ—è¡¨ä¸­çš„ç²—ä½“ä»£ç æ˜¾ç¤ºäº†åœ¨æ­¤åœºæ™¯ä¸­æ‰§è¡Œçš„è¯­å¥ï¼š 12345678910111213141516171819202122232425public void writeList() &#123; PrintWriter out = null; try &#123; System.out.println(&quot;Entering try statement&quot;); out = new PrintWriter(new FileWriter(&quot;OutFile.txt&quot;)); for (int i = 0; i &lt; SIZE; i++) out.println(&quot;Value at: &quot; + i + &quot; = &quot; + list.get(i)); &#125; catch (IndexOutOfBoundsException e) &#123; System.err.println(&quot;Caught IndexOutOfBoundsException: &quot; + e.getMessage()); &#125; catch (IOException e) &#123; System.err.println(&quot;Caught IOException: &quot; + e.getMessage()); &#125; finally &#123; if (out != null) &#123; System.out.println(&quot;Closing PrintWriter&quot;); out.close(); &#125; else &#123; System.out.println(&quot;PrintWriter not open&quot;); &#125; &#125;&#125; è®¾æƒ³ 2: tryå—æ­£å¸¸é€€å‡ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€œtryâ€å—èŒƒå›´å†…çš„æ‰€æœ‰è¯­å¥éƒ½æˆåŠŸæ‰§è¡Œï¼Œæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ã€‚æ‰§è¡Œä»â€œtryâ€å—çš„æœ«å°¾è½ä¸‹ï¼Œè¿è¡Œæ—¶ç³»ç»Ÿå°†æ§åˆ¶æƒä¼ é€’ç»™â€œfinallyâ€å—ã€‚ç”±äºä¸€åˆ‡éƒ½æˆåŠŸï¼Œå½“æ§ä»¶åˆ°è¾¾â€œfinallyâ€å—æ—¶ï¼Œâ€œPrintWriterâ€å°†æ‰“å¼€ï¼Œè¯¥å—å°†å…³é—­â€œPrintWriterâ€ã€‚åŒæ ·ï¼Œåœ¨â€œfinallyâ€å—å®Œæˆæ‰§è¡Œä¹‹åï¼Œç¨‹åºç»§ç»­æ‰§è¡Œâ€œfinallyâ€å—ä¹‹åçš„ç¬¬ä¸€æ¡è¯­å¥ã€‚ è¿™æ˜¯â€œListOfNumbersâ€ç¨‹åºåœ¨æœªå¼•å‘å¼‚å¸¸æ—¶çš„è¾“å‡ºã€‚ 12Entering try statementClosing PrintWriter ä¸‹é¢ç¤ºä¾‹ä¸­çš„ç²—ä½“ä»£ç æ˜¾ç¤ºäº†åœ¨æ­¤åœºæ™¯ä¸­æ‰§è¡Œçš„è¯­å¥ã€‚ 12345678910111213141516171819202122232425public void writeList() &#123; PrintWriter out = null; try &#123; System.out.println(&quot;Entering try statement&quot;); out = new PrintWriter(new FileWriter(&quot;OutFile.txt&quot;)); for (int i = 0; i &lt; SIZE; i++) out.println(&quot;Value at: &quot; + i + &quot; = &quot; + list.get(i)); &#125; catch (IndexOutOfBoundsException e) &#123; System.err.println(&quot;Caught IndexOutOfBoundsException: &quot; + e.getMessage()); &#125; catch (IOException e) &#123; System.err.println(&quot;Caught IOException: &quot; + e.getMessage()); &#125; finally &#123; if (out != null) &#123; System.out.println(&quot;Closing PrintWriter&quot;); out.close(); &#125; else &#123; System.out.println(&quot;PrintWriter not open&quot;); &#125; &#125;&#125; æŒ‡å®šæ–¹æ³•å¼•å‘çš„å¼‚å¸¸ä¸Šä¸€èŠ‚ä»‹ç»äº†å¦‚ä½•ä¸ºâ€œListOfNumbersâ€ç±»ä¸­çš„â€œwriteListâ€æ–¹æ³•ç¼–å†™å¼‚å¸¸å¤„ç†ç¨‹åºã€‚æœ‰æ—¶ï¼Œä»£ç æ•æ‰å¯èƒ½åœ¨å…¶ä¸­å‘ç”Ÿçš„å¼‚å¸¸æ˜¯åˆé€‚çš„ã€‚ç„¶è€Œï¼Œåœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œæœ€å¥½è®©è°ƒç”¨å †æ ˆæ›´ä¸Šå±‚çš„æ–¹æ³•å¤„ç†å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å°†â€œListOfNumbersâ€ç±»ä½œä¸ºä¸€ä¸ªç±»åŒ…çš„ä¸€éƒ¨åˆ†æä¾›ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½æ— æ³•é¢„æµ‹åŒ…ä¸­æ‰€æœ‰ç”¨æˆ·çš„éœ€æ±‚ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½ä¸è¦æ•æ‰åˆ°å¼‚å¸¸ï¼Œå¹¶å…è®¸è°ƒç”¨å †æ ˆæ›´ä¸Šå±‚çš„æ–¹æ³•æ¥å¤„ç†å®ƒã€‚ å¦‚æœâ€œwriteListâ€æ–¹æ³•æ²¡æœ‰æ•è·å¯èƒ½åœ¨å…¶ä¸­å‘ç”Ÿçš„å·²æ£€æŸ¥å¼‚å¸¸ï¼Œåˆ™â€œwriteListâ€æ–¹æ³•å¿…é¡»æŒ‡å®šå®ƒå¯ä»¥å¼•å‘è¿™äº›å¼‚å¸¸ã€‚è®©æˆ‘ä»¬ä¿®æ”¹åŸå§‹çš„â€œwriteListâ€æ–¹æ³•ï¼Œä»¥æŒ‡å®šå®ƒå¯ä»¥æŠ›å‡ºçš„å¼‚å¸¸ï¼Œè€Œä¸æ˜¯æ•è·å®ƒä»¬ã€‚ä¸ºäº†æé†’æ‚¨ï¼Œè¿™é‡Œæ˜¯æ— æ³•ç¼–è¯‘çš„â€œwriteListâ€æ–¹æ³•çš„åŸå§‹ç‰ˆæœ¬ã€‚ 1234567public void writeList() &#123; PrintWriter out = new PrintWriter(new FileWriter(&quot;OutFile.txt&quot;)); for (int i = 0; i &lt; SIZE; i++) &#123; out.println(&quot;Value at: &quot; + i + &quot; = &quot; + list.get(i)); &#125; out.close();&#125; è‹¥è¦æŒ‡å®šâ€œwriteListâ€å¯ä»¥å¼•å‘ä¸¤ä¸ªå¼‚å¸¸ï¼Œè¯·åœ¨â€œwriteListâ€æ–¹æ³•çš„æ–¹æ³•å£°æ˜ä¸­æ·»åŠ â€œthrowsâ€å­å¥ã€‚â€œthrowsâ€å­å¥åŒ…å«â€œthrowsâ€å…³é”®å­—ï¼Œåè·Ÿè¯¥æ–¹æ³•å¼•å‘çš„æ‰€æœ‰å¼‚å¸¸çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚è¯¥å­å¥ä½äºæ–¹æ³•åç§°å’Œå‚æ•°åˆ—è¡¨ä¹‹åï¼Œä½äºå®šä¹‰æ–¹æ³•èŒƒå›´çš„å¤§æ‹¬å·ä¹‹å‰ï¼›è¿™æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ 1public void writeList() throws IOException, IndexOutOfBoundsException &#123; è¯·è®°ä½ï¼Œâ€œIndexOutOfBoundsExceptionâ€æ˜¯æœªé€‰ä¸­çš„å¼‚å¸¸ï¼›åœ¨â€œthrowsâ€å­å¥ä¸­åŒ…å«å®ƒä¸æ˜¯å¼ºåˆ¶æ€§çš„ã€‚ä½ å¯ä»¥å†™ä»¥ä¸‹å†…å®¹ã€‚ 1public void writeList() throws IOException &#123; å¦‚ä½•æŠ›å‡ºå¼‚å¸¸åœ¨æ•è·å¼‚å¸¸ä¹‹å‰ï¼ŒæŸäº›ä»£ç å¿…é¡»åœ¨æŸå¤„æŠ›å‡ºå¼‚å¸¸ã€‚ä»»ä½•ä»£ç éƒ½å¯èƒ½å¼•å‘å¼‚å¸¸ï¼šæ‚¨çš„ä»£ç ã€æ¥è‡ªå…¶ä»–äººç¼–å†™çš„åŒ…ï¼ˆå¦‚Javaå¹³å°é™„å¸¦çš„åŒ…æˆ–Javaè¿è¡Œæ—¶ç¯å¢ƒï¼‰çš„ä»£ç ã€‚æ— è®ºæŠ›å‡ºå¼‚å¸¸çš„æ˜¯ä»€ä¹ˆï¼Œå®ƒæ€»æ˜¯ä¸â€œthrowâ€è¯­å¥ä¸€èµ·æŠ›å‡ºã€‚ æ­£å¦‚æ‚¨å¯èƒ½æ³¨æ„åˆ°çš„ï¼ŒJavaå¹³å°æä¾›äº†è®¸å¤šå¼‚å¸¸ç±»ã€‚æ‰€æœ‰ç±»éƒ½æ˜¯Throwableçš„åä»£ç±»ï¼Œæ‰€æœ‰è¿™äº›éƒ½å…è®¸ç¨‹åºåŒºåˆ†åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´å¯èƒ½å‘ç”Ÿçš„å„ç§ç±»å‹çš„å¼‚å¸¸ã€‚ æ‚¨è¿˜å¯ä»¥åˆ›å»ºè‡ªå·±çš„å¼‚å¸¸ç±»æ¥è¡¨ç¤ºæ‚¨ç¼–å†™çš„ç±»ä¸­å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚äº‹å®ä¸Šï¼Œå¦‚æœæ‚¨æ˜¯åŒ…å¼€å‘äººå‘˜ï¼Œæ‚¨å¯èƒ½éœ€è¦åˆ›å»ºè‡ªå·±çš„ä¸€ç»„å¼‚å¸¸ç±»ï¼Œä»¥å…è®¸ç”¨æˆ·åŒºåˆ†åŒ…ä¸­å¯èƒ½å‘ç”Ÿçš„é”™è¯¯å’ŒJavaå¹³å°æˆ–å…¶ä»–åŒ…ä¸­å‘ç”Ÿçš„é”™è¯¯ã€‚ æ‚¨è¿˜å¯ä»¥åˆ›å»ºé“¾å¼å¼‚å¸¸ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…Chained Exceptionsç¬¬èŠ‚ã€‚ æŠ•æ·å£°æ˜æ‰€æœ‰æ–¹æ³•éƒ½ä½¿ç”¨â€œthrowâ€è¯­å¥å¼•å‘å¼‚å¸¸ã€‚â€œthrowâ€è¯­å¥éœ€è¦ä¸€ä¸ªå‚æ•°ï¼šä¸€ä¸ªå¯ä¸¢å¼ƒçš„å¯¹è±¡ã€‚å¯æŠ›å‡ºå¯¹è±¡æ˜¯â€œå¯æŠ›å‡ºâ€ç±»çš„ä»»ä½•å­ç±»çš„å®ä¾‹ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªâ€œthrowâ€è¯­å¥çš„ç¤ºä¾‹ã€‚ 1throw someThrowableObject; è®©æˆ‘ä»¬çœ‹çœ‹ä¸Šä¸‹æ–‡ä¸­çš„â€œthrowâ€è¯­å¥ã€‚ä»¥ä¸‹â€œpopâ€æ–¹æ³•å–è‡ªå®ç°å…¬å…±å †æ ˆå¯¹è±¡çš„ç±»ã€‚è¯¥æ–¹æ³•ä»å †æ ˆä¸­ç§»é™¤é¡¶éƒ¨å…ƒç´ å¹¶è¿”å›å¯¹è±¡ã€‚ 123456789101112public Object pop() &#123; Object obj; if (size == 0) &#123; throw new EmptyStackException(); &#125; obj = objectAt(size - 1); setObjectAt(size - 1, null); size--; return obj;&#125; â€œpopâ€æ–¹æ³•æ£€æŸ¥å †æ ˆä¸­æ˜¯å¦æœ‰ä»»ä½•å…ƒç´ ã€‚å¦‚æœå †æ ˆä¸ºç©ºï¼ˆå…¶å¤§å°ç­‰äºâ€œ0â€ï¼‰ï¼Œâ€œpopâ€å°†å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„â€œEmptyStackExceptionâ€å¯¹è±¡ï¼ˆâ€œjava.utilâ€çš„æˆå‘˜ï¼‰å¹¶å°†å…¶æŠ›å‡ºã€‚åˆ›å»ºå¼‚å¸¸ç±»æœ¬ç« çš„ä¸€èŠ‚ä»‹ç»å¦‚ä½•åˆ›å»ºè‡ªå·±çš„å¼‚å¸¸ç±»ã€‚ç°åœ¨ï¼Œæ‚¨éœ€è¦è®°ä½çš„æ˜¯ï¼Œåªèƒ½æŠ›å‡ºä»â€œjava.lang.Throwableâ€ç±»ç»§æ‰¿çš„å¯¹è±¡ã€‚ è¯·æ³¨æ„ï¼Œâ€œpopâ€æ–¹æ³•çš„å£°æ˜ä¸åŒ…å«â€œthrowsâ€å­å¥EmptyStackExceptionä¸æ˜¯å·²æ£€æŸ¥çš„å¼‚å¸¸ï¼Œå› æ­¤ä¸éœ€è¦â€œpopâ€æ¥å£°æ˜å¯èƒ½å‘ç”Ÿæ­¤å¼‚å¸¸ã€‚ Throwable ç±»åŠå…¶å­ç±»ä»â€œThrowableâ€ç±»ç»§æ‰¿çš„å¯¹è±¡åŒ…æ‹¬ç›´æ¥åä»£ï¼ˆä»â€œThroubleâ€ç±»ç›´æ¥ç»§æ‰¿çš„å¯¹è±¡ï¼‰å’Œé—´æ¥åä»£ï¼ˆä»â€˜Throwableâ€™ç±»çš„å­ä»£æˆ–å­ä»£ç»§æ‰¿çš„å¯¹è±¡ã€‚ä¸‹å›¾è¯´æ˜äº†â€œThrowableâ€ç±»åŠå…¶æœ€é‡è¦çš„å­ç±»çš„ç±»å±‚æ¬¡ç»“æ„ã€‚å¦‚æ‚¨æ‰€è§ï¼Œâ€œThrowableâ€æœ‰ä¸¤ä¸ªç›´æ¥åä»£ï¼šErrorå’ŒException. The Throwable class. Error Classå½“Javaè™šæ‹Ÿæœºä¸­å‘ç”ŸåŠ¨æ€é“¾æ¥æ•…éšœæˆ–å…¶ä»–ç¡¬æ•…éšœæ—¶ï¼Œè™šæ‹Ÿæœºå°†æŠ›å‡ºâ€œErrorâ€ã€‚ç®€å•ç¨‹åºé€šå¸¸ä¸ä¼šæ•è·æˆ–æŠ›å‡ºâ€œErrorâ€ã€‚ Exception Classå¤§å¤šæ•°ç¨‹åºæŠ›å‡ºå’Œæ•è·ä»â€œExceptionâ€ç±»æ´¾ç”Ÿçš„å¯¹è±¡ã€‚â€œå¼‚å¸¸â€è¡¨ç¤ºå‡ºç°äº†é—®é¢˜ï¼Œä½†ä¸æ˜¯ä¸¥é‡çš„ç³»ç»Ÿé—®é¢˜ã€‚æ‚¨ç¼–å†™çš„å¤§å¤šæ•°ç¨‹åºéƒ½ä¼šæŠ›å‡ºå’Œæ•è·â€œå¼‚å¸¸â€ï¼Œè€Œä¸æ˜¯â€œé”™è¯¯â€ã€‚ Javaå¹³å°å®šä¹‰äº†â€œExceptionâ€ç±»çš„è®¸å¤šåä»£ã€‚è¿™äº›å­ä½“æŒ‡ç¤ºå¯èƒ½å‘ç”Ÿçš„å„ç§ç±»å‹çš„å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œâ€œIllegalAccessExceptionâ€è¡¨ç¤ºæ‰¾ä¸åˆ°ç‰¹å®šçš„æ–¹æ³•ï¼Œè€Œâ€œNegativeArray SizeExceptionâ€è¡¨ç¤ºç¨‹åºè¯•å›¾åˆ›å»ºå¤§å°ä¸ºè´Ÿçš„æ•°ç»„ã€‚ ä¸€ä¸ªExceptionå­ç±»RuntimeExceptionæ˜¯ä¸ºæŒ‡ç¤ºé”™è¯¯ä½¿ç”¨APIçš„å¼‚å¸¸ä¿ç•™çš„ã€‚è¿è¡Œæ—¶å¼‚å¸¸çš„ä¸€ä¸ªç¤ºä¾‹æ˜¯â€œNullPointerExceptionâ€ï¼Œå½“æ–¹æ³•è¯•å›¾é€šè¿‡â€œnullâ€å¼•ç”¨è®¿é—®å¯¹è±¡çš„æˆå‘˜æ—¶ï¼Œä¼šå‘ç”Ÿè¿™ç§å¼‚å¸¸ã€‚éƒ¨åˆ†æœªé€‰ä¸­çš„ä¾‹å¤–-äº‰è®®è®¨è®ºäº†ä¸ºä»€ä¹ˆå¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸åº”è¯¥æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸æˆ–å­ç±»â€œRuntimeExceptionâ€ã€‚ é“¾å¼å¼‚å¸¸åº”ç”¨ç¨‹åºé€šå¸¸é€šè¿‡æŠ›å‡ºå¦ä¸€ä¸ªå¼‚å¸¸æ¥å“åº”å¼‚å¸¸ã€‚å®é™…ä¸Šï¼Œç¬¬ä¸€ä¸ªå¼‚å¸¸å¯¼è‡´ç¬¬äºŒä¸ªå¼‚å¸¸ã€‚äº†è§£ä¸€ä¸ªå¼‚å¸¸ä½•æ—¶å¯¼è‡´å¦ä¸€ä¸ªå¼‚å¸¸éå¸¸æœ‰ç”¨Chained Exceptionså¯å¸®åŠ©ç¨‹åºå‘˜æ‰§è¡Œæ­¤æ“ä½œã€‚ ä»¥ä¸‹æ˜¯â€œThrowableâ€ä¸­æ”¯æŒé“¾å¼å¼‚å¸¸çš„æ–¹æ³•å’Œæ„é€ å‡½æ•°ã€‚ 1234Throwable getCause()Throwable initCause(Throwable)Throwable(String, Throwable)Throwable(Throwable) â€œinitCauseâ€çš„â€œThrowableâ€å‚æ•°å’Œâ€œThrowableâ€æ„é€ å‡½æ•°æ˜¯å¯¼è‡´å½“å‰å¼‚å¸¸çš„å¼‚å¸¸getCause è¿”å›å¯¼è‡´å½“å‰å¼‚å¸¸çš„å¼‚å¸¸ï¼ŒinitCause è®¾ç½®å½“å‰å¼‚å¸¸çš„åŸå› ã€‚ ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨é“¾å¼å¼‚å¸¸ã€‚ 12345try &#123;&#125; catch (IOException e) &#123; throw new SampleException(&quot;Other IOException&quot;, e);&#125; åœ¨æœ¬ä¾‹ä¸­ï¼Œå½“æ•è·åˆ°â€œIOExceptionâ€æ—¶ï¼Œå°†åˆ›å»ºä¸€ä¸ªæ–°çš„â€œSampleExceptionâ€å¼‚å¸¸ï¼Œå¹¶é™„åŠ åŸå§‹åŸå› ï¼Œç„¶åå°†å¼‚å¸¸é“¾æŠ›å‡ºåˆ°ä¸‹ä¸€ä¸ªæ›´é«˜çº§åˆ«çš„å¼‚å¸¸å¤„ç†ç¨‹åºã€‚ è®¿é—®å †æ ˆè·Ÿè¸ªä¿¡æ¯ç°åœ¨è®©æˆ‘ä»¬å‡è®¾é«˜çº§å¼‚å¸¸å¤„ç†ç¨‹åºå¸Œæœ›ä»¥è‡ªå·±çš„æ ¼å¼è½¬å‚¨å †æ ˆè·Ÿè¸ªã€‚ é‡Šä¹‰: å †æ ˆè·Ÿè¸ªæä¾›æœ‰å…³å½“å‰çº¿ç¨‹æ‰§è¡Œå†å²çš„ä¿¡æ¯ï¼Œå¹¶åˆ—å‡ºåœ¨å¼‚å¸¸å‘ç”Ÿæ—¶è°ƒç”¨çš„ç±»å’Œæ–¹æ³•çš„åç§°ã€‚å †æ ˆè·Ÿè¸ªæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„è°ƒè¯•å·¥å…·ï¼Œå½“æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œé€šå¸¸å¯ä»¥åˆ©ç”¨å®ƒã€‚ ä¸‹é¢çš„ä»£ç æ˜¾ç¤ºäº†å¦‚ä½•å¯¹å¼‚å¸¸å¯¹è±¡è°ƒç”¨â€œgetStackTraceâ€æ–¹æ³•ã€‚ 123456789catch (Exception cause) &#123; StackTraceElement elements[] = cause.getStackTrace(); for (int i = 0, n = elements.length; i &lt; n; i++) &#123; System.err.println(elements[i].getFileName() + &quot;:&quot; + elements[i].getLineNumber() + &quot;&gt;&gt; &quot; + elements[i].getMethodName() + &quot;()&quot;); &#125;&#125; Logging APIä¸‹ä¸€ä¸ªä»£ç æ®µè®°å½•â€œcatchâ€å—ä¸­å‘ç”Ÿå¼‚å¸¸çš„ä½ç½®ã€‚ä½†æ˜¯ï¼Œä¸è¦æ‰‹åŠ¨è§£æå †æ ˆè·Ÿè¸ªå¹¶å°†è¾“å‡ºå‘é€åˆ°System.err()ï¼Œå®ƒä½¿ç”¨java.util.loggingä¸­çš„æ—¥å¿—è®°å½•å·¥å…·å°†è¾“å‡ºå‘é€åˆ°æ–‡ä»¶åŒ…è£…ã€‚ 1234567891011try &#123; Handler handler = new FileHandler(&quot;OutFile.log&quot;); Logger.getLogger(&quot;&quot;).addHandler(handler); &#125; catch (IOException e) &#123; Logger logger = Logger.getLogger(&quot;package.name&quot;); StackTraceElement elements[] = e.getStackTrace(); for (int i = 0, n = elements.length; i &lt; n; i++) &#123; logger.log(Level.WARNING, elements[i].getMethodName()); &#125;&#125; Creating Exception Classesåœ¨é€‰æ‹©è¦æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å…¶ä»–äººç¼–å†™çš„å¼‚å¸¸ç±»ï¼ˆJavaå¹³å°æä¾›äº†è®¸å¤šå¯ä»¥ä½¿ç”¨çš„å¼‚å¸¸ç±»ï¼‰ï¼Œä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„å¼‚å¸¸ç±»ã€‚å¦‚æœæ‚¨å¯¹ä»¥ä¸‹ä»»ä½•ä¸€ä¸ªé—®é¢˜å›ç­”â€œæ˜¯â€ï¼Œæ‚¨åº”è¯¥ç¼–å†™è‡ªå·±çš„å¼‚å¸¸ç±»ï¼›å¦åˆ™ï¼Œä½ å¯èƒ½ä¼šç”¨åˆ«äººçš„ã€‚ æ‚¨æ˜¯å¦éœ€è¦Javaå¹³å°ä¸­æ²¡æœ‰è¡¨ç¤ºçš„å¼‚å¸¸ç±»å‹ï¼Ÿ å¦‚æœç”¨æˆ·èƒ½å¤Ÿå°†æ‚¨çš„å¼‚å¸¸ä¸å…¶ä»–ä¾›åº”å•†ç¼–å†™çš„ç±»å¼•å‘çš„å¼‚å¸¸åŒºåˆ†å¼€æ¥ï¼Œè¿™å¯¹ä»–ä»¬æœ‰å¸®åŠ©å—ï¼Ÿ æ‚¨çš„ä»£ç æ˜¯å¦å¼•å‘å¤šä¸ªç›¸å…³å¼‚å¸¸ï¼Ÿ å¦‚æœæ‚¨ä½¿ç”¨å…¶ä»–äººçš„å¼‚å¸¸ï¼Œç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®è¿™äº›å¼‚å¸¸ï¼Ÿä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜æ˜¯ï¼Œæ‚¨çš„è½¯ä»¶åŒ…æ˜¯å¦åº”è¯¥æ˜¯ç‹¬ç«‹å’Œç‹¬ç«‹çš„ï¼Ÿ An Exampleå‡è®¾æ‚¨æ­£åœ¨ç¼–å†™ä¸€ä¸ªé“¾è¡¨ç±»ã€‚è¯¥ç±»æ”¯æŒä»¥ä¸‹æ–¹æ³•ï¼š objectAt(int n) â€” è¿”å›åˆ—è¡¨ä¸­ç¬¬nä¸ªä½ç½®çš„å¯¹è±¡ã€‚å¦‚æœå‚æ•°å°äº0æˆ–å¤§äºåˆ—è¡¨ä¸­å½“å‰å¯¹è±¡çš„æ•°é‡ï¼Œåˆ™å¼•å‘å¼‚å¸¸ã€‚ firstObject() â€” è¿”å›åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœåˆ—è¡¨ä¸­ä¸åŒ…å«å¯¹è±¡ï¼Œåˆ™å¼•å‘å¼‚å¸¸ã€‚ indexOf(Object o) â€” åœ¨åˆ—è¡¨ä¸­æœç´¢æŒ‡å®šçš„â€œå¯¹è±¡â€å¹¶è¿”å›å…¶åœ¨åˆ—è¡¨ä¸­çš„ä½ç½®ã€‚å¦‚æœä¼ å…¥æ–¹æ³•çš„å¯¹è±¡ä¸åœ¨åˆ—è¡¨ä¸­ï¼Œåˆ™å¼•å‘å¼‚å¸¸ã€‚ é“¾è¡¨ç±»å¯ä»¥æŠ›å‡ºå¤šä¸ªå¼‚å¸¸ï¼Œå¦‚æœèƒ½å¤Ÿç”¨ä¸€ä¸ªå¼‚å¸¸å¤„ç†ç¨‹åºæ•è·é“¾è¡¨æŠ›å‡ºçš„æ‰€æœ‰å¼‚å¸¸ï¼Œå°†éå¸¸æ–¹ä¾¿ã€‚æ­¤å¤–ï¼Œå¦‚æœæ‚¨è®¡åˆ’åœ¨ä¸€ä¸ªåŒ…ä¸­åˆ†å‘é“¾æ¥åˆ—è¡¨ï¼Œæ‰€æœ‰ç›¸å…³çš„ä»£ç éƒ½åº”è¯¥æ‰“åŒ…åœ¨ä¸€èµ·ã€‚å› æ­¤ï¼Œé“¾æ¥åˆ—è¡¨åº”è¯¥æä¾›è‡ªå·±çš„ä¸€ç»„å¼‚å¸¸ç±»ã€‚ ä¸‹å›¾è¯´æ˜äº†é“¾æ¥åˆ—è¡¨å¼•å‘çš„å¼‚å¸¸çš„ä¸€ä¸ªå¯èƒ½çš„ç±»å±‚æ¬¡ç»“æ„ã€‚ å¼‚å¸¸ç±»å±‚æ¬¡ç»“æ„ç¤ºä¾‹ã€‚ é€‰æ‹©è¶…çº§ç±»ä»»ä½•â€œExceptionâ€å­ç±»éƒ½å¯ä»¥ç”¨ä½œâ€œLinkedListExceptionâ€çš„çˆ¶ç±»ã€‚ç„¶è€Œï¼Œå¿«é€Ÿé˜…è¯»è¿™äº›å­ç±»ä¼šå‘ç°å®ƒä»¬æ˜¯ä¸åˆé€‚çš„ï¼Œå› ä¸ºå®ƒä»¬è¦ä¹ˆè¿‡äºä¸“ä¸šåŒ–ï¼Œè¦ä¹ˆä¸â€œLinkedListExceptionâ€å®Œå…¨æ— å…³ã€‚å› æ­¤ï¼Œâ€œLinkedListExceptionâ€çš„çˆ¶ç±»åº”ä¸ºâ€œExceptionâ€ã€‚ æ‚¨ç¼–å†™çš„å¤§å¤šæ•°å°ç¨‹åºå’Œåº”ç”¨ç¨‹åºéƒ½ä¼šæŠ›å‡ºâ€œå¼‚å¸¸â€å¯¹è±¡&#96;é”™è¯¯é€šå¸¸ç”¨äºç³»ç»Ÿä¸­ä¸¥é‡çš„ç¡¬é”™è¯¯ï¼Œä¾‹å¦‚é˜»æ­¢JVMè¿è¡Œçš„é”™è¯¯ã€‚ Note: For readable code, itâ€™s good practice to append the string Exception to the names of all classes that inherit (directly or indirectly) from the Exception class.","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"å¼‚å¸¸","slug":"å¼‚å¸¸","permalink":"https://guoshunfa.com/tags/%E5%BC%82%E5%B8%B8/"}]},{"title":"Oracle Javaæ³¨è§£","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Oracle-Javaæ³¨è§£","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2020/07/Oracle-Javaæ³¨è§£/","link":"","permalink":"https://guoshunfa.com/2020/07/Oracle-Java%E6%B3%A8%E8%A7%A3/","excerpt":"","text":"æœ¬æ–‡ç« ä»¥jdk8ä¸ºåŸºç¡€è¿›è¡Œç¼–å†™ï¼Œå¦‚æœæƒ³æŸ¥çœ‹åç»­çš„ç‰ˆæœ¬å¯ä»¥å‰å¾€jdkç‰ˆæœ¬ç›®å½•ä¸‹æŸ¥çœ‹ã€‚ ç¿»è¯‘è‡ªï¼šhttps://docs.oracle.com/javase/tutorial/java/annotations/index.html æ³¨è§£æ˜¯å…ƒæ•°æ®çš„ä¸€ç§å½¢å¼ï¼Œå®ƒæä¾›å…³äºç¨‹åºçš„æ•°æ®ï¼Œè€Œä¸æ˜¯ç¨‹åºæœ¬èº«çš„ä¸€éƒ¨åˆ†ã€‚æ³¨é‡Šå¯¹å®ƒä»¬æ‰€æ³¨è§£çš„ä»£ç çš„æ“ä½œæ²¡æœ‰ç›´æ¥å½±å“ã€‚ æ³¨è§£æœ‰å¤šç§ç”¨é€”ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š ç¼–è¯‘å™¨ä¿¡æ¯ â€” ç¼–è¯‘å™¨å¯ä»¥ä½¿ç”¨æ³¨è§£æ¥æ£€æµ‹é”™è¯¯æˆ–æŠ‘åˆ¶è­¦å‘Šã€‚ ç¼–è¯‘æ—¶å’Œéƒ¨ç½²æ—¶å¤„ç† â€” è½¯ä»¶å·¥å…·å¯ä»¥å¤„ç†æ³¨è§£ä¿¡æ¯ä»¥ç”Ÿæˆä»£ç ã€XMLæ–‡ä»¶ç­‰ã€‚ è¿è¡Œæ—¶å¤„ç† â€” æŸäº›æ³¨è§£å¯åœ¨è¿è¡Œæ—¶æ£€æŸ¥ã€‚ æ³¨è§£åŸºç¡€æ³¨è§£çš„æ ¼å¼åœ¨æœ€ç®€å•çš„å½¢å¼ä¸­ï¼Œæ³¨é‡Šå¦‚ä¸‹æ‰€ç¤ºï¼š 1@Entity atç¬¦å·å­—ç¬¦ï¼ˆ@ï¼‰å‘ç¼–è¯‘å™¨è¡¨ç¤ºåé¢æ˜¯æ³¨é‡Šã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæ³¨é‡Šçš„åç§°ä¸ºâ€œè¦†ç›–â€ï¼š 12@Overridevoid mySuperMethod() &#123; ... &#125; æ³¨é‡Šå¯ä»¥åŒ…æ‹¬å¯ä»¥å‘½åæˆ–æœªå‘½åçš„å…ƒç´ ï¼Œè¿™äº›å…ƒç´ æœ‰å€¼ï¼š 12345@Author( name = &quot;Benjamin Franklin&quot;, date = &quot;3/27/2003&quot;)class MyClass &#123; ... &#125; æˆ–è€… 12@SuppressWarnings(value = &quot;unchecked&quot;)void myMethod() &#123; ... &#125; å¦‚æœåªæœ‰ä¸€ä¸ªåä¸ºvalueçš„å…ƒç´ ï¼Œåˆ™å¯ä»¥çœç•¥è¯¥åç§°ï¼Œå¦‚ï¼š 12@SuppressWarnings(&quot;unchecked&quot;)void myMethod() &#123; ... &#125; å¦‚æœæ³¨é‡Šæ²¡æœ‰å…ƒç´ ï¼Œåˆ™å¯ä»¥çœç•¥æ‹¬å·ï¼Œå¦‚å‰é¢çš„@Overrideç¤ºä¾‹æ‰€ç¤ºã€‚ ä¹Ÿå¯ä»¥åœ¨åŒä¸€å£°æ˜ä¸Šä½¿ç”¨å¤šä¸ªæ³¨é‡Šï¼š 123@Author(name = &quot;Jane Doe&quot;)@EBookclass MyClass &#123; ... &#125; å¦‚æœæ³¨é‡Šå…·æœ‰ç›¸åŒçš„ç±»å‹ï¼Œåˆ™ç§°ä¸ºé‡å¤æ³¨é‡Šï¼š 123@Author(name = &quot;Jane Doe&quot;)@Author(name = &quot;John Smith&quot;)class MyClass &#123; ... &#125; è‡ªJava SE 8å‘è¡Œç‰ˆèµ·ï¼Œæ”¯æŒé‡å¤æ³¨é‡Šã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§Repeating Annotations.ã€‚ æ³¨é‡Šç±»å‹å¯ä»¥æ˜¯åœ¨javaä¸­å®šä¹‰çš„ç±»å‹ä¹‹ä¸€ã€‚langæˆ–java.lang.annotationåŒ…ã€‚åœ¨å‰é¢çš„ç¤ºä¾‹ä¸­ï¼ŒOverrideå’ŒSuppressWarningsæ˜¯é¢„å®šä¹‰çš„Javaæ³¨é‡Šã€‚ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±çš„æ³¨é‡Šç±»å‹ã€‚ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­çš„Authorå’ŒEbookæ³¨é‡Šæ˜¯è‡ªå®šä¹‰æ³¨é‡Šç±»å‹ã€‚ å¯ä»¥ä½¿ç”¨æ³¨é‡Šçš„ä½ç½®æ³¨é‡Šå¯ä»¥åº”ç”¨äºå£°æ˜ï¼šç±»ã€å­—æ®µã€æ–¹æ³•å’Œå…¶ä»–ç¨‹åºå…ƒç´ çš„å£°æ˜ã€‚åœ¨å£°æ˜ä¸­ä½¿ç”¨æ—¶ï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œæ¯ä¸ªæ³¨é‡Šé€šå¸¸æ˜¾ç¤ºåœ¨è‡ªå·±çš„è¡Œä¸Šã€‚ ä»JavaSE8ç‰ˆæœ¬å¼€å§‹ï¼Œæ³¨é‡Šä¹Ÿå¯ä»¥åº”ç”¨äºç±»å‹çš„ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š ç±»å®ä¾‹åˆ›å»ºè¡¨è¾¾å¼ï¼š 1new @Interned MyObject(); ç±»å‹é“¸é€ : 1myString = (@NonNull String) str; implementså­å¥ï¼š 12class UnmodifiableList&lt;T&gt; implements @Readonly List&lt;@Readonly T&gt; &#123; ... &#125; å¼•å‘å¼‚å¸¸å£°æ˜ï¼š 12void monitorTemperature() throws @Critical TemperatureException &#123; ... &#125; è¿™ç§å½¢å¼çš„æ³¨é‡Šç§°ä¸ºç±»å‹æ³¨é‡Šã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ Type Annotations and Pluggable Type Systems.ã€‚ å£°æ˜æ‰¹æ³¨ç±»å‹è®¸å¤šæ³¨é‡Šæ›¿æ¢ä»£ç ä¸­çš„æ³¨é‡Šã€‚ å‡è®¾ä¸€ä¸ªè½¯ä»¶ç»„ä¼ ç»Ÿä¸Šä»¥æä¾›é‡è¦ä¿¡æ¯çš„æ³¨é‡Šå¼€å§‹æ¯ä¸ªç±»çš„ä¸»ä½“ï¼š 123456789101112public class Generation3List extends Generation2List &#123; // Author: John Doe // Date: 3/17/2002 // Current revision: 6 // Last modified: 4/12/2004 // By: Jane Doe // Reviewers: Alice, Bill, Cindy // class code goes here&#125; è‹¥è¦å°†æ­¤ç›¸åŒçš„å…ƒæ•°æ®ä¸æ³¨é‡Šä¸€èµ·æ·»åŠ ï¼Œå¿…é¡»é¦–å…ˆå®šä¹‰æ³¨é‡Šç±»å‹ã€‚æ‰§è¡Œæ­¤æ“ä½œçš„è¯­æ³•ä¸ºï¼š 123456789@interface ClassPreamble &#123; String author(); String date(); int currentRevision() default 1; String lastModified() default &quot;N/A&quot;; String lastModifiedBy() default &quot;N/A&quot;; // Note use of array String[] reviewers();&#125; æ³¨é‡Šç±»å‹å®šä¹‰çœ‹èµ·æ¥ç±»ä¼¼äºä¸€ä¸ªæ¥å£å®šä¹‰ï¼Œå…¶ä¸­å…³é”®å­—æ¥å£å‰é¢æœ‰atç¬¦å·ï¼ˆ@ï¼‰ï¼ˆ@&#x3D;atï¼Œå¦‚æ³¨é‡Šç±»å‹ï¼‰ã€‚æ³¨é‡Šç±»å‹æ˜¯ä¸€ç§ç•Œé¢å½¢å¼ï¼Œå°†åœ¨åé¢çš„è¯¾ç¨‹ä¸­ä»‹ç»ã€‚ç›®å‰ï¼Œæ‚¨ä¸éœ€è¦äº†è§£æ¥å£ã€‚ å‰ä¸€ä¸ªæ³¨é‡Šå®šä¹‰çš„ä¸»ä½“åŒ…å«æ³¨é‡Šç±»å‹å…ƒç´ å£°æ˜ï¼Œçœ‹èµ·æ¥å¾ˆåƒæ–¹æ³•ã€‚è¯·æ³¨æ„ï¼Œå®ƒä»¬å¯ä»¥å®šä¹‰å¯é€‰çš„é»˜è®¤å€¼ã€‚ å®šä¹‰æ³¨é‡Šç±»å‹åï¼Œå¯ä»¥ä½¿ç”¨è¯¥ç±»å‹çš„æ³¨é‡Šï¼Œå¹¶å¡«å……å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314@ClassPreamble ( author = &quot;John Doe&quot;, date = &quot;3/17/2002&quot;, currentRevision = 6, lastModified = &quot;4/12/2004&quot;, lastModifiedBy = &quot;Jane Doe&quot;, // Note array notation reviewers = &#123;&quot;Alice&quot;, &quot;Bob&quot;, &quot;Cindy&quot;&#125;)public class Generation3List extends Generation2List &#123;// class code goes here&#125; &#x3D;&#x3D;æ³¨æ„ï¼šè¦ä½¿@ClassPreambleä¸­çš„ä¿¡æ¯æ˜¾ç¤ºåœ¨Javadocç”Ÿæˆçš„æ–‡æ¡£ä¸­ï¼Œå¿…é¡»ä½¿ç”¨@Documentedæ³¨é‡Šæ³¨é‡Š@ClassPremableå®šä¹‰ï¼š&#x3D;&#x3D; 123456789// import this to use @Documentedimport java.lang.annotation.*;@Documented@interface ClassPreamble &#123; // Annotation element definitions &#125; é¢„å®šä¹‰çš„æ³¨é‡Šç±»å‹Java SE APIä¸­é¢„å®šä¹‰äº†ä¸€ç»„æ³¨é‡Šç±»å‹ã€‚ä¸€äº›æ³¨é‡Šç±»å‹ç”±Javaç¼–è¯‘å™¨ä½¿ç”¨ï¼Œæœ‰äº›åˆ™é€‚ç”¨äºå…¶ä»–æ³¨é‡Šã€‚ Javaè¯­è¨€ä½¿ç”¨çš„æ³¨é‡Šç±»å‹åœ¨javaä¸­å®šä¹‰çš„é¢„å®šä¹‰æ³¨é‡Šç±»å‹ã€‚langæ˜¯@Deprecatedã€@Overrideå’Œ@SuppressWarningsã€‚ @Deprecated æ³¨é‡Šè¡¨ç¤ºæ ‡è®°çš„å…ƒç´ å·²å¼ƒç”¨ï¼Œä¸åº”å†ä½¿ç”¨ã€‚æ¯å½“ç¨‹åºä½¿ç”¨å¸¦æœ‰@Deprecatedæ³¨é‡Šçš„æ–¹æ³•ã€ç±»æˆ–å­—æ®µæ—¶ï¼Œç¼–è¯‘å™¨éƒ½ä¼šç”Ÿæˆè­¦å‘Šã€‚å½“å…ƒç´ è¢«å¼ƒç”¨æ—¶ï¼Œè¿˜åº”ä½¿ç”¨Javadoc@deprecatedæ ‡è®°å¯¹å…¶è¿›è¡Œè®°å½•ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚åœ¨Javadocæ³¨é‡Šå’Œæ³¨é‡Šä¸­ä½¿ç”¨atç¬¦å·ï¼ˆ@ï¼‰å¹¶éå·§åˆï¼šå®ƒä»¬åœ¨æ¦‚å¿µä¸Šæ˜¯ç›¸å…³çš„ã€‚æ­¤å¤–ï¼Œè¯·æ³¨æ„ï¼ŒJavadocæ ‡è®°ä»¥å°å†™då¼€å¤´ï¼Œæ³¨é‡Šä»¥å¤§å†™då¼€å¤´ã€‚ 12345678 // Javadoc comment follows /** * @deprecated * explanation of why it was deprecated */ @Deprecated static void deprecatedMethod() &#123; &#125;&#125; @Override æ³¨é‡Šé€šçŸ¥ç¼–è¯‘å™¨è¯¥å…ƒç´ å°†è¦†ç›–åœ¨è¶…ç±»ä¸­å£°æ˜çš„å…ƒç´ ã€‚é‡å†™æ–¹æ³•å°†åœ¨æ¥å£å’Œç»§æ‰¿ä¸­è®¨è®ºã€‚ 1234// mark method as a superclass method// that has been overridden@Override int overriddenMethod() &#123; &#125; è™½ç„¶é‡å†™æ–¹æ³•æ—¶ä¸éœ€è¦ä½¿ç”¨æ­¤æ³¨é‡Šï¼Œä½†å®ƒæœ‰åŠ©äºé˜²æ­¢é”™è¯¯ã€‚å¦‚æœæ ‡è®°ä¸º@Overrideçš„æ–¹æ³•æœªèƒ½æ­£ç¡®è¦†ç›–å…¶è¶…ç±»ä¹‹ä¸€ä¸­çš„æ–¹æ³•ï¼Œç¼–è¯‘å™¨å°†ç”Ÿæˆé”™è¯¯ã€‚ @SuppressWarnings æ³¨é‡Šå‘Šè¯‰ç¼–è¯‘å™¨æŠ‘åˆ¶å¦åˆ™å°†ç”Ÿæˆçš„ç‰¹å®šè­¦å‘Šã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨äº†ä¸æ¨èä½¿ç”¨çš„æ–¹æ³•ï¼Œç¼–è¯‘å™¨é€šå¸¸ä¼šç”Ÿæˆè­¦å‘Šã€‚ä½†æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ³¨é‡Šä¼šå¯¼è‡´è­¦å‘Šè¢«æŠ‘åˆ¶ã€‚ 12345678// use a deprecated method and tell // compiler not to generate a warning@SuppressWarnings(&quot;deprecation&quot;) void useDeprecatedMethod() &#123; // deprecation warning // - suppressed objectOne.deprecatedMethod(); &#125; æ¯ä¸ªç¼–è¯‘å™¨è­¦å‘Šéƒ½å±äºä¸€ä¸ªç±»åˆ«ã€‚Javaè¯­è¨€è§„èŒƒåˆ—å‡ºäº†ä¸¤ä¸ªç±»åˆ«ï¼šå¼ƒç”¨å’Œæœªé€‰ä¸­ã€‚å½“ä¸æ³›å‹å‡ºç°ä¹‹å‰ç¼–å†™çš„é—ç•™ä»£ç äº¤äº’æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æœªç»æ£€æŸ¥çš„è­¦å‘Šã€‚è¦æŠ‘åˆ¶å¤šä¸ªç±»åˆ«çš„è­¦å‘Šï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š 1@SuppressWarnings(&#123;&quot;unchecked&quot;, &quot;deprecation&quot;&#125;) @SafeVarargsæ³¨é‡Šåº”ç”¨äºæ–¹æ³•æˆ–æ„é€ å‡½æ•°æ—¶ï¼Œæ–­è¨€ä»£ç ä¸ä¼šå¯¹å…¶varargså‚æ•°æ‰§è¡Œæ½œåœ¨çš„ä¸å®‰å…¨æ“ä½œã€‚ä½¿ç”¨æ­¤æ³¨é‡Šç±»å‹æ—¶ï¼Œå°†ç¦æ­¢ä¸varargsç”¨æ³•ç›¸å…³çš„æœªé€‰ä¸­è­¦å‘Šã€‚ @FunctionalInterface @JavaSE8ä¸­å¼•å…¥çš„ï¼Œç±»å‹å£°æ˜æ—¨åœ¨æˆä¸ºJavaè¯­è¨€è§„èŒƒå®šä¹‰çš„åŠŸèƒ½æ¥å£ã€‚ åº”ç”¨äºå…¶ä»–æ³¨é‡Šçš„æ³¨é‡Šåº”ç”¨äºå…¶ä»–æ³¨é‡Šçš„æ³¨é‡Šç§°ä¸ºå…ƒæ³¨é‡Šã€‚java.lang.annotationä¸­å®šä¹‰äº†å‡ ç§å…ƒæ³¨é‡Šç±»å‹ã€‚ @Retention æ³¨é‡ŠæŒ‡å®šå¦‚ä½•å­˜å‚¨æ ‡è®°çš„æ³¨é‡Šï¼š RetentionPolicy.SOURCE â€“ æ ‡è®°çš„æ³¨é‡Šä»…ä¿ç•™åœ¨æºçº§åˆ«ï¼Œç¼–è¯‘å™¨å°†å¿½ç•¥å®ƒã€‚ RetentionPolicy.CLASS â€“ æ ‡è®°çš„æ³¨é‡Šåœ¨ç¼–è¯‘æ—¶ç”±ç¼–è¯‘å™¨ä¿ç•™ï¼Œä½†è¢«Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰å¿½ç•¥ã€‚ RetentionPolicy.RUNTIME â€“ æ ‡è®°çš„æ³¨é‡Šç”±JVMä¿ç•™ï¼Œå› æ­¤å¯ä»¥ç”±è¿è¡Œæ—¶ç¯å¢ƒä½¿ç”¨ã€‚ @Documented annotationè¡¨ç¤ºæ— è®ºä½•æ—¶ä½¿ç”¨æŒ‡å®šçš„æ³¨é‡Šï¼Œéƒ½åº”è¯¥ä½¿ç”¨Javadocå·¥å…·è®°å½•è¿™äº›å…ƒç´ ã€‚ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæ³¨é‡Šä¸åŒ…å«åœ¨Javadocä¸­ã€‚ï¼‰æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…Javadoc tools page.ã€‚ @Target annotationæ ‡è®°å¦ä¸€ä¸ªæ³¨é‡Šï¼Œä»¥é™åˆ¶æ³¨é‡Šå¯ä»¥åº”ç”¨äºå“ªç§Javaå…ƒç´ ã€‚ç›®æ ‡æ³¨é‡ŠæŒ‡å®šä»¥ä¸‹å…ƒç´ ç±»å‹ä¹‹ä¸€ä½œä¸ºå…¶å€¼ï¼š ElementType.ANNOTATION_TYPE å¯ä»¥åº”ç”¨äºæ³¨é‡Šç±»å‹ã€‚ ElementType.CONSTRUCTOR å¯ä»¥åº”ç”¨äºæ„é€ å‡½æ•°ã€‚ ElementType.FIELD å¯ä»¥åº”ç”¨äºå­—æ®µæˆ–å±æ€§ã€‚ ElementType.LOCAL_VARIABLE å¯ä»¥åº”ç”¨äºå±€éƒ¨å˜é‡ã€‚ ElementType.METHOD å¯ä»¥åº”ç”¨äºæ–¹æ³•çº§æ³¨é‡Šã€‚ ElementType.PACKAGE å¯ä»¥åº”ç”¨äºåŒ…å£°æ˜ã€‚ ElementType.PARAMETER å¯ä»¥åº”ç”¨äºæ–¹æ³•çš„å‚æ•°ã€‚ ElementType.TYPE å¯ä»¥åº”ç”¨äºç±»çš„ä»»ä½•å…ƒç´ ã€‚ @Inherited annotationè¡¨ç¤ºæ³¨é‡Šç±»å‹å¯ä»¥ä»è¶…ç±»ç»§æ‰¿ã€‚ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸æ˜¯çœŸçš„ã€‚ï¼‰å½“ç”¨æˆ·æŸ¥è¯¢æ³¨é‡Šç±»å‹å¹¶ä¸”ç±»æ²¡æœ‰è¯¥ç±»å‹çš„æ³¨é‡Šæ—¶ï¼Œå°†æŸ¥è¯¢ç±»çš„è¶…ç±»ä»¥è·å–æ³¨é‡Šç±»å‹ã€‚æ­¤æ³¨é‡Šä»…é€‚ç”¨äºç±»å£°æ˜ã€‚ @Repeatable annotation, Java SE 8ä¸­å¼•å…¥çš„æ ‡è®°æ³¨é‡Šè¡¨ç¤ºæ ‡è®°æ³¨é‡Šå¯ä»¥å¤šæ¬¡åº”ç”¨äºåŒä¸€å£°æ˜æˆ–ç±»å‹ä½¿ç”¨ã€‚å…³äºæ›´å¤šä¿¡æ¯ï¼Œ see Repeating Annotations. ç±»å‹æ³¨é‡Šå’Œå¯æ’æ‹”ç±»å‹ç³»ç»Ÿåœ¨JavaSE8å‘å¸ƒä¹‹å‰ï¼Œæ³¨é‡Šåªèƒ½åº”ç”¨äºå£°æ˜ã€‚ä»Java SE 8ç‰ˆæœ¬å¼€å§‹ï¼Œæ³¨é‡Šä¹Ÿå¯ä»¥åº”ç”¨äºä»»ä½•ç±»å‹çš„ä½¿ç”¨ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä½¿ç”¨ç±»å‹çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨æ³¨é‡Šã€‚ä½¿ç”¨ç±»å‹çš„å‡ ä¸ªä¾‹å­æ˜¯ç±»å®ä¾‹åˆ›å»ºè¡¨è¾¾å¼ï¼ˆâ€œnewâ€ï¼‰ã€å¼ºåˆ¶è½¬æ¢ã€â€œimplementsâ€å­å¥å’Œâ€œthrowsâ€å­å¥ã€‚è¿™ç§å½¢å¼çš„æ³¨é‡Šç§°ä¸ºç±»å‹æ³¨é‡Š Annotations Basics. åˆ›å»ºç±»å‹æ³¨é‡Šæ˜¯ä¸ºäº†æ”¯æŒæ”¹è¿›çš„Javaç¨‹åºåˆ†æï¼Œä»¥ç¡®ä¿æ›´å¼ºçš„ç±»å‹æ£€æŸ¥ã€‚Java SE 8å‘è¡Œç‰ˆä¸æä¾›ç±»å‹æ£€æŸ¥æ¡†æ¶ï¼Œä½†å®ƒå…è®¸æ‚¨ç¼–å†™ï¼ˆæˆ–ä¸‹è½½ï¼‰ä¸€ä¸ªç±»å‹æ£€æŸ¥æ¡†æ¶ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¸Œæœ›ç¡®ä¿ç¨‹åºä¸­çš„ç‰¹å®šå˜é‡æ°¸è¿œä¸ä¼šèµ‹å€¼ä¸ºnullï¼›æ‚¨å¸Œæœ›é¿å…è§¦å‘â€œNullPointerExceptionâ€ã€‚æ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰æ’ä»¶æ¥æ£€æŸ¥è¿™ä¸€ç‚¹ã€‚ç„¶åï¼Œæ‚¨å°†ä¿®æ”¹ä»£ç ä»¥æ³¨é‡Šè¯¥ç‰¹å®šå˜é‡ï¼Œè¡¨æ˜å®ƒä»æœªèµ‹å€¼ä¸ºnullã€‚å˜é‡å£°æ˜å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š 1@NonNull String str; å½“æ‚¨ç¼–è¯‘ä»£ç æ—¶ï¼ŒåŒ…æ‹¬å‘½ä»¤è¡Œä¸­çš„â€œNonNullâ€æ¨¡å—ï¼Œå¦‚æœç¼–è¯‘å™¨æ£€æµ‹åˆ°æ½œåœ¨é—®é¢˜ï¼Œå°±ä¼šæ‰“å°è­¦å‘Šï¼Œå…è®¸æ‚¨ä¿®æ”¹ä»£ç ä»¥é¿å…é”™è¯¯ã€‚æ›´æ­£ä»£ç ä»¥åˆ é™¤æ‰€æœ‰è­¦å‘Šåï¼Œç¨‹åºè¿è¡Œæ—¶ä¸ä¼šå‘ç”Ÿæ­¤ç‰¹å®šé”™è¯¯ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å¤šä¸ªç±»å‹æ£€æŸ¥æ¨¡å—ï¼Œå…¶ä¸­æ¯ä¸ªæ¨¡å—æ£€æŸ¥ä¸åŒç±»å‹çš„é”™è¯¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥åœ¨Javaç±»å‹ç³»ç»Ÿçš„åŸºç¡€ä¸Šè¿›è¡Œæ„å»ºï¼Œåœ¨éœ€è¦çš„æ—¶é—´å’Œä½ç½®æ·»åŠ ç‰¹å®šçš„æ£€æŸ¥ã€‚ é€šè¿‡æ˜æ™ºåœ°ä½¿ç”¨ç±»å‹æ³¨é‡Šå’Œå¯æ’å…¥ç±»å‹æ£€æŸ¥å™¨ï¼Œæ‚¨å¯ä»¥ç¼–å†™æ›´å¼ºå¤§ã€æ›´ä¸å®¹æ˜“å‡ºé”™çš„ä»£ç ã€‚ åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæ‚¨ä¸å¿…ç¼–å†™è‡ªå·±çš„ç±»å‹æ£€æŸ¥æ¨¡å—ã€‚æœ‰ç¬¬ä¸‰æ–¹ä¸ºæ‚¨å®Œæˆäº†è¿™é¡¹å·¥ä½œã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åˆ©ç”¨åç››é¡¿å¤§å­¦åˆ›å»ºçš„Checkeræ¡†æ¶ã€‚è¯¥æ¡†æ¶åŒ…æ‹¬â€œNonNullâ€æ¨¡å—ã€æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—å’Œäº’æ–¥é”æ¨¡å—ã€‚å…³äºæ›´å¤šä¿¡æ¯ï¼Œ see the Checker Framework. é‡å¤æ³¨é‡Šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¸Œæœ›å°†ç›¸åŒçš„æ³¨é‡Šåº”ç”¨äºå£°æ˜æˆ–ç±»å‹ä½¿ç”¨ã€‚ä»Java SE 8ç‰ˆæœ¬å¼€å§‹ï¼Œé‡å¤æ³¨é‡Šä½¿æ‚¨èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ã€‚ ä¾‹å¦‚ï¼Œæ‚¨æ­£åœ¨ç¼–å†™ä»£ç ä»¥ä½¿ç”¨è®¡æ—¶å™¨æœåŠ¡ï¼Œè¯¥æœåŠ¡ä½¿æ‚¨èƒ½å¤Ÿåœ¨ç»™å®šæ—¶é—´æˆ–æŒ‰ç‰¹å®šè®¡åˆ’è¿è¡Œæ–¹æ³•ï¼Œç±»ä¼¼äºUNIXâ€œcronâ€æœåŠ¡ã€‚ç°åœ¨ï¼Œæ‚¨è¦è®¾ç½®ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œä»¥åœ¨æ¯æœˆçš„æœ€åä¸€å¤©å’Œæ¯å‘¨äº”æ™šä¸Š11:00è¿è¡Œä¸€ä¸ªæ–¹æ³•â€œdoPeriodCleanupâ€ã€‚è‹¥è¦è®¾ç½®è®¡æ—¶å™¨ï¼Œè¯·åˆ›å»ºä¸€ä¸ªâ€œ@Scheduleâ€æ³¨é‡Šï¼Œå¹¶å°†å…¶åº”ç”¨äºâ€œdoPeriodicCleanupâ€æ–¹æ³•ä¸¤æ¬¡ã€‚ç¬¬ä¸€æ¬¡ä½¿ç”¨æŒ‡å®šä¸€ä¸ªæœˆçš„æœ€åä¸€å¤©ï¼Œç¬¬äºŒæ¬¡ä½¿ç”¨æŒ‡å®šæ˜ŸæœŸäº”æ™šä¸Š11ç‚¹ï¼Œå¦‚ä»¥ä¸‹ä»£ç ç¤ºä¾‹æ‰€ç¤ºï¼š 123@Schedule(dayOfMonth=&quot;last&quot;)@Schedule(dayOfWeek=&quot;Fri&quot;, hour=&quot;23&quot;)public void doPeriodicCleanup() &#123; ... &#125; ä¸Šä¸€ä¸ªç¤ºä¾‹å°†æ³¨é‡Šåº”ç”¨äºæ–¹æ³•ã€‚å¯ä»¥åœ¨ä½¿ç”¨æ ‡å‡†æ³¨é‡Šçš„ä»»ä½•ä½ç½®é‡å¤æ³¨é‡Šã€‚ä¾‹å¦‚ï¼Œæ‚¨æœ‰ä¸€ä¸ªç”¨äºå¤„ç†æœªæˆæƒè®¿é—®å¼‚å¸¸çš„ç±»ã€‚æ‚¨ä¸ºç®¡ç†è€…å’Œç®¡ç†å‘˜åˆ†åˆ«ä½¿ç”¨ä¸€ä¸ªâ€œ@Alertâ€æ³¨é‡Šæ¥æ³¨é‡Šç±»ï¼š 123@Alert(role=&quot;Manager&quot;)@Alert(role=&quot;Administrator&quot;)public class UnauthorizedAccessException extends SecurityException &#123; ... &#125; å‡ºäºå…¼å®¹æ€§åŸå› ï¼Œé‡å¤æ³¨é‡Šå­˜å‚¨åœ¨Javaç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å®¹å™¨æ³¨é‡Šä¸­ã€‚ä¸ºäº†è®©ç¼–è¯‘å™¨æ‰§è¡Œæ­¤æ“ä½œï¼Œä»£ç ä¸­éœ€è¦ä¸¤ä¸ªå£°æ˜ã€‚ Step 1: å£°æ˜å¯é‡å¤æ³¨é‡Šç±»å‹æ‰¹æ³¨ç±»å‹å¿…é¡»æ ‡è®°ä¸ºâ€œ@Repeatableâ€å…ƒæ‰¹æ³¨ã€‚ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†è‡ªå®šä¹‰çš„â€œ@Scheduleâ€å¯é‡å¤æ³¨é‡Šç±»å‹ï¼š 12345678import java.lang.annotation.Repeatable;@Repeatable(Schedules.class)public @interface Schedule &#123; String dayOfMonth() default &quot;first&quot;; String dayOfWeek() default &quot;Mon&quot;; int hour() default 12;&#125; æ‹¬å·ä¸­çš„â€œ@Repeatableâ€å…ƒæ³¨é‡Šçš„å€¼æ˜¯Javaç¼–è¯‘å™¨ä¸ºå­˜å‚¨é‡å¤æ³¨é‡Šè€Œç”Ÿæˆçš„å®¹å™¨æ³¨é‡Šçš„ç±»å‹ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒåŒ…å«çš„æ‰¹æ³¨ç±»å‹ä¸ºâ€œSchedulesâ€ï¼Œå› æ­¤é‡å¤çš„â€œ@Scheduleâ€æ‰¹æ³¨å­˜å‚¨åœ¨â€œ@Schedulesâ€æ‰¹æ³¨ä¸­ã€‚ å°†åŒä¸€æ³¨é‡Šåº”ç”¨äºå£°æ˜è€Œä¸é¦–å…ˆå£°æ˜å®ƒæ˜¯å¯é‡å¤çš„ï¼Œå°†å¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚ Step 2: å£°æ˜åŒ…å«æ‰¹æ³¨ç±»å‹åŒ…å«æ‰¹æ³¨ç±»å‹å¿…é¡»å…·æœ‰æ•°ç»„ç±»å‹çš„â€œvalueâ€å…ƒç´ ã€‚æ•°ç»„ç±»å‹çš„ç»„ä»¶ç±»å‹å¿…é¡»æ˜¯å¯é‡å¤çš„æ³¨é‡Šç±»å‹ã€‚åŒ…å«æ³¨é‡Šç±»å‹çš„â€œSchedulesâ€çš„å£°æ˜å¦‚ä¸‹ï¼š 123public @interface Schedules &#123; Schedule[] value();&#125; æ­£åœ¨æ£€ç´¢æ‰¹æ³¨åå°„APIä¸­æœ‰å‡ ç§æ–¹æ³•å¯ç”¨äºæ£€ç´¢æ³¨é‡Šã€‚è¿”å›å•ä¸ªæ³¨é‡Šçš„æ–¹æ³•çš„è¡Œä¸ºï¼Œå¦‚AnnotatedElement.getAnnotationï¼ˆClassï¼‰æ˜¯ä¸å˜çš„ï¼Œå› ä¸ºå®ƒä»¬ä»…åœ¨å­˜åœ¨æ‰€è¯·æ±‚ç±»å‹çš„ä¸€ä¸ªæ³¨é‡Šæ—¶è¿”å›å•ä¸ªæ³¨é‡Šã€‚å¦‚æœå­˜åœ¨å¤šä¸ªè¯·æ±‚ç±»å‹çš„æ³¨é‡Šï¼Œåˆ™å¯ä»¥é€šè¿‡é¦–å…ˆè·å–å®ƒä»¬çš„å®¹å™¨æ³¨é‡Šæ¥è·å–å®ƒä»¬ã€‚è¿™æ ·ï¼Œé—ç•™ä»£ç ç»§ç»­å·¥ä½œã€‚JavaSE8ä¸­å¼•å…¥äº†å…¶ä»–æ–¹æ³•ï¼Œå¯ä»¥æ‰«æå®¹å™¨æ³¨é‡Šä»¥åŒæ—¶è¿”å›å¤šä¸ªæ³¨é‡Šï¼Œä¾‹å¦‚AnnotatedElement.getAnnotationsByTypeï¼ˆClassï¼‰ã€‚å‚è§AnnotatedElementæœ‰å…³æ‰€æœ‰å¯ç”¨æ–¹æ³•çš„ä¿¡æ¯çš„ç±»è§„èŒƒã€‚ è®¾è®¡æ³¨æ„äº‹é¡¹è®¾è®¡æ³¨é‡Šç±»å‹æ—¶ï¼Œå¿…é¡»è€ƒè™‘è¯¥ç±»å‹æ³¨é‡Šçš„åŸºæ•°ã€‚ç°åœ¨å¯ä»¥é›¶æ¬¡ã€ä¸€æ¬¡æˆ–å¤šæ¬¡ä½¿ç”¨æ³¨é‡Šï¼Œå¦‚æœæ³¨é‡Šçš„ç±»å‹æ ‡è®°ä¸ºâ€œ@Repeatableâ€ã€‚è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨â€œ@Targetâ€å…ƒæ³¨é‡Šæ¥é™åˆ¶å¯ä»¥ä½¿ç”¨æ³¨é‡Šç±»å‹çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åˆ›å»ºåªèƒ½ç”¨äºæ–¹æ³•å’Œå­—æ®µçš„å¯é‡å¤æ³¨é‡Šç±»å‹ã€‚ä»”ç»†è®¾è®¡æ³¨é‡Šç±»å‹éå¸¸é‡è¦ï¼Œä»¥ç¡®ä¿ç¨‹åºå‘˜ä½¿ç”¨æ³¨é‡Šæ—¶å‘ç°å®ƒå°½å¯èƒ½çµæ´»å’Œå¼ºå¤§ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"}]},{"title":"Oracle Javaæ¥å£å’Œç»§æ‰¿","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Oracle-Javaæ¥å£å’Œç»§æ‰¿","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.282Z","comments":true,"path":"2020/07/Oracle-Javaæ¥å£å’Œç»§æ‰¿/","link":"","permalink":"https://guoshunfa.com/2020/07/Oracle-Java%E6%8E%A5%E5%8F%A3%E5%92%8C%E7%BB%A7%E6%89%BF/","excerpt":"","text":"æœ¬æ–‡ç« ä»¥jdk8ä¸ºåŸºç¡€è¿›è¡Œç¼–å†™ï¼Œå¦‚æœæƒ³æŸ¥çœ‹åç»­çš„ç‰ˆæœ¬å¯ä»¥å‰å¾€jdkç‰ˆæœ¬ç›®å½•ä¸‹æŸ¥çœ‹ã€‚ ç¿»è¯‘è‡ªï¼šhttps://docs.oracle.com/javase/tutorial/java/IandI/index.html æ¥å£åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæœ‰å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä¸åŒçš„ç¨‹åºå‘˜ç¾¤ä½“å¿…é¡»åŒæ„ä¸€ä»½â€œåˆåŒâ€ï¼Œè¯´æ˜ä»–ä»¬çš„è½¯ä»¶å¦‚ä½•äº¤äº’ã€‚æ¯ä¸ªç»„éƒ½åº”è¯¥èƒ½å¤Ÿåœ¨ä¸çŸ¥é“å…¶ä»–ç»„çš„ä»£ç æ˜¯å¦‚ä½•ç¼–å†™çš„æƒ…å†µä¸‹ç¼–å†™è‡ªå·±çš„ä»£ç ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¥å£å°±æ˜¯è¿™æ ·çš„åˆåŒã€‚ ä¾‹å¦‚ï¼Œæƒ³è±¡ä¸€ä¸ªæœªæ¥ç¤¾ä¼šï¼Œè®¡ç®—æœºæ§åˆ¶çš„æœºå™¨äººæ±½è½¦åœ¨æ— äººé©¾é©¶çš„æƒ…å†µä¸‹é€šè¿‡åŸå¸‚è¡—é“è¿é€ä¹˜å®¢ã€‚æ±½è½¦åˆ¶é€ å•†ç¼–å†™çš„è½¯ä»¶ï¼ˆå½“ç„¶æ˜¯Javaï¼‰å¯ä»¥æ“ä½œæ±½è½¦åœæ­¢ã€å¯åŠ¨ã€åŠ é€Ÿã€å·¦è½¬ç­‰ç­‰ã€‚å¦ä¸€ä¸ªå·¥ä¸šé›†å›¢ï¼Œç”µå­å¯¼èˆªä»ªå™¨åˆ¶é€ å•†ï¼Œåˆ¶é€ è®¡ç®—æœºç³»ç»Ÿï¼Œæ¥æ”¶GPSï¼ˆå…¨çƒå®šä½ç³»ç»Ÿï¼‰ä½ç½®æ•°æ®å’Œäº¤é€šçŠ¶å†µçš„æ— çº¿ä¼ è¾“ï¼Œå¹¶ä½¿ç”¨è¿™äº›ä¿¡æ¯é©¾é©¶æ±½è½¦ã€‚ æ±½è½¦åˆ¶é€ å•†å¿…é¡»å‘å¸ƒä¸€ä¸ªè¡Œä¸šæ ‡å‡†ç•Œé¢ï¼Œè¯¦ç»†è¯´æ˜å¯ä»¥è°ƒç”¨å“ªäº›æ–¹æ³•æ¥ä½¿æ±½è½¦ç§»åŠ¨ï¼ˆä»»ä½•æ±½è½¦ï¼Œä»»ä½•åˆ¶é€ å•†çš„ï¼‰ã€‚ç„¶åï¼ŒæŒ‡å—åˆ¶é€ å•†å¯ä»¥ç¼–å†™è½¯ä»¶ï¼Œè°ƒç”¨ç•Œé¢ä¸­æè¿°çš„æ–¹æ³•æ¥å‘½ä»¤æ±½è½¦ã€‚ä¸¤ä¸ªå·¥ä¸šé›†å›¢éƒ½ä¸éœ€è¦çŸ¥é“å¦ä¸€ä¸ªé›†å›¢çš„è½¯ä»¶æ˜¯å¦‚ä½•å®ç°çš„ã€‚äº‹å®ä¸Šï¼Œæ¯ä¸ªå°ç»„éƒ½è®¤ä¸ºè‡ªå·±çš„è½¯ä»¶æ˜¯é«˜åº¦ä¸“æœ‰çš„ï¼Œå¹¶ä¿ç•™éšæ—¶ä¿®æ”¹å®ƒçš„æƒåˆ©ï¼Œåªè¦å®ƒç»§ç»­éµå®ˆå‘å¸ƒçš„ç•Œé¢ã€‚ Javaä¸­çš„æ¥å£åœ¨Javaç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ¥å£æ˜¯ä¸€ç§å¼•ç”¨ç±»å‹ï¼Œç±»ä¼¼äºç±»ï¼Œå®ƒåªèƒ½åŒ…å«å¸¸é‡ã€æ–¹æ³•ç­¾åã€é»˜è®¤æ–¹æ³•ã€é™æ€æ–¹æ³•å’ŒåµŒå¥—ç±»å‹ã€‚æ–¹æ³•ä½“ä»…å­˜åœ¨äºé»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ã€‚æ¥å£ä¸èƒ½å®ä¾‹åŒ–ï¼Œå®ƒä»¬åªèƒ½ç”±ç±»å®ç°æˆ–ç”±å…¶ä»–æ¥å£æ‰©å±•ã€‚æœ¬è¯¾ç¨åå°†è®¨è®ºæ‰©å±•ã€‚ å®šä¹‰æ¥å£ç±»ä¼¼äºåˆ›å»ºæ–°ç±»ï¼š 1234567891011121314151617181920212223public interface OperateCar &#123; // å¸¸é‡å£°æ˜ï¼ˆå¦‚æœæœ‰ï¼‰ // æ–¹æ³•ç­¾å // An enum with values RIGHT, LEFT int turn(Direction direction, double radius, double startSpeed, double endSpeed); int changeLanes(Direction direction, double startSpeed, double endSpeed); int signalTurn(Direction direction, boolean signalOn); int getRadarFront(double distanceToCar, double speedOfCar); int getRadarRear(double distanceToCar, double speedOfCar); ...... // more method signatures&#125; è¯·æ³¨æ„ï¼Œæ–¹æ³•ç­¾åæ²¡æœ‰å¤§æ‹¬å·ï¼Œå¹¶ä»¥åˆ†å·ç»“å°¾ã€‚ è¦ä½¿ç”¨æ¥å£ï¼Œæ‚¨éœ€è¦ç¼–å†™ä¸€ä¸ªå®ç°æ¥å£çš„ç±»ã€‚å½“å¯å®ä¾‹åŒ–ç±»å®ç°æ¥å£æ—¶ï¼Œå®ƒä¸ºæ¥å£ä¸­å£°æ˜çš„æ¯ä¸ªæ–¹æ³•æä¾›æ–¹æ³•ä½“ã€‚ä¾‹å¦‚ 1234567891011121314public class OperateBMW760i implements OperateCar &#123; // the OperateCar method signatures, with implementation -- // for example: public int signalTurn(Direction direction, boolean signalOn) &#123; // code to turn BMW&#x27;s LEFT turn indicator lights on // code to turn BMW&#x27;s LEFT turn indicator lights off // code to turn BMW&#x27;s RIGHT turn indicator lights on // code to turn BMW&#x27;s RIGHT turn indicator lights off &#125; // other members, as needed -- for example, helper classes not // visible to clients of the interface&#125; åœ¨ä¸Šé¢çš„æœºå™¨äººæ±½è½¦ç¤ºä¾‹ä¸­ï¼Œå°†ç”±æ±½è½¦åˆ¶é€ å•†æ¥å®ç°æ¥å£ã€‚å½“ç„¶ï¼Œé›ªä½›å…°çš„å®æ–½æ–¹å¼å°†ä¸ä¸°ç”°çš„å®æ–½æ–¹å¼å¤§ä¸ç›¸åŒï¼Œä½†ä¸¤å®¶åˆ¶é€ å•†éƒ½å°†éµå¾ªç›¸åŒçš„ç•Œé¢ã€‚ä½œä¸ºè¯¥æ¥å£çš„å®¢æˆ·ï¼Œå¯¼èˆªåˆ¶é€ å•†å°†æ„å»ºä½¿ç”¨æ±½è½¦ä½ç½®GPSæ•°æ®ã€æ•°å­—è¡—é“åœ°å›¾å’Œäº¤é€šæ•°æ®é©¾é©¶æ±½è½¦çš„ç³»ç»Ÿã€‚è¿™æ ·ï¼Œåˆ¶å¯¼ç³»ç»Ÿå°†è°ƒç”¨æ¥å£æ–¹æ³•ï¼šè½¬å¼¯ã€å˜é“ã€åˆ¹è½¦ã€åŠ é€Ÿç­‰ã€‚ æ¥å£ä½œä¸ºAPIæœºå™¨äººæ±½è½¦ç¤ºä¾‹æ˜¾ç¤ºäº†ç”¨ä½œè¡Œä¸šæ ‡å‡†çš„æ¥å£åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼ˆAPIï¼‰ã€‚APIåœ¨å•†ä¸šè½¯ä»¶äº§å“ä¸­ä¹Ÿå¾ˆå¸¸è§ã€‚é€šå¸¸ï¼Œä¸€å®¶å…¬å¸é”€å”®çš„è½¯ä»¶åŒ…åŒ…å«å¦ä¸€å®¶å…¬å¸å¸Œæœ›åœ¨è‡ªå·±çš„è½¯ä»¶äº§å“ä¸­ä½¿ç”¨çš„å¤æ‚æ–¹æ³•ã€‚ä¸€ä¸ªä¾‹å­æ˜¯å‘åˆ¶ä½œæœ€ç»ˆç”¨æˆ·å›¾å½¢ç¨‹åºçš„å…¬å¸å‡ºå”®çš„ä¸€å¥—æ•°å­—å›¾åƒå¤„ç†æ–¹æ³•ã€‚è¿™å®¶å›¾åƒå¤„ç†å…¬å¸ç¼–å†™ç±»æ¥å®ç°ä¸€ä¸ªæ¥å£ï¼Œå¹¶å°†å…¶å…¬å¼€ç»™å®¢æˆ·ã€‚ç„¶åï¼Œå›¾å½¢å…¬å¸ä½¿ç”¨æ¥å£ä¸­å®šä¹‰çš„ç­¾åå’Œè¿”å›ç±»å‹è°ƒç”¨å›¾åƒå¤„ç†æ–¹æ³•ã€‚è™½ç„¶å›¾åƒå¤„ç†å…¬å¸çš„APIå…¬å¼€ï¼ˆå‘å…¶å®¢æˆ·ï¼‰ï¼Œä½†å…¶APIçš„å®ç°è¢«ä¸¥æ ¼ä¿å¯†ã€‚äº‹å®ä¸Šï¼Œåªè¦å®ƒç»§ç»­å®ç°å…¶å®¢æˆ·æ‰€ä¾èµ–çš„åŸå§‹æ¥å£ï¼Œå®ƒå¯èƒ½ä¼šåœ¨ç¨åä¿®æ”¹å®ç°ã€‚ å®šä¹‰æ¥å£æ¥å£å£°æ˜ç”±ä¿®é¥°ç¬¦ã€å…³é”®å­—â€œinterfaceâ€ã€æ¥å£åç§°ã€ä»¥é€—å·åˆ†éš”çš„çˆ¶æ¥å£åˆ—è¡¨ï¼ˆå¦‚æœæœ‰ï¼‰å’Œæ¥å£ä¸»ä½“ç»„æˆã€‚ä¾‹å¦‚ï¼š 1234567891011public interface GroupedInterface extends Interface1, Interface2, Interface3 &#123; // å¸¸é‡å£°æ˜ // base of natural logarithms double E = 2.718282; // method signatures void doSomething (int i, double x); int doSomethingElse(String s);&#125; â€œpublicâ€è®¿é—®è¯´æ˜ç¬¦è¡¨ç¤ºæ¥å£å¯ä»¥ç”±ä»»ä½•åŒ…ä¸­çš„ä»»ä½•ç±»ä½¿ç”¨ã€‚å¦‚æœæœªæŒ‡å®šæ¥å£æ˜¯å…¬å…±çš„ï¼Œåˆ™åªæœ‰åœ¨ä¸æ¥å£ç›¸åŒçš„åŒ…ä¸­å®šä¹‰çš„ç±»æ‰èƒ½è®¿é—®æ¥å£ã€‚ ä¸€ä¸ªæ¥å£å¯ä»¥æ‰©å±•å…¶ä»–æ¥å£ï¼Œå°±åƒä¸€ä¸ªç±»å­ç±»æˆ–æ‰©å±•å¦ä¸€ä¸ªç±»ä¸€æ ·ã€‚ç„¶è€Œï¼Œè™½ç„¶ä¸€ä¸ªç±»åªèƒ½æ‰©å±•å¦ä¸€ä¸ªç±»ï¼Œä½†æ˜¯ä¸€ä¸ªæ¥å£å¯ä»¥æ‰©å±•ä»»æ„æ•°é‡çš„æ¥å£ã€‚æ¥å£å£°æ˜åŒ…æ‹¬ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„åˆ—è¡¨ï¼Œå…¶ä¸­åˆ—å‡ºäº†å®ƒæ‰€æ‰©å±•çš„æ‰€æœ‰æ¥å£ã€‚ æ¥å£ä¸»ä½“æ¥å£ä¸»ä½“å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œé»˜è®¤æ–¹æ³•ï¼Œå’Œé™æ€æ–¹æ³•. æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•åé¢æ˜¯åˆ†å·ï¼Œä½†æ²¡æœ‰å¤§æ‹¬å·ï¼ˆæŠ½è±¡æ–¹æ³•ä¸åŒ…å«å®ç°ï¼‰ã€‚é»˜è®¤æ–¹æ³•ä½¿ç”¨â€œDefaultâ€ä¿®é¥°ç¬¦å®šä¹‰ï¼Œé™æ€æ–¹æ³•ä½¿ç”¨â€œstaticâ€å…³é”®å­—å®šä¹‰ã€‚æ¥å£ä¸­çš„æ‰€æœ‰æŠ½è±¡ã€é»˜è®¤å’Œé™æ€æ–¹æ³•éƒ½æ˜¯éšå¼çš„â€œpublicâ€ï¼Œå› æ­¤å¯ä»¥çœç•¥â€œpublicâ€ä¿®é¥°ç¬¦ã€‚ æ­¤å¤–ï¼Œæ¥å£å¯ä»¥åŒ…å«å¸¸é‡å£°æ˜ã€‚æ¥å£ä¸­å®šä¹‰çš„æ‰€æœ‰å¸¸é‡å€¼éƒ½éšå¼ä¸ºâ€œpublicâ€ã€â€œstaticâ€å’Œâ€œfinalâ€ã€‚åŒæ ·ï¼Œå¯ä»¥çœç•¥è¿™äº›ä¿®æ”¹å™¨ã€‚ å®ç°æ¥å£è¦å£°æ˜å®ç°æ¥å£çš„ç±»ï¼Œè¯·åœ¨ç±»å£°æ˜ä¸­åŒ…å«â€œimplementsâ€å­å¥ã€‚æ‚¨çš„ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œå› æ­¤â€œimplementsâ€å…³é”®å­—åé¢æ˜¯è¯¥ç±»å®ç°çš„æ¥å£çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œå¦‚æœâ€œextendsâ€å­å¥åé¢æœ‰â€œimplementsâ€å­å¥ï¼Œåˆ™â€œimplementâ€å­å¥åœ¨åé¢ã€‚ ç¤ºä¾‹ç•Œé¢ï¼Œå¯å…³è”è€ƒè™‘ä¸€ä¸ªå®šä¹‰å¦‚ä½•æ¯”è¾ƒå¯¹è±¡å¤§å°çš„æ¥å£ã€‚ 123456789public interface Relatable &#123; // this (object calling isLargerThan) // and other must be instances of // the same class returns 1, 0, -1 // if this is greater than, // equal to, or less than other public int isLargerThan(Relatable other);&#125; å¦‚æœæ‚¨å¸Œæœ›èƒ½å¤Ÿæ¯”è¾ƒç±»ä¼¼å¯¹è±¡çš„å¤§å°ï¼Œæ— è®ºå®ƒä»¬æ˜¯ä»€ä¹ˆï¼Œå®ä¾‹åŒ–å®ƒä»¬çš„ç±»éƒ½åº”è¯¥å®ç°â€œRelatableâ€ã€‚ å¦‚æœæœ‰æŸç§æ–¹æ³•å¯ä»¥æ¯”è¾ƒä»ç±»å®ä¾‹åŒ–çš„å¯¹è±¡çš„ç›¸å¯¹â€œå¤§å°â€ï¼Œåˆ™ä»»ä½•ç±»éƒ½å¯ä»¥å®ç°â€œRelatableâ€ã€‚å¯¹äºå­—ç¬¦ä¸²ï¼Œå®ƒå¯ä»¥æ˜¯å­—ç¬¦æ•°ï¼›å¯¹äºä¹¦ç±ï¼Œå¯ä»¥æ˜¯é¡µæ•°ï¼›å¯¹å­¦ç”Ÿæ¥è¯´ï¼Œå¯èƒ½æ˜¯ä½“é‡ï¼›ç­‰ç­‰å¯¹äºå¹³é¢å‡ ä½•å¯¹è±¡ï¼Œé¢ç§¯å°†æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼ˆè¯·å‚è§ä¸‹é¢çš„â€œRectanglePlusâ€ç±»ï¼‰ï¼Œè€Œä½“ç§¯å°†é€‚ç”¨äºä¸‰ç»´å‡ ä½•å¯¹è±¡ã€‚æ‰€æœ‰æ­¤ç±»ç±»éƒ½å¯ä»¥å®ç°â€œisLargerThanï¼ˆï¼‰â€æ–¹æ³•ã€‚ å¦‚æœæ‚¨çŸ¥é“ä¸€ä¸ªç±»å®ç°äº†â€œRelatableâ€ï¼Œé‚£ä¹ˆæ‚¨å°±å¯ä»¥æ¯”è¾ƒä»è¯¥ç±»å®ä¾‹åŒ–çš„å¯¹è±¡çš„å¤§å°ã€‚ å®ç°ç›¸å…³æ¥å£è¿™æ˜¯Creating Objectsä¸­æ˜¾ç¤ºçš„â€œRectangleâ€ç±»éƒ¨åˆ†ï¼Œé‡å†™ä¸ºå®ç°â€œRelatableâ€ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class RectanglePlus implements Relatable &#123; public int width = 0; public int height = 0; public Point origin; // four constructors public RectanglePlus() &#123; origin = new Point(0, 0); &#125; public RectanglePlus(Point p) &#123; origin = p; &#125; public RectanglePlus(int w, int h) &#123; origin = new Point(0, 0); width = w; height = h; &#125; public RectanglePlus(Point p, int w, int h) &#123; origin = p; width = w; height = h; &#125; // a method for moving the rectangle public void move(int x, int y) &#123; origin.x = x; origin.y = y; &#125; // a method for computing // the area of the rectangle public int getArea() &#123; return width * height; &#125; // a method required to implement // the Relatable interface public int isLargerThan(Relatable other) &#123; RectanglePlus otherRect = (RectanglePlus)other; if (this.getArea() &lt; otherRect.getArea()) return -1; else if (this.getArea() &gt; otherRect.getArea()) return 1; else return 0; &#125;&#125; ç”±äºâ€œRectanglePlusâ€å®ç°äº†â€œRelatableâ€ï¼Œå› æ­¤å¯ä»¥æ¯”è¾ƒä»»æ„ä¸¤ä¸ªâ€œRectangle Plusâ€å¯¹è±¡çš„å¤§å°ã€‚ Note: åœ¨â€œRelatableâ€æ¥å£ä¸­å®šä¹‰çš„â€œisLargerThanâ€æ–¹æ³•æ¥å—ç±»å‹ä¸ºâ€œRelatableâ€çš„å¯¹è±¡ã€‚åœ¨ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­ä»¥ç²—ä½“æ˜¾ç¤ºçš„ä»£ç è¡Œå°†â€œotherâ€å¼ºåˆ¶è½¬æ¢ä¸ºâ€œRectanglePlusâ€å®ä¾‹ã€‚ç±»å‹è½¬æ¢å‘Šè¯‰ç¼–è¯‘å™¨å¯¹è±¡çš„çœŸæ­£å«ä¹‰ã€‚ç›´æ¥åœ¨â€œotherâ€å®ä¾‹ï¼ˆâ€œother.getArea()â€ï¼‰ä¸Šè°ƒç”¨â€œgetAreaâ€å°†æ— æ³•ç¼–è¯‘ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“â€œotherâ€å®é™…ä¸Šæ˜¯â€œRectanglePlusâ€çš„å®ä¾‹ã€‚ ä½¿ç”¨æ¥å£ä½œä¸ºç±»å‹å®šä¹‰æ–°æ¥å£æ—¶ï¼Œå³å®šä¹‰äº†æ–°çš„å¼•ç”¨æ•°æ®ç±»å‹ã€‚æ‚¨å¯ä»¥åœ¨ä»»ä½•å¯ä»¥ä½¿ç”¨ä»»ä½•å…¶ä»–æ•°æ®ç±»å‹åç§°çš„åœ°æ–¹ä½¿ç”¨æ¥å£åç§°ã€‚å¦‚æœå®šä¹‰çš„å¼•ç”¨å˜é‡çš„ç±»å‹æ˜¯æ¥å£ï¼Œåˆ™åˆ†é…ç»™å®ƒçš„ä»»ä½•å¯¹è±¡å¿…é¡»æ˜¯å®ç°æ¥å£çš„ç±»çš„å®ä¾‹ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºä»å®ç°â€œRelatableâ€çš„ç±»å®ä¾‹åŒ–çš„ä»»ä½•å¯¹è±¡ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªæŸ¥æ‰¾ä¸€å¯¹å¯¹è±¡ä¸­æœ€å¤§å¯¹è±¡çš„æ–¹æ³•ï¼š 12345678public Object findLargest(Object object1, Object object2) &#123; Relatable obj1 = (Relatable)object1; Relatable obj2 = (Relatable)object2; if ((obj1).isLargerThan(obj2) &gt; 0) return object1; else return object2;&#125; é€šè¿‡å°†â€œobject1â€è½¬æ¢ä¸ºâ€œRelatableâ€ç±»å‹ï¼Œå®ƒå¯ä»¥è°ƒç”¨â€œisLargerThanâ€æ–¹æ³•ã€‚ å¦‚æœè¦åœ¨å„ç§å„æ ·çš„ç±»ä¸­å®ç°â€œRelatableâ€ï¼Œé‚£ä¹ˆå¯ä»¥å°†ä»è¿™äº›ç±»ä¸­çš„ä»»æ„å®ä¾‹åŒ–çš„å¯¹è±¡ä¸â€œfindLargestï¼ˆï¼‰â€æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œå‰ææ˜¯è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½å±äºåŒä¸€ç±»ã€‚åŒæ ·ï¼Œå®ƒä»¬éƒ½å¯ä»¥ä¸ä»¥ä¸‹æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼š 1234567891011121314151617public Object findSmallest(Object object1, Object object2) &#123; Relatable obj1 = (Relatable)object1; Relatable obj2 = (Relatable)object2; if ((obj1).isLargerThan(obj2) &lt; 0) return object1; else return object2;&#125;public boolean isEqual(Object object1, Object object2) &#123; Relatable obj1 = (Relatable)object1; Relatable obj2 = (Relatable)object2; if ( (obj1).isLargerThan(obj2) == 0) return true; else return false;&#125; è¿™äº›æ–¹æ³•é€‚ç”¨äºä»»ä½•â€œç›¸å…³â€å¯¹è±¡ï¼Œæ— è®ºå…¶ç±»ç»§æ‰¿æ˜¯ä»€ä¹ˆã€‚å½“å®ƒä»¬å®ç°â€œç›¸å…³â€æ—¶ï¼Œå®ƒä»¬æ—¢å¯ä»¥æ˜¯è‡ªå·±çš„ç±»ï¼ˆæˆ–è¶…ç±»ï¼‰ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯â€œç›¸å…³â€ç±»å‹ã€‚è¿™ä¸ºå®ƒä»¬æä¾›äº†å¤šé‡ç»§æ‰¿çš„ä¸€äº›ä¼˜ç‚¹ï¼Œå®ƒä»¬å¯ä»¥åŒæ—¶ä»è¶…ç±»å’Œæ¥å£è·å¾—è¡Œä¸ºã€‚ ä¸æ–­å‘å±•çš„æ¥å£è€ƒè™‘æ‚¨å¼€å‘çš„ä¸€ä¸ªåä¸º DoIt: 1234public interface DoIt &#123; void doSomething(int i, double x); int doSomethingElse(String s);&#125; å‡è®¾ç¨åè¦å‘â€œDoItâ€æ·»åŠ ç¬¬ä¸‰ä¸ªæ–¹æ³•ï¼Œè¿™æ ·æ¥å£ç°åœ¨å°±å˜æˆï¼š 1234567public interface DoIt &#123; void doSomething(int i, double x); int doSomethingElse(String s); boolean didItWork(int i, double x, String s); &#125; å¦‚æœè¿›è¡Œæ­¤æ›´æ”¹ï¼Œåˆ™å®ç°æ—§â€œDoItâ€æ¥å£çš„æ‰€æœ‰ç±»éƒ½å°†ä¸­æ–­ï¼Œå› ä¸ºå®ƒä»¬ä¸å†å®ç°æ—§æ¥å£ã€‚ä¾èµ–è¿™ä¸ªæ¥å£çš„ç¨‹åºå‘˜ä¼šå¤§å£°æŠ—è®®ã€‚ å°è¯•é¢„æµ‹æ¥å£çš„æ‰€æœ‰ç”¨é€”ï¼Œå¹¶ä»ä¸€å¼€å§‹å°±å®Œå…¨æŒ‡å®šå®ƒã€‚å¦‚æœè¦å‘æ¥å£æ·»åŠ å…¶ä»–æ–¹æ³•ï¼Œå¯ä»¥æœ‰å‡ ä¸ªé€‰é¡¹ã€‚æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ‰©å±•â€œDoItâ€çš„â€œDoItPlusâ€æ¥å£ï¼š 12345public interface DoItPlus extends DoIt &#123; boolean didItWork(int i, double x, String s); &#125; ç°åœ¨ï¼Œä»£ç çš„ç”¨æˆ·å¯ä»¥é€‰æ‹©ç»§ç»­ä½¿ç”¨æ—§ç•Œé¢æˆ–å‡çº§åˆ°æ–°ç•Œé¢ã€‚ æˆ–è€…ï¼Œæ‚¨å¯ä»¥å°†æ–°æ–¹æ³•å®šä¹‰ä¸ºé»˜è®¤æ–¹æ³•. ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†åä¸ºâ€œdidItWorkâ€çš„é»˜è®¤æ–¹æ³•ï¼š 123456789public interface DoIt &#123; void doSomething(int i, double x); int doSomethingElse(String s); default boolean didItWork(int i, double x, String s) &#123; // Method body &#125; &#125; æ³¨æ„ï¼Œå¿…é¡»ä¸ºé»˜è®¤æ–¹æ³•æä¾›å®ç°ã€‚æ‚¨è¿˜å¯ä»¥å®šä¹‰æ–°çš„é™æ€æ–¹æ³•åˆ°ç°æœ‰æ¥å£ã€‚æ‹¥æœ‰å®ç°ç”¨æ–°çš„é»˜è®¤æˆ–é™æ€æ–¹æ³•å¢å¼ºçš„æ¥å£çš„ç±»çš„ç”¨æˆ·ä¸å¿…ä¿®æ”¹æˆ–é‡æ–°ç¼–è¯‘å®ƒä»¬ä»¥é€‚åº”å…¶ä»–æ–¹æ³•ã€‚ é»˜è®¤æ–¹æ³•æ¥å£éƒ¨åˆ†æè¿°äº†ä¸€ä¸ªæ¶‰åŠè®¡ç®—æœºæ§åˆ¶æ±½è½¦åˆ¶é€ å•†çš„ç¤ºä¾‹ï¼Œè¿™äº›åˆ¶é€ å•†å‘å¸ƒäº†è¡Œä¸šæ ‡å‡†æ¥å£ï¼Œè¿™äº›æ¥å£æè¿°äº†å¯ä»¥è°ƒç”¨å“ªäº›æ–¹æ³•æ¥æ“ä½œä»–ä»¬çš„æ±½è½¦ã€‚å¦‚æœé‚£äº›è®¡ç®—æœºæ§åˆ¶çš„æ±½è½¦åˆ¶é€ å•†ä¸ºä»–ä»¬çš„æ±½è½¦å¢åŠ äº†æ–°çš„åŠŸèƒ½ï¼Œæ¯”å¦‚é£è¡Œï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿè¿™äº›åˆ¶é€ å•†éœ€è¦æŒ‡å®šæ–°çš„æ–¹æ³•ï¼Œä»¥ä½¿å…¶ä»–å…¬å¸ï¼ˆå¦‚ç”µå­åˆ¶å¯¼ä»ªå™¨åˆ¶é€ å•†ï¼‰èƒ½å¤Ÿä½¿å…¶è½¯ä»¶é€‚åº”é£è¡Œæ±½è½¦ã€‚è¿™äº›æ±½è½¦åˆ¶é€ å•†å°†åœ¨å“ªé‡Œå®£å¸ƒè¿™äº›ä¸é£è¡Œç›¸å…³çš„æ–°æ–¹æ³•ï¼Ÿå¦‚æœä»–ä»¬å°†å®ƒä»¬æ·»åŠ åˆ°åŸå§‹æ¥å£ä¸­ï¼Œé‚£ä¹ˆå®ç°äº†è¿™äº›æ¥å£çš„ç¨‹åºå‘˜å°†ä¸å¾—ä¸é‡å†™å…¶å®ç°ã€‚å¦‚æœä»–ä»¬å°†å®ƒä»¬æ·»åŠ ä¸ºé™æ€æ–¹æ³•ï¼Œé‚£ä¹ˆç¨‹åºå‘˜ä¼šå°†å®ƒä»¬è§†ä¸ºå®ç”¨æ–¹æ³•ï¼Œè€Œä¸æ˜¯å¿…è¦çš„æ ¸å¿ƒæ–¹æ³•ã€‚ é»˜è®¤æ–¹æ³•ä½¿æ‚¨èƒ½å¤Ÿå‘åº“çš„æ¥å£æ·»åŠ æ–°åŠŸèƒ½ï¼Œå¹¶ç¡®ä¿ä¸ä¸ºè¿™äº›æ¥å£çš„æ—§ç‰ˆæœ¬ç¼–å†™çš„ä»£ç çš„äºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚ è€ƒè™‘ä»¥ä¸‹æ¥å£TimeClientï¼Œå¦‚é—®é¢˜å’Œç»ƒä¹ ç­”æ¡ˆï¼šç•Œé¢ä¸­æ‰€è¿°: 123456789import java.time.*; public interface TimeClient &#123; void setTime(int hour, int minute, int second); void setDate(int day, int month, int year); void setDateAndTime(int day, int month, int year, int hour, int minute, int second); LocalDateTime getLocalDateTime();&#125; ä»¥ä¸‹ç±»SimpleTimeClientï¼Œå®ç°â€œTimeClientâ€ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package defaultmethods;import java.time.*;import java.lang.*;import java.util.*;public class SimpleTimeClient implements TimeClient &#123; private LocalDateTime dateAndTime; public SimpleTimeClient() &#123; dateAndTime = LocalDateTime.now(); &#125; public void setTime(int hour, int minute, int second) &#123; LocalDate currentDate = LocalDate.from(dateAndTime); LocalTime timeToSet = LocalTime.of(hour, minute, second); dateAndTime = LocalDateTime.of(currentDate, timeToSet); &#125; public void setDate(int day, int month, int year) &#123; LocalDate dateToSet = LocalDate.of(day, month, year); LocalTime currentTime = LocalTime.from(dateAndTime); dateAndTime = LocalDateTime.of(dateToSet, currentTime); &#125; public void setDateAndTime(int day, int month, int year, int hour, int minute, int second) &#123; LocalDate dateToSet = LocalDate.of(day, month, year); LocalTime timeToSet = LocalTime.of(hour, minute, second); dateAndTime = LocalDateTime.of(dateToSet, timeToSet); &#125; public LocalDateTime getLocalDateTime() &#123; return dateAndTime; &#125; public String toString() &#123; return dateAndTime.toString(); &#125; public static void main(String... args) &#123; TimeClient myTimeClient = new SimpleTimeClient(); System.out.println(myTimeClient.toString()); &#125;&#125; å‡è®¾æ‚¨å¸Œæœ›å‘â€œTimeClientâ€æ¥å£æ·»åŠ æ–°åŠŸèƒ½ï¼Œä¾‹å¦‚é€šè¿‡ZonedDateTimeæŒ‡å®šæ—¶åŒºçš„åŠŸèƒ½å¯¹è±¡ï¼ˆç±»ä¼¼äºLocalDateTimeå¯¹è±¡ï¼Œé™¤äº†å®ƒå­˜å‚¨æ—¶åŒºä¿¡æ¯ï¼‰ï¼š 12345678public interface TimeClient &#123; void setTime(int hour, int minute, int second); void setDate(int day, int month, int year); void setDateAndTime(int day, int month, int year, int hour, int minute, int second); LocalDateTime getLocalDateTime(); ZonedDateTime getZonedDateTime(String zoneString);&#125; å¯¹â€œTimeClientâ€æ¥å£è¿›è¡Œä¿®æ”¹åï¼Œè¿˜å¿…é¡»ä¿®æ”¹ç±»â€œSimpleTimeClientâ€å¹¶å®ç°æ–¹æ³•â€œgetZonedDateTimeâ€ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥å®šä¹‰ä¸€ä¸ªé»˜è®¤å®ç°ï¼Œè€Œä¸æ˜¯å°†â€œgetZonedDateTimeâ€ä¿ç•™ä¸ºâ€œabstractâ€ï¼ˆå¦‚å‰ä¸€ä¸ªç¤ºä¾‹æ‰€ç¤ºï¼‰ã€‚ï¼ˆè®°ä½æŠ½è±¡æ–¹æ³•æ˜¯æ²¡æœ‰å®ç°çš„å£°æ˜æ–¹æ³•ã€‚ï¼‰ 12345678910111213141516171819202122232425package defaultmethods; import java.time.*;public interface TimeClient &#123; void setTime(int hour, int minute, int second); void setDate(int day, int month, int year); void setDateAndTime(int day, int month, int year, int hour, int minute, int second); LocalDateTime getLocalDateTime(); static ZoneId getZoneId (String zoneString) &#123; try &#123; return ZoneId.of(zoneString); &#125; catch (DateTimeException e) &#123; System.err.println(&quot;Invalid time zone: &quot; + zoneString + &quot;; using default time zone instead.&quot;); return ZoneId.systemDefault(); &#125; &#125; default ZonedDateTime getZonedDateTime(String zoneString) &#123; return ZonedDateTime.of(getLocalDateTime(), getZoneId(zoneString)); &#125;&#125; æ‚¨å¯ä»¥æŒ‡å®šæ¥å£ä¸­çš„æ–¹æ³•å®šä¹‰æ˜¯é»˜è®¤æ–¹æ³•ï¼Œæ–¹æ³•ç­¾åå¼€å¤´å¸¦æœ‰â€œdefaultâ€å…³é”®å­—ã€‚æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•å£°æ˜ï¼ˆåŒ…æ‹¬é»˜è®¤æ–¹æ³•ï¼‰éƒ½éšå¼ä¸ºâ€œpublicâ€ï¼Œå› æ­¤å¯ä»¥çœç•¥â€œpublicâ€ä¿®é¥°ç¬¦ã€‚ ä½¿ç”¨æ­¤æ¥å£ï¼Œæ‚¨ä¸å¿…ä¿®æ”¹ç±»â€œSimpleTimeClientâ€ï¼Œå¹¶ä¸”è¯¥ç±»ï¼ˆä»¥åŠå®ç°æ¥å£â€œTimeClientâ€çš„ä»»ä½•ç±»ï¼‰å°†å…·æœ‰å·²å®šä¹‰çš„æ–¹æ³•â€œgetZonedDateTimeâ€ã€‚ä»¥ä¸‹ç¤ºä¾‹TestSimpleTimeClientï¼Œä»â€œSimpleTimeClientâ€å®ä¾‹è°ƒç”¨æ–¹æ³•â€œgetZonedDateTimeâ€ï¼š 1234567891011121314package defaultmethods; import java.time.*;import java.lang.*;import java.util.*;public class TestSimpleTimeClient &#123; public static void main(String... args) &#123; TimeClient myTimeClient = new SimpleTimeClient(); System.out.println(&quot;Current time: &quot; + myTimeClient.toString()); System.out.println(&quot;Time in California: &quot; + myTimeClient.getZonedDateTime(&quot;Blah blah&quot;).toString()); &#125;&#125; æ‰©å±•åŒ…å«é»˜è®¤æ–¹æ³•çš„æ¥å£æ‰©å±•åŒ…å«é»˜è®¤æ–¹æ³•çš„æ¥å£æ—¶ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š æ ¹æœ¬ä¸ç”¨æé»˜è®¤æ–¹æ³•ï¼Œå®ƒå…è®¸æ‰©å±•æ¥å£ç»§æ‰¿é»˜è®¤æ–¹æ³•ã€‚ é‡æ–°å£°æ˜é»˜è®¤æ–¹æ³•ï¼Œä½¿å…¶æˆä¸ºâ€œæŠ½è±¡â€ã€‚ é‡æ–°å®šä¹‰é»˜è®¤æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†è¦†ç›–è¯¥æ–¹æ³•ã€‚ å‡è®¾æ‚¨æŒ‰å¦‚ä¸‹æ–¹å¼æ‰©å±•æ¥å£â€œTimeClientâ€ï¼š 1public interface AnotherTimeClient extends TimeClient &#123; &#125; å®ç°æ¥å£â€œAnotherTimeClientâ€çš„ä»»ä½•ç±»éƒ½å°†å…·æœ‰é»˜è®¤æ–¹æ³•â€œTimeClient.getZonedDateTimeâ€æŒ‡å®šçš„å®ç°ã€‚ å‡è®¾æ‚¨æŒ‰å¦‚ä¸‹æ–¹å¼æ‰©å±•æ¥å£â€œTimeClientâ€ï¼š 123public interface AbstractZoneTimeClient extends TimeClient &#123; public ZonedDateTime getZonedDateTime(String zoneString);&#125; å®ç°æ¥å£â€œAbstractZoneTimeClientâ€çš„ä»»ä½•ç±»éƒ½å¿…é¡»å®ç°æ–¹æ³•â€œgetZonedDateTimeâ€ï¼›ä¸æ¥å£ä¸­çš„æ‰€æœ‰å…¶ä»–éé»˜è®¤ï¼ˆå’Œéé™æ€ï¼‰æ–¹æ³•ä¸€æ ·ï¼Œè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªâ€œæŠ½è±¡â€æ–¹æ³•ã€‚ å‡è®¾æ‚¨æŒ‰å¦‚ä¸‹æ–¹å¼æ‰©å±•æ¥å£â€œTimeClientâ€ï¼š 1234567891011public interface HandleInvalidTimeZoneClient extends TimeClient &#123; default public ZonedDateTime getZonedDateTime(String zoneString) &#123; try &#123; return ZonedDateTime.of(getLocalDateTime(),ZoneId.of(zoneString)); &#125; catch (DateTimeException e) &#123; System.err.println(&quot;Invalid zone ID: &quot; + zoneString + &quot;; using the default time zone instead.&quot;); return ZonedDateTime.of(getLocalDateTime(),ZoneId.systemDefault()); &#125; &#125;&#125; å®ç°æ¥å£â€œHandleInvalidTimeZoneClientâ€çš„ä»»ä½•ç±»éƒ½å°†ä½¿ç”¨æ­¤æ¥å£æŒ‡å®šçš„â€œgetZonedDateTimeâ€å®ç°ï¼Œè€Œä¸æ˜¯æ¥å£â€œTimeClientâ€æŒ‡å®šçš„å®ç°ã€‚ é™æ€æ–¹æ³•é™¤äº†é»˜è®¤æ–¹æ³•ï¼Œæ‚¨è¿˜å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•åœ¨æ¥å£ä¸­ã€‚ï¼ˆé™æ€æ–¹æ³•æ˜¯ä¸€ç§ä¸å®šä¹‰å®ƒçš„ç±»å…³è”çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä¸ä»»ä½•å¯¹è±¡å…³è”çš„æ–¹æ³•ã€‚è¯¥ç±»çš„æ¯ä¸ªå®ä¾‹éƒ½å…±äº«å…¶é™æ€æ–¹æ³•ã€‚ï¼‰è¿™ä½¿æ‚¨æ›´å®¹æ˜“åœ¨åº“ä¸­ç»„ç»‡åŠ©æ‰‹æ–¹æ³•ï¼›æ‚¨å¯ä»¥åœ¨åŒä¸€ä¸ªæ¥å£ä¸­è€Œä¸æ˜¯åœ¨å•ç‹¬çš„ç±»ä¸­ä¿æŒç‰¹å®šäºæ¥å£çš„é™æ€æ–¹æ³•ã€‚ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ£€ç´¢ZoneIdä¸æ—¶åŒºæ ‡è¯†ç¬¦ç›¸å¯¹åº”çš„å¯¹è±¡ï¼›å¦‚æœæ²¡æœ‰å¯¹åº”äºç»™å®šæ ‡è¯†ç¬¦çš„â€œZoneIdâ€å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æ—¶åŒºã€‚ï¼ˆå› æ­¤ï¼Œæ‚¨å¯ä»¥ç®€åŒ–æ–¹æ³•getZonedDateTimeï¼‰ï¼š 12345678910111213141516public interface TimeClient &#123; // ... static public ZoneId getZoneId (String zoneString) &#123; try &#123; return ZoneId.of(zoneString); &#125; catch (DateTimeException e) &#123; System.err.println(&quot;Invalid time zone: &quot; + zoneString + &quot;; using default time zone instead.&quot;); return ZoneId.systemDefault(); &#125; &#125; default public ZonedDateTime getZonedDateTime(String zoneString) &#123; return ZonedDateTime.of(getLocalDateTime(), getZoneId(zoneString)); &#125; &#125; ä¸ç±»ä¸­çš„é™æ€æ–¹æ³•ä¸€æ ·ï¼Œæ‚¨æŒ‡å®šæ¥å£ä¸­çš„æ–¹æ³•å®šä¹‰æ˜¯é™æ€æ–¹æ³•ï¼Œæ–¹æ³•ç­¾åå¼€å¤´å¸¦æœ‰â€œstaticâ€å…³é”®å­—ã€‚æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•å£°æ˜ï¼ˆåŒ…æ‹¬é™æ€æ–¹æ³•ï¼‰éƒ½éšå¼ä¸ºâ€œpublicâ€ï¼Œå› æ­¤å¯ä»¥çœç•¥â€œpublicâ€ä¿®é¥°ç¬¦ã€‚ å°†é»˜è®¤æ–¹æ³•é›†æˆåˆ°ç°æœ‰åº“ä¸­é»˜è®¤æ–¹æ³•ä½¿æ‚¨èƒ½å¤Ÿå‘ç°æœ‰æ¥å£æ·»åŠ æ–°åŠŸèƒ½ï¼Œå¹¶ç¡®ä¿ä¸ä¸ºè¿™äº›æ¥å£çš„æ—§ç‰ˆæœ¬ç¼–å†™çš„ä»£ç çš„äºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚ç‰¹åˆ«æ˜¯ï¼Œé»˜è®¤æ–¹æ³•å…è®¸æ‚¨å‘ç°æœ‰æ¥å£æ·»åŠ æ¥å—lambdaè¡¨è¾¾å¼ä½œä¸ºå‚æ•°çš„æ–¹æ³•ã€‚æœ¬èŠ‚æ¼”ç¤ºComparatoræ¥å£å·²é€šè¿‡é»˜è®¤å’Œé™æ€æ–¹æ³•è¿›è¡Œäº†å¢å¼ºã€‚ è€ƒè™‘é—®é¢˜å’Œç»ƒä¹ ï¼šè¯¾ç¨‹ä¸­æ‰€è¿°çš„â€œå¡ç‰‡â€å’Œâ€œå¥—ç‰Œâ€è¯¾ç¨‹. æ­¤ç¤ºä¾‹é‡å†™Cardå’ŒDeckç±»ä½œä¸ºæ¥å£ã€‚â€œCardâ€æ¥å£åŒ…å«ä¸¤ç§â€œenumâ€ç±»å‹ï¼ˆâ€œSuitâ€å’Œâ€œRankâ€ï¼‰å’Œä¸¤ç§æŠ½è±¡æ–¹æ³•ï¼ˆâ€œgetSuitâ€ä¸â€œgetRankâ€â€ï¼‰ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package defaultmethods;public interface Card extends Comparable&lt;Card&gt; &#123; public enum Suit &#123; DIAMONDS (1, &quot;Diamonds&quot;), CLUBS (2, &quot;Clubs&quot; ), HEARTS (3, &quot;Hearts&quot; ), SPADES (4, &quot;Spades&quot; ); private final int value; private final String text; Suit(int value, String text) &#123; this.value = value; this.text = text; &#125; public int value() &#123;return value;&#125; public String text() &#123;return text;&#125; &#125; public enum Rank &#123; DEUCE (2 , &quot;Two&quot; ), THREE (3 , &quot;Three&quot;), FOUR (4 , &quot;Four&quot; ), FIVE (5 , &quot;Five&quot; ), SIX (6 , &quot;Six&quot; ), SEVEN (7 , &quot;Seven&quot;), EIGHT (8 , &quot;Eight&quot;), NINE (9 , &quot;Nine&quot; ), TEN (10, &quot;Ten&quot; ), JACK (11, &quot;Jack&quot; ), QUEEN (12, &quot;Queen&quot;), KING (13, &quot;King&quot; ), ACE (14, &quot;Ace&quot; ); private final int value; private final String text; Rank(int value, String text) &#123; this.value = value; this.text = text; &#125; public int value() &#123;return value;&#125; public String text() &#123;return text;&#125; &#125; public Card.Suit getSuit(); public Card.Rank getRank();&#125; â€œå¡ç‰‡ç»„â€ç•Œé¢åŒ…å«æ“çºµå¡ç‰‡ç»„ä¸­å¡ç‰‡çš„å„ç§æ–¹æ³•ï¼š 1234567891011121314151617181920212223package defaultmethods; import java.util.*;import java.util.stream.*;import java.lang.*; public interface Deck &#123; List&lt;Card&gt; getCards(); Deck deckFactory(); int size(); void addCard(Card card); void addCards(List&lt;Card&gt; cards); void addDeck(Deck deck); void shuffle(); void sort(); void sort(Comparator&lt;Card&gt; c); String deckToString(); Map&lt;Integer, Deck&gt; deal(int players, int numberOfCards) throws IllegalArgumentException;&#125; ç±»PlayingCardå®ç°æ¥å£â€œCardâ€å’Œç±»StandardDeckå®ç°æ¥å£â€œDeckâ€ã€‚ ç±»â€œStandardDeckâ€å®ç°æŠ½è±¡æ–¹æ³•â€œDeckâ€ã€‚æ’åºå¦‚ä¸‹ï¼š 123456789101112public class StandardDeck implements Deck &#123; private List&lt;Card&gt; entireDeck; // ... public void sort() &#123; Collections.sort(entireDeck); &#125; // ...&#125; æ–¹æ³•Collections.sortå¯¹å…ƒç´ ç±»å‹å®ç°æ¥å£Comparableçš„Listå®ä¾‹è¿›è¡Œæ’åº. æˆå‘˜â€œentireDeckâ€æ˜¯â€œListâ€çš„ä¸€ä¸ªå®ä¾‹ï¼Œå…¶å…ƒç´ ç±»å‹ä¸ºâ€œCardâ€ï¼Œæ‰©å±•äº†â€œComparableâ€ã€‚ç±»â€œPlayingCardâ€å®ç°äº†Comparable.compareToæ–¹æ³•å¦‚ä¸‹ï¼š 1234567public int hashCode() &#123; return ((suit.value()-1)*13)+rank.value();&#125;public int compareTo(Card o) &#123; return this.hashCode() - o.hashCode();&#125; æ–¹æ³•â€œcompareToâ€å¯¼è‡´æ–¹æ³•StandardDeck.sort()å…ˆæŒ‰èŠ±è‰²æ’åºï¼Œç„¶åæŒ‰ç­‰çº§æ’åºã€‚ å¦‚æœä½ æƒ³å…ˆæŒ‰ç­‰çº§æ’åºï¼Œç„¶åæŒ‰å¥—è£…æ’åºï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿæ‚¨éœ€è¦å®ç°Comparatoræ¥å£æŒ‡å®šæ–°çš„æ’åºæ¡ä»¶ï¼Œå¹¶ä½¿ç”¨æ–¹æ³•æ’åºï¼ˆList Listï¼ŒComparator cï¼‰ï¼ˆåŒ…å«â€œComparatorâ€å‚æ•°çš„â€œsortâ€æ–¹æ³•çš„ç‰ˆæœ¬ï¼‰ã€‚æ‚¨å¯ä»¥åœ¨ç±»â€œStandardDeckâ€ä¸­å®šä¹‰ä»¥ä¸‹æ–¹æ³•ï¼š 123public void sort(Comparator&lt;Card&gt; c) &#123; Collections.sort(entireDeck, c);&#125; ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®šæ–¹æ³•Collectionsçš„æ–¹å¼ã€‚sortå¯¹Cardç±»çš„å®ä¾‹è¿›è¡Œæ’åºã€‚å®ç°è¿™ä¸€ç‚¹çš„ä¸€ç§æ–¹æ³•æ˜¯å®ç°â€œComparatorâ€æ¥å£ï¼Œä»¥æŒ‡å®šæ‚¨å¸Œæœ›å¡ç‰‡å¦‚ä½•æ’åºã€‚ç¤ºä¾‹SortByRankTheSubit è¿™æ ·åšï¼š 12345678910111213141516package defaultmethods;import java.util.*;import java.util.stream.*;import java.lang.*;public class SortByRankThenSuit implements Comparator&lt;Card&gt; &#123; public int compare(Card firstCard, Card secondCard) &#123; int compVal = firstCard.getRank().value() - secondCard.getRank().value(); if (compVal != 0) return compVal; else return firstCard.getSuit().value() - secondCard.getSuit().value(); &#125;&#125; ä¸‹é¢çš„è°ƒç”¨é¦–å…ˆæŒ‰ç­‰çº§æ’åºæ‰‘å…‹ç‰Œï¼Œç„¶åæŒ‰èŠ±è‰²æ’åºï¼š 123StandardDeck myDeck = new StandardDeck();myDeck.shuffle();myDeck.sort(new SortByRankThenSuit()); ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•è¿‡äºå†—é•¿ï¼›å¦‚æœåªæŒ‡å®šæ’åºæ¡ä»¶å¹¶é¿å…åˆ›å»ºå¤šä¸ªæ’åºå®ç°ï¼Œé‚£ä¼šæ›´å¥½ã€‚å‡è®¾æ‚¨æ˜¯ç¼–å†™â€œComparatorâ€æ¥å£çš„å¼€å‘äººå‘˜ã€‚æ‚¨å¯ä»¥å‘â€œComparatorâ€æ¥å£æ·»åŠ å“ªäº›é»˜è®¤æˆ–é™æ€æ–¹æ³•ï¼Œä»¥ä½¿å…¶ä»–å¼€å‘äººå‘˜èƒ½å¤Ÿæ›´å®¹æ˜“åœ°æŒ‡å®šæ’åºæ ‡å‡†ï¼Ÿ é¦–å…ˆï¼Œå‡è®¾æ‚¨å¸Œæœ›æŒ‰ç­‰çº§å¯¹æ‰‘å…‹ç‰Œè¿›è¡Œæ’åºï¼Œè€Œä¸è€ƒè™‘èŠ±è‰²ã€‚æ‚¨å¯ä»¥è°ƒç”¨StandardDeck.sortæ–¹æ³•å¦‚ä¸‹ï¼š 123456StandardDeck myDeck = new StandardDeck();myDeck.shuffle();myDeck.sort( (firstCard, secondCard) -&gt; firstCard.getRank().value() - secondCard.getRank().value()); å› ä¸ºæ¥å£â€œComparatorâ€æ˜¯åŠŸèƒ½æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ä½œä¸ºâ€œsortâ€æ–¹æ³•çš„å‚æ•°ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œlambdaè¡¨è¾¾å¼æ¯”è¾ƒä¸¤ä¸ªæ•´æ•°å€¼ã€‚ å¦‚æœæ‚¨çš„å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡è°ƒç”¨æ–¹æ³•â€œCardâ€æ¥åˆ›å»ºâ€œComparatorâ€å®ä¾‹ï¼Œåˆ™ä¼šæ›´ç®€å•ã€‚getRank&#96;ä»…é™ã€‚ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœæ‚¨çš„å¼€å‘äººå‘˜å¯ä»¥åˆ›å»ºä¸€ä¸ªâ€œComparatorâ€å®ä¾‹æ¥æ¯”è¾ƒå¯ä»¥ä»â€œgetValueâ€æˆ–â€œhashCodeâ€ç­‰æ–¹æ³•è¿”å›æ•°å€¼çš„ä»»ä½•å¯¹è±¡ï¼Œè¿™å°†éå¸¸æœ‰ç”¨ã€‚â€œComparatorâ€æ¥å£å·²é€šè¿‡é™æ€æ–¹æ³•â€œcomparatingâ€å¢å¼ºäº†æ­¤åŠŸèƒ½ï¼š 1myDeck.sort(Comparator.comparing((card) -&gt; card.getRank())); åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨è€Œæ˜¯ï¼š 1myDeck.sort(Comparator.comparing(Card::getRank)); æ­¤è°ƒç”¨æ›´å¥½åœ°æ¼”ç¤ºäº†å¦‚ä½•æŒ‡å®šä¸åŒçš„æ’åºæ ‡å‡†ï¼Œé¿å…åˆ›å»ºå¤šä¸ªæ’åºå®ç°ã€‚ â€œComparatorâ€æ¥å£å·²é€šè¿‡é™æ€æ–¹æ³•â€œcomparisingâ€çš„å…¶ä»–ç‰ˆæœ¬ï¼ˆå¦‚comparisingDoubleï¼‰è¿›è¡Œäº†å¢å¼ºå’ŒcomparingLongï¼Œä½¿æ‚¨èƒ½å¤Ÿåˆ›å»ºæ¯”è¾ƒå…¶ä»–æ•°æ®ç±»å‹çš„â€œComparatorâ€å®ä¾‹ã€‚ å‡è®¾æ‚¨çš„å¼€å‘äººå‘˜å¸Œæœ›åˆ›å»ºä¸€ä¸ªâ€œComparatorâ€å®ä¾‹ï¼Œè¯¥å®ä¾‹å¯ä»¥å°†å¯¹è±¡ä¸å¤šä¸ªæ¡ä»¶è¿›è¡Œæ¯”è¾ƒã€‚ä¾‹å¦‚ï¼Œä½ ä¼šå¦‚ä½•å…ˆæŒ‰ç­‰çº§ï¼Œç„¶åæŒ‰èŠ±è‰²å¯¹æ‰‘å…‹ç‰Œè¿›è¡Œæ’åºï¼Ÿä¸ä¹‹å‰ä¸€æ ·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼æ¥æŒ‡å®šè¿™äº›æ’åºæ¡ä»¶ï¼š 123456789101112StandardDeck myDeck = new StandardDeck();myDeck.shuffle();myDeck.sort( (firstCard, secondCard) -&gt; &#123; int compare = firstCard.getRank().value() - secondCard.getRank().value(); if (compare != 0) return compare; else return firstCard.getSuit().value() - secondCard.getSuit().value(); &#125; ); å¦‚æœæ‚¨çš„å¼€å‘äººå‘˜å¯ä»¥ä»ä¸€ç³»åˆ—â€œComparatorâ€å®ä¾‹ä¸­æ„å»ºä¸€ä¸ªâ€œComparatorâ€å®ä¾‹ï¼Œåˆ™ä¼šæ›´ç®€å•ã€‚â€œComparatorâ€æ¥å£å·²é€šè¿‡é»˜è®¤æ–¹æ³•thenCompanyingå¢å¼ºäº†æ­¤åŠŸèƒ½ï¼š 1234myDeck.sort( Comparator .comparing(Card::getRank) .thenComparing(Comparator.comparing(Card::getSuit))); â€œComparatorâ€æ¥å£å·²é€šè¿‡å…¶ä»–ç‰ˆæœ¬çš„é»˜è®¤æ–¹æ³•â€œthenCompanyingâ€ï¼ˆå¦‚thenComparingDoubleï¼‰è¿›è¡Œäº†å¢å¼ºå’ŒthenComparingLongï¼Œä½¿æ‚¨èƒ½å¤Ÿæ„å»ºæ¯”è¾ƒå…¶ä»–æ•°æ®ç±»å‹çš„â€œComparatorâ€å®ä¾‹ã€‚ å‡è®¾æ‚¨çš„å¼€å‘äººå‘˜å¸Œæœ›åˆ›å»ºä¸€ä¸ªâ€œComparatorâ€å®ä¾‹ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿä»¥ç›¸åçš„é¡ºåºå¯¹å¯¹è±¡é›†åˆè¿›è¡Œæ’åºã€‚ä¾‹å¦‚ï¼Œæ‚¨å°†å¦‚ä½•æŒ‰ç…§æ’åé™åºå¯¹æ‰‘å…‹ç‰Œè¿›è¡Œæ’åºï¼Œä»Aåˆ°2ï¼ˆè€Œä¸æ˜¯ä»2åˆ°Aï¼‰ï¼Ÿå¦‚å‰æ‰€è¿°ï¼Œæ‚¨å¯ä»¥æŒ‡å®šå¦ä¸€ä¸ªlambdaè¡¨è¾¾å¼ã€‚ç„¶è€Œï¼Œå¦‚æœæ‚¨çš„å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ¥åè½¬ç°æœ‰çš„â€œComparatorâ€ï¼Œåˆ™ä¼šæ›´ç®€å•ã€‚â€œComparatorâ€æ¥å£å·²é€šè¿‡é»˜è®¤æ–¹æ³•[â€œreversedâ€]å¢å¼ºäº†æ­¤åŠŸèƒ½(https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#reversed--): 1234myDeck.sort( Comparator.comparing(Card::getRank) .reversed() .thenComparing(Comparator.comparing(Card::getSuit))); æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨é»˜è®¤æ–¹æ³•ã€é™æ€æ–¹æ³•ã€lambdaè¡¨è¾¾å¼å’Œæ–¹æ³•å¼•ç”¨å¢å¼ºäº†â€œComparatorâ€æ¥å£ï¼Œä»¥åˆ›å»ºæ›´å…·è¡¨è¾¾åŠ›çš„åº“æ–¹æ³•ï¼Œç¨‹åºå‘˜å¯ä»¥é€šè¿‡æŸ¥çœ‹å®ƒä»¬çš„è°ƒç”¨æ–¹å¼å¿«é€Ÿæ¨æ–­å…¶åŠŸèƒ½ã€‚ä½¿ç”¨è¿™äº›æ„é€ æ¥å¢å¼ºåº“ä¸­çš„æ¥å£ã€‚ æ¥å£æ¦‚è¿°æ¥å£å£°æ˜å¯ä»¥åŒ…å«æ–¹æ³•ç­¾åï¼Œé»˜è®¤æ–¹æ³•ã€é™æ€æ–¹æ³•å’Œå¸¸é‡å®šä¹‰ã€‚å”¯ä¸€å…·æœ‰å®ç°çš„æ–¹æ³•æ˜¯é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ã€‚ å®ç°æ¥å£çš„ç±»å¿…é¡»å®ç°æ¥å£ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³•ã€‚ å¯ä»¥åœ¨ä»»ä½•å¯ä»¥ä½¿ç”¨ç±»å‹çš„åœ°æ–¹ä½¿ç”¨æ¥å£åç§°ã€‚ ç»§æ‰¿åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæ‚¨å·²ç»å¤šæ¬¡çœ‹åˆ°ç»§æ‰¿ã€‚åœ¨Javaè¯­è¨€ä¸­ï¼Œç±»å¯ä»¥ä»å…¶ä»–ç±»æ´¾ç”Ÿï¼Œä»è€Œä»è¿™äº›ç±»ç»§æ‰¿å­—æ®µå’Œæ–¹æ³•ã€‚ å®šä¹‰ï¼šä»å¦ä¸€ä¸ªç±»æ´¾ç”Ÿçš„ç±»ç§°ä¸ºå­ç±»ï¼ˆä¹Ÿç§°ä¸ºæ´¾ç”Ÿç±»ã€æ‰©å±•ç±»æˆ–å­ç±»ï¼‰ã€‚æ´¾ç”Ÿå­ç±»çš„ç±»è¢«ç§°ä¸ºè¶…ç±»ï¼ˆä¹Ÿæ˜¯åŸºç±»æˆ–çˆ¶ç±»ï¼‰ã€‚ é™¤äº†æ²¡æœ‰è¶…ç±»çš„â€œObjectâ€ä¹‹å¤–ï¼Œæ¯ä¸ªç±»éƒ½æœ‰å¹¶ä¸”åªæœ‰ä¸€ä¸ªç›´æ¥è¶…ç±»ï¼ˆå•ä¸€ç»§æ‰¿ï¼‰ã€‚åœ¨æ²¡æœ‰ä»»ä½•å…¶ä»–æ˜¾å¼è¶…ç±»çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªç±»éƒ½æ˜¯â€œObjectâ€çš„å­ç±»ã€‚ ç±»å¯ä»¥ä»ä»ç±»æ´¾ç”Ÿçš„ç±»æ´¾ç”Ÿï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€ç»ˆä»æœ€é¡¶å±‚çš„ç±»â€œObjectâ€æ´¾ç”Ÿã€‚è¿™æ ·çš„ç±»è¢«ç§°ä¸ºç»§æ‰¿é“¾ä¸­æ‰€æœ‰ç±»çš„â€œåä»£â€ï¼Œå¯ä»¥è¿½æº¯åˆ°â€œObjectâ€ã€‚ ç»§æ‰¿çš„æ€æƒ³ç®€å•ä½†å¼ºå¤§ï¼šå½“æ‚¨æƒ³è¦åˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼Œå¹¶ä¸”å·²ç»æœ‰ä¸€ä¸ªç±»åŒ…å«äº†æ‚¨æƒ³è¦çš„ä¸€äº›ä»£ç æ—¶ï¼Œæ‚¨å¯ä»¥ä»ç°æœ‰ç±»æ´¾ç”Ÿå‡ºæ–°ç±»ã€‚åœ¨è¿™æ ·åšæ—¶ï¼Œæ‚¨å¯ä»¥é‡ç”¨ç°æœ‰ç±»çš„å­—æ®µå’Œæ–¹æ³•ï¼Œè€Œæ— éœ€ç¼–å†™ï¼ˆå’Œè°ƒè¯•ï¼ï¼‰ä»–ä»¬è‡ªå·±ã€‚ å­ç±»ä»å…¶è¶…ç±»ç»§æ‰¿æ‰€æœ‰æˆå‘˜ï¼ˆå­—æ®µã€æ–¹æ³•å’ŒåµŒå¥—ç±»ï¼‰ã€‚æ„é€ å‡½æ•°ä¸æ˜¯æˆå‘˜ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šè¢«å­ç±»ç»§æ‰¿ï¼Œä½†è¶…ç±»çš„æ„é€ å‡½æ•°å¯ä»¥ä»å­ç±»è°ƒç”¨ã€‚ Javaå¹³å°ç±»å±‚æ¬¡ç»“æ„å¯¹è±¡ç±»ï¼Œåœ¨&#96;javaã€‚langåŒ…ï¼Œå®šä¹‰å¹¶å®ç°æ‰€æœ‰ç±»ï¼ˆåŒ…æ‹¬æ‚¨ç¼–å†™çš„ç±»ï¼‰é€šç”¨çš„è¡Œä¸ºã€‚åœ¨Javaå¹³å°ä¸­ï¼Œè®¸å¤šç±»ç›´æ¥ä»â€œObjectâ€æ´¾ç”Ÿï¼Œå…¶ä»–ç±»ä»è¿™äº›ç±»ä¸­çš„ä¸€äº›æ´¾ç”Ÿï¼Œä¾æ­¤ç±»æ¨ï¼Œå½¢æˆäº†ç±»çš„å±‚æ¬¡ç»“æ„ã€‚ Javaå¹³å°ä¸­çš„æ‰€æœ‰ç±»éƒ½æ˜¯å¯¹è±¡çš„åä»£ åœ¨å±‚æ¬¡ç»“æ„çš„é¡¶éƒ¨ï¼Œâ€œObjectâ€æ˜¯æ‰€æœ‰ç±»ä¸­æœ€é€šç”¨çš„ã€‚å±‚æ¬¡ç»“æ„åº•éƒ¨é™„è¿‘çš„ç±»æä¾›äº†æ›´ä¸“é—¨çš„è¡Œä¸ºã€‚ ç»§æ‰¿çš„ä¸€ä¸ªä¾‹å­ä»¥ä¸‹æ˜¯â€œç±»å’Œå¯¹è±¡â€è¯¾ç¨‹ä¸­ä»‹ç»çš„â€œè‡ªè¡Œè½¦â€ç±»çš„å¯èƒ½å®ç°ç¤ºä¾‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132public class Bicycle &#123; // the Bicycle class has three fields public int cadence; public int gear; public int speed; // the Bicycle class has one constructor public Bicycle(int startCadence, int startSpeed, int startGear) &#123; gear = startGear; cadence = startCadence; speed = startSpeed; &#125; // the Bicycle class has four methods public void setCadence(int newValue) &#123; cadence = newValue; &#125; public void setGear(int newValue) &#123; gear = newValue; &#125; public void applyBrake(int decrement) &#123; speed -= decrement; &#125; public void speedUp(int increment) &#123; speed += increment; &#125; &#125; ä½œä¸ºâ€œBicycleâ€å­ç±»çš„â€œMountainBikeâ€ç±»çš„ç±»å£°æ˜å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516171819public class MountainBike extends Bicycle &#123; // the MountainBike subclass adds one field public int seatHeight; // the MountainBike subclass has one constructor public MountainBike(int startHeight, int startCadence, int startSpeed, int startGear) &#123; super(startCadence, startSpeed, startGear); seatHeight = startHeight; &#125; // the MountainBike subclass adds one method public void setHeight(int newValue) &#123; seatHeight = newValue; &#125; &#125; MountainBikeç»§æ‰¿äº†â€œBicycleâ€çš„æ‰€æœ‰å­—æ®µå’Œæ–¹æ³•ï¼Œå¹¶æ·»åŠ äº†å­—æ®µâ€œseatHeightâ€å’Œè®¾ç½®å®ƒçš„æ–¹æ³•ã€‚é™¤äº†æ„é€ å‡½æ•°ï¼Œå°±å¥½åƒæ‚¨å®Œå…¨ä»å¤´å¼€å§‹ç¼–å†™äº†ä¸€ä¸ªæ–°çš„â€œMountainBikeâ€ç±»ï¼ŒåŒ…å«å››ä¸ªå­—æ®µå’Œäº”ä¸ªæ–¹æ³•ã€‚ç„¶è€Œï¼Œä½ ä¸å¿…åšæ‰€æœ‰çš„å·¥ä½œã€‚å¦‚æœâ€œBicycleâ€ç±»ä¸­çš„æ–¹æ³•å¾ˆå¤æ‚å¹¶ä¸”éœ€è¦å¤§é‡æ—¶é—´è¿›è¡Œè°ƒè¯•ï¼Œé‚£ä¹ˆè¿™å°†ç‰¹åˆ«æœ‰ä»·å€¼ã€‚ åœ¨å­ç±»ä¸­å¯ä»¥åšä»€ä¹ˆå­ç±»ç»§æ‰¿å…¶çˆ¶ç±»çš„æ‰€æœ‰publicå’Œprotectedæˆå‘˜ï¼Œæ— è®ºå­ç±»åœ¨å“ªä¸ªåŒ…ä¸­ã€‚å¦‚æœå­ç±»ä¸å…¶çˆ¶ç±»åœ¨åŒä¸€ä¸ªåŒ…ä¸­ï¼Œå®ƒä¹Ÿç»§æ‰¿çˆ¶ç±»çš„packageprivateæˆå‘˜ã€‚æ‚¨å¯ä»¥æŒ‰åŸæ ·ä½¿ç”¨ç»§æ‰¿çš„æˆå‘˜ã€æ›¿æ¢å®ƒä»¬ã€éšè—å®ƒä»¬æˆ–ä½¿ç”¨æ–°æˆå‘˜è¡¥å……å®ƒä»¬ï¼š ç»§æ‰¿çš„å­—æ®µå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå°±åƒä»»ä½•å…¶ä»–å­—æ®µä¸€æ ·ã€‚ æ‚¨å¯ä»¥åœ¨å­ç±»ä¸­å£°æ˜ä¸è¶…ç±»ä¸­çš„å­—æ®µåŒåçš„å­—æ®µï¼Œä»è€Œéšè—å®ƒï¼ˆä¸æ¨èï¼‰ã€‚ æ‚¨å¯ä»¥åœ¨å­ç±»ä¸­å£°æ˜ä¸åœ¨è¶…ç±»ä¸­çš„æ–°å­—æ®µã€‚ ç»§æ‰¿çš„æ–¹æ³•å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ æ‚¨å¯ä»¥åœ¨å­ç±»ä¸­ç¼–å†™ä¸€ä¸ªæ–°çš„instanceæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸è¶…ç±»ä¸­çš„æ–¹æ³•å…·æœ‰ç›¸åŒçš„ç­¾åï¼Œä»è€Œè¦†ç›–å®ƒã€‚ æ‚¨å¯ä»¥åœ¨å­ç±»ä¸­ç¼–å†™ä¸€ä¸ªæ–°çš„staticæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸è¶…ç±»ä¸­çš„æ–¹æ³•å…·æœ‰ç›¸åŒçš„ç­¾åï¼Œä»è€Œå°†å…¶éšè—ã€‚ æ‚¨å¯ä»¥åœ¨å­ç±»ä¸­å£°æ˜ä¸åœ¨è¶…ç±»ä¸­çš„æ–°æ–¹æ³•ã€‚ æ‚¨å¯ä»¥éšå¼åœ°æˆ–é€šè¿‡ä½¿ç”¨å…³é”®å­—â€œsuperâ€æ¥ç¼–å†™è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°çš„å­ç±»æ„é€ å‡½æ•°ã€‚ æœ¬è¯¾ç¨‹çš„ä»¥ä¸‹éƒ¨åˆ†å°†å¯¹è¿™äº›ä¸»é¢˜è¿›è¡Œæ‰©å±•ã€‚ è¶…çº§ç±»ä¸­çš„ç§äººæˆå‘˜å­ç±»ä¸ç»§æ‰¿å…¶çˆ¶ç±»çš„â€œprivateâ€æˆå‘˜ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¶…ç±»å…·æœ‰ç”¨äºè®¿é—®å…¶ç§æœ‰å­—æ®µçš„å…¬å…±æˆ–å—ä¿æŠ¤çš„æ–¹æ³•ï¼Œåˆ™å­ç±»ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚ åµŒå¥—ç±»å¯ä»¥è®¿é—®å…¶å°é—­ç±»çš„æ‰€æœ‰ç§æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬å­—æ®µå’Œæ–¹æ³•ã€‚å› æ­¤ï¼Œå­ç±»ç»§æ‰¿çš„å…¬å…±æˆ–å—ä¿æŠ¤çš„åµŒå¥—ç±»å¯ä»¥é—´æ¥è®¿é—®çˆ¶ç±»çš„æ‰€æœ‰ç§æœ‰æˆå‘˜ã€‚ é“¸é€ å¯¹è±¡æˆ‘ä»¬å·²ç»çœ‹åˆ°ä¸€ä¸ªå¯¹è±¡æ˜¯ä»ä¸­å®ä¾‹åŒ–çš„ç±»çš„æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å†™ 1public MountainBike myBike = new MountainBike(); åˆ™â€œmyBikeâ€æ˜¯â€œMountainBikeâ€ç±»å‹ã€‚ MountainBikeæ˜¯Bicycleå’ŒObjectçš„åä»£ã€‚å› æ­¤ï¼Œâ€œMountainBikeâ€æ˜¯ä¸€ä¸ªâ€œBicycleâ€ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªâ€œObjectâ€ï¼Œå®ƒå¯ä»¥åœ¨è°ƒç”¨â€œBicyclesâ€æˆ–â€œObjectâ€å¯¹è±¡çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚ ç›¸åçš„è¯´æ³•å¹¶ä¸ä¸€å®šæ­£ç¡®ï¼šâ€œè‡ªè¡Œè½¦â€å¯èƒ½æ˜¯â€œå±±åœ°è‡ªè¡Œè½¦â€ï¼Œä½†ä¸ä¸€å®šã€‚ç±»ä¼¼åœ°ï¼Œâ€œå¯¹è±¡â€*å¯ä»¥æ˜¯â€œè‡ªè¡Œè½¦â€æˆ–â€œå±±åœ°è‡ªè¡Œè½¦â€ï¼Œä½†ä¸ä¸€å®šã€‚ Castingæ˜¾ç¤ºäº†åœ¨ç»§æ‰¿å’Œå®ç°å…è®¸çš„å¯¹è±¡ä¸­ä½¿ç”¨ä¸€ç§ç±»å‹çš„å¯¹è±¡ä»£æ›¿å¦ä¸€ç§ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å†™ 1Object obj = new MountainBike(); åˆ™â€œobjâ€æ—¢æ˜¯â€œObjectâ€åˆæ˜¯â€œMountainBikeâ€ï¼ˆç›´åˆ°â€œobjâ€™è¢«åˆ†é…ç»™å¦ä¸€ä¸ªä¸æ˜¯â€œMountainBikeâ€çš„å¯¹è±¡ï¼‰ã€‚è¿™ç§°ä¸ºâ€œéšå¼è½¬æ¢â€ã€‚ å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæˆ‘ä»¬å†™ 1MountainBike myBike = obj; æˆ‘ä»¬å°†å¾—åˆ°ä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“â€œobjâ€æ˜¯â€œMountainBikeâ€ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬æ‰¿è¯ºé€šè¿‡æ˜¾å¼è½¬æ¢å°†â€œMountainBikeâ€åˆ†é…ç»™â€œobjâ€ï¼š 1MountainBike myBike = (MountainBike)obj; æ­¤å¼ºåˆ¶è½¬æ¢å°†æ’å…¥ä¸€ä¸ªè¿è¡Œæ—¶æ£€æŸ¥ï¼Œæ£€æŸ¥â€œobjâ€æ˜¯å¦è¢«åˆ†é…äº†â€œMountainBikeâ€ï¼Œä»¥ä¾¿ç¼–è¯‘å™¨å¯ä»¥å®‰å…¨åœ°å‡è®¾â€œobjâ€æ˜¯â€œMountainBikeâ€ã€‚å¦‚æœâ€œobjâ€åœ¨è¿è¡Œæ—¶ä¸æ˜¯â€œMountainBikeâ€ï¼Œåˆ™å°†å¼•å‘å¼‚å¸¸ã€‚ Note: æ‚¨å¯ä»¥ä½¿ç”¨â€œinstanceofâ€è¿ç®—ç¬¦å¯¹ç‰¹å®šå¯¹è±¡çš„ç±»å‹è¿›è¡Œé€»è¾‘æµ‹è¯•ã€‚è¿™å¯ä»¥é¿å…ç”±äºä¸æ­£ç¡®çš„å¼ºåˆ¶è½¬æ¢è€Œå¯¼è‡´çš„è¿è¡Œæ—¶é”™è¯¯ã€‚ä¾‹å¦‚ï¼š 123if (obj instanceof MountainBike) &#123; MountainBike myBike = (MountainBike)obj;&#125; åœ¨è¿™é‡Œï¼Œâ€œinstanceofâ€è¿ç®—ç¬¦éªŒè¯â€œobjâ€æ˜¯å¦å¼•ç”¨äº†â€œMountainBikeâ€ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥åœ¨çŸ¥é“ä¸ä¼šå¼•å‘è¿è¡Œæ—¶å¼‚å¸¸çš„æƒ…å†µä¸‹è¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚ çŠ¶æ€ã€å®ç°å’Œç±»å‹çš„å¤šé‡ç»§æ‰¿ç±»å’Œæ¥å£ä¹‹é—´çš„ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯ç±»å¯ä»¥æœ‰å­—æ®µï¼Œè€Œæ¥å£ä¸èƒ½ã€‚æ­¤å¤–ï¼Œæ‚¨å¯ä»¥å®ä¾‹åŒ–ä¸€ä¸ªç±»æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ˜¯ä½¿ç”¨æ¥å£æ— æ³•åšåˆ°çš„ã€‚å¦‚ä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Ÿä¸€èŠ‚æ‰€è¿°ï¼Œå¯¹è±¡å°†å…¶çŠ¶æ€å­˜å‚¨åœ¨ç±»ä¸­å®šä¹‰çš„å­—æ®µä¸­ã€‚Javaç¼–ç¨‹è¯­è¨€ä¸å…è®¸æ‰©å±•å¤šä¸ªç±»çš„ä¸€ä¸ªåŸå› æ˜¯ä¸ºäº†é¿å…â€œçŠ¶æ€çš„å¤šé‡ç»§æ‰¿â€é—®é¢˜ï¼Œå³ä»å¤šä¸ªç±»ç»§æ‰¿å­—æ®µçš„èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨èƒ½å¤Ÿå®šä¹‰ä¸€ä¸ªæ‰©å±•å¤šä¸ªç±»çš„æ–°ç±»ã€‚å½“é€šè¿‡å®ä¾‹åŒ–è¯¥ç±»åˆ›å»ºå¯¹è±¡æ—¶ï¼Œè¯¥å¯¹è±¡å°†ç»§æ‰¿è¯¥ç±»æ‰€æœ‰è¶…ç±»çš„å­—æ®µã€‚å¦‚æœæ¥è‡ªä¸åŒè¶…ç±»çš„æ–¹æ³•æˆ–æ„é€ å‡½æ•°å®ä¾‹åŒ–åŒä¸€ä¸ªå­—æ®µå‘¢ï¼Ÿå“ªä¸ªæ–¹æ³•æˆ–æ„é€ å‡½æ•°ä¼˜å…ˆï¼Ÿå› ä¸ºæ¥å£ä¸åŒ…å«å­—æ®µï¼Œæ‰€ä»¥æ‚¨ä¸å¿…æ‹…å¿ƒçŠ¶æ€çš„å¤šé‡ç»§æ‰¿å¯¼è‡´çš„é—®é¢˜ã€‚ å®ç°çš„å¤šé‡ç»§æ‰¿æ˜¯ä»å¤šä¸ªç±»ç»§æ‰¿æ–¹æ³•å®šä¹‰çš„èƒ½åŠ›ã€‚è¿™ç§ç±»å‹çš„å¤šé‡ç»§æ‰¿ä¼šå‡ºç°é—®é¢˜ï¼Œä¾‹å¦‚åç§°å†²çªå’Œæ­§ä¹‰ã€‚å½“æ”¯æŒè¿™ç§ç±»å‹å¤šé‡ç»§æ‰¿çš„ç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘å™¨é‡åˆ°åŒ…å«åŒåæ–¹æ³•çš„è¶…ç±»æ—¶ï¼Œå®ƒä»¬æœ‰æ—¶æ— æ³•ç¡®å®šè¦è®¿é—®æˆ–è°ƒç”¨å“ªä¸ªæˆå‘˜æˆ–æ–¹æ³•ã€‚æ­¤å¤–ï¼Œç¨‹åºå‘˜å¯ä»¥é€šè¿‡å‘è¶…ç±»æ·»åŠ æ–°æ–¹æ³•è€Œæ— æ„ä¸­å¼•å…¥åç§°å†²çªã€‚é»˜è®¤æ–¹æ³•ä»‹ç»ä¸€ç§å½¢å¼çš„å¤šé‡ç»§æ‰¿å®ç°ã€‚ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œè¿™äº›æ¥å£å¯ä»¥åŒ…å«åŒåçš„é»˜è®¤æ–¹æ³•ã€‚Javaç¼–è¯‘å™¨æä¾›äº†ä¸€äº›è§„åˆ™æ¥ç¡®å®šç‰¹å®šç±»ä½¿ç”¨çš„é»˜è®¤æ–¹æ³•ã€‚ Javaç¼–ç¨‹è¯­è¨€æ”¯æŒ*ç±»å‹çš„å¤šé‡ç»§æ‰¿ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»å®ç°å¤šä¸ªæ¥å£çš„èƒ½åŠ›ã€‚ä¸€ä¸ªå¯¹è±¡å¯ä»¥æœ‰å¤šç§ç±»å‹ï¼šå®ƒè‡ªå·±çš„ç±»çš„ç±»å‹å’Œè¯¥ç±»å®ç°çš„æ‰€æœ‰æ¥å£çš„ç±»å‹ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœå˜é‡è¢«å£°æ˜ä¸ºæ¥å£çš„ç±»å‹ï¼Œé‚£ä¹ˆå®ƒçš„å€¼å¯ä»¥å¼•ç”¨ä»å®ç°æ¥å£çš„ä»»ä½•ç±»å®ä¾‹åŒ–çš„ä»»ä½•å¯¹è±¡ã€‚è¿™åœ¨ä½¿ç”¨æ¥å£ä½œä¸ºç±»å‹ä¸€èŠ‚ä¸­è¿›è¡Œäº†è®¨è®º. ä¸å®ç°çš„å¤šé‡ç»§æ‰¿ä¸€æ ·ï¼Œç±»å¯ä»¥ç»§æ‰¿åœ¨å…¶æ‰©å±•çš„æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ï¼ˆä½œä¸ºé»˜è®¤æˆ–é™æ€ï¼‰çš„ä¸åŒå®ç°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨æˆ–ç”¨æˆ·å¿…é¡»å†³å®šä½¿ç”¨å“ªä¸€ä¸ªã€‚ è¦†ç›–å’Œéšè—æ–¹æ³•å®ä¾‹æ–¹æ³•å­ç±»ä¸­çš„å®ä¾‹æ–¹æ³•å…·æœ‰ä¸è¶…ç±»ä¸­å®ä¾‹æ–¹æ³•ç›¸åŒçš„ç­¾åï¼ˆåç§°ï¼ŒåŠ ä¸Šå…¶å‚æ•°çš„ç¼–å·å’Œç±»å‹ï¼‰å’Œè¿”å›ç±»å‹è¦†ç›–è¶…ç±»çš„æ–¹æ³•ã€‚ å­ç±»é‡å†™æ–¹æ³•çš„èƒ½åŠ›å…è®¸ç±»ä»è¡Œä¸ºâ€œè¶³å¤Ÿæ¥è¿‘â€çš„è¶…ç±»ç»§æ‰¿ï¼Œç„¶åæ ¹æ®éœ€è¦ä¿®æ”¹è¡Œä¸ºã€‚é‡å†™æ–¹æ³•å…·æœ‰ä¸å…¶é‡å†™çš„æ–¹æ³•ç›¸åŒçš„åç§°ã€å‚æ•°çš„æ•°é‡å’Œç±»å‹ä»¥åŠè¿”å›ç±»å‹ã€‚é‡å†™æ–¹æ³•è¿˜å¯ä»¥è¿”å›é‡å†™æ–¹æ³•è¿”å›çš„ç±»å‹çš„å­ç±»å‹ã€‚æ­¤å­ç±»å‹ç§°ä¸ºåå˜è¿”å›ç±»å‹ã€‚ é‡å†™æ–¹æ³•æ—¶ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨â€œ@Overrideâ€æ³¨é‡Šï¼Œè¯¥æ³¨é‡ŠæŒ‡ç¤ºç¼–è¯‘å™¨è¦é‡å†™è¶…ç±»ä¸­çš„æ–¹æ³•ã€‚å¦‚æœç”±äºæŸç§åŸå› ï¼Œç¼–è¯‘å™¨æ£€æµ‹åˆ°æŸä¸ªè¶…ç±»ä¸­ä¸å­˜åœ¨è¯¥æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°†ç”Ÿæˆé”™è¯¯ã€‚æœ‰å…³â€œ@Overrideâ€çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§Annotations. é™æ€æ–¹æ³•å¦‚æœå­ç±»å®šä¹‰çš„é™æ€æ–¹æ³•ä¸è¶…ç±»ä¸­çš„é™æ€æ–¹æ³•å…·æœ‰ç›¸åŒçš„ç­¾åï¼Œé‚£ä¹ˆå­ç±»ä¸­çš„æ–¹æ³•å°†éšè—è¶…ç±»ä¸­ã€‚ éšè—é™æ€æ–¹æ³•å’Œé‡å†™å®ä¾‹æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«å…·æœ‰é‡è¦æ„ä¹‰ï¼š è¢«è°ƒç”¨çš„é‡å†™å®ä¾‹æ–¹æ³•çš„ç‰ˆæœ¬æ˜¯å­ç±»ä¸­çš„ç‰ˆæœ¬ã€‚ è¢«è°ƒç”¨çš„éšè—é™æ€æ–¹æ³•çš„ç‰ˆæœ¬å–å†³äºå®ƒæ˜¯ä»è¶…ç±»è¿˜æ˜¯å­ç±»è°ƒç”¨çš„ã€‚ è€ƒè™‘ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªç±»çš„ç¤ºä¾‹ã€‚ç¬¬ä¸€ä¸ªæ˜¯â€œAnimalâ€ï¼Œå®ƒåŒ…å«ä¸€ä¸ªå®ä¾‹æ–¹æ³•å’Œä¸€ä¸ªé™æ€æ–¹æ³•ï¼š 12345678public class Animal &#123; public static void testClassMethod() &#123; System.out.println(&quot;The static method in Animal&quot;); &#125; public void testInstanceMethod() &#123; System.out.println(&quot;The instance method in Animal&quot;); &#125;&#125; ç¬¬äºŒç±»æ˜¯â€œAnimalâ€çš„å­ç±»ï¼Œç§°ä¸ºâ€œCatâ€ï¼š 123456789101112131415public class Cat extends Animal &#123; public static void testClassMethod() &#123; System.out.println(&quot;The static method in Cat&quot;); &#125; public void testInstanceMethod() &#123; System.out.println(&quot;The instance method in Cat&quot;); &#125; public static void main(String[] args) &#123; Cat myCat = new Cat(); Animal myAnimal = myCat; Animal.testClassMethod(); myAnimal.testInstanceMethod(); &#125;&#125; â€œCatâ€ç±»é‡å†™â€œAnimalâ€ä¸­çš„å®ä¾‹æ–¹æ³•ï¼Œå¹¶éšè—â€œAnimalâ€ä¸­çš„é™æ€æ–¹æ³•ã€‚æ­¤ç±»ä¸­çš„â€œmainâ€æ–¹æ³•åˆ›å»ºä¸€ä¸ªâ€œCatâ€å®ä¾‹ï¼Œå¹¶åœ¨ç±»ä¸Šè°ƒç”¨â€œtestClassMethodï¼ˆï¼‰â€ï¼Œåœ¨å®ä¾‹ä¸Šè°ƒç”¨â€œtestInstanceMethod()ï¼‰â€ã€‚ è¯¥ç¨‹åºçš„è¾“å‡ºå¦‚ä¸‹ï¼š 12The static method in AnimalThe instance method in Cat æ­£å¦‚æ‰€æ‰¿è¯ºçš„ï¼Œè¢«è°ƒç”¨çš„éšè—é™æ€æ–¹æ³•çš„ç‰ˆæœ¬æ˜¯è¶…ç±»ä¸­çš„ç‰ˆæœ¬ï¼Œè€Œè¢«è°ƒç”¨çš„é‡å†™å®ä¾‹æ–¹æ³•çš„ç‰ˆæœ¬åˆ™æ˜¯å­ç±»ä¸­çš„ã€‚ æ¥å£æ–¹æ³•é»˜è®¤æ–¹æ³•å’ŒæŠ½è±¡æ–¹æ³•åœ¨æ¥å£ä¸­ç»§æ‰¿ç±»ä¼¼å®ä¾‹æ–¹æ³•ã€‚ç„¶è€Œï¼Œå½“ç±»æˆ–æ¥å£çš„è¶…ç±»å‹æä¾›å…·æœ‰ç›¸åŒç­¾åçš„å¤šä¸ªé»˜è®¤æ–¹æ³•æ—¶ï¼ŒJavaç¼–è¯‘å™¨ä¼šéµå¾ªç»§æ‰¿è§„åˆ™æ¥è§£å†³åç§°å†²çªã€‚è¿™äº›è§„åˆ™ç”±ä»¥ä¸‹ä¸¤ä¸ªåŸåˆ™é©±åŠ¨ï¼š å®ä¾‹æ–¹æ³•ä¼˜äºæ¥å£é»˜è®¤æ–¹æ³•ã€‚ è€ƒè™‘ä»¥ä¸‹ç±»å’Œæ¥å£ï¼š 12345public class Horse &#123; public String identifyMyself() &#123; return &quot;I am a horse.&quot;; &#125;&#125; 12345public interface Flyer &#123; default public String identifyMyself() &#123; return &quot;I am able to fly.&quot;; &#125;&#125; 12345public interface Mythical &#123; default public String identifyMyself() &#123; return &quot;I am a mythical creature.&quot;; &#125;&#125; 123456public class Pegasus extends Horse implements Flyer, Mythical &#123; public static void main(String... args) &#123; Pegasus myApp = new Pegasus(); System.out.println(myApp.identifyMyself()); &#125;&#125; æ–¹æ³•Pegasus.identifyMyselfè¿”å›å­—ç¬¦ä¸²I am a horse å·²è¢«å…¶ä»–å€™é€‰å¯¹è±¡è¦†ç›–çš„æ–¹æ³•å°†è¢«å¿½ç•¥ã€‚å½“è¶…ç±»å‹å…±äº«ä¸€ä¸ªå…±åŒç¥–å…ˆæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚ è€ƒè™‘ä»¥ä¸‹æ¥å£å’Œç±»ï¼š 12345public interface Animal &#123; default public String identifyMyself() &#123; return &quot;I am an animal.&quot;; &#125;&#125; 12345public interface EggLayer extends Animal &#123; default public String identifyMyself() &#123; return &quot;I am able to lay eggs.&quot;; &#125;&#125; 1public interface FireBreather extends Animal &#123; &#125; 123456public class Dragon implements EggLayer, FireBreather &#123; public static void main (String... args) &#123; Dragon myApp = new Dragon(); System.out.println(myApp.identifyMyself()); &#125;&#125; æ–¹æ³•Dragon.identifyMyselfè¿”å›å­—ç¬¦ä¸²I am able to lay eggs. å¦‚æœä¸¤ä¸ªæˆ–å¤šä¸ªç‹¬ç«‹å®šä¹‰çš„é»˜è®¤æ–¹æ³•å†²çªï¼Œæˆ–è€…é»˜è®¤æ–¹æ³•ä¸æŠ½è±¡æ–¹æ³•å†²çªï¼Œåˆ™Javaç¼–è¯‘å™¨ä¼šäº§ç”Ÿç¼–è¯‘å™¨é”™è¯¯ã€‚å¿…é¡»æ˜¾å¼é‡å†™çˆ¶ç±»å‹æ–¹æ³•ã€‚ ä»¥ç°åœ¨å¯ä»¥é£è¡Œçš„è®¡ç®—æœºæ§åˆ¶æ±½è½¦ä¸ºä¾‹ã€‚æ‚¨æœ‰ä¸¤ä¸ªæ¥å£ï¼ˆâ€œOperaCarâ€å’Œâ€œFlyCarâ€ï¼‰ï¼Œä¸ºåŒä¸€æ–¹æ³•ï¼ˆâ€œstartEngineâ€ï¼‰æä¾›é»˜è®¤å®ç°ï¼š 123456789101112public interface OperateCar &#123; // ... default public int startEngine(EncryptedKey key) &#123; // Implementation &#125;&#125;public interface FlyCar &#123; // ... default public int startEngine(EncryptedKey key) &#123; // Implementation &#125;&#125; åŒæ—¶å®ç°â€œOperateCarâ€å’Œâ€œFlyCarâ€çš„ç±»å¿…é¡»é‡å†™æ–¹æ³•â€œstartEngineâ€ã€‚æ‚¨å¯ä»¥ä½¿ç”¨â€œsuperâ€å…³é”®å­—è°ƒç”¨ä»»ä½•é»˜è®¤å®ç°ã€‚ 1234567public class FlyingCar implements OperateCar, FlyCar &#123; // ... public int startEngine(EncryptedKey key) &#123; FlyCar.super.startEngine(key); OperateCar.super.startEngine(key); &#125;&#125; â€œsuperâ€å‰é¢çš„åç§°ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºâ€œFlyCarâ€æˆ–â€œOperaCarâ€ï¼‰å¿…é¡»å¼•ç”¨å®šä¹‰æˆ–ç»§æ‰¿æ‰€è°ƒç”¨æ–¹æ³•é»˜è®¤å€¼çš„ç›´æ¥è¶…çº§æ¥å£ã€‚è¿™ç§å½¢å¼çš„æ–¹æ³•è°ƒç”¨ä¸é™äºåŒºåˆ†åŒ…å«å…·æœ‰ç›¸åŒç­¾åçš„é»˜è®¤æ–¹æ³•çš„å¤šä¸ªå·²å®ç°æ¥å£ã€‚æ‚¨å¯ä»¥ä½¿ç”¨â€œsuperâ€å…³é”®å­—åœ¨ç±»å’Œæ¥å£ä¸­è°ƒç”¨é»˜è®¤æ–¹æ³•ã€‚ ä»ç±»ç»§æ‰¿çš„å®ä¾‹æ–¹æ³•å¯ä»¥é‡å†™æŠ½è±¡æ¥å£æ–¹æ³•ã€‚è€ƒè™‘ä»¥ä¸‹æ¥å£å’Œç±»ï¼š 1234567891011121314public interface Mammal &#123; String identifyMyself();&#125;public class Horse &#123; public String identifyMyself() &#123; return &quot;I am a horse.&quot;; &#125;&#125;public class Mustang extends Horse implements Mammal &#123; public static void main(String... args) &#123; Mustang myApp = new Mustang(); System.out.println(myApp.identifyMyself()); &#125;&#125; æ–¹æ³•Mustangã€‚identifyMyselfè¿”å›å­—ç¬¦ä¸²â€œI am a horse.â€ç±»â€œMustangâ€ç»§æ‰¿äº†ç±»â€œHorseâ€ä¸­çš„æ–¹æ³•â€œidentifyMyselfâ€ï¼Œè¯¥æ–¹æ³•é‡å†™äº†æ¥å£â€œMammalâ€ä¸­åŒåçš„æŠ½è±¡æ–¹æ³•ã€‚ Note: æ¥å£ä¸­çš„é™æ€æ–¹æ³•æ°¸è¿œä¸ä¼šè¢«ç»§æ‰¿ã€‚ ä¿®æ”¹å™¨é‡å†™æ–¹æ³•çš„è®¿é—®è¯´æ˜ç¬¦å¯ä»¥å…è®¸æ¯”é‡å†™æ–¹æ³•æ›´å¤šä½†ä¸èƒ½æ›´å°‘çš„è®¿é—®ã€‚ä¾‹å¦‚ï¼Œè¶…ç±»ä¸­çš„å—ä¿æŠ¤å®ä¾‹æ–¹æ³•å¯ä»¥åœ¨å­ç±»ä¸­å…¬å¼€ï¼Œä½†ä¸èƒ½ç§æœ‰ã€‚ å¦‚æœè¯•å›¾å°†è¶…ç±»ä¸­çš„å®ä¾‹æ–¹æ³•æ›´æ”¹ä¸ºå­ç±»ä¸­çš„é™æ€æ–¹æ³•ï¼Œåˆ™ä¼šå‡ºç°ç¼–è¯‘æ—¶é”™è¯¯ï¼Œåä¹‹äº¦ç„¶ã€‚ æ€»ç»“ä¸‹è¡¨æ€»ç»“äº†å®šä¹‰ä¸è¶…ç±»ä¸­çš„æ–¹æ³•å…·æœ‰ç›¸åŒç­¾åçš„æ–¹æ³•æ—¶å‘ç”Ÿçš„æƒ…å†µã€‚ è¶…çº§ç±»å®ä¾‹æ–¹æ³• è¶…ç±»é™æ€æ–¹æ³• å­ç±»å®ä¾‹æ–¹æ³• è¦†ç›– ç”Ÿæˆç¼–è¯‘æ—¶é”™è¯¯ çˆ¶ç±»é™æ€æ–¹æ³• ç”Ÿæˆç¼–è¯‘æ—¶é”™è¯¯ Hides Note: åœ¨å­ç±»ä¸­ï¼Œå¯ä»¥é‡è½½ä»è¶…ç±»ç»§æ‰¿çš„æ–¹æ³•ã€‚æ­¤ç±»é‡è½½æ–¹æ³•æ—¢ä¸éšè—ä¹Ÿä¸è¦†ç›–è¶…ç±»å®ä¾‹æ–¹æ³•ï¼Œå®ƒä»¬æ˜¯å­ç±»ç‰¹æœ‰çš„æ–°æ–¹æ³•ã€‚ å¤šæ€æ€§å­—å…¸ä¸­å¯¹â€œå¤šæ€æ€§â€çš„å®šä¹‰æ˜¯æŒ‡ç”Ÿç‰©å­¦ä¸­çš„ä¸€ä¸ªåŸåˆ™ï¼Œå³ä¸€ä¸ªç”Ÿç‰©ä½“æˆ–ç‰©ç§å¯ä»¥æœ‰è®¸å¤šä¸åŒçš„å½¢å¼æˆ–é˜¶æ®µã€‚è¿™ä¸€åŸåˆ™ä¹Ÿé€‚ç”¨äºé¢å‘å¯¹è±¡ç¼–ç¨‹å’ŒJavaè¯­è¨€ç­‰è¯­è¨€ã€‚ç±»çš„å­ç±»å¯ä»¥å®šä¹‰è‡ªå·±ç‹¬ç‰¹çš„è¡Œä¸ºï¼Œä½†ä¹Ÿå¯ä»¥å…±äº«çˆ¶ç±»çš„ä¸€äº›ç›¸åŒåŠŸèƒ½ã€‚ å¯¹â€œBicycleâ€ç±»ç¨ä½œä¿®æ”¹å³å¯è¯æ˜å¤šæ€æ€§ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†â€œprintDescriptionâ€æ–¹æ³•æ·»åŠ åˆ°æ˜¾ç¤ºå®ä¾‹ä¸­å½“å‰å­˜å‚¨çš„æ‰€æœ‰æ•°æ®çš„ç±»ä¸­ã€‚ 12345public void printDescription()&#123; System.out.println(&quot;\\nBike is &quot; + &quot;in gear &quot; + this.gear + &quot; with a cadence of &quot; + this.cadence + &quot; and travelling at a speed of &quot; + this.speed + &quot;. &quot;);&#125; è¦æ¼”ç¤ºJavaè¯­è¨€ä¸­çš„å¤šæ€ç‰¹æ€§ï¼Œè¯·ä½¿ç”¨â€œMountainBikeâ€å’Œâ€œRoadBikeâ€ç±»æ‰©å±•â€œBicycleâ€ç±»ã€‚å¯¹äºâ€œMountainBikeâ€ï¼Œæ·»åŠ ä¸€ä¸ªâ€œsuspensionâ€å­—æ®µï¼Œè¯¥å­—æ®µæ˜¯ä¸€ä¸ªâ€œStringâ€å€¼ï¼ŒæŒ‡ç¤ºè‡ªè¡Œè½¦æ˜¯å¦å…·æœ‰å‰å‡éœ‡å™¨â€œfrontâ€ã€‚æˆ–è€…ï¼Œè‡ªè¡Œè½¦æœ‰ä¸€ä¸ªå‰åå‡éœ‡å™¨ï¼Œâ€œåŒå‡éœ‡å™¨â€ã€‚ ä»¥ä¸‹æ˜¯æ›´æ–°çš„ç±»ï¼š 12345678910111213141516171819202122232425262728public class MountainBike extends Bicycle &#123; private String suspension; public MountainBike( int startCadence, int startSpeed, int startGear, String suspensionType)&#123; super(startCadence, startSpeed, startGear); this.setSuspension(suspensionType); &#125; public String getSuspension()&#123; return this.suspension; &#125; public void setSuspension(String suspensionType) &#123; this.suspension = suspensionType; &#125; public void printDescription() &#123; super.printDescription(); System.out.println(&quot;The &quot; + &quot;MountainBike has a&quot; + getSuspension() + &quot; suspension.&quot;); &#125;&#125; æ³¨æ„é‡å†™çš„â€œprintDescriptionâ€æ–¹æ³•ã€‚é™¤äº†ä¹‹å‰æä¾›çš„ä¿¡æ¯ä¹‹å¤–ï¼Œè¾“å‡ºä¸­è¿˜åŒ…æ‹¬å…³äºæ‚¬æ¶çš„é™„åŠ æ•°æ®ã€‚ æ¥ä¸‹æ¥ï¼Œåˆ›å»ºâ€œRoadBikeâ€ç±»ã€‚å› ä¸ºå…¬è·¯æˆ–èµ›è½¦çš„è½®èƒå¾ˆè–„ï¼Œæ‰€ä»¥æ·»åŠ ä¸€ä¸ªå±æ€§æ¥è·Ÿè¸ªè½®èƒå®½åº¦ã€‚è¿™æ˜¯â€œRoadBikeâ€è¯¾ç¨‹ï¼š 12345678910111213141516171819202122232425262728public class RoadBike extends Bicycle&#123; // In millimeters (mm) private int tireWidth; public RoadBike(int startCadence, int startSpeed, int startGear, int newTireWidth)&#123; super(startCadence, startSpeed, startGear); this.setTireWidth(newTireWidth); &#125; public int getTireWidth()&#123; return this.tireWidth; &#125; public void setTireWidth(int newTireWidth)&#123; this.tireWidth = newTireWidth; &#125; public void printDescription()&#123; super.printDescription(); System.out.println(&quot;The RoadBike&quot; + &quot; has &quot; + getTireWidth() + &quot; MM tires.&quot;); &#125;&#125; è¯·å†æ¬¡æ³¨æ„ï¼Œâ€œprintDescriptionâ€æ–¹æ³•å·²è¢«é‡å†™ã€‚æ­¤æ—¶ï¼Œå°†æ˜¾ç¤ºæœ‰å…³è½®èƒå®½åº¦çš„ä¿¡æ¯ã€‚ æ¦‚æ‹¬æ¥è¯´ï¼Œæœ‰ä¸‰ä¸ªç±»åˆ«ï¼šâ€œè‡ªè¡Œè½¦â€ã€â€œå±±åœ°è‡ªè¡Œè½¦â€å’Œâ€œå…¬è·¯è‡ªè¡Œè½¦â€ã€‚è¿™ä¸¤ä¸ªå­ç±»é‡å†™â€œprintDescriptionâ€æ–¹æ³•å¹¶æ‰“å°å”¯ä¸€ä¿¡æ¯ã€‚ è¿™æ˜¯ä¸€ä¸ªåˆ›å»ºä¸‰ä¸ªâ€œBicycleâ€å˜é‡çš„æµ‹è¯•ç¨‹åºã€‚æ¯ä¸ªå˜é‡åˆ†é…ç»™ä¸‰ä¸ªè‡ªè¡Œè½¦ç±»ä¸­çš„ä¸€ä¸ªã€‚ç„¶åæ‰“å°æ¯ä¸ªå˜é‡ã€‚ 12345678910111213public class TestBikes &#123; public static void main(String[] args)&#123; Bicycle bike01, bike02, bike03; bike01 = new Bicycle(20, 10, 1); bike02 = new MountainBike(20, 10, 5, &quot;Dual&quot;); bike03 = new RoadBike(40, 20, 8, 23); bike01.printDescription(); bike02.printDescription(); bike03.printDescription(); &#125;&#125; ä»¥ä¸‹æ˜¯æµ‹è¯•ç¨‹åºçš„è¾“å‡ºï¼š 1234567Bike is in gear 1 with a cadence of 20 and travelling at a speed of 10. Bike is in gear 5 with a cadence of 20 and travelling at a speed of 10. The MountainBike has a Dual suspension.Bike is in gear 8 with a cadence of 40 and travelling at a speed of 20. The RoadBike has 23 MM tires. Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸ºæ¯ä¸ªå˜é‡ä¸­å¼•ç”¨çš„å¯¹è±¡è°ƒç”¨é€‚å½“çš„æ–¹æ³•ã€‚å®ƒä¸ä¼šè°ƒç”¨ç”±å˜é‡ç±»å‹å®šä¹‰çš„æ–¹æ³•ã€‚è¿™ç§è¡Œä¸ºè¢«ç§°ä¸ºâ€œè™šæ‹Ÿæ–¹æ³•è°ƒç”¨â€ï¼Œå®ƒå±•ç¤ºäº†Javaè¯­è¨€ä¸­é‡è¦çš„å¤šæ€ç‰¹æ€§çš„ä¸€ä¸ªæ–¹é¢ã€‚ éšè—å­—æ®µåœ¨ç±»ä¸­ï¼Œä¸è¶…ç±»ä¸­çš„å­—æ®µåŒåçš„å­—æ®µéšè—è¶…ç±»çš„å­—æ®µï¼Œå³ä½¿å®ƒä»¬çš„ç±»å‹ä¸åŒã€‚åœ¨å­ç±»ä¸­ï¼Œè¶…ç±»ä¸­çš„å­—æ®µä¸èƒ½é€šè¿‡å…¶ç®€å•åç§°å¼•ç”¨ã€‚ç›¸åï¼Œå¿…é¡»é€šè¿‡â€œsuperâ€è®¿é—®è¯¥å­—æ®µï¼Œè¿™å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­ä»‹ç»ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¸å»ºè®®éšè—å­—æ®µï¼Œå› ä¸ºè¿™ä¼šä½¿ä»£ç éš¾ä»¥é˜…è¯»ã€‚ ä½¿ç”¨å…³é”®å­—superè®¿é—®è¶…çº§ç±»æˆå‘˜å¦‚æœæ‚¨çš„æ–¹æ³•è¦†ç›–äº†å…¶è¶…ç±»çš„æ–¹æ³•ä¹‹ä¸€ï¼Œåˆ™å¯ä»¥é€šè¿‡ä½¿ç”¨å…³é”®å­—â€œsuperâ€æ¥è°ƒç”¨è¦†ç›–çš„æ–¹æ³•ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨â€œsuperâ€æ¥å¼•ç”¨éšè—å­—æ®µï¼ˆå°½ç®¡ä¸é¼“åŠ±éšè—å­—æ®µï¼‰ã€‚è€ƒè™‘æ­¤ç±»â€œè¶…çº§ç±»â€ï¼š 123456public class Superclass &#123; public void printMethod() &#123; System.out.println(&quot;Printed in Superclass.&quot;); &#125;&#125; ä¸‹é¢æ˜¯ä¸€ä¸ªå­ç±»ï¼Œåä¸ºâ€œsubclassâ€ï¼Œå®ƒé‡å†™äº†â€œprintMethod()â€ï¼š 123456789101112public class Subclass extends Superclass &#123; // overrides printMethod in Superclass public void printMethod() &#123; super.printMethod(); System.out.println(&quot;Printed in Subclass&quot;); &#125; public static void main(String[] args) &#123; Subclass s = new Subclass(); s.printMethod(); &#125;&#125; åœ¨â€œå­ç±»â€ä¸­ï¼Œç®€å•åç§°â€œprintMethod()â€å¼•ç”¨åœ¨â€œå­ç±»åˆ«â€ä¸­å£°æ˜çš„åç§°ï¼Œè¯¥åç§°è¦†ç›–åœ¨â€œè¶…çº§ç±»â€ä¸­çš„åç§°ã€‚å› æ­¤ï¼Œè¦å¼•ç”¨ä»â€œSuperclassâ€ç»§æ‰¿çš„â€œprintMethod()â€ï¼Œâ€œSubclassâ€å¿…é¡»ä½¿ç”¨é™å®šåï¼Œä½¿ç”¨â€œsuperâ€ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ç¼–è¯‘å’Œæ‰§è¡Œâ€œå­ç±»â€å°†æ‰“å°ä»¥ä¸‹å†…å®¹ï¼š 12Printed in Superclass.Printed in Subclass å­ç±»æ„é€ å‡½æ•°ä¸‹é¢çš„ç¤ºä¾‹è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨â€œsuperâ€å…³é”®å­—æ¥è°ƒç”¨è¶…ç±»çš„æ„é€ å‡½æ•°ã€‚ä»Bicycleä¸­å›å¿†ä¾‹å¦‚ï¼Œâ€œMountainBikeâ€æ˜¯â€œBicycleâ€çš„å­ç±»ã€‚è¿™é‡Œæ˜¯â€œMountainBikeâ€ï¼ˆå­ç±»ï¼‰æ„é€ å‡½æ•°ï¼Œå®ƒè°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ï¼Œç„¶åæ·»åŠ è‡ªå·±çš„åˆå§‹åŒ–ä»£ç ï¼š 1234567public MountainBike(int startHeight, int startCadence, int startSpeed, int startGear) &#123; super(startCadence, startSpeed, startGear); seatHeight = startHeight;&#125; è¶…ç±»æ„é€ å‡½æ•°çš„è°ƒç”¨å¿…é¡»æ˜¯å­ç±»æ„é€ å‡½æ•°ä¸­çš„ç¬¬ä¸€è¡Œã€‚ è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°çš„è¯­æ³•ä¸º 1super(); or: 1super(parameter list); ä½¿ç”¨â€œsuper()â€ï¼Œå°†è°ƒç”¨è¶…ç±»æ— å‚æ•°æ„é€ å‡½æ•°ã€‚ä½¿ç”¨â€œsuper(parameter list)â€ï¼Œå°†è°ƒç”¨å…·æœ‰åŒ¹é…å‚æ•°åˆ—è¡¨çš„è¶…ç±»æ„é€ å‡½æ•°ã€‚ Note: å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰æ˜¾å¼è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ï¼ŒJavaç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ’å…¥å¯¹è¶…ç±»çš„æ— å‚æ•°æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚å¦‚æœè¶…çº§ç±»æ²¡æœ‰æ— å‚æ•°æ„é€ å‡½æ•°ï¼Œåˆ™ä¼šå‡ºç°ç¼–è¯‘æ—¶é”™è¯¯&#96;å¯¹è±¡â€œ*â€æ²¡æœ‰è¿™æ ·çš„æ„é€ å‡½æ•°ï¼Œå› æ­¤å¦‚æœâ€œObjectâ€æ˜¯å”¯ä¸€çš„è¶…ç±»ï¼Œåˆ™æ²¡æœ‰é—®é¢˜ã€‚ å¦‚æœå­ç±»æ„é€ å‡½æ•°æ˜¾å¼æˆ–éšå¼åœ°è°ƒç”¨å…¶è¶…ç±»çš„æ„é€ å‡½æ•°ï¼Œæ‚¨å¯èƒ½ä¼šè®¤ä¸ºå°†æœ‰ä¸€ä¸ªå®Œæ•´çš„æ„é€ å‡½æ•°é“¾è¢«è°ƒç”¨ï¼Œä¸€ç›´è¿”å›åˆ°â€œObjectâ€çš„æ„é€ å‡½æ•°ã€‚äº‹å®ä¸Šï¼Œæƒ…å†µå°±æ˜¯è¿™æ ·ã€‚å®ƒè¢«ç§°ä¸ºæ„é€ å‡½æ•°é“¾æ¥ï¼Œå½“æœ‰å¾ˆé•¿çš„ç±»ä¸‹é™çº¿æ—¶ï¼Œæ‚¨éœ€è¦æ³¨æ„å®ƒã€‚ Object ä½œä¸ºè¶…ç±»å¯¹è±¡ç±»ï¼Œåœ¨java.langåŒ…ä½äºç±»å±‚æ¬¡ç»“æ„æ ‘çš„é¡¶éƒ¨ã€‚æ¯ä¸ªç±»éƒ½æ˜¯â€œObjectâ€ç±»çš„ç›´æ¥æˆ–é—´æ¥åä»£ã€‚æ‚¨ä½¿ç”¨æˆ–ç¼–å†™çš„æ¯ä¸ªç±»éƒ½ç»§æ‰¿â€œObjectâ€çš„å®ä¾‹æ–¹æ³•ã€‚æ‚¨ä¸éœ€è¦ä½¿ç”¨ä»»ä½•è¿™äº›æ–¹æ³•ï¼Œä½†æ˜¯ï¼Œå¦‚æœæ‚¨é€‰æ‹©è¿™æ ·åšï¼Œæ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨ç‰¹å®šäºæ‚¨çš„ç±»çš„ä»£ç æ¥è¦†ç›–å®ƒä»¬ã€‚æœ¬èŠ‚è®¨è®ºçš„ä»â€œObjectâ€ç»§æ‰¿çš„æ–¹æ³•åŒ…æ‹¬ï¼š protected Object clone() throws CloneNotSupportedException åˆ›å»ºå¹¶è¿”å›æ­¤å¯¹è±¡çš„å‰¯æœ¬ã€‚ public boolean equals(Object obj) æŒ‡ç¤ºå…¶ä»–å¯¹è±¡æ˜¯å¦â€œç­‰äºâ€æ­¤å¯¹è±¡ã€‚ protected void finalize() throws Throwable åƒåœ¾å›æ”¶æ—¶ç”±å¯¹è±¡ä¸Šçš„åƒåœ¾å›æ”¶å™¨è°ƒç”¨ é›†åˆç¡®å®šä¸å†æœ‰å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ public final Class getClass() è¿”å›å¯¹è±¡çš„è¿è¡Œæ—¶ç±»ã€‚ public int hashCode() è¿”å›å¯¹è±¡çš„å“ˆå¸Œä»£ç å€¼ã€‚ public String toString() è¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚ â€œObjectâ€çš„â€œnotifyâ€ã€â€œnotifyAllâ€å’Œâ€œwaitâ€æ–¹æ³•éƒ½åœ¨åŒæ­¥ç¨‹åºä¸­ç‹¬ç«‹è¿è¡Œçš„çº¿ç¨‹çš„æ´»åŠ¨ä¸­å‘æŒ¥ä½œç”¨ï¼Œè¿™å°†åœ¨åé¢çš„è¯¾ç¨‹ä¸­è®¨è®ºï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚æœ‰äº”ç§æ–¹æ³•ï¼š public final void notify() public final void notifyAll() public final void wait() public final void wait(long timeout) public final void wait(long timeout, int nanos) Note: è®¸å¤šè¿™äº›æ–¹æ³•éƒ½æœ‰ä¸€äº›å¾®å¦™çš„æ–¹é¢ï¼Œç‰¹åˆ«æ˜¯â€œå…‹éš†â€æ–¹æ³•ã€‚ The clone() Methodå¦‚æœç±»æˆ–å…¶è¶…ç±»ä¹‹ä¸€å®ç°äº†â€œå¯å…‹éš†â€æ¥å£ï¼Œåˆ™å¯ä»¥ä½¿ç”¨â€œclone()â€æ–¹æ³•ä»ç°æœ‰å¯¹è±¡åˆ›å»ºå‰¯æœ¬ã€‚è¦åˆ›å»ºå…‹éš†ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š 1aCloneableObject.clone(); &#96;å¯¹è±¡çš„æ­¤æ–¹æ³•çš„å®ç°æ£€æŸ¥è°ƒç”¨äº†â€œclone()â€çš„å¯¹è±¡æ˜¯å¦å®ç°äº†â€œCloneableâ€æ¥å£ã€‚å¦‚æœå¯¹è±¡æ²¡æœ‰ï¼Œè¯¥æ–¹æ³•å°†æŠ›å‡ºâ€œCloneNotSupportedExceptionâ€å¼‚å¸¸ã€‚å¼‚å¸¸å¤„ç†å°†åœ¨åé¢çš„è¯¾ç¨‹ä¸­ä»‹ç»ã€‚ç›®å‰ï¼Œæ‚¨éœ€è¦çŸ¥é“â€œcloneï¼ˆï¼‰â€å¿…é¡»å£°æ˜ä¸º 1protected Object clone() throws CloneNotSupportedException or: 1public Object clone() throws CloneNotSupportedException å¦‚æœè¦ç¼–å†™ä¸€ä¸ªâ€œclone()â€æ–¹æ³•æ¥è¦†ç›–â€œObjectâ€ä¸­çš„æ–¹æ³•ã€‚ å¦‚æœè°ƒç”¨äº†â€œclone()â€çš„å¯¹è±¡ç¡®å®å®ç°äº†â€œCloneableâ€æ¥å£ï¼Œåˆ™â€œobjectâ€å®ç°çš„â€œclone()â€æ–¹æ³•å°†åˆ›å»ºä¸€ä¸ªä¸åŸå§‹å¯¹è±¡å…·æœ‰ç›¸åŒç±»çš„å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–æ–°å¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œä½¿å…¶å…·æœ‰ä¸åŸå§‹å¯¹è±¡çš„å¯¹åº”æˆå‘˜å˜é‡ç›¸åŒçš„å€¼ã€‚ ä½¿ç±»å¯å…‹éš†çš„æœ€ç®€å•æ–¹æ³•æ˜¯å°†â€œimplements cloneableâ€æ·»åŠ åˆ°ç±»çš„å£°æ˜ä¸­ã€‚åˆ™å¯¹è±¡å¯ä»¥è°ƒç”¨â€œclone()â€æ–¹æ³•ã€‚ å¯¹äºæŸäº›ç±»ï¼Œâ€œObjectâ€çš„â€œclone()â€æ–¹æ³•çš„é»˜è®¤è¡Œä¸ºæ­£å¸¸å·¥ä½œã€‚ä½†æ˜¯ï¼Œå¦‚æœå¯¹è±¡åŒ…å«å¯¹å¤–éƒ¨å¯¹è±¡çš„å¼•ç”¨ï¼Œä¾‹å¦‚â€œObjExternalâ€ï¼Œåˆ™å¯èƒ½éœ€è¦é‡å†™â€œclone()â€ä»¥è·å¾—æ­£ç¡®çš„è¡Œä¸ºã€‚å¦åˆ™ï¼Œä¸€ä¸ªå¯¹è±¡å¯¹â€œObjExternalâ€æ‰€åšçš„æ›´æ”¹ä¹Ÿå°†åœ¨å…¶å…‹éš†ä¸­å¯è§ã€‚è¿™æ„å‘³ç€åŸå§‹å¯¹è±¡åŠå…¶å…‹éš†ä¸æ˜¯ç‹¬ç«‹çš„ã€‚è¦ä½¿å®ƒä»¬è§£è€¦ï¼Œå¿…é¡»é‡å†™â€œclone()â€ï¼Œä»¥ä¾¿å®ƒå…‹éš†å¯¹è±¡å’Œâ€œObjExternalâ€ã€‚ç„¶åï¼ŒåŸå§‹å¯¹è±¡å¼•ç”¨â€œObjExternalâ€ï¼Œå…‹éš†å¼•ç”¨â€œObj Externalâ€çš„å…‹éš†ï¼Œå› æ­¤å¯¹è±¡åŠå…¶å…‹éš†æ˜¯çœŸæ­£ç‹¬ç«‹çš„ã€‚ The equals() Methodâ€œequalsï¼ˆï¼‰â€æ–¹æ³•æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™è¿”å›â€œtrueâ€ã€‚â€œObjectâ€ç±»ä¸­æä¾›çš„â€œequalsï¼ˆï¼‰â€æ–¹æ³•ä½¿ç”¨æ ‡è¯†è¿ç®—ç¬¦ï¼ˆâ€œ&#x3D;&#x3D;â€ï¼‰æ¥ç¡®å®šä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚å¯¹äºåŸå§‹æ•°æ®ç±»å‹ï¼Œè¿™å°†ç»™å‡ºæ­£ç¡®çš„ç»“æœã€‚ç„¶è€Œï¼Œå¯¹äºå¯¹è±¡ï¼Œåˆ™ä¸ä¼šã€‚â€œObjectâ€æä¾›çš„â€œequalsï¼ˆï¼‰â€æ–¹æ³•æµ‹è¯•å¯¹è±¡å¼•ç”¨æ˜¯å¦ç›¸ç­‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ¯”è¾ƒçš„å¯¹è±¡æ˜¯å®Œå…¨ç›¸åŒçš„å¯¹è±¡ã€‚ è¦æµ‹è¯•ä¸¤ä¸ªå¯¹è±¡åœ¨ç­‰æ•ˆï¼ˆåŒ…å«ç›¸åŒä¿¡æ¯ï¼‰æ„ä¹‰ä¸Šæ˜¯å¦ç›¸ç­‰ï¼Œå¿…é¡»é‡å†™â€œequalsï¼ˆï¼‰â€æ–¹æ³•ã€‚ä¸‹é¢æ˜¯é‡å†™â€œequalsï¼ˆï¼‰â€çš„â€œBookâ€ç±»çš„ç¤ºä¾‹ï¼š 1234567891011121314public class Book &#123; String ISBN; public String getISBN() &#123; return ISBN; &#125; public boolean equals(Object obj) &#123; if (obj instanceof Book) return ISBN.equals((Book)obj.getISBN()); else return false; &#125;&#125; è€ƒè™‘ä¸€ä¸‹æµ‹è¯•â€œBookâ€ç±»çš„ä¸¤ä¸ªå®ä¾‹æ˜¯å¦ç›¸ç­‰çš„ä»£ç ï¼š 12345678// Swing Tutorial, 2nd editionBook firstBook = new Book(&quot;0201914670&quot;);Book secondBook = new Book(&quot;0201914670&quot;);if (firstBook.equals(secondBook)) &#123; System.out.println(&quot;objects are equal&quot;);&#125; else &#123; System.out.println(&quot;objects are not equal&quot;);&#125; è¯¥ç¨‹åºæ˜¾ç¤ºâ€œå¯¹è±¡ç›¸ç­‰â€ï¼Œå³ä½¿â€œfirstBookâ€å’Œâ€œsecondBookâ€å¼•ç”¨äº†ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ã€‚å®ƒä»¬è¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ï¼Œå› ä¸ºæ‰€æ¯”è¾ƒçš„å¯¹è±¡åŒ…å«ç›¸åŒçš„ISBNç¼–å·ã€‚ å¦‚æœæ ‡è¯†è¿ç®—ç¬¦ä¸é€‚åˆæ‚¨çš„ç±»ï¼Œåˆ™åº”å§‹ç»ˆé‡å†™â€œequalsï¼ˆï¼‰â€æ–¹æ³•ã€‚ Note: å¦‚æœé‡å†™â€œequalsï¼ˆï¼‰â€ï¼Œåˆ™ä¹Ÿå¿…é¡»é‡å†™â€œhashCodeï¼ˆï¼‰â€ã€‚ The finalize() Methodâ€œObjectâ€ç±»æä¾›å›è°ƒæ–¹æ³•â€œfinalizeï¼ˆï¼‰â€ï¼Œå½“å¯¹è±¡å˜ä¸ºåƒåœ¾æ—¶ï¼Œå¯ä»¥*è°ƒç”¨è¯¥æ–¹æ³•&#96;å¯¹è±¡â€œfinalizeï¼ˆï¼‰â€çš„å®ç°ä¸åšä»»ä½•äº‹æƒ…ï¼Œæ‚¨å¯ä»¥é‡å†™â€œfinalizï¼ˆï¼‰â€æ¥è¿›è¡Œæ¸…ç†ï¼Œä¾‹å¦‚é‡Šæ”¾èµ„æºã€‚ â€œfinalizeï¼ˆï¼‰â€æ–¹æ³•å¯ä»¥ç”±ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ï¼Œä½†ä½•æ—¶è°ƒç”¨ï¼Œç”šè‡³æ˜¯å¦è°ƒç”¨ï¼Œéƒ½æ˜¯ä¸ç¡®å®šçš„ã€‚å› æ­¤ï¼Œä¸è¦ä¾èµ–æ­¤æ–¹æ³•ä¸ºæ‚¨è¿›è¡Œæ¸…ç†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨æ‰§è¡ŒI&#x2F;Oä¹‹åä¸å…³é—­ä»£ç ä¸­çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¹¶ä¸”å¸Œæœ›â€œfinalizeï¼ˆï¼‰â€ä¸ºæ‚¨å…³é—­å®ƒä»¬ï¼Œåˆ™å¯èƒ½ä¼šç”¨å®Œæ–‡ä»¶æè¿°ç¬¦ã€‚ç›¸åï¼Œä½¿ç”¨â€œtryâ€-with-resourcesè¯­å¥è‡ªåŠ¨å…³é—­åº”ç”¨ç¨‹åºçš„èµ„æºã€‚å‚è§èµ„æºå°è¯•å£°æ˜å’Œå®šæ¡ˆå’Œå¼±å‚è€ƒã€è½¯å‚è€ƒå’Œè™šå‚è€ƒåœ¨Javaå¹³å°æ ‡å‡†ç‰ˆHotSpotè™šæ‹Ÿæœºåƒåœ¾æ”¶é›†è°ƒæ•´æŒ‡å—*ä¸­ã€‚ The getClass() Methodæ‚¨ä¸èƒ½è¦†ç›– getClass. â€œgetClassï¼ˆï¼‰â€æ–¹æ³•è¿”å›ä¸€ä¸ªâ€œClassâ€å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å…·æœ‰å¯ç”¨äºè·å–ç±»ä¿¡æ¯çš„æ–¹æ³•ï¼Œä¾‹å¦‚å…¶åç§°ï¼ˆâ€œgetSimpleNameï¼ˆï¼‰â€ï¼‰ã€å…¶è¶…ç±»ï¼ˆâ€œgetSuperclassï¼ˆï¼‰â€ï¼Œä»¥åŠå…¶å®ç°çš„æ¥å£ï¼ˆâ€œgetInterfaceï¼ˆï¼‰â€ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ–¹æ³•è·å–å¹¶æ˜¾ç¤ºå¯¹è±¡çš„ç±»åï¼š 1234void printClassName(Object obj) &#123; System.out.println(&quot;The object&#x27;s&quot; + &quot; class is &quot; + obj.getClass().getSimpleName());&#125; Classç±»ï¼Œåœ¨javaã€‚langåŒ…æœ‰å¤§é‡æ–¹æ³•ï¼ˆè¶…è¿‡50ä¸ªï¼‰ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æµ‹è¯•è¯¥ç±»æ˜¯æ³¨é‡Šï¼ˆisAnnotationï¼ˆï¼‰ï¼‰ã€æ¥å£ï¼ˆisInterfaceï¼ˆï¼‰æˆ–æšä¸¾ï¼ˆisEnumï¼ˆï¼‰ï¼‰ã€‚æ‚¨å¯ä»¥çœ‹åˆ°å¯¹è±¡çš„å­—æ®µæ˜¯ä»€ä¹ˆï¼ˆgetFieldsï¼ˆï¼‰ï¼‰æˆ–å…¶æ–¹æ³•æ˜¯ä»€ä¹ˆï¼ˆ&#96; getMethodsï¼ˆï¼‰â€™ï¼‰ï¼Œç­‰ç­‰ã€‚ The hashCode() Methodâ€œhashCodeï¼ˆï¼‰â€è¿”å›çš„å€¼æ˜¯å¯¹è±¡çš„å“ˆå¸Œä»£ç ï¼Œå®ƒæ˜¯ç”±å“ˆå¸Œç®—æ³•ç”Ÿæˆçš„æ•´æ•°å€¼ã€‚ æ ¹æ®å®šä¹‰ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™å…¶å“ˆå¸Œä»£ç *ä¹Ÿå¿…é¡»ç›¸ç­‰ã€‚å¦‚æœé‡å†™â€œequalsï¼ˆï¼‰â€æ–¹æ³•ï¼Œåˆ™ä¼šæ›´æ”¹ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰çš„æ–¹å¼ï¼Œå¹¶ä¸”â€œObjectâ€å¯¹â€œhashCodeï¼ˆï¼‰â€çš„å®ç°ä¸å†æœ‰æ•ˆã€‚å› æ­¤ï¼Œå¦‚æœé‡å†™â€œequalsï¼ˆï¼‰â€æ–¹æ³•ï¼Œä¹Ÿå¿…é¡»é‡å†™â€œhashCodeï¼ˆï¼‰â€ã€‚ The toString() Methodæ‚¨åº”è¯¥å§‹ç»ˆè€ƒè™‘åœ¨ç±»ä¸­é‡å†™â€œtoStringï¼ˆï¼‰â€æ–¹æ³•ã€‚ â€œObjectâ€çš„â€œtoStringï¼ˆï¼‰â€æ–¹æ³•è¿”å›å¯¹è±¡çš„â€œStringâ€è¡¨ç¤ºï¼Œè¿™å¯¹äºè°ƒè¯•éå¸¸æœ‰ç”¨ã€‚å¯¹è±¡çš„â€œStringâ€è¡¨ç¤ºå®Œå…¨ä¾èµ–äºå¯¹è±¡ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦åœ¨ç±»ä¸­é‡å†™â€œtoStringï¼ˆï¼‰â€ã€‚ å¯ä»¥å°†â€œtoStringï¼ˆï¼‰â€ä¸â€œSystem.outâ€ä¸€èµ·ä½¿ç”¨ã€‚printlnï¼ˆï¼‰&#96;æ˜¾ç¤ºå¯¹è±¡çš„æ–‡æœ¬è¡¨ç¤ºï¼Œä¾‹å¦‚â€œBookâ€çš„å®ä¾‹ï¼š 1System.out.println(firstBook.toString()); å¯¹äºæ­£ç¡®é‡å†™çš„â€œtoStringï¼ˆï¼‰â€æ–¹æ³•ï¼Œå®ƒå°†æ‰“å°ä¸€äº›æœ‰ç”¨çš„å†…å®¹ï¼Œä¾‹å¦‚ï¼š 1ISBN: 0201914670; The Swing Tutorial; A Guide to Constructing GUIs, 2nd Edition ç¼–å†™ Final Classes and Methodsæ‚¨å¯ä»¥å£°æ˜ç±»çš„ä¸€äº›æˆ–æ‰€æœ‰æ–¹æ³•finalã€‚åœ¨æ–¹æ³•å£°æ˜ä¸­ä½¿ç”¨â€œfinalâ€å…³é”®å­—è¡¨ç¤ºæ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™ã€‚â€œObjectâ€ç±»è¿™æ ·åšâ€”â€”å®ƒçš„è®¸å¤šæ–¹æ³•éƒ½æ˜¯â€œfinalâ€ã€‚ å¦‚æœæ–¹æ³•çš„å®ç°ä¸åº”æ›´æ”¹ï¼Œå¹¶ä¸”å¯¹å¯¹è±¡çš„ä¸€è‡´çŠ¶æ€è‡³å…³é‡è¦ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å¸Œæœ›å°†å…¶è®¾ç½®ä¸ºfinalã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†â€œChessAlgorithmâ€ç±»ä¸­çš„â€œgetFirstPlayerâ€æ–¹æ³•è®¾ç½®ä¸ºfinalï¼š 12345678class ChessAlgorithm &#123; enum ChessPlayer &#123; WHITE, BLACK &#125; ... final ChessPlayer getFirstPlayer() &#123; return ChessPlayer.WHITE; &#125; ...&#125; ä»æ„é€ å‡½æ•°è°ƒç”¨çš„æ–¹æ³•é€šå¸¸åº”å£°æ˜ä¸ºfinalã€‚å¦‚æœæ„é€ å‡½æ•°è°ƒç”¨éfinalæ–¹æ³•ï¼Œå­ç±»å¯èƒ½ä¼šé‡æ–°å®šä¹‰è¯¥æ–¹æ³•ï¼Œå¹¶äº§ç”Ÿä»¤äººæƒŠè®¶æˆ–ä¸å¸Œæœ›çš„ç»“æœã€‚ æ³¨æ„ï¼Œæ‚¨ä¹Ÿå¯ä»¥å£°æ˜æ•´ä¸ªç±»finalã€‚å£°æ˜ä¸ºfinalçš„ç±»ä¸èƒ½è¢«å­ç±»åŒ–ã€‚ä¾‹å¦‚ï¼Œå½“åˆ›å»ºåƒâ€œStringâ€ç±»è¿™æ ·çš„ä¸å¯å˜ç±»æ—¶ï¼Œè¿™ç‰¹åˆ«æœ‰ç”¨ã€‚ Abstract Methods and ClassesæŠ½è±¡ç±»æ˜¯ä¸€ä¸ªå£°æ˜ä¸ºâ€œabstractâ€çš„ç±»ï¼Œå®ƒå¯èƒ½åŒ…å«ä¹Ÿå¯èƒ½ä¸åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œä½†å¯ä»¥å­ç±»åŒ–ã€‚ æŠ½è±¡æ–¹æ³•æ˜¯åœ¨æ²¡æœ‰å®ç°çš„æƒ…å†µä¸‹å£°æ˜çš„æ–¹æ³•ï¼ˆæ²¡æœ‰å¤§æ‹¬å·ï¼Œåè·Ÿåˆ†å·ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1abstract void moveTo(double deltaX, double deltaY); å¦‚æœç±»åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œåˆ™ç±»æœ¬èº«å¿…é¡»å£°æ˜ä¸ºâ€œabstractâ€ï¼Œå¦‚ï¼š 12345public abstract class GraphicObject &#123; // declare fields // declare nonabstract methods abstract void draw();&#125; å½“æŠ½è±¡ç±»è¢«å­ç±»åŒ–æ—¶ï¼Œå­ç±»é€šå¸¸ä¸ºå…¶çˆ¶ç±»ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•æä¾›å®ç°ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå­ç±»ä¹Ÿå¿…é¡»å£°æ˜ä¸ºâ€œabstractâ€ã€‚ Note: æ¥å£ä¸­çš„æ–¹æ³•ï¼ˆè¯·å‚è§æ¥å£sectionï¼‰æ˜¯éšå¼æŠ½è±¡çš„ï¼Œå› æ­¤â€œabstractâ€ä¿®é¥°ç¬¦ä¸ä¸æ¥å£æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚ï¼ˆå¯ä»¥ä½¿ç”¨ï¼Œä½†æ²¡æœ‰å¿…è¦ã€‚ï¼‰ æŠ½è±¡ç±»ä¸æ¥å£çš„æ¯”è¾ƒæŠ½è±¡ç±»ç±»ä¼¼äºæ¥å£ã€‚æ‚¨ä¸èƒ½å®ä¾‹åŒ–å®ƒä»¬ï¼Œå®ƒä»¬å¯èƒ½åŒ…å«å¸¦æœ‰æˆ–ä¸å¸¦æœ‰å®ç°çš„æ··åˆå£°æ˜æ–¹æ³•ã€‚ç„¶è€Œï¼Œä½¿ç”¨æŠ½è±¡ç±»ï¼Œæ‚¨å¯ä»¥å£°æ˜éé™æ€å’Œæœ€ç»ˆçš„å­—æ®µï¼Œå¹¶å®šä¹‰å…¬å…±ã€å—ä¿æŠ¤å’Œç§æœ‰çš„å…·ä½“æ–¹æ³•ã€‚ä½¿ç”¨æ¥å£ï¼Œæ‰€æœ‰å­—æ®µéƒ½è‡ªåŠ¨ä¸ºå…¬å…±ã€é™æ€å’Œfinalï¼Œå¹¶ä¸”æ‚¨å£°æ˜æˆ–å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ï¼ˆä½œä¸ºé»˜è®¤æ–¹æ³•ï¼‰éƒ½æ˜¯å…¬å…±çš„ã€‚æ­¤å¤–ï¼Œæ— è®ºæ˜¯å¦æŠ½è±¡ï¼Œæ‚¨åªèƒ½æ‰©å±•ä¸€ä¸ªç±»ï¼Œè€Œå¯ä»¥å®ç°ä»»æ„æ•°é‡çš„æ¥å£ã€‚ æŠ½è±¡ç±»æˆ–æ¥å£åº”è¯¥ä½¿ç”¨å“ªä¸€ä¸ªï¼Ÿ å¦‚æœä»¥ä¸‹ä»»ä½•è¯­å¥é€‚ç”¨äºæ‚¨çš„æƒ…å†µï¼Œè¯·è€ƒè™‘ä½¿ç”¨æŠ½è±¡ç±»ï¼š æ‚¨å¸Œæœ›åœ¨å‡ ä¸ªå¯†åˆ‡ç›¸å…³çš„ç±»ä¹‹é—´å…±äº«ä»£ç ã€‚ æ‚¨å¸Œæœ›æ‰©å±•æŠ½è±¡ç±»çš„ç±»å…·æœ‰è®¸å¤šå…¬å…±æ–¹æ³•æˆ–å­—æ®µï¼Œæˆ–è€…éœ€è¦å…¬å…±ä»¥å¤–çš„è®¿é—®ä¿®é¥°ç¬¦ï¼ˆå¦‚protectedå’Œprivateï¼‰ã€‚ æ‚¨è¦å£°æ˜éé™æ€æˆ–éfinalå­—æ®µã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿå®šä¹‰å¯ä»¥è®¿é—®å’Œä¿®æ”¹å…¶æ‰€å±å¯¹è±¡çŠ¶æ€çš„æ–¹æ³•ã€‚ å¦‚æœä»¥ä¸‹ä»»ä½•è¯­å¥é€‚ç”¨äºæ‚¨çš„æƒ…å†µï¼Œè¯·è€ƒè™‘ä½¿ç”¨æ¥å£ï¼š æ‚¨å¸Œæœ›ä¸ç›¸å…³çš„ç±»å®ç°æ‚¨çš„æ¥å£ã€‚ä¾‹å¦‚ï¼Œæ¥å£Comparableå’Œå¯å…‹éš†ç”±è®¸å¤šä¸ç›¸å…³çš„ç±»å®ç°ã€‚ æ‚¨å¸Œæœ›æŒ‡å®šç‰¹å®šæ•°æ®ç±»å‹çš„è¡Œä¸ºï¼Œä½†ä¸å…³å¿ƒè°å®ç°äº†å®ƒçš„è¡Œä¸ºã€‚ æ‚¨å¸Œæœ›åˆ©ç”¨ç±»å‹çš„å¤šé‡ç»§æ‰¿ã€‚ JDKä¸­æŠ½è±¡ç±»çš„ä¸€ä¸ªç¤ºä¾‹æ˜¯AbstractMapï¼Œæ˜¯é›†åˆæ¡†æ¶çš„ä¸€éƒ¨åˆ†ã€‚å®ƒçš„å­ç±»ï¼ˆåŒ…æ‹¬â€œHashMapâ€ã€â€œTreeMapâ€å’Œâ€œConcurrentHashMapâ€ï¼‰å…±äº«â€œAbstractMapâ€å®šä¹‰çš„è®¸å¤šæ–¹æ³•ï¼ˆåŒ…æ‹¬â€œgetâ€ã€â€œputâ€ã€â€œisEmptyâ€ã€â€œcontainsKeyâ€å’Œâ€œcontainsValueâ€ï¼‰ã€‚ JDKä¸­å®ç°å¤šä¸ªæ¥å£çš„ç±»çš„ç¤ºä¾‹æ˜¯HashMapï¼Œå®ç°äº†æ¥å£â€œSerializableâ€ã€â€œCloneableâ€å’Œâ€œMap&lt;Kï¼ŒV&gt;â€ã€‚é€šè¿‡é˜…è¯»æ­¤æ¥å£åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥æ¨æ–­å‡ºâ€œHashMapâ€çš„å®ä¾‹ï¼ˆæ— è®ºæ˜¯å¼€å‘äººå‘˜è¿˜æ˜¯å®ç°è¯¥ç±»çš„å…¬å¸ï¼‰å¯ä»¥è¢«å…‹éš†ã€å¯åºåˆ—åŒ–ï¼ˆè¿™æ„å‘³ç€å®ƒå¯ä»¥è¢«è½¬æ¢ä¸ºå­—èŠ‚æµï¼›è¯·å‚é˜…[serializable Objects]ä¸€èŠ‚(https://docs.oracle.com/javase/tutorial/jndi/objects/serial.html))ï¼Œå¹¶å…·æœ‰åœ°å›¾çš„åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œâ€œMap&lt;Kï¼ŒV&gt;â€æ¥å£å·²é€šè¿‡è®¸å¤šé»˜è®¤æ–¹æ³•ï¼ˆå¦‚â€œmergeâ€å’Œâ€œforEachâ€ï¼‰è¿›è¡Œäº†å¢å¼ºï¼Œå®ç°äº†è¯¥æ¥å£çš„æ—§ç±»ä¸å¿…å®šä¹‰è¿™äº›æ–¹æ³•ã€‚ æ³¨æ„ï¼Œè®¸å¤šè½¯ä»¶åº“åŒæ—¶ä½¿ç”¨æŠ½è±¡ç±»å’Œæ¥å£ï¼›â€œHashMapâ€ç±»å®ç°äº†å‡ ä¸ªæ¥å£ï¼Œè¿˜æ‰©å±•äº†æŠ½è±¡ç±»â€œAbstractMapâ€ã€‚ æŠ½è±¡ç±»ç¤ºä¾‹åœ¨é¢å‘å¯¹è±¡çš„ç»˜å›¾åº”ç”¨ç¨‹åºä¸­ï¼Œå¯ä»¥ç»˜åˆ¶åœ†ã€çŸ©å½¢ã€ç›´çº¿ã€è´å¡å°”æ›²çº¿å’Œè®¸å¤šå…¶ä»–å›¾å½¢å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡éƒ½å…·æœ‰æŸäº›å…±åŒçš„çŠ¶æ€ï¼ˆä¾‹å¦‚ï¼šä½ç½®ã€æ–¹å‘ã€çº¿æ¡é¢œè‰²ã€å¡«å……é¢œè‰²ï¼‰å’Œè¡Œä¸ºï¼ˆä¾‹å¦‚ï¼šmoveToã€æ—‹è½¬ã€è°ƒæ•´å¤§å°ã€ç»˜åˆ¶ï¼‰ã€‚æ‰€æœ‰å›¾å½¢å¯¹è±¡çš„æŸäº›çŠ¶æ€å’Œè¡Œä¸ºéƒ½ç›¸åŒï¼ˆä¾‹å¦‚ï¼šä½ç½®ã€å¡«å……é¢œè‰²å’ŒmoveToï¼‰ã€‚å…¶ä»–éœ€è¦ä¸åŒçš„å®ç°ï¼ˆä¾‹å¦‚ï¼Œè°ƒæ•´å¤§å°æˆ–ç»˜åˆ¶ï¼‰ã€‚æ‰€æœ‰â€œGraphicObjectâ€å¿…é¡»èƒ½å¤Ÿè‡ªå·±ç»˜åˆ¶æˆ–è°ƒæ•´å¤§å°ï¼›ä»–ä»¬åªæ˜¯åœ¨åšè¿™ä»¶äº‹çš„æ–¹å¼ä¸Šæœ‰æ‰€ä¸åŒã€‚å¯¹äºæŠ½è±¡è¶…ç±»æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œç¾çš„æƒ…å†µã€‚æ‚¨å¯ä»¥åˆ©ç”¨è¿™äº›ç›¸ä¼¼æ€§ï¼Œå¹¶å£°æ˜è¦ä»åŒä¸€æŠ½è±¡çˆ¶å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œâ€œGraphicObjectâ€ï¼‰ç»§æ‰¿çš„æ‰€æœ‰å›¾å½¢å¯¹è±¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ç±»çŸ©å½¢ã€ç›´çº¿ã€è´å¡å°”å’Œåœ†ç»§æ‰¿è‡ªGraphicObject é¦–å…ˆï¼Œå£°æ˜ä¸€ä¸ªæŠ½è±¡ç±»â€œGraphicObjectâ€ï¼Œä»¥æä¾›æ‰€æœ‰å­ç±»ï¼ˆå¦‚å½“å‰ä½ç½®å’Œâ€œmoveToâ€æ–¹æ³•ï¼‰å®Œå…¨å…±äº«çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•&#96;GraphicObjectè¿˜ä¸ºéœ€è¦ç”±æ‰€æœ‰å­ç±»å®ç°ä½†å¿…é¡»ä»¥ä¸åŒæ–¹å¼å®ç°çš„æ–¹æ³•ï¼ˆå¦‚â€œdrawâ€æˆ–â€œresizeâ€ï¼‰å£°æ˜æŠ½è±¡æ–¹æ³•ã€‚â€œGraphicObjectâ€ç±»å¯ä»¥å¦‚ä¸‹æ‰€ç¤ºï¼š 123456789abstract class GraphicObject &#123; int x, y; ... void moveTo(int newX, int newY) &#123; ... &#125; abstract void draw(); abstract void resize();&#125; â€œGraphicObjectâ€çš„æ¯ä¸ªéæŠ½è±¡å­ç±»ï¼ˆå¦‚â€œCircleâ€å’Œâ€œRectangleâ€ï¼‰å¿…é¡»æä¾›â€œdrawâ€å’Œâ€œresizeâ€æ–¹æ³•çš„å®ç°ï¼š 12345678910111213141516class Circle extends GraphicObject &#123; void draw() &#123; ... &#125; void resize() &#123; ... &#125;&#125;class Rectangle extends GraphicObject &#123; void draw() &#123; ... &#125; void resize() &#123; ... &#125;&#125; æŠ½è±¡ç±»å®ç°æ¥å£æ—¶åœ¨Interfaceséƒ¨åˆ†ï¼Œæ³¨æ„åˆ°å®ç°æ¥å£çš„ç±»å¿…é¡»å®ç°æ¥å£çš„æ‰€æœ‰æ–¹æ³•ã€‚ç„¶è€Œï¼Œå¦‚æœç±»è¢«å£°æ˜ä¸ºâ€œæŠ½è±¡â€ï¼Œåˆ™å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸å®ç°æ‰€æœ‰æ¥å£æ–¹æ³•çš„ç±»ã€‚ä¾‹å¦‚ 1234567abstract class X implements Y &#123; // implements all but one method of Y&#125;class XX extends X &#123; // implements the remaining method in Y&#125; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç±»â€œXâ€å¿…é¡»æ˜¯â€œæŠ½è±¡â€çš„ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å®Œå…¨å®ç°â€œYâ€ï¼Œä½†ç±»â€œXXâ€å®é™…ä¸Šå®ç°äº†â€œYâ€ã€‚ Class MembersæŠ½è±¡ç±»å¯ä»¥å…·æœ‰â€œé™æ€â€å­—æ®µå’Œâ€œé™æ€â€æ–¹æ³•ã€‚æ‚¨å¯ä»¥å°†è¿™äº›é™æ€æˆå‘˜ä¸ç±»å¼•ç”¨ï¼ˆä¾‹å¦‚ï¼Œâ€œAbstractClass.staticMethod()â€ï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œå°±åƒä¸ä»»ä½•å…¶ä»–ç±»ä¸€æ ·ã€‚ ç»§æ‰¿æ€»ç»“é™¤äº†â€œObjectâ€ç±»ï¼Œä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªç›´æ¥è¶…ç±»ã€‚ç±»ä»å…¶æ‰€æœ‰è¶…ç±»ï¼ˆæ— è®ºæ˜¯ç›´æ¥è¿˜æ˜¯é—´æ¥ï¼‰ç»§æ‰¿å­—æ®µå’Œæ–¹æ³•ã€‚å­ç±»å¯ä»¥è¦†ç›–å…¶ç»§æ‰¿çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥éšè—å…¶ç»§æ‰¿çš„å­—æ®µæˆ–æ–¹æ³•ã€‚ï¼ˆè¯·æ³¨æ„ï¼Œéšè—å­—æ®µé€šå¸¸æ˜¯ä¸å¥½çš„ç¼–ç¨‹å®è·µã€‚ï¼‰ è¦†ç›–å’Œéšè—æ–¹æ³•ä¸­çš„è¡¨éƒ¨åˆ†æ˜¾ç¤ºäº†ä½¿ç”¨ä¸è¶…ç±»ä¸­çš„æ–¹æ³•ç›¸åŒçš„ç­¾åå£°æ˜æ–¹æ³•çš„æ•ˆæœã€‚ â€œObjectâ€ç±»æ˜¯ç±»å±‚æ¬¡ç»“æ„çš„é¡¶éƒ¨ã€‚æ‰€æœ‰ç±»éƒ½æ˜¯è¯¥ç±»çš„åä»£ï¼Œå¹¶ä»è¯¥ç±»ç»§æ‰¿æ–¹æ³•ã€‚ä»Objectç»§æ‰¿çš„æœ‰ç”¨æ–¹æ³•åŒ…æ‹¬toStringï¼ˆï¼‰ã€equalsï¼ˆï¼‰ï¼Œcloneï¼ˆï¼‰å’ŒgetClassï¼ˆï¼‰ã€‚ é€šè¿‡åœ¨ç±»çš„å£°æ˜ä¸­ä½¿ç”¨â€œfinalâ€å…³é”®å­—ï¼Œå¯ä»¥é˜²æ­¢ç±»è¢«å­ç±»åŒ–ã€‚ç±»ä¼¼åœ°ï¼Œé€šè¿‡å°†æ–¹æ³•å£°æ˜ä¸ºfinalæ–¹æ³•ï¼Œå¯ä»¥é˜²æ­¢æ–¹æ³•è¢«å­ç±»é‡å†™ã€‚ æŠ½è±¡ç±»åªèƒ½è¢«å­ç±»åŒ–ï¼›å®ƒä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚æŠ½è±¡ç±»å¯ä»¥åŒ…å«å£°æ˜ä½†æœªå®ç°çš„æŠ½è±¡æ–¹æ³•æ–¹æ³•ã€‚ç„¶åï¼Œå­ç±»æä¾›æŠ½è±¡æ–¹æ³•çš„å®ç°ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"æ¥å£","slug":"æ¥å£","permalink":"https://guoshunfa.com/tags/%E6%8E%A5%E5%8F%A3/"}]},{"title":"Oracle Javaæ³›å‹","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Oracle-Javaæ³›å‹","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2020/07/Oracle-Javaæ³›å‹/","link":"","permalink":"https://guoshunfa.com/2020/07/Oracle-Java%E6%B3%9B%E5%9E%8B/","excerpt":"","text":"æœ¬æ–‡ç« ä»¥jdk8ä¸ºåŸºç¡€è¿›è¡Œç¼–å†™ï¼Œå¦‚æœæƒ³æŸ¥çœ‹åç»­çš„ç‰ˆæœ¬å¯ä»¥å‰å¾€jdkç‰ˆæœ¬ç›®å½•ä¸‹æŸ¥çœ‹ã€‚ ç¿»è¯‘è‡ªï¼šhttps://docs.oracle.com/javase/tutorial/java/generics/index.html åœ¨ä»»ä½•éå¹³å‡¡çš„è½¯ä»¶é¡¹ç›®ä¸­ï¼Œbugéƒ½æ˜¯ç”Ÿæ´»ä¸­çš„äº‹å®ã€‚ä»”ç»†çš„è§„åˆ’ã€ç¼–ç¨‹å’Œæµ‹è¯•å¯ä»¥å¸®åŠ©å‡å°‘å®ƒä»¬çš„æ™®éæ€§ï¼Œä½†ä¸çŸ¥ä½•æ•…ï¼Œåœ¨æŸä¸ªåœ°æ–¹ï¼Œå®ƒä»¬æ€»ä¼šæ‰¾åˆ°ä¸€ç§æ–¹æ³•æ½œå…¥æ‚¨çš„ä»£ç ã€‚éšç€æ–°ç‰¹æ€§çš„å¼•å…¥å’Œä»£ç åº“çš„è§„æ¨¡å’Œå¤æ‚æ€§çš„å¢åŠ ï¼Œè¿™ä¸€ç‚¹å˜å¾—å°¤ä¸ºæ˜æ˜¾ã€‚ å¹¸è¿çš„æ˜¯ï¼Œæœ‰äº›bugæ¯”å…¶ä»–bugæ›´å®¹æ˜“æ£€æµ‹ã€‚ä¾‹å¦‚ï¼Œç¼–è¯‘æ—¶é”™è¯¯å¯ä»¥åœ¨æ—©æœŸæ£€æµ‹åˆ°ï¼›æ‚¨å¯ä»¥ä½¿ç”¨ç¼–è¯‘å™¨çš„é”™è¯¯æ¶ˆæ¯æ¥æ‰¾å‡ºé—®é¢˜æ‰€åœ¨å¹¶ç«‹å³ä¿®å¤å®ƒã€‚ç„¶è€Œï¼Œè¿è¡Œæ—¶é”™è¯¯å¯èƒ½ä¼šæœ‰æ›´å¤§çš„é—®é¢˜ï¼›å®ƒä»¬å¹¶ä¸æ€»æ˜¯ç«‹å³å‡ºç°ï¼Œå½“å®ƒä»¬å‡ºç°æ—¶ï¼Œå¯èƒ½æ˜¯ç¨‹åºä¸­çš„æŸä¸ªç‚¹ä¸é—®é¢˜çš„å®é™…åŸå› ç›¸å»ç”šè¿œã€‚ æ³›å‹é€šè¿‡åœ¨ç¼–è¯‘æ—¶æ£€æµ‹æ›´å¤šçš„é”™è¯¯æ¥å¢åŠ ä»£ç çš„ç¨³å®šæ€§ã€‚å®Œæˆæœ¬è¯¾ç¨‹åï¼Œæ‚¨å¯èƒ½éœ€è¦ç»§ç»­å­¦ä¹ Genericså‰æ‹‰å¾·Â·å¸ƒæ‹‰æŸ¥çš„æ•™ç¨‹ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨æ³›å‹ï¼Ÿç®€è€Œè¨€ä¹‹ï¼Œæ³›å‹ä½¿typesï¼ˆç±»å’Œæ¥å£ï¼‰åœ¨å®šä¹‰ç±»ã€æ¥å£å’Œæ–¹æ³•æ—¶æˆä¸ºå‚æ•°ã€‚ä¸æ–¹æ³•å£°æ˜ä¸­ä½¿ç”¨çš„æ›´ä¸ºç†Ÿæ‚‰çš„å½¢å¼å‚æ•°éå¸¸ç›¸ä¼¼ï¼Œç±»å‹å‚æ•°ä¸ºæ‚¨æä¾›äº†ä¸€ç§å°†ç›¸åŒçš„ä»£ç ç”¨äºä¸åŒè¾“å…¥çš„æ–¹æ³•ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œå½¢å¼å‚æ•°çš„è¾“å…¥æ˜¯å€¼ï¼Œè€Œç±»å‹å‚æ•°çš„è¾“å…¥åˆ™æ˜¯ç±»å‹ã€‚ ä½¿ç”¨æ³›å‹çš„ä»£ç æ¯”éæ³›å‹ä»£ç æœ‰å¾ˆå¤šå¥½å¤„ï¼š ç¼–è¯‘æ—¶æ›´å¼ºå¤§çš„ç±»å‹æ£€æŸ¥ã€‚ Javaç¼–è¯‘å™¨å¯¹æ³›å‹ä»£ç åº”ç”¨å¼ºç±»å‹æ£€æŸ¥ï¼Œå¦‚æœä»£ç è¿åäº†ç±»å‹å®‰å…¨æ€§ï¼Œå°±ä¼šå‘å‡ºé”™è¯¯ã€‚ä¿®å¤ç¼–è¯‘æ—¶é”™è¯¯æ¯”ä¿®å¤è¿è¡Œæ—¶é”™è¯¯æ›´å®¹æ˜“ï¼Œå› ä¸ºè¿è¡Œæ—¶é”™è¯¯å¾ˆéš¾æ‰¾åˆ°ã€‚ æ¶ˆé™¤é“¸ä»¶ã€‚ ä»¥ä¸‹æ²¡æœ‰æ³›å‹çš„ä»£ç æ®µéœ€è¦å¼ºåˆ¶è½¬æ¢ï¼š 123List list = new ArrayList();list.add(&quot;hello&quot;);String s = (String) list.get(0); é‡æ–°ç¼–å†™ä»¥ä½¿ç”¨æ³›å‹æ—¶ï¼Œä»£ç ä¸éœ€è¦å¼ºåˆ¶è½¬æ¢ï¼š 123List&lt;String&gt; list = new ArrayList&lt;String&gt;();list.add(&quot;hello&quot;);String s = list.get(0); // no cast ä½¿ç¨‹åºå‘˜èƒ½å¤Ÿå®ç°é€šç”¨ç®—æ³•ã€‚ é€šè¿‡ä½¿ç”¨æ³›å‹ï¼Œç¨‹åºå‘˜å¯ä»¥å®ç°é€šç”¨ç®—æ³•ï¼Œè¿™äº›ç®—æ³•å¯ä»¥å¤„ç†ä¸åŒç±»å‹çš„é›†åˆï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼Œå¹¶ä¸”ç±»å‹å®‰å…¨ï¼Œæ›´æ˜“äºé˜…è¯»ã€‚ æ³›å‹ç±»å‹æ³›å‹ç±»å‹æ˜¯åœ¨ç±»å‹ä¸Šå‚æ•°åŒ–çš„æ³›å‹ç±»æˆ–æ¥å£ã€‚å°†ä¿®æ”¹ä¸‹é¢çš„â€œBoxâ€ç±»ä»¥æ¼”ç¤ºè¯¥æ¦‚å¿µã€‚ ä¸€ä¸ªç®€å•çš„Boxç±»é¦–å…ˆæ£€æŸ¥å¯¹ä»»ä½•ç±»å‹çš„å¯¹è±¡è¿›è¡Œæ“ä½œçš„éæ³›å‹â€œBoxâ€ç±»ã€‚å®ƒåªéœ€è¦æä¾›ä¸¤ä¸ªæ–¹æ³•ï¼šâ€œsetâ€ï¼ˆå°†å¯¹è±¡æ·»åŠ åˆ°æ¡†ä¸­ï¼‰å’Œâ€œgetâ€ï¼ˆæ£€ç´¢å¯¹è±¡ï¼‰ï¼š 123456public class Box &#123; private Object object; public void set(Object object) &#123; this.object = object; &#125; public Object get() &#123; return object; &#125;&#125; ç”±äºå®ƒçš„æ–¹æ³•æ¥å—æˆ–è¿”å›ä¸€ä¸ªâ€œObjectâ€ï¼Œæ‰€ä»¥åªè¦å®ƒä¸æ˜¯åŸå§‹ç±»å‹ä¹‹ä¸€ï¼Œæ‚¨å°±å¯ä»¥éšæ„ä¼ å…¥ä»»ä½•æ‚¨æƒ³è¦çš„å†…å®¹ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œæ— æ³•éªŒè¯è¯¥ç±»æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚ä»£ç çš„ä¸€éƒ¨åˆ†å¯èƒ½å°†â€œIntegerâ€æ”¾åœ¨æ¡†ä¸­ï¼Œå¹¶æœŸæœ›ä»ä¸­è·å–â€œIntegerâ€™sâ€ï¼Œè€Œä»£ç çš„å¦ä¸€éƒ¨åˆ†å¯èƒ½é”™è¯¯åœ°ä¼ å…¥â€œStringâ€ï¼Œä»è€Œå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚ Boxç±»çš„é€šç”¨ç‰ˆæœ¬æ³›å‹ç±»çš„å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š 1class name&lt;T1, T2, ..., Tn&gt; &#123; /* ... */ &#125; ç±»å‹å‚æ•°éƒ¨åˆ†ç”±å°–æ‹¬å·ï¼ˆ&lt;&gt;ï¼‰åˆ†éš”ï¼Œä½äºç±»åä¹‹åã€‚å®ƒæŒ‡å®šç±»å‹å‚æ•°ï¼ˆä¹Ÿç§°ä¸ºç±»å‹å˜é‡ï¼‰â€œT1â€ã€â€œT2â€ã€â€¦å’Œâ€œTnâ€ã€‚ è¦æ›´æ–°â€œBoxâ€ç±»ä»¥ä½¿ç”¨æ³›å‹ï¼Œè¯·é€šè¿‡å°†ä»£ç â€œpublic class Boxâ€æ›´æ”¹ä¸ºâ€œpublic class-Box&lt;T&gt;â€æ¥åˆ›å»ºä¸€ä¸ªæ³›å‹ç±»å‹å£°æ˜ã€‚è¿™å¼•å…¥äº†ç±»å‹å˜é‡â€œTâ€ï¼Œå®ƒå¯ä»¥åœ¨ç±»ä¸­çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚ é€šè¿‡æ­¤æ›´æ”¹ï¼Œâ€œBoxâ€ç±»å˜ä¸ºï¼š 1234567891011/** * Generic version of the Box class. * @param &lt;T&gt; the type of the value being boxed */public class Box&lt;T&gt; &#123; // T stands for &quot;Type&quot; private T t; public void set(T t) &#123; this.t = t; &#125; public T get() &#123; return t; &#125;&#125; å¦‚æ‚¨æ‰€è§ï¼Œâ€œObjectâ€çš„æ‰€æœ‰å‡ºç°éƒ½è¢«â€œTâ€æ›¿æ¢ã€‚ç±»å‹å˜é‡å¯ä»¥æ˜¯æ‚¨æŒ‡å®šçš„ä»»ä½•éåŸºå…ƒç±»å‹ï¼šä»»ä½•ç±»ç±»å‹ã€ä»»ä½•æ¥å£ç±»å‹ã€ä»»ä½•æ•°ç»„ç±»å‹ï¼Œç”šè‡³å…¶ä»–ç±»å‹å˜é‡ã€‚ åŒæ ·çš„æŠ€æœ¯ä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºé€šç”¨æ¥å£ã€‚ ç±»å‹å‚æ•°å‘½åæƒ¯ä¾‹æŒ‰ç…§æƒ¯ä¾‹ï¼Œç±»å‹å‚æ•°åç§°æ˜¯å•ä¸ªå¤§å†™å­—æ¯ã€‚è¿™ä¸å˜é‡å‘½åå½¢æˆé²œæ˜å¯¹æ¯”æ‚¨å·²ç»çŸ¥é“çš„çº¦å®šï¼Œå¹¶ä¸”æœ‰å……åˆ†çš„ç†ç”±ï¼šå¦‚æœæ²¡æœ‰è¿™ç§çº¦å®šï¼Œå¾ˆéš¾åŒºåˆ†ç±»å‹å˜é‡å’Œæ™®é€šç±»æˆ–æ¥å£åç§°ä¹‹é—´çš„åŒºåˆ«ã€‚ æœ€å¸¸ç”¨çš„ç±»å‹å‚æ•°åç§°æ˜¯ï¼š E - Element (Javaé›†åˆæ¡†æ¶å¹¿æ³›ä½¿ç”¨) K - Key N - Number T - Type V - Value S,U,V etc. - 2nd, 3rd, 4th types æ‚¨å°†åœ¨æ•´ä¸ªJavaSEAPIå’Œæœ¬è¯¾ç¨‹çš„å…¶ä½™éƒ¨åˆ†ä¸­çœ‹åˆ°è¿™äº›åç§°ã€‚ è°ƒç”¨å’Œå®ä¾‹åŒ–æ³›å‹ç±»å‹è¦ä»ä»£ç ä¸­å¼•ç”¨æ³›å‹â€œBoxâ€ç±»ï¼Œå¿…é¡»æ‰§è¡Œæ³›å‹ç±»å‹è°ƒç”¨ï¼Œè¯¥è°ƒç”¨å°†â€œTâ€æ›¿æ¢ä¸ºä¸€äº›å…·ä½“å€¼ï¼Œä¾‹å¦‚â€œIntegerâ€ï¼š 1Box&lt;Integer&gt; integerBox; æ‚¨å¯ä»¥å°†æ³›å‹ç±»å‹è°ƒç”¨è§†ä¸ºä¸æ™®é€šæ–¹æ³•è°ƒç”¨ç±»ä¼¼ï¼Œä½†ä¸æ˜¯å°†å‚æ•°ä¼ é€’ç»™æ–¹æ³•ï¼Œè€Œæ˜¯å°†ç±»å‹å‚æ•°ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºâ€œIntegerâ€ï¼‰ä¼ é€’ç»™â€œBoxâ€ç±»æœ¬èº«ã€‚ ç±»å‹å‚æ•°å’Œç±»å‹å‚æ•°æœ¯è¯­: è®¸å¤šå¼€å‘äººå‘˜å¯äº’æ¢åœ°ä½¿ç”¨æœ¯è¯­â€œç±»å‹å‚æ•°â€å’Œâ€œç±»å‹è‡ªå˜é‡â€ï¼Œä½†è¿™äº›æœ¯è¯­å¹¶ä¸ç›¸åŒã€‚ç¼–ç æ—¶ï¼Œæä¾›ç±»å‹å‚æ•°ä»¥åˆ›å»ºå‚æ•°åŒ–ç±»å‹ã€‚å› æ­¤ï¼Œâ€œFoo&lt;T&gt;â€ä¸­çš„â€œTâ€æ˜¯ç±»å‹å‚æ•°ï¼Œè€Œâ€œFooï¼Stringï¼fâ€ä¸­çš„â€˜Stringâ€™æ˜¯ç±»å‹å‚æ•°ã€‚æœ¬è¯¾åœ¨ä½¿ç”¨è¿™äº›æœ¯è¯­æ—¶éµå¾ªäº†è¿™ä¸€å®šä¹‰ã€‚ ä¸ä»»ä½•å…¶ä»–å˜é‡å£°æ˜ä¸€æ ·ï¼Œæ­¤ä»£ç å®é™…ä¸Šä¸ä¼šåˆ›å»ºæ–°çš„â€œBoxâ€å¯¹è±¡ã€‚å®ƒç®€å•åœ°å£°æ˜â€œintegerBoxâ€å°†åŒ…å«å¯¹â€œIntegerâ€çš„â€œBoxâ€çš„å¼•ç”¨ï¼Œè¿™å°±æ˜¯è¯»å–â€œBoxï¼œIntegerï¼â€çš„æ–¹å¼ã€‚ æ³›å‹ç±»å‹çš„è°ƒç”¨é€šå¸¸ç§°ä¸ºå‚æ•°åŒ–ç±»å‹ã€‚ è¦å®ä¾‹åŒ–è¯¥ç±»ï¼Œè¯·åƒå¾€å¸¸ä¸€æ ·ä½¿ç”¨â€œnewâ€å…³é”®å­—ï¼Œä½†åœ¨ç±»åå’Œæ‹¬å·ä¹‹é—´æ”¾ç½®â€œï¼œIntegerï¼â€ï¼š 1Box&lt;Integer&gt; integerBox = new Box&lt;Integer&gt;(); é’»çŸ³åœ¨JavaSE7å’Œæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œåªè¦ç¼–è¯‘å™¨å¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­ç¡®å®šæˆ–æ¨æ–­ç±»å‹å‚æ•°ï¼Œå°±å¯ä»¥ç”¨ä¸€ç»„ç©ºçš„ç±»å‹å‚æ•°ï¼ˆ&lt;&gt;ï¼‰æ›¿æ¢è°ƒç”¨æ³›å‹ç±»æ„é€ å‡½æ•°æ‰€éœ€çš„ç±»å‹å‚æ•°ã€‚è¿™å¯¹å°–æ‹¬å·&lt;&gt;ï¼Œéæ­£å¼åœ°ç§°ä¸ºâ€œé’»çŸ³â€ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­å¥åˆ›å»ºâ€œBox&lt;Integer&gt;â€çš„å®ä¾‹ï¼š 1Box&lt;Integer&gt; integerBox = new Box&lt;&gt;(); æœ‰å…³è±å½¢ç¬¦å·å’Œç±»å‹æ¨æ–­çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…type inference. å¤šä¸ªç±»å‹å‚æ•°å¦‚å‰æ‰€è¿°ï¼Œæ³›å‹ç±»å¯ä»¥æœ‰å¤šä¸ªç±»å‹å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå®ç°é€šç”¨â€œPairâ€æ¥å£çš„é€šç”¨â€œOrderedPairâ€ç±»ï¼š 123456789101112131415161718public interface Pair&lt;K, V&gt; &#123; public K getKey(); public V getValue();&#125;public class OrderedPair&lt;K, V&gt; implements Pair&lt;K, V&gt; &#123; private K key; private V value; public OrderedPair(K key, V value) &#123; this.key = key; this.value = value; &#125; public K getKey() &#123; return key; &#125; public V getValue() &#123; return value; &#125;&#125; ä»¥ä¸‹è¯­å¥åˆ›å»ºäº†â€œOrderedPairâ€ç±»çš„ä¸¤ä¸ªå®ä¾‹ï¼š 12Pair&lt;String, Integer&gt; p1 = new OrderedPair&lt;String, Integer&gt;(&quot;Even&quot;, 8);Pair&lt;String, String&gt; p2 = new OrderedPair&lt;String, String&gt;(&quot;hello&quot;, &quot;world&quot;); ä»£ç â€œnew OrderedPair&lt;Stringï¼ŒInteger&gt;â€å°†â€œKâ€å®ä¾‹åŒ–ä¸ºâ€œStringâ€ï¼Œå°†â€œVâ€å®ä¾‹åŒ–ä¸ºä¸€ä¸ªâ€œIntegerâ€ã€‚å› æ­¤ï¼Œâ€œOrderedPairâ€æ„é€ å‡½æ•°çš„å‚æ•°ç±»å‹åˆ†åˆ«ä¸ºâ€œStringâ€å’Œâ€œIntegerâ€ã€‚ç”±äºè‡ªåŠ¨è£…ç®±ï¼Œå‘ç±»ä¼ é€’â€œStringâ€å’Œâ€œintâ€æ˜¯æœ‰æ•ˆçš„ã€‚ å¦‚é’»çŸ³ä¸­æ‰€è¿°ï¼Œå› ä¸ºJavaç¼–è¯‘å™¨å¯ä»¥ä»å£°æ˜â€œOrderedPair&lt;Stringï¼ŒInteger&gt;â€ä¸­æ¨æ–­â€œKâ€å’Œâ€œVâ€ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨è±å½¢ç¬¦å·ç¼©çŸ­è¿™äº›è¯­å¥ï¼š 12OrderedPair&lt;String, Integer&gt; p1 = new OrderedPair&lt;&gt;(&quot;Even&quot;, 8);OrderedPair&lt;String, String&gt; p2 = new OrderedPair&lt;&gt;(&quot;hello&quot;, &quot;world&quot;); è¦åˆ›å»ºæ³›å‹æ¥å£ï¼Œè¯·éµå¾ªä¸åˆ›å»ºæ³›å‹ç±»ç›¸åŒçš„çº¦å®šã€‚ å‚æ•°åŒ–ç±»å‹ä¹Ÿå¯ä»¥ç”¨å‚æ•°åŒ–ç±»å‹ï¼ˆå³â€œList&lt;String&gt;â€ï¼‰æ›¿æ¢ç±»å‹å‚æ•°ï¼ˆå³â€œKâ€æˆ–â€œVâ€ï¼‰ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨â€œOrderedPair&lt;Kï¼ŒV&gt;â€ç¤ºä¾‹ï¼š 1OrderedPair&lt;String, Box&lt;Integer&gt;&gt; p = new OrderedPair&lt;&gt;(&quot;primes&quot;, new Box&lt;Integer&gt;(...)); åŸå§‹ç±»å‹åŸå§‹ç±»å‹æ˜¯æ²¡æœ‰ä»»ä½•ç±»å‹å‚æ•°çš„æ³›å‹ç±»æˆ–æ¥å£çš„åç§°ã€‚ä¾‹å¦‚ï¼Œç»™å®šæ³›å‹â€œBoxâ€ç±»ï¼š 1234public class Box&lt;T&gt; &#123; public void set(T t) &#123; /* ... */ &#125; // ...&#125; è¦åˆ›å»ºå‚æ•°åŒ–ç±»å‹â€œBox&lt;T&gt;â€ï¼Œè¯·ä¸ºæ­£å¼ç±»å‹å‚æ•°â€œTâ€æä¾›ä¸€ä¸ªå®é™…ç±»å‹å‚æ•°ï¼š 1Box&lt;Integer&gt; intBox = new Box&lt;&gt;(); å¦‚æœçœç•¥äº†å®é™…ç±»å‹å‚æ•°ï¼Œåˆ™åˆ›å»ºâ€œBoxï¼œTï¼â€çš„åŸå§‹ç±»å‹ï¼š 1Box rawBox = new Box(); å› æ­¤ï¼Œâ€œBoxâ€æ˜¯æ³›å‹ç±»å‹â€œBox&lt;T&gt;â€çš„åŸå§‹ç±»å‹ã€‚ä½†æ˜¯ï¼Œéæ³›å‹ç±»æˆ–æ¥å£ç±»å‹ä¸æ˜¯åŸå§‹ç±»å‹ã€‚ åŸå§‹ç±»å‹å‡ºç°åœ¨é—ç•™ä»£ç ä¸­ï¼Œå› ä¸ºåœ¨JDK5.0ä¹‹å‰ï¼Œè®¸å¤šAPIç±»ï¼ˆå¦‚â€œé›†åˆâ€ç±»ï¼‰éƒ½ä¸æ˜¯æ³›å‹çš„ã€‚ä¸ºäº†å‘åå…¼å®¹ï¼Œå…è®¸å°†å‚æ•°åŒ–ç±»å‹åˆ†é…ç»™å…¶åŸå§‹ç±»å‹ï¼š 12Box&lt;String&gt; stringBox = new Box&lt;&gt;();Box rawBox = stringBox; // OK ä½†å¦‚æœå°†åŸå§‹ç±»å‹åˆ†é…ç»™å‚æ•°åŒ–ç±»å‹ï¼Œåˆ™ä¼šæ”¶åˆ°è­¦å‘Šï¼š 12Box rawBox = new Box(); // rawBox is a raw type of Box&lt;T&gt;Box&lt;Integer&gt; intBox = rawBox; // warning: unchecked conversion å¦‚æœä½¿ç”¨åŸå§‹ç±»å‹è°ƒç”¨ç›¸åº”æ³›å‹ç±»å‹ä¸­å®šä¹‰çš„æ³›å‹æ–¹æ³•ï¼Œä¹Ÿä¼šæ”¶åˆ°è­¦å‘Šï¼š 123Box&lt;String&gt; stringBox = new Box&lt;&gt;();Box rawBox = stringBox;rawBox.set(8); // warning: unchecked invocation to set(T) è­¦å‘Šæ˜¾ç¤ºï¼ŒåŸå§‹ç±»å‹ç»•è¿‡æ³›å‹ç±»å‹æ£€æŸ¥ï¼Œå°†ä¸å®‰å…¨ä»£ç çš„æ•è·å»¶è¿Ÿåˆ°è¿è¡Œæ—¶ã€‚å› æ­¤ï¼Œåº”é¿å…ä½¿ç”¨åŸå§‹ç±»å‹ã€‚ ç±»å‹æ“¦é™¤éƒ¨åˆ†æä¾›äº†æœ‰å…³Javaç¼–è¯‘å™¨å¦‚ä½•ä½¿ç”¨åŸå§‹ç±»å‹çš„æ›´å¤šä¿¡æ¯ã€‚ æœªé€‰ä¸­çš„é”™è¯¯æ¶ˆæ¯å¦‚å‰æ‰€è¿°, å½“å°†é—ç•™ä»£ç ä¸é€šç”¨ä»£ç æ··åˆæ—¶ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„è­¦å‘Šæ¶ˆæ¯: 12Note: Example.java uses unchecked or unsafe operations.Note: Recompile with -Xlint:unchecked for details. å½“ä½¿ç”¨å¯¹åŸå§‹ç±»å‹è¿›è¡Œæ“ä½œçš„æ—§APIæ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š 12345678910public class WarningDemo &#123; public static void main(String[] args)&#123; Box&lt;Integer&gt; bi; bi = createBox(); &#125; static Box createBox()&#123; return new Box(); &#125;&#125; æœ¯è¯­â€œæœªæ£€æŸ¥â€æ„å‘³ç€ç¼–è¯‘å™¨æ²¡æœ‰è¶³å¤Ÿçš„ç±»å‹ä¿¡æ¯æ¥æ‰§è¡Œç¡®ä¿ç±»å‹å®‰å…¨æ‰€éœ€çš„æ‰€æœ‰ç±»å‹æ£€æŸ¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œâ€œæœªæ£€æŸ¥â€è­¦å‘Šè¢«ç¦ç”¨ï¼Œå°½ç®¡ç¼–è¯‘å™¨ä¼šç»™å‡ºæç¤ºã€‚è¦æŸ¥çœ‹æ‰€æœ‰â€œæœªæ£€æŸ¥â€è­¦å‘Šï¼Œè¯·ä½¿ç”¨â€œ-Xlint:uncheckedâ€é‡æ–°ç¼–è¯‘ã€‚ ä½¿ç”¨â€œ-Xlint:uncheckedâ€é‡æ–°ç¼–è¯‘ä¸Šä¸€ä¸ªç¤ºä¾‹å°†æ˜¾ç¤ºä»¥ä¸‹é™„åŠ ä¿¡æ¯ï¼š 123456WarningDemo.java:4: warning: [unchecked] unchecked conversionfound : Boxrequired: Box&lt;java.lang.Integer&gt; bi = createBox(); ^1 warning è¦å®Œå…¨ç¦ç”¨æœªæ£€æŸ¥çš„è­¦å‘Šï¼Œè¯·ä½¿ç”¨â€œ-Xlint:æœªæ£€æŸ¥â€æ ‡å¿—ã€‚@SuppressWarningsï¼ˆâ€œuncheckedâ€ï¼‰æ³¨é‡Šå¯æŠ‘åˆ¶æœªé€‰ä¸­çš„è­¦å‘Šã€‚å¦‚æœæ‚¨ä¸ç†Ÿæ‚‰â€œ@SuppressWarningsâ€è¯­æ³•ï¼Œè¯·å‚é˜…Annotations. æ³›å‹æ–¹æ³•æ³›å‹æ–¹æ³•æ˜¯å¼•å…¥è‡ªå·±ç±»å‹å‚æ•°çš„æ–¹æ³•ã€‚è¿™ç±»ä¼¼äºå£°æ˜æ³›å‹ç±»å‹ï¼Œä½†ç±»å‹å‚æ•°çš„èŒƒå›´ä»…é™äºå£°æ˜å®ƒçš„æ–¹æ³•ã€‚å…è®¸ä½¿ç”¨é™æ€å’Œéé™æ€æ³›å‹æ–¹æ³•ä»¥åŠæ³›å‹ç±»æ„é€ å‡½æ•°ã€‚ æ³›å‹æ–¹æ³•çš„è¯­æ³•åŒ…æ‹¬ä¸€ä¸ªç±»å‹å‚æ•°åˆ—è¡¨ï¼Œä½äºå°–æ‹¬å·å†…ï¼Œå‡ºç°åœ¨æ–¹æ³•çš„è¿”å›ç±»å‹ä¹‹å‰ã€‚å¯¹äºé™æ€æ³›å‹æ–¹æ³•ï¼Œç±»å‹å‚æ•°éƒ¨åˆ†å¿…é¡»å‡ºç°åœ¨æ–¹æ³•çš„è¿”å›ç±»å‹ä¹‹å‰ã€‚ â€œUtilâ€ç±»åŒ…å«ä¸€ä¸ªé€šç”¨æ–¹æ³•â€œcompareâ€ï¼Œç”¨äºæ¯”è¾ƒä¸¤ä¸ªâ€œPairâ€å¯¹è±¡ï¼š 12345678910111213141516171819202122public class Util &#123; public static &lt;K, V&gt; boolean compare(Pair&lt;K, V&gt; p1, Pair&lt;K, V&gt; p2) &#123; return p1.getKey().equals(p2.getKey()) &amp;&amp; p1.getValue().equals(p2.getValue()); &#125;&#125;public class Pair&lt;K, V&gt; &#123; private K key; private V value; public Pair(K key, V value) &#123; this.key = key; this.value = value; &#125; public void setKey(K key) &#123; this.key = key; &#125; public void setValue(V value) &#123; this.value = value; &#125; public K getKey() &#123; return key; &#125; public V getValue() &#123; return value; &#125;&#125; è°ƒç”¨æ­¤æ–¹æ³•çš„å®Œæ•´è¯­æ³•ä¸ºï¼š 123Pair&lt;Integer, String&gt; p1 = new Pair&lt;&gt;(1, &quot;apple&quot;);Pair&lt;Integer, String&gt; p2 = new Pair&lt;&gt;(2, &quot;pear&quot;);boolean same = Util.&lt;Integer, String&gt;compare(p1, p2); å·²æ˜¾å¼æä¾›ç±»å‹ï¼Œå¦‚ç²—ä½“æ‰€ç¤ºã€‚é€šå¸¸ï¼Œè¿™å¯ä»¥çœç•¥ï¼Œç¼–è¯‘å™¨å°†æ¨æ–­æ‰€éœ€çš„ç±»å‹ï¼š 123Pair&lt;Integer, String&gt; p1 = new Pair&lt;&gt;(1, &quot;apple&quot;);Pair&lt;Integer, String&gt; p2 = new Pair&lt;&gt;(2, &quot;pear&quot;);boolean same = Util.compare(p1, p2); æ­¤ç‰¹æ€§ç§°ä¸ºç±»å‹æ¨æ–­ï¼Œå…è®¸æ‚¨å°†æ³›å‹æ–¹æ³•ä½œä¸ºæ™®é€šæ–¹æ³•è°ƒç”¨ï¼Œè€Œæ— éœ€åœ¨å°–æ‹¬å·ä¹‹é—´æŒ‡å®šç±»å‹ã€‚è¯¥ä¸»é¢˜å°†åœ¨ä¸‹ä¸€èŠ‚ç±»å‹æ¨æ–­ä¸­è¿›ä¸€æ­¥è®¨è®º. å—é™çš„ç±»å‹å‚æ•°æœ‰æ—¶å¯èƒ½éœ€è¦é™åˆ¶å¯ä»¥ç”¨ä½œå‚æ•°åŒ–ç±»å‹ä¸­çš„ç±»å‹å‚æ•°çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¯¹æ•°å­—è¿›è¡Œæ“ä½œçš„æ–¹æ³•å¯èƒ½åªå¸Œæœ›æ¥å—â€œNumberâ€æˆ–å…¶å­ç±»çš„å®ä¾‹ã€‚è¿™å°±æ˜¯æœ‰ç•Œç±»å‹å‚æ•°çš„ç”¨é€”ã€‚ è¦å£°æ˜æœ‰ç•Œçš„ç±»å‹å‚æ•°ï¼Œè¯·åˆ—å‡ºç±»å‹å‚æ•°çš„åç§°ï¼Œåè·Ÿâ€œextendsâ€å…³é”®å­—ï¼Œåè·Ÿå…¶ä¸Šç•Œï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸ºâ€œNumberâ€ã€‚æ³¨æ„ï¼Œåœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­ï¼Œâ€œextendsâ€åœ¨ä¸€èˆ¬æ„ä¹‰ä¸Šæ˜¯æŒ‡â€œextendsï¼ˆæ‰©å±•ï¼‰â€ï¼ˆå¦‚åœ¨ç±»ä¸­ï¼‰æˆ–â€œimplementsï¼ˆå®ç°ï¼‰â€ï¼ˆåœ¨æ¥å£ä¸­ï¼‰ã€‚ 1234567891011121314151617181920212223public class Box&lt;T&gt; &#123; private T t; public void set(T t) &#123; this.t = t; &#125; public T get() &#123; return t; &#125; public &lt;U extends Number&gt; void inspect(U u)&#123; System.out.println(&quot;T: &quot; + t.getClass().getName()); System.out.println(&quot;U: &quot; + u.getClass().getName()); &#125; public static void main(String[] args) &#123; Box&lt;Integer&gt; integerBox = new Box&lt;Integer&gt;(); integerBox.set(new Integer(10)); integerBox.inspect(&quot;some text&quot;); // error: this is still String! &#125;&#125; é€šè¿‡ä¿®æ”¹æ³›å‹æ–¹æ³•ä»¥åŒ…å«æ­¤æœ‰ç•Œç±»å‹å‚æ•°ï¼Œç¼–è¯‘ç°åœ¨å°†å¤±è´¥ï¼Œå› ä¸ºæˆ‘ä»¬å¯¹â€œinspectâ€çš„è°ƒç”¨ä»ç„¶åŒ…å«â€œStringâ€ï¼š 12345Box.java:21: &lt;U&gt;inspect(U) in Box&lt;java.lang.Integer&gt; cannot be applied to (java.lang.String) integerBox.inspect(&quot;10&quot;); ^1 error é™¤äº†é™åˆ¶å¯ç”¨äºå®ä¾‹åŒ–æ³›å‹ç±»å‹çš„ç±»å‹ä¹‹å¤–ï¼Œæœ‰ç•Œç±»å‹å‚æ•°è¿˜å…è®¸æ‚¨è°ƒç”¨åœ¨è¾¹ç•Œä¸­å®šä¹‰çš„æ–¹æ³•ï¼š 123456789101112public class NaturalNumber&lt;T extends Integer&gt; &#123; private T n; public NaturalNumber(T n) &#123; this.n = n; &#125; public boolean isEven() &#123; return n.intValue() % 2 == 0; &#125; // ...&#125; â€œisEvenâ€æ–¹æ³•é€šè¿‡â€œnâ€è°ƒç”¨åœ¨â€œIntegerâ€ç±»ä¸­å®šä¹‰çš„â€œintValueâ€æ–¹æ³•ã€‚ å¤šä¸ªè¾¹ç•Œå‰é¢çš„ç¤ºä¾‹è¯´æ˜äº†ä½¿ç”¨å…·æœ‰å•ä¸ªè¾¹ç•Œçš„ç±»å‹å‚æ•°ï¼Œä½†ç±»å‹å‚æ•°å¯ä»¥å…·æœ‰å¤šä¸ªè¾¹ç•Œï¼š 1&lt;T extends B1 &amp; B2 &amp; B3&gt; å…·æœ‰å¤šä¸ªè¾¹ç•Œçš„ç±»å‹å˜é‡æ˜¯è¾¹ç•Œä¸­åˆ—å‡ºçš„æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªè¾¹ç•Œæ˜¯ç±»ï¼Œåˆ™å¿…é¡»é¦–å…ˆæŒ‡å®šå®ƒã€‚ä¾‹å¦‚ï¼š 12345Class A &#123; /* ... */ &#125;interface B &#123; /* ... */ &#125;interface C &#123; /* ... */ &#125;class D &lt;T extends A &amp; B &amp; C&gt; &#123; /* ... */ &#125; å¦‚æœæœªé¦–å…ˆæŒ‡å®šç»‘å®šâ€œAâ€ï¼Œåˆ™ä¼šå‡ºç°ç¼–è¯‘æ—¶é”™è¯¯ï¼š 1class D &lt;T extends B &amp; A &amp; C&gt; &#123; /* ... */ &#125; // compile-time error æ³›å‹æ–¹æ³•å’Œæœ‰ç•Œç±»å‹å‚æ•°æœ‰ç•Œç±»å‹å‚æ•°æ˜¯å®ç°é€šç”¨ç®—æ³•çš„å…³é”®ã€‚è€ƒè™‘ä»¥ä¸‹æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è®¡ç®—æ•°ç»„â€œT[]â€ä¸­å¤§äºæŒ‡å®šå…ƒç´ â€œelemâ€çš„å…ƒç´ æ•°ã€‚ 1234567public static &lt;T&gt; int countGreaterThan(T[] anArray, T elem) &#123; int count = 0; for (T e : anArray) if (e &gt; elem) // compiler error ++count; return count;&#125; è¯¥æ–¹æ³•çš„å®ç°å¾ˆç®€å•ï¼Œä½†å®ƒä¸ä¼šç¼–è¯‘ï¼Œå› ä¸ºå¤§äºè¿ç®—ç¬¦ï¼ˆâ€œ&gt;â€ï¼‰ä»…é€‚ç”¨äºåŸºæœ¬ç±»å‹ï¼Œå¦‚â€œshortâ€ã€â€œintâ€ã€â€œdoubleâ€ã€â€œlongâ€ã€â€floatâ€œã€â€byteâ€œå’Œâ€charâ€œã€‚ä¸èƒ½ä½¿ç”¨â€œ&gt;â€è¿ç®—ç¬¦æ¥æ¯”è¾ƒå¯¹è±¡ã€‚è¦è§£å†³æ­¤é—®é¢˜ï¼Œè¯·ä½¿ç”¨ç”±â€œComparable&lt;T&gt;â€æ¥å£é™å®šçš„ç±»å‹å‚æ•°ï¼š 123public interface Comparable&lt;T&gt; &#123; public int compareTo(T o);&#125; ç”Ÿæˆçš„ä»£ç å°†æ˜¯ï¼š 1234567public static &lt;T extends Comparable&lt;T&gt;&gt; int countGreaterThan(T[] anArray, T elem) &#123; int count = 0; for (T e : anArray) if (e.compareTo(elem) &gt; 0) ++count; return count;&#125; æ³›å‹ã€ç»§æ‰¿å’Œå­ç±»å‹æ­£å¦‚æ‚¨å·²ç»çŸ¥é“çš„ï¼Œåªè¦ç±»å‹å…¼å®¹ï¼Œå°±å¯ä»¥å°†ä¸€ç§ç±»å‹çš„å¯¹è±¡åˆ†é…ç»™å¦ä¸€ç§ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å°†â€œæ•´å‹â€åˆ†é…ç»™â€œå¯¹è±¡â€ï¼Œå› ä¸ºâ€œå¯¹è±¡â€æ˜¯â€œæ•´å‹â€çš„è¶…ç±»å‹ä¹‹ä¸€ï¼š 123Object someObject = new Object();Integer someInteger = new Integer(10);someObject = someInteger; // OK åœ¨é¢å‘å¯¹è±¡çš„æœ¯è¯­ä¸­ï¼Œè¿™è¢«ç§°ä¸ºâ€œæ˜¯ä¸€ç§â€å…³ç³»ã€‚ç”±äºâ€œIntegerâ€æ˜¯â€œObjectâ€çš„ç±»å‹ï¼Œå› æ­¤å…è®¸èµ‹å€¼ã€‚ä½†â€œæ•´æ•°â€ä¹Ÿæ˜¯â€œæ•°å­—â€çš„ä¸€ç§ï¼Œå› æ­¤ä»¥ä¸‹ä»£ç ä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼š 1234public void someMethod(Number n) &#123; /* ... */ &#125;someMethod(new Integer(10)); // OKsomeMethod(new Double(10.1)); // OK æ³›å‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æ‚¨å¯ä»¥æ‰§è¡Œæ³›å‹ç±»å‹è°ƒç”¨ï¼Œå°†â€œNumberâ€ä½œä¸ºå…¶ç±»å‹å‚æ•°ä¼ é€’ï¼Œå¦‚æœè¯¥å‚æ•°ä¸â€œNumberâ€å…¼å®¹ï¼Œåˆ™å…è®¸éšåè°ƒç”¨â€œaddâ€ï¼š 123Box&lt;Number&gt; box = new Box&lt;Number&gt;();box.add(new Integer(10)); // OKbox.add(new Double(10.1)); // OK ç°åœ¨è€ƒè™‘ä»¥ä¸‹æ–¹æ³•ï¼š 1public void boxTest(Box&lt;Number&gt; n) &#123; /* ... */ &#125; å®ƒæ¥å—ä»€ä¹ˆç±»å‹çš„å‚æ•°ï¼Ÿé€šè¿‡æŸ¥çœ‹å…¶ç­¾åï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å®ƒæ¥å—ä¸€ä¸ªç±»å‹ä¸ºâ€œBox&lt;Number&gt;â€çš„å‚æ•°ã€‚ä½†è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ˜¯å¦å…è®¸æŒ‰é¢„æœŸä¼ å…¥â€œBox&lt;Integer&gt;â€æˆ–â€œBox&lt;Double&gt;â€ï¼Ÿç­”æ¡ˆæ˜¯â€œå¦â€ï¼Œå› ä¸ºBox&lt;Integer&gt;å’ŒBox&lt;Double&gt;ä¸æ˜¯Box&lt;Number&gt;çš„å­ç±»å‹ã€‚ åœ¨ä½¿ç”¨æ³›å‹ç¼–ç¨‹æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„è¯¯è§£ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªéœ€è¦å­¦ä¹ çš„é‡è¦æ¦‚å¿µã€‚ å°½ç®¡â€œIntegerâ€æ˜¯â€œNumberâ€çš„å­ç±»å‹ï¼Œä½†â€œBox&lt;Integer&gt;â€ä¸æ˜¯â€œBox&lt;Number&gt;â€çš„å­å‹ã€‚ Note: ç»™å®šä¸¤ä¸ªå…·ä½“ç±»å‹â€œAâ€å’Œâ€œBâ€ï¼ˆä¾‹å¦‚ï¼Œâ€œNumberâ€å’Œâ€œIntegerâ€ï¼‰ï¼Œæ— è®ºâ€œAâ€ä¸â€œBâ€æ˜¯å¦ç›¸å…³ï¼Œâ€œMyClass&lt;A&gt;â€ä¸â€œMyClass&lt;B&gt;â€éƒ½æ²¡æœ‰å…³ç³»ã€‚â€œMyClass&lt;A&gt;â€å’Œâ€œMyClass&lt;B&gt;â€çš„å…±åŒçˆ¶çº§æ˜¯â€œObjectâ€ã€‚ æœ‰å…³åœ¨ç±»å‹å‚æ•°ç›¸å…³æ—¶å¦‚ä½•åœ¨ä¸¤ä¸ªæ³›å‹ç±»ä¹‹é—´åˆ›å»ºç±»ä¼¼å­ç±»å‹çš„å…³ç³»çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…Wildcards and Subyping. æ³›å‹ç±»å’Œå­ç±»å‹æ‚¨å¯ä»¥é€šè¿‡æ‰©å±•æˆ–å®ç°æ³›å‹ç±»æˆ–æ¥å£æ¥å¯¹å…¶è¿›è¡Œå­ç±»å‹åŒ–ã€‚ä¸€ä¸ªç±»æˆ–æ¥å£çš„ç±»å‹å‚æ•°ä¸å¦ä¸€ä¸ªç±»çš„ç±»å‹å‚æ•°ä¹‹é—´çš„å…³ç³»ç”±â€œextendsâ€å’Œâ€œimplementsâ€å­å¥ç¡®å®šã€‚ ä»¥â€œCollectionsâ€ç±»ä¸ºä¾‹ï¼Œâ€œArrayList&lt;E&gt;â€å®ç°äº†â€œList&lt;E&gt;â€˜â€ï¼Œè€Œâ€œList&lt;E&gt;â€æ‰©å±•äº†â€œCollection&lt;E&gt;â€ã€‚å› æ­¤ï¼ŒArrayList&lt;String&gt;æ˜¯List&lt;String&gt;çš„å­ç±»å‹ï¼Œä¹Ÿæ˜¯Collection&lt;String&gt;çš„å­ç±»å‹ã€‚åªè¦ä¸æ”¹å˜ç±»å‹å‚æ•°ï¼Œç±»å‹ä¹‹é—´çš„å­ç±»å‹å…³ç³»å°±ä¼šä¿æŒä¸å˜ã€‚ ç¤ºä¾‹â€œé›†åˆâ€å±‚æ¬¡ç»“æ„ ç°åœ¨å‡è®¾æˆ‘ä»¬è¦å®šä¹‰è‡ªå·±çš„åˆ—è¡¨æ¥å£â€œPayloadListâ€ï¼Œå®ƒå°†æ³›å‹ç±»å‹â€œPâ€çš„å¯é€‰å€¼ä¸æ¯ä¸ªå…ƒç´ ç›¸å…³è”ã€‚å…¶å£°æ˜å¯èƒ½å¦‚ä¸‹ï¼š 1234interface PayloadList&lt;E,P&gt; extends List&lt;E&gt; &#123; void setPayload(int index, P val); ...&#125; â€œPayloadListâ€çš„ä»¥ä¸‹å‚æ•°åŒ–æ˜¯â€œListï¼œStringï¼â€çš„å­ç±»å‹ï¼š PayloadList&lt;String,String&gt; PayloadList&lt;String,Integer&gt; PayloadList&lt;String,Exception&gt; ç¤ºä¾‹â€œPayloadListâ€å±‚æ¬¡ç»“æ„ ç±»å‹æ¨æ–­ç±»å‹æ¨æ–­æ˜¯Javaç¼–è¯‘å™¨æŸ¥çœ‹æ¯ä¸ªæ–¹æ³•è°ƒç”¨å’Œç›¸åº”å£°æ˜çš„èƒ½åŠ›ï¼Œä»¥ç¡®å®šä½¿è°ƒç”¨é€‚ç”¨çš„ç±»å‹å‚æ•°ã€‚æ¨ç†ç®—æ³•ç¡®å®šå‚æ•°çš„ç±»å‹ï¼Œä»¥åŠåˆ†é…æˆ–è¿”å›ç»“æœçš„ç±»å‹ï¼ˆå¦‚æœå¯ç”¨ï¼‰ã€‚æœ€åï¼Œæ¨ç†ç®—æ³•è¯•å›¾æ‰¾åˆ°é€‚ç”¨äºæ‰€æœ‰å‚æ•°çš„â€œæœ€å…·ä½“â€ç±»å‹ã€‚ ä¸ºäº†è¯´æ˜æœ€åä¸€ç‚¹ï¼Œåœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæ¨æ–­ç¡®å®šä¼ é€’ç»™â€œpickâ€æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°çš„ç±»å‹ä¸ºâ€œSerializableâ€ï¼š 12static &lt;T&gt; T pick(T a1, T a2) &#123; return a2; &#125;Serializable s = pick(&quot;d&quot;, new ArrayList&lt;String&gt;()); ç±»å‹æ¨ç†å’Œæ³›å‹æ–¹æ³•é€šç”¨æ–¹æ³•å‘æ‚¨ä»‹ç»äº†ç±»å‹æ¨æ–­ï¼Œå®ƒä½¿æ‚¨èƒ½å¤Ÿåƒè°ƒç”¨æ™®é€šæ–¹æ³•ä¸€æ ·è°ƒç”¨æ³›å‹æ–¹æ³•ï¼Œè€Œæ— éœ€åœ¨å°–æ‹¬å·ä¹‹é—´æŒ‡å®šç±»å‹ã€‚è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹BoxDemoï¼Œè¿™éœ€è¦Boxç±»åˆ«ï¼š 12345678910111213141516171819202122232425262728public class BoxDemo &#123; public static &lt;U&gt; void addBox(U u, java.util.List&lt;Box&lt;U&gt;&gt; boxes) &#123; Box&lt;U&gt; box = new Box&lt;&gt;(); box.set(u); boxes.add(box); &#125; public static &lt;U&gt; void outputBoxes(java.util.List&lt;Box&lt;U&gt;&gt; boxes) &#123; int counter = 0; for (Box&lt;U&gt; box: boxes) &#123; U boxContents = box.get(); System.out.println(&quot;Box #&quot; + counter + &quot; contains [&quot; + boxContents.toString() + &quot;]&quot;); counter++; &#125; &#125; public static void main(String[] args) &#123; java.util.ArrayList&lt;Box&lt;Integer&gt;&gt; listOfIntegerBoxes = new java.util.ArrayList&lt;&gt;(); BoxDemo.&lt;Integer&gt;addBox(Integer.valueOf(10), listOfIntegerBoxes); BoxDemo.addBox(Integer.valueOf(20), listOfIntegerBoxes); BoxDemo.addBox(Integer.valueOf(30), listOfIntegerBoxes); BoxDemo.outputBoxes(listOfIntegerBoxes); &#125;&#125; ä»¥ä¸‹æ˜¯æœ¬ç¤ºä¾‹çš„è¾“å‡ºï¼š 123Box #0 contains [10]Box #1 contains [20]Box #2 contains [30] æ³›å‹æ–¹æ³•â€œaddBoxâ€å®šä¹‰äº†ä¸€ä¸ªåä¸ºâ€œUâ€çš„ç±»å‹å‚æ•°ã€‚é€šå¸¸ï¼ŒJavaç¼–è¯‘å™¨å¯ä»¥æ¨æ–­æ³›å‹æ–¹æ³•è°ƒç”¨çš„ç±»å‹å‚æ•°ã€‚å› æ­¤ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨ä¸å¿…æŒ‡å®šå®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œè¦è°ƒç”¨æ³›å‹æ–¹æ³•â€œaddBoxâ€ï¼Œå¯ä»¥ä½¿ç”¨ç±»å‹è§è¯æŒ‡å®šç±»å‹å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1BoxDemo.&lt;Integer&gt;addBox(Integer.valueOf(10), listOfIntegerBoxes); æˆ–è€…ï¼Œå¦‚æœçœç•¥ç±»å‹è§è¯ï¼ŒJavaç¼–è¯‘å™¨ä¼šï¼ˆä»æ–¹æ³•çš„å‚æ•°ï¼‰è‡ªåŠ¨æ¨æ–­ç±»å‹å‚æ•°ä¸ºâ€œIntegerâ€ï¼š 1BoxDemo.addBox(Integer.valueOf(20), listOfIntegerBoxes); æ³›å‹ç±»çš„ç±»å‹æ¨ç†å’Œå®ä¾‹åŒ–åªè¦ç¼–è¯‘å™¨å¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æ¨æ–­ç±»å‹å‚æ•°ï¼Œå°±å¯ä»¥ç”¨ä¸€ç»„ç©ºçš„ç±»å‹å‚æ•°ï¼ˆ&lt;&gt;ï¼‰æ›¿æ¢è°ƒç”¨æ³›å‹ç±»æ„é€ å‡½æ•°æ‰€éœ€çš„ç±»å‹å‚æ•°ã€‚è¿™å¯¹å°–æ‹¬å·éæ­£å¼åœ°ç§°ä¸ºè±å½¢. ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹å˜é‡å£°æ˜ï¼š 1Map&lt;String, List&lt;String&gt;&gt; myMap = new HashMap&lt;String, List&lt;String&gt;&gt;(); æ‚¨å¯ä»¥ç”¨ä¸€ç»„ç©ºçš„ç±»å‹å‚æ•°ï¼ˆ&lt;&gt;ï¼‰æ›¿æ¢æ„é€ å‡½æ•°çš„å‚æ•°åŒ–ç±»å‹ï¼š 1Map&lt;String, List&lt;String&gt;&gt; myMap = new HashMap&lt;&gt;(); æ³¨æ„ï¼Œè¦åœ¨æ³›å‹ç±»å®ä¾‹åŒ–æœŸé—´åˆ©ç”¨ç±»å‹æ¨æ–­ï¼Œå¿…é¡»ä½¿ç”¨è±å½¢ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œç¼–è¯‘å™¨ç”Ÿæˆæœªæ£€æŸ¥çš„è½¬æ¢è­¦å‘Šï¼Œå› ä¸ºâ€œHashMap()â€æ„é€ å‡½æ•°å¼•ç”¨çš„æ˜¯â€œHashMapâ€åŸå§‹ç±»å‹ï¼Œè€Œä¸æ˜¯â€œMap&lt;Stringï¼ŒList&lt;String&gt;&gt;â€ç±»å‹ï¼š 1Map&lt;String, List&lt;String&gt;&gt; myMap = new HashMap(); // unchecked conversion warning æ³›å‹ç±»å’Œéæ³›å‹ç±»çš„ç±»å‹æ¨ç†å’Œæ³›å‹æ„é€ å‡½æ•°æ³¨æ„ï¼Œæ„é€ å‡½æ•°åœ¨æ³›å‹ç±»å’Œéæ³›å‹ç±»ä¸­éƒ½å¯ä»¥æ˜¯æ³›å‹çš„ï¼ˆæ¢å¥è¯è¯´ï¼Œå£°æ˜è‡ªå·±çš„å½¢å¼ç±»å‹å‚æ•°ï¼‰ã€‚è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š 12345class MyClass&lt;X&gt; &#123; &lt;T&gt; MyClass(T t) &#123; // ... &#125;&#125; è€ƒè™‘ç±»â€œMyClassâ€çš„ä»¥ä¸‹å®ä¾‹åŒ–ï¼š 1new MyClass&lt;Integer&gt;(&quot;&quot;) æ­¤è¯­å¥åˆ›å»ºå‚æ•°åŒ–ç±»å‹â€œMyClass&lt;Integer&gt;â€çš„å®ä¾‹ï¼›è¯¥è¯­å¥æ˜¾å¼æŒ‡å®šæ³›å‹ç±»â€œMyClass&lt;X&gt;â€çš„å½¢å¼ç±»å‹å‚æ•°â€œXâ€çš„ç±»å‹â€œIntegerâ€ã€‚è¯·æ³¨æ„ï¼Œæ­¤æ³›å‹ç±»çš„æ„é€ å‡½æ•°åŒ…å«ä¸€ä¸ªå½¢å¼ç±»å‹å‚æ•°â€œTâ€ã€‚ç¼–è¯‘å™¨æ¨æ–­æ­¤æ³›å‹ç±»çš„æ„é€ å‡½æ•°çš„å½¢å¼ç±»å‹å‚æ•°â€œTâ€çš„ç±»å‹â€œStringâ€ï¼ˆå› ä¸ºæ­¤æ„é€ å‡½æ•°çš„å®é™…å‚æ•°æ˜¯â€œStringâ€å¯¹è±¡ï¼‰ã€‚ Java SE 7ä¹‹å‰ç‰ˆæœ¬çš„ç¼–è¯‘å™¨èƒ½å¤Ÿæ¨æ–­æ³›å‹æ„é€ å‡½æ•°çš„å®é™…ç±»å‹å‚æ•°ï¼Œç±»ä¼¼äºæ³›å‹æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨ä½¿ç”¨è±å½¢ï¼ˆ&lt;&gt;ï¼‰ï¼ŒJava SE 7å’Œæ›´é«˜ç‰ˆæœ¬ä¸­çš„ç¼–è¯‘å™¨å¯ä»¥æ¨æ–­æ­£åœ¨å®ä¾‹åŒ–çš„æ³›å‹ç±»çš„å®é™…ç±»å‹å‚æ•°ã€‚è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š 1MyClass&lt;Integer&gt; myObject = new MyClass&lt;&gt;(&quot;&quot;); åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œç¼–è¯‘å™¨æ¨æ–­æ³›å‹ç±»â€œMyClass&lt;X&gt;â€çš„å½¢å¼ç±»å‹å‚æ•°â€œXâ€çš„ç±»å‹â€œIntegerâ€ã€‚å®ƒä¸ºè¯¥æ³›å‹ç±»çš„æ„é€ å‡½æ•°çš„å½¢å¼ç±»å‹å‚æ•°â€œTâ€æ¨æ–­ç±»å‹â€œStringâ€ã€‚ Note: éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¨ç†ç®—æ³•ä»…ä½¿ç”¨è°ƒç”¨å‚æ•°ã€ç›®æ ‡ç±»å‹ä»¥åŠå¯èƒ½çš„æ˜æ˜¾é¢„æœŸè¿”å›ç±»å‹æ¥æ¨æ–­ç±»å‹ã€‚æ¨ç†ç®—æ³•ä¸ä½¿ç”¨ç¨‹åºåæœŸçš„ç»“æœã€‚ ç›®æ ‡ç±»å‹Javaç¼–è¯‘å™¨åˆ©ç”¨ç›®æ ‡ç±»å‹æ¥æ¨æ–­æ³›å‹æ–¹æ³•è°ƒç”¨çš„ç±»å‹å‚æ•°ã€‚è¡¨è¾¾å¼çš„ç›®æ ‡ç±»å‹æ˜¯Javaç¼–è¯‘å™¨æœŸæœ›çš„æ•°æ®ç±»å‹ï¼Œå…·ä½“å–å†³äºè¡¨è¾¾å¼å‡ºç°çš„ä½ç½®ã€‚è€ƒè™‘æ–¹æ³•Collections.emptyListï¼Œå£°æ˜å¦‚ä¸‹ï¼š 1static &lt;T&gt; List&lt;T&gt; emptyList(); è€ƒè™‘ä»¥ä¸‹èµ‹å€¼è¯­å¥ï¼š 1List&lt;String&gt; listOne = Collections.emptyList(); æ­¤è¯­å¥éœ€è¦â€œList&lt;String&gt;â€çš„å®ä¾‹ï¼›æ­¤æ•°æ®ç±»å‹æ˜¯ç›®æ ‡ç±»å‹ã€‚ç”±äºæ–¹æ³•â€œemptyListâ€è¿”å›ç±»å‹ä¸ºâ€œList&lt;T&gt;â€çš„å€¼ï¼Œç¼–è¯‘å™¨æ¨æ–­ç±»å‹å‚æ•°â€œTâ€å¿…é¡»æ˜¯å€¼â€œStringâ€ã€‚è¿™åœ¨Java SE 7å’Œ8ä¸­éƒ½é€‚ç”¨ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç±»å‹è§è¯å¹¶æŒ‡å®šâ€œTâ€çš„å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1List&lt;String&gt; listOne = Collections.&lt;String&gt;emptyList(); ç„¶è€Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸æ˜¯å¿…è¦çš„ã€‚ä½†åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œè¿™æ˜¯å¿…è¦çš„ã€‚è€ƒè™‘ä»¥ä¸‹æ–¹æ³•ï¼š 123void processStringList(List&lt;String&gt; stringList) &#123; // process stringList&#125; å‡è®¾æ‚¨è¦ä½¿ç”¨ç©ºåˆ—è¡¨è°ƒç”¨æ–¹æ³•â€œprocessStringListâ€ã€‚åœ¨Java SE 7ä¸­ï¼Œä»¥ä¸‹è¯­å¥ä¸ä¼šç¼–è¯‘ï¼š 1processStringList(Collections.emptyList()); The Java SE 7 compiler generates an error message similar to the following: 1List&lt;Object&gt; cannot be converted to List&lt;String&gt; ç¼–è¯‘å™¨éœ€è¦ç±»å‹å‚æ•°â€œTâ€çš„å€¼ï¼Œå› æ­¤å®ƒä»¥å€¼â€œObjectâ€å¼€å¤´ã€‚å› æ­¤ï¼Œè°ƒç”¨â€œé›†åˆâ€ã€‚emptyListè¿”å›ç±»ä¸ºList&lt;Object&gt;çš„å€¼ï¼Œè¯¥å€¼ä¸æ–¹æ³•processStringListä¸å…¼å®¹ã€‚å› æ­¤ï¼Œåœ¨Java SE 7ä¸­ï¼Œå¿…é¡»æŒ‰å¦‚ä¸‹æ–¹å¼æŒ‡å®šç±»å‹å‚æ•°çš„å€¼ï¼š 1processStringList(Collections.&lt;String&gt;emptyList()); è¿™åœ¨JavaSE8ä¸­ä¸å†æ˜¯å¿…è¦çš„ã€‚ç›®æ ‡ç±»å‹çš„æ¦‚å¿µå·²ç»æ‰©å±•åˆ°åŒ…æ‹¬æ–¹æ³•å‚æ•°ï¼Œä¾‹å¦‚æ–¹æ³•â€œprocessStringListâ€çš„å‚æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€œprocessStringListâ€éœ€è¦ç±»å‹ä¸ºâ€œList&lt;String&gt;â€çš„å‚æ•°ã€‚æ–¹æ³•Collectionsã€‚emptyListè¿”å›å€¼List&lt;T&gt;ï¼Œå› æ­¤ä½¿ç”¨ç›®æ ‡ç±»å‹List&lt;String&gt;ï¼Œç¼–è¯‘å™¨æ¨æ–­ç±»å‹å‚æ•°Tçš„å€¼ä¸ºStringã€‚å› æ­¤ï¼Œåœ¨Java SE 8ä¸­ï¼Œç¼–è¯‘ä»¥ä¸‹è¯­å¥ï¼š 1processStringList(Collections.emptyList()); See Target Typing in Lambda Expressions for more information. é€šé…ç¬¦åœ¨é€šç”¨ä»£ç ä¸­ï¼Œé—®å·ï¼ˆï¼Ÿï¼‰ï¼Œç§°ä¸ºé€šé…ç¬¦çš„é€šé…ç¬¦è¡¨ç¤ºæœªçŸ¥ç±»å‹ã€‚é€šé…ç¬¦å¯ç”¨äºå¤šç§æƒ…å†µï¼šä½œä¸ºå‚æ•°ã€å­—æ®µæˆ–å±€éƒ¨å˜é‡çš„ç±»å‹ï¼›æœ‰æ—¶ä½œä¸ºè¿”å›ç±»å‹ï¼ˆå°½ç®¡æ›´å…·ä½“ä¸€äº›æ˜¯æ›´å¥½çš„ç¼–ç¨‹å®è·µï¼‰ã€‚é€šé…ç¬¦æ°¸è¿œä¸ä¼šç”¨ä½œæ³›å‹æ–¹æ³•è°ƒç”¨ã€æ³›å‹ç±»å®ä¾‹åˆ›å»ºæˆ–è¶…ç±»å‹çš„ç±»å‹å‚æ•°ã€‚ ä»¥ä¸‹éƒ¨åˆ†å°†æ›´è¯¦ç»†åœ°è®¨è®ºé€šé…ç¬¦ï¼ŒåŒ…æ‹¬ä¸Šé™é€šé…ç¬¦ã€ä¸‹é™é€šé…ç¬¦å’Œé€šé…ç¬¦æ•è·ã€‚ ä¸Šé™é€šé…ç¬¦å¯ä»¥ä½¿ç”¨ä¸Šé™é€šé…ç¬¦æ”¾å®½å¯¹å˜é‡çš„é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨è¦ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€‚ç”¨äºList&lt;Integer&gt;ã€List&lt;Double&gt;ã€å’ŒList&lt;Number&gt;ï¼›å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸Šé™é€šé…ç¬¦æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ è¦å£°æ˜ä¸Šé™é€šé…ç¬¦ï¼Œè¯·ä½¿ç”¨é€šé…ç¬¦ï¼ˆâ€œ?â€ï¼‰ï¼Œåè·Ÿâ€œextendsâ€å…³é”®å­—ï¼Œåè·Ÿå…¶ä¸Šé™ã€‚æ³¨æ„ï¼Œåœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­ï¼Œâ€œextendsâ€åœ¨ä¸€èˆ¬æ„ä¹‰ä¸Šæ˜¯æŒ‡â€œextendsï¼ˆæ‰©å±•ï¼‰â€ï¼ˆå¦‚åœ¨ç±»ä¸­ï¼‰æˆ–â€œimplementsï¼ˆå®ç°ï¼‰â€ï¼ˆåœ¨æ¥å£ä¸­ï¼‰ã€‚ è¦ç¼–å†™é€‚ç”¨äºâ€œNumberâ€åˆ—è¡¨å’Œâ€œNumberâ€å­ç±»å‹ï¼ˆå¦‚â€œIntegerâ€ã€â€œDoubleâ€å’Œâ€œFloatâ€ï¼‰çš„æ–¹æ³•ï¼Œéœ€è¦æŒ‡å®šâ€œList&lt;ï¼Ÿextends Number&gt;ã€‚æœ¯è¯­â€œList&lt;Number&gt;â€æ¯”â€œList&lt;? extends Number&gt;ï¼Œå› ä¸ºå‰è€…ä»…åŒ¹é…ç±»å‹ä¸ºâ€™Numberâ€™çš„åˆ—è¡¨ï¼Œè€Œåè€…åŒ¹é…ç±»å‹ä¸ºNumberæˆ–å…¶ä»»ä½•å­ç±»çš„åˆ—è¡¨ã€‚ è€ƒè™‘ä»¥ä¸‹â€œprocessâ€æ–¹æ³•ï¼š 1public static void process(List&lt;? extends Foo&gt; list) &#123; /* ... */ &#125; ä¸Šé™é€šé…ç¬¦&lt;ï¼Ÿextends Foo&gt;ï¼Œå…¶ä¸­Fooæ˜¯ä»»ä½•ç±»å‹ï¼ŒåŒ¹é…Fooå’ŒFooçš„ä»»ä½•å­ç±»å‹ã€‚â€œprocessâ€æ–¹æ³•å¯ä»¥è®¿é—®ç±»å‹ä¸ºâ€œFooâ€çš„åˆ—è¡¨å…ƒç´ ï¼š 12345public static void process(List&lt;? extends Foo&gt; list) &#123; for (Foo elem : list) &#123; // ... &#125;&#125; åœ¨â€œforeachâ€å­å¥ä¸­ï¼Œâ€œelemâ€å˜é‡è¿­ä»£åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚â€œFooâ€ç±»ä¸­å®šä¹‰çš„ä»»ä½•æ–¹æ³•ç°åœ¨éƒ½å¯ä»¥åœ¨â€œelemâ€ä¸Šä½¿ç”¨ã€‚ â€œsumOfListâ€æ–¹æ³•è¿”å›åˆ—è¡¨ä¸­æ•°å­—çš„æ€»å’Œï¼š 123456public static double sumOfList(List&lt;? extends Number&gt; list) &#123; double s = 0.0; for (Number n : list) s += n.doubleValue(); return s;&#125; ä»¥ä¸‹ä»£ç ä½¿ç”¨â€œIntegerâ€å¯¹è±¡åˆ—è¡¨æ‰“å°â€œsum&#x3D;6.0â€ï¼š 12List&lt;Integer&gt; li = Arrays.asList(1, 2, 3);System.out.println(&quot;sum = &quot; + sumOfList(li)); â€œDoubleâ€å€¼åˆ—è¡¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„â€œsumOfListâ€æ–¹æ³•ã€‚ä»¥ä¸‹ä»£ç æ˜¾ç¤ºâ€œsum&#x3D;7.0â€ï¼š 12List&lt;Double&gt; ld = Arrays.asList(1.2, 2.3, 3.5);System.out.println(&quot;sum = &quot; + sumOfList(ld)); æ— è¾¹ç•Œé€šé…ç¬¦ä½¿ç”¨é€šé…ç¬¦ï¼ˆâ€œï¼Ÿâ€ï¼‰æŒ‡å®šæ— ç•Œé€šé…ç¬¦ç±»å‹, ä¾‹å¦‚ï¼Œâ€œList&lt;?&gt;â€ã€‚è¿™ç§°ä¸ºæœªçŸ¥ç±»å‹åˆ—è¡¨ã€‚åœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ— ç•Œé€šé…ç¬¦æ˜¯ä¸€ç§æœ‰ç”¨çš„æ–¹æ³•ï¼š å¦‚æœæ‚¨æ­£åœ¨ç¼–å†™å¯ä»¥ä½¿ç”¨â€œObjectâ€ç±»ä¸­æä¾›çš„åŠŸèƒ½å®ç°çš„æ–¹æ³•ã€‚ å½“ä»£ç åœ¨æ³›å‹ç±»ä¸­ä½¿ç”¨ä¸ä¾èµ–äºç±»å‹å‚æ•°çš„æ–¹æ³•æ—¶ã€‚ä¾‹å¦‚ï¼ŒList.sizeæˆ–List.clearã€‚äº‹å®ä¸Šï¼Œâ€œClass&lt;?&gt;â€å› ä¸ºâ€œClass&lt;T&gt;â€ä¸­çš„å¤§å¤šæ•°æ–¹æ³•éƒ½ä¸ä¾èµ–äºâ€œTâ€ã€‚ è€ƒè™‘ä»¥ä¸‹æ–¹æ³•â€œprintListâ€ï¼š 12345public static void printList(List&lt;Object&gt; list) &#123; for (Object elem : list) System.out.println(elem + &quot; &quot;); System.out.println();&#125; â€œprintListâ€çš„ç›®æ ‡æ˜¯æ‰“å°ä»»ä½•ç±»å‹çš„åˆ—è¡¨ï¼Œä½†å®ƒæ— æ³•å®ç°è¿™ä¸€ç›®æ ‡â€”â€”å®ƒåªæ‰“å°â€œObjectâ€å®ä¾‹çš„åˆ—è¡¨ï¼›å®ƒæ— æ³•æ‰“å°â€œList&lt;Integer&gt;â€ã€â€œList&lt;String&gt;â€ã€â€˜List&lt;Double&gt;â€ç­‰ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯â€œList&lt;Object&gt;â€çš„å­ç±»å‹ã€‚è¦ç¼–å†™é€šç”¨çš„â€œprintListâ€æ–¹æ³•ï¼Œè¯·ä½¿ç”¨â€œList&lt;?&gt;â€ï¼š 12345public static void printList(List&lt;?&gt; list) &#123; for (Object elem: list) System.out.print(elem + &quot; &quot;); System.out.println();&#125; å› ä¸ºå¯¹äºä»»ä½•å…·ä½“ç±»å‹â€œAâ€ï¼Œâ€œList&lt;A&gt;â€æ˜¯â€œList&lt;?&gt;â€çš„å­ç±»å‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨â€œprintListâ€æ‰“å°ä»»ä½•ç±»å‹çš„åˆ—è¡¨ï¼š 1234List&lt;Integer&gt; li = Arrays.asList(1, 2, 3);List&lt;String&gt; ls = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);printList(li);printList(ls); Note: [Arrays.asList](https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList-Tã€ ..-)æ–¹æ³•åœ¨æœ¬è¯¾ç¨‹çš„ç¤ºä¾‹ä¸­ä½¿ç”¨ã€‚æ­¤é™æ€å·¥å‚æ–¹æ³•è½¬æ¢æŒ‡å®šçš„æ•°ç»„å¹¶è¿”å›å›ºå®šå¤§å°çš„åˆ—è¡¨ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒList&lt;Object&gt;å’ŒList&lt;?&gt;ä¸ä¸€æ ·ã€‚æ‚¨å¯ä»¥å°†â€œObjectâ€æˆ–â€œObjectâ€çš„ä»»ä½•å­ç±»å‹æ’å…¥åˆ°â€œList&lt;Object&gt;â€ä¸­ã€‚ä½†åªèƒ½å°†â€œnullâ€æ’å…¥åˆ°â€œList&lt;?&gt;â€ä¸­ã€‚é€šé…ç¬¦ä½¿ç”¨æŒ‡å—éƒ¨åˆ†æä¾›äº†æœ‰å…³å¦‚ä½•ç¡®å®šåœ¨ç»™å®šæƒ…å†µä¸‹åº”ä½¿ç”¨å“ªç§é€šé…ç¬¦ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰çš„æ›´å¤šä¿¡æ¯ã€‚ ä¸‹é™é€šé…ç¬¦ä¸Šé™é€šé…ç¬¦éƒ¨åˆ†æ˜¾ç¤ºäº†ä¸€ä¸ªä¸Šç•Œé€šé…ç¬¦å°†æœªçŸ¥ç±»å‹é™åˆ¶ä¸ºç‰¹å®šç±»å‹æˆ–è¯¥ç±»å‹çš„å­ç±»å‹ï¼Œå¹¶ä½¿ç”¨â€œextendsâ€å…³é”®å­—è¡¨ç¤ºã€‚ ä»¥ç±»ä¼¼çš„æ–¹å¼ï¼Œä¸‹é™é€šé…ç¬¦å°†æœªçŸ¥ç±»å‹é™åˆ¶ä¸ºç‰¹å®šç±»å‹æˆ–è¯¥ç±»å‹çš„è¶…çº§ç±»å‹ã€‚ ä¸‹é™é€šé…ç¬¦ä½¿ç”¨é€šé…ç¬¦ï¼ˆâ€œï¼Ÿâ€ï¼‰è¡¨ç¤ºï¼Œåè·Ÿâ€œsuperâ€å…³é”®å­—ï¼Œåè·Ÿå…¶ä¸‹é™ï¼š &lt;? super A&gt;.ã€‚ Note: å¯ä»¥ä¸ºé€šé…ç¬¦æŒ‡å®šä¸Šé™ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸‹é™ï¼Œä½†ä¸èƒ½åŒæ—¶æŒ‡å®šä¸¤è€…ã€‚ å‡è®¾æ‚¨è¦ç¼–å†™ä¸€ä¸ªå°†â€œIntegerâ€å¯¹è±¡æ”¾å…¥åˆ—è¡¨çš„æ–¹æ³•ã€‚ä¸ºäº†æœ€å¤§é™åº¦åœ°æé«˜çµæ´»æ€§ï¼Œæ‚¨å¸Œæœ›è¯¥æ–¹æ³•å¯ä»¥å¤„ç†â€œList&lt;Integer&gt;â€ã€â€œList&lt;Number&gt;â€å’Œâ€œList&lt;Object&gt;â€â€”ä»»ä½•å¯ä»¥ä¿å­˜â€œIntegerâ€å€¼çš„å¯¹è±¡ã€‚ è¦ç¼–å†™é€‚ç”¨äºâ€œæ•´å‹â€åˆ—è¡¨å’Œâ€œæ•´å‹â€è¶…ç±»å‹ï¼ˆå¦‚â€œæ•´å‹â€ã€â€œæ•°å­—â€å’Œâ€œå¯¹è±¡â€ï¼‰çš„æ–¹æ³•ï¼Œéœ€è¦æŒ‡å®šList&lt;? super Integer&gt;ã€‚æœ¯è¯­List&lt;Integer&gt;æ¯”List&lt;ï¼Ÿsuper Integer&gt;ï¼Œå› ä¸ºå‰è€…ä»…åŒ¹é…â€œIntegerâ€ç±»å‹çš„åˆ—è¡¨ï¼Œè€Œåè€…åŒ¹é…â€œIntegerâ€™â€è¶…ç±»å‹çš„ä»»ä½•ç±»å‹çš„åˆ—è¡¨ã€‚ ä»¥ä¸‹ä»£ç å°†æ•°å­—1åˆ°10æ·»åŠ åˆ°åˆ—è¡¨æœ«å°¾ï¼š 12345public static void addNumbers(List&lt;? super Integer&gt; list) &#123; for (int i = 1; i &lt;= 10; i++) &#123; list.add(i); &#125;&#125; é€šé…ç¬¦ä½¿ç”¨æŒ‡å—æœ¬èŠ‚æä¾›äº†ä½•æ—¶ä½¿ç”¨ä¸Šé™é€šé…ç¬¦å’Œä½•æ—¶ä½¿ç”¨ä¸‹é™é€šé…ç¬¦çš„æŒ‡å¯¼ã€‚ é€šé…ç¬¦å’Œå­ç±»å‹å¦‚æ³›å‹ã€ç»§æ‰¿å’Œå­ç±»å‹ä¸­æ‰€è¿°ï¼Œæ³›å‹ç±»æˆ–æ¥å£å¹¶ä¸ç›¸å…³ï¼Œå› ä¸ºå®ƒä»¬çš„ç±»å‹ä¹‹é—´å­˜åœ¨å…³ç³»ã€‚ ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é€šé…ç¬¦æ¥åˆ›å»ºæ³›å‹ç±»æˆ–æ¥å£ä¹‹é—´çš„å…³ç³»ã€‚ ç»™å®šä»¥ä¸‹ä¸¤ä¸ªå¸¸è§„ï¼ˆéæ³›å‹ï¼‰ç±»ï¼š 12class A &#123; /* ... */ &#125;class B extends A &#123; /* ... */ &#125; ç¼–å†™ä»¥ä¸‹ä»£ç æ˜¯åˆç†çš„ï¼š 12B b = new B();A a = b; æ­¤ç¤ºä¾‹æ˜¾ç¤ºï¼Œå¸¸è§„ç±»çš„ç»§æ‰¿éµå¾ªå­ç±»å‹åŒ–è§„åˆ™ï¼šå¦‚æœBæ‰©å±•äº†aï¼Œåˆ™ç±»Bæ˜¯ç±»açš„å­ç±»å‹ã€‚æ­¤è§„åˆ™ä¸é€‚ç”¨äºæ³›å‹ç±»å‹ï¼š 12List&lt;B&gt; lb = new ArrayList&lt;&gt;();List&lt;A&gt; la = lb; // compile-time error å‡å®šâ€œæ•´æ•°â€æ˜¯â€œæ•°å­—â€çš„å­ç±»å‹ï¼Œé‚£ä¹ˆâ€œList&lt;Number&gt;â€å’Œâ€œList&lt;Integer&gt;â€ä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ å¸¸è§çš„çˆ¶é¡¹æ˜¯â€œList&lt;?&gt;â€ã€‚ è™½ç„¶â€œæ•´æ•°â€æ˜¯â€œæ•°å­—â€çš„å­ç±»å‹ï¼Œä½†â€œList&lt;Integer&gt;â€ä¸æ˜¯â€œList&lt;Number&gt;â€çš„å­å‹ï¼Œäº‹å®ä¸Šï¼Œè¿™ä¸¤ç§ç±»å‹å¹¶ä¸ç›¸å…³ã€‚â€œList&lt;Number&gt;â€å’Œâ€œList&lt;Integer&gt;â€çš„å…±åŒçˆ¶çº§æ˜¯â€œList&lt;?&gt;â€ã€‚ ä¸ºäº†åœ¨è¿™äº›ç±»ä¹‹é—´åˆ›å»ºå…³ç³»ï¼Œä»¥ä¾¿ä»£ç å¯ä»¥é€šè¿‡â€œList&lt;Integer&gt;â€å…ƒç´ è®¿é—®â€œNumberâ€æ–¹æ³•ï¼Œè¯·ä½¿ç”¨ä¸Šé™é€šé…ç¬¦ï¼š 12List&lt;? extends Integer&gt; intList = new ArrayList&lt;&gt;();List&lt;? extends Number&gt; numList = intList; // OK. List&lt;? extends Integer&gt; is a subtype of List&lt;? extends Number&gt; å› ä¸ºâ€œIntegerâ€æ˜¯â€œNumberâ€çš„å­ç±»å‹ï¼Œè€Œâ€œnumListâ€æ˜¯â€œNumberâ€å¯¹è±¡çš„åˆ—è¡¨ï¼Œæ‰€ä»¥ç°åœ¨åœ¨â€œintListâ€ï¼ˆâ€œæ•´å‹â€å¯¹è±¡åˆ—è¡¨ï¼‰å’Œâ€œnumListâ€ä¹‹é—´å­˜åœ¨å…³ç³»ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†ä½¿ç”¨ä¸Šé™å’Œä¸‹é™é€šé…ç¬¦å£°æ˜çš„å‡ ä¸ªâ€œListâ€ç±»ä¹‹é—´çš„å…³ç³»ã€‚ å¤šä¸ªæ³›å‹â€œListâ€ç±»å£°æ˜çš„å±‚æ¬¡ç»“æ„ã€‚ é€šé…ç¬¦ä½¿ç”¨æŒ‡å—éƒ¨åˆ†æä¾›äº†æœ‰å…³ä½¿ç”¨ä¸Šé™å’Œä¸‹é™é€šé…ç¬¦çš„å½±å“çš„æ›´å¤šä¿¡æ¯ã€‚ é€šé…ç¬¦æ•è·å’Œå¸®åŠ©ç¨‹åºæ–¹æ³•åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨æ¨æ–­é€šé…ç¬¦çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåˆ—è¡¨å¯ä»¥å®šä¹‰ä¸ºâ€œlist&lt;?&gt;â€ä½†æ˜¯ï¼Œå½“è®¡ç®—è¡¨è¾¾å¼æ—¶ï¼Œç¼–è¯‘å™¨ä»ä»£ç ä¸­æ¨æ–­å‡ºç‰¹å®šç±»å‹ã€‚è¿™ç§æƒ…å†µç§°ä¸ºé€šé…ç¬¦æ•è·ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨ä¸å¿…æ‹…å¿ƒé€šé…ç¬¦æ•è·ï¼Œé™¤éçœ‹åˆ°åŒ…å«çŸ­è¯­â€œcaptureofâ€çš„é”™è¯¯æ¶ˆæ¯ã€‚ WildcardErrorç¤ºä¾‹åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆæ•è·é”™è¯¯ï¼š 12345678import java.util.List;public class WildcardError &#123; void foo(List&lt;?&gt; i) &#123; i.set(0, i.get(0)); &#125;&#125; åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œç¼–è¯‘å™¨å°†â€œiâ€è¾“å…¥å‚æ•°å¤„ç†ä¸ºâ€œObjectâ€ç±»å‹ã€‚å½“â€œfooâ€æ–¹æ³•è°ƒç”¨List.setï¼ˆintï¼ŒEï¼‰æ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®è®¤æ’å…¥åˆ—è¡¨ä¸­çš„å¯¹è±¡çš„ç±»å‹ï¼Œå¹¶äº§ç”Ÿé”™è¯¯ã€‚å½“å‘ç”Ÿè¿™ç§ç±»å‹çš„é”™è¯¯æ—¶ï¼Œé€šå¸¸æ„å‘³ç€ç¼–è¯‘å™¨è®¤ä¸ºæ‚¨ä¸ºå˜é‡åˆ†é…äº†é”™è¯¯çš„ç±»å‹ã€‚æ³›å‹ä¹‹æ‰€ä»¥è¢«æ·»åŠ åˆ°Javaè¯­è¨€ä¸­ï¼Œæ˜¯ä¸ºäº†åœ¨ç¼–è¯‘æ—¶åŠ å¼ºç±»å‹å®‰å…¨ã€‚ â€œWildcardErrorâ€ç¤ºä¾‹åœ¨ç”±Oracleçš„JDK 7â€œjavacâ€å®ç°ç¼–è¯‘æ—¶ç”Ÿæˆä»¥ä¸‹é”™è¯¯ï¼š 1234567891011WildcardError.java:6: error: method set in interface List&lt;E&gt; cannot be applied to given types; i.set(0, i.get(0)); ^ required: int,CAP#1 found: int,Object reason: actual argument Object cannot be converted to CAP#1 by method invocation conversion where E is a type-variable: E extends Object declared in interface List where CAP#1 is a fresh type-variable: CAP#1 extends Object from capture of ?1 error åœ¨æœ¬ä¾‹ä¸­ï¼Œä»£ç è¯•å›¾æ‰§è¡Œå®‰å…¨æ“ä½œï¼Œå› æ­¤å¦‚ä½•è§£å†³ç¼–è¯‘å™¨é”™è¯¯ï¼Ÿæ‚¨å¯ä»¥é€šè¿‡ç¼–å†™ä¸€ä¸ªæ•è·é€šé…ç¬¦çš„private helperæ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºç§æœ‰åŠ©æ‰‹æ–¹æ³•â€œfooHelperâ€æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦‚WildcardFixedæ‰€ç¤º: 1234567891011121314public class WildcardFixed &#123; void foo(List&lt;?&gt; i) &#123; fooHelper(i); &#125; // Helper method created so that the wildcard can be captured // through type inference. private &lt;T&gt; void fooHelper(List&lt;T&gt; l) &#123; l.set(0, l.get(0)); &#125;&#125; ç”±äºhelperæ–¹æ³•ï¼Œç¼–è¯‘å™¨åœ¨è°ƒç”¨ä¸­ä½¿ç”¨æ¨æ–­æ¥ç¡®å®šâ€œTâ€æ˜¯æ•è·å˜é‡â€œCAP#1â€ã€‚è¯¥ç¤ºä¾‹ç°åœ¨å·²æˆåŠŸç¼–è¯‘ã€‚ æŒ‰ç…§æƒ¯ä¾‹ï¼ŒåŠ©æ‰‹æ–¹æ³•é€šå¸¸å‘½åä¸º*originalMethodName*helperã€‚ ç°åœ¨è€ƒè™‘ä¸€ä¸ªæ›´å¤æ‚çš„ç¤ºä¾‹WildcardErrorBad: 12345678910111213import java.util.List;public class WildcardErrorBad &#123; void swapFirst(List&lt;? extends Number&gt; l1, List&lt;? extends Number&gt; l2) &#123; Number temp = l1.get(0); l1.set(0, l2.get(0)); // expected a CAP#1 extends Number, // got a CAP#2 extends Number; // same bound, but different types l2.set(0, temp); // expected a CAP#1 extends Number, // got a Number &#125;&#125; åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œä»£ç æ­£åœ¨å°è¯•ä¸å®‰å…¨çš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘â€œswapFirstâ€æ–¹æ³•çš„ä»¥ä¸‹è°ƒç”¨ï¼š 123List&lt;Integer&gt; li = Arrays.asList(1, 2, 3);List&lt;Double&gt; ld = Arrays.asList(10.10, 20.20, 30.30);swapFirst(li, ld); è€ŒList&lt;Integer&gt;å’ŒList&lt;Double&gt;éƒ½æ»¡è¶³List&lt;ï¼ŸextendsNumber&gt;ï¼Œåˆ™ä»â€œIntegerâ€å€¼åˆ—è¡¨ä¸­è·å–é¡¹ç›®å¹¶å°è¯•å°†å…¶æ”¾å…¥â€œDoubleâ€å€¼åˆ—è¡¨æ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚ ä½¿ç”¨Oracleçš„JDKjavacç¼–è¯‘å™¨ç¼–è¯‘ä»£ç ä¼šäº§ç”Ÿä»¥ä¸‹é”™è¯¯ï¼š 12345678910111213141516171819202122232425262728293031WildcardErrorBad.java:7: error: method set in interface List&lt;E&gt; cannot be applied to given types; l1.set(0, l2.get(0)); // expected a CAP#1 extends Number, ^ required: int,CAP#1 found: int,Number reason: actual argument Number cannot be converted to CAP#1 by method invocation conversion where E is a type-variable: E extends Object declared in interface List where CAP#1 is a fresh type-variable: CAP#1 extends Number from capture of ? extends NumberWildcardErrorBad.java:10: error: method set in interface List&lt;E&gt; cannot be applied to given types; l2.set(0, temp); // expected a CAP#1 extends Number, ^ required: int,CAP#1 found: int,Number reason: actual argument Number cannot be converted to CAP#1 by method invocation conversion where E is a type-variable: E extends Object declared in interface List where CAP#1 is a fresh type-variable: CAP#1 extends Number from capture of ? extends NumberWildcardErrorBad.java:15: error: method set in interface List&lt;E&gt; cannot be applied to given types; i.set(0, i.get(0)); ^ required: int,CAP#1 found: int,Object reason: actual argument Object cannot be converted to CAP#1 by method invocation conversion where E is a type-variable: E extends Object declared in interface List where CAP#1 is a fresh type-variable: CAP#1 extends Object from capture of ?3 errors æ²¡æœ‰åŠ©æ‰‹æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºä»£ç æ ¹æœ¬ä¸Šæ˜¯é”™è¯¯çš„ï¼šä»â€œIntegerâ€å€¼åˆ—è¡¨ä¸­è·å–ä¸€ä¸ªé¡¹å¹¶å°è¯•å°†å…¶æ”¾å…¥â€œDoubleâ€å€¼åˆ—è¡¨æ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚ é€šé…ç¬¦ä½¿ç”¨æŒ‡å—å­¦ä¹ ä½¿ç”¨æ³›å‹ç¼–ç¨‹æ—¶ï¼Œä¸€ä¸ªæ›´ä»¤äººå›°æƒ‘çš„æ–¹é¢æ˜¯ç¡®å®šä½•æ—¶ä½¿ç”¨ä¸Šé™é€šé…ç¬¦ï¼Œä½•æ—¶ä½¿ç”¨ä¸‹é™é€šé…ç¬¦ã€‚æœ¬é¡µæä¾›äº†è®¾è®¡ä»£ç æ—¶åº”éµå¾ªçš„ä¸€äº›å‡†åˆ™ã€‚ å‡ºäºæœ¬è®¨è®ºçš„ç›®çš„ï¼Œå°†å˜é‡è§†ä¸ºæä¾›ä»¥ä¸‹ä¸¤ç§åŠŸèƒ½ä¹‹ä¸€æ˜¯æœ‰å¸®åŠ©çš„ï¼š â€œInâ€å˜é‡ â€œinâ€å˜é‡å‘ä»£ç æä¾›æ•°æ®ã€‚è®¾æƒ³ä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªå‚æ•°çš„copyæ–¹æ³•ï¼šcopyï¼ˆsrcï¼Œdestï¼‰ã€‚â€œsrcâ€å‚æ•°æä¾›è¦å¤åˆ¶çš„æ•°æ®ï¼Œå› æ­¤å®ƒæ˜¯â€œinâ€å‚æ•°ã€‚ â€œoutâ€å˜é‡ â€œoutâ€å˜é‡ä¿å­˜å…¶ä»–åœ°æ–¹ä½¿ç”¨çš„æ•°æ®ã€‚åœ¨å¤åˆ¶ç¤ºä¾‹â€œcopyï¼ˆsrcï¼Œdestï¼‰â€ä¸­ï¼Œâ€œdestâ€å‚æ•°æ¥å—æ•°æ®ï¼Œå› æ­¤å®ƒæ˜¯â€œoutâ€å‚æ•°ã€‚ å½“ç„¶ï¼Œä¸€äº›å˜é‡åŒæ—¶ç”¨äºâ€œè¾“å…¥â€å’Œâ€œè¾“å‡ºâ€ç›®çš„â€”â€”æŒ‡å—ä¸­ä¹Ÿè®¨è®ºäº†è¿™ç§æƒ…å†µã€‚ åœ¨å†³å®šæ˜¯å¦ä½¿ç”¨é€šé…ç¬¦ä»¥åŠåˆé€‚çš„é€šé…ç¬¦ç±»å‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨â€œinâ€å’Œâ€œoutâ€åŸåˆ™ã€‚ä»¥ä¸‹åˆ—è¡¨æä¾›äº†åº”éµå¾ªçš„å‡†åˆ™ï¼š é€šé…ç¬¦æŒ‡å—: â€œinâ€å˜é‡ç”¨ä¸Šé™é€šé…ç¬¦å®šä¹‰ï¼Œä½¿ç”¨â€œextendsâ€å…³é”®å­—ã€‚ â€œoutâ€å˜é‡ç”¨ä¸‹é™é€šé…ç¬¦å®šä¹‰ï¼Œä½¿ç”¨superå…³é”®å­—ã€‚ å¦‚æœå¯ä»¥ä½¿ç”¨â€œObjectâ€ç±»ä¸­å®šä¹‰çš„æ–¹æ³•è®¿é—®â€œInâ€å˜é‡ï¼Œä½¿ç”¨æ— ç•Œé€šé…ç¬¦ã€‚ å¦‚æœä»£ç éœ€è¦åŒæ—¶ä½œä¸ºâ€œInâ€å’Œâ€œoutâ€å˜é‡è®¿é—®å˜é‡ï¼Œè¯·ä¸è¦ä½¿ç”¨é€šé…ç¬¦ã€‚ è¿™äº›å‡†åˆ™ä¸é€‚ç”¨äºæ–¹æ³•çš„è¿”å›ç±»å‹ã€‚åº”é¿å…ä½¿ç”¨é€šé…ç¬¦ä½œä¸ºè¿”å›ç±»å‹ï¼Œå› ä¸ºè¿™ä¼šè¿«ä½¿ç¨‹åºå‘˜ä½¿ç”¨ä»£ç æ¥å¤„ç†é€šé…ç¬¦ã€‚ ç”±list&lt;ï¼Ÿextends â€¦&gt;å¯ä»¥éæ­£å¼åœ°è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸¥æ ¼çš„ä¿è¯ã€‚å‡è®¾æ‚¨æœ‰ä»¥ä¸‹ä¸¤ä¸ªç±»ï¼š 12345678910111213class NaturalNumber &#123; private int i; public NaturalNumber(int i) &#123; this.i = i; &#125; // ...&#125;class EvenNumber extends NaturalNumber &#123; public EvenNumber(int i) &#123; super(i); &#125; // ...&#125; Consider the following code: 123List&lt;EvenNumber&gt; le = new ArrayList&lt;&gt;();List&lt;? extends NaturalNumber&gt; ln = le;ln.add(new NaturalNumber(35)); // compile-time error å› ä¸ºList&lt;EvenNumber&gt;æ˜¯List&lt;ï¼Ÿextends NaturalNumber&gt;ï¼Œæ‚¨å¯ä»¥å°†leåˆ†é…ç»™lnã€‚ä½†ä¸èƒ½ä½¿ç”¨â€œlnâ€å°†è‡ªç„¶æ•°æ·»åŠ åˆ°å¶æ•°åˆ—è¡¨ä¸­ã€‚åˆ—è¡¨ä¸­å¯èƒ½æœ‰ä»¥ä¸‹æ“ä½œï¼š æ‚¨å¯ä»¥æ·»åŠ â€œnullâ€ã€‚ æ‚¨å¯ä»¥è°ƒç”¨â€œclearâ€ã€‚ æ‚¨å¯ä»¥è·å–è¿­ä»£å™¨å¹¶è°ƒç”¨â€œremoveâ€ã€‚ æ‚¨å¯ä»¥æ•è·é€šé…ç¬¦å¹¶ç¼–å†™ä»åˆ—è¡¨ä¸­è¯»å–çš„å…ƒç´ ã€‚ æ‚¨å¯ä»¥çœ‹åˆ°ç”±list&lt;ï¼Ÿextends NaturalNumber&gt;åœ¨ä¸¥æ ¼æ„ä¹‰ä¸Šä¸æ˜¯åªè¯»çš„ï¼Œä½†æ‚¨å¯èƒ½ä¼šè¿™æ ·æƒ³ï¼Œå› ä¸ºæ‚¨æ— æ³•å­˜å‚¨æ–°å…ƒç´ æˆ–æ›´æ”¹åˆ—è¡¨ä¸­çš„ç°æœ‰å…ƒç´ ã€‚ ç±»å‹æ“¦é™¤åœ¨ Java è¯­è¨€ä¸­å¼•å…¥äº†æ³›å‹ï¼Œä»¥ä¾¿åœ¨ç¼–è¯‘æ—¶æä¾›æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥å¹¶æ”¯æŒæ³›å‹ã€‚ä¸ºäº†å®ç°æ³›å‹ï¼ŒJavaç¼–è¯‘å™¨å°†ç±»å‹æ“¦é™¤åº”ç”¨äºï¼š ç”¨æ³›å‹ç±»å‹çš„è¾¹ç•Œæ›¿æ¢æ³›å‹ç±»å‹ä¸­çš„æ‰€æœ‰ç±»å‹å‚æ•°ï¼Œå¦‚æœç±»å‹å‚æ•°æ˜¯æ— ç•Œçš„ï¼Œåˆ™æ›¿æ¢ä¸ºâ€œ Objectâ€ã€‚å› æ­¤ï¼Œç”Ÿæˆçš„å­—èŠ‚ç åªåŒ…å«æ™®é€šçš„ç±»ã€æ¥å£å’Œæ–¹æ³•ã€‚ å¿…è¦æ—¶æ’å…¥ç±»å‹å¼ºåˆ¶è½¬æ¢ä»¥ä¿è¯ç±»å‹å®‰å…¨ã€‚ ç”Ÿæˆæ¡¥æ¥æ–¹æ³•ä»¥ä¿ç•™æ‰©å±•æ³›å‹ç±»å‹ä¸­çš„å¤šæ€æ€§ã€‚ ç±»å‹æ“¦é™¤ç¡®ä¿ä¸ä¼šä¸ºå‚æ•°åŒ–ç±»å‹åˆ›å»ºæ–°ç±»ï¼› å› æ­¤ï¼Œæ³›å‹ä¸ä¼šäº§ç”Ÿè¿è¡Œæ—¶å¼€é”€ã€‚ é€šç”¨ç±»å‹çš„æ“¦é™¤åœ¨ç±»å‹æ“¦é™¤è¿‡ç¨‹ä¸­ï¼ŒJava ç¼–è¯‘å™¨ä¼šæ“¦é™¤æ‰€æœ‰ç±»å‹å‚æ•°ï¼Œå¦‚æœç±»å‹å‚æ•°æ˜¯æœ‰ç•Œçš„ï¼Œåˆ™ç”¨ç¬¬ä¸€ä¸ªè¾¹ç•Œæ›¿æ¢æ¯ä¸ªå‚æ•°ï¼Œå¦‚æœç±»å‹å‚æ•°æ˜¯æ— ç•Œçš„ï¼Œåˆ™ç”¨â€œObjectâ€æ›¿æ¢ã€‚ è€ƒè™‘ä»¥ä¸‹è¡¨ç¤ºå•å‘é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ³›å‹ç±»ï¼š 12345678910111213public class Node&lt;T&gt; &#123; private T data; private Node&lt;T&gt; next; public Node(T data, Node&lt;T&gt; next) &#123; this.data = data; this.next = next; &#125; public T getData() &#123; return data; &#125; // ...&#125; å› ä¸ºç±»å‹å‚æ•° T æ˜¯æ— ç•Œçš„ï¼Œæ‰€ä»¥ Java ç¼–è¯‘å™¨å°†å…¶æ›¿æ¢ä¸º Objectï¼š 12345678910111213public class Node &#123; private Object data; private Node next; public Node(Object data, Node next) &#123; this.data = data; this.next = next; &#125; public Object getData() &#123; return data; &#125; // ...&#125; åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œé€šç”¨ Node ç±»ä½¿ç”¨æœ‰ç•Œç±»å‹å‚æ•°ï¼š 12345678910111213public class Node&lt;T extends Comparable&lt;T&gt;&gt; &#123; private T data; private Node&lt;T&gt; next; public Node(T data, Node&lt;T&gt; next) &#123; this.data = data; this.next = next; &#125; public T getData() &#123; return data; &#125; // ...&#125; Java ç¼–è¯‘å™¨å°†æœ‰ç•Œç±»å‹å‚æ•°â€œTâ€æ›¿æ¢ä¸ºç¬¬ä¸€ä¸ªç»‘å®šç±»â€œComparableâ€ï¼š 12345678910111213public class Node &#123; private Comparable data; private Node next; public Node(Comparable data, Node next) &#123; this.data = data; this.next = next; &#125; public Comparable getData() &#123; return data; &#125; // ...&#125; é€šç”¨æ–¹æ³•çš„æ“¦é™¤Java ç¼–è¯‘å™¨è¿˜ä¼šæ“¦é™¤æ³›å‹æ–¹æ³•å‚æ•°ä¸­çš„ç±»å‹å‚æ•°ã€‚ è€ƒè™‘ä»¥ä¸‹é€šç”¨æ–¹æ³•ï¼š 123456789// Counts the number of occurrences of elem in anArray.//public static &lt;T&gt; int count(T[] anArray, T elem) &#123; int cnt = 0; for (T e : anArray) if (e.equals(elem)) ++cnt; return cnt;&#125; å› ä¸º T æ˜¯æ— ç•Œçš„ï¼Œæ‰€ä»¥ Java ç¼–è¯‘å™¨å°†å…¶æ›¿æ¢ä¸º Objectï¼š 1234567public static int count(Object[] anArray, Object elem) &#123; int cnt = 0; for (Object e : anArray) if (e.equals(elem)) ++cnt; return cnt;&#125; å‡è®¾å®šä¹‰äº†ä»¥ä¸‹ç±»ï¼š 123class Shape &#123; /* ... */ &#125;class Circle extends Shape &#123; /* ... */ &#125;class Rectangle extends Shape &#123; /* ... */ &#125; æ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªé€šç”¨æ–¹æ³•æ¥ç»˜åˆ¶ä¸åŒçš„å½¢çŠ¶ï¼š 1public static &lt;T extends Shape&gt; void draw(T shape) &#123; /* ... */ &#125; Java ç¼–è¯‘å™¨å°† T æ›¿æ¢ä¸º Shapeï¼š 1public static void draw(Shape shape) &#123; /* ... */ &#125; ç±»å‹æ“¦é™¤å’Œæ¡¥æ¥æ–¹æ³•çš„å½±å“æœ‰æ—¶ç±»å‹æ“¦é™¤ä¼šå¯¼è‡´æ‚¨å¯èƒ½æ²¡æœ‰é¢„æ–™åˆ°çš„æƒ…å†µã€‚ ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†è¿™æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚ ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºç¼–è¯‘å™¨æœ‰æ—¶å¦‚ä½•åˆ›å»ºä¸€ä¸ªåˆæˆæ–¹æ³•ï¼Œç§°ä¸ºæ¡¥æ¥æ–¹æ³•ï¼Œä½œä¸ºç±»å‹æ“¦é™¤è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ ç»™å®šä»¥ä¸‹ä¸¤ä¸ªç±»ï¼š 1234567891011121314151617181920public class Node&lt;T&gt; &#123; public T data; public Node(T data) &#123; this.data = data; &#125; public void setData(T data) &#123; System.out.println(&quot;Node.setData&quot;); this.data = data; &#125;&#125;public class MyNode extends Node&lt;Integer&gt; &#123; public MyNode(Integer data) &#123; super(data); &#125; public void setData(Integer data) &#123; System.out.println(&quot;MyNode.setData&quot;); super.setData(data); &#125;&#125; è€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š 1234MyNode mn = new MyNode(5);Node n = mn; // A raw type - compiler throws an unchecked warningn.setData(&quot;Hello&quot;); // Causes a ClassCastException to be thrown.Integer x = mn.data; ç±»å‹æ“¦é™¤åï¼Œè¿™æ®µä»£ç å˜æˆï¼š 12345678MyNode mn = new MyNode(5);Node n = mn; // A raw type - compiler throws an unchecked warning // Note: This statement could instead be the following: // Node n = (Node)mn; // However, the compiler doesn&#x27;t generate a cast because // it isn&#x27;t required.n.setData(&quot;Hello&quot;); // Causes a ClassCastException to be thrown.Integer x = (Integer)mn.data; ä¸‹ä¸€èŠ‚è§£é‡Šä¸ºä»€ä¹ˆåœ¨ n.setData(&quot;Hello&quot;); è¯­å¥ä¸­æŠ›å‡º ClassCastExceptionã€‚ æ¡¥æ¥æ–¹æ³•åœ¨ç¼–è¯‘æ‰©å±•å‚æ•°åŒ–ç±»æˆ–å®ç°å‚æ•°åŒ–æ¥å£çš„ç±»æˆ–æ¥å£æ—¶ï¼Œç¼–è¯‘å™¨å¯èƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªåˆæˆæ–¹æ³•ï¼Œç§°ä¸ºæ¡¥æ¥æ–¹æ³•ï¼Œä½œä¸ºç±»å‹æ“¦é™¤è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ æ‚¨é€šå¸¸ä¸éœ€è¦æ‹…å¿ƒæ¡¥æ¥æ–¹æ³•ï¼Œä½†å¦‚æœä¸€ä¸ªå‡ºç°åœ¨å †æ ˆè·Ÿè¸ªä¸­ï¼Œæ‚¨å¯èƒ½ä¼šæ„Ÿåˆ°å›°æƒ‘ã€‚ ç±»å‹æ“¦é™¤åï¼ŒNode å’Œ MyNode ç±»å˜ä¸ºï¼š 123456789101112131415161718192021public class Node &#123; public Object data; public Node(Object data) &#123; this.data = data; &#125; public void setData(Object data) &#123; System.out.println(&quot;Node.setData&quot;); this.data = data; &#125;&#125;public class MyNode extends Node &#123; public MyNode(Integer data) &#123; super(data); &#125; public void setData(Integer data) &#123; System.out.println(&quot;MyNode.setData&quot;); super.setData(data); &#125;&#125; ç±»å‹æ“¦é™¤åï¼Œæ–¹æ³•ç­¾åä¸åŒ¹é…ï¼› Node.setData(T) æ–¹æ³•å˜ä¸º Node.setData(Object)ã€‚ å› æ­¤ï¼Œâ€œMyNode.setData(Integer)â€æ–¹æ³•ä¸ä¼šè¦†ç›–â€œNode.setData(Object)â€æ–¹æ³•ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å¹¶åœ¨ç±»å‹æ“¦é™¤åä¿ç•™æ³›å‹ç±»å‹çš„å¤šæ€æ€§ï¼ŒJavaç¼–è¯‘å™¨ç”Ÿæˆäº†ä¸€ä¸ªæ¡¥æ¥æ–¹æ³•æ¥ç¡®ä¿ å­ç±»å‹æŒ‰é¢„æœŸå·¥ä½œã€‚ å¯¹äº MyNode ç±»ï¼Œç¼–è¯‘å™¨ä¸º setData ç”Ÿæˆä»¥ä¸‹æ¡¥æ¥æ–¹æ³•ï¼š 123456789101112131415class MyNode extends Node &#123; // Bridge method generated by the compiler // public void setData(Object data) &#123; setData((Integer) data); &#125; public void setData(Integer data) &#123; System.out.println(&quot;MyNode.setData&quot;); super.setData(data); &#125; // ...&#125; æ¡¥æ¥æ–¹æ³• MyNode.setData(object) å§”æ‰˜ç»™åŸå§‹çš„ MyNode.setData(Integer) æ–¹æ³•ã€‚ ç»“æœï¼Œn.setData(&quot;Hello&quot;); è¯­å¥è°ƒç”¨æ–¹æ³• MyNode.setData(Object)ï¼Œå¹¶æŠ›å‡º ClassCastExceptionï¼Œå› ä¸º &quot;Hello&quot; æ— æ³•è½¬æ¢ä¸º Integer ã€‚ ä¸å¯å…·ä½“åŒ–çš„ç±»å‹ç±»å‹æ“¦é™¤ éƒ¨åˆ†è®¨è®ºäº†ç¼–è¯‘å™¨åˆ é™¤ä¸ç±»å‹å‚æ•°å’Œç±»å‹å‚æ•°ç›¸å…³çš„ä¿¡æ¯çš„è¿‡ç¨‹ã€‚ ç±»å‹æ“¦é™¤ä¼šäº§ç”Ÿä¸å¯å˜å‚æ•°ï¼ˆä¹Ÿç§°ä¸º varargs ï¼‰æ–¹æ³•ç›¸å…³çš„åæœï¼Œè¿™äº›æ–¹æ³•çš„å¯å˜å‚æ•°å½¢å¼å‚æ•°å…·æœ‰ä¸å¯å…·ä½“åŒ–çš„ç±»å‹ã€‚ è¯·å‚é˜…å°†ä¿¡æ¯ä¼ é€’ç»™æ–¹æ³•æˆ–æ„é€ å‡½æ•°éƒ¨åˆ†ä»»æ„å‚æ•°äº†è§£æœ‰å…³å¯å˜å‚æ•°æ–¹æ³•çš„æ›´å¤šä¿¡æ¯ã€‚ ä¸å¯å…·ä½“åŒ–çš„ç±»å‹å¯å…·ä½“åŒ–ç±»å‹æ˜¯å…¶ç±»å‹ä¿¡æ¯åœ¨è¿è¡Œæ—¶å®Œå…¨å¯ç”¨çš„ç±»å‹ã€‚ è¿™åŒ…æ‹¬åŸè¯­ã€éæ³›å‹ç±»å‹ã€åŸå§‹ç±»å‹å’Œæœªç»‘å®šé€šé…ç¬¦çš„è°ƒç”¨ã€‚ Non-reifiable types æ˜¯åœ¨ç¼–è¯‘æ—¶é€šè¿‡ç±»å‹æ“¦é™¤åˆ é™¤ä¿¡æ¯çš„ç±»å‹â€”â€”è°ƒç”¨æœªå®šä¹‰ä¸ºæ— é™é€šé…ç¬¦çš„æ³›å‹ç±»å‹ã€‚ ä¸å¯å…·ä½“åŒ–çš„ç±»å‹åœ¨è¿è¡Œæ—¶ä¸ä¼šæä¾›æ‰€æœ‰å¯ç”¨ä¿¡æ¯ã€‚ ä¸å¯å…·ä½“åŒ–ç±»å‹çš„ç¤ºä¾‹æ˜¯ List&lt;String&gt; å’Œ List&lt;Number&gt;ï¼› JVM æ— æ³•åœ¨è¿è¡Œæ—¶åŒºåˆ†è¿™äº›ç±»å‹ã€‚ å¦‚ Restrictions on Generics æ‰€ç¤ºï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä¸èƒ½ä½¿ç”¨ä¸å¯å…·ä½“åŒ–çš„ç±»å‹ï¼šåœ¨ instanceof ä¸­ ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ï¼Œæˆ–ä½œä¸ºæ•°ç»„ä¸­çš„å…ƒç´ ã€‚ å †æ±¡æŸ“å †æ±¡æŸ“å‘ç”Ÿåœ¨å‚æ•°åŒ–ç±»å‹çš„å˜é‡å¼•ç”¨ä¸å±äºè¯¥å‚æ•°åŒ–ç±»å‹çš„å¯¹è±¡æ—¶ã€‚ å¦‚æœç¨‹åºæ‰§è¡Œäº†ä¸€äº›åœ¨ç¼–è¯‘æ—¶äº§ç”Ÿæœªç»æ£€æŸ¥çš„è­¦å‘Šçš„æ“ä½œï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚ å¦‚æœåœ¨ç¼–è¯‘æ—¶ï¼ˆåœ¨ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥è§„åˆ™çš„é™åˆ¶å†…ï¼‰æˆ–åœ¨è¿è¡Œæ—¶ï¼Œæ¶‰åŠå‚æ•°åŒ–ç±»å‹ï¼ˆä¾‹å¦‚ï¼Œå¼ºåˆ¶è½¬æ¢æˆ–æ–¹æ³•è°ƒç”¨ï¼‰çš„æ“ä½œçš„æ­£ç¡®æ€§ï¼Œåˆ™ä¼šç”Ÿæˆ unchecked warning æ— æ³•éªŒè¯ã€‚ ä¾‹å¦‚ï¼Œå †æ±¡æŸ“å‘ç”Ÿåœ¨æ··åˆåŸå§‹ç±»å‹å’Œå‚æ•°åŒ–ç±»å‹æ—¶ï¼Œæˆ–æ‰§è¡Œæœªç»æ£€æŸ¥çš„è½¬æ¢æ—¶ã€‚ åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå½“åŒæ—¶ç¼–è¯‘æ‰€æœ‰ä»£ç æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå‘å‡ºæœªç»æ£€æŸ¥çš„è­¦å‘Šï¼Œæé†’æ‚¨æ³¨æ„æ½œåœ¨çš„å †æ±¡æŸ“ã€‚ å¦‚æœæ‚¨å•ç‹¬ç¼–è¯‘éƒ¨åˆ†ä»£ç ï¼Œåˆ™å¾ˆéš¾æ£€æµ‹åˆ°å †æ±¡æŸ“çš„æ½œåœ¨é£é™©ã€‚ å¦‚æœæ‚¨ç¡®ä¿æ‚¨çš„ä»£ç åœ¨æ²¡æœ‰è­¦å‘Šçš„æƒ…å†µä¸‹ç¼–è¯‘ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå‘ç”Ÿå †æ±¡æŸ“ã€‚ å…·æœ‰ä¸å¯å…·ä½“åŒ–å½¢å¼å‚æ•°çš„ Varargs æ–¹æ³•çš„æ½œåœ¨æ¼æ´åŒ…å«å¯å˜å‚æ•°è¾“å…¥å‚æ•°çš„é€šç”¨æ–¹æ³•ä¼šå¯¼è‡´å †æ±¡æŸ“ã€‚ è€ƒè™‘ä»¥ä¸‹ ArrayBuilder ç±»ï¼š 123456789101112131415public class ArrayBuilder &#123; public static &lt;T&gt; void addToList (List&lt;T&gt; listArg, T... elements) &#123; for (T x : elements) &#123; listArg.add(x); &#125; &#125; public static void faultyMethod(List&lt;String&gt;... l) &#123; Object[] objectArray = l; // Valid objectArray[0] = Arrays.asList(42); String s = l[0].get(0); // ClassCastException thrown here &#125;&#125; ä»¥ä¸‹ç¤ºä¾‹â€œHeapPollutionExampleâ€ä½¿ç”¨â€œArrayBuilerâ€ç±»ï¼š 1234567891011121314151617public class HeapPollutionExample &#123; public static void main(String[] args) &#123; List&lt;String&gt; stringListA = new ArrayList&lt;String&gt;(); List&lt;String&gt; stringListB = new ArrayList&lt;String&gt;(); ArrayBuilder.addToList(stringListA, &quot;Seven&quot;, &quot;Eight&quot;, &quot;Nine&quot;); ArrayBuilder.addToList(stringListB, &quot;Ten&quot;, &quot;Eleven&quot;, &quot;Twelve&quot;); List&lt;List&lt;String&gt;&gt; listOfStringLists = new ArrayList&lt;List&lt;String&gt;&gt;(); ArrayBuilder.addToList(listOfStringLists, stringListA, stringListB); ArrayBuilder.faultyMethod(Arrays.asList(&quot;Hello!&quot;), Arrays.asList(&quot;World!&quot;)); &#125;&#125; ç¼–è¯‘æ—¶ï¼Œâ€œArrayBuilder.addToListâ€æ–¹æ³•çš„å®šä¹‰ä¼šäº§ç”Ÿä»¥ä¸‹è­¦å‘Šï¼š 1warning: [varargs] Possible heap pollution from parameterized vararg type T å½“ç¼–è¯‘å™¨é‡åˆ°å¯å˜å‚æ•°æ–¹æ³•æ—¶ï¼Œå®ƒä¼šå°†å¯å˜å‚æ•°å½¢å¼å‚æ•°è½¬æ¢ä¸ºæ•°ç»„ã€‚ ä½†æ˜¯ï¼ŒJava ç¼–ç¨‹è¯­è¨€ä¸å…è®¸åˆ›å»ºå‚æ•°åŒ–ç±»å‹çš„æ•°ç»„ã€‚åœ¨ ArrayBuilder.addToList æ–¹æ³•ä¸­ï¼Œç¼–è¯‘å™¨å°†å¯å˜å‚æ•°å½¢å¼å‚æ•° Tâ€¦ elements è½¬æ¢ä¸ºå½¢å¼å‚æ•° T[] elementsï¼Œä¸€ä¸ªæ•°ç»„ã€‚ ä½†æ˜¯ï¼Œç”±äºç±»å‹æ“¦é™¤ï¼Œç¼–è¯‘å™¨å°†å¯å˜å‚æ•°å½¢å¼å‚æ•°è½¬æ¢ä¸º Object[] elementsã€‚ å› æ­¤ï¼Œå­˜åœ¨å †æ±¡æŸ“çš„å¯èƒ½æ€§ã€‚ ä»¥ä¸‹è¯­å¥å°†å¯å˜å‚æ•°å½¢å¼å‚æ•° l åˆ†é…ç»™ Object æ•°ç»„ objectArgsï¼š 1Object[] objectArray = l; è¯¥è¯­å¥å¯èƒ½ä¼šå¼•å…¥å †æ±¡æŸ“ã€‚ ä¸å¯å˜å‚æ•°å½¢å¼å‚æ•° l çš„å‚æ•°åŒ–ç±»å‹åŒ¹é…çš„å€¼å¯ä»¥åˆ†é…ç»™å˜é‡ objectArrayï¼Œå› æ­¤å¯ä»¥åˆ†é…ç»™ lã€‚ ä½†æ˜¯ï¼Œç¼–è¯‘å™¨ä¸ä¼šåœ¨æ­¤è¯­å¥ä¸­ç”Ÿæˆæœªç»æ£€æŸ¥çš„è­¦å‘Šã€‚ ç¼–è¯‘å™¨åœ¨å°†å¯å˜å‚æ•°å½¢å¼å‚æ•° List&lt;String&gt;... l è½¬æ¢ä¸ºå½¢å¼å‚æ•° List[] l æ—¶å·²ç»ç”Ÿæˆè­¦å‘Šã€‚ æ­¤å£°æ˜æœ‰æ•ˆï¼› å˜é‡ l çš„ç±»å‹ä¸º List[]ï¼Œå®ƒæ˜¯ Object[] çš„å­ç±»å‹ã€‚ å› æ­¤ï¼Œå¦‚æœæ‚¨å°†ä»»ä½•ç±»å‹çš„â€œListâ€å¯¹è±¡åˆ†é…ç»™â€œobjectArrayâ€æ•°ç»„çš„ä»»ä½•æ•°ç»„ç»„ä»¶ï¼Œç¼–è¯‘å™¨ä¸ä¼šå‘å‡ºè­¦å‘Šæˆ–é”™è¯¯ï¼Œå¦‚ä¸‹è¯­å¥æ‰€ç¤ºï¼š 1objectArray[0] = Arrays.asList(42); æ­¤è¯­å¥å°† objectArray æ•°ç»„çš„ç¬¬ä¸€ä¸ªæ•°ç»„ç»„ä»¶åˆ†é…ç»™ä¸€ä¸ªåŒ…å«ä¸€ä¸ª Integer ç±»å‹å¯¹è±¡çš„ List å¯¹è±¡ã€‚ å‡è®¾æ‚¨ä½¿ç”¨ä»¥ä¸‹è¯­å¥è°ƒç”¨â€œArrayBuilder.faultyMethodâ€ï¼š 1ArrayBuilder.faultyMethod(Arrays.asList(&quot;Hello!&quot;), Arrays.asList(&quot;World!&quot;)); åœ¨è¿è¡Œæ—¶ï¼ŒJVM åœ¨ä»¥ä¸‹è¯­å¥ä¸­æŠ›å‡º ClassCastExceptionï¼š 12// ClassCastException thrown hereString s = l[0].get(0); å­˜å‚¨åœ¨å˜é‡â€œlâ€çš„ç¬¬ä¸€ä¸ªæ•°ç»„ç»„ä»¶ä¸­çš„å¯¹è±¡å…·æœ‰â€œList&lt;Integer&gt;â€ç±»å‹ï¼Œä½†æ­¤è¯­å¥éœ€è¦ä¸€ä¸ªâ€œList&lt;String&gt;â€ç±»å‹çš„å¯¹è±¡ã€‚ ä½¿ç”¨ä¸å¯å…·ä½“åŒ–çš„å½¢å¼å‚æ•°é˜²æ­¢ Varargs æ–¹æ³•å‘å‡ºè­¦å‘Šå¦‚æœæ‚¨å£°æ˜ä¸€ä¸ªå…·æœ‰å‚æ•°åŒ–ç±»å‹å‚æ•°çš„å¯å˜å‚æ•°æ–¹æ³•ï¼Œå¹¶ä¸”æ‚¨ç¡®ä¿è¯¥æ–¹æ³•çš„ä¸»ä½“ä¸ä¼šå› å¯¹å¯å˜å‚æ•°å½¢å¼å‚æ•°çš„ä¸å½“å¤„ç†è€ŒæŠ›å‡ºâ€œClassCastExceptionâ€æˆ–å…¶ä»–ç±»ä¼¼å¼‚å¸¸ï¼Œåˆ™å¯ä»¥é˜²æ­¢è­¦å‘Š ç¼–è¯‘å™¨é€šè¿‡å°†ä»¥ä¸‹æ³¨é‡Šæ·»åŠ åˆ°é™æ€å’Œéæ„é€ æ–¹æ³•å£°æ˜æ¥ä¸ºè¿™äº›ç±»å‹çš„å¯å˜å‚æ•°æ–¹æ³•ç”Ÿæˆï¼š 1@SafeVarargs @SafeVarargs æ³¨é‡Šæ˜¯æ–¹æ³•å¥‘çº¦çš„æ–‡æ¡£åŒ–éƒ¨åˆ†ï¼› æ­¤æ³¨é‡Šæ–­è¨€è¯¥æ–¹æ³•çš„å®ç°ä¸ä¼šä¸æ­£ç¡®åœ°å¤„ç†å¯å˜å‚æ•°å½¢å¼å‚æ•°ã€‚ ä¹Ÿå¯ä»¥é€šè¿‡åœ¨æ–¹æ³•å£°æ˜ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹æ¥æŠ‘åˆ¶æ­¤ç±»è­¦å‘Šï¼Œå°½ç®¡ä¸å¤ªç†æƒ³ï¼š 1@SuppressWarnings(&#123;&quot;unchecked&quot;, &quot;varargs&quot;&#125;) ä½†æ˜¯ï¼Œæ­¤æ–¹æ³•ä¸ä¼šæŠ‘åˆ¶ä»æ–¹æ³•çš„è°ƒç”¨ç«™ç‚¹ç”Ÿæˆçš„è­¦å‘Šã€‚ å¦‚æœæ‚¨ä¸ç†Ÿæ‚‰â€œ@SuppressWarningsâ€è¯­æ³•ï¼Œè¯·å‚é˜…æ³¨é‡Šã€‚ æ³›å‹çš„é™åˆ¶è¦æœ‰æ•ˆåœ°ä½¿ç”¨ Java æ³›å‹ï¼Œæ‚¨å¿…é¡»è€ƒè™‘ä»¥ä¸‹é™åˆ¶ï¼š æ— æ³•ä½¿ç”¨åŸå§‹ç±»å‹å®ä¾‹åŒ–æ³›å‹ç±»å‹ æ— æ³•åˆ›å»ºç±»å‹å‚æ•°çš„å®ä¾‹ ä¸èƒ½å£°æ˜ç±»å‹ä¸ºç±»å‹å‚æ•°çš„é™æ€å­—æ®µ ä¸èƒ½å¯¹å‚æ•°åŒ–ç±»å‹ä½¿ç”¨ Casts æˆ– instanceof æ— æ³•åˆ›å»ºå‚æ•°åŒ–ç±»å‹çš„æ•°ç»„ æ— æ³•åˆ›å»ºã€æ•è·æˆ–æŠ›å‡ºå‚æ•°åŒ–ç±»å‹çš„å¯¹è±¡ æ— æ³•é‡è½½æ¯ä¸ªé‡è½½çš„å½¢å¼å‚æ•°ç±»å‹æ“¦é™¤ä¸ºç›¸åŒåŸå§‹ç±»å‹çš„æ–¹æ³• æ— æ³•ä½¿ç”¨åŸå§‹ç±»å‹å®ä¾‹åŒ–æ³›å‹ç±»å‹æ— æ³•ä½¿ç”¨åŸå§‹ç±»å‹å®ä¾‹åŒ–æ³›å‹ç±»å‹ 123456789101112class Pair&lt;K, V&gt; &#123; private K key; private V value; public Pair(K key, V value) &#123; this.key = key; this.value = value; &#125; // ...&#125; åˆ›å»º Pair å¯¹è±¡æ—¶ï¼Œä¸èƒ½ç”¨åŸºæœ¬ç±»å‹æ›¿æ¢ç±»å‹å‚æ•° K æˆ– Vï¼š 1Pair&lt;int, char&gt; p = new Pair&lt;&gt;(8, &#x27;a&#x27;); // compile-time error æ‚¨åªèƒ½ç”¨éåŸºæœ¬ç±»å‹æ›¿æ¢ç±»å‹å‚æ•° K å’Œ Vï¼š 1Pair&lt;Integer, Character&gt; p = new Pair&lt;&gt;(8, &#x27;a&#x27;); è¯·æ³¨æ„ï¼ŒJava ç¼–è¯‘å™¨å°†â€œ8â€è‡ªåŠ¨è£…ç®±ä¸ºâ€œInteger.valueOf(8)â€ï¼Œå°†â€œaâ€è‡ªåŠ¨è£…ç®±ä¸ºâ€œCharacter(â€˜aâ€™)â€ï¼š 1Pair&lt;Integer, Character&gt; p = new Pair&lt;&gt;(Integer.valueOf(8), new Character(&#x27;a&#x27;)); æœ‰å…³è‡ªåŠ¨è£…ç®±çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ•°å­—å’Œå­—ç¬¦ä¸²è¯¾ç¨‹ã€‚ æ— æ³•åˆ›å»ºç±»å‹å‚æ•°çš„å®ä¾‹æ‚¨ä¸èƒ½åˆ›å»ºç±»å‹å‚æ•°çš„å®ä¾‹ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ï¼š 1234public static &lt;E&gt; void append(List&lt;E&gt; list) &#123; E elem = new E(); // compile-time error list.add(elem);&#125; ä½œä¸ºè§£å†³æ–¹æ³•ï¼Œæ‚¨å¯ä»¥é€šè¿‡åå°„åˆ›å»ºç±»å‹å‚æ•°çš„å¯¹è±¡ï¼š 1234public static &lt;E&gt; void append(List&lt;E&gt; list, Class&lt;E&gt; cls) throws Exception &#123; E elem = cls.newInstance(); // OK list.add(elem);&#125; æ‚¨å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼è°ƒç”¨ append æ–¹æ³•ï¼š 12List&lt;String&gt; ls = new ArrayList&lt;&gt;();append(ls, String.class); ä¸èƒ½å£°æ˜ç±»å‹ä¸ºç±»å‹å‚æ•°çš„é™æ€å­—æ®µç±»çš„é™æ€å­—æ®µæ˜¯ç±»çš„æ‰€æœ‰éé™æ€å¯¹è±¡å…±äº«çš„ç±»çº§å˜é‡ã€‚ å› æ­¤ï¼Œç±»å‹å‚æ•°çš„é™æ€å­—æ®µæ˜¯ä¸å…è®¸çš„ã€‚ è€ƒè™‘ä»¥ä¸‹è¯¾ç¨‹ï¼š 12345public class MobileDevice&lt;T&gt; &#123; private static T os; // ...&#125; å¦‚æœå…è®¸ç±»å‹å‚æ•°çš„é™æ€å­—æ®µï¼Œé‚£ä¹ˆä¸‹é¢çš„ä»£ç å°±ä¼šæ··æ·†ï¼š 123MobileDevice&lt;Smartphone&gt; phone = new MobileDevice&lt;&gt;();MobileDevice&lt;Pager&gt; pager = new MobileDevice&lt;&gt;();MobileDevice&lt;TabletPC&gt; pc = new MobileDevice&lt;&gt;(); å› ä¸ºé™æ€å­—æ®µos è¢«phoneã€pager å’Œpc å…±äº«ï¼Œæ‰€ä»¥os çš„å®é™…ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ ä¸èƒ½åŒæ—¶æ˜¯Smartphoneã€Pagerã€TabletPCã€‚ å› æ­¤ï¼Œæ‚¨ä¸èƒ½åˆ›å»ºç±»å‹å‚æ•°çš„é™æ€å­—æ®µã€‚ ä¸èƒ½å¯¹å‚æ•°åŒ–ç±»å‹ä½¿ç”¨ Casts æˆ– instanceofå› ä¸º Java ç¼–è¯‘å™¨ä¼šæ“¦é™¤æ³›å‹ä»£ç ä¸­çš„æ‰€æœ‰ç±»å‹å‚æ•°ï¼Œæ‰€ä»¥æ‚¨æ— æ³•éªŒè¯åœ¨è¿è¡Œæ—¶ä½¿ç”¨äº†æ³›å‹ç±»å‹çš„å“ªä¸ªå‚æ•°åŒ–ç±»å‹ï¼š 12345public static &lt;E&gt; void rtti(List&lt;E&gt; list) &#123; if (list instanceof ArrayList&lt;Integer&gt;) &#123; // compile-time error // ... &#125;&#125; ä¼ é€’ç»™ rtti æ–¹æ³•çš„å‚æ•°åŒ–ç±»å‹é›†æ˜¯ï¼š 1S = &#123; ArrayList&lt;Integer&gt;, ArrayList&lt;String&gt; LinkedList&lt;Character&gt;, ... &#125; è¿è¡Œæ—¶ä¸è·Ÿè¸ªç±»å‹å‚æ•°ï¼Œå› æ­¤å®ƒæ— æ³•åŒºåˆ† ArrayList&lt;Integer&gt; å’Œ ArrayList&lt;String&gt; ä¹‹é—´çš„åŒºåˆ«ã€‚ æ‚¨æœ€å¤šå¯ä»¥ä½¿ç”¨æ— ç•Œé€šé…ç¬¦æ¥éªŒè¯åˆ—è¡¨æ˜¯å¦ä¸ºâ€œArrayListâ€ï¼š 12345public static void rtti(List&lt;?&gt; list) &#123; if (list instanceof ArrayList&lt;?&gt;) &#123; // OK; instanceof requires a reifiable type // ... &#125;&#125; é€šå¸¸ï¼Œæ‚¨ä¸èƒ½è½¬æ¢ä¸ºå‚æ•°åŒ–ç±»å‹ï¼Œé™¤éå®ƒç”±æ— é™é€šé…ç¬¦å‚æ•°åŒ–ã€‚ ä¾‹å¦‚ï¼š 12List&lt;Integer&gt; li = new ArrayList&lt;&gt;();List&lt;Number&gt; ln = (List&lt;Number&gt;) li; // compile-time error ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨çŸ¥é“ç±»å‹å‚æ•°å§‹ç»ˆæœ‰æ•ˆå¹¶å…è®¸è¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚ ä¾‹å¦‚ï¼š 12List&lt;String&gt; l1 = ...;ArrayList&lt;String&gt; l2 = (ArrayList&lt;String&gt;)l1; // OK æ— æ³•åˆ›å»ºå‚æ•°åŒ–ç±»å‹çš„æ•°ç»„ä¸èƒ½åˆ›å»ºå‚æ•°åŒ–ç±»å‹çš„æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æ— æ³•ç¼–è¯‘ï¼š 1List&lt;Integer&gt;[] arrayOfLists = new List&lt;Integer&gt;[2]; // compile-time error ä¸‹é¢çš„ä»£ç è¯´æ˜äº†åœ¨æ•°ç»„ä¸­æ’å…¥ä¸åŒç±»å‹æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼š 123Object[] strings = new String[2];strings[0] = &quot;hi&quot;; // OKstrings[1] = 100; // An ArrayStoreException is thrown. å¦‚æœæ‚¨å¯¹é€šç”¨åˆ—è¡¨å°è¯•ç›¸åŒçš„æ“ä½œï¼Œåˆ™ä¼šå‡ºç°é—®é¢˜ï¼š 1234Object[] stringLists = new List&lt;String&gt;[2]; // compiler error, but pretend it&#x27;s allowedstringLists[0] = new ArrayList&lt;String&gt;(); // OKstringLists[1] = new ArrayList&lt;Integer&gt;(); // An ArrayStoreException should be thrown, // but the runtime can&#x27;t detect it. å¦‚æœå…è®¸å‚æ•°åŒ–åˆ—è¡¨çš„æ•°ç»„ï¼Œåˆ™å‰é¢çš„ä»£ç å°†æ— æ³•å¼•å‘æ‰€éœ€çš„â€œArrayStoreExceptionâ€ã€‚ æ— æ³•åˆ›å»ºã€æ•è·æˆ–æŠ›å‡ºå‚æ•°åŒ–ç±»å‹çš„å¯¹è±¡æ³›å‹ç±»ä¸èƒ½ç›´æ¥æˆ–é—´æ¥æ‰©å±•â€œThrowableâ€ç±»ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ç±»å°†ä¸ä¼šç¼–è¯‘ï¼š 12345// Extends Throwable indirectlyclass MathException&lt;T&gt; extends Exception &#123; /* ... */ &#125; // compile-time error// Extends Throwable directlyclass QueueFullException&lt;T&gt; extends Throwable &#123; /* ... */ // compile-time error æ–¹æ³•æ— æ³•æ•è·ç±»å‹å‚æ•°çš„å®ä¾‹ï¼š 12345678public static &lt;T extends Exception, J&gt; void execute(List&lt;J&gt; jobs) &#123; try &#123; for (J job : jobs) // ... &#125; catch (T e) &#123; // compile-time error // ... &#125;&#125; ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥åœ¨â€œthrowsâ€å­å¥ä¸­ä½¿ç”¨ç±»å‹å‚æ•°ï¼š 12345class Parser&lt;T extends Exception&gt; &#123; public void parse(File file) throws T &#123; // OK // ... &#125;&#125; æ— æ³•é‡è½½æ¯ä¸ªé‡è½½çš„å½¢å¼å‚æ•°ç±»å‹æ“¦é™¤ä¸ºç›¸åŒåŸå§‹ç±»å‹çš„æ–¹æ³•ä¸€ä¸ªç±»ä¸èƒ½æœ‰ä¸¤ä¸ªé‡è½½æ–¹æ³•ï¼Œå®ƒä»¬åœ¨ç±»å‹åˆ é™¤åå…·æœ‰ç›¸åŒçš„ç­¾åã€‚ 1234public class Example &#123; public void print(Set&lt;String&gt; strSet) &#123; &#125; public void print(Set&lt;Integer&gt; intSet) &#123; &#125;&#125; é‡è½½å°†å…±äº«ç›¸åŒçš„ç±»æ–‡ä»¶è¡¨ç¤ºï¼Œå¹¶å°†ç”Ÿæˆç¼–è¯‘æ—¶é”™è¯¯ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"æ³›å‹","slug":"æ³›å‹","permalink":"https://guoshunfa.com/tags/%E6%B3%9B%E5%9E%8B/"}]},{"title":"Oracle Javaé¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€æƒ³","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Oracle-Javaé¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€æƒ³","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2020/07/Oracle-Javaé¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€æƒ³/","link":"","permalink":"https://guoshunfa.com/2020/07/Oracle-Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/","excerpt":"","text":"æœ¬æ–‡ç« ä»¥jdk8ä¸ºåŸºç¡€è¿›è¡Œç¼–å†™ï¼Œå¦‚æœæƒ³æŸ¥çœ‹åç»­çš„ç‰ˆæœ¬å¯ä»¥å‰å¾€jdkç‰ˆæœ¬ç›®å½•ä¸‹æŸ¥çœ‹ã€‚ ç¿»è¯‘è‡ªï¼šhttps://docs.oracle.com/javase/tutorial/java/concepts/index.html ä»€ä¹ˆæ˜¯å¯¹è±¡ï¼ˆObjectï¼‰ï¼Ÿå¯¹è±¡æ˜¯ç†è§£é¢å‘å¯¹è±¡æŠ€æœ¯çš„å…³é”®ã€‚ç°åœ¨ç¯é¡¾å››å‘¨ï¼Œæ‚¨ä¼šå‘ç°ç°å®ä¸–ç•Œä¸­è®¸å¤šç‰©ä½“çš„ä¾‹å­ï¼šæ‚¨çš„ç‹—ã€æ‚¨çš„åŠå…¬æ¡Œã€æ‚¨çš„ç”µè§†æœºã€æ‚¨çš„è‡ªè¡Œè½¦ã€‚ çœŸå®ä¸–ç•Œçš„å¯¹è±¡æœ‰ä¸¤ä¸ªå…±åŒç‰¹å¾ï¼šå®ƒä»¬éƒ½æœ‰çŠ¶æ€å’Œè¡Œä¸ºã€‚ç‹—æœ‰çŠ¶æ€ï¼ˆåå­—ã€é¢œè‰²ã€å“ç§ã€é¥¥é¥¿ï¼‰å’Œè¡Œä¸ºï¼ˆå å«ã€æŠ“ä¸œè¥¿ã€æ‘‡å°¾å·´ï¼‰ã€‚è‡ªè¡Œè½¦ä¹Ÿæœ‰çŠ¶æ€ï¼ˆå½“å‰æ¡£ä½ã€å½“å‰è¸æ¿èŠ‚å¥ã€å½“å‰é€Ÿåº¦ï¼‰å’Œè¡Œä¸ºï¼ˆæ¢æ¡£ã€æ”¹å˜è¸æ¿èŠ‚å¥ã€åº”ç”¨åˆ¹è½¦ï¼‰ã€‚è¯†åˆ«ç°å®ä¸–ç•Œå¯¹è±¡çš„çŠ¶æ€å’Œè¡Œä¸ºæ˜¯å¼€å§‹æ€è€ƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„å¥½æ–¹æ³•ã€‚ ç°åœ¨èŠ±ç‚¹æ—¶é—´è§‚å¯Ÿæ‚¨é™„è¿‘åŒºåŸŸçš„çœŸå®ä¸–ç•Œç‰©ä½“ã€‚å¯¹äºä½ çœ‹åˆ°çš„æ¯ä¸ªç‰©ä½“ï¼Œé—®è‡ªå·±ä¸¤ä¸ªé—®é¢˜ï¼šâ€œè¿™ä¸ªç‰©ä½“å¯èƒ½å¤„äºä»€ä¹ˆçŠ¶æ€ï¼Ÿâ€ å’Œâ€œè¿™ä¸ªå¯¹è±¡å¯ä»¥æ‰§è¡Œä»€ä¹ˆå¯èƒ½çš„è¡Œä¸ºï¼Ÿâ€ã€‚ç¡®ä¿å†™ä¸‹æ‚¨çš„è§‚å¯Ÿç»“æœã€‚å½“æ‚¨è¿™æ ·åšæ—¶ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°ç°å®ä¸–ç•Œä¸­çš„å¯¹è±¡åœ¨å¤æ‚æ€§ä¸Šå„ä¸ç›¸åŒï¼›æ‚¨çš„å°ç¯å¯èƒ½åªæœ‰ä¸¤ç§å¯èƒ½çš„çŠ¶æ€ï¼ˆæ‰“å¼€å’Œå…³é—­ï¼‰å’Œä¸¤ç§å¯èƒ½çš„è¡Œä¸ºï¼ˆæ‰“å¼€ã€å…³é—­ï¼‰ï¼Œä½†æ‚¨çš„æ¡Œé¢æ”¶éŸ³æœºå¯èƒ½æœ‰å…¶ä»–çŠ¶æ€ï¼ˆæ‰“å¼€ã€å…³é—­ã€å½“å‰éŸ³é‡ã€å½“å‰ç”µå°ï¼‰å’Œè¡Œä¸ºï¼ˆæ‰“å¼€ã€å…³é—­ã€å¢å¤§éŸ³é‡ã€å‡å°éŸ³é‡ã€æœç´¢ã€æ‰«æå’Œè°ƒè°ï¼‰ã€‚æ‚¨å¯èƒ½è¿˜ä¼šæ³¨æ„åˆ°ï¼ŒæŸäº›å¯¹è±¡åè¿‡æ¥ä¹Ÿä¼šåŒ…å«å…¶ä»–å¯¹è±¡ã€‚è¿™äº›ç°å®ä¸–ç•Œçš„è§‚å¯Ÿéƒ½è½¬åŒ–ä¸ºé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸–ç•Œã€‚ è½¯ä»¶å¯¹è±¡ã€‚ è½¯ä»¶å¯¹è±¡åœ¨æ¦‚å¿µä¸Šç±»ä¼¼äºç°å®ä¸–ç•Œçš„å¯¹è±¡ï¼šå®ƒä»¬ä¹Ÿç”±çŠ¶æ€å’Œç›¸å…³è¡Œä¸ºç»„æˆã€‚å¯¹è±¡å°†å…¶çŠ¶æ€å­˜å‚¨åœ¨å­—æ®µï¼ˆæŸäº›ç¼–ç¨‹è¯­è¨€ä¸­çš„å˜é‡ï¼‰ä¸­ï¼Œå¹¶é€šè¿‡**æ–¹æ³•ï¼ˆæŸäº›ç¼–ç¨‹è¯­è¨€ä¸­çš„å‡½æ•°ï¼‰å…¬å¼€å…¶è¡Œä¸ºã€‚æ–¹æ³•å¯¹å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€è¿›è¡Œæ“ä½œï¼Œå¹¶ä½œä¸ºå¯¹è±¡åˆ°å¯¹è±¡é€šä¿¡çš„ä¸»è¦æœºåˆ¶ã€‚éšè—å†…éƒ¨çŠ¶æ€å¹¶è¦æ±‚é€šè¿‡å¯¹è±¡çš„æ–¹æ³•æ‰§è¡Œæ‰€æœ‰äº¤äº’è¢«ç§°ä¸ºæ•°æ®å°è£…â€”â€”é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºæœ¬åŸåˆ™ã€‚ ä»¥è‡ªè¡Œè½¦ä¸ºä¾‹ï¼š å»ºæ¨¡ä¸ºè½¯ä»¶å¯¹è±¡çš„è‡ªè¡Œè½¦ã€‚ é€šè¿‡æŒ‡å®šçŠ¶æ€ï¼ˆå½“å‰é€Ÿåº¦ã€å½“å‰è¸æ¿èŠ‚å¥å’Œå½“å‰æ¡£ä½ï¼‰å¹¶æä¾›æ›´æ”¹è¯¥çŠ¶æ€çš„æ–¹æ³•ï¼Œå¯¹è±¡ä»ç„¶å¯ä»¥æ§åˆ¶å¤–éƒ¨ä¸–ç•Œå¦‚ä½•ä½¿ç”¨å®ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœè‡ªè¡Œè½¦åªæœ‰ 6 ä¸ªæ¡£ä½ï¼Œåˆ™æ¢æ¡£æ–¹æ³•å¯ä»¥æ‹’ç»ä»»ä½•å°äº 1 æˆ–å¤§äº 6 çš„å€¼ã€‚ å°†ä»£ç æ†ç»‘åˆ°å•ç‹¬çš„è½¯ä»¶å¯¹è±¡ä¸­æœ‰å¾ˆå¤šå¥½å¤„ï¼ŒåŒ…æ‹¬ï¼š æ¨¡å—åŒ–ï¼šä¸€ä¸ªå¯¹è±¡çš„æºä»£ç å¯ä»¥ç‹¬ç«‹äºå…¶ä»–å¯¹è±¡çš„æºä»£ç æ¥ç¼–å†™å’Œç»´æŠ¤ã€‚ä¸€æ—¦åˆ›å»ºï¼Œä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ç³»ç»Ÿå†…éƒ¨ä¼ é€’ã€‚ ä¿¡æ¯éšè—ï¼šé€šè¿‡ä»…ä¸å¯¹è±¡çš„æ–¹æ³•äº¤äº’ï¼Œå…¶å†…éƒ¨å®ç°çš„ç»†èŠ‚å¯¹å¤–ç•Œä¿æŒéšè—ã€‚ ä»£ç é‡ç”¨ï¼šå¦‚æœä¸€ä¸ªå¯¹è±¡å·²ç»å­˜åœ¨ï¼ˆå¯èƒ½æ˜¯ç”±å¦ä¸€ä¸ªè½¯ä»¶å¼€å‘äººå‘˜ç¼–å†™çš„ï¼‰ï¼Œæ‚¨å¯ä»¥åœ¨æ‚¨çš„ç¨‹åºä¸­ä½¿ç”¨è¯¥å¯¹è±¡ã€‚è¿™å…è®¸ä¸“å®¶å®æ–½&#x2F;æµ‹è¯•&#x2F;è°ƒè¯•å¤æ‚çš„ã€ç‰¹å®šäºä»»åŠ¡çš„å¯¹è±¡ï¼Œç„¶åæ‚¨å¯ä»¥ç›¸ä¿¡è¿™äº›å¯¹è±¡å¯ä»¥åœ¨æ‚¨è‡ªå·±çš„ä»£ç ä¸­è¿è¡Œã€‚ å¯æ’å…¥æ€§å’Œè°ƒè¯•å®¹æ˜“ï¼šå¦‚æœæŸä¸ªç‰¹å®šå¯¹è±¡è¢«è¯æ˜æ˜¯æœ‰é—®é¢˜çš„ï¼Œæ‚¨å¯ä»¥ç®€å•åœ°å°†å®ƒä»æ‚¨çš„åº”ç”¨ç¨‹åºä¸­åˆ é™¤å¹¶æ’å…¥ä¸€ä¸ªä¸åŒçš„å¯¹è±¡ä½œä¸ºå®ƒçš„æ›¿ä»£å“ã€‚è¿™ç±»ä¼¼äºè§£å†³ç°å®ä¸–ç•Œä¸­çš„æœºæ¢°é—®é¢˜ã€‚å¦‚æœèºæ “æ–­è£‚ï¼Œæ‚¨å¯ä»¥æ›´æ¢å®ƒï¼Œè€Œä¸æ˜¯æ•´å°æœºå™¨ã€‚ ä»€ä¹ˆæ˜¯ç±»ï¼ˆClassï¼‰ï¼Ÿåœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæ‚¨ç»å¸¸ä¼šå‘ç°è®¸å¤šåŒç±»çš„å•ç‹¬å¯¹è±¡ã€‚å¯èƒ½å­˜åœ¨æˆåƒä¸Šä¸‡è¾†å…¶ä»–è‡ªè¡Œè½¦ï¼Œå®ƒä»¬çš„å“ç‰Œå’Œå‹å·éƒ½ç›¸åŒã€‚æ¯è¾†è‡ªè¡Œè½¦éƒ½æ˜¯æ ¹æ®åŒä¸€å¥—è“å›¾åˆ¶é€ çš„ï¼Œå› æ­¤åŒ…å«ç›¸åŒçš„ç»„ä»¶ã€‚åœ¨é¢å‘å¯¹è±¡çš„æœ¯è¯­ä¸­ï¼Œæˆ‘ä»¬è¯´ä½ çš„è‡ªè¡Œè½¦æ˜¯è‡ªè¡Œè½¦ç±»å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ã€‚ç±»æ˜¯åˆ›å»ºå•ä¸ªå¯¹è±¡çš„è“å›¾ã€‚ ä»¥ä¸‹ Bicycleç±»æ˜¯è‡ªè¡Œè½¦çš„ä¸€ç§å¯èƒ½å®ç°ï¼š 12345678910111213141516171819202122232425262728class Bicycle &#123; int cadence = 0; int speed = 0; int gear = 1; void changeCadence(int newValue) &#123; cadence = newValue; &#125; void changeGear(int newValue) &#123; gear = newValue; &#125; void speedUp(int increment) &#123; speed = speed + increment; &#125; void applyBrakes(int decrement) &#123; speed = speed - decrement; &#125; void printStates() &#123; System.out.println(&quot;cadence:&quot; + cadence + &quot; speed:&quot; + speed + &quot; gear:&quot; + gear); &#125;&#125; Java ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•å¯¹æ‚¨æ¥è¯´çœ‹èµ·æ¥å¾ˆæ–°ï¼Œä½†æ˜¯è¿™ä¸ªç±»çš„è®¾è®¡æ˜¯åŸºäºå‰é¢å¯¹è‡ªè¡Œè½¦å¯¹è±¡çš„è®¨è®ºã€‚å­—æ®µcadenceã€speedå’Œgearè¡¨ç¤ºå¯¹è±¡çš„çŠ¶æ€ï¼Œæ–¹æ³•ï¼ˆchangeCadenceã€changeGearç­‰speedUpï¼‰å®šä¹‰å…¶ä¸å¤–ç•Œçš„äº¤äº’ã€‚ æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°Bicycleè¯¥ç±»ä¸åŒ…å«mainæ–¹æ³•ã€‚é‚£æ˜¯å› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºï¼›å®ƒåªæ˜¯å¯èƒ½åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„è‡ªè¡Œè½¦çš„è“å›¾ã€‚åˆ›å»ºå’Œä½¿ç”¨æ–°Bicycleå¯¹è±¡çš„è´£ä»»å±äºåº”ç”¨ç¨‹åºä¸­çš„å…¶ä»–ç±»ã€‚ è¿™æ˜¯ä¸€ä¸ª BicycleDemoåˆ›å»ºä¸¤ä¸ªç‹¬ç«‹Bicycleå¯¹è±¡å¹¶è°ƒç”¨å®ƒä»¬çš„æ–¹æ³•çš„ç±»ï¼š 123456789101112131415161718192021222324class BicycleDemo &#123; public static void main(String[] args) &#123; // Create two different // Bicycle objects Bicycle bike1 = new Bicycle(); Bicycle bike2 = new Bicycle(); // Invoke methods on // those objects bike1.changeCadence(50); bike1.speedUp(10); bike1.changeGear(2); bike1.printStates(); bike2.changeCadence(50); bike2.speedUp(10); bike2.changeGear(2); bike2.changeCadence(40); bike2.speedUp(10); bike2.changeGear(3); bike2.printStates(); &#125;&#125; è¯¥æµ‹è¯•çš„è¾“å‡ºæ‰“å°äº†ä¸¤è¾†è‡ªè¡Œè½¦çš„ç»“æŸè¸æ¿èŠ‚å¥ã€é€Ÿåº¦å’Œæ¡£ä½ï¼š 12cadence:50 speed:10 gear:2cadence:40 speed:20 gear:3 ä»€ä¹ˆæ˜¯ç»§æ‰¿ï¼ˆInheritanceï¼‰ï¼Ÿä¸åŒç§ç±»çš„å¯¹è±¡ä¹‹é—´é€šå¸¸æœ‰ä¸€å®šæ•°é‡çš„å…±åŒç‚¹ã€‚ä¾‹å¦‚ï¼Œå±±åœ°è‡ªè¡Œè½¦ã€å…¬è·¯è‡ªè¡Œè½¦å’ŒåŒäººè‡ªè¡Œè½¦éƒ½å…·æœ‰è‡ªè¡Œè½¦çš„ç‰¹å¾ï¼ˆå½“å‰é€Ÿåº¦ã€å½“å‰è¸æ¿èŠ‚å¥ã€å½“å‰æ¡£ä½ï¼‰ã€‚ç„¶è€Œï¼Œæ¯ä¸€ç§éƒ½å®šä¹‰äº†ä½¿å®ƒä»¬ä¸ä¼—ä¸åŒçš„é™„åŠ åŠŸèƒ½ï¼šåŒäººè‡ªè¡Œè½¦æœ‰ä¸¤ä¸ªåº§ä½å’Œä¸¤ç»„è½¦æŠŠï¼›å…¬è·¯è‡ªè¡Œè½¦æœ‰ä¸‹é™è½¦æŠŠï¼›ä¸€äº›å±±åœ°è‡ªè¡Œè½¦æœ‰ä¸€ä¸ªé¢å¤–çš„é“¾ç¯ï¼Œä½¿å®ƒä»¬çš„ä¼ åŠ¨æ¯”è¾ƒä½ã€‚ é¢å‘å¯¹è±¡ç¼–ç¨‹å…è®¸ç±»ä»å…¶ä»–ç±»ç»§æ‰¿å¸¸ç”¨çš„çŠ¶æ€å’Œè¡Œä¸ºã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒBicycleç°åœ¨æˆä¸ºMountainBike RoadBike TandemBikeçš„è¶…ç±»ã€‚åœ¨ Java ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå…è®¸æ¯ä¸ªç±»æœ‰ä¸€ä¸ªç›´æ¥çš„è¶…ç±»ï¼Œå¹¶ä¸”æ¯ä¸ªè¶…ç±»éƒ½æœ‰æ— é™æ•°é‡çš„å­ç±»çš„æ½œåŠ›ï¼š è‡ªè¡Œè½¦ç±»çš„å±‚æ¬¡ç»“æ„ã€‚ åˆ›å»ºå­ç±»çš„è¯­æ³•å¾ˆç®€å•ã€‚åœ¨ç±»å£°æ˜çš„å¼€å¤´ï¼Œä½¿ç”¨extendså…³é”®å­—ï¼Œåè·Ÿè¦ç»§æ‰¿çš„ç±»çš„åç§°ï¼š 123456class MountainBike extends Bicycle &#123; // new fields and methods defining // a mountain bike would go here&#125; è¿™æä¾›MountainBikeäº†ä¸ ç›¸åŒçš„æ‰€æœ‰å­—æ®µå’Œæ–¹æ³•Bicycleï¼Œä½†å…è®¸å…¶ä»£ç ä¸“é—¨ä¸“æ³¨äºä½¿å…¶ç‹¬ä¸€æ— äºŒçš„åŠŸèƒ½ã€‚è¿™ä½¿æ‚¨çš„å­ç±»çš„ä»£ç æ˜“äºé˜…è¯»ã€‚ä½†æ˜¯ï¼Œæ‚¨å¿…é¡»æ³¨æ„æ­£ç¡®è®°å½•æ¯ä¸ªè¶…ç±»å®šä¹‰çš„çŠ¶æ€å’Œè¡Œä¸ºï¼Œå› ä¸ºè¯¥ä»£ç ä¸ä¼šå‡ºç°åœ¨æ¯ä¸ªå­ç±»çš„æºæ–‡ä»¶ä¸­ã€‚ ä»€ä¹ˆæ˜¯æ¥å£ï¼ˆInterfaceï¼‰ï¼Ÿæ­£å¦‚æ‚¨å·²ç»äº†è§£åˆ°çš„ï¼Œå¯¹è±¡é€šè¿‡å®ƒä»¬å…¬å¼€çš„æ–¹æ³•æ¥å®šä¹‰å®ƒä»¬ä¸å¤–éƒ¨ä¸–ç•Œçš„äº¤äº’ã€‚æ–¹æ³•å½¢æˆäº†å¯¹è±¡ä¸å¤–ç•Œçš„æ¥å£ï¼›ä¾‹å¦‚ï¼Œç”µè§†æœºæ­£é¢çš„æŒ‰é’®æ˜¯æ‚¨ä¸å¡‘æ–™å¤–å£³å¦ä¸€ä¾§ç”µçº¿ä¹‹é—´çš„æ¥å£ã€‚æ‚¨æŒ‰ä¸‹â€œç”µæºâ€æŒ‰é’®å¯ä»¥æ‰“å¼€å’Œå…³é—­ç”µè§†ã€‚ åœ¨æœ€å¸¸è§çš„å½¢å¼ä¸­ï¼Œæ¥å£æ˜¯ä¸€ç»„å…·æœ‰ç©ºä¸»ä½“çš„ç›¸å…³æ–¹æ³•ã€‚å¦‚æœæŒ‡å®šä¸ºæ¥å£ï¼Œè‡ªè¡Œè½¦çš„è¡Œä¸ºå¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011interface Bicycle &#123; // æ¯åˆ†é’Ÿè½¦è½®è½¬æ•° void changeCadence(int newValue); void changeGear(int newValue); void speedUp(int increment); void applyBrakes(int decrement);&#125; è¦å®ç°æ­¤æ¥å£ï¼Œæ‚¨çš„ç±»çš„åç§°å°†æ›´æ”¹ï¼ˆä¾‹å¦‚ï¼Œæ›´æ”¹ä¸ºç‰¹å®šå“ç‰Œçš„è‡ªè¡Œè½¦ï¼Œä¾‹å¦‚ACMEBicycleï¼‰ï¼Œå¹¶ä¸”æ‚¨å°†implementsåœ¨ç±»å£°æ˜ä¸­ä½¿ç”¨å…³é”®å­—ï¼š 123456789101112131415161718192021222324252627282930313233class ACMEBicycle implements Bicycle &#123; int cadence = 0; int speed = 0; int gear = 1; // ç¼–è¯‘å™¨ç°åœ¨éœ€è¦è¯¥æ–¹æ³• // changeCadenceã€changeGearã€speedUp å’Œ applyBrakes // å…¨éƒ¨å®ç°ã€‚ç¼–è¯‘å°†å¤±è´¥ï¼Œå¦‚æœé‚£äº› // æ­¤ç±»ä¸­ç¼ºå°‘æ–¹æ³•ã€‚ void changeCadence(int newValue) &#123; cadence = newValue; &#125; void changeGear(int newValue) &#123; gear = newValue; &#125; void speedUp(int increment) &#123; speed = speed + increment; &#125; void applyBrakes(int decrement) &#123; speed = speed - decrement; &#125; void printStates() &#123; System.out.println(&quot;cadence:&quot; + cadence + &quot; speed:&quot; + speed + &quot; gear:&quot; + gear); &#125;&#125; å®ç°ä¸€ä¸ªæ¥å£å…è®¸ä¸€ä¸ªç±»å¯¹äºå®ƒæ‰¿è¯ºæä¾›çš„è¡Œä¸ºå˜å¾—æ›´åŠ æ­£å¼ã€‚æ¥å£åœ¨ç±»å’Œå¤–éƒ¨ä¸–ç•Œä¹‹é—´å½¢æˆäº†ä¸€ç§å¥‘çº¦ï¼Œè¿™ç§å¥‘çº¦åœ¨æ„å»ºæ—¶ç”±ç¼–è¯‘å™¨å¼ºåˆ¶æ‰§è¡Œã€‚å¦‚æœæ‚¨çš„ç±»å£°ç§°è¦å®ç°ä¸€ä¸ªæ¥å£ï¼Œåˆ™è¯¥æ¥å£å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•éƒ½å¿…é¡»åœ¨è¯¥ç±»æˆåŠŸç¼–è¯‘ä¹‹å‰å‡ºç°åœ¨å…¶æºä»£ç ä¸­ã€‚ æ³¨æ„ï¼š è¦å®é™…ç¼–è¯‘ACMEBicycleè¯¥ç±»ï¼Œæ‚¨éœ€è¦å°†publicå…³é”®å­—æ·»åŠ åˆ°å·²å®ç°çš„æ¥å£æ–¹æ³•çš„å¼€å¤´ã€‚ç¨åæ‚¨å°†åœ¨æœ‰å…³ç±»å’Œå¯¹è±¡ä»¥åŠ æ¥å£å’Œç»§æ‰¿çš„è¯¾ç¨‹ä¸­äº†è§£åˆ°è¿™æ ·åšçš„åŸå›  ã€‚ ä»€ä¹ˆæ˜¯åŒ…ï¼ˆPackageï¼‰ï¼ŸåŒ…ï¼ˆPackageï¼‰æ˜¯ç»„ç»‡ä¸€ç»„ç›¸å…³ç±»å’Œæ¥å£çš„åç§°ç©ºé—´ã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œæ‚¨å¯ä»¥å°†åŒ…è§†ä¸ºç±»ä¼¼äºè®¡ç®—æœºä¸Šçš„ä¸åŒæ–‡ä»¶å¤¹ã€‚æ‚¨å¯ä»¥å°† HTML é¡µé¢ä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œå°†å›¾åƒä¿å­˜åœ¨å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œå°†è„šæœ¬æˆ–åº”ç”¨ç¨‹åºä¿å­˜åœ¨å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚å› ä¸ºç”¨ Java ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„è½¯ä»¶å¯ä»¥ç”±æˆç™¾ä¸Šåƒä¸ªå•ç‹¬çš„ç±»ç»„æˆï¼Œæ‰€ä»¥é€šè¿‡å°†ç›¸å…³çš„ç±»å’Œæ¥å£æ”¾å…¥åŒ…ä¸­æ¥ç»„ç»‡äº‹ç‰©æ˜¯æœ‰æ„ä¹‰çš„ã€‚ Java å¹³å°æä¾›äº†ä¸€ä¸ªåºå¤§çš„ç±»åº“ï¼ˆä¸€ç»„åŒ…ï¼‰ï¼Œé€‚åˆåœ¨æ‚¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚è¿™ä¸ªåº“è¢«ç§°ä¸ºâ€œåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£â€ï¼Œç®€ç§°â€œAPIâ€ã€‚å®ƒçš„åŒ…ä»£è¡¨äº†æœ€å¸¸ä¸é€šç”¨ç¼–ç¨‹ç›¸å…³çš„ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªStringå¯¹è±¡åŒ…å«å­—ç¬¦ä¸²çš„çŠ¶æ€å’Œè¡Œä¸ºï¼›Fileå¯¹è±¡å…è®¸ç¨‹åºå‘˜è½»æ¾åœ°åˆ›å»ºã€åˆ é™¤ã€æ£€æŸ¥ã€æ¯”è¾ƒæˆ–ä¿®æ”¹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ï¼›ä¸€ä¸ªSocketå¯¹è±¡å…è®¸åˆ›å»ºå’Œä½¿ç”¨ç½‘ç»œå¥—æ¥å­—ï¼›å„ç§ GUI å¯¹è±¡æ§åˆ¶æŒ‰é’®å’Œå¤é€‰æ¡†ä»¥åŠä¸å›¾å½¢ç”¨æˆ·ç•Œé¢ç›¸å…³çš„ä»»ä½•å…¶ä»–å†…å®¹ã€‚æœ‰æ•°åƒç§è¯¾ç¨‹å¯ä¾›é€‰æ‹©ã€‚è¿™ä½¿æ‚¨ï¼ˆç¨‹åºå‘˜ï¼‰å¯ä»¥ä¸“æ³¨äºç‰¹å®šåº”ç”¨ç¨‹åºçš„è®¾è®¡ï¼Œè€Œä¸æ˜¯ä½¿å…¶å·¥ä½œæ‰€éœ€çš„åŸºç¡€ç»“æ„ã€‚ Java å¹³å° API è§„èŒƒåŒ…å« Java SE å¹³å°æä¾›çš„æ‰€æœ‰åŒ…ã€æ¥å£ã€ç±»ã€å­—æ®µå’Œæ–¹æ³•çš„å®Œæ•´åˆ—è¡¨ã€‚ åœ¨æµè§ˆå™¨ä¸­åŠ è½½è¯¥é¡µé¢å¹¶å°†å…¶æ·»åŠ ä¸ºä¹¦ç­¾ã€‚ä½œä¸ºç¨‹åºå‘˜ï¼Œå®ƒå°†æˆä¸ºæ‚¨æœ€é‡è¦çš„å‚è€ƒæ–‡æ¡£ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"é¢å‘å¯¹è±¡","slug":"é¢å‘å¯¹è±¡","permalink":"https://guoshunfa.com/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"}]},{"title":"Oracle Javaè¯­è¨€åŸºç¡€","slug":"è½¯ä»¶å¼€å‘/æŠ€æœ¯/ç¼–ç¨‹è¯­è¨€/java/Oracle-Javaè¯­è¨€åŸºç¡€","date":"2020-07-01T04:01:01.000Z","updated":"2024-01-28T11:41:39.283Z","comments":true,"path":"2020/07/Oracle-Javaè¯­è¨€åŸºç¡€/","link":"","permalink":"https://guoshunfa.com/2020/07/Oracle-Java%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/","excerpt":"","text":"æœ¬æ–‡ç« ä»¥jdk8ä¸ºåŸºç¡€è¿›è¡Œç¼–å†™ï¼Œå¦‚æœæƒ³æŸ¥çœ‹åç»­çš„ç‰ˆæœ¬å¯ä»¥å‰å¾€jdkç‰ˆæœ¬ç›®å½•ä¸‹æŸ¥çœ‹ã€‚ ç¿»è¯‘è‡ªï¼šhttps://docs.oracle.com/javase/tutorial/java/nutsandbolts/index.html å˜é‡å¯¹è±¡å°†å…¶çŠ¶æ€å­˜å‚¨åœ¨å­—æ®µä¸­ã€‚ 123int cadence = 0;int speed = 0;int gear = 1; ä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Ÿ è®¨è®ºå‘æ‚¨ä»‹ç»äº†å­—æ®µï¼Œä½†æ‚¨å¯èƒ½è¿˜æœ‰ä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚ï¼šå‘½åå­—æ®µçš„è§„åˆ™å’Œçº¦å®šæ˜¯ä»€ä¹ˆï¼Ÿ é™¤äº†intï¼Œè¿˜æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿ å­—æ®µåœ¨å£°æ˜æ—¶æ˜¯å¦å¿…é¡»åˆå§‹åŒ–ï¼Ÿ å¦‚æœæœªæ˜¾å¼åˆå§‹åŒ–ï¼Œæ˜¯å¦ä¸ºå­—æ®µåˆ†é…äº†é»˜è®¤å€¼ï¼Ÿ æˆ‘ä»¬å°†åœ¨æœ¬è¯¾ä¸­æ¢è®¨æ­¤ç±»é—®é¢˜çš„ç­”æ¡ˆï¼Œä½†åœ¨æ­¤ä¹‹å‰ï¼Œæ‚¨å¿…é¡»é¦–å…ˆäº†è§£ä¸€äº›æŠ€æœ¯ä¸Šçš„åŒºåˆ«ã€‚ åœ¨ Java ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæœ¯è¯­â€œå­—æ®µâ€å’Œâ€œå˜é‡â€åŒæ—¶ä½¿ç”¨ï¼› è¿™æ˜¯æ–°å¼€å‘äººå‘˜ä¹‹é—´å¸¸è§çš„æ··æ·†æ¥æºï¼Œå› ä¸ºä¸¤è€…ä¼¼ä¹æŒ‡çš„æ˜¯åŒä¸€ä»¶äº‹ã€‚ Java ç¼–ç¨‹è¯­è¨€å®šä¹‰äº†ä»¥ä¸‹å‡ ç§å˜é‡ï¼š å®ä¾‹å˜é‡ï¼ˆéé™æ€å­—æ®µï¼‰ ä»æŠ€æœ¯ä¸Šè®²ï¼Œå¯¹è±¡å°†å…¶å„è‡ªçš„çŠ¶æ€å­˜å‚¨åœ¨â€œéé™æ€å­—æ®µâ€ä¸­ï¼Œå³æ²¡æœ‰ä½¿ç”¨ static å…³é”®å­—å£°æ˜çš„å­—æ®µã€‚ éé™æ€å­—æ®µä¹Ÿç§°ä¸ºå®ä¾‹å˜é‡ï¼Œå› ä¸ºå®ƒä»¬çš„å€¼å¯¹äºç±»çš„æ¯ä¸ªå®ä¾‹ï¼ˆæ¢å¥è¯è¯´ï¼Œå¯¹äºæ¯ä¸ªå¯¹è±¡ï¼‰éƒ½æ˜¯å”¯ä¸€çš„ï¼› ä¸€è¾†è‡ªè¡Œè½¦çš„å½“å‰é€Ÿåº¦ç‹¬ç«‹äºå¦ä¸€è¾†è‡ªè¡Œè½¦çš„å½“å‰é€Ÿåº¦ã€‚ ç±»å˜é‡ï¼ˆé™æ€å­—æ®µï¼‰ ç±»å˜é‡æ˜¯ç”¨é™æ€ä¿®é¥°ç¬¦å£°æ˜çš„ä»»ä½•å­—æ®µï¼› è¿™å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå˜é‡åªå­˜åœ¨ä¸€ä¸ªå‰¯æœ¬ï¼Œä¸ç®¡è¿™ä¸ªç±»è¢«å®ä¾‹åŒ–äº†å¤šå°‘æ¬¡ã€‚ å®šä¹‰ç‰¹å®šç±»å‹è‡ªè¡Œè½¦çš„æ¡£ä½æ•°é‡çš„å­—æ®µå¯ä»¥æ ‡è®°ä¸ºé™æ€ï¼Œå› ä¸ºä»æ¦‚å¿µä¸Šè®²ï¼Œç›¸åŒæ•°é‡çš„æ¡£ä½å°†é€‚ç”¨äºæ‰€æœ‰å®ä¾‹ã€‚ ä»£ç static int numGears &#x3D; 6; ä¼šåˆ›å»ºè¿™æ ·ä¸€ä¸ªé™æ€å­—æ®µã€‚ æ­¤å¤–ï¼Œå¯ä»¥æ·»åŠ å…³é”®å­— final ä»¥æŒ‡ç¤ºé½¿è½®æ•°æ°¸è¿œä¸ä¼šæ”¹å˜ã€‚ å±€éƒ¨å˜é‡ ä¸å¯¹è±¡åœ¨å­—æ®µä¸­å­˜å‚¨å…¶çŠ¶æ€çš„æ–¹å¼ç±»ä¼¼ï¼Œæ–¹æ³•é€šå¸¸ä¼šå°†å…¶ä¸´æ—¶çŠ¶æ€å­˜å‚¨åœ¨å±€éƒ¨å˜é‡ä¸­ã€‚ å£°æ˜å±€éƒ¨å˜é‡çš„è¯­æ³•ç±»ä¼¼äºå£°æ˜å­—æ®µï¼ˆä¾‹å¦‚ï¼Œint count &#x3D; 0;ï¼‰ã€‚ æ²¡æœ‰ç‰¹æ®Šçš„å…³é”®å­—å°†å˜é‡æŒ‡å®šä¸ºå±€éƒ¨å˜é‡ï¼› è¯¥å†³å®šå®Œå…¨æ¥è‡ªå£°æ˜å˜é‡çš„ä½ç½®â€”â€”å®ƒä½äºæ–¹æ³•çš„å·¦å¤§æ‹¬å·å’Œå³å¤§æ‹¬å·ä¹‹é—´ã€‚ å› æ­¤ï¼Œå±€éƒ¨å˜é‡ä»…å¯¹å£°æ˜å®ƒä»¬çš„æ–¹æ³•å¯è§ï¼› ç­ä¸Šå…¶ä»–äººæ— æ³•è®¿é—®å®ƒä»¬ã€‚ å‚æ•° æ‚¨å·²ç»åœ¨ Bicycle ç±»å’Œâ€œHello World!â€çš„ä¸»è¦æ–¹æ³•ä¸­çœ‹åˆ°äº†å‚æ•°ç¤ºä¾‹ã€‚ åº”ç”¨ã€‚ å›æƒ³ä¸€ä¸‹ main æ–¹æ³•çš„ç­¾åæ˜¯ public static void main(String[] args)ã€‚ æ­¤å¤„ï¼Œargs å˜é‡æ˜¯æ­¤æ–¹æ³•çš„å‚æ•°ã€‚ è¦è®°ä½çš„é‡è¦ä¸€ç‚¹æ˜¯å‚æ•°æ€»æ˜¯è¢«å½’ç±»ä¸ºâ€œå˜é‡â€è€Œä¸æ˜¯â€œå­—æ®µâ€ã€‚ è¿™ä¹Ÿé€‚ç”¨äºæ‚¨å°†åœ¨æœ¬æ•™ç¨‹åé¢äº†è§£çš„å…¶ä»–å‚æ•°æ¥å—æ„é€ ï¼ˆä¾‹å¦‚æ„é€ å‡½æ•°å’Œå¼‚å¸¸å¤„ç†ç¨‹åºï¼‰ã€‚ è¯è™½å¦‚æ­¤ï¼Œæœ¬æ•™ç¨‹çš„å…¶ä½™éƒ¨åˆ†åœ¨è®¨è®ºå­—æ®µå’Œå˜é‡æ—¶ä½¿ç”¨ä»¥ä¸‹ä¸€èˆ¬å‡†åˆ™ã€‚ å¦‚æœæˆ‘ä»¬åœ¨è°ˆè®ºâ€œä¸€èˆ¬çš„å­—æ®µâ€ï¼ˆä¸åŒ…æ‹¬å±€éƒ¨å˜é‡å’Œå‚æ•°ï¼‰ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç®€å•åœ°è¯´â€œå­—æ®µâ€ã€‚ å¦‚æœè®¨è®ºé€‚ç”¨äºâ€œä»¥ä¸Šæ‰€æœ‰â€ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°è¯´â€œå˜é‡â€ã€‚ å¦‚æœä¸Šä¸‹æ–‡éœ€è¦åŒºåˆ†ï¼Œæˆ‘ä»¬å°†é…Œæƒ…ä½¿ç”¨ç‰¹å®šæœ¯è¯­ï¼ˆé™æ€å­—æ®µã€å±€éƒ¨å˜é‡ç­‰ï¼‰ã€‚ æ‚¨å¯èƒ½å¶å°”ä¹Ÿä¼šçœ‹åˆ°â€œæˆå‘˜â€ä¸€è¯çš„ä½¿ç”¨ã€‚ ç±»å‹çš„å­—æ®µã€æ–¹æ³•å’ŒåµŒå¥—ç±»å‹ç»Ÿç§°ä¸ºå…¶æˆå‘˜ã€‚ å‘½åå¯¹äºå…è®¸ä½¿ç”¨çš„åç§°ç±»å‹ï¼Œæ¯ç§ç¼–ç¨‹è¯­è¨€éƒ½æœ‰è‡ªå·±çš„ä¸€å¥—è§„åˆ™å’Œçº¦å®šï¼ŒJava ç¼–ç¨‹è¯­è¨€ä¹Ÿä¸ä¾‹å¤–ã€‚ å‘½åå˜é‡çš„è§„åˆ™å’Œçº¦å®šå¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š å˜é‡åç§°åŒºåˆ†å¤§å°å†™ã€‚ å˜é‡çš„åç§°å¯ä»¥æ˜¯ä»»ä½•åˆæ³•çš„æ ‡è¯†ç¬¦â€”â€”ä¸€ä¸ªæ— é™é•¿åº¦çš„ Unicode å­—æ¯å’Œæ•°å­—åºåˆ—ï¼Œä»¥å­—æ¯ã€ç¾å…ƒç¬¦å·â€œ$â€æˆ–ä¸‹åˆ’çº¿å­—ç¬¦â€œ_â€å¼€å¤´ã€‚ ç„¶è€Œï¼Œçº¦å®šæ˜¯å§‹ç»ˆä»¥å­—æ¯å¼€å¤´å˜é‡åï¼Œè€Œä¸æ˜¯â€œ$â€æˆ–â€œ_â€ã€‚ æ­¤å¤–ï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œç¾å…ƒç¬¦å·å­—ç¬¦ä»ä¸ä½¿ç”¨ã€‚ æ‚¨å¯èƒ½ä¼šå‘ç°æŸäº›æƒ…å†µä¸‹è‡ªåŠ¨ç”Ÿæˆçš„åç§°å°†åŒ…å«ç¾å…ƒç¬¦å·ï¼Œä½†æ‚¨çš„å˜é‡åç§°åº”å§‹ç»ˆé¿å…ä½¿ç”¨å®ƒã€‚ ä¸‹åˆ’çº¿å­—ç¬¦ä¹Ÿå­˜åœ¨ç±»ä¼¼çš„çº¦å®šï¼› è™½ç„¶ä»¥â€œ_â€å¼€å¤´çš„å˜é‡ååœ¨æŠ€æœ¯ä¸Šæ˜¯åˆæ³•çš„ï¼Œä½†ä¸é¼“åŠ±è¿™ç§åšæ³•ã€‚ ä¸å…è®¸æœ‰ç©ºç™½ã€‚ åç»­å­—ç¬¦å¯ä»¥æ˜¯å­—æ¯ã€æ•°å­—ã€ç¾å…ƒç¬¦å·æˆ–ä¸‹åˆ’çº¿å­—ç¬¦ã€‚ æƒ¯ä¾‹ï¼ˆå’Œå¸¸è¯†ï¼‰ä¹Ÿé€‚ç”¨äºæ­¤è§„åˆ™ã€‚ ä¸ºå˜é‡é€‰æ‹©åç§°æ—¶ï¼Œè¯·ä½¿ç”¨å®Œæ•´çš„å•è¯è€Œä¸æ˜¯æ™¦æ¶©éš¾æ‡‚çš„ç¼©å†™ã€‚ è¿™æ ·åšå°†ä½¿æ‚¨çš„ä»£ç æ›´æ˜“äºé˜…è¯»å’Œç†è§£ã€‚ åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå®ƒè¿˜ä¼šä½¿æ‚¨çš„ä»£ç è‡ªæ–‡æ¡£åŒ–ï¼› ä¾‹å¦‚ï¼Œåä¸º cadenceã€speed å’Œ gear çš„å­—æ®µæ¯”ç¼©å†™ç‰ˆæœ¬ï¼ˆå¦‚ sã€c å’Œ gï¼‰æ›´ç›´è§‚ã€‚ å¦è¯·è®°ä½ï¼Œæ‚¨é€‰æ‹©çš„åç§°ä¸èƒ½æ˜¯å…³é”®å­—æˆ–ä¿ç•™å­—ã€‚ å¦‚æœæ‚¨é€‰æ‹©çš„åç§°åªæœ‰ä¸€ä¸ªå•è¯ï¼Œè¯·å°†è¯¥å•è¯å…¨éƒ¨å°å†™ã€‚ å¦‚æœå®ƒç”±å¤šä¸ªå•è¯ç»„æˆï¼Œåˆ™å°†æ¯ä¸ªåç»­å•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ã€‚ åç§° gearRatio å’Œ currentGear æ˜¯è¯¥çº¦å®šçš„ä¸»è¦ç¤ºä¾‹ã€‚ å¦‚æœæ‚¨çš„å˜é‡å­˜å‚¨ä¸€ä¸ªå¸¸é‡å€¼ï¼Œä¾‹å¦‚ static final int NUM_GEARS &#x3D; 6ï¼Œåˆ™çº¦å®šä¼šç•¥æœ‰å˜åŒ–ï¼Œå°†æ¯ä¸ªå­—æ¯å¤§å†™å¹¶ä½¿ç”¨ä¸‹åˆ’çº¿å­—ç¬¦åˆ†éš”åç»­å•è¯ã€‚ æŒ‰ç…§æƒ¯ä¾‹ï¼Œä¸‹åˆ’çº¿å­—ç¬¦ä»ä¸åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚ åŸå§‹æ•°æ®ç±»å‹Java ç¼–ç¨‹è¯­è¨€æ˜¯é™æ€ç±»å‹çš„ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰å˜é‡éƒ½å¿…é¡»å…ˆå£°æ˜æ‰èƒ½ä½¿ç”¨ã€‚ è¿™æ¶‰åŠå£°æ˜å˜é‡çš„ç±»å‹å’Œåç§°ï¼Œæ­£å¦‚æ‚¨å·²ç»çœ‹åˆ°çš„ï¼š 1int gear = 1; è¿™æ ·åšä¼šå‘Šè¯‰æ‚¨çš„ç¨‹åºå­˜åœ¨ä¸€ä¸ªåä¸ºâ€œgearâ€çš„å­—æ®µï¼Œå…¶ä¸­åŒ…å«æ•°å€¼æ•°æ®ï¼Œå¹¶ä¸”åˆå§‹å€¼ä¸ºâ€œ1â€ã€‚ å˜é‡çš„æ•°æ®ç±»å‹å†³å®šäº†å®ƒå¯èƒ½åŒ…å«çš„å€¼ï¼Œä»¥åŠå¯èƒ½å¯¹å…¶æ‰§è¡Œçš„æ“ä½œã€‚ é™¤äº† int ä¹‹å¤–ï¼ŒJava ç¼–ç¨‹è¯­è¨€è¿˜æ”¯æŒå…¶ä»–ä¸ƒç§åŸå§‹æ•°æ®ç±»å‹ã€‚ åŸºæœ¬ç±»å‹ç”±è¯­è¨€é¢„å®šä¹‰ï¼Œå¹¶ç”±ä¿ç•™å…³é”®å­—å‘½åã€‚ åŸå§‹å€¼ä¸ä¸å…¶ä»–åŸå§‹å€¼å…±äº«çŠ¶æ€ã€‚ Java ç¼–ç¨‹è¯­è¨€æ”¯æŒçš„å…«ç§åŸºæœ¬æ•°æ®ç±»å‹æ˜¯ï¼š byteï¼šbyte æ•°æ®ç±»å‹æ˜¯ä¸€ä¸ª 8 ä½æœ‰ç¬¦å·äºŒè¿›åˆ¶è¡¥ç æ•´æ•°ã€‚ å®ƒçš„æœ€å°å€¼ä¸º -128ï¼Œæœ€å¤§å€¼ä¸º 127ï¼ˆå«ï¼‰ã€‚ å­—èŠ‚æ•°æ®ç±»å‹å¯ç”¨äºåœ¨å¤§å‹æ•°ç»„ä¸­èŠ‚çœå†…å­˜ï¼Œå…¶ä¸­å†…å­˜èŠ‚çœå®é™…ä¸Šå¾ˆé‡è¦ã€‚ å®ƒä»¬ä¹Ÿå¯ä»¥ç”¨æ¥ä»£æ›¿ int ï¼Œå®ƒä»¬çš„é™åˆ¶æœ‰åŠ©äºé˜æ˜æ‚¨çš„ä»£ç ï¼› å˜é‡çš„èŒƒå›´æ˜¯æœ‰é™çš„è¿™ä¸€äº‹å®å¯ä»¥ä½œä¸ºä¸€ç§æ–‡æ¡£å½¢å¼ã€‚ shortï¼šshort æ•°æ®ç±»å‹æ˜¯ä¸€ä¸ª 16 ä½æœ‰ç¬¦å·äºŒè¿›åˆ¶è¡¥ç æ•´æ•°ã€‚ å®ƒçš„æœ€å°å€¼ä¸º-32,768ï¼Œæœ€å¤§å€¼ä¸º32,767ï¼ˆå«ï¼‰ã€‚ ä¸ byte ä¸€æ ·ï¼Œé€‚ç”¨ç›¸åŒçš„å‡†åˆ™ï¼šåœ¨å†…å­˜èŠ‚çœå®é™…å¾ˆé‡è¦çš„æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ short æ¥èŠ‚çœå¤§å‹æ•°ç»„ä¸­çš„å†…å­˜ã€‚ intï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œintæ•°æ®ç±»å‹æ˜¯ä¸€ä¸ª32ä½æœ‰ç¬¦å·äºŒè¿›åˆ¶è¡¥ç æ•´æ•°ï¼Œæœ€å°å€¼ä¸º-2^31^ï¼Œæœ€å¤§å€¼ä¸º2^31^-1ã€‚ åœ¨ Java SE 8 åŠä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ int æ•°æ®ç±»å‹æ¥è¡¨ç¤ºä¸€ä¸ªæ— ç¬¦å·çš„ 32 ä½æ•´æ•°ï¼Œæœ€å°å€¼ä¸º 0ï¼Œæœ€å¤§å€¼ä¸º 2^32^-1ã€‚ ä½¿ç”¨ Integer ç±»å°† int æ•°æ®ç±»å‹ç”¨ä½œæ— ç¬¦å·æ•´æ•°ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æ•°å­—ç±»éƒ¨åˆ†ã€‚ Integer ç±»ä¸­æ·»åŠ äº† compareUnsignedã€divideUnsigned ç­‰é™æ€æ–¹æ³•ï¼Œä»¥æ”¯æŒæ— ç¬¦å·æ•´æ•°çš„ç®—æœ¯è¿ç®—ã€‚ longï¼šlong æ•°æ®ç±»å‹æ˜¯ä¸€ä¸ª 64 ä½äºŒè¿›åˆ¶è¡¥ç æ•´æ•°ã€‚ signed long çš„æœ€å°å€¼ä¸º -2^63^ï¼Œæœ€å¤§å€¼ä¸º 2^63^-1ã€‚ åœ¨ Java SE 8 åŠä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ long æ•°æ®ç±»å‹æ¥è¡¨ç¤ºæ— ç¬¦å·çš„ 64 ä½ longï¼Œå…¶æœ€å°å€¼ä¸º 0ï¼Œæœ€å¤§å€¼ä¸º 2^64^-1ã€‚ å½“æ‚¨éœ€è¦çš„å€¼èŒƒå›´æ¯” int æä¾›çš„èŒƒå›´æ›´å®½æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤æ•°æ®ç±»å‹ã€‚ Long ç±»è¿˜åŒ…å« compareUnsignedã€divideUnsigned ç­‰æ–¹æ³•æ¥æ”¯æŒ unsigned long çš„ç®—æœ¯è¿ç®—ã€‚ floatï¼šfloat æ•°æ®ç±»å‹æ˜¯å•ç²¾åº¦ 32 ä½ IEEE 754 æµ®ç‚¹æ•°ã€‚ å®ƒçš„å–å€¼èŒƒå›´è¶…å‡ºäº†æœ¬æ¬¡è®¨è®ºçš„èŒƒå›´ï¼Œä½†åœ¨ Java è¯­è¨€è§„èŒƒçš„æµ®ç‚¹ç±»å‹ã€æ ¼å¼å’Œå€¼éƒ¨åˆ†ä¸­è¿›è¡Œäº†æŒ‡å®šã€‚ å¯¹äº byte å’Œ short çš„å»ºè®®ï¼Œå¦‚æœæ‚¨éœ€è¦åœ¨å¤§å‹æµ®ç‚¹æ•°æ•°ç»„ä¸­èŠ‚çœå†…å­˜ï¼Œè¯·ä½¿ç”¨ floatï¼ˆè€Œä¸æ˜¯ doubleï¼‰ã€‚ è¿™ç§æ•°æ®ç±»å‹ä¸åº”è¯¥ç”¨äºç²¾ç¡®å€¼ï¼Œä¾‹å¦‚è´§å¸ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦æ”¹ç”¨ java.math.BigDecimal ç±»ã€‚ Numberså’Œand Stringsæ¶µç›–äº† BigDecimal å’Œ Java å¹³å°æä¾›çš„å…¶ä»–æœ‰ç”¨çš„ç±»ã€‚ doubleï¼šdouble æ•°æ®ç±»å‹æ˜¯åŒç²¾åº¦ 64 ä½ IEEE 754 æµ®ç‚¹æ•°ã€‚ å®ƒçš„å–å€¼èŒƒå›´è¶…å‡ºäº†æœ¬æ¬¡è®¨è®ºçš„èŒƒå›´ï¼Œä½†åœ¨ Java è¯­è¨€è§„èŒƒçš„æµ®ç‚¹ç±»å‹ã€æ ¼å¼å’Œå€¼éƒ¨åˆ†ä¸­è¿›è¡Œäº†æŒ‡å®šã€‚ å¯¹äºåè¿›åˆ¶å€¼ï¼Œæ­¤æ•°æ®ç±»å‹é€šå¸¸æ˜¯é»˜è®¤é€‰æ‹©ã€‚ å¦‚ä¸Šæ‰€è¿°ï¼Œè¿™ç§æ•°æ®ç±»å‹ä¸åº”è¯¥ç”¨äºç²¾ç¡®å€¼ï¼Œä¾‹å¦‚è´§å¸ã€‚ booleanï¼šå¸ƒå°”æ•°æ®ç±»å‹åªæœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼štrue å’Œ falseã€‚ å°†æ­¤æ•°æ®ç±»å‹ç”¨äºè·Ÿè¸ªçœŸ&#x2F;å‡æ¡ä»¶çš„ç®€å•æ ‡å¿—ã€‚ è¿™ç§æ•°æ®ç±»å‹ä»£è¡¨ä¸€ä½ä¿¡æ¯ï¼Œä½†å®ƒçš„â€œå¤§å°â€å¹¶ä¸æ˜¯ç²¾ç¡®å®šä¹‰çš„ã€‚ charï¼šchar æ•°æ®ç±»å‹æ˜¯å•ä¸ª 16 ä½ Unicode å­—ç¬¦ã€‚ å®ƒçš„æœ€å°å€¼ä¸º â€˜\\u0000â€™ï¼ˆæˆ– 0ï¼‰ï¼Œæœ€å¤§å€¼ä¸º â€˜\\uffffâ€™ï¼ˆæˆ– 65,535ï¼‰ã€‚ é™¤äº†ä¸Šé¢åˆ—å‡ºçš„å…«ç§åŸºæœ¬æ•°æ®ç±»å‹ä¹‹å¤–ï¼ŒJava ç¼–ç¨‹è¯­è¨€è¿˜é€šè¿‡ java.lang.String ç±»æä¾›äº†å¯¹å­—ç¬¦ä¸²çš„ç‰¹æ®Šæ”¯æŒã€‚ å°†å­—ç¬¦ä¸²æ‹¬åœ¨åŒå¼•å·å†…å°†è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ String å¯¹è±¡ï¼› ä¾‹å¦‚ï¼ŒString s &#x3D; â€œthis is a stringâ€;ã€‚ å­—ç¬¦ä¸²å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦åˆ›å»ºï¼Œå®ƒä»¬çš„å€¼å°±æ— æ³•æ›´æ”¹ã€‚ String ç±»åœ¨æŠ€æœ¯ä¸Šä¸æ˜¯åŸå§‹æ•°æ®ç±»å‹ï¼Œä½†è€ƒè™‘åˆ°è¯­è¨€å¯¹å®ƒçš„ç‰¹æ®Šæ”¯æŒï¼Œæ‚¨å¯èƒ½å€¾å‘äºè¿™æ ·è®¤ä¸ºã€‚ é»˜è®¤å€¼å£°æ˜å­—æ®µæ—¶å¹¶ä¸æ€»æ˜¯éœ€è¦èµ‹å€¼ã€‚ å·²å£°æ˜ä½†æœªåˆå§‹åŒ–çš„å­—æ®µå°†ç”±ç¼–è¯‘å™¨è®¾ç½®ä¸ºåˆç†çš„é»˜è®¤å€¼ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œæ­¤é»˜è®¤å€¼å°†ä¸ºé›¶æˆ–ç©ºå€¼ï¼Œå…·ä½“å–å†³äºæ•°æ®ç±»å‹ã€‚ ç„¶è€Œï¼Œä¾èµ–äºè¿™æ ·çš„é»˜è®¤å€¼é€šå¸¸è¢«è®¤ä¸ºæ˜¯ç³Ÿç³•çš„ç¼–ç¨‹é£æ ¼ã€‚ ä¸‹è¡¨æ€»ç»“äº†ä¸Šè¿°æ•°æ®ç±»å‹çš„é»˜è®¤å€¼ã€‚ æ•°æ®ç±»å‹ é»˜è®¤å€¼ (for fields) byte 0 short 0 int 0 long 0L float 0.0f double 0.0d char â€˜\\u0000â€™ String (or any object) null boolean false å±€éƒ¨å˜é‡ç•¥æœ‰ä¸åŒï¼› ç¼–è¯‘å™¨æ°¸è¿œä¸ä¼šä¸ºæœªåˆå§‹åŒ–çš„å±€éƒ¨å˜é‡åˆ†é…é»˜è®¤å€¼ã€‚ å¦‚æœæ‚¨ä¸èƒ½åœ¨å£°æ˜å±€éƒ¨å˜é‡çš„åœ°æ–¹å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼Œè¯·ç¡®ä¿åœ¨å°è¯•ä½¿ç”¨å®ƒä¹‹å‰ä¸ºå…¶åˆ†é…ä¸€ä¸ªå€¼ã€‚ è®¿é—®æœªåˆå§‹åŒ–çš„å±€éƒ¨å˜é‡å°†å¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚ æ–‡å­—æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œåœ¨åˆå§‹åŒ–åŸå§‹ç±»å‹çš„å˜é‡æ—¶æ²¡æœ‰ä½¿ç”¨ new å…³é”®å­—ã€‚ åŸå§‹ç±»å‹æ˜¯è¯­è¨€ä¸­å†…ç½®çš„ç‰¹æ®Šæ•°æ®ç±»å‹ï¼› å®ƒä»¬ä¸æ˜¯ä»ç±»åˆ›å»ºçš„å¯¹è±¡ã€‚ æ–‡å­—æ˜¯å›ºå®šå€¼çš„æºä»£ç è¡¨ç¤ºï¼› æ–‡å­—ç›´æ¥åœ¨æ‚¨çš„ä»£ç ä¸­è¡¨ç¤ºï¼Œæ— éœ€è®¡ç®—ã€‚ å¦‚ä¸‹æ‰€ç¤ºï¼Œå¯ä»¥å°†æ–‡å­—åˆ†é…ç»™åŸå§‹ç±»å‹çš„å˜é‡ï¼š 12345boolean result = true;char capitalC = &#x27;C&#x27;;byte b = 100;short s = 10000;int i = 100000; æ•´æ•°æ–‡å­—å¦‚æœæ•´æ•°æ–‡å­—ä»¥å­—æ¯ L æˆ– l ç»“å°¾ï¼Œåˆ™å®ƒæ˜¯ long ç±»å‹ï¼› å¦åˆ™å®ƒæ˜¯intç±»å‹ã€‚ å»ºè®®æ‚¨ä½¿ç”¨å¤§å†™å­—æ¯ Lï¼Œå› ä¸ºå°å†™å­—æ¯ l å¾ˆéš¾ä¸æ•°å­— 1 åŒºåˆ†å¼€æ¥ã€‚ æ•´æ•°ç±»å‹ byteã€shortã€int å’Œ long çš„å€¼å¯ä»¥ä» int æ–‡å­—åˆ›å»ºã€‚ å¯ä»¥ä» long æ–‡å­—åˆ›å»ºè¶…å‡º int èŒƒå›´çš„ long ç±»å‹çš„å€¼ã€‚ æ•´æ•°æ–‡å­—å¯ä»¥ç”¨è¿™äº›æ•°å­—ç³»ç»Ÿè¡¨ç¤ºï¼š åè¿›åˆ¶ï¼šä»¥ 10 ä¸ºåº•ï¼Œå…¶æ•°å­—ç”±æ•°å­— 0 åˆ° 9 ç»„æˆï¼› è¿™æ˜¯ä½ æ¯å¤©ä½¿ç”¨çš„æ•°å­—ã€‚ åå…­è¿›åˆ¶ï¼šåŸºæ•°ä¸º 16ï¼Œå…¶æ•°å­—ç”±æ•°å­— 0 åˆ° 9 å’Œå­—æ¯ A åˆ° F ç»„æˆã€‚ äºŒè¿›åˆ¶ï¼šåŸºæ•°ä¸º 2ï¼Œå…¶æ•°å­—ç”±æ•°å­— 0 å’Œ 1 ç»„æˆï¼ˆæ‚¨å¯ä»¥åœ¨ Java SE 7 åŠæ›´é«˜ç‰ˆæœ¬ä¸­åˆ›å»ºäºŒè¿›åˆ¶æ–‡å­—ï¼‰ã€‚ å¯¹äºé€šç”¨ç¼–ç¨‹ï¼Œåè¿›åˆ¶ç³»ç»Ÿå¯èƒ½æ˜¯æ‚¨å°†ä½¿ç”¨çš„å”¯ä¸€æ•°å­—ç³»ç»Ÿã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨éœ€è¦ä½¿ç”¨å…¶ä»–æ•°å­—ç³»ç»Ÿï¼Œä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†æ­£ç¡®çš„è¯­æ³•ã€‚ å‰ç¼€ 0x è¡¨ç¤ºåå…­è¿›åˆ¶ï¼Œ0b è¡¨ç¤ºäºŒè¿›åˆ¶ï¼š 123456// The number 26, 10è¿›åˆ¶int decVal = 26;// The number 26, 16è¿›åˆ¶int hexVal = 0x1a;// The number 26, 2è¿›åˆ¶int binVal = 0b11010; æµ®ç‚¹æ–‡å­—å¦‚æœæµ®ç‚¹æ–‡å­—ä»¥å­—æ¯ F æˆ– f ç»“å°¾ï¼Œåˆ™å®ƒæ˜¯ float ç±»å‹ï¼› å¦åˆ™å®ƒçš„ç±»å‹æ˜¯ double å¹¶ä¸”å®ƒå¯ä»¥é€‰æ‹©ä»¥å­—æ¯ D æˆ– d ç»“å°¾ã€‚ æµ®ç‚¹ç±»å‹ï¼ˆfloat å’Œ doubleï¼‰ä¹Ÿå¯ä»¥ä½¿ç”¨ E æˆ– eï¼ˆç§‘å­¦è®°æ•°æ³•ï¼‰ã€F æˆ– fï¼ˆ32 ä½æµ®ç‚¹æ•°ï¼‰å’Œ D æˆ– dï¼ˆ64 ä½åŒç²¾åº¦æ•°ï¼›è¿™æ˜¯é»˜è®¤å€¼ï¼Œç”± å…¬çº¦è¢«çœç•¥ï¼‰ã€‚ 1234double d1 = 123.4;// ä¸ d1 ç›¸åŒçš„å€¼ï¼Œä½†é‡‡ç”¨ç§‘å­¦è®°æ•°æ³•double d2 = 1.234e2;float f1 = 123.4f; å­—ç¬¦å’Œå­—ç¬¦ä¸²æ–‡å­—char å’Œ String ç±»å‹çš„æ–‡å­—å¯ä»¥åŒ…å«ä»»ä½• Unicode (UTF-16) å­—ç¬¦ã€‚ å¦‚æœæ‚¨çš„ç¼–è¾‘å™¨å’Œæ–‡ä»¶ç³»ç»Ÿå…è®¸ï¼Œæ‚¨å¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­ä½¿ç”¨è¿™äº›å­—ç¬¦ã€‚ å¦‚æœä¸æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨â€œUnicode è½¬ä¹‰ç¬¦â€ï¼Œä¾‹å¦‚â€œ\\u0108â€ï¼ˆå¸¦æŠ‘æ‰¬éŸ³ç¬¦çš„å¤§å†™ Cï¼‰æˆ–â€œS\\u00ED Se\\u00F1orâ€ï¼ˆè¥¿ç­ç‰™è¯­ä¸­çš„ SÃ­ SeÃ±orï¼‰ã€‚ å§‹ç»ˆå¯¹å­—ç¬¦æ–‡å­—ä½¿ç”¨â€œå•å¼•å·â€ï¼Œå¯¹å­—ç¬¦ä¸²æ–‡å­—ä½¿ç”¨â€œåŒå¼•å·â€ã€‚ Unicode è½¬ä¹‰åºåˆ—å¯ä»¥åœ¨ç¨‹åºçš„å…¶ä»–åœ°æ–¹ä½¿ç”¨ï¼ˆä¾‹å¦‚åœ¨å­—æ®µåç§°ä¸­ï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨ char æˆ– String æ–‡å­—ä¸­ã€‚ Java ç¼–ç¨‹è¯­è¨€è¿˜æ”¯æŒ char å’Œ String æ–‡å­—çš„ä¸€äº›ç‰¹æ®Šè½¬ä¹‰åºåˆ—ï¼š\\bï¼ˆé€€æ ¼é”®ï¼‰ã€\\tï¼ˆåˆ¶è¡¨ç¬¦ï¼‰ã€\\nï¼ˆæ¢è¡Œç¬¦ï¼‰ã€\\fï¼ˆæ¢é¡µç¬¦ï¼‰ã€\\rï¼ˆå›è½¦ç¬¦ï¼‰ã€ &quot;ï¼ˆåŒå¼•å·ï¼‰ã€&#39;ï¼ˆå•å¼•å·ï¼‰å’Œ \\ï¼ˆåæ–œæ ï¼‰ã€‚ è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ null æ–‡å­—ï¼Œå¯ä»¥ç”¨ä½œä»»ä½•å¼•ç”¨ç±»å‹çš„å€¼ã€‚ null å¯ä»¥åˆ†é…ç»™ä»»ä½•å˜é‡ï¼ŒåŸå§‹ç±»å‹çš„å˜é‡é™¤å¤–ã€‚ é™¤äº†æµ‹è¯•ç©ºå€¼çš„å­˜åœ¨ä¹‹å¤–ï¼Œæ‚¨å‡ ä¹æ— èƒ½ä¸ºåŠ›ã€‚ å› æ­¤ï¼Œnull åœ¨ç¨‹åºä¸­ç»å¸¸è¢«ç”¨ä½œæ ‡è®°ï¼Œè¡¨ç¤ºæŸä¸ªå¯¹è±¡ä¸å¯ç”¨ã€‚ æœ€åï¼Œè¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„æ–‡å­—ï¼Œç§°ä¸ºç±»æ–‡å­—ï¼Œé€šè¿‡è·å–ç±»å‹åç§°å¹¶é™„åŠ â€œ.classâ€å½¢æˆï¼› ä¾‹å¦‚ï¼ŒString.classã€‚ è¿™æ˜¯æŒ‡è¡¨ç¤ºç±»å‹æœ¬èº«çš„å¯¹è±¡ï¼ˆç±»ç±»å‹ï¼‰ã€‚ åœ¨æ•°å­—æ–‡å­—ä¸­ä½¿ç”¨ä¸‹åˆ’çº¿å­—ç¬¦åœ¨ Java SE 7 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œä»»æ„æ•°é‡çš„ä¸‹åˆ’çº¿å­—ç¬¦ (_) å¯ä»¥å‡ºç°åœ¨æ•°å­—æ–‡å­—ä¸­æ•°å­—ä¹‹é—´çš„ä»»ä½•ä½ç½®ã€‚ ä¾‹å¦‚ï¼Œæ­¤åŠŸèƒ½ä½¿æ‚¨èƒ½å¤Ÿã€‚ åˆ†éš”æ•°å­—æ–‡å­—ä¸­çš„æ•°å­—ç»„ï¼Œè¿™å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„ä»£ç åŒ…å«å¤šä½æ•°çš„æ•°å­—ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿å­—ç¬¦å°†æ•°å­—åˆ†æˆä¸‰ç»„ï¼Œç±»ä¼¼äºä½¿ç”¨é€—å·æˆ–ç©ºæ ¼ç­‰æ ‡ç‚¹ç¬¦å·ä½œä¸ºåˆ†éš”ç¬¦ã€‚ ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†æ‚¨å¯ä»¥åœ¨æ•°å­—æ–‡å­—ä¸­ä½¿ç”¨ä¸‹åˆ’çº¿çš„å…¶ä»–æ–¹å¼ï¼š 12345678long creditCardNumber = 1234_5678_9012_3456L;long socialSecurityNumber = 999_99_9999L;float pi = 3.14_15F;long hexBytes = 0xFF_EC_DE_5E;long hexWords = 0xCAFE_BABE;long maxLong = 0x7fff_ffff_ffff_ffffL;byte nybbles = 0b0010_0101;long bytes = 0b11010010_01101001_10010100_10010010; æ‚¨åªèƒ½åœ¨æ•°å­—ä¹‹é—´æ”¾ç½®ä¸‹åˆ’çº¿ï¼› æ‚¨ä¸èƒ½åœ¨ä»¥ä¸‹ä½ç½®æ”¾ç½®ä¸‹åˆ’çº¿ï¼š åœ¨æ•°å­—çš„å¼€å¤´æˆ–ç»“å°¾ã€‚ ä¸æµ®ç‚¹æ–‡å­—ä¸­çš„å°æ•°ç‚¹ç›¸é‚»ã€‚ åœ¨ F æˆ– L åç¼€ä¹‹å‰ã€‚ åœ¨éœ€è¦ä¸€ä¸²æ•°å­—çš„ä½ç½®ã€‚ ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†æ•°å­—æ–‡å­—ä¸­æœ‰æ•ˆå’Œæ— æ•ˆçš„ä¸‹åˆ’çº¿æ”¾ç½®ï¼ˆçªå‡ºæ˜¾ç¤ºï¼‰ï¼š 1234567891011121314151617181920212223242526272829// æ— æ•ˆï¼šä¸èƒ½æ”¾ä¸‹åˆ’çº¿// å°æ•°ç‚¹é™„è¿‘float pi1 = 3_.1415F;// æ— æ•ˆï¼šä¸èƒ½æ”¾ä¸‹åˆ’çº¿// å°æ•°ç‚¹é™„è¿‘float pi2 = 3._1415F;// æ— æ•ˆï¼šä¸èƒ½æ”¾ä¸‹åˆ’çº¿ // åœ¨ L åç¼€ä¹‹å‰long socialSecurityNumber1 = 999_99_9999_L;// OK (åè¿›åˆ¶æ–‡å­—)int x1 = 5_2;// æ— æ•ˆï¼šä¸èƒ½æ”¾ä¸‹åˆ’çº¿// åœ¨æ–‡å­—çš„ç»“å°¾int x2 = 52_;// OK (åè¿›åˆ¶æ–‡å­—)int x3 = 5_______2;// æ— æ•ˆï¼šä¸èƒ½æ”¾ä¸‹åˆ’çº¿// åœ¨ 0x åŸºæ•°å‰ç¼€int x4 = 0_x52;// æ— æ•ˆï¼šä¸èƒ½æ”¾ä¸‹åˆ’çº¿// åœ¨æ•°å­—çš„å¼€å¤´int x5 = 0x_52;// OK (åè¿›åˆ¶æ–‡å­—)int x6 = 0x5_2; // æ— æ•ˆï¼šä¸èƒ½æ”¾ä¸‹åˆ’çº¿// åœ¨æ•°å­—çš„æœ«å°¾int x7 = 0x52_; æ•°ç»„æ•°ç»„æ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œå®ƒåŒ…å«å›ºå®šæ•°é‡çš„å•ä¸ªç±»å‹çš„å€¼ã€‚é˜µåˆ—çš„é•¿åº¦æ˜¯åœ¨åˆ›å»ºé˜µåˆ—æ—¶ç¡®å®šçš„ã€‚åˆ›å»ºåï¼Œå…¶é•¿åº¦æ˜¯å›ºå®šçš„ã€‚æ‚¨å·²ç»åœ¨â€œHello Worldï¼â€çš„ä¸»æ–¹æ³•ä¸­çœ‹åˆ°äº†ä¸€ä¸ªæ•°ç»„ç¤ºä¾‹åº”ç”¨æœ¬èŠ‚å°†æ›´è¯¦ç»†åœ°è®¨è®ºæ•°ç»„ã€‚ æ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹éƒ½ç§°ä¸ºå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½é€šè¿‡å…¶æ•°å­—ç´¢å¼•è¿›è¡Œè®¿é—®ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç¼–å·ä»0å¼€å§‹ã€‚ä¾‹å¦‚ï¼Œç¬¬9ä¸ªå…ƒç´ å°†åœ¨ç´¢å¼•8å¤„è®¿é—®ã€‚ ä¸‹é¢çš„ç¨‹åºArrayDemoåˆ›å»ºä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œåœ¨æ•°ç»„ä¸­æ”¾å…¥ä¸€äº›å€¼ï¼Œå¹¶å°†æ¯ä¸ªå€¼æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344class ArrayDemo &#123; public static void main(String[] args) &#123; // declares an array of integers int[] anArray; // allocates memory for 10 integers anArray = new int[10]; // initialize first element anArray[0] = 100; // initialize second element anArray[1] = 200; // and so forth anArray[2] = 300; anArray[3] = 400; anArray[4] = 500; anArray[5] = 600; anArray[6] = 700; anArray[7] = 800; anArray[8] = 900; anArray[9] = 1000; System.out.println(&quot;Element at index 0: &quot; + anArray[0]); System.out.println(&quot;Element at index 1: &quot; + anArray[1]); System.out.println(&quot;Element at index 2: &quot; + anArray[2]); System.out.println(&quot;Element at index 3: &quot; + anArray[3]); System.out.println(&quot;Element at index 4: &quot; + anArray[4]); System.out.println(&quot;Element at index 5: &quot; + anArray[5]); System.out.println(&quot;Element at index 6: &quot; + anArray[6]); System.out.println(&quot;Element at index 7: &quot; + anArray[7]); System.out.println(&quot;Element at index 8: &quot; + anArray[8]); System.out.println(&quot;Element at index 9: &quot; + anArray[9]); &#125;&#125; è¯¥ç¨‹åºçš„è¾“å‡ºä¸ºï¼š 12345678910Element at index 0: 100Element at index 1: 200Element at index 2: 300Element at index 3: 400Element at index 4: 500Element at index 5: 600Element at index 6: 700Element at index 7: 800Element at index 8: 900Element at index 9: 1000 åœ¨çœŸå®çš„ç¼–ç¨‹ç¯å¢ƒä¸­ï¼Œæ‚¨å¯èƒ½ä¼šä½¿ç”¨ä¸€ä¸ªå—æ”¯æŒçš„å¾ªç¯ç»“æ„æ¥è¿­ä»£æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œè€Œä¸æ˜¯åƒå‰é¢çš„ç¤ºä¾‹é‚£æ ·å•ç‹¬ç¼–å†™æ¯ä¸€è¡Œã€‚ç„¶è€Œï¼Œè¯¥ç¤ºä¾‹æ¸…æ¥šåœ°è¯´æ˜äº†æ•°ç»„è¯­æ³•ã€‚æ‚¨å°†åœ¨â€œ Control Flow â€éƒ¨åˆ†äº†è§£å„ç§å¾ªç¯æ„é€ ï¼ˆforã€whileå’Œdo whileï¼‰ã€‚ å£°æ˜å˜é‡ä»¥å¼•ç”¨æ•°ç»„å‰é¢çš„ç¨‹åºä½¿ç”¨ä»¥ä¸‹ä»£ç è¡Œå£°æ˜ä¸€ä¸ªæ•°ç»„ï¼ˆåä¸ºanArrayï¼‰ï¼š 12// declares an array of integersint[] anArray; ä¸å…¶ä»–ç±»å‹å˜é‡çš„å£°æ˜ä¸€æ ·ï¼Œæ•°ç»„å£°æ˜æœ‰ä¸¤ä¸ªç»„ä»¶ï¼šæ•°ç»„çš„ç±»å‹å’Œæ•°ç»„çš„åç§°ã€‚æ•°ç»„çš„ç±»å‹å†™æˆtype[]ï¼Œå…¶ä¸­typeæ˜¯æ‰€åŒ…å«å…ƒç´ çš„æ•°æ®ç±»å‹ï¼›æ‹¬å·æ˜¯ç‰¹æ®Šç¬¦å·ï¼Œè¡¨ç¤ºæ­¤å˜é‡åŒ…å«ä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„çš„å¤§å°ä¸æ˜¯å…¶ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼ˆè¿™å°±æ˜¯æ‹¬å·ä¸ºç©ºçš„åŸå› ï¼‰ã€‚æ•°ç»„çš„åç§°å¯ä»¥æ˜¯æ‚¨æƒ³è¦çš„ä»»ä½•åç§°ï¼Œå‰ææ˜¯å®ƒéµå¾ªå‰é¢åœ¨å‘½åéƒ¨åˆ†ä¸­è®¨è®ºçš„è§„åˆ™å’Œçº¦å®šã€‚ä¸å…¶ä»–ç±»å‹çš„å˜é‡ä¸€æ ·ï¼Œå£°æ˜å®é™…ä¸Šå¹¶ä¸åˆ›å»ºæ•°ç»„ï¼›å®ƒåªæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå˜é‡å°†ä¿å­˜ä¸€ä¸ªæŒ‡å®šç±»å‹çš„æ•°ç»„ã€‚ ç±»ä¼¼åœ°ï¼Œæ‚¨å¯ä»¥å£°æ˜å…¶ä»–ç±»å‹çš„æ•°ç»„ï¼š 12345678byte[] anArrayOfBytes;short[] anArrayOfShorts;long[] anArrayOfLongs;float[] anArrayOfFloats;double[] anArrayOfDoubles;boolean[] anArrayOfBooleans;char[] anArrayOfChars;String[] anArrayOfStrings; æ‚¨ä¹Ÿå¯ä»¥å°†æ‹¬å·æ”¾åœ¨æ•°ç»„åç§°åé¢ï¼š 12// ä¸å»ºè®®ä½¿ç”¨æ­¤è¡¨æ ¼float anArrayOfFloats[]; ç„¶è€Œï¼Œæƒ¯ä¾‹ä¸é¼“åŠ±è¿™ç§å½¢å¼ï¼›æ‹¬å·æ ‡è¯†æ•°ç»„ç±»å‹ï¼Œå¹¶åº”ä¸ç±»å‹åç§°ä¸€èµ·å‡ºç°ã€‚ åˆ›å»ºã€åˆå§‹åŒ–å’Œè®¿é—®æ•°ç»„åˆ›å»ºæ•°ç»„çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æ–°è¿ç®—ç¬¦ã€‚ArrayDemoç¨‹åºä¸­çš„ä¸‹ä¸€æ¡è¯­å¥ä¸ºä¸€ä¸ªæ•°ç»„åˆ†é…è¶³å¤Ÿçš„å†…å­˜ï¼Œå¯å®¹çº³10ä¸ªæ•´æ•°å…ƒç´ ï¼Œå¹¶å°†æ•°ç»„åˆ†é…ç»™anArrayå˜é‡ã€‚ 12// create an array of integersanArray = new int[10]; å¦‚æœç¼ºå°‘æ­¤è¯­å¥ï¼Œç¼–è¯‘å™¨å°†æ‰“å°å¦‚ä¸‹é”™è¯¯ï¼Œç¼–è¯‘å°†å¤±è´¥ï¼š 1ArrayDemo.java:4: Variable anArray may not have been initialized. æ¥ä¸‹æ¥çš„å‡ è¡Œä»£ç ä¸ºæ•°ç»„çš„æ¯ä¸ªå…ƒç´ èµ‹å€¼ï¼š 123anArray[0] = 100; // initialize first elementanArray[1] = 200; // initialize second elementanArray[2] = 300; // and so forth æ¯ä¸ªæ•°ç»„å…ƒç´ éƒ½é€šè¿‡å…¶æ•°å­—ç´¢å¼•è¿›è¡Œè®¿é—®ï¼š 123System.out.println(&quot;Element 1 at index 0: &quot; + anArray[0]);System.out.println(&quot;Element 2 at index 1: &quot; + anArray[1]);System.out.println(&quot;Element 3 at index 2: &quot; + anArray[2]); æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¿«æ·æ–¹å¼è¯­æ³•åˆ›å»ºå’Œåˆå§‹åŒ–æ•°ç»„ï¼š 12345int[] anArray = &#123; 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000&#125;; è¿™é‡Œï¼Œæ•°ç»„çš„é•¿åº¦ç”±å¤§æ‹¬å·ä¹‹é—´æä¾›çš„å€¼çš„æ•°é‡å†³å®šï¼Œå¹¶ç”¨é€—å·åˆ†éš”ã€‚ æ‚¨è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸¤ç»„æˆ–å¤šç»„æ‹¬å·ï¼ˆå¦‚String[][]åç§°ï¼‰æ¥å£°æ˜æ•°ç»„æ•°ç»„ï¼ˆä¹Ÿç§°ä¸ºå¤šç»´æ•°ç»„ï¼‰ã€‚å› æ­¤ï¼Œæ¯ä¸ªå…ƒç´ å¿…é¡»ç”±ç›¸åº”æ•°é‡çš„ç´¢å¼•å€¼è®¿é—®ã€‚ åœ¨Javaç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¤šç»´æ•°ç»„æ˜¯å…¶ç»„ä»¶æœ¬èº«å°±æ˜¯æ•°ç»„çš„æ•°ç»„ã€‚è¿™ä¸Cæˆ–Fortranä¸­çš„æ•°ç»„ä¸åŒã€‚å…¶ç»“æœæ˜¯ï¼Œå…è®¸è¡Œçš„é•¿åº¦å˜åŒ–ï¼Œå¦‚ä»¥ä¸‹MultiDimArrayDemoç¨‹åºæ‰€ç¤ºï¼š 123456789101112class MultiDimArrayDemo &#123; public static void main(String[] args) &#123; String[][] names = &#123; &#123;&quot;Mr. &quot;, &quot;Mrs. &quot;, &quot;Ms. &quot;&#125;, &#123;&quot;Smith&quot;, &quot;Jones&quot;&#125; &#125;; // Mr. Smith System.out.println(names[0][0] + names[1][0]); // Ms. Jones System.out.println(names[0][2] + names[1][1]); &#125;&#125; è¯¥ç¨‹åºçš„è¾“å‡ºä¸ºï¼š 12Mr. SmithMs. Jones æœ€åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å†…ç½®çš„lengthå±æ€§æ¥ç¡®å®šä»»ä½•æ•°ç»„çš„å¤§å°ã€‚ä»¥ä¸‹ä»£ç å°†æ•°ç»„çš„å¤§å°æ‰“å°ä¸ºæ ‡å‡†è¾“å‡ºï¼š 1System.out.println(anArray.length); å¤åˆ¶æ•°ç»„Systemç±»æœ‰ä¸€ä¸ªarraycopyæ–¹æ³•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•å°†æ•°æ®ä»ä¸€ä¸ªæ•°ç»„é«˜æ•ˆåœ°å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ•°ç»„ï¼š 12public static void arraycopy(Object src, int srcPos, Object dest, int destPos, int length) ä¸¤ä¸ªObjectå‚æ•°æŒ‡å®šè¦ä»ä¸­å¤åˆ¶çš„æ•°ç»„å’Œè¦å¤åˆ¶åˆ°çš„æ•°ç»„ã€‚ä¸‰ä¸ªintå‚æ•°æŒ‡å®šæºæ•°ç»„ä¸­çš„èµ·å§‹ä½ç½®ã€ç›®æ ‡æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®ä»¥åŠè¦å¤åˆ¶çš„æ•°ç»„å…ƒç´ æ•°ã€‚ ä¸‹é¢çš„ç¨‹åºArrayCopyDemoå£°æ˜äº†ä¸€ä¸ªStringå…ƒç´ æ•°ç»„ã€‚å®ƒä½¿ç”¨ç³»ç»Ÿã€‚arraycopyæ–¹æ³•ï¼Œç”¨äºå°†é˜µåˆ—ç»„ä»¶çš„å­åºåˆ—å¤åˆ¶åˆ°ç¬¬äºŒé˜µåˆ—ä¸­ï¼š 1234567891011121314class ArrayCopyDemo &#123; public static void main(String[] args) &#123; String[] copyFrom = &#123; &quot;Affogato&quot;, &quot;Americano&quot;, &quot;Cappuccino&quot;, &quot;Corretto&quot;, &quot;Cortado&quot;, &quot;Doppio&quot;, &quot;Espresso&quot;, &quot;Frappucino&quot;, &quot;Freddo&quot;, &quot;Lungo&quot;, &quot;Macchiato&quot;, &quot;Marocchino&quot;, &quot;Ristretto&quot; &#125;; String[] copyTo = new String[7]; System.arraycopy(copyFrom, 2, copyTo, 0, 7); for (String coffee : copyTo) &#123; System.out.print(coffee + &quot; &quot;); &#125; &#125;&#125; è¯¥ç¨‹åºçš„è¾“å‡ºä¸ºï¼š 1Cappuccino Corretto Cortado Doppio Espresso Frappucino Freddo æ•°ç»„æ“æ§æ•°ç»„æ˜¯ç¼–ç¨‹ä¸­ä½¿ç”¨çš„ä¸€ä¸ªå¼ºå¤§è€Œæœ‰ç”¨çš„æ¦‚å¿µã€‚JavaSEæä¾›äº†æ‰§è¡Œä¸æ•°ç»„ç›¸å…³çš„ä¸€äº›æœ€å¸¸è§æ“ä½œçš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼ŒArrayCopyDemoç¤ºä¾‹ä½¿ç”¨Systemç±»çš„arraycopyæ–¹æ³•ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨è¿­ä»£æºæ•°ç»„çš„å…ƒç´ å¹¶å°†æ¯ä¸ªå…ƒç´ æ”¾å…¥ç›®æ ‡æ•°ç»„ã€‚è¿™æ˜¯åœ¨å¹•åæ‰§è¡Œçš„ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåªä½¿ç”¨ä¸€è¡Œä»£ç æ¥è°ƒç”¨è¯¥æ–¹æ³•ã€‚ ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼ŒJavaSEæä¾›äº†å‡ ç§åœ¨Java.utilä¸­æ‰§è¡Œæ•°ç»„æ“ä½œï¼ˆå¸¸è§ä»»åŠ¡ï¼Œå¦‚å¤åˆ¶ã€æ’åºå’Œæœç´¢æ•°ç»„ï¼‰çš„æ–¹æ³•åœ¨java.util.Arrays ç±»ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä¿®æ”¹å‰é¢çš„ç¤ºä¾‹ä»¥ä½¿ç”¨java.utilçš„copyOfRangeæ–¹æ³•ã€‚Arraysç±»ï¼Œå¦‚ArrayCopyOfDemoç¤ºä¾‹ä¸­æ‰€ç¤ºã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œä½¿ç”¨copyOfRangeæ–¹æ³•ä¸éœ€è¦åœ¨è°ƒç”¨è¯¥æ–¹æ³•ä¹‹å‰åˆ›å»ºç›®æ ‡æ•°ç»„ï¼Œå› ä¸ºç›®æ ‡æ•°ç»„ç”±è¯¥æ–¹æ³•è¿”å›ï¼š 12345678910111213class ArrayCopyOfDemo &#123; public static void main(String[] args) &#123; String[] copyFrom = &#123; &quot;Affogato&quot;, &quot;Americano&quot;, &quot;Cappuccino&quot;, &quot;Corretto&quot;, &quot;Cortado&quot;, &quot;Doppio&quot;, &quot;Espresso&quot;, &quot;Frappucino&quot;, &quot;Freddo&quot;, &quot;Lungo&quot;, &quot;Macchiato&quot;, &quot;Marocchino&quot;, &quot;Ristretto&quot; &#125;; String[] copyTo = java.util.Arrays.copyOfRange(copyFrom, 2, 9); for (String coffee : copyTo) &#123; System.out.print(coffee + &quot; &quot;); &#125; &#125;&#125; æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œè¿™ä¸ªç¨‹åºçš„è¾“å‡ºæ˜¯ç›¸åŒçš„ï¼Œå°½ç®¡å®ƒéœ€è¦æ›´å°‘çš„ä»£ç è¡Œã€‚è¯·æ³¨æ„ï¼ŒcopyOfRangeæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦å¤åˆ¶çš„èŒƒå›´çš„åˆå§‹ç´¢å¼•ï¼ˆåŒ…æ‹¬åœ¨å†…ï¼‰ï¼Œè€Œç¬¬ä¸‰ä¸ªå‚æ•°åˆ™æ˜¯è¦å¤åˆ¶èŒƒå›´çš„æœ€ç»ˆç´¢å¼•ï¼ˆæ’ä»–ï¼‰ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œè¦å¤åˆ¶çš„èŒƒå›´ä¸åŒ…æ‹¬ç´¢å¼•9å¤„çš„æ•°ç»„å…ƒç´ ï¼ˆå…¶ä¸­åŒ…å«å­—ç¬¦ä¸²Lungoï¼‰ã€‚ java.util.Arrays ç±»ä¸­çš„æ–¹æ³•æä¾›çš„ä¸€äº›å…¶ä»–æœ‰ç”¨æ“ä½œï¼š åœ¨æ•°ç»„ä¸­æœç´¢ç‰¹å®šå€¼ï¼Œä»¥è·å¾—æ”¾ç½®è¯¥å€¼çš„ç´¢å¼•ï¼ˆbinarySearchæ–¹æ³•ï¼‰ã€‚ æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„ä»¥ç¡®å®šå®ƒä»¬æ˜¯å¦ç›¸ç­‰ï¼ˆequalsæ–¹æ³•ï¼‰ã€‚ å¡«å……æ•°ç»„ä»¥åœ¨æ¯ä¸ªç´¢å¼•å¤„æ”¾ç½®ç‰¹å®šå€¼ï¼ˆå¡«å……æ–¹æ³•ï¼‰ã€‚ å°†æ•°ç»„æŒ‰å‡åºæ’åºã€‚è¿™å¯ä»¥ä½¿ç”¨æ’åºæ–¹æ³•æŒ‰é¡ºåºè¿›è¡Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Java SE 8ä¸­å¼•å…¥çš„å¹¶è¡Œæ’åºæ–¹æ³•åŒæ—¶è¿›è¡Œã€‚å¤šå¤„ç†å™¨ç³»ç»Ÿä¸Šå¤§å‹æ•°ç»„çš„å¹¶è¡Œæ’åºæ¯”é¡ºåºæ•°ç»„æ’åºæ›´å¿«ã€‚ åˆ›å»ºä½¿ç”¨æ•°ç»„ä½œä¸ºæºçš„æµï¼ˆæµæ–¹æ³•ï¼‰ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯­å¥ä»¥ä¸ä¸Šä¸€ç¤ºä¾‹ç›¸åŒçš„æ–¹å¼æ‰“å°copyToæ•°ç»„çš„å†…å®¹ï¼š 1java.util.Arrays.stream(copyTo).map(coffee -&gt; coffee + &quot; &quot;).forEach(System.out::print); æœ‰å…³æµçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§Aggregate Operationsï¼ˆèšåˆæ“ä½œï¼‰ã€‚ å°†æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚toStringæ–¹æ³•å°†æ•°ç»„çš„æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç”¨é€—å·åˆ†éš”ï¼Œç„¶åç”¨æ‹¬å·æ‹¬èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯­å¥å°†copyToæ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶æ‰“å°ï¼š 1System.out.println(java.util.Arrays.toString(copyTo)); æ­¤è¯­å¥æ‰“å°ä»¥ä¸‹å†…å®¹ï¼š 1[Cappuccino, Corretto, Cortado, Doppio, Espresso, Frappucino, Freddo] å˜é‡æ±‡æ€»Javaç¼–ç¨‹è¯­è¨€ä½¿ç”¨â€œå­—æ®µâ€å’Œâ€œå˜é‡â€ä½œä¸ºå…¶æœ¯è¯­çš„ä¸€éƒ¨åˆ†ã€‚å®ä¾‹å˜é‡ï¼ˆéé™æ€å­—æ®µï¼‰å¯¹äºç±»çš„æ¯ä¸ªå®ä¾‹éƒ½æ˜¯å”¯ä¸€çš„ã€‚ç±»å˜é‡ï¼ˆé™æ€å­—æ®µï¼‰æ˜¯ç”¨é™æ€ä¿®é¥°ç¬¦å£°æ˜çš„å­—æ®µï¼›æ— è®ºç±»è¢«å®ä¾‹åŒ–å¤šå°‘æ¬¡ï¼Œç±»å˜é‡åªæœ‰ä¸€ä¸ªå‰¯æœ¬ã€‚å±€éƒ¨å˜é‡åœ¨æ–¹æ³•ä¸­å­˜å‚¨ä¸´æ—¶çŠ¶æ€ã€‚å‚æ•°æ˜¯ä¸ºæ–¹æ³•æä¾›é¢å¤–ä¿¡æ¯çš„å˜é‡ï¼›å±€éƒ¨å˜é‡å’Œå‚æ•°æ€»æ˜¯è¢«åˆ†ç±»ä¸ºâ€œå˜é‡â€ï¼ˆè€Œä¸æ˜¯â€œå­—æ®µâ€ï¼‰ã€‚åœ¨å‘½åå­—æ®µæˆ–å˜é‡æ—¶ï¼Œæ‚¨åº”è¯¥ï¼ˆæˆ–å¿…é¡»ï¼‰éµå¾ªä¸€äº›è§„åˆ™å’Œçº¦å®šã€‚ å…«ç§åŸºæœ¬æ•°æ®ç±»å‹æ˜¯ï¼šå­—èŠ‚ã€çŸ­ã€æ•´æ•°ã€é•¿ã€æµ®ç‚¹ã€åŒç²¾åº¦ã€å¸ƒå°”å’Œå­—ç¬¦ã€‚java.lang.Stringç±»è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚ç¼–è¯‘å™¨å°†ä¸ºä¸Šè¿°ç±»å‹çš„å­—æ®µæŒ‡å®šä¸€ä¸ªåˆç†çš„é»˜è®¤å€¼ï¼›å¯¹äºå±€éƒ¨å˜é‡ï¼Œä»ä¸æŒ‡å®šé»˜è®¤å€¼ã€‚æ–‡å­—æ˜¯å›ºå®šå€¼çš„æºä»£ç è¡¨ç¤ºã€‚æ•°ç»„æ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œå®ƒåŒ…å«å›ºå®šæ•°é‡çš„å•ä¸ªç±»å‹çš„å€¼ã€‚é˜µåˆ—çš„é•¿åº¦æ˜¯åœ¨åˆ›å»ºé˜µåˆ—æ—¶ç¡®å®šçš„ã€‚åˆ›å»ºåï¼Œå…¶é•¿åº¦æ˜¯å›ºå®šçš„ã€‚ è¿ç®—ç¬¦æ—¢ç„¶æ‚¨å·²ç»å­¦ä¹ äº†å¦‚ä½•å£°æ˜å’Œåˆå§‹åŒ–å˜é‡ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½æƒ³çŸ¥é“å¦‚ä½•å¤„ç†å®ƒä»¬ã€‚å­¦ä¹ Javaç¼–ç¨‹è¯­è¨€çš„æ“ä½œç¬¦æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€å§‹ã€‚è¿ç®—ç¬¦æ˜¯å¯¹ä¸€ä¸ªã€ä¸¤ä¸ªæˆ–ä¸‰ä¸ªæ“ä½œæ•°æ‰§è¡Œç‰¹å®šæ“ä½œï¼Œç„¶åè¿”å›ç»“æœçš„ç‰¹æ®Šç¬¦å·ã€‚ å½“æˆ‘ä»¬æ¢ç´¢Javaç¼–ç¨‹è¯­è¨€çš„è¿ç®—ç¬¦æ—¶ï¼Œæå‰çŸ¥é“å“ªäº›è¿ç®—ç¬¦å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚ä¸‹è¡¨ä¸­çš„è¿ç®—ç¬¦æŒ‰ä¼˜å…ˆé¡ºåºåˆ—å‡ºã€‚è¿ç®—ç¬¦è¶Šé è¿‘è¡¨æ ¼é¡¶éƒ¨ï¼Œå…¶ä¼˜å…ˆçº§è¶Šé«˜ã€‚ä¼˜å…ˆçº§è¾ƒé«˜çš„è¿ç®—ç¬¦åœ¨ä¼˜å…ˆçº§ç›¸å¯¹è¾ƒä½çš„è¿ç®—ç¬¦ä¹‹å‰è¿›è¡Œè¯„ä¼°ã€‚åŒä¸€è¡Œä¸Šçš„è¿ç®—ç¬¦å…·æœ‰åŒç­‰ä¼˜å…ˆçº§ã€‚å½“åŒç­‰ä¼˜å…ˆçº§çš„è¿ç®—ç¬¦å‡ºç°åœ¨åŒä¸€è¡¨è¾¾å¼ä¸­æ—¶ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªè§„åˆ™æ¥æ§åˆ¶å“ªä¸ªè¿ç®—ç¬¦é¦–å…ˆè¢«æ±‚å€¼ã€‚é™¤èµ‹å€¼è¿ç®—ç¬¦å¤–çš„æ‰€æœ‰äºŒè¿›åˆ¶è¿ç®—ç¬¦éƒ½ä»å·¦åˆ°å³æ±‚å€¼ï¼›èµ‹å€¼è¿ç®—ç¬¦ä»å³å‘å·¦æ±‚å€¼ã€‚ è¿ç®—ç¬¦ä¼˜å…ˆçº§ è¿ç®—ç¬¦ Precedence postfixï¼ˆåœ¨åé¢åŠ ï¼‰ expr++ expr-- unaryï¼ˆä¸€å…ƒçš„ï¼‰ ++expr --expr +expr -expr ~ ! multiplicativeï¼ˆä¹˜ é™¤ å–ä½™ï¼‰ * / % additiveï¼ˆåŠ å‡ï¼‰ + - shiftï¼ˆç§»åŠ¨ï¼‰ &lt;&lt; &gt;&gt; &gt;&gt;&gt; relationalï¼ˆç›¸å…³çš„ï¼‰ &lt; &gt; &lt;= &gt;= instanceof equalityï¼ˆç­‰å¼ ä¸ç­‰å¼ï¼‰ == != bitwise ANDï¼ˆæŒ‰ä½ä¸ï¼‰ &amp; bitwise exclusive ORï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰ ^ bitwise inclusive ORï¼ˆæŒ‰ä½åŒ…å«ï¼‰ &#96; logical ANDï¼ˆé€»è¾‘ä¸ï¼‰ &amp;&amp; logical ORï¼ˆé€»è¾‘æˆ–ï¼‰ &#96; ternaryï¼ˆä¸‰å…ƒè¿ç®—ï¼‰ ? : assignmentï¼ˆåˆ†é…ï¼‰ &#96;&#x3D; +&#x3D; -&#x3D; *&#x3D; &#x2F;&#x3D; %&#x3D; &amp;&#x3D; ^&#x3D; åœ¨é€šç”¨ç¼–ç¨‹ä¸­ï¼ŒæŸäº›è¿ç®—ç¬¦å¾€å¾€æ¯”å…¶ä»–è¿ç®—ç¬¦å‡ºç°å¾—æ›´é¢‘ç¹ï¼›ä¾‹å¦‚ï¼Œèµ‹å€¼è¿ç®—ç¬¦â€œ&#x3D;â€æ¯”æ— ç¬¦å·å³ç§»è¿ç®—ç¬¦â€œ&gt;&gt;&gt;â€æ›´å¸¸è§ã€‚è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œä¸‹é¢çš„è®¨è®ºé¦–å…ˆå…³æ³¨æ‚¨æœ€æœ‰å¯èƒ½ç»å¸¸ä½¿ç”¨çš„è¿ç®—ç¬¦ï¼Œæœ€åå…³æ³¨é‚£äº›ä¸å¤ªå¸¸è§çš„è¿ç®—ç¬¦ã€‚æ¯ä¸€æ¬¡è®¨è®ºéƒ½é™„å¸¦äº†å¯ä»¥ç¼–è¯‘å’Œè¿è¡Œçš„ç¤ºä¾‹ä»£ç ã€‚ç ”ç©¶å®ƒçš„è¾“å‡ºå°†æœ‰åŠ©äºå·©å›ºä½ åˆšåˆšå­¦åˆ°çš„ä¸œè¥¿ã€‚ èµ‹å€¼ã€ç®—æœ¯å’Œä¸€å…ƒè¿ç®—ç¬¦ç®€å•èµ‹å€¼è¿ç®—ç¬¦æ‚¨å°†é‡åˆ°çš„æœ€å¸¸è§çš„è¿ç®—ç¬¦ä¹‹ä¸€æ˜¯ç®€å•èµ‹å€¼è¿ç®—ç¬¦â€œ&#x3D;â€ã€‚ä½ åœ¨è‡ªè¡Œè½¦è¯¾ä¸Šè§è¿‡è¿™ä¸ªæ“ä½œå‘˜ï¼›å®ƒå°†å³ä¾§çš„å€¼æŒ‡å®šç»™å·¦ä¾§çš„æ“ä½œæ•°ï¼š 123int cadence = 0;int speed = 0;int gear = 1; è¯¥æ“ä½œç¬¦è¿˜å¯ä»¥ç”¨äºå¯¹è±¡ä»¥æŒ‡å®šå¯¹è±¡å¼•ç”¨ï¼Œå¦‚åˆ›å»ºå¯¹è±¡ä¸­æ‰€è¿°ã€‚ ç®—æœ¯è¿ç®—ç¬¦Javaç¼–ç¨‹è¯­è¨€æä¾›äº†æ‰§è¡ŒåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•çš„è¿ç®—ç¬¦ã€‚ä½ å¾ˆæœ‰å¯èƒ½ä¼šé€šè¿‡åŸºç¡€æ•°å­¦ä¸­çš„åŒé¾„äººè®¤å‡ºä»–ä»¬ã€‚å”¯ä¸€å¯¹æ‚¨æ¥è¯´å¯èƒ½æ˜¯æ–°çš„ç¬¦å·æ˜¯â€œ%â€ï¼Œå®ƒå°†ä¸€ä¸ªæ“ä½œæ•°é™¤ä»¥å¦ä¸€ä¸ªæ“ä½œï¼Œå¹¶è¿”å›ä½™æ•°ä½œä¸ºç»“æœã€‚ è¿ç®—ç¬¦ æè¿° + åŠ æ³•è¿ç®—ç¬¦ï¼ˆä¹Ÿç”¨äºå­—ç¬¦ä¸²è¿æ¥ï¼‰ - å‡æ³•è¿ç®—ç¬¦ * ä¹˜æ³•è¿ç®—ç¬¦ / é™¤æ³•è¿ç®—ç¬¦ % ä½™æ•°è¿ç®—ç¬¦ ä¸‹é¢çš„ç¨‹åºArithmeticDemoæµ‹è¯•ç®—æœ¯è¿ç®—ç¬¦ã€‚ 12345678910111213141516171819202122232425262728293031323334class ArithmeticDemo &#123; public static void main (String[] args) &#123; int result = 1 + 2; // result is now 3 System.out.println(&quot;1 + 2 = &quot; + result); int original_result = result; result = result - 1; // result is now 2 System.out.println(original_result + &quot; - 1 = &quot; + result); original_result = result; result = result * 2; // result is now 4 System.out.println(original_result + &quot; * 2 = &quot; + result); original_result = result; result = result / 2; // result is now 2 System.out.println(original_result + &quot; / 2 = &quot; + result); original_result = result; result = result + 8; // result is now 10 System.out.println(original_result + &quot; + 8 = &quot; + result); original_result = result; result = result % 7; // result is now 3 System.out.println(original_result + &quot; % 7 = &quot; + result); &#125;&#125; æ­¤ç¨‹åºæ‰“å°ä»¥ä¸‹å†…å®¹ï¼š 1234561 + 2 = 33 - 1 = 22 * 2 = 44 / 2 = 22 + 8 = 1010 % 7 = 3 æ‚¨è¿˜å¯ä»¥å°†ç®—æœ¯è¿ç®—ç¬¦ä¸ç®€å•èµ‹å€¼è¿ç®—ç¬¦ç»„åˆä»¥åˆ›å»ºå¤åˆèµ‹å€¼ã€‚ä¾‹å¦‚ï¼Œx+&#x3D;1ï¼›å¹¶ä¸”xï¼x+1ï¼›ä¸¤è€…éƒ½å°†xçš„å€¼å¢åŠ 1ã€‚ +è¿ç®—ç¬¦è¿˜å¯ä»¥ç”¨äºå°†ä¸¤ä¸ªå­—ç¬¦ä¸²è¿æ¥åœ¨ä¸€èµ·ï¼Œå¦‚ä»¥ä¸‹ConcatDemoç¨‹åºæ‰€ç¤ºï¼š 12345678class ConcatDemo &#123; public static void main(String[] args)&#123; String firstString = &quot;This is&quot;; String secondString = &quot; a concatenated string.&quot;; String thirdString = firstString+secondString; System.out.println(thirdString); &#125;&#125; åœ¨è¿™ä¸ªç¨‹åºç»“æŸæ—¶ï¼Œå˜é‡thirdStringåŒ…å«â€œthis is a concatenated string.â€ï¼Œå®ƒå°†è¢«æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚ ä¸€å…ƒè¿ç®—ç¬¦ä¸€å…ƒè¿ç®—ç¬¦åªéœ€è¦ä¸€ä¸ªæ“ä½œæ•°ï¼›å®ƒä»¬æ‰§è¡Œå„ç§æ“ä½œï¼Œä¾‹å¦‚å°†å€¼é€’å¢&#x2F;é€’å‡1ã€å¯¹è¡¨è¾¾å¼æ±‚åæˆ–åè½¬å¸ƒå°”å€¼ã€‚ è¿ç®—ç¬¦ æè¿° + ä¸€å…ƒåŠ è¿ç®—ç¬¦ï¼›è¡¨ç¤ºæ­£å€¼ï¼ˆä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰æ­£å€¼ï¼Œåˆ™æ•°å­—ä¸ºæ­£å€¼ï¼‰ - ä¸€å…ƒå‡å·è¿ç®—ç¬¦ï¼›å¦å®šè¡¨è¾¾å¼ ++ å¢é‡è¿ç®—ç¬¦ï¼›å°†ä¸€ä¸ªå€¼é€’å¢1 -- é€’å‡è¿ç®—ç¬¦ï¼›å°†å€¼é€’å‡1 ! é€»è¾‘è¡¥ç è¿ç®—ç¬¦ï¼›åè½¬å¸ƒå°”å€¼ ä»¥ä¸‹ç¨‹åºUnaryDemoæµ‹è¯•ä¸€å…ƒè¿ç®—ç¬¦ï¼š 123456789101112131415161718192021222324252627class UnaryDemo &#123; public static void main(String[] args) &#123; int result = +1; // result is now 1 System.out.println(result); result--; // result is now 0 System.out.println(result); result++; // result is now 1 System.out.println(result); result = -result; // result is now -1 System.out.println(result); boolean success = false; // false System.out.println(success); // true System.out.println(!success); &#125;&#125; é€’å¢&#x2F;é€’å‡è¿ç®—ç¬¦å¯ä»¥åº”ç”¨äºæ“ä½œæ•°ä¹‹å‰ï¼ˆå‰ç¼€ï¼‰æˆ–ä¹‹åï¼ˆåç¼€ï¼‰ã€‚ä»£ç ç»“æœ++ï¼›å’Œ++ç»“æœï¼›ç»“æœéƒ½å°†å¢åŠ ä¸€ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯å‰ç¼€ç‰ˆæœ¬ï¼ˆ++ç»“æœï¼‰çš„è®¡ç®—ç»“æœä¸ºé€’å¢å€¼ï¼Œè€Œåç¼€ç‰ˆæœ¬ï¼ˆç»“æœ++ï¼‰çš„è®¡ç®—å€¼ä¸ºåŸå§‹å€¼ã€‚å¦‚æœæ‚¨åªæ˜¯æ‰§è¡Œä¸€ä¸ªç®€å•çš„é€’å¢&#x2F;é€’å‡ï¼Œé‚£ä¹ˆé€‰æ‹©å“ªä¸ªç‰ˆæœ¬å¹¶ä¸é‡è¦ã€‚ä½†æ˜¯ï¼Œå¦‚æœåœ¨æ›´å¤§çš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ­¤è¿ç®—ç¬¦ï¼Œåˆ™é€‰æ‹©çš„è¡¨è¾¾å¼å¯èƒ½ä¼šäº§ç”Ÿæ˜¾è‘—çš„å·®å¼‚ã€‚ ä»¥ä¸‹ç¨‹åºPrePostDemoæ¼”ç¤ºäº†å‰ç¼€&#x2F;åç¼€ä¸€å…ƒå¢é‡è¿ç®—ç¬¦ï¼š 1234567891011121314151617class PrePostDemo &#123; public static void main(String[] args)&#123; int i = 3; i++; // prints 4 System.out.println(i); ++i; // prints 5 System.out.println(i); // prints 6 System.out.println(++i); // prints 6 System.out.println(i++); // prints 7 System.out.println(i); &#125;&#125; ç›¸ç­‰è¿ç®—ç¬¦ã€å…³ç³»è¿ç®—ç¬¦å’Œæ¡ä»¶è¿ç®—ç¬¦ç­‰å¼å’Œå…³ç³»è¿ç®—ç¬¦ç›¸ç­‰è¿ç®—ç¬¦å’Œå…³ç³»è¿ç®—ç¬¦ç¡®å®šä¸€ä¸ªæ“ä½œæ•°æ˜¯å¦å¤§äºã€å°äºã€ç­‰äºæˆ–ä¸ç­‰äºå¦ä¸€ä¸ªæ“ä½œã€‚è¿™äº›æ“ä½œå‘˜ä¸­çš„å¤§å¤šæ•°å¯èƒ½å¯¹æ‚¨ä¹Ÿå¾ˆç†Ÿæ‚‰ã€‚è¯·è®°ä½ï¼Œåœ¨æµ‹è¯•ä¸¤ä¸ªåŸºæœ¬å€¼æ˜¯å¦ç›¸ç­‰æ—¶ï¼Œå¿…é¡»ä½¿ç”¨â€œ&#x3D;&#x3D;â€ï¼Œè€Œä¸æ˜¯â€œ&#x3D;â€ã€‚ 123456== equal to!= not equal to&gt; greater than&gt;= greater than or equal to&lt; less than&lt;= less than or equal to ä»¥ä¸‹ç¨‹åºComparisonDemoæµ‹è¯•æ¯”è¾ƒè¿ç®—ç¬¦ï¼š 1234567891011121314151617class ComparisonDemo &#123; public static void main(String[] args)&#123; int value1 = 1; int value2 = 2; if(value1 == value2) System.out.println(&quot;value1 == value2&quot;); if(value1 != value2) System.out.println(&quot;value1 != value2&quot;); if(value1 &gt; value2) System.out.println(&quot;value1 &gt; value2&quot;); if(value1 &lt; value2) System.out.println(&quot;value1 &lt; value2&quot;); if(value1 &lt;= value2) System.out.println(&quot;value1 &lt;= value2&quot;); &#125;&#125; Output: 123value1 != value2value1 &lt; value2value1 &lt;= value2 æ¡ä»¶è¿ç®—ç¬¦&amp;&amp;å’Œ||è¿ç®—ç¬¦å¯¹ä¸¤ä¸ªå¸ƒå°”è¡¨è¾¾å¼æ‰§è¡Œæ¡ä»¶andå’Œæ¡ä»¶ORè¿ç®—ã€‚è¿™äº›è¿ç®—ç¬¦è¡¨ç°å‡ºâ€œçŸ­è·¯â€è¡Œä¸ºï¼Œè¿™æ„å‘³ç€åªæœ‰åœ¨éœ€è¦æ—¶æ‰è®¡ç®—ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚ 12&amp;&amp; Conditional-AND|| Conditional-OR ä»¥ä¸‹ç¨‹åºConditionalDemo1æµ‹è¯•è¿™äº›è¿ç®—ç¬¦ï¼š 1234567891011class ConditionalDemo1 &#123; public static void main(String[] args)&#123; int value1 = 1; int value2 = 2; if((value1 == 1) &amp;&amp; (value2 == 2)) System.out.println(&quot;value1 is 1 AND value2 is 2&quot;); if((value1 == 1) || (value2 == 1)) System.out.println(&quot;value1 is 1 OR value2 is 1&quot;); &#125;&#125; å¦ä¸€ä¸ªæ¡ä»¶è¿ç®—ç¬¦æ˜¯ ?: ï¼Œå®ƒå¯ä»¥è¢«è®¤ä¸ºæ˜¯if-then-elseè¯­å¥çš„ç®€å†™ï¼ˆåœ¨æœ¬è¯¾çš„æ§åˆ¶æµè¯­å¥éƒ¨åˆ†ä¸­è®¨è®ºï¼‰ã€‚æ­¤è¿ç®—ç¬¦ä¹Ÿç§°ä¸ºä¸‰å…ƒè¿ç®—ç¬¦ï¼Œå› ä¸ºå®ƒä½¿ç”¨ä¸‰ä¸ªæ“ä½œæ•°ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œè¯¥è¿ç®—ç¬¦åº”ç†è§£ä¸ºï¼šâ€œå¦‚æœsomeConditionä¸ºtrueï¼Œåˆ™å°†value1çš„å€¼èµ‹ç»™resultã€‚å¦åˆ™ï¼Œå°†value2çš„å€¼èµ‹ä¸ºresultâ€ ä»¥ä¸‹ç¨‹åºConditionalDemo2æµ‹è¯• ?: æ“ä½œå‘˜ï¼š 123456789101112class ConditionalDemo2 &#123; public static void main(String[] args)&#123; int value1 = 1; int value2 = 2; int result; boolean someCondition = true; result = someCondition ? value1 : value2; System.out.println(result); &#125;&#125; ç”±äºsomeConditionä¸ºtrueï¼Œæ­¤ç¨‹åºå°†â€œ1â€æ‰“å°åˆ°å±å¹•ä¸Šã€‚ä½¿ç”¨ ?: è¿ç®—ç¬¦è€Œä¸æ˜¯if-then-elseè¯­å¥ï¼Œå¦‚æœå®ƒä½¿ä»£ç æ›´å¯è¯»ï¼›ä¾‹å¦‚ï¼Œå½“è¡¨è¾¾å¼ç´§å‡‘ä¸”æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆå¦‚èµ‹å€¼ï¼‰æ—¶ã€‚ ç±»å‹æ¯”è¾ƒè¿ç®—ç¬¦å®ä¾‹instanceofè¿ç®—ç¬¦å°†å¯¹è±¡ä¸æŒ‡å®šç±»å‹è¿›è¡Œæ¯”è¾ƒã€‚æ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥æµ‹è¯•å¯¹è±¡æ˜¯ç±»çš„å®ä¾‹ã€å­ç±»çš„å®ä¾‹è¿˜æ˜¯å®ç°ç‰¹å®šæ¥å£çš„ç±»çš„å®ä¾‹ã€‚ ä¸‹é¢çš„ç¨‹åºInstanceofDemoå®šä¹‰äº†ä¸€ä¸ªçˆ¶ç±»ï¼ˆåä¸ºparentï¼‰ã€ä¸€ä¸ªç®€å•æ¥å£ï¼ˆåä¸ºMyInterfaceï¼‰å’Œä¸€ä¸ªä»çˆ¶ç±»ç»§æ‰¿å¹¶å®ç°æ¥å£çš„å­ç±»ï¼ˆåchildï¼‰ã€‚ 123456789101112131415161718192021222324class InstanceofDemo &#123; public static void main(String[] args) &#123; Parent obj1 = new Parent(); Parent obj2 = new Child(); System.out.println(&quot;obj1 instanceof Parent: &quot; + (obj1 instanceof Parent)); System.out.println(&quot;obj1 instanceof Child: &quot; + (obj1 instanceof Child)); System.out.println(&quot;obj1 instanceof MyInterface: &quot; + (obj1 instanceof MyInterface)); System.out.println(&quot;obj2 instanceof Parent: &quot; + (obj2 instanceof Parent)); System.out.println(&quot;obj2 instanceof Child: &quot; + (obj2 instanceof Child)); System.out.println(&quot;obj2 instanceof MyInterface: &quot; + (obj2 instanceof MyInterface)); &#125;&#125;class Parent &#123;&#125;class Child extends Parent implements MyInterface &#123;&#125;interface MyInterface &#123;&#125; Output: 123456obj1 instanceof Parent: trueobj1 instanceof Child: falseobj1 instanceof MyInterface: falseobj2 instanceof Parent: trueobj2 instanceof Child: trueobj2 instanceof MyInterface: true ä½¿ç”¨instanceofè¿ç®—ç¬¦æ—¶ï¼Œè¯·è®°ä½nullä¸æ˜¯ä»»ä½•ä¸œè¥¿çš„å®ä¾‹ã€‚ ä½å’Œä½ç§»ä½è¿ç®—ç¬¦Javaç¼–ç¨‹è¯­è¨€è¿˜æä¾›äº†å¯¹æ•´å‹æ‰§è¡Œé€ä½å’Œç§»ä½æ“ä½œçš„è¿ç®—ç¬¦ã€‚æœ¬èŠ‚ä¸­è®¨è®ºçš„è¿ç®—ç¬¦ä¸å¤ªå¸¸ç”¨ã€‚å› æ­¤ï¼Œä»–ä»¬çš„æŠ¥é“å¾ˆç®€çŸ­ï¼›å…¶ç›®çš„åªæ˜¯è®©æ‚¨æ„è¯†åˆ°è¿™äº›æ“ä½œç¬¦çš„å­˜åœ¨ã€‚ ä¸€å…ƒé€ä½è¡¥ç è¿ç®—ç¬¦â€œ~â€åè½¬ä½æ¨¡å¼ï¼›å®ƒå¯ä»¥åº”ç”¨äºä»»ä½•ä¸€ç§ç§¯åˆ†ç±»å‹ï¼Œä½¿æ¯ä¸ªâ€œ0â€éƒ½æˆä¸ºâ€œ1â€ï¼Œæ¯ä¸ªâ€œ1â€éƒ½å˜æˆâ€œ0â€ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå­—èŠ‚åŒ…å«8ä½ï¼›å°†è¯¥è¿ç®—ç¬¦åº”ç”¨äºä½æ¨¡å¼ä¸ºâ€œ00000000â€çš„å€¼å°†å…¶æ¨¡å¼æ›´æ”¹ä¸ºâ€œ11111111â€ã€‚ æœ‰ç¬¦å·å·¦ç§»ä½è¿ç®—ç¬¦â€œ&lt;&lt;â€å‘å·¦ç§»ä½ä½æ¨¡å¼ï¼Œæœ‰ç¬¦å·å³ç§»ä½è¿ç®—ç¬¦â€œ&gt;&gt;â€å‘å³ç§»ä½ä½æ¨¡å¼ã€‚ä½æ¨¡å¼ç”±å·¦ä¾§æ“ä½œæ•°ç»™å‡ºï¼Œè€Œè¦ç§»ä½çš„ä½ç½®æ•°ç”±å³ä¾§æ“ä½œæ•°ç»™å‡ºã€‚æ— ç¬¦å·å³ç§»è¿ç®—ç¬¦â€œ&gt;&gt;&gt;â€å°†é›¶ç§»åˆ°æœ€å·¦ä½ç½®ï¼Œè€Œâ€œ&gt;&gt;â€ä¹‹åçš„æœ€å·¦ä½ç½®å–å†³äºç¬¦å·æ‰©å±•ã€‚ æŒ‰ä½ &amp; è¿ç®—ç¬¦æ‰§è¡ŒæŒ‰ä½ANDè¿ç®—ã€‚ æŒ‰ä½ ^ è¿ç®—ç¬¦æ‰§è¡ŒæŒ‰ä½å¼‚æˆ–è¿ç®—ã€‚ æŒ‰ä½ | è¿ç®—ç¬¦æ‰§è¡ŒæŒ‰ä½åŒ…å«çš„ORè¿ç®—ã€‚ ä»¥ä¸‹ç¨‹åºBitDemoä½¿ç”¨æŒ‰ä½ANDè¿ç®—ç¬¦å°†æ•°å­—â€œ2â€æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚ 12345678class BitDemo &#123; public static void main(String[] args) &#123; int bitmask = 0x000F; int val = 0x2222; // prints &quot;2&quot; System.out.println(val &amp; bitmask); &#125;&#125; è¿ç®—ç¬¦æ€»ç»“ä¸‹é¢çš„å¿«é€Ÿå‚è€ƒæ€»ç»“äº†Javaç¼–ç¨‹è¯­è¨€æ”¯æŒçš„è¿ç®—ç¬¦ã€‚ ç®€å•èµ‹å€¼è¿ç®—ç¬¦1= ç®€å•èµ‹å€¼è¿ç®—ç¬¦ ç®—æœ¯è¿ç®—ç¬¦12345+ åŠ æ³•è¿ç®—ç¬¦ï¼ˆä¹Ÿç”¨äºå­—ç¬¦ä¸²è¿æ¥ï¼‰- å‡æ³•è¿ç®—ç¬¦* ä¹˜æ³•è¿ç®—ç¬¦/ é™¤æ³•è¿ç®—ç¬¦% ä½™æ•°è¿ç®—ç¬¦ å•ç›®è¿ç®—ç¬¦12345+ ä¸€å…ƒåŠ è¿ç®—ç¬¦ï¼›è¡¨ç¤ºæ­£å€¼ï¼ˆæ•°å­—ä¸ºæ­£å€¼ï¼Œä½†æ²¡æœ‰æ­¤å€¼ï¼‰- ä¸€å…ƒå‡è¿ç®—ç¬¦ï¼›å¦å®šè¡¨è¾¾å¼++ å¢é‡è¿ç®—ç¬¦ï¼›å°†å€¼é€’å¢1-- å‡é‡è¿ç®—ç¬¦ï¼›å°†å€¼é€’å‡1! é€»è¾‘è¡¥ç è¿ç®—ç¬¦ï¼›åè½¬å¸ƒå°”å€¼ ç­‰å¼å’Œå…³ç³»è¿ç®—ç¬¦123456== Equal to!= Not equal to&gt; Greater than&gt;= Greater than or equal to&lt; Less than&lt;= Less than or equal to æ¡ä»¶è¿ç®—ç¬¦1234&amp;&amp; Conditional-AND|| Conditional-OR?: Ternary (shorthand for if-then-else statement) ç±»å‹æ¯”è¾ƒè¿ç®—ç¬¦12instanceof Compares an object to a specified type ä½å’Œä½ç§»ä½è¿ç®—ç¬¦1234567~ Unary bitwise complement&lt;&lt; Signed left shift&gt;&gt; Signed right shift&gt;&gt;&gt; Unsigned right shift&amp; Bitwise AND^ Bitwise exclusive OR| Bitwise inclusive OR è¡¨è¾¾å¼ã€è¯­å¥å’Œå—æ—¢ç„¶æ‚¨äº†è§£äº†å˜é‡å’Œè¿ç®—ç¬¦ï¼Œç°åœ¨æ˜¯å­¦ä¹ è¡¨è¾¾å¼ã€è¯­å¥å’Œå—çš„æ—¶å€™äº†ã€‚è¿ç®—ç¬¦å¯ä»¥ç”¨äºæ„å»ºè®¡ç®—å€¼çš„è¡¨è¾¾å¼ï¼›è¡¨è¾¾å¼æ˜¯è¯­å¥çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼›è¯­å¥å¯ä»¥è¢«åˆ†ç»„ä¸ºå—ã€‚ è¡¨è¾¾å¼è¡¨è¾¾å¼æ˜¯ä¸€ç§ç”±å˜é‡ã€è¿ç®—ç¬¦å’Œæ–¹æ³•è°ƒç”¨ç»„æˆçš„æ„é€ ï¼Œå®ƒä»¬æ ¹æ®è¯­è¨€çš„è¯­æ³•æ„é€ ï¼Œå¹¶è®¡ç®—ä¸ºå•ä¸ªå€¼ã€‚æ‚¨å·²ç»çœ‹åˆ°äº†è¡¨è¾¾å¼çš„ç¤ºä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567int cadence = 0;anArray[0] = 100;System.out.println(&quot;Element 1 at index 0: &quot; + anArray[0]);int result = 1 + 2; // result is now 3if (value1 == value2) System.out.println(&quot;value1 == value2&quot;); è¡¨è¾¾å¼è¿”å›çš„å€¼çš„æ•°æ®ç±»å‹å–å†³äºè¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„å…ƒç´ ã€‚è¡¨è¾¾å¼cadence&#x3D;0è¿”å›intï¼Œå› ä¸ºèµ‹å€¼è¿ç®—ç¬¦è¿”å›çš„æ•°æ®ç±»å‹ä¸å…¶å·¦æ‰‹æ“ä½œæ•°ç›¸åŒï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œcadenceæ˜¯ä¸€ä¸ªintã€‚ä»å…¶ä»–è¡¨è¾¾å¼å¯ä»¥çœ‹å‡ºï¼Œè¡¨è¾¾å¼ä¹Ÿå¯ä»¥è¿”å›å…¶ä»–ç±»å‹çš„å€¼ï¼Œä¾‹å¦‚å¸ƒå°”å€¼æˆ–å­—ç¬¦ä¸²ã€‚ Javaç¼–ç¨‹è¯­è¨€å…è®¸æ‚¨ä»å„ç§è¾ƒå°çš„è¡¨è¾¾å¼æ„é€ å¤åˆè¡¨è¾¾å¼ï¼Œåªè¦è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†æ‰€éœ€çš„æ•°æ®ç±»å‹ä¸å¦ä¸€éƒ¨åˆ†çš„æ•°æ®ç±»å‹åŒ¹é…ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¤åˆè¡¨è¾¾å¼çš„ç¤ºä¾‹ï¼š 11 * 2 * 3 åœ¨è¿™ä¸ªç‰¹å®šçš„ä¾‹å­ä¸­ï¼Œè¡¨è¾¾å¼çš„æ±‚å€¼é¡ºåºå¹¶ä¸é‡è¦ï¼Œå› ä¸ºä¹˜æ³•çš„ç»“æœä¸é¡ºåºæ— å…³ï¼›ç»“æœæ€»æ˜¯ç›¸åŒçš„ï¼Œä¸ç®¡ä½ ç”¨å“ªä¸ªé¡ºåºè¿›è¡Œä¹˜æ³•ã€‚ç„¶è€Œï¼Œå¹¶éæ‰€æœ‰è¡¨è¾¾å¼éƒ½æ˜¯å¦‚æ­¤ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è¡¨è¾¾å¼ä¼šç»™å‡ºä¸åŒçš„ç»“æœï¼Œå…·ä½“å–å†³äºæ‚¨æ˜¯å…ˆæ‰§è¡ŒåŠ æ³•è¿ç®—è¿˜æ˜¯å…ˆæ‰§è¡Œé™¤æ³•è¿ç®—ï¼š 1x + y / 100 // ambiguous æ‚¨å¯ä»¥ä½¿ç”¨å¹³è¡¡æ‹¬å·ï¼ˆå’Œï¼‰ç²¾ç¡®æŒ‡å®šè¡¨è¾¾å¼çš„æ±‚å€¼æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œè¦ä½¿å‰é¢çš„è¡¨è¾¾å¼æ˜ç¡®ï¼Œå¯ä»¥ç¼–å†™ä»¥ä¸‹å†…å®¹ï¼š 1(x + y) / 100 // unambiguous, recommended å¦‚æœæ²¡æœ‰æ˜ç¡®æŒ‡ç¤ºè¦æ‰§è¡Œçš„æ“ä½œçš„é¡ºåºï¼Œåˆ™é¡ºåºç”±åˆ†é…ç»™è¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å†³å®šã€‚ä¼˜å…ˆçº§è¾ƒé«˜çš„è¿ç®—ç¬¦å°†é¦–å…ˆè®¡ç®—ã€‚ä¾‹å¦‚ï¼Œé™¤æ³•è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§é«˜äºåŠ æ³•è¿ç®—ç¬¦ã€‚å› æ­¤ï¼Œä»¥ä¸‹ä¸¤ç§è¯´æ³•æ˜¯ç­‰ä»·çš„ï¼š 1234x + y / 100 x + (y / 100) // unambiguous, recommended åœ¨ç¼–å†™å¤åˆè¡¨è¾¾å¼æ—¶ï¼Œè¦æ˜ç¡®ï¼Œå¹¶ç”¨æ‹¬å·æŒ‡æ˜åº”é¦–å…ˆè®¡ç®—å“ªäº›è¿ç®—ç¬¦ã€‚è¿™ç§åšæ³•ä½¿ä»£ç æ›´æ˜“äºé˜…è¯»å’Œç»´æŠ¤ã€‚ è¯­å¥è¯­å¥å¤§è‡´ç›¸å½“äºè‡ªç„¶è¯­è¨€ä¸­çš„å¥å­ã€‚è¯­å¥æ„æˆä¸€ä¸ªå®Œæ•´çš„æ‰§è¡Œå•å…ƒã€‚é€šè¿‡ç”¨åˆ†å·ï¼ˆï¼›ï¼‰ç»ˆæ­¢è¡¨è¾¾å¼ï¼Œå¯ä»¥å°†ä»¥ä¸‹ç±»å‹çš„è¡¨è¾¾å¼è½¬æ¢ä¸ºè¯­å¥ã€‚ èµ‹å€¼è¡¨è¾¾å¼ ä»»ä½•ä½¿ç”¨ ++ æˆ– -- Methodè°ƒç”¨ å¯¹è±¡åˆ›å»ºè¡¨è¾¾å¼ è¿™ç§è¯­å¥ç§°ä¸ºè¡¨è¾¾å¼è¯­å¥ã€‚ä¸‹é¢æ˜¯ä¸€äº›è¡¨è¾¾å¼è¯­å¥çš„ç¤ºä¾‹ã€‚ 12345678// èµ‹å€¼è¯­å¥aValue = 8933.234;// å¢é‡è¯­å¥aValue++;// æ–¹æ³•è°ƒç”¨è¯­å¥System.out.println(&quot;Hello World!&quot;);// å¯¹è±¡åˆ›å»ºè¯­å¥Bicycle myBike = new Bicycle(); é™¤äº†è¡¨è¾¾å¼è¯­å¥ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¸¤ç§è¯­å¥ï¼šå£°æ˜è¯­å¥å’Œæ§åˆ¶æµè¯­å¥ã€‚å£°æ˜è¯­å¥å£°æ˜å˜é‡ã€‚æ‚¨å·²ç»çœ‹åˆ°äº†è®¸å¤šå£°æ˜è¯­å¥çš„ç¤ºä¾‹ï¼š 12// declaration statementdouble aValue = 8933.234; æœ€åï¼Œæ§åˆ¶æµè¯­å¥è°ƒèŠ‚è¯­å¥çš„æ‰§è¡Œé¡ºåºã€‚æ‚¨å°†åœ¨ä¸‹ä¸€èŠ‚â€œControl Flow Statementsâ€ä¸­äº†è§£æ§åˆ¶æµè¯­å¥ å—å—æ˜¯å¹³è¡¡å¤§æ‹¬å·ä¹‹é—´çš„ä¸€ç»„é›¶ä¸ªæˆ–å¤šä¸ªè¯­å¥ï¼Œå¯ä»¥åœ¨ä»»ä½•å…è®¸ä½¿ç”¨å•ä¸ªè¯­å¥çš„åœ°æ–¹ä½¿ç”¨ã€‚ä»¥ä¸‹ç¤ºä¾‹BlockDemoè¯´æ˜äº†å—çš„ä½¿ç”¨ï¼š 1234567891011class BlockDemo &#123; public static void main(String[] args) &#123; boolean condition = true; if (condition) &#123; // begin block 1 System.out.println(&quot;Condition is true.&quot;); &#125; // end block one else &#123; // begin block 2 System.out.println(&quot;Condition is false.&quot;); &#125; // end block 2 &#125;&#125; æ§åˆ¶æµç¨‹è¯­å¥æºæ–‡ä»¶ä¸­çš„è¯­å¥é€šå¸¸æŒ‰å‡ºç°çš„é¡ºåºä»ä¸Šåˆ°ä¸‹æ‰§è¡Œã€‚ç„¶è€Œï¼Œæ§åˆ¶æµè¯­å¥é€šè¿‡é‡‡ç”¨å†³ç­–ã€å¾ªç¯å’Œåˆ†æ”¯æ¥åˆ†è§£æ‰§è¡Œæµï¼Œä½¿ç¨‹åºèƒ½å¤Ÿæœ‰æ¡ä»¶åœ°æ‰§è¡Œç‰¹å®šçš„ä»£ç å—ã€‚æœ¬èŠ‚æè¿°Javaç¼–ç¨‹è¯­è¨€æ”¯æŒçš„å†³ç­–è¯­å¥ï¼ˆif-thenã€if-then-elseã€switchï¼‰ã€å¾ªç¯è¯­å¥ï¼ˆforã€whileã€do-whileï¼‰å’Œåˆ†æ”¯è¯­å¥ï¼ˆbreakã€continueã€returnï¼‰ã€‚ if-thenè¯­å¥if-thenè¯­å¥æ˜¯æ‰€æœ‰æ§åˆ¶æµè¯­å¥ä¸­æœ€åŸºæœ¬çš„ã€‚å®ƒå‘Šè¯‰æ‚¨çš„ç¨‹åºåªæœ‰åœ¨ç‰¹å®šæµ‹è¯•çš„ç»“æœä¸ºtrueæ—¶æ‰æ‰§è¡ŒæŸæ®µä»£ç ã€‚ä¾‹å¦‚ï¼Œè‡ªè¡Œè½¦ç±»åªèƒ½åœ¨è‡ªè¡Œè½¦å·²ç»åœ¨è¿åŠ¨æ—¶æ‰å…è®¸åˆ¶åŠ¨å™¨é™ä½è‡ªè¡Œè½¦çš„é€Ÿåº¦ã€‚applyBrakesæ–¹æ³•çš„ä¸€ç§å¯èƒ½å®ç°æ–¹å¼å¦‚ä¸‹ï¼š 1234567void applyBrakes() &#123; // the &quot;if&quot; clause: bicycle must be moving if (isMoving)&#123; // the &quot;then&quot; clause: decrease current speed currentSpeed--; &#125;&#125; å¦‚æœæ­¤æµ‹è¯•çš„ç»“æœä¸ºfalseï¼ˆè¡¨ç¤ºè‡ªè¡Œè½¦ä¸åœ¨è¿åŠ¨ä¸­ï¼‰ï¼Œåˆ™æ§åˆ¶è·³åˆ°If-thenè¯­å¥çš„æœ«å°¾ã€‚ æ­¤å¤–ï¼Œå¦‚æœâ€œthenâ€å­å¥åªåŒ…å«ä¸€æ¡è¯­å¥ï¼Œåˆ™å·¦å¤§æ‹¬å·å’Œå³å¤§æ‹¬å·æ˜¯å¯é€‰çš„ï¼š 12345void applyBrakes() &#123; // same as above, but without braces if (isMoving) currentSpeed--;&#125; å†³å®šä½•æ—¶çœç•¥æ‹¬å·æ˜¯ä¸ªäººå¼€å‘ä¹ æƒ¯çš„é—®é¢˜ã€‚çœç•¥å®ƒä»¬ä¼šä½¿ä»£ç æ›´åŠ è„†å¼±ã€‚å¦‚æœåæ¥åœ¨â€œthenâ€å­å¥ä¸­æ·»åŠ äº†ç¬¬äºŒæ¡è¯­å¥ï¼Œä¸€ä¸ªå¸¸è§çš„é”™è¯¯å°±æ˜¯å¿˜è®°æ·»åŠ æ–°éœ€è¦çš„å¤§æ‹¬å·ã€‚ç¼–è¯‘å™¨æ— æ³•æ•è·æ­¤ç±»é”™è¯¯ï¼›ä½ åªä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœã€‚ if-then-elseè¯­å¥å½“â€œifâ€å­å¥çš„è®¡ç®—ç»“æœä¸ºfalseæ—¶ï¼Œif-then-elseè¯­å¥æä¾›äº†æ‰§è¡Œçš„è¾…åŠ©è·¯å¾„ã€‚å¦‚æœåœ¨è‡ªè¡Œè½¦ä¸è¿åŠ¨æ—¶åº”ç”¨äº†åˆ¶åŠ¨å™¨ï¼Œæ‚¨å¯ä»¥åœ¨applyBrakesæ–¹æ³•ä¸­ä½¿ç”¨if-then-elseè¯­å¥æ¥é‡‡å–ä¸€äº›æªæ–½ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªéœ€æ‰“å°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼Œè¯´æ˜è‡ªè¡Œè½¦å·²ç»åœæ­¢ã€‚ 1234567void applyBrakes() &#123; if (isMoving) &#123; currentSpeed--; &#125; else &#123; System.err.println(&quot;The bicycle has already stopped!&quot;); &#125; &#125; ä»¥ä¸‹ç¨‹åºIfElseDemoæ ¹æ®æµ‹è¯•åˆ†æ•°çš„å€¼åˆ†é…åˆ†æ•°ï¼šaè¡¨ç¤º90%æˆ–ä»¥ä¸Šï¼ŒBè¡¨ç¤º80%æˆ–ä»¥ä¸Šï¼Œä¾æ­¤ç±»æ¨ã€‚ 1234567891011121314151617181920class IfElseDemo &#123; public static void main(String[] args) &#123; int testscore = 76; char grade; if (testscore &gt;= 90) &#123; grade = &#x27;A&#x27;; &#125; else if (testscore &gt;= 80) &#123; grade = &#x27;B&#x27;; &#125; else if (testscore &gt;= 70) &#123; grade = &#x27;C&#x27;; &#125; else if (testscore &gt;= 60) &#123; grade = &#x27;D&#x27;; &#125; else &#123; grade = &#x27;F&#x27;; &#125; System.out.println(&quot;Grade = &quot; + grade); &#125;&#125; ç¨‹åºçš„è¾“å‡ºä¸ºï¼š 1Grade = C æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°testscoreçš„å€¼å¯ä»¥æ»¡è¶³å¤åˆè¯­å¥ä¸­çš„å¤šä¸ªè¡¨è¾¾å¼ï¼š76&gt;&#x3D;70å’Œ76&gt;&#x3D;60ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦æ»¡è¶³æ¡ä»¶ï¼Œå°±ä¼šæ‰§è¡Œç›¸åº”çš„è¯­å¥ï¼ˆgrade&#x3D;â€™Câ€™ï¼›ï¼‰å¹¶ä¸”ä¸è¯„ä¼°å…¶ä½™æ¡ä»¶ã€‚ switchè¯­å¥ä¸if-thenå’Œif-then-elseè¯­å¥ä¸åŒï¼Œswitchè¯­å¥å¯ä»¥æœ‰è®¸å¤šå¯èƒ½çš„æ‰§è¡Œè·¯å¾„ã€‚å¼€å…³ç”¨äºbyteã€shortã€charå’ŒintåŸå§‹æ•°æ®ç±»å‹ã€‚å®ƒè¿˜å¯ä»¥ä¸æšä¸¾ç±»å‹ï¼ˆåœ¨æšä¸¾ç±»å‹ä¸­è®¨è®ºï¼‰ã€Stringç±»ä»¥åŠåŒ…è£…æŸäº›åŸºæœ¬ç±»å‹çš„å‡ ä¸ªç‰¹æ®Šç±»ä¸€èµ·ä½¿ç”¨ï¼šCharacter, Byte, Short, and Integerï¼ˆåœ¨Numbers and Stringsä¸­è®¨è®ºï¼‰ã€‚ ä¸‹é¢çš„ä»£ç ç¤ºä¾‹SwitchDemoå£°æ˜äº†ä¸€ä¸ªåä¸ºmonthçš„intï¼Œå…¶å€¼è¡¨ç¤ºæœˆä»½ã€‚ä»£ç ä½¿ç”¨switchè¯­å¥æ ¹æ®æœˆä»½çš„å€¼æ˜¾ç¤ºæœˆä»½çš„åç§°ã€‚ 123456789101112131415161718192021222324252627282930313233343536public class SwitchDemo &#123; public static void main(String[] args) &#123; int month = 8; String monthString; switch (month) &#123; case 1: monthString = &quot;January&quot;; break; case 2: monthString = &quot;February&quot;; break; case 3: monthString = &quot;March&quot;; break; case 4: monthString = &quot;April&quot;; break; case 5: monthString = &quot;May&quot;; break; case 6: monthString = &quot;June&quot;; break; case 7: monthString = &quot;July&quot;; break; case 8: monthString = &quot;August&quot;; break; case 9: monthString = &quot;September&quot;; break; case 10: monthString = &quot;October&quot;; break; case 11: monthString = &quot;November&quot;; break; case 12: monthString = &quot;December&quot;; break; default: monthString = &quot;Invalid month&quot;; break; &#125; System.out.println(monthString); &#125;&#125; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…«æœˆè¢«æ‰“å°ä¸ºæ ‡å‡†è¾“å‡ºã€‚ switchè¯­å¥çš„ä¸»ä½“ç§°ä¸ºswitchå—ã€‚å¼€å…³å—ä¸­çš„è¯­å¥å¯ä»¥ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå¤§å°å†™æˆ–é»˜è®¤æ ‡ç­¾è¿›è¡Œæ ‡è®°ã€‚switchè¯­å¥è®¡ç®—å…¶è¡¨è¾¾å¼ï¼Œç„¶åæ‰§è¡ŒåŒ¹é…å¤§å°å†™æ ‡ç­¾åé¢çš„æ‰€æœ‰è¯­å¥ã€‚ æ‚¨è¿˜å¯ä»¥ä½¿ç”¨if-then-elseè¯­å¥æ˜¾ç¤ºæœˆä»½åç§°ï¼š 1234567int month = 8;if (month == 1) &#123; System.out.println(&quot;January&quot;);&#125; else if (month == 2) &#123; System.out.println(&quot;February&quot;);&#125;... // and so on å†³å®šæ˜¯å¦ä½¿ç”¨if-then-elseè¯­å¥æˆ–switchè¯­å¥å–å†³äºè¯­å¥çš„å¯è¯»æ€§å’Œæµ‹è¯•çš„è¡¨è¾¾å¼ã€‚if-then-elseè¯­å¥å¯ä»¥åŸºäºå€¼æˆ–æ¡ä»¶çš„èŒƒå›´æµ‹è¯•è¡¨è¾¾å¼ï¼Œè€Œswitchè¯­å¥åªèƒ½åŸºäºå•ä¸ªæ•´æ•°ã€æšä¸¾å€¼æˆ–Stringå¯¹è±¡æµ‹è¯•è¡¨è¾¾å¼ã€‚ å¦ä¸€ä¸ªæœ‰è¶£çš„ç‚¹æ˜¯breakè¯­å¥ã€‚æ¯ä¸ªbreakè¯­å¥éƒ½ç»ˆæ­¢å°é—­çš„switchè¯­å¥ã€‚æ§åˆ¶æµç»§ç»­æ‰§è¡Œå¼€å…³å—åé¢çš„ç¬¬ä¸€æ¡è¯­å¥ã€‚breakè¯­å¥æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºå¦‚æœæ²¡æœ‰å®ƒä»¬ï¼Œå¼€å…³å—ä¸­çš„è¯­å¥å°±ä¼šå¤±è´¥ï¼šåŒ¹é…çš„caseæ ‡ç­¾ä¹‹åçš„æ‰€æœ‰è¯­å¥éƒ½ä¼šæŒ‰é¡ºåºæ‰§è¡Œï¼Œè€Œä¸ç®¡åç»­caseæ ‡ç­¾çš„è¡¨è¾¾å¼å¦‚ä½•ï¼Œç›´åˆ°é‡åˆ°breakã€‚ç¨‹åºSwitchDemoFallThroughæ˜¾ç¤ºå¼€å…³å—ä¸­çš„è¯­å¥ã€‚ç¨‹åºæ˜¾ç¤ºä¸æ•´æ•°æœˆä»½å¯¹åº”çš„æœˆä»½ä»¥åŠä¸€å¹´ä¸­çš„åç»­æœˆä»½ï¼š 12345678910111213141516171819202122232425262728293031323334public class SwitchDemoFallThrough &#123; public static void main(String[] args) &#123; java.util.ArrayList&lt;String&gt; futureMonths = new java.util.ArrayList&lt;String&gt;(); int month = 8; switch (month) &#123; case 1: futureMonths.add(&quot;January&quot;); case 2: futureMonths.add(&quot;February&quot;); case 3: futureMonths.add(&quot;March&quot;); case 4: futureMonths.add(&quot;April&quot;); case 5: futureMonths.add(&quot;May&quot;); case 6: futureMonths.add(&quot;June&quot;); case 7: futureMonths.add(&quot;July&quot;); case 8: futureMonths.add(&quot;August&quot;); case 9: futureMonths.add(&quot;September&quot;); case 10: futureMonths.add(&quot;October&quot;); case 11: futureMonths.add(&quot;November&quot;); case 12: futureMonths.add(&quot;December&quot;); break; default: break; &#125; if (futureMonths.isEmpty()) &#123; System.out.println(&quot;Invalid month number&quot;); &#125; else &#123; for (String monthName : futureMonths) &#123; System.out.println(monthName); &#125; &#125; &#125;&#125; è¿™æ˜¯ä»£ç çš„è¾“å‡ºï¼š 12345AugustSeptemberOctoberNovemberDecember ä»æŠ€æœ¯ä¸Šè®²ï¼Œä¸éœ€è¦æœ€åä¸€æ¬¡ä¸­æ–­ï¼Œå› ä¸ºæµä¸åœ¨switchè¯­å¥ä¸­ã€‚å»ºè®®ä½¿ç”¨ä¸­æ–­ï¼Œè¿™æ ·ä¿®æ”¹ä»£ç æ›´å®¹æ˜“ï¼Œæ›´ä¸å®¹æ˜“å‡ºé”™ã€‚é»˜è®¤éƒ¨åˆ†å¤„ç†å…¶ä¸­ä¸€ä¸ªcaseéƒ¨åˆ†æœªæ˜¾å¼å¤„ç†çš„æ‰€æœ‰å€¼ã€‚ ä¸‹é¢çš„ä»£ç ç¤ºä¾‹SwitchDemo2å±•ç¤ºäº†ä¸€ä¸ªè¯­å¥å¦‚ä½•å…·æœ‰å¤šä¸ªå¤§å°å†™æ ‡ç­¾ã€‚ä»£ç ç¤ºä¾‹è®¡ç®—ç‰¹å®šæœˆä»½çš„å¤©æ•°ï¼š 123456789101112131415161718192021222324252627282930313233class SwitchDemo2 &#123; public static void main(String[] args) &#123; int month = 2; int year = 2000; int numDays = 0; switch (month) &#123; case 1: case 3: case 5: case 7: case 8: case 10: case 12: numDays = 31; break; case 4: case 6: case 9: case 11: numDays = 30; break; case 2: if (((year % 4 == 0) &amp;&amp; !(year % 100 == 0)) || (year % 400 == 0)) numDays = 29; else numDays = 28; break; default: System.out.println(&quot;Invalid month.&quot;); break; &#125; System.out.println(&quot;Number of Days = &quot; + numDays); &#125;&#125; è¿™æ˜¯ä»£ç çš„è¾“å‡ºï¼š 1Number of Days = 29 åœ¨switchè¯­å¥ä¸­ä½¿ç”¨å­—ç¬¦ä¸²åœ¨JavaSE7åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥åœ¨switchè¯­å¥çš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨Stringå¯¹è±¡ã€‚ä¸‹é¢çš„ä»£ç ç¤ºä¾‹StringSwitchDemoæ ¹æ®åä¸ºmonthçš„å­—ç¬¦ä¸²çš„å€¼æ˜¾ç¤ºæœˆä»½æ•°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869public class StringSwitchDemo &#123; public static int getMonthNumber(String month) &#123; int monthNumber = 0; if (month == null) &#123; return monthNumber; &#125; switch (month.toLowerCase()) &#123; case &quot;january&quot;: monthNumber = 1; break; case &quot;february&quot;: monthNumber = 2; break; case &quot;march&quot;: monthNumber = 3; break; case &quot;april&quot;: monthNumber = 4; break; case &quot;may&quot;: monthNumber = 5; break; case &quot;june&quot;: monthNumber = 6; break; case &quot;july&quot;: monthNumber = 7; break; case &quot;august&quot;: monthNumber = 8; break; case &quot;september&quot;: monthNumber = 9; break; case &quot;october&quot;: monthNumber = 10; break; case &quot;november&quot;: monthNumber = 11; break; case &quot;december&quot;: monthNumber = 12; break; default: monthNumber = 0; break; &#125; return monthNumber; &#125; public static void main(String[] args) &#123; String month = &quot;August&quot;; int returnedMonthNumber = StringSwitchDemo.getMonthNumber(month); if (returnedMonthNumber == 0) &#123; System.out.println(&quot;Invalid month&quot;); &#125; else &#123; System.out.println(returnedMonthNumber); &#125; &#125;&#125; æ­¤ä»£ç çš„è¾“å‡ºä¸º8ã€‚ å°†switchè¡¨è¾¾å¼ä¸­çš„Stringä¸ä¸æ¯ä¸ªå¤§å°å†™æ ‡ç­¾å…³è”çš„è¡¨è¾¾å¼è¿›è¡Œæ¯”è¾ƒï¼Œå°±åƒStringä¸€æ ·ã€‚æ­£åœ¨ä½¿ç”¨ç›¸ç­‰æ–¹æ³•ã€‚ä¸ºäº†ä½¿StringSwitchDemoç¤ºä¾‹æ¥å—ä»»ä½•æœˆä»½ï¼Œä¸ç®¡å¤§å°å†™ï¼Œæœˆä»½éƒ½è½¬æ¢ä¸ºå°å†™ï¼ˆä½¿ç”¨toLowerCaseæ–¹æ³•ï¼‰ï¼Œå¹¶ä¸”ä¸å¤§å°å†™æ ‡ç­¾å…³è”çš„æ‰€æœ‰å­—ç¬¦ä¸²éƒ½æ˜¯å°å†™çš„ã€‚ æ³¨æ„ï¼šæ­¤ç¤ºä¾‹æ£€æŸ¥switchè¯­å¥ä¸­çš„è¡¨è¾¾å¼æ˜¯å¦ä¸ºç©ºã€‚ç¡®ä¿ä»»ä½•switchè¯­å¥ä¸­çš„è¡¨è¾¾å¼éƒ½ä¸ä¸ºç©ºï¼Œä»¥é˜²æ­¢å¼•å‘NullPointerExceptionã€‚ The whileå’Œdo whileè¯­å¥whileè¯­å¥åœ¨ç‰¹å®šæ¡ä»¶ä¸ºçœŸæ—¶è¿ç»­æ‰§è¡Œä¸€ä¸ªè¯­å¥å—ã€‚å…¶è¯­æ³•å¯ä»¥è¡¨ç¤ºä¸ºï¼š 123while (expression) &#123; statement(s)&#125; whileè¯­å¥è®¡ç®—è¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼å¿…é¡»è¿”å›å¸ƒå°”å€¼ã€‚å¦‚æœè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœä¸ºtrueï¼Œåˆ™whileè¯­å¥æ‰§è¡Œwhileå—ä¸­çš„è¯­å¥ã€‚whileè¯­å¥ç»§ç»­æµ‹è¯•è¡¨è¾¾å¼å¹¶æ‰§è¡Œå…¶å—ï¼Œç›´åˆ°è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœä¸ºfalseã€‚ä½¿ç”¨whileè¯­å¥æ‰“å°ä»1åˆ°10çš„å€¼å¯ä»¥åœ¨ä»¥ä¸‹WhileDemoç¨‹åºä¸­å®Œæˆï¼š 123456789class WhileDemo &#123; public static void main(String[] args)&#123; int count = 1; while (count &lt; 11) &#123; System.out.println(&quot;Count is: &quot; + count); count++; &#125; &#125;&#125; æ‚¨å¯ä»¥ä½¿ç”¨whileè¯­å¥å®ç°æ— é™å¾ªç¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123while (true)&#123; // your code goes here&#125; Javaç¼–ç¨‹è¯­è¨€è¿˜æä¾›äº†ä¸€ä¸ªdo-whileè¯­å¥ï¼Œå¯ä»¥å¦‚ä¸‹è¡¨ç¤ºï¼š 123do &#123; statement(s)&#125; while (expression); do-whileå’Œwhileçš„åŒºåˆ«åœ¨äºï¼Œdo-whereåœ¨å¾ªç¯çš„åº•éƒ¨è€Œä¸æ˜¯é¡¶éƒ¨è®¡ç®—å…¶è¡¨è¾¾å¼ã€‚å› æ­¤ï¼Œdoå—ä¸­çš„è¯­å¥å§‹ç»ˆè‡³å°‘æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚ä»¥ä¸‹DoWhileDemoç¨‹åºæ‰€ç¤ºï¼š 123456789class DoWhileDemo &#123; public static void main(String[] args)&#123; int count = 1; do &#123; System.out.println(&quot;Count is: &quot; + count); count++; &#125; while (count &lt; 11); &#125;&#125; forè¯­å¥forè¯­å¥æä¾›äº†ä¸€ç§ç´§å‡‘çš„æ–¹æ³•æ¥è¿­ä»£ä¸€ç³»åˆ—å€¼ã€‚ç¨‹åºå‘˜ç»å¸¸å°†å…¶ç§°ä¸ºâ€œforå¾ªç¯â€ï¼Œå› ä¸ºå®ƒé‡å¤å¾ªç¯ç›´åˆ°æ»¡è¶³ç‰¹å®šæ¡ä»¶ã€‚forè¯­å¥çš„ä¸€èˆ¬å½¢å¼å¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ï¼š 1234for (åˆå§‹åŒ–; ç»“æŸ; å®šæœŸçš„å¤„ç†) &#123; statement(s)&#125; ä½¿ç”¨æ­¤ç‰ˆæœ¬çš„forè¯­å¥æ—¶ï¼Œè¯·è®°ä½ï¼š åˆå§‹åŒ–è¡¨è¾¾å¼åˆå§‹åŒ–å¾ªç¯ï¼›å®ƒåœ¨å¾ªç¯å¼€å§‹æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚ å½“ç»ˆæ­¢è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœä¸ºfalseæ—¶ï¼Œå¾ªç¯ç»ˆæ­¢ã€‚ å¢é‡è¡¨è¾¾å¼åœ¨å¾ªç¯çš„æ¯æ¬¡è¿­ä»£ä¹‹åè¢«è°ƒç”¨ï¼›å¯¹äºè¿™ä¸ªè¡¨è¾¾å¼æ¥è¯´ï¼Œå¢åŠ æˆ–å‡å°‘ä¸€ä¸ªå€¼æ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ã€‚ ä»¥ä¸‹ç¨‹åºForDemoä½¿ç”¨forè¯­å¥çš„ä¸€èˆ¬å½¢å¼å°†æ•°å­—1åˆ°10æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºï¼š 1234567class ForDemo &#123; public static void main(String[] args)&#123; for(int i=1; i&lt;11; i++)&#123; System.out.println(&quot;Count is: &quot; + i); &#125; &#125;&#125; è¯¥ç¨‹åºçš„è¾“å‡ºä¸ºï¼š 12345678910Count is: 1Count is: 2Count is: 3Count is: 4Count is: 5Count is: 6Count is: 7Count is: 8Count is: 9Count is: 10 æ³¨æ„ä»£ç å¦‚ä½•åœ¨åˆå§‹åŒ–è¡¨è¾¾å¼ä¸­å£°æ˜å˜é‡ã€‚æ­¤å˜é‡çš„èŒƒå›´ä»å…¶å£°æ˜æ‰©å±•åˆ°ç”±forè¯­å¥æ§åˆ¶çš„å—çš„æœ«å°¾ï¼Œå› æ­¤å®ƒä¹Ÿå¯ä»¥ç”¨äºç»ˆæ­¢è¡¨è¾¾å¼å’Œå¢é‡è¡¨è¾¾å¼ä¸­ã€‚å¦‚æœåœ¨å¾ªç¯ä¹‹å¤–ä¸éœ€è¦æ§åˆ¶forè¯­å¥çš„å˜é‡ï¼Œæœ€å¥½åœ¨åˆå§‹åŒ–è¡¨è¾¾å¼ä¸­å£°æ˜è¯¥å˜é‡ã€‚åç§°iã€jå’Œké€šå¸¸ç”¨äºæ§åˆ¶forå¾ªç¯ï¼›åœ¨åˆå§‹åŒ–è¡¨è¾¾å¼ä¸­å£°æ˜å®ƒä»¬ä¼šé™åˆ¶å®ƒä»¬çš„å¯¿å‘½å¹¶å‡å°‘é”™è¯¯ã€‚ forå¾ªç¯çš„ä¸‰ä¸ªè¡¨è¾¾å¼æ˜¯å¯é€‰çš„ï¼›å¯ä»¥å¦‚ä¸‹åˆ›å»ºæ— é™å¾ªç¯ï¼š 12345// infinite loopfor ( ; ; ) &#123; // your code goes here&#125; forè¯­å¥è¿˜æœ‰å¦ä¸€ç§å½¢å¼ï¼Œè®¾è®¡ç”¨äºé€šè¿‡ Collections å’Œ arrays è¿›è¡Œè¿­ä»£ã€‚è¿™ç§å½¢å¼æœ‰æ—¶è¢«ç§°ä¸ºå¢å¼ºçš„forè¯­å¥ï¼Œå¯ç”¨äºä½¿å¾ªç¯æ›´ç´§å‡‘ã€æ›´æ˜“äºé˜…è¯»ã€‚ä¸ºäº†æ¼”ç¤ºï¼Œè¯·è€ƒè™‘ä»¥ä¸‹æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«æ•°å­—1åˆ°10ï¼š 1int[] numbers = &#123;1,2,3,4,5,6,7,8,9,10&#125;; ä»¥ä¸‹ç¨‹åºEnhancedForDemoä½¿ç”¨å¢å¼ºçš„foråœ¨æ•°ç»„ä¸­å¾ªç¯ï¼š 123456789class EnhancedForDemo &#123; public static void main(String[] args)&#123; int[] numbers = &#123;1,2,3,4,5,6,7,8,9,10&#125;; for (int item : numbers) &#123; System.out.println(&quot;Count is: &quot; + item); &#125; &#125;&#125; åœ¨æœ¬ä¾‹ä¸­ï¼Œå˜é‡é¡¹ä¿å­˜æ•°å­—æ•°ç»„ä¸­çš„å½“å‰å€¼ã€‚æ­¤ç¨‹åºçš„è¾“å‡ºä¸ä¹‹å‰ç›¸åŒï¼š 12345678910Count is: 1Count is: 2Count is: 3Count is: 4Count is: 5Count is: 6Count is: 7Count is: 8Count is: 9Count is: 10 æˆ‘ä»¬å»ºè®®å°½å¯èƒ½ä½¿ç”¨forè¯­å¥çš„è¿™ç§å½¢å¼ï¼Œè€Œä¸æ˜¯ä¸€èˆ¬å½¢å¼ã€‚ åˆ†æ”¯è¯­å¥breakè¯­å¥breakè¯­å¥æœ‰ä¸¤ç§å½¢å¼ï¼šæ ‡è®°å’Œæœªæ ‡è®°ã€‚æ‚¨åœ¨å‰é¢å…³äºswitchè¯­å¥çš„è®¨è®ºä¸­çœ‹åˆ°äº†æœªæ ‡è®°çš„è¡¨å•ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æœªæ ‡è®°çš„ä¸­æ–­æ¥ç»ˆæ­¢forã€whileæˆ–do whileå¾ªç¯ï¼Œå¦‚ä»¥ä¸‹BreakDemoç¨‹åºæ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526class BreakDemo &#123; public static void main(String[] args) &#123; int[] arrayOfInts = &#123; 32, 87, 3, 589, 12, 1076, 2000, 8, 622, 127 &#125;; int searchfor = 12; int i; boolean foundIt = false; for (i = 0; i &lt; arrayOfInts.length; i++) &#123; if (arrayOfInts[i] == searchfor) &#123; foundIt = true; break; &#125; &#125; if (foundIt) &#123; System.out.println(&quot;Found &quot; + searchfor + &quot; at index &quot; + i); &#125; else &#123; System.out.println(searchfor + &quot; not in the array&quot;); &#125; &#125;&#125; è¯¥ç¨‹åºåœ¨æ•°ç»„ä¸­æœç´¢æ•°å­—12ã€‚ä»¥ç²—ä½“æ˜¾ç¤ºçš„breakè¯­å¥åœ¨æ‰¾åˆ°è¯¥å€¼æ—¶ç»ˆæ­¢forå¾ªç¯ã€‚ç„¶åï¼Œæ§åˆ¶æµè½¬ç§»åˆ°forå¾ªç¯ä¹‹åçš„è¯­å¥ã€‚è¯¥ç¨‹åºçš„è¾“å‡ºæ˜¯ï¼š 1Found 12 at index 4 æœªæ ‡è®°çš„breakè¯­å¥ç»ˆæ­¢æœ€å†…éƒ¨çš„switchã€forã€whileæˆ–do whileè¯­å¥ï¼Œä½†æ ‡è®°çš„brearkç»ˆæ­¢å¤–éƒ¨è¯­å¥ã€‚ä¸‹é¢çš„ç¨‹åºBreakWithLabelDemoä¸å‰é¢çš„ç¨‹åºç±»ä¼¼ï¼Œä½†ä½¿ç”¨åµŒå¥—forå¾ªç¯æœç´¢äºŒç»´æ•°ç»„ä¸­çš„å€¼ã€‚å½“æ‰¾åˆ°è¯¥å€¼æ—¶ï¼Œæ ‡è®°ä¸ºbreakå°†ç»ˆæ­¢å¤–éƒ¨forå¾ªç¯ï¼ˆæ ‡è®°ä¸ºâ€œsearchâ€ï¼‰ï¼š 1234567891011121314151617181920212223242526272829303132class BreakWithLabelDemo &#123; public static void main(String[] args) &#123; int[][] arrayOfInts = &#123; &#123; 32, 87, 3, 589 &#125;, &#123; 12, 1076, 2000, 8 &#125;, &#123; 622, 127, 77, 955 &#125; &#125;; int searchfor = 12; int i; int j = 0; boolean foundIt = false; search: for (i = 0; i &lt; arrayOfInts.length; i++) &#123; for (j = 0; j &lt; arrayOfInts[i].length; j++) &#123; if (arrayOfInts[i][j] == searchfor) &#123; foundIt = true; break search; &#125; &#125; &#125; if (foundIt) &#123; System.out.println(&quot;Found &quot; + searchfor + &quot; at &quot; + i + &quot;, &quot; + j); &#125; else &#123; System.out.println(searchfor + &quot; not in the array&quot;); &#125; &#125;&#125; è¿™æ˜¯ç¨‹åºçš„è¾“å‡ºã€‚ 1Found 12 at 1, 0 breakè¯­å¥ç»ˆæ­¢æ ‡è®°è¯­å¥ï¼›å®ƒä¸ä¼šå°†æ§åˆ¶æµä¼ é€’åˆ°æ ‡ç­¾ã€‚æ§åˆ¶æµè¢«è½¬ç§»åˆ°ç´§è·Ÿåœ¨æ ‡è®°ï¼ˆç»ˆæ­¢ï¼‰è¯­å¥ä¹‹åçš„è¯­å¥ã€‚ continueè¯­å¥continueè¯­å¥è·³è¿‡forã€whileæˆ–do whileå¾ªç¯çš„å½“å‰è¿­ä»£ã€‚æœªæ ‡è®°çš„è¡¨å•è·³åˆ°æœ€å†…å±‚å¾ªç¯ä½“çš„æœ«å°¾ï¼Œå¹¶è®¡ç®—æ§åˆ¶å¾ªç¯çš„å¸ƒå°”è¡¨è¾¾å¼ã€‚ä¸‹é¢çš„ç¨‹åºContinueDemoé€ä¸ªå¤„ç†å­—ç¬¦ä¸²ï¼Œè®¡ç®—å­—æ¯â€œpâ€çš„å‡ºç°æ¬¡æ•°ã€‚å¦‚æœå½“å‰å­—ç¬¦ä¸æ˜¯pï¼Œcontinueè¯­å¥å°†è·³è¿‡å¾ªç¯çš„å…¶ä½™éƒ¨åˆ†ï¼Œå¹¶è½¬åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚æœæ˜¯â€œpâ€ï¼Œç¨‹åºå°†å¢åŠ å­—æ¯è®¡æ•°ã€‚ 123456789101112131415161718class ContinueDemo &#123; public static void main(String[] args) &#123; String searchMe = &quot;peter piper picked a &quot; + &quot;peck of pickled peppers&quot;; int max = searchMe.length(); int numPs = 0; for (int i = 0; i &lt; max; i++) &#123; // interested only in p&#x27;s if (searchMe.charAt(i) != &#x27;p&#x27;) continue; // process p&#x27;s numPs++; &#125; System.out.println(&quot;Found &quot; + numPs + &quot; p&#x27;s in the string.&quot;); &#125;&#125; ä»¥ä¸‹æ˜¯è¯¥ç¨‹åºçš„è¾“å‡ºï¼š 1Found 9 p&#x27;s in the string. è¦æ›´æ¸…æ¥šåœ°çœ‹åˆ°è¿™ç§æ•ˆæœï¼Œè¯·å°è¯•åˆ é™¤continueè¯­å¥å¹¶é‡æ–°ç¼–è¯‘ã€‚å½“ä½ å†æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼Œè®¡æ•°ä¼šå‡ºé”™ï¼Œè¯´å®ƒæ‰¾åˆ°äº†35ä¸ªpè€Œä¸æ˜¯9ã€‚ å¸¦æ ‡ç­¾çš„continueè¯­å¥è·³è¿‡ç”¨ç»™å®šæ ‡ç­¾æ ‡è®°çš„å¤–éƒ¨å¾ªç¯çš„å½“å‰è¿­ä»£ã€‚ä¸‹é¢çš„ç¤ºä¾‹ç¨‹åºContinueWithLabelDemoä½¿ç”¨åµŒå¥—å¾ªç¯åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æœç´¢å­å­—ç¬¦ä¸²ã€‚éœ€è¦ä¸¤ä¸ªåµŒå¥—å¾ªç¯ï¼šä¸€ä¸ªè¿­ä»£å­å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªè¿­ä»£æ­£åœ¨æœç´¢çš„å­—ç¬¦ä¸²ã€‚ä¸‹é¢çš„ç¨‹åºContinueWithLabelDemoä½¿ç”¨continueçš„æ ‡è®°å½¢å¼è·³è¿‡å¤–éƒ¨å¾ªç¯ä¸­çš„è¿­ä»£ã€‚ 1234567891011121314151617181920212223242526class ContinueWithLabelDemo &#123; public static void main(String[] args) &#123; String searchMe = &quot;Look for a substring in me&quot;; String substring = &quot;sub&quot;; boolean foundIt = false; int max = searchMe.length() - substring.length(); test: for (int i = 0; i &lt;= max; i++) &#123; int n = substring.length(); int j = i; int k = 0; while (n-- != 0) &#123; if (searchMe.charAt(j++) != substring.charAt(k++)) &#123; continue test; &#125; &#125; foundIt = true; break test; &#125; System.out.println(foundIt ? &quot;Found it&quot; : &quot;Didn&#x27;t find it&quot;); &#125;&#125; è¿™æ˜¯è¿™ä¸ªç¨‹åºçš„è¾“å‡ºï¼š 1Found it return è¯­å¥åˆ†æ”¯è¯­å¥çš„æœ€åä¸€ä¸ªæ˜¯returnè¯­å¥ã€‚returnè¯­å¥ä»å½“å‰æ–¹æ³•é€€å‡ºï¼Œæ§åˆ¶æµè¿”å›åˆ°è°ƒç”¨è¯¥æ–¹æ³•çš„ä½ç½®ã€‚returnè¯­å¥æœ‰ä¸¤ç§å½¢å¼ï¼šä¸€ç§è¿”å›å€¼ï¼Œå¦ä¸€ç§ä¸è¿”å›å€¼ã€‚è¦è¿”å›å€¼ï¼Œåªéœ€å°†å€¼ï¼ˆæˆ–è®¡ç®—å€¼çš„è¡¨è¾¾å¼ï¼‰æ”¾åœ¨returnå…³é”®å­—ä¹‹åã€‚ 1return ++count; è¿”å›å€¼çš„æ•°æ®ç±»å‹å¿…é¡»ä¸æ–¹æ³•å£°æ˜çš„è¿”å›å€¼çš„ç±»å‹åŒ¹é…ã€‚å½“æ–¹æ³•å£°æ˜ä¸ºvoidæ—¶ï¼Œä½¿ç”¨ä¸è¿”å›å€¼çš„è¿”å›å½¢å¼ã€‚ 1return; Classes and Objects è¯¾ç¨‹å°†æ¶µç›–æ‚¨éœ€è¦äº†è§£çš„å…³äºç¼–å†™æ–¹æ³•çš„æ‰€æœ‰å†…å®¹ã€‚ æ§åˆ¶æµç¨‹è¯­å¥æ€»ç»“if-thenè¯­å¥æ˜¯æ‰€æœ‰æ§åˆ¶æµè¯­å¥ä¸­æœ€åŸºæœ¬çš„ã€‚å®ƒå‘Šè¯‰æ‚¨çš„ç¨‹åºåªæœ‰åœ¨ç‰¹å®šæµ‹è¯•çš„ç»“æœä¸ºtrueæ—¶æ‰æ‰§è¡ŒæŸæ®µä»£ç ã€‚å½“â€œifâ€å­å¥çš„è®¡ç®—ç»“æœä¸ºfalseæ—¶ï¼Œif-then-elseè¯­å¥æä¾›äº†æ‰§è¡Œçš„è¾…åŠ©è·¯å¾„ã€‚ä¸if-thenå’Œif-then-elseä¸åŒï¼Œswitchè¯­å¥å…è®¸ä»»æ„æ•°é‡çš„å¯èƒ½æ‰§è¡Œè·¯å¾„ã€‚whileå’Œdo whileè¯­å¥åœ¨ç‰¹å®šæ¡ä»¶ä¸ºçœŸæ—¶è¿ç»­æ‰§è¡Œä¸€ä¸ªè¯­å¥å—ã€‚do-whileå’Œwhileçš„åŒºåˆ«åœ¨äºï¼Œdo-whereåœ¨å¾ªç¯çš„åº•éƒ¨è€Œä¸æ˜¯é¡¶éƒ¨è®¡ç®—å…¶è¡¨è¾¾å¼ã€‚å› æ­¤ï¼Œdoå—ä¸­çš„è¯­å¥æ€»æ˜¯è‡³å°‘æ‰§è¡Œä¸€æ¬¡ã€‚forè¯­å¥æä¾›äº†ä¸€ç§ç´§å‡‘çš„æ–¹æ³•æ¥è¿­ä»£ä¸€ç³»åˆ—å€¼ã€‚å®ƒæœ‰ä¸¤ç§å½¢å¼ï¼Œå…¶ä¸­ä¸€ç§æ˜¯ä¸ºåœ¨é›†åˆå’Œæ•°ç»„ä¹‹é—´å¾ªç¯è€Œè®¾è®¡çš„ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"}]}],"categories":[{"name":"åˆ›ä¸š","slug":"åˆ›ä¸š","permalink":"https://guoshunfa.com/categories/%E5%88%9B%E4%B8%9A/"},{"name":"å¤ç›˜","slug":"å¤ç›˜","permalink":"https://guoshunfa.com/categories/%E5%A4%8D%E7%9B%98/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/categories/SpringBoot/"},{"name":"æœåŠ¡å™¨ç®¡ç†","slug":"æœåŠ¡å™¨ç®¡ç†","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"},{"name":"å¨±ä¹","slug":"å¨±ä¹","permalink":"https://guoshunfa.com/categories/%E5%A8%B1%E4%B9%90/"},{"name":"é˜…è¯»","slug":"é˜…è¯»","permalink":"https://guoshunfa.com/categories/%E9%98%85%E8%AF%BB/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"æœåŠ¡","slug":"æœåŠ¡","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1/"},{"name":"è½¯ä»¶ä½¿ç”¨","slug":"è½¯ä»¶ä½¿ç”¨","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"},{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/"},{"name":"æ­å»ºå•ä½“SpringBooté¡¹ç›®","slug":"æŠ€æœ¯/æ­å»ºå•ä½“SpringBooté¡¹ç›®","permalink":"https://guoshunfa.com/categories/%E6%8A%80%E6%9C%AF/%E6%90%AD%E5%BB%BA%E5%8D%95%E4%BD%93SpringBoot%E9%A1%B9%E7%9B%AE/"},{"name":"æœåŠ¡&ç»„ä»¶","slug":"æœåŠ¡-ç»„ä»¶","permalink":"https://guoshunfa.com/categories/%E6%9C%8D%E5%8A%A1-%E7%BB%84%E4%BB%B6/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://guoshunfa.com/categories/%E7%AE%97%E6%B3%95/"},{"name":"HTML/CSS/JavaScript","slug":"HTML-CSS-JavaScript","permalink":"https://guoshunfa.com/categories/HTML-CSS-JavaScript/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/categories/Java/"},{"name":"Python","slug":"Python","permalink":"https://guoshunfa.com/categories/Python/"},{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/categories/Swift/"},{"name":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","slug":"è½¯ä»¶æŠ€æœ¯æ¡†æ¶","permalink":"https://guoshunfa.com/categories/%E8%BD%AF%E4%BB%B6%E6%8A%80%E6%9C%AF%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"çŸ¥è¯†","slug":"çŸ¥è¯†","permalink":"https://guoshunfa.com/tags/%E7%9F%A5%E8%AF%86/"},{"name":"æ€»ç»“","slug":"æ€»ç»“","permalink":"https://guoshunfa.com/tags/%E6%80%BB%E7%BB%93/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"https://guoshunfa.com/tags/SpringBoot/"},{"name":"Java","slug":"Java","permalink":"https://guoshunfa.com/tags/Java/"},{"name":"Quartz","slug":"Quartz","permalink":"https://guoshunfa.com/tags/Quartz/"},{"name":"Swagger","slug":"Swagger","permalink":"https://guoshunfa.com/tags/Swagger/"},{"name":"å®å¡”","slug":"å®å¡”","permalink":"https://guoshunfa.com/tags/%E5%AE%9D%E5%A1%94/"},{"name":"Linux","slug":"Linux","permalink":"https://guoshunfa.com/tags/Linux/"},{"name":"éŸ©å‰§","slug":"éŸ©å‰§","permalink":"https://guoshunfa.com/tags/%E9%9F%A9%E5%89%A7/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"https://guoshunfa.com/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"å¿ƒç†","slug":"å¿ƒç†","permalink":"https://guoshunfa.com/tags/%E5%BF%83%E7%90%86/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://guoshunfa.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"ä¹è§‚é”","slug":"ä¹è§‚é”","permalink":"https://guoshunfa.com/tags/%E4%B9%90%E8%A7%82%E9%94%81/"},{"name":"å¹¶å‘","slug":"å¹¶å‘","permalink":"https://guoshunfa.com/tags/%E5%B9%B6%E5%8F%91/"},{"name":"è§£å†³æ–¹æ¡ˆ","slug":"è§£å†³æ–¹æ¡ˆ","permalink":"https://guoshunfa.com/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"name":"å›¾åºŠ","slug":"å›¾åºŠ","permalink":"https://guoshunfa.com/tags/%E5%9B%BE%E5%BA%8A/"},{"name":"Mysql","slug":"Mysql","permalink":"https://guoshunfa.com/tags/Mysql/"},{"name":"Oracle","slug":"Oracle","permalink":"https://guoshunfa.com/tags/Oracle/"},{"name":"Redis","slug":"Redis","permalink":"https://guoshunfa.com/tags/Redis/"},{"name":"SQL","slug":"SQL","permalink":"https://guoshunfa.com/tags/SQL/"},{"name":"mac","slug":"mac","permalink":"https://guoshunfa.com/tags/mac/"},{"name":"docker","slug":"docker","permalink":"https://guoshunfa.com/tags/docker/"},{"name":"Shell","slug":"Shell","permalink":"https://guoshunfa.com/tags/Shell/"},{"name":"Expect","slug":"Expect","permalink":"https://guoshunfa.com/tags/Expect/"},{"name":"IDEA","slug":"IDEA","permalink":"https://guoshunfa.com/tags/IDEA/"},{"name":"Debug","slug":"Debug","permalink":"https://guoshunfa.com/tags/Debug/"},{"name":"Maven","slug":"Maven","permalink":"https://guoshunfa.com/tags/Maven/"},{"name":"æ’ä»¶","slug":"æ’ä»¶","permalink":"https://guoshunfa.com/tags/%E6%8F%92%E4%BB%B6/"},{"name":"SpringSecurity","slug":"SpringSecurity","permalink":"https://guoshunfa.com/tags/SpringSecurity/"},{"name":"é›†æˆ","slug":"é›†æˆ","permalink":"https://guoshunfa.com/tags/%E9%9B%86%E6%88%90/"},{"name":"ç”¨æˆ·æƒé™éªŒè¯","slug":"ç”¨æˆ·æƒé™éªŒè¯","permalink":"https://guoshunfa.com/tags/%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E9%AA%8C%E8%AF%81/"},{"name":"Scheduled","slug":"Scheduled","permalink":"https://guoshunfa.com/tags/Scheduled/"},{"name":"å®šæ—¶å™¨","slug":"å®šæ—¶å™¨","permalink":"https://guoshunfa.com/tags/%E5%AE%9A%E6%97%B6%E5%99%A8/"},{"name":"Logback","slug":"Logback","permalink":"https://guoshunfa.com/tags/Logback/"},{"name":"quartz","slug":"quartz","permalink":"https://guoshunfa.com/tags/quartz/"},{"name":"spring-boot","slug":"spring-boot","permalink":"https://guoshunfa.com/tags/spring-boot/"},{"name":"Kafka","slug":"Kafka","permalink":"https://guoshunfa.com/tags/Kafka/"},{"name":"Activiti7","slug":"Activiti7","permalink":"https://guoshunfa.com/tags/Activiti7/"},{"name":"Druid","slug":"Druid","permalink":"https://guoshunfa.com/tags/Druid/"},{"name":"MongoDB","slug":"MongoDB","permalink":"https://guoshunfa.com/tags/MongoDB/"},{"name":"mysql","slug":"mysql","permalink":"https://guoshunfa.com/tags/mysql/"},{"name":"Mybatis","slug":"Mybatis","permalink":"https://guoshunfa.com/tags/Mybatis/"},{"name":"æŒä¹…å±‚æ¡†æ¶","slug":"æŒä¹…å±‚æ¡†æ¶","permalink":"https://guoshunfa.com/tags/%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/"},{"name":"MybatisPlus","slug":"MybatisPlus","permalink":"https://guoshunfa.com/tags/MybatisPlus/"},{"name":"FreeMarker","slug":"FreeMarker","permalink":"https://guoshunfa.com/tags/FreeMarker/"},{"name":"æ¨¡ç‰ˆå¼•æ“","slug":"æ¨¡ç‰ˆå¼•æ“","permalink":"https://guoshunfa.com/tags/%E6%A8%A1%E7%89%88%E5%BC%95%E6%93%8E/"},{"name":"TestNG","slug":"TestNG","permalink":"https://guoshunfa.com/tags/TestNG/"},{"name":"æµ‹è¯•","slug":"æµ‹è¯•","permalink":"https://guoshunfa.com/tags/%E6%B5%8B%E8%AF%95/"},{"name":"Hutool","slug":"Hutool","permalink":"https://guoshunfa.com/tags/Hutool/"},{"name":"FastJson","slug":"FastJson","permalink":"https://guoshunfa.com/tags/FastJson/"},{"name":"Json","slug":"Json","permalink":"https://guoshunfa.com/tags/Json/"},{"name":"Profile","slug":"Profile","permalink":"https://guoshunfa.com/tags/Profile/"},{"name":"Jsoup","slug":"Jsoup","permalink":"https://guoshunfa.com/tags/Jsoup/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://guoshunfa.com/tags/%E7%88%AC%E8%99%AB/"},{"name":"Arthas","slug":"Arthas","permalink":"https://guoshunfa.com/tags/Arthas/"},{"name":"Git","slug":"Git","permalink":"https://guoshunfa.com/tags/Git/"},{"name":"Gitlab","slug":"Gitlab","permalink":"https://guoshunfa.com/tags/Gitlab/"},{"name":"Docker","slug":"Docker","permalink":"https://guoshunfa.com/tags/Docker/"},{"name":"GitlabRunner","slug":"GitlabRunner","permalink":"https://guoshunfa.com/tags/GitlabRunner/"},{"name":"gitlab","slug":"gitlab","permalink":"https://guoshunfa.com/tags/gitlab/"},{"name":"Jenkins","slug":"Jenkins","permalink":"https://guoshunfa.com/tags/Jenkins/"},{"name":"Nexus","slug":"Nexus","permalink":"https://guoshunfa.com/tags/Nexus/"},{"name":"Nginx","slug":"Nginx","permalink":"https://guoshunfa.com/tags/Nginx/"},{"name":"éƒ¨ç½²","slug":"éƒ¨ç½²","permalink":"https://guoshunfa.com/tags/%E9%83%A8%E7%BD%B2/"},{"name":"Opengrok","slug":"Opengrok","permalink":"https://guoshunfa.com/tags/Opengrok/"},{"name":"SVN","slug":"SVN","permalink":"https://guoshunfa.com/tags/SVN/"},{"name":"Tomcat","slug":"Tomcat","permalink":"https://guoshunfa.com/tags/Tomcat/"},{"name":"HTML/CSS/JavaScript","slug":"HTML-CSS-JavaScript","permalink":"https://guoshunfa.com/tags/HTML-CSS-JavaScript/"},{"name":"ç»„ä»¶åº“","slug":"ç»„ä»¶åº“","permalink":"https://guoshunfa.com/tags/%E7%BB%84%E4%BB%B6%E5%BA%93/"},{"name":"PubSubJS","slug":"PubSubJS","permalink":"https://guoshunfa.com/tags/PubSubJS/"},{"name":"iframe","slug":"iframe","permalink":"https://guoshunfa.com/tags/iframe/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://guoshunfa.com/tags/%E7%AE%97%E6%B3%95/"},{"name":"åŠ å¯†","slug":"åŠ å¯†","permalink":"https://guoshunfa.com/tags/%E5%8A%A0%E5%AF%86/"},{"name":"Leetcode","slug":"Leetcode","permalink":"https://guoshunfa.com/tags/Leetcode/"},{"name":"CSS","slug":"CSS","permalink":"https://guoshunfa.com/tags/CSS/"},{"name":"less","slug":"less","permalink":"https://guoshunfa.com/tags/less/"},{"name":"JS","slug":"JS","permalink":"https://guoshunfa.com/tags/JS/"},{"name":"ç±»","slug":"ç±»","permalink":"https://guoshunfa.com/tags/%E7%B1%BB/"},{"name":"AJAX","slug":"AJAX","permalink":"https://guoshunfa.com/tags/AJAX/"},{"name":"è„šæœ¬","slug":"è„šæœ¬","permalink":"https://guoshunfa.com/tags/%E8%84%9A%E6%9C%AC/"},{"name":"Python","slug":"Python","permalink":"https://guoshunfa.com/tags/Python/"},{"name":"Scrapy","slug":"Scrapy","permalink":"https://guoshunfa.com/tags/Scrapy/"},{"name":"Swift","slug":"Swift","permalink":"https://guoshunfa.com/tags/Swift/"},{"name":"åŸºç¡€","slug":"åŸºç¡€","permalink":"https://guoshunfa.com/tags/%E5%9F%BA%E7%A1%80/"},{"name":"RESTful","slug":"RESTful","permalink":"https://guoshunfa.com/tags/RESTful/"},{"name":"Electron","slug":"Electron","permalink":"https://guoshunfa.com/tags/Electron/"},{"name":"pom.xml","slug":"pom-xml","permalink":"https://guoshunfa.com/tags/pom-xml/"},{"name":"settings.xml","slug":"settings-xml","permalink":"https://guoshunfa.com/tags/settings-xml/"},{"name":"Jar","slug":"Jar","permalink":"https://guoshunfa.com/tags/Jar/"},{"name":"MyBatis","slug":"MyBatis","permalink":"https://guoshunfa.com/tags/MyBatis/"},{"name":"mybatis-plus","slug":"mybatis-plus","permalink":"https://guoshunfa.com/tags/mybatis-plus/"},{"name":"ä»‹ç»","slug":"ä»‹ç»","permalink":"https://guoshunfa.com/tags/%E4%BB%8B%E7%BB%8D/"},{"name":"XML","slug":"XML","permalink":"https://guoshunfa.com/tags/XML/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://guoshunfa.com/tags/SpringMVC/"},{"name":"Spring","slug":"Spring","permalink":"https://guoshunfa.com/tags/Spring/"},{"name":"SpringEvent","slug":"SpringEvent","permalink":"https://guoshunfa.com/tags/SpringEvent/"},{"name":"React","slug":"React","permalink":"https://guoshunfa.com/tags/React/"},{"name":"Hook","slug":"Hook","permalink":"https://guoshunfa.com/tags/Hook/"},{"name":"è·¨åŸŸ","slug":"è·¨åŸŸ","permalink":"https://guoshunfa.com/tags/%E8%B7%A8%E5%9F%9F/"},{"name":"UIç»„ä»¶åº“","slug":"UIç»„ä»¶åº“","permalink":"https://guoshunfa.com/tags/UI%E7%BB%84%E4%BB%B6%E5%BA%93/"},{"name":"Vue","slug":"Vue","permalink":"https://guoshunfa.com/tags/Vue/"},{"name":"Vuepress","slug":"Vuepress","permalink":"https://guoshunfa.com/tags/Vuepress/"},{"name":"Wordpress","slug":"Wordpress","permalink":"https://guoshunfa.com/tags/Wordpress/"},{"name":"è‹¥ä¾","slug":"è‹¥ä¾","permalink":"https://guoshunfa.com/tags/%E8%8B%A5%E4%BE%9D/"},{"name":"å†…ç½‘","slug":"å†…ç½‘","permalink":"https://guoshunfa.com/tags/%E5%86%85%E7%BD%91/"},{"name":"å†…ç½‘ç©¿é€","slug":"å†…ç½‘ç©¿é€","permalink":"https://guoshunfa.com/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"},{"name":"sshpass","slug":"sshpass","permalink":"https://guoshunfa.com/tags/sshpass/"},{"name":"Mac","slug":"Mac","permalink":"https://guoshunfa.com/tags/Mac/"},{"name":"linux","slug":"linux","permalink":"https://guoshunfa.com/tags/linux/"},{"name":"Curl","slug":"Curl","permalink":"https://guoshunfa.com/tags/Curl/"},{"name":"Http","slug":"Http","permalink":"https://guoshunfa.com/tags/Http/"},{"name":"ssh","slug":"ssh","permalink":"https://guoshunfa.com/tags/ssh/"},{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://guoshunfa.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"},{"name":"æ ‘è“æ´¾4B","slug":"æ ‘è“æ´¾4B","permalink":"https://guoshunfa.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE4B/"},{"name":"homebrew","slug":"homebrew","permalink":"https://guoshunfa.com/tags/homebrew/"},{"name":"Nano","slug":"Nano","permalink":"https://guoshunfa.com/tags/Nano/"},{"name":"yum","slug":"yum","permalink":"https://guoshunfa.com/tags/yum/"},{"name":"å­˜å‚¨è¿‡ç¨‹","slug":"å­˜å‚¨è¿‡ç¨‹","permalink":"https://guoshunfa.com/tags/%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/"},{"name":"å­˜å‚¨å‡½æ•°","slug":"å­˜å‚¨å‡½æ•°","permalink":"https://guoshunfa.com/tags/%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0/"},{"name":"Jmeter","slug":"Jmeter","permalink":"https://guoshunfa.com/tags/Jmeter/"},{"name":"æ¦‚å¿µ","slug":"æ¦‚å¿µ","permalink":"https://guoshunfa.com/tags/%E6%A6%82%E5%BF%B5/"},{"name":"è‡ªåŠ¨åŒ–æµ‹è¯•","slug":"è‡ªåŠ¨åŒ–æµ‹è¯•","permalink":"https://guoshunfa.com/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"},{"name":"Stream","slug":"Stream","permalink":"https://guoshunfa.com/tags/Stream/"},{"name":"lambda","slug":"lambda","permalink":"https://guoshunfa.com/tags/lambda/"},{"name":"Jdk","slug":"Jdk","permalink":"https://guoshunfa.com/tags/Jdk/"},{"name":"åç¼–è¯‘å·¥å…·","slug":"åç¼–è¯‘å·¥å…·","permalink":"https://guoshunfa.com/tags/%E5%8F%8D%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7/"},{"name":"Spelè¡¨è¾¾å¼","slug":"Spelè¡¨è¾¾å¼","permalink":"https://guoshunfa.com/tags/Spel%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"name":"æ³›å‹","slug":"æ³›å‹","permalink":"https://guoshunfa.com/tags/%E6%B3%9B%E5%9E%8B/"},{"name":"oracle","slug":"oracle","permalink":"https://guoshunfa.com/tags/oracle/"},{"name":"java","slug":"java","permalink":"https://guoshunfa.com/tags/java/"},{"name":"assert","slug":"assert","permalink":"https://guoshunfa.com/tags/assert/"},{"name":"æ–­è¨€","slug":"æ–­è¨€","permalink":"https://guoshunfa.com/tags/%E6%96%AD%E8%A8%80/"},{"name":"Validator","slug":"Validator","permalink":"https://guoshunfa.com/tags/Validator/"},{"name":"JVM","slug":"JVM","permalink":"https://guoshunfa.com/tags/JVM/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"https://guoshunfa.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"å¼‚å¸¸","slug":"å¼‚å¸¸","permalink":"https://guoshunfa.com/tags/%E5%BC%82%E5%B8%B8/"},{"name":"æ¥å£","slug":"æ¥å£","permalink":"https://guoshunfa.com/tags/%E6%8E%A5%E5%8F%A3/"},{"name":"é¢å‘å¯¹è±¡","slug":"é¢å‘å¯¹è±¡","permalink":"https://guoshunfa.com/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"}]}